/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import t from"../../Color.js";import{i as r}from"../../chunks/maybe.js";import"../../chunks/colorUtils.js";import"../../chunks/mathUtils.js";import"../../chunks/vec3.js";import"../../chunks/common.js";import"../../chunks/ensureType.js";import"../../chunks/object.js";import"../../core/lang.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/string.js";async function n(r){await r.whenReady();const n=r.basemapView.baseLayerViews.map((t=>t.layer));if(!n.length){const n=getComputedStyle(r.container).backgroundColor,o=n&&new t(n);return r.get("background.color")||(o&&0!==o.a?o:null)||null}const o=(await r.takeScreenshot({format:"png",layers:n.toArray()})).data.data,s=o.length;let a=0,e=0,u=0,c=0,i=0,h=0;for(let t=0;t<s;t+=4){const r=o[t],n=o[t+1],s=o[t+2],l=o[t+3],m=l/255;a+=r*r*m,e+=n*n*m,u+=s*s*m,i+=m,l&&(c+=l,h++)}return a=Math.round(Math.sqrt(a/i)),e=Math.round(Math.sqrt(e/i)),u=Math.round(Math.sqrt(u/i)),new t([a,e,u,c/h/255])}async function o(t){if(!t)return null;const o=await n(t);return r(o)?s(o):null}function s(t){return a(t).isBright?"light":"dark"}function a(r){let{r:n,g:o,b:s,a}=r;return a<1&&(n=Math.round(a*n+255*(1-a)),o=Math.round(a*o+255*(1-a)),s=Math.round(a*s+255*(1-a))),new t({r:n,g:o,b:s})}function e(t){const{r,g:n,b:o}=a(t);return.2126*r+.7152*n+.0722*o}export{n as getBackgroundColor,o as getBackgroundColorTheme,e as getColorLuminance,s as getColorTheme};
