/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import{substitute as t}from"../intl.js";import n from"../core/Handles.js";import{g as i,d as o,i as r,a as s,e as u,r as a}from"../chunks/maybe.js";import{watch as c,syncAndInitial as l}from"../core/reactiveUtils.js";import{c as d}from"../chunks/timeUtils.js";import{property as m}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import"../chunks/ensureType.js";import{subclass as h}from"../core/accessorSupport/decorators/subclass.js";import f from"./Slider.js";import p from"./Widget.js";import v,{D as g,S as k,a as _}from"./ShadowCast/ShadowCastViewModel.js";import y from"../core/Accessor.js";import{g as w}from"../chunks/uuid.js";import{g as b,a as C}from"../chunks/locale.js";import{c as j}from"../chunks/widgetUtils.js";import{t as S}from"../chunks/jsxFactory.js";import P from"../Color.js";import{c as M}from"../chunks/asyncUtils.js";import{m as T}from"../chunks/handleUtils.js";import{throwIfAborted as z}from"../core/promiseUtils.js";import{P as D}from"../chunks/Popover.js";import{m as V}from"../chunks/messageBundle.js";import{C as x}from"../chunks/mathUtils.js";import{a as O,f as E}from"../chunks/number.js";import{g as I,f as F}from"../chunks/timeWidgetUtils.js";import L from"./support/DatePicker.js";import{H as $}from"../chunks/Heading.js";import"../chunks/Logger.js";import"../config.js";import"../chunks/object.js";import"../chunks/string.js";import"../chunks/messages.js";import"../core/Error.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../chunks/assets.js";import"../chunks/jsonMap.js";import"../chunks/watch.js";import"../chunks/ArrayPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/tracking.js";import"../chunks/metadata.js";import"../core/Collection.js";import"../core/Evented.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";import"../core/accessorSupport/decorators/cast.js";import"./Slider/SliderViewModel.js";import"../chunks/domUtils.js";import"../core/Promise.js";import"../chunks/projector.js";import"../chunks/jsxWidgetSupport.js";import"../chunks/screenUtils.js";import"../chunks/vec3.js";import"../chunks/common.js";import"../chunks/earthUtils.js";import"../geometry/Point.js";import"../chunks/reader.js";import"../chunks/writer.js";import"../geometry/Geometry.js";import"../core/JSONSupport.js";import"../geometry/SpatialReference.js";import"../geometry/support/webMercatorUtils.js";import"../chunks/Ellipsoid.js";import"../chunks/projectionEllipsoid.js";import"../chunks/ShadowCastVisualizeTechniqueConfiguration.js";import"../chunks/mat4.js";import"../chunks/mat4f64.js";import"../chunks/ViewingMode.js";import"../chunks/mathUtils2.js";import"../chunks/ShaderTechniqueConfiguration.js";import"../chunks/collectionUtils.js";import"../chunks/throttle.js";import"../chunks/traversalUtils.js";import"../chunks/colorUtils.js";import"./support/DatePickerViewModel.js";import"./support/DateTimeElementViewModel.js";import"../chunks/accessibleHandler.js";import"../chunks/datetime.js";const R="esri-shadow-cast",A={base:R,esriWidget:"esri-widget--panel esri-widget",esriWidgetDisabled:"esri-widget--disabled",widgetIcon:"esri-icon-measure-building-height-shadow",timeRange:`${R}__time-range`,timeRangeIndicator:`${R}__time-range__indicator`,timeRangePrimaryTick:"primary-tick",timeRangePrimaryTickLabel:"primary-tick-label",timeRangeSecondaryTick:"secondary-tick",timeRangeAMPMLabel:"primary-tick__ampm",datePickerContainer:`${R}__date-picker-container`,visualization:`${R}__visualization`,visualizationSelect:`${R}__visualization__select`,visualizationConfigHidden:`${R}__visualization__config--hidden`},H=`${R}__tz-picker`,U={base:H,select:`${H}__select`,selectFocused:`${H}__select--focused`,hiddenSelect:`${H}__hidden-select`},W=`${R}__label`,N=`${R}__threshold-config`,B={base:N,valueLabel:`${N}__value-label`},q=`${R}__duration-config`,G={base:q,radioGroup:`${q}__radio-group`},K={base:`${R}__discrete-config`},J=`${R}__tooltip`,Z={base:J,content:`${J}__content`};let Q=class extends y{constructor(){super(...arguments),this.timeRangeSlider=!0,this.timezone=!0,this.datePicker=!0,this.visualizationOptions=!0,this.colorPicker=!0,this.tooltip=!0}};e([m()],Q.prototype,"timeRangeSlider",void 0),e([m()],Q.prototype,"timezone",void 0),e([m()],Q.prototype,"datePicker",void 0),e([m()],Q.prototype,"visualizationOptions",void 0),e([m()],Q.prototype,"colorPicker",void 0),e([m()],Q.prototype,"tooltip",void 0),Q=e([h("esri.widgets.ShadowCast.ShadowCastVisibleElements")],Q);const X=Q;var Y,ee={exports:{}};Y=ee,function(){var e={y:function(e){return 1===e?"χρόνος":"χρόνια"},mo:function(e){return 1===e?"μήνας":"μήνες"},w:function(e){return 1===e?"εβδομάδα":"εβδομάδες"},d:function(e){return 1===e?"μέρα":"μέρες"},h:function(e){return 1===e?"ώρα":"ώρες"},m:function(e){return 1===e?"λεπτό":"λεπτά"},s:function(e){return 1===e?"δευτερόλεπτο":"δευτερόλεπτα"},ms:function(e){return(1===e?"χιλιοστό":"χιλιοστά")+" του δευτερολέπτου"},decimal:","},t=["۰","١","٢","٣","٤","٥","٦","٧","٨","٩"],n={af:{y:"jaar",mo:function(e){return"maand"+(1===e?"":"e")},w:function(e){return 1===e?"week":"weke"},d:function(e){return 1===e?"dag":"dae"},h:function(e){return 1===e?"uur":"ure"},m:function(e){return 1===e?"minuut":"minute"},s:function(e){return"sekonde"+(1===e?"":"s")},ms:function(e){return"millisekonde"+(1===e?"":"s")},decimal:","},ar:{y:function(e){return["سنة","سنتان","سنوات"][u(e)]},mo:function(e){return["شهر","شهران","أشهر"][u(e)]},w:function(e){return["أسبوع","أسبوعين","أسابيع"][u(e)]},d:function(e){return["يوم","يومين","أيام"][u(e)]},h:function(e){return["ساعة","ساعتين","ساعات"][u(e)]},m:function(e){return["دقيقة","دقيقتان","دقائق"][u(e)]},s:function(e){return["ثانية","ثانيتان","ثواني"][u(e)]},ms:function(e){return["جزء من الثانية","جزآن من الثانية","أجزاء من الثانية"][u(e)]},decimal:",",delimiter:" و ",_formatCount:function(e,n){for(var i=s(t,{".":n}),o=e.toString().split(""),r=0;r<o.length;r++){var u=o[r];f(i,u)&&(o[r]=i[u])}return o.join("")}},bg:{y:function(e){return["години","година","години"][c(e)]},mo:function(e){return["месеца","месец","месеца"][c(e)]},w:function(e){return["седмици","седмица","седмици"][c(e)]},d:function(e){return["дни","ден","дни"][c(e)]},h:function(e){return["часа","час","часа"][c(e)]},m:function(e){return["минути","минута","минути"][c(e)]},s:function(e){return["секунди","секунда","секунди"][c(e)]},ms:function(e){return["милисекунди","милисекунда","милисекунди"][c(e)]},decimal:","},bn:{y:"বছর",mo:"মাস",w:"সপ্তাহ",d:"দিন",h:"ঘন্টা",m:"মিনিট",s:"সেকেন্ড",ms:"মিলিসেকেন্ড"},ca:{y:function(e){return"any"+(1===e?"":"s")},mo:function(e){return"mes"+(1===e?"":"os")},w:function(e){return"setman"+(1===e?"a":"es")},d:function(e){return"di"+(1===e?"a":"es")},h:function(e){return"hor"+(1===e?"a":"es")},m:function(e){return"minut"+(1===e?"":"s")},s:function(e){return"segon"+(1===e?"":"s")},ms:function(e){return"milisegon"+(1===e?"":"s")},decimal:","},cs:{y:function(e){return["rok","roku","roky","let"][l(e)]},mo:function(e){return["měsíc","měsíce","měsíce","měsíců"][l(e)]},w:function(e){return["týden","týdne","týdny","týdnů"][l(e)]},d:function(e){return["den","dne","dny","dní"][l(e)]},h:function(e){return["hodina","hodiny","hodiny","hodin"][l(e)]},m:function(e){return["minuta","minuty","minuty","minut"][l(e)]},s:function(e){return["sekunda","sekundy","sekundy","sekund"][l(e)]},ms:function(e){return["milisekunda","milisekundy","milisekundy","milisekund"][l(e)]},decimal:","},cy:{y:"flwyddyn",mo:"mis",w:"wythnos",d:"diwrnod",h:"awr",m:"munud",s:"eiliad",ms:"milieiliad"},da:{y:"år",mo:function(e){return"måned"+(1===e?"":"er")},w:function(e){return"uge"+(1===e?"":"r")},d:function(e){return"dag"+(1===e?"":"e")},h:function(e){return"time"+(1===e?"":"r")},m:function(e){return"minut"+(1===e?"":"ter")},s:function(e){return"sekund"+(1===e?"":"er")},ms:function(e){return"millisekund"+(1===e?"":"er")},decimal:","},de:{y:function(e){return"Jahr"+(1===e?"":"e")},mo:function(e){return"Monat"+(1===e?"":"e")},w:function(e){return"Woche"+(1===e?"":"n")},d:function(e){return"Tag"+(1===e?"":"e")},h:function(e){return"Stunde"+(1===e?"":"n")},m:function(e){return"Minute"+(1===e?"":"n")},s:function(e){return"Sekunde"+(1===e?"":"n")},ms:function(e){return"Millisekunde"+(1===e?"":"n")},decimal:","},el:e,en:{y:function(e){return"year"+(1===e?"":"s")},mo:function(e){return"month"+(1===e?"":"s")},w:function(e){return"week"+(1===e?"":"s")},d:function(e){return"day"+(1===e?"":"s")},h:function(e){return"hour"+(1===e?"":"s")},m:function(e){return"minute"+(1===e?"":"s")},s:function(e){return"second"+(1===e?"":"s")},ms:function(e){return"millisecond"+(1===e?"":"s")},decimal:"."},eo:{y:function(e){return"jaro"+(1===e?"":"j")},mo:function(e){return"monato"+(1===e?"":"j")},w:function(e){return"semajno"+(1===e?"":"j")},d:function(e){return"tago"+(1===e?"":"j")},h:function(e){return"horo"+(1===e?"":"j")},m:function(e){return"minuto"+(1===e?"":"j")},s:function(e){return"sekundo"+(1===e?"":"j")},ms:function(e){return"milisekundo"+(1===e?"":"j")},decimal:","},es:{y:function(e){return"año"+(1===e?"":"s")},mo:function(e){return"mes"+(1===e?"":"es")},w:function(e){return"semana"+(1===e?"":"s")},d:function(e){return"día"+(1===e?"":"s")},h:function(e){return"hora"+(1===e?"":"s")},m:function(e){return"minuto"+(1===e?"":"s")},s:function(e){return"segundo"+(1===e?"":"s")},ms:function(e){return"milisegundo"+(1===e?"":"s")},decimal:","},et:{y:function(e){return"aasta"+(1===e?"":"t")},mo:function(e){return"kuu"+(1===e?"":"d")},w:function(e){return"nädal"+(1===e?"":"at")},d:function(e){return"päev"+(1===e?"":"a")},h:function(e){return"tund"+(1===e?"":"i")},m:function(e){return"minut"+(1===e?"":"it")},s:function(e){return"sekund"+(1===e?"":"it")},ms:function(e){return"millisekund"+(1===e?"":"it")},decimal:","},eu:{y:"urte",mo:"hilabete",w:"aste",d:"egun",h:"ordu",m:"minutu",s:"segundo",ms:"milisegundo",decimal:","},fa:{y:"سال",mo:"ماه",w:"هفته",d:"روز",h:"ساعت",m:"دقیقه",s:"ثانیه",ms:"میلی ثانیه",decimal:"."},fi:{y:function(e){return 1===e?"vuosi":"vuotta"},mo:function(e){return 1===e?"kuukausi":"kuukautta"},w:function(e){return"viikko"+(1===e?"":"a")},d:function(e){return"päivä"+(1===e?"":"ä")},h:function(e){return"tunti"+(1===e?"":"a")},m:function(e){return"minuutti"+(1===e?"":"a")},s:function(e){return"sekunti"+(1===e?"":"a")},ms:function(e){return"millisekunti"+(1===e?"":"a")},decimal:","},fo:{y:"ár",mo:function(e){return 1===e?"mánaður":"mánaðir"},w:function(e){return 1===e?"vika":"vikur"},d:function(e){return 1===e?"dagur":"dagar"},h:function(e){return 1===e?"tími":"tímar"},m:function(e){return 1===e?"minuttur":"minuttir"},s:"sekund",ms:"millisekund",decimal:","},fr:{y:function(e){return"an"+(e>=2?"s":"")},mo:"mois",w:function(e){return"semaine"+(e>=2?"s":"")},d:function(e){return"jour"+(e>=2?"s":"")},h:function(e){return"heure"+(e>=2?"s":"")},m:function(e){return"minute"+(e>=2?"s":"")},s:function(e){return"seconde"+(e>=2?"s":"")},ms:function(e){return"milliseconde"+(e>=2?"s":"")},decimal:","},gr:e,he:{y:function(e){return 1===e?"שנה":"שנים"},mo:function(e){return 1===e?"חודש":"חודשים"},w:function(e){return 1===e?"שבוע":"שבועות"},d:function(e){return 1===e?"יום":"ימים"},h:function(e){return 1===e?"שעה":"שעות"},m:function(e){return 1===e?"דקה":"דקות"},s:function(e){return 1===e?"שניה":"שניות"},ms:function(e){return 1===e?"מילישנייה":"מילישניות"},decimal:"."},hr:{y:function(e){return e%10==2||e%10==3||e%10==4?"godine":"godina"},mo:function(e){return 1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci"},w:function(e){return e%10==1&&11!==e?"tjedan":"tjedna"},d:function(e){return 1===e?"dan":"dana"},h:function(e){return 1===e?"sat":2===e||3===e||4===e?"sata":"sati"},m:function(e){var t=e%10;return 2!==t&&3!==t&&4!==t||!(e<10||e>14)?"minuta":"minute"},s:function(e){var t=e%10;return 5===t||Math.floor(e)===e&&e>=10&&e<=19?"sekundi":1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi"},ms:function(e){return 1===e?"milisekunda":e%10==2||e%10==3||e%10==4?"milisekunde":"milisekundi"},decimal:","},hi:{y:"साल",mo:function(e){return 1===e?"महीना":"महीने"},w:function(e){return 1===e?"हफ़्ता":"हफ्ते"},d:"दिन",h:function(e){return 1===e?"घंटा":"घंटे"},m:"मिनट",s:"सेकंड",ms:"मिलीसेकंड",decimal:"."},hu:{y:"év",mo:"hónap",w:"hét",d:"nap",h:"óra",m:"perc",s:"másodperc",ms:"ezredmásodperc",decimal:","},id:{y:"tahun",mo:"bulan",w:"minggu",d:"hari",h:"jam",m:"menit",s:"detik",ms:"milidetik",decimal:"."},is:{y:"ár",mo:function(e){return"mánuð"+(1===e?"ur":"ir")},w:function(e){return"vik"+(1===e?"a":"ur")},d:function(e){return"dag"+(1===e?"ur":"ar")},h:function(e){return"klukkutím"+(1===e?"i":"ar")},m:function(e){return"mínút"+(1===e?"a":"ur")},s:function(e){return"sekúnd"+(1===e?"a":"ur")},ms:function(e){return"millisekúnd"+(1===e?"a":"ur")},decimal:"."},it:{y:function(e){return"ann"+(1===e?"o":"i")},mo:function(e){return"mes"+(1===e?"e":"i")},w:function(e){return"settiman"+(1===e?"a":"e")},d:function(e){return"giorn"+(1===e?"o":"i")},h:function(e){return"or"+(1===e?"a":"e")},m:function(e){return"minut"+(1===e?"o":"i")},s:function(e){return"second"+(1===e?"o":"i")},ms:function(e){return"millisecond"+(1===e?"o":"i")},decimal:","},ja:{y:"年",mo:"ヶ月",w:"週",d:"日",h:"時間",m:"分",s:"秒",ms:"ミリ秒",decimal:"."},km:{y:"ឆ្នាំ",mo:"ខែ",w:"សប្តាហ៍",d:"ថ្ងៃ",h:"ម៉ោង",m:"នាទី",s:"វិនាទី",ms:"មិល្លីវិនាទី"},kn:{y:function(e){return 1===e?"ವರ್ಷ":"ವರ್ಷಗಳು"},mo:function(e){return 1===e?"ತಿಂಗಳು":"ತಿಂಗಳುಗಳು"},w:function(e){return 1===e?"ವಾರ":"ವಾರಗಳು"},d:function(e){return 1===e?"ದಿನ":"ದಿನಗಳು"},h:function(e){return 1===e?"ಗಂಟೆ":"ಗಂಟೆಗಳು"},m:function(e){return 1===e?"ನಿಮಿಷ":"ನಿಮಿಷಗಳು"},s:function(e){return 1===e?"ಸೆಕೆಂಡ್":"ಸೆಕೆಂಡುಗಳು"},ms:function(e){return 1===e?"ಮಿಲಿಸೆಕೆಂಡ್":"ಮಿಲಿಸೆಕೆಂಡುಗಳು"}},ko:{y:"년",mo:"개월",w:"주일",d:"일",h:"시간",m:"분",s:"초",ms:"밀리 초",decimal:"."},ku:{y:"sal",mo:"meh",w:"hefte",d:"roj",h:"seet",m:"deqe",s:"saniye",ms:"mîlîçirk",decimal:","},lo:{y:"ປີ",mo:"ເດືອນ",w:"ອາທິດ",d:"ມື້",h:"ຊົ່ວໂມງ",m:"ນາທີ",s:"ວິນາທີ",ms:"ມິນລິວິນາທີ",decimal:","},lt:{y:function(e){return e%10==0||e%100>=10&&e%100<=20?"metų":"metai"},mo:function(e){return["mėnuo","mėnesiai","mėnesių"][d(e)]},w:function(e){return["savaitė","savaitės","savaičių"][d(e)]},d:function(e){return["diena","dienos","dienų"][d(e)]},h:function(e){return["valanda","valandos","valandų"][d(e)]},m:function(e){return["minutė","minutės","minučių"][d(e)]},s:function(e){return["sekundė","sekundės","sekundžių"][d(e)]},ms:function(e){return["milisekundė","milisekundės","milisekundžių"][d(e)]},decimal:","},lv:{y:function(e){return m(e)?"gads":"gadi"},mo:function(e){return m(e)?"mēnesis":"mēneši"},w:function(e){return m(e)?"nedēļa":"nedēļas"},d:function(e){return m(e)?"diena":"dienas"},h:function(e){return m(e)?"stunda":"stundas"},m:function(e){return m(e)?"minūte":"minūtes"},s:function(e){return m(e)?"sekunde":"sekundes"},ms:function(e){return m(e)?"milisekunde":"milisekundes"},decimal:","},mk:{y:function(e){return 1===e?"година":"години"},mo:function(e){return 1===e?"месец":"месеци"},w:function(e){return 1===e?"недела":"недели"},d:function(e){return 1===e?"ден":"дена"},h:function(e){return 1===e?"час":"часа"},m:function(e){return 1===e?"минута":"минути"},s:function(e){return 1===e?"секунда":"секунди"},ms:function(e){return 1===e?"милисекунда":"милисекунди"},decimal:","},mr:{y:function(e){return 1===e?"वर्ष":"वर्षे"},mo:function(e){return 1===e?"महिना":"महिने"},w:function(e){return 1===e?"आठवडा":"आठवडे"},d:"दिवस",h:"तास",m:function(e){return 1===e?"मिनिट":"मिनिटे"},s:"सेकंद",ms:"मिलिसेकंद"},ms:{y:"tahun",mo:"bulan",w:"minggu",d:"hari",h:"jam",m:"minit",s:"saat",ms:"milisaat",decimal:"."},nl:{y:"jaar",mo:function(e){return 1===e?"maand":"maanden"},w:function(e){return 1===e?"week":"weken"},d:function(e){return 1===e?"dag":"dagen"},h:"uur",m:function(e){return 1===e?"minuut":"minuten"},s:function(e){return 1===e?"seconde":"seconden"},ms:function(e){return 1===e?"milliseconde":"milliseconden"},decimal:","},no:{y:"år",mo:function(e){return"måned"+(1===e?"":"er")},w:function(e){return"uke"+(1===e?"":"r")},d:function(e){return"dag"+(1===e?"":"er")},h:function(e){return"time"+(1===e?"":"r")},m:function(e){return"minutt"+(1===e?"":"er")},s:function(e){return"sekund"+(1===e?"":"er")},ms:function(e){return"millisekund"+(1===e?"":"er")},decimal:","},pl:{y:function(e){return["rok","roku","lata","lat"][a(e)]},mo:function(e){return["miesiąc","miesiąca","miesiące","miesięcy"][a(e)]},w:function(e){return["tydzień","tygodnia","tygodnie","tygodni"][a(e)]},d:function(e){return["dzień","dnia","dni","dni"][a(e)]},h:function(e){return["godzina","godziny","godziny","godzin"][a(e)]},m:function(e){return["minuta","minuty","minuty","minut"][a(e)]},s:function(e){return["sekunda","sekundy","sekundy","sekund"][a(e)]},ms:function(e){return["milisekunda","milisekundy","milisekundy","milisekund"][a(e)]},decimal:","},pt:{y:function(e){return"ano"+(1===e?"":"s")},mo:function(e){return 1===e?"mês":"meses"},w:function(e){return"semana"+(1===e?"":"s")},d:function(e){return"dia"+(1===e?"":"s")},h:function(e){return"hora"+(1===e?"":"s")},m:function(e){return"minuto"+(1===e?"":"s")},s:function(e){return"segundo"+(1===e?"":"s")},ms:function(e){return"milissegundo"+(1===e?"":"s")},decimal:","},ro:{y:function(e){return 1===e?"an":"ani"},mo:function(e){return 1===e?"lună":"luni"},w:function(e){return 1===e?"săptămână":"săptămâni"},d:function(e){return 1===e?"zi":"zile"},h:function(e){return 1===e?"oră":"ore"},m:function(e){return 1===e?"minut":"minute"},s:function(e){return 1===e?"secundă":"secunde"},ms:function(e){return 1===e?"milisecundă":"milisecunde"},decimal:","},ru:{y:function(e){return["лет","год","года"][c(e)]},mo:function(e){return["месяцев","месяц","месяца"][c(e)]},w:function(e){return["недель","неделя","недели"][c(e)]},d:function(e){return["дней","день","дня"][c(e)]},h:function(e){return["часов","час","часа"][c(e)]},m:function(e){return["минут","минута","минуты"][c(e)]},s:function(e){return["секунд","секунда","секунды"][c(e)]},ms:function(e){return["миллисекунд","миллисекунда","миллисекунды"][c(e)]},decimal:","},sq:{y:function(e){return 1===e?"vit":"vjet"},mo:"muaj",w:"javë",d:"ditë",h:"orë",m:function(e){return"minut"+(1===e?"ë":"a")},s:function(e){return"sekond"+(1===e?"ë":"a")},ms:function(e){return"milisekond"+(1===e?"ë":"a")},decimal:","},sr:{y:function(e){return["години","година","године"][c(e)]},mo:function(e){return["месеци","месец","месеца"][c(e)]},w:function(e){return["недељи","недеља","недеље"][c(e)]},d:function(e){return["дани","дан","дана"][c(e)]},h:function(e){return["сати","сат","сата"][c(e)]},m:function(e){return["минута","минут","минута"][c(e)]},s:function(e){return["секунди","секунда","секунде"][c(e)]},ms:function(e){return["милисекунди","милисекунда","милисекунде"][c(e)]},decimal:","},ta:{y:function(e){return 1===e?"வருடம்":"ஆண்டுகள்"},mo:function(e){return 1===e?"மாதம்":"மாதங்கள்"},w:function(e){return 1===e?"வாரம்":"வாரங்கள்"},d:function(e){return 1===e?"நாள்":"நாட்கள்"},h:function(e){return 1===e?"மணி":"மணிநேரம்"},m:function(e){return"நிமிட"+(1===e?"ம்":"ங்கள்")},s:function(e){return"வினாடி"+(1===e?"":"கள்")},ms:function(e){return"மில்லி விநாடி"+(1===e?"":"கள்")}},te:{y:function(e){return"సంవత్స"+(1===e?"రం":"రాల")},mo:function(e){return"నెల"+(1===e?"":"ల")},w:function(e){return 1===e?"వారం":"వారాలు"},d:function(e){return"రోజు"+(1===e?"":"లు")},h:function(e){return"గంట"+(1===e?"":"లు")},m:function(e){return 1===e?"నిమిషం":"నిమిషాలు"},s:function(e){return 1===e?"సెకను":"సెకన్లు"},ms:function(e){return 1===e?"మిల్లీసెకన్":"మిల్లీసెకన్లు"}},uk:{y:function(e){return["років","рік","роки"][c(e)]},mo:function(e){return["місяців","місяць","місяці"][c(e)]},w:function(e){return["тижнів","тиждень","тижні"][c(e)]},d:function(e){return["днів","день","дні"][c(e)]},h:function(e){return["годин","година","години"][c(e)]},m:function(e){return["хвилин","хвилина","хвилини"][c(e)]},s:function(e){return["секунд","секунда","секунди"][c(e)]},ms:function(e){return["мілісекунд","мілісекунда","мілісекунди"][c(e)]},decimal:","},ur:{y:"سال",mo:function(e){return 1===e?"مہینہ":"مہینے"},w:function(e){return 1===e?"ہفتہ":"ہفتے"},d:"دن",h:function(e){return 1===e?"گھنٹہ":"گھنٹے"},m:"منٹ",s:"سیکنڈ",ms:"ملی سیکنڈ",decimal:"."},sk:{y:function(e){return["rok","roky","roky","rokov"][l(e)]},mo:function(e){return["mesiac","mesiace","mesiace","mesiacov"][l(e)]},w:function(e){return["týždeň","týždne","týždne","týždňov"][l(e)]},d:function(e){return["deň","dni","dni","dní"][l(e)]},h:function(e){return["hodina","hodiny","hodiny","hodín"][l(e)]},m:function(e){return["minúta","minúty","minúty","minút"][l(e)]},s:function(e){return["sekunda","sekundy","sekundy","sekúnd"][l(e)]},ms:function(e){return["milisekunda","milisekundy","milisekundy","milisekúnd"][l(e)]},decimal:","},sl:{y:function(e){return e%10==1?"leto":e%100==2?"leti":e%100==3||e%100==4||Math.floor(e)!==e&&e%100<=5?"leta":"let"},mo:function(e){return e%10==1?"mesec":e%100==2||Math.floor(e)!==e&&e%100<=5?"meseca":e%10==3||e%10==4?"mesece":"mesecev"},w:function(e){return e%10==1?"teden":e%10==2||Math.floor(e)!==e&&e%100<=4?"tedna":e%10==3||e%10==4?"tedne":"tednov"},d:function(e){return e%100==1?"dan":"dni"},h:function(e){return e%10==1?"ura":e%100==2?"uri":e%10==3||e%10==4||Math.floor(e)!==e?"ure":"ur"},m:function(e){return e%10==1?"minuta":e%10==2?"minuti":e%10==3||e%10==4||Math.floor(e)!==e&&e%100<=4?"minute":"minut"},s:function(e){return e%10==1?"sekunda":e%100==2?"sekundi":e%100==3||e%100==4||Math.floor(e)!==e?"sekunde":"sekund"},ms:function(e){return e%10==1?"milisekunda":e%100==2?"milisekundi":e%100==3||e%100==4||Math.floor(e)!==e?"milisekunde":"milisekund"},decimal:","},sv:{y:"år",mo:function(e){return"månad"+(1===e?"":"er")},w:function(e){return"veck"+(1===e?"a":"or")},d:function(e){return"dag"+(1===e?"":"ar")},h:function(e){return"timm"+(1===e?"e":"ar")},m:function(e){return"minut"+(1===e?"":"er")},s:function(e){return"sekund"+(1===e?"":"er")},ms:function(e){return"millisekund"+(1===e?"":"er")},decimal:","},sw:{y:function(e){return 1===e?"mwaka":"miaka"},mo:function(e){return 1===e?"mwezi":"miezi"},w:"wiki",d:function(e){return 1===e?"siku":"masiku"},h:function(e){return 1===e?"saa":"masaa"},m:"dakika",s:"sekunde",ms:"milisekunde",decimal:".",_numberFirst:!0},tr:{y:"yıl",mo:"ay",w:"hafta",d:"gün",h:"saat",m:"dakika",s:"saniye",ms:"milisaniye",decimal:","},th:{y:"ปี",mo:"เดือน",w:"สัปดาห์",d:"วัน",h:"ชั่วโมง",m:"นาที",s:"วินาที",ms:"มิลลิวินาที",decimal:"."},vi:{y:"năm",mo:"tháng",w:"tuần",d:"ngày",h:"giờ",m:"phút",s:"giây",ms:"mili giây",decimal:","},zh_CN:{y:"年",mo:"个月",w:"周",d:"天",h:"小时",m:"分钟",s:"秒",ms:"毫秒",decimal:"."},zh_TW:{y:"年",mo:"個月",w:"周",d:"天",h:"小時",m:"分鐘",s:"秒",ms:"毫秒",decimal:"."}};function i(e){var t=function(e,i){return function(e,t){var i,o,s;e=Math.abs(e);var u,a,c,l=function(e){var t=[e.language];if(f(e,"fallbacks")){if(!h(e.fallbacks)||!e.fallbacks.length)throw new Error("fallbacks must be an array with at least one element");t=t.concat(e.fallbacks)}for(var i=0;i<t.length;i++){var o=t[i];if(f(e.languages,o))return e.languages[o];if(f(n,o))return n[o]}throw new Error("No language found.")}(t),d=[];for(i=0,o=t.units.length;i<o;i++){if(u=t.units[i],a=t.unitMeasures[u],i+1===o)if(f(t,"maxDecimalPoints")){var m=Math.pow(10,t.maxDecimalPoints),p=e/a;c=parseFloat((Math.floor(m*p)/m).toFixed(t.maxDecimalPoints))}else c=e/a;else c=Math.floor(e/a);d.push({unitCount:c,unitName:u}),e-=c*a}var v,g,k=0;for(i=0;i<d.length;i++)if(d[i].unitCount){k=i;break}if(t.round)for(i=d.length-1;i>=0&&((s=d[i]).unitCount=Math.round(s.unitCount),0!==i);i--)g=d[i-1],v=t.unitMeasures[g.unitName]/t.unitMeasures[s.unitName],(s.unitCount%v==0||t.largest&&t.largest-1<i-k)&&(g.unitCount+=s.unitCount/v,s.unitCount=0);var _,y=[];for(i=0,d.length;i<o&&((s=d[i]).unitCount&&y.push(r(s.unitCount,s.unitName,l,t)),y.length!==t.largest);i++);return y.length?(_=f(t,"delimiter")?t.delimiter:f(l,"delimiter")?l.delimiter:", ",t.conjunction&&1!==y.length?2===y.length?y.join(t.conjunction):y.length>2?y.slice(0,-1).join(_)+(t.serialComma?",":"")+t.conjunction+y.slice(-1):void 0:y.join(_)):r(0,t.units[t.units.length-1],l,t)}(e,s({},t,i||{}))};return s(t,{language:"en",spacer:" ",conjunction:"",serialComma:!0,units:["y","mo","w","d","h","m","s"],languages:{},round:!1,unitMeasures:{y:315576e5,mo:26298e5,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3,ms:1}},e)}var o=i({});function r(e,t,n,i){var o,r;o=f(i,"decimal")?i.decimal:f(n,"decimal")?n.decimal:".",r="function"==typeof n._formatCount?n._formatCount(e,o):e.toString().replace(".",o);var s,u=n[t];return s="function"==typeof u?u(e):u,n._numberFirst?s+i.spacer+r:r+i.spacer+s}function s(e){for(var t,n=1;n<arguments.length;n++)for(var i in t=arguments[n])f(t,i)&&(e[i]=t[i]);return e}function u(e){return 1===e?0:2===e?1:e>2&&e<11?2:0}function a(e){return 1===e?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&!(e%100>10&&e%100<20)?2:3}function c(e){return Math.floor(e)!==e?2:e%100>=5&&e%100<=20||e%10>=5&&e%10<=9||e%10==0?0:e%10==1?1:e>1?2:0}function l(e){return 1===e?0:Math.floor(e)!==e?1:e%10>=2&&e%10<=4&&e%100<10?2:3}function d(e){return 1===e||e%10==1&&e%100>20?0:Math.floor(e)!==e||e%10>=2&&e%100>20||e%10>=2&&e%100<10?1:2}function m(e){return e%10==1&&e%100!=11}var h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o.getSupportedLanguages=function(){var e=[];for(var t in n)f(n,t)&&"gr"!==t&&e.push(t);return e},o.humanizer=i,Y.exports?Y.exports=o:this.humanizeDuration=o}();const te=ee.exports,ne=te.languages;function ie(e){return 1===e||void 0===e?0:e%10>1&&e%10<5&&"1"!==String(e).substr(-2,1)?1:2}function oe(e,t={},n="milliseconds"){return te(d(e,n,"milliseconds"),{language:re(),fallbacks:["en"],...t})}function re(){const e=b(),t=C(e);switch(t){case"nb":case"nn":case"no":return"no";case"pt":return"pt";case"zh":return function(e){switch(e){case"zh-HK":case"zh-TW":return"zh_TW";default:return"zh_CN"}}(e);default:return t}}function se(e,t){const{for:n,label:i,tabIndex:o,...r}=e;return S("div",{class:j(W,r?.class),key:n,...r},S("calcite-label",{for:n,scale:"s",tabIndex:o,"disable-spacing":"true"},i),t)}ne.bs={y:e=>["godina","godine","godina"][ie(e)],mo:e=>["mjesec","mjeseca","mjeseci"][ie(e)],w:e=>["sedmica","sedmice","sedmica"][ie(e)],d:e=>["dan","dana","dana"][ie(e)],h:e=>["sat","sata","sati"][ie(e)],m:e=>["minuta","minute","minuta"][ie(e)],s:e=>["sekunda","sekunde","sekundi"][ie(e)],ms:e=>["milisekunda","milisekunde","milisekundi"][ie(e)],decimal:","},ne.hr={...ne.bs,w:e=>["tjedan","tjedna","tjedana"][ie(e)]};const ue="esri-color-picker",ae={base:ue,backgroundPattern:`${ue}__bg-pattern`,toggleButton:`${ue}__toggle-button`,popover:`${ue}__popover`,opacitySliderContainer:`${ue}__opacity-slider-container`,opacitySlider:`${ue}__opacity-slider`};var ce;!function(e){e.ColorPickerFocus="hex-input-poll-timeout",e.ButtonFocusTimeout="button-focus-timeout"}(ce||(ce={}));let le=class extends p{constructor(e,t){super(e,t),this.value=new P,this.alphaEnabled=!0,this._handles=new n,this._containerElement=null,this._popover=null,this._popoverElement=null,this._buttonElement=null,this._colorPickerCreated=!1}initialize(){this.addHandles(c((()=>({container:this._containerElement,value:this.value})),(({container:e,value:t})=>{i(e,(e=>{e.style.setProperty("--esri-color-picker-value",t.toCss(!0))}))}),l))}loadDependencies(){return Promise.all([import("../chunks/calcite-button.js"),import("../chunks/calcite-color-picker.js"),import("../chunks/calcite-label.js"),import("../chunks/calcite-slider.js")])}destroy(){this._destroyPopover(),this._handles=o(this._handles),this._buttonElement=null}render(){const e=this._messages,t=r(this._popover)&&this._popover.open?e.close:e.open;return S("div",{class:this.classes(ae.base,this.class),bind:this,afterCreate:this._onContainerAfterCreate},S("div",{class:ae.backgroundPattern}),S("calcite-button",{appearance:"transparent",label:t,class:ae.toggleButton,color:"neutral",id:this.id,scale:"s",tabIndex:-1,title:t,bind:this,onclick:this._togglePopover,afterCreate:this._onButtonAfterCreate}))}_onContainerAfterCreate(e){this._containerElement=e}_onButtonAfterCreate(e){this._destroyPopover(),this._buttonElement=e,this._popover=new D({owner:this,anchorElement:e,placement:"bottom-start",renderContentFunction:this._renderPopoverContent})}_destroyPopover(){this._handles.remove(ce.ColorPickerFocus),this._popover=o(this._popover),this._popoverElement=null}_renderPopoverContent(){const e=this.value,t=this._messages;return S("div",{class:ae.popover,tabIndex:-1,bind:this,afterCreate:this._onPopoverAfterCreate,onfocusout:this._onPopoverFocusOut,onkeydown:this._onPopoverKeyDown},S("calcite-color-picker",{appearance:"minimal",hideSaved:!0,hideChannels:!0,scale:"m",value:this._colorPickerCreated?e.toCss():null,bind:this,onCalciteColorPickerInput:this._onColorInput,afterCreate:this._onColorPickerAfterCreate,afterRemoved:()=>this._colorPickerCreated=!1}),this.alphaEnabled&&S("section",{class:ae.opacitySliderContainer},S("calcite-label",{scale:"s"},t.opacity,S("calcite-slider",{class:ae.opacitySlider,labelHandles:!0,min:0,max:1,step:.01,value:e.a,bind:this,onCalciteSliderInput:this._onOpacityChange}))))}_onColorInput(e){const t=e.target.value,n="string"==typeof t?new P(t):new P;n.a=this.value.a,this._onChange(n)}_onOpacityChange(e){const t=e.target,n=this.value.clone();n.a=t.value,this._onChange(n)}_onChange(e){this.value=e,r(this.onChange)&&this.onChange(e)}_onColorPickerAfterCreate(e){this._handles.remove(ce.ColorPickerFocus);const t=M((async t=>{await(e.componentOnReady?.()),z(t),this._colorPickerCreated=!0,await new Promise((e=>requestAnimationFrame(e))),z(t),e.setFocus()}));this._handles.add(T((()=>{t.abort(),this._colorPickerCreated=!1})),ce.ColorPickerFocus)}_togglePopover(e){r(this._popover)&&this._popover.open?this._closePopover():this._openPopover()}_openPopover(){i(this._popover,(e=>e.open=!0))}_closePopover(){this._handles.remove(ce.ColorPickerFocus),i(this._popover,(e=>e.open=!1)),this._setFocusOnButton()}_setFocusOnButton(){this._handles.remove(ce.ButtonFocusTimeout),this._handles.add(function(e,t){const n=setTimeout(e,void 0);return T((()=>clearTimeout(n)))}((()=>{i(this._buttonElement,(e=>e.setFocus()))})),ce.ButtonFocusTimeout)}_onPopoverAfterCreate(e){this._popoverElement=e}_onPopoverFocusOut(e){const t=this._popoverElement;if(s(t))return;const n=e.relatedTarget;if(n&&n instanceof Node){if(t.contains(n))return;if(n===this._buttonElement||this._isAssociatedLabel(n))return}this._closePopover()}_isAssociatedLabel(e){const t=this.id,n=e.tagName?.toLowerCase();return"calcite-label"===n&&e.for===t||"label"===n&&e.htmlFor===t}_onPopoverKeyDown(e){"Escape"!==e.key&&"Enter"!==e.key||(e.stopPropagation(),this._closePopover())}};function de(e){return S(se,{for:e.id,label:e.label,tabIndex:-1},S(le,{id:e.id,value:e.value,onChange:e.onChange}))}e([m()],le.prototype,"class",void 0),e([m()],le.prototype,"value",void 0),e([m()],le.prototype,"alphaEnabled",void 0),e([m()],le.prototype,"onChange",void 0),e([m()],le.prototype,"_containerElement",void 0),e([m()],le.prototype,"_popover",void 0),e([m()],le.prototype,"_popoverElement",void 0),e([m()],le.prototype,"_buttonElement",void 0),e([m(),V("esri/widgets/support/t9n/ColorPicker")],le.prototype,"_messages",void 0),e([m()],le.prototype,"_colorPickerCreated",void 0),le=e([h("esri.widgets.support.ColorPicker")],le);let me=class extends p{constructor(e){super(e),this.colorPickerVisible=!0,this._selectId=`select-${w()}`,this._colorPickerId=`color-picker-${w()}`,this._onColorChange=e=>{this.options.color=e}}loadDependencies(){return Promise.all([import("../chunks/calcite-label.js"),import("../chunks/calcite-option.js"),import("../chunks/calcite-select.js")])}render(){const e=this._messages.discrete,t=e.intervalLabel,{color:n,interval:i,intervalOptions:o}=this.options;return S("div",{class:K.base},S(se,{for:this._selectId,label:t},S("calcite-select",{id:this._selectId,label:t,bind:this,onCalciteSelectChange:this._onIntervalChange},o.toArray().map((e=>S("calcite-option",{key:e,selected:e===i,value:String(e)},u(oe(e,{round:!0,largest:2}),"")))))),this.colorPickerVisible&&S(de,{id:this._colorPickerId,label:e.colorLabel,value:n,onChange:this._onColorChange}))}_onIntervalChange(e){const t=e.target,n=parseInt(t.selectedOption?.value,10);Number.isFinite(n)&&(this.options.interval=n)}};e([m()],me.prototype,"options",void 0),e([m()],me.prototype,"colorPickerVisible",void 0),e([m(),V("esri/widgets/ShadowCast/t9n/ShadowCast")],me.prototype,"_messages",void 0),me=e([h("esri.widgets.ShadowCast.components.DiscreteConfigurator")],me);let he=class extends p{constructor(e){super(e),this.colorPickerVisible=!0,this._modeSelectorId=`mode-selector-${w()}`,this._colorPickerId=`color-picker-${w()}`,this._onColorChange=e=>{this.options.color=e},this._setContinuous=()=>{this.options.mode=g.Continuous},this._setHourly=()=>{this.options.mode=g.Hourly}}loadDependencies(){return Promise.all([import("../chunks/calcite-button.js"),import("../chunks/calcite-label.js")])}render(){const e=this._messages.duration,{color:t,mode:n}=this.options;return S("div",{class:G.base},S(se,{for:this._modeSelectorId,label:e.modeLabel},S("div",{class:G.radioGroup},S(fe,{active:n===g.Continuous,label:e.continuousLabel,onclick:this._setContinuous}),S(fe,{active:n===g.Hourly,label:e.hourlyLabel,onclick:this._setHourly}))),this.colorPickerVisible&&S(de,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}))}};function fe({active:e,label:t,...n}){return S("calcite-button",{alignment:"center",appearance:e?"solid":"outline",scale:"s",width:"half",...n},t)}e([m()],he.prototype,"options",void 0),e([m()],he.prototype,"colorPickerVisible",void 0),e([m(),V("esri/widgets/ShadowCast/t9n/ShadowCast")],he.prototype,"_messages",void 0),he=e([h("esri.widgets.ShadowCast.components.DurationConfigurator")],he);const pe=d(1,"minutes","milliseconds"),ve=d(15,"minutes","milliseconds");let ge=class extends p{constructor(e,t){super(e,t),this.accumulatedShadowTime=null,this._messages=null}render(){const e=this._formattedContent;return S("div",{class:Z.base},e&&S("div",{class:Z.content},e))}get _formattedContent(){const e=this._messages,n=this.accumulatedShadowTime;if(s(e)||s(n))return null;const i=x(n,n<ve?pe:ve);return t(e.timeInShadow,{duration:oe(i,{round:!0,largest:2},"milliseconds")})}};e([m()],ge.prototype,"accumulatedShadowTime",void 0),e([m()],ge.prototype,"view",void 0),e([m(),V("esri/widgets/ShadowCast/t9n/ShadowCast")],ge.prototype,"_messages",void 0),e([m({readOnly:!0})],ge.prototype,"_formattedContent",null),ge=e([h("esri.widgets.ShadowCast.components.ShadowTooltipContent")],ge);let ke=class extends y{constructor(e){super(e),this._updateHandle=null,this._contentContainer=this._createContainer()}initialize(){this.container.appendChild(this._contentContainer),this._contentWidget=new ge({},this._contentContainer),this._updateHandle=c((()=>{const e=this._contentContainer,{screenPoint:t,accumulatedShadowTime:n}=this.viewModel.tooltip;return{contentContainer:e,screenPoint:t,accumulatedShadowTime:n}}),(e=>this._update(e)),l)}destroy(){this._updateHandle=a(this._updateHandle),this._contentWidget=o(this._contentWidget),this.container.contains(this._contentContainer)&&this.container.removeChild(this._contentContainer)}get testData(){return{displayedValue:"none"===this._contentContainer.style.display?null:this._contentWidget.container.innerText}}_update({contentContainer:e,screenPoint:t,accumulatedShadowTime:n}){const{style:i}=e;s(t)?i.display="none":(i.display="block",i.transform=`translate(${t.x}px, ${t.y}px)`,this._contentWidget.accumulatedShadowTime=n)}_createContainer(){const e=document.createElement("div"),{style:t}=e;return t.position="absolute",t.top="0",t.left="0",e}};e([m()],ke.prototype,"viewModel",void 0),e([m()],ke.prototype,"container",void 0),e([m()],ke.prototype,"_contentContainer",void 0),e([m()],ke.prototype,"_contentWidget",void 0),ke=e([h("esri.widgets.ShadowCast.components.ShadowTooltip")],ke);let _e=class extends p{constructor(e){super(e),this.colorPickerVisible=!0,this._valueSliderId=`value-slider-${w()}`,this._colorPickerId=`color-picker-${w()}`,this._valueSlider=new f({visibleElements:{labels:!1,rangeLabels:!1},steps:d(30,"minutes","milliseconds"),labelFormatFunction:(e,t)=>{const n=d(e,"milliseconds","hours");return"tick"===t?O(n,{maximumFractionDigits:0}):""}}),this._onColorChange=e=>{this.options.color=e}}initialize(){const e=({value:e})=>{this.options.value=e};this.addHandles([c((()=>{const{value:e,minValue:t,maxValue:n}=this.options;return{value:e,minValue:t,maxValue:n}}),(({value:e,minValue:t,maxValue:n})=>{const i=this._valueSlider;i.min=t,i.max=n,i.values=[e];const o=n-t,r=Math.floor(d(o,"milliseconds","hours"));i.tickConfigs=[{mode:"count",values:2*r+1,labelsVisible:!1},{mode:"count",values:r+1,labelsVisible:!0}]}),l),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return import("../chunks/calcite-label.js")}destroy(){this._valueSlider=o(this._valueSlider)}render(){const e=this._messages.threshold,{color:t}=this.options;return S("div",{class:B.base},S(se,{class:B.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible&&S(de,{id:this._colorPickerId,label:e.colorLabel,value:t,onChange:this._onColorChange}))}get testData(){return{valueSlider:this._valueSlider}}};e([m()],_e.prototype,"options",void 0),e([m()],_e.prototype,"colorPickerVisible",void 0),e([m()],_e.prototype,"testData",null),e([m()],_e.prototype,"_valueSlider",void 0),e([m(),V("esri/widgets/ShadowCast/t9n/ShadowCast")],_e.prototype,"_messages",void 0),_e=e([h("esri.widgets.ShadowCast.components.ThresholdConfigurator")],_e);let ye=class extends p{constructor(e,t){super(e,t),this._focused=!1}loadDependencies(){return import("../chunks/calcite-icon.js")}render(){const e=this._gmtOffsets,t=this._timezoneMessages;if(s(e)||s(t))return S("div",{class:U.base});const n=this.value,i=this._selectedItemText;return S("div",{class:U.base},S("select",{key:"hidden-select",class:U.hiddenSelect,"aria-label":t.chooseTimezone,title:t.chooseTimezone,value:String(n),bind:this,onfocus:this._onFocus,onblur:this._onBlur,onchange:this._onDropdownSelectChange},e.map((({utcOffset:e,shortWithUTC:t,long:n})=>S("option",{value:String(e)},t," - ",n)))),S("div",{key:"visible-select",class:this.classes({[U.select]:!0,[U.selectFocused]:this._focused})},i,S("calcite-icon",{icon:"chevron-down",scale:"s"})))}get _gmtOffsets(){return i(this._timezoneMessages,I)}get _selectedItem(){const e=this.value,t=this._gmtOffsets;return s(e)||s(t)?null:t.find((t=>t.utcOffset===e))}get _selectedItemText(){const e=this._selectedItem;return r(e)?e.short:""}_onDropdownSelectChange(e){const t=e.target,n=parseInt(t?.value,10);Number.isFinite(n)&&r(this.onChange)&&this.onChange(n)}_onFocus(){this._focused=!0}_onBlur(){this._focused=!1}};var we;e([m()],ye.prototype,"value",void 0),e([m()],ye.prototype,"onChange",void 0),e([m(),V("esri/widgets/support/t9n/timezone")],ye.prototype,"_timezoneMessages",void 0),e([m()],ye.prototype,"_focused",void 0),e([m({readOnly:!0})],ye.prototype,"_gmtOffsets",null),e([m({readOnly:!0})],ye.prototype,"_selectedItem",null),e([m({readOnly:!0})],ye.prototype,"_selectedItemText",null),ye=e([h("esri.widgets.ShadowCast.components.TimezonePicker")],ye),function(e){e.Slider="slider"}(we||(we={}));const be={hour:"2-digit",minute:"2-digit",timeZone:"UTC"},Ce=/(.*)\s(.*)/,je={labelFormatFunction:F,min:0,max:1439,steps:15,rangeLabelInputsEnabled:!1,visibleElements:{labels:!1,rangeLabels:!1},tickConfigs:[{mode:"position",values:[0,360,720,1080,1439],labelsVisible:!0,tickCreatedFunction:(e,t,n)=>{t.classList.add(A.timeRangePrimaryTick),n.classList.add(A.timeRangePrimaryTickLabel);const i=n.innerText.match(Ce);i&&(n.innerHTML=`${i[1]}<br><div class="${A.timeRangeAMPMLabel}">${i[2]}</div>`)}},{mode:"position",values:[120,240,480,600,840,960,1200,1320],tickCreatedFunction:(e,t)=>{t.classList.add(A.timeRangeSecondaryTick)}}]};let Se=class extends p{constructor(e,t){super(e,t),this.viewModel=null,this.headingLevel=4,this.iconClass=A.widgetIcon,this.visibleElements=new X,this._handles=new n,this._defaultViewModel=null,this._timeSlider=new f({...je,container:document.createElement("div")}),this._tooltip=null,this._onTimezoneChange=e=>{this.viewModel.utcOffset=e},this._onDateChange=e=>{this.viewModel.date=e},e?.viewModel||(this._defaultViewModel=new v({view:e?.view}),this.viewModel=this._defaultViewModel)}initialize(){this._handles.add([c((()=>({viewModel:this.viewModel,slider:this._timeSlider})),(e=>this._connectTimeSlider(e)),l),c((()=>({container:i(this.view,(e=>e.surface)),viewModel:this.viewModel,tooltipVisible:this.visibleElements.tooltip})),(({container:e,viewModel:t,tooltipVisible:n})=>{this._tooltip=o(this._tooltip),!s(e)&&n&&(this._tooltip=new ke({viewModel:t,container:e}))}),l),c((()=>({viewModel:this.viewModel,visible:this.visible})),(({viewModel:e,visible:t})=>e.setRunning(t)),l)])}destroy(){this._handles=o(this._handles),this._timeSlider=o(this._timeSlider),r(this._defaultViewModel)&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}loadDependencies(){return Promise.all([import("../chunks/calcite-select.js"),import("../chunks/calcite-option.js")])}render(){const{visibleElements:e,viewModel:t}=this,n=t.state===k.Disabled;return S("div",{key:this,class:this.classes(A.base,A.esriWidget,{[A.esriWidgetDisabled]:n})},this._renderTimeRangeSection(),e.visualizationOptions&&this._renderVisualizationOptionsSection())}get view(){return this.viewModel?.view}set view(e){this.viewModel&&(this.viewModel.view=e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get testData(){return{tooltip:this._tooltip}}_connectTimeSlider({viewModel:e,slider:t}){if(this._handles.remove(we.Slider),s(t))return;const n=e=>d(e,"milliseconds","minutes"),i=e=>d(e,"minutes","milliseconds"),o=({index:t,value:n})=>{0===t?e.startTimeOfDay=i(n):e.endTimeOfDay=i(n)};this._handles.add([c((()=>[e.startTimeOfDay,e.endTimeOfDay]),(e=>{t.values=e.map(n)}),l),t.on("thumb-change",o),t.on("thumb-drag",o),t.on("segment-drag",(()=>{[e.startTimeOfDay,e.endTimeOfDay]=t.values.map(i)}))],we.Slider)}_renderTimeRangeSection(){const{visibleElements:e}=this;return e.timeRangeSlider||e.datePicker?S("section",{key:"time-range",class:A.timeRange},S($,{level:this.headingLevel},this.messages.timeLabel),e.timeRangeSlider&&this._renderTimeRange(),e.datePicker&&this._renderDatePicker()):null}_renderTimeRange(){const{messages:e,viewModel:n,visibleElements:i}=this,{startTimeOfDay:o,endTimeOfDay:r}=n,[s,u]=[o,r].map((e=>E(new Date(e),be)));return[S("div",{key:"time-range-indicator",class:A.timeRangeIndicator},t(e.timeRange,{start:s,end:u}),i.timezone&&S(ye,{value:n.utcOffset,onChange:this._onTimezoneChange})),S("div",{key:"time-slider-container",bind:this,afterCreate:this._timeSliderContainerAfterCreate,afterRemoved:this._timeSliderContainerAfterRemoved})]}_timeSliderContainerAfterCreate(e){i(this._timeSlider,(t=>{e.appendChild(t.container)}))}_timeSliderContainerAfterRemoved(e){i(this._timeSlider,(t=>{e.removeChild(t.container)}))}_renderDatePicker(){return S("div",{key:"date-picker",class:A.datePickerContainer},S(L,{value:this.viewModel.date,onChange:this._onDateChange}))}_renderVisualizationOptionsSection(){const{headingLevel:e,messages:t,viewModel:n,visibleElements:i}=this,o=i.colorPicker,r=e=>this.classes(n.visualizationType===e?null:A.visualizationConfigHidden);return S("section",{key:"visualization",class:A.visualization},S($,{level:e},t.visualizationLabel),this._renderVisualizationSelect(),S("div",{key:"threshold-configurator",class:r(_.Threshold)},S(_e,{options:n.thresholdOptions,colorPickerVisible:o})),S("div",{key:"duration-configurator",class:r(_.Duration)},S(he,{options:n.durationOptions,colorPickerVisible:o})),S("div",{key:"discrete-configurator",class:r(_.Discrete)},S(me,{options:n.discreteOptions,colorPickerVisible:o})))}_renderVisualizationSelect(){const e=this.messages,t=this.viewModel.visualizationType;return S("calcite-select",{class:A.visualizationSelect,key:"visualization-select",label:e.visualizationLabel,bind:this,onCalciteSelectChange:this._onVisualizationTypeChange},[{type:_.Threshold,label:e.threshold.label},{type:_.Duration,label:e.duration.label},{type:_.Discrete,label:e.discrete.label}].map((({type:e,label:n})=>S("calcite-option",{value:e,selected:e===t},n))))}_onVisualizationTypeChange(e){const t=e.target.selectedOption?.value;this.viewModel.visualizationType=t??_.Threshold}};e([m()],Se.prototype,"viewModel",void 0),e([m()],Se.prototype,"view",null),e([m()],Se.prototype,"headingLevel",void 0),e([m()],Se.prototype,"iconClass",void 0),e([m()],Se.prototype,"label",null),e([m({type:X,nonNullable:!0})],Se.prototype,"visibleElements",void 0),e([m(),V("esri/widgets/ShadowCast/t9n/ShadowCast")],Se.prototype,"messages",void 0),e([m()],Se.prototype,"_defaultViewModel",void 0),e([m()],Se.prototype,"_timeSlider",void 0),e([m()],Se.prototype,"_tooltip",void 0),Se=e([h("esri.widgets.ShadowCast")],Se);const Pe=Se;export{Pe as default};
