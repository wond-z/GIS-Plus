/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../intl.js";import{b as t}from"../chunks/domUtils.js";import s from"../core/Evented.js";import{debounce as r,throwIfNotAbortError as n,i as o,o as l,eachAlways as i}from"../core/promiseUtils.js";import a from"../core/Handles.js";import"../chunks/object.js";import{clone as c}from"../core/lang.js";import{L as d}from"../chunks/Logger.js";import{d as $}from"../chunks/maybe.js";import{EsriPromiseMixin as h}from"../core/Promise.js";import{watch as u,when as m,initial as p}from"../core/reactiveUtils.js";import{g as f}from"../chunks/uuid.js";import{property as g}from"../core/accessorSupport/decorators/property.js";import{cast as y}from"../core/accessorSupport/decorators/cast.js";import{subclass as v}from"../core/accessorSupport/decorators/subclass.js";import{r as b}from"../chunks/tracking.js";import{S as w}from"../chunks/watch.js";import{d as k}from"../chunks/projector.js";import{g as N}from"../chunks/assets.js";import{makeAbsolute as j}from"../core/urlUtils.js";import{i as S,p as _,W as R}from"../chunks/jsxWidgetSupport.js";import{g as E,a as T,d as C,c as L,b as A}from"../chunks/widgetUtils.js";import{o as x}from"../chunks/locale.js";import{f as P}from"../chunks/messages.js";import"../chunks/number.js";import"../chunks/jsonMap.js";import"../chunks/string.js";import"../request.js";import"../config.js";import"../kernel.js";import"../core/Error.js";import"../core/Accessor.js";import"../chunks/get.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/metadata.js";import"../chunks/ArrayPool.js";import"../chunks/ensureType.js";import"../core/scheduling.js";import"../chunks/nextTick.js";const M={handleInterceptedEvent:(e,t,s,r)=>(e.scheduleRender(),t.properties[`on${r.type}`].apply(t.properties.bind||s,[r]))},F={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,s)=>{e.style[t]=s}},O=(e,t,s=!1)=>{let r=e;return t.forEach(((e,n)=>{const o=r?.children?(l=t=>t.domNode===e,r.children.find(l)):void 0;var l;s&&!o&&n!==t.length-1||(r=o)})),r};let B,I,U,H=!1,D=!1,q=!1,W=!1,z=null,V=!1;const G={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},J=e=>{const t=new URL(e,Qe.$resourcesUrl$);return t.origin!==Ge.location.origin?t.href:t.pathname},K="http://www.w3.org/1999/xlink",Q={},X=e=>"object"==(e=typeof e)||"function"===e,Y=(e,t,...s)=>{let r=null,n=null,o=null,l=!1,i=!1;const a=[],c=t=>{for(let s=0;s<t.length;s++)r=t[s],Array.isArray(r)?c(r):null!=r&&"boolean"!=typeof r&&((l="function"!=typeof e&&!X(r))&&(r=String(r)),l&&i?a[a.length-1].$text$+=r:a.push(l?Z(null,r):r),i=l)};if(c(s),t&&(t.key&&(n=t.key),t.name&&(o=t.name),1)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if("function"==typeof e)return e(null===t?{}:t,a,te);const d=Z(e,null);return d.$attrs$=t,a.length>0&&(d.$children$=a),d.$key$=n,d.$name$=o,d},Z=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ee={},te={forEach:(e,t)=>e.map(se).forEach(t),map:(e,t)=>e.map(se).map(t).map(re)},se=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),re=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Y(e.vtag,t,...e.vchildren||[])}const t=Z(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},ne=(e,t,s)=>{const r=e;return{emit:e=>oe(r,t,{bubbles:!!(4&s),composed:!!(2&s),cancelable:!!(1&s),detail:e})}},oe=(e,t,s)=>{const r=Qe.ce(t,s);return e.dispatchEvent(r),r},le=new WeakMap,ie=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),ae=(e,t,s,r,n,o)=>{if(s!==r){let l=qe(e,t),i=t.toLowerCase();if("class"===t){const t=e.classList,n=de(s),o=de(r);t.remove(...n.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!n.includes(e))))}else if("style"===t){for(const t in s)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)s&&r[t]===s[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const a=X(r);if((l||a&&null!==r)&&!n)try{if(e.tagName.includes("-"))e[t]=r;else{const n=r??"";"list"===t?l=!1:null!=s&&e[t]==n||(e[t]=n)}}catch(e){}let c=!1;i!==(i=i.replace(/^xlink\:?/,""))&&(t=i,c=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(K,t):e.removeAttribute(t)):(!l||4&o||n)&&!a&&(r=!0===r?"":r,c?e.setAttributeNS(K,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):qe(Ge,i)?i.slice(2):i[2]+t.slice(3),s&&Qe.rel(e,t,s,!1),r&&Qe.ael(e,t,r,!1)}},ce=/\s/,de=e=>e?e.split(ce):[],$e=(e,t,s,r)=>{const n=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Q,l=t.$attrs$||Q;for(r in o)r in l||ae(n,r,o[r],void 0,s,t.$flags$);for(r in l)ae(n,r,o[r],l[r],s,t.$flags$)},he=(e,t,s,r)=>{const n=t.$children$[s];let o,l,i,a=0;if(H||(q=!0,"slot"===n.$tag$&&(B&&r.classList.add(B+"-s"),n.$flags$|=n.$children$?2:1)),null!==n.$text$)o=n.$elm$=Je.createTextNode(n.$text$);else if(1&n.$flags$)o=n.$elm$=Je.createTextNode("");else{if(W||(W="svg"===n.$tag$),o=n.$elm$=Je.createElementNS(W?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&n.$flags$?"slot-fb":n.$tag$),W&&"foreignObject"===n.$tag$&&(W=!1),$e(null,n,W),null!=B&&o["s-si"]!==B&&o.classList.add(o["s-si"]=B),n.$children$)for(a=0;a<n.$children$.length;++a)l=he(e,n,a,o),l&&o.appendChild(l);"svg"===n.$tag$?W=!1:"foreignObject"===o.tagName&&(W=!0)}return o["s-hn"]=U,3&n.$flags$&&(o["s-sr"]=!0,o["s-cr"]=I,o["s-sn"]=n.$name$||"",i=e&&e.$children$&&e.$children$[s],i&&i.$tag$===n.$tag$&&e.$elm$&&ue(e.$elm$,!1)),o},ue=(e,t)=>{Qe.$flags$|=1;const s=e.childNodes;for(let e=s.length-1;e>=0;e--){const r=s[e];r["s-hn"]!==U&&r["s-ol"]&&(ye(r).insertBefore(r,ge(r)),r["s-ol"].remove(),r["s-ol"]=void 0,q=!0),t&&ue(r,t)}Qe.$flags$&=-2},me=(e,t,s,r,n,o)=>{let l,i=e["s-cr"]&&e["s-cr"].parentNode||e;for(i.shadowRoot&&i.tagName===U&&(i=i.shadowRoot);n<=o;++n)r[n]&&(l=he(null,s,n,e),l&&(r[n].$elm$=l,i.insertBefore(l,ge(t))))},pe=(e,t,s,r,n)=>{for(;t<=s;++t)(r=e[t])&&(n=r.$elm$,je(r),D=!0,n["s-ol"]?n["s-ol"].remove():ue(n,!0),n.remove())},fe=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),ge=e=>e&&e["s-ol"]||e,ye=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ve=(e,t)=>{const s=t.$elm$=e.$elm$,r=e.$children$,n=t.$children$,o=t.$tag$,l=t.$text$;let i;null===l?(W="svg"===o||"foreignObject"!==o&&W,"slot"===o||$e(e,t,W),null!==r&&null!==n?((e,t,s,r)=>{let n,o,l=0,i=0,a=0,c=0,d=t.length-1,$=t[0],h=t[d],u=r.length-1,m=r[0],p=r[u];for(;l<=d&&i<=u;)if(null==$)$=t[++l];else if(null==h)h=t[--d];else if(null==m)m=r[++i];else if(null==p)p=r[--u];else if(fe($,m))ve($,m),$=t[++l],m=r[++i];else if(fe(h,p))ve(h,p),h=t[--d],p=r[--u];else if(fe($,p))"slot"!==$.$tag$&&"slot"!==p.$tag$||ue($.$elm$.parentNode,!1),ve($,p),e.insertBefore($.$elm$,h.$elm$.nextSibling),$=t[++l],p=r[--u];else if(fe(h,m))"slot"!==$.$tag$&&"slot"!==p.$tag$||ue(h.$elm$.parentNode,!1),ve(h,m),e.insertBefore(h.$elm$,$.$elm$),h=t[--d],m=r[++i];else{for(a=-1,c=l;c<=d;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){a=c;break}a>=0?(o=t[a],o.$tag$!==m.$tag$?n=he(t&&t[i],s,a,e):(ve(o,m),t[a]=void 0,n=o.$elm$),m=r[++i]):(n=he(t&&t[i],s,i,e),m=r[++i]),n&&ye($.$elm$).insertBefore(n,ge($.$elm$))}l>d?me(e,null==r[u+1]?null:r[u+1].$elm$,s,r,i,u):i>u&&pe(t,l,d)})(s,r,t,n):null!==n?(null!==e.$text$&&(s.textContent=""),me(s,null,t,n,0,n.length-1)):null!==r&&pe(r,0,r.length-1),W&&"svg"===o&&(W=!1)):(i=s["s-cr"])?i.parentNode.textContent=l:e.$text$!==l&&(s.data=l)},be=e=>{const t=e.childNodes;let s,r,n,o,l,i;for(r=0,n=t.length;r<n;r++)if(s=t[r],1===s.nodeType){if(s["s-sr"])for(l=s["s-sn"],s.hidden=!1,o=0;o<n;o++)if(i=t[o].nodeType,t[o]["s-hn"]!==s["s-hn"]||""!==l){if(1===i&&l===t[o].getAttribute("slot")){s.hidden=!0;break}}else if(1===i||3===i&&""!==t[o].textContent.trim()){s.hidden=!0;break}be(s)}},we=[],ke=e=>{let t,s,r,n,o,l,i=0;const a=e.childNodes,c=a.length;for(;i<c;i++){if(t=a[i],t["s-sr"]&&(s=t["s-cr"])&&s.parentNode)for(r=s.parentNode.childNodes,n=t["s-sn"],l=r.length-1;l>=0;l--)s=r[l],s["s-cn"]||s["s-nr"]||s["s-hn"]===t["s-hn"]||(Ne(s,n)?(o=we.find((e=>e.$nodeToRelocate$===s)),D=!0,s["s-sn"]=s["s-sn"]||n,o?o.$slotRefNode$=t:we.push({$slotRefNode$:t,$nodeToRelocate$:s}),s["s-sr"]&&we.map((e=>{Ne(e.$nodeToRelocate$,s["s-sn"])&&(o=we.find((e=>e.$nodeToRelocate$===s)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):we.some((e=>e.$nodeToRelocate$===s))||we.push({$nodeToRelocate$:s}));1===t.nodeType&&ke(t)}},Ne=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,je=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(je)},Se=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,lt((()=>_e(e,t)))),_e=(e,t)=>{const s=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),n=s;let o;return o=Le(n,t?"componentWillLoad":"componentWillUpdate"),o=Ae(o,(()=>Le(n,"componentWillRender"))),r(),Ae(o,(()=>Re(e,n,t)))},Re=async(e,t,s)=>{const r=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],s&&(e=>{const t=e.$cmpMeta$,s=e.$hostElement$,r=t.$flags$,n=(t.$tagName$,()=>{}),o=((e,t,s,r)=>{let n=ie(t,s);const o=ze.get(n);if(e=11===e.nodeType?e:Je,o)if("string"==typeof o){e=e.head||e;let t,s=le.get(e);s||le.set(e,s=new Set),s.has(n)||(t=Je.createElement("style"),t.innerHTML=o,e.insertBefore(t,e.querySelector("link")),s&&s.add(n))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n})(Xe&&s.shadowRoot?s.shadowRoot:s.getRootNode(),t,e.$modeName$);10&r&&(s["s-sc"]=o,s.classList.add(o+"-h"),2&r&&s.classList.add(o+"-s")),n()})(e);const o=(e.$cmpMeta$.$tagName$,()=>{});Ee(e,t,r),o(),n(),Te(e)},Ee=(e,t,s)=>{try{z=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const s=e.$hostElement$,r=e.$cmpMeta$,n=e.$vnode$||Z(null,null),o=(l=t)&&l.$tag$===ee?t:Y(null,null,t);var l;if(U=s.tagName,r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=s[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=n.$elm$=s.shadowRoot||s,B=s["s-sc"],I=s["s-cr"],H=Xe&&0!=(1&r.$flags$),D=!1,ve(n,o),Qe.$flags$|=1,q){let e,t,s,r,n,l;ke(o.$elm$);let i=0;for(;i<we.length;i++)e=we[i],t=e.$nodeToRelocate$,t["s-ol"]||(s=Je.createTextNode(""),s["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=s,t));for(i=0;i<we.length;i++)if(e=we[i],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,n=e.$slotRefNode$.nextSibling,s=t["s-ol"];s=s.previousSibling;)if(l=s["s-nr"],l&&l["s-sn"]===t["s-sn"]&&r===l.parentNode&&(l=l.nextSibling,!l||!l["s-nr"])){n=l;break}(!n&&r!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,n))}else 1===t.nodeType&&(t.hidden=!0)}D&&be(o.$elm$),Qe.$flags$&=-2,we.length=0})(e,t)}catch(t){We(t,e.$hostElement$)}return z=null,null},Te=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$;e.$ancestorComponent$,Le(t,"componentDidRender"),64&e.$flags$?Le(t,"componentDidUpdate"):(e.$flags$|=64,Le(t,"componentDidLoad"))},Ce=e=>{{const t=He(e),s=t.$hostElement$.isConnected;return s&&2==(18&t.$flags$)&&Se(t,!1),s}},Le=(e,t,s)=>{if(e&&e[t])try{return e[t](s)}catch(e){We(e)}},Ae=(e,t)=>e&&e.then?e.then(t):t(),xe=(e,t,s)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),r=e.prototype;s.map((([e,[s]])=>{(31&s||32&s)&&Object.defineProperty(r,e,{get(){return t=e,He(this).$instanceValues$.get(t);var t},set(s){((e,t,s,r)=>{const n=He(e),o=e,l=n.$instanceValues$.get(t),i=n.$flags$,a=o;var c,d;c=s,d=r.$members$[t][0],s=null==c||X(c)?c:4&d?"false"!==c&&(""===c||!!c):2&d?parseFloat(c):1&d?String(c):c;const $=Number.isNaN(l)&&Number.isNaN(s);if(s!==l&&!$){if(n.$instanceValues$.set(t,s),r.$watchers$&&128&i){const e=r.$watchers$[t];e&&e.map((e=>{try{a[e](s,l,t)}catch(e){We(e,o)}}))}if(2==(18&i)){if(a.componentShouldUpdate&&!1===a.componentShouldUpdate(s,l,t))return;Se(n,!1)}}})(this,e,s,t)},configurable:!0,enumerable:!0})}));{const n=new Map;r.attributeChangedCallback=function(e,t,s){Qe.jmp((()=>{const t=n.get(e);if(this.hasOwnProperty(t))s=this[t],delete this[t];else if(r.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==s)return;this[t]=(null!==s||"boolean"!=typeof this[t])&&s}))},e.observedAttributes=s.filter((([e,t])=>15&t[0])).map((([e,s])=>{const r=s[1]||e;return n.set(r,e),512&s[0]&&t.$attrsToReflect$.push([e,r]),r}))}}return e},Pe=(e,t)=>{const s={$flags$:t[0],$tagName$:t[1]};s.$members$=t[2],s.$listeners$=t[3],s.$watchers$=e.$watchers$,s.$attrsToReflect$=[],!Xe&&1&s.$flags$&&(s.$flags$|=8);const r=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){De(this,s)},connectedCallback(){(e=>{if(0==(1&Qe.$flags$)){const t=He(e),s=t.$cmpMeta$,r=(s.$tagName$,()=>{});1&t.$flags$?(Fe(e,t,s.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&s.$flags$&&(e=>{const t=e["s-cr"]=Je.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)})(e),s.$members$&&Object.entries(s.$members$).map((([t,[s]])=>{if(31&s&&e.hasOwnProperty(t)){const s=e[t];delete e[t],e[t]=s}})),(async(e,t,s,r,n)=>{if(0==(32&t.$flags$)&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(s.$tagName$).then((()=>t.$flags$|=128)),n.style)){let r=n.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>Ve.map((t=>t(e))).find((e=>!!e)))(e)]);const o=ie(s,t.$modeName$);if(!ze.has(o)){const e=(s.$tagName$,()=>{});((e,t,s)=>{let r=ze.get(e);Ze&&s?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,ze.set(e,r)})(o,r,!!(1&s.$flags$)),e()}}t.$ancestorComponent$,Se(t,!0)})(e,t,s)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(e=>{if(0==(1&Qe.$flags$)){const t=He(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),n&&n.call(this)},__attachShadow(){Xe?this.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)}):this.shadowRoot=this}}),e.is=s.$tagName$,xe(e,s)},Me=(e,t)=>t,Fe=(e,t,s,r)=>{s&&s.map((([s,r,n])=>{const o=Be(e,s),l=Oe(t,n),i=Ie(s);Qe.ael(o,r,l,i),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Qe.rel(o,r,l,i)))}))},Oe=(e,t)=>s=>{try{e.$hostElement$[t](s)}catch(e){We(e)}},Be=(e,t)=>4&t?Je:8&t?Ge:16&t?Je.body:e,Ie=e=>Ye?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Ue=new WeakMap,He=e=>Ue.get(e),De=(e,t)=>{const s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Fe(e,s,t.$listeners$),Ue.set(e,s)},qe=(e,t)=>t in e,We=(e,t)=>(0,console.error)(e,t),ze=new Map,Ve=[],Ge="undefined"!=typeof window?window:{},Je=Ge.document||{head:{}},Ke=Ge.HTMLElement||class{},Qe={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,s,r)=>e.addEventListener(t,s,r),rel:(e,t,s,r)=>e.removeEventListener(t,s,r),ce:(e,t)=>new CustomEvent(e,t)},Xe=!0,Ye=(()=>{let e=!1;try{Je.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),Ze=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1})(),et=[],tt=[],st=(e,t)=>s=>{e.push(s),V||(V=!0,t&&4&Qe.$flags$?ot(nt):Qe.raf(nt))},rt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){We(e)}e.length=0},nt=()=>{rt(et),rt(tt),(V=et.length>0)&&Qe.raf(nt)},ot=e=>Promise.resolve(void 0).then(e),lt=st(tt,!0),it=()=>[2,1,1,1,3].map((e=>{let t="";for(let s=0;s<e;s++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t})).join("-")
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */,at={autoTheme:"calcite-theme-auto",darkTheme:"calcite-theme-dark",lightTheme:"calcite-theme-light",rtl:"calcite--rtl"},ct={loading:"Loading"};function dt(e){return e?e.id=e.id||`${e.tagName.toLowerCase()}-${it()}`:""}function $t(e){return Array.isArray(e)?e:Array.from(e)}function ht(e){const t=yt(e,`.${at.darkTheme}, .${at.lightTheme}`);return(null==t?void 0:t.classList.contains("calcite-theme-dark"))?"dark":"light"}function ut(e){const t=yt(e,"[dir]");return t?t.getAttribute("dir"):"ltr"}function mt(e,t,s){const r=`[${t}]`,n=e.closest(r);return n?n.getAttribute(t):s}function pt(e){return e.getRootNode()}function ft(e){return e.host||null}function gt(e,{selector:t,id:s}){return function e(r){if(!r)return null;r.assignedSlot&&(r=r.assignedSlot);const n=pt(r),o=s?"getElementById"in n?n.getElementById(s):null:t?n.querySelector(t):null,l=ft(n);return o||(l?e(l):null)}(e)}function yt(e,t){return function e(s){return s?s.closest(t)||e(ft(pt(s))):null}(e)}function vt(e,t){return bt(e,t)}function bt(e,t){if(!e)return;const s=t(e);if(void 0!==s)return s;const{parentNode:r}=e;return bt(r instanceof ShadowRoot?r.host:r,t)}function wt(e,t){return!!vt(t,(t=>t===e||void 0))}function kt(e){return"function"==typeof(null==e?void 0:e.setFocus)}async function Nt(e){if(e)return kt(e)?e.setFocus():e.focus()}function jt(e,t,s){t&&!Array.isArray(t)&&"string"!=typeof t&&(s=t,t=null);const r=t?Array.isArray(t)?t.map((e=>`[slot="${e}"]`)).join(","):`[slot="${t}"]`:":not([slot])";return(null==s?void 0:s.all)?function(e,t,s){let r=":not([slot])"===t?St(e,":not([slot])"):Array.from(e.querySelectorAll(t));r=s&&!1===s.direct?r:r.filter((t=>t.parentElement===e)),r=(null==s?void 0:s.matches)?r.filter((e=>null==e?void 0:e.matches(s.matches))):r;const n=null==s?void 0:s.selector;return n?r.map((e=>Array.from(e.querySelectorAll(n)))).reduce(((e,t)=>[...e,...t]),[]).filter((e=>!!e)):r}(e,r,s):function(e,t,s){let r=":not([slot])"===t?St(e,":not([slot])")[0]||null:e.querySelector(t);r=s&&!1===s.direct||(null==r?void 0:r.parentElement)===e?r:null,r=(null==s?void 0:s.matches)?(null==r?void 0:r.matches(s.matches))?r:null:r;const n=null==s?void 0:s.selector;return n?null==r?void 0:r.querySelector(n):r}(e,r,s)}function St(e,t){return e?Array.from(e.children||[]).filter((e=>null==e?void 0:e.matches(t))):[]}function _t(e,t){return Array.from(e.children).filter((e=>e.matches(t)))}function Rt(e,t,s){return"string"==typeof t&&""!==t?t:""===t?e[s]:void 0}function Et(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function Tt(e){return Boolean(e).toString()}function Ct(e){return!(!e.isPrimary||0!==e.button)}
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function Lt(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,s=()=>e.contains("calcite-theme-dark")||e.contains("calcite-theme-auto")&&t?"dark":"light",r=e=>document.body.dispatchEvent(new CustomEvent("calciteThemeChange",{bubbles:!0,detail:{theme:e}})),n=e=>{o!==e&&r(e),o=e};let o=s();r(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>n(e.matches?"dark":"light"))),new MutationObserver((()=>n(s()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}let At;"undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document&&("interactive"===document.readyState?Lt():document.addEventListener("DOMContentLoaded",(()=>Lt()),{once:!0})),At="esri/widgets/support/components/assets";const xt=new Set;let Pt=0;function Mt(e,t){for(const s in t)null!=e[s]&&("object"==typeof e[s]&&"object"==typeof t[s]?Mt(e[s],t?.[s]):e[s]=t[s]);return e}const Ft=(e=>{let t;const s={...M,...e},r=(e=>({...F,...e}))(s),n=r.performanceLogger;let o,l=!0,i=!1;const a=[],c=[],d=(e,o,l)=>{let i;r.eventHandlerInterceptor=(e,r,o,l)=>function(e){let r;n("domEvent",e);const o=((e,t)=>{const s=[];for(;e&&e!==t;)s.push(e),e=e.parentNode;return s})(e.currentTarget,i.domNode),l=o.some((e=>customElements.get(e?.tagName?.toLowerCase())));if(e.eventPhase!==Event.CAPTURING_PHASE&&l){const t=e.composedPath(),s=t.slice(t.indexOf(e.currentTarget),t.indexOf(i.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();r=O(i.getLastRender(),s,!0)}else o.reverse(),r=O(i.getLastRender(),o);let a;return r&&(a=s.handleInterceptedEvent(t,r,this,e)),n("domEventProcessed",e),a},s.postProcessProjectionOptions?.(r);const d=l();i=e(o,d,r),a.push(i),c.push(l),s.afterFirstVNodeRendered&&s.afterFirstVNodeRendered(i,d)};let $=()=>{if(o=void 0,l){l=!1,n("renderStart",void 0);for(let e=0;e<a.length;e++){const t=c[e]();n("rendered",void 0),a[e].update(t),n("patched",void 0)}n("renderDone",void 0),l=!0}};return s.modifyDoRenderImplementation&&($=s.modifyDoRenderImplementation($,a,c)),t={renderNow:$,scheduleRender:()=>{o||i||(o=requestAnimationFrame($))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),i=!0},resume:()=>{i=!1,l=!0,t.scheduleRender()},append:(e,t)=>{d(k.append,e,t)},insertBefore:(e,t)=>{d(k.insertBefore,e,t)},merge:(e,t)=>{d(k.merge,e,t)},replace:(e,t)=>{d(k.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),a.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,s=/capture$/i;e.eventHandlerInterceptor=(e,r,n,o)=>{const l=t?.(e,r,n,o),i=s.test(e);if(!((e=e.replace(s,"")).toLowerCase()in n)||i){const t=e[2].toLowerCase()+e.slice(3),s=e=>l?.call(n,e);n.addEventListener(t,s,i);const r=()=>n.removeEventListener(t,s,i),a=o.afterRemoved;o.afterRemoved=e=>{a?.(e),r()}}return l}},handleInterceptedEvent(e,t,s,r){const{eventPhase:n,type:o}=r,l=n===Event.CAPTURING_PHASE;let i=`on${o}${l?"capture":""}`;const a=t.properties;(a&&i in a||(i=`on${o[0].toUpperCase()}${o.slice(1)}${l?"Capture":""}`,a&&i in a))&&(A(),e.scheduleRender(),a[i].call(a.bind||s,r))}});let Ot=!1,Bt=class extends(h(s.EventedAccessor)){constructor(e,t){var s;super(e,t),this._attached=!1,this._internalHandles=new a,this._projector=Ft,this._readyForTrueRender=!1,this.iconClass="esri-icon-checkbox-unchecked",this.key=this,this._loadLocale=r((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await i(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let s=await P(e);this.uiStrings&&Object.keys(this.uiStrings)&&(s=Mt(c(s),this.uiStrings)),this[t]=s})));for(const t of e)t.error&&d.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,t.error)}await this.loadLocale()})),s=j(N("esri/widgets/support/components/assets")),Qe.$resourcesUrl$=s;const n="esri-widget-uid-"+f(),o=this.render.bind(this);this._trackingTarget=new w((()=>this.scheduleRender()));const l=()=>{if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:n,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const e=o();let{properties:t}=e;t||(e.properties=t={});let{key:s,styles:r}=t;s||(t.key=n),r||(t.styles=r={}),r.display||(r.display="");let l=0;return e.children?.forEach((e=>{if(S(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${l++}`)})),_(this,e)};var $;this.render=()=>{if(Ot)return l();let e=E(this)??null;if(e)return e;this._trackingTarget.clear(),Ot=!0;try{e=b(this._trackingTarget,l)}catch(e){throw console.error(e),e}finally{Ot=!1}return e&&T(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize()}))),$=this._resourcesFetch,xt.add($),$.finally((()=>xt.delete($)))}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch(n)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||($(this._trackingTarget),$(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,C(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return t(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+Pt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(C(this),this._projector.scheduleRender())}classes(...e){return L.apply(this,e)}renderNow(){C(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this._internalHandles.add(u((()=>this.viewModel),((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&o(e)&&this._internalHandles.add(this._delegatedEventNames.map((t=>l(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),p)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(n),this.scheduleRender()};this._internalHandles.add([x(e),u((()=>this.uiStrings),e),m((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};Bt[R]=!0,e([g()],Bt.prototype,"_readyForTrueRender",void 0),e([g({value:null})],Bt.prototype,"container",null),e([y("container")],Bt.prototype,"castContainer",null),e([g()],Bt.prototype,"domNode",null),e([g()],Bt.prototype,"iconClass",void 0),e([g()],Bt.prototype,"id",null),e([g()],Bt.prototype,"label",null),e([g()],Bt.prototype,"renderable",null),e([g()],Bt.prototype,"uiStrings",void 0),e([g()],Bt.prototype,"viewModel",void 0),e([g({value:!0})],Bt.prototype,"visible",null),e([g()],Bt.prototype,"key",void 0),e([g()],Bt.prototype,"children",void 0),e([g()],Bt.prototype,"afterCreate",void 0),e([g()],Bt.prototype,"afterUpdate",void 0),e([g()],Bt.prototype,"afterRemoved",void 0),Bt=e([v("esri.widgets.Widget")],Bt);const It=Bt;export{G as B,at as C,Me as F,Ke as H,ct as T,ee as a,it as b,ne as c,Nt as d,It as default,J as e,Ce as f,ut as g,Y as h,Ct as i,yt as j,jt as k,mt as l,wt as m,$t as n,ht as o,Pe as p,gt as q,_t as r,Rt as s,Tt as t,Et as u,dt as v,kt as w};
