/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{clone as t}from"../../core/lang.js";import{a as n}from"../../chunks/maybe.js";import s,{e as r,i,a as e}from"../SpatialReference.js";import{e as o}from"../../chunks/Ellipsoid.js";import"../../chunks/tslib.es6.js";import"../../core/JSONSupport.js";import"../../core/Accessor.js";import"../../core/Handles.js";import"../../chunks/get.js";import"../../chunks/utils.js";import"../../chunks/handleUtils.js";import"../../chunks/metadata.js";import"../../chunks/object.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/string.js";import"../../chunks/ArrayPool.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../chunks/tracking.js";import"../../chunks/ensureType.js";import"../../core/Error.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/watch.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../core/promiseUtils.js";import"../../chunks/writer.js";function c(t){return 57.29577951308232*t}function a(t){return.017453292519943*t}function p(t){return t/o.radius}function u(t){return Math.PI/2-2*Math.atan(Math.exp(-t/o.radius))}function h(t){return null!=t.wkid||null!=t.wkt}const m=[0,0];function l(t,n,s,r,i){const e=t,o=i;if(o.spatialReference=s,"x"in e&&"x"in o)[o.x,o.y]=n(e.x,e.y,m,r);else if("xmin"in e&&"xmin"in o)[o.xmin,o.ymin]=n(e.xmin,e.ymin,m,r),[o.xmax,o.ymax]=n(e.xmax,e.ymax,m,r);else if("paths"in e&&"paths"in o||"rings"in e&&"rings"in o){const t="paths"in e?e.paths:e.rings,s=[];let i;for(let e=0;e<t.length;e++){const o=t[e];i=[],s.push(i);for(let t=0;t<o.length;t++)i.push(n(o[t][0],o[t][1],[0,0],r)),o[t].length>2&&i[t].push(o[t][2]),o[t].length>3&&i[t].push(o[t][3])}"paths"in o?o.paths=s:o.rings=s}else if("points"in e&&"points"in o){const t=e.points,s=[];for(let i=0;i<t.length;i++)s[i]=n(t[i][0],t[i][1],[0,0],r),t[i].length>2&&s[i].push(t[i][2]),t[i].length>3&&s[i].push(t[i][3]);o.points=s}return i}function f(t,n){const s=t&&(h(t)?t:t.spatialReference),o=n&&(h(n)?n:n.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||n&&"type"in n&&"mesh"===n.type||!s||!o)&&(!!r(o,s)||i(o)&&e(s)||i(s)&&e(o))}function j(o,c){if(n(o))return null;const a=o.spatialReference,p=c&&(h(c)?c:c.spatialReference);return f(a,p)?r(a,p)?t(o):i(p)?l(o,g,s.WebMercator,!1,t(o)):e(p)?l(o,k,s.WGS84,!1,t(o)):null:null}function g(t,n,s=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const r=a(n);return s[0]=a(t)*o.radius,s[1]=o.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),s}function k(t,n,s=[0,0],r=!1){const i=c(t/o.radius);return s[0]=r?i:i-360*Math.floor((i+180)/360),s[1]=c(Math.PI/2-2*Math.atan(Math.exp(-n/o.radius))),s}function x(n,r=!1,i=t(n)){return l(n,g,s.WebMercator,r,i)}function y(n,r=!1,i=t(n)){return l(n,k,s.WGS84,r,i)}export{f as canProject,x as geographicToWebMercator,g as lngLatToXY,j as project,y as webMercatorToGeographic,p as x2lon,k as xyToLngLat,u as y2lat};
