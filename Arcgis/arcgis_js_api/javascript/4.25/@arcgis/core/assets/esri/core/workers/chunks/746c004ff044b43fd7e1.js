"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6491,5777],{93314:(t,e,r)=>{r.d(e,{Z:()=>m});var s,i=r(29768),l=r(12047),o=r(71252),n=r(35197),a=r(34250),u=(r(76506),r(91306),r(97714)),h=r(17533),c=r(2906);r(21972),r(60474),r(66396),r(86656),r(71552),r(92143),r(31450),r(40642),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991);let p=s=class extends l.wq{constructor(t){super(t),this.end=null,this.start=null}static get allTime(){return d}static get empty(){return y}readEnd(t,e){return null!=e.end?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(s.allTime)}get isEmpty(){return this.equals(s.empty)}readStart(t,e){return null!=e.start?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new s({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=(0,o.i)(this.start)?this.start.getTime():this.start,r=(0,o.i)(this.end)?this.end.getTime():this.end,s=(0,o.i)(t.start)?t.start.getTime():t.start,i=(0,o.i)(t.end)?t.end.getTime():t.end;return e===s&&r===i}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=(0,o.g)(this.start,(e=>(0,n.t)(e,t))),r=(0,o.g)(this.end,(e=>{const r=(0,n.t)(e,t);return e.getTime()===r.getTime()?r:(0,n.o)(r,1,t)}));return new s({start:e,end:r})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return s.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=(0,o.m)(this.start,-1/0,(t=>t.getTime())),r=(0,o.m)(this.end,1/0,(t=>t.getTime())),i=(0,o.m)(t.start,-1/0,(t=>t.getTime())),l=(0,o.m)(t.end,1/0,(t=>t.getTime()));let n,a;if(i>=e&&i<=r?n=i:e>=i&&e<=l&&(n=e),r>=i&&r<=l?a=r:l>=e&&l<=r&&(a=l),null!=n&&null!=a&&!isNaN(n)&&!isNaN(a)){const t=new s;return t.start=n===-1/0?null:new Date(n),t.end=a===1/0?null:new Date(a),t}return s.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const r=new s,{start:i,end:l}=this;return(0,o.i)(i)&&(r.start=(0,n.o)(i,t,e)),(0,o.i)(l)&&(r.end=(0,n.o)(l,t,e)),r}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return d.clone();const e=(0,o.i)(this.start)&&(0,o.i)(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,r=(0,o.i)(this.end)&&(0,o.i)(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new s({start:e,end:r})}};(0,i._)([(0,a.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,i._)([(0,u.r)("end")],p.prototype,"readEnd",null),(0,i._)([(0,c.w)("end")],p.prototype,"writeEnd",null),(0,i._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,i._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,i._)([(0,a.Cb)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,i._)([(0,u.r)("start")],p.prototype,"readStart",null),(0,i._)([(0,c.w)("start")],p.prototype,"writeStart",null),p=s=(0,i._)([(0,h.j)("esri.TimeExtent")],p);const d=new p,y=new p({start:void 0,end:void 0}),m=p},75025:(t,e,r)=>{r.d(e,{A:()=>u});var s=r(29768),i=r(92143),l=r(71252),o=r(34250),n=(r(76506),r(91306),r(17533)),a=r(21132);const u=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,a.p)(this.url);if((0,l.i)(t)&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,a.s)(t,i.L.getLogger(this.declaredClass)))}};return(0,s._)([(0,o.Cb)()],e.prototype,"title",null),(0,s._)([(0,o.Cb)({type:String})],e.prototype,"url",null),e=(0,s._)([(0,n.j)("esri.layers.mixins.ArcGISService")],e),e}},89241:(t,e,r)=>{r.d(e,{L:()=>i});var s=r(91700);class i{constructor(t,e){this._storage=new s.M,this._storage.maxSize=t,e&&this._storage.registerRemoveFunc("",e)}put(t,e,r){this._storage.put(t,e,r,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}},91700:(t,e,r)=>{r.d(e,{M:()=>a,a:()=>n});var s,i,l=r(71252),o=r(6906);(i=s||(s={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";class n{constructor(t,e,r){this._namespace=t,this._storage=e,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,e,r,s=0){this._storage.put(this._namespace+t,e,r,s)}get(t){const e=this._storage.get(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}pop(t){const e=this._storage.pop(this._namespace+t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,r){this._storage.updateSize(this._namespace+t,e,r)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class a{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new o.P,this._users=new o.P}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,e,r,i){const l=this._db.get(t);if(l&&(this._size-=l.size,this._db.delete(t),l.entry!==e&&this._notifyRemove(t,l.entry,s.ALL)),r>this._maxSize)return void this._notifyRemove(t,e,s.ALL);if(void 0===e)return void console.warn("Refusing to cache undefined entry ");if(!r||r<0)return void console.warn("Refusing to cache entry with invalid size "+r);const o=1+Math.max(i,-3)- -3;this._db.set(t,{entry:e,size:r,lifetime:o,lives:o}),this._size+=r,this._checkSizeLimit()}updateSize(t,e,r){const i=this._db.get(t);if(i&&i.entry===e){for(this._size-=i.size;r>this._maxSize;){const i=this._notifyRemove(t,e,s.SOME);if(!((0,l.i)(i)&&i>0))return void this._db.delete(t);r=i}i.size=r,this._size+=r,this._checkSizeLimit()}}pop(t){const e=this._db.get(t);if(e)return this._size-=e.size,this._db.delete(t),++this._hit,e.entry;++this._miss}get(t){const e=this._db.get(t);if(void 0!==e)return this._db.delete(t),e.lives=e.lifetime,this._db.set(t,e),++this._hit,e.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},r=new Array;this._db.forEach(((t,s)=>{const i=t.lifetime;r[i]=(r[i]||0)+t.size,this._users.forAll((r=>{const i=r.namespace;if(s.startsWith(i)){const r=e[i]||0;e[i]=r+t.size}}))}));const s={};this._users.forAll((t=>{const r=t.namespace;if(!isNaN(t.hitRate)&&t.hitRate>0){const i=e[r]||0;e[r]=i,s[r]=Math.round(100*t.hitRate)+"%"}else s[r]="0%"}));const i=Object.keys(e);i.sort(((t,r)=>e[r]-e[t])),i.forEach((r=>t[r]=Math.round(e[r]/2**20)+"MB / "+s[r]));for(let e=r.length-1;e>=0;--e){const s=r[e];s&&(t["Priority "+(e+-3-1)]=Math.round(s/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){this._db.forEach(((e,r)=>{r.startsWith(t)&&(this._size-=e.size,this._db.delete(r),this._notifyRemove(r,e.entry,s.ALL))}))}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,r){let s;return this._removeFuncs.some((i=>{if(t.startsWith(i[0])){const t=i[1](e,r);return"number"==typeof t&&(s=t),!0}return!1})),s}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,e]of this._db){if(this._db.delete(t),e.lives<=1){this._size-=e.size;const r=this._notifyRemove(t,e.entry,s.SOME);(0,l.i)(r)&&r>0&&(this._size+=r,e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e);if(this._size<=.9*this.maxSize)return}}}},29704:(t,e,r)=>{r.d(e,{T:()=>i});var s=r(91055);class i{constructor(t,e,r,s){this.set(t,e,r,s)}static getId(t,e,r,s){return"object"==typeof t?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${e}/${r}/${s}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,e=4095&this.col,r=63&this.level;return(3&this.world)<<30|e<<22|t<<8|r}acquire(t,e,r,s){this.set(t,e,r,s)}contains(t){const e=t.level-this.level;return e>=0&&this.row===t.row>>e&&this.col===t.col>>e&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new i(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,e,r,s){if(null==t)this.level=0,this.row=0,this.col=0,this.world=0;else if("object"==typeof t)this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if("string"==typeof t){const[e,r,s,i]=t.split("/");this.level=parseFloat(e),this.row=parseFloat(r),this.col=parseFloat(s),this.world=parseFloat(i)}else this.level=+t,this.row=+e,this.col=+r,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new i(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,e=this.row<<1,r=this.col<<1,s=this.world;return[new i(t,e,r,s),new i(t,e,r+1,s),new i(t,e+1,r,s),new i(t,e+1,r+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}i.pool=new s.O(i,null,null,25,50)},5777:(t,e,r)=>{r.d(e,{a:()=>l,c:()=>s,g:()=>i});var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function l(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}},95708:(t,e,r)=>{r.d(e,{C:()=>s,c:()=>n,g:()=>o});var s,i,l=r(71552);function o(t){const e=(0,l.h)("esri-force-webgl");if(e===s.WEBGL1||e===s.WEBGL2)return[e];switch(t){case"2d":return(0,l.h)("mac")&&(0,l.h)("chrome")?[s.WEBGL1,s.WEBGL2]:[s.WEBGL2,s.WEBGL1];case"3d":return[s.WEBGL2,s.WEBGL1]}}function n(t,e,r={}){const i=e===s.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let l=null;for(const e of i){try{l=t.getContext(e,r)}catch(t){}if(l)break}return l}(i=s||(s={}))[i.WEBGL1=1]="WEBGL1",i[i.WEBGL2=2]="WEBGL2"},69586:(t,e,r)=>{r.d(e,{a:()=>o,c:()=>l});var s=r(32101),i=r(49900);function l(t){return{origin:"portal-item",url:(0,s.mN)(t.itemUrl),portal:t.portal||i.Z.getDefault(),portalItem:t,readResourcePaths:[]}}function o(t){return{origin:"portal-item",messages:[],writtenProperties:[],url:t.itemUrl?(0,s.mN)(t.itemUrl):null,portal:t.portal||i.Z.getDefault(),portalItem:t}}},65775:(t,e,r)=>{r.d(e,{B:()=>y,a:()=>d,b:()=>m,c:()=>n,d:()=>f,e:()=>g,f:()=>p,g:()=>h,i:()=>l,k:()=>u,l:()=>_,m:()=>a,s:()=>i,t:()=>o,z:()=>c});var s=r(29794);function i(t,e,r,s,i,l,o,n,a,u,h,c,p,d,y,m,f){return t[0]=e,t[1]=r,t[2]=s,t[3]=i,t[4]=l,t[5]=o,t[6]=n,t[7]=a,t[8]=u,t[9]=h,t[10]=c,t[11]=p,t[12]=d,t[13]=y,t[14]=m,t[15]=f,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t,e){if(t===e){const r=e[1],s=e[2],i=e[3],l=e[6],o=e[7],n=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=s,t[9]=l,t[11]=e[14],t[12]=i,t[13]=o,t[14]=n}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function n(t,e){const r=e[0],s=e[1],i=e[2],l=e[3],o=e[4],n=e[5],a=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],y=e[12],m=e[13],f=e[14],g=e[15],_=r*n-s*o,w=r*a-i*o,S=r*u-l*o,v=s*a-i*n,b=s*u-l*n,x=i*u-l*a,M=h*m-c*y,T=h*f-p*y,E=h*g-d*y,I=c*f-p*m,C=c*g-d*m,L=p*g-d*f;let R=_*L-w*C+S*I+v*E-b*T+x*M;return R?(R=1/R,t[0]=(n*L-a*C+u*I)*R,t[1]=(i*C-s*L-l*I)*R,t[2]=(m*x-f*b+g*v)*R,t[3]=(p*b-c*x-d*v)*R,t[4]=(a*E-o*L-u*T)*R,t[5]=(r*L-i*E+l*T)*R,t[6]=(f*S-y*x-g*w)*R,t[7]=(h*x-p*S+d*w)*R,t[8]=(o*C-n*E+u*M)*R,t[9]=(s*E-r*C-l*M)*R,t[10]=(y*b-m*S+g*_)*R,t[11]=(c*S-h*b-d*_)*R,t[12]=(n*T-o*I-a*M)*R,t[13]=(r*I-s*T+i*M)*R,t[14]=(m*w-y*v-f*_)*R,t[15]=(h*v-c*w+p*_)*R,t):null}function a(t,e,r){const s=e[0],i=e[1],l=e[2],o=e[3],n=e[4],a=e[5],u=e[6],h=e[7],c=e[8],p=e[9],d=e[10],y=e[11],m=e[12],f=e[13],g=e[14],_=e[15];let w=r[0],S=r[1],v=r[2],b=r[3];return t[0]=w*s+S*n+v*c+b*m,t[1]=w*i+S*a+v*p+b*f,t[2]=w*l+S*u+v*d+b*g,t[3]=w*o+S*h+v*y+b*_,w=r[4],S=r[5],v=r[6],b=r[7],t[4]=w*s+S*n+v*c+b*m,t[5]=w*i+S*a+v*p+b*f,t[6]=w*l+S*u+v*d+b*g,t[7]=w*o+S*h+v*y+b*_,w=r[8],S=r[9],v=r[10],b=r[11],t[8]=w*s+S*n+v*c+b*m,t[9]=w*i+S*a+v*p+b*f,t[10]=w*l+S*u+v*d+b*g,t[11]=w*o+S*h+v*y+b*_,w=r[12],S=r[13],v=r[14],b=r[15],t[12]=w*s+S*n+v*c+b*m,t[13]=w*i+S*a+v*p+b*f,t[14]=w*l+S*u+v*d+b*g,t[15]=w*o+S*h+v*y+b*_,t}function u(t,e,r){const s=r[0],i=r[1],l=r[2];if(e===t)t[12]=e[0]*s+e[4]*i+e[8]*l+e[12],t[13]=e[1]*s+e[5]*i+e[9]*l+e[13],t[14]=e[2]*s+e[6]*i+e[10]*l+e[14],t[15]=e[3]*s+e[7]*i+e[11]*l+e[15];else{const r=e[0],o=e[1],n=e[2],a=e[3],u=e[4],h=e[5],c=e[6],p=e[7],d=e[8],y=e[9],m=e[10],f=e[11];t[0]=r,t[1]=o,t[2]=n,t[3]=a,t[4]=u,t[5]=h,t[6]=c,t[7]=p,t[8]=d,t[9]=y,t[10]=m,t[11]=f,t[12]=r*s+u*i+d*l+e[12],t[13]=o*s+h*i+y*l+e[13],t[14]=n*s+c*i+m*l+e[14],t[15]=a*s+p*i+f*l+e[15]}return t}function h(t,e,r){const s=r[0],i=r[1],l=r[2];return t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t[3]=e[3]*s,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function c(t,e,r,i){let l,o,n,a,u,h,c,p,d,y,m,f,g,_,w,S,v,b,x,M,T,E,I,C,L=i[0],R=i[1],P=i[2],U=Math.sqrt(L*L+R*R+P*P);return U<(0,s.g)()?null:(U=1/U,L*=U,R*=U,P*=U,l=Math.sin(r),o=Math.cos(r),n=1-o,a=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5],y=e[6],m=e[7],f=e[8],g=e[9],_=e[10],w=e[11],S=L*L*n+o,v=R*L*n+P*l,b=P*L*n-R*l,x=L*R*n-P*l,M=R*R*n+o,T=P*R*n+L*l,E=L*P*n+R*l,I=R*P*n-L*l,C=P*P*n+o,t[0]=a*S+p*v+f*b,t[1]=u*S+d*v+g*b,t[2]=h*S+y*v+_*b,t[3]=c*S+m*v+w*b,t[4]=a*x+p*M+f*T,t[5]=u*x+d*M+g*T,t[6]=h*x+y*M+_*T,t[7]=c*x+m*M+w*T,t[8]=a*E+p*I+f*C,t[9]=u*E+d*I+g*C,t[10]=h*E+y*I+_*C,t[11]=c*E+m*I+w*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function p(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function d(t,e,r){if(0===e)return l(t);let i,o,n,a=r[0],u=r[1],h=r[2],c=Math.sqrt(a*a+u*u+h*h);return c<(0,s.g)()?null:(c=1/c,a*=c,u*=c,h*=c,i=Math.sin(e),o=Math.cos(e),n=1-o,t[0]=a*a*n+o,t[1]=u*a*n+h*i,t[2]=h*a*n-u*i,t[3]=0,t[4]=a*u*n-h*i,t[5]=u*u*n+o,t[6]=h*u*n+a*i,t[7]=0,t[8]=a*h*n+u*i,t[9]=u*h*n-a*i,t[10]=h*h*n+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function y(t,e){const r=Math.sin(e),s=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(t,e,r,s){const i=e[0],l=e[1],o=e[2],n=e[3],a=i+i,u=l+l,h=o+o,c=i*a,p=i*u,d=i*h,y=l*u,m=l*h,f=o*h,g=n*a,_=n*u,w=n*h,S=s[0],v=s[1],b=s[2];return t[0]=(1-(y+f))*S,t[1]=(p+w)*S,t[2]=(d-_)*S,t[3]=0,t[4]=(p-w)*v,t[5]=(1-(c+f))*v,t[6]=(m+g)*v,t[7]=0,t[8]=(d+_)*b,t[9]=(m-g)*b,t[10]=(1-(c+y))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function f(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function g(t,e){if(t===e)return!0;const r=t[0],i=t[1],l=t[2],o=t[3],n=t[4],a=t[5],u=t[6],h=t[7],c=t[8],p=t[9],d=t[10],y=t[11],m=t[12],f=t[13],g=t[14],_=t[15],w=e[0],S=e[1],v=e[2],b=e[3],x=e[4],M=e[5],T=e[6],E=e[7],I=e[8],C=e[9],L=e[10],R=e[11],P=e[12],U=e[13],D=e[14],F=e[15],z=(0,s.g)();return Math.abs(r-w)<=z*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(i-S)<=z*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(l-v)<=z*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(o-b)<=z*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(n-x)<=z*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(a-M)<=z*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(u-T)<=z*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-E)<=z*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(c-I)<=z*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(p-C)<=z*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(d-L)<=z*Math.max(1,Math.abs(d),Math.abs(L))&&Math.abs(y-R)<=z*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(m-P)<=z*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(f-U)<=z*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(g-D)<=z*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(_-F)<=z*Math.max(1,Math.abs(_),Math.abs(F))}function _(t){const e=(0,s.g)(),r=t[0],i=t[1],l=t[2],o=t[4],n=t[5],a=t[6],u=t[8],h=t[9],c=t[10];return Math.abs(1-(r*r+o*o+u*u))<=e&&Math.abs(1-(i*i+n*n+h*h))<=e&&Math.abs(1-(l*l+a*a+c*c))<=e}},35197:(t,e,r)=>{r.d(e,{c:()=>n,o:()=>l,t:()=>o}),r(71552);const s={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},i={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function l(t,e,r){const s=new Date(t.getTime());if(e&&r){const t=i[r],{getter:l,setter:o,multiplier:n}=t;if("months"===r){const t=function(t,e){const r=new Date(t,e+1,1);return r.setDate(0),r.getDate()}(s.getFullYear(),s.getMonth()+e);s.getDate()>t&&s.setDate(t)}s[o](s[l]()+e*n)}return s}function o(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function n(t,e,r){return 0===t?0:t*s[e]/s[r]}},58085:(t,e,r)=>{r.d(e,{N1:()=>c,YP:()=>n,Z_:()=>y,gx:()=>a,nn:()=>m,on:()=>h,tX:()=>f});var s=r(50406),i=r(22723),l=r(71252),o=r(19657);function n(t,e,r={}){return u(t,e,r,p)}function a(t,e,r={}){return u(t,e,r,d)}function u(t,e,r={},s){let i=null;const n=r.once?(t,r)=>{s(t)&&((0,l.r)(i),e(t,r))}:(t,r)=>{s(t)&&e(t,r)};if(i=(0,o.b)(t,n,r.sync,r.equals),r.initial){const e=t();n(e,e)}return i}function h(t,e,r,o={}){let a=null,u=null,h=null;function c(){a&&u&&(u.remove(),o.onListenerRemove?.(a),a=null,u=null)}function p(t){o.once&&o.once&&(0,l.r)(h),r(t)}const d=n(t,((t,r)=>{c(),(0,s.i)(t)&&(a=t,u=(0,s.o)(t,e,p),o.onListenerAdd?.(t))}),{sync:o.sync,initial:!0});return h=(0,i.m)((()=>{d.remove(),c()})),h}function c(t,e){return function(t,e,r){if((0,s.Hc)(r))return Promise.reject((0,s.zE)());const o=t();if(e?.(o))return Promise.resolve(o);let n=null;function a(){n=(0,l.r)(n)}return new Promise(((l,o)=>{n=(0,i.h)([(0,s.fu)(r,(()=>{a(),o((0,s.zE)())})),u(t,(t=>{a(),l(t)}),{sync:!1,once:!0},e??p)])}))}(t,d,e)}function p(t){return!0}function d(t){return!!t}r(71552),r(76506),r(60991),r(92143),r(31450),r(40642),r(91055),r(6906),r(60474),r(66396),r(6540);const y={sync:!0},m={initial:!0},f={sync:!0,initial:!0}},46491:(t,e,r)=>{r.r(e),r.d(e,{default:()=>ot});var s=r(29768),i=r(82058),l=r(41864),o=r(60991),n=r(76506),a=r(71252),u=r(54179),h=r(50406),c=r(32101),p=r(34250),d=(r(91306),r(97714)),y=r(17533),m=r(2906),f=r(21801),g=r(60947),_=r(41617),w=r(96994),S=r(30208),v=r(75025),b=r(80462),x=r(21471),M=r(89440),T=r(39241),E=r(6416),I=r(92143),C=r(43352),L=r(31450),R=r(9411),P=r(29704),U=r(69586),D=r(38742),F=r(96611),z=r(95708);let A,O;function B(t){const e=(0,z.g)(t);for(;e.length>1;){const t=j(e.shift());if(t.available)return t}return j(e.shift())}function j(t){switch(t){case z.C.WEBGL1:return A||(A=function(){const t=new k,e=G(z.C.WEBGL1,t);return(0,a.a)(e)||(t.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint"),t.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives"),t.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays"),t.supportsTextureFloat=null!==e.getExtension("OES_texture_float"),t.supportsTextureHalfFloat=null!==e.getExtension("OES_texture_half_float"),t.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=null!==e.getExtension("EXT_color_buffer_half_float")),t}()),A;case z.C.WEBGL2:return O||(O=function(){const t=new W,e=G(z.C.WEBGL2,t);return(0,a.a)(e)||(t.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),t.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float")),t}()),O}}class N{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class k extends N{constructor(){super(...arguments),this.type=z.C.WEBGL1}}class W extends N{constructor(){super(...arguments),this.type=z.C.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function G(t,e){if(t===z.C.WEBGL1&&"undefined"==typeof WebGLRenderingContext||t===z.C.WEBGL2&&"undefined"==typeof WebGL2RenderingContext)return null;const r=document.createElement("canvas");if(!r)return null;let s=(0,z.c)(r,t,{failIfMajorPerformanceCaveat:!0});if((0,a.a)(s)&&(s=(0,z.c)(r,t),(0,a.i)(s)&&(e.majorPerformanceCaveat=!0)),(0,a.a)(s))return s;if(t===z.C.WEBGL1){const t=s.getParameter(s.VERSION)?.match(/^WebGL\s+([\d.]*)/);if(t){const r=parseFloat(t[1]);e.available=r>=.94}}else e.available=!0;e.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),s}r(88762),r(71552),r(40642),r(21972),r(60474),r(66396),r(86656),r(91055),r(6540),r(19657),r(6906),r(12047),r(73796),r(91597),r(86787),r(35132),r(89623),r(74569),r(84069),r(44567),r(98380),r(92896),r(22781),r(57251),r(32422),r(75067),r(3296),r(81184),r(33101),r(53785),r(95587),r(92482),r(82426),r(72836),r(29794),r(92817),r(79764),r(95873),r(23771),r(58085),r(89241),r(91700),r(21132),r(92200),r(65949),r(54174),r(22465),r(65775),r(5777),r(67541),r(93314),r(35197),r(1557),r(47842),r(14249),r(60217),r(17298),r(85557),r(34394),r(49900),r(3482),r(67477),r(78533),r(74653),r(91091),r(58943),r(56420),r(73173),r(74742),r(28239),r(44172),r(30752),r(70870),r(51006),r(48027),r(79682),r(66992),r(90532),r(82356);let $=null;class q{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(t),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>1.15;const{width:e,height:r,data:s,json:i}=await this._getSpriteData(this._spriteSource,t),l=Object.keys(i);if(!l||0===l.length||!s)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=i,this.width=e,this.height=r;const n=Math.max(this._maxTextureSize,4096);if(e>n||r>n){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${n} pixels}`;throw I.L.getLogger("esri.layers.support.SpriteSource").error(t),new o.Z("SpriteSource",t)}let a;for(let t=0;t<s.length;t+=4)a=s[t+3]/255,s[t]=s[t]*a,s[t+1]=s[t+1]*a,s[t+2]=s[t+2]*a;this.image=s}async _getSpriteData(t,e){if("image"===t.type){let e,r;if(this.devicePixelRatio<1.15){if(!t.spriteSource1x)throw new o.Z("SpriteSource","no image data provided for low resolution sprites!");e=t.spriteSource1x.image,r=t.spriteSource1x.json}else{if(!t.spriteSource2x)throw new o.Z("SpriteSource","no image data provided for high resolution sprites!");e=t.spriteSource2x.image,r=t.spriteSource2x.json}return"width"in e&&"height"in e&&"data"in e&&((0,n.h)(e.data)||(0,n.j)(e.data))?{width:e.width,height:e.height,data:new Uint8Array(e.data),json:r}:{...H(e),json:r}}const r=(0,c.mN)(this.baseURL),s=r.query?"?"+(0,c.B7)(r.query):"",l=this._isRetina?"@2x":"",a=`${r.path}${l}.${this._spriteImageFormat}${s}`,u=`${r.path}${l}.json${s}`,[h,p]=await Promise.all([(0,i.default)(u,e),(0,i.default)(a,{responseType:"image",...e})]);return{...H(p.data),json:h.data}}}function H(t){const e=document.createElement("canvas"),r=e.getContext("2d");e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height);const s=r.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(s.data)}}class Y{constructor(t){this.url=t}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this.url).then((t=>t.data.index))),this._tileIndexPromise}async dataKey(t,e){const r=await this.fetchTileIndex();return(0,h.k_)(e),this._getIndexedDataKey(r,t)}_getIndexedDataKey(t,e){const r=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return null;let s=e;for(;0!==s.level;)s=new P.T(s.level-1,s.row>>1,s.col>>1,s.world),r.push(s);let i,l,o=t,n=r.pop();if(1===o)return n;for(;r.length;)if(i=r.pop(),l=(1&i.col)+((1&i.row)<<1),o){if(0===o[l]){n=null;break}if(1===o[l]){n=i;break}n=i,o=o[l]}return n}}class Z{constructor(t,e){this._tilemap=t,this._tileIndexUrl=e}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=(0,i.default)(this._tileIndexUrl,{query:{...t?.query}}).then((t=>t.data.index))),this._tileIndexPromise}dataKey(t,e){const{level:r,row:s,col:i}=t,l=new P.T(t);return this._tilemap.fetchAvailabilityUpsample(r,s,i,l,e).then((()=>(l.world=t.world,l))).catch((t=>{if((0,h.D_)(t))throw t;return null}))}}const K=new Map;class V{constructor(t,e,r){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=t,this.sourceUrl=e;const s=(0,c.mN)(this.sourceUrl),i=(0,n.d9)(r),l=i.tiles;if(s)for(let t=0;t<l.length;t++){const e=(0,c.mN)(l[t]);e&&((0,c.YP)(e.path)||(e.path=(0,c.v_)(s.path,e.path)),l[t]=(0,c.fl)(e.path,{...s.query,...e.query}))}this.tileServers=l;const o=r.capabilities&&r.capabilities.split(",").map((t=>t.toLowerCase().trim())),a=!0===r?.exportTilesAllowed,u=!0===o?.includes("tilemap"),h=a&&r.hasOwnProperty("maxExportTilesCount")?r.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:a,supportsTileMap:u},exportTiles:a?{maxExportTilesCount:+h}:null},this.tileInfo=(0,R.r)(i.tileInfo,i,null,{ignoreMinMaxLOD:!0});const p=r.tileMap?(0,c.fl)((0,c.v_)(s.path,r.tileMap),s.query):null;u?(this.type="vector-tile",this.tilemap=new Z(new R.T({layer:{parsedUrl:s,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),p)):p&&(this.tilemap=new Y(p)),this.fullExtent=f.Z.fromJSON(r.fullExtent)}destroy(){}async getRefKey(t,e){return this.tilemap?.dataKey(t,e)??t}requestTile(t,e,r,s){return function(t,e,r,s,l){return function(t,e){const r=K.get(t);if(r)return r.then((t=>(0,n.d9)(t)));const s=(0,i.default)(t,{responseType:"array-buffer",...e}).then((({data:e})=>(K.delete(t),e))).catch((e=>{throw K.delete(t),e}));return K.set(t,s),s}(t.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,r.toString()).replace(/\{x\}/gi,s.toString()),l)}(this.tileServers[e%this.tileServers.length],t,e,r,s)}isCompatibleWith(t){const e=this.tileInfo,r=t.tileInfo;if(!e.spatialReference.equals(r.spatialReference))return!1;if(!e.origin.equals(r.origin))return!1;if(Math.round(e.dpi)!==Math.round(r.dpi))return!1;const s=e.lods,i=r.lods,l=Math.min(s.length,i.length);for(let t=0;t<l;t++){const e=s[t],r=i[t];if(e.level!==r.level||Math.round(e.scale)!==Math.round(r.scale))return!1}return!0}}const X=L.Z.defaults&&L.Z.defaults.io.corsEnabledServers;function J(t){if(!t)return;const e=(0,c.P$)(t);X&&!X.includes(e)&&X.push(e)}function Q(...t){let e;for(let r=0;r<t.length;++r)if((0,c.oC)(t[r])){if(e){const s=e.split("://")[0];e=s+":"+t[r].trim()}}else e=(0,c.YP)(t[r])?t[r]:(0,c.v_)(e,t[r]);return(0,c.Qj)(e)}async function tt(t,e,r,s,l){let o,n,a;if((0,h.k_)(l),"string"==typeof r){const t=(0,c.Fv)(r);J(t),a=await(0,i.default)(t,{...l,responseType:"json",query:{f:"json",...l?.query}}),a.ssl&&(o&&(o=o.replace(/^http:/i,"https:")),n&&(n=n.replace(/^http:/i,"https:"))),o=t,n=t}else a={data:r},o=r.jsonUrl||null,n=s;const u=a.data;if(et(u))return t.styleUrl=o||null,async function(t,e,r,s){const i=r?(0,c.Yd)(r):(0,c.L)();t.styleBase=i,t.style=e,t.styleUrl&&J(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const l=[];if(e.sources&&e.sources.esri){const r=e.sources.esri;r.url?await tt(t,"esri",Q(i,r.url),void 0,s):l.push(tt(t,"esri",r,i,s))}for(const r of Object.keys(e.sources))"esri"!==r&&"vector"===e.sources[r].type&&(e.sources[r].url?l.push(tt(t,r,Q(i,e.sources[r].url),void 0,s)):e.sources[r].tiles&&l.push(tt(t,r,e.sources[r],i,s)));await Promise.all(l)}(t,u,n,l);if(!et(u))return t.sourceUrl?rt(t,u,n,!1,e,l):(t.sourceUrl=o||null,rt(t,u,n,!0,e,l));throw new Error("You must specify the URL or the JSON for a service or for a style.")}function et(t){return!!t.sources}async function rt(t,e,r,s,i,l){const o=r?(0,c.Qj)(r)+"/":(0,c.L)(),n=function(t,e){if(t.hasOwnProperty("tileInfo"))return t;const r={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let s=78271.51696400007,i=295828763.7957775;const l=[],o=t.hasOwnProperty("minzoom")?+t.minzoom:0,n=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let t=0;t<=n;t++)t>=o&&l.push({level:t,scale:i,resolution:s}),s/=2,i/=2;for(const r of t.tiles)J(Q(e,r));return{capabilities:"TilesOnly",initialExtent:r,fullExtent:r,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:l,spatialReference:{wkid:102100}}}}(e,o),a=new V(i,(0,c.fl)(o,l?.query),n);if(!s&&t.primarySourceName in t.sourceNameToSource){const e=t.sourceNameToSource[t.primarySourceName];if(!e.isCompatibleWith(a))return;null!=a.fullExtent&&(null!=e.fullExtent?e.fullExtent.union(a.fullExtent):e.fullExtent=a.fullExtent.clone()),e.tileInfo.lods.length<a.tileInfo.lods.length&&(e.tileInfo=a.tileInfo)}if(s?(t.sourceBase=o,t.source=e,t.validatedSource=n,t.primarySourceName=i,t.sourceUrl&&J(t.sourceUrl)):J(o),t.sourceNameToSource[i]=a,!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?tt(t,"",Q(o,e.defaultStyles,"root.json"),void 0,l):tt(t,"",e.defaultStyles,Q(o,"root.json"),l)}}function st(t,e){if(t===e)return!0;if(null==t&&null!=e)return!1;if(null!=t&&null==e)return!1;if(null==t||null==e)return!1;if(!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const r=t.origin,s=e.origin;if(Math.abs(r.x-s.x)>=1e-6||Math.abs(r.y-s.y)>=1e-6)return!1;let i,l;t.lods[0].scale>e.lods[0].scale?(i=t,l=e):(l=t,i=e);for(let t=i.lods[0].scale;t>=l.lods[l.lods.length-1].scale-1e-6;t/=2)if(Math.abs(t-l.lods[0].scale)<1e-6)return!0;return!1}function it(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const r=t.size[0],s=t.format,i=t.dpi,l={x:t.origin.x,y:t.origin.y},o=t.spatialReference.toJSON(),n=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],a=t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1],u=n.scale,h=n.resolution,c=a.scale,p=[];let d=u,y=h,m=0;for(;d>c;)p.push({level:m,resolution:y,scale:d}),m++,d/=2,y/=2;return new C.Z({size:[r,r],dpi:i,format:s||"pbf",origin:l,lods:p,spatialReference:o})}let lt=class extends((0,b.h)((0,E.M)((0,S.Z)((0,v.A)((0,M.O)((0,T.I)((0,x.N)((0,w.V)((0,u.M)(_.Z)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.showCollisionBoxes="none",this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))t?.destroy();this._spriteSourceMap.clear()}async prefetchResources(t){await this.loadSpriteSource(globalThis.devicePixelRatio||1,t)}load(t){const e=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(h.r9).then((async()=>{if(!this.portalItem||!this.portalItem.id)return;const e=`${this.portalItem.itemUrl}/resources/styles/root.json`;(await(0,i.default)(e,{...t,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:e},(0,U.c)(this.portalItem))})).catch(h.r9).then((()=>this._loadStyle(t)));return this.addResolvingPromise(e),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&(0,c.mN)(t.serviceUrl);if(!e)return null;const r=this._getDefaultAttribution(e.path);return r?(0,c.fl)(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get parsedUrl(){return this.serviceUrl?(0,c.mN)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){return this.tileInfo&&this.tileInfo.spatialReference||null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&(0,c.oC)(t)&&(t=`https:${t}`);const r=(0,a.u)((0,i.p)(t));e.styleUrl=(0,D.e)(t,r)}get tileInfo(){const t=[];for(const e in this.sourceNameToSource)t.push(this.sourceNameToSource[e]);let e=this.primarySource?.tileInfo||new C.Z;if(t.length>1)for(let r=0;r<t.length;r++)st(e,t[r].tileInfo)&&(e=it(e,t[r].tileInfo));return e}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}async loadSpriteSource(t=1,e){if(!this._spriteSourceMap.has(t)){const r=B("2d").maxTextureSize,s=this.currentStyleInfo?.spriteUrl?(0,c.fl)(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,i=new q({type:"url",spriteUrl:s,pixelRatio:t,spriteFormat:this.currentStyleInfo?.spriteFormat},r);await i.load(e),this._spriteSourceMap.set(t,i)}return this._spriteSourceMap.get(t)}async setSpriteSource(t,e){if(!t)return null;const r=B("2d").maxTextureSize,s=t.spriteUrl,i=s?(0,c.fl)(s,{...this.customParameters,token:this.apiKey}):null;if(!i&&"url"===t.type)return null;const l=new q(t,r);try{await l.load(e);const r=t.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,l),i&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=i),this.emit("spriteSource-change",{spriteSource:l}),l}catch(t){(0,h.r9)(t)}return null}async loadStyle(t,e){const r=t||this.style||this.url;return this._loadingTask&&"string"==typeof r&&this.url===r||(this._loadingTask?.abort(),this._loadingTask=(0,l.c)((t=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(r,{signal:t}))),e)),this._loadingTask.promise}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,n.d9)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const r=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const s=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:r||s})}getStyleLayer(t){return(0,n.d9)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,n.d9)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return e?.origin&&!this.styleUrl?(e.messages&&e.messages.push(new o.Z("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,r){return null}async _getSourceAndStyle(t,e){if(!t)throw new Error("invalid style!");const r=await async function(t,e){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[s,i]="string"==typeof t?[t,null]:[null,t.jsonUrl];await tt(r,"esri",t,i,e);const l={layerDefinition:r.validatedSource,url:s,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&Q(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&Q(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName};return J(l.spriteUrl),J(l.glyphsUrl),l}(t,{...e,query:{...this.customParameters,token:this.apiKey}});"webp"===r.spriteFormat&&(await($||($=new Promise((t=>{const e=new Image;e.onload=()=>{e.onload=e.onerror=null,t(e.width>0&&e.height>0)},e.onerror=()=>{e.onload=e.onerror=null,t(!1)},e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"})),$))||(r.spriteFormat="png")),this._set("currentStyleInfo",{...r}),"string"==typeof t?(this.url=t,this.style=null):(this.url=null,this.style=t),this._set("sourceNameToSource",r.sourceNameToSource),this._set("primarySource",r.sourceNameToSource[r.primarySourceName]),this._set("styleRepository",new F.S(r.style)),this.read(r.layerDefinition,{origin:"service"}),this.emit("load-style")}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),r=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const s=e[2]&&e[2].toLowerCase();if(!s)return;const i=e[1]||"";for(const t of r)if(t.toLowerCase().includes(s))return(0,c.Fv)(`//static.arcgis.com/attribution/Vector${i}/${t}`)}async _loadStyle(t){return this._loadingTask?.promise??this.loadStyle(null,t)}};(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"attributionDataUrl",null),(0,s._)([(0,p.Cb)({type:["show","hide"]})],lt.prototype,"listMode",void 0),(0,s._)([(0,p.Cb)({json:{read:!0,write:!0}})],lt.prototype,"blendMode",void 0),(0,s._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],lt.prototype,"capabilities",null),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"currentStyleInfo",void 0),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,type:f.Z})],lt.prototype,"fullExtent",null),(0,s._)([(0,p.Cb)()],lt.prototype,"style",void 0),(0,s._)([(0,p.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],lt.prototype,"isReference",void 0),(0,s._)([(0,p.Cb)({type:["VectorTileLayer"]})],lt.prototype,"operationalLayerType",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"parsedUrl",null),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"serviceUrl",null),(0,s._)([(0,p.Cb)({type:g.Z,readOnly:!0})],lt.prototype,"spatialReference",null),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"styleRepository",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"sourceNameToSource",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"primarySource",void 0),(0,s._)([(0,p.Cb)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],lt.prototype,"styleUrl",null),(0,s._)([(0,m.w)(["portal-item","web-document"],"styleUrl")],lt.prototype,"writeStyleUrl",null),(0,s._)([(0,p.Cb)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:C.Z})],lt.prototype,"tileInfo",null),(0,s._)([(0,p.Cb)({json:{read:!1},readOnly:!0,value:"vector-tile"})],lt.prototype,"type",void 0),(0,s._)([(0,p.Cb)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],lt.prototype,"url",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],lt.prototype,"version",void 0),(0,s._)([(0,d.r)("version",["version","currentVersion"])],lt.prototype,"readVersion",null),(0,s._)([(0,p.Cb)({type:String})],lt.prototype,"showCollisionBoxes",void 0),(0,s._)([(0,p.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],lt.prototype,"path",void 0),lt=(0,s._)([(0,y.j)("esri.layers.VectorTileLayer")],lt);const ot=lt},96994:(t,e,r)=>{r.d(e,{V:()=>o});var s=r(29768),i=r(34250),l=(r(76506),r(91306),r(17533));r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(86656),r(60991),r(6540);const o=t=>{let e=class extends t{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?this.portalItem?.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,s._)([(0,i.Cb)({type:String})],e.prototype,"apiKey",null),e=(0,s._)([(0,l.j)("esri.layers.mixins.APIKeyMixin")],e),e}},30208:(t,e,r)=>{r.d(e,{Z:()=>u});var s=r(29768),i=(r(74569),r(34250)),l=(r(76506),r(91306),r(97714)),o=r(17533),n=r(9411),a=r(60947);r(21801),r(40642),r(71552),r(73796),r(12047),r(21972),r(60474),r(66396),r(86656),r(92143),r(31450),r(91055),r(6540),r(19657),r(6906),r(50406),r(60991),r(2906),r(91597),r(86787),r(35132),r(89623),r(84069),r(44567),r(98380),r(92896),r(22781),r(57251),r(32422),r(43352),r(53785),r(95587),r(92482),r(82426),r(72836),r(29794),r(92817),r(82058),r(88762),r(32101),r(79764),r(95873),r(23771),r(58085),r(89241),r(91700);const u=t=>{let e=class extends t{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}readMaxScale(t,e){return null!=e.minLOD&&null!=e.maxLOD?t:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(t,e){return e.capabilities&&e.capabilities.includes("Tilemap")?new n.T({layer:this}):null}};return(0,s._)([(0,i.Cb)({json:{read:{source:"copyrightText"}}})],e.prototype,"copyright",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"minScale",void 0),(0,s._)([(0,l.r)("service","minScale")],e.prototype,"readMinScale",null),(0,s._)([(0,i.Cb)()],e.prototype,"maxScale",void 0),(0,s._)([(0,l.r)("service","maxScale")],e.prototype,"readMaxScale",null),(0,s._)([(0,i.Cb)({type:a.Z})],e.prototype,"spatialReference",void 0),(0,s._)([(0,i.Cb)({readOnly:!0})],e.prototype,"supportsBlankTile",null),(0,s._)([(0,i.Cb)(n.s)],e.prototype,"tileInfo",void 0),(0,s._)([(0,i.Cb)()],e.prototype,"tilemapCache",void 0),(0,s._)([(0,l.r)("service","tilemapCache",["capabilities"])],e.prototype,"readTilemapCache",null),(0,s._)([(0,i.Cb)()],e.prototype,"version",void 0),e=(0,s._)([(0,o.j)("esri.layers.mixins.ArcGISCachedService")],e),e}},21471:(t,e,r)=>{r.d(e,{N:()=>o});var s=r(29768),i=r(34250),l=(r(76506),r(91306),r(17533));r(92143),r(31450),r(71552),r(40642),r(60474),r(66396),r(86656),r(60991),r(6540);const o=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return(0,s._)([(0,i.Cb)({type:Object,json:{write:{overridePolicy:t=>({enabled:!!(t&&Object.keys(t).length>0)})}}})],e.prototype,"customParameters",void 0),e=(0,s._)([(0,l.j)("esri.layers.mixins.CustomParametersMixin")],e),e}},39241:(t,e,r)=>{r.d(e,{I:()=>w});var s=r(29768),i=r(88762),l=r(82058),o=r(41864),n=r(60991),a=r(92143),u=r(71252),h=r(50406),c=r(32101),p=r(34250),d=(r(76506),r(91306),r(97714)),y=r(17533),m=r(2906),f=r(49900),g=r(56420),_=r(74653);r(71552),r(31450),r(40642),r(21972),r(60474),r(66396),r(86656),r(91055),r(6540),r(19657),r(6906),r(12047),r(81184),r(33101),r(21801),r(73796),r(60947),r(91597),r(86787),r(35132),r(89623),r(3482),r(67477),r(57251),r(78533),r(73173),r(74742),r(28239),r(91091),r(58943);const w=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){this.portalItem=(0,u.d)(this.portalItem)}set portalItem(t){t!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",t))}readPortalItem(t,e,r){if(e.itemId)return new g.default({id:e.itemId,portal:r&&r.portal})}writePortalItem(t,e){t&&t.id&&(e.itemId=t.id)}async loadFromPortal(t,e){if(this.portalItem&&this.portalItem.id)try{const s=await Promise.all([r.e(1623),r.e(7086)]).then(r.bind(r,8642)).then((t=>t.l));return(0,h.k_)(e),await s.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData,layerModuleTypeMap:t.layerModuleTypeMap},e)}catch(t){throw(0,h.D_)(t)||a.L.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${t}`),t}}async finishLoadEditablePortalLayer(t){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(t).catch((t=>((0,h.r9)(t),!0))))}async _fetchUserHasEditingPrivileges(t){const e=this.url?i.id?.findCredential(this.url):null;if(!e)return!0;const r=S.credential===e?S.user:await this._fetchEditingUser(t);return S.credential=e,S.user=r,(0,u.a)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(t){const e=this.portalItem?.portal?.user;if(e)return e;const r=i.id.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,n=f.Z.getDefault();if(n&&n.loaded&&(0,c.Fv)(n.restUrl)===(0,c.Fv)(s))return n.user;const a=`${s}/community/self`,h=(0,u.i)(t)?t.signal:null,p=await(0,o.r)((0,l.default)(a,{authMode:"no-prompt",query:{f:"json"},signal:h}));return p.ok?_.default.fromJSON(p.value.data):null}read(t,e){e&&(e.layer=this),super.read(t,e)}write(t,e){const r=e&&e.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||f.Z.getDefault());return r&&s&&!(0,c.tm)(s.restUrl,r.restUrl)?(e.messages&&e.messages.push(new n.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(t,{...e,layer:this})}};return(0,s._)([(0,p.Cb)({type:g.default})],e.prototype,"portalItem",null),(0,s._)([(0,d.r)("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),(0,s._)([(0,m.w)("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),(0,s._)([(0,p.Cb)({clonable:!1})],e.prototype,"resourceReferences",void 0),(0,s._)([(0,p.Cb)({readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),e=(0,s._)([(0,y.j)("esri.layers.mixins.PortalLayer")],e),e},S={credential:null,user:null}}}]);