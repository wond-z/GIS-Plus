/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{b as r}from"../chunks/maybe.js";function e(r){const e=[];return function*(){yield*e;for(const t of r)e.push(t),yield t}}function t(r,e){for(const t of r)if(null!=t&&e(t))return t}function s(r){return null!=r&&"function"==typeof r[Symbol.iterator]}class o{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let r=0;return this._groups.forEach((e=>{r+=e.length})),r}add(r,e){if(s(r)){const t=this._getOrCreateGroup(e);for(const e of r)this._isHandle(e)&&t.push(e)}else this._isHandle(r)&&this._getOrCreateGroup(e).push(r);return this}forEach(r,e){if("function"==typeof r)this._groups.forEach((e=>e.forEach(r)));else{const t=this._getGroup(r);t&&e&&t.forEach(e)}}has(r){return this._groups.has(this._ensureGroupKey(r))}remove(r){if("string"!=typeof r&&s(r)){for(const e of r)this.remove(e);return this}return this.has(r)?(this._removeAllFromGroup(this._getGroup(r)),this._groups.delete(this._ensureGroupKey(r)),this):this}removeAll(){return this._groups.forEach((r=>this._removeAllFromGroup(r))),this._groups.clear(),this}_isHandle(r){return r&&!!r.remove}_getOrCreateGroup(r){if(this.has(r))return this._getGroup(r);const e=[];return this._groups.set(this._ensureGroupKey(r),e),e}_getGroup(e){return r(this._groups.get(this._ensureGroupKey(e)))}_ensureGroupKey(r){return r||"_default_"}_removeAllFromGroup(r){r.forEach((r=>r.remove()))}}export{e as c,o as default,t as f,s as i};
