/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{a as o}from"./maybe.js";import{a as t}from"./quantityUtils.js";import{q as r}from"./unitUtils.js";import{e as n}from"./earcut.js";import{d as s,s as e,w as i,H as a}from"./vec3.js";import{projectVectorToVector as f}from"../geometry/projection.js";import{d as l,w as c,n as u,p as m}from"./plane.js";import{a as p}from"./triangle.js";import{c as d}from"./measurementUtils2.js";function j(o,t={positionsWorldCoords:[]}){return h(o,t)}function g(o,t={positionsWorldCoords:[]}){return h(o,t,!1)}function h(n,j,g=n.hasZ){const h=d(n.spatialReference),W=r(h);if(o(W))return null;let U=0;for(const o of n.rings){const t=o.length;if(t<3)continue;const{positionsWorldCoords:r}=j;for(;r.length<t;)r.push(s());const d=y,W=e(C,0,0,0),R=1/t;for(let s=0;s<t;s++){if(q=d,(v=o[s]).length<2||(e(q,v[0],v[1],g&&v[2]||0),0))return null;if(!f(d,n.spatialReference,r[s],h))return null;i(W,W,r[s],R)}const b=l(r[0],r[1],W,c());if(0===a(u(b)))continue;for(let o=0;o<t;o++)m(b,W,r[o],r[o]);const x=w(r);for(let o=0;o<x.length;o+=3)U+=p(r[x[o]],r[x[o+1]],r[x[o+2]])}var q,v;return t(U,W)}const y=s(),C=s();function W(){return{positionsWorldCoords:[]}}function w(o){return n(function(o){const t=new Float64Array(2*o.length);for(let r=0;r<o.length;++r){const n=o[r],s=2*r;t[s+0]=n[0],t[s+1]=n[1]}return t}(o),[],2)}export{j as a,W as c,g as e,w as t};
