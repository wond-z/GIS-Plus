/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{e as t}from"./floating-ui.js";import"../widgets/Widget.js";import"./tslib.es6.js";import"../intl.js";import"./number.js";import"./jsonMap.js";import"./object.js";import"../core/lang.js";import"./maybe.js";import"./locale.js";import"./Logger.js";import"../config.js";import"./string.js";import"./messages.js";import"../core/Error.js";import"../core/promiseUtils.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./assets.js";import"./domUtils.js";import"../core/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"./get.js";import"./utils.js";import"./handleUtils.js";import"./metadata.js";import"./ArrayPool.js";import"../core/accessorSupport/decorators/subclass.js";import"./tracking.js";import"./ensureType.js";import"../core/accessorSupport/decorators/property.js";import"./watch.js";import"../core/scheduling.js";import"./nextTick.js";import"../core/Promise.js";import"../core/reactiveUtils.js";import"./uuid.js";import"../core/accessorSupport/decorators/cast.js";import"./projector.js";import"./widgetUtils.js";import"./jsxWidgetSupport.js";import"./debounce.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function o(t){return l(t)&&"fixed"!==r(t).position?function(t){let{offsetParent:o}=t,e=t,n=!1;for(;e&&e!==o;){const{assignedSlot:t}=e;if(t){let i=t.offsetParent;if("contents"===r(t).display){const o=t.hasAttribute("style"),n=t.style.display;t.style.display=r(e).display,i=t.offsetParent,t.style.display=n,o||t.removeAttribute("style")}e=t,o!==i&&(o=i,n=!0)}else if(f(e)&&e.host&&n)break;e=f(e)&&e.host||e.parentNode}return o}(t):null}function e(t){const{reference:o,floating:e,strategy:n}=t;return{reference:W(o,H(e),n),floating:{...T(e),x:0,y:0}}}function n(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function i(t){if(null==t)return window;if(!n(t)){const o=t.ownerDocument;return o&&o.defaultView||window}return t}function r(t){return i(t).getComputedStyle(t)}function s(t){return n(t)?"":t?(t.nodeName||"").toLowerCase():""}function c(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+"/"+t.version)).join(" "):navigator.userAgent}function l(t){return t instanceof i(t).HTMLElement}function u(t){return t instanceof i(t).Element}function f(t){return"undefined"!=typeof ShadowRoot&&(t instanceof i(t).ShadowRoot||t instanceof ShadowRoot)}function d(t){const{overflow:o,overflowX:e,overflowY:n,display:i}=r(t);return/auto|scroll|overlay|hidden/.test(o+n+e)&&!["inline","contents"].includes(i)}function p(t){return["table","td","th"].includes(s(t))}function a(t){const o=/firefox/i.test(c()),e=r(t);return"none"!==e.transform||"none"!==e.perspective||o&&"filter"===e.willChange||o&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const o=e.contain;return null!=o&&o.includes(t)}))}function h(){return!/^((?!chrome|android).)*safari/i.test(c())}function m(t){return["html","body","#document"].includes(s(t))}const g=Math.min,j=Math.max,w=Math.round;function y(t,o,e){var n,r,s,c;void 0===o&&(o=!1),void 0===e&&(e=!1);const f=t.getBoundingClientRect();let d=1,p=1;o&&l(t)&&(d=t.offsetWidth>0&&w(f.width)/t.offsetWidth||1,p=t.offsetHeight>0&&w(f.height)/t.offsetHeight||1);const a=u(t)?i(t):window,m=!h()&&e,g=(f.left+(m&&null!=(n=null==(r=a.visualViewport)?void 0:r.offsetLeft)?n:0))/d,j=(f.top+(m&&null!=(s=null==(c=a.visualViewport)?void 0:c.offsetTop)?s:0))/p,y=f.width/d,v=f.height/p;return{width:y,height:v,top:j,right:g+y,bottom:j+v,left:g,x:g,y:j}}function v(t){return(o=t,(o instanceof i(o).Node?t.ownerDocument:t.document)||window.document).documentElement;var o}function b(t){return u(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function x(t){return y(v(t)).left+b(t).scrollLeft}function W(t,o,e){const n=l(o),i=v(o),r=y(t,n&&function(t){const o=y(t);return w(o.width)!==t.offsetWidth||w(o.height)!==t.offsetHeight}(o),"fixed"===e);let c={scrollLeft:0,scrollTop:0};const u={x:0,y:0};if(n||!n&&"fixed"!==e)if(("body"!==s(o)||d(i))&&(c=b(o)),l(o)){const t=y(o,!0);u.x=t.x+o.clientLeft,u.y=t.y+o.clientTop}else i&&(u.x=x(i));return{x:r.left+c.scrollLeft-u.x,y:r.top+c.scrollTop-u.y,width:r.width,height:r.height}}function L(t){return"html"===s(t)?t:t.assignedSlot||t.parentNode||(f(t)?t.host:null)||v(t)}function H(t){const e=i(t);let n=o(t);for(;n&&p(n)&&"static"===r(n).position;)n=o(n);return n&&("html"===s(n)||"body"===s(n)&&"static"===r(n).position&&!a(n))?e:n||function(t){let o=L(t);for(f(o)&&(o=o.host);l(o)&&!m(o);){if(a(o))return o;{const t=o.parentNode;o=f(t)?t.host:t}}return null}(t)||e}function T(t){if(l(t))return{width:t.offsetWidth,height:t.offsetHeight};const o=y(t);return{width:o.width,height:o.height}}function S(t){const o=L(t);return m(o)?t.ownerDocument.body:l(o)&&d(o)?o:S(o)}function N(t,o){var e;void 0===o&&(o=[]);const n=S(t),r=n===(null==(e=t.ownerDocument)?void 0:e.body),s=i(n),c=r?[s].concat(s.visualViewport||[],d(n)?n:[]):n,l=o.concat(c);return r?l:l.concat(N(c))}function A(o,e,n){return"viewport"===e?t(function(t,o){const e=i(t),n=v(t),r=e.visualViewport;let s=n.clientWidth,c=n.clientHeight,l=0,u=0;if(r){s=r.width,c=r.height;const t=h();(t||!t&&"fixed"===o)&&(l=r.offsetLeft,u=r.offsetTop)}return{width:s,height:c,x:l,y:u}}(o,n)):u(e)?function(t,o){const e=y(t,!1,"fixed"===o),n=e.top+t.clientTop,i=e.left+t.clientLeft;return{top:n,left:i,x:i,y:n,right:i+t.clientWidth,bottom:n+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(e,n):t(function(t){var o;const e=v(t),n=b(t),i=null==(o=t.ownerDocument)?void 0:o.body,s=j(e.scrollWidth,e.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),c=j(e.scrollHeight,e.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let l=-n.scrollLeft+x(t);const u=-n.scrollTop;return"rtl"===r(i||e).direction&&(l+=j(e.clientWidth,i?i.clientWidth:0)-s),{width:s,height:c,x:l,y:u}}(v(o)))}function D(t){const o=N(t),e=function(t,o){let e=t;for(;e&&!m(e)&&!o.includes(e)&&(!u(e)||!["absolute","fixed"].includes(r(e).position));){const t=L(e);e=f(t)?t.host:t}return e}(t,o);let n=null;if(e&&l(e)){const t=H(e);d(e)?n=e:l(t)&&(n=t)}return u(n)?o.filter((t=>n&&u(t)&&function(t,o){const e=null==o.getRootNode?void 0:o.getRootNode();if(t.contains(o))return!0;if(e&&f(e)){let e=o;do{if(e&&t===e)return!0;e=e.parentNode||e.host}while(e)}return!1}(t,n)&&"body"!==s(t))):[]}function R(t){let{element:o,boundary:e,rootBoundary:n,strategy:i}=t;const r=[..."clippingAncestors"===e?D(o):[].concat(e),n],s=r[0],c=r.reduce(((t,e)=>{const n=A(o,e,i);return t.top=j(n.top,t.top),t.right=g(n.right,t.right),t.bottom=g(n.bottom,t.bottom),t.left=j(n.left,t.left),t}),A(o,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}export{R as getClippingRect,e as getElementRects,H as getOffsetParent};
