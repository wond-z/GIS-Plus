/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{l as t}from"../core/lang.js";import{W as e}from"./WorkerHandle.js";import{u as r}from"./workerHelper.js";import{c as s}from"./edgeProcessing.js";class a extends e{constructor(t){super("EdgeProcessingWorker","extract",{extract:t=>[t.dataBuffer],extractComponentsEdgeLocations:t=>[t.dataBuffer],extractEdgeLocations:t=>[t.dataBuffer]},t)}async process(t,e,r){if(r)return s(t);const a=await this.invoke(new n(t),e);return this._unpackOutput(a)}async extractEdgeLocations(t,e){const s=await this.invokeMethod("extractEdgeLocations",new n(t),e);return r(s)}async extractComponentsEdgeLocations(t,e){const s=await this.invokeMethod("extractComponentsEdgeLocations",new n(t),e);return r(s)}_unpackOutput(t){return{regular:{instancesData:r(t.regular.instancesData),lodInfo:{lengths:new Float32Array(t.regular.lodInfo.lengths)}},silhouette:{instancesData:r(t.silhouette.instancesData),lodInfo:{lengths:new Float32Array(t.silhouette.lodInfo.lengths)}},averageEdgeLength:t.averageEdgeLength}}}class n{constructor(e){this.dataBuffer=e.data.buffer,this.writerSettings=e.writerSettings,this.skipDeduplicate=e.skipDeduplicate,this.indices=Array.isArray(e.indices)?e.indices:e.indices.buffer,this.indicesType=Array.isArray(e.indices)?"Array":t(e.indices)?"Uint32Array":"Uint16Array",this.indicesLength=e.indicesLength}}export{a as E};
