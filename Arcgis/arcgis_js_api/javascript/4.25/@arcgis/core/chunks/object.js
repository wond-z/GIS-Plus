/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{clone as e}from"../core/lang.js";let a;function r(e){return"function"==typeof a[e]?a[e]=a[e](globalThis):a[e]}function o(e,a,r=!1){return t(e,a,r)}function d(e,a){if(null!=a)return a[e]||s(e.split("."),!1,a)}function i(e,a,r){const o=e.split("."),d=o.pop(),i=s(o,!0,r);i&&d&&(i[d]=a)}function s(e,a,r){let o=r;for(const r of e){if(null==o)return;if(!(r in o)){if(!a)return;o[r]={}}o=o[r]}return o}function t(a,r,o){return r?Object.keys(r).reduce(((a,d)=>{let i=a[d],s=r[d];return i===s?a:void 0===i?(a[d]=e(s),a):(Array.isArray(s)||Array.isArray(a)?(i=i?Array.isArray(i)?a[d]=i.concat():a[d]=[i]:a[d]=[],s&&(Array.isArray(s)||(s=[s]),o?s.forEach((e=>{i.includes(e)||i.push(e)})):a[d]=s.concat())):s&&"object"==typeof s?a[d]=t(i,s,o):a.hasOwnProperty(d)&&!r.hasOwnProperty(d)||(a[d]=s),a)}),a||{}):a}a=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},r.add=(e,o,d,i)=>((i||void 0===a[e])&&(a[e]=o),d&&r(e)),r.cache=a,r.add("esri-deprecation-warnings",!0),(()=>{r.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(r.add("host-browser",e),r.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),r.add("dom",e),r("host-browser")){const e=navigator,a=e.userAgent,o=e.appVersion,d=parseFloat(o);if(r.add("wp",parseFloat(a.split("Windows Phone")[1])||void 0),r.add("msapp",parseFloat(a.split("MSAppHost/")[1])||void 0),r.add("khtml",o.includes("Konqueror")?d:void 0),r.add("edge",parseFloat(a.split("Edge/")[1])||void 0),r.add("opr",parseFloat(a.split("OPR/")[1])||void 0),r.add("webkit",!r("wp")&&!r("edge")&&parseFloat(a.split("WebKit/")[1])||void 0),r.add("chrome",!r("edge")&&!r("opr")&&parseFloat(a.split("Chrome/")[1])||void 0),r.add("android",!r("wp")&&parseFloat(a.split("Android ")[1])||void 0),r.add("safari",!o.includes("Safari")||r("wp")||r("chrome")||r("android")||r("edge")||r("opr")?void 0:parseFloat(o.split("Version/")[1])),r.add("mac",o.includes("Macintosh")),!r("wp")&&a.match(/(iPhone|iPod|iPad)/)){const e=RegExp.$1.replace(/P/,"p"),o=a.match(/OS ([\d_]+)/)?RegExp.$1:"1",d=parseFloat(o.replace(/_/,".").replace(/_/g,""));r.add(e,d),r.add("ios",d)}r.add("trident",parseFloat(o.split("Trident/")[1])||void 0),r("webkit")||(!a.includes("Gecko")||r("wp")||r("khtml")||r("trident")||r("edge")||r.add("mozilla",d),r("mozilla")&&r.add("ff",parseFloat(a.split("Firefox/")[1]||a.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),o=/iPhone/i.test(e);a&&r.add("esri-mobile",a),o&&r.add("esri-iPhone",o),r.add("esri-geolocation",!!navigator.geolocation)}r.add("esri-canvas-svg-support",!r("trident")),r.add("esri-wasm","WebAssembly"in globalThis),r.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,a=!1===globalThis.crossOriginIsolated;return e&&!a})),r.add("wasm-simd",(()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))),r.add("esri-atomics","Atomics"in globalThis),r.add("esri-workers","Worker"in globalThis),r.add("web-feat:cache","caches"in globalThis),r.add("esri-workers-arraybuffer-transfer",!r("safari")||Number(r("safari"))>=12),r.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),r.add("featurelayer-simplify-payload-size-factors",[1,1,4]),r.add("featurelayer-snapshot-enabled",!0),r.add("featurelayer-snapshot-point-min-threshold",8e4),r.add("featurelayer-snapshot-point-max-threshold",4e5),r.add("featurelayer-snapshot-point-coverage",.1),r.add("featurelayer-advanced-symbols",!1),r.add("featurelayer-pbf",!0),r.add("featurelayer-pbf-statistics",!1),r.add("feature-layers-workers",!0),r.add("feature-polyline-generalization-factor",1),r.add("mapview-transitions-duration",200),r.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),r.add("mapserver-pbf-enabled",!1),r.add("mapimagelayer-popup-identify-max-tolerance",20),r.add("heatmap-allow-raster-fallback",!0),r.add("heatmap-force-raster",!1),r("host-webworker")||r("host-browser")&&(r.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),r.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{r.add("esri-image-decode",!0,!0,!0)})).catch((()=>{r.add("esri-image-decode",!1,!0,!0)}))}return!1})),r.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();export{o as d,d as g,r as h,i as s};
