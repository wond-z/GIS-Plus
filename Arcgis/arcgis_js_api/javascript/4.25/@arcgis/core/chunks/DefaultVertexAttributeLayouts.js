/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{Z as e}from"./vec2f64.js";import{C as t}from"./context-util.js";import{a,T as n,P as s,S as r,c as i,b as o,k as u,D as f}from"./enums3.js";import{T as m}from"./Texture.js";import{V as c}from"./VertexElementDescriptor.js";function l(e,u,f="nearest",c=!1){const l=!(c&&"u8"===u.pixelType),_=l?a.FLOAT:a.UNSIGNED_BYTE,p=null==u.pixels||0===u.pixels.length?null:l?u.getAsRGBAFloat():u.getAsRGBA(),T=e.capabilities.textureFloat?.textureFloatLinear,g={width:u.width,height:u.height,target:n.TEXTURE_2D,pixelFormat:s.RGBA,internalFormat:e.type===t.WEBGL2&&l?r.RGBA32F:s.RGBA,samplingMode:!T||"bilinear"!==f&&"cubic"!==f?i.NEAREST:i.LINEAR,dataType:_,wrapMode:o.CLAMP_TO_EDGE,flipped:!1};return new m(e,g,p)}function _(e,u){const{spacing:f,offsets:c,coefficients:l,size:[_,p]}=u,T=f[0]>1,g={width:T?4*_:_,height:p,target:n.TEXTURE_2D,pixelFormat:s.RGBA,internalFormat:e.type===t.WEBGL2?r.RGBA32F:s.RGBA,dataType:a.FLOAT,samplingMode:i.NEAREST,wrapMode:o.CLAMP_TO_EDGE,flipped:!1},E=new Float32Array(T?_*p*16:2*c.length);if(T)for(let e=0,t=0;e<l.length;e++)E[t++]=l[e],e%3==2&&(E[t++]=1);else for(let e=0;e<p;e++)for(let t=0;t<_;t++){const a=4*(e*_+t),n=2*(t*p+e);E[a]=c[n],E[a+1]=c[n+1],E[a+3]=-1===c[n]?0:1}return new m(e,g,E)}function p(e,t){const r={width:t.length/4,height:1,target:n.TEXTURE_2D,pixelFormat:s.RGBA,internalFormat:s.RGBA,dataType:a.UNSIGNED_BYTE,samplingMode:i.NEAREST,wrapMode:o.CLAMP_TO_EDGE,flipped:!1};return new m(e,r,t)}function T(t,a,n,s=1,r=!0){return{u_flipY:r,u_applyTransform:!!t,u_opacity:s,u_transformSpacing:t?t.spacing:e,u_transformGridSize:t?t.size:e,u_targetImageSize:a,u_srcImageSize:n}}function g(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function E(e,t){return{u_scale:e,u_offset:t}}function A(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function h(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function O(e,t){const a=e.gl,n=t.glName,s=a.getProgramParameter(n,a.ACTIVE_UNIFORMS),r=new Map;let i;for(let e=0;e<s;e++)i=a.getActiveUniform(n,e),i&&r.set(i.name,{location:a.getUniformLocation(n,i.name),info:i});return r}function d(e,t,a){Object.keys(a).forEach((n=>{const s=t.get(n)||t.get(n+"[0]");s&&function(e,t,a,n){if(null===n||null==a)return!1;const{info:s}=n;switch(s.type){case u.FLOAT:s.size>1?e.setUniform1fv(t,a):e.setUniform1f(t,a);break;case u.FLOAT_VEC2:e.setUniform2fv(t,a);break;case u.FLOAT_VEC3:e.setUniform3fv(t,a);break;case u.FLOAT_VEC4:e.setUniform4fv(t,a);break;case u.FLOAT_MAT3:e.setUniformMatrix3fv(t,a);break;case u.FLOAT_MAT4:e.setUniformMatrix4fv(t,a);break;case u.INT:s.size>1?e.setUniform1iv(t,a):e.setUniform1i(t,a);break;case u.BOOL:e.setUniform1i(t,a?1:0);break;case u.INT_VEC2:case u.BOOL_VEC2:e.setUniform2iv(t,a);break;case u.INT_VEC3:case u.BOOL_VEC3:e.setUniform3iv(t,a);break;case u.INT_VEC4:case u.BOOL_VEC4:e.setUniform4iv(t,a)}}(e,n,a[n],s)}))}function x(e,t,a,n){a.length===n.length&&(n.some((e=>null==e))||a.some((e=>null==e))||a.forEach(((a,s)=>{t.setUniform1i(a,s),e.bindTexture(n[s],s)})))}const U={geometry:[new c("a_pos",2,f.BYTE,0,2)]},C={geometry:[new c("a_pos",2,f.BYTE,0,4),new c("a_tex",2,f.BYTE,2,4)]},B={geometry:[new c("a_pos",2,f.UNSIGNED_SHORT,0,4)]};export{U as P,l as a,p as b,_ as c,d,g as e,A as f,T as g,h,O as i,E as j,B as k,C as l,x as s};
