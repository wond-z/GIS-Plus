/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{a as e,i as t,u as r,c as s,r as i,p as a}from"./maybe.js";import{P as n,R as o,a as l,S as c}from"./basicInterfaces.js";import{P as d}from"../core/scheduling.js";import{d as u,f as h,k as m,z as f,G as p,s as _,g,a as v,I as T,Z as x,e as b,b as A}from"./vec3.js";import{a as w}from"./Util2.js";import{C as E,b as S,a as P,g as I,N as y,D as R}from"./Material.js";import{b as M}from"./triangle.js";import{g as F,c as C}from"./Indices.js";import{V as O}from"./VertexAttribute.js";import{c as L}from"./mat3f64.js";import{_ as D}from"./tslib.es6.js";import{p as B,S as G}from"./ShaderTechniqueConfiguration.js";import{S as U}from"./RenderSlot.js";import{c as N}from"./mat4f64.js";import{b as V}from"./vec3f32.js";import{h as H}from"./object.js";import{k as z,l as j}from"./mat4.js";import{c as W}from"./mat4f32.js";import{n as $}from"./compilerUtils.js";import k from"../core/Error.js";import q from"../core/Evented.js";import{i as X,f as K}from"./mathUtils.js";import{throwIfAborted as Y,onAbort as Z,createAbortError as J}from"../core/promiseUtils.js";import{h as Q,q as ee}from"../core/lang.js";import{isBlobProtocol as te,isDataProtocol as re}from"../core/urlUtils.js";import{r as se}from"./requestImageUtils.js";import{l as ie}from"../request.js";import{f as ae}from"./vec4f64.js";import{L as ne}from"./Logger.js";import{g as oe}from"./assets.js";import{C as le,P as ce,c as de,D as ue,U as he,T as me,a as fe,b as pe,g as _e,h as ge,e as ve,d as Te,f as xe}from"./enums3.js";import{T as be,i as Ae,w as we}from"./Texture.js";import{g as Ee,V as Se,B as Pe,F as Ie,v as ye}from"./FramebufferObject.js";import{V as Re}from"./VertexElementDescriptor.js";import{s as Me}from"./vec2.js";import{Z as Fe,a as Ce}from"./vec2f64.js";import{b as Oe,c as Le,d as De,a as Be}from"./BufferView.js";class Ge{constructor(e,t,r,s){this.primitiveIndices=e,this._numIndexPerPrimitive=t,this.indices=r,this.position=s,this.center=u(),this._children=void 0,w(e.length>=1),w(r.length%this._numIndexPerPrimitive==0),w(r.length>=e.length*this._numIndexPerPrimitive),w(3===s.size||4===s.size);const{data:i,size:a}=s,n=e.length;let o=a*r[this._numIndexPerPrimitive*e[0]];Ue.clear(),Ue.push(o),this.bbMin=h(i[o],i[o+1],i[o+2]),this.bbMax=m(this.bbMin);for(let t=0;t<n;++t){const s=this._numIndexPerPrimitive*e[t];for(let e=0;e<this._numIndexPerPrimitive;++e){o=a*r[s+e],Ue.push(o);let t=i[o];this.bbMin[0]=Math.min(t,this.bbMin[0]),this.bbMax[0]=Math.max(t,this.bbMax[0]),t=i[o+1],this.bbMin[1]=Math.min(t,this.bbMin[1]),this.bbMax[1]=Math.max(t,this.bbMax[1]),t=i[o+2],this.bbMin[2]=Math.min(t,this.bbMin[2]),this.bbMax[2]=Math.max(t,this.bbMax[2])}}f(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let l=this.radius*this.radius;for(let e=0;e<Ue.length;++e){o=Ue.getItemAt(e);const t=i[o]-this.center[0],r=i[o+1]-this.center[1],s=i[o+2]-this.center[2],a=t*t+r*r+s*s;if(a<=l)continue;const n=Math.sqrt(a),c=.5*(n-this.radius);this.radius=this.radius+c,l=this.radius*this.radius;const d=c/n;this.center[0]+=t*d,this.center[1]+=r*d,this.center[2]+=s*d}Ue.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(p(this.bbMin,this.bbMax)>1){const e=f(u(),this.bbMin,this.bbMax,.5),t=this.primitiveIndices.length,r=new Uint8Array(t),s=new Array(8);for(let e=0;e<8;++e)s[e]=0;const{data:i,size:a}=this.position;for(let n=0;n<t;++n){let t=0;const o=this._numIndexPerPrimitive*this.primitiveIndices[n];let l=a*this.indices[o],c=i[l],d=i[l+1],u=i[l+2];for(let e=1;e<this._numIndexPerPrimitive;++e){l=a*this.indices[o+e];const t=i[l],r=i[l+1],s=i[l+2];t<c&&(c=t),r<d&&(d=r),s<u&&(u=s)}c<e[0]&&(t|=1),d<e[1]&&(t|=2),u<e[2]&&(t|=4),r[n]=t,++s[t]}let n=0;for(let e=0;e<8;++e)s[e]>0&&++n;if(n<2)return;const o=new Array(8);for(let e=0;e<8;++e)o[e]=s[e]>0?new Uint32Array(s[e]):void 0;for(let e=0;e<8;++e)s[e]=0;for(let e=0;e<t;++e){const t=r[e];o[t][s[t]++]=this.primitiveIndices[e]}this._children=new Array(8);for(let e=0;e<8;++e)void 0!==o[e]&&(this._children[e]=new Ge(o[e],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){Ue.prune()}}const Ue=new d({deallocator:null});function Ne(e,t,r){if(!e||!t)return!1;const{size:s,data:i}=e;_(r,0,0,0),_($e,0,0,0);let a=0,n=0;for(let e=0;e<t.length-2;e+=3){const o=t[e+0]*s,l=t[e+1]*s,c=t[e+2]*s;_(ze,i[o+0],i[o+1],i[o+2]),_(je,i[l+0],i[l+1],i[l+2]),_(We,i[c+0],i[c+1],i[c+2]);const d=M(ze,je,We);d?(v(ze,ze,je),v(ze,ze,We),g(ze,ze,1/3*d),v(r,r,ze),a+=d):(v($e,$e,ze),v($e,$e,je),v($e,$e,We),n+=3)}return!(0===n&&0===a||(0!==a?(g(r,r,1/a),0):0===n||(g(r,$e,1/n),0)))}function Ve(e,t,r){if(!e||!t)return!1;const{size:s,data:i}=e;_(r,0,0,0);let a=-1,n=0;for(let e=0;e<t.length;e++){const o=t[e]*s;a!==o&&(r[0]+=i[o+0],r[1]+=i[o+1],r[2]+=i[o+2],n++),a=o}return n>1&&g(r,r,1/n),n>0}function He(e,t,r,s){if(!e)return!1;const{size:i,data:a}=e;_(s,0,0,0),_($e,0,0,0);let n=0,o=0;const l=t?t.length-1:a.length/i-1,c=l+(r?2:0);for(let e=0;e<c;e+=2){const r=e<l?e:l,c=e<l?e+1:0,d=(t?t[r]:r)*i,u=(t?t[c]:c)*i;ze[0]=a[d+0],ze[1]=a[d+1],ze[2]=a[d+2],je[0]=a[u+0],je[1]=a[u+1],je[2]=a[u+2],g(ze,v(ze,ze,je),.5);const h=T(ze,je);h>0?(v(s,s,g(ze,ze,h)),n+=h):(v($e,$e,ze),o++)}return 0!==n?(g(s,s,1/n),!0):0!==o&&(g(s,$e,1/o),!0)}const ze=u(),je=u(),We=u(),$e=u();class ke extends E{constructor(e,t=[],r=n.Triangle,s=null,i=-1){super(),this._primitiveType=r,this.objectAndLayerIdColor=s,this.edgeIndicesLength=i,this.type=S.Geometry,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[t,r]of e)r&&this._vertexAttributes.set(t,{...r});if(null==t||0===t.length){const e=function(e){const t=e.values().next().value;return null==t?0:t.data.length/t.size}(this._vertexAttributes),t=F(e);this.edgeIndicesLength=this.edgeIndicesLength<0?e:this.edgeIndicesLength;for(const e of this._vertexAttributes.keys())this._indices.set(e,t)}else for(const[e,r]of t)r&&(this._indices.set(e,C(r)),e===O.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(e).length:this.edgeIndicesLength))}cloneShallow(){const e=new ke([],void 0,this._primitiveType,this.objectAndLayerIdColor,void 0),{_vertexAttributes:t,_indices:r}=e;return this._vertexAttributes.forEach(((e,r)=>t.set(r,e))),this._indices.forEach(((e,t)=>r.set(t,e))),e.screenToWorldRatio=this.screenToWorldRatio,e._boundingInfo=this._boundingInfo,e}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(e){const t=this._vertexAttributes.get(e);return t&&!t.exclusive&&(t.data=Array.from(t.data),t.exclusive=!0),t}get indices(){return this._indices}get indexCount(){const e=this._indices.values().next().value;return e?e.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return e(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return this.primitiveType===n.Triangle?this._computeAttachmentOriginTriangles(e):this._computeAttachmentOriginPoints(e)}_computeAttachmentOriginTriangles(e){const t=this.indices.get(O.POSITION);return Ne(this.vertexAttributes.get(O.POSITION),t,e)}_computeAttachmentOriginPoints(e){const t=this.indices.get(O.POSITION);return Ve(this.vertexAttributes.get(O.POSITION),t,e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const e=this.indices.get(O.POSITION);if(!e||0===e.length)return null;const t=this.primitiveType===n.Triangle?3:1;w(e.length%t==0,"Indexing error: "+e.length+" not divisible by "+t);const r=F(e.length/t),s=this.vertexAttributes.get(O.POSITION);return s?new Ge(r,t,e,s):null}}class qe{constructor(e){this._material=e.material,this._techniqueRepository=e.techniqueRep,this._output=e.output}dispose(){this._techniqueRepository.release(this._technique)}get technique(){return this._technique}get _stippleTextureRepository(){return this._techniqueRepository.constructionContext.stippleTextureRepository}ensureTechnique(e,t,r=this._output){return this._technique=this._techniqueRepository.releaseAndAcquire(e,this._material.getConfiguration(r,t),this._technique),this._technique}ensureResources(e){return o.LOADED}}class Xe extends P{constructor(){super(...arguments),this.vvSizeEnabled=!1,this.vvSizeMinSize=h(1,1,1),this.vvSizeMaxSize=h(100,100,100),this.vvSizeOffset=h(0,0,0),this.vvSizeFactor=h(1,1,1),this.vvSizeValue=h(1,1,1),this.vvColorEnabled=!1,this.vvColorValues=[0,0,0,0,0,0,0,0],this.vvColorColors=[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],this.vvOpacityEnabled=!1,this.vvOpacityValues=[0,0,0,0,0,0,0,0],this.vvOpacityOpacities=[1,1,1,1,1,1,1,1],this.vvSymbolAnchor=[0,0,0],this.vvSymbolRotationMatrix=L()}}const Ke=8;var Ye;!function(e){e[e.Pass=0]="Pass",e[e.Draw=1]="Draw"}(Ye||(Ye={}));class Ze extends G{constructor(){super(...arguments),this.hasWebGL2Context=!1}}function Je(e){e.attributes.add(O.POSITION,"vec3"),e.vertex.code.add(I`vec3 positionModel() { return position; }`)}function Qe({code:e},t){t.doublePrecisionRequiresObfuscation?e.add(I`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):e.add(I`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}function et(e){return!!H("force-double-precision-obfuscation")||e.driverTest.doublePrecisionRequiresObfuscation}D([B({constValue:!0})],Ze.prototype,"hasSliceHighlight",void 0),D([B({constValue:!1})],Ze.prototype,"hasSliceInVertexProgram",void 0),D([B({constValue:!1})],Ze.prototype,"instancedDoublePrecision",void 0),D([B({constValue:!1})],Ze.prototype,"useLegacyTerrainShading",void 0),D([B({constValue:!1})],Ze.prototype,"hasModelTransformation",void 0),D([B({constValue:Ye.Pass})],Ze.prototype,"pbrTextureBindType",void 0),D([B()],Ze.prototype,"hasWebGL2Context",void 0);class tt{constructor(e,r,s,i,a=null){this.name=e,this.type=r,this.arraySize=a,this.bind={[Ye.Pass]:null,[Ye.Draw]:null},t(s)&&t(i)&&(this.bind[s]=i)}equals(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}class rt extends tt{constructor(e,t){super(e,"vec3",Ye.Draw,((r,s,i,a)=>r.setUniform3fv(e,t(s,i,a))))}}class st extends tt{constructor(e,t){super(e,"vec3",Ye.Pass,((r,s,i)=>r.setUniform3fv(e,t(s,i))))}}class it extends tt{constructor(e,t){super(e,"mat3",Ye.Draw,((r,s,i)=>r.setUniformMatrix3fv(e,t(s,i))))}}class at extends tt{constructor(e,t){super(e,"mat3",Ye.Pass,((r,s,i)=>r.setUniformMatrix3fv(e,t(s,i))))}}class nt extends tt{constructor(e,t){super(e,"mat4",Ye.Pass,((r,s,i)=>r.setUniformMatrix4fv(e,t(s,i))))}}function ot(e,t){e.include(Je);const r=e.vertex;r.include(Qe,t),e.varyings.add("vPositionWorldCameraRelative","vec3"),e.varyings.add("vPosition_view","vec3"),r.uniforms.add([new st("transformWorldFromViewTH",(e=>e.transformWorldFromViewTH)),new st("transformWorldFromViewTL",(e=>e.transformWorldFromViewTL)),new at("transformViewFromCameraRelativeRS",(e=>e.transformViewFromCameraRelativeRS)),new nt("transformProjFromView",(e=>e.transformProjFromView)),new it("transformWorldFromModelRS",(e=>e.transformWorldFromModelRS)),new rt("transformWorldFromModelTH",(e=>e.transformWorldFromModelTH)),new rt("transformWorldFromModelTL",(e=>e.transformWorldFromModelTL))]),r.code.add(I`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),r.code.add(I`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${t.spherical?I`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:I`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),e.fragment.uniforms.add(new st("transformWorldFromViewTL",(e=>e.transformWorldFromViewTL))),r.code.add(I`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),e.fragment.code.add(I`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class lt extends y{constructor(){super(...arguments),this.transformWorldFromViewTH=u(),this.transformWorldFromViewTL=u(),this.transformViewFromCameraRelativeRS=L(),this.transformProjFromView=N()}}class ct extends y{constructor(){super(...arguments),this.transformWorldFromModelRS=L(),this.transformWorldFromModelTH=V(),this.transformWorldFromModelTL=V()}}class dt extends tt{constructor(e,t){super(e,"vec2",Ye.Pass,((r,s,i)=>r.setUniform2fv(e,t(s,i))))}}function ut(e){e.varyings.add("linearDepth","float")}function ht(e){e.vertex.uniforms.add(new dt("nearFar",((e,t)=>t.camera.nearFar)))}function mt(e){e.vertex.code.add(I`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}function ft(e,t){const{vertex:r}=e;switch(t.output){case U.Color:if(t.receiveShadows)return ut(e),void r.code.add(I`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case U.Depth:case U.Shadow:case U.ShadowHighlight:case U.ShadowExludeHighlight:return e.include(ot,t),ut(e),ht(e),mt(e),void r.code.add(I`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`)}r.code.add(I`void forwardLinearDepth() {}`)}class pt extends y{constructor(e){super(),this.slicePlaneLocalOrigin=e}}function _t(e,t){vt(e,t,[new st("slicePlaneOrigin",((e,r)=>At(t,e,r))),new st("slicePlaneBasis1",((e,s)=>wt(t,e,s,r(s.slicePlane)?.basis1))),new st("slicePlaneBasis2",((e,s)=>wt(t,e,s,r(s.slicePlane)?.basis2)))])}function gt(e,t){vt(e,t,[new rt("slicePlaneOrigin",((e,r)=>At(t,e,r))),new rt("slicePlaneBasis1",((e,s)=>wt(t,e,s,r(s.slicePlane)?.basis1))),new rt("slicePlaneBasis2",((e,s)=>wt(t,e,s,r(s.slicePlane)?.basis2)))])}function vt(e,t,r){if(!t.hasSlicePlane){const r=I`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;return t.hasSliceInVertexProgram&&e.vertex.code.add(r),void e.fragment.code.add(r)}e.extensions.add("GL_OES_standard_derivatives"),t.hasSliceInVertexProgram&&e.vertex.uniforms.add(r),e.fragment.uniforms.add(r);const s=I`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,i=I`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`,a=t.hasSliceHighlight?I`
        ${i}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:I`#define highlightSlice(_color_, _pos_) (_color_)`;t.hasSliceInVertexProgram&&e.vertex.code.add(s),e.fragment.code.add(s),e.fragment.code.add(a)}function Tt(e,t,r){return e.instancedDoublePrecision?_(Et,r.camera.viewInverseTransposeMatrix[3],r.camera.viewInverseTransposeMatrix[7],r.camera.viewInverseTransposeMatrix[11]):t.slicePlaneLocalOrigin}function xt(e,r){return t(e)?A(St,r.origin,e):r.origin}function bt(e,r,s){return e.hasSliceTranslatedView?t(r)?z(It,s.camera.viewMatrix,r):s.camera.viewMatrix:null}function At(r,s,i){if(e(i.slicePlane))return x;const a=Tt(r,s,i),n=xt(a,i.slicePlane),o=bt(r,a,i);return t(o)?b(St,n,o):n}function wt(r,s,i,a){if(e(a)||e(i.slicePlane))return x;const n=Tt(r,s,i),o=xt(n,i.slicePlane),l=bt(r,n,i);return t(l)?(v(Pt,a,o),b(St,o,l),b(Pt,Pt,l),A(Pt,Pt,St)):a}const Et=u(),St=u(),Pt=u(),It=N();function yt(e,t){const r=t.output===U.ObjectAndLayerIdColor,s=t.objectAndLayerIdColorInstanced;r&&(e.varyings.add("objectAndLayerIdColorVarying","vec4"),s?e.attributes.add(O.OBJECTANDLAYERIDCOLOR_INSTANCED,"vec4"):e.attributes.add(O.OBJECTANDLAYERIDCOLOR,"vec4")),e.vertex.code.add(I`
     void forwardObjectAndLayerIdColor() {
      ${r?s?I`objectAndLayerIdColorVarying = objectAndLayerIdColor_instanced * 0.003921568627451;`:I`objectAndLayerIdColorVarying = objectAndLayerIdColor * 0.003921568627451;`:I``} }`),e.fragment.code.add(I`
      void outputObjectAndLayerIdColor() {
        ${r?I`gl_FragColor = objectAndLayerIdColorVarying;`:I``} }`)}class Rt extends tt{constructor(e,t,r){super(e,"vec4",Ye.Pass,((r,s,i)=>r.setUniform4fv(e,t(s,i))),r)}}class Mt extends tt{constructor(e,t){super(e,"float",Ye.Pass,((r,s,i)=>r.setUniform1f(e,t(s,i))))}}class Ft extends tt{constructor(e,t,r){super(e,"float",Ye.Pass,((r,s,i)=>r.setUniform1fv(e,t(s,i))),r)}}function Ct(e){e.code.add(I`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}function Ot(e,t){switch(e.fragment.include(Ct),t.output){case U.Shadow:case U.ShadowHighlight:case U.ShadowExludeHighlight:e.extensions.add("GL_OES_standard_derivatives"),e.fragment.code.add(I`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 20.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`);break;case U.Depth:e.fragment.code.add(I`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)}}class Lt extends tt{constructor(e,t){super(e,"mat4",Ye.Draw,((r,s,i)=>r.setUniformMatrix4fv(e,t(s,i))))}}function Dt(e,t){t.instancedDoublePrecision?e.constants.add("cameraPosition","vec3",x):e.uniforms.add(new rt("cameraPosition",((e,t)=>_(Ut,t.camera.viewInverseTransposeMatrix[3]-e.origin[0],t.camera.viewInverseTransposeMatrix[7]-e.origin[1],t.camera.viewInverseTransposeMatrix[11]-e.origin[2]))))}function Bt(e,t){if(!t.instancedDoublePrecision)return void e.uniforms.add([new nt("proj",((e,t)=>t.camera.projectionMatrix)),new Lt("view",((e,t)=>z(Gt,t.camera.viewMatrix,e.origin))),new rt("localOrigin",(e=>e.origin))]);const r=e=>_(Ut,e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]);e.uniforms.add([new nt("proj",((e,t)=>t.camera.projectionMatrix)),new nt("view",((e,t)=>z(Gt,t.camera.viewMatrix,r(t)))),new st("localOrigin",((e,t)=>r(t)))])}const Gt=W(),Ut=u();function Nt(e){e.uniforms.add(new nt("viewNormal",((e,t)=>t.camera.viewInverseTransposeMatrix)))}const Vt="Size",Ht="InvSize";function zt(e,t,r=!1,s=0){if(e.hasWebGL2Context){const e=I`vec2(textureSize(${t}, ${I.int(s)}))`;return r?"(1.0 / "+e+")":e}return r?t+"InvSize":t+"Size"}function jt(e,t,r,s=null,i=0){if(e.hasWebGL2Context)return I`texelFetch(${t}, ivec2(${r}), ${I.int(i)})`;let a=I`texture2D(${t}, ${r} * `;return a+=s?I`(${s}))`:I`${t+"InvSize"})`,a}class Wt extends tt{constructor(e,t){super(e,"vec4",Ye.Pass,((r,s,i)=>r.setUniform4fv(e,t(s,i))))}}var $t;!function(e){e[e.None=0]="None",e[e.Size=1]="Size",e[e.InvSize=2]="InvSize"}($t||($t={}));class kt extends tt{constructor(e,t){super(e,"sampler2D",Ye.Pass,((r,s,i)=>r.bindTexture(e,t(s,i))))}}function qt(e,r,s=$t.None){const i=[new kt(e,r)];if(s&$t.Size){const s=e+"Size";i.push(new dt(s,((e,s)=>{const i=r(e,s);return t(i)?Me(Xt,i.descriptor.width,i.descriptor.height):Fe})))}if(s&$t.InvSize){const s=e+"InvSize";i.push(new dt(s,((e,s)=>{const i=r(e,s);return t(i)?Me(Xt,1/i.descriptor.width,1/i.descriptor.height):Fe})))}return i}const Xt=Ce();function Kt(e,t=!0){e.attributes.add(O.POSITION,"vec2"),t&&e.varyings.add("uv","vec2"),e.vertex.code.add(I`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      ${t?I`uv = position * 0.5 + vec2(0.5);`:""}
    }
  `)}const Yt=ne.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class Zt{constructor(){this._includedModules=new Map}include(e,t){if(this._includedModules.has(e)){const r=this._includedModules.get(e);if(r!==t){Yt.error("Trying to include shader module multiple times with different sets of options.");const t=new Set;for(const s of Object.keys(r))r[s]!==e[s]&&t.add(s);for(const s of Object.keys(e))r[s]!==e[s]&&t.add(s);t.forEach((t=>console.error(`  ${t}: current ${r[t]} new ${e[t]}`)))}}else this._includedModules.set(e,t),e(this.builder,t)}}class Jt extends Zt{constructor(){super(...arguments),this.vertex=new tr,this.fragment=new tr,this.attributes=new rr,this.varyings=new sr,this.extensions=new ir,this.constants=new ar}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){const t=this.extensions.generateSource(e),r=this.attributes.generateSource(e),s=this.varyings.generateSource(),i="vertex"===e?this.vertex:this.fragment,a=i.uniforms.generateSource(),n=i.code.generateSource(),o="vertex"===e?or:nr,l=this.constants.generateSource().concat(i.constants.generateSource());return`\n${t.join("\n")}\n\n${o}\n\n${l.join("\n")}\n\n${a.join("\n")}\n\n${r.join("\n")}\n\n${s.join("\n")}\n\n${n.join("\n")}`}generateBind(e,r){const s=new Map;this.vertex.uniforms.entries.forEach((r=>{const i=r.bind[e];t(i)&&s.set(r.name,i)})),this.fragment.uniforms.entries.forEach((r=>{const i=r.bind[e];t(i)&&s.set(r.name,i)}));const i=Array.from(s.values()),a=i.length;return(e,t,s)=>{for(let n=0;n<a;++n)i[n](r,e,t,s)}}}class Qt{constructor(){this._entries=new Map}add(e){if(!Array.isArray(e))return this._add(e);for(const t of e)this._add(t)}get(e){return this._entries.get(e)}_add(t){if(e(t))Yt.error(`Trying to add null Uniform from ${(new Error).stack}.`);else{if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new k(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}}generateSource(){return Array.from(this._entries.values()).map((e=>t(e.arraySize)?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class er{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class tr extends Zt{constructor(){super(...arguments),this.uniforms=new Qt,this.code=new er,this.constants=new ar}get builder(){return this}}class rr{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`attribute ${e[1]} ${e[0]};`))}}class sr{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(){return this._entries.map((e=>`varying ${e[1]} ${e[0]};`))}}class ir{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?ir.ALLOWLIST_VERTEX:ir.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}ir.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],ir.ALLOWLIST_VERTEX=[];class ar{constructor(){this._entries=new Set}add(e,t,r){let s="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":s=ar._numberToFloatStr(r);break;case"int":s=ar._numberToIntStr(r);break;case"bool":s=r.toString();break;case"vec2":s=`vec2(${ar._numberToFloatStr(r[0])},                            ${ar._numberToFloatStr(r[1])})`;break;case"vec3":s=`vec3(${ar._numberToFloatStr(r[0])},                            ${ar._numberToFloatStr(r[1])},                            ${ar._numberToFloatStr(r[2])})`;break;case"vec4":s=`vec4(${ar._numberToFloatStr(r[0])},                            ${ar._numberToFloatStr(r[1])},                            ${ar._numberToFloatStr(r[2])},                            ${ar._numberToFloatStr(r[3])})`;break;case"ivec2":s=`ivec2(${ar._numberToIntStr(r[0])},                             ${ar._numberToIntStr(r[1])})`;break;case"ivec3":s=`ivec3(${ar._numberToIntStr(r[0])},                             ${ar._numberToIntStr(r[1])},                             ${ar._numberToIntStr(r[2])})`;break;case"ivec4":s=`ivec4(${ar._numberToIntStr(r[0])},                             ${ar._numberToIntStr(r[1])},                             ${ar._numberToIntStr(r[2])},                             ${ar._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":s=`${t}(${Array.prototype.map.call(r,(e=>ar._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${s};`),this}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const nr="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",or="precision highp float;\nprecision highp sampler2D;";class lr extends y{constructor(){super(...arguments),this.color=ae(1,1,1,1)}}const cr=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:lr,build:function(){const e=new Jt;return e.include(Kt),e.fragment.uniforms.add([new kt("tex",(e=>e.texture)),new Wt("uColor",(e=>e.color))]),e.fragment.code.add(I`void main() {
vec4 texColor = texture2D(tex, uv);
gl_FragColor = texColor * uColor;
}`),e}},Symbol.toStringTag,{value:"Module"}));let dr;var ur;!function(e){e[e.ETC1_RGB=0]="ETC1_RGB",e[e.ETC2_RGBA=1]="ETC2_RGBA",e[e.BC1_RGB=2]="BC1_RGB",e[e.BC3_RGBA=3]="BC3_RGBA",e[e.BC4_R=4]="BC4_R",e[e.BC5_RG=5]="BC5_RG",e[e.BC7_M6_RGB=6]="BC7_M6_RGB",e[e.BC7_M5_RGBA=7]="BC7_M5_RGBA",e[e.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",e[e.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",e[e.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",e[e.ATC_RGB=11]="ATC_RGB",e[e.ATC_RGBA=12]="ATC_RGBA",e[e.FXT1_RGB=17]="FXT1_RGB",e[e.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",e[e.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",e[e.ETC2_EAC_R11=20]="ETC2_EAC_R11",e[e.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",e[e.RGBA32=13]="RGBA32",e[e.RGB565=14]="RGB565",e[e.BGR565=15]="BGR565",e[e.RGBA4444=16]="RGBA4444"}(ur||(ur={}));let hr=null,mr=null;async function fr(){return e(mr)&&(mr=function(){if(e(dr)){const e=e=>oe(`esri/libs/basisu/${e}`);dr=import("./basis_transcoder.js").then((e=>e.b)).then((({default:t})=>t({locateFile:e}).then((e=>(e.initializeBasis(),delete e.then,e)))))}return dr}(),hr=await mr),mr}function pr(e,t,r,s,i){const a=Ee(t?le.COMPRESSED_RGBA8_ETC2_EAC:le.COMPRESSED_RGB8_ETC2),n=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(r*s*a*n)}function _r(e){return e.getNumImages()>=1&&!e.isUASTC()}function gr(e){return e.getFaces()>=1&&e.isETC1S()}function vr(e,t,r,s,i,a,n,o){const{compressedTextureETC:l,compressedTextureS3TC:c}=e.capabilities,[d,u]=l?s?[ur.ETC2_RGBA,le.COMPRESSED_RGBA8_ETC2_EAC]:[ur.ETC1_RGB,le.COMPRESSED_RGB8_ETC2]:c?s?[ur.BC3_RGBA,le.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[ur.BC1_RGB,le.COMPRESSED_RGB_S3TC_DXT1_EXT]:[ur.RGBA32,ce.RGBA],h=t.hasMipmap?r:Math.min(1,r),m=[];for(let e=0;e<h;e++)m.push(new Uint8Array(n(e,d))),o(e,d,m[e]);const f=m.length>1,p=f?de.LINEAR_MIPMAP_LINEAR:de.LINEAR,_={...t,samplingMode:p,hasMipmap:f,internalFormat:u,width:i,height:a};return new be(e,_,{type:"compressed",levels:m})}const Tr=ne.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil");function xr(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const br=xr("DXT1"),Ar=xr("DXT3"),wr=xr("DXT5");new Re(O.POSITION,3,ue.FLOAT,0,12),new Re(O.POSITION,3,ue.FLOAT,0,20),new Re(O.UV0,2,ue.FLOAT,12,20),new Re(O.POSITION,3,ue.FLOAT,0,32),new Re(O.NORMAL,3,ue.FLOAT,12,32),new Re(O.UV0,2,ue.FLOAT,24,32),new Re(O.POSITION,3,ue.FLOAT,0,16),new Re(O.COLOR,4,ue.UNSIGNED_BYTE,12,16);const Er=[new Re(O.POSITION,2,ue.FLOAT,0,8)],Sr=[new Re(O.POSITION,2,ue.FLOAT,0,16),new Re(O.UV0,2,ue.FLOAT,8,16)];class Pr extends Se{}function Ir(e,t=Er,r=R,s=-1,i=1){let a=null;return a=t===Sr?new Float32Array([s,s,0,0,i,s,1,0,s,i,0,1,i,i,1,1]):new Float32Array([s,s,i,s,s,i,i,i]),new Pr(e,r,{geometry:t},{geometry:Pe.createVertex(e,he.STATIC_DRAW,a)})}function yr(e,t=Er,r=R){const s=new Float32Array([-1,-1,3,-1,-1,3]);return new Pr(e,r,{geometry:t},{geometry:Pe.createVertex(e,he.STATIC_DRAW,s)})}function Rr(e,t=4){return new be(e,{target:me.TEXTURE_2D,pixelFormat:ce.RGBA,dataType:fe.UNSIGNED_BYTE,samplingMode:de.NEAREST,width:t,height:t})}function Mr(e,t,r=4){const s=new Uint8Array(r*r*4);for(let e=0;e<s.length;e+=4)s[e+0]=255*t[0],s[e+1]=255*t[1],s[e+2]=255*t[2],s[e+3]=255*t[3];return new be(e,{target:me.TEXTURE_2D,pixelFormat:ce.RGBA,dataType:fe.UNSIGNED_BYTE,samplingMode:de.NEAREST,width:r,height:r},s)}function Fr(e){return new be(e,{target:me.TEXTURE_2D,pixelFormat:ce.RGBA,dataType:fe.UNSIGNED_BYTE,samplingMode:de.NEAREST,width:1,height:1},new Uint8Array([255,255,255,255]))}class Cr extends E{constructor(e,t){super(),this._data=e,this.type=S.Texture,this._glTexture=null,this._powerOfTwoStretchInfo=null,this._loadingPromise=null,this._loadingController=null,this.events=new q,this._passParameters=new lr,this.params=t||{},this.params.mipmap=!1!==this.params.mipmap,this.params.noUnpackFlip=this.params.noUnpackFlip||!1,this.params.preMultiplyAlpha=this.params.preMultiplyAlpha||!1,this.params.wrap=this.params.wrap||{s:pe.REPEAT,t:pe.REPEAT},this.params.powerOfTwoResizeMode=this.params.powerOfTwoResizeMode||l.STRETCH,this.estimatedTexMemRequired=Cr._estimateTexMemRequired(this._data,this.params),this._startPreload()}_startPreload(){const t=this._data;e(t)||(t instanceof HTMLVideoElement?this._startPreloadVideoElement(t):t instanceof HTMLImageElement&&this._startPreloadImageElement(t))}_startPreloadVideoElement(e){if(!(te(e.src)||"auto"===e.preload&&e.crossOrigin)){e.preload="auto",e.crossOrigin="anonymous";const t=!e.paused;if(e.src=e.src,t&&e.autoplay){const t=()=>{e.removeEventListener("canplay",t),e.play()};e.addEventListener("canplay",t)}}}_startPreloadImageElement(e){re(e.src)||te(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}static _getDataDimensions(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}static _estimateTexMemRequired(t,r){if(e(t))return 0;if(Q(t)||ee(t))return r.encoding===Cr.KTX2_ENCODING?function(t,r){if(e(hr))return t.byteLength;const s=new hr.KTX2File(new Uint8Array(t)),i=gr(s)?pr(s.getLevels(),s.getHasAlpha(),s.getWidth(),s.getHeight(),r):0;return s.close(),s.delete(),i}(t,r.mipmap):r.encoding===Cr.BASIS_ENCODING?function(t,r){if(e(hr))return t.byteLength;const s=new hr.BasisFile(new Uint8Array(t)),i=_r(s)?pr(s.getNumLevels(0),s.getHasAlpha(),s.getImageWidth(0,0),s.getImageHeight(0,0),r):0;return s.close(),s.delete(),i}(t,r.mipmap):t.byteLength;const{width:s,height:i}=t instanceof Image||t instanceof ImageData||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?Cr._getDataDimensions(t):r;return(r.mipmap?4/3:1)*s*i*(r.components||4)||0}dispose(){this._data=void 0}get width(){return this.params.width}get height(){return this.params.height}_createDescriptor(e){return{target:me.TEXTURE_2D,pixelFormat:ce.RGBA,dataType:fe.UNSIGNED_BYTE,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?de.LINEAR_MIPMAP_LINEAR:de.LINEAR,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.maxAnisotropy??(this.params.mipmap?e.parameters.maxMaxAnisotropy:1)}}get glTexture(){return this._glTexture}load(r,s){if(t(this._glTexture))return this._glTexture;if(t(this._loadingPromise))return this._loadingPromise;const i=this._data;return e(i)?(this._glTexture=new be(r,this._createDescriptor(r),null),this._glTexture):"string"==typeof i?this._loadFromURL(r,s,i):i instanceof Image?this._loadFromImageElement(r,s,i):i instanceof HTMLVideoElement?this._loadFromVideoElement(r,s,i):i instanceof ImageData||i instanceof HTMLCanvasElement?this._loadFromImage(r,i,s):(Q(i)||ee(i))&&this.params.encoding===Cr.DDS_ENCODING?(this._data=void 0,this._loadFromDDSData(r,i)):(Q(i)||ee(i))&&this.params.encoding===Cr.KTX2_ENCODING?(this._data=void 0,this._loadFromKTX2(r,i)):(Q(i)||ee(i))&&this.params.encoding===Cr.BASIS_ENCODING?(this._data=void 0,this._loadFromBasis(r,i)):ee(i)?this._loadFromPixelData(r,i):Q(i)?this._loadFromPixelData(r,new Uint8Array(i)):null}get requiresFrameUpdates(){return this._data instanceof HTMLVideoElement}frameUpdate(r,s,i){if(!(this._data instanceof HTMLVideoElement)||e(this._glTexture))return i;if(this._data.readyState<Or.HAVE_CURRENT_DATA||i===this._data.currentTime)return i;if(t(this._powerOfTwoStretchInfo)){const{framebuffer:e,vao:t,sourceTexture:i}=this._powerOfTwoStretchInfo;i.setData(this._data),this._drawStretchedTexture(r,s,e,t,i,this._glTexture)}else{const{videoWidth:e,videoHeight:t}=this._data,{width:r,height:s}=this._glTexture.descriptor;e!==r||t!==s?this._glTexture.updateData(0,0,0,Math.min(e,r),Math.min(t,s),this._data):this._glTexture.setData(this._data)}return this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this.params.updateCallback&&this.params.updateCallback(),this._data.currentTime}_loadFromDDSData(e,t){return this._glTexture=function(e,t,r){const{textureData:i,internalFormat:a,width:n,height:o}=s(function(e,t){const r=new Int32Array(e,0,31);if(542327876!==r[0])return Tr.error("Invalid magic number in DDS header"),null;if(!(4&r[20]))return Tr.error("Unsupported format, must contain a FourCC code"),null;const s=r[21];let i,a;switch(s){case br:i=8,a=le.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Ar:i=16,a=le.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case wr:i=16,a=le.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return Tr.error("Unsupported FourCC code:",(n=s,String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255))),null}var n;let o=1,l=r[4],c=r[3];0==(3&l)&&0==(3&c)||(Tr.warn("Rounding up compressed texture size to nearest multiple of 4."),l=l+3&-4,c=c+3&-4);const d=l,u=c;131072&r[2]&&!1!==t&&(o=Math.max(1,r[7])),1===o||X(l)&&X(c)||(Tr.warn("Ignoring mipmaps of non power of two sized compressed texture."),o=1);let h,m,f=r[1]+4;const p=[];for(let t=0;t<o;++t)m=(l+3>>2)*(c+3>>2)*i,h=new Uint8Array(e,f,m),p.push(h),f+=m,l=Math.max(1,l>>1),c=Math.max(1,c>>1);return{textureData:{type:"compressed",levels:p},internalFormat:a,width:d,height:u}}(r,t.hasMipmap??!1));return t.samplingMode=i.levels.length>1?de.LINEAR_MIPMAP_LINEAR:de.LINEAR,t.hasMipmap=i.levels.length>1,t.internalFormat=a,t.width=n,t.height=o,new be(e,t,i)}(e,this._createDescriptor(e),t),this._glTexture}_loadFromKTX2(t,r){return this._loadAsync((()=>async function(t,r,s){e(hr)&&(hr=await fr());const i=new hr.KTX2File(new Uint8Array(s));if(!gr(i))return null;i.startTranscoding();const a=vr(t,r,i.getLevels(),i.getHasAlpha(),i.getWidth(),i.getHeight(),((e,t)=>i.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,r)=>i.transcodeImage(r,e,0,0,t,0,-1,-1)));return i.close(),i.delete(),a}(t,this._createDescriptor(t),r).then((e=>(this._glTexture=e,e)))))}_loadFromBasis(t,r){return this._loadAsync((()=>async function(t,r,s){e(hr)&&(hr=await fr());const i=new hr.BasisFile(new Uint8Array(s));if(!_r(i))return null;i.startTranscoding();const a=vr(t,r,i.getNumLevels(0),i.getHasAlpha(),i.getImageWidth(0,0),i.getImageHeight(0,0),((e,t)=>i.getImageTranscodedSizeInBytes(0,e,t)),((e,t,r)=>i.transcodeImage(r,0,e,t,0,0)));return i.close(),i.delete(),a}(t,this._createDescriptor(t),r).then((e=>(this._glTexture=e,e)))))}_loadFromPixelData(e,t){w(this.params.width>0&&this.params.height>0);const r=this._createDescriptor(e);return r.pixelFormat=1===this.params.components?ce.LUMINANCE:3===this.params.components?ce.RGB:ce.RGBA,r.width=this.params.width,r.height=this.params.height,this._glTexture=new be(e,r,t),this._glTexture}_loadFromURL(e,t,r){return this._loadAsync((async s=>{const i=await se(r,{signal:s});return Y(s),this._loadFromImage(e,i,t)}))}_loadFromImageElement(e,t,r){return r.complete?this._loadFromImage(e,r,t):this._loadAsync((async s=>{const i=await ie(r,r.src,!1,s);return Y(s),this._loadFromImage(e,i,t)}))}_loadFromVideoElement(e,t,r){return r.readyState>=Or.HAVE_CURRENT_DATA?this._loadFromImage(e,r,t):this._loadFromVideoElementAsync(e,t,r)}_loadFromVideoElementAsync(e,t,r){return this._loadAsync((s=>new Promise(((a,n)=>{const o=()=>{r.removeEventListener("loadeddata",l),r.removeEventListener("error",c),i(d)},l=()=>{r.readyState>=Or.HAVE_CURRENT_DATA&&(o(),a(this._loadFromImage(e,r,t)))},c=e=>{o(),n(e||new k("Failed to load video"))};r.addEventListener("loadeddata",l),r.addEventListener("error",c);const d=Z(s,(()=>c(J())))}))))}_loadFromImage(e,t,r){const s=Cr._getDataDimensions(t);this.params.width=s.width,this.params.height=s.height;const i=this._createDescriptor(e);return i.pixelFormat=3===this.params.components?ce.RGB:ce.RGBA,!this._requiresPowerOfTwo(e,i)||X(s.width)&&X(s.height)?(i.width=s.width,i.height=s.height,this._glTexture=new be(e,i,t),this._glTexture):(this._glTexture=this._makePowerOfTwoTexture(e,t,s,i,r),this._glTexture)}_loadAsync(e){const t=new AbortController;this._loadingController=t;const r=e(t.signal);this._loadingPromise=r;const s=()=>{this._loadingController===t&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null)};return r.then(s,s),r}_requiresPowerOfTwo(e,t){const r=pe.CLAMP_TO_EDGE,s="number"==typeof t.wrapMode?t.wrapMode===r:t.wrapMode.s===r&&t.wrapMode.t===r;return!Ae(e.gl)&&(t.hasMipmap||!s)}_makePowerOfTwoTexture(e,t,r,s,i){const{width:a,height:n}=r,o=K(a),c=K(n);let d;switch(s.width=o,s.height=c,this.params.powerOfTwoResizeMode){case l.PAD:s.textureCoordinateScaleFactor=[a/o,n/c],d=new be(e,s),d.updateData(0,0,0,a,n,t);break;case l.STRETCH:case null:case void 0:d=this._stretchToPowerOfTwo(e,t,s,i());break;default:$(this.params.powerOfTwoResizeMode)}return s.hasMipmap&&d.generateMipmap(),d}_stretchToPowerOfTwo(e,t,r,s){const i=new be(e,r),a=new Ie(e,{colorTarget:_e.TEXTURE,depthStencilTarget:ge.NONE},i),n=new be(e,{target:me.TEXTURE_2D,pixelFormat:r.pixelFormat,dataType:fe.UNSIGNED_BYTE,wrapMode:pe.CLAMP_TO_EDGE,samplingMode:de.LINEAR,flipped:!!r.flipped,maxAnisotropy:8,preMultiplyAlpha:r.preMultiplyAlpha},t),o=Ir(e),l=e.getBoundFramebufferObject();return this._drawStretchedTexture(e,s,a,o,n,i),this.requiresFrameUpdates?this._powerOfTwoStretchInfo={vao:o,sourceTexture:n,framebuffer:a}:(o.dispose(!0),n.dispose(),a.detachColorTexture(),a.dispose()),e.bindFramebuffer(l),i}_drawStretchedTexture(e,t,r,s,i,a){this._passParameters.texture=i,e.bindFramebuffer(r);const n=e.getViewport();e.setViewport(0,0,a.descriptor.width,a.descriptor.height),e.bindTechnique(t,this._passParameters,null),e.bindVAO(s),e.drawArrays(ve.TRIANGLE_STRIP,0,ye(s,"geometry")),e.bindFramebuffer(null),e.setViewport(n.x,n.y,n.width,n.height),this._passParameters.texture=null}unload(){if(t(this._powerOfTwoStretchInfo)){const{framebuffer:e,vao:t,sourceTexture:r}=this._powerOfTwoStretchInfo;t.dispose(!0),r.dispose(),e.dispose(),this._glTexture=null,this._powerOfTwoStretchInfo=null}if(t(this._glTexture)&&(this._glTexture.dispose(),this._glTexture=null),t(this._loadingController)){const e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit("unloaded")}}var Or;function Lr(e){e.include(Ct),e.code.add(I`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)}function Dr(e,t){t.hasMultipassTerrain&&(e.fragment.include(Lr),e.fragment.uniforms.add(new kt("terrainDepthTexture",((e,t)=>t.multipassTerrain.linearDepthTexture))),e.fragment.uniforms.add(new dt("nearFar",((e,t)=>t.camera.nearFar))),e.fragment.uniforms.add(new dt("inverseViewport",((e,t)=>t.inverseViewport))),e.fragment.code.add(I`
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){
      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, nearFar);
      if(fragmentDepth ${t.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `))}Cr.DDS_ENCODING="image/vnd-ms.dds",Cr.KTX2_ENCODING="image/ktx2",Cr.BASIS_ENCODING="image/x.basis",function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(Or||(Or={}));class Br{constructor(){this.enabled=!1,this.cullAboveGround=!1}}function Gr(e){e.vertex.code.add(I`const float PI = 3.141592653589793;`),e.fragment.code.add(I`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)}const Ur=.1,Nr=.001;function Vr(e){e.code.add(I`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}class Hr{constructor(e,t){this._module=e,this._loadModule=t}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}class zr{constructor(e,t,r){this.release=r,this.initializeConfiguration(e,t),this._configuration=t.snapshot(),this._program=this.initializeProgram(e),this._pipeline=this.initializePipeline(e.rctx.capabilities)}destroy(){this._program=a(this._program),this._pipeline=this._configuration=null}reload(e){a(this._program),this._program=this.initializeProgram(e),this._pipeline=this.initializePipeline(e.rctx.capabilities)}get program(){return this._program}get compiled(){return this.program.isCompiled}get key(){return this._configuration.key}get configuration(){return this._configuration}bindPipelineState(e,t=null,r){e.setPipelineState(this.getPipelineState(t,r))}ensureAttributeLocations(e){this.program.assertCompatibleVertexAttributeLocations(e)}get primitiveType(){return ve.TRIANGLES}getPipelineState(e,t){return this._pipeline}initializeConfiguration(e,t){}}class jr{constructor(e,t,r){this._context=e,this._locations=r,this._textures=new Map,this._freeTextureUnits=new d({deallocator:null}),this._glProgram=e.programCache.acquire(t.generate("vertex"),t.generate("fragment"),r),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bindPass=t.generateBind(Ye.Pass,this),this.bindDraw=t.generateBind(Ye.Draw,this),this._fragmentUniforms=we()?t.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get isCompiled(){return this._glProgram.isCompiled}setUniform1b(e,t){this._glProgram.setUniform1i(e,t?1:0)}setUniform1i(e,t){this._glProgram.setUniform1i(e,t)}setUniform1f(e,t){this._glProgram.setUniform1f(e,t)}setUniform2fv(e,t){this._glProgram.setUniform2fv(e,t)}setUniform3fv(e,t){this._glProgram.setUniform3fv(e,t)}setUniform4fv(e,t){this._glProgram.setUniform4fv(e,t)}setUniformMatrix3fv(e,t){this._glProgram.setUniformMatrix3fv(e,t)}setUniformMatrix4fv(e,t){this._glProgram.setUniformMatrix4fv(e,t)}setUniform1fv(e,t){this._glProgram.setUniform1fv(e,t)}setUniform1iv(e,t){this._glProgram.setUniform1iv(e,t)}setUniform2iv(e,t){this._glProgram.setUniform3iv(e,t)}setUniform3iv(e,t){this._glProgram.setUniform3iv(e,t)}setUniform4iv(e,t){this._glProgram.setUniform4iv(e,t)}assertCompatibleVertexAttributeLocations(e){e.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(t,r){if(e(r)||null==r.glName){const e=this._textures.get(t);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(t)),null}let s=this._textures.get(t);return null==s?(s=this._allocTextureUnit(r),this._textures.set(t,s)):s.texture=r,this._context.useProgram(this),this.setUniform1i(t,s.unit),this._context.bindTexture(r,s.unit),s.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((e,t)=>{this._context.bindTexture(e.texture,e.unit),this.setUniform1i(t,e.unit)})),t(this._fragmentUniforms)&&this._fragmentUniforms.forEach((e=>{"sampler2D"!==e.type&&"samplerCube"!==e.type||this._textures.has(e.name)||console.error(`Texture sampler ${e.name} has no bound texture`)}))}_allocTextureUnit(e){return{texture:e,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(e){this._freeTextureUnits.push(e.unit)}}const Wr={func:Te.LESS},$r={func:Te.ALWAYS},kr={mask:255},qr={mask:0},Xr=e=>({function:{func:Te.NOTEQUAL,ref:e,mask:e},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.KEEP}}),Kr=e=>({function:{func:Te.ALWAYS,ref:e,mask:e},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.REPLACE}}),Yr={function:{func:Te.ALWAYS,ref:c.OutlineVisualElementMask,mask:c.OutlineVisualElementMask},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.ZERO}},Zr={function:{func:Te.ALWAYS,ref:c.OutlineVisualElementMask,mask:c.OutlineVisualElementMask},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.REPLACE}},Jr={function:{func:Te.EQUAL,ref:c.OutlineVisualElementMask,mask:c.OutlineVisualElementMask},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.KEEP}},Qr={function:{func:Te.NOTEQUAL,ref:c.OutlineVisualElementMask,mask:c.OutlineVisualElementMask},operation:{fail:xe.KEEP,zFail:xe.KEEP,zPass:xe.KEEP}};function es(e,t,r,s,i=1){const a=r.typedBuffer,n=r.typedBufferStride,o=e.length;if(s*=n,1===i)for(let r=0;r<o;++r)a[s]=t[e[r]],s+=n;else for(let r=0;r<o;++r){const o=t[e[r]];for(let e=0;e<i;e++)a[s]=o,s+=n}}function ts(e,t,r,s){const i=r.typedBuffer,a=r.typedBufferStride,n=e.length;s*=a;for(let r=0;r<n;++r){const n=2*e[r];i[s]=t[n],i[s+1]=t[n+1],s+=a}}function rs(e,t,r,s,i){const a=r.typedBuffer,n=r.typedBufferStride,o=e.length;if(s*=n,null==i||1===i)for(let r=0;r<o;++r){const i=3*e[r];a[s]=t[i],a[s+1]=t[i+1],a[s+2]=t[i+2],s+=n}else for(let r=0;r<o;++r){const o=3*e[r];for(let e=0;e<i;++e)a[s]=t[o],a[s+1]=t[o+1],a[s+2]=t[o+2],s+=n}}function ss(e,t,r,s,i=1){const a=r.typedBuffer,n=r.typedBufferStride,o=e.length;if(s*=n,1===i)for(let r=0;r<o;++r){const i=4*e[r];a[s]=t[i],a[s+1]=t[i+1],a[s+2]=t[i+2],a[s+3]=t[i+3],s+=n}else for(let r=0;r<o;++r){const o=4*e[r];for(let e=0;e<i;++e)a[s]=t[o],a[s+1]=t[o+1],a[s+2]=t[o+2],a[s+3]=t[o+3],s+=n}}function is(e,t,r,s,i,a=1){if(!r)return void rs(e,t,s,i,a);const n=s.typedBuffer,o=s.typedBufferStride,l=e.length,c=r[0],d=r[1],u=r[2],h=r[4],m=r[5],f=r[6],p=r[8],_=r[9],g=r[10],v=r[12],T=r[13],x=r[14];i*=o;let b=0,A=0,w=0;const E=ds(r)?e=>{b=t[e]+v,A=t[e+1]+T,w=t[e+2]+x}:e=>{const r=t[e],s=t[e+1],i=t[e+2];b=c*r+h*s+p*i+v,A=d*r+m*s+_*i+T,w=u*r+f*s+g*i+x};if(1===a)for(let t=0;t<l;++t)E(3*e[t]),n[i]=b,n[i+1]=A,n[i+2]=w,i+=o;else for(let t=0;t<l;++t){E(3*e[t]);for(let e=0;e<a;++e)n[i]=b,n[i+1]=A,n[i+2]=w,i+=o}}function as(e,t,r,s,i,a=1){if(!r)return void rs(e,t,s,i,a);const n=r,o=s.typedBuffer,l=s.typedBufferStride,c=e.length,d=n[0],u=n[1],h=n[2],m=n[4],f=n[5],p=n[6],_=n[8],g=n[9],v=n[10],T=!j(n),x=1e-6,b=.999999;i*=l;let A=0,w=0,E=0;const S=ds(n)?e=>{A=t[e],w=t[e+1],E=t[e+2]}:e=>{const r=t[e],s=t[e+1],i=t[e+2];A=d*r+m*s+_*i,w=u*r+f*s+g*i,E=h*r+p*s+v*i};if(1===a)if(T)for(let t=0;t<c;++t){S(3*e[t]);const r=A*A+w*w+E*E;if(r<b&&r>x){const e=1/Math.sqrt(r);o[i]=A*e,o[i+1]=w*e,o[i+2]=E*e}else o[i]=A,o[i+1]=w,o[i+2]=E;i+=l}else for(let t=0;t<c;++t)S(3*e[t]),o[i]=A,o[i+1]=w,o[i+2]=E,i+=l;else for(let t=0;t<c;++t){if(S(3*e[t]),T){const e=A*A+w*w+E*E;if(e<b&&e>x){const t=1/Math.sqrt(e);A*=t,w*=t,E*=t}}for(let e=0;e<a;++e)o[i]=A,o[i+1]=w,o[i+2]=E,i+=l}}function ns(e,t,r,s,i,a=1){if(!r)return void ss(e,t,s,i,a);const n=r,o=s.typedBuffer,l=s.typedBufferStride,c=e.length,d=n[0],u=n[1],h=n[2],m=n[4],f=n[5],p=n[6],_=n[8],g=n[9],v=n[10],T=!j(n),x=1e-6,b=.999999;if(i*=l,1===a)for(let r=0;r<c;++r){const s=4*e[r],a=t[s],n=t[s+1],c=t[s+2],A=t[s+3];let w=d*a+m*n+_*c,E=u*a+f*n+g*c,S=h*a+p*n+v*c;if(T){const e=w*w+E*E+S*S;if(e<b&&e>x){const t=1/Math.sqrt(e);w*=t,E*=t,S*=t}}o[i]=w,o[i+1]=E,o[i+2]=S,o[i+3]=A,i+=l}else for(let r=0;r<c;++r){const s=4*e[r],n=t[s],c=t[s+1],A=t[s+2],w=t[s+3];let E=d*n+m*c+_*A,S=u*n+f*c+g*A,P=h*n+p*c+v*A;if(T){const e=E*E+S*S+P*P;if(e<b&&e>x){const t=1/Math.sqrt(e);E*=t,S*=t,P*=t}}for(let e=0;e<a;++e)o[i]=E,o[i+1]=S,o[i+2]=P,o[i+3]=w,i+=l}}function os(e,t,r,s,i,a=1){const n=s.typedBuffer,o=s.typedBufferStride,l=e.length;if(i*=o,r!==t.length||4!==r)if(1!==a)if(4!==r)for(let r=0;r<l;++r){const s=3*e[r];for(let e=0;e<a;++e)n[i]=t[s],n[i+1]=t[s+1],n[i+2]=t[s+2],n[i+3]=255,i+=o}else for(let r=0;r<l;++r){const s=4*e[r];for(let e=0;e<a;++e)n[i]=t[s],n[i+1]=t[s+1],n[i+2]=t[s+2],n[i+3]=t[s+3],i+=o}else{if(4===r){for(let r=0;r<l;++r){const s=4*e[r];n[i]=t[s],n[i+1]=t[s+1],n[i+2]=t[s+2],n[i+3]=t[s+3],i+=o}return}for(let r=0;r<l;++r){const s=3*e[r];n[i]=t[s],n[i+1]=t[s+1],n[i+2]=t[s+2],n[i+3]=255,i+=o}}else{n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];const e=new Uint32Array(s.typedBuffer.buffer,s.start),r=o/4,c=e[i/=4];i+=r;const d=l*a;for(let t=1;t<d;++t)e[i]=c,i+=r}}function ls(e,t,r,s,i=1){const a=t.typedBuffer,n=t.typedBufferStride;if(s*=n,1===i)for(let t=0;t<r;++t)a[s]=e[0],a[s+1]=e[1],a[s+2]=e[2],a[s+3]=e[3],s+=n;else for(let t=0;t<r;++t)for(let t=0;t<i;++t)a[s]=e[0],a[s+1]=e[1],a[s+2]=e[2],a[s+3]=e[3],s+=n}function cs(e,r,s,i,a,n){for(const o of r.fieldNames){const r=e.vertexAttributes.get(o),l=e.indices.get(o);if(r&&l)switch(o){case O.POSITION:{w(3===r.size);const e=a.getField(o,Be);e&&is(l,r.data,s,e,n);break}case O.NORMAL:{w(3===r.size);const e=a.getField(o,Be);e&&as(l,r.data,i,e,n);break}case O.UV0:{w(2===r.size);const e=a.getField(o,De);e&&ts(l,r.data,e,n);break}case O.COLOR:{w(3===r.size||4===r.size);const e=a.getField(o,Le);e&&os(l,r.data,r.size,e,n);break}case O.SYMBOLCOLOR:{w(3===r.size||4===r.size);const e=a.getField(o,Le);e&&os(l,r.data,r.size,e,n);break}case O.TANGENT:{w(4===r.size);const e=a.getField(o,Oe);e&&ns(l,r.data,i,e,n);break}}else if(o===O.OBJECTANDLAYERIDCOLOR&&t(e.objectAndLayerIdColor)&&4===e.objectAndLayerIdColor.length){const t=e.indices.get(O.POSITION);if(t){const r=t.length,s=a.getField(o,Le);ls(e.objectAndLayerIdColor,s,r,n)}}}}function ds(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[8]&&0===e[9]&&1===e[10]}export{as as $,qr as A,Jr as B,Vr as C,Ze as D,Wr as E,dt as F,qe as G,He as H,cs as I,ht as J,jt as K,Lr as L,nt as M,kt as N,Ot as O,jr as P,Pr as Q,Hr as R,Jt as S,$t as T,Kt as U,Xe as V,Ir as W,Nt as X,is as Y,Ur as Z,Ve as _,Bt as a,os as a0,ss as a1,ls as a2,at as a3,Sr as a4,it as a5,tt as a6,Ye as a7,Je as a8,ft as a9,Lt as aa,Xr as ab,Mr as ac,Rr as ad,ot as ae,_t as af,et as ag,Kr as ah,Er as ai,yr as aj,lt as ak,ct as al,Qe as am,rt as an,Ge as ao,Fr as ap,Vt as aq,Ht as ar,Br as as,cr as at,lr as au,Ne as av,fr as aw,es as ax,pt as ay,Wt as b,zr as c,ke as d,Mt as e,st as f,Ft as g,Rt as h,Ct as i,Dt as j,qt as k,Cr as l,Dr as m,Gr as n,yt as o,ut as p,mt as q,gt as r,Nr as s,zt as t,kr as u,Ke as v,Zr as w,Yr as x,$r as y,Qr as z};
