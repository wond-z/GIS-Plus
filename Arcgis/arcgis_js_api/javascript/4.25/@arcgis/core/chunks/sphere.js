/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import"./object.js";import{L as t}from"./Logger.js";import{b as n,g as e,o as r}from"./mathUtils.js";import{a as s}from"./maybe.js";import{a as o}from"./mat4.js";import{h as i,g as a,l as c,e as u,b as f,c as g,d as m,a as l,C as p,H as h,n as d,s as j,G as M}from"./vec3.js";import{c as b,f as y}from"./vec4f64.js";import{a as S,A}from"./vector.js";import{s as R,d as v,e as P}from"./ray.js";function x(){return b()}function C(t,e=x()){return n(e,t)}function _(t,n){return y(t[0],t[1],t[2],n)}function w(t){return t}function L(t){t[0]=t[1]=t[2]=t[3]=0}function O(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function T(t){return t[3]}function q(t){return t}function E(t,n,e,r){return y(t,n,e,r)}function Z(t,n,e){if(s(n))return!1;const{origin:r,direction:o}=n,i=k;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const a=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===a)return!1;const c=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),u=c*c-4*a*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const f=Math.sqrt(u);let g=(-c-f)/(2*a);const m=(-c+f)/(2*a);return(g<0||m<g&&m>0)&&(g=m),!(g<0||(e&&(e[0]=r[0]+o[0]*g,e[1]=r[1]+o[1]*g,e[2]=r[2]+o[2]*g),0))}const k=m();function z(t,n){return Z(t,n,null)}function G(t,n,e){const r=R.get(),s=v.get();i(r,n.origin,n.direction);const f=T(t);i(e,r,n.origin),a(e,e,1/c(e)*f);const g=V(t,n.origin),m=S(n.origin,e);return o(s,m+g,r),u(e,e,s),e}function H(t,n,e){const r=f(R.get(),n,t),s=a(R.get(),r,t[3]/c(r));return l(e,s,t)}function U(t,n){const e=f(R.get(),n,t),r=h(e),s=t[3]*t[3];return Math.sqrt(Math.abs(r-s))}function V(t,n){const r=f(R.get(),n,t),s=c(r),o=T(t),i=o+Math.abs(o-s);return e(o/i)}const X=m();function Y(t,n,e,s){const o=f(X,n,t);switch(e){case A.X:{const t=r(o,X)[2];return j(s,-Math.sin(t),Math.cos(t),0)}case A.Y:{const t=r(o,X),n=t[1],e=t[2],i=Math.sin(n);return j(s,-i*Math.cos(e),-i*Math.sin(e),Math.cos(n))}case A.Z:return d(s,o);default:return}}function B(t,n){const e=f(F,n,t);return c(e)-t[3]}function D(t,n){const e=M(t,n),r=T(t);return e<=r*r}const F=m(),I=x(),J=Object.freeze(Object.defineProperty({__proto__:null,create:x,copy:C,fromCenterAndRadius:_,wrap:w,clear:L,fromRadius:O,getRadius:T,getCenter:q,fromValues:E,elevate:function(t,n,e){return t!==e&&g(e,t),e[3]=t[3]+n,e},setExtent:function(n,e,r){return t.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),n===r?r:C(n,r)},intersectRay:Z,intersectsRay:z,intersectRayClosestSilhouette:function(t,n,e){if(Z(t,n,e))return e;const r=G(t,n,R.get());return l(e,n.origin,a(R.get(),n.direction,p(n.origin,r)/c(n.direction))),e},closestPointOnSilhouette:G,closestPoint:function(t,n,e){return Z(t,n,e)?e:(P(n,t,e),H(t,e,e))},projectPoint:H,distanceToSilhouette:U,angleToSilhouette:V,axisAt:Y,altitudeAt:B,setAltitudeAt:function(t,n,e,r){const s=B(t,n),o=Y(t,n,A.Z,F),i=a(F,o,e-s);return l(r,n,i)},containsPoint:D,tmpSphere:I},Symbol.toStringTag,{value:"Module"}));export{L as a,C as b,x as c,q as d,Z as e,E as f,T as g,_ as h,z as i,G as j,O as k,U as l,D as m,J as s,I as t,w};
