/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import"../geometry.js";import e from"../Graphic.js";import"./object.js";import{clone as t,v as n,w as a,x as s}from"../core/lang.js";import{a as r}from"./maybe.js";import{fromJSON as i}from"../geometry/support/jsonUtils.js";import{m as o}from"./dehydratedFeatures.js";import m from"../geometry/SpatialReference.js";function l(e){return"declaredClass"in e}function u(e){return"declaredClass"in e}function c(n,a){if(!n)return null;if(function(e){return"declaredClass"in e}(n))return n;const s=new e({layer:a,sourceLayer:a});return s.visible=n.visible,s.symbol=t(n.symbol),s.attributes=t(n.attributes),s.geometry=f(n.geometry),s}function f(e){return r(e)?null:l(e)?e:i(function(e){const{wkid:t,wkt:n,latestWkid:a}=e.spatialReference,s={wkid:t,wkt:n,latestWkid:a};switch(e.type){case"point":{const{x:t,y:n,z:a,m:r}=e;return{x:t,y:n,z:a,m:r,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:a}=e;return{rings:p(t),hasZ:n,hasM:a,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:a}=e;return{paths:p(t),hasZ:n,hasM:a,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:a,ymax:r,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:u,hasM:c}=e;return{xmin:t,xmax:n,ymin:a,ymax:r,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:u,hasM:c,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:a}=e;return{points:y(t)?h(t):t,hasZ:n,hasM:a,spatialReference:s}}default:return}}(e))}function p(e){return function(e){for(const t of e)if(0!==t.length)return y(t);return!1}(e)?e.map((e=>h(e))):e}function h(e){return e.map((e=>n(e)))}function y(e){return e.length&&(a(e[0])||s(e[0]))}function x(e,t){if(!e)return null;let n;if(u(e)){if(null==t)return e.clone();if(u(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=null,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=null,n.hasM=!1)):(n=o(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function d(e){const{wkid:t,wkt:n,latestWkid:a}=e,s={wkid:t,wkt:n,latestWkid:a};return m.fromJSON(s)}export{f as a,c as b,x as c,d as h,l as i};
