/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function e(e,t,r,n){return function(e){return"function"==typeof e}(e)?e(t,r,n):e}function t(e){return[e.r,e.g,e.b,e.a]}function r(e){let t=e.length;for(;t--;)if(!" /-,\n".includes(e.charAt(t)))return!1;return!0}function n(e,t){const n=[];let o=0,s=-1;do{if(s=e.indexOf("[",o),s>=o){if(s>o){const t=e.substr(o,s-o);n.push([t,null,r(t)])}if(o=s+1,s=e.indexOf("]",o),s>=o){if(s>o){const r=t[e.substr(o,s-o)];r&&n.push([null,r,!1])}o=s+1}}}while(-1!==s);if(o<e.length-1){const t=e.substr(o);n.push([t,null,r(t)])}return n}function o(e,t,r){let n="",o=null;for(const r of t){const[t,s,i]=r;if(t)i?o=t:(o&&(n+=o,o=null),n+=t);else{const t=e.attributes[s];t&&(o&&(n+=o,o=null),n+=t)}}return i(n,r)}function s(e,t,r){const s=n(t,e);return e=>o(e,s,r)}function i(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function a(e,t,r,n,o,s,i=!0){const a=t/o,l=r/s,c=Math.ceil(a/2),u=Math.ceil(l/2);for(let r=0;r<s;r++)for(let f=0;f<o;f++){const y=4*(f+(i?s-r-1:r)*o);let M=0,C=0,m=0,b=0,d=0,p=0,h=0;const I=(r+.5)*l;for(let n=Math.floor(r*l);n<(r+1)*l;n++){const r=Math.abs(I-(n+.5))/u,o=(f+.5)*a,s=r*r;for(let r=Math.floor(f*a);r<(f+1)*a;r++){let i=Math.abs(o-(r+.5))/c;const a=Math.sqrt(s+i*i);a>=-1&&a<=1&&(M=2*a*a*a-3*a*a+1,M>0&&(i=4*(r+n*t),h+=M*e[i+3],m+=M,e[i+3]<255&&(M=M*e[i+3]/250),b+=M*e[i],d+=M*e[i+1],p+=M*e[i+2],C+=M))}}n[y]=b/C,n[y+1]=d/C,n[y+2]=p/C,n[y+3]=h/m}}function l(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function c(e){return e.data?.symbol??null}function u(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function f(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function y(e){return"CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type}function M(e){return"CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type}const C=(e,t=0)=>isNaN(e)||null==e?t:e,m=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function b(){return import("./geometryEngineJSON.js").then((e=>e.g))}function d(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function p(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function h(e){let t="",r="";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function I(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function S(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=S(t);if(null!=e)return e}break;case"CIMTextSymbol":return S(e.symbol);case"CIMSolidFill":return e.color}}function g(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=g(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return g(e.symbol);case"CIMSolidStroke":case"CIMSolidFill":return e.color}}function k(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=k(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return k(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function P(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function w(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function L(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const x=e=>e.includes("data:image/svg+xml");function A(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}export{t as A,a as B,f as a,y as b,M as c,x as d,I as e,l as f,h as g,P as h,u as i,w as j,S as k,g as l,A as m,d as n,p as o,C as p,L as q,n as r,o as s,c as t,m as u,b as v,k as w,i as x,s as y,e as z};
