/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{p as e,H as t,c as i,h as o,d as n,i as l,g as a}from"../widgets/Widget.js";import{c as r,d as s}from"./color-picker-swatch.js";import{d as c}from"./icon.js";import{d as h}from"./input.js";import{d}from"./progress.js";import{e as u}from"./math.js";import{u as p}from"./interactive.js";import{i as m}from"./key.js";import{d as g}from"./button.js";import{d as v}from"./loader.js";import{d as f}from"./tab.js";import{d as C}from"./tab-nav.js";import{d as b}from"./tab-title.js";import{d as S}from"./tabs.js";import{c as y,d as w}from"./debounce.js";import"./tslib.es6.js";import"../intl.js";import"./number.js";import"./jsonMap.js";import"./object.js";import"../core/lang.js";import"./maybe.js";import"./locale.js";import"./Logger.js";import"../config.js";import"./string.js";import"./messages.js";import"../core/Error.js";import"../core/promiseUtils.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"./assets.js";import"./domUtils.js";import"../core/Evented.js";import"../core/Accessor.js";import"../core/Handles.js";import"./get.js";import"./utils.js";import"./handleUtils.js";import"./metadata.js";import"./ArrayPool.js";import"../core/accessorSupport/decorators/subclass.js";import"./tracking.js";import"./ensureType.js";import"../core/accessorSupport/decorators/property.js";import"./watch.js";import"../core/scheduling.js";import"./nextTick.js";import"../core/Promise.js";import"../core/reactiveUtils.js";import"./uuid.js";import"../core/accessorSupport/decorators/cast.js";import"./projector.js";import"./widgetUtils.js";import"./jsxWidgetSupport.js";import"./observers.js";import"./label2.js";import"./form.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */function x(e){const{r:t,g:i,b:o}=e;return`#${t.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`.toLowerCase()}const k=/^[0-9A-F]$/i,F=/^#[0-9A-F]{3}$/i,j=/^#[0-9A-F]{6}$/i;function A(e){return D(e)||I(e)}function D(e){return e&&4===e.length&&F.test(e)}function I(e){return e&&7===e.length&&j.test(e)}function T(e){return(e=e.toLowerCase()).startsWith("#")||(e=`#${e}`),D(e)?x(function(e){if(!A(e))return null;if(3===(e=e.replace("#","")).length){const[t,i,o]=e.split("");return{r:parseInt(`${t}${t}`,16),g:parseInt(`${i}${i}`,16),b:parseInt(`${o}${o}`,16)}}return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}}(e)):e}function H(e){if("string"==typeof e){if(e.startsWith("#")){const{length:t}=e;if(4===t||7===t)return"hex";if(5===t||9===t)return"hexa"}if(e.startsWith("rgba("))return"rgba-css";if(e.startsWith("rgb("))return"rgb-css";if(e.startsWith("hsl("))return"hsl-css";if(e.startsWith("hsla("))return"hsla-css"}if("object"==typeof e){if(E(e,"r","g","b"))return E(e,"a")?"rgba":"rgb";if(E(e,"h","s","l"))return E(e,"a")?"hsla":"hsl";if(E(e,"h","s","v"))return E(e,"a")?"hsva":"hsv"}return null}function E(e,...t){return t.every((t=>t&&e&&`${t}`in e))}function P(e,t){return(null==e?void 0:e.rgbNumber())===(null==t?void 0:t.rgbNumber())}
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.97
 */const R=r("#007AC2"),M={r:255,g:255,b:255},N={h:360,s:100,v:100},K={s:{slider:{height:10,width:160},colorField:{height:80,width:160},thumb:{radius:8}},m:{slider:{height:14,width:272},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:16,width:464},colorField:{height:200,width:464},thumb:{radius:12}}},$=r(),V=e(class extends t{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerHexInputChange=i(this,"calciteColorPickerHexInputChange",6),this.allowEmpty=!1,this.intlHex="Hex",this.intlNoColor="No color",this.scale="m",this.value=T($.hex()),this.onCalciteInternalInputBlur=()=>{const e=this.inputNode,t=e.value,i=`#${t}`;this.allowEmpty&&!t||A(i)&&I(i)||(e.value=this.allowEmpty&&!this.internalColor?"":this.formatForInternalInput(x(this.internalColor.object())))},this.onInputChange=()=>{this.internalSetValue(this.inputNode.value,this.value)},this.internalColor=$,this.previousNonNullValue=this.value,this.storeInputRef=e=>{this.inputNode=e}}connectedCallback(){const{allowEmpty:e,value:t}=this;if(t){const e=T(t);A(e)&&this.internalSetValue(e,e,!1)}else e&&this.internalSetValue(null,null,!1)}handleValueChange(e,t){this.internalSetValue(e,t,!1)}onInputKeyDown(e){const{altKey:t,ctrlKey:i,metaKey:o,shiftKey:n}=e,{internalColor:l,value:a}=this,{key:r}=e;if("Tab"===r||"Enter"===r)return void this.onInputChange();const s="ArrowDown"===r||"ArrowUp"===r,c=this.value;if(s){if(!a)return this.internalSetValue(this.previousNonNullValue,c),void e.preventDefault();const t="ArrowUp"===r?1:-1,i=n?10:1;return this.internalSetValue(T(this.nudgeRGBChannels(l,i*t).hex()),c),void e.preventDefault()}const h=t||i||o,d=1===r.length,u=k.test(r);!d||h||u||e.preventDefault()}onPaste(e){const t=e.clipboardData.getData("text");A(t)&&(e.preventDefault(),this.inputNode.value=t.slice(1))}render(){const{intlHex:e,value:t}=this,i=this.formatForInternalInput(t);return o("div",{class:"container"},o("calcite-input",{class:"input",label:e,maxLength:6,numberingSystem:this.numberingSystem,onCalciteInputChange:this.onInputChange,onCalciteInternalInputBlur:this.onCalciteInternalInputBlur,onKeyDown:this.handleKeyDown,onPaste:this.onPaste,prefixText:"#",ref:this.storeInputRef,scale:this.scale,value:i}),i?o("calcite-color-picker-swatch",{active:!0,class:"preview",color:`#${i}`,scale:this.scale}):null)}async setFocus(){n(this.inputNode)}internalSetValue(e,t,i=!0){if(e){const t=T(e);if(A(t)){const{internalColor:e}=this,o=!e||t!==T(e.hex());return this.internalColor=r(t),this.previousNonNullValue=t,this.value=t,void(o&&i&&this.calciteColorPickerHexInputChange.emit())}}else if(this.allowEmpty)return this.internalColor=null,this.value=null,void(i&&this.calciteColorPickerHexInputChange.emit());this.value=t}formatForInternalInput(e){return e?e.replace("#",""):""}nudgeRGBChannels(e,t){return r.rgb(e.array().map((e=>e+t)))}handleKeyDown(e){"Enter"===e.key&&e.preventDefault()}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{display:block}.container{display:inline-grid;inline-size:100%;align-items:center;grid-template-columns:1fr auto}.preview{grid-column:2/3;pointer-events:none;margin-block:0px;margin-inline:0.25rem;display:flex;align-items:center}.preview,.input{grid-row:1}.input{grid-column:1/3;inline-size:100%;text-transform:uppercase}"}},[1,"calcite-color-picker-hex-input",{allowEmpty:[4,"allow-empty"],intlHex:[1,"intl-hex"],intlNoColor:[1,"intl-no-color"],scale:[513],value:[1537],numberingSystem:[1,"numbering-system"],internalColor:[32],setFocus:[64]},[[2,"keydown","onInputKeyDown"]]]);function L(){"undefined"!=typeof customElements&&["calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input","calcite-progress"].forEach((e=>{switch(e){case"calcite-color-picker-hex-input":customElements.get(e)||customElements.define(e,V);break;case"calcite-color-picker-swatch":customElements.get(e)||s();break;case"calcite-icon":customElements.get(e)||c();break;case"calcite-input":customElements.get(e)||h();break;case"calcite-progress":customElements.get(e)||d()}}))}L();const U=T(R.hex()),_=e(class extends t{constructor(){var e,t,n,s;super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerChange=i(this,"calciteColorPickerChange",6),this.calciteColorPickerInput=i(this,"calciteColorPickerInput",6),this.allowEmpty=!1,this.appearance="solid",this.color=R,this.disabled=!1,this.format="auto",this.hideHex=!1,this.hideChannels=!1,this.hideSaved=!1,this.intlB="B",this.intlBlue="Blue",this.intlDeleteColor="Delete color",this.intlG="G",this.intlGreen="Green",this.intlH="H",this.intlHsv="HSV",this.intlHex="Hex",this.intlHue="Hue",this.intlNoColor="No color",this.intlR="R",this.intlRed="Red",this.intlRgb="RGB",this.intlS="S",this.intlSaturation="Saturation",this.intlSaveColor="Save color",this.intlSaved="Saved",this.intlV="V",this.intlValue="Value",this.scale="m",this.value=U,this.colorFieldAndSliderHovered=!1,this.hueThumbState="idle",this.internalColorUpdateContext=null,this.mode="hex",this.shiftKeyChannelAdjustment=0,this.sliderThumbState="idle",this.colorFieldAndSliderInteractive=!1,this.channelMode="rgb",this.channels=this.toChannels(R),this.dimensions=K.m,this.savedColors=[],this.handleTabActivate=e=>{this.channelMode=e.currentTarget.getAttribute("data-color-mode"),this.updateChannelsFromColor(this.color)},this.handleColorFieldScopeKeyDown=e=>{const{key:t}=e,i={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};i[t]&&(e.preventDefault(),this.scopeOrientation="ArrowDown"===t||"ArrowUp"===t?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+i[t].x||0,this.colorFieldScopeTop+i[t].y||0,!1))},this.handleHueScopeKeyDown=e=>{const t=e.shiftKey?10:1,{key:i}=e,o={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(o[i]){e.preventDefault();const n=o[i]*t,l=this.baseColorFieldColor.hue(),a=this.baseColorFieldColor.hue(l+n);this.internalColorSet(a,!1)}},this.handleHexInputChange=e=>{e.stopPropagation();const{allowEmpty:t,color:i}=this,o=e.target.value;!t||o?o!==(i&&T(i.hex()))&&this.internalColorSet(r(o)):this.internalColorSet(null)},this.handleSavedColorSelect=e=>{const t=e.currentTarget;this.internalColorSet(r(t.color))},this.handleChannelInput=e=>{const t=e.currentTarget,i=e.detail.nativeEvent.target,o=Number(t.getAttribute("data-channel-index")),n="rgb"===this.channelMode?M[Object.keys(M)[o]]:N[Object.keys(N)[o]];let l;if(this.allowEmpty&&!t.value)l="";else{const e=Number(t.value)+this.shiftKeyChannelAdjustment;l=u(e,0,n).toString()}t.value=l,i.value=l},this.handleChannelChange=e=>{const t=e.currentTarget,i=Number(t.getAttribute("data-channel-index")),o=[...this.channels];if(this.allowEmpty&&!t.value)return this.channels=[null,null,null],void this.internalColorSet(null);o[i]=Number(t.value),this.updateColorFromChannels(o)},this.handleSavedColorKeyDown=e=>{m(e.key)&&(e.preventDefault(),this.handleSavedColorSelect(e))},this.handleColorFieldAndSliderPointerLeave=()=>{this.colorFieldAndSliderInteractive=!1,this.colorFieldAndSliderHovered=!1,"drag"!==this.sliderThumbState&&"drag"!==this.hueThumbState&&(this.hueThumbState="idle",this.sliderThumbState="idle",this.drawColorFieldAndSlider())},this.handleColorFieldAndSliderPointerDown=e=>{var t,i;if(!l(e))return;const{offsetX:o,offsetY:n}=e,a=this.getCanvasRegion(n);"color-field"===a?(this.hueThumbState="drag",this.captureColorFieldColor(o,n),null===(t=this.colorFieldScopeNode)||void 0===t||t.focus()):"slider"===a&&(this.sliderThumbState="drag",this.captureHueSliderColor(o),null===(i=this.hueScopeNode)||void 0===i||i.focus()),e.preventDefault(),document.addEventListener("pointermove",this.globalPointerMoveHandler),document.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeColorFieldAndSliderRect=this.fieldAndSliderRenderingContext.canvas.getBoundingClientRect()},this.globalPointerUpHandler=e=>{if(!l(e))return;const t="drag"===this.sliderThumbState||"drag"===this.hueThumbState;this.hueThumbState="idle",this.sliderThumbState="idle",this.activeColorFieldAndSliderRect=null,this.drawColorFieldAndSlider(),t&&this.calciteColorPickerChange.emit()},this.globalPointerMoveHandler=e=>{const{el:t,dimensions:i}=this,o="drag"===this.sliderThumbState,n="drag"===this.hueThumbState;if(!t.isConnected||!o&&!n)return;let l,a;const r=this.activeColorFieldAndSliderRect,{clientX:s,clientY:c}=e;if(this.colorFieldAndSliderHovered)l=s-r.x,a=c-r.y;else{const e=i.colorField.width,t=i.colorField.height,o=i.slider.height;l=s<r.x+e&&s>r.x?s-r.x:s<r.x?0:e-1,a=c<r.y+t+o&&c>r.y?c-r.y:c<r.y?0:t+o}n?this.captureColorFieldColor(l,a,!1):this.captureHueSliderColor(l)},this.handleColorFieldAndSliderPointerEnterOrMove=({offsetX:e,offsetY:t})=>{const{dimensions:{colorField:i,slider:o,thumb:n}}=this;this.colorFieldAndSliderInteractive=t<=i.height+o.height,this.colorFieldAndSliderHovered=!0;const l=this.getCanvasRegion(t);if("color-field"===l){const o=this.hueThumbState,l=this.baseColorFieldColor.hsv(),a=Math.round(l.saturationv()/(N.s/i.width)),r=Math.round(i.height-l.value()/(N.v/i.height)),s=this.containsPoint(e,t,a,r,n.radius);let c=!1;"idle"===o&&s?(this.hueThumbState="hover",c=!0):"hover"!==o||s||(this.hueThumbState="idle",c=!0),"drag"!==this.hueThumbState&&c&&this.drawColorFieldAndSlider()}else if("slider"===l){const l=this.baseColorFieldColor.hsv().saturationv(100).value(100),a=this.sliderThumbState,r=Math.round(l.hue()/(360/o.width)),s=Math.round((o.height+this.getSliderCapSpacing())/2)+i.height,c=this.containsPoint(e,t,r,s,n.radius);let h=!1;"idle"===a&&c?(this.sliderThumbState="hover",h=!0):"hover"!==a||c||(this.sliderThumbState="idle",h=!0),"drag"!==this.sliderThumbState&&h&&this.drawColorFieldAndSlider()}},this.storeColorFieldScope=e=>{this.colorFieldScopeNode=e},this.storeHueScope=e=>{this.hueScopeNode=e},this.renderChannelsTabTitle=e=>{const{channelMode:t,intlRgb:i,intlHsv:n}=this,l="rgb"===e?i:n;return o("calcite-tab-title",{active:e===t,class:"color-mode","data-color-mode":e,key:e,onCalciteTabsActivate:this.handleTabActivate},l)},this.renderChannelsTab=e=>{const{channelMode:t,channels:i,intlB:n,intlBlue:l,intlG:r,intlGreen:s,intlH:c,intlHue:h,intlR:d,intlRed:u,intlS:p,intlSaturation:m,intlV:g,intlValue:v}=this,f=e===t,C="rgb"===e,b=C?[d,r,n]:[c,p,g],S=C?[u,s,l]:[h,m,v],y=a(this.el);return o("calcite-tab",{active:f,class:"control",key:e},o("div",{class:"channels",dir:"ltr"},i.map(((e,t)=>this.renderChannel(e,t,b[t],S[t],y)))))},this.renderChannel=(e,t,i,n,l)=>o("calcite-input",{class:"channel","data-channel-index":t,dir:l,label:n,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputChange:this.handleChannelChange,onCalciteInputInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,prefixText:i,scale:"l"===this.scale?"m":"s",type:"number",value:null==e?void 0:e.toString()}),this.deleteColor=()=>{const e=this.color.hex();if(!(this.savedColors.indexOf(e)>-1))return;const t=this.savedColors.filter((t=>t!==e));this.savedColors=t;const i=`calcite-color-${this.storageId}`;this.storageId&&localStorage.setItem(i,JSON.stringify(t))},this.saveColor=()=>{const e=this.color.hex();if(this.savedColors.indexOf(e)>-1)return;const t=[...this.savedColors,e];this.savedColors=t;const i=`calcite-color-${this.storageId}`;this.storageId&&localStorage.setItem(i,JSON.stringify(t))},this.drawColorFieldAndSlider=(e=()=>{this.fieldAndSliderRenderingContext&&(this.drawColorField(),this.drawHueSlider())},n=!0,s=!0,y(t)&&(n="leading"in t?!!t.leading:n,s="trailing"in t?!!t.trailing:s),w(e,16,{leading:n,maxWait:16,trailing:s})),this.captureColorFieldColor=(e,t,i=!0)=>{const{dimensions:{colorField:{height:o,width:n}}}=this,l=Math.round(N.s/n*e),a=Math.round(N.v/o*(o-t));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(l).value(a),i)},this.initColorFieldAndSlider=e=>{this.fieldAndSliderRenderingContext=e.getContext("2d"),this.updateCanvasSize(e)}}handleColorChange(e,t){this.drawColorFieldAndSlider(),this.updateChannelsFromColor(e),this.previousColor=t}handleFormatChange(e){this.setMode(e),this.internalColorSet(this.color,!1,"internal")}handleScaleChange(e="m"){var t;this.updateDimensions(e),this.updateCanvasSize(null===(t=this.fieldAndSliderRenderingContext)||void 0===t?void 0:t.canvas)}handleValueChange(e,t){const{allowEmpty:i,format:o}=this;let n=!1;if(!i||e){const i=H(e);if(!i||"auto"!==o&&i!==o)return this.showIncompatibleColorWarning(e,o),void(this.value=t);n=this.mode!==i,this.setMode(i)}const l="drag"===this.sliderThumbState||"drag"===this.hueThumbState;if("initial"===this.internalColorUpdateContext)return;if("user-interaction"===this.internalColorUpdateContext)return this.calciteColorPickerInput.emit(),void(l||this.calciteColorPickerChange.emit());const a=i&&!e?null:r(e),s=!P(a,this.color);(n||s)&&this.internalColorSet(a,!0,"internal")}get baseColorFieldColor(){return this.color||this.previousColor||R}handleChannelKeyUpOrDown(e){this.shiftKeyChannelAdjustment=0;const{key:t}=e;if("ArrowUp"!==t&&"ArrowDown"!==t||!e.composedPath().some((e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("channel")})))return;const{shiftKey:i}=e;if(e.preventDefault(),!this.color)return this.internalColorSet(this.previousColor),void e.stopPropagation();this.shiftKeyChannelAdjustment="ArrowUp"===t&&i?9:"ArrowDown"===t&&i?-9:0}async setFocus(){return n(this.colorFieldScopeNode)}componentWillLoad(){const{allowEmpty:e,color:t,format:i,value:o}=this,n=e&&!o,l=H(o),a=n||"auto"===i&&l||i===l,s=n?null:a?r(o):t;a||this.showIncompatibleColorWarning(o,i),this.setMode(i),this.internalColorSet(s,!1,"initial"),this.updateDimensions(this.scale);const c=`calcite-color-${this.storageId}`;this.storageId&&localStorage.getItem(c)&&(this.savedColors=JSON.parse(localStorage.getItem(c)))}disconnectedCallback(){document.removeEventListener("pointermove",this.globalPointerMoveHandler),document.removeEventListener("pointerup",this.globalPointerUpHandler)}componentDidRender(){p(this)}render(){const{allowEmpty:e,color:t,intlDeleteColor:i,hideHex:n,hideChannels:l,hideSaved:a,intlHex:r,intlSaved:s,intlSaveColor:c,savedColors:h,scale:d}=this,u=t?t.hex():null,p="l"===d?"m":"s",{colorFieldAndSliderInteractive:m,colorFieldScopeTop:g,colorFieldScopeLeft:v,hueScopeLeft:f,hueScopeTop:C,scopeOrientation:b,dimensions:{colorField:{height:S,width:y},slider:{height:w}}}=this,x=null!=C?C:w/2+S,k=null!=f?f:y*R.hue()/N.h,F=null===t,j="vertical"===b;return o("div",{class:"container"},o("div",{class:"color-field-and-slider-wrap"},o("canvas",{class:{"color-field-and-slider":!0,"color-field-and-slider--interactive":m},onPointerDown:this.handleColorFieldAndSliderPointerDown,onPointerEnter:this.handleColorFieldAndSliderPointerEnterOrMove,onPointerLeave:this.handleColorFieldAndSliderPointerLeave,onPointerMove:this.handleColorFieldAndSliderPointerEnterOrMove,ref:this.initColorFieldAndSlider}),o("div",{"aria-label":j?this.intlValue:this.intlSaturation,"aria-valuemax":j?N.v:N.s,"aria-valuemin":"0","aria-valuenow":(j?null==t?void 0:t.saturationv():null==t?void 0:t.value())||"0",class:{scope:!0,"scope--color-field":!0},onKeyDown:this.handleColorFieldScopeKeyDown,ref:this.storeColorFieldScope,role:"slider",style:{top:`${g||0}px`,left:`${v||0}px`},tabindex:"0"}),o("div",{"aria-label":this.intlHue,"aria-valuemax":N.h,"aria-valuemin":"0","aria-valuenow":(null==t?void 0:t.round().hue())||R.round().hue(),class:{scope:!0,"scope--hue":!0},onKeyDown:this.handleHueScopeKeyDown,ref:this.storeHueScope,role:"slider",style:{top:`${x}px`,left:`${k}px`},tabindex:"0"})),n&&l?null:o("div",{class:{"control-section":!0,section:!0}},n?null:o("div",{class:"color-hex-options"},o("span",{class:{header:!0,"header--hex":!0}},r),o("calcite-color-picker-hex-input",{allowEmpty:e,class:"control",numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:p,value:u})),l?null:o("calcite-tabs",{class:{"color-mode-container":!0,"section--split":!0},scale:p},o("calcite-tab-nav",{slot:"tab-nav"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv"))),a?null:o("div",{class:{"saved-colors-section":!0,section:!0}},o("div",{class:"header"},o("label",null,s),o("div",{class:"saved-colors-buttons"},o("calcite-button",{appearance:"transparent",class:"delete-color",color:"neutral",disabled:F,iconStart:"minus",label:i,onClick:this.deleteColor,scale:p,type:"button"}),o("calcite-button",{appearance:"transparent",class:"save-color",color:"neutral",disabled:F,iconStart:"plus",label:c,onClick:this.saveColor,scale:p,type:"button"}))),h.length>0?o("div",{class:"saved-colors"},[...h.map((e=>o("calcite-color-picker-swatch",{active:u===e,class:"saved-color",color:e,key:e,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:d,tabIndex:0})))]):null))}handleKeyDown(e){"Enter"===e.key&&e.preventDefault()}showIncompatibleColorWarning(e,t){console.warn(`ignoring color value (${e}) as it is not compatible with the current format (${t})`)}setMode(e){this.mode="auto"===e?this.mode:e}captureHueSliderColor(e){const{dimensions:{slider:{width:t}}}=this,i=360/t*e;this.internalColorSet(this.baseColorFieldColor.hue(i),!1)}getCanvasRegion(e){const{dimensions:{colorField:{height:t},slider:{height:i}}}=this;return e<=t?"color-field":e<=t+i?"slider":"none"}internalColorSet(e,t=!0,i="user-interaction"){t&&P(e,this.color)||(this.internalColorUpdateContext=i,this.color=e,this.value=this.toValue(e),this.internalColorUpdateContext=null)}toValue(e,t=this.mode){if(!e)return null;if(t.includes("hex"))return T(e.round().hex());if(t.includes("-css"))return e[t.replace("-css","").replace("a","")]().round().string();const i=e[t]().round().object();return t.endsWith("a")&&(i.a=i.alpha,delete i.alpha),i}getSliderCapSpacing(){const{dimensions:{slider:{height:e},thumb:{radius:t}}}=this;return 2*t-e}updateDimensions(e="m"){this.dimensions=K[e]}drawColorField(){const e=this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:t,width:i}}}=this;e.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).string(),e.fillRect(0,0,i,t);const o=e.createLinearGradient(0,0,i,0);o.addColorStop(0,"rgba(255,255,255,1)"),o.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=o,e.fillRect(0,0,i,t);const n=e.createLinearGradient(0,0,0,t);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),e.fillStyle=n,e.fillRect(0,0,i,t),this.drawActiveColorFieldColor()}setCanvasContextSize(e,{height:t,width:i}){const o=window.devicePixelRatio||1;e.width=i*o,e.height=t*o,e.style.height=`${t}px`,e.style.width=`${i}px`,e.getContext("2d").scale(o,o)}updateCanvasSize(e){e&&(this.setCanvasContextSize(e,{width:this.dimensions.colorField.width,height:this.dimensions.colorField.height+this.dimensions.slider.height+2*this.getSliderCapSpacing()}),this.drawColorFieldAndSlider())}containsPoint(e,t,i,o,n){return Math.pow(e-i,2)+Math.pow(t-o,2)<=Math.pow(n,2)}drawActiveColorFieldColor(){const{color:e}=this;if(!e)return;const t=e.hsv(),{dimensions:{colorField:{height:i,width:o},thumb:{radius:n}}}=this,l=t.saturationv()/(N.s/o),a=i-t.value()/(N.v/i);requestAnimationFrame((()=>{this.colorFieldScopeLeft=l,this.colorFieldScopeTop=a})),this.drawThumb(this.fieldAndSliderRenderingContext,n,l,a,t,this.hueThumbState)}drawThumb(e,t,i,o,n,l){const a=2*Math.PI;e.beginPath(),e.arc(i,o,t,0,a),e.shadowBlur="hover"===l?32:16,e.shadowColor=`rgba(0, 0, 0, ${"drag"===l?.32:.16})`,e.fillStyle="#fff",e.fill(),e.beginPath(),e.arc(i,o,t-3,0,a),e.shadowBlur=0,e.shadowColor="transparent",e.fillStyle=n.rgb().string(),e.fill()}drawActiveHueSliderColor(){const{color:e}=this;if(!e)return;const t=e.hsv().saturationv(100).value(100),{dimensions:{colorField:{height:i},slider:{height:o,width:n},thumb:{radius:l}}}=this,a=t.hue()/(360/n),r=o/2+i;requestAnimationFrame((()=>{this.hueScopeLeft=a,this.hueScopeTop=r})),this.drawThumb(this.fieldAndSliderRenderingContext,l,a,r,t,this.sliderThumbState)}drawHueSlider(){const e=this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:t},slider:{height:i,width:o}}}=this,n=e.createLinearGradient(0,0,o,0),l=["red","yellow","lime","cyan","blue","magenta","red"],a=1/(l.length-1);let s=0;l.forEach((e=>{n.addColorStop(s,r(e).string()),s+=a})),e.fillStyle=n,e.clearRect(0,t,o,i+2*this.getSliderCapSpacing()),e.fillRect(0,t,o,i),this.drawActiveHueSliderColor()}updateColorFromChannels(e){this.internalColorSet(r(e,this.channelMode))}updateChannelsFromColor(e){this.channels=e?this.toChannels(e):[null,null,null]}toChannels(e){const{channelMode:t}=this;return e[t]().array().map((e=>Math.floor(e)))}get el(){return this}static get watchers(){return{color:["handleColorChange"],format:["handleFormatChange"],scale:["handleScaleChange"],value:["handleValueChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0.01}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(20px, 1fr))}:host([scale=s]) .channels{flex-direction:column}:host([scale=s]) .channel{inline-size:100%;margin-block-end:4px}:host([scale=s]) .channel:last-child{margin-block-end:0}:host([scale=m]) .container{inline-size:272px}:host([scale=l]) .header{padding-block-end:0px}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .color-field-and-slider{margin-block-end:-20px}:host([scale=l]) .section{padding-block:0 16px;padding-inline:16px}:host([scale=l]) .section:first-of-type{padding-block-start:16px}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(28px, 1fr));grid-gap:12px;padding-block-start:16px}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline}:host([scale=l]) .control-section>:nth-child(2){margin-inline-start:12px}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around;min-block-size:98px;inline-size:160px}:host([scale=l]) .color-mode-container{flex-shrink:3}:host([appearance=minimal]) .container{border:none}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.color-field-and-slider-wrap{position:relative}.scope{pointer-events:none;position:absolute;font-size:var(--calcite-font-size--1);outline-color:transparent;outline-offset:14px}.scope:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:16px}.color-field-and-slider{margin-block-end:-16px;touch-action:none}.color-field-and-slider--interactive{cursor:pointer}.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 12px;padding-inline:12px}.section:first-of-type{padding-block-start:12px}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;padding-block-end:0.25rem;color:var(--calcite-ui-text-1)}.header--hex,.color-mode-container{padding-block-start:12px}.channels{display:flex;justify-content:space-between}.channel{inline-size:31%}.saved-colors{padding-block-start:12px;display:grid;grid-template-columns:repeat(auto-fill, minmax(24px, 1fr));grid-gap:8px;inline-size:100%}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}"}},[1,"calcite-color-picker",{allowEmpty:[516,"allow-empty"],appearance:[513],color:[1040],disabled:[516],format:[513],hideHex:[516,"hide-hex"],hideChannels:[516,"hide-channels"],hideSaved:[516,"hide-saved"],intlB:[1,"intl-b"],intlBlue:[1,"intl-blue"],intlDeleteColor:[1,"intl-delete-color"],intlG:[1,"intl-g"],intlGreen:[1,"intl-green"],intlH:[1,"intl-h"],intlHsv:[1,"intl-hsv"],intlHex:[1,"intl-hex"],intlHue:[1,"intl-hue"],intlNoColor:[1,"intl-no-color"],intlR:[1,"intl-r"],intlRed:[1,"intl-red"],intlRgb:[1,"intl-rgb"],intlS:[1,"intl-s"],intlSaturation:[1,"intl-saturation"],intlSaveColor:[1,"intl-save-color"],intlSaved:[1,"intl-saved"],intlV:[1,"intl-v"],intlValue:[1,"intl-value"],scale:[513],storageId:[513,"storage-id"],numberingSystem:[513,"numbering-system"],value:[1025],colorFieldAndSliderInteractive:[32],channelMode:[32],channels:[32],dimensions:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],scopeOrientation:[32],hueScopeLeft:[32],hueScopeTop:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]]]);function z(){"undefined"!=typeof customElements&&["calcite-color-picker","calcite-button","calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input","calcite-loader","calcite-progress","calcite-tab","calcite-tab-nav","calcite-tab-title","calcite-tabs"].forEach((e=>{switch(e){case"calcite-color-picker":customElements.get(e)||customElements.define(e,_);break;case"calcite-button":customElements.get(e)||g();break;case"calcite-color-picker-hex-input":customElements.get(e)||L();break;case"calcite-color-picker-swatch":customElements.get(e)||s();break;case"calcite-icon":customElements.get(e)||c();break;case"calcite-input":customElements.get(e)||h();break;case"calcite-loader":customElements.get(e)||v();break;case"calcite-progress":customElements.get(e)||d();break;case"calcite-tab":customElements.get(e)||f();break;case"calcite-tab-nav":customElements.get(e)||C();break;case"calcite-tab-title":customElements.get(e)||b();break;case"calcite-tabs":customElements.get(e)||S()}}))}z();const B=_,O=z;export{B as CalciteColorPicker,O as defineCustomElement};
