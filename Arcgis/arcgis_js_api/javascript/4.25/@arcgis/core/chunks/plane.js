/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{c as t}from"./mathUtils.js";import{i as n}from"./maybe.js";import{g as r,b as o,a as s,m as c,h as e,c as a,d as i,s as u,j as f,n as I}from"./vec3.js";import"./object.js";import"./Logger.js";import{p as N}from"./vector.js";import{s as g,a as m}from"./ray.js";import{t as M}from"./mathUtils2.js";function E(t=K){return[t[0],t[1],t[2],t[3]]}function j(t=K[0],n=K[1],r=K[2],o=K[3]){return h(t,n,r,o,m.get())}function p(t,n){return h(n[0],n[1],n[2],n[3],t)}function h(t,n,r,o,s=E()){return s[0]=t,s[1]=n,s[2]=r,s[3]=o,s}function A(t,n,r){return a(r,t),r[3]=n,r}function F(t,n,r){const o=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],s=Math.abs(o-1)>1e-5&&o>1e-12?1/Math.sqrt(o):1;return r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function T(t,n,r,o=E()){const s=r[0]-n[0],c=r[1]-n[1],e=r[2]-n[2],a=t[0]-n[0],i=t[1]-n[1],u=t[2]-n[2],f=c*u-e*i,I=e*a-s*u,N=s*i-c*a,g=f*f+I*I+N*N,m=Math.abs(g-1)>1e-5&&g>1e-12?1/Math.sqrt(g):1;return o[0]=f*m,o[1]=I*m,o[2]=N*m,o[3]=-(o[0]*t[0]+o[1]*t[1]+o[2]*t[2]),o}function _(t,n,r,s,e){if(t.count<3)return!1;t.getVec(r,v);let a=s,i=!1;for(;a<t.count-1&&!i;)t.getVec(a,y),a++,i=!f(v,y);if(!i)return!1;for(a=Math.max(a,e),i=!1;a<t.count&&!i;)t.getVec(a,d),a++,o(l,v,y),I(l,l),o(L,y,d),I(L,L),i=!f(v,d)&&!f(y,d)&&Math.abs(c(l,L))<b;return i?(T(v,y,d,n),!0):(0!==r||1!==s||2!==e)&&_(t,n,0,1,2)}const b=.99619469809,v=i(),y=i(),d=i(),l=i(),L=i();function X(t,n,r){return n!==t&&p(t,n),t[3]=-c(t,r),t}function C(t,n){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function P(t,n,r,o){return e(d,n,t),F(r,d,o)}function q(t,n,r,s){return H(t,n,o(g.get(),r,n),R,s)}function O(t,r,o){return!!n(r)&&H(t,r.origin,r.direction,S,o)}function V(t,n,r){return H(t,n.origin,n.vector,Q.NONE,r)}function x(t,n,r){return H(t,n.origin,n.vector,Q.CLAMP,r)}function U(t,n){return G(t,n)>=0}function k(t,n){const r=c(t,n.ray.direction),o=-G(t,n.ray.origin);if(o<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return o>0;if((o<0||r<0)&&!(o<0&&r<0))return!0;const s=o/r;return r>0?s<n.c1&&(n.c1=s):s>n.c0&&(n.c0=s),n.c0<=n.c1}function w(t,n){const r=c(t,n.ray.direction),o=-G(t,n.ray.origin);if(r>-1e-6&&r<1e-6)return o>0;const s=o/r;return r>0?s<n.c1&&(n.c1=s):s>n.c0&&(n.c0=s),n.c0<=n.c1}function z(t,n,c){const e=r(g.get(),t,-t[3]),a=D(t,o(g.get(),n,e),g.get());return s(c,a,e),c}function B(t,n,r,s){const c=t,e=g.get(),a=g.get();M(c,e,a);const i=o(g.get(),r,n),f=N(e,i),I=N(a,i),m=N(c,i);return u(s,f,I,m)}function D(t,n,s){const e=r(g.get(),t,c(t,n));return o(s,n,e),s}function G(t,n){return c(t,n)+t[3]}function H(n,o,e,a,i){const u=c(n,e);if(0===u)return!1;let f=-(c(n,o)+n[3])/u;return a&Q.CLAMP&&(f=t(f,0,1)),!(!(a&Q.INFINITE_MIN)&&f<0||!(a&Q.INFINITE_MAX)&&f>1||(s(i,o,r(i,e,f)),0))}function J(t){return t}const K=[0,0,1,0];var Q;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(Q||(Q={}));const R=Q.INFINITE_MIN|Q.INFINITE_MAX,S=Q.INFINITE_MAX;export{p as a,q as b,E as c,T as d,w as e,F as f,k as g,O as h,U as i,P as j,X as k,h as l,V as m,J as n,x as o,B as p,z as q,A as r,G as s,C as t,D as u,_ as v,j as w};
