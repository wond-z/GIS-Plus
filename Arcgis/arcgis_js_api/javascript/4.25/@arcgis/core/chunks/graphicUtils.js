/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
import{i as t,a as e}from"./maybe.js";import{e as n}from"./unitUtils.js";import{r,q as o,u as s}from"./mat4.js";import{c as i}from"./mat4f64.js";import{B as a,O as u}from"./vec3.js";import{s as m}from"./mathUtils.js";import{d as l,O as c}from"./vec4f64.js";import{projectPoint as f}from"../geometry/projection.js";import{w as p,m as h,n as g}from"./aaBoundingBox.js";import{c as y}from"./aaBoundingRect.js";import{d,a as x,r as j}from"../geometry/Polygon.js";import{m as b}from"./dehydratedFeatures.js";import{i as v,c as w}from"./hydratedFeatures.js";import{V as R}from"./VertexAttribute.js";function A(t,e){if("point"===t.type)return P(t,e,!1);if(v(t))switch(t.type){case"extent":return P(t.center,e,!1);case"polygon":return P(t.centroid,e,!1);case"polyline":return P(M(t),e,!0);case"mesh":return P(t.origin,e,!1)}else switch(t.type){case"extent":return P(function(t){const e=isFinite(t.zmin);return b(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),e?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}(t),e,!0);case"polygon":return P(function(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=j(t.rings,t.hasZ);return b(n[0],n[1],n[2],t.spatialReference)}(t),e,!0);case"polyline":return P(M(t),e,!0)}}function M(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=d(e,x(e)/2);return b(n[0],n[1],n[2],t.spatialReference)}function P(t,e,n){const r=n?t:w(t);return e&&t?f(t,r,e)?r:null:r}function F(t,e,n,r=0){if(t){e||(e=y());const o=t;let s=.5*o.width*(n-1),i=.5*o.height*(n-1);return o.width<1e-7*o.height?s+=i/20:o.height<1e-7*o.width&&(i+=s/20),m(e,o.xmin-s-r,o.ymin-i-r,o.xmax+s+r,o.ymax+i+r),e}return null}function z(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(R.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttrsUpdated(t.geometryRecords[n]))}}function B(e,n){const r=l(c);return t(e)&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),t(n)?r[3]=n:t(e)&&e.length>3&&(r[3]=e[3]),r}function U(e,n,r,o,s,i=[0,0,0,0]){for(let n=0;n<3;++n)t(e)&&null!=e[n]?i[n]=e[n]:t(r)&&null!=r[n]?i[n]=r[n]:i[n]=s[n];return t(n)?i[3]=n:t(o)?i[3]=o:i[3]=s[3],i}function D(t=u,n,r,o=1){const s=new Array(3);if(e(n)||e(r))s[0]=1,s[1]=1,s[2]=1;else{let e,o=0;for(let i=2;i>=0;i--){const a=t[i];let u;const m=null!=a,l=0===i&&!e&&!m,c=r[i];"symbol-value"===a||l?u=0!==c?n[i]/c:1:m&&"proportional"!==a&&isFinite(a)&&(u=0!==c?a/c:1),null!=u&&(s[i]=u,e=u,o=Math.max(o,Math.abs(u)))}for(let t=2;t>=0;t--)null==s[t]?s[t]=e:0===s[t]&&(s[t]=.001*o)}for(let t=2;t>=0;t--)s[t]/=o;return a(s)}function I(t){return null!=t.isPrimitive&&(t=[t.width,t.depth,t.height]),O(t)?null:"Symbol sizes may not be negative values"}function O(t){if(Array.isArray(t)){for(const e of t)if(!O(e))return!1;return!0}return null==t||t>=0}function V(t,e,n,a=i()){const u=t||0,m=e||0,l=n||0;return 0!==u&&r(a,a,-u/180*Math.PI),0!==m&&o(a,a,m/180*Math.PI),0!==l&&s(a,a,l/180*Math.PI),a}function S(t,e,r){if(null!=r.minDemResolution)return r.minDemResolution;const o=n(e),s=p(t)*o,i=h(t)*o,a=g(t)*(e.isGeographic?1:o);return 0===s&&0===i&&0===a?r.minDemResolutionForPoints:.01*Math.max(s,i,a)}export{D as a,V as b,A as c,S as d,F as e,O as i,B as m,U as o,z as u,I as v};
