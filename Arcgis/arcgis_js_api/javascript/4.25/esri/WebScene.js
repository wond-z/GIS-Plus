// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(a,f){a.updateOrigins=function(b){b&&b.writtenProperties&&b.writtenProperties.forEach(({target:m,propName:u,newOrigin:n})=>{f.isMultiOriginJSONMixin(m)&&n&&m.originOf(u)!==n&&m.updateOrigin(u,n)})};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(a){a.isMultiOriginJSONMixin=
function(f){return f&&"getAtOrigin"in f&&"originOf"in f};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(a,f,b,m,u,n,w,e,r,d){b=function(k){function g(B){B=k.call(this,B)||this;B.levelLayer=null;B.facilityLayer=null;B.siteLayer=null;return B}a._inheritsLoose(g,k);return g}(b.JSONSupport);f.__decorate([m.property({type:r,json:{write:!0}})],b.prototype,"levelLayer",void 0);f.__decorate([m.property({type:e,json:{write:!0}})],b.prototype,"facilityLayer",void 0);f.__decorate([m.property({type:d,json:{write:!0}})],b.prototype,"siteLayer",void 0);return b=f.__decorate([w.subclass("esri.support.MapFloorInfo")],
b)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w){b=function(e){function r(d){d=e.call(this,d)||this;d.facilityIdField=null;d.layerId=null;d.nameField=null;d.siteIdField=null;d.sublayerId=null;return d}a._inheritsLoose(r,
e);return r}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"facilityIdField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"nameField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"siteIdField",void 0);f.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,
write:!1}}}})],b.prototype,"sublayerId",void 0);return b=f.__decorate([w.subclass("esri.layers.support.FacilityLayerInfo")],b)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w){b=function(e){function r(d){d=e.call(this,
d)||this;d.facilityIdField=null;d.layerId=null;d.levelIdField=null;d.levelNumberField=null;d.longNameField=null;d.shortNameField=null;d.sublayerId=null;d.verticalOrderField=null;return d}a._inheritsLoose(r,e);return r}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"facilityIdField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"levelIdField",void 0);
f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"levelNumberField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"longNameField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"shortNameField",void 0);f.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"sublayerId",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],
b.prototype,"verticalOrderField",void 0);return b=f.__decorate([w.subclass("esri.layers.support.LevelLayerInfo")],b)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w){b=function(e){function r(d){d=e.call(this,d)||this;
d.layerId=null;d.nameField=null;d.siteIdField=null;d.sublayerId=null;return d}a._inheritsLoose(r,e);return r}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"layerId",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"nameField",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"siteIdField",void 0);f.__decorate([m.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,
write:!1}}}})],b.prototype,"sublayerId",void 0);return b=f.__decorate([w.subclass("esri.layers.support.SiteLayerInfo")],b)})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(a,f){a.createCopyError=function(){return new f("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};a.createSchemaValidationError=function(b){return new f("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",
{errors:b})};a.schemaValidationErrorName="webscene:schema-validation";Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(a,f,b){a.isSpatialReferenceSupported=function(m,u){return null==m?!1:null==u?!0:u===b.ViewingMode.Local?m.isGeographic?m.isWGS84||m.wkid===f.SupportedGCSWkids.CGCS2000:!0:m.isWebMercator||m.isWGS84||
m.wkid===f.SupportedGCSWkids.CGCS2000||m.wkid===f.SupportedGCSWkids.GCSMARS2000||m.wkid===f.SupportedGCSWkids.GCSMARS2000_SPHERE||m.wkid===f.SupportedGCSWkids.GCSMOON2000};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/asyncUtils ../../core/Error ../../core/maybe ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),
function(a,f,b,m,u,n,w,e){function r(){r=f._asyncToGenerator(function*(C,t,A){if(t&&t.resources){var M=t.portalItem===C.portalItem?new Set(C.paths):new Set;C.paths.length=0;C.portalItem=t.portalItem;var E=new Set(t.resources.toKeep.map(U=>U.resource.path)),O=new Set,Q=[];E.forEach(U=>{M.delete(U);C.paths.push(U)});for(const U of t.resources.toUpdate)if(M.delete(U.resource.path),E.has(U.resource.path)||O.has(U.resource.path)){const {resource:ea,content:oa,finish:fa,error:da}=U,ka=e.getSiblingOfSameTypeI(ea,
w.generateUUID());C.paths.push(ka.path);Q.push(d({resource:ka,content:oa,compress:U.compress,finish:fa,error:da},A))}else C.paths.push(U.resource.path),Q.push(g(U,A)),O.add(U.resource.path);for(const U of t.resources.toAdd)Q.push(d(U,A)),C.paths.push(U.resource.path);M.forEach(U=>{U=t.portalItem.resourceFromPath(U);Q.push(U.portalItem.removeResource(U).catch(()=>{}))});if(0!==Q.length&&(E=yield n.eachAlways(Q),n.throwIfAborted(A),A=E.filter(U=>"error"in U).map(U=>U.error),0<A.length))throw new m("save:resources",
"Failed to save one or more resources",{errors:A});}});return r.apply(this,arguments)}function d(C,t){return k.apply(this,arguments)}function k(){k=f._asyncToGenerator(function*(C,t){t={...(u.isSome(t)?t:{}),compress:C.compress};t=yield b.result(C.resource.portalItem.addResource(C.resource,C.content,t));if(!0===t.ok)C.finish&&C.finish(C.resource);else throw C.error&&C.error(t.error),t.error;});return k.apply(this,arguments)}function g(C,t){return B.apply(this,arguments)}function B(){B=f._asyncToGenerator(function*(C,
t){t=yield b.result(C.resource.update(C.content,t));if(!0===t.ok)C.finish(C.resource);else throw C.error(t.error),t.error;});return B.apply(this,arguments)}a.saveResources=function(C,t,A){return r.apply(this,arguments)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/portal/support/resourceUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(a,
f,b,m,u,n){function w(){w=f._asyncToGenerator(function*(t,A={},M){yield t.load(M);var E=n.join(t.itemUrl,"resources");const {start:O=1,num:Q=10,sortOrder:U="asc",sortField:ea="created"}=A;A={query:{start:O,num:Q,sortOrder:U,sortField:ea,token:t.apiKey},signal:u.get(M,"signal")};E=yield t.portal._request(E,A);return{total:E.total,nextStart:E.nextStart,resources:E.resources.map(({created:oa,size:fa,resource:da})=>({created:new Date(oa),size:fa,resource:t.resourceFromPath(da)}))}});return w.apply(this,
arguments)}function e(){e=f._asyncToGenerator(function*(t,A,M,E){if(!t.hasPath())throw new m(`portal-item-resource-${A}:invalid-path`,"Resource does not have a valid path");const O=t.portalItem;yield O.load(E);A=n.join(O.userItemUrl,"add"===A?"addResources":"updateResources");const [Q,U]=k(t.path);M=yield B(M);const ea=new FormData;Q&&"."!==Q&&ea.append("resourcesPrefix",Q);u.isSome(E)&&E.compress&&ea.append("compress","true");ea.append("fileName",U);ea.append("file",M,U);ea.append("f","json");u.isSome(E)&&
E.access&&ea.append("access",E.access);yield O.portal._request(A,{method:"post",body:ea,signal:u.get(E,"signal")});return t});return e.apply(this,arguments)}function r(){r=f._asyncToGenerator(function*(t,A,M){if(!A.hasPath())throw new m("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield t.load(M);const E=n.join(t.userItemUrl,"removeResources");yield t.portal._request(E,{method:"post",query:{resource:A.path},signal:u.get(M,"signal")});A.portalItem=null});return r.apply(this,
arguments)}function d(){d=f._asyncToGenerator(function*(t,A){yield t.load(A);const M=n.join(t.userItemUrl,"removeResources");return t.portal._request(M,{method:"post",query:{deleteAll:!0},signal:u.get(A,"signal")})});return d.apply(this,arguments)}function k(t){const A=t.lastIndexOf("/");return-1===A?[".",t]:[t.slice(0,A),t.slice(A+1)]}function g(t){{const Q=n.getPathExtension(t);t=u.isNone(Q)?[t,""]:[t.slice(0,t.length-Q.length-1),`.${Q}`]}const [A,M]=t,[E,O]=k(A);return[E,O,M]}function B(t){return C.apply(this,
arguments)}function C(){C=f._asyncToGenerator(function*(t){return t instanceof Blob?t:(yield b(t.url,{responseType:"blob"})).data});return C.apply(this,arguments)}a.addOrUpdateResource=function(t,A,M,E){return e.apply(this,arguments)};a.contentToBlob=B;a.fetchResources=function(t){return w.apply(this,arguments)};a.getSiblingOfSameType=function(t,A){if(!t.hasPath())return null;const [M,,E]=g(t.path);return t.portalItem.resourceFromPath(n.join(M,A+E))};a.getSiblingOfSameTypeI=function(t,A){if(!t.hasPath())return null;
const [M,,E]=g(t.path);return t.portalItem.resourceFromPath(n.join(M,A+E))};a.removeAllResources=function(t,A){return d.apply(this,arguments)};a.removeResource=function(t,A,M){return r.apply(this,arguments)};a.splitPrefixFileNameAndExtension=g;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(a){const f={width:600,height:400};a.getOptimalThumbnailSize=function(b,m){m=m||f;let {width:u,
height:n}=m;m=u/n;1.5>m?n=u/1.5:1.5<m&&(u=1.5*n);u>b.width&&(n*=b.width/u,u=b.width);n>b.height&&(u*=b.height/n,n=b.height);return{width:Math.round(u),height:Math.round(n)}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.viewing=null;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({viewing:this.viewing?this.viewing.clone():null})};return k}(b.JSONSupport);f.__decorate([m.property({type:e,json:{write:!0}})],b.prototype,"viewing",void 0);return b=r=f.__decorate([w.subclass("esri.webscene.ApplicationProperties")],b)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.search=null;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r(m.clone({search:this.search}))};return k}(b.JSONSupport);f.__decorate([u.property({type:e,json:{write:!0}})],b.prototype,"search",void 0);return b=r=f.__decorate([w.subclass("esri.webdoc.applicationProperties.Viewing")],b)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B){var C;const t=b.ofType(g),A=b.ofType(B);b=C=function(M){function E(Q){Q=M.call(this,Q)||this;Q.addressSearchEnabled=!0;Q.enabled=!0;Q.hintText=null;Q.layers=new t;Q.tables=new A;return Q}a._inheritsLoose(E,M);var O=E.prototype;O.readAddressSearchEnabled=function(Q){return!Q};O.writeAddressSearchEnabled=function(Q,U,ea){U[ea]=!Q};O.clone=function(){return new C(u.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return E}(m.JSONSupport);f.__decorate([n.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"addressSearchEnabled",void 0);f.__decorate([e.reader("addressSearchEnabled")],b.prototype,"readAddressSearchEnabled",null);f.__decorate([d.writer("addressSearchEnabled")],b.prototype,"writeAddressSearchEnabled",null);f.__decorate([n.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],b.prototype,"enabled",void 0);f.__decorate([n.property({type:String,json:{write:!0}})],b.prototype,"hintText",void 0);f.__decorate([n.property({type:t,json:{write:{overridePolicy:k.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],b.prototype,"layers",void 0);f.__decorate([n.property({type:A,json:{read:!0,write:{overridePolicy:k.writeNonEmptyCollectionPolicy}}})],
b.prototype,"tables",void 0);return b=C=f.__decorate([r.subclass("esri.webdoc.applicationProperties.Search")],b)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(a){a.writeNonEmptyCollectionPolicy=function(f){return{enabled:!!f?.length}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.field=null;g.id=null;g.subLayer=null;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r(m.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return k}(b.JSONSupport);f.__decorate([u.property({type:e,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);f.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);f.__decorate([u.property({type:n.Integer,
json:{write:!0}})],b.prototype,"subLayer",void 0);return b=r=f.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchLayer")],b)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,f,b,m,u,n,w,e,r){var d;b=d=function(k){function g(B){B=k.call(this,B)||this;B.exactMatch=!1;B.name=null;B.type=null;return B}a._inheritsLoose(g,k);g.prototype.clone=function(){return new d({exactMatch:this.exactMatch,type:this.type,name:this.name})};return g}(b.JSONSupport);f.__decorate([m.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f.__decorate([w.enumeration(r.kebabDict)],
b.prototype,"type",void 0);return b=d=f.__decorate([e.subclass("esri.webdoc.applicationProperties.SearchLayerField")],b)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=
d.call(this,g)||this;g.field=null;g.id=null;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r(m.clone({field:this.field,id:this.id}))};return k}(b.JSONSupport);f.__decorate([u.property({type:e,json:{write:{isRequired:!0}}})],b.prototype,"field",void 0);f.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"id",void 0);return b=r=f.__decorate([w.subclass("esri.webdoc.applicationProperties.SearchTable")],b)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(a,f,b,m,u,n,w,e,r){var d;b=d=function(k){function g(B){B=k.call(this,B)||this;B.exactMatch=!1;B.name=null;B.type=null;return B}a._inheritsLoose(g,k);g.prototype.clone=function(){return new d({exactMatch:this.exactMatch,type:this.type,name:this.name})};return g}(b.JSONSupport);f.__decorate([m.property({type:Boolean,json:{write:!0}})],b.prototype,"exactMatch",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f.__decorate([w.enumeration(r.kebabDict)],
b.prototype,"type",void 0);return b=d=f.__decorate([e.subclass("esri.webdoc.applicationProperties.SearchTableField")],b)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B,C){var t;const A=u.getLogger("esri.webscene.Environment");u=(M,E,O)=>({enabled:!O||!O.isPresentation});b=t=function(M){function E(Q){Q=M.call(this,Q)||this;Q.lighting=new g;Q.background=null;Q.atmosphereEnabled=!0;Q.starsEnabled=!0;return Q}a._inheritsLoose(E,M);var O=E.prototype;O.clone=function(){return new t(this.cloneConstructProperties())};O.cloneConstructProperties=function(){return{lighting:this.lighting&&"virtual"===this.lighting.type?B.prototype.clone.call(this.lighting):
g.prototype.clone.call(this.lighting),background:m.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}};a._createClass(E,[{key:"weather",set:function(Q){d.validateWeatherType(Q?.type,A)&&this._set("weather",Q)}}]);return E}(b.JSONSupport);f.__decorate([n.property({types:k.lightingTypes,nonNullable:!0,json:{write:!0}})],b.prototype,"lighting",void 0);f.__decorate([n.property(C.backgroundProperty)],b.prototype,"background",void 0);
f.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:u}}})],b.prototype,"atmosphereEnabled",void 0);f.__decorate([n.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:u}}})],b.prototype,"starsEnabled",void 0);f.__decorate([n.property({types:d.weatherTypes,nonNullable:!0,json:{write:!0},value:new r})],b.prototype,"weather",null);return b=t=f.__decorate([e.subclass("esri.webscene.Environment")],b)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.type="sunny";g.cloudCover=.5;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({cloudCover:this.cloudCover})};return k}(b.JSONSupport);f.__decorate([w.enumeration({sunny:"sunny"})],b.prototype,"type",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);return b=r=f.__decorate([e.subclass("esri.views.3d.environment.SunnyWeather")],
b)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),function(a,f,b,m,u,n){f={key:"type",base:n,typeMap:{sunny:n,cloudy:f,rainy:m,snowy:u,foggy:b}};const w=Object.keys(f.typeMap);a.validateWeatherType=function(e,r){return w.includes(e)?!0:(r.error(`"${e}" is not a valid weather type`),!1)};a.weatherHeightLimit=1E4;a.weatherTypes=f;a.weatherTypesArray=w;Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,
g)||this;g.type="cloudy";g.cloudCover=.5;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({cloudCover:this.cloudCover})};return k}(b.JSONSupport);f.__decorate([w.enumeration({cloudy:"cloudy"})],b.prototype,"type",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);return b=r=f.__decorate([e.subclass("esri.views.3d.environment.CloudyWeather")],b)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.type="foggy";g.fogStrength=.5;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({fogStrength:this.fogStrength})};return k}(b.JSONSupport);f.__decorate([w.enumeration({foggy:"foggy"})],b.prototype,"type",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"fogStrength",void 0);return b=r=f.__decorate([e.subclass("esri.views.3d.environment.FoggyWeather")],
b)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w,e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.type="rainy";g.cloudCover=
.5;g.precipitation=.5;return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({cloudCover:this.cloudCover,precipitation:this.precipitation})};return k}(b.JSONSupport);f.__decorate([w.enumeration({rainy:"rainy"})],b.prototype,"type",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"precipitation",
void 0);return b=r=f.__decorate([e.subclass("esri.views.3d.environment.RainyWeather")],b)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w,
e){var r;b=r=function(d){function k(g){g=d.call(this,g)||this;g.type="snowy";g.cloudCover=.5;g.precipitation=.5;g.snowCover="disabled";return g}a._inheritsLoose(k,d);k.prototype.clone=function(){return new r({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})};return k}(b.JSONSupport);f.__decorate([w.enumeration({snowy:"snowy"})],b.prototype,"type",void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"cloudCover",
void 0);f.__decorate([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],b.prototype,"precipitation",void 0);f.__decorate([m.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],b.prototype,"snowCover",void 0);return b=r=f.__decorate([e.subclass("esri.views.3d.environment.SnowyWeather")],b)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(a,f,b){a.lightingTypes={key:"type",defaultKeyValue:"sun",
base:null,typeMap:{sun:f,virtual:b}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/SunLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(a,
f,b,m,u,n,w,e,r){var d;b=d=function(k){function g(C){C=k.call(this,C)||this;C.type="sun";C.date=null;C.directShadowsEnabled=!1;C.displayUTCOffset=null;return C}a._inheritsLoose(g,k);var B=g.prototype;B.readDate=function(C,t){return null!=t.datetime&&new Date(t.datetime)||null};B.writeDate=function(C,t,A){t[A]=C.getTime()};B.readDirectShadowsEnabled=function(C,t){return!!t.directShadows};B.writedirectShadowsEnabled=function(C,t,A){C&&(t[A]=C)};B.writeDisplayUTCOffset=function(C,t){null!=C&&(t.displayUTCOffset=
C)};B.clone=function(){return new d(this.cloneConstructProperties())};B.cloneConstructProperties=function(){const C={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(C.date=new Date(this.date.getTime()));return C};return g}(b.JSONSupport);f.__decorate([m.property({readOnly:!0,type:["sun"],json:{write:!0}})],b.prototype,"type",void 0);f.__decorate([m.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],
b.prototype,"date",void 0);f.__decorate([w.reader("date",["datetime"])],b.prototype,"readDate",null);f.__decorate([r.writer("date")],b.prototype,"writeDate",null);f.__decorate([m.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],b.prototype,"directShadowsEnabled",void 0);f.__decorate([w.reader("directShadowsEnabled",["directShadows"])],b.prototype,"readDirectShadowsEnabled",null);f.__decorate([r.writer("directShadowsEnabled")],b.prototype,"writedirectShadowsEnabled",null);
f.__decorate([m.property({type:Number,json:{write:!0}})],b.prototype,"displayUTCOffset",void 0);f.__decorate([r.writer("displayUTCOffset")],b.prototype,"writeDisplayUTCOffset",null);return b=d=f.__decorate([e.subclass("esri.webscene.SunLighting")],b)})},"esri/webscene/VirtualLighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w){var e;b=e=function(r){function d(g){g=r.call(this,g)||this;g.type="virtual";g.directShadowsEnabled=!1;return g}a._inheritsLoose(d,r);var k=d.prototype;k.clone=function(){return new e(this.cloneConstructProperties())};k.cloneConstructProperties=function(){return{directShadowsEnabled:this.directShadowsEnabled}};return d}(b.JSONSupport);f.__decorate([m.property({readOnly:!0,type:["virtual"],json:{write:!0}})],b.prototype,"type",void 0);f.__decorate([m.property({type:Boolean,json:{default:!1,
name:"directShadows",write:!0}})],b.prototype,"directShadowsEnabled",void 0);return b=e=f.__decorate([w.subclass("esri.webscene.VirtualLighting")],b)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(a,f,b){f={base:f,key:"type",typeMap:{color:b}};f={types:f,json:{read:function(m){return(u,n,w)=>{if(!u)return u;for(const e in m.typeMap)if(u.type===e)return n=new m.typeMap[e],n.read(u,w),n}}(f),write:{overridePolicy:(m,u,n)=>({enabled:!n||
!n.isPresentation})}}};a.backgroundProperty=f;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w){b=function(e){function r(d){return e.call(this,
d)||this}a._inheritsLoose(r,e);r.prototype.clone=function(){};return r}(b.JSONSupport);f.__decorate([m.property({readOnly:!0,json:{read:!1}})],b.prototype,"type",void 0);return b=f.__decorate([w.subclass("esri.webscene.background.Background")],b)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),
function(a,f,b,m,u,n,w,e,r,d){var k;u={...r.colorAndTransparencyProperty,nonNullable:!0};d=k=function(g){function B(t){t=g.call(this,t)||this;t.type="color";t.color=new b([0,0,0,1]);return t}a._inheritsLoose(B,g);var C=B.prototype;C.clone=function(){return new k(this.cloneProperties())};C.cloneProperties=function(){return{color:this.color.clone()}};return B}(d);f.__decorate([w.enumeration({color:"color"},{readOnly:!0})],d.prototype,"type",void 0);f.__decorate([m.property(u)],d.prototype,"color",void 0);
return d=k=f.__decorate([e.subclass("esri.webscene.background.ColorBackground")],d)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),function(a,f,b,m,u,n,w,e,r,d){var k;m=k=function(g){function B(C){C=g.call(this,
C)||this;C.environment=new d;C.spatialReference=null;C.viewpoint=null;return C}a._inheritsLoose(B,g);B.prototype.clone=function(){return new k({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};a._createClass(B,[{key:"viewingMode",set:function(C){this._set("viewingMode",C)}}]);return B}(m.JSONSupport);f.__decorate([u.property({type:d,json:{write:{isRequired:!0}}})],
m.prototype,"environment",void 0);f.__decorate([u.property({type:r})],m.prototype,"spatialReference",void 0);f.__decorate([u.property({type:["local","global"]})],m.prototype,"viewingMode",null);f.__decorate([u.property({type:b,json:{write:{isRequired:!0}}})],m.prototype,"viewpoint",void 0);return m=k=f.__decorate([e.subclass("esri.webscene.InitialViewProperties")],m)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(a,f,b,m,u,n,w,e,r,d){const k=b.ofType(d);b=function(g){function B(t){t=g.call(this,t)||this;t.slides=new k;return t}a._inheritsLoose(B,g);var C=B.prototype;C.destroy=function(){this.slides.forEach(t=>t.destroy());this.slides.removeAll()};C.clone=function(){return new this.constructor({slides:this.slides.clone()})};a._createClass(B,[{key:"slides",set:function(t){t&&(t=t.filter(A=>!!A.viewpoint));this._set("slides",m.referenceSetter(t,this._get("slides"),k))}}]);return B}(u.JSONSupport);f.__decorate([n.property({type:k,
nonNullable:!0,json:{write:!0}}),e.cast(m.castForReferenceSetter)],b.prototype,"slides",null);return b=f.__decorate([r.subclass("esri.webscene.Presentation")],b)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec3 ../chunks/vec3f64 ../layers/Layer ../layers/mixins/OperationalLayer ../support/basemapUtils ../views/3d/support/mathUtils ../views/3d/support/viewpointUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B,C,t,A,M,E,O,Q,U,ea,oa,fa,da,ka,ra,h,v,L,S,T,ba){function c(ia){if("building-scene"===ia.type||"map-image"===ia.type)return ia.allSublayers.toArray()}function p(ia){if(ia=c(ia))return ia.filter(la=>la.visible).map(la=>la.id)}function K(ia,la){ia=la-ia;43200<ia&&(ia-=86400);-43200>ia&&(ia+=86400);return ia}let X=0;const ja=n.ofType(T.SlideVisibleLayer);e=function(ia){function la(l){l=ia.call(this,l)||this;l.id=Date.now().toString(16)+"-slide-"+X++;l.title=new ba;l.description=
new v;l.thumbnail=new ka.SlideThumbnail;l.viewpoint=null;l.basemap=null;l.ground=null;l.environment=new L.SlideEnvironment;l.visibleLayers=new ja;return l}a._inheritsLoose(la,ia);var I=la.prototype;I.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};I.castTitle=function(l){return"string"===typeof l?new ba({text:l}):M.ensureType(ba,l)};I.castDescription=function(l){return"string"===typeof l?
new v({text:l}):M.ensureType(v,l)};I.castThumbnail=function(l){return"string"===typeof l?new ka.SlideThumbnail({url:l}):M.ensureType(ka.SlideThumbnail,l)};I.castBasemap=function(l){return ea.ensureType(l)};I.castVisibleLayers=function(l){return l&&"function"===typeof l.map?l.map(q=>{if("string"===typeof q)return{id:q};if(q instanceof Q){const D=p(q);return{id:q.id,sublayerIds:D}}if(q.id)return{id:q.id,sublayerIds:q.sublayerIds};r.getLogger(this.declaredClass).warn('Invalid visible layer, expected { id }, Layer or "id"');
return q}):null};I.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};I._updateVisibleLayersFrom=function(l){const q=[];return k.eachAlways(this._getLayers(l.map).map(D=>
l.whenLayerView(D).then(R=>{if(R.visible){const Y=p(D);q.push(new T.SlideVisibleLayer({id:R.layer.id,sublayerIds:Y}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(q)})};I.updateFrom=function(l,q){q={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...(q&&q.screenshot)}};return l.when(()=>{this.viewpoint=l.viewpoint.clone();this.environment.lighting="virtual"===l.environment.lighting.type?h.prototype.clone.apply(l.environment.lighting):
ra.prototype.clone.apply(l.environment.lighting);this.environment.weather=l.environment.weather.clone();this.basemap=l.map.basemap&&l.map.basemap.clone()||null;this.ground=l.map.ground?S.fromGround(l.map.ground):null;return this._updateVisibleLayersFrom(l)}).then(()=>l.takeScreenshot(q.screenshot)).then(D=>{this.thumbnail=new ka.SlideThumbnail({url:D.dataUrl});return this})};I.applyTo=function(){var l=a._asyncToGenerator(function*(q,D){var R=this;d.isSome(this._applyToController)&&this._applyToController.abort();
let Y=new AbortController;this._applyToController=Y;const z=k.onAbortOrThrow(D,()=>Y.abort()),H=q.resourceController.scheduler.registerTask(da.TaskPriority.SLIDE);let ca=!1;D={animate:!0,...D,signal:this._applyToController.signal};var aa=function(){var ma=a._asyncToGenerator(function*(){yield Promise.all([H.schedule(()=>ca=R._setViewpointOfInterest(q,D)),H.schedule(()=>R._applyBasemap(q,D),D.signal)]);yield Promise.all([H.schedule(()=>R._applyLayerVisibility(q),D.signal),H.schedule(()=>R._applyGround(q),
D.signal),H.schedule(()=>R._applyViewpoint(q,D),D.signal)]);yield H.schedule(()=>q.environment.weather=R.environment.weather.clone())});return function(){return ma.apply(this,arguments)}}();aa=yield u.result(q.addUpdatingPromise(aa()));ca&&(q.contentCamera=null);H.remove();this._applyToController===Y&&(this._applyToController=null);Y=null;z?.remove();if(!1===aa.ok)throw aa.error;return this});return function(q,D){return l.apply(this,arguments)}}();I._applyBasemap=function(){var l=a._asyncToGenerator(function*(q,
D){if(this.basemap){try{yield this.basemap.load(D)}catch(R){if(k.isAbortError(R))throw R;}q.map.basemap=ea.clonePreservingTiledLayers(this.basemap,q.map.basemap)}});return function(q,D){return l.apply(this,arguments)}}();I._applyGround=function(l){this.ground&&(l.map.ground=this.ground.cloneAndApplyTo(l.map.ground))};I._getLayers=function(l){const q=new n;this._collectLayers(l,q);this._collectLayers(l.ground,q);return q};I._collectLayers=function(l,q){l.layers.forEach(D=>{U.isOperationalLayer(D)&&
(q.add(D),"layers"in D&&this._collectLayers(D,q))})};I._applyLayerVisibility=function(l){this.visibleLayers&&this._getLayers(l.map).forEach(q=>{var D=this.visibleLayers.find(Y=>Y.id===q.id);q.visible=null!=D;const R=D&&D.sublayerIds;D=c(q);R&&D&&D.forEach(Y=>Y.visible=R.includes(Y.id))})};I._setViewpointOfInterest=function(l,q){if(l.state.fixedContentCamera||!this.viewpoint||q.ignoreViewpoint||!q.useDestinationCamera)return!1;q=fa.toCamera(l,this.viewpoint);l.contentCamera=q;return d.isSome(q)};I._applyViewpoint=
function(){var l=a._asyncToGenerator(function*(q,D){this._applyCachedCameraTrackingEnabled(q);if(this.viewpoint&&!D.ignoreViewpoint){d.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=q.camera.fov);if(D.animate&&this.get("environment.lighting.date"))return this._animateToLighting(q,D);D.animate&&(q.environment.applyLighting(this.environment.lighting.clone()),yield q.goTo(this.viewpoint,D));q.viewpoint=this.viewpoint}q.environment.applyLighting(this.environment.lighting.clone())});return function(q,
D){return l.apply(this,arguments)}}();I._animateToLighting=function(){var l=a._asyncToGenerator(function*(q,D){let R=null;"virtual"!==q.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===q.viewingMode&&(R=this._animateLightingWithCamera(q,q.environment.lighting,this.environment.lighting)),q.environment.cachedCameraTrackingEnabled=q.environment.lighting.cameraTrackingEnabled,q.environment.lighting.cameraTrackingEnabled=!1);q.environment.lighting.directShadowsEnabled=
this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===q.environment.lighting.type?(q.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==q.environment.lighting.type&&(q.environment.cachedCameraTrackingEnabled=q.environment.lighting.cameraTrackingEnabled,q.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(q.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);
return q.goTo(this.viewpoint,D).then(()=>{this._applyCachedCameraTrackingEnabled(q);q.environment.applyLighting(this.environment.lighting.clone())}).catch(Y=>{d.isNone(q.animation)&&this._applyCachedCameraTrackingEnabled(q);throw Y;}).finally(()=>{d.removeMaybe(R)})});return function(q,D){return l.apply(this,arguments)}}();I._applyCachedCameraTrackingEnabled=function(l){d.isSome(l.environment.cachedCameraTrackingEnabled)&&(l.environment.lighting.cameraTrackingEnabled=l.environment.cachedCameraTrackingEnabled,
l.environment.cachedCameraTrackingEnabled=null)};I._getTime=function(l){const q=l.getTime();l=3600*l.getUTCHours()+60*l.getUTCMinutes()+l.getUTCSeconds();return[q,l]};I._setTime=function(l,q,D){l.setTime(q);l.setUTCHours(D/3600);l.setUTCMinutes(D%3600/60);l.setUTCSeconds(D%3600%60);return l};I._animateLightingWithCamera=function(l,q,D){const [R,Y]=this._getTime(new Date(q.date.toString())),[z,H]=this._getTime(D.date),ca=K(Y,H),aa=l.renderCoordsHelper,ma=O.create();aa.toRenderCoords(l.camera.position,
ma);const V=O.create(),F=O.create();d.isSome(this.viewpoint.camera)&&aa.toRenderCoords(this.viewpoint.camera.position,V);const y=new Date;return g.when(()=>l.camera,x=>{aa.toRenderCoords(x.position,F);var G=E.squaredDistance(ma,F);const P=E.squaredDistance(V,F);x=0;0!==G+P&&(x=G/(G+P));G=R+(z-R)*x;x=oa.moduloPositive(Y+ca*x,86400);q.date=this._setTime(y,G,x)})};la.createFrom=function(l,q){return(new this).updateFrom(l,q)};a._createClass(la,[{key:"visibleLayers",set:function(l){this._set("visibleLayers",
w.referenceSetter(l,this._get("visibleLayers"),ja))}}]);return la}(e.JSONSupport);f.__decorate([B.property({type:String,json:{write:{isRequired:!0}}})],e.prototype,"id",void 0);f.__decorate([B.property({type:ba,json:{default:()=>new ba({text:""}),write:{isRequired:!0}}})],e.prototype,"title",void 0);f.__decorate([t.cast("title")],e.prototype,"castTitle",null);f.__decorate([B.property({type:v,json:{write:{overridePolicy(ia){return{enabled:!(!ia||!ia.text)}}}}})],e.prototype,"description",void 0);f.__decorate([t.cast("description")],
e.prototype,"castDescription",null);f.__decorate([B.property({type:ka.SlideThumbnail,json:{default:()=>new ka.SlideThumbnail({url:""}),write:{isRequired:!0}}})],e.prototype,"thumbnail",void 0);f.__decorate([t.cast("thumbnail")],e.prototype,"castThumbnail",null);f.__decorate([B.property({type:m,nonNullable:!0,json:{write:{isRequired:!0}}})],e.prototype,"viewpoint",void 0);f.__decorate([B.property({type:b,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],e.prototype,"basemap",void 0);f.__decorate([t.cast("basemap")],
e.prototype,"castBasemap",null);f.__decorate([B.property({type:S,json:{write:!0}})],e.prototype,"ground",void 0);f.__decorate([B.property({type:ja,json:{write:{isRequired:!0}}})],e.prototype,"visibleLayers",null);f.__decorate([t.cast("visibleLayers")],e.prototype,"castVisibleLayers",null);f.__decorate([B.property({type:L.SlideEnvironment,json:{write:!0}})],e.prototype,"environment",void 0);return e=f.__decorate([A.subclass("esri.webscene.Slide")],e)})},"esri/views/3d/support/mathUtils":function(){define(["exports",
"../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,f,b,m){const u=m.create(),n=m.create(),w=m.create(),e=m.create(),r=m.create();a.angle=function(d,k,g){d=b.normalize(e,d);k=b.normalize(r,k);const B=f.acosClamped(b.dot(d,k));return g&&(d=b.cross(w,d,k),0>b.dot(d,g))?-B:B};a.bilerp=function(d,k,g,B,C,t){d+=(k-d)*C;return d+(g+(B-g)*C-d)*t};a.cosCapped=function(d,k){return d>k?Math.cos(k):Math.cos(d)};a.fovx2fovy=function(d,k,g){return 2*Math.atan(g*Math.tan(.5*d)/
k)};a.fovy2fovx=function(d,k,g){return 2*Math.atan(k*Math.tan(.5*d)/g)};a.makeOrthonormal=function(d,k,g){g=g||d;const B=b.dot(d,k);b.set(g,d[0]-B*k[0],d[1]-B*k[1],d[2]-B*k[2]);b.normalize(g,g)};a.makePiecewiseLinearFunction=function(d){const k=d.length;return g=>{if(g<=d[0][0])return d[0][1];if(g>=d[k-1][0])return d[k-1][1];let B=1;for(;g>d[B][0];)B++;const C=d[B][0];g=(C-g)/(C-d[B-1][0]);return g*d[B-1][1]+(1-g)*d[B][1]}};a.maxScale=function(d){return Math.sqrt(Math.max(d[0]*d[0]+d[4]*d[4]+d[8]*
d[8],d[1]*d[1]+d[5]*d[5]+d[9]*d[9],d[2]*d[2]+d[6]*d[6]+d[10]*d[10]))};a.moduloPositive=function(d,k){return(d%k+k)%k};a.planeFromPoints=function(d,k,g,B){b.subtract(u,k,d);b.subtract(n,g,d);b.cross(B,u,n);b.normalize(B,B);B[3]=-b.dot(d,B)};a.scaleFromMatrix=function(d,k){b.set(d,Math.sqrt(k[0]*k[0]+k[4]*k[4]+k[8]*k[8]),Math.sqrt(k[1]*k[1]+k[5]*k[5]+k[9]*k[9]),Math.sqrt(k[2]*k[2]+k[6]*k[6]+k[10]*k[10]));return d};a.slerp=function(d,k,g,B=m.create()){const C=b.length(d);var t=b.length(k),A=b.dot(d,
k)/(C*t);if(.9999999999999999>A){A=Math.acos(A);const M=((1-g)*C+g*t)/Math.sin(A);t=M/t*Math.sin(g*A);b.scale(e,d,M/C*Math.sin((1-g)*A));b.scale(r,k,t);return b.add(B,e,r)}return b.lerp(B,d,k,g)};a.slerpTangent=function(d,k,g,B=m.create(),C=m.create()){const t=b.length(d),A=b.length(k);var M=b.dot(d,k)/(t*A);if(.9999999999999999>M){M=Math.acos(M);const E=Math.sin(M),O=Math.sin(g*M),Q=Math.sin((1-g)*M),U=(1-g)*t+g*A,ea=U/E,oa=ea/A*O;b.scale(e,d,ea/t*Q);b.scale(r,k,oa);b.add(B,e,r);b.scale(e,d,1/t*
(-Math.cos((1-g)*M)*M*U+Q*(-t+A)));b.scale(r,k,1/A*(Math.cos(g*M)*M*U+O*(-t+A)));b.add(C,e,r);b.scale(C,C,1/E);return C}b.lerp(B,d,k,g);b.subtract(C,k,d);b.normalize(C,C);return C};a.tangentFrame=function(d,k,g){Math.abs(d[0])>Math.abs(d[1])?b.set(k,0,1,0):b.set(k,1,0,0);b.cross(g,d,k);b.normalize(k,k);b.cross(k,g,d);b.normalize(g,g)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/viewpointUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../geometry ../../../Graphic ../../../Viewpoint ../../../core/asyncUtils ../../../core/has ../../../core/Cyclical ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../chunks/mat3 ../../../chunks/mat3f64 ../../../chunks/mat4f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/frustum ../../../geometry/support/scaleUtils ../../../geometry/support/webMercatorUtils ../camera/intersectionUtils ./cameraUtils ./ElevationProvider ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry/Geometry".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B,C,t,A,M,E,O,Q,U,ea,oa,fa,da,ka,ra,h,v,L){function S(J){return 360-r.cyclicalDegrees.normalize(J)}function T(J){return r.cyclicalDegrees.normalize(360-J)}function ba(J){k.isSome(J)&&J.resolver&&J.resolver.reject();return null}function c(J,N,Z,ha=null){if(!N)return ba(ha);var pa=J.spatialReference||h.WGS84;if(k.isSome(N.camera)){J=oa.project(N.camera.position,pa);if(k.isNone(J))return ba(ha);N=N.camera.clone();N.position=J;J=N;k.isSome(ha)&&ha.resolver&&ha.resolver.resolve(J);
return J}if(k.isNone(N.targetGeometry))return ba(ha);var qa=N.get("targetGeometry.spatialReference");if(qa&&!oa.canProject(qa,pa))return ba(ha);pa=da.internalToExternal(J,J.state.camera);qa=da.OrientationMode.ADJUST;null!=N.rotation&&(pa.heading=S(N.rotation),qa=da.OrientationMode.LOCKED);null!=Z&&(pa.tilt=Z);if("point"===N.targetGeometry.type){const sa=N.targetGeometry;Z=N.targetGeometry.clone();N=null!=N.scale?da.scaleToDistance(J,N.scale,sa.latitude):J.state.camera.distance;return da.fromCenterDistance(J,
Z,N,pa,qa,ha)}return da.fromExtent(J,N.targetGeometry.extent,pa.heading,pa.tilt,qa,ha)}function p(){p=f._asyncToGenerator(function*(J,N,Z){if(N&&J.spatialReference){var ha={target:null};if("declaredClass"in N||Array.isArray(N))ha.target=N;else{for(var pa in N)ha[pa]=N[pa];N.center&&!ha.target&&(ha.target=N.center)}N=ha}else N=null;if(!N)throw new d("viewpointutils-create:no-target","Missing target for creating viewpoint");ha=new b({fov:J.camera.fov});pa=new n({camera:ha});if(N.target instanceof n)return J=
yield D(J,N.target,N,Z,pa),x(J);if(N.target instanceof b)return x(Y(J,N.target,pa));var qa=null!=N.scale||null!=N.zoom;if(N.target instanceof v){var sa=N.target.xmin===N.target.xmax||N.target.ymin===N.target.ymax;return qa||sa?x(yield z(J,N,N.target.center,ha,Z,pa)):x(yield ma(J,N,N.target,ha,Z,pa))}sa={boundingBox:O.empty(),hasZ:!1,screenSpaceObjects:[]};var va=qa?ea.getResolutionInMetersForScale(K(J,N)):void 0;yield l(J,N.target,va,sa);if(isFinite(sa.boundingBox[0])){O.center(sa.boundingBox,G);
xa.x=G[0];xa.y=G[1];xa.z=G[2];xa.spatialReference=J.spatialReference;isFinite(xa.z)&&sa.hasZ?va=O.isPoint(sa.boundingBox):(xa.z=void 0,va=Q.isPoint(O.toRect(sa.boundingBox,ta)));if(qa||va)return x(yield z(J,N,xa,ha,Z,pa));qa=sa.screenSpaceObjects;if(qa.length){va=Number.NEGATIVE_INFINITY;for(let za=0;za<qa.length;za++){const ya=qa[za].screenSpaceBoundingRect;va=Math.max(va,Math.abs(ya[0]),Math.abs(ya[1]),Math.abs(ya[2]),Math.abs(ya[3]))}qa=.66-va/Math.min(J.width,J.height)*2}else qa=.66;return x(yield F(J,
N,xa,sa.boundingBox,qa,ha,Z,pa))}return N.position?(Z=fa.cameraOnContentAlongViewDirection(J),A.copy(ua,Z.viewForward),da.directionToHeadingTilt(J,Z.eye,ua,Z.up,Ca),ha.position=new ra(N.position),ha.heading=null!=N.heading?N.heading:Ca.heading,ha.tilt=null!=N.tilt?N.tilt:Ca.tilt,J=ja(J,null,ha,pa),x(J)):x(yield ca(J,N,ha,Z,pa))});return p.apply(this,arguments)}function K(J,N){return null==N.scale&&null!=N.zoom?da.zoomToScale(J,N.zoom):N.scale}function X(J,N){let Z=!1;null!=N.heading?(J.heading=N.heading,
Z=!0):null!=N.rotation&&(J.heading=S(N.rotation),Z=!0);null!=N.tilt&&(J.tilt=N.tilt,Z=!0);null!=N.fov&&(J.fov=N.fov);return Z}function ja(J,N,Z,ha){const pa=J.spatialReference||h.WGS84;N=k.isSome(N)?N:da.externalToInternal(J,Z);if(k.isNone(N))return ha;ha.targetGeometry=E.projectVectorToPoint(N.center,J.renderSpatialReference,pa);ha.scale=da.computeScale(J,N);ha.rotation=T(Z.heading);ha.camera=Z;return ha}function ia(J,N,Z){var ha=()=>new d("viewpointutils:invalid-geometry","The target is missing a valid geometry");
if(!N)throw ha();if(!oa.canProject(N.spatialReference,J.spatialReference))throw new d("viewpointutils:incompatible-spatialreference",`Spatial reference (${N.spatialReference?N.spatialReference.wkid:"unknown"}) is incompatible with the view (${J.spatialReference.wkid})`,{geometry:N});const pa=[];if(!N.hasZ&&J.basemapTerrain){switch(N.type){case "point":var qa=N;break;case "multipoint":case "polyline":qa=N.extent?.center;break;case "mesh":qa=N.origin;break;case "extent":qa=N.center;break;case "polygon":qa=
N.centroid}qa&&k.isSome(J.basemapTerrain.spatialReference)&&oa.canProject(qa,J.basemapTerrain.spatialReference)?G[2]=k.unwrapOr(ka.getElevationAtPoint(J.elevationProvider,qa),0):G[2]=0}(0,Fa[N.type])(N,sa=>{pa.push(sa[0],sa[1],sa[2])},G);qa=pa.length/3;if(0===qa)throw ha();ha=Array(pa.length);if(E.projectBuffer(pa,N.spatialReference,0,ha,J.spatialReference,0,qa))for(N.hasZ&&(Z.hasZ=!0),J=0;J<ha.length;J+=3)N.hasZ?(G[0]=ha[J+0],G[1]=ha[J+1],G[2]=ha[J+2]):(G[0]=ha[J+0],G[1]=ha[J+1]),O.expandWithVec3(Z.boundingBox,
G)}function la(J,N,Z,ha){return I.apply(this,arguments)}function I(){I=f._asyncToGenerator(function*(J,N,Z,ha){const pa=yield w.result(J.whenViewForGraphic(N));if(!1!==pa.ok&&!k.isNone(pa.value)&&"whenGraphicBounds"in pa.value)if(Z=yield w.result(pa.value.whenGraphicBounds(N,{minDemResolution:Z})),!1===Z.ok)ia(J,N.geometry,ha);else{var {screenSpaceObjects:qa,boundingBox:sa}=Z.value;O.expandWithAABB(ha.boundingBox,sa);qa&&qa.forEach(va=>{ha.screenSpaceObjects.push(va)});isFinite(sa[2])&&(ha.hasZ=!0)}else ia(J,
N.geometry,ha)});return I.apply(this,arguments)}function l(J,N,Z,ha){return q.apply(this,arguments)}function q(){q=f._asyncToGenerator(function*(J,N,Z,ha){if(Array.isArray(N)&&2===N.length){const pa=N[0],qa=N[1];if("number"===typeof pa&&"number"===typeof qa){xa.x=pa;xa.y=qa;xa.z=void 0;xa.spatialReference=J.spatialReference.isGeographic?J.spatialReference:h.WGS84;ia(J,xa,ha);return}}N&&"function"===typeof N.map?yield g.eachAlways(N.map(pa=>l(J,pa,Z,ha))):N instanceof L?ia(J,N,ha):N instanceof u&&
(yield la(J,N,Z,ha))});return q.apply(this,arguments)}function D(J,N,Z,ha,pa){return R.apply(this,arguments)}function R(){R=f._asyncToGenerator(function*(J,N,Z,ha,pa){if(k.isSome(N.camera))return Y(J,N.camera,pa);pa.scale=N.scale;pa.rotation=N.rotation;pa.targetGeometry=k.isSome(N.targetGeometry)?N.targetGeometry.clone():null;pa.camera=null;null!=Z.heading?pa.rotation=T(Z.heading):null!=Z.rotation&&(pa.rotation=Z.rotation);N=K(J,Z);null!=N&&(pa.scale=N);ha=new da.AsyncContext(ha);c(J,pa,Z.tilt,ha);
pa.camera=yield ha.resolver.promise;return pa});return R.apply(this,arguments)}function Y(J,N,Z){const ha=oa.project(N.position,J.spatialReference);if(k.isNone(ha))return null;N=N.clone();N.fov=J.camera.fov;N.position=ha;return ja(J,null,N,Z)}function z(J,N,Z,ha,pa,qa){return H.apply(this,arguments)}function H(){H=f._asyncToGenerator(function*(J,N,Z,ha,pa,qa){if(k.isNone(Z))throw new d("createfromcenter","invalid point");qa.targetGeometry=Z.clone();const sa=fa.cameraOnContentAlongViewDirection(J);
if(N.position)return Z=qa.targetGeometry,pa=J.renderSpatialReference,E.projectPointToVector(N.position,wa,pa),E.projectPointToVector(Z,Aa,pa),qa.targetGeometry=new ra(Z),ha.position=new ra(N.position),A.subtract(ua,Aa,wa),da.directionToHeadingTilt(J,wa,ua,sa.up,ha),qa.scale=da.distanceToScale(J,A.distance(wa,Aa),qa.targetGeometry.latitude),qa.rotation=T(ha.heading),qa.camera=ha,qa;if(N.zoomFactor){var va=sa.distance/N.zoomFactor;const za=A.scale(G,sa.viewForward,-va);sa.eye=A.add(G,sa.center,za);
qa.scale=da.distanceToScale(J,va,Z.latitude)}da.internalToExternal(J,sa,ha);va=X(ha,N)?da.OrientationMode.LOCKED:da.OrientationMode.ADJUST;N.zoomFactor||(qa.scale=K(J,N),null==qa.scale&&(E.projectPointToVector(Z,G,J.renderSpatialReference),U.intersectsPoint(sa.frustum,G)?qa.scale=da.distanceToScale(J,A.distance(sa.eye,G),Z.latitude):qa.scale=da.computeScale(J,sa)),N=new da.AsyncContext(pa),da.fromCenterScale(J,qa.targetGeometry,qa.scale,ha,va,N),qa.camera=yield N.resolver.promise);return qa});return H.apply(this,
arguments)}function ca(J,N,Z,ha,pa){return aa.apply(this,arguments)}function aa(){aa=f._asyncToGenerator(function*(J,N,Z,ha,pa){var qa=fa.cameraOnContentAlongViewDirection(J);qa=E.projectVectorToPoint(qa.center,J.renderSpatialReference,J.spatialReference);return z(J,N,qa,Z,ha,pa)});return aa.apply(this,arguments)}function ma(J,N,Z,ha,pa,qa){return V.apply(this,arguments)}function V(){V=f._asyncToGenerator(function*(J,N,Z,ha,pa,qa){qa.targetGeometry=Z.clone();const sa=fa.cameraOnContentAlongViewDirection(J);
da.internalToExternal(J,sa,ha);N=X(ha,N)?da.OrientationMode.LOCKED:da.OrientationMode.ADJUST;pa=new da.AsyncContext(pa);da.fromExtent(J,Z,ha.heading,ha.tilt,N,pa);qa.camera=yield pa.resolver.promise;return qa});return V.apply(this,arguments)}function F(J,N,Z,ha,pa,qa,sa,va){return y.apply(this,arguments)}function y(){y=f._asyncToGenerator(function*(J,N,Z,ha,pa,qa,sa,va){va.targetGeometry=Z.clone();const za=fa.cameraOnContentAlongViewDirection(J);var ya=0;Z.hasZ?ya=Z.z:J.basemapTerrain&&(ya=k.unwrap(ka.getElevationAtPoint(J.elevationProvider,
Z)));A.set(G,Z.x,Z.y,ya);E.computeTranslationToOriginAndRotation(J.spatialReference,G,P,J.renderSpatialReference);B.fromMat4(W,P);B.transpose(W,W);O.empty(na);Z=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];for(var Ba=0;Ba<Z.length;Ba++){const Da=Z[Ba];let Ea=ha[Da[2]];isFinite(Ea)||(Ea=ya);A.set(G,ha[Da[0]],ha[Da[1]],Ea);E.projectVectorToVector(G,J.spatialReference,G,J.renderSpatialReference);O.expandWithVec3(na,A.transformMat3(G,G,W))}ha=O.width(na);ya=O.height(na);Z=O.depth(na);
Ba=1/Math.tan(za.fovY/2);pa=Math.max(.5*Math.sqrt(ha*ha+Z*Z)*Math.max(Ba,1/Math.tan(za.fovX/2))+.5*ya,.5*ya*Ba+.5*Math.max(ha,Z))/pa;da.internalToExternal(J,za,qa);N=X(qa,N)?da.OrientationMode.LOCKED:da.OrientationMode.ADJUST;va.scale=da.distanceToScale(J,pa,va.targetGeometry.latitude);sa=new da.AsyncContext(sa);da.fromCenterScale(J,va.targetGeometry,va.scale,qa,N,sa);va.camera=yield sa.resolver.promise;return va});return y.apply(this,arguments)}function x(J){J&&k.isSome(J.camera)&&(J.rotation=T(J.camera.heading));
return J}const G=M.create(),P=t.create(),W=C.create(),na=O.create(),ta=Q.create(),ua=M.create(),wa=M.create(),Aa=M.create(),Ca={heading:0,tilt:0},xa=new ra,Fa={point(J,N,Z){Z[0]=J.x;Z[1]=J.y;J.hasZ&&(Z[2]=J.z);N(Z)},polygon(J,N,Z){const ha=J.hasZ;for(let pa=0;pa<J.rings.length;pa++){const qa=J.rings[pa];for(let sa=0;sa<qa.length;sa++)Z[0]=qa[sa][0],Z[1]=qa[sa][1],ha&&(Z[2]=qa[sa][2]),N(Z)}},polyline(J,N,Z){const ha=J.hasZ;for(let pa=0;pa<J.paths.length;pa++){const qa=J.paths[pa];for(let sa=0;sa<qa.length;sa++)Z[0]=
qa[sa][0],Z[1]=qa[sa][1],ha&&(Z[2]=qa[sa][2]),N(Z)}},multipoint(J,N,Z){const ha=J.points;J=J.hasZ;for(let pa=0;pa<ha.length;pa++)Z[0]=ha[pa][0],Z[1]=ha[pa][1],J&&(Z[2]=ha[pa][2]),N(Z)},extent(J,N,Z){J.hasZ?(N(A.set(Z,J.xmin,J.ymin,J.zmin)),N(A.set(Z,J.xmax,J.ymin,J.zmin)),N(A.set(Z,J.xmin,J.ymax,J.zmin)),N(A.set(Z,J.xmax,J.ymax,J.zmin)),N(A.set(Z,J.xmin,J.ymin,J.zmax)),N(A.set(Z,J.xmax,J.ymin,J.zmax)),N(A.set(Z,J.xmin,J.ymax,J.zmax)),N(A.set(Z,J.xmax,J.ymax,J.zmax))):(N(A.set(Z,J.xmin,J.ymin,Z[2])),
N(A.set(Z,J.xmax,J.ymin,Z[2])),N(A.set(Z,J.xmin,J.ymax,Z[2])),N(A.set(Z,J.xmax,J.ymax,Z[2])))},mesh(J,N,Z){if(J=J.vertexAttributes&&J.vertexAttributes.position)for(let ha=0;ha<J.length;ha+=3)N(A.set(Z,J[ha+0],J[ha+1],J[ha+2]))}};a.create=function(J,N,Z){return p.apply(this,arguments)};a.fromCamera=function(J,N,Z=null){k.isNone(Z)&&(Z=new n);return ja(J,null,N.clone(),Z)};a.headingToRotation=T;a.rotationToHeading=S;a.toCamera=c;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/mat3":function(){define(["exports","./common"],function(a,f){function b(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[4];c[4]=p[5];c[5]=p[6];c[6]=p[8];c[7]=p[9];c[8]=p[10];return c}function m(c,p){c[0]=p[0];c[1]=p[1];c[2]=p[2];c[3]=p[3];c[4]=p[4];c[5]=p[5];c[6]=p[6];c[7]=p[7];c[8]=p[8];return c}function u(c,p,K,X,ja,ia,la,I,l,q){c[0]=p;c[1]=K;c[2]=X;c[3]=ja;c[4]=ia;c[5]=la;c[6]=I;c[7]=l;c[8]=q;return c}function n(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}
function w(c,p){if(c===p){const K=p[1],X=p[2],ja=p[5];c[1]=p[3];c[2]=p[6];c[3]=K;c[5]=p[7];c[6]=X;c[7]=ja}else c[0]=p[0],c[1]=p[3],c[2]=p[6],c[3]=p[1],c[4]=p[4],c[5]=p[7],c[6]=p[2],c[7]=p[5],c[8]=p[8];return c}function e(c,p){const K=p[0],X=p[1],ja=p[2],ia=p[3],la=p[4],I=p[5],l=p[6],q=p[7];p=p[8];const D=p*la-I*q,R=-p*ia+I*l,Y=q*ia-la*l;let z=K*D+X*R+ja*Y;if(!z)return null;z=1/z;c[0]=D*z;c[1]=(-p*X+ja*q)*z;c[2]=(I*X-ja*la)*z;c[3]=R*z;c[4]=(p*K-ja*l)*z;c[5]=(-I*K+ja*ia)*z;c[6]=Y*z;c[7]=(-q*K+X*l)*
z;c[8]=(la*K-X*ia)*z;return c}function r(c,p){const K=p[0],X=p[1],ja=p[2],ia=p[3],la=p[4],I=p[5],l=p[6],q=p[7];p=p[8];c[0]=la*p-I*q;c[1]=ja*q-X*p;c[2]=X*I-ja*la;c[3]=I*l-ia*p;c[4]=K*p-ja*l;c[5]=ja*ia-K*I;c[6]=ia*q-la*l;c[7]=X*l-K*q;c[8]=K*la-X*ia;return c}function d(c){const p=c[3],K=c[4],X=c[5],ja=c[6],ia=c[7],la=c[8];return c[0]*(la*K-X*ia)+c[1]*(-la*p+X*ja)+c[2]*(ia*p-K*ja)}function k(c,p,K){const X=p[0],ja=p[1],ia=p[2],la=p[3],I=p[4],l=p[5],q=p[6],D=p[7];p=p[8];const R=K[0],Y=K[1],z=K[2],H=K[3],
ca=K[4],aa=K[5],ma=K[6],V=K[7];K=K[8];c[0]=R*X+Y*la+z*q;c[1]=R*ja+Y*I+z*D;c[2]=R*ia+Y*l+z*p;c[3]=H*X+ca*la+aa*q;c[4]=H*ja+ca*I+aa*D;c[5]=H*ia+ca*l+aa*p;c[6]=ma*X+V*la+K*q;c[7]=ma*ja+V*I+K*D;c[8]=ma*ia+V*l+K*p;return c}function g(c,p,K){const X=p[0],ja=p[1],ia=p[2],la=p[3],I=p[4],l=p[5],q=p[6],D=p[7];p=p[8];const R=K[0];K=K[1];c[0]=X;c[1]=ja;c[2]=ia;c[3]=la;c[4]=I;c[5]=l;c[6]=R*X+K*la+q;c[7]=R*ja+K*I+D;c[8]=R*ia+K*l+p;return c}function B(c,p,K){const X=p[0],ja=p[1],ia=p[2],la=p[3],I=p[4],l=p[5],q=
p[6],D=p[7];p=p[8];const R=Math.sin(K);K=Math.cos(K);c[0]=K*X+R*la;c[1]=K*ja+R*I;c[2]=K*ia+R*l;c[3]=K*la-R*X;c[4]=K*I-R*ja;c[5]=K*l-R*ia;c[6]=q;c[7]=D;c[8]=p;return c}function C(c,p,K){const X=K[0],ja=K[1];K=K[2];c[0]=X*p[0];c[1]=X*p[1];c[2]=X*p[2];c[3]=ja*p[3];c[4]=ja*p[4];c[5]=ja*p[5];c[6]=K*p[6];c[7]=K*p[7];c[8]=K*p[8];return c}function t(c,p,K){const X=K[0];K=K[1];c[0]=X*p[0];c[1]=X*p[1];c[2]=X*p[2];c[3]=K*p[3];c[4]=K*p[4];c[5]=K*p[5];return c}function A(c,p){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=
1;c[5]=0;c[6]=p[0];c[7]=p[1];c[8]=1;return c}function M(c,p){const K=Math.sin(p);p=Math.cos(p);c[0]=p;c[1]=K;c[2]=0;c[3]=-K;c[4]=p;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function E(c,p){c[0]=p[0];c[1]=0;c[2]=0;c[3]=0;c[4]=p[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c}function O(c,p){c[0]=p[0];c[1]=p[1];c[2]=0;c[3]=p[2];c[4]=p[3];c[5]=0;c[6]=p[4];c[7]=p[5];c[8]=1;return c}function Q(c,p){var K=p[0],X=p[1],ja=p[2];p=p[3];var ia=K+K,la=X+X;const I=ja+ja;K*=ia;const l=X*ia;X*=la;const q=ja*ia,D=ja*la;ja*=I;
ia*=p;la*=p;p*=I;c[0]=1-X-ja;c[3]=l-p;c[6]=q+la;c[1]=l+p;c[4]=1-K-ja;c[7]=D-ia;c[2]=q-la;c[5]=D+ia;c[8]=1-K-X;return c}function U(c,p){const K=p[0],X=p[1],ja=p[2],ia=p[4],la=p[5],I=p[6],l=p[8],q=p[9];p=p[10];const D=p*la-I*q,R=-p*ia+I*l,Y=q*ia-la*l;var z=K*D+X*R+ja*Y;if(!z)return null;z=1/z;c[0]=D*z;c[1]=(-p*X+ja*q)*z;c[2]=(I*X-ja*la)*z;c[3]=R*z;c[4]=(p*K-ja*l)*z;c[5]=(-I*K+ja*ia)*z;c[6]=Y*z;c[7]=(-q*K+X*l)*z;c[8]=(la*K-X*ia)*z;return c}function ea(c,p){const K=p[0],X=p[1],ja=p[2],ia=p[3],la=p[4],
I=p[5],l=p[6],q=p[7];var D=p[8],R=p[9],Y=p[10],z=p[11];const H=p[12],ca=p[13],aa=p[14];p=p[15];const ma=K*I-X*la,V=K*l-ja*la,F=K*q-ia*la,y=X*l-ja*I,x=X*q-ia*I,G=ja*q-ia*l,P=D*ca-R*H,W=D*aa-Y*H;D=D*p-z*H;const na=R*aa-Y*ca;R=R*p-z*ca;Y=Y*p-z*aa;z=ma*Y-V*R+F*na+y*D-x*W+G*P;if(!z)return null;z=1/z;c[0]=(I*Y-l*R+q*na)*z;c[1]=(l*D-la*Y-q*W)*z;c[2]=(la*R-I*D+q*P)*z;c[3]=(ja*R-X*Y-ia*na)*z;c[4]=(K*Y-ja*D+ia*W)*z;c[5]=(X*D-K*R-ia*P)*z;c[6]=(ca*G-aa*x+p*y)*z;c[7]=(aa*F-H*G-p*V)*z;c[8]=(H*x-ca*F+p*ma)*z;return c}
function oa(c,p,K){c[0]=2/p;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/K;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c}function fa(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"}function da(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2)}function ka(c,p,K){c[0]=p[0]+K[0];c[1]=p[1]+K[1];c[2]=p[2]+K[2];c[3]=p[3]+K[3];c[4]=p[4]+K[4];c[5]=p[5]+K[5];c[6]=p[6]+K[6];c[7]=p[7]+K[7];c[8]=p[8]+K[8];return c}function ra(c,p,K){c[0]=
p[0]-K[0];c[1]=p[1]-K[1];c[2]=p[2]-K[2];c[3]=p[3]-K[3];c[4]=p[4]-K[4];c[5]=p[5]-K[5];c[6]=p[6]-K[6];c[7]=p[7]-K[7];c[8]=p[8]-K[8];return c}function h(c,p,K){c[0]=p[0]*K;c[1]=p[1]*K;c[2]=p[2]*K;c[3]=p[3]*K;c[4]=p[4]*K;c[5]=p[5]*K;c[6]=p[6]*K;c[7]=p[7]*K;c[8]=p[8]*K;return c}function v(c,p,K,X){c[0]=p[0]+K[0]*X;c[1]=p[1]+K[1]*X;c[2]=p[2]+K[2]*X;c[3]=p[3]+K[3]*X;c[4]=p[4]+K[4]*X;c[5]=p[5]+K[5]*X;c[6]=p[6]+K[6]*X;c[7]=p[7]+K[7]*X;c[8]=p[8]+K[8]*X;return c}function L(c,p){return c[0]===p[0]&&c[1]===p[1]&&
c[2]===p[2]&&c[3]===p[3]&&c[4]===p[4]&&c[5]===p[5]&&c[6]===p[6]&&c[7]===p[7]&&c[8]===p[8]}function S(c,p){const K=c[0],X=c[1],ja=c[2],ia=c[3],la=c[4],I=c[5],l=c[6],q=c[7];c=c[8];const D=p[0],R=p[1],Y=p[2],z=p[3],H=p[4],ca=p[5],aa=p[6],ma=p[7];p=p[8];const V=f.getEpsilon();return Math.abs(K-D)<=V*Math.max(1,Math.abs(K),Math.abs(D))&&Math.abs(X-R)<=V*Math.max(1,Math.abs(X),Math.abs(R))&&Math.abs(ja-Y)<=V*Math.max(1,Math.abs(ja),Math.abs(Y))&&Math.abs(ia-z)<=V*Math.max(1,Math.abs(ia),Math.abs(z))&&Math.abs(la-
H)<=V*Math.max(1,Math.abs(la),Math.abs(H))&&Math.abs(I-ca)<=V*Math.max(1,Math.abs(I),Math.abs(ca))&&Math.abs(l-aa)<=V*Math.max(1,Math.abs(l),Math.abs(aa))&&Math.abs(q-ma)<=V*Math.max(1,Math.abs(q),Math.abs(ma))&&Math.abs(c-p)<=V*Math.max(1,Math.abs(c),Math.abs(p))}function T(c){const p=f.getEpsilon(),K=c[0],X=c[1],ja=c[2],ia=c[3],la=c[4],I=c[5],l=c[6],q=c[7];c=c[8];return Math.abs(1-(K*K+ia*ia+l*l))<=p&&Math.abs(1-(X*X+la*la+q*q))<=p&&Math.abs(1-(ja*ja+I*I+c*c))<=p}const ba=Object.freeze(Object.defineProperty({__proto__:null,
fromMat4:b,copy:m,set:u,identity:n,transpose:w,invert:e,adjoint:r,determinant:d,multiply:k,translate:g,rotate:B,scale:C,scaleByVec2:t,fromTranslation:A,fromRotation:M,fromScaling:E,fromMat2d:O,fromQuat:Q,normalFromMat4Legacy:U,normalFromMat4:ea,projection:oa,str:fa,frob:da,add:ka,subtract:ra,multiplyScalar:h,multiplyScalarAndAdd:v,exactEquals:L,equals:S,isOrthoNormal:T,mul:k,sub:ra},Symbol.toStringTag,{value:"Module"}));a.add=ka;a.adjoint=r;a.copy=m;a.determinant=d;a.equals=S;a.exactEquals=L;a.frob=
da;a.fromMat2d=O;a.fromMat4=b;a.fromQuat=Q;a.fromRotation=M;a.fromScaling=E;a.fromTranslation=A;a.identity=n;a.invert=e;a.isOrthoNormal=T;a.mat3=ba;a.mul=k;a.multiply=k;a.multiplyScalar=h;a.multiplyScalarAndAdd=v;a.normalFromMat4=ea;a.normalFromMat4Legacy=U;a.projection=oa;a.rotate=B;a.scale=C;a.scaleByVec2=t;a.set=u;a.str=fa;a.sub=ra;a.subtract=ra;a.translate=g;a.transpose=w})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function f(){return[1,0,0,0,1,0,0,0,1]}function b(w){return[w[0],
w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8]]}function m(w,e,r,d,k,g,B,C,t){return[w,e,r,d,k,g,B,C,t]}function u(w,e){return new Float64Array(w,e,9)}const n=Object.freeze(Object.defineProperty({__proto__:null,create:f,clone:b,fromValues:m,createView:u},Symbol.toStringTag,{value:"Module"}));a.clone=b;a.create=f;a.createView=u;a.fromValues=m;a.mat3f64=n})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function f(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function b(e){return[e[0],e[1],e[2],
e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function m(e,r,d,k,g,B,C,t,A,M,E,O,Q,U,ea,oa){return[e,r,d,k,g,B,C,t,A,M,E,O,Q,U,ea,oa]}function u(e,r){return new Float64Array(e,r,16)}const n=f(),w=Object.freeze(Object.defineProperty({__proto__:null,create:f,clone:b,fromValues:m,createView:u,IDENTITY:n},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=n;a.clone=b;a.create=f;a.createView=u;a.fromValues=m;a.mat4f64=w})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),
function(a,f,b,m,u,n,w,e,r,d){function k(){return[u.create(),u.create(),u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}function g(E,O){r.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_TOP_LEFT],E[a.PlaneIndex.LEFT]);r.fromPoints(O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],E[a.PlaneIndex.RIGHT]);r.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],
E[a.PlaneIndex.BOTTOM]);r.fromPoints(O[a.PointIndex.NEAR_TOP_LEFT],O[a.PointIndex.NEAR_TOP_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],E[a.PlaneIndex.TOP]);r.fromPoints(O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_TOP_RIGHT],E[a.PlaneIndex.NEAR]);r.fromPoints(O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_TOP_LEFT],E[a.PlaneIndex.FAR])}function B(E,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(!r.clip(E[Q],O))return!1;return!0}a.PlaneIndex=
void 0;(function(E){E[E.LEFT=0]="LEFT";E[E.RIGHT=1]="RIGHT";E[E.BOTTOM=2]="BOTTOM";E[E.TOP=3]="TOP";E[E.NEAR=4]="NEAR";E[E.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(E){E[E.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";E[E.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";E[E.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";E[E.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";E[E.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";E[E.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";E[E.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";E[E.FAR_TOP_LEFT=
7]="FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const C={bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,
a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]};a.NumPlanes=void 0;(function(E){E[E.NUM=6]="NUM"})(a.NumPlanes||(a.NumPlanes={}));a.NumPoints=void 0;(function(E){E[E.NUM=8]="NUM"})(a.NumPoints||(a.NumPoints={}));const t=[w.fromValues(-1,-1,-1,1),w.fromValues(1,-1,-1,1),w.fromValues(1,1,
-1,1),w.fromValues(-1,1,-1,1),w.fromValues(-1,-1,1,1),w.fromValues(1,-1,1,1),w.fromValues(1,1,1,1),w.fromValues(-1,1,1,1)],A=new f.ObjectStack(e.create),M=k();a.computePlanes=g;a.copy=function(E,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)r.copy(E[Q],O[Q])};a.create=function(E){return E?[r.create(E[0]),r.create(E[1]),r.create(E[2]),r.create(E[3]),r.create(E[4]),r.create(E[5])]:[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]};a.createPoints=k;a.fromMatrix=function(E,O,Q,U=M){E=b.multiply(d.sm4d.get(),
O,E);b.invert(E,E);for(O=0;O<a.NumPoints.NUM;++O){const ea=n.transformMat4(d.sv4d.get(),t[O],E);m.set(U[O],ea[0]/ea[3],ea[1]/ea[3],ea[2]/ea[3])}g(Q,U)};a.intersectClipRay=function(E,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(!r.clipInfinite(E[Q],O))return!1;return!0};a.intersectsLineSegment=function(E,O,Q){return B(E,e.fromLineSegmentAndDirection(O,Q,A.get()))};a.intersectsPoint=function(E,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(0<r.signedDistance(E[Q],O))return!1;return!0};a.intersectsRay=function(E,
O){return B(E,e.fromRay(O,A.get()))};a.intersectsSphere=function(E,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++){const U=E[Q];if(U[0]*O[0]+U[1]*O[1]+U[2]*O[2]+U[3]>=O[3])return!1}return!0};a.planePointIndices=C;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,f){let b=function(){function m(n){this._allocator=n;this._items=[];this._itemsPtr=0;this._grow()}var u=m.prototype;u.get=function(){0===
this._itemsPtr&&f.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]};u._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};u._grow=function(){for(let n=0;n<Math.max(8,Math.min(this._items.length,1024));n++)this._items.push(this._allocator())};return m}();a.ObjectStack=b;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(a,f,b,m,u){function n(k){return k?{ray:m.create(k.ray),c0:k.c0,c1:k.c1}:{ray:m.create(),c0:0,c1:Number.MAX_VALUE}}function w(k,g,B,C=n()){m.copy(k,C.ray);C.c0=g;C.c1=B;return C}function e(k,g,B=n()){const C=b.length(k.vector);m.fromValues(k.origin,g,B.ray);B.c0=0;B.c1=C;return B}function r(k,g,B){return b.add(B,k.ray.origin,b.scale(B,k.ray.direction,g))}const d=
new f.ObjectStack(()=>n());a.copy=function(k,g=n()){return w(k.ray,k.c0,k.c1,g)};a.create=n;a.fromLineSegment=function(k,g=n()){const B=b.normalize(u.sv3d.get(),k.vector);return e(k,B,g)};a.fromLineSegmentAndDirection=e;a.fromRay=function(k,g=n()){m.copy(k,g.ray);g.c0=0;g.c1=Number.MAX_VALUE;return g};a.fromValues=w;a.getAt=r;a.getEnd=function(k,g){return r(k,k.c1,g)};a.getStart=function(k,g){return r(k,k.c0,g)};a.wrap=function(k,g,B){const C=d.get();C.ray=k;C.c0=g;C.c1=B;return C};Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,f,b,m,u,n){function w(k){if(k){var g=u.clone(k.origin);k=u.clone(k.direction);g={origin:g,direction:k}}else g=u.create(),k=u.create(),g={origin:g,direction:k};return g}function e(k,g,B=w()){m.copy(B.origin,k);m.copy(B.direction,g);return B}function r(k,g){k=
m.cross(n.sv3d.get(),m.normalize(n.sv3d.get(),k.direction),m.subtract(n.sv3d.get(),g,k.origin));return m.dot(k,k)}const d=new b.ObjectStack(()=>w());a.closestPoint=function(k,g,B){g=m.dot(k.direction,m.subtract(B,g,k.origin));m.add(B,k.origin,m.scale(B,k.direction,g));return B};a.copy=function(k,g=w()){return e(k.origin,k.direction,g)};a.create=w;a.distance=function(k,g){return Math.sqrt(r(k,g))};a.distance2=r;a.equals=function(k,g){return f.equals(k.origin,g.origin)&&f.equals(k.direction,g.direction)};
a.fromPoints=function(k,g,B=w()){m.copy(B.origin,k);m.subtract(B.direction,g,k);return B};a.fromValues=e;a.wrap=function(k,g){const B=d.get();B.origin=k;B.direction=g;return B};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(a,f){const b=f.VectorStack.createVec2f64(),m=f.VectorStack.createVec3f64(),u=f.VectorStack.createVec4f64(),n=f.VectorStack.createMat3f64(),
w=f.VectorStack.createMat4f64();f=f.VectorStack.createQuatf64();a.sm3d=n;a.sm4d=w;a.sq4d=f;a.sv2d=b;a.sv3d=m;a.sv4d=u;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),function(a,f,b,m,u,n,w,e,r,d){let k=function(){function B(t,
A,M){this._itemByteSize=t;this._itemCreate=A;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(M/this._itemByteSize)}var C=B.prototype;C.get=function(){0===this._itemsPtr&&m.nextTick(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const A=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let M=0;M<this._itemsPerBuffer;++M)this._items.push(this._itemCreate(A,M*this._itemByteSize));this._buffers.push(A)}return this._items[this._itemsPtr++]};
C._reset=function(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};B.createVec2f64=function(t=g){return new B(16,e.createView,t)};B.createVec3f64=function(t=g){return new B(24,r.createView,t)};B.createVec4f64=function(t=g){return new B(32,d.createView,t)};B.createMat3f64=function(t=g){return new B(72,u.createView,t)};B.createMat4f64=function(t=g){return new B(128,
n.createView,t)};B.createQuatf64=function(t=g){return new B(32,w.createView,t)};f._createClass(B,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}]);return B}();const g=4*b.ByteSizeUnit.KILOBYTES;a.VectorStack=k;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(a){function f(u){return 32+u.length}function b(u){if(!u)return 0;if(Array.isArray(u)){var n=
u.length;if(0===n||"number"===typeof u[0])u=32+8*n;else{var w=32;for(let e=0;e<n;e++)w+=m(u[e]);u=w}return u}w=32;for(n in u)u.hasOwnProperty(n)&&(w+=m(u[n]));return w}function m(u){switch(typeof u){case "object":return b(u);case "string":return f(u);case "number":return 16;case "boolean":return 4;default:return 8}}a.ByteSizeUnit=void 0;(function(u){u[u.KILOBYTES=1024]="KILOBYTES";u[u.MEGABYTES=1048576]="MEGABYTES";u[u.GIGABYTES=1073741824]="GIGABYTES"})(a.ByteSizeUnit||(a.ByteSizeUnit={}));a.estimateAttributesObjectSize=
function(u){if(!u)return 0;let n=32;for(const w in u)if(u.hasOwnProperty(w)){const e=u[w];switch(typeof e){case "string":n+=f(e);break;case "number":n+=16;break;case "boolean":n+=4}}return n};a.estimateFixedArraySize=function(u,n){return 32+u.length*n};a.estimateNestedObjectSize=b;a.estimateNumberByteSize=function(u){return 16};a.estimateStringByteSize=f;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quatf64":function(){define(["exports"],
function(a){function f(){return[0,0,0,1]}function b(e){return[e[0],e[1],e[2],e[3]]}function m(e,r,d,k){return[e,r,d,k]}function u(e,r){return new Float64Array(e,r,4)}const n=f(),w=Object.freeze(Object.defineProperty({__proto__:null,create:f,clone:b,fromValues:m,createView:u,IDENTITY:n},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=n;a.clone=b;a.create=f;a.createView=u;a.fromValues=m;a.quatf64=w})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function f(){return[0,0]}function b(A){return[A[0],
A[1]]}function m(A,M){return[A,M]}function u(A){const M=[0,0],E=Math.min(2,A.length);for(let O=0;O<E;++O)M[O]=A[O];return M}function n(A,M){return new Float64Array(A,M,2)}function w(){return[0,0]}function e(){return[1,1]}function r(){return[1,0]}function d(){return[0,1]}const k=[0,0],g=[1,1],B=[1,0],C=[0,1],t=Object.freeze(Object.defineProperty({__proto__:null,create:f,clone:b,fromValues:m,fromArray:u,createView:n,zeros:w,ones:e,unitX:r,unitY:d,ZEROS:k,ONES:g,UNIT_X:B,UNIT_Y:C},Symbol.toStringTag,
{value:"Module"}));a.ONES=g;a.UNIT_X=B;a.UNIT_Y=C;a.ZEROS=k;a.clone=b;a.create=f;a.createView=n;a.fromArray=u;a.fromValues=m;a.ones=e;a.unitX=r;a.unitY=d;a.vec2f64=t;a.zeros=w})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),function(a,f,b,m,u,n,w,e,r){function d(h=fa){return[h[0],h[1],h[2],h[3]]}function k(h,v){return g(v[0],
v[1],v[2],v[3],h)}function g(h,v,L,S,T=d()){T[0]=h;T[1]=v;T[2]=L;T[3]=S;return T}function B(h,v,L){var S=v[0]*v[0]+v[1]*v[1]+v[2]*v[2];S=1E-5<Math.abs(S-1)&&1E-12<S?1/Math.sqrt(S):1;L[0]=v[0]*S;L[1]=v[1]*S;L[2]=v[2]*S;L[3]=-(L[0]*h[0]+L[1]*h[1]+L[2]*h[2]);return L}function C(h,v,L,S=d()){var T=L[0]-v[0],ba=L[1]-v[1],c=L[2]-v[2];L=h[0]-v[0];const p=h[1]-v[1],K=h[2]-v[2];v=ba*K-c*p;c=c*L-T*K;T=T*p-ba*L;ba=v*v+c*c+T*T;ba=1E-5<Math.abs(ba-1)&&1E-12<ba?1/Math.sqrt(ba):1;S[0]=v*ba;S[1]=c*ba;S[2]=T*ba;S[3]=
-(S[0]*h[0]+S[1]*h[1]+S[2]*h[2]);return S}function t(h,v,L,S,T){if(3>h.count)return!1;h.getVec(L,O);let ba=S,c=!1;for(;ba<h.count-1&&!c;)h.getVec(ba,Q),ba++,c=!m.exactEquals(O,Q);if(!c)return!1;ba=Math.max(ba,T);for(c=!1;ba<h.count&&!c;)h.getVec(ba,U),ba++,m.subtract(ea,O,Q),m.normalize(ea,ea),m.subtract(oa,Q,U),m.normalize(oa,oa),c=!m.exactEquals(O,U)&&!m.exactEquals(Q,U)&&.99619469809>Math.abs(m.dot(ea,oa));if(!c)return 0===L&&1===S&&2===T?!1:t(h,v,0,1,2);C(O,Q,U,v);return!0}function A(h,v,L){h=
m.scale(e.sv3d.get(),h,m.dot(h,v));m.subtract(L,v,h);return L}function M(h,v){return m.dot(h,v)+h[3]}function E(h,v,L,S,T){const ba=m.dot(h,L);if(0===ba)return!1;h=-(m.dot(h,v)+h[3])/ba;S&da.CLAMP&&(h=f.clamp(h,0,1));if(!(S&da.INFINITE_MIN)&&0>h||!(S&da.INFINITE_MAX)&&1<h)return!1;m.add(T,v,m.scale(T,L,h));return!0}const O=u.create(),Q=u.create(),U=u.create(),ea=u.create(),oa=u.create(),fa=[0,0,1,0];var da;(function(h){h[h.NONE=0]="NONE";h[h.CLAMP=1]="CLAMP";h[h.INFINITE_MIN=4]="INFINITE_MIN";h[h.INFINITE_MAX=
8]="INFINITE_MAX"})(da||(da={}));const ka=da.INFINITE_MIN|da.INFINITE_MAX,ra=da.INFINITE_MAX;a.UP=fa;a.clip=function(h,v){const L=m.dot(h,v.ray.direction);h=-M(h,v.ray.origin);if(0>h&&0<=L)return!1;if(-1E-6<L&&1E-6>L)return 0<h;if((0>h||0>L)&&!(0>h&&0>L))return!0;h/=L;0<L?h<v.c1&&(v.c1=h):h>v.c0&&(v.c0=h);return v.c0<=v.c1};a.clipInfinite=function(h,v){const L=m.dot(h,v.ray.direction);h=-M(h,v.ray.origin);if(-1E-6<L&&1E-6>L)return 0<h;h/=L;0<L?h<v.c1&&(v.c1=h):h>v.c0&&(v.c0=h);return v.c0<=v.c1};
a.copy=k;a.create=d;a.distance=function(h,v){return Math.abs(M(h,v))};a.fromManyPoints=function(h,v){return t(h,v,0,1,2)};a.fromManyPointsSampleAt=t;a.fromNormalAndOffset=function(h,v,L){m.copy(L,h);L[3]=v;return L};a.fromPoints=C;a.fromPositionAndNormal=B;a.fromValues=g;a.fromVectorsAndPoint=function(h,v,L,S){m.cross(U,v,h);return B(L,U,S)};a.intersectLine=function(h,v,L,S){L=m.subtract(e.sv3d.get(),L,v);return E(h,v,L,ka,S)};a.intersectLineSegment=function(h,v,L){return E(h,v.origin,v.vector,da.NONE,
L)};a.intersectLineSegmentClamp=function(h,v,L){return E(h,v.origin,v.vector,da.CLAMP,L)};a.intersectRay=function(h,v,L){return b.isSome(v)?E(h,v.origin,v.direction,ra,L):!1};a.isPointInside=function(h,v){return 0<=M(h,v)};a.isPointOutside=function(h,v){return 0>M(h,v)};a.isSphereFullyInside=function(h,v){return 0<=M(h,n.getCenter(v))-v[3]};a.isSphereFullyOutside=function(h,v){return 0>M(h,n.getCenter(v))+v[3]};a.negate=function(h,v){v[0]=-h[0];v[1]=-h[1];v[2]=-h[2];v[3]=-h[3];return v};a.normal=
function(h){return h};a.projectPoint=function(h,v,L){const S=m.scale(e.sv3d.get(),h,-h[3]);v=m.subtract(e.sv3d.get(),v,S);h=A(h,v,e.sv3d.get());m.add(L,h,S);return L};a.projectPointLocal=function(h,v,L,S){var T=e.sv3d.get(),ba=e.sv3d.get();r.tangentFrame(h,T,ba);v=m.subtract(e.sv3d.get(),L,v);T=w.projectPointSignedLength(T,v);ba=w.projectPointSignedLength(ba,v);h=w.projectPointSignedLength(h,v);return m.set(S,T,ba,h)};a.projectVector=A;a.setOffsetFromPoint=function(h,v,L){v!==h&&k(h,v);h[3]=-m.dot(h,
L);return h};a.signedDistance=M;a.wrap=function(h=fa[0],v=fa[1],L=fa[2],S=fa[3]){return g(h,v,L,S,e.sv4d.get())};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,f,b,m,u,n,w,e,r,
d,k,g,B,C){function t(){return d.create()}function A(I,l=t()){return r.copy(l,I)}function M(I,l){return d.fromValues(I[0],I[1],I[2],l)}function E(I){return I}function O(I){I[0]=I[1]=I[2]=I[3]=0}function Q(I,l){I[0]=I[1]=I[2]=0;I[3]=l;return I}function U(I){return I[3]}function ea(I){return I}function oa(I,l,q,D){return d.fromValues(I,l,q,D)}function fa(I,l,q){I!==q&&w.copy(q,I);q[3]=I[3]+l;return q}function da(I,l,q){b.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return I===q?q:A(I,q)}function ka(I,l,q){if(u.isNone(l))return!1;const {origin:D,direction:R}=l;var Y=ja;Y[0]=D[0]-I[0];Y[1]=D[1]-I[1];Y[2]=D[2]-I[2];l=R[0]*R[0]+R[1]*R[1]+R[2]*R[2];if(0===l)return!1;const z=2*(R[0]*Y[0]+R[1]*Y[1]+R[2]*Y[2]);I=z*z-4*l*(Y[0]*Y[0]+Y[1]*Y[1]+Y[2]*Y[2]-I[3]*I[3]);if(0>I)return!1;Y=Math.sqrt(I);I=(-z-Y)/(2*l);l=(-z+Y)/(2*l);if(0>I||l<I&&0<l)I=l;if(0>I)return!1;q&&(q[0]=D[0]+R[0]*I,q[1]=D[1]+R[1]*I,q[2]=D[2]+R[2]*I);return!0}function ra(I,l){return ka(I,l,null)}function h(I,
l,q){if(ka(I,l,q))return q;I=v(I,l,C.sv3d.get());w.add(q,l.origin,w.scale(C.sv3d.get(),l.direction,w.distance(l.origin,I)/w.length(l.direction)));return q}function v(I,l,q){const D=C.sv3d.get(),R=C.sm4d.get();w.cross(D,l.origin,l.direction);const Y=I[3];w.cross(q,D,l.origin);w.scale(q,q,1/w.length(q)*Y);I=ba(I,l.origin);l=B.angle(l.origin,q);n.fromRotation(R,l+I,D);w.transformMat4(q,q,R);return q}function L(I,l,q){if(ka(I,l,q))return q;g.closestPoint(l,I,q);return S(I,q,q)}function S(I,l,q){l=w.subtract(C.sv3d.get(),
l,I);l=w.scale(C.sv3d.get(),l,I[3]/w.length(l));return w.add(q,l,I)}function T(I,l){l=w.subtract(C.sv3d.get(),l,I);l=w.squaredLength(l);return Math.sqrt(Math.abs(l-I[3]*I[3]))}function ba(I,l){l=w.subtract(C.sv3d.get(),l,I);l=w.length(l);I=I[3];return m.acosClamped(I/(I+Math.abs(I-l)))}function c(I,l,q,D){I=w.subtract(ia,l,I);switch(q){case k.Axis.X:return q=m.cartesianToSpherical(I,ia)[2],w.set(D,-Math.sin(q),Math.cos(q),0);case k.Axis.Y:return I=m.cartesianToSpherical(I,ia),q=I[1],I=I[2],l=Math.sin(q),
w.set(D,-l*Math.cos(I),-l*Math.sin(I),Math.cos(q));case k.Axis.Z:return w.normalize(D,I)}}function p(I,l){l=w.subtract(la,l,I);return w.length(l)-I[3]}function K(I,l,q,D){const R=p(I,l);I=c(I,l,k.Axis.Z,la);q=w.scale(la,I,q-R);return w.add(D,l,q)}function X(I,l){l=w.squaredDistance(I,l);I=I[3];return l<=I*I}const ja=e.create(),ia=e.create(),la=e.create();f=t();e=Object.freeze(Object.defineProperty({__proto__:null,create:t,copy:A,fromCenterAndRadius:M,wrap:E,clear:O,fromRadius:Q,getRadius:U,getCenter:ea,
fromValues:oa,elevate:fa,setExtent:da,intersectRay:ka,intersectsRay:ra,intersectRayClosestSilhouette:h,closestPointOnSilhouette:v,closestPoint:L,projectPoint:S,distanceToSilhouette:T,angleToSilhouette:ba,axisAt:c,altitudeAt:p,setAltitudeAt:K,containsPoint:X,tmpSphere:f},Symbol.toStringTag,{value:"Module"}));a.altitudeAt=p;a.angleToSilhouette=ba;a.axisAt=c;a.clear=O;a.closestPoint=L;a.closestPointOnSilhouette=v;a.containsPoint=X;a.copy=A;a.create=t;a.distanceToSilhouette=T;a.elevate=fa;a.fromCenterAndRadius=
M;a.fromRadius=Q;a.fromValues=oa;a.getCenter=ea;a.getRadius=U;a.intersectRay=ka;a.intersectRayClosestSilhouette=h;a.intersectsRay=ra;a.projectPoint=S;a.setAltitudeAt=K;a.setExtent=da;a.sphere=e;a.tmpSphere=f;a.wrap=E})},"esri/geometry/support/Axis":function(){define(["exports"],function(a){a.Axis=void 0;var f=a.Axis||(a.Axis={});f[f.X=0]="X";f[f.Y=1]="Y";f[f.Z=2]="Z";Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/vector":function(){define(["exports",
"../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(a,f,b,m){const u=m.create(),n=m.create();a.angle=function(w,e){w=b.dot(w,e)/(b.length(w)*b.length(e));return-f.acosClamped(w)};a.angleAroundAxis=function(w,e,r){b.normalize(u,w);b.normalize(n,e);w=b.dot(u,n);w=f.acosClamped(w);e=b.cross(u,u,n);return 0>b.dot(e,r)?2*Math.PI-w:w};a.projectPoint=function(w,e,r){e=b.dot(w,e)/b.dot(w,w);return b.scale(r,w,e)};a.projectPointSignedLength=function(w,e){return b.dot(w,e)/b.length(w)};
Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],function(a,f){function b(m,u){u=f.getMetersPerUnitForSR(u);return m/(u*f.inchesPerMeter*96)}a.getExtentForScale=function(m,u){const n=m.extent;m=m.width-(m.padding?m.padding.left+m.padding.right:0);u=b(u,n.spatialReference);return n.clone().expand(u*m/n.width)};a.getResolutionForScale=b;a.getResolutionInMetersForScale=function(m){return m/
(96*f.inchesPerMeter)};a.getScale=function(m,u){u=u||m.extent;m=m.width;const n=f.getMetersPerUnitForSR(u&&u.spatialReference);return u&&m?u.width/m*n*f.inchesPerMeter*96:0};a.getScaleForResolution=function(m,u){u=f.getMetersPerUnitForSR(u);return m*u*f.inchesPerMeter*96};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/camera/intersectionUtils":function(){define("exports ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/projectionEllipsoid ../../../geometry/support/aaBoundingRect ../webgl-engine/lib/Intersector".split(" "),
function(a,f,b,m,u,n,w){function e(t,A){return t.elevationProvider?f.unwrapOr(t.elevationProvider.getElevation(A[0],A[1],A[2],t.renderCoordsHelper.spatialReference,"ground"),0):0}function r(t,A,M){if(!t.state.isGlobal)return!1;const E=e(t,A);({far:t}=t.stateManager.constraintsManager.nearFarHeuristic.compute(A,M,t.renderDataExtent,E,C));t*=t;return b.squaredDistance(A,M)>t}const d={},k=m.create(),g=m.create(),B=m.create(),C={near:0,far:0};a.cameraOnContentAlongViewDirection=function(t,A,M,E){const O=
t.state.camera.clone();A&&(O.eye=A,O.center=M,O.up=E);A=O.ray;M=d[t.viewingMode];M||(M=w.newIntersector(t.state.viewingMode),M.options.backfacesTerrain=!t.state.isGlobal,M.options.invisibleTerrain=!0,d[t.viewingMode]=M);({isGlobal:E}=t.state);t.sceneIntersectionHelper.intersectRay(A,M,g)&&!r(t,A.origin,g)?A=!0:!t.renderCoordsHelper.intersectManifold(A,0,g)||r(t,A.origin,g)?E?(M=u.getReferenceEllipsoid(t.spatialReference).radius,M=b.dot(A.origin,A.origin)-M*M,b.scale(g,A.direction,(0<M?Math.sqrt(M)/
3:1)/b.length(A.direction)),b.add(g,g,A.origin),A=!0):A=!1:A=!0;A||b.copy(g,O.center);M=t.state.constraints;E=M.minimumPoiDistance;b.squaredDistance(O.eye,g)<E&&(A=M.collision.enabled,b.copy(B,O.viewForward),b.scale(B,B,E),A?O.eye=b.subtract(k,g,B):b.add(g,O.eye,B),t=t.renderCoordsHelper,E=t.getAltitude(O.eye),M=M.collision.elevationMargin,A&&E<M&&(b.subtract(B,g,O.eye),O.eye=t.setAltitude(k,M,O.eye),b.add(g,O.eye,B)));O.center=g;return O};a.eyeWithinExtent=function(t,A,M,E){return f.isSome(t.renderCoordsHelper.fromRenderCoords(A.eye,
k,E))&&n.containsPoint(M,k)};a.surfaceElevationBelowRenderLocation=e;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Intersector":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/ray ../../../ViewingMode ./IntersectorInterfaces ./intersectorUtils ./verticalOffsetUtils ../materials/renderers/utils".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B,C,t){let A=function(){function ea(fa){this.options=new g.IntersectorOptions;this._results=new M;this.transform=new C.IntersectorTransform;this.tolerance=1E-5;this.verticalOffset=null;this._ray=d.create();this._rayEnd=w.create();this._rayBeginTransformed=w.create();this._rayEndTransformed=w.create();this.viewingMode=null==fa?k.ViewingMode.Global:fa}var oa=ea.prototype;oa.reset=function(fa,da,ka){this.resetWithRay(d.fromPoints(fa,da,this._ray),ka)};oa.resetWithRay=
function(fa,da){this.camera=da;fa!==this._ray&&d.copy(fa,this._ray);0!==this.options.verticalOffset?this.viewingMode===k.ViewingMode.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null;n.add(this._rayEnd,this._ray.origin,this._ray.direction);this._results.init(this._ray)};oa.intersect=function(fa=null,da,ka,ra,h){this.point=da;this.filterPredicate=ra;this.tolerance=null==ka?1E-5:ka;da=C.getVerticalOffsetObject3D(this.verticalOffset);
if(b.isSome(fa)&&0<fa.length){const v=h?L=>{h(L)&&this.intersectObject(L)}:L=>{this.intersectObject(L)};for(const L of fa)fa=L.getSpatialQueryAccelerator&&L.getSpatialQueryAccelerator(),b.isSome(fa)?(b.isSome(da)?fa.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,v,da):fa.forEachAlongRay(this._ray.origin,this._ray.direction,v),this.options.selectionMode&&this.options.hud&&fa.forEachDegenerateObject(v)):L.objects.forAll(S=>v(S))}this.sortResults()};oa.intersectObject=function(fa){const da=
fa.geometryRecords;if(da){var ka=fa.transformation,ra=C.getVerticalOffsetObject3D(this.verticalOffset);for(const h of da){const {geometry:v,material:L,instanceParameters:S}=h;if(t.isInstanceHidden(S))continue;const T=v.id;this.transform.setAndInvalidateLazyTransforms(ka,h.getShaderTransformation());n.transformMat4(this._rayBeginTransformed,this.rayBegin,this.transform.inverse);n.transformMat4(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const ba=this.transform.transform;b.isSome(ra)&&
(ra.objectTransform=this.transform);L.intersect(v,S,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,(c,p,K,X,ja,ia)=>{if(0<=c&&(!b.isSome(this.filterPredicate)||this.filterPredicate(this._ray.origin,this._rayEnd,c))){var la=X?this._results.hud:this._results,I=X?l=>{const q={object:fa,geometryId:T,triangleNr:K,center:b.isSome(ia)?[ia[0],ia[1],ia[2]]:null};l.set(g.IntersectorType.HUD,q,c,p,u.IDENTITY,ja)}:l=>l.set(g.IntersectorType.OBJECT,{object:fa,geometryId:T,triangleNr:K},
c,p,ba,ja);(null==la.min.drapedLayerOrder||ja>=la.min.drapedLayerOrder)&&(null==la.min.dist||c<la.min.dist)&&I(la.min);this.options.store!==g.StoreResults.MIN&&(null==la.max.drapedLayerOrder||ja<la.max.drapedLayerOrder)&&(null==la.max.dist||c>la.max.dist)&&I(la.max);this.options.store===g.StoreResults.ALL&&(X?(X=new O(this._ray),I(X),this._results.hud.all.push(X)):(X=new E(this._ray),I(X),this._results.all.push(X)))}},h.shaderTransformation)}}};oa.sortResults=function(fa=this._results.all){fa.sort((da,
ka)=>da.dist!==ka.dist?b.unwrapOr(da.dist,0)-b.unwrapOr(ka.dist,0):da.drapedLayerOrder!==ka.drapedLayerOrder?b.unwrapOr(da.drapedLayerOrder,Number.MAX_VALUE)-b.unwrapOr(ka.drapedLayerOrder,Number.MAX_VALUE):b.unwrapOr(ka.drapedLayerGraphicOrder,Number.MIN_VALUE)-b.unwrapOr(da.drapedLayerGraphicOrder,Number.MIN_VALUE))};f._createClass(ea,[{key:"results",get:function(){return this._results}},{key:"ray",get:function(){return this._ray}},{key:"rayBegin",get:function(){return this._ray.origin}},{key:"rayEnd",
get:function(){return this._rayEnd}}]);return ea}(),M=function(){function ea(){this.min=new E(d.create());this.max=new E(d.create());this.hud={min:new O(d.create()),max:new O(d.create()),all:[]};this.ground=new E(d.create());this.all=[]}ea.prototype.init=function(oa){this.min.init(oa);this.max.init(oa);this.ground.init(oa);this.all.length=0;this.hud.min.init(oa);this.hud.max.init(oa);this.hud.all.length=0};return ea}(),E=function(){function ea(fa){this.intersector=g.IntersectorType.OBJECT;this.normal=
w.create();this.transformation=u.create();this._ray=d.create();this.init(fa)}var oa=ea.prototype;oa.getIntersectionPoint=function(fa){if(!B.isValidIntersectorResult(this))return!1;n.scale(Q,this.ray.direction,this.dist);n.add(fa,this.ray.origin,Q);return!0};oa.getTransformedNormal=function(fa){n.copy(U,this.normal);U[3]=0;e.transformMat4(U,U,this.transformation);n.copy(fa,U);return n.normalize(fa,fa)};oa.init=function(fa){this.drapedLayerGraphicOrder=this.drapedLayerOrder=this.target=this.dist=null;
this.intersector=g.IntersectorType.OBJECT;d.copy(fa,this._ray)};oa.set=function(fa,da,ka,ra,h,v,L){this.intersector=fa;this.dist=ka;n.copy(this.normal,b.unwrapOr(ra,w.UNIT_Z));m.copy(this.transformation,b.unwrapOr(h,u.IDENTITY));this.target=da;this.drapedLayerOrder=v;this.drapedLayerGraphicOrder=L};oa.copy=function(fa){d.copy(fa.ray,this._ray);this.intersector=fa.intersector;this.dist=fa.dist;this.target=fa.target;this.drapedLayerOrder=fa.drapedLayerOrder;this.drapedLayerGraphicOrder=fa.drapedLayerGraphicOrder;
n.copy(this.normal,fa.normal);m.copy(this.transformation,fa.transformation)};f._createClass(ea,[{key:"ray",get:function(){return this._ray}},{key:"distanceInRenderSpace",get:function(){return b.isSome(this.dist)?(n.scale(Q,this.ray.direction,this.dist),n.length(Q)):null}}]);return ea}(),O=function(ea){function oa(){var fa=ea.apply(this,arguments)||this;fa.intersector=g.IntersectorType.HUD;return fa}f._inheritsLoose(oa,ea);return oa}(E);const Q=w.create(),U=r.create();a.DEFAULT_TOLERANCE=1E-5;a.newIntersector=
function(ea){return new A(ea)};a.newIntersectorResult=function(ea){return new E(ea)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/IntersectorInterfaces":function(){define(["exports"],function(a){a.IntersectorType=void 0;(function(f){f[f.OBJECT=0]="OBJECT";f[f.HUD=1]="HUD";f[f.TERRAIN=2]="TERRAIN";f[f.OVERLAY=3]="OVERLAY";f[f.I3S=4]="I3S";f[f.PCL=5]="PCL";f[f.LOD=6]="LOD";f[f.VOXEL=7]="VOXEL"})(a.IntersectorType||(a.IntersectorType=
{}));a.StoreResults=void 0;(function(f){f[f.MIN=0]="MIN";f[f.MINMAX=1]="MINMAX";f[f.ALL=2]="ALL"})(a.StoreResults||(a.StoreResults={}));a.IntersectorOptions=function(){this.verticalOffset=0;this.selectionMode=!1;this.selectOpaqueTerrainOnly=this.hud=!0;this.invisibleTerrain=!1;this.backfacesTerrain=!0;this.isFiltered=!1;this.store=a.StoreResults.ALL};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/intersectorUtils":function(){define("exports ../../../../core/maybe ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/boundedPlane ./IntersectorInterfaces".split(" "),
function(a,f,b,m,u,n){function w(r){return f.isSome(r)&&f.isSome(r.dist)}const e=m.create();a.isHudIntersectorResult=function(r){return w(r)&&r.intersector===n.IntersectorType.HUD&&!!r.target&&f.isSome(r.target.center)};a.isObjectIntersectorResult=function(r){return w(r)&&r.intersector===n.IntersectorType.OBJECT&&!!r.target};a.isValidIntersectorResult=w;a.sliceFilterPredicate=function(r){return(d,k,g)=>{b.lerp(e,d,k,g);return!u.extrusionContainsPoint(r,e)}};Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/ObjectStack ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/support/Axis ../geometry/support/lineSegment ../geometry/support/plane ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),function(a,f,b,m,u,n,w,e,r,d,k,g,B,C,t){function A(x=z){return{plane:g.create(x.plane),origin:r.clone(x.origin),basis1:r.clone(x.basis1),
basis2:r.clone(x.basis2)}}function M(x,G,P){const W=ma.get();W.origin=x;W.basis1=G;W.basis2=P;W.plane=g.wrap(0,0,0,0);U(W);return W}function E(x,G=A()){return Q(x.origin,x.basis1,x.basis2,G)}function O(x,G){e.copy(G.origin,x.origin);e.copy(G.basis1,x.basis1);e.copy(G.basis2,x.basis2);g.copy(G.plane,x.plane)}function Q(x,G,P,W=A()){e.copy(W.origin,x);e.copy(W.basis1,G);e.copy(W.basis2,P);U(W);1E-6<Math.abs(e.dot(W.basis1,W.basis2)/(e.length(W.basis1)*e.length(W.basis2)))&&Y.warn("fromValues()","Provided basis vectors are not perpendicular");
1E-6<Math.abs(e.dot(W.basis1,I(W)))&&Y.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-e.dot(I(W),W.origin)-W.plane[3])&&Y.warn("fromValues()","Plane offset is not consistent with plane origin");return W}function U(x){g.fromVectorsAndPoint(x.basis2,x.basis1,x.origin,x.plane)}function ea(x,G,P){x!==P&&E(x,P);x=e.scale(t.sv3d.get(),I(x),G);e.add(P.origin,P.origin,x);P.plane[3]-=G;return P}function oa(x,G,P){fa(G,P);ea(P,K(x,x.origin),P);return P}function fa(x,
G=A()){const P=(x[2]-x[0])/2,W=(x[3]-x[1])/2;e.set(G.origin,x[0]+P,x[1]+W,0);e.set(G.basis1,P,0,0);e.set(G.basis2,0,W,0);g.fromValues(0,0,1,0,G.plane);return G}function da(x,G,P){return g.intersectRay(x.plane,G,P)?l(x,P):!1}function ka(x,G,P){if(da(x,G,P))return P;x=ra(x,G,t.sv3d.get());e.add(P,G.origin,e.scale(t.sv3d.get(),G.direction,e.distance(G.origin,x)/e.length(G.direction)));return P}function ra(x,G,P){const W=H.get();var na=H.get();R(x,G,W,na);na=Number.POSITIVE_INFINITY;for(const ua of V){var ta=
D(x,ua,ca.get());const wa=t.sv3d.get();g.intersectLineSegment(W,ta,wa)&&(ta=e.direction(t.sv3d.get(),G.origin,wa),ta=Math.abs(m.acosClamped(e.dot(G.direction,ta))),ta<na&&(na=ta,e.copy(P,wa)))}return na===Number.POSITIVE_INFINITY?h(x,G,P):P}function h(x,G,P){if(da(x,G,P))return P;const W=H.get(),na=H.get();R(x,G,W,na);let ta=Number.POSITIVE_INFINITY;for(const wa of V){var ua=D(x,wa,ca.get());const Aa=t.sv3d.get();g.intersectLineSegmentClamp(W,ua,Aa)&&(ua=B.distance2(G,Aa),g.isPointInside(na,Aa)&&
ua<ta&&(ta=ua,e.copy(P,Aa)))}S(x,G.origin)<ta&&v(x,G.origin,P);return P}function v(x,G,P){var W=g.projectPoint(x.plane,G,t.sv3d.get());G=k.projectPointClamp(q(x,x.basis1),W,-1,1,t.sv3d.get());W=k.projectPointClamp(q(x,x.basis2),W,-1,1,t.sv3d.get());e.subtract(P,e.add(t.sv3d.get(),G,W),x.origin);return P}function L(x,G,P){const {origin:W,basis1:na,basis2:ta}=x,ua=e.subtract(t.sv3d.get(),G,W);G=C.projectPointSignedLength(na,ua);const wa=C.projectPointSignedLength(ta,ua);x=C.projectPointSignedLength(I(x),
ua);return e.set(P,G,wa,x)}function S(x,G){G=L(x,G,t.sv3d.get());const {basis1:P,basis2:W}=x;x=e.length(P);var na=e.length(W);x=Math.max(Math.abs(G[0])-x,0);na=Math.max(Math.abs(G[1])-na,0);G=G[2];return x*x+na*na+G*G}function T(x,G){return Math.sqrt(S(x,G))}function ba(x,G){let P=Number.NEGATIVE_INFINITY;for(const na of V){var W=D(x,na,ca.get());W=k.distance2(W,G);W>P&&(P=W)}return Math.sqrt(P)}function c(x,G){return g.isPointInside(x.plane,G)&&l(x,G)}function p(x,G,P,W){switch(P){case d.Axis.X:e.copy(W,
x.basis1);e.normalize(W,W);break;case d.Axis.Y:e.copy(W,x.basis2);e.normalize(W,W);break;case d.Axis.Z:e.copy(W,I(x))}return W}function K(x,G){const P=-x.plane[3];return C.projectPointSignedLength(I(x),G)-P}function X(x,G,P,W){const na=K(x,G);x=e.scale(aa,I(x),P-na);e.add(W,G,x);return W}function ja(x,G){return e.exactEquals(x.basis1,G.basis1)&&e.exactEquals(x.basis2,G.basis2)&&e.exactEquals(x.origin,G.origin)}function ia(x,G,P){x!==P&&E(x,P);n.invert(F,G);n.transpose(F,F);e.transformMat4(P.basis1,
x.basis1,F);e.transformMat4(P.basis2,x.basis2,F);e.transformMat4(g.normal(P.plane),g.normal(x.plane),F);e.transformMat4(P.origin,x.origin,G);g.setOffsetFromPoint(P.plane,P.plane,P.origin);return P}function la(x,G,P,W){x!==W&&E(x,W);n.fromRotation(y,G,P);e.transformMat4(W.basis1,x.basis1,y);e.transformMat4(W.basis2,x.basis2,y);U(W);return W}function I(x){return g.normal(x.plane)}function l(x,G){const P=e.subtract(t.sv3d.get(),G,x.origin);G=e.squaredLength(x.basis1);const W=e.squaredLength(x.basis2),
na=e.dot(x.basis1,P);x=e.dot(x.basis2,P);return 0>-na-G&&0>na-G&&0>-x-W&&0>x-W}function q(x,G){const P=ca.get();e.copy(P.origin,x.origin);e.copy(P.vector,G);return P}function D(x,G,P){const {basis1:W,basis2:na,origin:ta}=x;x=e.scale(t.sv3d.get(),W,G.origin[0]);const ua=e.scale(t.sv3d.get(),na,G.origin[1]);e.add(P.origin,x,ua);e.add(P.origin,P.origin,ta);x=e.scale(t.sv3d.get(),W,G.direction[0]);G=e.scale(t.sv3d.get(),na,G.direction[1]);e.scale(P.vector,e.add(x,x,G),2);return P}function R(x,G,P,W){x=
I(x);g.fromVectorsAndPoint(x,G.direction,G.origin,P);g.fromVectorsAndPoint(g.normal(P),x,G.origin,W)}const Y=b.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");f=function(){this.plane=g.create();this.origin=r.create();this.basis1=r.create();this.basis2=r.create()};const z={plane:g.create(),origin:r.fromValues(0,0,0),basis1:r.fromValues(1,0,0),basis2:r.fromValues(0,1,0)},H=new u.ObjectStack(g.create),ca=new u.ObjectStack(k.create),aa=r.create(),ma=new u.ObjectStack(()=>A()),V=[{origin:[-1,
-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],F=w.create(),y=w.create();u=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:f,create:A,wrap:M,copy:E,copyWithoutVerify:O,fromValues:Q,updateUnboundedPlane:U,elevate:ea,setExtent:oa,fromAABoundingRect:fa,intersectRay:da,intersectRayClosestSilhouette:ka,closestPointOnSilhouette:ra,closestPoint:h,projectPoint:v,projectPointLocal:L,distance2:S,distance:T,distanceToSilhouette:ba,
extrusionContainsPoint:c,axisAt:p,altitudeAt:K,setAltitudeAt:X,equals:ja,transform:ia,rotate:la,normal:I,UP:z},Symbol.toStringTag,{value:"Module"}));a.BoundedPlaneClass=f;a.UP=z;a.altitudeAt=K;a.axisAt=p;a.boundedPlane=u;a.closestPoint=h;a.closestPointOnSilhouette=ra;a.copy=E;a.copyWithoutVerify=O;a.create=A;a.distance=T;a.distance2=S;a.distanceToSilhouette=ba;a.elevate=ea;a.equals=ja;a.extrusionContainsPoint=c;a.fromAABoundingRect=fa;a.fromValues=Q;a.intersectRay=da;a.intersectRayClosestSilhouette=
ka;a.normal=I;a.projectPoint=v;a.projectPointLocal=L;a.rotate=la;a.setAltitudeAt=X;a.setExtent=oa;a.transform=ia;a.updateUnboundedPlane=U;a.wrap=M})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,f,b,m,u,n){function w(t){return t?{origin:u.clone(t.origin),vector:u.clone(t.vector)}:{origin:u.create(),vector:u.create()}}function e(t,A){const M=C.get();M.origin=t;
M.vector=A;return M}function r(t,A,M=w()){m.copy(M.origin,t);m.copy(M.vector,A);return M}function d(t,A){A=m.subtract(n.sv3d.get(),A,t.origin);var M=m.dot(t.vector,A);const E=m.dot(t.vector,t.vector);M=f.clamp(M/E,0,1);t=m.subtract(n.sv3d.get(),m.scale(n.sv3d.get(),t.vector,M),A);return m.dot(t,t)}function k(t,A,M,E,O){const {vector:Q,origin:U}=t;A=m.subtract(n.sv3d.get(),A,U);A=m.dot(Q,A)/m.squaredLength(Q);m.scale(O,Q,f.clamp(A,M,E));return m.add(O,O,t.origin)}function g(t,A,M,E){const O=t.origin;
var Q=m.add(n.sv3d.get(),O,t.vector);t=A.origin;var U=m.add(n.sv3d.get(),t,A.vector),ea=n.sv3d.get();A=n.sv3d.get();ea[0]=O[0]-t[0];ea[1]=O[1]-t[1];ea[2]=O[2]-t[2];A[0]=U[0]-t[0];A[1]=U[1]-t[1];A[2]=U[2]-t[2];if(1E-6>Math.abs(A[0])&&1E-6>Math.abs(A[1])&&1E-6>Math.abs(A[2]))return!1;U=n.sv3d.get();U[0]=Q[0]-O[0];U[1]=Q[1]-O[1];U[2]=Q[2]-O[2];if(1E-6>Math.abs(U[0])&&1E-6>Math.abs(U[1])&&1E-6>Math.abs(U[2]))return!1;Q=ea[0]*A[0]+ea[1]*A[1]+ea[2]*A[2];var oa=A[0]*U[0]+A[1]*U[1]+A[2]*U[2];const fa=A[0]*
A[0]+A[1]*A[1]+A[2]*A[2],da=(U[0]*U[0]+U[1]*U[1]+U[2]*U[2])*fa-oa*oa;if(1E-6>Math.abs(da))return!1;ea=(Q*oa-(ea[0]*U[0]+ea[1]*U[1]+ea[2]*U[2])*fa)/da;Q=(Q+oa*ea)/fa;M&&(ea=f.clamp(ea,0,1),Q=f.clamp(Q,0,1));M=n.sv3d.get();oa=n.sv3d.get();M[0]=O[0]+ea*U[0];M[1]=O[1]+ea*U[1];M[2]=O[2]+ea*U[2];oa[0]=t[0]+Q*A[0];oa[1]=t[1]+Q*A[1];oa[2]=t[2]+Q*A[2];E.tA=ea;E.tB=Q;E.pA=M;E.pB=oa;E.distance2=m.squaredDistance(M,oa);return!0}const B={tA:0,tB:0,pA:u.create(),pB:u.create(),distance2:0},C=new b.ObjectStack(()=>
w());a.closestLineSegmentDistance2=function(t,A){return g(t,A,!0,B)?B.distance2:null};a.closestLineSegmentPoint=function(t,A,M){return g(t,A,!0,B)?(m.copy(M,B.pA),!0):!1};a.closestRayDistance2=function(t,A){if(g(t,e(A.origin,A.direction),!1,B)){const {tA:M,pB:E,distance2:O}=B;if(0<=M&&1>=M)return O;if(0>M)return m.squaredDistance(t.origin,E);if(1<M)return m.squaredDistance(m.add(n.sv3d.get(),t.origin,t.vector),E)}return null};a.copy=function(t,A=w()){return r(t.origin,t.vector,A)};a.create=w;a.distance=
function(t,A){return Math.sqrt(d(t,A))};a.distance2=d;a.fromPoints=function(t,A,M=w()){m.copy(M.origin,t);m.subtract(M.vector,A,t);return M};a.fromValues=r;a.pointAt=function(t,A,M){return m.add(M,t.origin,m.scale(M,t.vector,A))};a.projectPoint=function(t,A,M){return k(t,A,0,1,M)};a.projectPointClamp=k;a.wrap=e;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/verticalOffsetUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/quat ../../../../chunks/quatf64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../../../chunks/vec3f64 ../../../../chunks/sphere".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B){let C=function(){function ka(){this._transform=w.create();this._transformInverse=new t({value:this._transform},n.invert,w.create);this._transformInverseTranspose=new t(this._transformInverse,n.transpose,w.create);this._transformTranspose=new t({value:this._transform},n.transpose,w.create);this._transformInverseRotation=new t({value:this._transform},m.normalFromMat4Legacy,u.create)}var ra=ka.prototype;ra._invalidateLazyTransforms=function(){this._transformInverse.invalidate();
this._transformInverseTranspose.invalidate();this._transformTranspose.invalidate();this._transformInverseRotation.invalidate()};ra.setTransformMatrix=function(h){n.copy(this._transform,h)};ra.multiplyTransform=function(h){n.multiply(this._transform,this._transform,h)};ra.set=function(h){n.copy(this._transform,h);this._invalidateLazyTransforms()};ra.setAndInvalidateLazyTransforms=function(h,v){this.setTransformMatrix(h);this.multiplyTransform(v);this._invalidateLazyTransforms()};f._createClass(ka,
[{key:"transform",get:function(){return this._transform}},{key:"inverse",get:function(){return this._transformInverse.value}},{key:"inverseTranspose",get:function(){return this._transformInverseTranspose.value}},{key:"inverseRotation",get:function(){return this._transformInverseRotation.value}},{key:"transpose",get:function(){return this._transformTranspose.value}}]);return ka}(),t=function(){function ka(ra,h,v){this._original=ra;this._update=h;this._dirty=!0;this._transform=v()}ka.prototype.invalidate=
function(){this._dirty=!0};f._createClass(ka,[{key:"value",get:function(){this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1);return this._transform}}]);return ka}(),A=function(){function ka(h=0){this.offset=h;this.tmpVertex=g.create()}var ra=ka.prototype;ra.applyToVertex=function(h,v,L){const S=h+this.localOrigin[0],T=v+this.localOrigin[1],ba=L+this.localOrigin[2],c=this.offset/Math.sqrt(S*S+T*T+ba*ba);this.tmpVertex[0]=h+S*c;this.tmpVertex[1]=v+T*c;this.tmpVertex[2]=
L+ba*c;return this.tmpVertex};ra.applyToAabb=function(h){for(var v=0;3>v;++v)M[v]=h[0+v]+this.localOrigin[v],E[v]=h[3+v]+this.localOrigin[v],O[v]=M[v];v=this.applyToVertex(M[0],M[1],M[2]);for(var L=0;3>L;++L)h[L]=v[L],h[L+3]=v[L];v=T=>{T=this.applyToVertex(T[0],T[1],T[2]);for(let ba=0;3>ba;++ba)h[ba+0]=Math.min(h[ba+0],T[ba]),h[ba+3]=Math.max(h[ba+3],T[ba])};for(L=1;8>L;++L){for(var S=0;3>S;++S)O[S]=0===(L&1<<S)?M[S]:E[S];v(O)}L=0;for(S=0;3>S;++S)0>M[S]*E[S]&&(L|=1<<S);if(0!==L&&7!==L)for(S=0;8>S;++S)if(0===
(L&S)){for(let T=0;3>T;++T)O[T]=L[T]?0:0!==(S&1<<T)?M[T]:E[T];v(O)}for(v=0;3>v;++v)h[v+0]-=this.localOrigin[v],h[v+3]-=this.localOrigin[v];return h};return ka}();const M=g.create(),E=g.create(),O=g.create();let Q=function(){function ka(h=0){this.componentLocalOriginLength=0;this._tmpVertex=g.create();this._mbs=B.create();this._obb={center:g.create(),halfSize:k.create(),quaternion:null};this._offset=this._totalOffset=0;this._resetOffset(h)}var ra=ka.prototype;ra._resetOffset=function(h){this._totalOffset=
this._offset=h};ra.applyToVertex=function(h,v,L){const S=L+this.componentLocalOriginLength,T=this._totalOffset/Math.sqrt(h*h+v*v+S*S);this._tmpVertex[0]=h+h*T;this._tmpVertex[1]=v+v*T;this._tmpVertex[2]=L+S*T;return this._tmpVertex};ra.applyToAabb=function(h){const v=h[0],L=h[1],S=h[2]+this.componentLocalOriginLength,T=h[3],ba=h[4],c=h[5]+this.componentLocalOriginLength;var p=0>v*T?0:Math.min(Math.abs(v),Math.abs(T)),K=0>L*ba?0:Math.min(Math.abs(L),Math.abs(ba)),X=0>S*c?0:Math.min(Math.abs(S),Math.abs(c));
p=Math.sqrt(p*p+K*K+X*X);if(p<this._totalOffset)return h[0]-=0>v?this._totalOffset:0,h[1]-=0>L?this._totalOffset:0,h[2]-=0>S?this._totalOffset:0,h[3]+=0<T?this._totalOffset:0,h[4]+=0<ba?this._totalOffset:0,h[5]+=0<c?this._totalOffset:0,h;K=Math.max(Math.abs(v),Math.abs(T));X=Math.max(Math.abs(L),Math.abs(ba));const ja=Math.max(Math.abs(S),Math.abs(c));K=this._totalOffset/Math.sqrt(K*K+X*X+ja*ja);p=this._totalOffset/p;h[0]+=v*(0<v?K:p);h[1]+=L*(0<L?K:p);h[2]+=S*(0<S?K:p);h[3]+=T*(0>T?K:p);h[4]+=ba*
(0>ba?K:p);h[5]+=c*(0>c?K:p);return h};ra.applyToMbs=function(h){const v=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]),L=this._totalOffset/v;this._mbs[0]=h[0]+h[0]*L;this._mbs[1]=h[1]+h[1]*L;this._mbs[2]=h[2]+h[2]*L;this._mbs[3]=h[3]+h[3]*this._totalOffset/v;return this._mbs};ra.applyToObb=function(h){var v=h.center;const L=this._totalOffset/Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);this._obb.center[0]=v[0]+v[0]*L;this._obb.center[1]=v[1]+v[1]*L;this._obb.center[2]=v[2]+v[2]*L;d.transformQuat(this._obb.halfSize,
h.halfSize,h.quaternion);d.add(this._obb.halfSize,this._obb.halfSize,h.center);v=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);this._obb.halfSize[0]+=this._obb.halfSize[0]*v;this._obb.halfSize[1]+=this._obb.halfSize[1]*v;this._obb.halfSize[2]+=this._obb.halfSize[2]*v;d.subtract(this._obb.halfSize,this._obb.halfSize,h.center);e.conjugate(da,h.quaternion);d.transformQuat(this._obb.halfSize,
this._obb.halfSize,da);this._obb.halfSize[0]*=0>this._obb.halfSize[0]?-1:1;this._obb.halfSize[1]*=0>this._obb.halfSize[1]?-1:1;this._obb.halfSize[2]*=0>this._obb.halfSize[2]?-1:1;this._obb.quaternion=h.quaternion;return this._obb};f._createClass(ka,[{key:"offset",get:function(){return this._offset},set:function(h){this._resetOffset(h)}},{key:"componentOffset",set:function(h){this._totalOffset=this._offset+h}},{key:"localOrigin",set:function(h){this.componentLocalOriginLength=Math.sqrt(h[0]*h[0]+h[1]*
h[1]+h[2]*h[2])}}]);return ka}(),U=function(){function ka(h=0){this.offset=h;this.sphere=B.create();this.tmpVertex=g.create()}var ra=ka.prototype;ra.applyToVertex=function(h,v,L){const S=this.objectTransform.transform;let T=S[0]*h+S[4]*v+S[8]*L+S[12],ba=S[1]*h+S[5]*v+S[9]*L+S[13];h=S[2]*h+S[6]*v+S[10]*L+S[14];v=this.offset/Math.sqrt(T*T+ba*ba+h*h);T+=T*v;ba+=ba*v;h+=h*v;v=this.objectTransform.inverse;this.tmpVertex[0]=v[0]*T+v[4]*ba+v[8]*h+v[12];this.tmpVertex[1]=v[1]*T+v[5]*ba+v[9]*h+v[13];this.tmpVertex[2]=
v[2]*T+v[6]*ba+v[10]*h+v[14];return this.tmpVertex};ra.applyToMinMax=function(h,v){const L=this.offset/Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);h[0]+=h[0]*L;h[1]+=h[1]*L;h[2]+=h[2]*L;h=this.offset/Math.sqrt(v[0]*v[0]+v[1]*v[1]+v[2]*v[2]);v[0]+=v[0]*h;v[1]+=v[1]*h;v[2]+=v[2]*h};ra.applyToAabb=function(h){var v=this.offset/Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]);h[0]+=h[0]*v;h[1]+=h[1]*v;h[2]+=h[2]*v;v=this.offset/Math.sqrt(h[3]*h[3]+h[4]*h[4]+h[5]*h[5]);h[3]+=h[3]*v;h[4]+=h[4]*v;h[5]+=h[5]*v;return h};
ra.applyToBoundingSphere=function(h){const v=Math.sqrt(h[0]*h[0]+h[1]*h[1]+h[2]*h[2]),L=this.offset/v;this.sphere[0]=h[0]+h[0]*L;this.sphere[1]=h[1]+h[1]*L;this.sphere[2]=h[2]+h[2]*L;this.sphere[3]=h[3]+h[3]*this.offset/v;return this.sphere};return ka}();const ea=new U,oa=new Q,fa=new A,da=r.create();a.I3SVerticalOffsetGlobalViewingMode=Q;a.IntersectorTransform=C;a.Object3DVerticalOffsetGlobalViewingMode=U;a.TERRAIN_ID="terrain";a.TerrainVerticalOffsetGlobalViewingMode=A;a.getVerticalOffsetI3S=function(ka){return b.isSome(ka)?
(oa.offset=ka,oa):null};a.getVerticalOffsetObject3D=function(ka){return b.isSome(ka)?(ea.offset=ka,ea):null};a.getVerticalOffsetTerrain=function(ka){return b.isSome(ka)?(fa.offset=ka,fa):null};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quat":function(){define("exports ./mat3f64 ./quatf64 ./vec3f64 ./common ./vec3 ./vec4".split(" "),function(a,f,b,m,u,n,w){function e(l){l[0]=0;l[1]=0;l[2]=0;l[3]=1;return l}function r(l,q,D){D*=.5;const R=
Math.sin(D);l[0]=R*q[0];l[1]=R*q[1];l[2]=R*q[2];l[3]=Math.cos(D);return l}function d(l,q){const D=2*Math.acos(q[3]),R=Math.sin(D/2);R>u.getEpsilon()?(l[0]=q[0]/R,l[1]=q[1]/R,l[2]=q[2]/R):(l[0]=1,l[1]=0,l[2]=0);return D}function k(l,q,D){const R=q[0],Y=q[1],z=q[2];q=q[3];const H=D[0],ca=D[1],aa=D[2];D=D[3];l[0]=R*D+q*H+Y*aa-z*ca;l[1]=Y*D+q*ca+z*H-R*aa;l[2]=z*D+q*aa+R*ca-Y*H;l[3]=q*D-R*H-Y*ca-z*aa;return l}function g(l,q,D){D*=.5;const R=q[0],Y=q[1],z=q[2];q=q[3];const H=Math.sin(D);D=Math.cos(D);l[0]=
R*D+q*H;l[1]=Y*D+z*H;l[2]=z*D-Y*H;l[3]=q*D-R*H;return l}function B(l,q,D){D*=.5;const R=q[0],Y=q[1],z=q[2];q=q[3];const H=Math.sin(D);D=Math.cos(D);l[0]=R*D-z*H;l[1]=Y*D+q*H;l[2]=z*D+R*H;l[3]=q*D-Y*H;return l}function C(l,q,D){D*=.5;const R=q[0],Y=q[1],z=q[2];q=q[3];const H=Math.sin(D);D=Math.cos(D);l[0]=R*D+Y*H;l[1]=Y*D-R*H;l[2]=z*D+q*H;l[3]=q*D-z*H;return l}function t(l,q){const D=q[0],R=q[1];q=q[2];l[0]=D;l[1]=R;l[2]=q;l[3]=Math.sqrt(Math.abs(1-D*D-R*R-q*q));return l}function A(l,q,D,R){const Y=
q[0],z=q[1],H=q[2];q=q[3];let ca=D[0],aa=D[1],ma=D[2];D=D[3];let V;let F;var y=Y*ca+z*aa+H*ma+q*D;0>y&&(y=-y,ca=-ca,aa=-aa,ma=-ma,D=-D);1-y>u.getEpsilon()?(V=Math.acos(y),F=Math.sin(V),y=Math.sin((1-R)*V)/F,R=Math.sin(R*V)/F):y=1-R;l[0]=y*Y+R*ca;l[1]=y*z+R*aa;l[2]=y*H+R*ma;l[3]=y*q+R*D;return l}function M(l){var q=u.RANDOM,D=q();const R=q();q=q();const Y=Math.sqrt(1-D);D=Math.sqrt(D);l[0]=Y*Math.sin(2*Math.PI*R);l[1]=Y*Math.cos(2*Math.PI*R);l[2]=D*Math.sin(2*Math.PI*q);l[3]=D*Math.cos(2*Math.PI*q);
return l}function E(l,q){const D=q[0],R=q[1],Y=q[2];q=q[3];var z=D*D+R*R+Y*Y+q*q;z=z?1/z:0;l[0]=-D*z;l[1]=-R*z;l[2]=-Y*z;l[3]=q*z;return l}function O(l,q){l[0]=-q[0];l[1]=-q[1];l[2]=-q[2];l[3]=q[3];return l}function Q(l,q){var D=q[0]+q[4]+q[8];if(0<D)D=Math.sqrt(D+1),l[3]=.5*D,D=.5/D,l[0]=(q[5]-q[7])*D,l[1]=(q[6]-q[2])*D,l[2]=(q[1]-q[3])*D;else{let R=0;q[4]>q[0]&&(R=1);q[8]>q[3*R+R]&&(R=2);const Y=(R+1)%3,z=(R+2)%3;D=Math.sqrt(q[3*R+R]-q[3*Y+Y]-q[3*z+z]+1);l[R]=.5*D;D=.5/D;l[3]=(q[3*Y+z]-q[3*z+Y])*
D;l[Y]=(q[3*Y+R]+q[3*R+Y])*D;l[z]=(q[3*z+R]+q[3*R+z])*D}return l}function U(l,q,D,R){var Y=.5*Math.PI/180;q*=Y;D*=Y;R*=Y;Y=Math.sin(q);q=Math.cos(q);const z=Math.sin(D);D=Math.cos(D);const H=Math.sin(R);R=Math.cos(R);l[0]=Y*D*R-q*z*H;l[1]=q*z*R+Y*D*H;l[2]=q*D*H-Y*z*R;l[3]=q*D*R+Y*z*H;return l}function ea(l){return"quat("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")"}function oa(l,q,D){const R=n.dot(q,D);if(-.999999>R)return n.cross(K,X,q),1E-6>n.len(K)&&n.cross(K,ja,q),n.normalize(K,K),r(l,K,Math.PI),l;
if(.999999<R)return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l;n.cross(K,q,D);l[0]=K[0];l[1]=K[1];l[2]=K[2];l[3]=1+R;return c(l,l)}function fa(l,q,D,R,Y,z){A(ia,q,Y,z);A(la,D,R,z);A(l,ia,la,2*z*(1-z));return l}function da(l,q,D,R){const Y=I;Y[0]=D[0];Y[3]=D[1];Y[6]=D[2];Y[1]=R[0];Y[4]=R[1];Y[7]=R[2];Y[2]=-q[0];Y[5]=-q[1];Y[8]=-q[2];return c(l,Q(l,Y))}const ka=w.copy,ra=w.set,h=w.add,v=w.scale,L=w.dot,S=w.lerp,T=w.length,ba=w.squaredLength,c=w.normalize,p=w.exactEquals;w=w.equals;const K=m.create(),X=m.fromValues(1,
0,0),ja=m.fromValues(0,1,0),ia=b.create(),la=b.create(),I=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,identity:e,setAxisAngle:r,getAxisAngle:d,multiply:k,rotateX:g,rotateY:B,rotateZ:C,calculateW:t,slerp:A,random:M,invert:E,conjugate:O,fromMat3:Q,fromEuler:U,str:ea,copy:ka,set:ra,add:h,mul:k,scale:v,dot:L,lerp:S,length:T,len:T,squaredLength:ba,sqrLen:ba,normalize:c,exactEquals:p,equals:w,rotationTo:oa,sqlerp:fa,setAxes:da},Symbol.toStringTag,{value:"Module"}));a.add=h;a.calculateW=
t;a.conjugate=O;a.copy=ka;a.dot=L;a.equals=w;a.exactEquals=p;a.fromEuler=U;a.fromMat3=Q;a.getAxisAngle=d;a.identity=e;a.invert=E;a.len=T;a.length=T;a.lerp=S;a.mul=k;a.multiply=k;a.normalize=c;a.quat=f;a.random=M;a.rotateX=g;a.rotateY=B;a.rotateZ=C;a.rotationTo=oa;a.scale=v;a.set=ra;a.setAxes=da;a.setAxisAngle=r;a.slerp=A;a.sqlerp=fa;a.sqrLen=ba;a.squaredLength=ba;a.str=ea})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function f(){return new Float32Array(3)}function b(M){const E=
new Float32Array(3);E[0]=M[0];E[1]=M[1];E[2]=M[2];return E}function m(M,E,O){const Q=new Float32Array(3);Q[0]=M;Q[1]=E;Q[2]=O;return Q}function u(M,E){return new Float32Array(M,E,3)}function n(){return f()}function w(){return m(1,1,1)}function e(){return m(1,0,0)}function r(){return m(0,1,0)}function d(){return m(0,0,1)}const k=f(),g=w(),B=e(),C=r(),t=d(),A=Object.freeze(Object.defineProperty({__proto__:null,create:f,clone:b,fromValues:m,createView:u,zeros:n,ones:w,unitX:e,unitY:r,unitZ:d,ZEROS:k,
ONES:g,UNIT_X:B,UNIT_Y:C,UNIT_Z:t},Symbol.toStringTag,{value:"Module"}));a.ONES=g;a.UNIT_X=B;a.UNIT_Y=C;a.UNIT_Z=t;a.ZEROS=k;a.clone=b;a.create=f;a.createView=u;a.fromValues=m;a.ones=w;a.unitX=e;a.unitY=r;a.unitZ=d;a.vec3f32=A;a.zeros=n})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../../../webgl/doublePrecisionUtils".split(" "),function(a,f,b,m,u,n){const w=
new Float64Array(3),e=new Float32Array(6),r=m.create();a.addObject3DStateID=function(d,k){f.isNone(d)&&(d=[]);d.push(k);return d};a.calculateTransformRelativeToOrigin=function(d,k,g){const B=d.origin.vec3;u.setMatrixTranslation3(r,-B[0],-B[1],-B[2]);f.isSome(d.transformation)?b.multiply(k,r,d.transformation):b.copy(k,r);b.invert(g,k);b.transpose(g,g)};a.encodeDoubleVec3=function(d,k,g,B,C){w[0]=d.get(k,0);w[1]=d.get(k,1);w[2]=d.get(k,2);n.encodeDoubleArray(w,e,3);g.set(C,0,e[0]);B.set(C,0,e[1]);g.set(C,
1,e[2]);B.set(C,1,e[3]);g.set(C,2,e[4]);B.set(C,2,e[5])};a.isInstanceHidden=function(d){return f.isSome(d)?!d.visible:!1};a.removeObject3DStateID=function(d,k){if(f.isNone(d))return null;d=d.filter(g=>g!==k);return 0===d.length?null:d};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(a,f,b,m){function u(e,
r){if(!e)throw r=r||"assert",console.log(Error(r).stack),new w(r);}const n=m.create();let w=function(){function e(r){this.message=r}e.prototype.toString=function(){return`AssertException: ${this.message}`};return e}();a.assert=u;a.fovd2fovx=function(e,r,d){return 2*Math.atan(r*Math.tan(.5*e)/Math.sqrt(r*r+d*d))};a.fovd2fovy=function(e,r,d){return 2*Math.atan(d*Math.tan(.5*e)/Math.sqrt(r*r+d*d))};a.fovx2fovd=function(e,r,d){return 2*Math.atan(Math.sqrt(r*r+d*d)*Math.tan(.5*e)/r)};a.fovy2fovd=function(e,
r,d){return 2*Math.atan(Math.sqrt(r*r+d*d)*Math.tan(.5*e)/d)};a.isTranslationMatrix=function(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]};a.logWithBase=function(e,r){return Math.log(e)/Math.log(r)};a.project=function(e,r,d,k,g){g||(g=e);n[0]=e[0];n[1]=e[1];n[2]=e[2];n[3]=1;b.transformMat4(n,n,r);2<g.length&&(g[2]=-n[2]);b.transformMat4(n,n,d);u(0!==n[3]);g[0]=n[0]/n[3];g[1]=n[1]/n[3];g[2]=n[2]/n[3];g[0]=
(.5*g[0]+.5)*k[2]+k[0];g[1]=(.5*g[1]+.5)*k[3]+k[1]};a.rayBoxTest=function(e,r,d,k){let g,B=(d[0]-e[0])/r[0],C=(k[0]-e[0])/r[0];B>C&&(g=B,B=C,C=g);let t=(d[1]-e[1])/r[1],A=(k[1]-e[1])/r[1];t>A&&(g=t,t=A,A=g);if(B>A||t>C)return!1;t>B&&(B=t);A<C&&(C=A);d=(d[2]-e[2])/r[2];e=(k[2]-e[2])/r[2];d>e&&(g=d,d=e,e=g);if(B>e||d>C)return!1;e<C&&(C=e);return 0>C?!1:!0};a.rayRay2D=function(e,r,d,k,g,B=f.create()){const C=(k[g]-d[g])*(r[0]-e[0])-(k[0]-d[0])*(r[g]-e[g]);if(0===C)return!1;d=((k[0]-d[0])*(e[g]-d[g])-
(k[g]-d[g])*(e[0]-d[0]))/C;B[0]=e[0]+d*(r[0]-e[0]);B[1]=e[g]+d*(r[g]-e[g]);return!0};a.setMatrixTranslation3=function(e,r,d,k){e[12]=r;e[13]=d;e[14]=k};a.verify=function(e,r){e||console.warn("Verify failed: "+(r||"")+"\n"+Error("verify").stack)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(a){const f=new Float32Array(2);a.decodeDoubleArray=function(b,m,u){for(let n=0;n<u;++n)m[n]=
b[2*n]+b[2*n+1]};a.encodeDoubleArray=function(b,m,u){for(let n=0;n<u;++n)m[2*n]=b[n],m[2*n+1]=b[n]-m[2*n]};a.encodeDoubleHi=function(b,m){const u=b.length;for(let n=0;n<u;++n)f[0]=b[n],m[n]=f[0];return m};a.encodeDoubleLo=function(b,m){const u=b.length;for(let n=0;n<u;++n)f[0]=b[n],f[1]=b[n]-f[0],m[n]=f[1];return m};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/cameraUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Camera ../../../core/Cyclical ../../../core/Logger ../../../core/mathUtils ../../../core/maybe ../../../core/promiseUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ../../../geometry/projection ../../../geometry/projectionEllipsoid ../../../geometry/SpatialReference ../../ViewingMode ../camera/intersectionUtils ../../../chunks/cameraUtilsPlanar ../../../chunks/cameraUtilsSpherical ./earthUtils ./ElevationProvider ../../support/spatialReferenceSupport".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g,B,C,t,A,M,E,O,Q,U){function ea(z){return"global"===z.viewingMode?E.cameraUtilsSpherical:M.cameraUtilsPlanar}function oa(z,H,ca){const aa=z.state.camera,ma=aa.width/2/aa.pixelRatio;z.renderCoordsHelper.viewingMode===t.ViewingMode.Global&&null!=ca&&(H*=Math.cos(n.deg2rad(ca)));H/=z.renderCoordsHelper.unitInMeters;return ma/(96*39.37/H)/Math.tan(aa.fovX/2)}function fa(z,H,ca){const aa=z.state.camera;H=96*39.37/(aa.width/2/aa.pixelRatio/(H*Math.tan(aa.fovX/2)));z.renderCoordsHelper.viewingMode===
t.ViewingMode.Global&&(H/=Math.cos(n.deg2rad(ca)));return H*=z.renderCoordsHelper.unitInMeters}function da(z,H,ca,aa,ma,V){if(X(V)){const F=new Y(V.signal);ba(z,aa.heading,aa.tilt,H,ca,ma,F);F.resolver.promise.then(y=>{y=K(z,y,aa.fov);if(w.isNone(y))V.resolver.reject();else return V.resolver.resolve(y)},y=>V.resolver.reject(y))}else return H=ba(z,aa.heading,aa.tilt,H,ca,ma),K(z,H,aa.fov,V)}function ka(z,H,ca,aa,ma){return ea(z).directionToHeadingTilt(H,ca,aa,ma)}function ra(z,H){return!!(z.basemapTerrain&&
z.renderCoordsHelper.fromRenderCoords(H,l,z.spatialReference)&&w.unwrapOr(Q.getElevationAtPoint(z.elevationProvider,l),0)>l.z-1)}function h(z,H,ca){return v.apply(this,arguments)}function v(){v=f._asyncToGenerator(function*(z,H,ca){if(!z.renderCoordsHelper.fromRenderCoords(H,l,z.spatialReference))return!1;z=yield z.elevationProvider.queryElevation(l.x,l.y,l.z,l.spatialReference,"ground",ca);return w.unwrapOr(z,0)>l.z-1});return v.apply(this,arguments)}function L(z,H,ca){return S.apply(this,arguments)}
function S(){S=f._asyncToGenerator(function*(z,H,ca){const aa=d.create();H?H instanceof k?(g.projectPointToVector(H,aa,z.renderSpatialReference),null==H.z&&null!=z.basemapTerrain&&(H=yield z.elevationProvider.queryElevation(H.x,H.y,H.z,H.spatialReference,"ground",ca),w.isSome(H)&&z.renderCoordsHelper.setAltitude(aa,H))):r.copy(aa,H):r.copy(aa,z.state.camera.center);return aa});return S.apply(this,arguments)}function T(z,H){const ca=d.create();H&&H instanceof k?(g.projectPointToVector(H,ca,z.renderSpatialReference),
null==H.z&&null!=z.basemapTerrain&&(H=Q.getElevationAtPoint(z.elevationProvider,H),w.isSome(H)&&z.renderCoordsHelper.setAltitude(ca,H))):H?r.copy(ca,H):r.copy(ca,z.state.camera.center);return ca}function ba(z,H,ca,aa,ma,V,F){const y=aa&&aa instanceof k?aa:null;if(X(F))return L(z,aa,F.signal).then(x=>{c(z,H,ca,y,x,ma,V,F)},x=>F.resolver.reject(x)),null;aa=T(z,aa);return c(z,H,ca,y,aa,ma,V,F)}function c(z,H,ca,aa,ma,V,F,y){if(w.isNone(aa)&&(aa=g.projectVectorToPoint(ma,z.renderSpatialReference,z.spatialReference||
C.WGS84),w.isNone(aa)))return null;V=Math.max(V,z.state.constraints.minimumPoiDistance);var x=p(z,H,ca,ma,V,F);const G=ea(z).eyeForCenterWithHeadingTilt,P=G(ma,V,x.heading,x.tilt);if(F===a.OrientationMode.ADJUST&&"global"===z.viewingMode&&0<ca){const W=()=>{var na=V,ta=V;var ua=z.state.constraints.tilt(ta);ta=ea(z).eyeTiltToLookAtTilt(ca,ma,ta);ta=Math.min(ta,.5*Math.PI);ua=ua.min*(1-.7)+.7*ta;na=ea(z).lookAtTiltToEyeTilt(ua,ma,na);F=1>ca-na?a.OrientationMode.LOCKED:a.OrientationMode.ADJUST;return c(z,
H,na,aa,ma,V,F,y)};x=z.map.ground.navigationConstraint;if(!x||"stay-above"===x.type){if(ra(z,P.eye))return W();if(X(y))return h(z,P.eye,y.signal).then(na=>{if(na)return W();y.resolver.resolve({eye:P.eye,up:P.up,center:d.clone(ma),heading:P.heading,tilt:P.tilt});return null}),null}}x=!y||X(y)?{center:d.create(),eye:d.create(),up:d.create(),tilt:0,heading:0}:y;x.eye=P.eye;x.up=P.up;x.center=d.clone(ma);x.heading=P.heading;x.tilt=P.tilt;X(y)&&y.resolver.resolve(x);return x}function p(z,H,ca,aa,ma,V){var F=
0;if(V=V===a.OrientationMode.ADJUST)if(F=z.pointsOfInterest.centerOnSurfaceFrequent.distance,8<Math.log(ma/F)/Math.LN2)V=!0;else{var y=z.renderSpatialReference,x=z.spatialReference||C.WGS84;V=g.projectVectorToPoint(aa,y,x);y=g.projectVectorToPoint(z.pointsOfInterest.centerOnSurfaceFrequent.renderLocation,y,x);w.isNone(V)||w.isNone(y)?V=!1:(F*=Math.tan(.5*z.state.camera.fov),V=5<y.distance(V)/F)}V?(H=0,V=z.state.constraints.tilt(ma),V.max=Math.min(V.max,.5*Math.PI),V=V.min*(1-.7)+.7*V.max,ca=ea(z).eyeTiltToLookAtTilt(ca,
aa,ma),F=Math.min(ca,V)):F=ea(z).eyeTiltToLookAtTilt(ca,aa,ma);ca=F=z.state.constraints.clampTilt(ma,F);ca=ea(z).lookAtTiltToEyeTilt(ca,aa,ma);return{heading:H,tilt:ca}}function K(z,H,ca,aa){if(w.isNone(H))return null;z=g.projectVectorToPoint(H.eye,z.renderSpatialReference,z.spatialReference||C.WGS84);return w.isNone(z)?null:w.isSome(aa)?(aa.position=z,aa.heading=H.heading,aa.tilt=H.tilt,aa.fov=ca,aa):new b(z,H.heading,H.tilt,ca)}function X(z){return z&&"resolver"in z}const ja=u.getLogger("esri.views.3d.support.cameraUtils"),
ia=d.create(),la=d.create(),I={heading:0,tilt:0},l=new k,q=new m.Cyclical(-2.0037508342788905E7,2.0037508342788905E7),D=new m.Cyclical(-180,180);a.OrientationMode=void 0;(function(z){z[z.LOCKED=0]="LOCKED";z[z.ADJUST=1]="ADJUST"})(a.OrientationMode||(a.OrientationMode={}));const R=d.create();let Y=function(z){this.signal=z;this.resolver=e.createResolver()};a.AsyncContext=Y;a.computeScale=function(z,H,ca){const aa=z.renderSpatialReference;H||(H=z.state.camera);var ma=C.WGS84;H instanceof b?(ma=H.position.latitude,
g.projectPointToVector(H.position,ia,aa),g.projectPointToVector(ca,la,aa),H=r.distance(ia,la)):(g.projectVectorToVector(H.center,aa,la,ma),ma=la[1],H=H.distance);return fa(z,H,ma)};a.directionToHeadingTilt=ka;a.distanceToScale=fa;a.externalToInternal=function(z,H){if(w.isNone(H))return null;var ca=z.renderSpatialReference;const aa=ea(z).headingTiltToDirectionUp,ma=d.create();if(!g.projectPointToVector(H.position,ma,ca))return null;ca=aa(ma,H.heading,H.tilt);r.scale(ca.direction,ca.direction,z.state.camera.distance);
r.add(ca.direction,ca.direction,ma);z=A.cameraOnContentAlongViewDirection(z,ma,ca.direction,ca.up);z.fov=n.deg2rad(H.fov);return z};a.fromCenterDistance=da;a.fromCenterScale=function(z,H,ca,aa,ma,V){ca=oa(z,ca,H.latitude);return da(z,H,ca,aa,ma,V)};a.fromExtent=function(z,H,ca,aa,ma,V=null){var F=null!=H.zmax&&null!=H.zmin;let y;if(z.state.isGlobal){if(!U.isSpatialReferenceSupported(H.spatialReference,t.ViewingMode.Global))return X(V)&&V.resolver.reject(),null;var x=new k(H.xmin,H.ymin,H.spatialReference);
const W=new k(H.xmax,H.ymax,H.spatialReference),na=H.spatialReference.isGeographic?D:q;var G=new k({x:na.center(x.x,W.x),y:(W.y+x.y)/2,z:F?(H.zmax+H.zmin)/2:null,spatialReference:H.spatialReference});const ta=B.getReferenceEllipsoid(H.spatialReference);var P=O.getGreatCircleSpanAt(G,x,W);y=P.lon;P=P.lat;na.diff(x.x,W.x)>na.range/2&&(y+=ta.halfCircumference);y=Math.min(y,ta.halfCircumference);P=Math.min(P,ta.halfCircumference)}else G=w.unwrapOr(z.renderSpatialReference,H.spatialReference),G.equals(H.spatialReference)||
(H=g.project(H,G)),y=H.xmax-H.xmin,P=H.ymax-H.ymin,G=new k({x:H.xmin+.5*y,y:H.ymin+.5*P,z:F?(H.zmax+H.zmin)/2:null,spatialReference:G});x=z.state.camera;H=Math.max(1/Math.tan(x.fovX/2)*y*.5,1/Math.tan(x.fovY/2)*P*.5,1/Math.tan(x.fov/2)*(F?H.zmax-H.zmin:0)*.5)/1;if(X(V))F=new Y(V.signal),ba(z,ca,aa,G,H,ma,F),F.resolver.promise.then(W=>{W=K(z,W,z.camera.fov);if(w.isNone(W))V.resolver.reject();else return V.resolver.resolve(W)},W=>V.resolver.reject(W));else return ca=ba(z,ca,aa,G,H,ma),K(z,ca,z.camera.fov,
V)};a.getObserverForPointAtDistance=ba;a.headingTiltToDirectionUp=function(z,H,ca,aa,ma){return ea(z).headingTiltToDirectionUp(H,ca,aa,ma)};a.internalToExternal=function(z,H,ca){const aa=z.renderSpatialReference,ma=ka(z,H.eye,H.viewForward,H.up,I);z=z.spatialReference||C.WGS84;g.projectVectorToVector(H.eye,aa,R,z)||(z=C.WGS84,g.projectVectorToVector(H.eye,aa,R,z));if(w.isNone(ca))return new b(new k(R,z),ma.heading,ma.tilt,n.rad2deg(H.fov));ca.position.x=R[0];ca.position.y=R[1];ca.position.z=R[2];
ca.position.spatialReference=z;ca.heading=ma.heading;ca.tilt=ma.tilt;ca.fov=n.rad2deg(H.fov);return ca};a.observerToCamera=K;a.scaleToDistance=oa;a.scaleToZoom=function(z,H){if(z=z.basemapTerrain?.tilingScheme)return z.levelAtScale(H);ja.error("#scaleToZoom()","Cannot compute zoom from scale without a tiling scheme")};a.toExtent=function(z,H,ca){const aa=g.projectVectorToPoint(ca,z.renderSpatialReference,z.spatialReference||C.WGS84);if(w.isNone(aa))return null;var ma=Math.tan(H.fovX/2),V=Math.tan(H.fovY/
2);H=r.dist(H.eye,ca);ma*=2*H;V*=2*H;return"global"===z.viewingMode?E.toExtent(z,aa,ma,V):M.toExtent(z,aa,ma,V)};a.zoomToScale=function(z,H){if(z=z.basemapTerrain?.tilingScheme)return z.scaleAtLevel(H);ja.error("#zoomToScale()","Cannot compute scale from zoom without a tiling scheme")};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/cameraUtilsPlanar":function(){define("exports ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projection ../views/3d/support/cameraUtilsInternal".split(" "),
function(a,f,b,m,u,n,w,e,r){function d(U,ea,oa,fa=r.createDirectionUp()){const {direction:da,up:ka}=fa;b.fromZRotation(E,-f.deg2rad(ea));b.rotateX(E,E,f.deg2rad(oa));u.transformMat4(da,M,E);u.scale(da,da,-1);u.transformMat4(ka,A,E);return fa}function k(U,ea,oa,fa){return r.directionToHeadingTilt(ea,oa,fa,M,A)}function g(U,ea,oa,fa){const da=d(U,oa,fa),ka=n.create();u.scale(ka,da.direction,-ea);u.add(ka,ka,U);return{up:da.up,eye:ka,heading:oa,tilt:fa}}function B(U){return f.rad2deg(U)}function C(U){return f.deg2rad(U)}
function t(U,ea,oa,fa,da){const ka=U.renderSpatialReference;U=U.map&&U.spatialReference||ea.spatialReference;e.projectPointToVector(ea,O,ka);e.projectPointToVector(ea,Q,ka);O[0]-=oa/2;Q[0]+=oa/2;O[1]-=fa/2;Q[1]+=fa/2;e.projectVectorToVector(O,ka,O,U);e.projectVectorToVector(Q,ka,Q,U);da?(da.xmin=O[0],da.ymin=O[1],da.xmax=Q[0],da.ymax=Q[1],da.spatialReference=U):da=new w(O[0],O[1],Q[0],Q[1],U);return da}const A=n.fromValues(0,1,0),M=n.fromValues(0,0,1),E=m.create(),O=n.create(),Q=n.create();m=Object.freeze(Object.defineProperty({__proto__:null,
headingTiltToDirectionUp:d,directionToHeadingTilt:k,eyeForCenterWithHeadingTilt:g,lookAtTiltToEyeTilt:B,eyeTiltToLookAtTilt:C,toExtent:t},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsPlanar=m;a.directionToHeadingTilt=k;a.eyeForCenterWithHeadingTilt=g;a.eyeTiltToLookAtTilt=C;a.headingTiltToDirectionUp=d;a.lookAtTiltToEyeTilt=B;a.toExtent=t})},"esri/views/3d/support/cameraUtilsInternal":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,
f,b,m){const u=m.create(),n=m.create();a.createDirectionUp=function(){return{direction:m.create(),up:m.create()}};a.directionToHeadingTilt=function(w,e,r,d,k){let g=b.normalize(u,w),B=b.dot(g,d);const C=0<B;B=Math.abs(B);.99<B&&(B=Math.abs(b.dot(e,d)),.99>B?(b.copy(g,e),C&&b.scale(g,g,-1)):g=null);e=0;g&&(b.scale(n,d,b.dot(d,g)),b.subtract(g,g,n),e=b.dot(g,k)/(b.length(g)*b.length(k)),b.cross(n,g,k),e=(0<b.dot(n,d)?1:-1)*f.rad2deg(f.acosClamped(e)));w=f.rad2deg(f.acosClamped(-b.dot(d,w)/b.length(w)));
if(!r)return{heading:e,tilt:w};r.heading=e;r.tilt=w;return r};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/cameraUtilsSpherical":function(){define("exports ../core/Cyclical ../core/mathUtils ./mat4 ./mat4f64 ./vec3 ./vec3f64 ../geometry/Extent ../geometry/projectionEllipsoid ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../views/3d/support/cameraUtilsInternal ../views/3d/support/earthUtils".split(" "),function(a,f,b,m,
u,n,w,e,r,d,k,g,B){function C(h,v,L,S=g.createDirectionUp()){n.cross(ka,h,ea);0===n.dot(ka,ka)&&n.cross(ka,h,oa);m.fromRotation(da,-b.deg2rad(v),h);m.rotate(da,da,-b.deg2rad(L),ka);const {up:T,direction:ba}=S;n.cross(T,ka,h);n.normalize(T,T);n.transformMat4(T,T,da);n.normalize(ba,h);n.negate(ba,ba);n.transformMat4(ba,ba,da);return S}function t(h,v,L,S){const T=ka,ba=ra;n.normalize(T,h);n.cross(ra,T,ea);0===n.dot(ra,ra)&&n.cross(ra,T,oa);n.cross(ba,ra,T);return g.directionToHeadingTilt(v,L,S,T,ba)}
function A(h,v,L,S){const T={eye:w.create(),up:null,tilt:S,heading:L},ba=ka;ba[0]=h[0];ba[1]=h[2];ba[2]=-h[1];L=b.deg2rad(L);var c=b.deg2rad(S);S=Math.sin(L);L=Math.cos(L);var p=Math.sin(c),K=Math.cos(c);const X=n.length(ba);if(1E-8>Math.abs(c))c=v+X;else{var ja=X/p,ia=b.asinClamped(v/ja);c=ja*Math.sin(Math.PI-c-ia)}K*=v;ja=v*v*p*p;ia=L*L*ja;const la=c-K,I=la*la;var l=ia*(ia+I-ba[1]*ba[1]);if(0>l)return n.scale(T.eye,ba,c/X),T.tilt=0,T;var q=Math.sqrt(l);const D=ba[1]*la;l=ia+I;q=0<L?-q+D:q+D;if(1E-8>
Math.abs(l))return 1E-8>X?(T.eye[0]=0,T.eye[1]=0,T.eye[2]=v):n.scale(T.eye,ba,c/X),T.tilt=0,M(T.eye),E(T,h);T.eye[1]=q/l;v*=p;q=T.eye[1]*T.eye[1];p=1-q;l=Math.sqrt(p);ja=ia*q+S*S*ja-2*L*v*T.eye[1]*l*la+p*I;if(1E-8>Math.abs(ja))return n.scale(T.eye,ba,c/X),T.tilt=0,M(T.eye),E(T,h);T.eye[0]=(p*(c*ba[0]-K*ba[0])-v*l*(ba[0]*T.eye[1]*L+ba[2]*S))/ja;T.eye[2]=(p*(c*ba[2]-K*ba[2])-v*l*(ba[2]*T.eye[1]*L-ba[0]*S))/ja;n.scale(T.eye,T.eye,c);M(T.eye);return E(T,h)}function M(h){const v=h[1];h[1]=-h[2];h[2]=v}
function E(h,v){v=C(v,h.heading,h.tilt);h.up=v.up;return h}function O(h,v,L){v=n.length(v);L=b.asinClamped(L/(Math.sqrt(L*L+v*v-2*L*v*Math.cos(Math.PI-h))/Math.sin(h)));return b.rad2deg(h-L)}function Q(h,v,L){h=b.deg2rad(h);v=n.length(v);return b.asinClamped(L/(v/Math.sin(h)))+h}function U(h,v,L,S,T){function ba(X){const ja=Math.PI/2;X=f.cyclical2PI.normalize(X,-ja);X>ja&&(X=Math.PI-X);return X}var c=v.latitude;var p=r.getReferenceEllipsoid(h.spatialReference).radius;v=v.longitude;var K=B.getLonDeltaForDistance(c,
L,p)/2;L=v-K;v+=K;c=b.deg2rad(c);c=(1+Math.sin(c))/(1-Math.sin(c));K=(c+1)*Math.tan(S/p/2);c=1.5*Math.PI-2*Math.atan(.5*(K+Math.sqrt(4*c+K*K)));S=c+S/p;c=ba(c);S=ba(S);S<c&&(p=S,S=c,c=p);c=Math.max(b.rad2deg(c),-90);S=Math.min(b.rad2deg(S),90);v=fa.monotonic(L,v);180<v-L&&(p=(v-L-180)/2,L+=p,v-=p);p=h.spatialReference&&h.spatialReference.isGeographic?h.spatialReference:d.WGS84;T?(T.xmin=L,T.ymin=c,T.xmax=v,T.ymax=S,T.spatialReference=p):T=new e(L,c,v,S,p);h.spatialReference&&h.spatialReference.isWebMercator&&
k.geographicToWebMercator(T,!1,T);return T}const ea=w.fromValues(0,0,1),oa=n.normalize(w.create(),w.fromValues(1,1,1)),fa=new f.Cyclical(-180,180),da=u.create(),ka=w.create(),ra=w.create();u=Object.freeze(Object.defineProperty({__proto__:null,headingTiltToDirectionUp:C,directionToHeadingTilt:t,eyeForCenterWithHeadingTilt:A,lookAtTiltToEyeTilt:O,eyeTiltToLookAtTilt:Q,toExtent:U},Symbol.toStringTag,{value:"Module"}));a.cameraUtilsSpherical=u;a.directionToHeadingTilt=t;a.eyeForCenterWithHeadingTilt=
A;a.eyeTiltToLookAtTilt=Q;a.headingTiltToDirectionUp=C;a.lookAtTiltToEyeTilt=O;a.toExtent=U})},"esri/views/3d/support/earthUtils":function(){define(["exports","../../../core/mathUtils","../../../core/maybe","../../../geometry/Point","../../../geometry/projectionEllipsoid"],function(a,f,b,m,u){function n(r,d,k){if(b.isNone(d.longitude)||b.isNone(d.latitude)||b.isNone(k.longitude)||b.isNone(k.latitude))throw Error("Invalid points: no lon/lat");return w(r,d.longitude,d.latitude,k.longitude,k.latitude)}
function w(r,d,k,g,B){k=f.deg2rad(k);B=f.deg2rad(B);d=f.deg2rad(d);const C=f.deg2rad(g);g=Math.sin((k-B)/2);d=Math.sin((d-C)/2);k=2*f.asinClamped(Math.sqrt(g*g+Math.cos(k)*Math.cos(B)*d*d));return Math.round(k*r*1E4)/1E4}function e(r,d){r/=15;d||(r=Math.round(r));return r}a.getGreatCircleDistance=w;a.getGreatCircleDistanceFromPoints=n;a.getGreatCircleSpanAt=function(r,d,k){const g=d.spatialReference,B=u.getReferenceEllipsoid(g),C=new m(d.x,r.y,g),t=new m(k.x,r.y,g);d=new m(r.x,d.y,g);r=new m(r.x,
k.y,g);return{lon:n(B.radius,C,t),lat:n(B.radius,d,r)}};a.getLatDeltaForDistance=function(r,d){return f.rad2deg(r/d)};a.getLonDeltaForDistance=function(r,d,k){d/=k;r=f.deg2rad(r);d=Math.sin(d/2);r=Math.cos(r);r=2*f.asinClamped(Math.sqrt(d*d/(r*r)));return f.rad2deg(r)};a.longitudeToTimezone=e;a.positionToTimezoneInfo=function(r,d){d||(d={hours:0,minutes:0,seconds:0});d.hours=e(r[0],!0);r=d.hours%1;d.hours-=r;d.minutes=60*r;r=d.minutes%1;d.minutes-=r;d.seconds=Math.round(60*r);return d};Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatureUtils"],function(a,f,b){function m(u){return"array"in u}a.SamplePosition=function(u,n=null,w=0){this.array=u;this.spatialReference=n;this.offset=w};a.getElevationAtPoint=function(u,n,w="ground"){if(b.isDehydratedPoint(n))return u.getElevation(n.x,n.y,n.z||0,n.spatialReference,w);if(m(n)){let e=n.offset;
return u.getElevation(n.array[e++],n.array[e++],n.array[e]||0,f.unwrapOr(n.spatialReference,u.spatialReference),w)}return u.getElevation(n[0],n[1],n[2]||0,u.spatialReference,w)};a.isSamplePosition=m;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/dehydratedFeatureUtils":function(){define(["exports"],function(a){a.isDehydratedPoint=function(f){return"point"===f.type};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(a,f,b,m,u,n,w,e){var r;a.SlideThumbnail=r=function(d){function k(){var B=d.apply(this,arguments)||this;B.url="";return B}f._inheritsLoose(k,d);var g=k.prototype;g.destroy=function(){this.url=
""};g.clone=function(){return new r({url:this.url})};return k}(m.JSONSupport);b.__decorate([u.property({type:String,json:{write:{isRequired:!0}}})],a.SlideThumbnail.prototype,"url",void 0);a.SlideThumbnail=r=b.__decorate([e.subclass("esri.webdoc.support.SlideThumbnail")],a.SlideThumbnail);Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w){var e;b=e=function(r){function d(){var k=r.apply(this,arguments)||this;k.text="";return k}a._inheritsLoose(d,r);d.prototype.clone=function(){return new e({text:this.text})};return d}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=e=f.__decorate([w.subclass("esri.webscene.support.Description")],b)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(a,f,b,m,u,n,w,e,r,d,k,g){var B;a.SlideEnvironment=B=function(C){function t(){var A=C.apply(this,arguments)||this;A.lighting=new g;A.weather=new r;return A}f._inheritsLoose(t,C);t.prototype.clone=function(){return new B({lighting:u.clone(this.lighting),weather:u.clone(this.weather)})};return t}(m.JSONSupport);b.__decorate([n.property({types:k.lightingTypes,json:{write:!0}})],a.SlideEnvironment.prototype,"lighting",void 0);b.__decorate([n.property({types:d.weatherTypes,json:{write:!0}})],a.SlideEnvironment.prototype,
"weather",void 0);a.SlideEnvironment=B=b.__decorate([e.subclass("esri.webscene.Environment")],a.SlideEnvironment);Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),
function(a,f,b,m,u,n,w,e,r){var d;m=d=function(k){function g(){var C=k.apply(this,arguments)||this;C.opacity=null;return C}a._inheritsLoose(g,k);var B=g.prototype;B.clone=function(){return new d({opacity:this.opacity})};B.cloneAndApplyTo=function(C){if(null==this.opacity)return C;C=null!=C?C.clone():new b;C.opacity=this.opacity;return C};g.fromGround=function(C){return new d({opacity:C.opacity})};return g}(m.JSONSupport);f.__decorate([u.property({type:Number,json:{type:w.Integer,read:{reader:r.transparencyToOpacity,
source:"transparency"},write:{writer:(k,g)=>{g.transparency=r.opacityToTransparency(k)},target:"transparency"}}})],m.prototype,"opacity",void 0);return m=d=f.__decorate([e.subclass("esri.webscene.support.SlideGround")],m)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w,e){var r;a.SlideVisibleLayer=r=function(d){function k(g){g=d.call(this,g)||this;g.id="";g.sublayerIds=null;return g}f._inheritsLoose(k,d);k.prototype.clone=function(){return new r({id:this.id,sublayerIds:u.clone(this.sublayerIds)})};return k}(m.JSONSupport);b.__decorate([n.property({type:String,json:{write:!0}})],a.SlideVisibleLayer.prototype,"id",void 0);b.__decorate([n.property({type:[w.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],a.SlideVisibleLayer.prototype,
"sublayerIds",void 0);a.SlideVisibleLayer=r=b.__decorate([e.subclass("esri.webscene.support.SlideVisibleLayer")],a.SlideVisibleLayer);Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w){var e;b=e=function(r){function d(){var k=r.apply(this,arguments)||this;k.text="";return k}a._inheritsLoose(d,r);d.prototype.clone=function(){return new e({text:this.text})};return d}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:{isRequired:!0}}})],b.prototype,"text",void 0);return b=e=f.__decorate([w.subclass("esri.webscene.support.Title")],b)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(a,f,b,m,u,n,w){var e;b=e=function(r){function d(k){return r.call(this,k)||this}a._inheritsLoose(d,r);d.prototype.clone=function(){return new e({name:this.name,path:this.path,title:this.title})};return d}(b.JSONSupport);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"name",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"path",void 0);f.__decorate([m.property({type:String,json:{write:!0}})],b.prototype,"title",void 0);return b=e=f.__decorate([w.subclass("esri.webscene.TransportationNetwork")],
b)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(a,f,b){b=function(m){function u(n,w){return m.call(this,n,w,"webscene")||this}f._inheritsLoose(u,m);f._createClass(u,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return u}(b.Version);a.Version=b;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/core/Version":function(){define(["exports","./Error"],function(a,f){let b=function(){function m(n,w,e=""){this.major=n;this.minor=w;this._context=e}var u=m.prototype;u.lessThan=function(n,w){return this.major<n||n===this.major&&this.minor<w};u.since=function(n,w){return!this.lessThan(n,w)};u.validate=function(n){if(this.major!==n.major)throw new f((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,
{version:n});};u.clone=function(){return new m(this.major,this.minor,this._context)};m.parse=function(n,w=""){const [e,r]=n.split(".");var d=/^\s*\d+\s*$/;if(!e||!e.match||!e.match(d))throw new f((w&&w+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:n});if(!r||!r.match||!r.match(d))throw new f((w&&w+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:n});n=parseInt(e,10);d=parseInt(r,10);return new m(n,d,w)};return m}();
a.Version=b;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Handles ./core/has ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./support/MapFloorInfo ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(a,
f,b,m,u,n,w,e,r,d,k,g,B,C,t,A,M,E,O,Q,U,ea,oa,fa,da,ka,ra,h,v,L,S,T,ba,c,p,K,X,ja,ia,la,I,l,q,D,R,Y,z){const H=new z.Version(1,29);u=function(aa){function ma(F){var y=aa.call(this,F)||this;y._handles=new r;y.applicationProperties=null;y.clippingArea=null;y.clippingEnabled=!1;y.floorInfo=null;y.heightModelInfo=null;y.sourceVersion=null;y.transportationNetworks=null;y.presentation=new R;y.initialViewProperties=new D;y.portalItem=null;y.resourceInfo=null;y._debouncedSaveOperations=E.debounce(function(){var x=
f._asyncToGenerator(function*(G,P,W){switch(G){case ca.SAVE:return y._saveImpl(P);case ca.SAVE_AS:return y._saveAsImpl(W,P)}});return function(G,P,W){return x.apply(this,arguments)}}());y._resourceReferences={portalItem:null,paths:[]};y.authoringApp=null;y.authoringAppVersion=null;y._isAuthoringAppSetByUser=!1;y._isAuthoringAppVersionSetByUser=!1;return y}f._inheritsLoose(ma,aa);var V=ma.prototype;V.initialize=function(){this.when().catch(F=>{C.getLogger(this.declaredClass).error("#load()","Failed to load web scene",
F)});if(this.resourceInfo){let F;try{F=this._validateJSON(this.resourceInfo)}catch(y){this.addResolvingPromise(Promise.reject(y));return}this.read(F);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};V.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const F=this.portalItem;this.portalItem=
null;F?.destroy()};V.writeClippingArea=function(F,y){y.clippingArea||(y.clippingArea={});y.clippingArea.geometry=F.toJSON()};V.readClippingEnabled=function(F,y){return y.clippingArea?!!y.clippingArea.clip:!1};V.writeClippingEnabled=function(F,y){this.clippingArea&&(y.clippingArea||(y.clippingArea={}),y.clippingArea.clip=F)};V.writeLayers=function(F,y,x,G){const P={...G,layerContainerType:"operational-layers"};F=F.map(W=>this.verifyWriteLayer(W,G)?W.write({},P):null).filter(W=>!!W);y[x]=F.toArray()};
V.verifyWriteLayer=function(F,y){return"write"in F?!0:(y&&y.messages&&y.messages.push(new e("layer:unsupported",`Layers (${F.title}, ${F.id}) of type '${F.declaredClass}' cannot be persisted in web scenes`,{layer:F})),!1)};V.readSourceVersion=function(F,y){const [x,G]=y.version.split(".");return new z.Version(parseInt(x,10),parseInt(G,10))};V.writeSourceVersion=function(F,y,x){y[x]=`${H.major}.${H.minor}`};V.writeAuthoringApp=function(F,y){y.authoringApp=F&&this._isAuthoringAppSetByUser?F:"ArcGIS API for JavaScript"};
V.writeAuthoringAppVersion=function(F,y){y.authoringAppVersion=F&&this._isAuthoringAppVersionSetByUser?F:m.version};V.writeGround=function(F,y,x,G){y[x]=F?F.write({},G):{transparency:0,layers:[]}};V.readInitialViewProperties=function(F,y){F={};y.initialState&&y.initialState.environment&&(F.environment=q.fromJSON(y.initialState.environment));F.spatialReference=y.spatialReference?L.fromJSON(y.spatialReference):L.WebMercator;F.viewingMode=y.viewingMode||"global";y.initialState&&y.initialState.viewpoint&&
(F.viewpoint=n.fromJSON(y.initialState.viewpoint));return new D(F)};V.load=function(F){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};V.loadAll=function(){return B.loadAll(this,F=>{const y=this.presentation&&this.presentation.slides;F(this.ground,this.basemap,this.layers,y&&y.map(x=>x.basemap))})};V.read=function(F,y){y={...y,origin:"web-scene"};const x=this._isAuthoringAppVersionSetByUser,G=this._isAuthoringAppSetByUser;ka.readLoadable(this,F,P=>aa.prototype.read.call(this,
F,P),y);G||(this._isAuthoringAppSetByUser=!1);x||(this._isAuthoringAppVersionSetByUser=!1);if(F.baseMap&&Array.isArray(F.baseMap.elevationLayers)&&this.sourceVersion.supportsVisibleElevationLayersInSlides){y=F.baseMap.elevationLayers.map(ta=>({id:ta.id}));const P=this.presentation.slides,W=(ta,ua)=>ta.visibleLayers.some(wa=>wa.id===ua),na=y.filter(ta=>!P.some(ua=>W(ua,ta.id)));P.forEach(ta=>{ta.visibleLayers.addMany(na)})}};V._writeBasemapElevationLayers=function(F){const y=F.ground&&F.ground.layers;
!F.baseMap&&y&&y.length&&(F.baseMap={title:"Basemap",baseMapLayers:[]});F.baseMap&&(F.baseMap.elevationLayers=k.clone(y))};V.write=function(F,y){if("loaded"!==this.loadStatus)throw y=new e("webscene:not-loaded","Web scene must be loaded before it can be serialized"),C.getLogger(this.declaredClass).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),y;this._runLayersIdGC();var x=!y?.messages;y={messages:[],...y,origin:"web-scene"};F=aa.prototype.write.call(this,
F,y);if(x&&(y=y.messages.filter(G=>"web-document-write:property-required"===G.name),y.length))throw x=new e("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:y}),C.getLogger(this.declaredClass).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",y),x;this._writeBasemapElevationLayers(F);return F};V.save=function(){var F=f._asyncToGenerator(function*(y){return this._debouncedSaveOperations(ca.SAVE,
y)});return function(y){return F.apply(this,arguments)}}();V._saveImpl=function(){var F=f._asyncToGenerator(function*(y){this.portalItem||(C.getLogger(this.declaredClass).error("save(): requires the .portalItem property to be set"),yield Promise.reject(new e("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&(yield Promise.reject(new e("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"')));const x=
this._updateFromPromise;yield this._ensureLoadBeforeSave();const G=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&O.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||c.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),P=this.write({},G);yield Promise.all(G.resources.pendingOperations);yield this._verifySave(P,G,y);this._updateTypeKeywords(this.portalItem);
yield this.portalItem.update({data:P});yield la.saveResources(this._resourceReferences,G,null);da.updateOrigins(G);x&&(yield x);yield this._saveThumbnail();return this.portalItem});return function(y){return F.apply(this,arguments)}}();V.saveAs=function(){var F=f._asyncToGenerator(function*(y,x){return this._debouncedSaveOperations(ca.SAVE_AS,x,y)});return function(y,x){return F.apply(this,arguments)}}();V._saveAsImpl=function(){var F=f._asyncToGenerator(function*(y,x){y=p.from(y);y||(C.getLogger(this.declaredClass).error("saveAs(portalItem): requires a portal item parameter"),
yield Promise.reject(new e("webscene:portal-item-required","saveAs requires a portal item to save to")));y.id&&(y=y.clone(),y.id=null);const G=y.portal||c.getDefault();yield this._ensureLoadBeforeSave();y.type="Web Scene";y.portal=G;const P=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:G,portalItem:y,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),W=this.write({},P);yield Promise.all(P.resources.pendingOperations);
yield this._verifySaveAs(W,P,x);const na=this.thumbnailUrl,ta=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(y);yield G._signIn();yield G.user.addItem({item:y,folder:x&&x.folder,data:W});yield la.saveResources(this._resourceReferences,P,null);this.portalItem=y;A.MultiOriginJSONSupport.prototype.read.call(this,{version:W.version,authoringApp:W.authoringApp,authoringAppVersion:W.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:y.itemUrl&&O.urlToObject(y.itemUrl)});da.updateOrigins(P);
na&&(this.thumbnailUrl=ta?O.addQueryParameter(na,"w","8192"):na);P.portalItem=y;yield this._saveThumbnail();return y});return function(y,x){return F.apply(this,arguments)}}();V._saveThumbnail=function(){var F=f._asyncToGenerator(function*(){this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))});return function(){return F.apply(this,arguments)}}();V._verifySave=function(F,y,x,
G=!1){if(!ba.isEarth(this.spatialReference))return Promise.reject(new e("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let P=y.messages.filter(na=>"error"===na.type).map(na=>new e(na.name,na.message,na.details));y.blockedRelativeUrls&&(P=P.concat(y.blockedRelativeUrls.map(na=>new e("url:unsupported",`Relative url '${na}' is not supported in Web Scene`))));x&&x.ignoreUnsupported&&(P=P.filter(na=>"layer:unsupported"!==
na.name&&"symbol:unsupported"!==na.name&&"symbol-layer:unsupported"!==na.name&&"property:unsupported"!==na.name&&"url:unsupported"!==na.name&&"scenemodification:unsupported"!==na.name));x?.requiredPropertyChecksDisabled&&(P=P.filter(na=>"web-document-write:property-required"!==na.name));const W=x&&x.strictSchemaValidationEnabled;return(W?(new Promise((na,ta)=>a(["./webscene/support/schemaValidator"],na,ta))).then(na=>{na=na.validate(F);if(0<na.length){const ta=`webscene did not validate:\n${na.join("\n")}`;
C.getLogger(this.declaredClass).error(`${G?"saveAs":"save"}(): ${ta}`)}return na.map(ta=>new e("webscene:schema-validation",ta))}).then(na=>{if(W&&0<na.length)throw X.createSchemaValidationError(na.concat(P));return P}):Promise.resolve(P)).then(na=>{if(0<na.length)throw new e("webscene:save","Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:na});})};V._verifySaveAs=function(F,y,x){return this.canNotSaveAs(y)?Promise.reject(X.createCopyError()):
this._verifySave(F,y,x,!0)};V.verifySaveAs=function(F){const y=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),x=this.write({},y);return this._verifySaveAs(x,y,F)};V.canNotSaveAs=function(F){F||(F=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),this.write({},F));return F.verifyItemRelativeUrls&&0<F.verifyItemRelativeUrls.writtenUrls.length};V.updateFrom=function(){var F=f._asyncToGenerator(function*(y,x={}){this._updateFromPromise=y=this._updateFrom(y,x);
yield y;this._updateFromPromise===y&&(this._updateFromPromise=null)});return function(y){return F.apply(this,arguments)}}();V._updateFrom=function(){var F=f._asyncToGenerator(function*(y,x={}){yield y.whenReady();!x.environmentExcluded&&y.environment&&(this.initialViewProperties.environment=q.prototype.clone.apply(y.environment));!x.viewpointExcluded&&y.viewpoint&&(this.initialViewProperties.viewpoint=y.viewpoint.clone());this.initialViewProperties.spatialReference=y.spatialReference.clone();this.initialViewProperties.viewingMode=
y.viewingMode;t.isSome(y.clippingArea)?y.clippingArea!==this.clippingArea&&(this.clippingArea=y.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;y.heightModelInfo&&(this.heightModelInfo=y.heightModelInfo.clone());if(y.map===this)for(const G of y.allLayerViews)"visible"in G&&"visible"in G.layer&&G._isOverridden("visible")&&(G.layer.visible=G.visible);if(!1===x.thumbnailExcluded||null==x.thumbnailExcluded&&!x.viewpointExcluded)yield this._updateFromThumbnail(y,x.thumbnailSize||
void 0)});return function(y){return F.apply(this,arguments)}}();V._updateFromThumbnail=function(){var F=f._asyncToGenerator(function*(y,x){x=I.getOptimalThumbnailSize(y,x);this.thumbnailUrl=(yield y.takeScreenshot({format:"jpg",width:x.width,height:x.height,disableDecorations:!0})).dataUrl});return function(y,x){return F.apply(this,arguments)}}();V._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):
this._loadObjectsWithLayers()};V._readAndLoadFromJSON=function(F,y){F=this._validateJSON(F);this.read(F,y);return this._loadFromJSON(F,y)};V._extractOperationalLayers=function(F){const y=[];if(!this.sourceVersion.supportsGround&&F.baseMap&&Array.isArray(F.baseMap.elevationLayers))for(const P of F.baseMap.elevationLayers)y.push(P);const x=[],G=P=>{P.layers&&(P.layers=P.layers.filter(G));return"ArcGISTiledElevationServiceLayer"===P.layerType?(this.sourceVersion.supportsGround||x.push(P),!1):!0};return{operationalLayers:F.operationalLayers?
F.operationalLayers.filter(G):[],operationalElevationLayers:x,basemapElevationLayers:y}};V._loadFromJSON=function(F,y){const x=new w;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise((G,P)=>a(["./layers/support/layersCreator"],G,P))).then(({populateOperationalLayers:G})=>{const {operationalLayers:P,operationalElevationLayers:W,basemapElevationLayers:na}=this._extractOperationalLayers(F),ta=[],ua={context:{...y,layerContainerType:"operational-layers"}};
this.portalItem&&(ua.context.portal=this.portalItem.portal||c.getDefault());0<na.length&&ta.push(G(this.ground.layers,na,{...ua,context:{...ua.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<W.length&&ta.push(G(x,W,{...ua,context:{...ua.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));P&&0<P.length&&ta.push(G(this.layers,P,ua));return E.eachAlways(ta).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>
{this.ground.layers.addMany(x)})};V._ensureLoadBeforeSave=function(){var F=f._asyncToGenerator(function*(){yield this.load();yield this._loadObjectsWithLayers();const y=[];for(const x of this.allLayers.items)if("beforeSave"in x&&"function"===typeof x.beforeSave){const G=x.beforeSave();G&&y.push(G)}yield E.eachAlways(y)});return function(){return F.apply(this,arguments)}}();V._loadObjectsWithLayers=function(){var F=f._asyncToGenerator(function*(){const y=[];this.ground&&y.push(this.ground.load());
this.basemap&&y.push(this.basemap.load());this.presentation.slides.forEach(x=>{x.basemap&&y.push(x.basemap.load())});yield E.eachAlways(y)});return function(){return F.apply(this,arguments)}}();V._loadFromItem=function(){var F=f._asyncToGenerator(function*(y){yield y.load().catch(P=>{throw new e("webscene:load-portal-item","Failed to load portal item",{error:P});});if("Web Scene"!==y.type)throw new e("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:y.type});
const x=yield y.fetchData();this.resourceInfo=x;const G={origin:"web-scene",url:O.urlToObject(y.itemUrl),portal:y.portal||c.getDefault(),portalItem:y,readResourcePaths:[]};yield this._readAndLoadFromJSON(x,G);this._resourceReferences={portalItem:y,paths:G.readResourcePaths}});return function(y){return F.apply(this,arguments)}}();V._validateSpatialReference=function(){const F=this.initialViewProperties,y=this._sceneSpatialReference;let x;if("local"!==F.viewingMode){if(!ia.isSpatialReferenceSupported(y,
ja.ViewingMode.Global))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:y,viewingMode:F.viewingMode}));x=W=>!W||v.canProjectWithoutEngine(W,y)}else{if(!ia.isSpatialReferenceSupported(y,ja.ViewingMode.Local))return Promise.reject(new e("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",
{spatialReference:y,viewingMode:F.viewingMode}));x=W=>!W||W.equals(y)}const G=W=>W&&(t.isSome(W.camera)&&W.camera.position&&W.camera.position.spatialReference||t.isSome(W.targetGeometry)&&W.targetGeometry.spatialReference);var P=G(F.viewpoint);return P&&!x(P)?Promise.reject(new e("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:P,sceneSpatialReference:y,
viewingMode:F.viewingMode})):(P=this.presentation.slides.find(W=>!x(G(W.viewpoint))))?(P=G(P.viewpoint),Promise.reject(new e("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{slideSpatialReference:P,sceneSpatialReference:y,viewingMode:F.viewingMode}))):Promise.resolve()};V._validateHeightModelInfo=function(){const F=S.validateWebSceneError(this.heightModelInfo,
this._sceneSpatialReference);return F?Promise.reject(F):Promise.resolve()};V._validateJSON=function(F){const y=z.Version.parse(F.version||"","webscene");H.validate(y);F.version=`${y.major}.${y.minor}`;1===y.major&&2>=y.minor&&(F.spatialReference=L.WebMercator.toJSON());return F};V._updateTypeKeywords=function(F){"local"===this.initialViewProperties.viewingMode?F.typeKeywords?F.typeKeywords.includes("ViewingMode-Local")||F.typeKeywords.push("ViewingMode-Local"):F.typeKeywords=["ViewingMode-Local"]:
"global"===this.initialViewProperties.viewingMode&&F.typeKeywords&&(F.typeKeywords=F.typeKeywords.filter(y=>"ViewingMode-Local"!==y));F.typeKeywords&&(F.typeKeywords=F.typeKeywords.filter((y,x,G)=>G.indexOf(y)===x))};V._enableVerifyItemRelativeUrls=function(F){const y=this._verifyItemRelativeRootPath;y&&(F.verifyItemRelativeUrls={rootPath:y,writtenUrls:[]});return F};V._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};
V._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};V._runLayersIdGC=function(){this._unscheduleLayersIdGC();var F=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;const y=x=>this.allLayers.some(G=>G.id===x);F&&F.layers&&(F.layers=F.layers.filter(x=>y(x.id)));(F=this.presentation&&this.presentation.slides)&&F.forEach(x=>{x.visibleLayers&&
(x.visibleLayers=x.visibleLayers.filter(G=>y(G.id)))})};ma.fromJSON=function(F){if(!F)throw new e("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:F})};f._createClass(ma,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(F){F?this._override("thumbnailUrl",F):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(F){this._isAuthoringAppSetByUser=
!0;this._set("authoringApp",F)}},{key:"authoringAppVersion",set:function(F){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",F)}},{key:"spatialReference",get:function(){return this.initialViewProperties?.spatialReference??L.WebMercator}},{key:"viewingMode",get:function(){return this.initialViewProperties?.viewingMode??"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||L.WebMercator}},{key:"_verifyItemRelativeRootPath",
get:function(){return this.portalItem&&this.portalItem.itemUrl?O.urlToObject(this.portalItem.itemUrl).path:null}}]);return ma}(g.LoadableMixin(M.EsriPromiseMixin(A.MultiOriginJSONMixin(u))));u.version=`${H.major}.${H.minor}`;b.__decorate([Q.property({type:l,json:{write:!0}})],u.prototype,"applicationProperties",void 0);b.__decorate([Q.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],u.prototype,"basemap",void 0);b.__decorate([Q.property({type:ra,json:{read:{source:"clippingArea.geometry",
reader:T.fromJSON},write:{target:"clippingArea.geometry"}}})],u.prototype,"clippingArea",void 0);b.__decorate([fa.writer("clippingArea")],u.prototype,"writeClippingArea",null);b.__decorate([Q.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],u.prototype,"clippingEnabled",void 0);b.__decorate([ea.reader("clippingEnabled",["clippingArea"])],u.prototype,"readClippingEnabled",null);b.__decorate([fa.writer("clippingEnabled")],u.prototype,"writeClippingEnabled",null);b.__decorate([Q.property({type:K,
json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],u.prototype,"floorInfo",void 0);b.__decorate([Q.property({type:h,json:{write:!0}})],u.prototype,"heightModelInfo",void 0);b.__decorate([Q.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],u.prototype,"layers",void 0);b.__decorate([fa.writer("layers")],u.prototype,"writeLayers",null);b.__decorate([Q.property({readOnly:!0,type:z.Version,json:{type:(()=>{const aa=[],ma=H.major;for(let V=8;V<=H.minor;V++)aa.push(`${ma}.${V}`);
return aa})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],u.prototype,"sourceVersion",void 0);b.__decorate([ea.reader("sourceVersion",["version"])],u.prototype,"readSourceVersion",null);b.__decorate([fa.writer("sourceVersion")],u.prototype,"writeSourceVersion",null);b.__decorate([Q.property({json:{read:!1,write:!1}})],u.prototype,"tables",void 0);b.__decorate([Q.property()],u.prototype,"thumbnailUrl",null);b.__decorate([Q.property({type:String,
json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],u.prototype,"authoringApp",null);b.__decorate([fa.writer("authoringApp")],u.prototype,"writeAuthoringApp",null);b.__decorate([Q.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],u.prototype,"authoringAppVersion",null);b.__decorate([fa.writer("authoringAppVersion")],u.prototype,"writeAuthoringAppVersion",null);b.__decorate([Q.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],u.prototype,
"ground",void 0);b.__decorate([fa.writer("ground")],u.prototype,"writeGround",null);b.__decorate([Q.property({type:w.ofType(Y),json:{write:!0}})],u.prototype,"transportationNetworks",void 0);b.__decorate([Q.property({type:R,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(aa,ma,V,F)=>{aa.slides&&0<aa.slides.length&&(ma.presentation=aa.write({},{...F,isPresentation:!0}))}}}})],u.prototype,"presentation",void 0);b.__decorate([Q.property({type:D,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,
ignoreOrigin:!0},default:()=>new D({viewingMode:"global",spatialReference:L.WebMercator})}})],u.prototype,"initialViewProperties",void 0);b.__decorate([ea.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],u.prototype,"readInitialViewProperties",null);b.__decorate([Q.property({type:L,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],u.prototype,"spatialReference",null);b.__decorate([Q.property({type:["local","global"],json:{read:!1,
write:{isRequired:!0,ignoreOrigin:!0}}})],u.prototype,"viewingMode",null);b.__decorate([Q.property({type:p})],u.prototype,"portalItem",void 0);b.__decorate([Q.property()],u.prototype,"resourceInfo",void 0);u=b.__decorate([oa.subclass("esri.WebScene")],u);var ca;(function(aa){aa[aa.SAVE=0]="SAVE";aa[aa.SAVE_AS=1]="SAVE_AS"})(ca||(ca={}));return u});