// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../PopupTemplate ../layers/support/fieldUtils ../popup/content/AttachmentsContent ../popup/content/Content ../popup/content/CustomContent ../popup/content/ExpressionContent ../popup/content/FieldsContent ../popup/content/MediaContent ../popup/content/RelationshipContent ../popup/content/TextContent ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),function(h,m,n,u,F,G,H,k,I,J,K,p,g){function v(a,c){const b=a;c&&(a=a.filter(e=>!c.includes(e.type)));a===b&&(a=a.slice());
a.sort(w);return a}function w(a,c){return"oid"===a.type?-1:"oid"===c.type?1:q(a)?-1:q(c)?1:(a.alias||a.name).toLocaleLowerCase().localeCompare((c.alias||c.name).toLocaleLowerCase())}function r(a,c){if(!a||!c)return!1;const {creationDateField:b,creatorField:e,editDateField:d,editorField:f}=c;return[b&&b.toLowerCase(),e&&e.toLowerCase(),d&&d.toLowerCase(),f&&f.toLowerCase()].includes(a.toLowerCase())}function l({editFieldsInfo:a,fields:c,objectIdField:b},e){return v(c??[],e?.ignoreFieldTypes||x).map(d=>
{var f=d.name;var z=d.editable&&!y.includes(d.type)&&!r(d.name,a);return new p({fieldName:f,isEditable:z,label:d.alias,format:t(d),visible:A(d,{editFieldsInfo:a,objectIdField:b,visibleFieldNames:e?.visibleFieldNames})})})}function B(a,c){return a.map(b=>new p({fieldName:b.name,isEditable:!1,label:b.alias,format:C(b,c),visible:!0}))}function C(a,c){const {onStatisticField:b,onStatisticExpression:e,statisticType:d}=a;return b&&(a=c.find(f=>b===f.name))?t(a):"number"===e?.returnType?new g({digitSeparator:!0,
places:2}):"count"===d?new g({digitSeparator:!0,places:0}):null}function t(a){switch(a.type){case "small-integer":case "integer":case "single":return new g({digitSeparator:!0,places:0});case "double":return new g({digitSeparator:!0,places:2});case "date":return new g({dateFormat:"long-month-day-year"});default:return"string"===a.type&&n.isRasterPixelValueField(a.name)?new g({digitSeparator:!0,places:0}):null}}function q(a){return"name"===(a.name&&a.name.toLowerCase())||"name"===(a.alias&&a.alias.toLowerCase())?
!0:!1}const D=["oid","global-id"],y=["oid","global-id","guid"],E=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],A=(a,{editFieldsInfo:c,objectIdField:b,visibleFieldNames:e})=>e?e.has(a.name):r(a.name,c)?!1:b&&a.name===b?!1:D.includes(a.type)?!1:!E.some(d=>d.test(a.name)),x=["geometry","blob","raster","guid","xml"];h.createFieldInfos=l;h.createFieldsContent=function(a,c){return new k({fieldInfos:l(a,
c).filter(b=>b.visible)})};h.createPopupTemplate=function({displayField:a,editFieldsInfo:c,fields:b,objectIdField:e,title:d},f){if(!b)return null;c=l({editFieldsInfo:c,fields:b,objectIdField:e},f);if(!c.length)return null;b={titleBase:d,fields:b,displayField:a};a=n.getDisplayFieldName(b);({titleBase:b}=b);a=a?`${b}: {${a.trim()}}`:b??"";b=[new k,new u];return new m({title:a,content:b,fieldInfos:c})};h.createPopupTemplateForFeatureReduction=function(a){const {fields:c,featureReduction:b,title:e}=a;
a=b.fields;if(!a)return null;a=B(a,c);if(!a.length)return null;var d=[new k];return new m({title:e,content:d,fieldInfos:a})};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});