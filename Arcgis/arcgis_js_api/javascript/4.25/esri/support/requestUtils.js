// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../config ../core/has ../core/maybe ../core/promiseUtils ../core/urlUtils".split(" "),function(e,v,f,r,t,w,d){function u(){try{return new DOMException("Aborted","AbortError")}catch{const a=Error();a.name="AbortError";return a}}function l(){l=v._asyncToGenerator(function*(a){var b=f.request.crossOriginNoCorsDomains;const c=d.getOrigin(a);b&&c&&(b[c.toLowerCase()]=Date.now());b=d.urlToObject(a);a=b.path;"json"===b.query?.f&&(a+="?f\x3djson");try{yield fetch(a,
{mode:"no-cors",credentials:"include"})}catch{}});return l.apply(this,arguments)}e.isNoCorsRequestRequired=function(a){const b=f.request.crossOriginNoCorsDomains;return b&&(a=d.getOrigin(a))?(a=a.toLowerCase(),!d.hasSameOrigin(a,d.getAppUrl())&&b[a]<Date.now()-36E5):!1};e.loadImageAsync=function(a,b,c=!1,g){return new Promise((x,m)=>{if(w.isAborted(g))m(u());else{var h=()=>{n();m(Error(`Unable to load ${b}`))},k=()=>{const p=a;n();x(p)},q=()=>{if(a){var p=a;n();p.src="";m(u())}},n=()=>{r("esri-image-decode")||
(a.removeEventListener("error",h),a.removeEventListener("load",k));a=k=h=null;t.isSome(g)&&g.removeEventListener("abort",q);q=null;c&&URL.revokeObjectURL(b)};t.isSome(g)&&g.addEventListener("abort",q);r("esri-image-decode")?a.decode().then(k,h):(a.addEventListener("error",h),a.addEventListener("load",k))}})};e.registerNoCorsDomains=function(a){f.request.crossOriginNoCorsDomains||(f.request.crossOriginNoCorsDomains={});const b=f.request.crossOriginNoCorsDomains;for(let c of a)c=c.toLowerCase(),/^https?:\/\//.test(c)?
b[d.getOrigin(c)??""]=0:(b[d.getOrigin("http://"+c)??""]=0,b[d.getOrigin("https://"+c)??""]=0)};e.sendNoCorsRequest=function(a){return l.apply(this,arguments)};Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});