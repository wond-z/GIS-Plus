// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../core/maybe ../../core/urlUtils".split(" "),function(e,m,z,w,h,k){function p(){p=m._asyncToGenerator(function*(a,b={},d){yield a.load(d);var c=k.join(a.itemUrl,"resources");const {start:l=1,num:f=10,sortOrder:n="asc",sortField:g="created"}=b;b={query:{start:l,num:f,sortOrder:n,sortField:g,token:a.apiKey},signal:h.get(d,"signal")};c=yield a.portal._request(c,b);return{total:c.total,nextStart:c.nextStart,resources:c.resources.map(({created:A,
size:B,resource:C})=>({created:new Date(A),size:B,resource:a.resourceFromPath(C)}))}});return p.apply(this,arguments)}function q(){q=m._asyncToGenerator(function*(a,b,d,c){if(!a.hasPath())throw new w(`portal-item-resource-${b}:invalid-path`,"Resource does not have a valid path");const l=a.portalItem;yield l.load(c);b=k.join(l.userItemUrl,"add"===b?"addResources":"updateResources");const [f,n]=x(a.path);d=yield y(d);const g=new FormData;f&&"."!==f&&g.append("resourcesPrefix",f);h.isSome(c)&&c.compress&&
g.append("compress","true");g.append("fileName",n);g.append("file",d,n);g.append("f","json");h.isSome(c)&&c.access&&g.append("access",c.access);yield l.portal._request(b,{method:"post",body:g,signal:h.get(c,"signal")});return a});return q.apply(this,arguments)}function r(){r=m._asyncToGenerator(function*(a,b,d){if(!b.hasPath())throw new w("portal-item-resources-remove:invalid-path","Resource does not have a valid path");yield a.load(d);const c=k.join(a.userItemUrl,"removeResources");yield a.portal._request(c,
{method:"post",query:{resource:b.path},signal:h.get(d,"signal")});b.portalItem=null});return r.apply(this,arguments)}function t(){t=m._asyncToGenerator(function*(a,b){yield a.load(b);const d=k.join(a.userItemUrl,"removeResources");return a.portal._request(d,{method:"post",query:{deleteAll:!0},signal:h.get(b,"signal")})});return t.apply(this,arguments)}function x(a){const b=a.lastIndexOf("/");return-1===b?[".",a]:[a.slice(0,b),a.slice(b+1)]}function u(a){{const f=k.getPathExtension(a);a=h.isNone(f)?
[a,""]:[a.slice(0,a.length-f.length-1),`.${f}`]}const [b,d]=a,[c,l]=x(b);return[c,l,d]}function y(a){return v.apply(this,arguments)}function v(){v=m._asyncToGenerator(function*(a){return a instanceof Blob?a:(yield z(a.url,{responseType:"blob"})).data});return v.apply(this,arguments)}e.addOrUpdateResource=function(a,b,d,c){return q.apply(this,arguments)};e.contentToBlob=y;e.fetchResources=function(a){return p.apply(this,arguments)};e.getSiblingOfSameType=function(a,b){if(!a.hasPath())return null;const [d,
,c]=u(a.path);return a.portalItem.resourceFromPath(k.join(d,b+c))};e.getSiblingOfSameTypeI=function(a,b){if(!a.hasPath())return null;const [d,,c]=u(a.path);return a.portalItem.resourceFromPath(k.join(d,b+c))};e.removeAllResources=function(a,b){return t.apply(this,arguments)};e.removeResource=function(a,b,d){return r.apply(this,arguments)};e.splitPrefixFileNameAndExtension=u;Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});