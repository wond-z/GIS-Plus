// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),function(k,e,c,m,n,
f,g,v,w,p,q,r,t){c=function(l){function h(a){a=l.call(this,a)||this;a.layerListViewModel=new t.SnappingLayerListViewModel;a.snappingOptions=null;a.view=null;return a}k._inheritsLoose(h,l);var d=h.prototype;d.initialize=function(){this.handles.add([f.watch(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:a,view:b})=>{a.view=b},f.initial),f.watch(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:a,sources:b})=>{a.featureSnappingSources=
b},f.initial)])};d.enableSnappingForLayer=function(a){(this._findSnappingSourceForLayer(a)??this._makeSnappingSourceForLayer(a)).enabled=!0};d.disableSnappingForLayer=function(a){if(a=this._findSnappingSourceForLayer(a))a.enabled=!1};d.updateEnabledFeatureSources=function(a){for(const b of this.snappingOptions.featureSources)r.canDisplayLayer(b.layer)&&(b.enabled=a.includes(b.layer.id))};d._findSnappingSourceForLayer=function(a){return this.snappingOptions.featureSources.find(b=>b.layer.id===a)};
d._makeSnappingSourceForLayer=function(a){var {layer:b}=this.layerListViewModel.operationalItemsFlat.find(u=>u.layer.id===a);if(!b)throw new m("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${a} because no such layer was found in the view`);b=new q({layer:b});this.snappingOptions.featureSources.add(b);return b};k._createClass(h,[{key:"state",get:function(){return this.get("snappingOptions")?"ready":"disabled"}}]);return h}(n.HandleOwnerMixin(c));e.__decorate([g.property({constructOnly:!0})],
c.prototype,"layerListViewModel",void 0);e.__decorate([g.property({constructOnly:!0})],c.prototype,"snappingOptions",void 0);e.__decorate([g.property()],c.prototype,"state",null);e.__decorate([g.property({constructOnly:!0})],c.prototype,"view",void 0);return c=e.__decorate([p.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],c)});