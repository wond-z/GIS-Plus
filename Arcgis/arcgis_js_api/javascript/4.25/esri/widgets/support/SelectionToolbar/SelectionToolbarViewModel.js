// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Evented ../../../core/handleUtils ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../Selector2D".split(" "),function(k,c,b,n,l,e,r,t,p,q){b=function(m){function f(a){a=m.call(this,a)||this;a._operationHandlesGroup=null;a.activeOperation=null;a.layers=null;a.selector=new q;
return a}k._inheritsLoose(f,m);var d=f.prototype;d.destroy=function(){this._operationHandlesGroup=l.removeMaybe(this._operationHandlesGroup);this.selector.destroy()};d.cancel=function(){"active"===this.state&&(this.activeOperation.cancel(),this.activeOperation=null);this.selector.candidates=null};d.activate=function(a){const {state:g}=this;if("disabled"!==g)return"active"===g&&this.cancel(),this.selector.candidates=this._getCandidates(),a=this.selector.draw(a),this._operationHandlesGroup=n.handlesGroup([a.once("complete",
h=>this._onOperationComplete(h)),a.on("selection-change",h=>this._onOperationSelectionChange(h))]),this.activeOperation=a};d._getCandidates=function(){let a=[];this.layers.forEach(g=>{a=a.concat(...g.graphics.toArray())});return a};d._onOperationSelectionChange=function(a){this.emit("selection-change",a)};d._onOperationComplete=function(a){this._operationHandlesGroup=l.removeMaybe(this._operationHandlesGroup);this.activeOperation=null;this.emit("complete",a)};k._createClass(f,[{key:"state",get:function(){return this.activeOperation?
"active":this.view?.ready&&this.layers?.length?"ready":"disabled"}},{key:"view",set:function(a){this.selector.view=a;this._set("view",a)}}]);return f}(b.EventedAccessor);c.__decorate([e.property()],b.prototype,"activeOperation",void 0);c.__decorate([e.property()],b.prototype,"layers",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"selector",void 0);c.__decorate([e.property({readOnly:!0})],b.prototype,"state",null);c.__decorate([e.property()],b.prototype,"view",null);return b=c.__decorate([p.subclass("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],
b)});