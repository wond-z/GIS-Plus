// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/uid ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../Widget ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel".split(" "),function(h,q,k,n,w,l,g,x,y,z,C,u,d,A){const v={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,
layerList:!0};g=function(r){function p(a,b){var c=r.call;const {view:f,viewModel:m,snappingOptions:t,...B}=a;b=c.call(r,this,B,b)||this;b._layerListFilter=null;b.messages=null;b.messagesCommon=null;b.visibleElements={...v};b._defaultViewModel=null;a?.viewModel?b.viewModel=a.viewModel:(b._defaultViewModel=new A({snappingOptions:a.snappingOptions,view:a.view}),b.viewModel=b._defaultViewModel);return b}q._inheritsLoose(p,r);var e=p.prototype;e.destroy=function(){this._defaultViewModel=n.destroyMaybe(this._defaultViewModel)};
e.loadDependencies=function(){return Promise.all([new Promise((a,b)=>h(["../../chunks/calcite-accordion"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-accordion-item"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-block"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-checkbox"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-input"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-label"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-list"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-list-item"],
a,b)),new Promise((a,b)=>h(["../../chunks/calcite-panel"],a,b)),new Promise((a,b)=>h(["../../chunks/calcite-switch"],a,b))])};e.castVisibleElements=function(a){return{...v,...a}};e.render=function(){const {label:a,visibleElements:{header:b}}=this;return d.tsx("div",{"aria-label":a,class:this.classes("esri-snapping-controls","esri-widget")},d.tsx("div",{class:"esri-snapping-controls__container"},b?this.renderHeaderView():this.renderContent()))};e.renderHeaderView=function(){return d.tsx("calcite-panel",
{heading:this.label,class:"esri-snapping-controls__panel"},this.renderContent())};e.renderContent=function(){return[this.renderToggles(),this.renderLayerList()]};e.renderToggles=function(){const {visibleElements:{enabledToggle:a,selfEnabledToggle:b,featureEnabledToggle:c}}=this;if(a||b||c)return d.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",key:"toggle-block",heading:"",open:!0},this.renderEnabledToggle(),d.tsx("div",{class:"esri-snapping-controls__nested-container"},this.renderSelfEnabledToggle(),
this.renderFeatureEnabledToggle()))};e.renderEnabledToggle=function(){if(this.visibleElements.enabledToggle){var {messages:{enableSnapping:a},viewModel:{snappingOptions:{enabled:b,enabledToggled:c}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between"},a,d.tsx("calcite-switch",{checked:b,disabled:c,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}};e.renderSelfEnabledToggle=function(){if(this.visibleElements.selfEnabledToggle){var {messages:{geometryGuides:a},viewModel:{snappingOptions:{enabled:b,
selfEnabled:c,enabledToggled:f}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between",key:"self-enabled-toggle"},a,d.tsx("calcite-switch",{checked:c,disabled:f||!b,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}};e.renderFeatureEnabledToggle=function(){if(this.visibleElements.featureEnabledToggle){var {messages:{featureToFeature:a},viewModel:{snappingOptions:{enabled:b,featureEnabled:c,enabledToggled:f}}}=this;return d.tsx("calcite-label",{layout:"inline-space-between",
key:"feature-enabled-toggle"},a,d.tsx("calcite-switch",{checked:c,disabled:f||!b,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}};e.renderLayerList=function(){if(this.visibleElements.layerList){var {messages:a,messagesCommon:b}=this,c=({target:{value:f}})=>this._layerListFilter=""===f?null:new RegExp(f,"i");c=9<this.viewModel.layerListViewModel.operationalItems.length?d.tsx("calcite-input",{class:"esri-snapping-controls__layer-list__filter",clearable:!0,placeholder:a?.searchLayers,
onCalciteInputInput:c}):null;return d.tsx("calcite-block",{key:"list-block","intl-collapse":b?.collapse,"intl-expand":b?.expand,heading:a.snappingLayers,class:"esri-snapping-controls__layer-list-block",open:!0,collapsible:!0},c,d.tsx("calcite-list",{class:"esri-snapping-controls__layer-list"},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,n.unwrap(this._layerListFilter))))}};e.renderLayerListItemCollection=function(a,b){return a.map(c=>{if(b?this._itemTitleMatchesFilter(c,
b):1)return 0<c.children.length?this.renderLayerListItemGroup(c):this.renderLayerListItem(c);const f=c.children.filter(m=>this._itemTitleMatchesFilter(m,b));return 0<f.length?this.renderLayerListItemGroup(c,f):null}).toArray()};e.renderLayerListItem=function(a){var {messages:{untitledLayer:b}}=this;b=a.title||b;const c=d.tsx("calcite-checkbox",{value:a.layer.id,checked:a.enabled,bind:this,onCalciteCheckboxChange:f=>this._handleLayerListItemChange(f.target)});return d.tsx("calcite-list-item",{key:`${this.id}-list-item-${a.uid}`,
onclick:()=>{this._handleLayerListItemChange({checked:!c.properties.checked,value:c.properties.value})}},d.tsx("calcite-label",{class:"esri-snapping-controls__layer-list__item",slot:"content-start",tabIndex:-1,layout:"inline","disable-spacing":"true"},d.tsx("div",{class:"esri-snapping-controls__layer-list__item__checkbox"},c),d.tsx("div",{class:"esri-snapping-controls__layer-list__item__label"},b)))};e.renderLayerListItemGroup=function(a,b){const c=a.title||this.messages.untitledLayer,f=a.title&&
""!==a.title?a.title:w.generateUID();return d.tsx("calcite-list-item",{key:f},d.tsx("calcite-accordion",{"icon-position":"start",appearance:"transparent",afterCreate:m=>{m.append(...Array.from(m.children).map(t=>{t.remove();return t}))}},d.tsx("calcite-accordion-item",{active:!!b,"item-title":c,key:a.uid},d.tsx("calcite-list",null,[...this.renderLayerListItemCollection(b??a.children)]))))};e._enableSnappingSwitchChange=function(a){this.snappingOptions.enabled=a.target.checked};e._featureEnabledSwitchChange=
function(a){this.snappingOptions.featureEnabled=a.target.checked};e._itemTitleMatchesFilter=function(a,b){return b.test(a.title)};e._selfEnabledSwitchChange=function(a){this.snappingOptions.selfEnabled=a.target.checked};e._handleLayerListItemChange=function(){var a=q._asyncToGenerator(function*(b){b.checked?this.viewModel.enableSnappingForLayer(b.value):this.viewModel.disableSnappingForLayer(b.value)});return function(b){return a.apply(this,arguments)}}();q._createClass(p,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(a){this._overrideIfSome("label",a)}},{key:"snappingOptions",get:function(){return this.viewModel.snappingOptions},set:function(a){this.viewModel.snappingOptions=a}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}},{key:"viewModel",set:function(a){if(a!==this._get("viewModel")){if(n.isNone(this._defaultViewModel)||this._defaultViewModel!==a)this._defaultViewModel=n.destroyMaybe(this._defaultViewModel);this._set("viewModel",a)}}}]);return p}(z);
k.__decorate([l.property()],g.prototype,"_layerListFilter",void 0);k.__decorate([l.property()],g.prototype,"label",null);k.__decorate([l.property(),u.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],g.prototype,"messages",void 0);k.__decorate([l.property(),u.messageBundle("esri/t9n/common")],g.prototype,"messagesCommon",void 0);k.__decorate([l.property()],g.prototype,"snappingOptions",null);k.__decorate([l.property()],g.prototype,"view",null);k.__decorate([l.property()],
g.prototype,"viewModel",null);k.__decorate([l.property()],g.prototype,"visibleElements",void 0);k.__decorate([x.cast("visibleElements")],g.prototype,"castVisibleElements",null);return g=k.__decorate([y.subclass("esri.widgets.support.SnappingControls")],g)});