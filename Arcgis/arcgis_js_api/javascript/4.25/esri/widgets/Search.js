// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./SearchViewModel ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(n,a,b,l,f,z,r,u,y,g,e,p){l=function(m){function A(I,
D){I=m.call(this,I,D)||this;I.messages=null;I.showMoreResultsOpen=!1;I.viewModel=null;return I}n._inheritsLoose(A,m);var B=A.prototype;B.render=function(){return e.tsx("div",{class:"esri-search-result-renderer esri-widget"},e.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},this.renderSearchResultName(),this.renderMoreResults()))};B.renderMoreResults=
function(){return e.tsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};B.renderSearchResultName=function(){const I=this.viewModel?.selectedResult;return e.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},I&&I.name||"")};B.renderMoreResultsLists=function(){var I=this.viewModel?.results;const {resultCount:D}=this.viewModel;if(2>D)return null;I=I.map(v=>this.renderMoreResultsList(v));
return e.tsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},I)};B.renderMoreResultsButton=function(){const {messages:I}=this,{resultCount:D}=this.viewModel;return 2>D?null:e.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},e.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?
I.hideMoreResults:I.showMoreResults))};B.renderMoreResultsHeader=function(I,D){return e.tsx("div",{key:`esri-search-result-renderer__header-${D}`,class:"esri-search-result-renderer__more-results-list-header"},I)};B.renderMoreResultsList=function(I){var {results:D}=I,v=D.length;const N=!!v;var L=this.viewModel?.selectedResult;v=1===v&&D[0]===L;L=this._getSourceName(I.source,I.sourceIndex);L=1<this.viewModel?.results.length&&!v?this.renderMoreResultsHeader(L,I.sourceIndex):null;D=N&&D.map((X,da)=>this.renderMoreResultsListItem(X,
da));D=N&&!v?e.tsx("ul",{key:`esri-search-result-renderer__list-${I.sourceIndex}`},D):null;return N?e.tsx("div",{key:`esri-search-result-renderer__results-${I.sourceIndex}`},L,D):null};B.renderMoreResultsListItem=function(I,D){const v=this.get("viewModel.selectedResult");return I!==v?e.tsx("li",{key:`esri-search-result-renderer__list-item-${D}`},e.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":I,onclick:this._selectResultClick,onkeydown:this._selectResultClick},
I.name)):null};B._showMoreResultsClick=function(I){I.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(I=this.get("viewModel.view.popup"))&&I.reposition()};B._selectResultClick=function(I){I.preventDefault();I=I.currentTarget["data-result"];this.viewModel&&this.viewModel.select(I)};B._getSourceName=function(I,D){return D===u.ALL_INDEX?this.messages.all:I.name};return A}(r);a.__decorate([b.property(),g.messageBundle("esri/widgets/Search/t9n/Search")],l.prototype,"messages",void 0);
a.__decorate([b.property()],l.prototype,"showMoreResultsOpen",void 0);a.__decorate([b.property()],l.prototype,"viewModel",void 0);a.__decorate([y.accessibleHandler()],l.prototype,"_showMoreResultsClick",null);a.__decorate([y.accessibleHandler()],l.prototype,"_selectResultClick",null);return l=a.__decorate([z.subclass("esri.widgets.Search.SearchResultRenderer")],l)})},"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../assets ../../config ../../Graphic ../../PopupTemplate ../../symbols ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference ../../intl/locale ../../intl/messages ../../portal/Portal ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/geolocationUtils ../support/GoTo ../../symbols/TextSymbol ../../symbols/PictureMarkerSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol".split(" "),
function(n,a,b,l,f,z,r,u,y,g,e,p,m,A,B,I,D,v,N,L,X,da,C,d,q,x,F,O,W,Z,Y,w,G,H,R,V,K){function E(aa,ea){return aa.hasOwnProperty(ea)&&null!=aa[ea]&&""!==aa[ea]}const Q=m.getLogger("esri.widgets.Search.SearchViewModel"),ba=y.ofType({key:aa=>aa.layer?"layer":"locator",base:W,typeMap:{layer:F,locator:O}}),T=da.WGS84,U=/<(?:.|\s)*?>/g;r=function(aa){function ea(c){c=aa.call(this,c)||this;c._handles=new p;c._gotoController=null;c._searching=null;c._createdFeatureLayers=[];c.autoNavigate=!0;c.autoSelect=
!0;c.defaultPopupTemplate=null;c.defaultSources=new ba;c.defaultSymbols={point:new R({url:b.getAssetUrl("esri/images/search/search-symbol-32.png"),size:24,width:24,height:24}),polyline:new V({color:[130,130,130,1],width:2}),polygon:new K({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})};c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=3;c.popupEnabled=!0;c.popupTemplate=null;c.portal=q.getDefault();c.resultCount=
null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=!0;c.selectedResult=null;c.sources=new ba;c.suggestionDelay=350;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}n._inheritsLoose(ea,aa);var M=ea.prototype;M.initialize=function(){var c=this;const h=function(){var k=n._asyncToGenerator(function*(){const t=yield d.fetchMessageBundle("esri/widgets/Search/t9n/Search");c.messages=t;c.defaultPopupTemplate=
new z({title:t.searchResult,content:"{Match_addr}"})});return function(){return k.apply(this,arguments)}}();h();this._handles.add([I.watch(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),I.initial),C.onLocaleChange(h)])};M.destroy=function(){this._destroyFeatureLayers();this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};M.clear=function(){this.searchTerm=""};M.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);
this._set("resultGraphic",null)};M.search=function(c,h){this.emit("search-start");this.clearGraphics();const k=this._createSuggestionForSearch(c);return this._searching=c=this.when().then(()=>this._getResultsFromSources(k,h).then(t=>{if(A.unwrap(h?.signal)?.aborted)return null;const J={activeSourceIndex:this.activeSourceIndex,searchTerm:k.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(J,t,k);t=this._getFirstResult(J.results);const P=(k.location&&t?t.name:k.text).replace(U,
"");this._set("searchTerm",P);(k.key&&"number"===typeof k.sourceIndex||k.location)&&this._set("selectedSuggestion",k);this._set("results",J.results);this._set("resultCount",J.results.reduce((S,ca)=>S+ca.results.length,0));this.emit("search-complete",J);return this._selectFirstResult(t).then(()=>J)})).then(t=>{this._clearSearching();return t},t=>{this._clearSearching();throw t;})};M.searchNearby=function(c){if(!this.locationEnabled){var h=new g("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",
{geolocation:navigator.geolocation});Q.error(h);return Promise.reject(h)}this._searching=h=w.getCurrentPosition().then(k=>w.positionToPoint({position:k,view:this.view},c)).then(k=>this.search(k,c));h.catch(()=>{}).then(()=>this._clearSearching());return h};M.select=function(c){this.clearGraphics();if(!c){var h=new g("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});Q.error(h);return Promise.reject(h)}const {view:k}=this,t=E(c,"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),
J=this.allSources.at(t);if(!J)return h=new g("select:missing-source","Cannot select without a source.",{source:J}),Q.error(h),Promise.reject(h);h=J instanceof F?this._getLayerSourcePopupTemplate(J):J.popupTemplate;const P=J.resultSymbol||this._getDefaultSymbol(c),S=E(J,"resultGraphicEnabled")?J.resultGraphicEnabled:this.resultGraphicEnabled,ca=E(J,"autoNavigate")?J.autoNavigate:this.autoNavigate,fa=E(J,"popupEnabled")?J.popupEnabled:this.popupEnabled,na=fa?h||this.popupTemplate||this.defaultPopupTemplate:
null,{feature:ha}=c;if(!ha)return h=new g("select:missing-feature","Cannot select without a feature.",{feature:ha}),Q.error(h),Promise.reject(h);const {attributes:pa,geometry:oa,layer:qa,sourceLayer:ra}=ha,la=Z.getPointFromGeometry(oa);h={layerViewQuery:this._getLayerView(ha),elevationQuery:k&&A.isSome(la)?Z.getPointWithElevation(la,k).catch(()=>la):Promise.resolve(la)};return B.eachAlways(h).then(ia=>{const ja=ia.layerViewQuery.value,sa=ia.elevationQuery.value;P instanceof H&&(P.text=c.name);ia=
k&&ca?c.target||c.extent:null;return(A.isSome(ia)?this._goToSearchResult(ia):Promise.resolve()).then(()=>{const ka=ja?ha:new f({geometry:oa,symbol:P,attributes:pa,layer:qa,sourceLayer:ra,popupTemplate:na});var ma=fa&&this.view?.popup;(ma=ma&&ka.getEffectivePopupTemplate(ma.defaultPopupTemplateEnabled))&&k.popup.open({features:[ka],location:sa});ja&&x.highlightsSupported(ja)&&!ma&&this._highlightFeature({graphic:ka,layerView:ja});!ja&&S&&k&&k.graphics.push(ka);this._setResultFloor(c);this._set("selectedResult",
c);this._set("resultGraphic",ka);this.emit("select-result",{result:c,source:J,sourceIndex:t});return c})})};M.suggest=function(c,h,k){const t=c||this.searchTerm;this.emit("suggest-start",{searchTerm:t});return this._suggestTimer(h,k).then(()=>this._suggestImmediate(t,k).then(J=>{this._set("suggestions",J.results);this._set("suggestionCount",J.results.reduce((P,S)=>P+S.results.length,0));this.emit("suggest-complete",J);return J}))};M.when=function(){var c=n._asyncToGenerator(function*(){yield I.whenOnce(()=>
!this.updating)});return function(){return c.apply(this,arguments)}}();M._update=function(){var c=n._asyncToGenerator(function*(){const {portal:h,view:k}=this;if(this.includeDefaultSources){const t=this._updatingPromise=B.eachAlways([h?.load(),k?.when()]);if(this.destroyed)return;yield t;if(t!==this._updatingPromise)return}yield I.whenOnce(()=>this.messages);this.destroyed||this._updateDefaultSources();this._updatingPromise=null});return function(){return c.apply(this,arguments)}}();M._clearSearching=
function(){this._searching=null};M._convertHelperServices=function(){const c=this.portal?.helperServices?.geocode;return c?c.map(h=>{if(!1!==h.placefinding){var k=l.apiKey&&Y.isArcGISWorldGeocoder(h.url)?{url:Y.meteredArcGISLocatorUrl}:null;h=O.fromJSON({...h,...k});k=h.url;(Y.isArcGISWorldGeocoder(k)||Y.isProxiedArcGISWorldGeocoder(k)||Y.isMeteredArcGISWorldGeocoder(k))&&h.set({singleLineFieldName:"SingleLine",outFields:h.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:h.placeholder||
this.messages.placeholder,defaultZoomScale:"number"===typeof h.defaultZoomScale?h.defaultZoomScale:2500});if(h.singleLineFieldName)return h}}).filter(Boolean):[]};M._destroyFeatureLayers=function(){this._createdFeatureLayers.forEach(c=>c?.destroy());this._createdFeatureLayers=[]};M._getLayerSources=function(c,h){const k=this.view?.map;return c.map(t=>{const J=k.findLayerById(t.id);if(J){t=this._getLayerJSON(t);var P=F.fromJSON(t);P.placeholder=h;this._getLayer(J,t).then(S=>{P.layer=S});return P}}).filter(Boolean).toArray()};
M._getTableSources=function(c,h){const k=this.view?.map;return c.map(t=>{const J=k.findTableById(t.id);if(J){t=this._getLayerJSON(t);var P=F.fromJSON(t);P.placeholder=h;this._getLayer(J,t).then(S=>{P.layer=S});return P}}).filter(Boolean).toArray()};M._convertApplicationProperties=function(){var c=this.view?.map?.applicationProperties?.viewing?.search;if(!c)return[];const {enabled:h,hintText:k,layers:t,tables:J}=c;if(!h)return[];c=this._getLayerSources(t,k);const P=this._getTableSources(J,k);return[...c,
...P]};M._getSubLayer=function(){var c=n._asyncToGenerator(function*(h,k){yield h.load();if(!h.allSublayers)throw Error();h=h.allSublayers.find(t=>t.id===k.subLayer);if(!h)throw Error();h=yield h.createFeatureLayer();this._createdFeatureLayers.push(h);return h});return function(h,k){return c.apply(this,arguments)}}();M._getBuildingSubLayer=function(){var c=n._asyncToGenerator(function*(h,k){yield h.load();h=h.allSublayers.find(t=>t.id===k.subLayer);if("building-component"!==h?.type)throw Error();
yield h.load();if(null==h.associatedLayer)throw Error();yield h.associatedLayer.load();return h});return function(h,k){return c.apply(this,arguments)}}();M._getLayer=function(c,h){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,h).catch(()=>{const k=new g("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});Q.error(k);return null}):"building-scene"===
c.type?this._getBuildingSubLayer(c,h):Promise.resolve(null)};M._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};M._updateDefaultSources=function(){const {defaultSources:c,includeDefaultSources:h}=this;this._destroyFeatureLayers();c.removeAll();h&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])};M._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};M._clear=function(){this._abortGoTo();this._set("resultCount",
null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};M._closePopup=function(){const c=this.view?.popup,{resultGraphic:h}=this;if(c&&h){var {selectedFeature:k}=c;k&&k===h&&c.close()}};M._suggestTimer=function(c,h){return B.after(null!=c?c:this.suggestionDelay,null,h&&h.signal)};M._createLocationForSearch=function(c){return c instanceof f?Z.getPointFromGeometry(c.geometry):
c instanceof X?c:Array.isArray(c)&&2===c.length?new X({longitude:c[0],latitude:c[1]}):null};M._createSuggestionForSearch=function(c){if(c&&E(c,"key")&&E(c,"text")&&E(c,"sourceIndex"))return c;const h=this._createLocationForSearch(c),k="string"===typeof c?c:this.searchTerm,{selectedSuggestion:t,selectedResult:J}=this,P=(c=!c&&t&&J)&&t.location;return c&&t.key===J.key&&t.sourceIndex===J.sourceIndex||P?t:{location:A.unwrap(h),text:h?"":k,sourceIndex:null,key:null}};M._getFirstResult=function(c){let h=
null;c&&c.some(k=>{({results:k}=k);k=k[0];const t=!!k;t&&(h=k);return t});return h};M._selectFirstResult=function(c){return this.autoSelect&&c?this.select(c):Promise.resolve(null)};M._suggestImmediate=function(c,h){return this.when().then(()=>this._getSuggestionsFromSources(c,h)).then(k=>{if(A.unwrap(h?.signal)?.aborted)return null;const t={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(t,k);return t})};M._formatSourceResponse=
function(c,h,k){const t=h&&h.value||[];h=h&&h.error;const J=this.allSources.at(k);h?(c.errors.push({sourceIndex:k,source:J,error:h}),Q.error(h),c.numErrors++):(c.results.push({sourceIndex:k,source:J,results:t}),c.numResults+=t.length)};M._formatResponse=function(c,h,k){if(h)if(-1===c.activeSourceIndex){const t=k&&E(k,"sourceIndex")&&-1!==k.sourceIndex?k.sourceIndex:void 0;h.forEach((J,P)=>{this._formatSourceResponse(c,J,void 0!==t?t:P)})}else this._formatSourceResponse(c,h[0],c.activeSourceIndex)};
M._getResultsFromSources=function(c,h){var {allSources:k}=this;const t=!c.location&&E(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,J=[];if(!k.length)return k=new g("search:no-sources-defined","At least one source is required.",{allSources:k}),Q.error(k),Promise.reject(k);-1===t?k.forEach((P,S)=>{J.push(this._getResultsFromSource(c,S,h))}):J.push(this._getResultsFromSource(c,t,h));return B.eachAlways(J)};M._getSuggestionsFromSources=function(c,h){const {allSources:k,activeSourceIndex:t}=this,
J=[];if(!k.length){const P=new g("suggest:no-sources-defined","At least one source is required.",{allSources:k});Q.error(P);return Promise.reject(P)}-1===t?k.forEach((P,S)=>{J.push(this._getSuggestionsFromSource(c,S,h))}):J.push(this._getSuggestionsFromSource(c,t,h));return B.eachAlways(J)};M._getResultsFromSource=function(c,h,k){const t=this.allSources.at(h),{location:J=null}=c,P=this.view?.spatialReference||T,S=E(t,"maxResults")?t.maxResults:this.maxResults,ca=t instanceof F&&E(t,"exactMatch")?
t.exactMatch:!1,{view:fa}=this;return t.getResults({view:fa,sourceIndex:h,location:J,suggestResult:c,spatialReference:P,exactMatch:ca,maxResults:S},k)};M._getSuggestionsFromSource=function(c,h,k){const t=this.allSources.at(h);var J=E(t,"suggestionsEnabled")?t.suggestionsEnabled:this.suggestionsEnabled,P=c.length,S=E(t,"minSuggestCharacters")?t.minSuggestCharacters:this.minSuggestCharacters;if(J&&c.trim()&&P>=S){J=this.view?.spatialReference||T;P=E(t,"maxSuggestions")?t.maxSuggestions:this.maxSuggestions;
({view:S}=this);const ca=t instanceof F&&E(t,"exactMatch")?t.exactMatch:!1;return t.getSuggestions({view:S,sourceIndex:h,suggestTerm:c,spatialReference:J,maxSuggestions:P,exactMatch:ca},k)}return Promise.resolve(null)};M._getLayerSourcePopupTemplate=function(c){const {layer:h}=c;if(h)return E(c,"popupTemplate")?c.popupTemplate:h.popupTemplate};M._getSourceIndexOfResult=function(c){let h=null;this.results.some(k=>k.results.some(t=>t===c?(h=k.sourceIndex,!0):!1));return h};M._goToSearchResult=function(){var c=
n._asyncToGenerator(function*(h){const k=!!h;this._abortGoTo();const t=new AbortController;this._gotoController=t;yield this.callGoTo({target:{target:h},options:{animate:k,signal:t.signal}});this._gotoController=null});return function(h){return c.apply(this,arguments)}}();M._getDefaultSymbol=function(c){const {defaultSymbols:h}=this;c=c.feature?.geometry;if(A.isNone(c))return null;switch(c.type){case "point":case "multipoint":return h.point;case "polyline":return h.polyline;case "extent":case "polygon":return h.polygon;
default:return null}};M._removeHighlight=function(){this._handles.remove("highlight")};M._getLayerView=function(){var c=n._asyncToGenerator(function*(h){const {view:k}=this;if(!h||!k||"building-component"===h.layer.type||"subtype-sublayer"===h.layer.type)return null;({layer:h}=h);yield k.when();return k.whenLayerView(h)});return function(h){return c.apply(this,arguments)}}();M._highlightFeature=function(c){const {graphic:h,layerView:k}=c,{attributes:t,layer:J}=h;({objectIdField:c}=J);c=k.highlight(t&&
t[c]||h);this._handles.add(c,"highlight")};M._setResultFloor=function(c){const {view:h}=this;var k=c.feature?.attributes;(c=c.feature?.sourceLayer)&&"floorInfo"in c&&c?.floorInfo?.floorField&&k&&(k=k[c.floorInfo.floorField],h?.emit("select-result-floor",k))};n._createClass(ea,[{key:"activeSource",get:function(){return this.allSources.at(this.activeSourceIndex)??null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){this._overrideIfSome("activeSourceIndex",
c)}},{key:"allPlaceholder",get:function(){return this.messages?.allPlaceholder},set:function(c){this._overrideIfSome("allPlaceholder",c)}},{key:"allSources",get:function(){const {sources:c,defaultSources:h,includeDefaultSources:k}=this,t="function"===typeof k?k.call(null,{sources:c,defaultSources:h}):k?h.concat(c):c,J=this._get("allSources")||new ba;J.removeAll();J.addMany(t.filter(Boolean));return J}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||w.supported()},set:function(c){if(void 0===
c)this._clearOverride("locationEnabled");else{var h=w.supported();if(c&&!h){const k=new g("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});Q.error(k)}this._override("locationEnabled",!!c&&h)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:h,allPlaceholder:k}=this;if(-1===h)return k;const t=c.at(h);return t?t.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",
c||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return ea}(G.GoToMixin(e.EventedMixin(u)));r.ALL_INDEX=-1;a.__decorate([D.property()],r.prototype,"_searching",void 0);a.__decorate([D.property()],r.prototype,
"_updatingPromise",void 0);a.__decorate([D.property({readOnly:!0,value:null})],r.prototype,"activeSource",null);a.__decorate([D.property()],r.prototype,"activeSourceIndex",null);a.__decorate([D.property()],r.prototype,"allPlaceholder",null);a.__decorate([D.property({readOnly:!0})],r.prototype,"allSources",null);a.__decorate([D.property()],r.prototype,"autoNavigate",void 0);a.__decorate([D.property()],r.prototype,"autoSelect",void 0);a.__decorate([D.property()],r.prototype,"defaultPopupTemplate",void 0);
a.__decorate([D.property({readOnly:!0})],r.prototype,"defaultSources",void 0);a.__decorate([D.property()],r.prototype,"defaultSymbols",void 0);a.__decorate([D.property()],r.prototype,"includeDefaultSources",void 0);a.__decorate([D.property()],r.prototype,"locationEnabled",null);a.__decorate([D.property()],r.prototype,"maxInputLength",void 0);a.__decorate([D.property()],r.prototype,"maxResults",void 0);a.__decorate([D.property()],r.prototype,"maxSuggestions",void 0);a.__decorate([D.property()],r.prototype,
"messages",void 0);a.__decorate([D.property()],r.prototype,"minSuggestCharacters",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"placeholder",null);a.__decorate([D.property()],r.prototype,"popupEnabled",void 0);a.__decorate([D.property({type:z})],r.prototype,"popupTemplate",void 0);a.__decorate([D.property({type:q})],r.prototype,"portal",void 0);a.__decorate([D.property()],r.prototype,"resultCount",void 0);a.__decorate([D.property()],r.prototype,"resultGraphicEnabled",void 0);a.__decorate([D.property({readOnly:!0})],
r.prototype,"resultGraphic",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"results",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"selectedSuggestion",void 0);a.__decorate([D.property()],r.prototype,"searchAllEnabled",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"selectedResult",void 0);a.__decorate([D.property()],r.prototype,"searchTerm",null);a.__decorate([D.property({type:ba})],r.prototype,"sources",void 0);a.__decorate([D.property({readOnly:!0})],
r.prototype,"state",null);a.__decorate([D.property()],r.prototype,"suggestionDelay",void 0);a.__decorate([D.property()],r.prototype,"suggestionCount",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"suggestions",void 0);a.__decorate([D.property()],r.prototype,"suggestionsEnabled",void 0);a.__decorate([D.property({readOnly:!0})],r.prototype,"updating",null);a.__decorate([D.property()],r.prototype,"view",void 0);a.__decorate([D.property()],r.prototype,"clear",null);return r=a.__decorate([L.subclass("esri.widgets.Search.SearchViewModel")],
r)})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(n,a){n.extractSafeScaleBounds=function(b){b=b.effectiveScaleRange;return{minScale:b?.minScale??0,maxScale:b?.maxScale??0}};n.highlightsSupported=function(b){return b&&"function"===typeof b.highlight};n.isScaleRangeActive=function(b,l){return 0<b||0<l};n.occludeesSupported=function(b){return b&&"function"===typeof b.maskOccludee};n.scaleBoundsPredicate=function(b,l,f){return a.isNone(b)||b>f&&(0===l||
b<l)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/layerSearchUtils".split(" "),function(n,a,b,l,f,z,r,u){var y;f=y=function(g){function e(m){var A=g.call(this,
m)||this;A.displayField=null;A.exactMatch=null;A.orderByFields=null;A.searchFields=null;A.searchTemplate=null;A.suggestionTemplate=null;A.getResults=(B,I)=>u.getResults({source:n._assertThisInitialized(A),...B},I);A.getSuggestions=(B,I)=>u.getSuggestions({source:n._assertThisInitialized(A),...B},I);return A}n._inheritsLoose(e,g);var p=e.prototype;p.clone=function(){return new y({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,
outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?b.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,
zoomScale:this.zoomScale})};p._getFirstStringField=function(){return this.layer.fieldsIndex.fields.find(m=>"string"===m.type)?.name??""};p._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};p._getSearchFieldsString=function(){const {layer:m,searchFields:A}=this;return m.loaded?`: ${(A||[this._getDisplayField()]).map(B=>{const I=m.getField(B);return I&&I.alias||B}).join(", ")}`:""};p._getLayerTitle=function(){var {layer:m}=this;if(m&&({title:m}=
m,m))return`${m}${this._getSearchFieldsString()}`};n._createClass(e,[{key:"layer",set:function(m){this._set("layer",m);m&&m.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()??""},set:function(m){this._overrideIfSome("name",m)}}]);return e}(r);a.__decorate([l.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],f.prototype,"displayField",void 0);a.__decorate([l.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],
f.prototype,"exactMatch",void 0);a.__decorate([l.property({value:null})],f.prototype,"layer",null);a.__decorate([l.property()],f.prototype,"name",null);a.__decorate([l.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);a.__decorate([l.property()],f.prototype,"searchFields",void 0);a.__decorate([l.property()],f.prototype,"searchTemplate",void 0);a.__decorate([l.property()],f.prototype,"suggestionTemplate",void 0);return f=y=a.__decorate([z.subclass("esri.widgets.Search.LayerSearchSource")],
f)})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(n,a,b,l,f,z,r,u){b=function(y){function g(e){e=y.call(this,e)||this;e.autoNavigate=null;e.filter=null;e.getResults=null;e.getSuggestions=null;e.maxResults=null;
e.maxSuggestions=null;e.minSuggestCharacters=null;e.outFields=null;e.placeholder="";e.popupEnabled=null;e.popupTemplate=null;e.prefix="";e.resultGraphicEnabled=null;e.resultSymbol=null;e.suggestionsEnabled=null;e.suffix="";e.withinViewEnabled=!1;e.zoomScale=null;return e}n._inheritsLoose(g,y);return g}(b.IdentifiableMixin(l.JSONSupport));a.__decorate([f.property()],b.prototype,"autoNavigate",void 0);a.__decorate([f.property()],b.prototype,"filter",void 0);a.__decorate([f.property()],b.prototype,"getResults",
void 0);a.__decorate([f.property()],b.prototype,"getSuggestions",void 0);a.__decorate([f.property()],b.prototype,"maxResults",void 0);a.__decorate([f.property()],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property()],b.prototype,"minSuggestCharacters",void 0);a.__decorate([f.property()],b.prototype,"outFields",void 0);a.__decorate([f.property()],b.prototype,"placeholder",void 0);a.__decorate([f.property()],b.prototype,"popupEnabled",void 0);a.__decorate([f.property()],b.prototype,"popupTemplate",
void 0);a.__decorate([f.property()],b.prototype,"prefix",void 0);a.__decorate([f.property()],b.prototype,"resultGraphicEnabled",void 0);a.__decorate([f.property()],b.prototype,"resultSymbol",void 0);a.__decorate([f.property()],b.prototype,"suggestionsEnabled",void 0);a.__decorate([f.property()],b.prototype,"suffix",void 0);a.__decorate([f.property()],b.prototype,"withinViewEnabled",void 0);a.__decorate([f.property()],b.prototype,"zoomScale",void 0);return b=a.__decorate([u.subclass("esri.widgets.Search.SearchSource")],
b)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/unitUtils ../../../geometry/Polygon ../../../rest/support/FullTextSearch ./geometryUtils ../../../intl/substitute ../../../intl/date".split(" "),function(n,a,b,l,f,z,r,u,y,g,e,p,m){function A(w,G){const {filter:H,withinViewEnabled:R}=w;w=G&&G.extent;return H&&H.geometry||
(R&&w?w:void 0)}function B(w){return I.apply(this,arguments)}function I(){I=a._asyncToGenerator(function*(w){w&&(yield w.load())});return I.apply(this,arguments)}function D(w,G){return(w=w?.indexes)&&G?.length?w.filter(H=>"FullText"===H.indexType).some(H=>{const R=H.fields?.split(",").map(V=>V.trim().toLowerCase())||[];return G.every(V=>R.includes(V.toLowerCase()))}):!1}function v(w){return w?.fieldsIndex?.fields?.find(G=>"string"===G.type)?.name??""}function N(w,G){return w&&G?.length?G.every(H=>
!!w.getField(H)):!1}function L(w,G,H){let R=null;({codedValues:w}=w);w&&w.some(V=>{var K=V.name;K=H?K:K.toLowerCase();return(H?G:G.toLowerCase())===K?(R=V.code.toString(),!0):!1});return R}function X(w,G){return(G=G&&G.where)?`(${w}) AND (${G})`:w}function da({currentTerm:w,field:G,filter:H,exactMatch:R,url:V,type:K}){var E=G.type;G=G.name;if("string"===E||"date"===E||"global-id"===E){if(E=V=W.test(V))a:{for(E=0;E<w.length;E++)if(255<w.charCodeAt(E)){E=!0;break a}E=!1}E=E?"N":"";if(R&&"search"===
K)return X(`${G} = ${E}'${w}'`,H);if(V)return X(`${G} LIKE ${E}${`'${w}%'`}`,H);R=`LOWER(${G})`;w=w.toLowerCase();return X(`${R} LIKE ${E}${`'${w}%'`}`,H)}return"oid"===E||"small-integer"===E||"integer"===E||"single"===E||"double"===E?(w=Number(w),isNaN(w)?null:X(`${G} = ${w}`,H)):X(`${G} = ${w}`,H)}function C({searchTerm:w,layer:G,searchFields:H,filter:R,exactMatch:V,query:K,type:E}){const {definitionExpression:Q,url:ba}=G;let T="";!K.fullText&&w&&H&&H.forEach(U=>{var aa=G.getField(U);U=((U="function"===
typeof G.getFieldDomain&&G.getFieldDomain(U))&&"coded-value"===U.type?L(U,w,V):null)||w||null;null!==U&&(aa=da({currentTerm:U,field:aa,filter:R,exactMatch:V,url:ba,type:E}))&&(T+=T?` OR (${aa})`:`(${aa})`)});return Q&&T?`(${Q}) AND (${T})`:Q||T}function d(w,G){let H=null;({codedValues:w}=w);w&&w.length&&w.some(R=>R.code===G?(H=R.name,!0):!1);return H}function q(w,G){return w[Object.keys(w).find(H=>H.toLowerCase()===G.toLowerCase())]}function x(w,G,H){const R=w.sourceLayer,{attributes:V}=w;w="function"===
typeof R.getFieldDomain&&R.getFieldDomain(H);return G?p.substitute(G,V):H&&V?(G=R.getField(H),H=q(V,H),null==H?"":w&&"coded-value"===w.type?d(w,H):"date"===G?.type?m.formatDate(new Date(H)):"number"===typeof H?H.toString():"string"!==typeof H?"":H.trim()):""}function F(w,G,H,R){return w.features.map(V=>{var K=V.sourceLayer,{attributes:E}=V;({objectIdField:K}=K);E=E[K];return{text:x(V,G.suggestionTemplate,R),key:E,sourceIndex:H}})}function O(w,G,H,R,V,K,E){return w.features.map(Q=>{const ba=Q.clone();
var T=Q.sourceLayer;T=(T=T&&T.objectIdField)&&Q.attributes[T];const U=x(Q,H.searchTemplate,V);var aa=e.createExtentFromGeometry(ba.geometry,G,K);aa="number"===typeof E?e.scaleExtent(f.clone(aa),G,E):aa;Q=Q.clone();r.isSome(aa)&&(Q.geometry=y.fromExtent(aa));return{extent:aa,target:Q,feature:ba,key:T,name:U,sourceIndex:R}})}const W=/https?:\/\/services.*\.arcgis\.com/i,Z=/(?:\{([^}]+)\})/g,Y=z.getLogger("esri.widgets.Search.support.layerSearchUtils");n.getResults=function(w,G){const {exactMatch:H=
!1,location:R,maxResults:V,spatialReference:K,source:E,sourceIndex:Q,suggestResult:ba,view:T}=w,{layer:U,filter:aa,zoomScale:ea}=E,M=T&&T.scale,c=A(E,T),h=G&&G.signal;return B(U).then(()=>{const k=U.popupTemplate;return k?k.getRequiredFields(U.fieldsIndex):null}).then(k=>{const {objectIdField:t,returnZ:J}=U,P=E.displayField||E.layer.displayField||v(E.layer);if(!U.getField(P))throw Y.error("invalid-field: displayField is invalid."),new l("getResults():invalid-field","displayField is invalid.");k=k&&
k.length?k:[P];var S=E.outFields||k;k=S&&S.includes("*");S.includes(t)||k||S.push(t);U.floorInfo?.floorField&&S.push(U.floorInfo.floorField);if(!k&&!N(U,S))throw Y.error("invalid-field: outField is invalid."),new l("getResults():invalid-field","outField is invalid.");k=U.createQuery();var {orderByFields:ca}=E;ca&&(k.orderByFields=ca);K&&(k.outSpatialReference=K,ca=1/u.getMetersPerUnitForSR(K))&&(k.maxAllowableOffset=ca);ca="mesh"===U.geometryType||"multipatch"===U.geometryType;k.returnZ=U.capabilities?.data?.supportsZ&&
!ca&&!1!==J;k.returnGeometry=!0;k.multipatchOption=ca?"xyFootprint":null;S&&(k.outFields=S);if(R)k.geometry=R;else if(ba.key)k.objectIds=[ba.key];else{S=E.searchFields||[P];if(!N(U,S))throw Y.error("invalid-field: search field is invalid."),new l("getResults():invalid-field","search field is invalid.");(U?.capabilities?.query?.supportsPagination??!1)&&(k.num=V);c&&(k.geometry=c);if(!ba.text.trim())return[];ca=ba.text;const {prefix:fa="",suffix:na=""}=E,ha=`${fa}${ca}${na}`.replace(/'/g,"''");(U?.capabilities?.query?.supportsFullTextSearch??
!1)&&D(U,S)&&!H&&ca&&(k.fullText=[new g({onFields:S,searchTerm:ca,searchType:"prefix"})]);S=C({searchTerm:ha,layer:U,searchFields:S,filter:aa,exactMatch:H,query:k,type:"search"});k.where=S;if(!k.fullText&&!k.where)return[]}return U.queryFeatures(k,{signal:h}).then(fa=>O(fa,T,E,Q,P,M,ea))})};n.getSuggestions=function(w,G){const {source:H,spatialReference:R,view:V,suggestTerm:K,maxSuggestions:E,sourceIndex:Q,exactMatch:ba}=w,{layer:T,filter:U}=H,aa=G&&G.signal,ea=A(H,V);return B(T).then(()=>{if(!(T?.capabilities?.query?.supportsPagination??
!1))return[];const M=H.displayField||H.layer.displayField||v(H.layer);var c=H.searchFields||[M];const h=[];H.suggestionTemplate?H.suggestionTemplate.replace(Z,(ca,fa)=>{h.push(fa);return ca}):h.push(M);var k=h&&h.includes("*");h.includes(T.objectIdField)||k||h.push(T.objectIdField);var t=!!T.getField(M);k=k||N(T,h);const J=N(T,c);if(!t)throw Y.error("invalid-field: displayField is invalid."),new l("getSuggestions():invalid-field","displayField is invalid.");if(!k)throw Y.error("invalid-field: outField is invalid."),
new l("getSuggestions():invalid-field","outField is invalid.");if(!J)throw Y.error("invalid-field: search field is invalid."),new l("getSuggestions():invalid-field","search field is invalid.");t=T.createQuery();({orderByFields:k}=H);k&&(t.orderByFields=k);t.outSpatialReference=R;t.returnGeometry=!1;t.num=E;t.outFields=h;ea&&(t.geometry=ea);if(!K.trim())return[];const {prefix:P="",suffix:S=""}=H;k=`${P}${K}${S}`.replace(/'/g,"''");(T?.capabilities?.query?.supportsFullTextSearch??!1)&&D(T,c)&&!ba&&
K&&(t.fullText=[new g({onFields:c,searchTerm:K,searchType:"prefix"})]);c=C({searchTerm:k,layer:T,searchFields:c,filter:U,exactMatch:ba,query:t,type:"suggest"});t.where=c;return t.fullText||t.where?T.queryFeatures(t,{signal:aa}).then(ca=>F(ca,H,Q,M)):[]})};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../geometry/support/scaleUtils ../../../geometry/Extent".split(" "),
function(n,a,b,l,f,z,r){function u(g,e,p){const m=g.hasZ?g.z:void 0;return e&&e.map?(p?z.getExtentForScale(e,p):e.extent).clone().centerAt(g).set({zmax:m,zmin:m}):new r({xmin:g.x-.25,ymin:g.y-.25,xmax:g.x+.25,ymax:g.y+.25,spatialReference:g.spatialReference,zmin:m,zmax:m})}const y=l.getLogger("esri.widgets.Search.support.geometryUtils");n.createExtentFromGeometry=function(g,e,p){if(f.isNone(g))return null;if("extent"===g.type)return g;if("multipoint"===g.type||"polygon"===g.type||"polyline"===g.type)return g.extent;
if("point"===g.type)return u(g,e,p)};n.getPointFromGeometry=function(g){if(f.isNone(g))return null;switch(g.type){case "point":return g;case "extent":return g.center;case "polygon":return g.centroid;case "multipoint":return g.getPoint(0);case "polyline":return g.getPoint(0,0)}return null};n.getPointWithElevation=function(g,e){if(!e)return y.error("missing-parameter: view is missing."),Promise.reject(new b("searchgeometryutils:missing-parameter","view is missing."));if(!g)return y.error("missing-parameter: point is missing."),
Promise.reject(new b("searchgeometryutils:missing-parameter","point is missing."));if(g.hasZ||"2d"===e.type)return Promise.resolve(g);const p=e?.map?.ground;return p&&p.layers.length?p.queryElevation(g,{cache:e.basemapTerrain?.elevationQueryCache}).then(m=>m.geometry):Promise.resolve(g)};n.scaleExtent=function(g,e,p){return f.isNone(g)||f.isNone(e)?null:u(g.center,e,p)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/scaleUtils":function(){define(["exports",
"../../core/unitUtils"],function(n,a){function b(l,f){f=a.getMetersPerUnitForSR(f);return l/(f*a.inchesPerMeter*96)}n.getExtentForScale=function(l,f){const z=l.extent;l=l.width-(l.padding?l.padding.left+l.padding.right:0);f=b(f,z.spatialReference);return z.clone().expand(f*l/z.width)};n.getResolutionForScale=b;n.getResolutionInMetersForScale=function(l){return l/(96*a.inchesPerMeter)};n.getScale=function(l,f){f=f||l.extent;l=l.width;const z=a.getMetersPerUnitForSR(f&&f.spatialReference);return f&&
l?f.width/l*z*a.inchesPerMeter*96:0};n.getScaleForResolution=function(l,f){f=a.getMetersPerUnitForSR(f);return l*f*a.inchesPerMeter*96};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchSource ./support/locatorUtils".split(" "),
function(n,a,b,l,f,z,r,u){var y;f=y=function(g){function e(p){var m=g.call(this,p)||this;m.apiKey=null;m.categories=null;m.countryCode=null;m.defaultZoomScale=null;m.localSearchDisabled=!1;m.locationType=null;m.name="";m.placeholder="";m.searchTemplate="";m.singleLineFieldName=null;m.suggestionsEnabled=null;m.url=null;m.zoomScale=null;m.getResults=(A,B)=>u.getResults({source:n._assertThisInitialized(m),...A},B);m.getSuggestions=(A,B)=>u.getSuggestions({source:n._assertThisInitialized(m),...A},B);
return m}n._inheritsLoose(e,g);e.prototype.clone=function(){return new y({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?b.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,
suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?b.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return e}(r);a.__decorate([l.property()],f.prototype,"apiKey",void 0);a.__decorate([l.property()],f.prototype,"categories",void 0);a.__decorate([l.property()],f.prototype,"countryCode",void 0);a.__decorate([l.property({json:{write:!0}})],
f.prototype,"defaultZoomScale",void 0);a.__decorate([l.property()],f.prototype,"localSearchDisabled",void 0);a.__decorate([l.property()],f.prototype,"locationType",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"name",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"placeholder",void 0);a.__decorate([l.property()],f.prototype,"searchTemplate",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"singleLineFieldName",void 0);a.__decorate([l.property({json:{read:{source:"suggest"},
write:{target:"suggest"}}})],f.prototype,"suggestionsEnabled",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"url",void 0);a.__decorate([l.property({json:{write:!0}})],f.prototype,"zoomScale",void 0);return f=y=a.__decorate([z.subclass("esri.widgets.Search.LocatorSearchSource")],f)})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../Graphic ../../../core/maybe ../../../geometry/Polygon ../../../rest/locator/addressToLocations ../../../rest/locator/locationToAddress ../../../rest/locator/suggestLocations ../../../rest/support/AddressToLocationsParameters ../../../rest/support/LocationToAddressParameters ../../../rest/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(n,a,b,l,f,z,r,u,y,g,e){function p(v,N){if(N.localSearchDisabled)return null;N=v?.scale;return"number"===typeof N&&3E5>=N?v.get("extent.center"):null}function m(v,N){const {source:L,spatialReference:X,location:da,sourceIndex:C,view:d}=v,{apiKey:q,url:x,zoomScale:F,defaultZoomScale:O}=L,W=d&&d.scale;v=N&&N.signal;N=new y;N.location=da;q&&(N.apiKey=q);X&&(N.outSpatialReference=X);return z.locationToAddress(x,N,{signal:v}).then(Z=>D([Z],{sourceIndex:C,scale:W,view:d,zoomScale:F,defaultZoomScale:O})).catch(()=>
[])}function A(v,N){const {filter:L,withinViewEnabled:X}=v;v=N&&N.extent;return(N=e.createExtentFromGeometry(L&&L.geometry,N,N&&N.scale))||(X&&v?v:void 0)}function B(v,N){const {source:L,suggestResult:X,spatialReference:da,view:C,maxResults:d,sourceIndex:q}=v,x=L&&L.zoomScale,F=L&&L.defaultZoomScale;if(!X.text.trim())return Promise.resolve(null);v=`${!X.key&&L.prefix?L.prefix:""}${X.text}${!X.key&&L.suffix?L.suffix:""}`;const O=new u,{apiKey:W,url:Z}=L,Y=C&&C.scale;var w=A(L,C);N=N&&N.signal;W&&(O.apiKey=
W);if(!Z)return Promise.resolve(null);L.categories&&(O.categories=L.categories);L.locationType&&(O.locationType=L.locationType);da&&(O.outSpatialReference=da);const G=p(C,L);G&&(O.location=G);O.maxLocations=d;w&&(O.searchExtent=b.unwrap(w));L.countryCode&&(O.countryCode=L.countryCode);({key:w}=X);const H=`${w}`;w&&(O.magicKey=H);O.address={};O.address[L.singleLineFieldName||"Single Line Input"]=v;L.outFields&&(O.outFields=L.outFields);return f.addressToLocations(Z,O,{signal:N}).then(R=>D(R,{key:H,
scale:Y,sourceIndex:q,view:C,zoomScale:x,defaultZoomScale:F}))}function I(v,N){return v.map(L=>({text:L.text,key:L.magicKey,sourceIndex:N}))}function D(v,N){return v.filter(Boolean).map(L=>{const {key:X,scale:da,sourceIndex:C,view:d,zoomScale:q,defaultZoomScale:x}=N,{attributes:F,extent:O,location:W,address:Z}=L;L=new a({geometry:W,attributes:F});var Y=O||W,w=e.createExtentFromGeometry(Y,d,da);Y="number"===typeof q?e.scaleExtent(w,d,q):"number"===typeof x&&"point"===Y.type?e.scaleExtent(w,d,x):w;
w=W?`${W.x},${W.y}`:"";w=Z||w;const G=L.clone();b.isSome(Y)&&(G.geometry=l.fromExtent(Y));return{extent:Y,feature:L,target:G,key:X,name:w,sourceIndex:C}})}n.getLocation=p;n.getResults=function(v,N){return v.location?m(v,N):B(v,N)};n.getSuggestions=function(v,N){const {source:L,spatialReference:X,view:da,suggestTerm:C,maxSuggestions:d,sourceIndex:q}=v;v=new g;const {apiKey:x,url:F}=L,O=A(L,da);N=N&&N.signal;if(!F)return Promise.resolve(null);x&&(v.apiKey=x);L.categories&&(v.categories=L.categories);
X&&(v.outSpatialReference=X);const W=p(da,L);W&&(v.location=W);if(!C.trim())return Promise.resolve(null);const {prefix:Z="",suffix:Y=""}=L;v.text=`${Z}${C}${Y}`;O&&(v.searchExtent=b.unwrap(O));v.maxSuggestions=d;L.countryCode&&(v.countryCode=L.countryCode);return r.suggestLocations(F,v,{signal:N}).then(w=>I(w,q))};n.isArcGISWorldGeocoder=function(v){return v?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(v):!1};n.isMeteredArcGISWorldGeocoder=function(v){return v?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(v):
!1};n.isProxiedArcGISWorldGeocoder=function(v){return v?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(v):!1};n.meteredArcGISLocatorUrl="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/addressToLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ./utils ../support/AddressCandidate ../support/AddressToLocationsParameters".split(" "),
function(n,a,b,l,f,z,r){function u(){u=a._asyncToGenerator(function*(g,e,p){e=r.from(e);g=l.parseUrl(g);const {address:m,...A}=e.toJSON();e=l.encode({...g.query,...m,...A,f:"json"});p=l.asValidOptions(e,p);return b(`${g.path}/findAddressCandidates`,p).then(y)});return u.apply(this,arguments)}function y({data:g}){if(!g)return[];const {candidates:e,spatialReference:p}=g;return e?e.map(m=>{if(m){var {extent:A,location:B}=m,I=A?f.isValidExtent(A):!0;if(f.isValidLocation(B)&&I)return A&&(A.spatialReference=
p),B.spatialReference=p,z.fromJSON(m)}}):[]}n.addressToLocations=function(g,e,p){return u.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/utils":function(){define(["exports"],function(n){n.isValidExtent=function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax};n.isValidLocation=function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y};
Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Point".split(" "),function(n,a,b,l,f,z,r,u,y){b=function(g){function e(p){p=g.call(this,
p)||this;p.address=null;p.attributes=null;p.extent=null;p.location=null;p.score=null;return p}n._inheritsLoose(e,g);return e}(b.JSONSupport);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([l.property({type:Object,json:{write:!0}})],b.prototype,"attributes",void 0);a.__decorate([l.property({type:u,json:{write:!0}})],b.prototype,"extent",void 0);a.__decorate([l.property({type:y,json:{write:!0}})],b.prototype,"location",void 0);a.__decorate([l.property({type:Number,
json:{write:!0}})],b.prototype,"score",void 0);return b=a.__decorate([r.subclass("esri.rest.support.AddressCandidate")],b)})},"esri/rest/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(n,a,b,l,f,z,r,u,y,g,e,p){b=function(m){function A(B){B=m.call(this,B)||this;B.address=null;B.apiKey=null;B.categories=null;B.countryCode=null;B.forStorage=null;B.location=null;B.locationType=null;B.magicKey=null;B.maxLocations=null;B.outFields=null;B.outSpatialReference=null;B.searchExtent=null;return B}n._inheritsLoose(A,m);return A}(l.JSONSupport);a.__decorate([f.property({type:Object,json:{write:!0}})],b.prototype,"address",void 0);a.__decorate([f.property(y.apiKey)],b.prototype,"apiKey",
void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:m=>m?m.split(","):null},write:{target:"category",writer:(m,A)=>{A.category=m?m.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"forStorage",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(m,A)=>{A.location=m?m.clone().normalize():null}}}})],
b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"locationType",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxLocations",void 0);a.__decorate([f.property({type:[String],json:{write:{writer:(m,A)=>{A.outFields=m?m.join(","):null}}}})],b.prototype,"outFields",void 0);a.__decorate([f.property({type:e,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(m,A)=>{m=m?m.shiftCentralMeridian():null;A.searchExtent=m}}}})],b.prototype,"searchExtent",void 0);b=a.__decorate([u.subclass("esri.rest.support.AddressToLocationsParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/support/commonProperties":function(){define(["exports"],function(n){n.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/locator/locationToAddress":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/AddressCandidate ../support/LocationToAddressParameters".split(" "),function(n,a,b,l,f,z){function r(){r=a._asyncToGenerator(function*(y,g,e){g=z.from(g);y=l.parseUrl(y);g={...g.toJSON(),f:"json"};g=l.encode({...y.query,...g});e=l.asValidOptions(g,e);return b(`${y.path}/reverseGeocode`,e).then(u)});
return r.apply(this,arguments)}function u({data:y}){if(y){var {address:g,location:e}=y;return f.fromJSON({address:g&&g.Match_addr||"",attributes:g||{},location:e,score:100})}}n.locationToAddress=function(y,g,e){return r.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(n,a,b,l,f,z,r,u,y,g,e){b=function(p){function m(A){A=p.call(this,A)||this;A.apiKey=null;A.location=null;A.locationType=null;A.outSpatialReference=null;return A}n._inheritsLoose(m,p);return m}(l.JSONSupport);a.__decorate([f.property(y.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(p,m)=>{p=p?p.clone().normalize():null;m.location="undefined"!==typeof p?p:null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],
b.prototype,"locationType",void 0);a.__decorate([f.property({type:e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);b=a.__decorate([u.subclass("esri.rest.support.LocationToAddressParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/locator/suggestLocations":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../utils ../support/SuggestionCandidate ../support/SuggestLocationsParameters".split(" "),function(n,a,b,
l,f,z){function r(){r=a._asyncToGenerator(function*(y,g,e){y=l.parseUrl(y);g=z.from(g);g={...g.toJSON(),f:"json"};g=l.encode({...y.query,...g});e=l.asValidOptions(g,e);return b(`${y.path}/suggest`,e).then(u)});return r.apply(this,arguments)}function u(y){({data:y}=y);if(!y)return[];({suggestions:y}=y);return y?y.map(g=>new f(g)):[]}n.suggestLocations=function(y,g,e){return r.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,z,r){b=function(u){function y(g){g=u.call(this,g)||this;g.isCollection=null;g.magicKey=null;g.text=null;return g}n._inheritsLoose(y,u);return y}(b.JSONSupport);a.__decorate([l.property({type:Boolean,json:{write:!0}})],b.prototype,"isCollection",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"magicKey",void 0);a.__decorate([l.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);return b=a.__decorate([r.subclass("esri.rest.support.SuggestionCandidate")],
b)})},"esri/rest/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ../../geometry/Point ../../geometry/SpatialReference ../../geometry/Extent".split(" "),function(n,a,b,l,f,z,r,u,y,g,e,p){b=function(m){function A(B){B=m.call(this,
B)||this;B.apiKey=null;B.categories=null;B.countryCode=null;B.location=null;B.maxSuggestions=null;B.outSpatialReference=null;B.searchExtent=null;B.text=null;return B}n._inheritsLoose(A,m);return A}(l.JSONSupport);a.__decorate([f.property(y.apiKey)],b.prototype,"apiKey",void 0);a.__decorate([f.property({type:[String],json:{read:{source:"category",reader:m=>m?m.split(","):null},write:{target:"category",writer:(m,A)=>{A.category=m?m.join(","):null}}}})],b.prototype,"categories",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],b.prototype,"countryCode",void 0);a.__decorate([f.property({type:g,json:{write:{writer:(m,A)=>{A.location=m?m.clone().normalize():null}}}})],b.prototype,"location",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"maxSuggestions",void 0);a.__decorate([f.property({type:e,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([f.property({type:p,json:{write:{writer:(m,A)=>{m=m?m.shiftCentralMeridian():
null;A.searchExtent=JSON.stringify(m)}}}})],b.prototype,"searchExtent",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);b=a.__decorate([u.subclass("esri.rest.support.SuggestLocationsParameters")],b);b.from=r.ensureType(b);return b})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../config ../../core/Error ../../core/has ../../core/Logger ../../geometry/Point ../../geometry/support/webMercatorUtils ../../portal/Portal ../../chunks/_rollupPluginBabelHelpers ../../request ../../kernel ../../core/arrayUtils ../../core/urlUtils ../../geometry ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../rest/geometryService/units ../../rest/operations/generalize ../../rest/support/GeneralizeParameters ../../rest/operations/lengths ../../rest/support/LengthsParameters ../../rest/operations/offset ../../rest/support/OffsetParameters ../../rest/geometryService/project ../../rest/operations/relation ../../rest/support/RelationParameters ../../rest/operations/trimExtend ../../rest/support/TrimExtendParameters ../../rest/support/ProjectParameters".split(" "),
function(n,a,b,l,f,z,r,u,y,g,e,p,m,A,B,I,D,v,N,L,X,da,C,d,q,x,F,O,W,Z,Y,w){function G(K,E,Q){if(!E)return Promise.resolve(K);const ba=E.spatialReference;return ba.isWGS84?Promise.resolve(K):ba.isWebMercator?Promise.resolve(r.geographicToWebMercator(K)):H(Q).then(T=>{if(!T)throw new b("geometry-service:missing-url","Geometry service URL is missing");const U=new w({geometries:[K],outSpatialReference:ba});return F.project(T,U,Q).then(aa=>aa[0])})}function H(K){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const E=u.getDefault();return E.load(K).catch(()=>{}).then(()=>E.get("helperServices.geometry.url"))}const R=f.getLogger("esri.widgets.support.geolocationUtils"),V={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};n.getCurrentPosition=function(K){K||(K=V);return new Promise((E,Q)=>{setTimeout(()=>Q(new b("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(E,Q,K)})};n.positionToPoint=function(K,E){const {position:Q,view:ba}=K;
K=Q&&Q.coords||{};K={accuracy:K.accuracy,altitude:K.altitude,altitudeAccuracy:K.altitudeAccuracy,heading:K.heading,latitude:K.latitude,longitude:K.longitude,speed:K.speed};K=Q?{coords:K,timestamp:Q.timestamp}:Q;K=(K=K&&K.coords)?new z({longitude:K.longitude,latitude:K.latitude,z:K.altitude||null,spatialReference:{wkid:4326}}):null;return G(K,ba,E)};n.supported=function(){var K=l("esri-geolocation");K||R.warn("geolocation-unsupported","Geolocation unsupported.");K&&((K=window.isSecureContext)||R.warn("insecure-context",
"Geolocation requires a secure origin."));return K};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(n,a){a=new a.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});n.conversionTypeKebabDict=a;n.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,
UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,
UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,
UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",
UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],
function(n,a,b){const l=new a.JSONMap({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});n.generalizeToRESTParameters=function(f){const {geometries:z,deviationUnit:r,maxDeviation:u}=f.toJSON();f={maxDeviation:u};z&&z.length&&(f.geometries=JSON.stringify({geometryType:b.getJsonType(z[0]),geometries:z}),f.sr=JSON.stringify(z[0].spatialReference));l.write(r,
f,"deviationUnit");return f};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,
z,r,u,y){b=function(g){function e(p){p=g.call(this,p)||this;p.deviationUnit=null;p.geometries=null;p.maxDeviation=null;return p}n._inheritsLoose(e,g);return e}(b.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"deviationUnit",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(e=>y.fromJSON(e)).filter(l.isSome):null},write:{writer:(g,e)=>{e.geometries=g?.map(p=>p.toJSON())??null}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,
json:{write:!0}})],b.prototype,"maxDeviation",void 0);b=a.__decorate([u.subclass("esri.rest.support.GeneralizeParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({preserveShape:"preserve-shape"});n.lengthsToRESTParameters=function(l){const {polylines:f,lengthUnit:z,geodesic:r,calculationType:u}=l.toJSON(),y={};y.polylines=JSON.stringify(f);l=l.polylines[0].spatialReference;y.sr=l.wkid?
l.wkid:JSON.stringify(l.toJSON());z&&(y.lengthUnit=z);r&&(y.geodesic=r);u&&(y.calculationType=b.toJSON(u));return y};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,l,f,z,r,u,y,g){b=function(e){function p(m){m=e.call(this,m)||this;m.calculationType=null;m.geodesic=null;m.lengthUnit=null;m.polylines=null;return m}n._inheritsLoose(p,e);return p}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);a.__decorate([f.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);a.__decorate([f.property({type:[g],
json:{read:{reader:e=>e?e.map(p=>y.fromJSON(p)):null},write:{writer:(e,p)=>{p.polylines=e.map(m=>m.toJSON())}}}})],b.prototype,"polylines",void 0);b=a.__decorate([u.subclass("esri.rest.support.LengthsParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),
f=new a.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});n.offsetToRESTParameters=function(z){const {geometries:r,bevelRatio:u,offsetDistance:y,offsetHow:g,offsetUnit:e}=z.toJSON();z={bevelRatio:u,offsetDistance:y};r&&r.length&&(z.geometries=JSON.stringify({geometryType:b.getJsonType(r[0]),geometries:r}),z.sr=JSON.stringify(r[0].spatialReference));g&&(z.offsetHow=l.toJSON(g));e&&(z.offsetUnit=f.toJSON(e));return z};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,z,r,u,y){b=function(g){function e(p){p=g.call(this,p)||this;
p.bevelRatio=null;p.geometries=null;p.offsetDistance=null;p.offsetHow=null;p.offsetUnit=null;return p}n._inheritsLoose(e,g);return e}(b.JSONSupport);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,"bevelRatio",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(e=>y.fromJSON(e)).filter(l.isSome):null},write:{writer:(g,e)=>{e.geometries=g?.map(p=>p.toJSON())??null}}}})],b.prototype,"geometries",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],b.prototype,
"offsetDistance",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetHow",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"offsetUnit",void 0);b=a.__decorate([u.subclass("esri.rest.support.OffsetParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(n,a,b,l,f,z,r,u){function y(){y=a._asyncToGenerator(function*(e,p,m){p=g(p);e=z.parseUrl(e);const A={...e.query,f:"json",...p.toJSON()},B=p.outSpatialReference,I=f.getJsonType(p.geometries[0]);p=z.asValidOptions(A,m);return b(e.path+"/project",p).then(({data:{geometries:D}})=>r.decodeGeometries(D,I,B))});return y.apply(this,arguments)}const g=l.ensureType(u);n.project=function(e,p,m){return y.apply(this,arguments)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,z,r,u){b=function(y){function g(e){e=y.call(this,e)||this;e.geometries=null;e.outSpatialReference=null;e.transformation=null;e.transformForward=
null;return e}n._inheritsLoose(g,y);g.prototype.toJSON=function(){const e=this.geometries.map(A=>A.toJSON()),p=this.geometries[0],m={};m.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());m.inSR=p.spatialReference.wkid||JSON.stringify(p.spatialReference.toJSON());m.geometries=JSON.stringify({geometryType:u.getJsonType(p),geometries:e});this.transformation&&(m.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&
(m.transformForward=this.transformForward);return m};return g}(b.JSONSupport);a.__decorate([l.property()],b.prototype,"geometries",void 0);a.__decorate([l.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);a.__decorate([l.property()],b.prototype,"transformation",void 0);a.__decorate([l.property()],b.prototype,"transformForward",void 0);return b=a.__decorate([r.subclass("esri.rest.support.ProjectParameters")],b)})},"esri/rest/operations/relation":function(){define(["exports",
"../../core/jsonMap","../../geometry/support/jsonUtils"],function(n,a,b){const l=new a.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",
esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});n.relationToRESTParameters=function(f){const {geometries1:z,geometries2:r,relation:u,relationParameter:y}=f.toJSON();f={};if(z&&z.length){f.geometries1=JSON.stringify({geometryType:b.getJsonType(z[0]),geometries:z});const g=z[0].spatialReference;f.sr=g.wkid?g.wkid:JSON.stringify(g)}r&&0<r.length&&(f.geometries2=JSON.stringify({geometryType:b.getJsonType(r[0]),geometries:r}));u&&(f.relation=l.toJSON(u));y&&(f.relationParam=
y);return f};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(n,a,b,l,f,z,r,u,y){b=function(g){function e(p){p=
g.call(this,p)||this;p.geometries1=null;p.geometries2=null;p.relation=null;p.relationParameter=null;return p}n._inheritsLoose(e,g);return e}(b.JSONSupport);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(e=>y.fromJSON(e)).filter(l.isSome):null},write:{writer:(g,e)=>{e.geometries1=g?.map(p=>p.toJSON())??null}}}})],b.prototype,"geometries1",void 0);a.__decorate([f.property({json:{read:{reader:g=>g?g.map(e=>y.fromJSON(e)).filter(l.isSome):null},write:{writer:(g,e)=>{e.geometries2=g?.map(p=>p.toJSON())??
null}}}})],b.prototype,"geometries2",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relation",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"relationParameter",void 0);b=a.__decorate([u.subclass("esri.rest.support.RelationParameters")],b);b.from=r.ensureType(b);return b})},"esri/rest/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(n,a){const b=new a.JSONMap({0:"default-curve-extension",1:"relocate-ends",
2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});n.trimExtendToRESTParameters=function(l){const {extendHow:f,polylines:z,trimExtendTo:r}=l.toJSON();l={};l.extendHow=b.toJSON(f);z&&z.length&&(l.polylines=JSON.stringify(z),l.sr=JSON.stringify(z[0].spatialReference));r&&(l.trimExtendTo=JSON.stringify(r));return l};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Polyline".split(" "),
function(n,a,b,l,f,z,r,u,y,g){b=function(e){function p(m){m=e.call(this,m)||this;m.extendHow="default-curve-extension";m.polylines=null;m.trimExtendTo=null;return m}n._inheritsLoose(p,e);return p}(l.JSONSupport);a.__decorate([f.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);a.__decorate([f.property({type:[g],json:{read:{reader:e=>e?e.map(p=>y.fromJSON(p)):null},write:{writer:(e,p)=>{p.polylines=e.map(m=>m.toJSON())}}}})],b.prototype,"polylines",void 0);a.__decorate([f.property({json:{read:{reader:e=>
e?y.fromJSON(e):null},write:{writer:(e,p)=>{p.trimExtendTo=e.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);b=a.__decorate([u.subclass("esri.rest.support.TrimExtendParameters")],b);b.from=r.ensureType(b);return b})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(n,a,b,l,f,z,r){n.GoToMixin=u=>{u=function(y){function g(...e){e=y.call(this,...e)||this;e.goToOverride=null;e.view=null;return e}a._inheritsLoose(g,y);g.prototype.callGoTo=function(e){const {view:p}=this;return this.goToOverride?this.goToOverride(p,e):p.goTo(e.target,e.options)};return g}(u);b.__decorate([l.property()],u.prototype,"goToOverride",void 0);b.__decorate([l.property()],u.prototype,"view",void 0);return u=b.__decorate([r.subclass("esri.widgets.support.GoTo")],u)};Object.defineProperties(n,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/events ../core/Handles ../core/reactiveUtils ../core/string ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(n,a,b,l,
f,z,r,u,y,g,e,p,m,A,B,I,D,v,N){const L=/<[a-z/][\s\S]*>/i;b=function(X){function da(d,q){var x=X.call(this,d,q)||this;x._activeMenuItemIndex=-1;x._handles=new f;x._inputNode=null;x._menuItemCount=0;x._sourceMenuButtonNode=null;x._sourceListNode=null;x._suggestionListNode=null;x._searchResultRenderer=new m;x._locateFailed=null;x._container=null;x.activeMenu="none";x.disabled=!1;x.iconClass="esri-icon-search";x.messages=null;x.messagesCommon=null;x.viewModel=new A;x._clearActiveMenu=()=>{x.activeMenu=
"none"};x._removeActiveMenu=F=>{(F=F.relatedTarget)&&x._container?.contains(F)||x._clearActiveMenu()};x.addHandles([z.watch(()=>x.searchTerm,F=>{(F&&"warning"===x.activeMenu||!F&&!x.get("viewModel.selectedSuggestion.location"))&&x._clearActiveMenu()}),z.on(()=>x.viewModel?.allSources,"change",()=>x._watchSourceChanges()),z.watch(()=>x.activeMenu,()=>x._resetActiveMenuItemIndex(),z.initial),z.watch(()=>x.viewModel?.defaultPopupTemplate,F=>{F&&(F.content=x._renderSearchResultsContent.bind(n._assertThisInitialized(x)))},
z.initial)]);return x}n._inheritsLoose(da,X);var C=da.prototype;C.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};C.clear=function(){this.viewModel.clear()};C.focus=function(){this._inputNode?.focus();this.emit("search-focus")};C.blur=function(){this._inputNode?.blur();this.emit("search-blur")};C.search=
function(d){this._clearActiveMenu();this._cancelSuggest();this._cancelSearch();const q=new AbortController,{signal:x}=q;this._searchController=q;return this.viewModel.search(d,{signal:x}).catch(F=>{if(this._searchController===q)return this._clearActiveMenu(),this._searchController=null,F}).then(F=>{if(this._searchController===q)return this.activeMenu=F.numResults?"none":"warning",this._searchController=null,F})};C.suggest=function(d){this._cancelSuggest();const q=new AbortController,{signal:x}=q;
this._suggestController=q;return this.viewModel.suggest(d,null,{signal:x}).then(F=>{if(this._suggestController===q)return this._suggestController=null,F.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),F}).catch(()=>{if(this._suggestController===q)return this._suggestController=null})};C.render=function(){const {state:d}=this.viewModel;return v.tsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===d,["esri-widget--disabled"]:this.disabled})},"loading"===
d?this.renderLoader():this.renderContainer())};C.renderSubmitButton=function(){const {messages:d,disabled:q}=this;return v.tsx("button",{"aria-label":d.searchButtonTitle,bind:this,disabled:q,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:d.searchButtonTitle,type:"button"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-search"}))};C.renderWarningMenu=function(){return v.tsx("div",{key:"esri-search__error-menu",
class:this.classes("esri-menu","esri-search__warning-menu")},v.tsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};C.renderSourceMenuButton=function(){const {messages:d,activeMenu:q,sourceMenuId:x,sourceMenuButtonId:F,disabled:O}=this,{activeSourceIndex:W,allSources:Z}=this.viewModel;return 1<Z.length?v.tsx("button",{id:F,key:"esri-search__source-menu-button",bind:this,disabled:O,"aria-label":d.searchIn,title:d.searchIn,"aria-haspopup":"true","aria-expanded":("source"===q).toString(),
"aria-controls":x,class:this.classes("esri-search__sources-button","esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:B.storeNode,"data-node-ref":"_sourceMenuButtonNode",type:"button"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),v.tsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),v.tsx("span",{class:"esri-search__source-name"},this._getSourceName(W))):
null};C.renderSourcesList=function(){const {allSources:d,searchAllEnabled:q}=this.viewModel,{_activeMenuItemIndex:x,activeMenu:F,sourceMenuId:O,sourceMenuButtonId:W}=this,Z="source"===F&&-1<x?this._buildId("source-item",x):null;return 1<d.length?v.tsx("ul",{"aria-activedescendant":Z,"aria-labelledby":W,id:O,role:"menu",bind:this,afterCreate:B.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},
q?this.renderSource(A.ALL_INDEX):null,d.map((Y,w)=>this.renderSource(w)).toArray()):null};C.renderSourcesMenu=function(){const {allSources:d}=this.viewModel;return 1<d.length?v.tsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};C.renderLoader=function(){const {messages:d,messagesCommon:q,disabled:x}=this;return v.tsx("div",{class:"esri-widget__loader",key:"base-loader",tabIndex:x?-1:null},v.tsx("span",{"aria-hidden":"true",
class:"esri-widget__loader-animation"}),v.tsx("span",{class:"esri-icon-font-fallback-text"},d.searchButtonTitle),v.tsx("span",{class:"esri-widget__loader-text"},q.loading))};C.renderContainer=function(){const {allSources:d,state:q}=this.viewModel,{activeMenu:x}=this;return v.tsx("div",{tabIndex:-1,afterCreate:F=>{this._container=F;F.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:F=>{F.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes({["esri-search--multiple-sources"]:1<
d.length,["esri-search--loading"]:"loading"===q,["esri-search--searching"]:"searching"===q,["esri-search--warning"]:"warning"===x,["esri-search--sources"]:"source"===x,["esri-search--show-suggestions"]:"suggestion"===x},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};C.renderClearButton=function(){return this.searchTerm?v.tsx("button",{bind:this,disabled:this.disabled,
class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};C.renderLocationGroup=function(){const {messages:d,locationEnabled:q,displayedSearchTerm:x}=this,F="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return q&&!x?v.tsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",
class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},v.tsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",F?"esri-menu__list-item--focus":null)},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"}),
" ",d.useCurrentLocation)):null};C.renderInput=function(){const {activeMenu:d,locationEnabled:q,displayedSearchTerm:x,messages:F,suggestionsMenuId:O,inputId:W,_activeMenuItemIndex:Z,disabled:Y}=this,{maxInputLength:w,placeholder:G,searchTerm:H,suggestionCount:R}=this.viewModel,V=!!(q&&!x||R),K="suggestion"===d&&-1<Z?this._buildId("suggestion-item",Z):null;return v.tsx("input",{"aria-activedescendant":K,"aria-autocomplete":"list","aria-expanded":(V&&"suggestion"===d).toString(),"aria-controls":V?O:
null,"aria-haspopup":"listbox","aria-label":F.searchButtonTitle,bind:this,disabled:Y,placeholder:G,maxlength:w,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:H,id:W,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:B.storeNode,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:H?"":G})};C.renderForm=function(){return v.tsx("form",{key:"esri-search__form",
bind:this,disabled:this.disabled,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};C.renderSuggestList=function(d){const {sourceIndex:q}=d,x=d.results;return d.results.length?v.tsx("ul",{role:"group",key:`esri-search__suggestion-list-${q}`,class:this.classes("esri-menu__list","esri-search__suggestions-list")},x.map(F=>this.renderSuggestion(F,this._menuItemCount++))):null};C.renderSuggestionsGroup=function(){const {suggestions:d}=this.viewModel;return d?d.map(q=>
[this.renderSuggestionHeader(q),this.renderSuggestList(q)]):null};C.renderSuggestionsMenu=function(){const {displayedSearchTerm:d,locationEnabled:q,suggestionsMenuId:x,inputId:F}=this,{suggestionCount:O}=this.viewModel;this._menuItemCount=0;return q&&!d||O?v.tsx("div",{id:x,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"listbox","aria-labelledby":F,bind:this,afterCreate:B.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),
this.renderSuggestionsGroup()):null};C.renderInputContainer=function(){return v.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};C.renderSuggestionHeader=function(d){const {allSources:q,activeSourceIndex:x}=this.viewModel,{sourceIndex:F}=d,O=1<q.length&&x===A.ALL_INDEX;return d.results.length&&O?v.tsx("div",{key:`esri-search__suggestion-header-${F}`,class:"esri-menu__header"},this._getSourceName(F)):
null};C.renderSuggestion=function(d,q){const {_activeMenuItemIndex:x,messages:F}=this;var {searchTerm:O}=this.viewModel;if(O){var {text:W}=d;W=W||F.untitledResult;const Z=[];if(L.test(W))Z.push(v.tsx("div",{innerHTML:W}));else{W=this._splitResult(W,O);const Y=O.toLowerCase();W.forEach((w,G)=>{w&&w.length&&(w.toLowerCase()===Y?Z.push(v.tsx("strong",{key:G},w)):Z.push(w))})}O="suggestion"===this.activeMenu&&x===q;return v.tsx("li",{bind:this,id:this._buildId("suggestion-item",q),"aria-selected":("suggestion"===
this.activeMenu&&this._activeMenuItemIndex===q).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${q}`,"data-suggestion":d,role:"option",class:this.classes("esri-menu__list-item",O?"esri-menu__list-item--focus":null)},Z)}};C.renderSource=function(d){const {activeSourceIndex:q,searchAllEnabled:x}=this.viewModel,F={["esri-menu__list-item--active"]:d===q,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&d===(x?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};
return v.tsx("li",{bind:this,key:`esri-search__source-${d}`,id:this._buildId("source-item",x?d+1:d),"aria-checked":(d===q).toString(),onclick:this._handleSourceClick,"data-source-index":d,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",F)},this._getSourceName(d))};C.renderNoResultsWarning=function(d){const {messages:q}=this;d=d?N.substitute(q.noResultsFoundForValue,{value:`"${d}"`}):q.noResultsFound;return v.tsx("div",{key:"esri-search__no_results"},v.tsx("div",
{class:"esri-search__warning-header"},q.noResults),v.tsx("div",{class:"esri-search__warning-text"},d))};C.renderEmptySearchWarning=function(){const {messages:d}=this;return v.tsx("div",{key:"esri-search__empty-search"},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),v.tsx("span",{class:"esri-search__no-value-text"},d.emptyValue))};C.renderLocateWarning=function(){const {messages:d}=this;return v.tsx("div",{key:"esri-search__locate-error"},v.tsx("span",{"aria-hidden":"true",
class:"esri-icon-notice-triangle"}),v.tsx("span",{class:"esri-search__no-value-text"},d.locateError))};C.renderWarning=function(){const {displayedSearchTerm:d,_locateFailed:q}=this,{viewModel:x}=this;return q?this.renderLocateWarning():x.selectedSuggestion?.location||d?this.renderNoResultsWarning(d):this.renderEmptySearchWarning()};C._resetActiveMenuItemIndex=function(){this._activeMenuItemIndex=-1};C._buildId=function(d,q){return`${this.id}-${d}${void 0===q?"":`-${q}`}`};C._watchSourceChanges=function(){const {_handles:d,
viewModel:{allSources:q}}=this;d.remove("sources");q.forEach(x=>d.add(z.watch(()=>x.name,()=>this.scheduleRender()),"sources"))};C._handleSourcesMenuToggleFocus=function(){"source"!==this.activeMenu&&this._clearActiveMenu()};C._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();"source"===this.activeMenu&&this._sourceListNode?.focus()};C._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};C._handleSearchButtonClick=
function(){this.search()};C._handleSuggestionClick=function(d){if(d=d.currentTarget["data-suggestion"])this._focus(),this.search(d)};C._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};C._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const d=new AbortController,{signal:q}=d;this._searchController=d;this.viewModel.searchNearby({signal:q}).then(x=>{this.activeMenu=x.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0;this.activeMenu=
"warning"}).then(()=>{this._searchController=null})};C._handleSourceClick=function(d){this._setSourceFromMenuItem(d.currentTarget)};C._setSourceFromMenuItem=function(d){d&&(this.viewModel.activeSourceIndex=d["data-source-index"],this._clearActiveMenu(),this._sourceMenuButtonNode?.focus())};C._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};C._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=
null);this._locateFailed=!1};C._handleInputKeyup=function(d){var q=l.eventKey(d);if(!d.ctrlKey&&!d.metaKey&&"Copy"!==q&&"ArrowLeft"!==q&&"ArrowRight"!==q&&"Shift"!==q)if("Tab"===q||"Escape"===q||d.shiftKey&&"Tab"===q)this._cancelSuggest(),"Escape"===q&&this._clearActiveMenu();else{var x="Home"===q||"End"===q||"ArrowUp"===q||"ArrowDown"===q;if("Enter"===q&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var F=this._suggestionListNode?.getElementsByTagName("li");if(F?.length){"suggestion"!==
this.activeMenu&&this._openSuggestionMenu();if(x){d.preventDefault();this._cancelSuggest();this._handleItemNavigation(q,F,this._suggestionListNode);return}d=F[this._activeMenuItemIndex];if("Enter"===q&&d){(q=d["data-suggestion"])?(this._focus(),this.search(q)):d["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};C._handleItemNavigation=function(d,q,x){const F=this._activeMenuItemIndex;"Home"===d&&(this._activeMenuItemIndex=0);"End"===d&&
(this._activeMenuItemIndex=q.length-1);"ArrowUp"===d&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?q.length-1:this._activeMenuItemIndex-1);"ArrowDown"===d&&(this._activeMenuItemIndex=this._activeMenuItemIndex===q.length-1?0:this._activeMenuItemIndex+1);F!==this._activeMenuItemIndex&&B.keepMenuItemWithinView(q[this._activeMenuItemIndex],x)};C._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};C._openSuggestionMenu=function(){this.activeMenu=
"suggestion"};C._handleInputPaste=function(d){d=d.target;this.viewModel.searchTerm!==d.value&&(this.viewModel.searchTerm=d.value);this.viewModel.searchTerm&&this.suggest()};C._handleSourceMenuKeydown=function(d){const q=l.eventKey(d);B.isActivationKey(q)?(d.preventDefault(),d=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(d)):"ArrowUp"!==q&&"ArrowDown"!==q&&"End"!==q&&"Home"!==q||d.preventDefault()};C._handleSourceMenuKeyup=function(d){const q=
l.eventKey(d),x="ArrowUp"===q||"ArrowDown"===q||"End"===q||"Home"===q;x&&d.preventDefault();"Escape"===q?(this._clearActiveMenu(),this._sourceMenuButtonNode?.focus()):(d=this._sourceListNode?.getElementsByTagName("li"))&&0!==d.length&&x&&("source"!==this.activeMenu&&(this.activeMenu="source"),this._handleItemNavigation(q,d,this._sourceListNode.parentElement))};C._focus=function(d){this.focus();d&&(this.activeMenu=d)};C._formSubmit=function(d){d.preventDefault();-1===this._activeMenuItemIndex&&this.search()};
C._getSourceName=function(d){const {messages:q}=this;var {allSources:x}=this.viewModel;x=x.getItemAt(d);return d===A.ALL_INDEX?q.all:x?x.name||q.untitledSource:q.untitledSource};C._splitResult=function(d,q){q=r.escapeRegExpString(q);return d.replace(new RegExp(`(^|)(${q})(|$)`,"ig"),"$1|$2|$3").split("|")};C._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};n._createClass(da,
[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}},{key:"activeSource",get:function(){return this.viewModel.activeSource}},{key:"activeSourceIndex",get:function(){return this.viewModel.activeSourceIndex},
set:function(d){this.viewModel.activeSourceIndex=d}},{key:"allPlaceholder",get:function(){return this.viewModel.allPlaceholder},set:function(d){this.viewModel.allPlaceholder=d}},{key:"allSources",get:function(){return this.viewModel.allSources}},{key:"autoNavigate",get:function(){return this.viewModel.autoNavigate},set:function(d){this.viewModel.autoNavigate=d}},{key:"autoSelect",get:function(){return this.viewModel.autoSelect},set:function(d){this.viewModel.autoSelect=d}},{key:"defaultSources",get:function(){return this.viewModel.defaultSources}},
{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(d){this.viewModel.goToOverride=d}},{key:"includeDefaultSources",get:function(){return this.viewModel.includeDefaultSources},set:function(d){this.viewModel.includeDefaultSources=d}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(d){this._overrideIfSome("label",d)}},{key:"locationEnabled",get:function(){return this.viewModel.locationEnabled},set:function(d){this.viewModel.locationEnabled=
d}},{key:"maxResults",get:function(){return this.viewModel.maxResults},set:function(d){this.viewModel.maxResults=d}},{key:"maxSuggestions",get:function(){return this.viewModel.maxSuggestions},set:function(d){this.viewModel.maxSuggestions=d}},{key:"minSuggestCharacters",get:function(){return this.viewModel.minSuggestCharacters},set:function(d){this.viewModel.minSuggestCharacters=d}},{key:"popupEnabled",get:function(){return this.viewModel.popupEnabled},set:function(d){this.viewModel.popupEnabled=d}},
{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(d){this.viewModel.popupTemplate=d}},{key:"portal",get:function(){return this.viewModel.portal},set:function(d){this.viewModel.portal=d}},{key:"resultGraphic",get:function(){return this.viewModel.resultGraphic},set:function(d){this.viewModel.resultGraphic=d}},{key:"resultGraphicEnabled",get:function(){return this.viewModel.resultGraphicEnabled},set:function(d){this.viewModel.resultGraphicEnabled=d}},{key:"results",
get:function(){return this.viewModel.results}},{key:"searchAllEnabled",get:function(){return this.viewModel.searchAllEnabled},set:function(d){this.viewModel.searchAllEnabled=d}},{key:"searchTerm",get:function(){return this.viewModel.searchTerm},set:function(d){this.viewModel.searchTerm=d}},{key:"selectedResult",get:function(){return this.viewModel.selectedResult}},{key:"sources",get:function(){return this.viewModel.sources},set:function(d){this.viewModel.sources=d}},{key:"suggestions",get:function(){return this.viewModel.suggestions}},
{key:"suggestionsEnabled",get:function(){return this.viewModel.suggestionsEnabled},set:function(d){this.viewModel.suggestionsEnabled=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}}]);return da}(p);a.__decorate([u.property()],b.prototype,"_activeMenuItemIndex",void 0);a.__decorate([u.property()],b.prototype,"displayedSearchTerm",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"inputId",null);a.__decorate([u.property({readOnly:!0})],b.prototype,
"suggestionsMenuId",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"sourceMenuId",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"sourceMenuButtonId",null);a.__decorate([u.property()],b.prototype,"activeMenu",void 0);a.__decorate([u.property({readOnly:!0})],b.prototype,"activeSource",null);a.__decorate([u.property()],b.prototype,"activeSourceIndex",null);a.__decorate([u.property()],b.prototype,"allPlaceholder",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"allSources",
null);a.__decorate([u.property()],b.prototype,"autoNavigate",null);a.__decorate([u.property()],b.prototype,"autoSelect",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"defaultSources",null);a.__decorate([u.property()],b.prototype,"disabled",void 0);a.__decorate([u.property()],b.prototype,"goToOverride",null);a.__decorate([u.property()],b.prototype,"iconClass",void 0);a.__decorate([u.property()],b.prototype,"includeDefaultSources",null);a.__decorate([u.property()],b.prototype,"label",null);
a.__decorate([u.property()],b.prototype,"locationEnabled",null);a.__decorate([u.property()],b.prototype,"maxResults",null);a.__decorate([u.property()],b.prototype,"maxSuggestions",null);a.__decorate([u.property(),I.messageBundle("esri/widgets/Search/t9n/Search")],b.prototype,"messages",void 0);a.__decorate([u.property(),I.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);a.__decorate([u.property()],b.prototype,"minSuggestCharacters",null);a.__decorate([u.property()],b.prototype,
"popupEnabled",null);a.__decorate([u.property()],b.prototype,"popupTemplate",null);a.__decorate([u.property()],b.prototype,"portal",null);a.__decorate([u.property()],b.prototype,"resultGraphic",null);a.__decorate([u.property()],b.prototype,"resultGraphicEnabled",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"results",null);a.__decorate([u.property()],b.prototype,"searchAllEnabled",null);a.__decorate([u.property()],b.prototype,"searchTerm",null);a.__decorate([u.property({readOnly:!0})],
b.prototype,"selectedResult",null);a.__decorate([u.property()],b.prototype,"sources",null);a.__decorate([u.property({readOnly:!0})],b.prototype,"suggestions",null);a.__decorate([u.property()],b.prototype,"suggestionsEnabled",null);a.__decorate([u.property()],b.prototype,"view",null);a.__decorate([D.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),u.property({type:A})],b.prototype,"viewModel",void 0);return b=a.__decorate([e.subclass("esri.widgets.Search")],
b)});