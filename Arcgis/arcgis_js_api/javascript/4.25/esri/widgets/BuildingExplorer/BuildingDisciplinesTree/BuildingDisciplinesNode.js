// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../support/LayerTreeNode ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(r,h,m,k,f,x,t,u,v,q,g){var n;const w={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},
c={base:"esri-building-disciplines-tree-node",root:"esri-building-disciplines-tree-node--root",leaf:"esri-building-disciplines-tree-node--leaf",label:"esri-building-disciplines-tree-node__label",checkbox:"esri-building-disciplines-tree-node__checkbox",checkboxChecked:"esri-building-disciplines-tree-node__checkbox--checked esri-icon-check-mark",checkboxIndeterminate:"esri-building-disciplines-tree-node__checkbox--indeterminate esri-icon-minus",collapseToggle:"esri-building-disciplines-tree-node__collapse-toggle esri-icon-right",
collapseToggleCollapsed:"esri-building-disciplines-tree-node__collapse-toggle--collapsed",children:"esri-building-disciplines-tree-node__children",level:l=>`${"esri-building-disciplines-tree-node"}--level-${l}`};f=n=function(l){function p(a){var b=l.call(this,a)||this;b.messages=w;b.toggleSiblingsVisibility=!1;b._childWidgets=[];b._updateChildWidgets=()=>{b._destroyChildWidgets();b._childWidgets=b.node.children.toArray().reverse().map(e=>new n({node:e,messages:b.messages,toggleSiblingsVisibility:b.toggleSiblingsVisibility}))};
return b}r._inheritsLoose(p,l);var d=p.prototype;d.initialize=function(){this.addHandles([m.on(()=>this.node.children,"after-changes",this._updateChildWidgets,{onListenerAdd:this._updateChildWidgets,onListenerRemove:this._updateChildWidgets}),m.watch(()=>[this.messages,this.toggleSiblingsVisibility],this._updateChildWidgets,m.initial)])};d.destroy=function(){this._destroyChildWidgets()};d.render=function(){const a=this.node,b=a.isRoot,e=a.isLeaf;return a.isDiscipline&&e?g.tsx("div",{key:`${a.id}-empty`}):
g.tsx("div",{key:a.id,class:this.classes(c.base,c.level(a.level),{[c.root]:b,[c.leaf]:e}),bind:this,onkeydown:this._onKeydown,tabIndex:e?null:0,role:"treeitem","aria-expanded":a.collapsed?"false":"true"},g.tsx("label",{bind:this,class:c.label,onclick:this._onCheckboxToggle},this._renderCollapseToggle(),this._renderCheckbox(),g.tsx("span",null,a.title)),this._renderChildren(a))};d._renderCheckbox=function(){const a=this.node.visible,b=!0===a,e=b?this.messages?.hideSublayer:this.messages?.showSublayer;
return g.tsx("button",{bind:this,class:this.classes(c.checkbox,{[c.checkboxChecked]:b,[c.checkboxIndeterminate]:null===a}),onclick:this._onCheckboxToggle,role:"checkbox","aria-checked":b?"true":"false","aria-label":e,title:e,type:"button"})};d._renderCollapseToggle=function(){if(!this.node.hasChildren)return null;const a=this.node.collapsed,b=a?this.messages?.expand:this.messages?.collapse;return g.tsx("div",{bind:this,class:this.classes(c.collapseToggle,{[c.collapseToggleCollapsed]:a}),onclick:this._onCollapseToggle,
"aria-label":b,title:b})};d._renderChildren=function(a){return!a.hasChildren||a.collapsed?null:g.tsx("div",{class:c.children},this._childWidgets.map(b=>b.render()))};d._onKeydown=function(a){switch(a.key){case "Space":case "Enter":if(!a.target.classList.contains(c.base))break;a.stopPropagation();this.node.toggleVisibility();break;case "ArrowLeft":a.stopPropagation();this.node.toggleCollapsed(q.isRTL(this.container)?!1:!0);break;case "ArrowRight":a.stopPropagation(),this.node.toggleCollapsed(q.isRTL(this.container)?
!0:!1)}};d._onCheckboxToggle=function(a){a.preventDefault();a.stopPropagation();(a.metaKey||a.ctrlKey)&&this.toggleSiblingsVisibility?this.node.toggleAllSiblingsVisibility():this.node.toggleVisibility()};d._onCollapseToggle=function(a){a.preventDefault();a.stopPropagation();this.node.toggleCollapsed()};d._destroyChildWidgets=function(){this._childWidgets.forEach(a=>a.destroy());this._childWidgets=[]};return p}(u);h.__decorate([k.property({type:v.LayerTreeNode})],f.prototype,"node",void 0);h.__decorate([k.property()],
f.prototype,"messages",void 0);h.__decorate([k.property({nonNullable:!0})],f.prototype,"toggleSiblingsVisibility",void 0);h.__decorate([k.property()],f.prototype,"_childWidgets",void 0);return f=n=h.__decorate([t.subclass("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesNode")],f)});