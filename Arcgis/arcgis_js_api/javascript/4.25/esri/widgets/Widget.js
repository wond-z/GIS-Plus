// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/domUtils ../core/Evented ../core/events ../core/Handles ../core/has ../core/lang ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/reactiveUtils ../core/uuid ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleTrackingTarget ../libs/maquette-advanced-projector/projector ../chunks/componentsUtils ./support/jsxWidgetSupport ./support/tests ./support/vnodeCache ./support/widgetUtils ../intl/locale ../intl/messages".split(" "),
function(m,f,d,F,G,C,H,Z,I,J,D,K,w,x,L,k,M,N,O,P,Q,R,z,S,v,T,U,V){function E(l,e){for(const c in e)null!=l[c]&&("object"===typeof l[c]&&"object"===typeof e[c]?E(l[c],e?.[c]):l[c]=e[c]);return l}let W=0;const X=Q.createAdvancedProjector({postProcessProjectionOptions(l){const e=l.eventHandlerInterceptor,c=/capture$/i;l.eventHandlerInterceptor=(b,p,a,q)=>{const n=e?.(b,p,a,q),u=c.test(b);b=b.replace(c,"");if(!(b.toLowerCase()in a)||u){const g=b[2].toLowerCase()+b.slice(3),h=r=>n?.call(a,r);a.addEventListener(g,
h,u);const t=q.afterRemoved;q.afterRemoved=r=>{t?.(r);a.removeEventListener(g,h,u)}}return n}},handleInterceptedEvent(l,e,c,b){const {eventPhase:p,type:a}=b,q=p===Event.CAPTURING_PHASE;let n=`on${a}${q?"capture":""}`;e=e.properties;if(!(e&&n in e||(n=`on${a[0].toUpperCase()}${a.slice(1)}${q?"Capture":""}`,e&&n in e)))return;v.clearVNodeCache();l.scheduleRender();e[n].call(e.bind||c,b)}});let A=!1;d=function(l){function e(b,p){var a=l.call(this,b,p)||this;a._attached=!1;a._internalHandles=new H;a._projector=
X;a._readyForTrueRender=!1;a.iconClass="esri-icon-checkbox-unchecked";a.key=m._assertThisInitialized(a);a._loadLocale=w.debounce(m._asyncToGenerator(function*(){if(a._messageBundleProps&&a._messageBundleProps.length){const g=yield w.eachAlways(a._messageBundleProps.map(function(){var h=m._asyncToGenerator(function*({bundlePath:t,propertyName:r}){t=yield V.fetchMessageBundle(t);a.uiStrings&&Object.keys(a.uiStrings)&&(t=E(I.clone(t),a.uiStrings));a[r]=t});return function(t){return h.apply(this,arguments)}}()));
for(const h of g)h.error&&J.getLogger(a.declaredClass).error("widget-intl:locale-error",a.declaredClass,h.error)}yield a.loadLocale()}));R.commitAssetPath();const q="esri-widget-uid-"+L.generateUUID(),n=a.render.bind(m._assertThisInitialized(a));a._trackingTarget=new P.SimpleTrackingTarget(()=>a.scheduleRender());const u=()=>{if(!a._readyForTrueRender||a.destroyed)return null;if(!a.visible)return{vnodeSelector:"div",properties:{key:q,class:"",styles:{display:"none"}},domNode:null,children:void 0,
text:void 0};const g=n();let {properties:h}=g;h||(g.properties=h={});let {key:t,styles:r}=h;t||(h.key=q);r||(h.styles=r={});r.display||(r.display="");let Y=0;g.children?.forEach(B=>{if(!z.isWidgetConstructor(B.vnodeSelector)){var {properties:y}=B;y||(B.properties=y={});y.key||(y.key=`${a.id}--${Y++}`)}});return z.processWidgets(m._assertThisInitialized(a),g)};a.render=()=>{if(A)return u();let g=v.getVNodeCache(m._assertThisInitialized(a))??null;if(g)return g;a._trackingTarget.clear();A=!0;try{g=O.runTracked(a._trackingTarget,
u)}catch(h){throw console.error(h),h;}finally{A=!1}g&&v.setVNodeCache(m._assertThisInitialized(a),g);return g};a.addResolvingPromise(a._resourcesFetch=a.beforeFirstRender().then(()=>{a._readyForTrueRender=!0;a._postInitialize()}));S.registerLoading(a._resourcesFetch);return a}m._inheritsLoose(e,l);var c=e.prototype;c.normalizeCtorArgs=function(b,p){b={...b};p&&(b.container=p);return b};c.postInitialize=function(){};c.beforeFirstRender=function(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>
{}).catch(w.throwIfNotAbortError)};c.loadDependencies=function(){var b=m._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.loadLocale=function(){var b=m._asyncToGenerator(function*(){});return function(){return b.apply(this,arguments)}}();c.destroy=function(){this.destroyed||(D.destroyMaybe(this._trackingTarget),D.destroyMaybe(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=
()=>null,this._projector=null,v.deleteVNodeCache(this))};c.castContainer=function(b){return F.byId(b)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||(v.deleteVNodeCache(this),this._projector.scheduleRender())};c.classes=function(...b){return T.classes.apply(this,b)};c.renderNow=function(){v.deleteVNodeCache(this);this._projector.renderNow()};c._postInitialize=function(){var b=this;if(!this.destroyed){this.scheduleRender();this._delegatedEventNames?.length&&
this._internalHandles.add(x.watch(()=>this.viewModel,(a,q)=>{q&&this._internalHandles.remove("delegated-events");a&&C.isEventTarget(a)&&this._internalHandles.add(this._delegatedEventNames.map(n=>C.on(a,n,u=>{this.emit(n,u)})),"delegated-events")},x.initial));this.postInitialize();var p=function(){var a=m._asyncToGenerator(function*(){yield b._loadLocale().catch(w.throwIfNotAbortError);b.scheduleRender()});return function(){return a.apply(this,arguments)}}();this._internalHandles.add([U.onLocaleChange(p),
x.watch(()=>this.uiStrings,p),x.when(()=>this.container,a=>{this.destroyed||this._attach(a)},{initial:!0,once:!0})])}};c._attach=function(b){b&&(this._projector.merge(b,this.render),this._attached=!0)};c._detach=function(b){this._attached&&(this._projector.detach(this.render),this._attached=!1);b?.parentNode?.removeChild(b)};m._createClass(e,[{key:"container",set:function(b){this._get("container")||this._set("container",b)}},{key:"domNode",get:function(){return this.container},set:function(b){this.container=
b}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+W++},set:function(b){b&&this._set("id",b)}},{key:"label",get:function(){return this.declaredClass.split(".").pop()},set:function(b){this._overrideIfSome("label",b)}},{key:"renderable",get:function(){return this._resourcesFetch}},{key:"visible",get:function(){return this._get("visible")},set:function(b){this._set("visible",b)}},{key:"test",get:function(){return{projector:this._projector}}}]);
return e}(K.EsriPromiseMixin(G.EventedAccessor));d[z.WIDGET_SYMBOL]=!0;f.__decorate([k.property()],d.prototype,"_readyForTrueRender",void 0);f.__decorate([k.property({value:null})],d.prototype,"container",null);f.__decorate([M.cast("container")],d.prototype,"castContainer",null);f.__decorate([k.property()],d.prototype,"domNode",null);f.__decorate([k.property()],d.prototype,"iconClass",void 0);f.__decorate([k.property()],d.prototype,"id",null);f.__decorate([k.property()],d.prototype,"label",null);
f.__decorate([k.property()],d.prototype,"renderable",null);f.__decorate([k.property()],d.prototype,"uiStrings",void 0);f.__decorate([k.property()],d.prototype,"viewModel",void 0);f.__decorate([k.property({value:!0})],d.prototype,"visible",null);f.__decorate([k.property()],d.prototype,"key",void 0);f.__decorate([k.property()],d.prototype,"children",void 0);f.__decorate([k.property()],d.prototype,"afterCreate",void 0);f.__decorate([k.property()],d.prototype,"afterUpdate",void 0);f.__decorate([k.property()],
d.prototype,"afterRemoved",void 0);return d=f.__decorate([N.subclass("esri.widgets.Widget")],d)});