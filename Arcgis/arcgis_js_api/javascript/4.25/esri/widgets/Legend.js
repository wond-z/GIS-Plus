// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Legend/LegendViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./support/ActiveLayerInfo ../../intl/locale".split(" "),function(C,G,J,E,p,K,H,z,U,c,n,b,f){const l=p.ofType(b),k="esri.layers.BuildingSceneLayer esri.layers.CSVLayer esri.layers.FeatureLayer esri.layers.GeoJSONLayer esri.layers.GeoRSSLayer esri.layers.GroupLayer esri.layers.HeatmapLayer esri.layers.ImageryLayer esri.layers.ImageryTileLayer esri.layers.MapImageLayer esri.layers.OGCFeatureLayer esri.layers.PointCloudLayer esri.layers.StreamLayer esri.layers.SceneLayer esri.layers.SubtypeGroupLayer esri.layers.TileLayer esri.layers.VoxelLayer esri.layers.WFSLayer esri.layers.WMSLayer esri.layers.WMTSLayer esri.layers.WCSLayer".split(" "),
A=["view.basemapView.baseLayerViews","view.groundView.layerViews","view.layerViews","view.basemapView.referenceLayerViews"];J=function(P){function Q(d){d=P.call(this,d)||this;d._handles=new K;d._layerViewByLayerId={};d._layerInfosByLayerViewId={};d._activeLayerInfosByLayerViewId={};d._activeLayerInfosWithNoParent=new p;d.activeLayerInfos=new l;d.basemapLegendVisible=!1;d.groundLegendVisible=!1;d.hideLayersNotInCurrentView=!1;d.keepCacheOnDestroy=!1;d.respectLayerVisibility=!0;d.layerInfos=[];d.view=
null;return d}C._inheritsLoose(Q,P);var q=Q.prototype;q.initialize=function(){this._handles.add(H.watch(()=>this.view,()=>this._viewHandles(),H.initial),"view");this._handles.add(f.onLocaleChange(()=>this._refresh()))};q.destroy=function(){this._destroyViewActiveLayerInfos();this._handles.destroy();this.view=this._handles=null};q._viewHandles=function(){this._handles.remove("state");this.view&&this._handles.add(H.watch(()=>this.state,()=>this._stateHandles(),H.initial),"state")};q._stateHandles=function(){this._resetAll();
"ready"===this.state&&this._watchPropertiesAndAllLayerViews()};q._resetAll=function(){this._handles.remove(["all-layer-views","legend-properties"]);this._destroyViewActiveLayerInfos();this.activeLayerInfos.removeAll()};q._destroyViewActiveLayerInfos=function(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)};q._destroyViewActiveLayerInfo=function(d){this._handles.remove(d);const y=this._activeLayerInfosByLayerViewId[d];delete this._activeLayerInfosByLayerViewId[d];
y&&y.parent&&y.parent.children.remove(y)};q._watchPropertiesAndAllLayerViews=function(){const {allLayerViews:d}=this.view;d.length&&this._refresh();this._handles.add(d.on("change",y=>this._allLayerViewsChangeHandle(y)),"all-layer-views");this._handles.add(H.watch(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),"legend-properties")};q._allLayerViewsChangeHandle=function(d){d.removed.forEach(y=>this._destroyViewActiveLayerInfo(y.uid));this._refresh()};
q._propertiesChangeHandle=function(){this._destroyViewActiveLayerInfos();this._refresh()};q._refresh=function(){this._layerInfosByLayerViewId={};this.activeLayerInfos.removeAll();this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this);this._sortActiveLayerInfos(this.activeLayerInfos)};q._sortActiveLayerInfos=function(d){if(!(2>d.length)){var y=[];d.forEach(t=>{if(!t.parent){var h=t.layer.parent;
(h=(h=h&&"uid"in h&&this._layerViewByLayerId[h.uid])&&this._activeLayerInfosByLayerViewId[h.uid])&&d.includes(h)&&(y.push(t),t.parent=h,h.children.add(t),this._sortActiveLayerInfos(h.children))}});d.removeMany(y);var r={};this.view.allLayerViews.forEach((t,h)=>r[t.layer.uid]=h);d.sort((t,h)=>(r[h.layer.uid]||0)-(r[t.layer.uid]||0))}};q._generateLayerViews=function(){const d=[];A.filter(this._filterLayerViews,this).map(this.get,this).filter(y=>null!=y).forEach(this._collectLayerViews("layerViews",
d));return d};q._filterLayerViews=function(d){const y=!this.groundLegendVisible&&"view.groundView.layerViews"===d;return!(!this.basemapLegendVisible&&("view.basemapView.baseLayerViews"===d||"view.basemapView.referenceLayerViews"===d))&&!y};q._collectLayerViews=function(d,y){const r=t=>{t&&t.forEach(h=>{y.push(h);r(h[d])});return y};return r};q._filterLayerViewsByLayerInfos=function(d){const y=this.layerInfos;return y&&y.length?y.some(r=>this._hasLayerInfo(r,d)):!0};q._hasLayerInfo=function(d,y){const r=
this._isLayerUIDMatching(d.layer,y.layer.uid);r&&(this._layerInfosByLayerViewId[y.uid]=d);return r};q._isLayerUIDMatching=function(d,y){return d&&(d.uid===y||this._hasLayerUID(d.layers,y))};q._hasLayerUID=function(d,y){return d&&d.some(r=>this._isLayerUIDMatching(r,y))};q._isLayerViewSupported=function(d){return k.includes(d.layer.declaredClass)?(this._layerViewByLayerId[d.layer.uid]=d,!0):!1};q._generateActiveLayerInfo=function(d){this._isLayerActive(d)?this._buildActiveLayerInfo(d):(this._handles.remove(d.uid),
this._handles.add(H.watch(()=>[d.legendEnabled,d.layer?.legendEnabled],()=>this._layerActiveHandle(d)),d.uid))};q._layerActiveHandle=function(d){this._isLayerActive(d)&&(this._handles.remove(d.uid),this._buildActiveLayerInfo(d))};q._isLayerActive=function(d){return this.respectLayerVisibility?d.legendEnabled&&d.get("layer.legendEnabled"):!0};q._buildActiveLayerInfo=function(d){const y=d.layer,r=d.uid;var t=this._layerInfosByLayerViewId[r];let h=this._activeLayerInfosByLayerViewId[r];h||(h=new b({layer:y,
layerView:d,title:t&&void 0!==t.title&&t.layer.uid===y.uid?t.title:y.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:t&&t.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[r]=h);h.parent=this._activeLayerInfosByLayerViewId[(y.parent&&"uid"in y.parent&&this._layerViewByLayerId[y.parent?.uid])?.uid];if(!this._handles.has(r)){t=H.watch(()=>y.title,R=>this._titleHandle(R,
h));var x=H.watch(()=>[y.opacity,"renderer"in y&&y.renderer,"pointSymbol"in y&&y.pointSymbol,"lineSymbol"in y&&y.lineSymbol,"polygonSymbol"in y&&y.polygonSymbol],()=>this._constructLegendElements(h)),D=H.when(()=>!0===this.view?.stationary,()=>this._scaleHandle(h),H.initial);const M=H.watch(()=>d._effectiveRenderer,()=>this._constructLegendElements(h)),v=H.watch(()=>"effect"in y&&y.effect,()=>this._constructLegendElements(h));t=[t,x,D,M,v];this.respectLayerVisibility&&(x=H.watch(()=>d.legendEnabled,
R=>this._legendEnabledHandle(R,h)),D=H.watch(()=>y.legendEnabled,R=>this._legendEnabledHandle(R,h)),t.push(x,D));this._handles.add(t,r)}h.isScaleDriven||this._constructLegendElements(h);this._addActiveLayerInfo(h)};q._titleHandle=function(d,y){y.title=d;this._constructLegendElements(y)};q._legendEnabledHandle=function(d,y){d?this._addActiveLayerInfo(y):this._removeActiveLayerInfo(y)};q._scaleHandle=function(d){(d.isScaleDriven||d.hideLayersNotInCurrentView)&&this._constructLegendElements(d)};q._addActiveLayerInfo=
function(d){const {layerView:y,layer:r}=d;if(this._isLayerActive(y)&&!this.activeLayerInfos.includes(d)){var t=d.parent;t?(t.children.includes(d)||t.children.push(d),this._sortActiveLayerInfos(t.children)):(t=this.layerInfos?.some(h=>h.layer.uid===r.uid),r.parent&&"uid"in r.parent&&!t?this._activeLayerInfosWithNoParent.add(d):(this.activeLayerInfos.add(d),this._sortActiveLayerInfos(this.activeLayerInfos)));if(this._activeLayerInfosWithNoParent.length){const h=[];this._activeLayerInfosWithNoParent.forEach(x=>
{var D=x.layer.parent;if(D=this._activeLayerInfosByLayerViewId[(D&&"uid"in D&&this._layerViewByLayerId[D?.uid])?.uid])h.push(x),x.parent=D});h.length&&(this._activeLayerInfosWithNoParent.removeMany(h),h.forEach(x=>this._addActiveLayerInfo(x)))}}};q._removeActiveLayerInfo=function(d){const y=d.parent;y?y.children.remove(d):this.activeLayerInfos.remove(d)};q._constructLegendElements=function(d){const y=d.layer;"featureCollections"in y&&y.featureCollections?d.buildLegendElementsForFeatureCollections(y.featureCollections):
"featureReduction"in y&&y.featureReduction&&"renderer"in y.featureReduction&&("binning"===y.featureReduction.type||"cluster"===y.featureReduction.type)?d.buildLegendElementsForFeatureReduction(y.featureReduction):"renderer"in y&&y.renderer&&!("sublayers"in y)?d.buildLegendElementsForRenderer(y.renderer):"url"in y&&y.url?d.buildLegendElementsForTools():d.children.forEach(r=>this._constructLegendElements(r))};C._createClass(Q,[{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);
return Q}(E);G.__decorate([z.property({type:l})],J.prototype,"activeLayerInfos",void 0);G.__decorate([z.property()],J.prototype,"basemapLegendVisible",void 0);G.__decorate([z.property()],J.prototype,"groundLegendVisible",void 0);G.__decorate([z.property()],J.prototype,"hideLayersNotInCurrentView",void 0);G.__decorate([z.property()],J.prototype,"keepCacheOnDestroy",void 0);G.__decorate([z.property()],J.prototype,"respectLayerVisibility",void 0);G.__decorate([z.property()],J.prototype,"layerInfos",
void 0);G.__decorate([z.property({readOnly:!0})],J.prototype,"state",null);G.__decorate([z.property()],J.prototype,"view",void 0);return J=G.__decorate([n.subclass("esri.widgets.Legend.LegendViewModel")],J)})},"esri/widgets/Legend/support/ActiveLayerInfo":function(){define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../kernel ../../../request ../../../symbols ../../../core/Accessor ../../../core/Collection ../../../core/Handles ../../../core/jsonMap ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/PropertyOrigin ../../../layers/effects/EffectView ../../../layers/effects/jsonUtils ../../../layers/support/ExportImageParameters ../../../layers/support/fieldUtils ../../../renderers/support/jsonUtils ../../../renderers/support/rendererConversion ../../../renderers/visualVariables/support/SizeVariableLegendOptions ../../../symbols/support/cimSymbolUtils ../../../symbols/support/previewUtils ../../../symbols/support/renderUtils ../../../symbols/support/symbolUtils ../../../symbols/support/utils ./clusterUtils ./colorRampUtils ./heatmapRampUtils ./relationshipRampUtils ./sizeRampUtils ./utils ../../smartMapping/support/utils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleFillSymbol".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b,f,l,k,A,P,Q,q,d,y,r,t,h,x,D,M,v,R,S,g,O,X,L,e,w,B,W,ea,aa,F,N,Y){function ba(wa){return"esri.renderers.SimpleRenderer"===wa.declaredClass}function ha(wa){return"esri.renderers.ClassBreaksRenderer"===wa.declaredClass}function ma(wa){return"esri.renderers.UniqueValueRenderer"===wa.declaredClass}function ja(wa){return"esri.renderers.HeatmapRenderer"===wa.declaredClass}function ka(wa){return"esri.renderers.PointCloudClassBreaksRenderer"===wa.declaredClass}function sa(wa){return"esri.renderers.PointCloudStretchRenderer"===
wa.declaredClass}function da(wa){return"esri.renderers.PointCloudUniqueValueRenderer"===wa.declaredClass}function ra(wa){return"esri.renderers.DotDensityRenderer"===wa.declaredClass}function na(wa){return"esri.renderers.PieChartRenderer"===wa.declaredClass}function oa(wa){return"esri.layers.SubtypeGroupLayer"===wa.declaredClass}function qa(wa){wa="authoringInfo"in wa&&wa?.authoringInfo;return"univariate-color-size"===wa?.type&&"above-and-below"===wa?.univariateTheme}const va=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
za=new n.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ea={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Da=new N({size:6,outline:{color:[128,128,128,.5],width:.5}}),Ya=new Y({style:"solid"}),Za=new N({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",
size:15,outline:{width:1,color:[85,85,85,1]}});let Ha={};H=function(wa){function Na(m){m=wa.call(this,m)||this;m._handles=new c;m._hasColorRamp=!1;m._hasOpacityRamp=!1;m._hasSizeRamp=!1;m._webStyleSymbolCache=new Map;m._dotDensityUrlCache=new Map;m._scaleDrivenSizeVariable=null;m._hasClusterSizeVariable=!1;m.children=new U;m.layerView=null;m.layer=null;m.legendElements=[];m.parent=null;m.hideLayersNotInCurrentView=!1;m.keepCacheOnDestroy=!1;m.respectLayerVisibility=!0;m.sublayerIds=[];m.title=null;
m.view=null;return m}G._inheritsLoose(Na,wa);var fa=Na.prototype;fa.initialize=function(){const m=()=>this.notifyChange("ready");this._handles.add([k.on(()=>this.children,"change",a=>{const {added:u,removed:I}=a,V=this._handles;u.forEach(T=>{const Z=`activeLayerInfo-ready-watcher-${T.layer.uid}`;V.add(k.watch(()=>T.ready,m,k.initial),Z)});I.forEach(T=>V.remove(T.layer.uid));m()})]);this.keepCacheOnDestroy||(Ha={})};fa.destroy=function(){this._handles.destroy();this._scaleDrivenSizeVariable=this._dotDensityUrlCache=
this._webStyleSymbolCache=this._handles=null;this.keepCacheOnDestroy||(Ha=null)};fa.buildLegendElementsForFeatureCollections=function(){var m=G._asyncToGenerator(function*(a){if(this.hideLayersNotInCurrentView&&!(yield this._isLayerInCurrentView()))this.legendElements=[],this.notifyChange("ready");else{a=Array.from(a,u=>{if("esri.layers.FeatureLayer"===u.declaredClass)return this._getRendererLegendElements(u.renderer,{title:u.title});if(u.featureSet&&u.featureSet.features.length){var I=u.layerDefinition,
V=I&&I.drawingInfo;V=V&&M.fromJSON(V.renderer);I=za.read(I.geometryType);return V?this._getRendererLegendElements(V,{title:u.name,geometryType:I}):(b.getLogger(this.declaredClass).warn("drawingInfo not available!"),null)}return null});try{const u=[];yield l.eachAlways(a).then(I=>{I.forEach(({value:V})=>V&&u.push(...V))});this.legendElements=u;this.notifyChange("ready")}catch(u){b.getLogger(this.declaredClass).warn("error while building legend for layer!",u)}}});return function(a){return m.apply(this,
arguments)}}();fa.buildLegendElementsForRenderer=function(){var m=G._asyncToGenerator(function*(a){try{this.legendElements=(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getRendererLegendElements(a):[],this.notifyChange("ready")}catch(u){b.getLogger(this.declaredClass).warn("error while building legend for layer!",u)}});return function(a){return m.apply(this,arguments)}}();fa.buildLegendElementsForFeatureReduction=function(){var m=G._asyncToGenerator(function*(a){try{this.legendElements=
(this.hideLayersNotInCurrentView?yield this._isLayerInCurrentView():1)?yield this._getLegendElementsForFeatureReduction(a):[],this.notifyChange("ready")}catch(u){b.getLogger(this.declaredClass).warn("error while building legend for layer!",u)}});return function(a){return m.apply(this,arguments)}}();fa.buildLegendElementsForTools=function(){var m=G._asyncToGenerator(function*(){var a=this;const u=this.layer;if("esri.layers.VoxelLayer"===u.declaredClass)this._constructLegendElementsForVoxellayer();
else if("esri.layers.WMTSLayer"===u.declaredClass)this._constructLegendElementsForWMTSlayer();else if("esri.layers.WMSLayer"===u.declaredClass)yield this._constructLegendElementsForWMSSublayers();else if("esri.layers.BuildingSceneLayer"===u.declaredClass)yield this._constructLegendElementsForBuildingSceneLayer();else if("esri.layers.MapImageLayer"===u.declaredClass||"esri.layers.TileLayer"===u.declaredClass||oa(u))yield this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");
var I="default";if("esri.layers.ImageryLayer"===u.declaredClass){I=u?.renderingRule?.functionName||"default";const V=u.bandIds?.length?u.bandIds.join(""):"###";I=I+"_"+V}yield this._getLegendLayers(`${u.uid}-${I}`).then(function(){var V=G._asyncToGenerator(function*(T){a.legendElements=[];a.notifyChange("ready");T=T.map(function(){var Z=G._asyncToGenerator(function*(ca){if("esri.layers.ImageryLayer"===u.declaredClass||"esri.layers.ImageryTileLayer"===u.declaredClass){const ua=k.watch(()=>["renderingRule"in
u&&u.renderingRule,u.bandIds],()=>l.debounce(G._asyncToGenerator(function*(){Ha["default"]=null;u.renderer?yield a.buildLegendElementsForRenderer(u.renderer):yield a.buildLegendElementsForTools()}))());a._handles.add(ua,"imageryLayers-watcher")}(ca=a._generateSymbolTableElementForLegendLayer(ca))&&ca.infos.length&&("esri.layers.ImageryLayer"===u.declaredClass&&(ca.title=u.title),a.legendElements.push(ca));a.notifyChange("ready")});return function(ca){return Z.apply(this,arguments)}}());yield l.eachAlways(T)});
return function(T){return V.apply(this,arguments)}}()).catch(V=>{b.getLogger(this.declaredClass).warn("Request to server for legend has failed!",V)})}});return function(){return m.apply(this,arguments)}}();fa._isLayerInCurrentView=function(){var m=G._asyncToGenerator(function*(){const a=this.layer,u=this.layerView,I=u&&"createQuery"in u&&"queryFeatureCount"in u;if(!(I||u&&"createQuery"in a&&"queryFeatureCount"in a))return!0;yield k.whenOnce(()=>!u.updating);const V=I?"createQuery"in u&&u.createQuery():
"createQuery"in a&&a.createQuery();V.geometry=this.view.extent;return 0!==(I?"queryFeatureCount"in u&&(yield u.queryFeatureCount(V)):"queryFeatureCount"in a&&(yield a.queryFeatureCount(V)))});return function(){return m.apply(this,arguments)}}();fa._getParentLayerOpacity=function(m){let a=1;const u=m.parent;u&&"uid"in u&&(a=this._getParentLayerOpacity(u));return m.opacity*a};fa._isGroupActive=function(){const m=this.children;return m.length?m.some(a=>a.ready):!1};fa._isRendererScaleDriven=function(m){return"dot-density"===
m.type||va.test("valueExpression"in m&&m.valueExpression)?!0:(m="visualVariables"in m&&m.visualVariables)?m.some(a=>this._isScaleDrivenSizeVariable(a)):!1};fa._isScaleDrivenSizeVariable=function(m){if(m&&"size"!==m.type)return!1;const a=m.minSize,u=m.maxSize;return"object"===typeof a&&a?this._isScaleDrivenSizeVariable(a):"object"===typeof u&&u?this._isScaleDrivenSizeVariable(u):!!m.expression||va.test(m.valueExpression)};fa._isLayerScaleDriven=function(m){if("minScale"in m&&0<m.minScale||"maxScale"in
m&&0<m.maxScale)return!0;if("sublayers"in m&&m.sublayers)return m.sublayers.some(u=>this._isLayerScaleDriven(u));const a=m.parent;if(!1===m.loaded&&a&&"esri.layers.MapImageLayer"===a.declaredClass&&"source"in m&&m.source&&"map-layer"===m.source.type)for(const u of a.sourceJSON.layers)if(u.id===m.source.mapLayerId&&(0<u.minScale||0<u.maxScale))return!0;return!1};fa._constructLegendElementsForVoxellayer=function(){var m=G._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("voxel-style-watcher");
this._handles.remove("voxel-current-variable");const a=this.layer;this._handles.add(k.watch(()=>a.currentVariableId,()=>this._constructLegendElementsForVoxellayer()),"voxel-current-variable");this._handles.add(k.watch(()=>a.getVariableStyles(),()=>this._constructLegendElementsForVoxellayer()),"voxel-style-watcher");var u=f.unwrap(a.getVariableStyle(null));const I=[];if(u)if(u.uniqueValues?.length){const T=[];u.uniqueValues.forEach(Z=>{Z.enabled&&T.push({label:Z.label||`${Z.value}`,value:Z.value,symbol:new Y({color:Z.color,
outline:null})})});T.length&&I.push({type:"symbol-table",title:u.label,infos:T})}else if(u.transferFunction){const {colorStops:T,stretchRange:Z}=u.transferFunction,ca=T.toArray().reverse(),ua=Z.map((Ba,ia)=>`${0===ia?aa.SPECIAL_CHARS_LESS_THAN:aa.SPECIAL_CHARS_GREATER_THAN} ${F.formatNumberLabel(Ba)}`).reverse(),ya=ca.map(Ba=>({color:Ba.color,value:null,label:null}));ya[0].label=ua[0];ya[ya.length-1].label=ua[1];I.push({type:"color-ramp",title:u.label,infos:ya,preview:X.renderColorRampPreviewHTML(ca.map(Ba=>
Ba.color))})}const V=a.opacity;u=I.reduce((T,Z)=>T.concat(this._getAllInfos(Z)),[]).filter(T=>!!T?.symbol).map(T=>this._getSymbolPreview(T,V));yield l.eachAlways(u);this.legendElements=I;this.notifyChange("ready")});return function(){return m.apply(this,arguments)}}();fa._constructLegendElementsForWMTSlayer=function(){this.legendElements=[];this._handles.remove("wmts-activeLayer-watcher");const m=this.layer.activeLayer;this._handles.add(k.watch(()=>{const {layer:a}=this;return a&&"activeLayer"in a&&
a.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");if(m.styleId&&m.styles){let a=null;m.styles.some(u=>m.styleId===u.id?(a=u.legendUrl,!0):!1);a&&(this.legendElements=[{type:"symbol-table",title:m.title,infos:[{src:a,opacity:this.opacity}]}])}this.notifyChange("ready")};fa._constructLegendElementsForWMSSublayers=function(){var m=G._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("wms-sublayers-watcher");const a=this.layer;let u=null;
if(a.customParameters||a.customLayerParameters)u={...a.customParameters,...a.customLayerParameters};this._handles.add(k.watch(()=>{const {layer:I}=this;return I&&"sublayers"in I&&I.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");this.legendElements=yield this._generateLegendElementsForWMSSublayers(a.sublayers,u);this.notifyChange("ready")});return function(){return m.apply(this,arguments)}}();fa._generateLegendElementsForWMSSublayers=function(){var m=G._asyncToGenerator(function*(a,
u){const I=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");a=a.toArray();for(const V of a)a=k.watch(()=>[V.title,V.visible,V.legendEnabled],()=>this._constructLegendElementsForWMSSublayers()),this._handles.add(a,"wms-sublayers-watcher"),(!this.respectLayerVisibility||V.visible&&V.legendEnabled)&&(a=yield this._generateSymbolTableElementForWMSSublayer(V,u))&&a.infos.length&&I.unshift(a);return I});return function(a,u){return m.apply(this,
arguments)}}();fa._generateSymbolTableElementForWMSSublayer=function(){var m=G._asyncToGenerator(function*(a,u){return!a.legendUrl&&a.sublayers?(u=(yield this._generateLegendElementsForWMSSublayers(a.sublayers,u)).filter(I=>I),{type:"symbol-table",title:a.title,infos:u}):this._generateSymbolTableElementForLegendUrl(a,u)});return function(a,u){return m.apply(this,arguments)}}();fa._generateSymbolTableElementForLegendUrl=function(){var m=G._asyncToGenerator(function*(a,u){let I=a.legendUrl;if(I){var V=
{type:"symbol-table",title:a.title||a.name||a.id&&a.id+"",infos:[]};u&&(I=P.addQueryParameters(I,u));u=null;a=a.layer?.opacity;try{if(u=(yield K(I,{responseType:"image"})).data)u.style.opacity=a}catch{}V.infos.push({src:I,preview:u,opacity:a});return V}});return function(a,u){return m.apply(this,arguments)}}();fa._getLegendLayers=function(m,a){const u=Ha&&Ha[m];return u?Promise.resolve(u):this._legendRequest(a).then(I=>{I=I.layers;return Ha[m]=I})};fa._legendRequest=function(m){var a=this.layer;m=
{f:"json",dynamicLayers:m};if("esri.layers.ImageryLayer"===a.declaredClass){var u=a.exportImageServiceParameters.renderingRule;u&&(m.renderingRule=JSON.stringify(u.rasterFunctionDefinition||u.toJSON()));a.bandIds&&(m.bandIds=a.bandIds.join());if(a.raster||a.viewId||a.customParameters){const {raster:I,viewId:V,customParameters:T}=a;m={raster:I,viewId:V,...m,...T}}}u=a.url.replace(/(\/)+$/,"");"version"in a&&10.01<=a.version?(a=u.indexOf("?"),u=-1<a?u.substring(0,a)+"/legend"+u.substring(a):u+"/legend"):
(a=u.toLowerCase().indexOf("/rest/"),a=u.substring(0,a)+u.substring(a+5,u.length),u="https://utility.arcgis.com/sharing/tools/legend?soapUrl\x3d"+encodeURI(a)+"\x26returnbytes\x3dtrue");return K(u,{query:m}).then(I=>I.data)};fa._constructLegendElementsForBuildingSceneLayer=function(){var m=G._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(k.watch(()=>a.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),
"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(a.sublayers,this.opacity),this.notifyChange("ready")}catch(u){b.getLogger(this.declaredClass).warn("Request to server for legend has failed!",u)}});return function(){return m.apply(this,arguments)}}();fa._generateLegendElementsForBuildingSublayers=function(){var m=G._asyncToGenerator(function*(a,u){let I=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");
a=a.toArray();for(const T of a)if(a=k.watch(()=>["renderer"in T&&T.renderer,T.opacity,T.title,T.visible],()=>this._constructLegendElementsForBuildingSceneLayer()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||T.visible){a=T&&null!=T.opacity?T.opacity:null;var V=null!=a?a*u:u;"building-group"===T.type?(a={type:"symbol-table",title:T.title,infos:[]},V=yield this._generateLegendElementsForBuildingSublayers(T.sublayers,V),a.infos.push(...V),I=[a,...I]):T.renderer&&(I=[...(yield this._getRendererLegendElements(T.renderer,
{title:T.title,opacity:V,sublayer:T})),...I])}return I.filter(T=>!!T&&("infos"in T?0<T.infos.length:!0))});return function(a,u){return m.apply(this,arguments)}}();fa._constructLegendElementsForSublayers=function(){var m=G._asyncToGenerator(function*(){this.legendElements=[];this._handles.remove("sublayers-watcher");const a=this.layer;this._handles.add(k.watch(()=>a.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForSublayers(a.sublayers,
this.opacity),this.notifyChange("ready")}catch(u){b.getLogger(this.declaredClass).warn("Request to server for legend has failed!",u)}});return function(){return m.apply(this,arguments)}}();fa._generateLegendElementsForSublayers=function(){var m=G._asyncToGenerator(function*(a,u,I){const V=this.layer;let T=[];this._handles.add(a.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");a=a.toArray();!I&&this.sublayerIds&&this.sublayerIds.length&&(a=this.sublayerIds.map(Z=>V.findSublayerById(Z)).filter(Boolean));
for(const Z of a)if(a=k.watch(()=>[Z.renderer,Z.opacity,Z.title,Z.visible,Z.legendEnabled],()=>this._constructLegendElementsForSublayers()),this._handles.add(a,"sublayers-watcher"),!this.respectLayerVisibility||Z.visible&&Z.legendEnabled&&this._isSublayerInScale(Z)){a=Z&&null!=Z.opacity?Z.opacity:null;a=null!=a?a*u:u;const ca=oa(V)?!0:Z.originIdOf("renderer")>r.OriginId.SERVICE;Z.renderer&&!Z.sublayers&&ca?(yield Z.load(),T=[...(yield this._getRendererLegendElements(Z.renderer,{title:Z.title,opacity:a,
sublayer:Z})),...T]):(a=yield this._generateSymbolTableElementForSublayer(Z,a,I))&&T.unshift(a)}return T.filter(Z=>!!Z&&("infos"in Z?0<Z.infos.length:!0))});return function(a,u,I){return m.apply(this,arguments)}}();fa._generateSymbolTableElementForSublayer=function(){var m=G._asyncToGenerator(function*(a,u,I){if(!I){I=new Map;var V=this.layer,T=a.source;let Z=null;if(T&&("map-layer"!==T.type||T.mapLayerId!==a.id||T.gdbVersion&&T.gdbVersion!==("gdbVersion"in V&&V.gdbVersion))||a.originIdOf("renderer")>
r.OriginId.SERVICE||a.originIdOf("labelingInfo")>r.OriginId.SERVICE||a.originIdOf("labelsVisible")>r.OriginId.SERVICE)T=new x.ExportImageParameters({layer:this.layer}),Z=T.hasDynamicLayers?T.dynamicLayers:null,T.destroy();(yield this._getLegendLayers(Z||`${V.uid}-default`,Z)).forEach(ca=>I.set(ca.layerId,ca))}V=I.get(a.id);return(!V||V?.subLayerIds&&V.defaultVisibility)&&a.sublayers?(u=yield this._generateLegendElementsForSublayers(a.sublayers,u,I),{type:"symbol-table",title:a.title,infos:u}):this._generateSymbolTableElementForLegendLayer(V,
a,u)});return function(a,u,I){return m.apply(this,arguments)}}();fa._generateSymbolTableElementForLegendLayer=function(m,a,u){if(!m||!m.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(m,a))return null;var I=a?.renderer;let V=a?.title||m.layerName;I&&(!a||a?.originIdOf("renderer")>r.OriginId.SERVICE)&&(I=a?.title||this._getRendererTitle(I,a))&&(V&&"string"!==typeof I&&"title"in I&&(I.title=V),V=I);const T={type:"symbol-table",title:V,legendType:m.legendType?m.legendType:null,infos:[]},
Z=a?this._sanitizeLegendForSublayer(m.legend.slice(),a):m.legend;0<m.legendGroups?.length?m.legendGroups.forEach(ca=>{const ua={type:"symbol-table",title:ca.heading,legendType:m.legendType?m.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(Z.filter(ya=>ya.groupId===ca.id),m.layerId,u)};0<ua.infos?.length&&T.infos.push(ua)}):T.infos=this._generateSymbolTableElementInfosForLegendLayer(Z,m.layerId,u);return 0<T.infos.length?T:null};fa._generateSymbolTableElementInfosForLegendLayer=
function(m,a,u){return m.map(I=>{let V=I.url;if(I.imageData&&0<I.imageData.length)V=`data:image/png;base64,${I.imageData}`;else if(0!==V.indexOf("http"))V=p.addTokenParameter(`${this.layer.url}/${a}/images/${V}`);else return null;return{label:I.label,src:V,opacity:null==u?this.opacity:u,width:I.width,height:I.height}}).filter(I=>!!I)};fa._isSublayerInScale=function(m){const a=m.minScale||0;m=m.maxScale||0;return 0<a&&a<this.scale||m>this.scale?!1:!0};fa._isLegendLayerInScale=function(m,a){a=a||this.layer;
let u=null,I=null,V=!0;!a.minScale&&0!==a.minScale||!a.maxScale&&0!==a.maxScale?(0===m.minScale&&a.tileInfo&&(u=a.tileInfo.lods[0].scale),0===m.maxScale&&a.tileInfo&&(I=a.tileInfo.lods[a.tileInfo.lods.length-1].scale)):(u=Math.min(a.minScale,m.minScale)||a.minScale||m.minScale,I=Math.max(a.maxScale,m.maxScale));if(0<u&&u<this.scale||I>this.scale)V=!1;return V};fa._sanitizeLegendForSublayer=function(m,a){if("version"in this.layer&&10.1>this.layer.version||0===m.length)return m;a=a.renderer;let u=null,
I=null;m.some(V=>V.values)&&m.some((V,T)=>{V.values||(u=T,I=V,I.label||(I.label="others"));return null!=I});a?"unique-value"===a.type?I&&(m.splice(u,1),m.push(I)):"class-breaks"===a.type&&(I&&m.splice(u,1),m.reverse(),I&&m.push(I)):I&&(m.splice(u,1),m.push(I));return m};fa._getRendererLegendElements=function(){var m=G._asyncToGenerator(function*(a,u={}){var I=this.view;I=ba(a)||ha(a)||ma(a)||ja(a)||ra(a)||na(a)?"2d"===I.type||v.isSupportedRenderer3D(a):"raster-stretch"===a.type||"raster-colormap"===
a.type||"raster-shaded-relief"===a.type||ka(a)||sa(a)||da(a)||"vector-field"===a.type||"flow"===a.type;if(!I)return b.getLogger(this.declaredClass).warn(`Renderer of type '${a.type}' not supported!`),[];if(ka(a)||sa(a)||da(a)||"esri.renderers.PointCloudRGBRenderer"===a.declaredClass)return this._constructPointCloudRendererLegendElements(a,u);if(ra(a))return this._constructDotDensityRendererLegendElements(a);a=yield this._loadRenderer(a);return na(a)?this._constructPieChartRendererLegendElements(a):
this._constructRendererLegendElements(a,u)});return function(a){return m.apply(this,arguments)}}();fa._getLegendElementsForFeatureReduction=function(){var m=G._asyncToGenerator(function*(a){let u=null;"binning"===a.type?u=a.renderer:"cluster"===a.type&&(u=this._getClusterRenderer(a));return u?this._getRendererLegendElements(u):[]});return function(a){return m.apply(this,arguments)}}();fa._getPointCloudRendererTitle=function(m){return m.legendOptions&&m.legendOptions.title||m.field};fa._constructPointCloudRendererLegendElements=
function(m,a={}){a=a.title;const u=[];let I=null;var V=null;if(ka(m))I={type:"symbol-table",title:a||this._getPointCloudRendererTitle(m),infos:[]},m.colorClassBreakInfos.forEach(T=>{I.infos.unshift({label:T.label||T.minValue+" - "+T.maxValue,value:[T.minValue,T.maxValue],symbol:this._getAppliedCloneSymbol(Da,T.color)})});else if(sa(m)){V=m.stops;let T=null;if(V.length&&(1===V.length&&(T=V[0].color),!T)){const Z=V[0].value,ca=V[V.length-1].value;null!=Z&&null!=ca&&(T=w.getColorFromPointCloudStops(Z+
(ca-Z)/2,V))}I={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Da,T||Da.color)}]};V=w.getRampStopsForPointCloud(m.stops);V={type:"color-ramp",title:a||this._getPointCloudRendererTitle(m),infos:V,preview:X.renderColorRampPreviewHTML(V.map(Z=>Z.color))}}else da(m)&&(I={type:"symbol-table",title:a||this._getPointCloudRendererTitle(m),infos:[]},m.colorUniqueValueInfos.forEach(T=>{I.infos.push({label:T.label||T.values.join(", "),value:T.values.join(", "),
symbol:this._getAppliedCloneSymbol(Da,T.color)})}));I&&I.infos.length&&u.push(I);V&&V.infos.length&&u.push(V);a=u.reduce((T,Z)=>T.concat(Z.infos),[]).filter(T=>!!T.symbol).map(T=>this._getSymbolPreview(T,this.opacity,{symbolConfig:{applyColorModulation:!!m.colorModulation}}));return l.eachAlways(a).then(()=>u)};fa._getElementInfoForDotDensity=function(m,a){const {backgroundColor:u,outline:I,dotSize:V}=m;var T=this.effectList?.effects.map(ca=>ca.toJSON());T=h.effectFunctionsFromJSON(T);T=V+"-"+a+"-"+
u+"-"+(I&&JSON.stringify(I.toJSON()))+"-"+T;const Z=this._dotDensityUrlCache;m=Z.has(T)?Z.get(T):X.renderDotDensityPreviewHTML(m,a);Z.set(T,m);a=O.renderSymbol([[{shape:{type:"image",x:0,y:0,width:m.width,height:m.height,src:m.src},fill:null,stroke:null,offset:[0,0]}]],[m.width,m.height],{effectView:this.effectList});return{opacity:1,src:m.src,preview:a,width:m.width,height:m.height}};fa._constructDotDensityRendererLegendElements=function(m){const a=m.calculateDotValue(this.view.scale),u={type:"symbol-table",
title:{value:a&&Math.round(a),unit:m.legendOptions&&m.legendOptions.unit||""},infos:[]};m.attributes.forEach(I=>{const V=this._getElementInfoForDotDensity(m,I.color);V.label=I.label||I.valueExpressionTitle||I.field;u.infos.push(V)});return Promise.resolve([u])};fa._constructPieChartRendererLegendElements=function(){var m=G._asyncToGenerator(function*(a){const u=this.layer.opacity,I=[],V=a.outline;a.attributes.forEach(ca=>{const ua=new N({color:ca.color,outline:V});I.push({label:ca.label||ca.valueExpressionTitle||
ca.field,symbol:ua})});var T=I.length?[...I]:[];if(a.othersCategory?.color&&0!==a.othersCategory?.threshold){var Z=new N({color:a.othersCategory.color,outline:V});I.push({label:a.othersCategory.label||"Others",symbol:Z})}a.defaultColor?.a&&(Z=new N({color:a.defaultColor,outline:V}),I.push({label:a.defaultLabel,symbol:Z}));Z=(yield this._getVisualVariableLegendElements(a,this.layer))||[];I.length&&(Z.unshift({type:"symbol-table",title:null,infos:I}),T=T.filter(ca=>"Others"!==ca.label).map(ca=>ca.symbol.color).filter(Boolean),
T=X.renderPieChartPreviewHTML(T,{holePercentage:a.holePercentage,backgroundColor:a.backgroundFillSymbol?.color,effectList:this.effectList,outline:V}),Z.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(a,this.layer),infos:I,preview:T}));a=Z.reduce((ca,ua)=>ca.concat(this._getAllInfos(ua)),[]).filter(ca=>!!ca?.symbol&&!ca?.preview).map(ca=>this._getSymbolPreview(ca,u,{effectList:this.effectList}));yield l.eachAlways(a);return Z});return function(a){return m.apply(this,arguments)}}();fa._constructRendererLegendElements=
function(){var m=G._asyncToGenerator(function*(a,u={}){const {title:I,sublayer:V}=u,T=V||this.layer;this._hasSizeRamp=this._hasOpacityRamp=this._hasColorRamp=!1;this._scaleDrivenSizeVariable=null;const Z=(yield this._getVisualVariableLegendElements(a,T))||[],ca={type:"symbol-table",title:I||this._getRendererTitle(a,T),infos:[]};let ua=null,ya=!1;const Ba=new Set;if("flow"!==a.type||this._hasSizeRamp)if("univariate-color-size"===("authoringInfo"in a&&a?.authoringInfo)?.type){var ia=I,pa=qa(a)?"univariate-above-and-below-ramp":
"univariate-color-size-ramp",xa=Z.findIndex(la=>"color-ramp"===la.type);xa=-1!==xa?Z.splice(xa,1)[0]:null;var ta=Z.findIndex(la=>"size-ramp"===la.type);ta=-1!==ta?Z.splice(ta,1)[0]:null;var Aa=[];xa&&(ia=xa.title,Aa.push(xa));ta&&(ia=ta.title,Aa.push(ta));0<Aa.length&&Z.push({type:pa,title:ia,infos:Aa})}else if(ja(a))ia=B.getHeatmapRampStops(a),Z.push({type:"heatmap-ramp",title:I||this._getRendererTitle(a,T),infos:ia,preview:X.renderColorRampPreviewHTML(ia.map(la=>la.color),{effectList:this.effectList})});
else if(ma(a)){if((pa=a&&a.authoringInfo)&&"relationship"===pa.type){const {focus:la,numClasses:Ca,field1:Ia,field2:Oa}=pa;if(Ca&&Ia&&Oa){xa=[Ia,Oa];pa=W.getRotationAngleForFocus(la)||0;for(ia of xa){const {field:Pa,normalizationField:Qa,label:Fa}=ia;xa=Fa||{field:this._getFieldAlias(Pa,T),normField:Qa&&this._getFieldAlias(Qa,T)};ta=Za.clone();ta.angle=pa;ca.infos.push({label:xa,symbol:ta});Ba.add(ta);pa+=90}ia=W.getRelationshipRampElement({focus:la,numClasses:Ca,infos:a.uniqueValueInfos});Z.unshift(ia)}}else if("esri.layers.ImageryLayer"===
this.layer.declaredClass||"esri.layers.ImageryTileLayer"===this.layer.declaredClass)a.uniqueValueInfos.forEach(la=>{la.symbol&&ca.infos.push({label:la.label||la.value,value:la.value,symbol:la.symbol})});else{const {field:la,field2:Ca,field3:Ia,fieldDelimiter:Oa,valueExpression:Pa}=a,Qa=!(!la&&!Pa||!Ca&&!Ia),Fa=[];a.uniqueValueGroups.forEach(Ta=>{const Sa={type:"symbol-table",title:Ta.heading,infos:[]};Ta.classes.forEach(Ja=>{const {symbol:Ua,values:$a}=Ja;if(Ua){var Ka=[],La=[];for(const ab of $a){const {value:Va,
value2:Wa,value3:Xa}=ab,Ma=[],Ra=[];if(la||Pa)Ma.push(Va),Ra.push(this._getDomainName(la,Va,T));Ca&&(Ma.push(Wa),Ra.push(this._getDomainName(Ca,Wa,T)));Ia&&(Ma.push(Xa),Ra.push(this._getDomainName(Ia,Xa,T)));Ka.push(Qa?Ma.join(Oa||""):Ma[0]);La.push(Ra.join(" - "))}Ka=Ka.join(", ");Ja=Ja.label;Ja||(La=La.filter(Boolean),Ja=La.length?La.join(", "):Ka);Sa.infos.push({label:Ja,value:Ka,symbol:Ua})}});Sa.infos.length&&Fa.push(Sa)});Fa.length&&(ia=Fa[0],1===Fa.length&&"title"in ia&&!ia.title?ca.infos.push(...ia.infos):
ca.infos.push(...Fa))}a.defaultSymbol&&(ca.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),ya=!0)}else if(ha(a))ua=this._isUnclassedRenderer(a),ua&&this._hasSizeRamp||(a.classBreakInfos.forEach(la=>{la.symbol&&ca.infos.unshift({label:la.label||(ua?null:la.minValue+" - "+la.maxValue),value:[la.minValue,la.maxValue],symbol:la.symbol})}),ua&&(ca.title=null),this._updateInfosforClassedSizeRenderer(a,ca.infos)),a.defaultSymbol&&!ua&&(ca.infos.push({label:a.defaultLabel||"others",symbol:a.defaultSymbol}),
ya=!0);else if("raster-stretch"===a.type)if("esri.layers.ImageryTileLayer"===this.layer.declaredClass||"esri.layers.WCSLayer"===this.layer.declaredClass)ia=this._constructTileImageryStretchRendererElements(a),"stretch-ramp"===ia.type?Z.push(ia):ca.infos=ia;else{ia=this.layer;a.statistics&&a.statistics.length&&(pa=null!=a.statistics[0].min?a.statistics[0].min:a.statistics[0][0],xa=null!=a.statistics[0].max?a.statistics[0].max:a.statistics[0][1]);ta=[];ta=f.unwrap(ia.renderingRule?yield ia.generateRasterInfo(ia.renderingRule):
ia.serviceRasterInfo);const la=ta.keyProperties.BandProperties;Aa=Ea[ia.rasterInfo.pixelType.toLowerCase()];1===ta.bandCount?(pa=null!=pa?pa:ta.statistics?ta.statistics[ia.bandIds[0]].min:Aa[0],xa=null!=xa?xa:ta.statistics?ta.statistics[ia.bandIds[0]].max:Aa[1],pa||xa?Z.push(this._getStretchLegendElements(a,{min:pa,max:xa})):this._getServerSideLegend()):ia.bandIds&&1===ia.bandIds.length?(pa=null!=pa?pa:ta.statistics?ta.statistics[ia.bandIds[0]].min:Aa[0],xa=null!=xa?xa:ta.statistics?ta.statistics[ia.bandIds[0]].max:
Aa[1],pa||xa?Z.push(this._getStretchLegendElements(a,{min:pa,max:xa})):this._getServerSideLegend()):3<=ta.bandCount?la&&la.length>=ta.bandCount?ia.bandIds&&3===ia.bandIds.length?(ta=ia.bandIds.map(Ca=>la[Ca].BandName),ca.infos=this._createSymbolTableElementMultiBand(ta)):"lerc"===ia.format?(ta=[0,1,2].map(Ca=>la[Ca].BandName),ca.infos=this._createSymbolTableElementMultiBand(ta)):this._getServerSideLegend():"lerc"===ia.format?(ta=["band1","band2","band3"],ca.infos=this._createSymbolTableElementMultiBand(ta)):
this._getServerSideLegend():this._getServerSideLegend()}else if("raster-colormap"===a.type)a.colormapInfos.forEach(la=>{ca.infos.push({label:la.label,value:la.value,symbol:this._getAppliedCloneSymbol(Ya,la.color)})});else if(ba(a)){ia=a.symbol;switch(u.geometryType){case "point":ia="pointSymbol"in T&&T.pointSymbol;break;case "polyline":ia="lineSymbol"in T&&T.lineSymbol;break;case "polygon":ia="polygonSymbol"in T&&T.polygonSymbol}pa=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;
a.symbol&&pa&&ca.infos.push({label:a.label,symbol:ia})}else"vector-field"===a.type?(a.outputUnit&&(this.title="("+a.toJSON().outputUnit+")"),ca.title=a.attributeField,ia=a.getClassBreakInfos(),ia?.length?ia.forEach(la=>{ca.infos.push({label:la.minValue+" - "+la.maxValue,symbol:la.symbol})}):ca.infos.push({label:a.attributeField,symbol:a.getDefaultSymbol()})):"raster-shaded-relief"===a.type&&Z.push(this._getStretchLegendElements(a,{min:0,max:255}));else ia=yield aa.getSymbolForFlowRenderer(a),ca.infos.push({label:null,
symbol:ia});const Ga=a.defaultSymbol;!Ga||ya||ba(a)||ua&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||Z.push({type:"symbol-table",infos:[{label:a.defaultLabel||"others",symbol:Ga}]});ca.infos.length&&Z.unshift(ca);const bb=null==u.opacity?this.opacity:u.opacity,cb=this._isTallSymbol("visualVariables"in a&&a.visualVariables),db="esri.layers.ImageryLayer"===this.layer.declaredClass||"esri.layers.ImageryTileLayer"===this.layer.declaredClass;u=Z.reduce((la,Ca)=>la.concat(this._getAllInfos(Ca)),
[]).filter(la=>!!la?.symbol).map(la=>this._getSymbolPreview(la,bb,{isDefault:la.symbol===Ga,applyScaleDrivenSize:!Ba.has(la.symbol),symbolConfig:{isTall:cb,isSquareFill:db},effectList:Ba.has(la.symbol)?null:this.effectList}));a=null;yield l.eachAlways(u);return Z});return function(a){return m.apply(this,arguments)}}();fa._getServerSideLegend=function(){setTimeout(()=>this.buildLegendElementsForTools(),0)};fa._getAllInfos=function(m){const a=m?.infos;return a?a.reduce((u,I)=>u.concat(this._getAllInfos(I)),
[]):[m]};fa._constructTileImageryStretchRendererElements=function(m){function a(ua){const ya=(u?.bandIds?.length?u.bandIds:Array.from(Array(Math.min(I.bandCount,3)).keys())).map(Ba=>ua&&ua[Ba]&&ua[Ba].BandName||"band"+(Ba+1));3>ya.length?ya.push(ya[1]):3<ya.length&&ya.splice(3);return ya}const u=this.layer,I=u.rasterInfo,V=I.bandCount||m.statistics.length;var T;var Z=[];const ca=I.keyProperties&&I.keyProperties.BandProperties;(T=m?.statistics?.length?m.statistics:I?.statistics)?(Z=void 0!==T[0].min?
T[0].min:T[0][0],T=T[0].max||T[0][1]):(T=Ea[u.rasterInfo.pixelType.toLowerCase()],Z=T[0],T=T[1]);u.hasStandardTime()&&(Z=u.getStandardTimeValue(Z),T=u.getStandardTimeValue(T));if(1===I.bandCount||1===u.bandIds?.length)return this._getStretchLegendElements(m,{min:Z,max:T});Z=ca&&ca.length>=V?a(ca):a();return this._createSymbolTableElementMultiBand(Z)};fa._getStretchLegendElements=function(m,a){m=w.getStrectchRampStops(m.colorRamp,a);return{type:"stretch-ramp",title:"",infos:m,preview:X.renderColorRampPreviewHTML(m.map(u=>
u.color))}};fa._getClusterSymbol=function(){var m=this.layer;const a=(m="featureReduction"in m&&m.featureReduction)&&"symbol"in m&&m.renderer;return a&&!0!==a?.authoringInfo?.isAutoGenerated?null:m&&"symbol"in m&&m.symbol};fa._getSizeLegendElement=function(){var m=G._asyncToGenerator(function*(a,u,I,V){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(u):a,infos:yield ea.getRampStops(I,u,yield aa.getMedianColor(I),this.scale,this.view.type,V,this._hasClusterSizeVariable?
this._getClusterSymbol():null)}});return function(a,u,I,V){return m.apply(this,arguments)}}();fa._createSymbolTableElementMultiBand=function(m){const a=[],u=["red","green","blue"];m.forEach((I,V)=>{a.push({label:{colorName:u[V],bandName:I},src:aa.RGB_IMG_SOURCE[V],opacity:this.opacity??1})});return a};fa._updateInfosforClassedSizeRenderer=function(m,a){const u=m.authoringInfo&&"class-breaks-size"===m.authoringInfo.type,I=m.classBreakInfos.some(V=>L.isVolumetricSymbol(V.symbol));if(u&&I){const V=ea.REAL_WORLD_MAX_SIZE;
m=m.classBreakInfos.length;const T=(V-ea.REAL_WORLD_MIN_SIZE)/(1<m?m-1:m);a.forEach((Z,ca)=>{Z.size=V-T*ca})}};fa._isTallSymbol=function(m){let a=!1,u=!1;if(m)for(let I=0;I<m.length&&(!a||!u);I++){const V=m[I];"size"===V.type&&("height"===V.axis&&(a=!0),"width-and-depth"===V.axis&&(u=!0))}return a&&u};fa._getSymbolPreview=function(){var m=G._asyncToGenerator(function*(a,u,I){var V=!I?.isDefault&&null==a.size&&this._hasSizeRamp?A.px2pt(g.SymbolSizeDefaults.size):a.size;this._scaleDrivenSizeVariable&&
I?.applyScaleDrivenSize&&({getSize:V}=yield new Promise((T,Z)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],T,Z)),V=V(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===a.symbol.type?a.symbol.style:null}));return X.renderPreviewHTML(a.symbol,{size:V,opacity:u,scale:!1,symbolConfig:I?.symbolConfig,effectView:I?.effectList}).then(T=>{a.preview=T;return a}).catch(()=>{a.preview=null;return a})});return function(a,u,I){return m.apply(this,
arguments)}}();fa._getClusterRenderer=function(m){this._hasClusterSizeVariable=!1;var a="renderer"in this.layer&&this.layer.renderer;a=m.renderer?.clone()||a?.clone();const u=f.unwrap(e.getClusterSizeVariable(this.layerView._effectiveRenderer,this.view));if(u&&"visualVariables"in a&&!a.visualVariables?.some(I=>"size"===I.type&&"outline"!==I.target&&!va.test(I.valueExpression))){if("clusterMinSize"in m&&"clusterMaxSize"in m){const {clusterMinSize:I,clusterMaxSize:V}=m;u.legendOptions=new R({showLegend:I!==
V})}a.visualVariables=(a.visualVariables||[]).concat([u]);this._hasClusterSizeVariable=!0}return a};fa._loadRenderer=function(){var m=G._asyncToGenerator(function*(a){const u=[],I=a.clone(),V=yield aa.getMedianColor(I);if(ha(I)||ma(I))a=(I.classBreakInfos||I.uniqueValueInfos).map(T=>this._fetchSymbol(T.symbol,V).then(Z=>{T.symbol=Z}).catch(()=>{T.symbol=null})),Array.prototype.push.apply(u,a);u.push(this._fetchSymbol(I.symbol||I.defaultSymbol,I.defaultSymbol?null:V).then(T=>{this._applySymbolToRenderer(I,
T,ba(I))}).catch(()=>{this._applySymbolToRenderer(I,null,ba(I))}));return l.eachAlways(u).then(()=>I)});return function(a){return m.apply(this,arguments)}}();fa._applySymbolToRenderer=function(m,a,u){u?m.symbol=a:m.defaultSymbol=a};fa._fetchSymbol=function(){var m=G._asyncToGenerator(function*(a,u){if(!a)throw Error();if("web-style"===a.type){const I=this._webStyleSymbolCache;try{const V=yield"2d"===this.view.type?a.fetchCIMSymbol({cache:I}):a.fetchSymbol({cache:I});return this._getAppliedCloneSymbol(V,
u)}catch{throw b.getLogger(this.declaredClass).warn("Fetching web-style failed!"),Error();}}return this._getAppliedCloneSymbol(a,u)});return function(a,u){return m.apply(this,arguments)}}();fa._getAppliedCloneSymbol=function(m,a){if(!m||!a)return m;m=m.clone();const u=a&&a.toRgba();m.type.includes("3d")?this._applyColorTo3dSymbol(m,u):"cim"===m.type?S.applyCIMSymbolColor(m,a):m.color&&(m.color=new E(u||m.color));return m};fa._applyColorTo3dSymbol=function(m,a){a&&m.symbolLayers.forEach(u=>{u&&(u.material||
(u.material={}),u.material.color=new E(a))})};fa._getVisualVariableLegendElements=function(){var m=G._asyncToGenerator(function*(a,u){var I=this;if(!("visualVariables"in a&&a.visualVariables)||"vector-field"===a.type)return null;var V=a.visualVariables,T=[];const Z=[],ca=[];for(const ia of V)"color"===ia.type?T.push(ia):"size"===ia.type?Z.push(ia):"opacity"===ia.type&&ca.push(ia);V=[...T,...Z,...ca];let ua;if(0===T.length&&ha(a)&&a.classBreakInfos&&1===a.classBreakInfos.length)var ya=(ya=a.classBreakInfos[0])&&
ya.symbol;0===T.length&&ba(a)&&(ya=a.symbol);ya&&(ya.type.includes("3d")?(T=ya.symbolLayers.getItemAt(0),"water"===T.type?f.isSome(T.color)&&(ua=T.color):f.isSome(T.material)&&f.isSome(T.material.color)&&(ua=T.material.color)):ya.url||(ua=ya.color));const Ba=this.effectList;return(yield Promise.all(V.map(function(){var ia=G._asyncToGenerator(function*(pa){if(!pa.legendOptions||!1!==pa.legendOptions.showLegend){const ta="flow"===a.type?pa.field:I._getRampTitle(pa,u);let Aa=null;var xa="getField"in
u&&u.getField&&u.getField(pa.field);xa=xa&&D.isDateField(xa);"color"===pa.type?(pa=yield w.getRampStops(pa,null,xa),Aa={type:"color-ramp",title:ta,infos:pa,preview:X.renderColorRampPreviewHTML(pa.map(Ga=>Ga.color),{effectList:Ba})},I._hasColorRamp||(I._hasColorRamp=!(null==Aa.infos||!Aa.infos.length))):"size"===pa.type&&"outline"!==pa.target?va.test(pa.valueExpression)?I._hasClusterSizeVariable||(I._scaleDrivenSizeVariable=pa):(Aa=yield I._getSizeLegendElement(ta,pa,a,xa),I._hasSizeRamp||(I._hasSizeRamp=
!(null==Aa.infos||!Aa.infos.length))):"opacity"===pa.type&&(pa=yield w.getRampStops(pa,ua,xa),Aa={type:"opacity-ramp",title:ta,infos:pa,preview:X.renderColorRampPreviewHTML(pa.map(Ga=>Ga.color),{effectList:Ba})},I._hasOpacityRamp||(I._hasOpacityRamp=!(null==Aa.infos||!Aa.infos.length)));return Aa&&Aa.infos?Aa:null}});return function(pa){return ia.apply(this,arguments)}}()))).filter(ia=>!!ia)});return function(a,u){return m.apply(this,arguments)}}();fa._getDomainName=function(m,a,u){return m&&"function"!==
typeof m?(u=(m="getField"in u&&u.getField&&u.getField(m))&&"getFieldDomain"in u&&u.getFieldDomain?u.getFieldDomain(m.name):null)&&"coded-value"===u.type?u.getName(a):null:null};fa._getClusterTitle=function(m){var a=this.layer;m=m.field;if("featureReduction"in a&&a.featureReduction&&"cluster"===a.featureReduction.type&&(a=a.featureReduction,a=(a="popupTemplate"in a&&a.popupTemplate)&&a.fieldInfos))for(const u of a)if(u.fieldName===m)return"cluster_count"===m?u.label||{showCount:!0}:u.label;return{showCount:!0}};
fa._getRampTitle=function(m,a){let u=m.field,I=m.normalizationField,V=!1,T=!1,Z=!1;var ca=null;u="function"===typeof u?null:u;I="function"===typeof I?null:I;ca=m.legendOptions&&m.legendOptions.title;if(null==ca)if(m.valueExpressionTitle)ca=m.valueExpressionTitle;else{if("renderer"in a&&a.renderer&&"authoringInfo"in a.renderer&&a.renderer.authoringInfo&&a.renderer.authoringInfo.visualVariables)for(m=a.renderer.authoringInfo.visualVariables,ca=0;ca<m.length;ca++){const ua=m[ca];if("color"===ua.type){if("ratio"===
ua.style){V=!0;break}if("percent"===ua.style){T=!0;break}if("percent-of-total"===ua.style){Z=!0;break}}}ca={field:u&&this._getFieldAlias(u,a),normField:I&&this._getFieldAlias(I,a),ratio:V,ratioPercent:T,ratioPercentTotal:Z}}return ca};fa._getRendererTitle=function(m,a){if(m.legendOptions&&m.legendOptions.title)return m.legendOptions.title;if(m.valueExpressionTitle)return m.valueExpressionTitle;var u=m.field;let I=null,V=null;ha(m)&&(I=m.normalizationField,V="percent-of-total"===m.normalizationType);
u="function"===typeof u?null:u;I="function"===typeof I?null:I;if(ma(m)){const {field2:T,field3:Z,fieldDelimiter:ca}=m;u=u&&this._getFieldAlias(u,a);T&&(u=`<${u}>${ca}<${this._getFieldAlias(T,a)}>`,Z&&(u=`${u}${ca}<${this._getFieldAlias(Z,a)}>`));return u}m=null;if(u||I)m={field:u&&this._getFieldAlias(u,a),normField:I&&this._getFieldAlias(I,a),normByPct:V};return m};fa._getFieldAlias=function(m,a){var u="popupTemplate"in a&&a.popupTemplate;u=u&&u.fieldInfos;let I=null;u&&u.some(Z=>m===Z.fieldName?
(I=Z,!0):!1);u=null;"getField"in a&&a.getField?u=a.getField(m):"fieldsIndex"in a&&a.fieldsIndex&&(u=a.fieldsIndex.get(m));let V=null;if(a="featureReduction"in a&&a.featureReduction)!I&&"popupTemplate"in a&&a.popupTemplate&&a.popupTemplate.fieldInfos&&a.popupTemplate.fieldInfos.some(Z=>m?.toLowerCase()===Z.fieldName?.toLowerCase()?(I=Z,!0):!1),"fields"in a&&a.fields&&(V=a.fields.find(Z=>Z.name?.toLowerCase()===m?.toLowerCase()));a=I||u||V;let T=null;a&&(T=I?.label||u?.alias||V?.alias||"name"in a&&
a.name||"fieldName"in a&&a.fieldName);return T};fa._isUnclassedRenderer=function(m){const a=m.visualVariables;let u=!1;ha(m)&&m.classBreakInfos&&1===m.classBreakInfos.length&&a&&(u=m.field?a.some(I=>!(!I||m.field!==I.field||(m.normalizationField||I.normalizationField)&&m.normalizationField!==I.normalizationField)):!!a.length);return u};G._createClass(Na,[{key:"effectList",get:function(){const m=this.layer;let a=null;"effect"in m&&m.effect&&(a=new t.EffectView,a.effect=m.effect,a.endTransitions(),
a.scale=this.scale);return a}},{key:"opacity",get:function(){const m=this.layer.opacity,a=this.parent?.opacity;var u=this.layer.parent;u=u&&"uid"in u?this._getParentLayerOpacity(u):null;return null!=a?a*m:null!=u?u*m:m}},{key:"ready",get:function(){return null===this.layer?!0:0<this.children.length?this._isGroupActive():0<this.legendElements.length}},{key:"scale",get:function(){return this.view&&this.view.scale}},{key:"isScaleDriven",get:function(){const m=this.layer;if(null===m)return!1;if("effect"in
m&&m.effect&&Array.isArray(m.effect))return!0;if("featureReduction"in m&&m.featureReduction){if("cluster"===m.featureReduction.type)return!0;if("binning"===m.featureReduction.type&&"renderer"in m.featureReduction&&m.featureReduction.renderer)return this._isRendererScaleDriven(m.featureReduction.renderer)}return"renderer"in m&&m.renderer?this._isRendererScaleDriven(m.renderer):this._isLayerScaleDriven(this.layer)}},{key:"version",get:function(){return this._get("version")+1}}]);return Na}(z);J.__decorate([Q.property()],
H.prototype,"children",void 0);J.__decorate([Q.property({readOnly:!0})],H.prototype,"effectList",null);J.__decorate([Q.property()],H.prototype,"layerView",void 0);J.__decorate([Q.property()],H.prototype,"layer",void 0);J.__decorate([Q.property()],H.prototype,"legendElements",void 0);J.__decorate([Q.property({readOnly:!0})],H.prototype,"opacity",null);J.__decorate([Q.property()],H.prototype,"parent",void 0);J.__decorate([Q.property({readOnly:!0,dependsOn:[]})],H.prototype,"ready",null);J.__decorate([Q.property()],
H.prototype,"hideLayersNotInCurrentView",void 0);J.__decorate([Q.property()],H.prototype,"keepCacheOnDestroy",void 0);J.__decorate([Q.property()],H.prototype,"respectLayerVisibility",void 0);J.__decorate([Q.property({readOnly:!0})],H.prototype,"scale",null);J.__decorate([Q.property()],H.prototype,"sublayerIds",void 0);J.__decorate([Q.property({readOnly:!0})],H.prototype,"isScaleDriven",null);J.__decorate([Q.property()],H.prototype,"title",void 0);J.__decorate([Q.property({readOnly:!0,dependsOn:["ready"],
value:0})],H.prototype,"version",null);J.__decorate([Q.property()],H.prototype,"view",void 0);return H=J.__decorate([y.subclass("esri.widgets.Legend.support.ActiveLayerInfo")],H)})},"esri/layers/effects/EffectView":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./parser ./utils".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b){function f(A){A=n.parse(A)||[];var P=(P=A[0])?"type"in P:!1;return P?[{scale:-1,effects:A}]:A}function l(A,P,Q){return A[0]?.effects&&P[0]?.effects?(-1===A[0]?.scale||-1===P[0]?.scale)&&(1<A.length||1<P.length)&&0>=Q?!1:b.canInterpolateEffects(A[0].effects,P[0].effects):!0}function k(A,P,Q){const q=A.length>P.length?A:P;A=A.length>P.length?P:A;var d=A[A.length-1];P=d?.scale??Q;d=d?.effects??[];for(let y=A.length;y<q.length;y++)A.push({scale:P,effects:[...d]});for(P=
0;P<q.length;P++)A[P].scale=-1===A[P].scale?Q:A[P].scale,q[P].scale=-1===q[P].scale?Q:q[P].scale,b.normalizeEffects(A[P].effects,q[P].effects)}C.EffectView=function(A){function P(q){q=A.call(this,q)||this;q._from=null;q._to=null;q._final=null;q._current=[];q._time=0;q.duration=p("mapview-transitions-duration");q.effects=[];return q}G._inheritsLoose(P,A);var Q=P.prototype;Q.canTransitionTo=function(q){try{return 0<this.scale&&l(this._current,f(q),this.scale)}catch{return!1}};Q.transitionStep=function(q,
d){this._applyTimeTransition(q);this._updateForScale(d)};Q.endTransitions=function(){this._applyTimeTransition(this.duration)};Q._transitionTo=function(q){0<this.scale&&l(this._current,q,this.scale)?(this._final=q,this._to=K.clone(q),k(this._current,this._to,this.scale),this._from=K.clone(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=q);this._set("effects",this._current[0]?K.clone(this._current[0].effects):[])};Q._applyTimeTransition=function(q){if(this._to&&this._from&&
this._current&&this._final){this._time+=q;q=Math.min(1,this._time/this.duration);for(let y=0;y<this._current.length;y++){const r=this._current[y],t=this._from[y],h=this._to[y];var d=t.scale;r.scale=d+(h.scale-d)*q;for(d=0;d<r.effects.length;d++)r.effects[d].interpolate(t.effects[d],h.effects[d],q)}1===q&&(this._current=this._final,this._set("effects",this._current[0]?K.clone(this._current[0].effects):[]),this._from=this._to=this._final=null)}};Q._updateForScale=function(q){this._set("scale",q);if(0!==
this._current.length){var d=this._current,y=this._current.length-1,r,t=1;if(1===d.length||q>=d[0].scale)var h=r=d[0].effects;else if(q<=d[y].scale)h=r=d[y].effects;else for(let x=0;x<y;x++){const D=d[x],M=d[x+1];if(D.scale>=q&&M.scale<=q){t=(q-D.scale)/(M.scale-D.scale);r=D.effects;h=M.effects;break}}for(q=0;q<this.effects.length;q++)this.effects[q].interpolate(r[q],h[q],t)}};G._createClass(P,[{key:"effect",set:function(q){const d=this._get("effect");q=q||"";if(d!==q){this._set("effect",q);try{this._transitionTo(f(q))}catch(y){this._transitionTo([]),
H.getLogger(this.declaredClass).warn("Invalid Effect",{effect:q,error:y})}}}},{key:"hasEffects",get:function(){return this.transitioning||!!this.effects.length}},{key:"scale",set:function(q){this._updateForScale(q)}},{key:"transitioning",get:function(){return null!==this._to}}]);return P}(E);J.__decorate([z.property()],C.EffectView.prototype,"_to",void 0);J.__decorate([z.property()],C.EffectView.prototype,"duration",void 0);J.__decorate([z.property({value:""})],C.EffectView.prototype,"effect",null);
J.__decorate([z.property({readOnly:!0})],C.EffectView.prototype,"effects",void 0);J.__decorate([z.property({readOnly:!0})],C.EffectView.prototype,"hasEffects",null);J.__decorate([z.property({value:0})],C.EffectView.prototype,"scale",null);J.__decorate([z.property({readOnly:!0})],C.EffectView.prototype,"transitioning",null);C.EffectView=J.__decorate([c.subclass("esri.layers.effects.EffectView")],C.EffectView);C.canInterpolateEffectStops=l;C.convertEffectToStops=f;C.normalizeEffectStops=k;Object.defineProperties(C,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/ExportImageParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/HandleOwner ../../core/maybe ../../core/sql ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./commonProperties ./floorFilterUtils ./sublayerUtils".split(" "),function(C,
G,J,E,p,K,H,z,U,c,n,b,f,l){const k={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};C.ExportImageParameters=function(A){function P(q){q=A.call(this,q)||this;q.floors=null;q.scale=0;return q}G._inheritsLoose(P,A);var Q=P.prototype;Q.destroy=function(){this.layer=null};Q.toJSON=function(){var q=
this.layer;q={dpi:q.dpi,format:q.imageFormat,transparent:q.imageTransparency,gdbVersion:q.gdbVersion||null};this.hasDynamicLayers&&this.dynamicLayers?q.dynamicLayers=this.dynamicLayers:q={...q,layers:this.layers,layerDefs:this.layerDefs};return q};G._createClass(P,[{key:"dynamicLayers",get:function(){if(!this.hasDynamicLayers)return null;const q=this.visibleSublayers.map(d=>{const y=f.getLayerFloorFilterClause(this.floors,d);return d.toExportImageJSON(y)});return q.length?JSON.stringify(q):null}},
{key:"hasDynamicLayers",get:function(){return this.layer&&l.isExportDynamic(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(q){this._get("layer")!==q&&(this._set("layer",q),this.handles.remove("layer"),q&&this.handles.add([q.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),q.on("sublayer-update",d=>this.notifyChange(k[d.propertyName]))],"layer"))}},{key:"layers",get:function(){const q=this.visibleSublayers;return q?q.length?"show:"+
q.map(d=>d.id).join(","):"show:-1":null}},{key:"layerDefs",get:function(){const q=!!this.floors?.length,d=this.visibleSublayers.filter(y=>null!=y.definitionExpression||q&&null!=y.floorInfo);return d.length?JSON.stringify(d.reduce((y,r)=>{var t=f.getLayerFloorFilterClause(this.floors,r);t=H.sqlAnd(t,r.definitionExpression);K.isSome(t)&&(y[r.id]=t);return y},{})):null}},{key:"version",get:function(){this.commitProperty("layers");this.commitProperty("layerDefs");this.commitProperty("dynamicLayers");
this.commitProperty("timeExtent");const q=this.layer;q&&(q.commitProperty("dpi"),q.commitProperty("imageFormat"),q.commitProperty("imageTransparency"),q.commitProperty("gdbVersion"));return(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){const q=[];if(!this.layer)return q;var d=this.layer.sublayers;const y=r=>{const t=this.scale,h=0===r.minScale||t<=r.minScale,x=0===r.maxScale||t>=r.maxScale;r.visible&&(0===t||h&&x)&&(r.sublayers?r.sublayers.forEach(y):q.unshift(r))};d&&d.forEach(y);
d=this._get("visibleSublayers");return!d||d.length!==q.length||d.some((r,t)=>q[t]!==r)?q:d}}]);return P}(p.HandleOwnerMixin(E));J.__decorate([z.property({readOnly:!0})],C.ExportImageParameters.prototype,"dynamicLayers",null);J.__decorate([z.property()],C.ExportImageParameters.prototype,"floors",void 0);J.__decorate([z.property({readOnly:!0})],C.ExportImageParameters.prototype,"hasDynamicLayers",null);J.__decorate([z.property()],C.ExportImageParameters.prototype,"layer",null);J.__decorate([z.property({readOnly:!0})],
C.ExportImageParameters.prototype,"layers",null);J.__decorate([z.property({readOnly:!0})],C.ExportImageParameters.prototype,"layerDefs",null);J.__decorate([z.property({type:Number})],C.ExportImageParameters.prototype,"scale",void 0);J.__decorate([z.property(b.combinedViewLayerTimeExtentProperty)],C.ExportImageParameters.prototype,"timeExtent",void 0);J.__decorate([z.property({readOnly:!0})],C.ExportImageParameters.prototype,"version",null);J.__decorate([z.property({readOnly:!0})],C.ExportImageParameters.prototype,
"visibleSublayers",null);C.ExportImageParameters=J.__decorate([n.subclass("esri.layers.mixins.ExportImageParameters")],C.ExportImageParameters);Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(C){function G(J,E){if(!J?.length)return null;J=J.filter(p=>""!==p).map(p=>`'${p}'`);J.push("''");return`${E} IN (${J.join(",")}) OR ${E} IS NULL`}C.getFloorFilterClause=function(J){const E=
J.layer;return"floorInfo"in E&&E.floorInfo?.floorField&&"floors"in J.view?G(J.view.floors,E.floorInfo.floorField):null};C.getLayerFloorFilterClause=function(J,E){return"floorInfo"in E&&E.floorInfo?.floorField?G(J,E.floorInfo.floorField):null};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/sublayerUtils":function(){define(["exports","../../core/maybe","../../core/accessorSupport/PropertyOrigin"],function(C,G,J){function E(p,K){if(!p||
!p.length||G.isNone(K))return!0;K=K.slice().reverse().flatten(({sublayers:U})=>U&&U.toArray().reverse()).map(U=>U.id).toArray();if(p.length>K.length)return!1;let H=0;const z=K.length;for(const {id:U}of p){for(;H<z&&K[H]!==U;)H++;if(H>=z)return!1}return!0}C.isExportDynamic=function(p,K,H){return p.some(z=>{const U=z.source;return!(!U||"map-layer"===U.type&&U.mapLayerId===z.id&&(G.isNone(U.gdbVersion)||U.gdbVersion===H))||z.originIdOf("renderer")>J.OriginId.SERVICE||z.originIdOf("labelingInfo")>J.OriginId.SERVICE||
z.originIdOf("opacity")>J.OriginId.SERVICE||z.originIdOf("labelsVisible")>J.OriginId.SERVICE})?!0:!E(p,K)};C.isSublayerOverhaul=function(p){return!!p&&p.some(K=>null!=K.minScale||K.layerDefinition&&null!=K.layerDefinition.minScale)};C.shouldWriteSublayerStructure=function(p,K,H){return K.flatten(({sublayers:z})=>z).length!==p.length||p.some(z=>z.originIdOf("minScale")>H||z.originIdOf("maxScale")>H||z.originIdOf("renderer")>H||z.originIdOf("labelingInfo")>H||z.originIdOf("opacity")>H||z.originIdOf("labelsVisible")>
H||z.originIdOf("source")>H)?!0:!E(p,K)};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rendererConversion":function(){define(["exports","../../core/has","../../core/Error","../../core/maybe","../../symbols/support/symbolConversion"],function(C,G,J,E,p){function K(c){return E.isNone(c)||"simple"===c.type||"unique-value"===c.type||"class-breaks"===c.type||"dictionary"===c.type||"heatmap"===c.type}function H(c,n){if(!n)return null;
n=Array.isArray(n)?n:[n];if(0<n.length){const b=n.map(l=>l.details.symbol.type||l.details.symbol.declaredClass).filter(l=>!!l);b.sort();const f=[];b.forEach((l,k)=>{0!==k&&l===b[k-1]||f.push(l)});return new J("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${f.join(", ")}) which are not supported in 3D`,{renderer:c,symbolErrors:n})}return null}function z(c,n){const b={...p.defaultTo3DOptions,...n};n=c.uniqueValueInfos?.map(l=>p.to3D(l.symbol,b).error).filter(E.isSome);const f=
p.to3D(c.defaultSymbol,b);f.error&&n?.unshift(f.error);return H(c,n)}function U(c){const n=c.classBreakInfos.map(f=>p.to3D(f.symbol).error).filter(E.isSome),b=p.to3D(c.defaultSymbol);b.error&&n.unshift(b.error);return H(c,n)}C.isSupportedRenderer3D=K;C.validateTo3D=function(c,n){if(E.isNone(c))return null;if(!K(c))return new J("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${c.type||c.declaredClass}'`,{renderer:c});switch(c.type){case "simple":return H(c,p.to3D(c.symbol).error);
case "unique-value":return z(c,n);case "class-breaks":return U(c)}return null};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(C,G,J){function E(b){b=J.toCIMSymbolJSON(b);if("CIMTextSymbol"===b?.type)return b.height??0;let f=0;if(b?.symbolLayers)for(const l of b.symbolLayers)J.isCIMMarker(l)&&null!=l.size&&l.size>f?f=l.size:J.isCIMStroke(l)&&null!=l.width&&
l.width>f?f=l.width:J.isCIMFill(l);return f}function p(b,f,l,k){if(b)if("CIMTextSymbol"===b.type)null!=b.height&&(b.height*=f);else{if(l&&b.effects)for(const A of b.effects)z(A,f);if(b.symbolLayers)for(const A of b.symbolLayers)switch(A.type){case "CIMPictureMarker":case "CIMVectorMarker":K(A,f,k);break;case "CIMPictureStroke":case "CIMSolidStroke":!k?.preserveOutlineWidth&&A.width&&(A.width*=f);break;case "CIMPictureFill":A.height&&(A.height*=f);A.offsetX&&(A.offsetX*=f);A.offsetY&&(A.offsetY*=f);
break;case "CIMHatchFill":p(A.lineSymbol,f,!0,{...k,preserveOutlineWidth:!1}),A.offsetX&&(A.offsetX*=f),A.offsetY&&(A.offsetY*=f),A.separation&&(A.separation*=f)}}}function K(b,f,l){if(b&&(b.markerPlacement&&H(b.markerPlacement,f),b.offsetX&&(b.offsetX*=f),b.offsetY&&(b.offsetY*=f),b.anchorPoint&&"Absolute"===b.anchorPointUnits&&(b.anchorPoint={x:b.anchorPoint.x*f,y:b.anchorPoint.y*f}),b.size=null!=b.size?b.size*f:0,"CIMVectorMarker"===b.type&&b.markerGraphics))for(const k of b.markerGraphics)b.scaleSymbolsProportionally||
p(k.symbol,f,!0,l)}function H(b,f){J.isCIMMarkerStrokePlacement(b)&&b.offset&&(b.offset*=f);switch(b.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":b.customEndingOffset&&(b.customEndingOffset*=f);b.offsetAlongLine&&(b.offsetAlongLine*=f);if(b.placementTemplate&&b.placementTemplate.length){var l=b.placementTemplate.map(k=>k*f);b.placementTemplate=l}break;case "CIMMarkerPlacementAlongLineVariableSize":b.maxRandomOffset&&(b.maxRandomOffset*=f);b.placementTemplate&&
b.placementTemplate.length&&(l=b.placementTemplate.map(k=>k*f),b.placementTemplate=l);break;case "CIMMarkerPlacementOnLine":b.startPointOffset&&(b.startPointOffset*=f);break;case "CIMMarkerPlacementAtExtremities":b.offsetAlongLine&&(b.offsetAlongLine*=f);break;case "CIMMarkerPlacementAtRatioPositions":b.beginPosition&&(b.beginPosition*=f);b.endPosition&&(b.endPosition*=f);break;case "CIMMarkerPlacementPolygonCenter":b.offsetX&&(b.offsetX*=f);b.offsetY&&(b.offsetY*=f);break;case "CIMMarkerPlacementInsidePolygon":b.offsetX&&
(b.offsetX*=f),b.offsetY&&(b.offsetY*=f),b.stepX&&(b.stepX*=f),b.stepY&&(b.stepY*=f)}}function z(b,f){switch(b.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":b.width&&(b.width*=f);break;case "CIMGeometricEffectBuffer":b.size&&(b.size*=f);break;case "CIMGeometricEffectCut":b.beginCut&&(b.beginCut*=f);b.endCut&&(b.endCut*=f);b.middleCut&&(b.middleCut*=f);break;case "CIMGeometricEffectDashes":b.customEndingOffset&&(b.customEndingOffset*=f);b.offsetAlongLine&&(b.offsetAlongLine*=
f);if(b.dashTemplate&&b.dashTemplate.length){const l=b.dashTemplate.map(k=>k*f);b.dashTemplate=l}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":b.length&&(b.length*=f);break;case "CIMGeometricEffectMove":b.offsetX&&(b.offsetX*=f);b.offsetY&&(b.offsetY*=f);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":b.offset&&(b.offset*=f);break;case "CIMGeometricEffectRegularPolygon":b.radius&&(b.radius*=f);break;case "CIMGeometricEffectTaperedPolygon":b.fromWidth&&
(b.fromWidth*=f);b.length&&(b.length*=f);b.toWidth&&(b.toWidth*=f);break;case "CIMGeometricEffectWave":b.amplitude&&(b.amplitude*=f),b.period&&(b.period*=f)}}function U(b,f){if(b){var l="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===b.type;if(l?.symbolLayers)for(const k of l.symbolLayers)if(!(k.colorLocked||b&&(J.isCIMStroke(k)||J.isCIMMarker(k)&&k.markerPlacement&&J.isCIMMarkerStrokePlacement(k.markerPlacement))))switch(k.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":k.tintColor&&
c(f,k.tintColor);break;case "CIMVectorMarker":k.markerGraphics?.forEach(A=>{U(A.symbol,f)});break;case "CIMSolidStroke":case "CIMSolidFill":c(f,k.color);break;case "CIMHatchFill":U(k.lineSymbol,f)}}}function c(b,f){for(const l of b)if(l.join(".")===f.join("."))return;b.push(f)}function n(b,f,l){if(b){var k="CIMTextSymbol"===b.type?b.symbol:b;b="CIMPolygonSymbol"===k?.type;if(k?.symbolLayers)for(const A of k.symbolLayers)if(!A.colorLocked){if(b)if(l){if({layersToColor:k}=l,(J.isCIMStroke(A)||J.isCIMMarker(A)&&
A.markerPlacement&&J.isCIMMarkerStrokePlacement(A.markerPlacement))&&"fill"===k||J.isCIMFill(A)&&"outline"===k)continue}else if(J.isCIMStroke(A)||J.isCIMMarker(A)&&A.markerPlacement&&J.isCIMMarkerStrokePlacement(A.markerPlacement))continue;k=f.toArray();switch(A.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":A.tintColor=k;break;case "CIMVectorMarker":A.markerGraphics?.forEach(P=>{n(P.symbol,f,l)});break;case "CIMSolidStroke":case "CIMSolidFill":A.color=k;break;case "CIMHatchFill":n(A.lineSymbol,
f,l)}}}}C.applyCIMSymbolColor=function(b,f,l){f instanceof G||(f=new G(f));(b=J.toCIMSymbolJSON(b))&&n(b,f,l)};C.applyCIMSymbolRotation=function(b,f,l=!1){b=J.toCIMSymbolJSON(b);l&&0!==f&&(f=360-f);if("CIMTextSymbol"===b?.type)b.angle=f;else if("CIMPointSymbol"===b?.type&&b.symbolLayers){l=f-(b.angle||0);for(const k of b.symbolLayers)if(J.isCIMMarker(k)){let A=k.rotation||0;A=k.rotateClockwise?A-l:A+l;k.rotation=A}b.angle=f}};C.getCIMSymbolColor=function(b){b=J.toCIMSymbolJSON(b);const f=[];U(b,f);
return f.length?new G(J.fromCIMColor(f[0])):null};C.getCIMSymbolRotation=function(b,f=!1){b=J.toCIMSymbolJSON(b);return"CIMTextSymbol"===b?.type||"CIMPointSymbol"===b?.type?(b=b.angle,null!=b&&0!==b&&f?360-b:b??0):0};C.getCIMSymbolSize=E;C.getCIMSymbolType=function(b){b=J.toCIMSymbolJSON(b);if(!b)return null;switch(b.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};C.scaleCIMMarker=K;C.scaleCIMSymbol=p;C.scaleCIMSymbolTo=function(b,f,l){if(b){var k=J.toCIMSymbolJSON(b);b=E(b);if(0===b){if(k)if("CIMTextSymbol"===k.type)k.height=f;else if(k.symbolLayers)for(const A of k.symbolLayers)switch(A.type){case "CIMPictureMarker":case "CIMVectorMarker":A.size=f;break;case "CIMPictureStroke":case "CIMSolidStroke":A.width=f}}else p(k,f/b,!1,l)}};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(C,G){function J(c){let n=c.length;for(;n--;)if(!" /-,\n".includes(c.charAt(n)))return!1;return!0}function E(c,n){const b=[];var f=0;let l=-1;do l=c.indexOf("[",f),l>=f&&(l>f&&(f=c.substr(f,l-f),b.push([f,null,J(f)])),f=l+1,l=c.indexOf("]",f),l>=f&&(l>f&&(f=c.substr(f,l-f),(f=n[f])&&b.push([null,f,!1])),f=l+1));while(-1!==l);f<c.length-1&&(c=c.substr(f),b.push([c,null,J(c)]));return b}function p(c,n,b){let f="",l=null;for(const k of n){const [A,
P,Q]=k;if(A)Q?l=A:(l&&(f+=l,l=null),f+=A);else if(n=c.attributes[P])l&&(f+=l,l=null),f+=n}return K(f,b)}function K(c,n){"string"!==typeof c&&(c=String(c));switch(n){case "LowerCase":return c.toLowerCase();case "Allcaps":return c.toUpperCase();default:return c}}function H(c){if(!c)return null;switch(c.type){case "CIMPolygonSymbol":if(c.symbolLayers)for(const n of c.symbolLayers)if(c=H(n),null!=c)return c;break;case "CIMTextSymbol":return H(c.symbol);case "CIMSolidFill":return c.color}}function z(c){if(c)switch(c.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(c.symbolLayers)for(const n of c.symbolLayers)if(c=
z(n),void 0!==c)return c;break;case "CIMTextSymbol":return z(c.symbol);case "CIMSolidStroke":case "CIMSolidFill":return c.color}}function U(c){if(c)switch(c.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(c.symbolLayers)for(const n of c.symbolLayers)if(c=U(n),void 0!==c)return c;break;case "CIMTextSymbol":return U(c.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return c.width}}G.adjustTextCase=K;G.analyzeTextParts=E;G.assignTextValuesFromFeature=p;G.attributesToFields=
function(c){return(c?Object.keys(c):[]).map(n=>({name:n,alias:n,type:"string"===typeof c[n]?"esriFieldTypeString":"esriFieldTypeDouble"}))};G.colorToArray=function(c){return[c.r,c.g,c.b,c.a]};G.createLabelOverrideFunction=function(c,n,b){const f=E(n,c);return l=>p(l,f,b)};G.evaluateValueOrFunction=function(c,n,b,f){return"function"===typeof c?c(n,b,f):c};G.fromCIMColor=function(c){return c?{r:c[0],g:c[1],b:c[2],a:c[3]/255}:{r:0,g:0,b:0,a:0}};G.fromCIMFontDecoration=function(c){return c.underline?
"underline":c.strikethrough?"line-through":"none"};G.fromCIMFontStyle=function(c){let n="",b="";c&&(c=c.toLowerCase(),c.includes("italic")?n="italic":c.includes("oblique")&&(n="oblique"),c.includes("bold")?b="bold":c.includes("light")&&(b="lighter"));return{style:n,weight:b}};G.fromCIMHorizontalAlignment=function(c){switch(c){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};G.fromCIMVerticalAlignment=function(c){switch(c){default:return"top";
case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};G.getFillColor=H;G.getFontStyle=function(c){if(!c)return"normal";switch(c.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};G.getFontWeight=function(c){if(!c)return"normal";switch(c.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};G.getStrokeColor=z;G.getStrokeWidth=U;G.getValue=(c,
n=0)=>isNaN(c)||null==c?n:c;G.importGeometryEngine=function(){return new Promise((c,n)=>C(["../../geometry/geometryEngineJSON"],c,n))};G.isCIMFill=function(c){return"CIMGradientFill"===c.type||"CIMHatchFill"===c.type||"CIMPictureFill"===c.type||"CIMSolidFill"===c.type||"CIMWaterFill"===c.type};G.isCIMMarker=function(c){return"CIMVectorMarker"===c.type||"CIMPictureMarker"===c.type||"CIMBarChartMarker"===c.type||"CIMCharacterMarker"===c.type||"CIMPieChartMarker"===c.type||"CIMStackedBarChartMarker"===
c.type};G.isCIMMarkerStrokePlacement=function(c){return"CIMMarkerPlacementAlongLineRandomSize"===c.type||"CIMMarkerPlacementAlongLineSameSize"===c.type||"CIMMarkerPlacementAlongLineVariableSize"===c.type||"CIMMarkerPlacementAtExtremities"===c.type||"CIMMarkerPlacementAtMeasuredUnits"===c.type||"CIMMarkerPlacementAtRatioPositions"===c.type||"CIMMarkerPlacementOnLine"===c.type||"CIMMarkerPlacementOnVertices"===c.type};G.isCIMStroke=function(c){return"CIMGradientStroke"===c.type||"CIMPictureStroke"===
c.type||"CIMSolidStroke"===c.type};G.isGeometryEngineRequired=c=>{if(!c)return!1;for(const n of c)switch(n.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};G.isSVGImage=c=>c.includes("data:image/svg+xml");G.mapCIMSymbolToGeometryType=function(c){if(!c)return null;switch(c.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};
G.resampleHermite=function(c,n,b,f,l,k,A=!0){const P=n/l;b/=k;const Q=Math.ceil(P/2),q=Math.ceil(b/2);for(let r=0;r<k;r++)for(let t=0;t<l;t++){const h=4*(t+(A?k-r-1:r)*l);var d=0;let x=0,D=0,M=0,v=0,R=0,S=0;const g=(r+.5)*b;for(let O=Math.floor(r*b);O<(r+1)*b;O++){var y=Math.abs(g-(O+.5))/q;const X=(t+.5)*P;y*=y;for(let L=Math.floor(t*P);L<(t+1)*P;L++){let e=Math.abs(X-(L+.5))/Q;d=Math.sqrt(y+e*e);-1<=d&&1>=d&&(d=2*d*d*d-3*d*d+1,0<d&&(e=4*(L+O*n),S+=d*c[e+3],D+=d,255>c[e+3]&&(d=d*c[e+3]/250),M+=d*
c[e],v+=d*c[e+1],R+=d*c[e+2],x+=d))}}f[h]=M/x;f[h+1]=v/x;f[h+2]=R/x;f[h+3]=S/D}};G.toCIMSymbolJSON=function(c){return c.data?.symbol??null};Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(C,G){function J(E,p){return Math.round(Math.min(Math.max(E+191.25*p,0),255))}C.SymbolSizeDefaults=void 0;(function(E){E[E.size=22]="size";E[E.lineWidth=50]="lineWidth";E[E.maxSize=
120]="maxSize";E[E.maxOutlineSize=80]="maxOutlineSize";E[E.tallSymbolWidth=20]="tallSymbolWidth"})(C.SymbolSizeDefaults||(C.SymbolSizeDefaults={}));C.adjustColorBrightness=function(E,p){if(null==E)return new G;if("type"in E&&("linear"===E.type||"pattern"===E.type))return E;E=new G(E);return new G([J(E.r,p),J(E.g,p),J(E.b,p),E.a])};C.adjustColorComponentBrightness=J;C.getConeShapes=function(E,p){let K=p?C.SymbolSizeDefaults.tallSymbolWidth:E;p=p?4:6;K=K<=C.SymbolSizeDefaults.size?K-.5*p:K-p;p=.15*
K;const H=K;E-=p;return[{type:"ellipse",cx:.5*K,cy:E,rx:.5*K,ry:p},{type:"path",path:[{command:"M",values:[.5*H,0]},{command:"L",values:[H,E]},{command:"L",values:[0,E]},{command:"Z",values:[]}]}]};C.getCubeShapes=function(E,p){let K=p?C.SymbolSizeDefaults.tallSymbolWidth:E;var H=p?4:6;H=K=K<=C.SymbolSizeDefaults.size?K-.5*H:K-H;p=p?.35*K:.5*K;return[{type:"path",path:[{command:"M",values:[.5*H,0]},{command:"L",values:[H,.5*p]},{command:"L",values:[.5*H,p]},{command:"L",values:[0,.5*p]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*p]},{command:"L",values:[.5*H,p]},{command:"L",values:[.5*H,E]},{command:"L",values:[0,E-.5*p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*H,p]},{command:"L",values:[.5*H,E]},{command:"L",values:[H,E-.5*p]},{command:"L",values:[H,.5*p]},{command:"Z",values:[]}]}]};C.getCylinderShapes=function(E,p){var K=p?C.SymbolSizeDefaults.tallSymbolWidth:E;p=p?4:6;K=K<=C.SymbolSizeDefaults.size?K-.5*p:K-p;p=.5*K;const H=.15*K;
E-=H;return[{type:"ellipse",cx:.5*K,cy:E,rx:p,ry:H},{type:"path",path:[{command:"M",values:[0,H]},{command:"L",values:[0,E]},{command:"L",values:[K,E]},{command:"L",values:[K,H]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*K,cy:H,rx:p,ry:H}]};C.getDiamondShapes=function(E){var p=E;p=p<C.SymbolSizeDefaults.size?p-2:p-4;const K=Math.floor(E/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*p,0]},{command:"L",values:[p,.5*E-K]},{command:"L",values:[.45*p-K,.5*E+K]},{command:"Z",values:[]}]},
{type:"path",path:[{command:"M",values:[.45*p,0]},{command:"L",values:[.45*p-K,.5*E+K]},{command:"L",values:[0,.5*E-K]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*E-K]},{command:"L",values:[.45*p-K,.5*E+K]},{command:"L",values:[.45*p,E]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*p,E]},{command:"L",values:[p,.5*E-K]},{command:"L",values:[.45*p-K,.5*E+K]},{command:"Z",values:[]}]}]};C.getExtrudeSymbolShapes=function(E){const p=C.SymbolSizeDefaults.size;
E*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*p]},{command:"L",values:[.3*p,.7*p]},{command:"L",values:[.3*p,.7*p+E]},{command:"L",values:[0,.7*p+E-.35*p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*p,.7*p]},{command:"L",values:[.3*p,.7*p+E]},{command:"L",values:[p,E]},{command:"L",values:[p,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*p,0]},{command:"L",values:[p,0]},{command:"L",values:[.3*p,.7*p]},{command:"L",values:[0,.35*p]},
{command:"Z",values:[]}]}]};C.getInvertedConeShapes=function(E){let p=E;p=p<C.SymbolSizeDefaults.size?p-3:p-6;const K=.15*p,H=p;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[H,0]},{command:"L",values:[.5*H,E-K]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*p,cy:0,rx:.5*p,ry:K}]};C.getPathSymbolShapes=function(E,p,K){var H=C.SymbolSizeDefaults.size;let z=H,U=H;1>E?z*=.75:1<E&&(U*=1.25);E=H;p&&K&&(z=U=E=H=0);return[{type:"path",path:[{command:"M",values:[E,0]},{command:"L",
values:[K?E:.875*E,0]},{command:"L",values:[K?z-.5*E:0,U-.5*H]},{command:"L",values:[z-.5*E,U-.5*H]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[E,0]},{command:"L",values:[E,p?0:.125*H]},{command:"L",values:[z-.5*E,p?U-.5*H:H]},{command:"L",values:[z-.5*E,U-.5*H]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[z-.5*E,U-.5*H]},{command:"L",values:[K?z-.5*E:0,U-.5*H]},{command:"L",values:[K?z-.5*E:0,p?U-.5*H:H]},{command:"L",values:[z-.5*E,p?U-.5*H:H]},{command:"Z",
values:[]}]}]};C.getTetrahedronShapes=function(E){var p=E;p=p<C.SymbolSizeDefaults.size?p-1:p-2;return[{type:"path",path:[{command:"M",values:[.45*E,0]},{command:"L",values:[E,p]},{command:"L",values:[.45*E,.6*p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*E,0]},{command:"L",values:[.45*E,.6*p]},{command:"L",values:[0,p]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,p]},{command:"L",values:[.45*E,.6*p]},{command:"L",values:[E,p]},{command:"Z",values:[]}]}]};
C.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
C.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(C,G,J,E,p,K,H,z,U,c){function n(f,l,k){return f?J(f,{responseType:"image"}).then(A=>{A=A.data;const P=A.width,Q=A.height,q=P/Q;let d=l;k&&(d=Math.min(d,Math.max(P,Q)));return{image:A,width:1>=q?Math.ceil(d*q):d,height:1>=q?d:Math.ceil(d/q)}}):Promise.reject(new p("renderUtils: imageDataSize","href not provided."))}const b=z.createProjector();C.renderSymbol=function(f,l,k){const A=Math.ceil(l[0]);l=Math.ceil(l[1]);if(!f.some(Q=>!!Q.length))return null;const P=k&&k.node||document.createElement("div");
null!=k.opacity&&(P.style.opacity=k.opacity.toString());null!=k.effectView&&(P.style.filter=c.getCSSFilterFromEffectList(k.effectView));b.append(P,U.renderSVG.bind(null,f,A,l,k));return P};C.tintImageWithColor=function(f,l,k,A,P){return n(f,l,P).then(Q=>{const q=Q.width?Q.width:l,d=Q.height?Q.height:l;var y;if(y=Q.image)y=k&&"ignore"!==A?"multiply"===A&&255===k.r&&255===k.g&&255===k.b&&1===k.a?!1:!0:!1;if(y){var r=Q.image.width,t=Q.image.height;K("edge")&&/\.svg$/i.test(f)&&(--r,--t);y=Math.ceil(q);
var h=Math.ceil(d);var x=document.createElement("canvas");x.width=y;x.height=h;x.style.width=y+"px";x.style.height=h+"px";x=x.getContext("2d");x.clearRect(0,0,y,h);y=x;y.drawImage(Q.image,0,0,r,t,0,0,q,d);h=y.getImageData(0,0,q,d);x=[k.r/255,k.g/255,k.b/255,k.a];const M=E.toHSV(k);for(let v=0;v<h.data.length;v+=4){Q=h.data;r=v;t=x;var D=M;switch(A){case "multiply":Q[r+0]*=t[0];Q[r+1]*=t[1];Q[r+2]*=t[2];Q[r+3]*=t[3];break;default:const R=E.toHSV({r:Q[r+0],g:Q[r+1],b:Q[r+2]});R.h=D.h;R.s=D.s;R.v=R.v/
100*D.v;D=E.toRGB(R);Q[r+0]=D.r;Q[r+1]=D.g;Q[r+2]=D.b;Q[r+3]*=t[3]}}y.putImageData(h,0,0);f=y.canvas.toDataURL("image/png")}else(y=G.id&&G.id.findCredential(f))&&y.token&&(Q=f.includes("?")?"\x26":"?",f=`${f}${Q}token=${y.token}`);return{url:f,width:q,height:d}}).catch(()=>({url:f,width:l,height:l}))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(C){function G(c,n){const b=[];let f,l;if(c[0].length!==
n.length)throw"dimensions do not match";const k=c.length,A=c[0].length;let P=0;for(f=0;f<k;f++){for(l=P=0;l<A;l++)P+=c[f][l]*n[l];b.push(P)}return b}function J(c){c=[c.r/255,c.g/255,c.b/255].map(n=>.04045>=n?n/12.92:((n+.055)/1.055)**2.4);c=G(z,c);return{x:100*c[0],y:100*c[1],z:100*c[2]}}function E(c){c=G(U,[c.x/100,c.y/100,c.z/100]).map(n=>Math.min(1,Math.max(.0031308>=n?12.92*n:1.055*n**(1/2.4)-.055,0)));return{r:Math.round(255*c[0]),g:Math.round(255*c[1]),b:Math.round(255*c[2])}}function p(c){c=
[c.x/95.047,c.y/100,c.z/108.883].map(n=>n>(6/29)**3?n**(1/3):1/3*(29/6)**2*n+4/29);return{l:116*c[1]-16,a:500*(c[0]-c[1]),b:200*(c[1]-c[2])}}function K(c){const n=c.l;c=[(n+16)/116+c.a/500,(n+16)/116,(n+16)/116-c.b/200].map(b=>b>6/29?b**3:3*(6/29)**2*(b-4/29));return{x:95.047*c[0],y:100*c[1],z:108.883*c[2]}}function H(c){if("r"in c&&"g"in c&&"b"in c)return c;if("l"in c&&"c"in c&&"h"in c){var n=c.c,b=c.h;return E(K({l:c.l,a:n*Math.cos(b),b:n*Math.sin(b)}))}if("l"in c&&"a"in c&&"b"in c)return E(K(c));
if("x"in c&&"y"in c&&"z"in c)return E(c);if("h"in c&&"s"in c&&"v"in c){b=(c.h+360)%360/60;n=c.v/100*255;c=c.s/100*n;const f=c*(1-Math.abs(b%2-1));switch(Math.floor(b)){case 0:b={r:c,g:f,b:0};break;case 1:b={r:f,g:c,b:0};break;case 2:b={r:0,g:c,b:f};break;case 3:b={r:0,g:f,b:c};break;case 4:b={r:f,g:0,b:c};break;case 5:case 6:b={r:c,g:0,b:f};break;default:b={r:0,g:0,b:0}}b.r=Math.round(b.r+n-c);b.g=Math.round(b.g+n-c);b.b=Math.round(b.b+n-c);return b}return c}const z=[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],U=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];C.darken=function(c,n){c=p(J(c));c.l*=1-n;return E(K(c))};C.toHSV=function(c){if("h"in c&&"s"in c&&"v"in c)return c;var n=H(c);c=n.r;const b=n.g,f=n.b;n=Math.max(c,b,f);const l=n-Math.min(c,b,f);c=0===l?0:n===c?(b-f)/l%6:n===b?(f-c)/l+2:(c-b)/l+4;0>c&&(c+=6);return{h:60*c,s:100*(0===l?0:l/n),v:100/255*n}};C.toLAB=function(c){return"l"in c&&"a"in c&&"b"in c?c:p(J(H(c)))};C.toLCH=function(c){if(!("l"in
c&&"c"in c&&"h"in c)){var n=p(J(H(c)));c=n.l;var b=n.a;const f=n.b;n=Math.sqrt(b*b+f*f);b=Math.atan2(f,b);b=0<b?b:b+2*Math.PI;c={l:c,c:n,h:b}}return c};C.toRGB=H;C.toXYZ=function(c){return"x"in c&&"y"in c&&"z"in c?c:J(H(c))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(C,G,J,E,p,K,H,z){function U(e,w){e*=X/180;return Math.abs(w*Math.sin(e))+Math.abs(w*Math.cos(e))}function c(e){return e.map(w=>`${w.command} ${w.values.join(" ")}`).join(" ").trim()}function n(e,w,B,W){if(e){if("circle"===e.type)return z.tsx("circle",{fill:w,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-dashoffset":B.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===
e.type)return z.tsx("ellipse",{fill:w,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return z.tsx("rect",{fill:w,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===
e.type)return z.tsx("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type)return e="string"!==typeof e.path?c(e.path):e.path,z.tsx("path",{fill:w,"fill-rule":"evenodd",stroke:B.color,"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4",d:e});if("text"===e.type)return E.assertIsSome(W),z.tsx("text",{"dominant-baseline":W.dominantBaseline,fill:w,"fill-rule":"evenodd",stroke:B.color,
"stroke-width":B.width,"stroke-linecap":B.cap,"stroke-linejoin":B.join,"stroke-dasharray":B.dashArray,"stroke-miterlimit":"4","text-anchor":W.align,"text-decoration":W.decoration,kerning:W.kerning,rotate:W.rotate,"text-rendering":M,"font-style":W.font.style,"font-variant":W.font.variant,"font-weight":W.font.weight,"font-size":W.font.size,"font-family":W.font.family,x:e.x,y:e.y},e.text)}return null}function b(e){const w={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===
e.type){var B=`patternId-${++x}`;w.fill=`url(#${B})`;w.pattern={id:B,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else"type"in e&&"linear"===e.type?(B=`linearGradientId-${++D}`,w.fill=`url(#${B})`,w.linearGradient={id:B,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(W=>({offset:W.offset,color:W.color&&(new G(W.color)).toString()}))}):e&&(e=new G(e),w.fill=e.toString());return w}function f(e){const w={color:"none",width:1,cap:"butt",join:"4",
dashArray:"none",dashOffset:"0"};if(e&&(null!=e.width&&(w.width=e.width),e.cap&&(w.cap=e.cap),e.join&&(w.join=e.join.toString()),e.color&&(w.color=(new G(e.color)).toString()),e.dashArray&&(w.dashArray=e.dashArray),e.dashArray&&(w.dashOffset=e.dashoffset),e.style)){let B=null;e.style in O&&(B=O[e.style]);if(Array.isArray(B)){B=B.slice(0);const W=e.width??0;for(let ea=0;ea<B.length;++ea)B[ea]*=W;if("butt"!==e.cap){for(e=0;e<B.length;e+=2)B[e]-=W,1>B[e]&&(B[e]=1);for(e=1;e<B.length;e+=2)B[e]+=W}B=B.join(",")}w.dashArray=
B}return w}function l(e,w){const B={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){const W=e.alignBaseline;B.align=e.align;B.dominantBaseline="baseline"===W?"auto":"top"===W?"text-top":"bottom"===W?"hanging":W;B.decoration=e.decoration;B.kerning=e.kerning?"auto":"0";B.rotate=e.rotated?"90":"0";E.assertIsSome(w);B.font.style=w.style||"normal";B.font.variant=w.variant||"normal";B.font.weight=w.weight||"normal";B.font.size=
w.size&&w.size.toString()||"10pt";B.font.family=w.family||"serif"}return B}function k(e){const {pattern:w,linearGradient:B}=e;return w?z.tsx("pattern",{id:w.id,patternUnits:"userSpaceOnUse",x:w.x,y:w.y,width:w.width,height:w.height},z.tsx("image",{x:w.image.x,y:w.image.y,width:w.image.width,height:w.image.height,href:w.image.href})):B?(e=B.stops.map((W,ea)=>z.tsx("stop",{key:`${ea}-stop`,offset:W.offset,"stop-color":W.color})),z.tsx("linearGradient",{id:B.id,gradientUnits:"userSpaceOnUse",x1:B.x1,
y1:B.y1,x2:B.x2,y2:B.y2},e)):null}function A(e,w){if(!e)return null;const B=[];for(const W of e){const {shape:ea,fill:aa,stroke:F,font:N}=W;e=b(aa);const Y=f(F),ba="text"===ea.type?l(ea,N):null;(e=n(ea,e.fill,Y,ba))&&B.push(e)}return z.tsx("mask",{id:w,maskUnits:"userSpaceOnUse"},z.tsx("g",null,B))}function P(e,w,B,W,ea){K.scale(e,K.identity(e),[w,B]);e[4]=e[4]*w-W*w+W;e[5]=e[5]*B-ea*B+ea;return e}function Q(e,w){if(S&&"left"in S){null!=S.left&&S.left>e&&(S.left=e);if(null==S.right||S.right<e)S.right=
e;if(null==S.top||S.top>w)S.top=w;if(null==S.bottom||S.bottom<w)S.bottom=w}else S={left:e,bottom:w,right:e,top:w}}function q(e){const w=e.args,B=w.length;switch(e.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(e=0;e<B;e+=2)Q(w[e],w[e+1]);g.x=w[B-2];g.y=w[B-1];break;case "H":for(e=0;e<B;++e)Q(w[e],g.y);g.x=w[B-1];break;case "V":for(e=0;e<B;++e)Q(g.x,w[e]);g.y=w[B-1];break;case "m":e=0;"x"in g||(Q(g.x=w[0],g.y=w[1]),e=2);for(;e<B;e+=2)Q(g.x+=w[e],g.y+=w[e+1]);break;case "l":case "t":for(e=
0;e<B;e+=2)Q(g.x+=w[e],g.y+=w[e+1]);break;case "h":for(e=0;e<B;++e)Q(g.x+=w[e],g.y);break;case "v":for(e=0;e<B;++e)Q(g.x,g.y+=w[e]);break;case "c":for(e=0;e<B;e+=6)Q(g.x+w[e],g.y+w[e+1]),Q(g.x+w[e+2],g.y+w[e+3]),Q(g.x+=w[e+4],g.y+=w[e+5]);break;case "s":case "q":for(e=0;e<B;e+=4)Q(g.x+w[e],g.y+w[e+1]),Q(g.x+=w[e+2],g.y+=w[e+3]);break;case "A":for(e=0;e<B;e+=7)Q(w[e+5],w[e+6]);g.x=w[B-2];g.y=w[B-1];break;case "a":for(e=0;e<B;e+=7)Q(g.x+=w[e+5],g.y+=w[e+6])}}function d(e,w,B){const W=v[e.toLowerCase()];
"number"===typeof W&&(W?w.length>=W&&(e={action:e,args:w.slice(0,w.length-w.length%W)},B.push(e),q(e)):(e={action:e,args:[]},B.push(e),q(e)))}function y(e){const w={x:0,y:0,width:0,height:0};if("circle"===e.type)w.x=e.cx-e.r,w.y=e.cy-e.r,w.width=2*e.r,w.height=2*e.r;else if("ellipse"===e.type)w.x=e.cx-e.rx,w.y=e.cy-e.ry,w.width=2*e.rx,w.height=2*e.ry;else if("image"===e.type||"rect"===e.type)w.x=e.x,w.y=e.y,w.width=e.width,w.height=e.height;else if("path"===e.type){var B=E.unwrapOrThrow;{const aa=
("string"!==typeof e.path?c(e.path):e.path).match(R),F=[];S={};g={};if(aa){e="";var W=[],ea=aa.length;for(let N=0;N<ea;++N){const Y=aa[N],ba=parseFloat(Y);isNaN(ba)?(e&&d(e,W,F),W=[],e=Y):W.push(ba)}d(e,W,F);e={x:0,y:0,width:0,height:0};S&&"left"in S&&(e.x=S.left,e.y=S.top,e.width=S.right-S.left,e.height=S.bottom-S.top)}else e=null}B=B.call(E,e);w.x=B.x;w.y=B.y;w.width=B.width;w.height=B.height}return w}function r(e){const w={x:0,y:0,width:0,height:0};let B=null,W=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;
for(const aa of e)B?(B.x=Math.min(B.x,aa.x),B.y=Math.min(B.y,aa.y),W=Math.max(W,aa.x+aa.width),ea=Math.max(ea,aa.y+aa.height)):(B=w,B.x=aa.x,B.y=aa.y,W=aa.x+aa.width,ea=aa.y+aa.height);B&&(B.width=W-B.x,B.height=ea-B.y);return B}function t(e,w,B,W,ea,aa,F,N,Y){var ba=(F&&aa?U(aa,w):w)/2,ha=(F&&aa?U(aa,B):B)/2;if(Y){var ma=Y[0];Y=Y[1];ba=(F&&aa?U(aa,ma):ma)/2;ha=(F&&aa?U(aa,Y):Y)/2}ma=e.width+W;var ja=e.height+W;Y=p.create();F=p.create();var ka=!1;if(ea&&0!==ma&&0!==ja){ea=w!==B?w/B:ma/ja;ka=w>B?w:
B;let sa=1,da=1;isNaN(ka)||(1<ea?(sa=ka/ma,da=ka/ea/ja):(da=ka/ja,sa=ka*ea/ma));K.multiply(F,F,P(Y,sa,da,ba,ha));ka=!0}ea=e.x+(ma-W)/2;e=e.y+(ja-W)/2;W=K.multiply;ba-=ea;ha-=e;ba=K.translate(Y,K.identity(Y),[ba,ha]);W.call(K,F,F,ba);!ka&&(ma>w||ja>B)&&(ba=ma/w>ja/B,w=(ba?w:B)/(ba?ma:ja),K.multiply(F,F,P(Y,w,w,ea,e)));aa&&(w=K.multiply,B=aa%360*Math.PI/180,K.rotate(Y,K.identity(Y),B),aa=Math.cos(B),B=Math.sin(B),ma=Y[4],ja=Y[5],Y[4]=ma*aa-ja*B+e*B-ea*aa+ea,Y[5]=ja*aa+ma*B-ea*B-e*aa+e,w.call(K,F,F,
Y));N&&(aa=K.multiply,w=N[0],N=N[1],N=K.translate(Y,K.identity(Y),[w,N]),aa.call(K,F,F,N));return`matrix(${F[0]},${F[1]},${F[2]},${F[3]},${F[4]},${F[5]})`}function h(e,w,B){e=e?.effects.find(N=>"bloom"===N.type);if(!e)return null;const {strength:W,radius:ea}=e;e=0<W?ea:0;const aa=(W+e)*w,F=4*W+1;return z.tsx("filter",{id:`bloom${B}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},z.tsx("feMorphology",{operator:"dilate",radius:(W+.5*e)*5**(w/100)*(.4+w/100),in:"SourceGraphic",
result:"dilate"}),z.tsx("feGaussianBlur",{in:"dilate",stdDeviation:aa/25,result:"blur"}),z.tsx("feGaussianBlur",{in:"blur",stdDeviation:aa/50,result:"intensityBlur"}),z.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},z.tsx("feFuncR",{type:"linear",slope:F}),z.tsx("feFuncG",{type:"linear",slope:F}),z.tsx("feFuncB",{type:"linear",slope:F})),z.tsx("feMerge",null,z.tsx("feMergeNode",{in:"intensityBlur"}),z.tsx("feMergeNode",{in:"intensityBrightness"}),z.tsx("feGaussianBlur",
{stdDeviation:W/10})))}let x=0,D=0;H=J("android");const M=J("chrome")||H&&4<=H?"auto":"optimizeLegibility",v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},R=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let S={},g={};const O={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},X=Math.PI;let L=1;C.computeBBox=r;C.generateFillAttributes=b;C.generateStrokeAttributes=
f;C.generateTextAttributes=l;C.getBoundingBox=y;C.getTransformMatrix=t;C.renderDef=k;C.renderSVG=function(e,w,B,W={}){const ea=[],aa=[],F=++L,N=h(W.effectView,w,F);var Y=null;N&&(Y=W.effectView?.effects.find(ka=>"bloom"===ka.type),Y=(Y.strength?Y.strength+Y.radius/2:0)/3,Y=[Math.max(w+w*Y,10),Math.max(B+B*Y,10)]);for(let ka=0;ka<e.length;ka++){var ba=e[ka];const sa=[];var ha=[],ma=0,ja=0;let da=0;for(const ra of ba){const {shape:na,fill:oa,stroke:qa,font:va,offset:za}=ra;W.ignoreStrokeWidth||(ma+=
qa&&qa.width||0);ba=b(oa);const Ea=f(qa),Da="text"===na.type?l(na,va):null;ea.push(k(ba));sa.push(n(na,ba.fill,Ea,Da));ha.push(y(na));za&&(ja+=za[0],da+=za[1])}ha=E.unwrapOrThrow(r(ha));ma=t(ha,w,B,ma,W.scale??!1,W.rotation,W.useRotationSize??!1,[ja,da],Y);ja=null;W.masking&&(ja=`mask-${ka}`,ea.push(A(W.masking[ka],ja)),ja=`url(#${ja})`);aa.push(ja?z.tsx("g",{mask:ja},z.tsx("g",{transform:ma},sa)):z.tsx("g",{transform:ma},sa))}W.useRotationSize&&W.rotation&&(w=U(W.rotation,w),B=U(W.rotation,B));N&&
(E.assertIsSome(Y),w=Y[0],B=Y[1]);return z.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:w,height:B,style:"display: block;"},N,z.tsx("defs",null,ea),N?z.tsx("g",{filter:`url(#bloom${F})`},aa):aa)};C.renderShape=n;Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(C){function G(){const U=new Float32Array(6);U[0]=1;U[3]=1;return U}function J(U){const c=new Float32Array(6);c[0]=U[0];c[1]=U[1];
c[2]=U[2];c[3]=U[3];c[4]=U[4];c[5]=U[5];return c}function E(U,c,n,b,f,l){const k=new Float32Array(6);k[0]=U;k[1]=c;k[2]=n;k[3]=b;k[4]=f;k[5]=l;return k}function p(U,c){return new Float32Array(U,c,6)}function K(U,c,n,b){const f=c[b];c=c[b+1];U[b]=n[0]*f+n[2]*c+n[4];U[b+1]=n[1]*f+n[3]*c+n[5]}function H(U,c,n,b=0,f=0,l=2){for(f=f||c.length/l;b<f;b++)K(U,c,n,b*l)}const z=Object.freeze(Object.defineProperty({__proto__:null,create:G,clone:J,fromValues:E,createView:p,transform:K,transformMany:H},Symbol.toStringTag,
{value:"Module"}));C.clone=J;C.create=G;C.createView=p;C.fromValues=E;C.mat2df32=z;C.transform=K;C.transformMany=H})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(C,G){function J(h,x){h[0]=x[0];h[1]=x[1];h[2]=x[2];h[3]=x[3];h[4]=x[4];h[5]=x[5];return h}function E(h){h[0]=1;h[1]=0;h[2]=0;h[3]=1;h[4]=0;h[5]=0;return h}function p(h,x,D,M,v,R,S){h[0]=x;h[1]=D;h[2]=M;h[3]=v;h[4]=R;h[5]=S;return h}function K(h,x){const D=x[0],M=x[1],v=x[2],R=x[3],S=x[4];x=x[5];let g=D*R-M*v;if(!g)return null;
g=1/g;h[0]=R*g;h[1]=-M*g;h[2]=-v*g;h[3]=D*g;h[4]=(v*x-R*S)*g;h[5]=(M*S-D*x)*g;return h}function H(h){return h[0]*h[3]-h[1]*h[2]}function z(h,x,D){const M=x[0],v=x[1],R=x[2],S=x[3],g=x[4];x=x[5];const O=D[0],X=D[1],L=D[2],e=D[3],w=D[4];D=D[5];h[0]=M*O+R*X;h[1]=v*O+S*X;h[2]=M*L+R*e;h[3]=v*L+S*e;h[4]=M*w+R*D+g;h[5]=v*w+S*D+x;return h}function U(h,x,D){const M=x[0],v=x[1],R=x[2],S=x[3],g=x[4];x=x[5];const O=Math.sin(D);D=Math.cos(D);h[0]=M*D+R*O;h[1]=v*D+S*O;h[2]=M*-O+R*D;h[3]=v*-O+S*D;h[4]=g;h[5]=x;
return h}function c(h,x,D){const M=x[1],v=x[2],R=x[3],S=x[4],g=x[5],O=D[0];D=D[1];h[0]=x[0]*O;h[1]=M*O;h[2]=v*D;h[3]=R*D;h[4]=S;h[5]=g;return h}function n(h,x,D){const M=x[0],v=x[1],R=x[2],S=x[3],g=x[4];x=x[5];const O=D[0];D=D[1];h[0]=M;h[1]=v;h[2]=R;h[3]=S;h[4]=M*O+R*D+g;h[5]=v*O+S*D+x;return h}function b(h,x){const D=Math.sin(x);x=Math.cos(x);h[0]=x;h[1]=D;h[2]=-D;h[3]=x;h[4]=0;h[5]=0;return h}function f(h,x){h[0]=x[0];h[1]=0;h[2]=0;h[3]=x[1];h[4]=0;h[5]=0;return h}function l(h,x){h[0]=1;h[1]=0;
h[2]=0;h[3]=1;h[4]=x[0];h[5]=x[1];return h}function k(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function A(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+1)}function P(h,x,D){h[0]=x[0]+D[0];h[1]=x[1]+D[1];h[2]=x[2]+D[2];h[3]=x[3]+D[3];h[4]=x[4]+D[4];h[5]=x[5]+D[5];return h}function Q(h,x,D){h[0]=x[0]-D[0];h[1]=x[1]-D[1];h[2]=x[2]-D[2];h[3]=x[3]-D[3];h[4]=x[4]-D[4];h[5]=x[5]-D[5];return h}function q(h,x,D){h[0]=x[0]*D;h[1]=x[1]*D;h[2]=x[2]*D;
h[3]=x[3]*D;h[4]=x[4]*D;h[5]=x[5]*D;return h}function d(h,x,D,M){h[0]=x[0]+D[0]*M;h[1]=x[1]+D[1]*M;h[2]=x[2]+D[2]*M;h[3]=x[3]+D[3]*M;h[4]=x[4]+D[4]*M;h[5]=x[5]+D[5]*M;return h}function y(h,x){return h[0]===x[0]&&h[1]===x[1]&&h[2]===x[2]&&h[3]===x[3]&&h[4]===x[4]&&h[5]===x[5]}function r(h,x){const D=h[0],M=h[1],v=h[2],R=h[3],S=h[4];h=h[5];const g=x[0],O=x[1],X=x[2],L=x[3],e=x[4];x=x[5];const w=G.getEpsilon();return Math.abs(D-g)<=w*Math.max(1,Math.abs(D),Math.abs(g))&&Math.abs(M-O)<=w*Math.max(1,Math.abs(M),
Math.abs(O))&&Math.abs(v-X)<=w*Math.max(1,Math.abs(v),Math.abs(X))&&Math.abs(R-L)<=w*Math.max(1,Math.abs(R),Math.abs(L))&&Math.abs(S-e)<=w*Math.max(1,Math.abs(S),Math.abs(e))&&Math.abs(h-x)<=w*Math.max(1,Math.abs(h),Math.abs(x))}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:J,identity:E,set:p,invert:K,determinant:H,multiply:z,rotate:U,scale:c,translate:n,fromRotation:b,fromScaling:f,fromTranslation:l,str:k,frob:A,add:P,subtract:Q,multiplyScalar:q,multiplyScalarAndAdd:d,exactEquals:y,
equals:r,mul:z,sub:Q},Symbol.toStringTag,{value:"Module"}));C.add=P;C.copy=J;C.determinant=H;C.equals=r;C.exactEquals=y;C.frob=A;C.fromRotation=b;C.fromScaling=f;C.fromTranslation=l;C.identity=E;C.invert=K;C.mat2d=t;C.mul=z;C.multiply=z;C.multiplyScalar=q;C.multiplyScalarAndAdd=d;C.rotate=U;C.scale=c;C.set=p;C.str=k;C.sub=Q;C.subtract=Q;C.translate=n})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b,f){function l(g){g=g.symbolLayers;if(!g)return null;let O=null;g.forEach(X=>{if("object"!==X.type||null==X.resource?.href)O="water"===X.type?z.unwrap(X.color):z.isSome(X.material)?z.unwrap(X.material.color):null});return O?new E(O):null}function k(g,O){if(null==O||null==g)return g;g=g.toRgba();g[3]*=O;return new E(g)}function A(g,O,X){if(g=g.symbolLayers){var L=e=>{e=z.isSome(e)?e:null;O=O??e??(null!=X?S:null);return k(O,X)};g.forEach(e=>{if("object"!==e.type||null==
e.resource?.href||O)if("water"===e.type)e.color=L(e.color);else{var w=z.isSome(e.material)?e.material.color:null;w=L(w);z.isNone(e.material)?e.material=new f.Symbol3DMaterial({color:w}):e.material.color=w;null!=X&&"outline"in e&&z.isSome(e.outline)&&z.isSome(e.outline.color)&&(e.outline.color=k(e.outline.color,X))}})}}function P(g,O){return Q.apply(this,arguments)}function Q(){Q=J._asyncToGenerator(function*(g,O){(g=g.symbolLayers)&&(yield K.forEach(g,function(){var X=J._asyncToGenerator(function*(L){return q(L,
O)});return function(L){return X.apply(this,arguments)}}()))});return Q.apply(this,arguments)}function q(g,O){return d.apply(this,arguments)}function d(){d=J._asyncToGenerator(function*(g,O){switch(g.type){case "extrude":g.size="number"===typeof O[2]?O[2]:0;break;case "icon":case "line":case "text":O=y(O);z.isSome(O)&&(g.size=O);break;case "path":const X=h(O,c.ONES,[g.width,void 0,g.height]);g.width=M(O[0],g.width,1,X);g.height=M(O[2],g.height,1,X);break;case "object":yield r(g,O)}});return d.apply(this,
arguments)}function y(g){for(const O of g)if("number"===typeof O)return O;return null}function r(g,O){return t.apply(this,arguments)}function t(){t=J._asyncToGenerator(function*(g,O){const {resourceSize:X,symbolSize:L}=yield x(g),e=h(O,X,L);g.width=M(O[0],L[0],X[0],e);g.depth=M(O[1],L[1],X[1],e);g.height=M(O[2],L[2],X[2],e)});return t.apply(this,arguments)}function h(g,O,X){for(let L=0;3>L;L++){const e=g[L];switch(e){case "symbol-value":return g=X[L],null!=g?g/O[L]:1;case "proportional":break;default:if(e&&
O[L])return e/O[L]}}return 1}function x(g){return D.apply(this,arguments)}function D(){D=J._asyncToGenerator(function*(g){const O=yield(yield new Promise((W,ea)=>C(["./symbolLayerUtils"],W,ea))).computeObjectLayerResourceSize(g,10),{width:X,height:L,depth:e}=g;g=[X,e,L];let w=1;for(var B=0;3>B;B++){const W=g[B];if(null!=W){w=W/O[B];break}}for(B=0;3>B;B++)null==g[B]&&(g[B]=O[B]*w);return{resourceSize:O,symbolSize:g}});return D.apply(this,arguments)}function M(g,O,X,L){switch(g){case "proportional":return X*
L;case "symbol-value":return null!=O?O:X;default:return g}}function v(){v=J._asyncToGenerator(function*(g,O){if(g&&O){if(p.isSymbol3D(g))return P(g,O);if(p.isSymbol2D(g)&&(O=y(O),!z.isNone(O)))switch(g.type){case "simple-marker":g.size=O;break;case "picture-marker":const X=g.width/g.height;1<X?(g.width=O,g.height=O*X):(g.width=O*X,g.height=O);break;case "simple-line":g.width=O;break;case "text":g.font.size=O}}});return v.apply(this,arguments)}const R=/\/resource\/(.*?)\.svg$/,S=new E("white");G.applyColorToSymbol=
function(g,O,X){if(g&&(O||null!=X))if(O&&(O=new E(O)),p.isSymbol3D(g))A(g,O,X);else if(p.isSymbol2D(g)){if(O=O??g.color)g.color=k(O,X);null!=X&&"outline"in g&&g.outline&&g.outline.color&&(g.outline.color=k(g.outline.color,X))}};G.applyOpacityToColor=k;G.applyRotationToSymbol=function(g,O,X){g&&null!=O&&(p.isSymbol3D(g)?(g=g.symbolLayers)&&g.forEach(L=>{if(L&&"object"===L.type)switch(X){case "tilt":L.tilt=O;break;case "roll":L.roll=O;break;default:L.heading=O}}):!p.isSymbol2D(g)||"simple-marker"!==
g.type&&"picture-marker"!==g.type&&"text"!==g.type||(g.angle=O))};G.applySizesToSymbol=function(g,O){return v.apply(this,arguments)};G.getCSSFilterFromEffectList=function(g){if(!g)return null;g=g.effects.filter(O=>"bloom"!==O.type).map(O=>O.toJSON());return n.effectFunctionsFromJSON(g)};G.getColorFromSymbol=function(g,O){if(!g)return null;let X=null;p.isSymbol3D(g)?X=l(g):p.isSymbol2D(g)&&(X=g.color?new E(g.color):null);return X?k(X,O):null};G.getIconHref=function(g,O){O=z.unwrapOrThrow(O.resource).href;
return!H("esri-canvas-svg-support")&&g.styleOrigin&&R.test(O)?O.replace(R,"/resource/png/$1.png"):O};G.getSymbolOutlineSize=function(g){if(!g)return 0;if(p.isSymbol3D(g)){{const O=g.symbolLayers&&g.symbolLayers.length;O?(g=g.symbolLayers.getItemAt(O-1),g="outline"in g?z.get(g,"outline","size"):void 0):g=void 0}return z.isSome(g)?g:0}return U.px2pt(b.getStroke(g)?.width)};G.isVolumetricSymbol=function(g){if(z.isNone(g)||!("symbolLayers"in g)||z.isNone(g.symbolLayers))return!1;switch(g.type){case "point-3d":return g.symbolLayers.some(O=>
"object"===O.type);case "line-3d":return g.symbolLayers.some(O=>"path"===O.type);case "polygon-3d":return g.symbolLayers.some(O=>"object"===O.type||"extrude"===O.type);default:return!1}};G.symbolHasExtrudeSymbolLayer=function(g){return z.isSome(g)&&"polygon-3d"===g.type&&g.symbolLayers.some(O=>"extrude"===O.type)};Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(C,G,J,E,p,K,H){function z(n){if(!n)return null;let b=null;switch(n.type){case "simple-fill":case "picture-fill":case "simple-marker":b=z(n.outline);break;case "simple-line":const f=K.pt2px(n.width);null!=n.style&&"none"!==n.style&&0!==f&&(b={color:n.color,style:c(n.style),width:f,cap:n.cap,join:"miter"===n.join?K.pt2px(n.miterLimit):n.join});break;default:b=null}return b}const U=new p(1E3),c=(()=>{const n={};return b=>{if(n[b])return n[b];const f=b.replace(/-/g,"");return n[b]=f}})();J=new J([128,
128,128]);C.defaultThematicColor=J;C.dekebabifyLineStyle=c;C.getFill=function(n){const b=n.style;let f=null;if(n)switch(n.type){case "simple-marker":"cross"!==b&&"x"!==b&&(f=n.color);break;case "simple-fill":"solid"===b?f=n.color:"none"!==b&&(f={type:"pattern",x:0,y:0,src:G.getAssetUrl(`esri/symbols/patterns/${b}.png`),width:5,height:5});break;case "picture-fill":f={type:"pattern",src:n.url,width:K.pt2px(n.width)*n.xscale,height:K.pt2px(n.height)*n.yscale,x:K.pt2px(n.xoffset),y:K.pt2px(n.yoffset)};
break;case "text":f=n.color;break;case "cim":f=H.getCIMSymbolColor(n)}return f};C.getPatternUrlWithColor=function(n,b){const f=n+"-"+b;return void 0!==U.get(f)?Promise.resolve(U.get(f)):E(n,{responseType:"image"}).then(l=>{l=l.data;const k=l.naturalWidth,A=l.naturalHeight,P=document.createElement("canvas");P.width=k;P.height=A;const Q=P.getContext("2d");Q.fillStyle=b;Q.fillRect(0,0,k,A);Q.globalCompositeOperation="destination-in";Q.drawImage(l,0,0);l=P.toDataURL();U.put(f,l);return l})};C.getStroke=
z;Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(C){return function(){function G(E,p){this._storage=new C.MemCacheStorage;this._storage.maxSize=E;p&&this._storage.registerRemoveFunc("",p)}var J=G.prototype;J.put=function(E,p){this._storage.put(E,p,1,1)};J.pop=function(E){return this._storage.pop(E)};J.get=function(E){return this._storage.get(E)};J.clear=function(){this._storage.clearAll()};
J.destroy=function(){this._storage.destroy()};return G}()})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(C,G,J,E,p,K,H,z,U,c){function n(q,d){if(d&&(q.style.filter=c.getCSSFilterFromEffectList(d),d=d.effects))for(const y of d)if("drop-shadow"===y?.type){0>y.offsetX?q.style.marginLeft=`${Math.abs(y.offsetX)}px`:
q.style.marginRight=`${y.offsetX}px`;break}}function b(q,d){return f.apply(this,arguments)}function f(){f=J._asyncToGenerator(function*(q,d){switch(q.type){case "web-style":var {previewWebStyleSymbol:y}=yield new Promise((r,t)=>C(["./previewWebStyleSymbol"],r,t));return y(q,b,d);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:y}=yield new Promise((r,t)=>C(["./previewSymbol3D"],r,t)),y(q,d);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:y}=
yield new Promise((r,t)=>C(["./previewSymbol2D"],r,t)),y(q,d);case "cim":return{previewCIMSymbol:y}=yield new Promise((r,t)=>C(["./previewCIMSymbol"],r,t)),y(q,d)}});return f.apply(this,arguments)}function l(q){return q&&"opacity"in q?q.opacity*l(q.parent):1}function k(){k=J._asyncToGenerator(function*(q,d){if(q){var y=q.sourceLayer,r=(p.isSome(d)&&(d.useSourceLayer??!1)?y:q.layer)??y;y=l(r);if(p.isSome(q.symbol)&&(!p.isSome(d)||!0!==d.ignoreGraphicSymbol))return q="web-style"===q.symbol.type?yield q.symbol.fetchSymbol({...d,
cache:p.isSome(d)?d.webStyleCache:null}):q.symbol.clone(),c.applyColorToSymbol(q,null,y),q;var t=(p.isSome(d)?d.renderer:null)??(r&&"renderer"in r?r.renderer:null);if(r=t&&"getSymbolAsync"in t?yield t.getSymbolAsync(q,d):null){r="web-style"===r.type?yield r.fetchSymbol({...d,cache:p.isSome(d)?d.webStyleCache:null}):r.clone();if(!(t&&"visualVariables"in t&&t.visualVariables&&t.visualVariables.length))return c.applyColorToSymbol(r,null,y),r;"arcadeRequiredForVisualVariables"in t&&t.arcadeRequiredForVisualVariables&&
(p.isNone(d)||p.isNone(d.arcade))&&(d={...p.unwrap(d)},d.arcade=yield K.loadArcade());var h=yield new Promise((S,g)=>C(["../../renderers/visualVariables/support/visualVariableUtils"],S,g)),x=[],D=[],M=[],v=[];for(var R of t.visualVariables)switch(R.type){case "color":x.push(R);break;case "opacity":D.push(R);break;case "rotation":v.push(R);break;case "size":R.target||M.push(R)}R=(R=!!x.length&&x[x.length-1])?h.getColor(R,q,d):null;D=(D=!!D.length&&D[D.length-1])?h.getOpacity(D,q,d):null;null!=y&&(D=
null!=D?D*y:y);c.applyColorToSymbol(r,R,D);M.length&&(y=h.getAllSizes(M,q,d),yield c.applySizesToSymbol(r,y));for(const S of v)c.applyRotationToSymbol(r,h.getRotationAngle(S,q,d),S.axis);return r}}});return k.apply(this,arguments)}function A(){A=J._asyncToGenerator(function*(q,d){if(q){var y=l(q.layer||q.sourceLayer);if(p.isSome(q.symbol)&&(!p.isSome(d)||!0!==d.ignoreGraphicSymbol))return q="web-style"===q.symbol.type?yield q.symbol.fetchSymbol(d):q.symbol.clone(),c.getColorFromSymbol(q,y);var r=
p.isSome(d)&&d.renderer||q.get("layer.renderer")||q.get("sourceLayer.renderer"),t=yield r.getSymbolAsync(q,d);if(t){t="web-style"===t.type?yield t.fetchSymbol(d):t.clone();var h=c.getColorFromSymbol(t,y);if(!("visualVariables"in r)||"visualVariables"in r&&!r.visualVariables||"visualVariables"in r&&!r.visualVariables?.length)return h;r.arcadeRequiredForVisualVariables&&(p.isNone(d)||p.isNone(d.arcade))&&(d={...p.unwrap(d)},d.arcade=yield K.loadArcade());t=yield new Promise((M,v)=>C(["../../renderers/visualVariables/support/visualVariableUtils"],
M,v));var x=[],D=[];for(const M of r.visualVariables)switch(M.type){case "color":x.push(M);break;case "opacity":D.push(M)}r=(r=0<x.length?x[x.length-1]:null)?t.getColor(r,q,d):h;q=(h=0<D.length?D[D.length-1]:null)?t.getOpacity(h,q,d):null;null!=y&&(q=null!=q?q*y:y);return r?c.applyOpacityToColor(r,q):null}}});return A.apply(this,arguments)}let P=null;const Q=[255,255,255];G.getDisplayedColor=function(q,d){return A.apply(this,arguments)};G.getDisplayedSymbol=function(q,d){return k.apply(this,arguments)};
G.renderColorRampPreviewHTML=function(q,d={}){var y="horizontal"===d.align;const {width:r=y?75:24,height:t=y?24:75,gradient:h=!0}=d;var x=window.devicePixelRatio,D=r*x,M=t*x;x=document.createElement("canvas");x.width=D;x.height=M;x.style.width=`${r}px`;x.style.height=`${t}px`;const v=x.getContext("2d");var R=y?D:0,S=y?0:M;if(h){const g=v.createLinearGradient(0,0,R,S);y=q.length;const O=1===y?0:1/(y-1);q.forEach((X,L)=>g.addColorStop(L*O,X.toString()));v.fillStyle=g;v.fillRect(0,0,D,M)}else{D=y?D/
q.length:D;M=y?M:M/q.length;S=R=0;for(const g of q)v.fillStyle=g.toString(),v.fillRect(R,S,D,M),R=y?R+D:0,S=y?0:S+M}q=document.createElement("div");q.style.width=`${r}px`;q.style.height=`${t}px`;n(q,d?.effectList);q.appendChild(x);return q};G.renderDotDensityPreviewHTML=function(q,d,y){const {backgroundColor:r,outline:t,dotSize:h}=q;y=y&&y.swatchSize||z.SymbolSizeDefaults.size;const x=Math.round(y*y/h**2*.8),D=window.devicePixelRatio;q=document.createElement("canvas");const M=y*D;q.width=M;q.height=
M;q.style.width=`${q.width/D}px`;q.style.height=`${q.height/D}px`;const v=q.getContext("2d");r&&(v.fillStyle=r.toCss(!0),v.fillRect(0,0,M,M),v.fill());v.fillStyle=d.toCss(!0);if(P&&P.length/2===x)for(d=0;d<2*x;d+=2)v.fillRect(P[d],P[d+1],h*D,h*D),v.fill();else for(P=[],d=0;d<2*x;d+=2){const R=Math.floor(Math.random()*(M-0+1)),S=Math.floor(Math.random()*(M-0+1));P.push(R,S);v.fillRect(R,S,h*D,h*D);v.fill()}t&&(t.color&&(v.strokeStyle=t.color.toCss(!0)),v.lineWidth=t.width,v.strokeRect(0,0,M,M));y=
new Image(y,y);y.src=q.toDataURL();return y};G.renderPieChartPreviewHTML=function(q,d={}){const y=d.radius||40;var r=2*Math.PI*y,t=q.length;const h=r/t,x=[],D=H.getStroke(d.outline);null!=D?.width&&(D.width*=2);(D||d.backgroundColor)&&x.push({shape:{type:"circle",cx:y,cy:y,r:y},fill:d.backgroundColor,stroke:D,offset:[0,0]});const M=d.values,v=M&&M.length===t&&100===M.reduce((S,g)=>S+g,0),R=[0];for(let S=0;S<t;S++){let g=null;v&&(g=M[S]*r/100,R.push(g+R[S]));x.push({shape:{type:"circle",cx:y,cy:y,
r:y/2},fill:[0,0,0,0],stroke:{width:y,dashArray:`${(g??h)/2} ${r}`,dashoffset:`-${v?R[S]/2:h/2*S}`,color:q[S]},offset:[0,0]})}t=null;q=2*y+(D?.width||0);if(r=d.holePercentage)D&&x.push({shape:{type:"circle",cx:y,cy:y,r:y*r},fill:null,stroke:D,offset:[0,0]}),t=q/2,t=[[{shape:{type:"circle",cx:t,cy:t,r:t},fill:Q,stroke:D?{...D,color:Q}:null,offset:[0,0]},{shape:{type:"circle",cx:t,cy:t,r:y*r},fill:[0,0,0],stroke:null,offset:[0,0]}]];return U.renderSymbol([x],[q,q],{effectView:d.effectList,ignoreStrokeWidth:!0,
masking:t,rotation:-90})};G.renderPreviewHTML=b;Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/clusterUtils":function(){define(["exports","../../../renderers/visualVariables/SizeVariable"],function(C,G){const J=(E,p)=>{E=E.featuresTilingScheme.getClosestInfoForScale(E.scale).level;return p?.levels?p.levels[E]:null};C.getClusterSizeVariable=function(E,p){if(!(E&&"visualVariables"in E&&E.visualVariables))return null;E=E.visualVariables.find(K=>
"size"===K.type);return(p=J(p,E))?new G({field:E.field,minSize:p[2].size,minDataValue:p[2].value,maxSize:p[3].size,maxDataValue:p[3].value}):null};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(C,G,J,E,p){function K(f,l){const k=[],A=f.length-1;5===f.length?k.push(0,2,4):k.push(0,A);return f.map((P,
Q)=>k.includes(Q)?p.createStopLabel(P,Q,A,l):null)}function H(){H=J._asyncToGenerator(function*(f,l,k){let A=!1,P=[],Q=[];if(f.stops){var q=f.stops;P=q.map(y=>y.value);(A=q.some(y=>!!y.label))&&(Q=q.map(y=>y.label))}q=P[P.length-1];if(null==P[0]&&null==q)return null;const d=A?null:K(P,k);return(yield Promise.all(P.map(function(){var y=J._asyncToGenerator(function*(r,t){const h="opacity"===f.type?yield z(r,f,l):(yield new Promise((x,D)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],
x,D))).getColor(f,r);return{value:r,color:h,label:A?Q[t]:d[t]}});return function(r,t){return y.apply(this,arguments)}}()))).reverse()});return H.apply(this,arguments)}function z(f,l){return U.apply(this,arguments)}function U(){U=J._asyncToGenerator(function*(f,l,k=b){k=new E(k);f=(yield new Promise((A,P)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],A,P))).getOpacity(l,f);null!=f&&(k.a=f);return k});return U.apply(this,arguments)}function c(f,l){const {startIndex:k,endIndex:A,
weight:P}=n(f,l);if(k===A)return l[k].color;f=E.blendColors(l[k].color,l[A].color,P);return new E(f)}function n(f,l){let k=0,A=l.length-1;l.some((P,Q)=>{if(f<P.value)return A=Q,!0;k=Q;return!1});return{startIndex:k,endIndex:A,weight:(f-l[k].value)/(l[A].value-l[k].value)}}const b=new E([64,64,64]);G.getColorFromPointCloudStops=c;G.getRampStops=function(f,l,k){return H.apply(this,arguments)};G.getRampStopsForPointCloud=function(f){let l=!1,k=[],A=[];k=f.map(q=>q.value);(l=f.some(q=>!!q.label))&&(A=
f.map(q=>q.label));const P=k[k.length-1];if(null==k[0]&&null==P)return null;const Q=l?null:K(k,!1);return k.map((q,d)=>{const y=c(q,f);return{value:q,color:y,label:l?A[d]:Q[d]}}).reverse()};G.getStrectchRampStops=function(f,l){let k=[];if(f&&"multipart"===f.type)f.colorRamps.reverse().forEach((A,P)=>{0===P?k.push({value:l.max,color:new E(A.toColor),label:"high"}):k.push({value:null,color:new E(A.toColor),label:""});P===f.colorRamps.length-1?k.push({value:l.min,color:new E(A.fromColor),label:"low"}):
k.push({value:null,color:new E(A.fromColor),label:""})});else{let A,P;f&&"algorithmic"===f.type?(A=f.fromColor,P=f.toColor):(A=[0,0,0,1],P=[255,255,255,1]);k=[{value:l.max,color:new E(P),label:"high"},{value:l.min,color:new E(A),label:"low"}]}return k};Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(C,G,J,E,p,K,H){function z(b){return U.apply(this,arguments)}function U(){U=J._asyncToGenerator(function*(b){if(!("visualVariables"in b&&b.visualVariables))return null;b=b.visualVariables.find(k=>"color"===k.type);if(!b)return null;var f=null,l=null;if(b.stops){if(1===b.stops.length)return b.stops[0].color;f=b.stops[0].value;l=b.stops[b.stops.length-1].value}f+=(l-f)/2;({getColor:l}=yield new Promise((k,A)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],k,A)));return l(b,
f)});return U.apply(this,arguments)}function c(){c=J._asyncToGenerator(function*(b,f){const l=b.trailCap,k=b.trailWidth||1;b=f||(yield z(b))||b.color;return new H({cap:l,color:b,width:k})});return c.apply(this,arguments)}const n=p.convertDateFormatToIntlOptions("short-date");G.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];G.SPECIAL_CHARS_GREATER_THAN="\x3e";G.SPECIAL_CHARS_LESS_THAN="\x3c";G.createStopLabel=function(b,f,l,k){let A="";0===f?A="\x3c ":f===l&&(A="\x3e ");f=null;f=k?p.formatDate(b,n):K.format(b);return A+f};G.getMedianColor=z;G.getSymbolForFlowRenderer=function(b,f){return c.apply(this,arguments)};Object.defineProperties(G,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(C,G,J){function E(n,b){return n-b}function p(n,b){let f;f=Number(n.toFixed(b));f<n?n=f+1/10**b:(n=f,f-=1/10**b);f=Number(f.toFixed(b));n=Number(n.toFixed(b));return[f,n]}function K(n,b,f,l,k){n=z(n,b,f,l);b=null==n.next||n.next<=k;return(null==n.previous||n.previous<=k)&&b||n.previous+n.next<=2*k}function H(n){n=String(n);var b=
n.match(U);if(b&&b[1])return{integer:b[1].split("").length,fractional:b[3]?b[3].split("").length:0};if(n.toLowerCase().includes("e")&&(b=n.split("e"),n=b[0],b=b[1],n&&b)){n=Number(n);b=Number(b);const f=0<b;f||(b=Math.abs(b));n=H(n);f?(n.integer+=b,n.fractional=b>n.fractional?0:n.fractional-b):(n.fractional+=b,n.integer=b>n.integer?1:n.integer-b);return n}return{integer:0,fractional:0}}function z(n,b,f,l){const k={previous:null,next:null};if(null!=f){const A=n-f;k.previous=Math.floor(Math.abs(100*
(b-f-A)/A))}null!=l&&(n=l-n,k.next=Math.floor(Math.abs(100*(l-b-n)/n)));return k}const U=/^-?(\d+)(\.(\d+))?$/i,c={maximumFractionDigits:20};C.format=function(n){return J.formatNumber(n,c)};C.numDigits=H;C.percentChange=z;C.round=function(n,b={}){n=n.slice(0);const {tolerance:f=2,strictBounds:l=!1,indexes:k=n.map((P,Q)=>Q)}=b;k.sort(E);for(b=0;b<k.length;b++){const P=k[b],Q=n[P],q=0===P?null:n[P-1],d=P===n.length-1?null:n[P+1],y=H(Q).fractional;if(y){let r=0,t=!1;for(var A=void 0;r<=y&&!t;)A=p(Q,
r),A=l&&0===b?A[1]:A[0],t=K(Q,A,q,d,f),r++;t&&(n[P]=A)}}return n};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(C,G){C.getHeatmapRampStops=function(J){if(!J.colorStops)return[];const E=[...J.colorStops].filter(K=>0<K.color?.a);let p=E.length-1;if(E&&E[0]){const K=E[p];K&&1!==K.ratio&&(E.push(new G({ratio:1,color:K.color})),
p++)}return E.map((K,H)=>{let z="";0===H?z=J.legendOptions?.minLabel||"low":H===p&&(z=J.legendOptions?.maxLabel||"high");return{color:K.color,label:z,ratio:K.ratio}}).reverse()};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(C,G,J,E){function p(c){if(c){var {type:n}=
c;return n.includes("3d")?E.getSymbolLayerFill(c.symbolLayers.getItemAt(0)):"simple-line"===n||"simple-marker"===c.type&&("x"===c.style||"cross"===c.style)?(c=J.getStroke(c))&&c.color:J.getFill(c)}}function K(c,n){const b=n.HH.label,f=n.LL.label,l=n.HL.label;n=n.LH.label;switch(c){case "HH":return{top:b,bottom:f,left:l,right:n};case "HL":return{top:l,bottom:n,left:f,right:b};case "LL":return{top:f,bottom:b,left:n,right:l};case "LH":return{top:n,bottom:l,left:b,right:f};default:return{top:b,bottom:f,
left:l,right:n}}}function H(c){let n=z[c];c&&null==n&&(n=z.HH);return n||0}const z={HH:315,HL:45,LL:135,LH:225},U={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};C.getRelationshipRampColors2D=function(c,n){const b=[],f=c.length**.5;c=G.clone(c);var l=(n||"HH").split("");n=l[0];for(l="H"===l[1];c.length;){const k=[];for(;k.length<f;)k.push(c.shift());l&&k.reverse();
b.push(k)}"L"===n&&b.reverse();return b};C.getRelationshipRampElement=function(c){const {focus:n,infos:b,numClasses:f}=c;var l=U[f];const k={};b.forEach(A=>{k[A.value]={label:A.label,fill:p(A.symbol)}});c=[];for(let A=0;A<f;A++){const P=[];for(let Q=0;Q<f;Q++)P.push(k[l[A][Q]].fill);c.push(P)}l=K(n,k);return{type:"relationship-ramp",numClasses:f,focus:n,colors:c,labels:l,rotation:H(n)}};C.getRotationAngleForFocus=H;Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/support/previewSymbol3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),function(C,G,J,E,p,K,H,z,U,c,n,b,f,l,k,A,P){function Q(F){const N=F.outline;var Y=z.isSome(F.material)?F.material.color:
null;Y=z.isSome(Y)?Y.toHex():null;if(z.isNone(N)||"pattern"in N&&z.isSome(N.pattern)&&"style"===N.pattern.type&&"none"===N.pattern.style)return"fill"===F.type&&"#ffffff"===Y?{color:"#bdc3c7",width:.75}:null;F=c.pt2px(N.size)||0;return{color:"rgba("+(z.isSome(N.color)?N.color.toRgba():"255,255,255,1")+")",width:Math.min(F,W),style:"pattern"in N&&z.isSome(N.pattern)&&"style"===N.pattern.type?n.dekebabifyLineStyle(N.pattern.style):null,join:"butt",cap:"patternCap"in N?N.patternCap:"butt"}}function q(F,
N){var Y=N&&N.resource;Y=Y&&Y.href;if(F.thumbnail&&F.thumbnail.url)return Promise.resolve(F.thumbnail.url);if(Y&&"object"!==N.type)return Promise.resolve(A.getIconHref(F,N));const ba=J.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return F.styleOrigin&&(F.styleOrigin.styleName||F.styleOrigin.styleUrl)?P.resolveWebStyleSymbol(F.styleOrigin,{portal:F.styleOrigin.portal},"webRef").catch(ha=>ha).then(ha=>ha?.thumbnail?.url||ba):Promise.resolve(ba)}function d(F,N=1){const Y=F.a;F=E.toHSV(F);
const {r:ba,g:ha,b:ma}=E.toRGB({h:F.h,s:F.s/N,v:100-(100-F.v)/N});return[ba,ha,ma,Y]}function y(F){return"water"===F.type?z.isNone(F.color)?null:F.color:z.isNone(F.material)||z.isNone(F.material.color)?null:F.material.color}function r(F,N=0){var Y=y(F);if(!Y){if("fill"===F.type)return null;N=l.adjustColorComponentBrightness(n.defaultThematicColor.r,N);return[N,N,N,100]}F=Y.toRgba();for(Y=0;3>Y;Y++)F[Y]=l.adjustColorComponentBrightness(F[Y],N);return F}function t(F,N){return h.apply(this,arguments)}
function h(){h=G._asyncToGenerator(function*(F,N){F=F.style;return"none"===F?null:{type:"pattern",x:0,y:0,src:yield n.getPatternUrlWithColor(J.getAssetUrl(`esri/symbols/patterns/${F}.png`),N.toCss(!0)),width:5,height:5}});return h.apply(this,arguments)}function x(F){return F.outline?Q(F):{color:"rgba(0, 0, 0, 1)",width:1.5}}function D(F,N){F=y(F);if(!F)return null;let Y;Y="rgba("+(l.adjustColorComponentBrightness(F.r,N)+",");Y+=l.adjustColorComponentBrightness(F.g,N)+",";Y+=l.adjustColorComponentBrightness(F.b,
N)+",";return Y+F.a+");"}function M(F,N){N=D(F,N);if(!N)return{};if("pattern"in F&&z.isSome(F.pattern)&&"style"===F.pattern.type&&"none"===F.pattern.style)return null;const Y=Math.min(F.size?c.pt2px(F.size):.75,W);return{color:N,width:Y,style:"pattern"in F&&z.isSome(F.pattern)&&"style"===F.pattern.type?n.dekebabifyLineStyle(F.pattern.style):null,cap:"cap"in F?F.cap:null,join:"join"in F?"miter"===F.join?c.pt2px(2):F.join:null}}function v(F,N,Y){Y=null!=Y?.75*Y:0;return{type:"linear",x1:Y?.25*Y:0,y1:Y?
.5*Y:0,x2:Y||4,y2:Y?.5*Y:4,colors:[{color:F,offset:0},{color:N,offset:1}]}}function R(F){const N=F.depth,Y=F.height;F=F.width;return 0!==F&&0!==N&&0!==Y&&F===N&&null!=F&&null!=Y&&F<Y}function S(F,N,Y){const ba=[];if(!F)return ba;switch(F.type){case "icon":switch(F.resource&&F.resource.primitive||b.defaultPrimitive){case "circle":ba.push({shape:{type:"circle",cx:0,cy:0,r:.5*N},fill:r(F,0),stroke:Q(F)});break;case "square":ba.push({shape:{type:"path",path:[{command:"M",values:[0,N]},{command:"L",values:[0,
0]},{command:"L",values:[N,0]},{command:"L",values:[N,N]},{command:"Z",values:[]}]},fill:r(F,0),stroke:Q(F)});break;case "triangle":ba.push({shape:{type:"path",path:[{command:"M",values:[0,N]},{command:"L",values:[.5*N,0]},{command:"L",values:[N,N]},{command:"Z",values:[]}]},fill:r(F,0),stroke:Q(F)});break;case "cross":ba.push({shape:{type:"path",path:[{command:"M",values:[.5*N,0]},{command:"L",values:[.5*N,N]},{command:"M",values:[0,.5*N]},{command:"L",values:[N,.5*N]}]},stroke:x(F)});break;case "x":ba.push({shape:{type:"path",
path:[{command:"M",values:[0,0]},{command:"L",values:[N,N]},{command:"M",values:[N,0]},{command:"L",values:[0,N]}]},stroke:x(F)});break;case "kite":ba.push({shape:{type:"path",path:[{command:"M",values:[0,.5*N]},{command:"L",values:[.5*N,0]},{command:"L",values:[N,.5*N]},{command:"L",values:[.5*N,N]},{command:"Z",values:[]}]},fill:r(F,0),stroke:Q(F)})}break;case "object":switch(F.resource&&F.resource.primitive||f.defaultPrimitive){case "cone":var ha=r(F,0);F=r(F,-.6);F=v(ha,F,Y?aa:N);N=l.getConeShapes(N,
Y);ba.push({shape:N[0],fill:F});ba.push({shape:N[1],fill:F});break;case "inverted-cone":Y=r(F,0);F=r(F,-.6);F=v(Y,F,N);N=l.getInvertedConeShapes(N);ba.push({shape:N[0],fill:F});ba.push({shape:N[1],fill:Y});break;case "cube":N=l.getCubeShapes(N,Y);ba.push({shape:N[0],fill:r(F,0)});ba.push({shape:N[1],fill:r(F,-.3)});ba.push({shape:N[2],fill:r(F,-.5)});break;case "cylinder":ha=r(F,0);const ma=r(F,-.6);ha=v(ha,ma,Y?aa:N);N=l.getCylinderShapes(N,Y);ba.push({shape:N[0],fill:ha});ba.push({shape:N[1],fill:ha});
ba.push({shape:N[2],fill:r(F,0)});break;case "diamond":N=l.getDiamondShapes(N);ba.push({shape:N[0],fill:r(F,-.3)});ba.push({shape:N[1],fill:r(F,0)});ba.push({shape:N[2],fill:r(F,-.3)});ba.push({shape:N[3],fill:r(F,-.7)});break;case "sphere":Y=r(F,0);F=r(F,-.6);F=v(Y,F);F.x1=0;F.y1=0;F.x2=.25*N;F.y2=.25*N;ba.push({shape:{type:"circle",cx:0,cy:0,r:.5*N},fill:F});break;case "tetrahedron":N=l.getTetrahedronShapes(N),ba.push({shape:N[0],fill:r(F,-.3)}),ba.push({shape:N[1],fill:r(F,0)}),ba.push({shape:N[2],
fill:r(F,-.6)})}}return ba}function g(F){return(F="number"===typeof F?.size?F?.size:null)?c.pt2px(F):null}function O(F,N){const Y=g(N),ba=N?.maxSize?c.pt2px(N.maxSize):null,ha=N?.disableUpsampling??!1,ma=F.symbolLayers,ja=[];let ka=0,sa=0;const da=ma.getItemAt(ma.length-1);let ra;da&&"icon"===da.type&&(ra=da.size&&c.pt2px(da.size));ma.forEach(na=>{if("icon"===na.type||"object"===na.type){var oa="icon"===na.type?na.size&&c.pt2px(na.size):0,qa=Y||oa?Math.ceil(Math.min(Y||oa,ba||B)):w;if(na&&na.resource&&
na.resource.href){var va=q(F,na).then(za=>{const Ea=na.get("material.color");var Da="icon"===na.type?"multiply":"tint";return k.tintImageWithColor(za,qa,Ea,Da,ha)}).then(za=>{const Ea=za.width,Da=za.height;ka=Math.max(ka,Ea);sa=Math.max(sa,Da);return[{shape:{type:"image",x:0,y:0,width:Ea,height:Da,src:za.url},fill:null,stroke:null}]});ja.push(va)}else va=qa,"icon"===na.type&&ra&&Y&&(va=oa/ra*qa),oa="tall"===N?.symbolConfig||N?.symbolConfig?.isTall||("object"===na.type?R(na):!1),ka=Math.max(ka,oa?
aa:va),sa=Math.max(sa,va),ja.push(Promise.resolve(S(na,va,oa)))}});return U.eachAlways(ja).then(na=>{const oa=[];na.forEach(qa=>{qa.value?oa.push(qa.value):qa.error&&H.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",qa.error)});return k.renderSymbol(oa,[ka,sa],{node:N&&N.node,scale:!1,opacity:N&&N.opacity})})}function X(F,N){const Y=F.symbolLayers,ba=[];F=A.isVolumetricSymbol(F);const ha=g(N),ma=(N&&N.maxSize?c.pt2px(N.maxSize):null)||W;let ja=0,ka=0,sa;Y.forEach((da,
ra)=>{if(da&&("line"===da.type||"path"===da.type)){var na=[];switch(da.type){case "line":var oa=M(da,0);if(z.isNone(oa))break;var qa=oa&&oa.width||0;0===ra&&(sa=qa);da=Math.min(ha||qa,ma);ra=0===ra?da:ha?qa/sa*da:da;qa=ra>ea/2?2*ra:ea;ka=Math.max(ka,ra);ja=Math.max(ja,qa);oa.width=ra;na.push({shape:{type:"path",path:[{command:"M",values:[0,.5*ka]},{command:"L",values:[ja,.5*ka]}]},stroke:oa});break;case "path":oa=Math.min(ha||w,ma);ra=r(da,0);qa=r(da,-.2);var va=D(da,-.4);va=va?{color:va,width:1}:
{};if("quad"===da.profile){const za=da.width;da=da.height;da=l.getPathSymbolShapes(za&&da?za/da:1,0===da,0===za);va={...va,join:"bevel"};na.push({shape:da[0],fill:qa,stroke:va});na.push({shape:da[1],fill:qa,stroke:va});na.push({shape:da[2],fill:ra,stroke:va})}else na.push({shape:l.shapes.pathSymbol3DLayer[0],fill:qa,stroke:va}),na.push({shape:l.shapes.pathSymbol3DLayer[1],fill:ra,stroke:va});ja=ka=Math.max(ka,oa)}ba.push(na)}});return Promise.resolve(k.renderSymbol(ba,[ja,ka],{node:N&&N.node,scale:F,
opacity:N&&N.opacity}))}function L(F,N){return e.apply(this,arguments)}function e(){e=G._asyncToGenerator(function*(F,N){const Y="mesh-3d"===F.type;F=F.symbolLayers;var ba=g(N);const ha=N&&N.maxSize?c.pt2px(N.maxSize):null;ba=ba||w;const ma=[];let ja=0,ka=0;var sa=!1;for(let va=0;va<F.length;va++){var da=F.getItemAt(va);const za=[];if(!Y||"fill"===da.type){var ra=l.shapes.fill[0];switch(da.type){case "fill":var na=Q(da);sa=Math.min(ba,ha||B);ja=Math.max(ja,sa);ka=Math.max(ka,sa);sa=!0;var oa=r(da,
0),qa="pattern"in da?da.pattern:null;da=y(da);!Y&&z.isSome(qa)&&"style"===qa.type&&"solid"!==qa.style&&da&&(oa=yield t(qa,da));za.push({shape:ra,fill:oa,stroke:na});break;case "line":da=M(da,0);if(z.isNone(da))break;da={stroke:da,shape:ra};ja=Math.max(ja,w);ka=Math.max(ka,w);za.push(da);break;case "extrude":ra={join:"round",width:1,...M(da,-.4)};na=r(da,0);da=r(da,-.2);oa=Math.min(ba,ha||B);qa=l.getExtrudeSymbolShapes(oa);ra.width=1;za.push({shape:qa[0],fill:da,stroke:ra});za.push({shape:qa[1],fill:da,
stroke:ra});za.push({shape:qa[2],fill:na,stroke:ra});da=.7*w+.5*oa;ja=Math.max(ja,w);ka=Math.max(ka,da);break;case "water":sa=z.unwrapOrThrow(y(da)),da=d(sa),ra=d(sa,2),na=d(sa,3),oa=l.getWaterSymbolShapes(),sa=!0,za.push({shape:oa[0],fill:da}),za.push({shape:oa[1],fill:ra}),za.push({shape:oa[2],fill:na}),da=Math.min(ba,ha||B),ja=Math.max(ja,da),ka=Math.max(ka,da)}ma.push(za)}}return k.renderSymbol(ma,[ja,ka],{node:N&&N.node,scale:sa,opacity:N&&N.opacity})});return e.apply(this,arguments)}const w=
l.SymbolSizeDefaults.size,B=l.SymbolSizeDefaults.maxSize,W=l.SymbolSizeDefaults.maxOutlineSize,ea=l.SymbolSizeDefaults.lineWidth,aa=l.SymbolSizeDefaults.tallSymbolWidth;C.getPatternDescriptor=t;C.getSizeFromOptions=g;C.getSymbolLayerFill=r;C.previewSymbol3D=function(F,N){if(0===F.symbolLayers.length)return Promise.reject(new K("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(F.type){case "point-3d":return O(F,N);case "line-3d":return X(F,N);case "polygon-3d":case "mesh-3d":return L(F,
N)}return Promise.reject(new K("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/maybe ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),function(C,G,J,E,p,K,H,z,U,c,n,b){function f(k,
A,P,Q,q){var d=k.data;const y=P&&p.isSome(P.portal)?P.portal:H.getDefault(),r={portal:y,url:K.urlToObject(k.baseUrl),origin:"portal-item"};d=d.items.find(M=>M.name===A);if(!d)return Promise.reject(new E("symbolstyleutils:symbol-name-not-found",`The symbol name '${A}' could not be found`,{symbolName:A}));let t=z.fromJSON(n.symbolUrlFromStyleItem(d,Q),r),h=d.thumbnail?.href??null;const x=d.thumbnail&&d.thumbnail.imageData;J.isDevEnvironment()&&(t=J.adjustStaticAGOUrl(t)??"",h=J.adjustStaticAGOUrl(h));
const D={portal:y,url:K.urlToObject(K.removeFile(t)),origin:"portal-item"};return n.requestJSON(t,q).then(M=>{M="cimRef"===Q?n.makeCIMSymbolRef(M.data):M.data;if((M=U.fromJSON(M,D))&&G.isSymbol3D(M)){if(h){const v=z.fromJSON(h,r);M.thumbnail=new b.Thumbnail({url:v})}else x&&(M.thumbnail=new b.Thumbnail({url:`data:image/png;base64,${x}`}));k.styleUrl?M.styleOrigin=new c({portal:P.portal,styleUrl:k.styleUrl,name:A}):k.styleName&&(M.styleOrigin=new c({portal:P.portal,styleName:k.styleName,name:A}))}return M})}
function l(k,A,P){const Q=n.Style2DUrlTemplate.replace(/\{SymbolName\}/gi,k.name),q=p.isSome(A.portal)?A.portal:H.getDefault();return n.requestJSON(Q,P).then(d=>{d=n.makeCIMSymbolRef(d.data);return U.fromJSON(d,{portal:q,url:K.urlToObject(K.removeFile(Q)),origin:"portal-item"})})}C.fetchSymbolFromStyle=f;C.resolveWebStyleSymbol=function(k,A,P,Q){return k.name?k.styleName&&"Esri2DPointSymbolsStyle"===k.styleName?l(k,A,Q):n.fetchStyle(k,A,Q).then(q=>f(p.unwrapOrThrow(q),k.name,A,P,Q)):Promise.reject(new E("symbolstyleutils:style-symbol-reference-name-missing",
"Missing name in style symbol reference"))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(C){const G=/^devext.arcgis.com$/,J=/^qaext.arcgis.com$/,E=/^[\w-]*\.mapsdevext.arcgis.com$/,p=/^[\w-]*\.mapsqa.arcgis.com$/,K=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,G,J,/^jsapps.esri.com$/,E,p];C.adjustStaticAGOUrl=function(H,z){return H?(z=z||globalThis.location.hostname)?null!=z.match(G)||
null!=z.match(E)?H.replace("static.arcgis.com","staticdev.arcgis.com"):null!=z.match(J)||null!=z.match(p)?H.replace("static.arcgis.com","staticqa.arcgis.com"):H:H:H};C.isDevEnvironment=function(H){H=H||globalThis.location.hostname;return K.some(z=>null!=H?.match(z))};C.isTelemetryDevEnvironment=function(H){H=H||globalThis.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(K).some(z=>null!=H?.match(z))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/support/sizeRampUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../symbols ../../../renderers/support/numberUtils ../../../symbols/support/cimSymbolUtils ../../../symbols/support/utils ./utils ../../support/widgetUtils ../../../support/themeUtils ../../../symbols/SimpleMarkerSymbol ../../../symbols/SimpleLineSymbol".split(" "),function(C,G,J,E,p,K,H,z,U,c,n,b,f){function l(L,e){const w=L.length-1;return L.map((B,W)=>U.createStopLabel(B,
W,w,e))}function k(){k=J._asyncToGenerator(function*(L,e,w,B,W,ea,aa){var F=e.legendOptions;F=F&&F.customValues;const N=aa||(yield Q(L,w));aa=null!=e.minSize&&null!=e.maxSize;w=e.stops&&1<e.stops.length;var Y=!!e.target;if(N&&(F||aa||w&&!Y)){var ba=z.isVolumetricSymbol(N),ha=null,ma=aa=null;aa=ba&&!w?K.round([e.minDataValue,e.maxDataValue]):F||(yield t(e,N,B,W));F=L?.authoringInfo;var ja=(Y="univariate-color-size"===F?.type)&&"above-and-below"===F?.univariateTheme;!aa&&w&&(aa=e.stops.map(ra=>ra.value),
ha=e.stops.some(ra=>!!ra.label),"flow"===L.type&&(aa=K.round(aa)),ha&&(ma=e.stops.map(ra=>ra.label)));ba&&2<aa?.length&&!ja&&(aa=[aa[0],aa[aa.length-1]]);if(!aa)return null;Y&&5!==aa?.length&&(aa=x({minSize:aa[0],maxSize:aa[aa.length-1]}));var ka=ba?A(L,aa):null,sa=z.getSymbolOutlineSize(N),da=ha?null:l(aa,ea);return(yield Promise.all(aa.map(function(){var ra=J._asyncToGenerator(function*(na,oa){const qa=ba?ka[oa]:yield v(e,N,na,B,W),va=S(ja&&"class-breaks"===L.type?P(L,oa):N,qa);return{value:na,
symbol:va,label:ha?ma[oa]:da[oa],size:qa,outlineSize:sa}});return function(na,oa){return ra.apply(this,arguments)}}()))).reverse()}});return k.apply(this,arguments)}function A(L,e){L=L?.authoringInfo;const w="univariate-color-size"===L?.type;let B=[12,30];if(w){const W=e[0],ea=e[e.length-1];B=e.map(aa=>12+(aa-W)/(ea-W)*18)}w&&"below"===L?.univariateTheme&&B.reverse();return B}function P(L,e){const w=L.classBreakInfos,B=w.length;e=2>B||!(2<=e)?w[0].symbol.clone():w[B-1].symbol.clone();L.visualVariables.some(W=>
"color"===W.type)&&(e.type.includes("3d")?y(e):r(e));return e}function Q(L,e){return q.apply(this,arguments)}function q(){q=J._asyncToGenerator(function*(L,e){if("flow"===L.type)return U.getSymbolForFlowRenderer(L,e);if("pie-chart"===L.type)return new b({color:null,outline:L.outline?.width?L.outline:new f});let w=null,B=null;"simple"===L.type?w=L.symbol:"class-breaks"===L.type?(w=(L=L.classBreakInfos)&&L[0]&&L[0].symbol,B=1<L.length):"unique-value"===L.type&&(w=(L=L.uniqueValueInfos)&&L[0]&&L[0].symbol,
B=1<L.length);if(!w||d(w))return null;w=w.clone();if(e||B)w.type.includes("3d")?y(w):r(w);return w});return q.apply(this,arguments)}function d(L){return L?p.isSymbol3D(L)?L.symbolLayers?L.symbolLayers.some(e=>e&&"fill"===e.type):!1:L.type.includes("fill"):!1}function y(L){"line-3d"===L.type?L.symbolLayers.forEach(e=>{e.material={color:X}}):L.symbolLayers.forEach(e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:O}:(e.material={color:g},e.outline={color:X,size:1.5})})}function r(L){const e=
n.isDarkTheme();if("cim"===L.type)H.applyCIMSymbolColor(L,new E(O));else if(L.type.includes("line"))L.color=X;else if(L.color=e?X:g,"simple-marker"===L.type)L.outline?"#ffffff"===L.outline?.color?.toHex()&&(L.outline.color=X):L.outline={color:X,width:1.5}}function t(L,e,w,B){return h.apply(this,arguments)}function h(){h=J._asyncToGenerator(function*(L,e,w,B){const W=(yield new Promise((F,N)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],F,N))).getSizeRangeAtScale(L,w,B),ea=
W&&x(W);if(W||ea){var aa=ea.map(F=>{const N=W.minSize,Y=W.maxSize,ba=L.minDataValue,ha=L.maxDataValue;return F<=N?ba:F>=Y?ha:(F-N)/(Y-N)*(ha-ba)+ba});aa=K.round(aa);for(let F=1;F<aa.length-1;F++){const N=yield D(L,e,aa[F],aa[F-1],w,B);N&&(aa[F]=N[0],ea[F]=N[1])}return aa}});return h.apply(this,arguments)}function x(L){const e=L.minSize;L=(L.maxSize-e)/4;const w=[];for(let B=0;5>B;B++)w.push(e+L*B);return w}function D(L,e,w,B,W,ea){return M.apply(this,arguments)}function M(){M=J._asyncToGenerator(function*(L,
e,w,B,W,ea){const aa=yield v(L,e,w,W,ea);B=yield v(L,e,B,W,ea);var F=K.numDigits(w),N=F.fractional,Y=F.integer;let ba=F=null;0<w&&1>w&&(F=10**N,w*=F,Y=K.numDigits(w).integer);for(N=Y-1;0<=N;N--){var ha=10**N;Y=Math.floor(w/ha)*ha;ha*=Math.ceil(w/ha);null!=F&&(Y/=F,ha/=F);let ma=(Y+ha)/2;[,ma]=K.round([Y,ma,ha],{indexes:[1]});const ja=yield v(L,e,Y,W,ea),ka=yield v(L,e,ha,W,ea),sa=yield v(L,e,ma,W,ea),da=K.percentChange(aa,ja,B,null),ra=K.percentChange(aa,ka,B,null),na=K.percentChange(aa,sa,B,null);
let oa=20>=da.previous,qa=20>=ra.previous;oa&&qa&&(da.previous<=ra.previous?(oa=!0,qa=!1):(qa=!0,oa=!1));oa?ba=[Y,ja]:qa?ba=[ha,ka]:20>=na.previous&&(ba=[ma,sa]);if(ba)break}return ba});return M.apply(this,arguments)}function v(L,e,w,B,W){return R.apply(this,arguments)}function R(){R=J._asyncToGenerator(function*(L,e,w,B,W){const {getSize:ea}=yield new Promise((aa,F)=>C(["../../../renderers/visualVariables/support/visualVariableUtils"],aa,F));return ea(L,w,{scale:B,view:W,shape:"simple-marker"===
e.type?e.style:null})});return R.apply(this,arguments)}function S(L,e){L=L.clone();if(p.isSymbol3D(L))z.isVolumetricSymbol(L)||L.symbolLayers.forEach(w=>{"fill"!==w.type&&(w.size=e)});else if("esri.symbols.SimpleMarkerSymbol"===L.declaredClass)L.size=e;else if("esri.symbols.PictureMarkerSymbol"===L.declaredClass){const w=L.width,B=L.height;L.height=e;L.width=w/B*e}else"esri.symbols.SimpleLineSymbol"===L.declaredClass?L.width=e:"esri.symbols.TextSymbol"===L.declaredClass&&L.font&&(L.font.size=e);return L}
const g=[255,255,255],O=[200,200,200],X=[128,128,128];G.REAL_WORLD_MAX_SIZE=30;G.REAL_WORLD_MIN_SIZE=12;G.getRampStops=function(L,e,w,B,W,ea,aa){return k.apply(this,arguments)};Object.defineProperties(G,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/smartMapping/support/utils":function(){define("exports ../../../Color ../../../core/maybe ../../../intl/date ../../../intl/number ../../../renderers/support/utils ../../../renderers/visualVariables/SizeVariable".split(" "),
function(C,G,J,E,p,K,H){C.formatDateLabel=function(z){return E.formatDate(new Date(z),K.timelineDateFormatOptions)};C.formatNumberLabel=function(z){const U=Math.floor(Math.log10(Math.abs(z)))+1;return p.formatNumber(z,{notation:1E6<=Math.abs(z)?"compact":"standard",minimumSignificantDigits:2,maximumSignificantDigits:4>U||6<U?4:U})};C.getDeviationValues=function(z,U,c){if(J.isNone(U)||J.isNone(z))return[];const n=[];for(let b=-1*c;b<=c;b++)0!==b&&n.push(U+b*z);return n};C.getDynamicPathForSizeStops=
function(z){const {max:U,min:c,padding:n,pathHeight:b,pathWidth:f,stops:l}=z,k=U-c;let A=`M0 0 L${f} 0 `,P;z=3===l.length?[l[0],l[1],l[2]]:[l[0],l[2],l[4]];const Q=Math.min.apply(Math,z.map(d=>d.size)),q=Math.max(Math.abs(z[0].size-z[1].size),Math.abs(z[2].size-z[1].size));z.reverse();z.forEach(({size:d,value:y},r)=>{y=Math.round(b-(y-c)/k*b);P=Math.round((d-Q)/q*100)/100*f;0===P&&(P=n*f);0===r&&(A+=`L${P} 0 `);A+=`L${P} ${y} `});return A+=`L${P} ${b} L0 ${b} L0 0 Z`};C.getFillFromColor=function(z){return z instanceof
G?z.toCss(!0):G.fromString(z).toCss(!0)};C.getPathForSizeStops=function(z){const {bottomValue:U,bottomWidth:c,max:n,min:b,pathHeight:f,pathWidth:l,topValue:k,topWidth:A}=z;z=A*l;const P=c*l,Q=n-b;return`M${z} 0 L${z} ${Math.round(f-(k-b)/Q*f)} L${P} ${Math.round(f-(U-b)/Q*f)} L${P} ${f} L0 ${f} L0 0 Z`};C.getSizesFromVariable=function(z){let U=z.maxSize;z=z.minSize;U instanceof H&&(U=U.stops[0].size);z instanceof H&&(z=z.stops[0].size);return[U,z]};C.getStopChanges=function(z,U,c){const n=c.length-
1,b=c[0],f=c[n]-b,l=U-z,k=[];for(let A=1;A<n;A++)k.push({index:A,value:(c[A]-b)/f*l+z});k.unshift({index:0,value:z});k.push({index:n,value:U});return k};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b){function f(r,t,h){return l.apply(this,arguments)}function l(){l=G._asyncToGenerator(function*(r,t,h){p.getOrCreateMapValue(r,t,()=>[]).push(...h)});return l.apply(this,arguments)}function k(){k=G._asyncToGenerator(function*(r){const t=new Map;if(!r)return t;if("visualVariables"in r&&r.visualVariables){var h=r.visualVariables.filter(D=>"color"===D.type);for(var x of h)h=(yield n.getRampStops(x)).map(D=>D.color),yield f(t,x.field||x.valueExpression,h)}if("heatmap"===
r.type)x=b.getHeatmapRampStops(r).map(D=>D.color),yield f(t,r.field||r.valueExpression,x);else if("pie-chart"===r.type){for(const D of r.attributes)yield f(t,D.field||D.valueExpression,[D.color]);yield f(t,"default",[r?.othersCategory?.color,c.getColorFromSymbol(r.backgroundFillSymbol,null)])}else if("dot-density"===r.type){for(const D of r.attributes)yield f(t,D.field||D.valueExpression,[D.color]);yield f(t,"default",[r.backgroundColor])}else if("unique-value"===r.type)if("predominance"===r.authoringInfo?.type)for(const D of r.uniqueValueInfos??
[])yield f(t,D.value.toString(),[c.getColorFromSymbol(D.symbol,null)]);else{x=(r.uniqueValueInfos??[]).map(S=>c.getColorFromSymbol(S.symbol,null));const {field:D,field2:M,field3:v,valueExpression:R}=r;if(D||R)yield f(t,D||R,x);M&&(yield f(t,M,x));v&&(yield f(t,v,x))}else if("class-breaks"===r.type){x=r.classBreakInfos.map(v=>c.getColorFromSymbol(v.symbol,null));const {field:D,valueExpression:M}=r;yield f(t,D??M,x)}else"simple"===r.type&&(yield f(t,"default",[c.getColorFromSymbol(r.symbol,null)]));
"defaultSymbol"in r&&r.defaultSymbol&&(yield f(t,"default",[c.getColorFromSymbol(r.defaultSymbol,null)]));t.forEach((D,M)=>{D=J.unique(D.filter(Boolean),(v,R)=>JSON.stringify(v)===JSON.stringify(R));t.set(M,D)});return t});return k.apply(this,arguments)}function A(r){let t=r.minValue,h=r.maxValue;const x=r.isFirstBreak?"":q.gt+" ";r="percent-of-total"===r.normalizationType?q.pct:"";t=null==t?"":z.format(t);h=null==h?"":z.format(h);return x+t+r+" "+q.ld+" "+h+r}function P(r,t){return"normalizationField"in
r&&r.normalizationField?{type:"normalized-field",field:r.field,normalizationField:r.normalizationField}:"field"in r&&r.field?{type:"field",field:r.field}:"valueExpression"in r&&r.valueExpression?{type:"expression",expression:r.valueExpression,title:r.valueExpressionTitle,returnType:t}:null}const Q=E.getLogger("esri.renderers.support.utils"),q={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},d={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},y={millisecond:"long-month-day-year-long-time",
second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};E=H.convertDateFormatToIntlOptions("short-date");C.calculateDateFormatInterval=function(r){r=r.map(M=>new Date(M));const t=r.length;let h=Infinity,x=null;for(let M=0;M<t-1;M++){const v=r[M];let R=Infinity,S=null;for(let g=M+1;g<t;g++){var D=r[g];D=v.getFullYear()!==D.getFullYear()&&"year"||v.getMonth()!==D.getMonth()&&
"month"||v.getDate()!==D.getDate()&&"day"||v.getHours()!==D.getHours()&&"hour"||v.getMinutes()!==D.getMinutes()&&"minute"||v.getSeconds()!==D.getSeconds()&&"second"||"millisecond";const O=d[D];O<R&&(R=O,S=D)}R<h&&(h=R,x=S)}return x};C.createClassBreakLabel=A;C.createColorStops=function(r){const {values:t,colors:h,labelIndexes:x,isDate:D,dateFormatOptions:M}=r;return t.map((v,R)=>{var S=null;if(!x||x.includes(R)){let g;if(g=D?H.formatDate(v,M):z.format(v))S="",0===R?S=q.lt+" ":R===t.length-1&&(S=q.gt+
" "),S+=g}return new U({value:v,color:h[R],label:S})})};C.createUniqueValueLabel=function(r){const {value:t,domain:h,fieldInfo:x,dateFormatInterval:D}=r;r=String(t);const M=h&&"codedValues"in h&&h.codedValues?h.getName(t):null;M?r=M:"number"===typeof t&&(r=x&&"date"===x.type?H.formatDate(t,D&&H.convertDateFormatToIntlOptions(y[D])):z.format(t));return r};C.getAttribute=P;C.getAttributes=function(r,t){const h=[];if("class-breaks"===r.type||"heatmap"===r.type)h.push(P(r,"number"));else if("unique-value"===
r.type){var x=r.authoringInfo;if(x&&"relationship"===x.type){if(x.field1&&x.field2){var D=x.field2.field;const M=x.field2.normalizationField;h.push(P({field:x.field1.field,normalizationField:x.field1.normalizationField}));h.push(P({field:D,normalizationField:M}))}}else D=r.uniqueValueInfos?.[0],x=null,D&&D.value&&(D=typeof r.uniqueValueInfos[0].value,"string"===D||"number"===D)&&(x=D),h.push(P(r,x)),[r.field2,r.field3].forEach(M=>M&&h.push({type:"field",field:M}))}else"attributes"in r&&r.attributes?.forEach(M=>
h.push(P(M,"number")));(r=t?t(r):"visualVariables"in r?r.visualVariables:null)&&r.forEach(M=>h.push(P(M,"number")));return J.unique(h.filter(K.isSome),(M,v)=>"field"===M.type&&"field"===v.type?M.field===v.field:"normalized-field"===M.type&&"normalized-field"===v.type?M.field===v.field&&M.normalizationField===v.normalizationField:"expression"===M.type&&"expression"===v.type?M.expression===v.expression:!1)};C.getColorsFromRenderer=function(r){return k.apply(this,arguments)};C.setLabelsForClassBreaks=
function(r){const t=r.classBreakInfos,h=r.normalizationType;let x=[];if(t&&t.length)if("standard-deviation"===r.classificationMethod)Q.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(r.round){x.push(t[0].minValue);for(const D of t)x.push(D.maxValue);x=z.round(x);t.forEach((D,M)=>{D.label=A({minValue:0===M?x[0]:x[M],maxValue:x[M+1],isFirstBreak:0===M,normalizationType:h})})}else t.forEach((D,M)=>{D.label=A({minValue:D.minValue,
maxValue:D.maxValue,isFirstBreak:0===M,normalizationType:h})})};C.timelineDateFormatOptions=E;Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/Card":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/Handles ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../symbols/support/svgUtils ../../../symbols/support/utils ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/decorators/accessibleHandler ../../support/decorators/messageBundle ../../support/jsxFactory ../../support/widgetUtils ../../../intl/substitute".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b,f,l,k,A,P,Q,q,d,y,r){var t;(function(x){x.Auto="auto";x.Stack="stack";x.SideBySide="side-by-side"})(t||(t={}));const h=window.devicePixelRatio;J=function(x){function D(v,R){v=x.call(this,v,R)||this;v._handles=new E;v._hasIndicators=!1;v._selectedSectionName=null;v._sectionNames=[];v._sectionMap=new Map;v.activeLayerInfos=null;v.headingLevel=3;v.layout=t.Stack;v.messages=null;v.messagesCommon=null;v.type="card";v.view=null;return v}C._inheritsLoose(D,x);var M=D.prototype;
M.initialize=function(){this.addHandles(p.watch(()=>this.activeLayerInfos,v=>{this._handles.removeAll();this._watchForSectionChanges(v)}))};M.destroy=function(){this._handles.destroy();this._handles=null};M.render=function(){this._hasIndicators=this.layout===t.Auto&&768>=this.view.container.clientWidth||this.layout===t.Stack;var v=this.activeLayerInfos;v=v&&v.toArray().map(g=>this._renderLegendForLayer(g)).filter(g=>!!g);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||
(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const R=this._sectionNames.length;var S=this._sectionNames.map((g,O)=>{O=r.substitute(this.messagesCommon.pagination.pageText,{index:O+1,total:R});return d.tsx("div",{key:g,role:"tab",id:g,"aria-label":O,"aria-controls":`${g}-panel`,"aria-selected":(this._selectedSectionName===g).toString(),tabIndex:this._selectedSectionName===g?0:-1,title:O,onclick:this._selectSection,onkeydown:this._focusSection,
bind:this,class:this.classes("esri-legend--card__carousel-indicator",{["esri-legend--card__carousel-indicator--activated"]:this._selectedSectionName===g}),"data-section-name":g})});S=this._hasIndicators&&1<R?d.tsx("div",{class:"esri-legend--card__carousel-indicator-container",key:"carousel-navigation",role:"tablist"},S):null;v=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):v&&v.length?v:null;return d.tsx("div",{class:this.classes("esri-legend--card",{["esri-legend--stacked"]:this._hasIndicators})},
v?v:d.tsx("div",{class:"esri-legend--card__message"},this.messages.noLegend),S)};M._selectSection=function(v){if(v=v.target.getAttribute("data-section-name"))this._selectedSectionName=v};M._focusSection=function(v){switch(v.key){case "ArrowLeft":case "ArrowRight":this._switchSectionOnArrowPress(v);break;case "Enter":case " ":this._selectSection(v)}};M._switchSectionOnArrowPress=function(v){const R=v.key,S="ArrowLeft"===R?-1:1;v=v.target.getAttribute("data-section-name");v=this._sectionNames.indexOf(v);
const g=this._sectionNames;let O=null;-1!==v&&(g[v+S]?O=document.getElementById(g[v+S]):"ArrowLeft"===R?O=document.getElementById(g[g.length-1]):"ArrowRight"===R&&(O=document.getElementById(g[0])),O&&O.focus())};M._watchForSectionChanges=function(v){this._generateSectionNames();v&&(v.forEach(R=>{const S=`activeLayerInfo-${R.layer.uid}-version-change`;this._handles.remove(S);this._watchForSectionChanges(R.children);this._handles.add(p.watch(()=>R.version,()=>this._generateSectionNames()),S)}),this._handles.remove("activeLayerInfos-collection-change"),
this._handles.add(v.on("change",()=>this._watchForSectionChanges(v)),"activeLayerInfos-collection-change"))};M._generateSectionNames=function(){this._sectionNames.length=0;this._selectedSectionName=null;this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)};M._getSectionName=function(v,R,S){return`${this.id}${v.uid}-type-${R.type}-${S}`};M._generateSectionNamesForActiveLayerInfo=function(v){v.children.forEach(this._generateSectionNamesForActiveLayerInfo,
this);v.legendElements&&v.legendElements.forEach((R,S)=>{this._sectionNames.push(this._getSectionName(v.layer,R,S))})};M._renderLegendForLayer=function(v){if(!v.ready)return null;if(v.children.length){var R=v.children.map(g=>this._renderLegendForLayer(g)).toArray();return d.tsx("div",{key:v.layer.uid,class:this.classes("esri-legend--card__service","esri-legend--card__group-layer")},d.tsx("div",{class:"esri-legend--card__service-caption-container"},v.title),R)}if((R=v.legendElements)&&!R.length)return null;
const S=R.some(g=>"relationship-ramp"===g.type);R=R.map((g,O)=>this._renderLegendForElement(g,v,O,S)).filter(g=>!!g);return R.length?d.tsx("div",{key:v.layer.uid,class:this.classes("esri-legend--card__service",{["esri-legend--card__group-layer-child"]:!!v.parent})},d.tsx("div",{class:"esri-legend--card__service-caption-container"},d.tsx("div",{class:"esri-legend--card__service-caption-text"},v.title)),d.tsx("div",{class:"esri-legend--card__service-content"},R)):null};M._renderLegendForElement=function(v,
R,S,g=!1,O=!1){var X="color-ramp"===v.type,L="opacity-ramp"===v.type,e="size-ramp"===v.type;const w=R.layer;var B=null;"string"===typeof v.title?B=v.title:v.title&&(B=v.title,X=A.getTitle(this.messages,B,X||L),B=B.title?`${B.title} (${X})`:X);S=this._getSectionName(w,v,S);X=this._hasIndicators&&!O?d.tsx("div",null,d.tsx(P.Heading,{level:this.headingLevel,class:"esri-legend--card__carousel-title"},R.title),d.tsx(P.Heading,{level:P.incrementHeadingLevel(this.headingLevel),class:"esri-legend--card__layer-caption"},
B)):B?d.tsx(P.Heading,{level:this.headingLevel,class:"esri-legend--card__layer-caption"},B):null;B=R.effectList;L=null;"symbol-table"===v.type?(e=v.infos.map((W,ea)=>this._renderLegendForElementInfo(W,R,v.legendType,ea)).filter(W=>!!W),e.length&&(L=d.tsx("div",{class:this.classes({["esri-legend--card__label-container"]:!(e[0].properties.classes&&e[0].properties.classes["esri-legend--card__symbol-row"])&&!g,["esri-legend--card__relationship-label-container"]:g})},e))):"color-ramp"===v.type||"opacity-ramp"===
v.type||"heatmap-ramp"===v.type?L=this._renderLegendForRamp(v,w.opacity,B):e?L=this._renderSizeRamp(v,w.opacity):"pie-chart-ramp"===v.type?L=this._renderPieChartRamp(v):"relationship-ramp"===v.type?L=l.renderRelationshipRamp(v,this.id,w.opacity,B):"univariate-above-and-below-ramp"===v.type?L=this._renderUnivariateAboveAndBelowRamp(v,w.opacity,B):"univariate-color-size-ramp"===v.type&&(L=this._renderUnivariateColorSizeRamp(v,w.opacity,B));if(!L)return null;g=d.tsx("div",{key:S,class:"esri-legend--card__section",
id:`${S}-panel`,role:"tabpanel","aria-labelledby":S,tabIndex:0},[X,L]);O||this._sectionMap.set(S,g);return g};M._renderPieChartRamp=function(v){return d.tsx("div",{class:"esri-legend--card__pie-chart-ramp-preview",bind:v.preview,afterCreate:A.attachToNode})};M._renderUnivariateAboveAndBelowRamp=function(v,R,S){const {sizeRampElement:g,colorRampElement:O}=k.getUnivariateAboveAndBelowRampElements(v,R,"horizontal");if(!g)return null;v=k.getUnivariateSizeRampSize(g,"full",!0,"horizontal");var X=k.getUnivariateColorRampSize(g,
"above",!0,"horizontal"),L=k.getUnivariateColorRampSize(g,"below",!0,"horizontal");X=k.getUnivariateColorRampPreview(O,{width:X,height:12,rampAlignment:"horizontal",opacity:R,type:"above",effectList:S});R=k.getUnivariateColorRampPreview(O,{width:L,height:12,rampAlignment:"horizontal",opacity:R,type:"below",effectList:S});S=k.getUnivariateColorRampMargin(g,"card");L=g.infos.map(B=>B.label);const e=L.length-1;L=L.map((B,W)=>0===W||W===e?d.tsx("div",{key:W},B):null);const w={marginTop:"3px",display:"flex"};
y.isRTL(this.container)?w.marginRight=`${S}px`:w.marginLeft=`${S}px`;v={width:`${v}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return d.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},d.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},g.infos.map((B,W)=>d.tsx("div",{key:W,class:"esri-legend--card__symbol",
bind:B.preview,afterCreate:A.attachToNode}))),X?d.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",styles:w,key:"color-ramp-preview"},d.tsx("div",{bind:X,afterCreate:A.attachToNode}),d.tsx("div",{bind:R,afterCreate:A.attachToNode})):null,d.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},d.tsx("div",{class:"esri-legend__ramp-labels",styles:v},L)))};M._renderUnivariateColorSizeRamp=function(v,R,S){const {sizeRampElement:g,colorRampElement:O}=k.getUnivariateColorSizeRampElements(v,
"horizontal");if(!g)return null;v=k.getUnivariateSizeRampSize(g,"full",!1,"horizontal");var X=k.getUnivariateColorRampSize(g,"full",!1,"horizontal");R=k.getUnivariateColorRampPreview(O,{width:X,height:12,rampAlignment:"horizontal",opacity:R,type:"full",effectList:S});const L=k.getUnivariateColorRampMargin(g,"card"),e=g.infos.length-1;S=g.infos.map((w,B)=>0===B||B===e?d.tsx("div",{key:B},w.label):null);X={marginTop:"3px",display:"flex"};y.isRTL(this.container)?X.marginRight=`${L}px`:X.marginLeft=`${L}px`;
v={width:`${v}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return d.tsx("div",{class:"esri-legend--card__layer-row",key:"size-ramp-preview",styles:{display:"flex",flexDirection:"column"}},d.tsx("div",{class:this.classes("esri-legend--card__symbol-container","esri-legend__size-ramp--horizontal"),styles:{display:"flex",flexDirection:"row"}},g.infos.map((w,B)=>d.tsx("div",{key:B,class:"esri-legend--card__symbol",bind:w.preview,afterCreate:A.attachToNode}))),d.tsx("div",{class:"esri-univariate-above-and-below-ramp__color--card",
styles:X,key:"color-ramp-preview"},d.tsx("div",{bind:R,afterCreate:A.attachToNode})),d.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},d.tsx("div",{class:"esri-legend__ramp-labels",styles:v},S)))};M._renderLegendForElementInfo=function(v,R,S,g){var O=R.layer;if(v.type)return this._renderLegendForElement(v,R,g,!1,!0);S=A.isImageryStretchedLegend(O,S);if(v.preview){if(!v.symbol||!v.symbol.type.includes("simple-fill")){if(!v.label)return d.tsx("div",{key:g,bind:v.preview,afterCreate:A.attachToNode});
R={["esri-legend--card__symbol-cell"]:this._hasIndicators};return d.tsx("div",{key:g,class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__symbol-row"]:this._hasIndicators})},d.tsx("div",{class:this.classes(R),bind:v.preview,afterCreate:A.attachToNode}),d.tsx("div",{class:this.classes("esri-legend--card__image-label",{["esri-legend--card__label-cell"]:this._hasIndicators})},A.getTitle(this.messages,v.label,!1)||""))}let X=S=255,L=255,e=0,w=255,B=255,W=255,ea=0;const aa=v.symbol.color&&
v.symbol.color.a,F=v.symbol.outline&&v.symbol.outline.color&&v.symbol.outline.color.a;aa&&(S=v.symbol.color.r,X=v.symbol.color.g,L=v.symbol.color.b,e=v.symbol.color.a*O.opacity);F&&(w=v.symbol.outline.color.r,B=v.symbol.outline.color.g,W=v.symbol.outline.color.b,ea=v.symbol.outline.color.a*O.opacity);const N=(O=v.symbol.color?.isBright??!0)?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)";R={background:aa?`rgba(${S}, ${X}, ${L}, ${e})`:"none",color:O?"black":"white",textShadow:`-1px -1px 0 ${N},\n                                              1px -1px 0 ${N},\n                                              -1px 1px 0 ${N},\n                                              1px 1px 0 ${N}`,
border:F?`1px solid rgba(${w}, ${B}, ${W}, ${ea})`:"none",filter:b.getCSSFilterFromEffectList(R.effectList)};return d.tsx("div",{key:g,class:"esri-legend--card__layer-row"},d.tsx("div",{class:"esri-legend--card__label-element",styles:R}," ",v.label," "))}if(v.src)return R=this._renderImage(v,O,S),d.tsx("div",{key:g,class:"esri-legend--card__layer-row"},R,d.tsx("div",{class:"esri-legend--card__image-label"},v.label||""))};M._renderImage=function(v,R,S){const {label:g,src:O,opacity:X}=v;S={["esri-legend--card__imagery-layer-image--stretched"]:S,
["esri-legend--card__symbol"]:!S};R={opacity:`${null!=X?X:R.opacity}`};return d.tsx("img",{alt:A.getTitle(this.messages,g,!1),src:O,border:0,width:v.width,height:v.height,class:this.classes(S),styles:R})};M._renderSizeRampLines=function(v){v=v.infos;var R=v[0],S=v[v.length-1],g=R.symbol;v=this._hasIndicators;R=K.pt2px(R.size+R.outlineSize)*h;S=K.pt2px(S.size+S.outlineSize)*h;const O=v?R:R+50*h,X=v?R/2+50*h:R;var L;g?g.type.includes("3d")?(L=g.symbolLayers&&g.symbolLayers.length)?(L=g.symbolLayers.getItemAt(L-
1).get("resource.primitive"),L="triangle"===L||"cone"===L||"tetrahedron"===L):L=void 0:L="triangle"===g.style:L=void 0;if(g)if(g.type.includes("3d")){var e=g.symbolLayers&&g.symbolLayers.length;e?(g=g.symbolLayers.getItemAt(e-1),g=g.resource&&g.resource.primitive,g="circle"===g||"cross"===g||"kite"===g||"sphere"===g||"cube"===g||"diamond"===g):g=void 0}else g=g.style,g="circle"===g||"diamond"===g||"cross"===g;else g=void 0;e=document.createElement("canvas");e.width=O;e.height=X;e.style.width=`${e.width/
h}px`;e.style.height=`${e.height/h}px`;const w=e.getContext("2d");if(v){w.beginPath();var B=O/2-S/2;w.moveTo(0,0);w.lineTo(B,X);B=O/2+S/2;w.moveTo(O,0);w.lineTo(B,X)}else w.beginPath(),w.moveTo(0,X/2-S/2),w.lineTo(O,0),w.moveTo(0,X/2+S/2),w.lineTo(O,X);w.strokeStyle="#ddd";w.stroke();return d.tsx("div",{bind:e,afterCreate:A.attachToNode,styles:v?{display:"flex",marginTop:`-${L?0:g?R/2:0}px`,marginBottom:`-${L?S:g?S/2:0}px`}:{display:"flex",marginRight:`-${L?0:g?R/2:0}px`,marginLeft:`-${L?0:g?S/2:
0}px`}})};M._renderSizeRamp=function(v,R){var S=v.infos;const g=S[0].label,O=S[S.length-1].label;let X=S[0].preview;S=S[S.length-1].preview;const L=this._hasIndicators,e={"flex-direction":L?"column":"row-reverse"};X&&(X=X.cloneNode(!0),X.style.display="flex");S&&(S=S.cloneNode(!0),S.style.display="flex");R={opacity:null!=R?`${R}`:""};return d.tsx("div",{class:this.classes("esri-legend--card__layer-row",{["esri-legend--card__size-ramp-row"]:L})},d.tsx("div",{class:"esri-legend--card__ramp-label"},
L?g:O),d.tsx("div",{class:"esri-legend--card__size-ramp-container",styles:e},d.tsx("div",{bind:X,afterCreate:A.attachToNode,class:"esri-legend--card__size-ramp-preview",styles:R}),this._renderSizeRampLines(v),d.tsx("div",{bind:S,afterCreate:A.attachToNode,class:"esri-legend--card__size-ramp-container",styles:R})),d.tsx("div",{class:"esri-legend--card__ramp-label"},L?O:g))};M._renderLegendForRamp=function(v,R,S){var g=v.infos;const O="heatmap-ramp"===v.type,X=g.length-1;var L=2<X&&!O?25*X:100,e=L+
20;const w=g.slice(0).reverse();w.forEach((ea,aa)=>{ea.offset=O?ea.ratio:aa/X});const B=w.length-1;v=(v=0!==w.length%2&&w[w.length/2|0])&&d.tsx("div",{class:"esri-legend--card__interval-separators-container"},d.tsx("div",{class:"esri-legend--card__interval-separator"},"|"),d.tsx("div",{class:"esri-legend--card__ramp-label"},v.label));const W=g[g.length-1].label;g=g[0].label;L=n.renderSVG([[{shape:{type:"path",path:"M0 12.5 L10 0 L10 25 Z"},fill:w[0].color,stroke:{width:0}},{shape:{type:"rect",x:10,
y:0,width:L,height:25},fill:{type:"linear",x1:10,y1:0,x2:L+10,y2:0,colors:w},stroke:{width:0}},{shape:{type:"path",path:`M${L+10} 0 L${e} ${12.5} L${L+10} ${25} Z`},fill:w[B].color,stroke:{width:0}}]],e,25);({messages:e}=this);R={filter:b.getCSSFilterFromEffectList(S),opacity:null==R?null:`${R}`};return d.tsx("div",{class:"esri-legend--card__layer-row",styles:{justifyContent:"center"}},d.tsx("div",{class:"esri-legend--card__ramp-label"},O?e[W]:W),d.tsx("div",{class:"esri-legend--card__symbol-container"},
d.tsx("div",{styles:R},L),v),d.tsx("div",{class:"esri-legend--card__ramp-label"},O?e[g]:g))};return D}(f);G.__decorate([H.property()],J.prototype,"activeLayerInfos",void 0);G.__decorate([H.property()],J.prototype,"headingLevel",void 0);G.__decorate([H.property()],J.prototype,"layout",void 0);G.__decorate([H.property(),q.messageBundle("esri/widgets/Legend/t9n/Legend")],J.prototype,"messages",void 0);G.__decorate([H.property(),q.messageBundle("esri/t9n/common")],J.prototype,"messagesCommon",void 0);
G.__decorate([H.property({readOnly:!0})],J.prototype,"type",void 0);G.__decorate([H.property()],J.prototype,"view",void 0);G.__decorate([Q.accessibleHandler()],J.prototype,"_selectSection",null);return J=G.__decorate([c.subclass("esri.widgets.Legend.styles.Card")],J)})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(C,
G,J,E,p){function K(U,c,n){const b=`${n}_arrowStart`;n=`${n}_arrowEnd`;U="left"===U;const f={markerStart:null,markerEnd:null};switch(c){case "HL":U?f.markerStart=`url(#${n})`:f.markerEnd=`url(#${b})`;break;case "LL":f.markerStart=`url(#${n})`;break;case "LH":U?f.markerEnd=`url(#${b})`:f.markerStart=`url(#${n})`;break;default:f.markerEnd=`url(#${b})`}return f}function H(U,c,n,b,f=60){const {focus:l,numClasses:k,colors:A,rotation:P}=U;U=!!l;const Q=Math.sqrt(f**2+f**2)+(U?0:5),q=[],d=[];var y=[],r=
(f||75)/k;for(var t=0;t<k;t++){var h=t*r;for(var x=0;x<k;x++){var D=x*r;const M=G.generateFillAttributes(A[t][x]),v=G.generateStrokeAttributes(null);D={type:"rect",x:D,y:h,width:r,height:r};q.push(G.renderDef(M));d.push(G.renderShape(D,M.fill,v,null));y.push(G.getBoundingBox(D))}}r=null;U||(r="margin: -15px -15px -18px -15px");t=K("left",l,c);h=K("right",l,c);x=G.computeBBox(y);y=G.getTransformMatrix(x,Q,Q,0,!1,P,!1);x=G.getTransformMatrix(x,Q,Q,0,!1,U?-45:null,!1);n={filter:J.getCSSFilterFromEffectList(b),
opacity:null==n?null:`${n}`};return p.tsx("div",{styles:n,class:U?z.diamondMidColRamp:z.squareTableCell},p.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:Q,height:Q,style:r},p.tsx("defs",null,p.tsx("marker",{id:`${c}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},p.tsx("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),p.tsx("marker",{id:`${c}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",
markerUnits:"strokeWidth",orient:"auto"},p.tsx("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),q),p.tsx("g",{transform:y},d),p.tsx("g",{transform:x},p.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":t.markerStart,"marker-end":t.markerEnd,x1:-10,y1:f-15,x2:-10,y2:15}),p.tsx("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":h.markerStart,"marker-end":h.markerEnd,x1:15,y1:f+10,x2:f-15,y2:f+10}))))}const z={diamondContainer:"esri-relationship-ramp--diamond__container",
diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",
squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};C.renderRelationshipRamp=function(U,c,n,b){const {focus:f,labels:l}=U,k=!!f;U=H(U,c,n,b);c={justifyContent:"center"};
n=E.isRTL();return k?p.tsx("div",{class:z.diamondContainer,styles:c},p.tsx("div",{class:z.diamondLeftCol},n?l.right:l.left),p.tsx("div",{class:z.diamondMidCol},p.tsx("div",{class:z.diamondMidColLabel},l.top),U,p.tsx("div",{class:z.diamondMidColLabel},l.bottom)),p.tsx("div",{class:z.diamondRightCol},n?l.left:l.right)):p.tsx("div",{class:z.squareTable},p.tsx("div",{class:z.squareTableRow},p.tsx("div",{class:E.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelRightBottom)},n?l.top:l.left),
p.tsx("div",{class:z.squareTableCell}),p.tsx("div",{class:E.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelLeftBottom)},n?l.left:l.top)),p.tsx("div",{class:z.squareTableRow},p.tsx("div",{class:z.squareTableCell}),U,p.tsx("div",{class:z.squareTableCell})),p.tsx("div",{class:z.squareTableRow},p.tsx("div",{class:E.classes(z.squareTableCell,z.squareTableLabel,z.squareTableLabelRightTop)},n?l.right:l.bottom),p.tsx("div",{class:z.squareTableCell}),p.tsx("div",{class:E.classes(z.squareTableCell,
z.squareTableLabel,z.squareTableLabelLeftTop)},n?l.bottom:l.right)))};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/styles/support/univariateUtils":function(){define("exports ../../../../core/screenUtils ../../../../libs/maquette/projection ../../../../libs/maquette/projector ../../../../symbols/support/symbolUtils ../../../support/widgetUtils ../../../support/jsxFactory".split(" "),function(C,G,J,E,p,K,H){function z(l="vertical"){return"vertical"===
l?H.tsx("svg",{height:"4",width:"10"},H.tsx("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:"stroke:rgb(200, 200, 200);stroke-width:1"})):H.tsx("svg",{height:"10",width:"10"},H.tsx("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:"stroke:rgb(200, 200, 200);stroke-width:1"}))}function U(l,k="vertical"){const A=document.createElement("div");A.style.height="20px";A.className=f.univariateAboveAndBelowSymbol;null!=l&&(A.style.opacity=l.toString());b.append(A,z.bind(null,k));return A}function c(l,k,A="vertical",P){l.infos.forEach((Q,
q)=>{if(P&&2===q)Q.preview=U(k,A);else{q=G.pt2px(Q.size)+("horizontal"===A?20:10);const d="div"===Q.preview.tagName.toLowerCase(),y=d?Q.preview:document.createElement("div");y.className=f.univariateAboveAndBelowSymbol;"horizontal"===A?y.style.width=`${q}px`:y.style.height=`${q}px`;d||y.appendChild(Q.preview);Q.preview=y}})}function n(l,k,A,P="vertical"){let Q=0;l=l.infos;const q=Math.floor(l.length/2);var d="full"===k||"above"===k?0:q;for(k="full"===k||"below"===k?l.length-1:q;d<=k;d++)if(A&&d===
q)Q+="horizontal"===P?10:20;else{const y=G.pt2px(l[d].size)+("horizontal"===P?20:10);Q+=y}return Math.round(Q)}const b=E.createProjector(),f={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};C.getUnivariateAboveAndBelowRampElements=function(l,k,A="vertical"){var P=l.infos;l=P.find(({type:Q})=>"size-ramp"===Q);P=P.find(({type:Q})=>"color-ramp"===Q);l&&(l={...l},l.infos=[...l.infos],c(l,k,A,!0));P&&(P={...P},P.infos=[...P.infos]);"horizontal"===
A&&(l?.infos.reverse(),P?.infos.reverse());return{sizeRampElement:l,colorRampElement:P}};C.getUnivariateColorRampMargin=function(l,k="classic"){l=l.infos;return"classic"===k?(G.pt2px(l[0].size)+10)/2:(G.pt2px(l[0].size)-G.pt2px(l[l.length-1].size))/2};C.getUnivariateColorRampPreview=function(l,k){if(!l)return null;l=l.infos.map(A=>A.color);l=p.renderColorRampPreviewHTML("full"===k.type?l:"above"===k.type?l.slice(0,3):l.slice(2,5),{width:k.width,height:k.height,align:k.rampAlignment,effectList:k.effectList});
l.className=f.colorRamp;null!=k.opacity&&(l.style.opacity=k.opacity.toString());return l};C.getUnivariateColorRampSize=function(l,k,A,P="vertical"){const Q=n(l,k,A,P);l=l.infos;var q=Math.floor(l.length/2);const d="full"===k||"above"===k?0:q;q="full"===k||"below"===k?l.length-1:q;A=A?"vertical"===P?20:10:0;P="vertical"===P?10*("full"===k?2:1):20*("full"===k?2:1);return Math.round(Q-(G.pt2px("full"===k?l[d].size+l[q].size:"above"===k?l[d].size:l[q].size)/2+A/2+P/2))};C.getUnivariateColorSizeRampElements=
function(l,k="vertical"){var A=l.infos;l=A.find(({type:P})=>"size-ramp"===P);A=A.find(({type:P})=>"color-ramp"===P);l&&(l={...l},l.infos=[...l.infos],c(l,null,k,!1));A&&(A={...A},A.infos=[...A.infos]);"horizontal"===k&&(l?.infos.reverse(),A?.infos.reverse());return{sizeRampElement:l,colorRampElement:A}};C.getUnivariateSizeRampSize=n;Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/styleUtils":function(){define(["exports","../../../intl",
"../../../intl/substitute"],function(C,G,J){C.attachToNode=function(E){E.appendChild(this)};C.getTitle=function(E,p,K){if(p){if("string"===typeof p||"number"===typeof p)return p;if("value"in p||"unit"in p)return J.substitute(E.dotValue,p);if("colorName"in p||"bandName"in p)return E[p.colorName]+": "+(E[p.bandName]||p.bandName);if("showCount"in p)return p.showCount?E.clusterCountTitle:null;var H=null;K?H=p.ratioPercentTotal?"showRatioPercentTotal":p.ratioPercent?"showRatioPercent":p.ratio?"showRatio":
p.normField?"showNormField":p.field?"showField":null:K||(H=p.normField?"showNormField":p.normByPct?"showNormPct":p.field?"showField":null);return H?J.substitute("showField"===H?"{field}":E[H],{field:p.field,normField:p.normField}):null}};C.isImageryStretchedLegend=function(E,p){return!!(p&&"Stretched"===p&&10.3<=E.version&&"esri.layers.ImageryLayer"===E.declaredClass)};C.isRendererTitle=function(E,p){return!p};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],function(C,G,J,E){const p={heading:"esri-widget__heading"};C.CSS=p;C.Heading=function(K,H){const z=G.clamp(Math.ceil(K.level),1,6),U=`h${z}`;delete K.level;return E.tsx(U,{...K,class:J.classes(p.heading,K.class),role:"heading","aria-level":String(z)},H)};C.incrementHeadingLevel=function(K,H=1){return G.clamp(Math.ceil(K+H),1,6)};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Legend/styles/Classic":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../intl ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ./support/relationshipUtils ./support/univariateUtils ../support/styleUtils ../../support/Heading ../../support/widgetUtils ../../support/decorators/messageBundle ../../support/jsxFactory ../../../intl/number".split(" "),
function(C,G,J,E,p,K,H,z,U,c,n,b,f,l,k,A){const P={display:"flex",alignItems:"flex-start"},Q={marginLeft:"3px"},q={display:"table-cell",verticalAlign:"middle"};J=function(d){function y(t,h){t=d.call(this,t,h)||this;t.activeLayerInfos=null;t.headingLevel=3;t.messages=null;t.type="classic";return t}C._inheritsLoose(y,d);var r=y.prototype;r.render=function(){var t=this.activeLayerInfos;t=t&&t.toArray().map(h=>this._renderLegendForLayer(h)).filter(h=>!!h);return k.tsx("div",null,t&&t.length?t:k.tsx("div",
{class:"esri-legend__message"},this.messages.noLegend))};r._renderLegendForLayer=function(t){if(!t.ready)return null;var h=!!t.children.length;const x=`${"esri-legend__"}${t.layer.uid}-version-${t.version}`,D=t.title?b.Heading({level:this.headingLevel,class:this.classes("esri-widget__heading","esri-legend__service-label")},t.title):null;if(h)return h=t.children.map(M=>this._renderLegendForLayer(M)).toArray(),k.tsx("div",{key:x,class:this.classes("esri-legend__service","esri-legend__group-layer")},
D,h);if((h=t.legendElements)&&!h.length)return null;h=h.map(M=>this._renderLegendForElement(M,t.layer,t.effectList)).filter(M=>!!M);return h.length?k.tsx("div",{key:x,class:this.classes("esri-legend__service",{["esri-legend__group-layer-child"]:!!t.parent}),tabIndex:0},D,k.tsx("div",{class:"esri-legend__layer"},h)):null};r._renderLegendForElement=function(t,h,x,D){var M="color-ramp"===t.type,v="opacity-ramp"===t.type;const R="size-ramp"===t.type;let S=null;if("symbol-table"===t.type||R){var g=t.infos.map(X=>
this._renderLegendForElementInfo(X,h,x,R,t.legendType)).filter(X=>!!X);g.length&&(S=k.tsx("div",{class:"esri-legend__layer-body"},g))}else"color-ramp"===t.type||"opacity-ramp"===t.type||"heatmap-ramp"===t.type||"stretch-ramp"===t.type?S=this._renderLegendForRamp(t,h.opacity):"relationship-ramp"===t.type?S=U.renderRelationshipRamp(t,this.id,h.opacity,x):"pie-chart-ramp"===t.type?S=this._renderPieChartRamp(t):"univariate-above-and-below-ramp"===t.type?S=this._renderUnivariateAboveAndBelowRamp(t,h.opacity,
x):"univariate-color-size-ramp"===t.type&&(S=this._renderUnivariateColorSizeRamp(t,h.opacity,x));if(!S)return null;g=t.title;var O=null;"string"===typeof g?O=g:g&&(O=n.getTitle(this.messages,g,M||v),O=n.isRendererTitle(g,M||v)&&g.title?`${g.title} (${O})`:O);M=D?"esri-legend__layer-child-table":"esri-legend__layer-table";v=O?k.tsx("div",{class:"esri-legend__layer-caption"},O):null;return k.tsx("div",{class:this.classes(M,{["esri-legend__layer-table--size-ramp"]:R||!D})},v,S)};r._renderPieChartRamp=
function(t){return k.tsx("div",{bind:t.preview,afterCreate:n.attachToNode})};r._renderUnivariateAboveAndBelowRamp=function(t,h,x){const {sizeRampElement:D,colorRampElement:M}=c.getUnivariateAboveAndBelowRampElements(t,h);if(!D)return null;var v=c.getUnivariateColorRampSize(D,"above",!0);t=c.getUnivariateColorRampSize(D,"below",!0);const R=c.getUnivariateColorRampPreview(M,{width:12,height:v,rampAlignment:"vertical",opacity:h,type:"above",effectList:x});h=c.getUnivariateColorRampPreview(M,{width:12,
height:t,rampAlignment:"vertical",opacity:h,type:"below",effectList:x});var S=c.getUnivariateColorRampMargin(D);const g=D.infos.map(w=>w.label);x=g.map((w,B)=>{const W=2===B;return 0===B?k.tsx("div",{key:B,class:w?R?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},w):W?k.tsx("div",null):null});const O=g.length-1,X=Math.floor(g.length/2),L=g.map((w,B)=>{const W=B===O;return B===X||W?k.tsx("div",{key:B,class:w?R?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":
null},w):null}),e={display:"table-cell",verticalAlign:"middle"};S={marginTop:`${S}px`};v={height:`${v}px`};t={height:`${t}px`};return k.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:P},k.tsx("div",{class:"esri-legend__layer-body"},D.infos.map((w,B)=>k.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},k.tsx("div",{class:"esri-legend__symbol",styles:e,bind:w.preview,afterCreate:n.attachToNode}),R||0!==B%2?null:k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},
g[B])))),R?k.tsx("div",{styles:S,key:"color-ramp-preview"},k.tsx("div",{styles:Q},k.tsx("div",{styles:q},k.tsx("div",{class:"esri-legend__ramps",bind:R,afterCreate:n.attachToNode})),k.tsx("div",{styles:q},k.tsx("div",{class:"esri-legend__ramp-labels",styles:v},x))),k.tsx("div",{styles:Q},k.tsx("div",{styles:q},k.tsx("div",{class:"esri-legend__ramps",bind:h,afterCreate:n.attachToNode})),k.tsx("div",{styles:q},k.tsx("div",{class:"esri-legend__ramp-labels",styles:t},L)))):null)};r._renderUnivariateColorSizeRamp=
function(t,h,x){const {sizeRampElement:D,colorRampElement:M}=c.getUnivariateColorSizeRampElements(t);if(!D)return null;var v=c.getUnivariateColorRampMargin(D);t=c.getUnivariateColorRampSize(D,"full",!1);h=c.getUnivariateColorRampPreview(M,{width:12,height:t,rampAlignment:"vertical",opacity:h,type:"full",effectList:x});const R=D.infos.length-1;x=D.infos.map((g,O)=>0===O||O===R?k.tsx("div",{key:O,class:g.label?M?"esri-univariate-above-and-below-ramp__label":"esri-legend__ramp-label":null},g.label):
null);const S={display:"table-cell",verticalAlign:"middle"};v={marginTop:`${v}px`};t={height:`${t}px`};return k.tsx("div",{key:"univariate-above-and-below-ramp-preview",styles:P},k.tsx("div",{class:"esri-legend__layer-body"},D.infos.map(g=>k.tsx("div",{class:this.classes("esri-legend__layer-row","esri-legend__size-ramp")},k.tsx("div",{class:"esri-legend__symbol",styles:S,bind:g.preview,afterCreate:n.attachToNode})))),k.tsx("div",{styles:v,key:"color-ramp-preview"},k.tsx("div",{styles:Q},k.tsx("div",
{styles:q},k.tsx("div",{class:"esri-legend__ramps",bind:h,afterCreate:n.attachToNode})),k.tsx("div",{styles:q},k.tsx("div",{class:"esri-legend__ramp-labels",styles:t},x)))))};r._renderLegendForRamp=function(t,h){const x=t.infos,D="heatmap-ramp"===t.type,M="stretch-ramp"===t.type,v=t.preview;v.className=`${"esri-legend__color-ramp"} ${"opacity-ramp"===t.type?"esri-legend__opacity-ramp":""}`;null!=h&&(v.style.opacity=h.toString());t=x.map(R=>k.tsx("div",{class:R.label?"esri-legend__ramp-label":null},
D?this.messages[R.label]||R.label:M?this._getStretchStopLabel(R):R.label));h={height:v.style.height};return k.tsx("div",{class:"esri-legend__layer-row"},k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--symbols",styles:{width:"24px"}},k.tsx("div",{class:"esri-legend__ramps",bind:v,afterCreate:n.attachToNode})),k.tsx("div",{class:"esri-legend__layer-cell esri-legend__layer-cell--info"},k.tsx("div",{class:"esri-legend__ramp-labels",styles:h},t)))};r._getStretchStopLabel=function(t){return t.label?
this.messages[t.label]+": "+("string"===typeof t.value?t.value:A.formatNumber(t.value,{style:"decimal",notation:t.value.toString().includes("e")?"scientific":"standard"})):""};r._renderLegendForElementInfo=function(t,h,x,D,M){if(t.type)return this._renderLegendForElement(t,h,x,!0);x=null;M=n.isImageryStretchedLegend(h,M);t.preview?x=k.tsx("div",{class:"esri-legend__symbol",bind:t.preview,afterCreate:n.attachToNode}):t.src&&(x=this._renderImage(t,h,M));if(!x)return null;h={["esri-legend__imagery-layer-info--stretched"]:M};
return k.tsx("div",{class:"esri-legend__layer-row"},k.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--symbols",{["esri-legend__imagery-layer-info--stretched"]:M,["esri-legend__size-ramp"]:!M&&D})},x),k.tsx("div",{class:this.classes("esri-legend__layer-cell esri-legend__layer-cell--info",h)},n.getTitle(this.messages,t.label,!1)||""))};r._renderImage=function(t,h,x){const {label:D,src:M,opacity:v}=t;x={["esri-legend__imagery-layer-image--stretched"]:x,["esri-legend__symbol"]:!x};
h={opacity:`${null!=v?v:h.opacity}`};return k.tsx("img",{alt:n.getTitle(this.messages,D,!1),src:M,border:0,width:t.width,height:t.height,class:this.classes(x),styles:h})};return y}(z);G.__decorate([E.property()],J.prototype,"activeLayerInfos",void 0);G.__decorate([E.property()],J.prototype,"headingLevel",void 0);G.__decorate([E.property(),l.messageBundle("esri/widgets/Legend/t9n/Legend")],J.prototype,"messages",void 0);G.__decorate([E.property({readOnly:!0})],J.prototype,"type",void 0);return J=G.__decorate([H.subclass("esri.widgets.Legend.styles.Classic")],
J)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./Legend/LegendViewModel ./Legend/styles/Card ./Legend/styles/Classic ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),function(C,G,J,E,p,K,H,z,U,c,n,b,f,l,k,A){H=function(P){function Q(d,y){d=
P.call(this,d,y)||this;d._handles=new J;d.headingLevel=3;d.iconClass="esri-icon-layer-list";d.messages=null;d.style=new f;d.viewModel=new n;return d}C._inheritsLoose(Q,P);var q=Q.prototype;q.initialize=function(){this.addHandles([p.on(()=>this.view,"resize",()=>this.scheduleRender()),p.on(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),p.watch(()=>this.headingLevel,d=>{const {style:y}=this;y&&(y.headingLevel=d)}),p.watch(()=>this.style,(d,y)=>{y&&d!==y&&
y.destroy();d&&(d.activeLayerInfos=this.activeLayerInfos,"card"===d.type&&(d.view=this.view),d.headingLevel=this.headingLevel)},p.initial)])};q.destroy=function(){this._handles=E.destroyMaybe(this._handles)};q.castStyle=function(d){if(d instanceof b||d instanceof f)return d;if("string"===typeof d)return"card"===d?new b:new f;if(d&&"string"===typeof d.type){const y={...d};delete y.type;return new ("card"===d.type?b:f)(y)}return new f};q.render=function(){return A.tsx("div",{class:this.classes("esri-legend",
"esri-widget",this.style instanceof f?"esri-widget--panel":null)},this.style.render())};q._refreshActiveLayerInfos=function(d){this._handles.removeAll();d.forEach(y=>this._renderOnActiveLayerInfoChange(y));this.scheduleRender()};q._renderOnActiveLayerInfoChange=function(d){var y=p.watch(()=>d.version,()=>this.scheduleRender());this._handles.add(y,`version_${d.layer.uid}`);y=p.on(()=>d.children,"change",()=>d.children.forEach(r=>this._renderOnActiveLayerInfoChange(r)),p.initial);this._handles.add(y,
`children_${d.layer.uid}`);d.children.forEach(r=>this._renderOnActiveLayerInfoChange(r))};C._createClass(Q,[{key:"activeLayerInfos",get:function(){return this.viewModel.activeLayerInfos},set:function(d){this.viewModel.activeLayerInfos=d}},{key:"basemapLegendVisible",get:function(){return this.viewModel.basemapLegendVisible},set:function(d){this.viewModel.basemapLegendVisible=d}},{key:"groundLegendVisible",get:function(){return this.viewModel.groundLegendVisible},set:function(d){this.viewModel.groundLegendVisible=
d}},{key:"hideLayersNotInCurrentView",get:function(){return this.viewModel.hideLayersNotInCurrentView},set:function(d){this.viewModel.hideLayersNotInCurrentView=d}},{key:"keepCacheOnDestroy",get:function(){return this.viewModel.keepCacheOnDestroy},set:function(d){this.viewModel.keepCacheOnDestroy=d}},{key:"respectLayerVisibility",get:function(){return this.viewModel.respectLayerVisibility},set:function(d){this.viewModel.respectLayerVisibility=d}},{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(d){this._overrideIfSome("label",d)}},{key:"layerInfos",get:function(){return this.viewModel.layerInfos},set:function(d){this.viewModel.layerInfos=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}}]);return Q}(c);G.__decorate([K.property()],H.prototype,"activeLayerInfos",null);G.__decorate([K.property()],H.prototype,"basemapLegendVisible",null);G.__decorate([K.property()],H.prototype,"groundLegendVisible",null);G.__decorate([K.property()],
H.prototype,"headingLevel",void 0);G.__decorate([K.property()],H.prototype,"hideLayersNotInCurrentView",null);G.__decorate([K.property()],H.prototype,"keepCacheOnDestroy",null);G.__decorate([K.property()],H.prototype,"respectLayerVisibility",null);G.__decorate([K.property()],H.prototype,"iconClass",void 0);G.__decorate([K.property()],H.prototype,"label",null);G.__decorate([K.property()],H.prototype,"layerInfos",null);G.__decorate([K.property(),k.messageBundle("esri/widgets/Legend/t9n/Legend")],H.prototype,
"messages",void 0);G.__decorate([K.property()],H.prototype,"style",void 0);G.__decorate([z.cast("style")],H.prototype,"castStyle",null);G.__decorate([K.property()],H.prototype,"view",null);G.__decorate([K.property()],H.prototype,"viewModel",void 0);return H=G.__decorate([U.subclass("esri.widgets.Legend")],H)});