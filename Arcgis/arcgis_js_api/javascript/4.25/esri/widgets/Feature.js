// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),function(p,l,r,n,A,G,L,
J,O,q,v,d,b){A=function(h){function m(g,z){g=h.call(this,g,z)||this;g._featureElementInfo=null;g.attachmentsWidget=new J;g.headingLevel=2;g.viewModel=new q;return g}p._inheritsLoose(m,h);var e=m.prototype;e.initialize=function(){this._featureElementInfo=new v;this.addHandles([r.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),r.initial),r.watch(()=>this.viewModel?.graphic,g=>this.attachmentsWidget.graphic=g,r.initial)])};e.destroy=
function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};e.render=function(){const {attachmentsWidget:g}=this;return b.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),g?.render())};e._setupFeatureElementInfo=function(){const {description:g,title:z,headingLevel:H}=this;this._featureElementInfo.set({description:g,title:z,headingLevel:H})};p._createClass(m,[{key:"description",get:function(){return this.viewModel.description},set:function(g){this.viewModel.description=
g}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(g){this.attachmentsWidget.displayType=g}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(g){this.viewModel.graphic=g}},{key:"title",get:function(){return this.viewModel.title},set:function(g){this.viewModel.title=g}}]);return m}(O);l.__decorate([n.property({readOnly:!0})],A.prototype,"attachmentsWidget",void 0);l.__decorate([n.property()],A.prototype,"description",null);l.__decorate([n.property()],
A.prototype,"displayType",null);l.__decorate([n.property()],A.prototype,"graphic",null);l.__decorate([n.property()],A.prototype,"headingLevel",void 0);l.__decorate([n.property()],A.prototype,"title",null);l.__decorate([n.property({type:q})],A.prototype,"viewModel",void 0);return A=l.__decorate([L.subclass("esri.widgets.Feature.FeatureAttachments")],A)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g){const z={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},H=window.CSS;O=function(D){function x(c,t){c=D.call(this,c,t)||this;c.displayType="auto";c.messages=null;c.messagesUnits=null;c.selectedFile=null;c.submitting=!1;c.viewModel=new b;c.visibleElements={...z};c._supportsImageOrientation=H&&H.supports&&H.supports("image-orientation","from-image");c._addAttachmentForm=
null;c._updateAttachmentForm=null;return c}l._inheritsLoose(x,D);var a=x.prototype;a.initialize=function(){this.addHandles([G.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),G.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),G.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),G.initial)])};a.loadDependencies=function(){return Promise.all([new Promise((c,t)=>p(["../chunks/calcite-icon"],c,t))])};a.castVisibleElements=function(c){return{...z,...c}};
a.addAttachment=function(){const {_addAttachmentForm:c,viewModel:t}=this;this._set("submitting",!0);this._set("error",null);return t.addAttachment(c).then(u=>{this._set("submitting",!1);this._set("error",null);t.mode="view";return u}).catch(u=>{this._set("submitting",!1);this._set("error",new n("attachments:add-attachment",this.messages.addErrorMessage,u));throw u;})};a.deleteAttachment=function(c){const {viewModel:t}=this;this._set("submitting",!0);this._set("error",null);return t.deleteAttachment(c).then(u=>
{this._set("submitting",!1);this._set("error",null);t.mode="view";return u}).catch(u=>{this._set("submitting",!1);this._set("error",new n("attachments:delete-attachment",this.messages.deleteErrorMessage,u));throw u;})};a.updateAttachment=function(){const {viewModel:c}=this,{_updateAttachmentForm:t}=this;this._set("submitting",!0);this._set("error",null);return c.updateAttachment(t).then(u=>{this._set("submitting",!1);this._set("error",null);c.mode="view";return u}).catch(u=>{this._set("submitting",
!1);this._set("error",new n("attachments:update-attachment",this.messages.updateErrorMessage,u));throw u;})};a.addFile=function(){const c=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return c};a.updateFile=function(){const {viewModel:c}=this,t=c.updateFile(this.selectedFile,this._updateAttachmentForm,c.activeFileInfo);c.mode="view";return t};a.deleteFile=function(c){c=this.viewModel.deleteFile(c||this.viewModel.activeFileInfo.file);this.viewModel.mode=
"view";return c};a.render=function(){const {submitting:c,viewModel:t}=this,{state:u}=t;return g.tsx("div",{class:this.classes("esri-attachments","esri-widget")},c?this.renderProgressBar():null,"loading"===u?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};a.renderErrorMessage=function(){const {error:c,visibleElements:t}=this;return c&&t.errorMessage?g.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},c.message):null};a.renderAttachments=function(){const {activeFileInfo:c,
mode:t,activeAttachmentInfo:u}=this.viewModel;return"add"===t?this.renderAddForm():"edit"===t?this.renderDetailsForm(u||c):this.renderAttachmentContainer()};a.renderLoading=function(){return g.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},g.tsx("div",{class:"esri-attachments__loader"}))};a.renderProgressBar=function(){return this.visibleElements.progressBar?g.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};a.renderAddForm=function(){const {submitting:c,
selectedFile:t}=this;var u=c||!t,C=this.visibleElements.cancelAddButton?g.tsx("button",{type:"button",bind:this,disabled:c,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",c&&"esri-button--disabled")},this.messages.cancel):null;u=this.visibleElements.addSubmitButton?g.tsx("button",{type:"submit",disabled:u,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:u})},
this.messages.add):null;const B=t?g.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},t.name):null;C=g.tsx("form",{bind:this,afterCreate:m.storeNode,afterRemoved:m.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},g.tsx("fieldset",{class:"esri-attachments__file-fieldset"},B,g.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},t?this.messages.changeFile:this.messages.selectFile,g.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),u,C);return g.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},C)};a.renderDetailsForm=function(c){const {visibleElements:t,viewModel:u,selectedFile:C,submitting:B}=this;var {abilities:F}=u,I=B||!C;let E;if(C){var k=C.type;E=C.name;var f=C.size}else if("file"in c)k=c.file.type,E=c.file.name,f=c.file.size;else{k=c.contentType;E=c.name;f=c.size;var w=c.url}var M=F.editing&&F.operations.delete&&t.deleteButton?
g.tsx("button",{key:"delete-button",type:"button",disabled:B,bind:this,onclick:Q=>this._submitDeleteAttachment(Q,c),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:B})},this.messages.delete):void 0;I=F.editing&&F.operations.update&&t.updateButton?g.tsx("button",{disabled:I,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:I})},
this.messages.update):void 0;const N=this.visibleElements.cancelUpdateButton?g.tsx("button",{disabled:B,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:B})},this.messages.cancel):void 0;F=F.editing&&F.operations.update?g.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},g.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
E),g.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,g.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;f=g.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},g.tsx("label",null,L.formatFileSize(this.messagesUnits,f)));k=g.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},g.tsx("label",
null,k));w=A.isSome(w)?g.tsx("a",{class:"esri-attachments__item-link",href:w,rel:"noreferrer",target:"_blank"},this.renderImageMask(c,400),g.tsx("div",{class:"esri-attachments__item-link-overlay"},g.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},g.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(c,400);M=g.tsx("form",{bind:this,afterCreate:m.storeNode,afterRemoved:m.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:Q=>this._submitUpdateAttachment(Q,c)},g.tsx("div",
{class:"esri-attachments__metadata"},f,k),F,g.tsx("div",{class:"esri-attachments__actions"},M,N,I));return g.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},w,M)};a.renderImageMask=function(c,t){return"file"in c?this.renderGenericImageMask(c.file.name,c.file.type):this.renderImageMaskForAttachment(c,t)};a.renderGenericImageMask=function(c,t){var {supportsResizeAttachments:u}=this.viewModel;t=h.getIconPath(t);u={["esri-attachments__image--resizable"]:u};return g.tsx("div",
{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},g.tsx("img",{title:c,alt:c,src:t,class:this.classes(u,"esri-attachments__image")}))};a.renderImageMaskForAttachment=function(c,t){var {supportsResizeAttachments:u}=this.viewModel;const {contentType:C,name:B,url:F}=c;if(!u||!h.isSupportedImage(C))return this.renderGenericImageMask(B,C);c=(c=this._getCSSTransform(c))?{transform:c,"image-orientation":"none"}:{};t=`${F}${F.includes("?")?"\x26":"?"}w=${t}`;u={["esri-attachments__image--resizable"]:u};
return g.tsx("div",{class:this.classes("esri-attachments__item-mask")},g.tsx("img",{styles:c,alt:B,title:B,src:t,class:this.classes(u,"esri-attachments__image")}))};a.renderFile=function(c){const {file:t}=c;return g.tsx("li",{class:"esri-attachments__item",key:t},g.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(c),type:"button"},this.renderImageMask(c),
g.tsx("label",{class:"esri-attachments__label"},g.tsx("span",{class:"esri-attachments__filename"},t.name||this.messages.noTitle),g.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",m.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};a.renderAttachmentInfo=function({attachmentInfo:c,displayType:t}){const {viewModel:u,effectiveDisplayType:C}=this,{abilities:B,supportsResizeAttachments:F}=u,{contentType:I,name:E,url:k}=c;t=this.renderImageMask(c,
"list"===t?48:400);var f=B.editing?g.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",m.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;f="preview"===C&&F&&h.isSupportedImage(I)?null:g.tsx("label",{class:"esri-attachments__label"},g.tsx("span",{class:"esri-attachments__filename"},E||this.messages.noTitle),f);t=[t,f];t=B.editing?g.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,
"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":c.id,onclick:()=>this._startEditAttachment(c),type:"button"},t):g.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:k,target:"_blank"},t);return g.tsx("li",{class:"esri-attachments__item",key:c},t)};a.renderAttachmentContainer=function(){const {effectiveDisplayType:c,viewModel:t,visibleElements:u}=this,{attachmentInfos:C,abilities:B,fileInfos:F}=t;var I=!!C?.length;const E=!!F?.length,k={["esri-attachments__container--list"]:"preview"!==
c,["esri-attachments__container--preview"]:"preview"===c},f=B.editing&&B.operations.add&&u.addButton?g.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},g.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,w=I?g.tsx("ul",{key:"attachments-list",class:"esri-attachments__items"},C.toArray().map(N=>
this.renderAttachmentInfo({attachmentInfo:N,displayType:c}))):void 0,M=E?g.tsx("ul",{key:"file-list",class:"esri-attachments__items"},F.toArray().map(N=>this.renderFile(N))):void 0;I=E||I?void 0:g.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return g.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",k)},w,M,I,f)};a._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};a._handleFileInputChange=function(c){c=
(c=c.target)&&c.files&&c.files.item(0);this._set("selectedFile",c)};a._submitDeleteAttachment=function(c,t){c.preventDefault();"file"in t?this.deleteFile(t.file):this.deleteAttachment(t)};a._submitAddAttachment=function(c){c.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()};a._submitUpdateAttachment=function(c,t){c.preventDefault();"file"in t?this.updateFile():this.updateAttachment()};a._startEditAttachment=function(c){const {viewModel:t}=this;t.activeFileInfo=null;
t.activeAttachmentInfo=c;t.mode="edit"};a._startEditFile=function(c){const {viewModel:t}=this;t.activeAttachmentInfo=null;t.activeFileInfo=c;t.mode="edit"};a._startAddAttachment=function(){this.viewModel.mode="add"};a._cancelForm=function(c){c.preventDefault();this.viewModel.mode="view"};a._getCSSTransform=function(c){({orientationInfo:c}=c);return!this._supportsImageOrientation&&c?[c.rotation?`rotate(${c.rotation}deg)`:"",c.mirrored?"scaleX(-1)":""].join(" "):""};l._createClass(x,[{key:"abilities",
get:function(){return this.viewModel.abilities},set:function(c){this.viewModel.abilities=c}},{key:"effectiveDisplayType",get:function(){const {displayType:c}=this;return c&&"auto"!==c?c:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(c){this.viewModel.graphic=c}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(c){this._overrideIfSome("label",c)}}]);return x}(d);r.__decorate([J.property()],
O.prototype,"abilities",null);r.__decorate([J.property()],O.prototype,"displayType",void 0);r.__decorate([J.property({readOnly:!0})],O.prototype,"effectiveDisplayType",null);r.__decorate([J.property()],O.prototype,"graphic",null);r.__decorate([J.property()],O.prototype,"label",null);r.__decorate([J.property(),e.messageBundle("esri/widgets/Attachments/t9n/Attachments")],O.prototype,"messages",void 0);r.__decorate([J.property(),e.messageBundle("esri/core/t9n/Units")],O.prototype,"messagesUnits",void 0);
r.__decorate([J.property({readOnly:!0})],O.prototype,"selectedFile",void 0);r.__decorate([J.property({readOnly:!0})],O.prototype,"submitting",void 0);r.__decorate([J.property({readOnly:!0})],O.prototype,"error",void 0);r.__decorate([J.property({type:b})],O.prototype,"viewModel",void 0);r.__decorate([J.property()],O.prototype,"visibleElements",void 0);r.__decorate([q.cast("visibleElements")],O.prototype,"castVisibleElements",null);return O=r.__decorate([v.subclass("esri.widgets.Attachments")],O)})},
"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(p,l,r,n,A,G,L,J){function O(m,e,g){return m.units[e][g]}function q(m,e,g,z=2,H="abbr"){return`${J.formatNumber(e,{minimumFractionDigits:z,maximumFractionDigits:z,signDisplay:0<e?"never":"exceptZero"})} ${O(m,g,H)}`}function v(m,e,g,z=2,H="abbr"){return`${J.formatNumber(e,{minimumFractionDigits:z,maximumFractionDigits:z,signDisplay:"exceptZero"})} ${O(m,
g,H)}`}function d(m,e){const g=JSON.stringify(e);let z=b.get(g);z||(z=new Intl.NumberFormat("en-US",e),b.set(g,z));return/\-?\+?360/.test(z.format(m))?0:m}const b=new Map,h=["B","kB","MB","GB","TB"];p.formatAngleDegrees=function(m,e,g,z,H){H=A.unwrapOr(H,2);var D=r.cyclicalDegrees,x=D.normalize;a:if(m=L.convertUnit(m,e,"degrees"),g===z)g=m;else{switch(z){case "arithmetic":g=-m+90;break a;case "geographic":g=-m-90;break a}g=void 0}D=x.call(D,g,0,!0);H={style:"unit",unitDisplay:"narrow",unit:"degree",
maximumFractionDigits:H,minimumFractionDigits:H,signDisplay:0<D?"never":"exceptZero"};D=d(D,H);return J.formatNumber(D,H)};p.formatDMS=function(m,e,g=2){m=L.convertUnit(m,e,"degrees");e=m-Math.floor(m);m-=e;e*=60;let z=e-Math.floor(e);e-=z;z*=60;return`${m.toFixed()}\u00b0 ${e.toFixed()}' ${z.toFixed(g)}"`};p.formatDecimal=q;p.formatFileSize=function(m,e){let g=0===e?0:Math.floor(Math.log(e)/Math.log(l.ByteSizeUnit.KILOBYTES));g=n.clamp(g,0,h.length-1);e=J.formatNumber(e/l.ByteSizeUnit.KILOBYTES**
g,{maximumFractionDigits:2});return G.replace(m.units.bytes[h[g]],{fileSize:e})};p.formatImperialArea=function(m,e,g,z=2,H="abbr"){const D=L.preferredImperialAreaUnit(e,g);return q(m,L.convertUnit(e,g,D),D,z,H)};p.formatImperialLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredImperialLengthUnit(e,g);return q(m,L.convertUnit(e,g,D),D,z,H)};p.formatImperialRelativeLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredImperialLengthUnit(e,g);return v(m,L.convertUnit(e,g,D),D,z,H)};p.formatImperialRelativeVerticalLength=
function(m,e,g,z=2,H="abbr"){const D=L.preferredImperialVerticalLengthUnit(e,g);return v(m,L.convertUnit(e,g,D),D,z,H)};p.formatImperialVerticalLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredImperialVerticalLengthUnit(e,g);return q(m,L.convertUnit(e,g,D),D,z,H)};p.formatMetricArea=function(m,e,g,z=2,H="abbr"){const D=L.preferredMetricAreaUnit(e,g);return q(m,L.convertUnit(e,g,D),D,z,H)};p.formatMetricLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredMetricLengthUnit(e,g);return q(m,L.convertUnit(e,
g,D),D,z,H)};p.formatMetricRelativeLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredMetricLengthUnit(e,g);return v(m,L.convertUnit(e,g,D),D,z,H)};p.formatMetricRelativeVerticalLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredMetricVerticalLengthUnit(e,g);return v(m,L.convertUnit(e,g,D),D,z,H)};p.formatMetricVerticalLength=function(m,e,g,z=2,H="abbr"){const D=L.preferredMetricVerticalLengthUnit(e,g);return q(m,L.convertUnit(e,g,D),D,z,H)};p.formatRelativeAngleDegrees=function(m,e,g,z,H){g!==
z&&(m=-m);H=A.unwrapOr(H,2);g={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:H,minimumFractionDigits:H,signDisplay:"exceptZero"};m=L.convertUnit(m,e,"degrees")%360;m=d(m,g);return J.formatNumber(m,g)};p.formatRelativeDecimal=v;p.unitName=O;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(p){function l(A){return 32+A.length}function r(A){if(!A)return 0;if(Array.isArray(A)){var G=
A.length;if(0===G||"number"===typeof A[0])A=32+8*G;else{var L=32;for(let J=0;J<G;J++)L+=n(A[J]);A=L}return A}L=32;for(G in A)A.hasOwnProperty(G)&&(L+=n(A[G]));return L}function n(A){switch(typeof A){case "object":return r(A);case "string":return l(A);case "number":return 16;case "boolean":return 4;default:return 8}}p.ByteSizeUnit=void 0;(function(A){A[A.KILOBYTES=1024]="KILOBYTES";A[A.MEGABYTES=1048576]="MEGABYTES";A[A.GIGABYTES=1073741824]="GIGABYTES"})(p.ByteSizeUnit||(p.ByteSizeUnit={}));p.estimateAttributesObjectSize=
function(A){if(!A)return 0;let G=32;for(const L in A)if(A.hasOwnProperty(L)){const J=A[L];switch(typeof J){case "string":G+=l(J);break;case "number":G+=16;break;case "boolean":G+=4}}return G};p.estimateFixedArraySize=function(A,G){return 32+A.length*G};p.estimateNestedObjectSize=r;p.estimateNumberByteSize=function(A){return 16};p.estimateStringByteSize=l;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m){const e={editing:!1,operations:{add:!0,update:!0,delete:!0}},g=A.ofType(b);n=function(z){function H(x){var a=z.call(this,x)||this;a._getAttachmentsPromise=null;a._attachmentLayer=null;a.abilities={...e};a.activeAttachmentInfo=null;a.activeFileInfo=null;a.attachmentInfos=new g;a.fileInfos=new A;a.graphic=null;a.mode="view";a.filesEnabled=!1;a.addHandles(J.watch(()=>a.graphic,()=>a._graphicChanged(),J.initial));return a}p._inheritsLoose(H,z);var D=H.prototype;
D.destroy=function(){this.graphic=this._attachmentLayer=null};D.castAbilities=function(x){return{...e,...x}};D.getAttachments=function(){var x=p._asyncToGenerator(function*(){const {_attachmentLayer:a,attachmentInfos:c}=this;if(!a||"function"!==typeof a.queryAttachments)throw new G("invalid-layer","getAttachments(): A valid layer is required.");const t=this._getObjectId();var u=new h({objectIds:[t],returnMetadata:!0});const C=[];this._getAttachmentsPromise=u=a.queryAttachments(u).then(B=>B[t]||C).catch(()=>
C);this.notifyChange("state");u=yield u;c.removeAll();u.length&&c.addMany(u);this._getAttachmentsPromise=null;this.notifyChange("state");return u});return function(){return x.apply(this,arguments)}}();D.addAttachment=function(){var x=p._asyncToGenerator(function*(a,c=this.graphic){const {_attachmentLayer:t,attachmentInfos:u,abilities:C}=this;if(!c)throw new G("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:c});if(!a)throw new G("invalid-attachment","addAttachment(): An attachment is required.",
{attachment:a});if(!C.operations.add)throw new G("invalid-abilities","addAttachment(): add abilities are required.");if(!t||"function"!==typeof t.addAttachment)throw new G("invalid-layer","addAttachment(): A valid layer is required.");a=yield t.addAttachment(c,a).then(B=>this._queryAttachment(B.objectId,c));u.add(a);return a});return function(a){return x.apply(this,arguments)}}();D.deleteAttachment=function(){var x=p._asyncToGenerator(function*(a){const {_attachmentLayer:c,attachmentInfos:t,graphic:u,
abilities:C}=this;if(!a)throw new G("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:a});if(!C.operations.delete)throw new G("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!c||"function"!==typeof c.deleteAttachments)throw new G("invalid-layer","deleteAttachment(): A valid layer is required.");const B=yield c.deleteAttachments(u,[a.id]).then(()=>a);t.remove(B);return B});return function(a){return x.apply(this,arguments)}}();
D.updateAttachment=function(){var x=p._asyncToGenerator(function*(a,c=this.activeAttachmentInfo){const {_attachmentLayer:t,attachmentInfos:u,graphic:C,abilities:B}=this;if(!a)throw new G("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:a});if(!c)throw new G("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:c});if(!B.operations.update)throw new G("invalid-abilities","updateAttachment(): Update abilities are required.");const F=
u.findIndex(I=>I===c);if(!t||"function"!==typeof t.updateAttachment)throw new G("invalid-layer","updateAttachment(): A valid layer is required.");a=yield t.updateAttachment(C,c.id,a).then(I=>this._queryAttachment(I.objectId));u.splice(F,1,a);return a});return function(a){return x.apply(this,arguments)}}();D.commitFiles=function(){var x=p._asyncToGenerator(function*(){yield Promise.all(this.fileInfos.items.map(a=>this.addAttachment(a.form)));this.fileInfos.removeAll();return this.getAttachments()});
return function(){return x.apply(this,arguments)}}();D.addFile=function(x,a){if(!x||!a)return null;x={file:x,form:a};this.fileInfos.add(x);return x};D.updateFile=function(x,a,c=this.activeFileInfo){if(!x||!a||!c)return null;const t=this.fileInfos.findIndex(u=>c===u);-1<t&&this.fileInfos.splice(t,1,{file:x,form:a});return this.fileInfos.items[t]};D.deleteFile=function(x){const a=this.fileInfos.find(c=>c.file===x);return this.fileInfos.remove(a)??null};D._queryAttachment=function(){var x=p._asyncToGenerator(function*(a,
c){if(!a)throw new G("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:t}=this,u=this._getObjectId(c);a=new h({objectIds:[u],attachmentsWhere:`AttachmentId=${a}`,returnMetadata:!0});return t.queryAttachments(a).then(C=>C[u][0])});return function(a,c){return x.apply(this,arguments)}}();D._getObjectId=function(x=this.graphic){return x?.getObjectId()??null};D._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};D._setAttachmentLayer=
function(){var {graphic:x}=this;this._attachmentLayer=(x=m.getSourceLayer(x))?"scene"===x.type&&L.isSome(x.associatedLayer)?x.associatedLayer:x:null};p._createClass(H,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:x}=this;if(!x)return!1;x=x.layer||x.sourceLayer;return x?.loaded&&"capabilities"in x&&"operations"in x.capabilities&&"supportsResizeAttachments"in x.capabilities.operations&&
x.capabilities.operations.supportsResizeAttachments||!1}}]);return H}(n);l.__decorate([O.property()],n.prototype,"abilities",void 0);l.__decorate([v.cast("abilities")],n.prototype,"castAbilities",null);l.__decorate([O.property()],n.prototype,"activeAttachmentInfo",void 0);l.__decorate([O.property()],n.prototype,"activeFileInfo",void 0);l.__decorate([O.property({readOnly:!0,type:g})],n.prototype,"attachmentInfos",void 0);l.__decorate([O.property()],n.prototype,"fileInfos",void 0);l.__decorate([O.property({type:r})],
n.prototype,"graphic",void 0);l.__decorate([O.property()],n.prototype,"mode",void 0);l.__decorate([O.property({readOnly:!0})],n.prototype,"state",null);l.__decorate([O.property()],n.prototype,"filesEnabled",void 0);l.__decorate([O.property({readOnly:!0})],n.prototype,"supportsResizeAttachments",null);return n=l.__decorate([d.subclass("esri.widgets.Attachments.AttachmentsViewModel")],n)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v){function d(){d=l._asyncToGenerator(function*(y,K){return"function"===typeof y?y.call(null,K):y});return d.apply(this,arguments)}function b(y){return y?ea.test(y):!1}function h(y,K){if(!b(K)||!y)return null;const P=K.replace(ea,"").toLowerCase();let R;y.some(T=>T.name.toLowerCase()===P?(R=T,!0):!1);return R}function m(y,K){return(K=e(K,y))?K.name:y}function e(y,K){return y&&"function"===typeof y.getField?y.getField(K):null}function g({formattedAttributes:y,template:K,
fieldInfoMap:P}){return`${G.replace(G.replace(K,R=>{const T=P.get(R.toLowerCase());return`{${T&&T.fieldName||R}}`}),y).replace(Y,"")}`.trim()}function z(y,K,P=!1){const R=K[y];"string"===typeof R&&(P=(P?encodeURIComponent(R):R).replace(ba,"%27"),K[y]=P)}function H(y,K=!1){const P={...y};Object.keys(P).forEach(R=>z(R,P,K));return P}function D(y,K){return y.replace(Z,(P,R,T)=>(P=e(K,T))?`{${P.name}}`:R)}function x(y,K,P){return(y=D(y,P))?y.replace(ia,(R,T,X)=>{T=`${T||X}`.trim();return G.replace(R,
H(K,T&&"{"!==T[0]))}):y}function a(y,K){var P=K.fieldName,R=c(K.fieldInfos,P)?.clone();const T=K.preventPlacesFormatting;K=K.layer;var X=e(K,P);R&&"date"===X?.type&&(X=R.format||new q,X.dateFormat=X.dateFormat||"short-date-short-time",X.dateTimeFormatOptions=!K?.layer&&"feature"===K?.type&&K.datesInUnknownTimezone||K?.layer&&"map-image"===K.layer?.type&&K.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,R.format=X);R=R&&R.format;if("string"===typeof y&&O.isRasterPixelValueField(P)&&R)return R.formatRasterPixelValue(y);
"string"!==typeof y||!R||null!=R.dateFormat||null==R.places&&null==R.digitSeparator||(P=Number(y),isNaN(P)||(y=P));return"string"===typeof y||null==y||null==R?C(y):T?J.formatNumber(y,{...J.convertNumberFormatToIntlOptions(R),minimumFractionDigits:0,maximumFractionDigits:20}):R.format(y)}function c(y,K){if(y&&y.length&&K){var P=K.toLowerCase(),R=void 0;y.some(T=>T.fieldName&&T.fieldName.toLowerCase()===P?(R=T,!0):!1);return R}}function t({fieldName:y,graphic:K,layer:P}){if(w(y)||!P||"function"!==typeof P.getFeatureType)return null;
const {typeIdField:R}=P;return R&&y===R?(y=P.getFeatureType(K))?y.name:null:null}function u({fieldName:y,value:K,graphic:P,layer:R}){return w(y)||!R||"function"!==typeof R.getFieldDomain?null:(y=R.getFieldDomain(y,{feature:P}))&&"coded-value"===y.type?y.getName(K):null}function C(y){return"string"===typeof y?y.replace(ca,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):y}function B(y){const {value:K,fieldName:P,fieldInfos:R,fieldInfoMap:T,layer:X,graphic:da}=y;return null==K?"":(y=u({fieldName:P,value:K,
graphic:da,layer:X}))||(y=t({fieldName:P,graphic:da,layer:X}))?y:T.get(P.toLowerCase())?a(K,{fieldInfos:R||Array.from(T.values()),fieldName:P,layer:X}):(y=X&&X.fieldsIndex)&&y.isDateField(P)?L.formatDate(K,S):C(K)}function F(y,K){return I.apply(this,arguments)}function I(){I=l._asyncToGenerator(function*(y,K){const {layer:P,graphic:R,outFields:T,objectIds:X,returnGeometry:da,spatialReference:fa}=y;y=X[0];if("number"!==typeof y&&"string"!==typeof y)return U.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",
{layer:P,graphic:R,objectId:y,requiredFields:T}),null;if(!P.capabilities?.operations?.supportsQuery)return U.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:P,graphic:R,requiredFields:T,returnGeometry:da}),null;y=P.createQuery();y.objectIds=X;y.outFields=T?.length?T:[P.objectIdField];y.returnGeometry=!!da;y.returnZ=!!da;y.returnM=!!da;y.outSpatialReference=fa;return(yield P.queryFeatures(y,K)).features[0]});return I.apply(this,arguments)}function E(y){return k.apply(this,
arguments)}function k(){k=l._asyncToGenerator(function*(y){if(!y.expressionInfos?.length)return!1;var K=yield v.loadArcade();({arcadeUtils:{hasGeometryFunctions:K}}=K);return K(y)});return k.apply(this,arguments)}function f(){f=l._asyncToGenerator(function*({graphic:y,popupTemplate:K,layer:P,spatialReference:R},T){if(P&&K&&("function"===typeof P.load&&(yield P.load(T)),y.attributes)){var X=y.attributes[P.objectIdField];if(null!=X){X=[X];var da=yield K.getRequiredFields(P.fieldsIndex),fa=O.featureHasFields(da,
y);da=fa?[]:da;K=K.returnGeometry||(yield E(K));if(!fa||K)if(P=yield F({layer:P,graphic:y,outFields:da,objectIds:X,returnGeometry:K,spatialReference:R},T))P.geometry&&(y.geometry=P.geometry),P.attributes&&(y.attributes={...y.attributes,...P.attributes})}}});return f.apply(this,arguments)}function w(y=""){return y?y.includes("relationships/"):!1}function M({attributes:y,graphic:K,relatedInfo:P,fieldInfos:R,fieldInfoMap:T,layer:X}){y&&K&&P&&Object.keys(K.attributes).forEach(da=>{var fa=(fa={layerId:P.relation.id.toString(),
fieldName:da},`${"relationships/"}${fa.layerId}/${fa.fieldName}`);y[fa]=B({fieldName:fa,fieldInfos:R,fieldInfoMap:T,layer:X,value:K.attributes[da],graphic:K})})}function N({attributes:y,relatedInfo:K,fieldInfoMap:P,fieldInfos:R,layer:T}){y&&K&&(K.relatedFeatures&&K.relatedFeatures&&K.relatedFeatures.forEach(X=>M({attributes:y,graphic:X,relatedInfo:K,fieldInfoMap:P,fieldInfos:R,layer:T})),K.relatedStatsFeatures&&K.relatedStatsFeatures&&K.relatedStatsFeatures.forEach(X=>M({attributes:y,graphic:X,relatedInfo:K,
fieldInfoMap:P,fieldInfos:R,layer:T})))}function Q(y,K,P){return y.find(R=>R!==K&&"feature"===R.type&&R.url===K.url&&R.layerId===P.relatedTableId)}const U=n.getLogger("esri.widgets.Feature.support.featureUtils"),Y=/href=(""|'')/gi,Z=/(\{([^\{\r\n]+)\})/g,ba=/'/g,ea=/^\s*expression\//i,ca=/(\n)/gi,ha=/[\u00A0-\u9999<>&]/gim,ia=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,V=/^(?:mailto:|tel:)/,S=L.convertDateFormatToIntlOptions("short-date-short-time"),W=y=>{if(!y)return!1;y=y.toUpperCase();return y.includes("CURRENT_TIMESTAMP")||
y.includes("CURRENT_DATE")||y.includes("CURRENT_TIME")},aa=({layer:y,method:K,query:P,definitionExpression:R})=>{y.capabilities?.query?.supportsCacheHint&&"attachments"!==K&&(y=A.isSome(P.where)&&P.where,K=A.isSome(P.geometry)&&P.geometry,W(R)||W(y)||"extent"===K?.type||"tile"===P.resultType||(P.cacheHint=!0))};p.applyTextFormattingHTML=C;p.createfieldInfoMap=function(y,K){const P=new Map;y&&y.forEach(R=>{const T=m(R.fieldName,K);R.fieldName=T;P.set(T.toLowerCase(),R)});return P};p.findRelatedLayer=
function(y,K,P){return y&&K&&P?Q(y.allLayers,K,P)||Q(y.allTables,K,P):null};p.fixTokens=D;p.formatAttributes=function({fieldInfos:y,attributes:K,layer:P,graphic:R,fieldInfoMap:T,relatedInfos:X}){const da={};X?.forEach(fa=>N({attributes:da,relatedInfo:fa,fieldInfoMap:T,fieldInfos:y,layer:P}));Object.keys(K).forEach(fa=>{da[fa]=B({fieldName:fa,fieldInfos:y,fieldInfoMap:T,layer:P,value:K[fa],graphic:R})});return da};p.formatEditInfo=function(y,K){const {creatorField:P,creationDateField:R,editorField:T,
editDateField:X}=y;if(K){y=K[X];if("number"===typeof y)return K=K[T],{type:"edit",date:L.formatDate(y,S),user:K};y=K[R];return"number"===typeof y?(K=K[P],{type:"create",date:L.formatDate(y,S),user:K}):null}};p.formatValueToFieldInfo=a;p.getAllFieldInfos=function(y){const K=[];if(!y)return K;const {fieldInfos:P,content:R}=y;P&&K.push(...P);if(!R||!Array.isArray(R))return K;R.forEach(T=>{"fields"===T.type&&(T=T&&T.fieldInfos)&&K.push(...T)});return K};p.getFieldInfo=c;p.getFieldInfoLabel=function(y,
K){return(K=h(K,y?.fieldName))?K.title||null:y?y.label||y.fieldName:null};p.getFixedFieldName=m;p.getFixedFieldNames=function(y,K){return y&&y.map(P=>m(P,K))};p.getSourceLayer=function(y){if(!A.isNone(y))return y.get("sourceLayer")||y.get("layer")};p.graphicCallback=function(y,K){return d.apply(this,arguments)};p.htmlEntities=function(y){return y.replace(ha,K=>`&#${K.charCodeAt(0)};`)};p.isExpressionField=b;p.isRelatedField=w;p.preLayerQueryCallback=({query:y,layer:K,method:P})=>{aa({layer:K,method:P,
query:y,definitionExpression:`${K.definitionExpression} ${K.serviceDefinitionExpression}`})};p.preRequestCallback=({queryPayload:y,layer:K,method:P})=>{aa({layer:K,method:P,query:y,definitionExpression:`${K.definitionExpression} ${K.serviceDefinitionExpression}`})};p.queryUpdatedFeature=function(y,K){return f.apply(this,arguments)};p.shouldOpenInNewTab=function(y=""){if(y)return!V.test(y.trim().toLowerCase())};p.substituteAttributes=g;p.substituteFieldsInLinksAndAttributes=function({attributes:y,
globalAttributes:K,layer:P,text:R,expressionAttributes:T,fieldInfoMap:X}){return R?g({formattedAttributes:K,template:x(R,{...K,...T,...y},P),fieldInfoMap:X}):""};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(p,l){p.getIconPath=function(r){const n=l.getAssetUrl("esri/themes/base/images/files/");return r?"text/plain"===r?`${n}text-32.svg`:"application/pdf"===
r?`${n}pdf-32.svg`:"text/csv"===r?`${n}csv-32.svg`:"application/gpx+xml"===r?`${n}gpx-32.svg`:"application/x-dwf"===r?`${n}cad-32.svg`:"application/postscript"===r||"application/json"===r||"text/xml"===r||"model/vrml"===r?`${n}code-32.svg`:"application/x-zip-compressed"===r||"application/x-7z-compressed"===r||"application/x-gzip"===r||"application/x-tar"===r||"application/x-gtar"===r||"application/x-bzip2"===r||"application/gzip"===r||"application/x-compress"===r||"application/x-apple-diskimage"===
r||"application/x-rar-compressed"===r||"application/zip"===r?`${n}zip-32.svg`:r.includes("image/")?`${n}image-32.svg`:r.includes("audio/")?`${n}sound-32.svg`:r.includes("video/")?`${n}video-32.svg`:r.includes("msexcel")||r.includes("ms-excel")||r.includes("spreadsheetml")?`${n}excel-32.svg`:r.includes("msword")||r.includes("ms-word")||r.includes("wordprocessingml")?`${n}word-32.svg`:r.includes("powerpoint")||r.includes("presentationml")?`${n}report-32.svg`:`${n}generic-32.svg`:`${n}generic-32.svg`};
p.isSupportedImage=function(r){r=r.toLowerCase();return"image/bmp"===r||"image/emf"===r||"image/exif"===r||"image/gif"===r||"image/x-icon"===r||"image/jpeg"===r||"image/png"===r||"image/tiff"===r||"image/x-wmf"===r};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(p,l,r,n,A,G,L){n=function(J){function O(q){q=J.call(this,q)||this;q.description=null;q.title=null;return q}p._inheritsLoose(O,J);return O}(L);l.__decorate([r.property()],n.prototype,"description",void 0);l.__decorate([r.property()],n.prototype,"title",void 0);return n=l.__decorate([G.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],n)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q){n=function(v){function d(h,m){h=v.call(this,h,m)||this;h.description=null;h.headingLevel=2;h.title=null;return h}p._inheritsLoose(d,v);var b=d.prototype;b.render=function(){return q.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};b.renderTitle=function(){const {title:h}=this;return h?q.tsx(J.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},h):null};b.renderDescription=function(){const {description:h}=
this;return h?q.tsx("div",{key:"description",class:"esri-feature-element-info__description"},h):null};return d}(L);l.__decorate([r.property()],n.prototype,"description",void 0);l.__decorate([r.property()],n.prototype,"headingLevel",void 0);l.__decorate([r.property()],n.prototype,"title",void 0);return n=l.__decorate([G.subclass("esri.widgets.Feature.support.FeatureElementInfo")],n)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(p,l,r,n){const A={heading:"esri-widget__heading"};p.CSS=A;p.Heading=function(G,L){const J=l.clamp(Math.ceil(G.level),1,6),O=`h${J}`;delete G.level;return n.tsx(O,{...G,class:r.classes(A.heading,G.class),role:"heading","aria-level":String(J)},L)};p.incrementHeadingLevel=function(G,L=1){return l.clamp(Math.ceil(G+L),1,6)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v){n=function(d){function b(m,e){m=d.call(this,m,e)||this;m.viewModel=null;m._addTargetToAnchors=g=>{Array.from(g.querySelectorAll("a")).forEach(z=>{O.shouldOpenInNewTab(z.href)&&!z.hasAttribute("target")&&z.setAttribute("target","_blank")})};return m}p._inheritsLoose(b,d);var h=b.prototype;h.renderLoading=function(){return v.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},v.tsx("div",{class:"esri-feature-content__loader"}))};h.renderCreated=function(){const m=
this.viewModel?.created;return m?m instanceof HTMLElement?v.tsx("div",{key:m,bind:m,afterCreate:this._attachToNode}):q.isWidget(m)?v.tsx("div",{key:m},!m.destroyed&&m.render()):v.tsx("div",{key:m,innerHTML:m,afterCreate:this._addTargetToAnchors}):null};h.render=function(){return v.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};h._attachToNode=function(m){m.appendChild(this)};p._createClass(b,[{key:"creator",get:function(){return this.viewModel.creator},
set:function(m){this.viewModel.creator=m}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(m){this.viewModel.graphic=m}}]);return b}(L);l.__decorate([r.property()],n.prototype,"creator",null);l.__decorate([r.property()],n.prototype,"graphic",null);l.__decorate([r.property({type:J})],n.prototype,"viewModel",void 0);return n=l.__decorate([G.subclass("esri.widgets.Feature.FeatureContent")],n)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v){n=function(d){function b(m){var e=d.call(this,m)||this;e._loadingPromise=null;e.created=null;e.creator=null;e.destroyer=null;e.graphic=null;e.handles.add(G.watch(()=>e.creator,g=>{e._destroyContent();e._createContent(g)},G.initial));return e}p._inheritsLoose(b,d);var h=b.prototype;h.destroy=function(){this._destroyContent()};h._destroyContent=function(){const {created:m,graphic:e,destroyer:g}=this;m&&(v.graphicCallback(g,{graphic:e}).catch(()=>null),this._set("created",
null))};h._createContent=function(){var m=p._asyncToGenerator(function*(e){var {graphic:g}=this;this._loadingPromise=e=v.graphicCallback(e,{graphic:g}).catch(()=>null);this.notifyChange("state");g=yield e;e===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",g))});return function(e){return m.apply(this,arguments)}}();p._createClass(b,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return b}(A.HandleOwnerMixin(n));l.__decorate([L.property({readOnly:!0})],
n.prototype,"created",void 0);l.__decorate([L.property()],n.prototype,"creator",void 0);l.__decorate([L.property()],n.prototype,"destroyer",void 0);l.__decorate([L.property({type:r})],n.prototype,"graphic",void 0);l.__decorate([L.property({readOnly:!0})],n.prototype,"state",null);return n=l.__decorate([q.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],n)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h){A=function(m){function e(z,H){z=m.call(this,z,H)||this;z.viewModel=new d;return z}p._inheritsLoose(e,m);var g=e.prototype;g.initialize=function(){this.addHandles(r.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),r.initial))};g.destroy=function(){this._destroyContentWidget()};g.renderLoading=function(){return h.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},h.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};g.render=function(){const {state:z}=this.viewModel;return h.tsx("div",{class:"esri-feature-expression"},"loading"===z?this.renderLoading():"disabled"===z?null:this._contentWidget?.render())};g._destroyContentWidget=function(){const {_contentWidget:z}=this;z&&(z.viewModel=null,z.destroy());this._contentWidget=null};g._setupExpressionWidget=function(){const {contentElementViewModel:z,contentElement:H}=this.viewModel,D=H?.type;this._destroyContentWidget();this._contentWidget=
z?"fields"===D?new q({viewModel:z}):"media"===D?new v({viewModel:z}):"text"===D?new O({viewModel:z}):null:null;this.scheduleRender()};return e}(J);l.__decorate([n.property({type:d})],A.prototype,"viewModel",void 0);return A=l.__decorate([L.subclass("esri.widgets.Feature.FeatureExpression")],A)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h){A=function(m){function e(z,H){z=m.call(this,z,H)||this;z._featureElementInfo=null;z.viewModel=new O;z.messages=null;z.messagesURIUtils=null;return z}p._inheritsLoose(e,m);var g=e.prototype;g.initialize=function(){this._featureElementInfo=new q;this.addHandles(r.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),r.initial))};g.destroy=function(){this._featureElementInfo.destroy()};g.renderFieldInfo=function(z,H){var {attributes:D}=
this.viewModel;const x=z.fieldName,a=z.label||x;D=D?null==D[x]?"":D[x]:"";z=!(!z.format||!z.format.dateFormat);D="number"!==typeof D||z?v.autoLink(this.messagesURIUtils,D):this._forceLTR(D);z={["esri-feature-fields__field-data--date"]:z};return h.tsx("tr",{key:`fields-element-info-row-${x}-${H}`},h.tsx("th",{key:`fields-element-info-row-header-${x}-${H}`,class:"esri-feature-fields__field-header",innerHTML:a}),h.tsx("td",{key:`fields-element-info-row-data-${x}-${H}`,class:this.classes("esri-feature-fields__field-data",
z),innerHTML:D}))};g.renderFields=function(){const {formattedFieldInfos:z}=this.viewModel;return z?.length?h.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},h.tsx("tbody",null,z.map((H,D)=>this.renderFieldInfo(H,D)))):null};g.render=function(){return h.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};g._setupFeatureElementInfo=function(){const {description:z,title:H}=this;this._featureElementInfo.set({description:z,title:H})};
g._forceLTR=function(z){return`&lrm;${z}`};p._createClass(e,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(z){this.viewModel.attributes=z}},{key:"description",get:function(){return this.viewModel.description},set:function(z){this.viewModel.description=z}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(z){this.viewModel.expressionInfos=z}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(z){this.viewModel.fieldInfos=
z}},{key:"title",get:function(){return this.viewModel.title},set:function(z){this.viewModel.title=z}}]);return e}(J);l.__decorate([n.property()],A.prototype,"attributes",null);l.__decorate([n.property()],A.prototype,"description",null);l.__decorate([n.property()],A.prototype,"expressionInfos",null);l.__decorate([n.property()],A.prototype,"fieldInfos",null);l.__decorate([n.property()],A.prototype,"title",null);l.__decorate([n.property({type:O,nonNullable:!0})],A.prototype,"viewModel",void 0);l.__decorate([n.property(),
b.messageBundle("esri/widgets/Feature/t9n/Feature")],A.prototype,"messages",void 0);l.__decorate([n.property(),b.messageBundle("esri/widgets/support/t9n/uriUtils")],A.prototype,"messagesURIUtils",void 0);return A=l.__decorate([L.subclass("esri.widgets.Feature.FeatureFields")],A)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q){r=function(v){function d(b){b=v.call(this,b)||this;b.attributes=null;b.expressionInfos=null;b.description=null;b.fieldInfos=null;b.title=null;return b}p._inheritsLoose(d,v);p._createClass(d,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:b,fieldInfos:h}=this,m=[];h?.forEach(e=>{if(!e.hasOwnProperty("visible")||e.visible)e=e.clone(),e.label=q.getFieldInfoLabel(e,b),m.push(e)});return m}}]);return d}(r);l.__decorate([n.property()],r.prototype,"attributes",
void 0);l.__decorate([n.property({type:[J]})],r.prototype,"expressionInfos",void 0);l.__decorate([n.property()],r.prototype,"description",void 0);l.__decorate([n.property({type:[O]})],r.prototype,"fieldInfos",void 0);l.__decorate([n.property({readOnly:!0})],r.prototype,"formattedFieldInfos",null);l.__decorate([n.property()],r.prototype,"title",void 0);return r=l.__decorate([L.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],r)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(p,l){function r(A){let G=null;n.some(L=>{L.pattern.test(A)&&(G=L);return!!G});return G}const n=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];p.autoLink=function(A,G){if("string"!==typeof G||!G)return G;const L=r(G);if(!L)return G;const J=G.match(L.pattern);
A=l.replace(l.replace(L.label,{messages:A,hierPart:J&&J[2]}),{appName:L.appName});return G.replace(L.pattern,`<a${L.target?` target="${L.target}"`:""} href="$1"${"_blank"===L.target?' rel\x3d"noreferrer"':""}>${A}</a>`)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z){G=function(H){function D(a,c){var t=H.call(this,a,c)||this;t._refreshTimer=null;t._refreshIntervalInfo=null;t._featureElementInfo=null;t.viewModel=new v;t.messages=null;t._getChartDependencies=function(){var u=p._asyncToGenerator(function*(C){const B=yield h.loadChartsModule(),{destroyed:F,viewModel:I}=p._assertThisInitialized(t);if(!F&&I&&C){var {activeMediaInfo:E}=I,k=yield t._getRendererColors(B);t._renderChart({chartDiv:C,mediaInfo:E,chartsModule:B,
colorMap:k})}});return function(C){return u.apply(this,arguments)}}();return t}p._inheritsLoose(D,H);var x=D.prototype;x.initialize=function(){this._featureElementInfo=new d;this.addHandles([n.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),n.initial),n.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),n.initial)])};x.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};
x.render=function(){return g.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};x.renderMedia=function(){const {formattedMediaInfoCount:a}=this.viewModel;return a?g.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};x.renderImageMediaInfo=function(a){var {_refreshIntervalInfo:c}=this;
const {activeMediaInfoIndex:t,formattedMediaInfoCount:u}=this.viewModel,{value:C,refreshInterval:B,altText:F,title:I,type:E}=a,{sourceURL:k,linkURL:f}=C;a=b.shouldOpenInNewTab(f)?"_blank":"_self";const w="_blank"===a?"noreferrer":"";c=B?c:null;c=g.tsx("img",{alt:F||I,key:`media-${E}-${t}-${u}-${c?c.timestamp:0}`,src:c?c.sourceURL:k});return(a=f?g.tsx("a",{title:I,href:f,rel:w,target:a},c):null)?a:c};x.renderChartMediaInfo=function(a){const {activeMediaInfoIndex:c,formattedMediaInfoCount:t}=this.viewModel;
return g.tsx("div",{key:`media-${a.type}-${c}-${t}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};x.renderMediaInfoType=function(){const {activeMediaInfo:a}=this.viewModel;return a?"image"===a.type?this.renderImageMediaInfo(a):a.type.includes("chart")?this.renderChartMediaInfo(a):null:null};x.renderMediaInfo=function(){var {activeMediaInfo:a}=this.viewModel;if(!a)return null;const c=a.title?g.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",
innerHTML:a.title}):null;a=a.caption?g.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:a.caption}):null;return g.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},g.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),c,a)};x.renderMediaPageButton=function(a){if(2>this.viewModel.formattedMediaInfoCount)return null;const c=(a="previous"===a)?this.messages.previous:this.messages.next,t=a?this.classes("esri-feature-media__button",
"esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),u=a?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),C=a?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl",
"esri-icon-left-triangle-arrow");return g.tsx("button",{type:"button",key:a?"media-previous":"media-next",title:c,"aria-label":c,tabIndex:0,class:t,bind:this,onclick:a?this._previous:this._next},g.tsx("span",{"aria-hidden":"true",class:u}),g.tsx("span",{"aria-hidden":"true",class:C}))};x._setupFeatureElementInfo=function(){const {description:a,title:c}=this;this._featureElementInfo.set({description:a,title:c})};x._next=function(){this.viewModel.next()};x._previous=function(){this.viewModel.previous()};
x._getRendererColors=function(){var a=p._asyncToGenerator(function*(c){const {am4core:t}=c,u=new Map;c=this.viewModel?.layer?.renderer;if(!c)return u;const C=yield O.getColorsFromRenderer(c);C.delete("default");if(!Array.from(C.values()).every(B=>1===B?.length))return u;u.set("default-line-value",t.color({r:50,g:50,b:50,a:1}));Array.from(C.keys()).forEach(B=>{B&&u.set(B,t.color(C.get(B)[0].toCss(!0)))});return u});return function(c){return a.apply(this,arguments)}}();x._handleMediaKeyup=function(a){const c=
r.eventKey(a);"ArrowLeft"===c&&(a.stopPropagation(),this.viewModel.previous());"ArrowRight"===c&&(a.stopPropagation(),this.viewModel.next())};x._renderChart=function(a){const {abilities:c}=this.viewModel,{chartsModule:t,chartDiv:u,mediaInfo:C,colorMap:B}=a,{value:F,type:I}=C,{am4core:E}=t,k=h.getColorSet(E);z.isDarkTheme()&&E.useTheme(t.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");c.chartAnimation&&!f.matches?E.useTheme(t.am4themes_animated):E.unuseTheme(t.am4themes_animated);
E.useTheme(function(w){w instanceof E.ColorSet&&k&&(w.list=k)});a="pie-chart"===I?this._createPieChart(a):this._createXYChart(a);u.setAttribute("aria-label",C.altText||C.title);a.data=F.series.map(w=>({tooltip:w.tooltip,value:w.value,color:B.get(w.fieldName)})).filter(w=>"pie-chart"===I?0<w.value:!0)};x._customizeChartTooltip=function(a,c){a.label.wrap=!0;a.label.maxWidth=200;a.autoTextColor=!1;a.getFillFromObject=!1;a.label.fill=c.color("#ffffff");a.background.fill=c.color({r:0,g:0,b:0,a:.7})};x._createPieChart=
function(a){const {chartDiv:c,chartsModule:t}=a,{am4core:u,am4charts:C}=t;a=u.create(c,C.PieChart);a.rtl=m.isRTL(this.container);const B=a.series.push(new C.PieSeries);B.labels.template.disabled=!0;B.ticks.template.disabled=!0;B.dataFields.value="value";B.dataFields.category="tooltip";this._customizeChartTooltip(B.tooltip,u);B.slices.template.propertyFields.fill="color";B.slices.template.propertyFields.stroke="color";return a};x._getMinSeriesValue=function(a){let c=0;a.forEach(t=>c=Math.min(t.value,
c));return c};x._createColumnChart=function(a,c){const {chartsModule:t,mediaInfo:u}=c;({value:c}=u);const {am4core:C,am4charts:B}=t,F=a.xAxes.push(new B.CategoryAxis);F.dataFields.category="tooltip";F.renderer.labels.template.disabled=!0;this._customizeChartTooltip(F.tooltip,C);F.tooltip.events.on("sizechanged",()=>{F.tooltip.dy=-F.tooltip.contentHeight});var I=a.yAxes.push(new B.ValueAxis);const E=I.renderer.labels.template;I.renderer.minLabelPosition=.05;I.renderer.maxLabelPosition=.95;I.min=this._getMinSeriesValue(c.series);
this._customizeChartTooltip(I.tooltip,C);E.wrap=!0;I=a.series.push(new B.ColumnSeries);I.dataFields.valueY="value";I.dataFields.categoryX="tooltip";I.columns.template.propertyFields.fill="color";I.columns.template.propertyFields.stroke="color";a.cursor=new B.XYCursor;15<c.series.length&&(a.scrollbarX=new C.Scrollbar)};x._createBarChart=function(a,c){const {chartsModule:t,mediaInfo:u}=c;({value:c}=u);const {am4core:C,am4charts:B}=t,F=a.yAxes.push(new B.CategoryAxis);F.dataFields.category="tooltip";
F.renderer.inversed=!0;F.renderer.labels.template.disabled=!0;this._customizeChartTooltip(F.tooltip,C);F.tooltip.events.on("sizechanged",()=>{F.tooltip.dx=F.tooltip.contentWidth});var I=a.xAxes.push(new B.ValueAxis);const E=I.renderer.labels.template;I.renderer.minLabelPosition=.05;I.renderer.maxLabelPosition=.95;I.min=this._getMinSeriesValue(c.series);this._customizeChartTooltip(I.tooltip,C);E.wrap=!0;I=a.series.push(new B.ColumnSeries);I.dataFields.valueX="value";I.dataFields.categoryY="tooltip";
I.columns.template.propertyFields.fill="color";I.columns.template.propertyFields.stroke="color";a.cursor=new B.XYCursor;15<c.series.length&&(a.scrollbarY=new C.Scrollbar)};x._createLineChart=function(a,c){const {chartsModule:t,mediaInfo:u,colorMap:C}=c;({value:c}=u);const {am4core:B,am4charts:F}=t,I=a.xAxes.push(new F.CategoryAxis);I.dataFields.category="tooltip";I.renderer.labels.template.disabled=!0;this._customizeChartTooltip(I.tooltip,B);I.tooltip.events.on("sizechanged",()=>{I.tooltip.dy=-I.tooltip.contentHeight});
var E=a.yAxes.push(new F.ValueAxis),k=E.renderer.labels.template;E.renderer.minLabelPosition=.05;E.renderer.maxLabelPosition=.95;E.min=this._getMinSeriesValue(c.series);this._customizeChartTooltip(E.tooltip,B);k.wrap=!0;E=a.series.push(new F.LineSeries);E.dataFields.categoryX="tooltip";E.dataFields.valueY="value";E.strokeWidth=1;if(k=C.get("default-line-value"))E.stroke=k;E=E.bullets.push(new F.CircleBullet);E.propertyFields.fill="color";E.propertyFields.stroke="color";a.cursor=new F.XYCursor;15<
c.series.length&&(a.scrollbarX=new B.Scrollbar)};x._createXYChart=function(a){const {chartDiv:c,chartsModule:t,mediaInfo:u}=a,{type:C}=u,{am4core:B,am4charts:F}=t,I=B.create(c,F.XYChart);I.rtl=m.isRTL(this.container);"column-chart"===C&&this._createColumnChart(I,a);"bar-chart"===C&&this._createBarChart(I,a);"line-chart"===C&&this._createLineChart(I,a);return I};x._clearMediaRefreshTimer=function(){const {_refreshTimer:a}=this;a&&(clearTimeout(a),this._refreshTimer=null)};x._updateMediaInfoTimestamp=
function(a){const c=Date.now();this._refreshIntervalInfo={timestamp:c,sourceURL:this._getImageSource(a,c)};this.scheduleRender()};x._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:a}=this.viewModel;a&&"image"===a.type&&a.refreshInterval&&this._setRefreshTimeout(a)};x._setRefreshTimeout=function(a){const {refreshInterval:c,value:t}=a;c&&(a=6E4*c,this._updateMediaInfoTimestamp(t.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(t.sourceURL)},
a))};x._getImageSource=function(a,c){const t=a.includes("?")?"\x26":"?",[u,C=""]=a.split("#");return`${u}${t}timestamp=${c}${C?"#":""}${C}`};p._createClass(D,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(a){this.viewModel.attributes=a}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(a){this.viewModel.activeMediaInfoIndex=a}},{key:"description",get:function(){return this.viewModel.description},set:function(a){this.viewModel.description=
a}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(a){this.viewModel.fieldInfoMap=a}},{key:"layer",get:function(){return this.viewModel.layer},set:function(a){this.viewModel.layer=a}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(a){this.viewModel.mediaInfos=a}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(a){this.viewModel.popupTemplate=a}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},
set:function(a){this.viewModel.relatedInfos=a}},{key:"title",get:function(){return this.viewModel.title},set:function(a){this.viewModel.title=a}}]);return D}(q);l.__decorate([A.property()],G.prototype,"attributes",null);l.__decorate([A.property()],G.prototype,"activeMediaInfoIndex",null);l.__decorate([A.property()],G.prototype,"description",null);l.__decorate([A.property()],G.prototype,"fieldInfoMap",null);l.__decorate([A.property()],G.prototype,"layer",null);l.__decorate([A.property()],G.prototype,
"mediaInfos",null);l.__decorate([A.property()],G.prototype,"popupTemplate",null);l.__decorate([A.property()],G.prototype,"relatedInfos",null);l.__decorate([A.property()],G.prototype,"title",null);l.__decorate([A.property({type:v})],G.prototype,"viewModel",void 0);l.__decorate([A.property(),e.messageBundle("esri/widgets/Feature/t9n/Feature")],G.prototype,"messages",void 0);return G=l.__decorate([J.subclass("esri.widgets.Feature.FeatureMedia")],G)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d){function b(a,c,t){return h.apply(this,arguments)}function h(){h=l._asyncToGenerator(function*(a,c,t){A.getOrCreateMapValue(a,c,()=>[]).push(...t)});return h.apply(this,arguments)}function m(){m=l._asyncToGenerator(function*(a){const c=new Map;if(!a)return c;if("visualVariables"in a&&a.visualVariables){var t=a.visualVariables.filter(C=>"color"===C.type);for(var u of t)t=(yield v.getRampStops(u)).map(C=>C.color),yield b(c,u.field||u.valueExpression,t)}if("heatmap"===
a.type)u=d.getHeatmapRampStops(a).map(C=>C.color),yield b(c,a.field||a.valueExpression,u);else if("pie-chart"===a.type){for(const C of a.attributes)yield b(c,C.field||C.valueExpression,[C.color]);yield b(c,"default",[a?.othersCategory?.color,q.getColorFromSymbol(a.backgroundFillSymbol,null)])}else if("dot-density"===a.type){for(const C of a.attributes)yield b(c,C.field||C.valueExpression,[C.color]);yield b(c,"default",[a.backgroundColor])}else if("unique-value"===a.type)if("predominance"===a.authoringInfo?.type)for(const C of a.uniqueValueInfos??
[])yield b(c,C.value.toString(),[q.getColorFromSymbol(C.symbol,null)]);else{u=(a.uniqueValueInfos??[]).map(E=>q.getColorFromSymbol(E.symbol,null));const {field:C,field2:B,field3:F,valueExpression:I}=a;if(C||I)yield b(c,C||I,u);B&&(yield b(c,B,u));F&&(yield b(c,F,u))}else if("class-breaks"===a.type){u=a.classBreakInfos.map(F=>q.getColorFromSymbol(F.symbol,null));const {field:C,valueExpression:B}=a;yield b(c,C??B,u)}else"simple"===a.type&&(yield b(c,"default",[q.getColorFromSymbol(a.symbol,null)]));
"defaultSymbol"in a&&a.defaultSymbol&&(yield b(c,"default",[q.getColorFromSymbol(a.defaultSymbol,null)]));c.forEach((C,B)=>{C=r.unique(C.filter(Boolean),(F,I)=>JSON.stringify(F)===JSON.stringify(I));c.set(B,C)});return c});return m.apply(this,arguments)}function e(a){let c=a.minValue,t=a.maxValue;const u=a.isFirstBreak?"":H.gt+" ";a="percent-of-total"===a.normalizationType?H.pct:"";c=null==c?"":J.format(c);t=null==t?"":J.format(t);return u+c+a+" "+H.ld+" "+t+a}function g(a,c){return"normalizationField"in
a&&a.normalizationField?{type:"normalized-field",field:a.field,normalizationField:a.normalizationField}:"field"in a&&a.field?{type:"field",field:a.field}:"valueExpression"in a&&a.valueExpression?{type:"expression",expression:a.valueExpression,title:a.valueExpressionTitle,returnType:c}:null}const z=n.getLogger("esri.renderers.support.utils"),H={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},D={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},x={millisecond:"long-month-day-year-long-time",
second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};n=L.convertDateFormatToIntlOptions("short-date");p.calculateDateFormatInterval=function(a){a=a.map(B=>new Date(B));const c=a.length;let t=Infinity,u=null;for(let B=0;B<c-1;B++){const F=a[B];let I=Infinity,E=null;for(let k=B+1;k<c;k++){var C=a[k];C=F.getFullYear()!==C.getFullYear()&&"year"||F.getMonth()!==C.getMonth()&&
"month"||F.getDate()!==C.getDate()&&"day"||F.getHours()!==C.getHours()&&"hour"||F.getMinutes()!==C.getMinutes()&&"minute"||F.getSeconds()!==C.getSeconds()&&"second"||"millisecond";const f=D[C];f<I&&(I=f,E=C)}I<t&&(t=I,u=E)}return u};p.createClassBreakLabel=e;p.createColorStops=function(a){const {values:c,colors:t,labelIndexes:u,isDate:C,dateFormatOptions:B}=a;return c.map((F,I)=>{var E=null;if(!u||u.includes(I)){let k;if(k=C?L.formatDate(F,B):J.format(F))E="",0===I?E=H.lt+" ":I===c.length-1&&(E=H.gt+
" "),E+=k}return new O({value:F,color:t[I],label:E})})};p.createUniqueValueLabel=function(a){const {value:c,domain:t,fieldInfo:u,dateFormatInterval:C}=a;a=String(c);const B=t&&"codedValues"in t&&t.codedValues?t.getName(c):null;B?a=B:"number"===typeof c&&(a=u&&"date"===u.type?L.formatDate(c,C&&L.convertDateFormatToIntlOptions(x[C])):J.format(c));return a};p.getAttribute=g;p.getAttributes=function(a,c){const t=[];if("class-breaks"===a.type||"heatmap"===a.type)t.push(g(a,"number"));else if("unique-value"===
a.type){var u=a.authoringInfo;if(u&&"relationship"===u.type){if(u.field1&&u.field2){var C=u.field2.field;const B=u.field2.normalizationField;t.push(g({field:u.field1.field,normalizationField:u.field1.normalizationField}));t.push(g({field:C,normalizationField:B}))}}else C=a.uniqueValueInfos?.[0],u=null,C&&C.value&&(C=typeof a.uniqueValueInfos[0].value,"string"===C||"number"===C)&&(u=C),t.push(g(a,u)),[a.field2,a.field3].forEach(B=>B&&t.push({type:"field",field:B}))}else"attributes"in a&&a.attributes?.forEach(B=>
t.push(g(B,"number")));(a=c?c(a):"visualVariables"in a?a.visualVariables:null)&&a.forEach(B=>t.push(g(B,"number")));return r.unique(t.filter(G.isSome),(B,F)=>"field"===B.type&&"field"===F.type?B.field===F.field:"normalized-field"===B.type&&"normalized-field"===F.type?B.field===F.field&&B.normalizationField===F.normalizationField:"expression"===B.type&&"expression"===F.type?B.expression===F.expression:!1)};p.getColorsFromRenderer=function(a){return m.apply(this,arguments)};p.setLabelsForClassBreaks=
function(a){const c=a.classBreakInfos,t=a.normalizationType;let u=[];if(c&&c.length)if("standard-deviation"===a.classificationMethod)z.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(a.round){u.push(c[0].minValue);for(const C of c)u.push(C.maxValue);u=J.round(u);c.forEach((C,B)=>{C.label=e({minValue:0===B?u[0]:u[B],maxValue:u[B+1],isFirstBreak:0===B,normalizationType:t})})}else c.forEach((C,B)=>{C.label=e({minValue:C.minValue,
maxValue:C.maxValue,isFirstBreak:0===B,normalizationType:t})})};p.timelineDateFormatOptions=n;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(p,l,r){function n(v,d){return v-d}function A(v,d){let b;b=Number(v.toFixed(d));b<v?v=b+1/10**d:(v=b,b-=1/10**d);b=Number(b.toFixed(d));v=Number(v.toFixed(d));return[b,v]}function G(v,d,b,h,m){v=J(v,d,b,h);d=
null==v.next||v.next<=m;return(null==v.previous||v.previous<=m)&&d||v.previous+v.next<=2*m}function L(v){v=String(v);var d=v.match(O);if(d&&d[1])return{integer:d[1].split("").length,fractional:d[3]?d[3].split("").length:0};if(v.toLowerCase().includes("e")&&(d=v.split("e"),v=d[0],d=d[1],v&&d)){v=Number(v);d=Number(d);const b=0<d;b||(d=Math.abs(d));v=L(v);b?(v.integer+=d,v.fractional=d>v.fractional?0:v.fractional-d):(v.fractional+=d,v.integer=d>v.integer?1:v.integer-d);return v}return{integer:0,fractional:0}}
function J(v,d,b,h){const m={previous:null,next:null};if(null!=b){const e=v-b;m.previous=Math.floor(Math.abs(100*(d-b-e)/e))}null!=h&&(v=h-v,m.next=Math.floor(Math.abs(100*(h-d-v)/v)));return m}const O=/^-?(\d+)(\.(\d+))?$/i,q={maximumFractionDigits:20};p.format=function(v){return r.formatNumber(v,q)};p.numDigits=L;p.percentChange=J;p.round=function(v,d={}){v=v.slice(0);const {tolerance:b=2,strictBounds:h=!1,indexes:m=v.map((g,z)=>z)}=d;m.sort(n);for(d=0;d<m.length;d++){const g=m[d],z=v[g],H=0===
g?null:v[g-1],D=g===v.length-1?null:v[g+1],x=L(z).fractional;if(x){let a=0,c=!1;for(var e=void 0;a<=x&&!c;)e=A(z,a),e=h&&0===d?e[1]:e[0],c=G(z,e,H,D,b),a++;c&&(v[g]=e)}}return v};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b){function h(k){k=k.symbolLayers;if(!k)return null;let f=null;k.forEach(w=>{if("object"!==w.type||null==w.resource?.href)f="water"===w.type?J.unwrap(w.color):J.isSome(w.material)?J.unwrap(w.material.color):null});return f?new n(f):null}function m(k,f){if(null==f||null==k)return k;k=k.toRgba();k[3]*=f;return new n(k)}function e(k,f,w){if(k=k.symbolLayers){var M=N=>{N=J.isSome(N)?N:null;f=f??N??(null!=w?E:null);return m(f,w)};k.forEach(N=>{if("object"!==N.type||null==
N.resource?.href||f)if("water"===N.type)N.color=M(N.color);else{var Q=J.isSome(N.material)?N.material.color:null;Q=M(Q);J.isNone(N.material)?N.material=new b.Symbol3DMaterial({color:Q}):N.material.color=Q;null!=w&&"outline"in N&&J.isSome(N.outline)&&J.isSome(N.outline.color)&&(N.outline.color=m(N.outline.color,w))}})}}function g(k,f){return z.apply(this,arguments)}function z(){z=r._asyncToGenerator(function*(k,f){(k=k.symbolLayers)&&(yield G.forEach(k,function(){var w=r._asyncToGenerator(function*(M){return H(M,
f)});return function(M){return w.apply(this,arguments)}}()))});return z.apply(this,arguments)}function H(k,f){return D.apply(this,arguments)}function D(){D=r._asyncToGenerator(function*(k,f){switch(k.type){case "extrude":k.size="number"===typeof f[2]?f[2]:0;break;case "icon":case "line":case "text":f=x(f);J.isSome(f)&&(k.size=f);break;case "path":const w=t(f,q.ONES,[k.width,void 0,k.height]);k.width=B(f[0],k.width,1,w);k.height=B(f[2],k.height,1,w);break;case "object":yield a(k,f)}});return D.apply(this,
arguments)}function x(k){for(const f of k)if("number"===typeof f)return f;return null}function a(k,f){return c.apply(this,arguments)}function c(){c=r._asyncToGenerator(function*(k,f){const {resourceSize:w,symbolSize:M}=yield u(k),N=t(f,w,M);k.width=B(f[0],M[0],w[0],N);k.depth=B(f[1],M[1],w[1],N);k.height=B(f[2],M[2],w[2],N)});return c.apply(this,arguments)}function t(k,f,w){for(let M=0;3>M;M++){const N=k[M];switch(N){case "symbol-value":return k=w[M],null!=k?k/f[M]:1;case "proportional":break;default:if(N&&
f[M])return N/f[M]}}return 1}function u(k){return C.apply(this,arguments)}function C(){C=r._asyncToGenerator(function*(k){const f=yield(yield new Promise((Y,Z)=>p(["./symbolLayerUtils"],Y,Z))).computeObjectLayerResourceSize(k,10),{width:w,height:M,depth:N}=k;k=[w,N,M];let Q=1;for(var U=0;3>U;U++){const Y=k[U];if(null!=Y){Q=Y/f[U];break}}for(U=0;3>U;U++)null==k[U]&&(k[U]=f[U]*Q);return{resourceSize:f,symbolSize:k}});return C.apply(this,arguments)}function B(k,f,w,M){switch(k){case "proportional":return w*
M;case "symbol-value":return null!=f?f:w;default:return k}}function F(){F=r._asyncToGenerator(function*(k,f){if(k&&f){if(A.isSymbol3D(k))return g(k,f);if(A.isSymbol2D(k)&&(f=x(f),!J.isNone(f)))switch(k.type){case "simple-marker":k.size=f;break;case "picture-marker":const w=k.width/k.height;1<w?(k.width=f,k.height=f*w):(k.width=f*w,k.height=f);break;case "simple-line":k.width=f;break;case "text":k.font.size=f}}});return F.apply(this,arguments)}const I=/\/resource\/(.*?)\.svg$/,E=new n("white");l.applyColorToSymbol=
function(k,f,w){if(k&&(f||null!=w))if(f&&(f=new n(f)),A.isSymbol3D(k))e(k,f,w);else if(A.isSymbol2D(k)){if(f=f??k.color)k.color=m(f,w);null!=w&&"outline"in k&&k.outline&&k.outline.color&&(k.outline.color=m(k.outline.color,w))}};l.applyOpacityToColor=m;l.applyRotationToSymbol=function(k,f,w){k&&null!=f&&(A.isSymbol3D(k)?(k=k.symbolLayers)&&k.forEach(M=>{if(M&&"object"===M.type)switch(w){case "tilt":M.tilt=f;break;case "roll":M.roll=f;break;default:M.heading=f}}):!A.isSymbol2D(k)||"simple-marker"!==
k.type&&"picture-marker"!==k.type&&"text"!==k.type||(k.angle=f))};l.applySizesToSymbol=function(k,f){return F.apply(this,arguments)};l.getCSSFilterFromEffectList=function(k){if(!k)return null;k=k.effects.filter(f=>"bloom"!==f.type).map(f=>f.toJSON());return v.effectFunctionsFromJSON(k)};l.getColorFromSymbol=function(k,f){if(!k)return null;let w=null;A.isSymbol3D(k)?w=h(k):A.isSymbol2D(k)&&(w=k.color?new n(k.color):null);return w?m(w,f):null};l.getIconHref=function(k,f){f=J.unwrapOrThrow(f.resource).href;
return!L("esri-canvas-svg-support")&&k.styleOrigin&&I.test(f)?f.replace(I,"/resource/png/$1.png"):f};l.getSymbolOutlineSize=function(k){if(!k)return 0;if(A.isSymbol3D(k)){{const f=k.symbolLayers&&k.symbolLayers.length;f?(k=k.symbolLayers.getItemAt(f-1),k="outline"in k?J.get(k,"outline","size"):void 0):k=void 0}return J.isSome(k)?k:0}return O.px2pt(d.getStroke(k)?.width)};l.isVolumetricSymbol=function(k){if(J.isNone(k)||!("symbolLayers"in k)||J.isNone(k.symbolLayers))return!1;switch(k.type){case "point-3d":return k.symbolLayers.some(f=>
"object"===f.type);case "line-3d":return k.symbolLayers.some(f=>"path"===f.type);case "polygon-3d":return k.symbolLayers.some(f=>"object"===f.type||"extrude"===f.type);default:return!1}};l.symbolHasExtrudeSymbolLayer=function(k){return J.isSome(k)&&"polygon-3d"===k.type&&k.symbolLayers.some(f=>"extrude"===f.type)};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(p,l,r,n,A,G,L){function J(v){if(!v)return null;let d=null;switch(v.type){case "simple-fill":case "picture-fill":case "simple-marker":d=J(v.outline);break;case "simple-line":const b=G.pt2px(v.width);null!=v.style&&"none"!==v.style&&0!==b&&(d={color:v.color,style:q(v.style),width:b,cap:v.cap,join:"miter"===v.join?G.pt2px(v.miterLimit):v.join});break;default:d=null}return d}const O=new A(1E3),q=(()=>{const v={};return d=>{if(v[d])return v[d];const b=d.replace(/-/g,"");return v[d]=b}})();r=new r([128,
128,128]);p.defaultThematicColor=r;p.dekebabifyLineStyle=q;p.getFill=function(v){const d=v.style;let b=null;if(v)switch(v.type){case "simple-marker":"cross"!==d&&"x"!==d&&(b=v.color);break;case "simple-fill":"solid"===d?b=v.color:"none"!==d&&(b={type:"pattern",x:0,y:0,src:l.getAssetUrl(`esri/symbols/patterns/${d}.png`),width:5,height:5});break;case "picture-fill":b={type:"pattern",src:v.url,width:G.pt2px(v.width)*v.xscale,height:G.pt2px(v.height)*v.yscale,x:G.pt2px(v.xoffset),y:G.pt2px(v.yoffset)};
break;case "text":b=v.color;break;case "cim":b=L.getCIMSymbolColor(v)}return b};p.getPatternUrlWithColor=function(v,d){const b=v+"-"+d;return void 0!==O.get(b)?Promise.resolve(O.get(b)):n(v,{responseType:"image"}).then(h=>{h=h.data;const m=h.naturalWidth,e=h.naturalHeight,g=document.createElement("canvas");g.width=m;g.height=e;const z=g.getContext("2d");z.fillStyle=d;z.fillRect(0,0,m,e);z.globalCompositeOperation="destination-in";z.drawImage(h,0,0);h=g.toDataURL();O.put(b,h);return h})};p.getStroke=
J;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(p){return function(){function l(n,A){this._storage=new p.MemCacheStorage;this._storage.maxSize=n;A&&this._storage.registerRemoveFunc("",A)}var r=l.prototype;r.put=function(n,A){this._storage.put(n,A,1,1)};r.pop=function(n){return this._storage.pop(n)};r.get=function(n){return this._storage.get(n)};r.clear=function(){this._storage.clearAll()};
r.destroy=function(){this._storage.destroy()};return l}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(p,l,r){function n(d){d=r.toCIMSymbolJSON(d);if("CIMTextSymbol"===d?.type)return d.height??0;let b=0;if(d?.symbolLayers)for(const h of d.symbolLayers)r.isCIMMarker(h)&&null!=h.size&&h.size>b?b=h.size:r.isCIMStroke(h)&&null!=h.width&&h.width>b?b=h.width:r.isCIMFill(h);return b}function A(d,b,h,m){if(d)if("CIMTextSymbol"===d.type)null!=
d.height&&(d.height*=b);else{if(h&&d.effects)for(const e of d.effects)J(e,b);if(d.symbolLayers)for(const e of d.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":G(e,b,m);break;case "CIMPictureStroke":case "CIMSolidStroke":!m?.preserveOutlineWidth&&e.width&&(e.width*=b);break;case "CIMPictureFill":e.height&&(e.height*=b);e.offsetX&&(e.offsetX*=b);e.offsetY&&(e.offsetY*=b);break;case "CIMHatchFill":A(e.lineSymbol,b,!0,{...m,preserveOutlineWidth:!1}),e.offsetX&&(e.offsetX*=
b),e.offsetY&&(e.offsetY*=b),e.separation&&(e.separation*=b)}}}function G(d,b,h){if(d&&(d.markerPlacement&&L(d.markerPlacement,b),d.offsetX&&(d.offsetX*=b),d.offsetY&&(d.offsetY*=b),d.anchorPoint&&"Absolute"===d.anchorPointUnits&&(d.anchorPoint={x:d.anchorPoint.x*b,y:d.anchorPoint.y*b}),d.size=null!=d.size?d.size*b:0,"CIMVectorMarker"===d.type&&d.markerGraphics))for(const m of d.markerGraphics)d.scaleSymbolsProportionally||A(m.symbol,b,!0,h)}function L(d,b){r.isCIMMarkerStrokePlacement(d)&&d.offset&&
(d.offset*=b);switch(d.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":d.customEndingOffset&&(d.customEndingOffset*=b);d.offsetAlongLine&&(d.offsetAlongLine*=b);if(d.placementTemplate&&d.placementTemplate.length){var h=d.placementTemplate.map(m=>m*b);d.placementTemplate=h}break;case "CIMMarkerPlacementAlongLineVariableSize":d.maxRandomOffset&&(d.maxRandomOffset*=b);d.placementTemplate&&d.placementTemplate.length&&(h=d.placementTemplate.map(m=>m*b),d.placementTemplate=
h);break;case "CIMMarkerPlacementOnLine":d.startPointOffset&&(d.startPointOffset*=b);break;case "CIMMarkerPlacementAtExtremities":d.offsetAlongLine&&(d.offsetAlongLine*=b);break;case "CIMMarkerPlacementAtRatioPositions":d.beginPosition&&(d.beginPosition*=b);d.endPosition&&(d.endPosition*=b);break;case "CIMMarkerPlacementPolygonCenter":d.offsetX&&(d.offsetX*=b);d.offsetY&&(d.offsetY*=b);break;case "CIMMarkerPlacementInsidePolygon":d.offsetX&&(d.offsetX*=b),d.offsetY&&(d.offsetY*=b),d.stepX&&(d.stepX*=
b),d.stepY&&(d.stepY*=b)}}function J(d,b){switch(d.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":d.width&&(d.width*=b);break;case "CIMGeometricEffectBuffer":d.size&&(d.size*=b);break;case "CIMGeometricEffectCut":d.beginCut&&(d.beginCut*=b);d.endCut&&(d.endCut*=b);d.middleCut&&(d.middleCut*=b);break;case "CIMGeometricEffectDashes":d.customEndingOffset&&(d.customEndingOffset*=b);d.offsetAlongLine&&(d.offsetAlongLine*=b);if(d.dashTemplate&&d.dashTemplate.length){const h=d.dashTemplate.map(m=>
m*b);d.dashTemplate=h}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":d.length&&(d.length*=b);break;case "CIMGeometricEffectMove":d.offsetX&&(d.offsetX*=b);d.offsetY&&(d.offsetY*=b);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":d.offset&&(d.offset*=b);break;case "CIMGeometricEffectRegularPolygon":d.radius&&(d.radius*=b);break;case "CIMGeometricEffectTaperedPolygon":d.fromWidth&&(d.fromWidth*=b);d.length&&(d.length*=
b);d.toWidth&&(d.toWidth*=b);break;case "CIMGeometricEffectWave":d.amplitude&&(d.amplitude*=b),d.period&&(d.period*=b)}}function O(d,b){if(d){var h="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===d.type;if(h?.symbolLayers)for(const m of h.symbolLayers)if(!(m.colorLocked||d&&(r.isCIMStroke(m)||r.isCIMMarker(m)&&m.markerPlacement&&r.isCIMMarkerStrokePlacement(m.markerPlacement))))switch(m.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":m.tintColor&&q(b,m.tintColor);
break;case "CIMVectorMarker":m.markerGraphics?.forEach(e=>{O(e.symbol,b)});break;case "CIMSolidStroke":case "CIMSolidFill":q(b,m.color);break;case "CIMHatchFill":O(m.lineSymbol,b)}}}function q(d,b){for(const h of d)if(h.join(".")===b.join("."))return;d.push(b)}function v(d,b,h){if(d){var m="CIMTextSymbol"===d.type?d.symbol:d;d="CIMPolygonSymbol"===m?.type;if(m?.symbolLayers)for(const e of m.symbolLayers)if(!e.colorLocked){if(d)if(h){if({layersToColor:m}=h,(r.isCIMStroke(e)||r.isCIMMarker(e)&&e.markerPlacement&&
r.isCIMMarkerStrokePlacement(e.markerPlacement))&&"fill"===m||r.isCIMFill(e)&&"outline"===m)continue}else if(r.isCIMStroke(e)||r.isCIMMarker(e)&&e.markerPlacement&&r.isCIMMarkerStrokePlacement(e.markerPlacement))continue;m=b.toArray();switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor=m;break;case "CIMVectorMarker":e.markerGraphics?.forEach(g=>{v(g.symbol,b,h)});break;case "CIMSolidStroke":case "CIMSolidFill":e.color=m;break;case "CIMHatchFill":v(e.lineSymbol,
b,h)}}}}p.applyCIMSymbolColor=function(d,b,h){b instanceof l||(b=new l(b));(d=r.toCIMSymbolJSON(d))&&v(d,b,h)};p.applyCIMSymbolRotation=function(d,b,h=!1){d=r.toCIMSymbolJSON(d);h&&0!==b&&(b=360-b);if("CIMTextSymbol"===d?.type)d.angle=b;else if("CIMPointSymbol"===d?.type&&d.symbolLayers){h=b-(d.angle||0);for(const m of d.symbolLayers)if(r.isCIMMarker(m)){let e=m.rotation||0;e=m.rotateClockwise?e-h:e+h;m.rotation=e}d.angle=b}};p.getCIMSymbolColor=function(d){d=r.toCIMSymbolJSON(d);const b=[];O(d,b);
return b.length?new l(r.fromCIMColor(b[0])):null};p.getCIMSymbolRotation=function(d,b=!1){d=r.toCIMSymbolJSON(d);return"CIMTextSymbol"===d?.type||"CIMPointSymbol"===d?.type?(d=d.angle,null!=d&&0!==d&&b?360-d:d??0):0};p.getCIMSymbolSize=n;p.getCIMSymbolType=function(d){d=r.toCIMSymbolJSON(d);if(!d)return null;switch(d.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};p.scaleCIMMarker=G;p.scaleCIMSymbol=A;p.scaleCIMSymbolTo=function(d,b,h){if(d){var m=r.toCIMSymbolJSON(d);d=n(d);if(0===d){if(m)if("CIMTextSymbol"===m.type)m.height=b;else if(m.symbolLayers)for(const e of m.symbolLayers)switch(e.type){case "CIMPictureMarker":case "CIMVectorMarker":e.size=b;break;case "CIMPictureStroke":case "CIMSolidStroke":e.width=b}}else A(m,b/d,!1,h)}};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(p,l){function r(q){let v=q.length;for(;v--;)if(!" /-,\n".includes(q.charAt(v)))return!1;return!0}function n(q,v){const d=[];var b=0;let h=-1;do h=q.indexOf("[",b),h>=b&&(h>b&&(b=q.substr(b,h-b),d.push([b,null,r(b)])),b=h+1,h=q.indexOf("]",b),h>=b&&(h>b&&(b=q.substr(b,h-b),(b=v[b])&&d.push([null,b,!1])),b=h+1));while(-1!==h);b<q.length-1&&(q=q.substr(b),d.push([q,null,r(q)]));return d}function A(q,v,d){let b="",h=null;for(const m of v){const [e,
g,z]=m;if(e)z?h=e:(h&&(b+=h,h=null),b+=e);else if(v=q.attributes[g])h&&(b+=h,h=null),b+=v}return G(b,d)}function G(q,v){"string"!==typeof q&&(q=String(q));switch(v){case "LowerCase":return q.toLowerCase();case "Allcaps":return q.toUpperCase();default:return q}}function L(q){if(!q)return null;switch(q.type){case "CIMPolygonSymbol":if(q.symbolLayers)for(const v of q.symbolLayers)if(q=L(v),null!=q)return q;break;case "CIMTextSymbol":return L(q.symbol);case "CIMSolidFill":return q.color}}function J(q){if(q)switch(q.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(q.symbolLayers)for(const v of q.symbolLayers)if(q=
J(v),void 0!==q)return q;break;case "CIMTextSymbol":return J(q.symbol);case "CIMSolidStroke":case "CIMSolidFill":return q.color}}function O(q){if(q)switch(q.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(q.symbolLayers)for(const v of q.symbolLayers)if(q=O(v),void 0!==q)return q;break;case "CIMTextSymbol":return O(q.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return q.width}}l.adjustTextCase=G;l.analyzeTextParts=n;l.assignTextValuesFromFeature=A;l.attributesToFields=
function(q){return(q?Object.keys(q):[]).map(v=>({name:v,alias:v,type:"string"===typeof q[v]?"esriFieldTypeString":"esriFieldTypeDouble"}))};l.colorToArray=function(q){return[q.r,q.g,q.b,q.a]};l.createLabelOverrideFunction=function(q,v,d){const b=n(v,q);return h=>A(h,b,d)};l.evaluateValueOrFunction=function(q,v,d,b){return"function"===typeof q?q(v,d,b):q};l.fromCIMColor=function(q){return q?{r:q[0],g:q[1],b:q[2],a:q[3]/255}:{r:0,g:0,b:0,a:0}};l.fromCIMFontDecoration=function(q){return q.underline?
"underline":q.strikethrough?"line-through":"none"};l.fromCIMFontStyle=function(q){let v="",d="";q&&(q=q.toLowerCase(),q.includes("italic")?v="italic":q.includes("oblique")&&(v="oblique"),q.includes("bold")?d="bold":q.includes("light")&&(d="lighter"));return{style:v,weight:d}};l.fromCIMHorizontalAlignment=function(q){switch(q){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};l.fromCIMVerticalAlignment=function(q){switch(q){default:return"top";
case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};l.getFillColor=L;l.getFontStyle=function(q){if(!q)return"normal";switch(q.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};l.getFontWeight=function(q){if(!q)return"normal";switch(q.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};l.getStrokeColor=J;l.getStrokeWidth=O;l.getValue=(q,
v=0)=>isNaN(q)||null==q?v:q;l.importGeometryEngine=function(){return new Promise((q,v)=>p(["../../geometry/geometryEngineJSON"],q,v))};l.isCIMFill=function(q){return"CIMGradientFill"===q.type||"CIMHatchFill"===q.type||"CIMPictureFill"===q.type||"CIMSolidFill"===q.type||"CIMWaterFill"===q.type};l.isCIMMarker=function(q){return"CIMVectorMarker"===q.type||"CIMPictureMarker"===q.type||"CIMBarChartMarker"===q.type||"CIMCharacterMarker"===q.type||"CIMPieChartMarker"===q.type||"CIMStackedBarChartMarker"===
q.type};l.isCIMMarkerStrokePlacement=function(q){return"CIMMarkerPlacementAlongLineRandomSize"===q.type||"CIMMarkerPlacementAlongLineSameSize"===q.type||"CIMMarkerPlacementAlongLineVariableSize"===q.type||"CIMMarkerPlacementAtExtremities"===q.type||"CIMMarkerPlacementAtMeasuredUnits"===q.type||"CIMMarkerPlacementAtRatioPositions"===q.type||"CIMMarkerPlacementOnLine"===q.type||"CIMMarkerPlacementOnVertices"===q.type};l.isCIMStroke=function(q){return"CIMGradientStroke"===q.type||"CIMPictureStroke"===
q.type||"CIMSolidStroke"===q.type};l.isGeometryEngineRequired=q=>{if(!q)return!1;for(const v of q)switch(v.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};l.isSVGImage=q=>q.includes("data:image/svg+xml");l.mapCIMSymbolToGeometryType=function(q){if(!q)return null;switch(q.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};
l.resampleHermite=function(q,v,d,b,h,m,e=!0){const g=v/h;d/=m;const z=Math.ceil(g/2),H=Math.ceil(d/2);for(let a=0;a<m;a++)for(let c=0;c<h;c++){const t=4*(c+(e?m-a-1:a)*h);var D=0;let u=0,C=0,B=0,F=0,I=0,E=0;const k=(a+.5)*d;for(let f=Math.floor(a*d);f<(a+1)*d;f++){var x=Math.abs(k-(f+.5))/H;const w=(c+.5)*g;x*=x;for(let M=Math.floor(c*g);M<(c+1)*g;M++){let N=Math.abs(w-(M+.5))/z;D=Math.sqrt(x+N*N);-1<=D&&1>=D&&(D=2*D*D*D-3*D*D+1,0<D&&(N=4*(M+f*v),E+=D*q[N+3],C+=D,255>q[N+3]&&(D=D*q[N+3]/250),B+=D*
q[N],F+=D*q[N+1],I+=D*q[N+2],u+=D))}}b[t]=B/u;b[t+1]=F/u;b[t+2]=I/u;b[t+3]=E/C}};l.toCIMSymbolJSON=function(q){return q.data?.symbol??null};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(p,l,r,n,A){function G(b,h){const m=[],e=b.length-1;5===b.length?m.push(0,2,4):m.push(0,e);return b.map((g,
z)=>m.includes(z)?A.createStopLabel(g,z,e,h):null)}function L(){L=r._asyncToGenerator(function*(b,h,m){let e=!1,g=[],z=[];if(b.stops){var H=b.stops;g=H.map(x=>x.value);(e=H.some(x=>!!x.label))&&(z=H.map(x=>x.label))}H=g[g.length-1];if(null==g[0]&&null==H)return null;const D=e?null:G(g,m);return(yield Promise.all(g.map(function(){var x=r._asyncToGenerator(function*(a,c){const t="opacity"===b.type?yield J(a,b,h):(yield new Promise((u,C)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],
u,C))).getColor(b,a);return{value:a,color:t,label:e?z[c]:D[c]}});return function(a,c){return x.apply(this,arguments)}}()))).reverse()});return L.apply(this,arguments)}function J(b,h){return O.apply(this,arguments)}function O(){O=r._asyncToGenerator(function*(b,h,m=d){m=new n(m);b=(yield new Promise((e,g)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],e,g))).getOpacity(h,b);null!=b&&(m.a=b);return m});return O.apply(this,arguments)}function q(b,h){const {startIndex:m,endIndex:e,
weight:g}=v(b,h);if(m===e)return h[m].color;b=n.blendColors(h[m].color,h[e].color,g);return new n(b)}function v(b,h){let m=0,e=h.length-1;h.some((g,z)=>{if(b<g.value)return e=z,!0;m=z;return!1});return{startIndex:m,endIndex:e,weight:(b-h[m].value)/(h[e].value-h[m].value)}}const d=new n([64,64,64]);l.getColorFromPointCloudStops=q;l.getRampStops=function(b,h,m){return L.apply(this,arguments)};l.getRampStopsForPointCloud=function(b){let h=!1,m=[],e=[];m=b.map(H=>H.value);(h=b.some(H=>!!H.label))&&(e=
b.map(H=>H.label));const g=m[m.length-1];if(null==m[0]&&null==g)return null;const z=h?null:G(m,!1);return m.map((H,D)=>{const x=q(H,b);return{value:H,color:x,label:h?e[D]:z[D]}}).reverse()};l.getStrectchRampStops=function(b,h){let m=[];if(b&&"multipart"===b.type)b.colorRamps.reverse().forEach((e,g)=>{0===g?m.push({value:h.max,color:new n(e.toColor),label:"high"}):m.push({value:null,color:new n(e.toColor),label:""});g===b.colorRamps.length-1?m.push({value:h.min,color:new n(e.fromColor),label:"low"}):
m.push({value:null,color:new n(e.fromColor),label:""})});else{let e,g;b&&"algorithmic"===b.type?(e=b.fromColor,g=b.toColor):(e=[0,0,0,1],g=[255,255,255,1]);m=[{value:h.max,color:new n(g),label:"high"},{value:h.min,color:new n(e),label:"low"}]}return m};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(p,l,r,n,A,G,L){function J(d){return O.apply(this,arguments)}function O(){O=r._asyncToGenerator(function*(d){if(!("visualVariables"in d&&d.visualVariables))return null;d=d.visualVariables.find(m=>"color"===m.type);if(!d)return null;var b=null,h=null;if(d.stops){if(1===d.stops.length)return d.stops[0].color;b=d.stops[0].value;h=d.stops[d.stops.length-1].value}b+=(h-b)/2;({getColor:h}=yield new Promise((m,e)=>p(["../../../renderers/visualVariables/support/visualVariableUtils"],m,e)));return h(d,
b)});return O.apply(this,arguments)}function q(){q=r._asyncToGenerator(function*(d,b){const h=d.trailCap,m=d.trailWidth||1;d=b||(yield J(d))||d.color;return new L({cap:h,color:d,width:m})});return q.apply(this,arguments)}const v=A.convertDateFormatToIntlOptions("short-date");l.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];l.SPECIAL_CHARS_GREATER_THAN="\x3e";l.SPECIAL_CHARS_LESS_THAN="\x3c";l.createStopLabel=function(d,b,h,m){let e="";0===b?e="\x3c ":b===h&&(e="\x3e ");b=null;b=m?A.formatDate(d,v):G.format(d);return e+b};l.getMedianColor=J;l.getSymbolForFlowRenderer=function(d,b){return q.apply(this,arguments)};Object.defineProperties(l,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(p,l){p.getHeatmapRampStops=function(r){if(!r.colorStops)return[];const n=[...r.colorStops].filter(G=>0<G.color?.a);let A=n.length-1;if(n&&n[0]){const G=n[A];G&&1!==G.ratio&&(n.push(new l({ratio:1,color:G.color})),A++)}return n.map((G,L)=>{let J="";0===L?J=r.legendOptions?.minLabel||"low":L===A&&(J=r.legendOptions?.maxLabel||
"high");return{color:G.color,label:J,ratio:G.ratio}}).reverse()};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v){const d={chartAnimation:!0};r=function(b){function h(e){e=b.call(this,e)||this;e.abilities={...d};e.activeMediaInfoIndex=0;e.attributes=null;e.description=null;e.fieldInfoMap=null;e.formattedAttributes=null;e.expressionAttributes=null;e.layer=null;e.mediaInfos=null;e.popupTemplate=null;e.relatedInfos=null;e.title=null;return e}p._inheritsLoose(h,b);var m=h.prototype;m.castAbilities=function(e){return{...d,...e}};m.setActiveMedia=function(e){this._setContentElementMedia(e)};
m.next=function(){this._pageContentElementMedia(1)};m.previous=function(){this._pageContentElementMedia(-1)};m._setContentElementMedia=function(e){const {formattedMediaInfoCount:g}=this;this.activeMediaInfoIndex=(e+g)%g};m._pageContentElementMedia=function(e){const {activeMediaInfoIndex:g}=this;this._setContentElementMedia(g+e)};m._formatMediaInfos=function(){const {attributes:e,mediaInfos:g,formattedAttributes:z,expressionAttributes:H,fieldInfoMap:D,layer:x}=this;return g?.map(a=>{a=a?.clone();if(!a)return null;
a.title=q.substituteFieldsInLinksAndAttributes({attributes:e,fieldInfoMap:D,globalAttributes:z,expressionAttributes:H,layer:x,text:a.title});a.caption=q.substituteFieldsInLinksAndAttributes({attributes:e,fieldInfoMap:D,globalAttributes:z,expressionAttributes:H,layer:x,text:a.caption});a.altText=q.substituteFieldsInLinksAndAttributes({attributes:e,fieldInfoMap:D,globalAttributes:z,expressionAttributes:H,layer:x,text:a.altText});if("image"===a.type){var {value:c}=a;this._setImageValue({value:c,formattedAttributes:z,
layer:x});return a.value.sourceURL?a:void 0}return"pie-chart"===a.type||"line-chart"===a.type||"column-chart"===a.type||"bar-chart"===a.type?({value:c}=a,this._setChartValue({value:c,chartType:a.type,attributes:e,formattedAttributes:z,layer:x,expressionAttributes:H}),a):null}).filter(Boolean)};m._setImageValue=function(e){const {fieldInfoMap:g}=this,{value:z,formattedAttributes:H,layer:D}=e,{linkURL:x,sourceURL:a}=z;a&&(e=q.fixTokens(a,D),z.sourceURL=q.substituteAttributes({formattedAttributes:H,
template:e,fieldInfoMap:g}));x&&(e=q.fixTokens(x,D),z.linkURL=q.substituteAttributes({formattedAttributes:H,template:e,fieldInfoMap:g}))};m._setChartValue=function(e){const {value:g,attributes:z,formattedAttributes:H,chartType:D,layer:x,expressionAttributes:a}=e,{popupTemplate:c,relatedInfos:t}=this,{fields:u,normalizeField:C}=g;g.fields=q.getFixedFieldNames(u,x);C&&(g.normalizeField=q.getFixedFieldName(C,x));if(u.some(F=>!!(null!=H[F]||q.isRelatedField(F)&&t.size))){var B=c?.fieldInfos;u.forEach(F=>
{q.isRelatedField(F)?g.series=[...g.series,...this._getRelatedChartInfos({fieldInfos:B,fieldName:F,formattedAttributes:H,chartType:D,value:g})]:(F=this._getChartOption({value:g,attributes:z,chartType:D,formattedAttributes:H,expressionAttributes:a,fieldName:F,fieldInfos:B}),g.series.push(F))})}};m._getRelatedChartInfos=function(e){const {fieldInfos:g,fieldName:z,formattedAttributes:H,chartType:D,value:x}=e,a=[];e=v.getRelatedFieldInfo(z);const {layerId:c,fieldName:t}=e;e=this.relatedInfos?.get(c.toString());
if(!e)return a;const {relatedFeatures:u,relation:C}=e;if(!C||!u)return a;({cardinality:e}=C);u.forEach(B=>{const {attributes:F}=B;F&&Object.keys(F).forEach(I=>{I===t&&a.push(this._getChartOption({value:x,attributes:F,formattedAttributes:H,fieldName:z,chartType:D,relatedFieldName:I,fieldInfos:g}))})});return"one-to-many"===e||"many-to-many"===e?a:[a[0]]};m._getTooltip=function({label:e,value:g,chartType:z}){return"pie-chart"===z?`${e}`:`${e}: ${g}`};m._getChartOption=function(e){const {value:g,attributes:z,
formattedAttributes:H,expressionAttributes:D,fieldName:x,relatedFieldName:a,fieldInfos:c,chartType:t}=e,{layer:u,fieldInfoMap:C}=this,{normalizeField:B,tooltipField:F}=g;e=B?q.isRelatedField(B)?z[v.getRelatedFieldInfo(B).fieldName]:z[B]:null;var I=q.isExpressionField(x)&&D&&void 0!==D[x]?D[x]:a&&void 0!==z[a]?z[a]:void 0!==z[x]?z[x]:H[x];e=new O({fieldName:x,value:void 0===I?null:I&&e?I/e:I});if(q.isRelatedField(x)){I=C.get(x.toLowerCase());var E=C.get(F.toLowerCase());e.tooltip=this._getTooltip({label:H[E?.fieldName??
F]??I?.label??I?.fieldName??a,value:H[I?.fieldName??x],chartType:t});return e}E=q.getFieldInfo(c,x);I=q.getFixedFieldName(x,u);E=F&&void 0!==H[F]?H[F]:q.getFieldInfoLabel(E||new J({fieldName:I}),this.popupTemplate?.expressionInfos);e.tooltip=this._getTooltip({label:E,value:H[I],chartType:t});return e};p._createClass(h,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||
[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return h}(r);l.__decorate([n.property()],r.prototype,"abilities",void 0);l.__decorate([G.cast("abilities")],r.prototype,"castAbilities",null);l.__decorate([n.property()],r.prototype,"activeMediaInfoIndex",void 0);l.__decorate([n.property({readOnly:!0})],r.prototype,"activeMediaInfo",null);l.__decorate([n.property()],r.prototype,"attributes",void 0);l.__decorate([n.property()],r.prototype,"description",void 0);
l.__decorate([n.property()],r.prototype,"fieldInfoMap",void 0);l.__decorate([n.property()],r.prototype,"formattedAttributes",void 0);l.__decorate([n.property()],r.prototype,"expressionAttributes",void 0);l.__decorate([n.property({readOnly:!0})],r.prototype,"formattedMediaInfos",null);l.__decorate([n.property()],r.prototype,"layer",void 0);l.__decorate([n.property({readOnly:!0})],r.prototype,"formattedMediaInfoCount",null);l.__decorate([n.property()],r.prototype,"mediaInfos",void 0);l.__decorate([n.property()],
r.prototype,"popupTemplate",void 0);l.__decorate([n.property()],r.prototype,"relatedInfos",void 0);l.__decorate([n.property()],r.prototype,"title",void 0);return r=l.__decorate([L.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],r)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z,H,D,x,a,c,t,u,C,B,F,I,E,k,f,w,M){function N(V,S){if(!S.relationships)return null;let W=null;({relationships:S}=S);S.some(aa=>aa.id===parseInt(V,10)?(W=aa,!0):!1);return W}function Q({originRelationship:V,relationships:S,layerId:W}){let aa;S&&S.some(y=>{`${y.relatedTableId}`===W&&y.id===V.id&&(aa=y);return!!aa});return aa}function U(V,S){S=S.toLowerCase();for(const W in V)if(W.toLowerCase()===S)return V[W];return null}function Y(V,S,W,aa){const y=new k;
y.outFields=["*"];y.relationshipId="number"===typeof S.id?S.id:parseInt(S.id,10);y.objectIds=[V.attributes[W.objectIdField]];return W.queryRelatedFeatures(y,aa)}function Z(V,S,W){let aa=0;const y=[];for(;aa<S.length;)y.push(`${V} IN (${S.slice(aa,W+aa)})`),aa+=W;return y.join(" OR ")}function ba(V,S,W,aa){return ea.apply(this,arguments)}function ea(){ea=l._asyncToGenerator(function*(V,S,W,aa){var y=W.layerId.toString();const {layerInfo:K,relation:P,relatedFields:R,outStatistics:T,url:X,sourceSpatialReference:da}=
S;y=Q({originRelationship:P,relationships:K.relationships,layerId:y});if(y.relationshipTableId&&y.keyFieldInRelationshipTable){W=(yield Y(V,y,W,aa))[V.attributes[W.objectIdField]];if(!W)return null;const fa=W.features.map(ja=>ja.attributes[K.objectIdField]);if(0<T?.length&&K.supportsStatistics)return S=new B,S.where=Z(K.objectIdField,fa,1E3),S.outFields=R,S.outStatistics=T,S.sourceSpatialReference=da,S={features:Promise.resolve(W),statsFeatures:q.executeQueryJSON(X,S)},G.eachAlways(S)}return(y=y?.keyField)?
(W=L.isNumericField(ca(K.fields,y)),V=U(V.attributes,P.keyField),y=W?`${y}=${V}`:`${y}='${V}'`,V=q.executeQueryJSON(X,new B({where:y,outFields:S.relatedFields,sourceSpatialReference:da}),aa),S=S.outStatistics&&0<S.outStatistics.length&&K.supportsStatistics?q.executeQueryJSON(X,new B({where:y,outFields:S.relatedFields,outStatistics:S.outStatistics,sourceSpatialReference:da}),aa):null,aa={features:V},S&&(aa.statsFeatures=S),G.eachAlways(aa)):null});return ea.apply(this,arguments)}function ca(V,S){if(null!=
V){S=S.toLowerCase();for(const W of V)if(W&&W.name.toLowerCase()===S)return W}return null}const ha=A.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),ia=new Map;p.createRelatedInfo=function(V,S){if(V=N(V,S))return{url:`${S.url}/${V.relatedTableId}`,sourceSpatialReference:S.spatialReference,relation:V,relatedFields:[],outStatistics:[]}};p.getDestinationRelation=Q;p.getRelatedFieldInfo=function(V){if(!M.isRelatedField(V))return null;const [S,W]=V.split("/").slice(1);return{layerId:S,fieldName:W}};
p.queryLayerInfos=function({relatedInfos:V,layer:S},W){const aa={};V.forEach((y,K)=>{({relation:y}=y);if(!y)throw K=new n("relation-required","A relation is required on a layer to retrieve related records."),ha.error(K),K;({relatedTableId:y}=y);if("number"!==typeof y)throw K=new n("A related table ID is required on a layer to retrieve related records."),ha.error(K),K;y=`${S.url}/${y}`;const P=ia.get(y),R=P?P:r(y,{query:{f:"json"},signal:W&&W.signal});P||ia.set(y,R);aa[K]=R});return G.eachAlways(aa)};
p.queryRelatedFeatures=function({graphic:V,relatedInfos:S,layer:W},aa){const y={};S.forEach((K,P)=>{K.layerInfo&&(y[P]=ba(V,K,W,aa))});return G.eachAlways(y)};p.setRelatedFeatures=function(V,S){if(S&&V){var {features:W,statsFeatures:aa}=V;V=W&&W.value;S.relatedFeatures=V?V.features:[];V=aa&&aa.value;S.relatedStatsFeatures=V?V.features:[]}};p.updateRelatedInfo=function({relatedInfo:V,fieldName:S,fieldInfo:W}){V.relatedFields.push(S);W.statisticType&&(S=new w({statisticType:W.statisticType,onStatisticField:S,
outStatisticFieldName:S}),V.outStatistics.push(S))};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),function(p,l,r,n,A,G){function L(b){if(!b)return"en-us";if(q.has(b.toLowerCase()))return b.toLowerCase();b=b.split("-")[0].toLowerCase();let h=null;for(const m of q.keys())if(m.startsWith(b)){h=
m;break}return h||"en-us"}function J(){J=r._asyncToGenerator(function*(b=G.getLocale()){b=L(b);if(v&&b===d)return v;v=(new Promise((h,m)=>p(["../../chunks/index"],h,m))).then(h=>h.index);d=b;try{const [h,m]=yield Promise.all([v,q.get(d)()]);d===b&&(h.am4core.options.defaultLocale=m.default);h.am4core.options.suppressWarnings=!0;h.am4core.options.autoDispose=!0}catch{return d=v=null}return v});return J.apply(this,arguments)}n="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var O=[{name:"default",colors:[].concat(n.slice(30,39),n.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const q=new Map([["ar",()=>(new Promise((b,h)=>p(["../../chunks/ar"],b,h))).then(b=>b.ar)],["bg-bg",()=>(new Promise((b,
h)=>p(["../../chunks/bg_BG"],b,h))).then(b=>b.bg_BG)],["bs-ba",()=>(new Promise((b,h)=>p(["../../chunks/bs_BA"],b,h))).then(b=>b.bs_BA)],["ca-es",()=>(new Promise((b,h)=>p(["../../chunks/ca_ES"],b,h))).then(b=>b.ca_ES)],["cs-cz",()=>(new Promise((b,h)=>p(["../../chunks/cs_CZ"],b,h))).then(b=>b.cs_CZ)],["da-dk",()=>(new Promise((b,h)=>p(["../../chunks/da_DK"],b,h))).then(b=>b.da_DK)],["de-de",()=>(new Promise((b,h)=>p(["../../chunks/de_DE"],b,h))).then(b=>b.de_DE)],["de-ch",()=>(new Promise((b,h)=>
p(["../../chunks/de_CH"],b,h))).then(b=>b.de_CH)],["el-gr",()=>(new Promise((b,h)=>p(["../../chunks/el_GR"],b,h))).then(b=>b.el_GR)],["en-us",()=>(new Promise((b,h)=>p(["../../chunks/en_US"],b,h))).then(b=>b.en_US)],["en-ca",()=>(new Promise((b,h)=>p(["../../chunks/en_CA"],b,h))).then(b=>b.en_CA)],["es-es",()=>(new Promise((b,h)=>p(["../../chunks/es_ES"],b,h))).then(b=>b.es_ES)],["et-ee",()=>(new Promise((b,h)=>p(["../../chunks/et_EE"],b,h))).then(b=>b.et_EE)],["fi-fi",()=>(new Promise((b,h)=>p(["../../chunks/fi_FI"],
b,h))).then(b=>b.fi_FI)],["fr-fr",()=>(new Promise((b,h)=>p(["../../chunks/fr_FR"],b,h))).then(b=>b.fr_FR)],["he-il",()=>(new Promise((b,h)=>p(["../../chunks/he_IL"],b,h))).then(b=>b.he_IL)],["hr-hr",()=>(new Promise((b,h)=>p(["../../chunks/hr_HR"],b,h))).then(b=>b.hr_HR)],["hu-hu",()=>(new Promise((b,h)=>p(["../../chunks/hu_HU"],b,h))).then(b=>b.hu_HU)],["id-id",()=>(new Promise((b,h)=>p(["../../chunks/id_ID"],b,h))).then(b=>b.id_ID)],["it-it",()=>(new Promise((b,h)=>p(["../../chunks/it_IT"],b,h))).then(b=>
b.it_IT)],["ja-jp",()=>(new Promise((b,h)=>p(["../../chunks/ja_JP"],b,h))).then(b=>b.ja_JP)],["ko-kr",()=>(new Promise((b,h)=>p(["../../chunks/ko_KR"],b,h))).then(b=>b.ko_KR)],["lt-lt",()=>(new Promise((b,h)=>p(["../../chunks/lt_LT"],b,h))).then(b=>b.lt_LT)],["lv-lv",()=>(new Promise((b,h)=>p(["../../chunks/lv_LV"],b,h))).then(b=>b.lv_LV)],["nb-no",()=>(new Promise((b,h)=>p(["../../chunks/nb_NO"],b,h))).then(b=>b.nb_NO)],["nl-nl",()=>(new Promise((b,h)=>p(["../../chunks/nl_NL"],b,h))).then(b=>b.nl_NL)],
["pl-pl",()=>(new Promise((b,h)=>p(["../../chunks/pl_PL"],b,h))).then(b=>b.pl_PL)],["pt-br",()=>(new Promise((b,h)=>p(["../../chunks/pt_BR"],b,h))).then(b=>b.pt_BR)],["pt-pt",()=>(new Promise((b,h)=>p(["../../chunks/pt_PT"],b,h))).then(b=>b.pt_PT)],["ro-ro",()=>(new Promise((b,h)=>p(["../../chunks/ro_RO"],b,h))).then(b=>b.ro_RO)],["ru-ru",()=>(new Promise((b,h)=>p(["../../chunks/ru_RU"],b,h))).then(b=>b.ru_RU)],["sk-sk",()=>(new Promise((b,h)=>p(["../../chunks/sk_SK"],b,h))).then(b=>b.sk_SK)],["sl-sl",
()=>(new Promise((b,h)=>p(["../../chunks/sl_SL"],b,h))).then(b=>b.sl_SL)],["sr-rs",()=>(new Promise((b,h)=>p(["../../chunks/sr_RS"],b,h))).then(b=>b.sr_RS)],["sv-se",()=>(new Promise((b,h)=>p(["../../chunks/sv_SE"],b,h))).then(b=>b.sv_SE)],["th-th",()=>(new Promise((b,h)=>p(["../../chunks/th_TH"],b,h))).then(b=>b.th_TH)],["tr-tr",()=>(new Promise((b,h)=>p(["../../chunks/tr_TR"],b,h))).then(b=>b.tr_TR)],["uk-ua",()=>(new Promise((b,h)=>p(["../../chunks/uk_UA"],b,h))).then(b=>b.uk_UA)],["vi-vn",()=>
(new Promise((b,h)=>p(["../../chunks/vi_VN"],b,h))).then(b=>b.vi_VN)],["zh-cn",()=>(new Promise((b,h)=>p(["../../chunks/zh_Hans"],b,h))).then(b=>b.zh_Hans)],["zh-hk",()=>(new Promise((b,h)=>p(["../../chunks/zh_Hant"],b,h))).then(b=>b.zh_Hant)],["zh-tw",()=>(new Promise((b,h)=>p(["../../chunks/zh_Hant"],b,h))).then(b=>b.zh_Hant)]]);let v,d;l.getChartLocale=L;l.getColorSet=function(b,h="default"){const m=O.find(e=>e.name===h);return m?m.colors.map(e=>b.color(e)):null};l.loadChartsModule=function(){return J.apply(this,
arguments)};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z,H,D,x,a,c,t){n=function(u){function C(B){var F=u.call(this,B)||this;F._abortController=null;F.expressionInfo=null;F.graphic=null;F.contentElement=null;F.contentElementViewModel=null;F.interceptor=null;F.view=null;F._cancelQuery=()=>{const {_abortController:I}=p._assertThisInitialized(F);I&&I.abort();F._abortController=null};F._createVM=()=>{var I=F.contentElement?.type;F.contentElementViewModel?.destroy();I="fields"===I?new a:"media"===I?new c:"text"===
I?new x:null;F._set("contentElementViewModel",I)};F._compile=p._asyncToGenerator(function*(){F._cancelQuery();const I=new AbortController;F._abortController=I;yield F._compileExpression();F._abortController===I&&(F._abortController=null)});F._compileThrottled=L.throttle(F._compile,1,p._assertThisInitialized(F));F._compileExpression=p._asyncToGenerator(function*(){const {expressionInfo:I,graphic:E,interceptor:k,spatialReference:f,map:w,view:M,_abortController:N}=p._assertThisInitialized(F);if(I&&E&&
f&&w){var Q=yield t.loadArcadeUtils();if(N===F._abortController)if((Q=yield t.createCompiledExpression({arcadeUtils:Q,expressionInfo:I,graphic:E,interceptor:k,map:w,spatialReference:f,view:M}))&&"esri.arcade.Dictionary"===Q.declaredClass){Q=yield Q.castAsJsonAsync(N.signal);var U=Q?.type;Q="media"===U?g.fromJSON(Q):"text"===U?H.fromJSON(Q):"fields"===U?e.fromJSON(Q):null;F._set("contentElement",Q)}else F._set("contentElement",null)}else F._set("contentElement",null)});F.handles.add([G.watch(()=>[F.expressionInfo,
F.graphic,F.map,F.spatialReference,F.view],()=>F._compileThrottled(),G.initial),G.watch(()=>[F.contentElement],()=>F._createVM(),G.initial)]);return F}p._inheritsLoose(C,u);C.prototype.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};p._createClass(C,[{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(B){this._override("spatialReference",B)}},{key:"state",
get:function(){const {_abortController:B,contentElement:F,contentElementViewModel:I}=this;return B?"loading":F||I?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(B){this._override("map",B)}}]);return C}(A.HandleOwnerMixin(n));l.__decorate([J.property()],n.prototype,"_abortController",void 0);l.__decorate([J.property({type:D})],n.prototype,"expressionInfo",void 0);l.__decorate([J.property({type:r})],n.prototype,"graphic",void 0);l.__decorate([J.property({readOnly:!0})],
n.prototype,"contentElement",void 0);l.__decorate([J.property({readOnly:!0})],n.prototype,"contentElementViewModel",void 0);l.__decorate([J.property()],n.prototype,"interceptor",void 0);l.__decorate([J.property()],n.prototype,"spatialReference",null);l.__decorate([J.property({readOnly:!0})],n.prototype,"state",null);l.__decorate([J.property()],n.prototype,"map",null);l.__decorate([J.property()],n.prototype,"view",void 0);return n=l.__decorate([v.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],
n)})},"esri/core/throttle":function(){define(["exports"],function(p){p.throttle=function(l,r,n,A){let G=null,L=1E3;"number"===typeof r?(L=r,A=n):(G=r??null,L=n);let J=0,O;const q=()=>{J=0;l.apply(A,O)};r=(...v)=>{G&&G.apply(A,v);O=v;L?J||(J=setTimeout(q,L)):q()};r.remove=()=>{J&&(clearTimeout(J),J=0)};r.forceUpdate=()=>{J&&(clearTimeout(J),q())};r.hasPendingUpdates=()=>!!J;return r};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),
function(p,l,r,n,A,G,L){function J(H){return`<ul class="esri-widget__list">${H.map(D=>`<li>${"string"===typeof D?L.applyTextFormattingHTML(L.htmlEntities(D)):D}</li>`).join("")}</ul>`}function O(H){return`<table class="esri-widget__table">${H.keys().map(D=>{var x=H.field(D);x="string"===typeof x?L.applyTextFormattingHTML(L.htmlEntities(x)):x;return`<tr><th>${D}</th><td>${x}</td></tr>`}).join("")}</table>`}function q({aggregatedFeatures:H,arcadeUtils:D,featureSetVars:x,context:a,viewInfo:c,map:t,graphic:u,
interceptor:C}){x.forEach(B=>{B=B.toLowerCase();var F={map:t,spatialReference:c.sr,interceptor:C};"$map"===B&&(a.vars[B]=D.convertMapToFeatureSetCollection(F));"$layer"===B&&(a.vars[B]=D.convertFeatureLayerToFeatureSet({layer:u.sourceLayer,spatialReference:c.sr,interceptor:C}));"$datastore"===B&&(a.vars[B]=D.convertServiceUrlToWorkspace({url:u.sourceLayer.url,spatialReference:c.sr,interceptor:C}));if("$aggregatedfeatures"===B){F=u.layer;const {fields:I,objectIdField:E,geometryType:k,spatialReference:f,
displayField:w}=F;F=new G({fields:I,objectIdField:E,geometryType:k,spatialReference:f,displayField:w,...("feature"===F.type?{templates:F.templates,typeIdField:F.typeIdField,types:F.types}:null),source:H});a.vars[B]=D.convertFeatureLayerToFeatureSet({layer:F,spatialReference:c.sr,interceptor:C})}})}function v(){return new Promise((H,D)=>p(["../../../support/arcadeUtils"],H,D))}function d(H){return b.apply(this,arguments)}function b(){b=r._asyncToGenerator(function*({graphic:H,view:D}){const {isAggregate:x,
layer:a}=H;if(!x||!a||"2d"!==D?.type)return[];D=yield D.whenLayerView(a);if(!("createQuery"in D&&"queryFeatures"in D))return[];const c=D.createQuery();c.aggregateIds=[H.getObjectId()];({features:H}=yield D.queryFeatures(c));return H});return b.apply(this,arguments)}function h(H){return m.apply(this,arguments)}function m(){m=r._asyncToGenerator(function*({expressionInfo:H,arcadeUtils:D,interceptor:x,spatialReference:a,map:c,graphic:t,view:u}){if(!H||!H.expression)return null;const C=D.createSyntaxTree(H.expression),
B=g.filter(I=>D.hasVariable(C,I));[u]=yield Promise.all([d({graphic:t,view:u}),D.loadScriptDependencies(C,!0,B)]);const F=D.getViewInfo({spatialReference:a});a=D.createExecContext(t,F);a.interceptor=x;a.useAsync=!0;q({aggregatedFeatures:u,arcadeUtils:D,featureSetVars:B,context:a,viewInfo:F,map:c,graphic:t,interceptor:x});x=D.createFunction(C,a);return D.executeAsyncFunction(x,a).catch(I=>z.error("arcade-execution-error",{error:I,graphic:t,expressionInfo:H}))});return m.apply(this,arguments)}function e(){e=
r._asyncToGenerator(function*({expressionInfos:H,spatialReference:D,graphic:x,interceptor:a,map:c,view:t}){if(!H||!H.length)return{};const u=yield v(),C={};for(const B of H)C[`expression/${B.name}`]=h({expressionInfo:B,arcadeUtils:u,interceptor:a,spatialReference:D,map:c,graphic:x,view:t});H=yield A.eachAlways(C);D={};for(const B in H)x=H[B].value,x="string"===typeof x?L.applyTextFormattingHTML(L.htmlEntities(x)):Array.isArray(x)?J(x):"esri.arcade.Dictionary"===x?.declaredClass?O(x):x,D[B]=x;return D});
return e.apply(this,arguments)}const g=["$datastore","$map","$layer","$aggregatedfeatures"],z=n.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");l.createCompiledExpression=h;l.createCompiledExpressions=function(H){return e.apply(this,arguments)};l.loadArcadeUtils=v;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z){const H={title:!0,description:!0};n=function(D){function x(c,t){var u=D.call(this,c,t)||this;u._featureElementInfo=null;u._relatedFeatureIntersectionObserver=new IntersectionObserver(([C])=>{C?.isIntersecting&&u._increaseFeaturePage()},{root:window.document});u.headingLevel=2;u.viewModel=new b;u.messages=null;u.messagesCommon=null;u.visibleElements={...H};u._increaseFeaturePage=()=>{const {state:C,showAllEnabled:B,relatedFeatures:F,featuresPerPage:I,featurePage:E}=
u.viewModel;"ready"===C&&B&&F.length>=I*E&&u.viewModel.featurePage++};return u}l._inheritsLoose(x,D);var a=x.prototype;a.initialize=function(){this._featureElementInfo=new h;this.addHandles([L.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),L.initial),L.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),L.on(()=>this.viewModel.relatedFeatureViewModels,
"change",()=>this._setupRelatedFeatureViewModels())])};a.loadDependencies=function(){return Promise.all([new Promise((c,t)=>p(["../../chunks/calcite-list"],c,t)),new Promise((c,t)=>p(["../../chunks/calcite-list-item"],c,t)),new Promise((c,t)=>p(["../../chunks/calcite-icon"],c,t)),new Promise((c,t)=>p(["../../chunks/calcite-notice"],c,t))])};a.destroy=function(){this._unobserveRelatedFeatureObserver();this._featureElementInfo=A.destroyMaybe(this._featureElementInfo)};a.castVisibleElements=function(c){return{...H,
...c}};a.renderStickyLoading=function(){return"querying"===this.viewModel.state?g.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};a.renderLoadingIcon=function(){return g.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};a.renderLoading=function(){return g.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())};a.renderShowAllIconNode=
function(){return g.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};a.renderChevronIconNode=function(){const c=m.isRTL(this.container)?"chevron-left":"chevron-right";return g.tsx("calcite-icon",{scale:"s",icon:c,slot:"content-end"})};a.renderRelatedFeature=function(c){var {itemDescriptionFieldName:t}=this.viewModel;const u=c.title;c.description=t&&c.formattedAttributes?.global[t];t="loading"===c.state;return g.tsx("calcite-list-item",{key:c.uid,label:t?`${this.messagesCommon?.loading}\u2026`:
u,description:t?"\u2026":c.description,onclick:()=>this.emit("select-record",{featureViewModel:c})},this.renderChevronIconNode())};a.renderShowAllListItem=function(){return this.displayShowAllButton?g.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};a.renderNoRelatedFeaturesMessage=function(){return g.tsx("calcite-notice",{key:"no-related-features-message",
icon:"information",open:!0,color:"blue",scale:"s",width:"full"},g.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};a.renderFeatureObserver=function(){return g.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};a.renderList=function(){const {relatedFeatureViewModels:c}=this.viewModel;return g.tsx("calcite-list",null,c.toArray().map(t=>this.renderRelatedFeature(t)),this.renderShowAllListItem())};
a.renderRelatedFeatures=function(){const {displayListItems:c}=this,{state:t}=this.viewModel;return g.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===t})},c?this.renderList():"ready"===t?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())};a.renderRelationshipNotFound=function(){return g.tsx("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",
open:!0,color:"red",scale:"s",width:"full"},g.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};a.render=function(){const {state:c}=this.viewModel;return g.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===c?this.renderLoading():"disabled"===c?this.renderRelationshipNotFound():this.renderRelatedFeatures())};a._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:c}=this.viewModel;this.removeHandles("related-feature-viewmodels");
c?.forEach(t=>{this.addHandles(L.watch(()=>[t.title,t.state],()=>this.scheduleRender(),L.initial),"related-feature-viewmodels")});this.scheduleRender()};a._setupFeatureElementInfo=function(){const {headingLevel:c,visibleElements:t}=this;this._featureElementInfo.set({description:t.description&&this.description,title:t.title&&this.title,headingLevel:c})};a._handleRelatedFeatureObserverChange=function(){var c=l._asyncToGenerator(function*(){this._unobserveRelatedFeatureObserver();const {state:t,showAllEnabled:u}=
this.viewModel;yield G.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===t&&u&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)});return function(){return c.apply(this,arguments)}}();a._relatedFeatureIntersectionObserverCreated=function(c){this._relatedFeatureIntersectionObserverNode=c};a._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};
l._createClass(x,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:c,featureCount:t,displayCount:u}=this.viewModel;return!c&&(t>u||0===u)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",get:function(){return this.viewModel.description},set:function(c){this.viewModel.description=c}},{key:"featureCountDescription",get:function(){const {messages:c}=this,{featureCount:t}=this.viewModel;return z.substitute(1===
t?c?.numberRecord:c?.numberRecords,{number:t})}},{key:"title",get:function(){return this.viewModel.title},set:function(c){this.viewModel.title=c}}]);return x}(d);r.__decorate([J.property()],n.prototype,"_relatedFeatureIntersectionObserverNode",void 0);r.__decorate([J.property({readOnly:!0})],n.prototype,"displayShowAllButton",null);r.__decorate([J.property({readOnly:!0})],n.prototype,"displayListItems",null);r.__decorate([J.property()],n.prototype,"description",null);r.__decorate([J.property({readOnly:!0})],
n.prototype,"featureCountDescription",null);r.__decorate([J.property()],n.prototype,"headingLevel",void 0);r.__decorate([J.property()],n.prototype,"title",null);r.__decorate([J.property({type:b})],n.prototype,"viewModel",void 0);r.__decorate([J.property(),e.messageBundle("esri/widgets/Feature/t9n/Feature")],n.prototype,"messages",void 0);r.__decorate([J.property(),e.messageBundle("esri/t9n/common")],n.prototype,"messagesCommon",void 0);r.__decorate([J.property()],n.prototype,"visibleElements",void 0);
r.__decorate([q.cast("visibleElements")],n.prototype,"castVisibleElements",null);return n=r.__decorate([v.subclass("esri.widgets.Feature.FeatureRelationship")],n)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g){n=function(z){function H(x){var a=z.call(this,x)||this;a._queryAbortController=null;a._queryPageAbortController=null;a._queryFeatureCountAbortController=null;a.featuresPerPage=10;a.description=null;a.graphic=null;a.layer=null;a.map=null;a.orderByFields=null;a.featureCount=0;a.relationshipId=null;a.showAllEnabled=!1;a.title=null;a._cancelQuery=()=>{const {_queryAbortController:c}=p._assertThisInitialized(a);c&&c.abort();a._queryAbortController=null};a._cancelQueryFeatureCount=
()=>{const {_queryFeatureCountAbortController:c}=p._assertThisInitialized(a);c&&c.abort();a._queryFeatureCountAbortController=null};a._cancelQueryPage=()=>{const {_queryPageAbortController:c}=p._assertThisInitialized(a);c&&c.abort();a._queryPageAbortController=null};a._queryController=p._asyncToGenerator(function*(){a._cancelQuery();const c=new AbortController;a._queryAbortController=c;yield O.ignoreAbortErrors(a._query());a._queryAbortController===c&&(a._queryAbortController=null)});a._queryFeatureCountController=
p._asyncToGenerator(function*(){a._cancelQueryFeatureCount();const c=new AbortController;a._queryFeatureCountAbortController=c;yield O.ignoreAbortErrors(a._queryFeatureCount());a._queryFeatureCountAbortController===c&&(a._queryFeatureCountAbortController=null)});a._queryPageController=p._asyncToGenerator(function*(){const c=new AbortController;a._queryPageAbortController=c;yield O.ignoreAbortErrors(a._queryPage());a._queryPageAbortController===c&&(a._queryPageAbortController=null)});a._queryThrottled=
v.throttle(a._queryController,100,p._assertThisInitialized(a));a._queryFeatureCountThrottled=v.throttle(a._queryFeatureCountController,100,p._assertThisInitialized(a));a._queryPageThrottled=v.throttle(a._queryPageController,100,p._assertThisInitialized(a));a._query=p._asyncToGenerator(function*(){const {_queryAbortController:c,relatedFeatures:t}=p._assertThisInitialized(a);a._destroyRelatedFeatureViewModels();a.featurePage=1;t.removeAll();t.addMany(a._sliceFeatures(yield a._queryRelatedFeatures({signal:c?.signal})))});
a.handles.add([q.watch(()=>[a.displayCount,a.graphic,a.layer,a.map,a.orderByFieldsFixedCasing,a.relationshipId,a.featuresPerPage,a.showAllEnabled],()=>a._queryThrottled(),q.initial),q.watch(()=>[a.featurePage,a.showAllEnabled],()=>a._queryPageThrottled()),q.watch(()=>[a.layer,a.relationshipId,a.objectId],()=>a._queryFeatureCountThrottled())]);return a}p._inheritsLoose(H,z);var D=H.prototype;D.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();this._cancelQuery();
this._cancelQueryFeatureCount();this._cancelQueryPage()};D._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(x=>!x.destroyed&&x.destroy());this.relatedFeatureViewModels.removeAll()};D._queryFeatureCount=function(){var x=p._asyncToGenerator(function*(){const {layer:a,relatedLayer:c,relationshipId:t,objectId:u,_queryFeatureCountAbortController:C}=this;yield a?.load();if(c&&"number"===typeof u&&a?.capabilities?.queryRelated?.supportsCount){yield c.load();var B=c.createQuery();
B=new e({cacheHint:a.capabilities?.queryRelated?.supportsCacheHint??!1,relationshipId:t,returnGeometry:!1,objectIds:[u],where:B.where});B=yield a.queryRelatedFeaturesCount(B,{signal:C?.signal});this._set("featureCount",B[u]||0)}else this._set("featureCount",0)});return function(){return x.apply(this,arguments)}}();D._sliceFeatures=function(x){const {showAllEnabled:a,displayCount:c}=this;return a?x:c?x.slice(0,c):[]};D._queryPage=function(){var x=p._asyncToGenerator(function*(){const {relatedFeatures:a,
featurePage:c,showAllEnabled:t,_queryPageAbortController:u}=this;!t||2>c||a.addMany(yield this._queryRelatedFeatures({signal:u?.signal}))});return function(){return x.apply(this,arguments)}}();D._queryRelatedFeatures=function(){var x=p._asyncToGenerator(function*(a){const {orderByFieldsFixedCasing:c,showAllEnabled:t,featuresPerPage:u,displayCount:C,layer:B,relationshipId:F,featurePage:I,featureCount:E,relatedLayer:k}=this;yield B?.load();const {relationship:f,objectId:w}=this;if(!f||"number"!==typeof w||
!B?.capabilities?.queryRelated?.supportsPagination)return[];var M=t?((I-1)*u+E)%E:0;const N=t?u:C;if(!k)return[];yield k.load();var Q=k.objectIdField;Q=[...c?.map(ba=>ba.field),Q];const U=c?.map(ba=>`${ba.field} ${ba.order}`),Y=B.capabilities?.queryRelated?.supportsCacheHint||!1,Z=k.createQuery();M=new e({orderByFields:U,start:M,num:N,outFields:Q,cacheHint:Y,relationshipId:F,returnGeometry:!1,objectIds:[w],where:Z.where});a=(yield B.queryRelatedFeatures(M,{signal:a?.signal}))[w]?.features||[];a.forEach(ba=>
ba.sourceLayer=k);return a});return function(a){return x.apply(this,arguments)}}();p._createClass(H,[{key:"featurePage",get:function(){return this._get("featurePage")},set:function(x){const {featuresPerPage:a,featureCount:c}=this;this._set("featurePage",Math.min(Math.max(x,1),Math.ceil(c/a)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:x,relatedLayer:a}=this;return x&&a?.loaded?x.map(c=>{const t=c.clone();c=g.getFixedFieldName(c.field,a);t.field=c;return t}):x}},{key:"itemDescriptionFieldName",
get:function(){return this.orderByFieldsFixedCasing?.[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(x){this._set("displayCount",Math.min(Math.max(x,0),10))}},{key:"objectId",get:function(){return this.graphic?.attributes?.[this.objectIdField]??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new G}},{key:"relatedLayer",get:function(){const {layer:x,
map:a,relationship:c}=this;return x?.loaded?g.findRelatedLayer(a,x,c):null}},{key:"relationship",get:function(){const {relationshipId:x,layer:a}=this;return"number"===typeof x?a?.relationships?.find(({id:c})=>c===x)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new G}},{key:"state",get:function(){const {_queryAbortController:x,_queryFeatureCountAbortController:a,_queryPageAbortController:c,graphic:t,relatedLayer:u}=this;return a?"loading":
x||c?"querying":t&&u?"ready":"disabled"}}]);return H}(A.ClonableMixin(J.IdentifiableMixin(L.HandleOwnerMixin(n))));l.__decorate([d.property()],n.prototype,"_queryAbortController",void 0);l.__decorate([d.property()],n.prototype,"_queryPageAbortController",void 0);l.__decorate([d.property()],n.prototype,"_queryFeatureCountAbortController",void 0);l.__decorate([d.property({value:1})],n.prototype,"featurePage",null);l.__decorate([d.property()],n.prototype,"featuresPerPage",void 0);l.__decorate([d.property({readOnly:!0})],
n.prototype,"orderByFieldsFixedCasing",null);l.__decorate([d.property()],n.prototype,"description",void 0);l.__decorate([d.property({readOnly:!0})],n.prototype,"itemDescriptionFieldName",null);l.__decorate([d.property({value:3})],n.prototype,"displayCount",null);l.__decorate([d.property({type:r})],n.prototype,"graphic",void 0);l.__decorate([d.property()],n.prototype,"layer",void 0);l.__decorate([d.property()],n.prototype,"map",void 0);l.__decorate([d.property({readOnly:!0})],n.prototype,"objectId",
null);l.__decorate([d.property({readOnly:!0})],n.prototype,"objectIdField",null);l.__decorate([d.property()],n.prototype,"orderByFields",void 0);l.__decorate([d.property({readOnly:!0})],n.prototype,"relatedFeatures",null);l.__decorate([d.property({readOnly:!0})],n.prototype,"relatedLayer",null);l.__decorate([d.property({readOnly:!0})],n.prototype,"relationship",null);l.__decorate([d.property({readOnly:!0})],n.prototype,"featureCount",void 0);l.__decorate([d.property({readOnly:!0})],n.prototype,"relatedFeatureViewModels",
null);l.__decorate([d.property()],n.prototype,"relationshipId",void 0);l.__decorate([d.property()],n.prototype,"showAllEnabled",void 0);l.__decorate([d.property({readOnly:!0})],n.prototype,"state",null);l.__decorate([d.property()],n.prototype,"title",void 0);return n=l.__decorate([m.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],n)})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z,H,D,x,a,c,t,u,C){var B;const F={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};A=B=function(I){function E(f){var w=I.call(this,f)||this;w._handles=new G;w._error=null;w._featureAbortController=null;w._graphicChangedThrottled=d.throttle(w._graphicChanged,1,p._assertThisInitialized(w));w._expressionAttributes=null;w._graphicExpressionAttributes=null;w.abilities=
{...F};w.content=null;w.contentViewModels=[];w.description=null;w.defaultPopupTemplateEnabled=!1;w.formattedAttributes=null;w.lastEditInfo=null;w.relatedInfos=new Map;w.title="";w.view=null;w._isAllowedContentType=M=>{const {abilities:N}=p._assertThisInitialized(w);return"attachments"===M.type&&N.attachmentsContent||"custom"===M.type&&N.customContent||"fields"===M.type&&N.fieldsContent||"media"===M.type&&N.mediaContent||"text"===M.type&&N.textContent||"expression"===M.type&&N.expressionContent||"relationship"===
M.type&&N.relationshipContent};w._handles.add(v.watch(()=>[w.graphic,w._effectivePopupTemplate,w.abilities],()=>w._graphicChangedThrottled(),v.initial));return w}p._inheritsLoose(E,I);var k=E.prototype;k.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};k.castAbilities=function(f){return{...F,...f}};k.setActiveMedia=function(f,w){f=this.contentViewModels[f];
f instanceof a&&f.setActiveMedia(w)};k.nextMedia=function(f){f=this.contentViewModels[f];f instanceof a&&f.next()};k.previousMedia=function(f){f=this.contentViewModels[f];f instanceof a&&f.previous()};k._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};k._graphicChanged=function(){var f=p._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:w}=this;if(w){var M=new AbortController;this._featureAbortController=
M;try{yield this._queryFeature({signal:M.signal})}catch(N){q.isAbortError(N)||(this._error=N,J.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:N,graphic:w,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===M&&(this._featureAbortController=null)}});return function(){return f.apply(this,arguments)}}();k._cancelFeatureQuery=function(){const {_featureAbortController:f}=this;f&&f.abort();this._featureAbortController=
null};k._compileContentElement=function(f,w){if("attachments"===f.type)return this._compileAttachments(f,w);if("custom"===f.type)return this._compileCustom(f,w);if("fields"===f.type)return this._compileFields(f,w);if("media"===f.type)return this._compileMedia(f,w);if("text"===f.type)return this._compileText(f,w);if("expression"===f.type)return this._compileExpression(f,w);if("relationship"===f.type)return this._compileRelationship(f,w)};k._compileContent=function(f){this._destroyContentViewModels();
if(this.graphic)return Array.isArray(f)?f.filter(this._isAllowedContentType).map((w,M)=>this._compileContentElement(w,M)):"string"===typeof f?this._compileText(new g({text:f}),0).text:f};k._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(f=>f&&!f.destroyed&&f.destroy());this._set("contentViewModels",[])};k._matchesFeature=function(f,w){f=f?.graphic?.getObjectId();w=w?.getObjectId();return O.isSome(f)&&
O.isSome(w)&&f===w};k._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:f,relatedFeatures:w,map:M}){w?.filter(Boolean).forEach(N=>{f.find(Q=>this._matchesFeature(Q,N))||f.add(new B({abilities:{relationshipContent:!1},map:M,graphic:N}))});f.forEach(N=>{w?.find(Q=>this._matchesFeature(N,Q))||f.remove(N)})};k._setExpressionContentVM=function(f,w){const {formattedAttributes:M}=this,{contentElement:N,contentElementViewModel:Q}=f;f=N?.type;Q&&f&&("fields"===f&&(this._createFieldsFormattedAttributes({contentElement:N,
contentElementIndex:w,formattedAttributes:M}),Q.set(this._createFieldsVMParams(N,w))),"media"===f&&(this._createMediaFormattedAttributes({contentElement:N,contentElementIndex:w,formattedAttributes:M}),Q.set(this._createMediaVMParams(N,w))),"text"===f&&Q.set(this._createTextVMParams(N)))};k._compileRelationship=function(f,w){const {displayCount:M,orderByFields:N,relationshipId:Q,title:U,description:Y}=f,{_sourceLayer:Z,graphic:ba,map:ea}=this,ca=new c({displayCount:M,graphic:ba,orderByFields:N,relationshipId:Q,
layer:Z,map:ea,...this._compileTitleAndDesc({title:U,description:Y})});this.contentViewModels[w]=ca;this._handles.add(v.on(()=>ca.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(ca)),"relationship-view-models");return f};k._compileExpression=function(f,w){const {expressionInfo:M}=f,{graphic:N,map:Q,spatialReference:U,view:Y}=this,Z=new D({expressionInfo:M,graphic:N,interceptor:B.interceptor,map:Q,spatialReference:U,view:Y});this.contentViewModels[w]=Z;this._handles.add(v.watch(()=>
Z.contentElementViewModel,()=>this._setExpressionContentVM(Z,w),v.initial),"content-view-models");return f};k._compileAttachments=function(f,w){const {graphic:M}=this,{description:N,title:Q}=f;this.contentViewModels[w]=new z({graphic:M,...this._compileTitleAndDesc({title:Q,description:N})});return f};k._compileCustom=function(f,w){const {graphic:M}=this,{creator:N,destroyer:Q}=f;this.contentViewModels[w]=new H({graphic:M,creator:N,destroyer:Q});return f};k._compileTitleAndDesc=function({title:f,description:w}){const {_fieldInfoMap:M,
_sourceLayer:N,graphic:Q,formattedAttributes:U,_expressionAttributes:Y}=this,{attributes:Z}=Q,ba=U.global;return{title:u.substituteFieldsInLinksAndAttributes({attributes:Z,fieldInfoMap:M,globalAttributes:ba,expressionAttributes:Y,layer:N,text:f}),description:u.substituteFieldsInLinksAndAttributes({attributes:Z,fieldInfoMap:M,globalAttributes:ba,expressionAttributes:Y,layer:N,text:w})}};k._createFieldsVMParams=function(f,w){const {_effectivePopupTemplate:M,formattedAttributes:N}=this,Q={...N.global,
...N.content[w]};w=(f?.fieldInfos||M?.fieldInfos)?.filter(({fieldName:Z})=>u.isExpressionField(Z)||u.isRelatedField(Z)||Q.hasOwnProperty(Z));const {description:U,title:Y}=f;return{attributes:Q,expressionInfos:M?.expressionInfos,fieldInfos:w,...this._compileTitleAndDesc({title:Y,description:U})}};k._compileFields=function(f,w){const M=f.clone();f=new x(this._createFieldsVMParams(f,w));this.contentViewModels[w]=f;M.fieldInfos=f.formattedFieldInfos.slice(0);return M};k._createMediaVMParams=function(f,
w){const {abilities:M,graphic:N,_fieldInfoMap:Q,formattedAttributes:U,_effectivePopupTemplate:Y,relatedInfos:Z,_sourceLayer:ba,_expressionAttributes:ea}=this,{attributes:ca}=N,{description:ha,mediaInfos:ia,title:V}=f;return{abilities:{chartAnimation:M.chartAnimation},activeMediaInfoIndex:f.activeMediaInfoIndex||0,attributes:ca,layer:ba,fieldInfoMap:Q,formattedAttributes:{...U.global,...U.content[w]},expressionAttributes:ea,mediaInfos:ia,popupTemplate:Y,relatedInfos:Z,...this._compileTitleAndDesc({title:V,
description:ha})}};k._compileMedia=function(f,w){const M=f.clone();f=new a(this._createMediaVMParams(f,w));M.mediaInfos=f.formattedMediaInfos.slice(0);this.contentViewModels[w]=f;return M};k._createTextVMParams=function(f){const {graphic:w,_fieldInfoMap:M,_sourceLayer:N,_expressionAttributes:Q}=this;if(f&&f.text){const {attributes:U}=w;f.text=u.substituteFieldsInLinksAndAttributes({attributes:U,fieldInfoMap:M,globalAttributes:this.formattedAttributes.global,expressionAttributes:Q,layer:N,text:f.text})}return{graphic:w,
creator:f.text}};k._compileText=function(f,w){f=f.clone();this.contentViewModels[w]=new H(this._createTextVMParams(f));return f};k._compileLastEditInfo=function(){const {_effectivePopupTemplate:f,_sourceLayer:w,graphic:M}=this;if(f){var {lastEditInfoEnabled:N}=f,Q=w?.editFieldsInfo;if(N&&Q)return u.formatEditInfo(Q,M.attributes)}};k._compileTitle=function(f){const {_fieldInfoMap:w,_sourceLayer:M,graphic:N,_expressionAttributes:Q}=this,{attributes:U}=N;return u.substituteFieldsInLinksAndAttributes({attributes:U,
fieldInfoMap:w,globalAttributes:this.formattedAttributes.global,expressionAttributes:Q,layer:M,text:f})};k._getTitle=function(){var f=p._asyncToGenerator(function*(){const {_effectivePopupTemplate:w,graphic:M}=this;return u.graphicCallback(w?.title,{graphic:M})});return function(){return f.apply(this,arguments)}}();k._getContent=function(){var f=p._asyncToGenerator(function*(){const {_effectivePopupTemplate:w,graphic:M}=this;return u.graphicCallback(w?.content,{graphic:M})});return function(){return f.apply(this,
arguments)}}();k._queryFeature=function(){var f=p._asyncToGenerator(function*(w){const {_featureAbortController:M,_sourceLayer:N,graphic:Q,_effectivePopupTemplate:U,spatialReference:Y,map:Z,view:ba}=this;if(M===this._featureAbortController&&Q){yield u.queryUpdatedFeature({graphic:Q,popupTemplate:U,layer:N,spatialReference:Y},w);var {content:{value:ea},title:{value:ca}}=yield q.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:w}}=yield q.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(w),
expressionAttributes:t.createCompiledExpressions({expressionInfos:U?.expressionInfos,spatialReference:Y,graphic:Q,map:Z,interceptor:B.interceptor,view:ba})}));M===this._featureAbortController&&Q&&(this._expressionAttributes=w,this._graphicExpressionAttributes={...Q.attributes,...w},this._set("formattedAttributes",this._createFormattedAttributes(ea)),this._set("title",this._compileTitle(ca)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(ea)||null))}});
return function(w){return f.apply(this,arguments)}}();k._createMediaFormattedAttributes=function({contentElement:f,contentElementIndex:w,formattedAttributes:M}){const {_effectivePopupTemplate:N,graphic:Q,relatedInfos:U,_sourceLayer:Y,_fieldInfoMap:Z,_graphicExpressionAttributes:ba}=this;M.content[w]=u.formatAttributes({fieldInfos:N?.fieldInfos,graphic:Q,attributes:{...ba,...f.attributes},layer:Y,fieldInfoMap:Z,relatedInfos:U})};k._createFieldsFormattedAttributes=function({contentElement:f,contentElementIndex:w,
formattedAttributes:M}){if(f.fieldInfos){const {graphic:N,relatedInfos:Q,_sourceLayer:U,_fieldInfoMap:Y,_graphicExpressionAttributes:Z}=this;M.content[w]=u.formatAttributes({fieldInfos:f.fieldInfos,graphic:N,attributes:{...Z,...f.attributes},layer:U,fieldInfoMap:Y,relatedInfos:Q})}};k._createFormattedAttributes=function(f){const {_effectivePopupTemplate:w,graphic:M,relatedInfos:N,_sourceLayer:Q,_fieldInfoMap:U,_graphicExpressionAttributes:Y}=this,Z={global:u.formatAttributes({fieldInfos:w?.fieldInfos,
graphic:M,attributes:Y,layer:Q,fieldInfoMap:U,relatedInfos:N}),content:[]};Array.isArray(f)&&f.forEach((ba,ea)=>{"fields"===ba.type&&this._createFieldsFormattedAttributes({contentElement:ba,contentElementIndex:ea,formattedAttributes:Z});"media"===ba.type&&this._createMediaFormattedAttributes({contentElement:ba,contentElementIndex:ea,formattedAttributes:Z})});return Z};k._checkForRelatedFeatures=function(f){const {graphic:w,_effectivePopupTemplate:M}=this;return this._queryRelatedInfos(w,u.getAllFieldInfos(M),
f)};k._queryRelatedInfos=function(){var f=p._asyncToGenerator(function*(w,M,N){const {relatedInfos:Q,_sourceLayer:U}=this;Q.clear();const Y=O.isSome(U.associatedLayer)?yield U.associatedLayer.load(N):U;if(Y){var Z=M.filter(ca=>ca&&u.isRelatedField(ca.fieldName));if(Z&&Z.length){M.forEach(ca=>this._configureRelatedInfo(ca,Y));var ba=yield C.queryLayerInfos({relatedInfos:Q,layer:Y},N);Object.keys(ba).forEach(ca=>{const ha=Q.get(ca.toString());ca=ba[ca]?.value;ha&&ca&&(ha.layerInfo=ca.data)});var ea=
yield C.queryRelatedFeatures({graphic:w,relatedInfos:Q,layer:Y},N);Object.keys(ea).forEach(ca=>{C.setRelatedFeatures(ea[ca]?.value,Q.get(ca.toString()))})}}});return function(w,M,N){return f.apply(this,arguments)}}();k._configureRelatedInfo=function(f,w){const {relatedInfos:M}=this,N=C.getRelatedFieldInfo(f.fieldName);if(N){var {layerId:Q,fieldName:U}=N;Q&&(w=M.get(Q.toString())||C.createRelatedInfo(Q,w))&&(C.updateRelatedInfo({relatedInfo:w,fieldName:U,fieldInfo:f}),this.relatedInfos.set(Q,w))}};
p._createClass(E,[{key:"_effectivePopupTemplate",get:function(){return O.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return u.createfieldInfoMap(u.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return u.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},
{key:"graphic",set:function(f){this._set("graphic",f?f.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(f){this._override("spatialReference",f)}},{key:"map",get:function(){return this.view?.map||null},set:function(f){this._override("map",f)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return E}(L.IdentifiableMixin(A));A.interceptor=new n.FeatureSetQueryInterceptor(u.preLayerQueryCallback,u.preRequestCallback);
l.__decorate([b.property()],A.prototype,"_error",void 0);l.__decorate([b.property()],A.prototype,"_featureAbortController",void 0);l.__decorate([b.property({readOnly:!0})],A.prototype,"_effectivePopupTemplate",null);l.__decorate([b.property({readOnly:!0})],A.prototype,"_fieldInfoMap",null);l.__decorate([b.property({readOnly:!0})],A.prototype,"_sourceLayer",null);l.__decorate([b.property()],A.prototype,"abilities",void 0);l.__decorate([m.cast("abilities")],A.prototype,"castAbilities",null);l.__decorate([b.property({readOnly:!0})],
A.prototype,"content",void 0);l.__decorate([b.property({readOnly:!0})],A.prototype,"contentViewModels",void 0);l.__decorate([b.property()],A.prototype,"description",void 0);l.__decorate([b.property({type:Boolean})],A.prototype,"defaultPopupTemplateEnabled",void 0);l.__decorate([b.property({readOnly:!0})],A.prototype,"state",null);l.__decorate([b.property({readOnly:!0})],A.prototype,"formattedAttributes",void 0);l.__decorate([b.property({type:r,value:null})],A.prototype,"graphic",null);l.__decorate([b.property({readOnly:!0})],
A.prototype,"lastEditInfo",void 0);l.__decorate([b.property({readOnly:!0})],A.prototype,"relatedInfos",void 0);l.__decorate([b.property()],A.prototype,"spatialReference",null);l.__decorate([b.property({readOnly:!0})],A.prototype,"title",void 0);l.__decorate([b.property()],A.prototype,"map",null);l.__decorate([b.property({readOnly:!0})],A.prototype,"waitingForContent",null);l.__decorate([b.property()],A.prototype,"view",void 0);return A=B=l.__decorate([e.subclass("esri.widgets.FeatureViewModel")],
A)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(p){p.FeatureSetQueryInterceptor=function(l,r){this.preLayerQueryCallback=l;this.preRequestCallback=r;this.preLayerQueryCallback||(this.preLayerQueryCallback=n=>{});this.preRequestCallback||(this.preLayerQueryCallback=n=>{})};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(p){p.CSS=
{iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",
fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),
function(p,l,r,n,A,G,L,J,O,q,v,d){p.FeatureContentMixin=b=>{b=function(h){function m(){var e=h.apply(this,arguments)||this;e.renderNodeContent=g=>v.isWidget(g)&&!g.destroyed?d.tsx("div",{class:q.CSS.contentNode,key:g},g.render()):g instanceof HTMLElement?d.tsx("div",{class:q.CSS.contentNode,key:g,bind:g,afterCreate:e._attachToNode}):v.hasDomNode(g)?d.tsx("div",{class:q.CSS.contentNode,key:g,bind:g.domNode,afterCreate:e._attachToNode}):null;return e}l._inheritsLoose(m,h);m.prototype._attachToNode=
function(e){e.appendChild(this)};return m}(b);return b=r.__decorate([O.subclass("esri.widgets.Feature.ContentMixin")],b)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),function(p,
l,r,n,A,G,L,J,O,q,v,d,b,h,m,e,g,z,H,D,x,a,c,t){var u;const C={title:!0,content:!0,lastEditedInfo:!0};n=u=function(B){function F(E,k){E=B.call(this,E,k)||this;E._contentWidgets=[];E.flowItems=null;E.headingLevel=2;E.messages=null;E.messagesCommon=null;E.messagesURIUtils=null;E.visibleElements={...C};E.viewModel=new g;return E}l._inheritsLoose(F,B);var I=F.prototype;I.initialize=function(){this.addHandles(A.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),A.initial))};I.loadDependencies=
function(){return new Promise((E,k)=>p(["../chunks/calcite-notice"],E,k))};I.destroy=function(){this._destroyContentWidgets()};I.castVisibleElements=function(E){return{...C,...E}};I.render=function(){var {state:E}=this.viewModel;E=c.tsx("div",{class:z.CSS.container,key:"container"},this.renderTitle(),"error"===E?this.renderError():"loading"===E?this.renderLoading():this.renderContentContainer());return c.tsx("div",{class:this.classes(z.CSS.base,z.CSS.esriWidget)},E)};I.setActiveMedia=function(E,k){return this.viewModel.setActiveMedia(E,
k)};I.nextMedia=function(E){return this.viewModel.nextMedia(E)};I.previousMedia=function(E){return this.viewModel.previousMedia(E)};I.renderError=function(){const {messagesCommon:E,messages:k,visibleElements:f}=this;return c.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},f.title?c.tsx("div",{key:"error-title",slot:"title"},E.errorMessage):null,c.tsx("div",{key:"error-message",slot:"message"},k.loadingError))};I.renderLoading=function(){return c.tsx("div",{key:"loading-container",
class:z.CSS.loadingSpinnerContainer},c.tsx("span",{class:this.classes(z.CSS.iconLoading,z.CSS.spinner)}))};I.renderContentContainer=function(){const {visibleElements:E}=this;return E.content?c.tsx("div",{class:z.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};I.renderTitle=function(){const {visibleElements:E,title:k}=this;return E.title?c.tsx(D.Heading,{level:this.headingLevel,class:z.CSS.title,innerHTML:k}):null};I.renderContent=function(){var E=this.viewModel.content;return E?
Array.isArray(E)?E.length?c.tsx("div",{class:z.CSS.contentNode,key:"content-content-elements"},E.map(this.renderContentElement,this)):null:"string"===typeof E?(E=this._contentWidgets[0],!E||E.destroyed?null:c.tsx("div",{class:z.CSS.contentNode,key:"content-content"},E.render())):this.renderNodeContent(E):null};I.renderContentElement=function(E,k){const {visibleElements:f}=this;if("boolean"!==typeof f.content&&!f.content[E.type])return null;switch(E.type){case "attachments":return this.renderAttachments(k);
case "custom":return this.renderCustom(E,k);case "fields":return this.renderFields(k);case "media":return this.renderMedia(k);case "text":return this.renderText(E,k);case "expression":return this.renderExpression(k);case "relationship":return this.renderRelationship(k);default:return null}};I.renderAttachments=function(E){const k=this._contentWidgets[E];if(!k||k.destroyed)return null;const {state:f,attachmentInfos:w}=k.viewModel;return"loading"===f||0<w.length?c.tsx("div",{key:this._buildKey("attachments-element",
E),class:this.classes(z.CSS.contentElement)},k.render()):null};I.renderRelationship=function(E){const k=this._contentWidgets[E];return k&&!k.destroyed&&this.flowItems?c.tsx("div",{key:this._buildKey("relationship-element",E),class:z.CSS.contentElement},k.render()):null};I.renderExpression=function(E){const k=this._contentWidgets[E];return!k||k.destroyed?null:c.tsx("div",{key:this._buildKey("expression-element",E),class:z.CSS.contentElement},k.render())};I.renderCustom=function(E,k){({creator:E}=E);
const f=this._contentWidgets[k];return!f||f.destroyed?null:E?c.tsx("div",{key:this._buildKey("custom-element",k),class:z.CSS.contentElement},f.render()):null};I.renderFields=function(E){const k=this._contentWidgets[E];return!k||k.destroyed?null:c.tsx("div",{key:this._buildKey("fields-element",E),class:z.CSS.contentElement},k.render())};I.renderMedia=function(E){const k=this._contentWidgets[E];return!k||k.destroyed?null:c.tsx("div",{key:this._buildKey("media-element",E),class:z.CSS.contentElement},
k.render())};I.renderLastEditInfo=function(){const {visibleElements:E,messages:k}=this;var {lastEditInfo:f}=this.viewModel;if(!f||!E.lastEditedInfo)return null;const {date:w,user:M}=f;f=t.substitute("edit"===f.type?M?k.lastEditedByUser:k.lastEdited:M?k.lastCreatedByUser:k.lastCreated,{date:w,user:M});return c.tsx("div",{key:"edit-info-element",class:this.classes(z.CSS.lastEditedInfo,z.CSS.contentElement)},f)};I.renderText=function(E,k){const f=this._contentWidgets[k];return!f||f.destroyed?null:E.text?
c.tsx("div",{key:this._buildKey("text-element",k),class:this.classes(z.CSS.contentElement,z.CSS.text)},f.render()):null};I._buildKey=function(E,...k){const f=this.get("viewModel.graphic.uid")||"0";k=k.join("-");return`${E}__${f}-${k}`};I._destroyContentWidget=function(E){E&&(E.viewModel=null,!E.destroyed&&E.destroy())};I._destroyContentWidgets=function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(E=>this._destroyContentWidget(E));this._contentWidgets=[]};I._addFeatureRelationshipHandles=
function(E){const {flowItems:k,visibleElements:f}=this;this.addHandles([A.on(()=>E,"select-record",({featureViewModel:w})=>{k&&(w.abilities={relationshipContent:!0},k.push(new u({flowItems:k,viewModel:w,visibleElements:f})))}),A.on(()=>E,"show-all-records",()=>{if(k){var {viewModel:w}=E;w.showAllEnabled=!0;w=new e({visibleElements:{title:!1,description:!1},viewModel:w});this._addFeatureRelationshipHandles(w);k.push(w)}})],"relationship-handles")};I._setupContentWidgets=function(){this._destroyContentWidgets();
const {headingLevel:E,visibleElements:k}=this;var f=this.get("viewModel.content");const {contentViewModels:w}=this.viewModel;Array.isArray(f)?f.forEach((M,N)=>{"attachments"===M.type&&(this._contentWidgets[N]=new v({displayType:M.displayType,headingLevel:k.title?E+1:E,viewModel:w[N]}));"fields"===M.type&&(this._contentWidgets[N]=new h({viewModel:w[N]}));"media"===M.type&&(this._contentWidgets[N]=new m({viewModel:w[N]}));"text"===M.type&&(this._contentWidgets[N]=new d({viewModel:w[N]}));"custom"===
M.type&&(this._contentWidgets[N]=new d({viewModel:w[N]}));"expression"===M.type&&(this._contentWidgets[N]=new b({viewModel:w[N]}));"relationship"===M.type&&(M=new e({viewModel:w[N]}),this._addFeatureRelationshipHandles(M),this._contentWidgets[N]=M)},this):(f=w[0])&&!f.destroyed&&(this._contentWidgets[0]=new d({viewModel:f}));this.scheduleRender()};l._createClass(F,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(E){this.viewModel.graphic=E}},{key:"defaultPopupTemplateEnabled",
get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(E){this.viewModel.defaultPopupTemplateEnabled=E}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(E){this._overrideIfSome("label",E)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(E){this.viewModel.spatialReference=E}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",get:function(){return this.viewModel.map},set:function(E){this.viewModel.map=
E}},{key:"view",get:function(){return this.viewModel.view},set:function(E){this.viewModel.view=E}}]);return F}(H.FeatureContentMixin(q));r.__decorate([G.property()],n.prototype,"graphic",null);r.__decorate([G.property()],n.prototype,"defaultPopupTemplateEnabled",null);r.__decorate([G.property()],n.prototype,"flowItems",void 0);r.__decorate([G.property()],n.prototype,"headingLevel",void 0);r.__decorate([G.property()],n.prototype,"label",null);r.__decorate([G.property(),a.messageBundle("esri/widgets/Feature/t9n/Feature")],
n.prototype,"messages",void 0);r.__decorate([G.property(),a.messageBundle("esri/t9n/common")],n.prototype,"messagesCommon",void 0);r.__decorate([G.property(),a.messageBundle("esri/widgets/support/t9n/uriUtils")],n.prototype,"messagesURIUtils",void 0);r.__decorate([G.property()],n.prototype,"spatialReference",null);r.__decorate([G.property({readOnly:!0})],n.prototype,"title",null);r.__decorate([G.property()],n.prototype,"visibleElements",void 0);r.__decorate([J.cast("visibleElements")],n.prototype,
"castVisibleElements",null);r.__decorate([G.property()],n.prototype,"map",null);r.__decorate([G.property()],n.prototype,"view",null);r.__decorate([G.property({type:g})],n.prototype,"viewModel",void 0);return n=u=r.__decorate([O.subclass("esri.widgets.Feature")],n)});