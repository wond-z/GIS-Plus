// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/lang ../core/Logger ../core/reactiveUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../rest/utils ./Widget ./Print/FileLink ./Print/PrintViewModel ./Print/TemplateOptions ./support/Heading ./support/Popover ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(E,n,m,L,T,F,t,M,p,aa,U,V,W,N,O,P,Q,X,K,R,c){const S=m.ofType(N);var u;(function(D){D.layout="layoutTab";D.mapOnly="mapOnlyTab"})(u||(u={}));m=function(D){function G(a,e){var b=D.call(this,a,e)||this;b._activeTabFocusRequested=!1;b._advancedOptionsVisibleForLayout=!1;b._advancedOptionsVisibleForMapOnly=!1;b._awaitingServerResponse=!1;b._exportedFileNameMap={};b._focusedTemplateIndex=0;b._layoutTabSelected=!0;b._pendingExportScroll=!1;b._rootNode=null;b._selectTemplateNode=null;b._templateListPopover=
new X({owner:E._assertThisInitialized(b),placement:"top",offset:[0,-100],anchorElement:()=>b._selectTemplateNode,renderContentFunction:b.renderTemplateList});b.exportedLinks=new S;b.headingLevel=3;b.iconClass="esri-icon-printer";b.templateOptions=new P;b.viewModel=new O;b.handleTemplateListCreation=d=>d.focus();b.handleTemplateChildBlur=d=>{d.relatedTarget?.closest(".esri-print__template-list")||b.handleCloseTemplateSelection()};b.handleCloseTemplateSelection=()=>{b._focusedTemplateIndex=0;b._templateListPopover.open=
!1;b._selectTemplateNode.focus()};b.handleSelectTemplateClick=()=>{b._focusedTemplateIndex=0;b._templateListPopover.open=!0};b.handleTemplateListClick=d=>{b.applyTemplate(d.target["data-template"])};b.handleTemplateListKeyDown=d=>{if(K.isActivationKey(d.key))b.applyTemplate(b.viewModel.defaultTemplates.getItemAt(b._focusedTemplateIndex)),d.preventDefault();else{if("ArrowDown"===d.key||"ArrowUp"===d.key){var {defaultTemplates:f}=b.viewModel;const g=(b._focusedTemplateIndex+("ArrowDown"===d.key?1:-1))%
f.length;b._focusedTemplateIndex=0>g?f.length-1:g;f=d.currentTarget;K.keepMenuItemWithinView(f.querySelectorAll(".esri-menu__list-item")[b._focusedTemplateIndex],f.parentElement);d.preventDefault()}"Escape"===d.key&&b.handleCloseTemplateSelection()}};b._removeLink=d=>{(d=d.currentTarget["data-item"])&&"error"===d.state&&b.exportedLinks.remove(d)};b._handleLinkClick=d=>{const f=d.currentTarget,{href:g}=f,l=V.getToken(b.viewModel.effectivePrintServiceUrl);l&&(d.isTrusted?(d.preventDefault(),d=new URL(g),
d.searchParams.set("token",l),f.href=d.href,f.click(),f.href=g):d.stopPropagation())};b._focusOnTabChange=b._focusOnTabChange.bind(E._assertThisInitialized(b));return b}E._inheritsLoose(G,D);var k=G.prototype;k.initialize=function(){this.addHandles([t.watch(()=>this.viewModel?.templatesInfo,d=>{const {format:f,layout:g}=this.templateOptions;if(d){const l=g===d.layout.defaultValue||"MAP_ONLY"===g?.toUpperCase()||d.layout.choiceList&&d.layout.choiceList.includes(g),r=f===d.format.defaultValue||d.format.choiceList&&
d.format.choiceList.includes(f);l||(g&&F.getLogger(this.declaredClass).warn("User sets an invalid layout, resetting it to the default valid one..."),this.templateOptions.layout=d.layout.defaultValue);r||(f&&F.getLogger(this.declaredClass).warn("User sets an invalid format, resetting it to the default valid one..."),this.templateOptions.format=d.format.defaultValue);"MAP_ONLY"===g?.toUpperCase()&&(this._layoutTabSelected=!1)}},t.initial),t.watch(()=>this.templateOptions?.format,d=>{const {viewModel:{templatesInfo:f}}=
this;if(f&&d){let g=!1;f.format.choiceList&&f.format.choiceList.forEach(l=>{l.toUpperCase()===d.toUpperCase()&&(this.templateOptions.format=l,g=!0)});g||(this.templateOptions.format=f.format.defaultValue,F.getLogger(this.declaredClass).warn("User sets an invalid format, resetting it to the default valid one..."));this.scheduleRender()}},t.initial),t.watch(()=>this.templateOptions?.layout,d=>{var {viewModel:{templatesInfo:f}}=this;if(f&&d){this._layoutTabSelected="MAP_ONLY"!==d?.toUpperCase();let g=
!this._layoutTabSelected;g||f.layout.choiceList&&f.layout.choiceList.forEach(l=>{l.toUpperCase()===d.toUpperCase()&&(this.templateOptions.layout=l,g=!0)});g||(this.templateOptions.layout=f.layout.defaultValue,F.getLogger(this.declaredClass).warn("User sets an invalid layout, resetting it to the default valid one..."));f=this.viewModel.effectiveTemplateCustomTextElements[this.templateOptions.layout];this.templateOptions.customTextElements=f?T.clone(f):null;this.scheduleRender()}},t.initial),t.watch(()=>
this.templateOptions?.dpi,d=>{0>=d?this.templateOptions.dpi=1:this.scheduleRender()},t.initial),t.watch(()=>this.viewModel?.view?.scale,d=>{const {scale:f,scaleEnabled:g}=this.templateOptions;g&&f||(this.templateOptions.scale=d)},t.initial)]);const {height:a,width:e}=this.templateOptions;this.templateOptions.width=e||800;this.templateOptions.height=a||1100;const b=setTimeout(()=>{this._awaitingServerResponse=!0;this.scheduleRender()},500);this.viewModel.load().then(()=>clearTimeout(b))};k.render=
function(){const {attributionEnabled:a,author:e,copyright:b,dpi:d,format:f,height:g,layout:l,legendEnabled:r,northArrowEnabled:x,scaleEnabled:v,scale:H,width:B}=this.templateOptions;var q="ready"!==this.get("viewModel.state"),A=this.renderTitleOrFileNameSection();const {includeDefaultTemplates:Y,messages:h,viewModel:Z}=this;var y=this.get("viewModel.templatesInfo.format.choiceList")||[];y=0<y.length?y.map(w=>c.tsx("option",{key:w,selected:w===f,value:w},w.toUpperCase())):c.tsx("option",{key:"format-default-option"},
h.formatDefaultOption);y=c.tsx("div",{class:"esri-print__form-section-container"},c.tsx("label",null,h.fileFormatTitle,c.tsx("select",{class:"esri-select",onchange:this._updateFromOption,"data-target-property":"format",bind:this},y)));var z=this.get("viewModel.templatesInfo.layout.choiceList")||[];z=0<z.length?z.map(w=>c.tsx("option",{key:w,selected:w===l,value:w},h[w]||w)):c.tsx("option",{key:"layout-default-option"},h.layoutDefaultOption);z=c.tsx("div",{class:"esri-print__form-section-container"},
c.tsx("label",null,h.layoutTitle,c.tsx("select",{class:"esri-select",onchange:this._updateFromOption,"data-target-property":"layout",bind:this},z)));var C=c.tsx("div",{class:"esri-print__form-section-container"},c.tsx("label",null,h.dpi,c.tsx("input",{type:"number",class:this.classes("esri-print__input-text","esri-input"),"data-input-name":"dpi",onchange:this._handleDPIChange,value:`${d}`,min:"1",tabIndex:0,bind:this}))),I=c.tsx("div",{class:this.classes("esri-print__scale-info-container","esri-print__form-section-container")},
c.tsx("label",null,c.tsx("input",{"data-option-name":"scaleEnabled",checked:v,type:"checkbox",tabIndex:0,onchange:this._toggleInputValue,bind:this}),h.scale),c.tsx("div",{class:"esri-print__scale-input-container"},c.tsx("input",{"aria-label":h.scaleLabel,"aria-valuenow":`${H}`,role:"spinbutton",type:"number",class:this.classes("esri-print__input-text","esri-input","esri-print__scale-input"),tabIndex:0,"data-input-name":"scale",onchange:this._updateInputValue,disabled:!v,value:`${H}`,bind:this}),c.tsx("button",
{type:"button","aria-label":h.reset,class:this.classes("esri-widget--button","esri-print__refresh-button","esri-icon-refresh"),tabIndex:0,onclick:this._resetToCurrentScale,bind:this}))),J=this._advancedOptionsVisibleForLayout?c.tsx("div",{"aria-labelledby":`${this.id}__advancedOptionsForLayout`,class:"esri-print__advanced-options-container"},I,c.tsx("div",{class:this.classes("esri-print__author-info-container","esri-print__form-section-container")},c.tsx("label",null,h.author,c.tsx("input",{type:"text",
value:e,class:this.classes("esri-print__input-text","esri-input"),tabIndex:0,"data-input-name":"author",onchange:this._updateInputValue,bind:this}))),c.tsx("div",{class:this.classes("esri-print__copyright-info-container","esri-print__form-section-container")},c.tsx("label",null,h.copyright,c.tsx("input",{type:"text",class:this.classes("esri-print__input-text","esri-input"),tabIndex:0,value:b,"data-input-name":"copyright",onchange:this._updateInputValue,bind:this}))),C,c.tsx("div",{class:this.classes("esri-print__legend-info-container",
"esri-print__form-section-container")},c.tsx("label",null,c.tsx("input",{type:"checkbox","data-option-name":"legendEnabled",tabIndex:0,checked:r,onchange:this._toggleInputValue,bind:this}),h.legend)),this.viewModel.templateToNorthArrowInfo[l]?c.tsx("div",{class:this.classes("esri-print__legend-info-container","esri-print__form-section-container"),key:"north-arrow"},c.tsx("label",null,c.tsx("input",{type:"checkbox","data-option-name":"northArrowEnabled",tabIndex:0,checked:x,onchange:this._toggleInputValue,
bind:this}),h.northArrow)):null,this.renderCustomTextElementSection()):null;C=this._advancedOptionsVisibleForMapOnly?c.tsx("div",{"aria-labelledby":`${this.id}__advancedOptionsForMapOnly`,class:"esri-print__advanced-options-container"},I,C,c.tsx("div",{class:"esri-print__form-section-container"},c.tsx("label",null,c.tsx("input",{"data-option-name":"attributionEnabled",type:"checkbox",onchange:this._toggleInputValue,tabIndex:0,checked:a,bind:this}),h.attribution)),this.renderCustomTextElementSection()):
null;z=this._layoutTabSelected?c.tsx("section",{key:"esri-print__layoutContent",id:`${this.id}__layoutContent`,"aria-labelledby":`${this.id}__layoutTab`,class:"esri-print__layout-section",role:"tabpanel","aria-selected":this._layoutTabSelected.toString()},c.tsx("div",{class:"esri-print__panel-container"},A,z,this._layoutTabSelected?y:null),c.tsx("div",{class:this.classes("esri-print__panel-container","esri-print__advanced-options-section")},c.tsx("button",{"aria-label":h.advancedOptions,"aria-expanded":this._advancedOptionsVisibleForLayout?
"true":"false",class:"esri-print__advanced-options-button",onclick:this._showAdvancedOptions,bind:this,type:"button"},c.tsx("div",{class:"esri-print__advanced-options-button-container"},c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-right-triangle-arrow","esri-print__advanced-options-button-icon--closed")}),c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-left-triangle-arrow","esri-print__advanced-options-button-icon--closed-rtl")}),c.tsx("span",{"aria-hidden":"true",
class:this.classes("esri-icon-down-arrow","esri-print__advanced-options-button-icon--opened")}),c.tsx("span",{class:"esri-print__advanced-options-button-title"},h.advancedOptions))),J)):c.tsx("section",{key:"esri-print__mapOnlyContent",id:`${this.id}__mapOnlyContent`,"aria-selected":(!this._layoutTabSelected).toString(),"aria-labelledby":`${this.id}__mapOnlyTab`,class:"esri-print__map-only-section",role:"tabpanel"},c.tsx("div",{class:"esri-print__panel-container"},A,this._layoutTabSelected?null:y,
c.tsx("div",{class:this.classes("esri-print__size-container","esri-print__form-section-container")},c.tsx("div",{class:"esri-print__width-container"},c.tsx("label",null,h.width,c.tsx("input",{type:"number",class:this.classes("esri-print__input-text","esri-input"),"data-input-name":"width",onchange:this._updateInputValue,value:`${B}`,tabIndex:0,bind:this}))),c.tsx("div",{class:"esri-print__height-container"},c.tsx("label",null,h.height,c.tsx("input",{type:"number",class:this.classes("esri-print__input-text",
"esri-input"),"data-input-name":"height",onchange:this._updateInputValue,value:`${g}`,tabIndex:0,bind:this}))),c.tsx("button",{type:"button","aria-label":h.swap,class:this.classes("esri-widget--button","esri-print__swap-button","esri-icon-swap"),onclick:this._switchInput,tabIndex:0,bind:this})),c.tsx("div",{class:this.classes("esri-print__panel-container","esri-print__advanced-options-section")},c.tsx("button",{"aria-label":h.advancedOptions,"aria-expanded":this._advancedOptionsVisibleForMapOnly?
"true":"false",type:"button",class:"esri-print__advanced-options-button",onclick:this._showAdvancedOptions,bind:this},c.tsx("div",{class:"esri-print__advanced-options-button-container"},c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-right-triangle-arrow","esri-print__advanced-options-button-icon--closed")}),c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-icon-left-triangle-arrow","esri-print__advanced-options-button-icon--closed-rtl")}),c.tsx("span",{"aria-hidden":"true",
class:this.classes("esri-icon-down-arrow","esri-print__advanced-options-button-icon--opened")}),c.tsx("span",{class:"esri-print__advanced-options-button-title"},h.advancedOptions))),C)));J=this.exportedLinks.toArray();C=this._renderExportedLink(J);I={["esri-button--disabled"]:q||!l&&!f};A=null!=this.get("view")&&"2d"!==this.get("view.type");y=c.tsx("div",{class:"esri-print__panel--error"},A?h.sceneViewError:h.serviceError);q=c.tsx("div",null,c.tsx("ul",{class:"esri-print__layout-tab-list",role:"tablist",
onclick:this._toggleLayoutPanel,onkeydown:this._handleLayoutPanelKeyDown,bind:this},c.tsx("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,id:`${this.id}__layoutTab`,"data-tab-id":u.layout,class:"esri-print__layout-tab",role:"tab",tabIndex:0,"aria-selected":`${this._layoutTabSelected}`},h.layoutTab),c.tsx("li",{afterCreate:this._focusOnTabChange,afterUpdate:this._focusOnTabChange,id:`${this.id}__mapOnlyTab`,"data-tab-id":u.mapOnly,class:"esri-print__layout-tab",role:"tab",
tabIndex:0,"aria-selected":`${!this._layoutTabSelected}`},h.mapOnlyTab)),z,c.tsx("button",{"aria-label":h.exportDescription,type:"button",class:this.classes("esri-print__export-button","esri-button",I),disabled:q,tabIndex:0,onclick:this._handlePrintMap,bind:this},h.export),Y&&0<Z.defaultTemplates.length?this.renderTemplateSectionTrigger():null,c.tsx("div",{class:"esri-print__export-panel-container",afterUpdate:this._scrollExportIntoView,bind:this},c.tsx(Q.Heading,{class:"esri-print__export-title",
level:this.headingLevel},h.exportText),0<J.length?null:c.tsx("div",null,c.tsx("div",null,h.exportHint)),C));q=c.tsx("div",{class:"esri-print__container"},c.tsx("header",{class:"esri-print__header-title"},h.export),this.error||A||!this.view?y:q);q="initializing"===this.get("viewModel.state")?this._renderLoader():q;return c.tsx("div",{afterCreate:this._handleRootAfterCreate,bind:this,class:this.classes("esri-print","esri-widget","esri-widget--panel")},q)};k.renderTemplateSectionTrigger=function(){const {messages:a,
_templateListPopover:e}=this,b=e.open;return c.tsx("button",{afterCreate:d=>this._selectTemplateNode=d,"aria-controls":b?`${this.id}__template-selection`:"","aria-label":a.selectTemplateDescription,"aria-pressed":b.toString(),class:this.classes("esri-button","esri-button--tertiary","esri-print__template-button"),onclick:this.handleSelectTemplateClick,title:a.selectTemplateDescription,type:"button"},a.selectTemplate)};k.renderCustomTextElementSection=function(){const {templateOptions:{customTextElements:a}}=
this;return a?c.tsx("div",{class:"esri-print__form-section-container",key:"custom-text-elements"},a.map(e=>{const [b,d]=Object.entries(e)[0];return"date"===b?null:c.tsx("label",{key:b},b,c.tsx("input",{bind:this,class:this.classes("esri-print__input-text","esri-input"),"data-input-custom":!0,"data-input-name":b,onchange:this._updateInputValue,type:"text",value:d}))})):null};k.renderTemplateList=function(){const {messages:a,messagesCommon:e,viewModel:b}=this,{defaultTemplates:d}=b,f=a.selectTemplateDescription,
g=`${this.id}__template-selection`;return c.tsx("div",{class:this.classes("esri-print__template-list","esri-widget","esri-widget--panel"),id:g},c.tsx(Q.Heading,{class:"esri-menu__header",level:this.headingLevel},a.selectTemplate),c.tsx("div",{class:"esri-print__template-list-scroller"},c.tsx("ul",{afterCreate:this.handleTemplateListCreation,"aria-activedescendant":`${this.id}__template-item--${this._focusedTemplateIndex}`,"aria-label":f,class:"esri-menu__list",key:"templates",onblur:this.handleTemplateChildBlur,
onclick:this.handleTemplateListClick,onkeydown:this.handleTemplateListKeyDown,role:"listbox",tabIndex:0,title:f},d.toArray().map((l,r)=>{const {description:x}=l,v=l.label;return c.tsx("li",{"aria-label":x,class:this.classes("esri-menu__list-item",{["esri-menu__list-item--focus"]:r===this._focusedTemplateIndex}),"data-template":l,id:`${this.id}__template-item--${r}`,key:v,title:x},"MAP_ONLY"===v?.toUpperCase()?a.mapOnlyTab:v)}))),c.tsx("div",{class:"esri-print__template-list-footer"},c.tsx("button",
{type:"button",class:this.classes("esri-button","esri-button--secondary"),onblur:this.handleTemplateChildBlur,onclick:this.handleCloseTemplateSelection},e.done)))};k.applyTemplate=function(a){const {format:e,layout:b,layoutOptions:d}=a;({templateOptions:a}=this);this._templateListPopover.open=!1;this._toggleTab("map-only"===b?u.mapOnly:u.layout,!1);e&&(a.format=e);b&&(a.layout=b);this._focusedTemplateIndex=null;a.legendEnabled=d?.legend??a.legendEnabled;this.handleCloseTemplateSelection()};k.renderTitleOrFileNameSection=
function(){const {templateOptions:a,messages:e}=this;let b,d,f,g;this._layoutTabSelected?(b=e.title,d=e.titlePlaceHolder,f=a.title,g="title"):(b=e.fileName,d=e.fileNamePlaceHolder,f=a.fileName,g="fileName");return c.tsx("div",{class:"esri-print__form-section-container",key:g},c.tsx("label",null,b,c.tsx("input",{type:"text",tabIndex:0,placeholder:d,class:this.classes("esri-print__input-text","esri-input"),value:f,"data-input-name":g,onchange:this._updateInputValue,bind:this})))};k._handleRootAfterCreate=
function(a){this._rootNode=a;this.addHandles(L.on(a,"scroll",()=>{this._templateListPopover.open&&this.handleCloseTemplateSelection()}))};k._focusOnTabChange=function(a){if(this._activeTabFocusRequested){var e=a.getAttribute("data-tab-id");if("layoutTab"===e&&this._layoutTabSelected||"mapOnlyTab"===e&&!this._layoutTabSelected)a.focus(),this._activeTabFocusRequested=!1}};k._renderLoader=function(){return c.tsx("div",{class:this.classes({["esri-print__loader"]:this._awaitingServerResponse}),key:"loader"})};
k._createFileLink=function(a,e){e=e||this.messages.untitled;a=a.format.toLowerCase();a=a.includes("png")?"png":a;const b=e+a;void 0!==this._exportedFileNameMap[b]?this._exportedFileNameMap[b]++:this._exportedFileNameMap[b]=0;return new N({name:e,extension:a,count:this._exportedFileNameMap[b]})};k._resetToCurrentScale=function(){this.templateOptions.scale=this.viewModel.view.scale};k._updateCustomTextElementValue=function(a,e,b){a.find(d=>{[d]=Object.entries(d)[0];return d===e})[e]=b};k._updateInputValue=
function(a){var e=a.target;a=e.getAttribute("data-input-name");var b=!!e["data-input-custom"];const {templateOptions:d}=this;if(b)this._updateCustomTextElementValue(d.customTextElements,a,e.value);else{if("number"===e.type){b=e.valueAsNumber;if(isNaN(b)||!(0<b)){e.value=`${d[a]}`;return}e=e.valueAsNumber}else e=e.value;d[a]=e}};k._handleDPIChange=function(a){this._updateInputValue(a);a=a.currentTarget.valueAsNumber;const {height:e,width:b}={width:Math.round(8.3333*a),height:Math.round(11.4583*a)};
({templateOptions:a}=this);a.height=e;a.width=b};k._handlePrintMap=function(){this._pendingExportScroll=!0;const {templateOptions:a}=this,e=this.viewModel.toPrintTemplate(a),b=this._createFileLink(e,this._layoutTabSelected?e.layoutOptions.titleText:a.fileName);this.exportedLinks.add(b);this.emit("submit",{link:b});this.viewModel.print(e).then(d=>{b.set({url:d&&d.url,state:"ready"})}).catch(d=>{b.set({error:d,state:"error"})}).then(()=>{this.emit("complete",{link:b});this.scheduleRender()})};k._updateFromOption=
function(a){var e=a.target;a=e.selectedOptions?e.selectedOptions.item(0).value:e.options[e.selectedIndex].value;e=e.getAttribute("data-target-property");this.templateOptions[e]=a};k._switchInput=function(){[this.templateOptions.width,this.templateOptions.height]=[this.templateOptions.height,this.templateOptions.width]};k._showAdvancedOptions=function(){this._layoutTabSelected?this._advancedOptionsVisibleForLayout=!this._advancedOptionsVisibleForLayout:this._advancedOptionsVisibleForMapOnly=!this._advancedOptionsVisibleForMapOnly};
k._scrollExportIntoView=function(){if(this._pendingExportScroll){this._pendingExportScroll=!1;const {_rootNode:a,_rootNode:{clientHeight:e,scrollHeight:b}}=this,d=b-e;0<d&&(a.scrollTop=d)}};k._toggleInputValue=function(a){a=a.target;const e=a.getAttribute("data-option-name");this.templateOptions[e]=a.checked;"scaleEnabled"===e&&(this.templateOptions[e]||this._resetToCurrentScale())};k._renderExportedLink=function(a){const e=this.messages;return a.map(b=>{const {error:d,url:f,formattedName:g,state:l}=
b,r="error"===l,x="pending"===l,v="ready"===l,H={["esri-widget__anchor--disabled"]:x||r};let B=f||null;B&&(B=M.addProxy(B));var q=M.hasSameOrigin(f,location.href);q={["esri-icon-loading-indicator"]:x,["esri-rotating"]:x,["esri-icon-download"]:q&&v,["esri-icon-launch-link-external"]:!q&&v,["esri-icon-error"]:r,["esri-print__exported-file--error"]:r};const A={["esri-print__exported-file--error"]:r};return c.tsx("div",{"aria-label":x?e.pending:v?e.ready:e.errorMessage,class:"esri-print__exported-file",
"data-item":b,key:g,onclick:this._removeLink,title:r?"print-task:cim-symbol-unsupported"===d.name?e.exportWebMapCIMError:e.exportWebMapError:""},c.tsx("a",{"aria-label":`${g}. ${e.linkReady}`,download:g,href:B,rel:"noreferrer",tabIndex:0,target:"_blank",class:this.classes("esri-widget__anchor esri-print__exported-file-link",H),onclick:this._handleLinkClick},c.tsx("span",{class:this.classes(q)}),c.tsx("span",{class:this.classes("esri-print__exported-file-link-title",A)},g)))})};k._toggleLayoutPanel=
function(a){this._toggleTab(a.target.getAttribute("data-tab-id"))};k._toggleTab=function(a,e=!0){(this._layoutTabSelected=a===u.layout)?(a=this.get("viewModel.templatesInfo.layout.choiceList"),this.templateOptions.layout=a&&a[0]):this.templateOptions.layout="MAP_ONLY";e&&(this._activeTabFocusRequested=!0)};k._handleLayoutPanelKeyDown=function(a){const e=L.eventKey(a),b=a.target.getAttribute("data-tab-id");if(K.isActivationKey(e))this._toggleTab(b),a.preventDefault(),a.stopPropagation();else if("ArrowLeft"===
e||"ArrowRight"===e)this._toggleTab(b===u.layout?u.mapOnly:u.layout),a.preventDefault(),a.stopPropagation()};E._createClass(G,[{key:"allowedFormats",get:function(){return this.viewModel.allowedFormats},set:function(a){this.viewModel.allowedFormats=a}},{key:"allowedLayouts",get:function(){return this.viewModel.allowedLayouts},set:function(a){this.viewModel.allowedLayouts=a}},{key:"error",get:function(){return this.viewModel.error}},{key:"extraParameters",get:function(){return this.viewModel.extraParameters},
set:function(a){this.viewModel.extraParameters=a}},{key:"includeDefaultTemplates",get:function(){return this.viewModel.includeDefaultTemplates},set:function(a){this.viewModel.includeDefaultTemplates=a}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(a){this._overrideIfSome("label",a)}},{key:"portal",get:function(){return this.viewModel.portal},set:function(a){this.viewModel.portal=a}},{key:"printServiceUrl",get:function(){return this.viewModel.printServiceUrl},set:function(a){this.viewModel.printServiceUrl=
a}},{key:"templateCustomTextElements",get:function(){return this.viewModel.templateCustomTextElements},set:function(a){this.viewModel.templateCustomTextElements=a}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}}]);return G}(W);n.__decorate([p.property()],m.prototype,"allowedFormats",null);n.__decorate([p.property()],m.prototype,"allowedLayouts",null);n.__decorate([p.property()],m.prototype,"error",null);n.__decorate([p.property({type:S})],m.prototype,
"exportedLinks",void 0);n.__decorate([p.property()],m.prototype,"extraParameters",null);n.__decorate([p.property()],m.prototype,"headingLevel",void 0);n.__decorate([p.property()],m.prototype,"iconClass",void 0);n.__decorate([p.property()],m.prototype,"includeDefaultTemplates",null);n.__decorate([p.property()],m.prototype,"label",null);n.__decorate([p.property(),R.messageBundle("esri/widgets/Print/t9n/Print")],m.prototype,"messages",void 0);n.__decorate([p.property(),R.messageBundle("esri/t9n/common")],
m.prototype,"messagesCommon",void 0);n.__decorate([p.property()],m.prototype,"portal",null);n.__decorate([p.property()],m.prototype,"printServiceUrl",null);n.__decorate([p.property()],m.prototype,"templateCustomTextElements",null);n.__decorate([p.property({type:P})],m.prototype,"templateOptions",void 0);n.__decorate([p.property()],m.prototype,"view",null);n.__decorate([p.property({type:O})],m.prototype,"viewModel",void 0);return m=n.__decorate([U.subclass("esri.widgets.Print")],m)});