// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../assets ../core/Handles ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./BasemapGallery/BasemapGalleryViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),function(w,r,d,x,y,q,g,c,G,z,A,B,C,D,E,e,H){c=
function(t){function m(a,b){a=t.call(this,a,b)||this;a._handles=new y;a._focusBasemapItemEnabled=!1;a.disabled=!1;a.headingLevel=2;a.iconClass="esri-icon-basemap";a.messages=null;a.viewModel=new B;return a}r._inheritsLoose(m,t);var h=m.prototype;h.initialize=function(){const a=this._handles;this.addHandles([q.on(()=>this.viewModel.items,"change",b=>{const {added:f,moved:k}=b;a.remove("basemap-gallery-item-changes");a.add([...f,...k].map(l=>q.watch(()=>l.state,()=>this.scheduleRender())),"basemap-gallery-item-changes");
this.scheduleRender()}),q.when(()=>this.source,()=>this.viewModel.load(),{initial:!0,once:!0})])};h.destroy=function(){this._handles.destroy()};h.loadDependencies=function(){return new Promise((a,b)=>w(["../chunks/calcite-scrim"],a,b))};h.render=function(){var a="loading"===this.source.state,b=this.disabled||"disabled"===this.viewModel.state;const f=this.viewModel.items.map((l,n)=>this._renderBasemapGalleryItem(l,n)).toArray();b={["esri-basemap-gallery--source-loading"]:a,["esri-disabled"]:b};const k=
a?e.tsx("div",{class:"esri-basemap-gallery__loader",key:"esri-basemap-gallery__loader"}):null;a=a?null:0<f.length?e.tsx("ul",{bind:this,"aria-disabled":this.disabled,"aria-label":this.label,class:"esri-basemap-gallery__item-container",key:"esri-basemap-gallery__item-container",onkeydown:this._handleKeyDown,role:"radiogroup"},f):e.tsx("div",{class:"esri-widget__content--empty",key:"esri-basemap-gallery__empty-message"},e.tsx(C.Heading,{level:this.headingLevel},this.messages.noBasemaps));return e.tsx("div",
{class:this.classes("esri-basemap-gallery esri-widget esri-widget--panel-height-only",b)},k,a)};h._getRoundRobinIndex=function(a,b){return(a+b)%b};h._handleKeyDown=function(a){const {key:b}=a;if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(b)){a.preventDefault();var {items:f,activeBasemapIndex:k}=this.viewModel;a="ArrowUp"===b||"ArrowLeft"===b?this._getRoundRobinIndex(Math.max(k-1,-1),f.length):this._getRoundRobinIndex(k+1,f.length);a=f.getItemAt(a);"ready"===a?.state&&(this.viewModel.activeBasemap=
a.basemap);this._focusBasemapItemEnabled=!0}};h._focusBasemapItem=function(a){this._focusBasemapItemEnabled&&0===a.tabIndex&&(a.focus(),this._focusBasemapItemEnabled=!1)};h._handleClick=function(a){a=a.currentTarget["data-item"];"ready"===a.state&&(this.viewModel.activeBasemap=a.basemap)};h._renderBasemapGalleryItem=function(a,b){const f=a.basemap.thumbnailUrl||x.getAssetUrl("esri/themes/base/images/basemap-toggle-64.svg"),k=a.basemap.title;var l=a.basemap.portalItem?.snippet;l=a.error?.message||
l||k;const {viewModel:{state:n,activeBasemapIndex:u}}=this,p=u===b;b=p||-1===u&&0===b?0:-1;const F="loading"===n,v=`basemapgallery-item-${a.uid}`;return e.tsx("li",{"aria-checked":p.toString(),"aria-disabled":(this.disabled||"disabled"===n).toString(),"aria-labelledby":v,bind:this,class:this.classes("esri-basemap-gallery__item",{["esri-basemap-gallery__item--selected"]:p,["esri-basemap-gallery__item--error"]:"error"===a.state}),"data-item":a,onkeydown:this._handleClick,onclick:this._handleClick,role:"radio",
tabIndex:b,afterUpdate:this._focusBasemapItem,title:l},e.tsx("img",{alt:"",class:"esri-basemap-gallery__item-thumbnail",src:f}),e.tsx("div",{id:v,class:"esri-basemap-gallery__item-title"},k),"loading"===a.state||p&&F?e.tsx("calcite-scrim",null,e.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-widget__loader-animation"})):null)};r._createClass(m,[{key:"activeBasemap",get:function(){return this.viewModel.activeBasemap},set:function(a){this.viewModel.activeBasemap=a}},{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(a){this._overrideIfSome("label",a)}},{key:"source",get:function(){return this.viewModel.source},set:function(a){this.viewModel.source=a}},{key:"view",get:function(){return this.viewModel.view},set:function(a){this.viewModel.view=a}}]);return m}(A);d.__decorate([g.property()],c.prototype,"activeBasemap",null);d.__decorate([g.property()],c.prototype,"disabled",void 0);d.__decorate([g.property()],c.prototype,"headingLevel",void 0);d.__decorate([g.property()],c.prototype,"iconClass",
void 0);d.__decorate([g.property()],c.prototype,"label",null);d.__decorate([g.property(),E.messageBundle("esri/widgets/BasemapGallery/t9n/BasemapGallery")],c.prototype,"messages",void 0);d.__decorate([g.property()],c.prototype,"source",null);d.__decorate([g.property()],c.prototype,"view",null);d.__decorate([g.property()],c.prototype,"viewModel",void 0);d.__decorate([D.accessibleHandler()],c.prototype,"_handleClick",null);return c=d.__decorate([z.subclass("esri.widgets.BasemapGallery")],c)});