// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/CloudyWeather ../../views/3d/environment/FoggyWeather ../../views/3d/environment/RainyWeather ../../views/3d/environment/SnowyWeather ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ./enums".split(" "),
function(l,f,c,p,q,b,m,g,r,t,u,v,w,x,y,e){const z=q.getLogger("esri.widgets.Weather.WeatherViewModel");c=function(n){function h(a){a=n.call(this,a)||this;a.view=null;a._handles=new p;a._settingWeather=!1;a._weatherByType={sunny:new x,cloudy:new t,rainy:new v,snowy:new w,foggy:new u};return a}l._inheritsLoose(h,n);var k=h.prototype;k.initialize=function(){this._handles.add([m.watch(()=>this.current,a=>{this._settingWeather||b.isNone(a)||(this._weatherByType={...this._weatherByType,[a.type]:a})},m.syncAndInitial)])};
k.destroy=function(){this._handles=b.destroyMaybe(this._handles)};k.setWeatherByType=function(a){if(y.validateWeatherType(a,z)){var d=this._environment;b.isSome(d)&&(this._settingWeather=!0,d.weather=this._weatherByType[a],this._settingWeather=!1)}};k.setSnowCoverEnabled=function(a){const d=this.current;"snowCover"in d&&(d.snowCover=a?"enabled":"disabled")};l._createClass(h,[{key:"state",get:function(){const a=this.view;if(b.isNone(a)||!a.ready)return e.WeatherState.Disabled;if(b.isSome(this.error))switch(this.error){case e.WeatherError.NotVisible:break;
default:return e.WeatherState.Error}return e.WeatherState.Ready}},{key:"error",get:function(){const a=this.view;return b.isNone(a)||!a.ready?null:"3d"!==a.type?e.WeatherError.UnsupportedView:"local"===a.viewingMode?e.WeatherError.LocalScene:a.environment.atmosphereEnabled?a.environmentManager.weatherVisible?null:e.WeatherError.NotVisible:e.WeatherError.NoAtmosphere}},{key:"current",get:function(){const a=b.applySome(this._environment,d=>d.weather);return b.unwrapOr(a,this._weatherByType.sunny)},set:function(a){b.applySome(this._environment,
d=>d.weather=a)}},{key:"test",get:function(){return{...this._weatherByType}}},{key:"_environment",get:function(){const a=this.view;return b.isSome(a)&&"3d"===a.type?a.environment:null}}]);return h}(c);f.__decorate([g.property()],c.prototype,"view",void 0);f.__decorate([g.property()],c.prototype,"state",null);f.__decorate([g.property()],c.prototype,"error",null);f.__decorate([g.property()],c.prototype,"current",null);f.__decorate([g.property()],c.prototype,"_environment",null);return c=f.__decorate([r.subclass("esri.widgets.Weather.WeatherViewModel")],
c)});