// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),function(T,D,t,G,R,Y,K,z,m,E,H,U){const C=t.ofType(H);t=function(fa){function na(q){q=
fa.call(this,q)||this;q._handles=new R;q.checkPublishStatusEnabled=!1;q.listItemCreatedFunction=null;q.operationalItems=new C;q.view=null;return q}T._inheritsLoose(na,fa);var Q=na.prototype;Q.initialize=function(){this._handles.add([Y.watch(()=>[this.view,this.view?.ready],()=>this._viewHandles(),Y.initial),Y.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")};Q.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};
Q.triggerAction=function(q,n){q&&!q.disabled&&this.emit("trigger-action",{action:q,item:n})};Q.moveListItem=function(q,n,B,L){const x=q?.layer;if(x){var V=this.view?.map?.layers,r=n?U.getItemLayers(n):V;V=B?U.getItemLayers(B):V;if(r&&V){var {operationalItems:N}=this;n=n?.children||N;N=B?.children||N;L=V.length-L;q.parent=B||null;n.includes(q)&&n.remove(q);r.includes(x)&&r.remove(x);N.includes(q)||N.add(q,L);V.includes(x)||V.add(x,L)}}};Q._createLayerViewHandles=function(q){const {_handles:n}=this;
n.remove("layer-views");this._compileList();q&&n.add(q.on("change",()=>this._compileList()),"layer-views")};Q._createMapLayerHandles=function(q){const {_handles:n}=this;n.remove("map-layers");this._compileList();q&&n.add(q.on("change",()=>this._compileList()),"map-layers")};Q._createListItem=function(q){const {view:n,listItemCreatedFunction:B,checkPublishStatusEnabled:L}=this;return new H({checkPublishStatusEnabled:L,layer:q,listItemCreatedFunction:B,view:n})};Q._removeAllItems=function(){const {_handles:q,
operationalItems:n}=this;n.forEach(B=>{q.remove(`${"children"}-${B.uid}`)});n.removeAll()};Q._getViewableLayers=function(q){if(q)return q.filter(n=>"hide"!==U.findLayerListMode(n))};Q._watchLayersListMode=function(q){const {_handles:n}=this;n.remove("layer-list-mode");q&&q.forEach(B=>{"listMode"in B&&n.add(Y.watch(()=>B.listMode,()=>this._compileList()),"layer-list-mode")})};Q._compileList=function(){var q=this.get("view.map.layers");this._watchLayersListMode(q);(q=this._getViewableLayers(q))&&q.length?
(this._createNewItems(q),this._removeItems(q),this._sortItems(q)):this._removeAllItems()};Q._createNewItems=function(q){const {operationalItems:n}=this;q.forEach(B=>{n.find(L=>L.layer===B)||n.add(this._createListItem(B))})};Q._removeItems=function(q){const {_handles:n,operationalItems:B}=this,L=[];B.forEach(x=>{x&&q&&q.includes(x.layer)||(n.remove(`${"children"}-${x.uid}`),L.push(x))});B.removeMany(L)};Q._sortItems=function(q){const {operationalItems:n}=this;n.sort((B,L)=>{B=q.indexOf(B.layer);L=
q.indexOf(L.layer);return B>L?-1:B<L?1:0})};Q._recompileList=function(){this._removeAllItems();this._compileList()};Q._viewHandles=function(){const {_handles:q,view:n}=this;q.remove(["map-layers","layer-views","view-layers"]);this._compileList();n&&n.ready&&q.add([Y.watch(()=>this.view?.map?.allLayers,B=>this._createMapLayerHandles(B),Y.initial),Y.watch(()=>this.view?.allLayerViews,B=>this._createLayerViewHandles(B),Y.initial)],"view-layers")};T._createClass(na,[{key:"state",get:function(){const q=
this.get("view");return this.get("view.ready")?"ready":q?"loading":"disabled"}}]);return na}(G.EventedAccessor);D.__decorate([K.property()],t.prototype,"checkPublishStatusEnabled",void 0);D.__decorate([K.property()],t.prototype,"listItemCreatedFunction",void 0);D.__decorate([K.property({type:C})],t.prototype,"operationalItems",void 0);D.__decorate([K.property({readOnly:!0})],t.prototype,"state",null);D.__decorate([K.property()],t.prototype,"view",void 0);return t=D.__decorate([E.subclass("esri.widgets.LayerList.LayerListViewModel")],
t)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/HandleOwner ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(T,D,t,G,R,Y,K,z,m,E,H,U,C,fa,na,Q,q){var n;m=G.ofType({key:"type",defaultKeyValue:"button",base:U,typeMap:{button:C,toggle:na,slider:fa}});const B=G.ofType(m);t=n=function(L){function x(r){r=L.call(this,r)||this;r.actionsSections=new B;r.actionsOpen=!1;r.checkPublishStatusEnabled=!1;r.children=new (G.ofType(n));r.childrenSortable=!0;r.hidden=!1;r.layer=null;r.layerView=null;r.listItemCreatedFunction=null;r.open=!1;r.panel=null;r.parent=null;r.sortable=!0;r.view=null;return r}T._inheritsLoose(x,
L);var V=x.prototype;V.initialize=function(){this.handles.add([K.watch(()=>this.layer,r=>this._watchLayerProperties(r),K.initial),K.watch(()=>this.checkPublishStatusEnabled,r=>this._updateChildrenPublishing(r),K.initial),K.watch(()=>this.view,r=>this._updateChildrenView(r),K.initial),K.watch(()=>this.panel,r=>this._setListItemOnPanel(r),K.initial),K.watch(()=>[this.layer,this.view],()=>this._getLayerView(),K.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})};V.destroy=function(){this.view=null};V.castPanel=function(r){this.get("panel.open")&&!r.hasOwnProperty("open")&&(r.open=!0);return r?new Q(r):null};V.clone=function(){return new n({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};
V._setListItemOnPanel=function(r){r&&(r.listItem=this)};V._updateChildrenPublishing=function(r){const N=this.children;N&&N.forEach(ja=>ja.checkPublishStatusEnabled=r)};V._updateChildrenView=function(r){const N=this.children;N&&N.forEach(ja=>ja.view=r)};V._addChildren=function(r){this.handles.remove("child-list-mode");this.children.removeAll();if(r){r.forEach(ja=>{this.handles.add(K.watch(()=>ja.listMode,()=>this._addChildren(r)),"child-list-mode")});var N=r.filter(ja=>"hide"!==q.findLayerListMode(ja));
this.children.addMany(this._makeChildren(N))}};V._watchSublayerChanges=function(r){r&&this.handles.add(r.on("change",()=>{this._addChildren(r)}),"layer")};V._initializeChildLayers=function(r){this._addChildren(r);this._watchSublayerChanges(r)};V._makeChildren=function(r){return r.map(N=>q.canDisplayLayer(N)?new n({layer:N,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()};V._watchLayerProperties=
function(r){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),r))if(this.handles.add(K.watch(()=>r.listMode,()=>this._watchLayerProperties(r)),"layer"),"hide-children"===q.findLayerListMode(r))this.children.removeAll();else{var N=q.getNormalizedChildLayerProperty(r);N&&this.handles.add(K.watch(()=>r[N],()=>{r.hasOwnProperty(N)&&this._initializeChildLayers(r[N])},K.initial),"layer")}};V._getLayerView=function(){var r=T._asyncToGenerator(function*(){const {layer:N,
view:ja}=this;if(N&&ja)try{const qa=yield ja.whenLayerView(N);qa.layer===this.layer&&this._set("layerView",qa)}catch{}});return function(){return r.apply(this,arguments)}}();T._createClass(x,[{key:"connectionStatus",get:function(){const {layerView:r,publishing:N}=this;if(!N&&r&&"connectionStatus"in r)return r.connectionStatus}},{key:"error",get:function(){return this.layer?.loadError}},{key:"incompatible",get:function(){const {layerView:r}=this;return r&&"spatialReferenceSupported"in r?!r.spatialReferenceSupported:
!1}},{key:"title",get:function(){const r=this.get("layer.layer");return(!r||r&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(r){this._override("title",r)}},{key:"publishing",get:function(){const {layer:r,checkPublishStatusEnabled:N}=this;return N&&r&&"publishingInfo"in r&&"publishing"===r.publishingInfo.status}},{key:"updating",get:function(){const {layerView:r,connectionStatus:N,layer:ja,publishing:qa}=this;return qa||N?!1:r?r.updating:
"loading"===ja?.loadStatus||!1}},{key:"visible",get:function(){return this.layer?.visible},set:function(r){const N=this.layer;N&&(N.visible=r)}},{key:"visibleAtCurrentScale",get:function(){return!q.isLayerOutsideScaleRange(this.layer,this.get("view.scale"))}},{key:"visibilityMode",get:function(){return q.findLayerVisibilityMode(this.layer)}}]);return x}(Y.IdentifiableMixin(R.HandleOwnerMixin(t)));D.__decorate([z.property({type:B})],t.prototype,"actionsSections",void 0);D.__decorate([z.property()],
t.prototype,"actionsOpen",void 0);D.__decorate([z.property()],t.prototype,"checkPublishStatusEnabled",void 0);D.__decorate([z.property({type:G})],t.prototype,"children",void 0);D.__decorate([z.property()],t.prototype,"childrenSortable",void 0);D.__decorate([z.property({readOnly:!0})],t.prototype,"connectionStatus",null);D.__decorate([z.property({readOnly:!0})],t.prototype,"error",null);D.__decorate([z.property()],t.prototype,"hidden",void 0);D.__decorate([z.property({readOnly:!0})],t.prototype,"incompatible",
null);D.__decorate([z.property()],t.prototype,"layer",void 0);D.__decorate([z.property({readOnly:!0})],t.prototype,"layerView",void 0);D.__decorate([z.property()],t.prototype,"listItemCreatedFunction",void 0);D.__decorate([z.property()],t.prototype,"open",void 0);D.__decorate([z.property({type:Q})],t.prototype,"panel",void 0);D.__decorate([E.cast("panel")],t.prototype,"castPanel",null);D.__decorate([z.property()],t.prototype,"parent",void 0);D.__decorate([z.property()],t.prototype,"sortable",void 0);
D.__decorate([z.property()],t.prototype,"title",null);D.__decorate([z.property({readOnly:!0})],t.prototype,"publishing",null);D.__decorate([z.property({readOnly:!0})],t.prototype,"updating",null);D.__decorate([z.property()],t.prototype,"view",void 0);D.__decorate([z.property()],t.prototype,"visible",null);D.__decorate([z.property({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null);D.__decorate([z.property({readOnly:!0})],t.prototype,"visibilityMode",null);return t=n=D.__decorate([H.subclass("esri.widgets.LayerList.ListItem")],
t)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(T,D,t,G,R,Y,K){var z;G=z=function(m){function E(H){H=m.call(this,H)||this;H.displayValueEnabled=!1;H.max=1;H.min=0;H.step=.1;H.type="slider";H.value=null;return H}T._inheritsLoose(E,m);E.prototype.clone=
function(){return new z({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};return E}(K);D.__decorate([t.property()],G.prototype,"displayValueEnabled",void 0);D.__decorate([t.property()],G.prototype,"max",void 0);D.__decorate([t.property()],G.prototype,"min",void 0);D.__decorate([t.property()],G.prototype,
"step",void 0);D.__decorate([t.property()],G.prototype,"value",void 0);return G=z=D.__decorate([Y.subclass("esri.support.Action.ActionSlider")],G)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Handles ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),
function(T,D,t,G,R,Y,K,z,m,E,H,U,C,fa){R=function(na){function Q(n,B){n=na.call(this,n,B)||this;n._legend=null;n._handles=new G;n.content=null;n.image=null;n.listItem=null;n.open=!1;n.visible=!0;return n}D._inheritsLoose(Q,na);var q=Q.prototype;q.initialize=function(){this.addHandles(Y.watch(()=>this.content,n=>this._createLegend(n),Y.initial))};q.destroy=function(){const {_legend:n}=this;n&&n.destroy();this._legend=null};q.render=function(){return fa.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
q._renderContent=function(n){const {_legend:B,disabled:L}=this;return!n||L?null:"legend"===n&&B?fa.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:B},B.render()):"string"===typeof n?fa.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:n,innerHTML:n}):C.isWidget(n)?fa.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),key:n},n.render()):
n instanceof HTMLElement?fa.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:n,bind:n,afterCreate:this._attachToNode}):null};q._renderContents=function(){const {content:n}=this;return Array.isArray(n)?n.map(B=>this._renderContent(B)):this._renderContent(n)};q._getLegendOptions=function(){const {listItem:n}=this;if(!n)return{};const {layer:B,view:L}=n;return B&&L?{view:L,layerInfos:[U.getLegendLayerInfo(B)]}:{}};q._createLegend=function(n){this._hasLegend(n)&&
!this._legend&&(new Promise((B,L)=>T(["../Legend"],x=>B(Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}))),L))).then(({default:B})=>{const {_handles:L,listItem:x}=this,V=new B(this._getLegendOptions());this._legend=V;this.notifyChange("className");this.notifyChange("title");B=Y.watch(()=>[x?.view,x?.layer,x?.layer?.source,x?.layer?.parent],()=>this._updateLegend(V),Y.initial);L.add(B,"legends");this.scheduleRender()})};q._hasLegend=function(n){return"legend"===
n?!0:Array.isArray(n)?n.includes("legend"):!1};q._attachToNode=function(n){n.appendChild(this)};q._updateLegend=function(n){n.set(this._getLegendOptions());this.scheduleRender()};q._getWidget=function(n){return"legend"===n?this._legend:C.isWidget(n)?n:null};q._getFirstWidget=function(){const {content:n}=this;if(Array.isArray(n)){let B=null;n.some(L=>{(L=this._getWidget(L))&&(B=L);return!!L});return B}return this._getWidget(n)};D._createClass(Q,[{key:"className",get:function(){const {image:n}=this,
B=this._getFirstWidget();return this._get("className")||!n&&B?B.iconClass:""},set:function(n){this._override("className",n)}},{key:"disabled",get:function(){const {listItem:n,_legend:B,content:L}=this;return n?Array.isArray(L)&&1<L.length?!1:B?!B.activeLayerInfos?.length||!n.visibleAtCurrentScale:!1:!0},set:function(n){this._overrideIfSome("disabled",n)}},{key:"title",get:function(){const n=this._getFirstWidget();return this._get("title")||n?n.label:""},set:function(n){this._override("title",n)}}]);
return Q}(R.IdentifiableMixin(H));t.__decorate([K.property()],R.prototype,"_legend",void 0);t.__decorate([K.property()],R.prototype,"className",null);t.__decorate([K.property()],R.prototype,"content",void 0);t.__decorate([K.property()],R.prototype,"disabled",null);t.__decorate([K.property()],R.prototype,"image",void 0);t.__decorate([K.property()],R.prototype,"listItem",void 0);t.__decorate([K.property()],R.prototype,"title",null);t.__decorate([K.property()],R.prototype,"open",void 0);t.__decorate([K.property()],
R.prototype,"visible",void 0);return R=t.__decorate([E.subclass("esri.widgets.LayerList.ListItemPanel")],R)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(T){function D(m){if(m)return null!=m.listMode?m.listMode:void 0}function t(m){if(m)return null!=m.minScale?m.minScale:void 0}function G(m){if(m)return null!=m.maxScale?m.maxScale:void 0}function R(m){if(m){if(!("type"in m))return"sublayers";if(m.listMode!==z.hideChildren&&"wmts"!==m.type)switch(m.type){case "group":return"layers";
default:return"sublayers"}}}function Y(m,E){m&&m.sort((H,U)=>{H=E.indexOf(H.uid);U=E.indexOf(U.uid);return H>U?-1:H<U?1:0})}function K(m){return!!m?.layer}const z={hide:"hide",hideChildren:"hide-children"};T.canDisplayLayer=function(m){return D(m)!==z.hide};T.canSortSublayers=function(m){m=m&&(m.get("layer.layer")||m.layer);if(!m)return!1;m=m.get("capabilities.exportMap.supportsDynamicLayers");return"boolean"===typeof m?m:!0};T.findLayerListMode=D;T.findLayerMaxScale=G;T.findLayerMinScale=t;T.findLayerVisibilityMode=
function(m){if(!m)return"inherited";var E=m.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof E)return E?"independent":"inherited";E=m.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof E?E?"independent":"inherited":null!=m.visibilityMode?m.visibilityMode:"independent"};T.findSelectedItem=function(m,E){const H=m.layer?.uid;return H&&E.find(U=>U.layer?.uid===H)};T.getItemLayers=function(m){return(m=m?.layer)&&"group"===m.type?m.layers:
null};T.getLegendLayerInfo=function(m){var E=K(m)?m:null;const H=m?.parent;return(E="map-image"===H?.type&&E.source)&&H?{layer:H,title:"",sublayerIds:[E.mapLayerId]}:{layer:m,title:""}};T.getNormalizedChildLayerProperty=R;T.isLayerOutsideScaleRange=function(m,E){if(!m||isNaN(E))return!1;var H=t(m);m=G(m);H=!isNaN(H)&&0<H&&E>H;E=!isNaN(m)&&0<m&&E<m;return H||E};T.isSublayer=K;T.sortChildLayersToIds=function(m,E){if(m=m?.layer){var H=R(m);H&&(m=m.get(H),Y(m,E))}};T.sortLayersToIds=Y;Object.defineProperties(T,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/sortable.esm":function(){define(["exports"],function(T){function D(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(a);b&&(e=e.filter(function(g){return Object.getOwnPropertyDescriptor(a,g).enumerable}));c.push.apply(c,e)}return c}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?D(Object(c),!0).forEach(function(e){var g=c[e];e in
a?Object.defineProperty(a,e,{value:g,enumerable:!0,configurable:!0,writable:!0}):a[e]=g}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):D(Object(c)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(c,e))})}return a}function G(a){"@babel/helpers - typeof";G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&
b!==Symbol.prototype?"symbol":typeof b};return G(a)}function R(){R=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return R.apply(this,arguments)}function Y(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),g;for(g=0;g<e.length;g++){var k=e[g];0<=b.indexOf(k)||(c[k]=a[k])}}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),k=0;k<g.length;k++)e=
g[k],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function K(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function z(a,b,c){a.addEventListener(b,c,!za&&ub)}function m(a,b,c){a.removeEventListener(b,c,!za&&ub)}function E(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function H(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&E(a,b):E(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function U(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace(vb," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace(vb," ")}}function C(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function fa(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=C(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function na(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function Q(){var a=document.scrollingElement;return a?a:document.documentElement}function q(a,b,c,e,g){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==Q()){var k=a.getBoundingClientRect();var l=k.top;var w=k.left;var y=k.bottom;var F=k.right;var I=k.height;var P=k.width}else w=l=0,y=window.innerHeight,F=window.innerWidth,I=window.innerHeight,P=window.innerWidth;if((b||c)&&a!==window&&(g=g||a.parentNode,!za)){do if(g&&g.getBoundingClientRect&&
("none"!==C(g,"transform")||c&&"static"!==C(g,"position"))){y=g.getBoundingClientRect();l-=y.top+parseInt(C(g,"border-top-width"));w-=y.left+parseInt(C(g,"border-left-width"));y=l+k.height;F=w+k.width;break}while(g=g.parentNode)}e&&a!==window&&(e=(a=fa(g||a))&&a.a,g=a&&a.d,a&&(l/=g,w/=e,P/=e,I/=g,y=l+I,F=w+P));return{top:l,left:w,bottom:y,right:F,width:P,height:I}}}function n(a,b,c){var e=r(a,!0);for(a=q(a)[b];e;){b=q(e)[c];var g=void 0;g="top"===c||"left"===c?a>=b:a<=b;if(!g)return e;if(e===Q())break;
e=r(e,!1)}return!1}function B(a,b,c,e){for(var g=0,k=0,l=a.children;k<l.length;){if("none"!==l[k].style.display&&l[k]!==p.ghost&&(e||l[k]!==p.dragged)&&H(l[k],c.draggable,a,!1)){if(g===b)return l[k];g++}k++}return null}function L(a,b){for(a=a.lastElementChild;a&&(a===p.ghost||"none"===C(a,"display")||b&&!E(a,b));)a=a.previousElementSibling;return a||null}function x(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===p.clone||b&&!E(a,
b)||c++;return c}function V(a){var b=0,c=0,e=Q();if(a){do{var g=fa(a),k=g.d;b+=a.scrollLeft*g.a;c+=a.scrollTop*k}while(a!==e&&(a=a.parentNode))}return[b,c]}function r(a,b){if(!a||!a.getBoundingClientRect)return Q();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=C(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;
if(c||b)return a;c=!0}}while(a=a.parentNode);return Q()}function N(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function ja(a,b){return function(){if(!Pa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Pa=setTimeout(function(){Pa=void 0},b)}}}function qa(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function Qa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;
return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function Ga(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==C(c,"display")&&c!==p.ghost){a.push({target:c,rect:q(c)});var e=t({},a[a.length-1].rect);if(c.thisAnimationDuration){var g=fa(c,!0);g&&(e.top-=g.f,e.left-=g.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){var e=a,g=e.splice;
a:{var k=a;c={target:c};for(var l in k)if(k.hasOwnProperty(l))for(var w in c)if(c.hasOwnProperty(w)&&c[w]===k[l][w]){k=Number(l);break a}k=-1}g.call(e,k,1)},animateAll:function(c){var e=this;if(this.options.animation){var g=!1,k=0;a.forEach(function(l){var w=0,y=l.target,F=y.fromRect,I=q(y),P=y.prevFromRect,ia=y.prevToRect;l=l.rect;var da=fa(y,!0);da&&(I.top-=da.f,I.left-=da.e);y.toRect=I;y.thisAnimationDuration&&N(P,I)&&!N(F,I)&&(l.top-I.top)/(l.left-I.left)===(F.top-I.top)/(F.left-I.left)&&(w=Math.sqrt(Math.pow(P.top-
l.top,2)+Math.pow(P.left-l.left,2))/Math.sqrt(Math.pow(P.top-ia.top,2)+Math.pow(P.left-ia.left,2))*e.options.animation);N(I,F)||(y.prevFromRect=F,y.prevToRect=I,w||(w=e.options.animation),e.animate(y,l,I,w));w&&(g=!0,k=Math.max(k,w),clearTimeout(y.animationResetTimer),y.animationResetTimer=setTimeout(function(){y.animationTime=0;y.prevFromRect=null;y.fromRect=null;y.prevToRect=null;y.thisAnimationDuration=null},w),y.thisAnimationDuration=w)});clearTimeout(b);g?b=setTimeout(function(){"function"===
typeof c&&c()},k):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,g,k){if(k){C(c,"transition","");C(c,"transform","");var l=fa(this.el),w=(e.left-g.left)/(l&&l.a||1);e=(e.top-g.top)/(l&&l.d||1);c.animatingX=!!w;c.animatingY=!!e;C(c,"transform","translate3d("+w+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;C(c,"transition","transform "+k+"ms"+(this.options.easing?" "+this.options.easing:""));C(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){C(c,"transition","");C(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},k)}}}}function ba(a){var b=t({putSortable:ka,cloneEl:aa,targetEl:v,rootEl:Z,oldIndex:Ka,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Ca},a);a=b.sortable;var c=b.rootEl,e=b.name,g=b.targetEl,k=b.cloneEl,l=b.toEl,w=b.fromEl,y=b.oldIndex,F=b.newIndex,I=b.oldDraggableIndex,P=b.newDraggableIndex,ia=b.originalEvent,da=b.putSortable,la=
b.extraEventProperties;if(a=a||c&&c[sa]){var X=a.options,ta="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||za||Sa?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=l||c;b.from=w||c;b.item=g||c;b.clone=k;b.oldIndex=y;b.newIndex=F;b.oldDraggableIndex=I;b.newDraggableIndex=P;b.originalEvent=ia;b.pullMode=da?da.lastPutMode:void 0;e=t(t({},la),Ta.getEventProperties(e,a));for(var ua in e)b[ua]=e[ua];c&&c.dispatchEvent(b);X[ta]&&
X[ta].call(a,b)}}function p(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=R({},b);a[sa]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(k,l){k.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==p.supportPointer&&"PointerEvent"in window&&!Ua,emptyInsertThreshold:5};
Ta.initializePlugins(this,a,c);for(var e in c)e in b||(b[e]=c[e]);xb(b);for(var g in this)"_"===g.charAt(0)&&"function"===typeof this[g]&&(this[g]=this[g].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?z(a,"pointerdown",this._onTapStart):(z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart));this.nativeDraggable&&(z(a,"dragover",this),z(a,"dragenter",this));$a.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||
[]);R(this,Ga())}function d(a,b,c,e,g,k,l,w){var y=a[sa],F=y.options.onMove,I;if(!window.CustomEvent||za||Sa){var P=document.createEvent("Event");P.initEvent("move",!0,!0)}else P=new CustomEvent("move",{bubbles:!0,cancelable:!0});P.to=b;P.from=a;P.dragged=c;P.draggedRect=e;P.related=g||b;P.relatedRect=k||q(b);P.willInsertAfter=w;P.originalEvent=l;a.dispatchEvent(P);F&&(I=F.call(y,P,l));return I}function f(a){a.draggable=!1}function h(){kb=!1}function u(a,b,c){c=q(B(c.el,0,c.options,!0));return b?
a.clientX<c.left-10||a.clientY<c.top&&a.clientX<c.right:a.clientY<c.top-10||a.clientY<c.bottom&&a.clientX<c.left}function A(a,b,c){c=q(L(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function J(a,b,c,e,g,k,l,w){a=e?a.clientY:a.clientX;var y=e?c.height:c.width,F=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!l)if(w&&ab<y*g)if(!Va&&(1===Wa?a>F+y*k/2:a<c-y*
k/2)&&(Va=!0),Va)e=!0;else{if(1===Wa?a<F+ab:a>c-ab)return-Wa}else if(a>F+y*(1-g)/2&&a<c-y*(1-g)/2)return b=x(v)<x(b)?1:-1,b;if(e||l)if(a<F+y*k/2||a>c-y*k/2)return a>F+y/2?1:-1;return 0}function O(a){bb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&bb.push(c)}}function S(a){return setTimeout(a,0)}function ha(){ea.forEach(function(a){clearInterval(a.pid)});ea=[]}function Aa(){}function Da(){}var za=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),
Sa=K(/Edge/i),yb=K(/firefox/i),Ua=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),Xa=K(/iP(ad|od|hone)/i),zb=K(/chrome/i)&&K(/android/i),ub={capture:!1,passive:!1},vb=/\s+/g,Pa,sa="Sortable"+(new Date).getTime(),La=[],lb={initializeByDefault:!0},Ta={mount:function(a){for(var b in lb)!lb.hasOwnProperty(b)||b in a||(a[b]=lb[b]);La.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});La.push(a)},pluginEvent:function(a,b,c){var e=
this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var g=a+"Global";La.forEach(function(k){if(b[k.pluginName]){if(b[k.pluginName][g])b[k.pluginName][g](t({sortable:b},c));if(b.options[k.pluginName]&&b[k.pluginName][a])b[k.pluginName][a](t({sortable:b},c))}})},initializePlugins:function(a,b,c,e){La.forEach(function(k){var l=k.pluginName;if(a.options[l]||k.initializeByDefault)k=new k(a,b,a.options),k.sortable=a,k.options=a.options,a[l]=k,R(c,k.defaults)});for(var g in a.options)a.options.hasOwnProperty(g)&&
(e=this.modifyOption(a,g,a.options[g]),"undefined"!==typeof e&&(a.options[g]=e))},getEventProperties:function(a,b){var c={};La.forEach(function(e){"function"===typeof e.eventProperties&&R(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;La.forEach(function(g){a[g.pluginName]&&g.optionListeners&&"function"===typeof g.optionListeners[b]&&(e=g.optionListeners[b].call(a[g.pluginName],c))});return e}},Jb=["evt"],pa=function(a,b){var c=2<arguments.length&&void 0!==
arguments[2]?arguments[2]:{},e=c.evt;c=Y(c,Jb);Ta.pluginEvent.bind(p)(a,b,t({dragEl:v,parentEl:ca,ghostEl:M,rootEl:Z,nextEl:Ha,lastDownEl:cb,cloneEl:aa,cloneHidden:Ea,dragStarted:Ya,putSortable:ka,activeSortable:p.active,originalEvent:e,oldIndex:Ka,oldDraggableIndex:Ra,newIndex:ra,newDraggableIndex:Ca,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){Ea=!0},cloneNowShown:function(){Ea=!1},dispatchSortableEvent:function(g){ba({sortable:b,name:g,originalEvent:e})}},c))},v,ca,M,
Z,Ha,cb,aa,Ea,Ka,ra,Ra,Ca,db,ka,Ma=!1,eb=!1,$a=[],Ia,va,mb,nb,Cb,Db,Ya,Na,Wa,Va=!1,fb=!1,ab,ma,ob=[],kb=!1,bb=[],gb="undefined"!==typeof document,Eb=Sa||za?"cssFloat":"float",Ib=gb&&!zb&&!Xa&&"draggable"in document.createElement("div"),Fb=function(){if(gb){if(za)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wb=function(a,b){var c=C(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-
parseInt(c.borderRightWidth),g=B(a,0,b);a=B(a,1,b);var k=g&&C(g);b=a&&C(a);var l=k&&parseInt(k.marginLeft)+parseInt(k.marginRight)+q(g).width,w=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+q(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":g&&k["float"]&&"none"!==k["float"]?(c="left"===k["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==
c?"horizontal":"vertical"):g&&("block"===k.display||"flex"===k.display||"table"===k.display||"grid"===k.display||l>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&l+w>e)?"vertical":"horizontal"},Kb=function(a,b,c){var e=c?a.left:a.top,g=c?a.right:a.bottom;a=c?a.width:a.height;var k=c?b.left:b.top,l=c?b.right:b.bottom;b=c?b.width:b.height;return e===k||g===l||e+a/2===k+b/2},Lb=function(a,b){var c;$a.some(function(e){var g=e[sa].options.emptyInsertThreshold;if(g&&!L(e)){var k=q(e),l=b>=k.top-g&&b<=k.bottom+
g;if(a>=k.left-g&&a<=k.right+g&&l)return c=e}});return c},xb=function(a){function b(g,k){return function(l,w,y,F){var I=l.options.group.name&&w.options.group.name&&l.options.group.name===w.options.group.name;if(null==g&&(k||I))return!0;if(null==g||!1===g)return!1;if(k&&"clone"===g)return g;if("function"===typeof g)return b(g(l,w,y,F),k)(l,w,y,F);l=(k?l:w).options.group.name;return!0===g||"string"===typeof g&&g===l||g.join&&-1<g.indexOf(l)}}var c={},e=a.group;e&&"object"==G(e)||(e={name:e});c.name=
e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=c},Ab=function(){!Fb&&M&&C(M,"display","none")},Bb=function(){!Fb&&M&&C(M,"display","")};gb&&!zb&&document.addEventListener("click",function(a){if(eb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),eb=!1},!0);var Ja=function(a){if(v){a=a.touches?a.touches[0]:a;var b=Lb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&
(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[sa]._onDragOver(c)}}},Mb=function(a){v&&v.parentNode[sa]._isOutsideThisEl(a.target)};p.prototype={constructor:p,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Na=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,v):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,g=e.preventOnFilter,
k=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,w=(l||a).target,y=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||w,F=e.filter;O(c);if(!(v||/mousedown|pointerdown/.test(k)&&0!==a.button||e.disabled||y.isContentEditable||!this.nativeDraggable&&Ua&&w&&"SELECT"===w.tagName.toUpperCase()||(w=H(w,e.draggable,c,!1),w&&w.animated||cb===w))){Ka=x(w);Ra=x(w,e.draggable);if("function"===typeof F){if(F.call(this,a,w,this)){ba({sortable:b,rootEl:y,
name:"filter",targetEl:w,toEl:c,fromEl:c});pa("filter",b,{evt:a});g&&a.cancelable&&a.preventDefault();return}}else if(F&&(F=F.split(",").some(function(I){if(I=H(y,I.trim(),c,!1))return ba({sortable:b,rootEl:I,name:"filter",targetEl:w,fromEl:c,toEl:c}),pa("filter",b,{evt:a}),!0}))){g&&a.cancelable&&a.preventDefault();return}e.handle&&!H(y,e.handle,c,!1)||this._prepareDragStart(a,l,w)}}},_prepareDragStart:function(a,b,c){var e=this,g=e.el,k=e.options,l=g.ownerDocument;if(c&&!v&&c.parentNode===g){var w=
q(c);Z=g;v=c;ca=v.parentNode;Ha=v.nextSibling;cb=c;db=k.group;p.dragged=v;Ia={target:v,clientX:(b||a).clientX,clientY:(b||a).clientY};Cb=Ia.clientX-w.left;Db=Ia.clientY-w.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;v.style["will-change"]="all";c=function(){pa("delayEnded",e,{evt:a});p.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!yb&&e.nativeDraggable&&(v.draggable=!0),e._triggerDragStart(a,b),ba({sortable:e,name:"choose",originalEvent:a}),U(v,k.chosenClass,!0))};k.ignore.split(",").forEach(function(y){na(v,
y.trim(),f)});z(l,"dragover",Ja);z(l,"mousemove",Ja);z(l,"touchmove",Ja);z(l,"mouseup",e._onDrop);z(l,"touchend",e._onDrop);z(l,"touchcancel",e._onDrop);yb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,v.draggable=!0);pa("delayStart",this,{evt:a});!k.delay||k.delayOnTouchOnly&&!b||this.nativeDraggable&&(Sa||za)?c():p.eventCanceled?this._onDrop():(z(l,"mouseup",e._disableDelayedDrag),z(l,"touchend",e._disableDelayedDrag),z(l,"touchcancel",e._disableDelayedDrag),z(l,"mousemove",e._delayedDragTouchMoveHandler),
z(l,"touchmove",e._delayedDragTouchMoveHandler),k.supportPointer&&z(l,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,k.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){v&&f(v);clearTimeout(this._dragStartTimer);
this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;m(a,"mouseup",this._disableDelayedDrag);m(a,"touchend",this._disableDelayedDrag);m(a,"touchcancel",this._disableDelayedDrag);m(a,"mousemove",this._delayedDragTouchMoveHandler);m(a,"touchmove",this._delayedDragTouchMoveHandler);m(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?z(document,
"pointermove",this._onTouchMove):b?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(v,"dragend",this),z(Z,"dragstart",this._onDragStart));try{document.selection?S(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Ma=!1;if(Z&&v){pa("dragStarted",this,{evt:b});this.nativeDraggable&&z(document,"dragover",Mb);var c=this.options;!a&&U(v,c.dragClass,!1);U(v,c.ghostClass,!0);p.active=this;a&&this._appendGhost();
ba({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(va){this._lastX=va.clientX;this._lastY=va.clientY;Ab();for(var a=document.elementFromPoint(va.clientX,va.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(va.clientX,va.clientY);if(a===b)break;b=a}v.parentNode[sa]._isOutsideThisEl(a);if(b){do{if(b[sa]){var c=void 0;if((c=b[sa]._onDragOver({clientX:va.clientX,clientY:va.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=
b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ia){var b=this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var g=M&&fa(M,!0),k=M&&g&&g.a,l=M&&g&&g.d,w=Xa&&ma&&V(ma);k=(b.clientX-Ia.clientX+e.x)/(k||1)+(w?w[0]-ob[0]:0)/(k||1);e=(b.clientY-Ia.clientY+e.y)/(l||1)+(w?w[1]-ob[1]:0)/(l||1);if(!p.active&&!Ma){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}M&&(g?(g.e+=k-(mb||0),g.f+=e-(nb||0)):g={a:1,
b:0,c:0,d:1,e:k,f:e},c="matrix(".concat(g.a,",").concat(g.b,",").concat(g.c,",").concat(g.d,",").concat(g.e,",").concat(g.f,")"),C(M,"webkitTransform",c),C(M,"mozTransform",c),C(M,"msTransform",c),C(M,"transform",c),mb=k,nb=e,va=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!M){var a=this.options.fallbackOnBody?document.body:Z,b=q(v,!0,Xa,!0,a),c=this.options;if(Xa){for(ma=a;"static"===C(ma,"position")&&"none"===C(ma,"transform")&&ma!==document;)ma=ma.parentNode;ma!==document.body&&
ma!==document.documentElement?(ma===document&&(ma=Q()),b.top+=ma.scrollTop,b.left+=ma.scrollLeft):ma=Q();ob=V(ma)}M=v.cloneNode(!0);U(M,c.ghostClass,!1);U(M,c.fallbackClass,!0);U(M,c.dragClass,!0);C(M,"transition","");C(M,"transform","");C(M,"box-sizing","border-box");C(M,"margin",0);C(M,"top",b.top);C(M,"left",b.left);C(M,"width",b.width);C(M,"height",b.height);C(M,"opacity","0.8");C(M,"position",Xa?"absolute":"fixed");C(M,"zIndex","100000");C(M,"pointerEvents","none");p.ghost=M;a.appendChild(M);
C(M,"transform-origin",Cb/parseInt(M.style.width)*100+"% "+Db/parseInt(M.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,g=c.options;pa("dragStart",this,{evt:a});p.eventCanceled?this._onDrop():(pa("setupClone",this),p.eventCanceled||(aa=Qa(v),aa.removeAttribute("id"),aa.draggable=!1,aa.style["will-change"]="",this._hideClone(),U(aa,this.options.chosenClass,!1),p.clone=aa),c.cloneId=S(function(){pa("clone",c);p.eventCanceled||(c.options.removeCloneOnHide||Z.insertBefore(aa,
v),c._hideClone(),ba({sortable:c,name:"clone"}))}),!b&&U(v,g.dragClass,!0),b?(eb=!0,c._loopId=setInterval(c._emulateDragOver,50)):(m(document,"mouseup",c._onDrop),m(document,"touchend",c._onDrop),m(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",g.setData&&g.setData.call(c,e,v)),z(document,"drop",c),C(v,"transform","translateZ(0)")),Ma=!0,c._dragStartId=S(c._dragStarted.bind(c,b,a)),z(document,"selectstart",c),Ya=!0,Ua&&C(document.body,"user-select","none"))},_onDragOver:function(a){function b(Fa,
hb){pa(Fa,X,t({evt:a,isOwner:ia,axis:ua?"vertical":"horizontal",revert:y,dragRect:wa,targetRect:w,canSort:da,fromSortable:la,target:l,completed:e,onMove:function(Gb,Nb){return d(Z,k,v,wa,Gb,q(Gb),a,Nb)},changed:g},hb))}function c(){b("dragOverAnimationCapture");X.captureAnimationState();X!==la&&la.captureAnimationState()}function e(Fa){b("dragOverCompleted",{insertion:Fa});Fa&&(ia?P._hideClone():P._showClone(X),X!==la&&(U(v,ka?ka.options.ghostClass:P.options.ghostClass,!1),U(v,F.ghostClass,!0)),ka!==
X&&X!==p.active?ka=X:X===p.active&&ka&&(ka=null),la===X&&(X._ignoreWhileAnimating=l),X.animateAll(function(){b("dragOverAnimationComplete");X._ignoreWhileAnimating=null}),X!==la&&(la.animateAll(),la._ignoreWhileAnimating=null));if(l===v&&!v.animated||l===k&&!l.animated)Na=null;F.dragoverBubble||a.rootEl||l===document||(v.parentNode[sa]._isOutsideThisEl(a.target),!Fa&&Ja(a));!F.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ta=!0}function g(){ra=x(v);Ca=x(v,F.draggable);ba({sortable:X,
name:"change",toEl:k,newIndex:ra,newDraggableIndex:Ca,originalEvent:a})}var k=this.el,l=a.target,w,y,F=this.options,I=F.group,P=p.active,ia=db===I,da=F.sort,la=ka||P,X=this,ta=!1;if(!kb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();l=H(l,F.draggable,k,!0);b("dragOver");if(p.eventCanceled)return ta;if(v.contains(a.target)||l.animated&&l.animatingX&&l.animatingY||X._ignoreWhileAnimating===l)return e(!1);eb=!1;if(P&&!F.disabled&&(ia?da||(y=ca!==Z):ka===this||(this.lastPutMode=db.checkPull(this,
P,v,a))&&I.checkPut(this,P,v,a))){var ua="vertical"===this._getDirection(a,l);var wa=q(v);b("dragOverValid");if(p.eventCanceled)return ta;if(y)return ca=Z,c(),this._hideClone(),b("revert"),p.eventCanceled||(Ha?Z.insertBefore(v,Ha):Z.appendChild(v)),e(!0);I=L(k,F.draggable);if(!I||A(a,ua,this)&&!I.animated){if(I===v)return e(!1);I&&k===a.target&&(l=I);l&&(w=q(l));if(!1!==d(Z,k,v,wa,l,w,a,!!l))return c(),I&&I.nextSibling?k.insertBefore(v,I.nextSibling):k.appendChild(v),ca=k,g(),e(!0)}else if(I&&u(a,
ua,this)){var xa=B(k,0,F,!0);if(xa===v)return e(!1);l=xa;w=q(l);if(!1!==d(Z,k,v,wa,l,w,a,!1))return c(),k.insertBefore(v,xa),ca=k,g(),e(!0)}else if(l.parentNode===k){w=q(l);var W=0;W=v.parentNode!==k;var oa=!Kb(v.animated&&v.toRect||wa,l.animated&&l.toRect||w,ua);I=ua?"top":"left";var Ba=n(l,"top","top")||n(v,"top","top"),ib=Ba?Ba.scrollTop:void 0;Na!==l&&(xa=w[I],Va=!1,fb=!oa&&F.invertSwap||W);W=J(a,l,w,ua,oa?1:F.swapThreshold,null==F.invertedSwapThreshold?F.swapThreshold:F.invertedSwapThreshold,
fb,Na===l);if(0!==W){oa=x(v);do{oa-=W;var ya=ca.children[oa]}while(ya&&("none"===C(ya,"display")||ya===M))}if(0===W||ya===l)return e(!1);Na=l;Wa=W;ya=l.nextElementSibling;oa=!1;oa=1===W;W=d(Z,k,v,wa,l,w,a,oa);if(!1!==W){if(1===W||-1===W)oa=1===W;kb=!0;setTimeout(h,30);c();oa&&!ya?k.appendChild(v):l.parentNode.insertBefore(v,oa?ya:l);Ba&&qa(Ba,0,ib-Ba.scrollTop);ca=v.parentNode;void 0===xa||fb||(ab=Math.abs(xa-q(l)[I]));g();return e(!0)}}if(k.contains(v))return e(!1)}return!1}},_ignoreWhileAnimating:null,
_offMoveEvents:function(){m(document,"mousemove",this._onTouchMove);m(document,"touchmove",this._onTouchMove);m(document,"pointermove",this._onTouchMove);m(document,"dragover",Ja);m(document,"mousemove",Ja);m(document,"touchmove",Ja)},_offUpEvents:function(){var a=this.el.ownerDocument;m(a,"mouseup",this._onDrop);m(a,"touchend",this._onDrop);m(a,"pointerup",this._onDrop);m(a,"touchcancel",this._onDrop);m(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ra=x(v);Ca=x(v,
c.draggable);pa("drop",this,{evt:a});ca=v&&v.parentNode;ra=x(v);Ca=x(v,c.draggable);if(!p.eventCanceled&&(Va=fb=Ma=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(m(document,"drop",this),m(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ua&&C(document.body,"user-select",""),C(v,"transform",""),a&&(Ya&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),
M&&M.parentNode&&M.parentNode.removeChild(M),(Z===ca||ka&&"clone"!==ka.lastPutMode)&&aa&&aa.parentNode&&aa.parentNode.removeChild(aa),v&&(this.nativeDraggable&&m(v,"dragend",this),f(v),v.style["will-change"]="",Ya&&!Ma&&U(v,ka?ka.options.ghostClass:this.options.ghostClass,!1),U(v,this.options.chosenClass,!1),ba({sortable:this,name:"unchoose",toEl:ca,newIndex:null,newDraggableIndex:null,originalEvent:a}),Z!==ca?(0<=ra&&(ba({rootEl:ca,name:"add",toEl:ca,fromEl:Z,originalEvent:a}),ba({sortable:this,
name:"remove",toEl:ca,originalEvent:a}),ba({rootEl:ca,name:"sort",toEl:ca,fromEl:Z,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ca,originalEvent:a})),ka&&ka.save()):ra!==Ka&&0<=ra&&(ba({sortable:this,name:"update",toEl:ca,originalEvent:a}),ba({sortable:this,name:"sort",toEl:ca,originalEvent:a})),p.active)))){if(null==ra||-1===ra)ra=Ka,Ca=Ra;ba({sortable:this,name:"end",toEl:ca,originalEvent:a});this.save()}this._nulling()},_nulling:function(){pa("nulling",this);Z=v=ca=M=Ha=aa=cb=Ea=Ia=va=
Ya=ra=Ca=Ka=Ra=Na=Wa=ka=db=p.dragged=p.ghost=p.clone=p.active=null;bb.forEach(function(a){a.checked=!0});bb.length=mb=nb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":v&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,g=c.length,k=this.options;e<g;e++)if(b=c[e],
H(b,k.draggable,this.el,!1)){var l=a,w=l.push,y;if(!(y=b.getAttribute(k.dataIdAttr))){b=b.tagName+b.className+b.src+b.href+b.textContent;y=b.length;for(var F=0;y--;)F+=b.charCodeAt(y);y=F.toString(36)}w.call(l,y)}return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(g,k){k=e.children[k];H(k,this.options.draggable,e,!1)&&(c[g]=k)},this);b&&this.captureAnimationState();a.forEach(function(g){c[g]&&(e.removeChild(c[g]),e.appendChild(c[g]))});b&&this.animateAll()},save:function(){var a=
this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return H(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ta.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&xb(c)},destroy:function(){pa("destroy",this);var a=this.el;a[sa]=null;m(a,"mousedown",this._onTapStart);m(a,"touchstart",this._onTapStart);m(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(m(a,"dragover",this),m(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();$a.splice($a.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Ea||(pa("hideClone",this),p.eventCanceled||(C(aa,"display","none"),this.options.removeCloneOnHide&&aa.parentNode&&aa.parentNode.removeChild(aa),Ea=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ea&&(pa("showClone",this),p.eventCanceled||(v.parentNode!=Z||this.options.group.revertClone?Ha?Z.insertBefore(aa,Ha):Z.appendChild(aa):
Z.insertBefore(aa,v),this.options.group.revertClone&&this.animate(v,aa),C(aa,"display",""),Ea=!1))}};gb&&z(document,"touchmove",function(a){(p.active||Ma)&&a.cancelable&&a.preventDefault()});p.utils={on:z,off:m,css:C,find:na,is:function(a,b){return!!H(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:ja,closest:H,toggleClass:U,clone:Qa,index:x,nextTick:S,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wb,getChild:B};p.get=
function(a){return a[sa]};p.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(p.utils=t(t({},p.utils),e.utils));Ta.mount(e)})};p.create=function(a,b){return new p(a,b)};p.version="1.15.0";var ea=[],Za,pb,qb=!1,rb,sb,jb,Oa,tb=ja(function(a,b,c,e){if(b.scroll){var g=
(a.touches?a.touches[0]:a).clientX,k=(a.touches?a.touches[0]:a).clientY,l=b.scrollSensitivity,w=b.scrollSpeed,y=Q(),F=!1;if(pb!==c){pb=c;ha();Za=b.scroll;var I=b.scrollFn;!0===Za&&(Za=r(c,!0))}c=0;var P=Za;do{var ia=P,da=q(ia),la=da.top,X=da.bottom,ta=da.left,ua=da.right,wa=da.width;da=da.height;var xa=void 0,W=void 0,oa=ia.scrollWidth,Ba=ia.scrollHeight;W=C(ia);var ib=ia.scrollLeft,ya=ia.scrollTop;ia===y?(xa=wa<oa&&("auto"===W.overflowX||"scroll"===W.overflowX||"visible"===W.overflowX),W=da<Ba&&
("auto"===W.overflowY||"scroll"===W.overflowY||"visible"===W.overflowY)):(xa=wa<oa&&("auto"===W.overflowX||"scroll"===W.overflowX),W=da<Ba&&("auto"===W.overflowY||"scroll"===W.overflowY));ta=xa&&(Math.abs(ua-g)<=l&&ib+wa<oa)-(Math.abs(ta-g)<=l&&!!ib);la=W&&(Math.abs(X-k)<=l&&ya+da<Ba)-(Math.abs(la-k)<=l&&!!ya);if(!ea[c])for(X=0;X<=c;X++)ea[X]||(ea[X]={});if(ea[c].vx!=ta||ea[c].vy!=la||ea[c].el!==ia)if(ea[c].el=ia,ea[c].vx=ta,ea[c].vy=la,clearInterval(ea[c].pid),0!=ta||0!=la)F=!0,ea[c].pid=setInterval(function(){e&&
0===this.layer&&p.active._onTouchMove(jb);var Fa=ea[this.layer].vy?ea[this.layer].vy*w:0,hb=ea[this.layer].vx?ea[this.layer].vx*w:0;"function"===typeof I&&"continue"!==I.call(p.dragged.parentNode[sa],hb,Fa,a,jb,ea[this.layer].el)||qa(ea[this.layer].el,hb,Fa)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&P!==y&&(P=r(P,!1)));qb=F}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,g=a.activeSortable,k=a.dispatchSortableEvent,l=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(g=c||
g,l(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),g&&!g.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};Aa.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=B(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);
this.sortable.animateAll();a&&a.animateAll()},drop:Hb};R(Aa,{pluginName:"revertOnSpill"});Da.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};R(Da,{pluginName:"removeOnSpill"});p.mount(new function(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&
(this[b]=this[b].bind(this))}a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):b.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?
m(document,"dragover",this._handleAutoScroll):(m(document,"pointermove",this._handleFallbackAutoScroll),m(document,"touchmove",this._handleFallbackAutoScroll),m(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Oa);ha();clearTimeout(Pa);Pa=void 0},nulling:function(){jb=pb=Za=qb=Oa=rb=sb=null;ea.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,g=(b.touches?b.touches[0]:b).clientX,k=(b.touches?b.touches[0]:b).clientY,
l=document.elementFromPoint(g,k);jb=b;if(c||this.options.forceAutoScrollFallback||Sa||za||Ua){tb(b,this.options,l,c);var w=r(l,!0);!qb||Oa&&g===rb&&k===sb||(Oa&&clearInterval(Oa),Oa=setInterval(function(){var y=r(document.elementFromPoint(g,k),!0);y!==w&&(w=y,ha());tb(b,e.options,y,c)},10),rb=g,sb=k)}else this.options.bubbleScroll&&r(l,!0)!==Q()?tb(b,this.options,r(l,!1),!1):ha()}};return R(a,{pluginName:"scroll",initializeByDefault:!0})});p.mount(Da,Aa);T.Sortable=p})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/events ../core/Handles ../core/has ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./LayerList/support/layerListUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../chunks/sortable.esm".split(" "),function(T,
D,t,G,R,Y,K,z,m,E,H,U,C,fa,na,Q,q,n,B,L,x,V,r){function N(Ga){const {actionsOpen:ba,children:p}=Ga;ba&&(Ga.actionsOpen=!1);p.forEach(d=>N(d))}const ja=G.ofType(Q),qa={exclusive:"exclusive",inherited:"inherited",independent:"independent"},Qa={statusIndicators:!0,errors:!1};G=function(Ga){function ba(d,f){var h=Ga.call(this,d,f)||this;h._handles=new Y;h._sortableNodes=new Map;h._sortableMap=new Map;h._focusSortUid=null;h._newUI=K("esri-layerlist-new-ui");h._tooltipReferenceMap=new Map;h.visibleItems=
null;h.iconClass="esri-icon-layers";h.listItemCanGiveFunction=null;h.listItemCanReceiveFunction=null;h.messages=null;h.messagesCommon=null;h.multipleSelectionEnabled=!1;h.selectionEnabled=!1;h.selectedItems=new ja;h.viewModel=new na;h.visibleElements={...Qa};h._onSortableSort=({to:u,from:A,item:J,newIndex:O})=>{A&&u&&(A===u?h._sortLayers(h._sortableMap.get(A.dataset.group)):h._moveLayerFromChildList({to:u,from:A,item:J,newIndex:O}))};h._sortableCanSort=(u,A)=>!(!u.el.dataset.group||!A.el.dataset.group);
h._sortableCanPull=(u,A,J)=>{const {listItemCanGiveFunction:O}=D._assertThisInitialized(h);J={selected:J["data-item"],from:A.el["data-item"],to:u.el["data-item"]};return h._sortableCanSort(u,A)&&"function"===typeof O?O.call(null,J):!0};h._sortableCanPut=(u,A,J)=>{const {listItemCanReceiveFunction:O}=D._assertThisInitialized(h);J={selected:J["data-item"],from:A.el["data-item"],to:u.el["data-item"]};return h._sortableCanSort(u,A)&&"function"===typeof O?O.call(null,J):!0};h._onSortableEnd=({oldIndex:u,
from:A,to:J,item:O})=>{A!==J&&A.insertBefore(O,A.children[u])};return h}D._inheritsLoose(ba,Ga);var p=ba.prototype;p.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.addHandles([m.on(()=>this.operationalItems,"change",()=>this._itemsChanged(d)),m.watch(()=>this.visibleElements,()=>this._itemsChanged(d)),m.watch(()=>this.selectionEnabled,()=>this._toggleAllSorting(),m.initial)])};p.loadDependencies=function(){return Promise.all([new Promise((d,f)=>T(["../chunks/calcite-icon"],
d,f)),new Promise((d,f)=>T(["../chunks/calcite-tooltip"],d,f))])};p.destroy=function(){this._destroySortables();this._tooltipReferenceMap.clear();this._handles.destroy();this._handles=null};p.castVisibleElements=function(d){return{...Qa,...d}};p.triggerAction=function(d,f){return this.viewModel.triggerAction(d,f)};p.render=function(){const {visibleItems:d,_newUI:f}=this;var h=this.viewModel?.state;h={["esri-layer-list--new-ui"]:f,["esri-hidden"]:"loading"===h,["esri-disabled"]:"disabled"===h};const u=
this.renderItemTooltips(),A=this.renderItems();return x.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",h)},d?.length?[u,A]:this.renderNoItems())};p.renderItemTooltip=function(d){const {_tooltipReferenceMap:f,messages:h}=this;return d?x.tsx("calcite-tooltip",{label:h.layerIncompatible,referenceElement:f.get(d.uid)},h.layerIncompatibleTooltip):null};p.renderItemTooltipNodes=function(d){const {incompatible:f,children:h}=d;return[f?this.renderItemTooltip(d):null,...(f?
[]:h?.toArray().map(u=>this.renderItemTooltipNodes(u)))]};p.renderItemTooltips=function(){return this.visibleItems.toArray().map(d=>this.renderItemTooltipNodes(d))};p.renderNoItems=function(){return x.tsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};p.renderItems=function(){const {visibleItems:d,selectionEnabled:f,messages:h}=this;return x.tsx("ul",{"aria-label":h.widgetLabel,role:f?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,
afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},d?.map(u=>this.renderItem(u,null)).toArray())};p.renderActionsMenuIcon=function(d,f){const {messagesCommon:h}=this;return x.tsx("div",{key:"actions-menu-toggle","data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),
tabindex:"0",role:"button","aria-controls":f,"aria-label":h.options,title:h.options},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};p.renderActionsMenu=function(d,f,h,u){var {panel:A}=d;A=A&&A.visible?this.renderPanelButton(A):null;const J=(f=1===h&&this._getSingleActionButton(f))?this.renderAction({item:d,action:f,singleAction:!0}):null;return(d=!f&&h?this.renderActionsMenuIcon(d,u):null)||A||f?x.tsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},
A,J,d):null};p.renderChildList=function(d,f){const {selectionEnabled:h}=this,{visibilityMode:u,children:A}=d,J=this._hasChildren(d),O=!J&&h&&"group"===d.layer?.type,{exclusive:S,inherited:ha}=qa,Aa={["esri-layer-list__list--exclusive"]:u===S,["esri-layer-list__list--inherited"]:u===ha,["esri-layer-list__list--independent"]:u!==ha&&u!==S};return J||O?x.tsx("ul",{bind:this,key:"list-items",id:f,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,
class:this.classes("esri-layer-list__list",Aa),"aria-expanded":d.open?"true":"false",role:h?"listbox":u===S?"radiogroup":"group",hidden:d.open||O?null:!0},A?.map(Da=>this.renderItem(Da,d)).toArray()):null};p.renderChildrenToggle=function(d,f){var {messagesCommon:h}=this;const u=this._hasChildren(d),A={["esri-layer-list__child-toggle--open"]:d.open};h=d.open?h.collapse:h.expand;return u?x.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",
class:this.classes("esri-layer-list__child-toggle",A),tabindex:"0",role:"button","aria-controls":f,"aria-label":h,title:h},x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null};p.renderItemMessage=function(d){return d.error?x.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-message",role:"alert"},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),this.messages.layerError):d.incompatible?x.tsx("div",{key:"esri-layer-list__incompatible",class:"esri-layer-list__item-message",role:"alert"},x.tsx("span",{bind:this,tabIndex:0,"aria-hidden":"true",class:"esri-icon-notice-triangle",afterCreate:f=>this._setTooltipReference(f,d)}),this.messages.layerIncompatible):
null};p.renderItemContent=function(d,f,h){var {id:u}=this,A=`${u}_${d.uid}`;u=`${A}_actions`;A=`${A}__list`;const {panel:J}=d,O=this._filterActions(d.actionsSections),S=this._countActions(O);return[x.tsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,A),this.renderLabel(d,f,h),this.renderActionsMenu(d,O,S,u)),this.renderItemMessage(d),S?this.renderActionsSections(d,O,u):null,J&&J.open&&!J.disabled?J.render():null,this.renderChildList(d,A)]};p.renderItem=
function(d,f){const {_newUI:h,id:u,selectionEnabled:A,selectedItems:J}=this,O=`${`${u}_${d.uid}`}__title`;var S=this._hasMessage(d);S={["esri-layer-list__item--has-children"]:this._hasChildren(d),["esri-layer-list__item--has-message"]:!!S,["esri-layer-list__item--invisible"]:h&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:A};if(A){const ha={["data-layer-uid"]:d.layer?.uid,["data-sort-filter"]:(!d.sortable).toString()};return x.tsx("li",
{key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":O,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":f?f.uid:"root",tabIndex:0,"aria-selected":q.findSelectedItem(d,J)?"true":"false",role:"option",...ha},this.renderItemContent(d,f,O))}return x.tsx("li",{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,
class:this.classes("esri-layer-list__item",S),"aria-labelledby":O},this.renderItemContent(d,f,O))};p.renderConnectionIcon=function(d){({connectionStatus:d}=d);return z.isSome(d)?x.tsx("calcite-icon",{icon:"connected"===d?"check-circle":"offline",scale:"s"}):null};p.renderItemStatus=function(d,f){var {visibleElements:h}=this;if(!h.statusIndicators)return null;const {connectionStatus:u,publishing:A,updating:J}=d;h=!!u;return x.tsx("span",{class:this.classes({["esri-layer-list__status-indicator"]:!0,
["esri-layer-list__publishing"]:A,["esri-layer-list__updating"]:J&&!f,["esri-layer-list__connection-status"]:h,["esri-layer-list__connection-status--connected"]:h&&"connected"===u}),key:"layer-item-status"},this.renderConnectionIcon(d))};p.renderItemTitle=function(d,f){const {messages:h}=this;if(!d)return null;const u=d.title||h.untitledLayer;d=d.visibleAtCurrentScale?u:`${u} (${h.layerInvisibleAtScale})`;return x.tsx("span",{key:"layer-title-container",id:f,title:d,"aria-label":d,class:"esri-layer-list__item-title"},
u)};p.renderItemToggleIcon=function(d,f){const {_newUI:h}=this,{exclusive:u}=qa;f=f&&f.visibilityMode;return x.tsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:h,["esri-layer-list__item-toggle-icon"]:h&&f!==u,["esri-layer-list__item-radio-icon"]:h&&f===u,["esri-icon-radio-checked"]:f===u&&d.visible,["esri-icon-radio-unchecked"]:f===u&&!d.visible,["esri-icon-visible"]:f!==u&&d.visible,["esri-icon-non-visible"]:f!==u&&!d.visible}),"aria-hidden":"true"})};
p.renderItemToggle=function(d,f,h){const {selectionEnabled:u,messages:A}=this,{exclusive:J}=qa,O=f&&f.visibilityMode;return u?x.tsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":O,tabIndex:0,title:d.visible?A.hideLayer:A.showLayer,"aria-checked":d.visible?"true":"false",role:O===J?"radio":"switch","aria-labelledby":h},this.renderItemToggleIcon(d,f)):x.tsx("span",
{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,f))};p.renderLabel=function(d,f,h){const {selectionEnabled:u,_newUI:A,messages:J}=this,{inherited:O,exclusive:S}=qa,ha=f?.visibilityMode;var Aa=ha===S?"radio":"switch";const Da=A?[this.renderItemTitle(d,h),this.renderItemStatus(d,f),this.renderItemToggle(d,f,h)]:[this.renderItemToggle(d,f,h),this.renderItemTitle(d,h),this.renderItemStatus(d,f)];Aa=u?x.tsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},
Da):x.tsx("div",{key:`item-label-with-selection-${d.uid}`,class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":ha,tabIndex:0,"aria-checked":d.visible?"true":"false",title:d.visible?J.hideLayer:J.showLayer,role:Aa,"aria-labelledby":h},Da);return ha===O||d.error?x.tsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemTitle(d,h),this.renderItemStatus(d,f)):Aa};
p.renderPanelButton=function(d){const {className:f,open:h,title:u,image:A}=d,J=A||f?f:"esri-icon-default-action",O=this._getIconImageStyles(d),S={["esri-layer-list__item-actions-menu-item--active"]:h},ha={["esri-layer-list__item-action-image"]:!!O["background-image"],["esri-disabled-element"]:d.disabled};J&&(ha[J]=!!J);return x.tsx("div",{"aria-disabled":d.disabled.toString(),key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",
S),role:"button",tabindex:d.disabled?null:0,title:u,"aria-label":u},x.tsx("span",{class:this.classes(ha),styles:O}))};p.renderActionsSections=function(d,f,h){f=f.toArray().map((u,A)=>x.tsx("ul",{key:`${d}-action-section-${A}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,u)));return x.tsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:h,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},f)};p.renderActionSection=
function(d,f){return(f&&f.toArray()).map(h=>this.renderAction({item:d,action:h}))};p.renderActionIcon=function(d){const {active:f,className:h}=d,u=this._getIconImageStyles(d);d="button"!==d.type||d.image||h?h:"esri-icon-default-action";const A={["esri-layer-list__item-action-image"]:!f&&!!u["background-image"],["esri-icon-loading-indicator"]:f,["esri-rotating"]:f};d&&!f&&(A[d]=!0);return x.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",A),
styles:u})};p.renderActionTitle=function(d,f){return f?null:x.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};p.renderAction=function(d){const {item:f,action:h,singleAction:u}=d,{active:A,disabled:J,title:O}=h;d={["esri-layer-list__item-actions-menu-item"]:u&&"button"===h.type,["esri-layer-list__item-action"]:A||!u&&"toggle"!==h.type,["esri-layer-list__action-toggle"]:!A&&"toggle"===h.type,["esri-layer-list__action-toggle--on"]:!A&&"toggle"===h.type&&h.value,["esri-disabled-element"]:J};
const S=[this.renderActionIcon(h),this.renderActionTitle(O,u)];return u?x.tsx("div",{bind:this,"data-item":f,"data-action":h,role:"button",key:`single-action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",title:O,"aria-label":O},S):x.tsx("li",{bind:this,"data-item":f,"data-action":h,key:`action-${h.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:O,"aria-label":O},S)};p._setTooltipReference=function(d,
f){this._tooltipReferenceMap.set(f.uid,d);this.scheduleRender()};p._hasMessage=function(d){return!!d.error||d.incompatible};p._hasChildren=function(d){return!!d.children.length&&!this._hasMessage(d)};p._sortNodeRemoved=function(d){const {_sortableMap:f}=this;d=d.dataset.group;const h=f.get(d);h&&h.destroy();f.delete(d)};p._destroySortables=function(){const {_sortableMap:d,_sortableNodes:f}=this;d.forEach(h=>h&&h.destroy());d.clear();f.clear()};p._moveLayerFromChildList=function({to:d,from:f,item:h,
newIndex:u}){this.viewModel.moveListItem(h["data-item"],f["data-item"],d["data-item"],u)};p._sortLayers=function(d){if(d){var f=d.el["data-item"];d=d.toArray();f?q.sortChildLayersToIds(f,d):q.sortLayersToIds(this.view?.map?.layers,d)}};p._toggleSorting=function(d,f){const {_sortableMap:h,selectionEnabled:u}=this,A=h.get(f);var J=d["data-item"];J=("root"===f?!0:J.childrenSortable&&q.canSortSublayers(J))&&u;A?A.option("disabled",!J):J&&(d=r.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:f,
pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!J,chosenClass:"esri-layer-list--chosen"}),h.set(f,d))};p._toggleAllSorting=function(){this._sortableNodes.forEach((d,f)=>this._toggleSorting(d,f))};p._sortNodeCreated=function(d){const f=d.dataset.group;f&&(this._sortableNodes.set(f,d),this._toggleSorting(d,f))};p._setVisibleItems=function(d){this.visibleItems=d?.filter(f=>!f.hidden&&
(this.visibleElements.errors||!f.error))};p._getSingleActionButton=function(d){return d.reduce(f=>f).filter(f=>f&&"button"===f.type).getItemAt(0)};p._focusListItem=function(d){const {_focusSortUid:f}=this;d&&f&&d["data-item"].layer?.uid===f&&(d.focus(),this._focusSortUid=null)};p._watchActionSectionChanges=function(d,f){const h="action-section"+f;this._handles.add(d.on("change",this.scheduleRender.bind(this)),h);d.forEach(u=>this._renderOnActionChanges(u,f))};p._renderOnActionChanges=function(d,f){f=
"actions"+f;"toggle"===d.type?this._handles.add(m.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible,d?.value],()=>this.scheduleRender(),m.initial),f):"slider"===d.type?this._handles.add(m.watch(()=>[d?.className,d?.id,d?.title,d?.visible,d?.value,d?.displayValueEnabled,d?.max,d?.min,d?.step],()=>this.scheduleRender(),m.initial),f):this._handles.add(m.watch(()=>[d?.className,d?.image,d?.id,d?.title,d?.visible],()=>this.scheduleRender(),m.initial),f)};p._renderOnItemChanges=function(d){const f=
d.uid,h="items"+f;this._handles.add([m.watch(()=>[d?.actionsOpen,d?.visible,d?.open,d?.updating,d?.connectionStatus,d?.publishing,d?.title,d?.visibleAtCurrentScale,d?.error,d?.visibilityMode,d?.panel,d?.panel?.title,d?.panel?.content,d?.panel?.className,d?.sortable,d?.childrenSortable],()=>this.scheduleRender(),m.syncAndInitial),m.watch(()=>[d?.hidden,d?.error],()=>this._setVisibleItems(this.operationalItems)),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],
h);d.children.forEach(u=>this._renderOnItemChanges(u));d.actionsSections.forEach(u=>this._watchActionSectionChanges(u,f))};p._itemsChanged=function(d){this._handles.removeAll();d.forEach(f=>this._renderOnItemChanges(f));this._tooltipReferenceMap.clear();this._setVisibleItems(d);this.scheduleRender()};p._filterActions=function(d){return d.map(f=>f.filter(h=>h.visible))};p._countActions=function(d){return d.reduce((f,h)=>f+h.length,0)};p._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===
d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};p._selectionKeydown=function(d){var f=R.eventKey(d);if(["ArrowDown","ArrowUp"].includes(f)){d.stopPropagation();var h=d.currentTarget,u=h["data-item"],{_sortableMap:A,selectedItems:J}=this;if(h=A.get(h.dataset.group)){var O=q.findSelectedItem(u,J),S=h.toArray();d=S.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===
f){const ha=d+1;if(ha>=S.length)return;O?(S.splice(ha,0,S.splice(d,1)[0]),h.sort(S),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())}"ArrowUp"===f&&(f=d-1,-1>=f||(O?(S.splice(f,0,S.splice(d,1)[0]),h.sort(S),this._sortLayers(h),this._focusSortUid=u.layer?.uid):(this._focusSortUid=u.layer?.uid,this.scheduleRender())))}}}else this._toggleSelection(d)};p._toggleActionsOpen=function(d){const f=d.currentTarget["data-item"];var {actionsOpen:h}=
f;(h=!h)&&this.operationalItems.forEach(u=>N(u));f.actionsOpen=h;d.stopPropagation()};p._triggerPanel=function(d){const f=d.currentTarget["data-panel"];d.stopPropagation();f&&!f.disabled&&(f.open=!f.open)};p._triggerAction=function(d){var f=d.currentTarget;const h=f["data-action"];f=f["data-item"];"toggle"===h.type&&(h.value=!h.value);this.triggerAction(h,f);d.stopPropagation()};p._toggleVisibility=function(d){var f=d.currentTarget;const h=f.getAttribute("data-parent-visibility");f=f["data-item"];
h===qa.exclusive&&f.visible||(f.visible=!f.visible);d.stopPropagation()};p._toggleChildrenClick=function(d){const f=d.currentTarget["data-item"];f.open=!f.open;d.stopPropagation()};p._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:f,selectedItems:h}=this;d=d.currentTarget["data-item"];const u=q.findSelectedItem(d,h),{length:A}=h,J=u&&1===A;f?u?h.remove?.(u):h.add(d):A&&!J?(h.removeAll(),h.add(d)):u?h.remove?.(u):h.add(d)};D._createClass(ba,[{key:"label",get:function(){return this.messages?.widgetLabel??
""},set:function(d){this._overrideIfSome("label",d)}},{key:"listItemCreatedFunction",get:function(){return this.viewModel.listItemCreatedFunction},set:function(d){this.viewModel.listItemCreatedFunction=d}},{key:"operationalItems",get:function(){return this.viewModel.operationalItems},set:function(d){this.viewModel.operationalItems=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}}]);return ba}(fa);t.__decorate([E.property()],G.prototype,"visibleItems",
void 0);t.__decorate([E.property()],G.prototype,"iconClass",void 0);t.__decorate([E.property()],G.prototype,"label",null);t.__decorate([E.property()],G.prototype,"listItemCanGiveFunction",void 0);t.__decorate([E.property()],G.prototype,"listItemCanReceiveFunction",void 0);t.__decorate([E.property()],G.prototype,"listItemCreatedFunction",null);t.__decorate([E.property(),B.messageBundle("esri/widgets/LayerList/t9n/LayerList")],G.prototype,"messages",void 0);t.__decorate([E.property(),B.messageBundle("esri/t9n/common")],
G.prototype,"messagesCommon",void 0);t.__decorate([E.property()],G.prototype,"multipleSelectionEnabled",void 0);t.__decorate([E.property()],G.prototype,"operationalItems",null);t.__decorate([E.property()],G.prototype,"selectionEnabled",void 0);t.__decorate([E.property()],G.prototype,"selectedItems",void 0);t.__decorate([E.property()],G.prototype,"view",null);t.__decorate([L.vmEvent("trigger-action"),E.property({type:na})],G.prototype,"viewModel",void 0);t.__decorate([E.property()],G.prototype,"visibleElements",
void 0);t.__decorate([U.cast("visibleElements")],G.prototype,"castVisibleElements",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleActionsOpen",null);t.__decorate([n.accessibleHandler()],G.prototype,"_triggerPanel",null);t.__decorate([n.accessibleHandler()],G.prototype,"_triggerAction",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleVisibility",null);t.__decorate([n.accessibleHandler()],G.prototype,"_toggleChildrenClick",null);t.__decorate([n.accessibleHandler()],G.prototype,
"_toggleSelection",null);return G=t.__decorate([C.subclass("esri.widgets.LayerList")],G)});