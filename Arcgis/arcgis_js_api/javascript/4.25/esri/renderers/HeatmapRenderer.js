// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../symbols ../core/deprecate ../core/lang ../core/Logger ../core/scheduling ../core/screenUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/utils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Renderer ./support/AuthoringInfo ./support/HeatmapColorStop ./support/HeatmapLegendOptions ./support/heatmapUtils ../symbols/SimpleMarkerSymbol".split(" "),
function(m,c,q,b,x,u,y,z,A,d,B,J,C,D,v,E,F,n,G,r,H){function w(g){if(null!=g){const {maxDensity:h,minDensity:e,radius:a}=g;if(null!=h||null!=e||null!=a){const {blurRadius:f,maxPixelIntensity:k,minPixelIntensity:p,...l}=g;return l}}return g}var t;const I=y.getLogger("esri.renderers.HeatmapRenderer");b=t=function(g){function h(a){a=g.call(this,a)||this;a.authoringInfo=null;a.colorStops=[new n({ratio:0,color:new q("rgba(255, 140, 0, 0)")}),new n({ratio:.75,color:new q("rgba(255, 140, 0, 1)")}),new n({ratio:.9,
color:new q("rgba(255, 0,   0, 1)")})];a.field=null;a.fieldOffset=0;a.legendOptions=null;a.maxDensity=.04;a.minDensity=0;a.radius=18;a.referenceScale=0;a.type="heatmap";a.valueExpression=null;a.valueExpressionTitle=null;a._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1};return a}m._inheritsLoose(h,g);var e=h.prototype;e.normalizeCtorArgs=function(a){return w(a)};e._warnAboutDeprecatedGaussianBlurProp=function(a,f){this._warnedProps[a]||"user"!==B.getProperties(this).getDefaultOrigin()||
(this._warnedProps[a]=!0,z.schedule(()=>{x.deprecatedProperty(I,a,{replacement:`${String(f)} (suggested value: ${this._get(f)})`,version:"4.24"})}))};e.read=function(a,f){a=w(a);g.prototype.read.call(this,a,f)};e.getSymbol=function(){return new H};e.getSymbolAsync=function(){var a=m._asyncToGenerator(function*(){return this.getSymbol()});return function(){return a.apply(this,arguments)}}();e.getSymbols=function(){return[this.getSymbol()]};e.collectRequiredFields=function(){var a=m._asyncToGenerator(function*(f,
k){const p=this.field,l=this.valueExpression;p&&"string"===typeof p&&(yield v.collectField(f,k,p));l&&"string"===typeof l&&(yield v.collectArcadeFieldNames(f,k,l))});return function(f,k){return a.apply(this,arguments)}}();e.getAttributeHash=function(){return null};e.getMeshHash=function(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`};e.clone=function(){return new t({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:u.clone(this.colorStops),field:this.field,
legendOptions:u.clone(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};m._createClass(h,[{key:"blurRadius",get:function(){return r.kernelDensityRadiusPtToGaussianBlurRadiusPx(this.radius)},set:function(a){const f=this.maxPixelIntensity,k=this.minPixelIntensity;this._set("radius",r.gaussianBlurRadiusPxToKernelDensityRadiusPt(a));this._warnAboutDeprecatedGaussianBlurProp("blurRadius",
"radius");this._set("maxDensity",f*this._pixelIntensityToDensity);this._set("minDensity",k*this._pixelIntensityToDensity)}},{key:"maxPixelIntensity",get:function(){return this.maxDensity/this._pixelIntensityToDensity},set:function(a){this._set("maxDensity",a*this._pixelIntensityToDensity);this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}},{key:"minPixelIntensity",get:function(){return this.minDensity/this._pixelIntensityToDensity},set:function(a){this._set("minDensity",
a*this._pixelIntensityToDensity);this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}},{key:"_pixelIntensityToDensity",get:function(){return 24/(r.MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR**2*this.blurRadius**4)}}]);return h}(E);c.__decorate([d.property({type:F,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],b.prototype,"authoringInfo",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],b.prototype,
"blurRadius",null);c.__decorate([d.property({type:[n],json:{write:!0}})],b.prototype,"colorStops",void 0);c.__decorate([d.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);c.__decorate([d.property({type:Number,json:{write:{overridePolicy:(g,h,e)=>({enabled:null==e})},origins:{"web-scene":{write:!1}}}})],b.prototype,"fieldOffset",void 0);c.__decorate([d.property({type:G.HeatmapLegendOptions,json:{write:!0}})],b.prototype,"legendOptions",void 0);c.__decorate([d.property({type:Number,
json:{write:!0}})],b.prototype,"maxDensity",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],b.prototype,"maxPixelIntensity",null);c.__decorate([d.property({type:Number,json:{write:!0}})],b.prototype,"minDensity",void 0);c.__decorate([d.property({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],b.prototype,"minPixelIntensity",null);c.__decorate([d.property({type:Number,cast:A.toPt,json:{write:!0}})],b.prototype,
"radius",void 0);c.__decorate([d.property({type:Number,range:{min:0},json:{default:0,write:!0}})],b.prototype,"referenceScale",void 0);c.__decorate([C.enumeration({heatmap:"heatmap"})],b.prototype,"type",void 0);c.__decorate([d.property({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],b.prototype,"valueExpression",void 0);c.__decorate([d.property({type:String})],b.prototype,"valueExpressionTitle",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,
"_pixelIntensityToDensity",null);return b=t=c.__decorate([D.subclass("esri.renderers.HeatmapRenderer")],b)});