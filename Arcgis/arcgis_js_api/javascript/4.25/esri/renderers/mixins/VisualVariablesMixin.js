// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../layers/support/fieldUtils ../support/randomRotationExpression ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
function(n,m,h,r,t,G,H,u,v,w,k,x,y,z,A,B,C,D){const E={base:C,key:"type",typeMap:{opacity:z,color:y,rotation:A,size:B}};n.VisualVariablesMixin=f=>{f=function(p){function l(){var b=p.apply(this,arguments)||this;b._vvFactory=new D;return b}m._inheritsLoose(l,p);var g=l.prototype;g.readVisualVariables=function(b,a,d){return this._vvFactory.readVariables(b,a,d)};g.writeVisualVariables=function(b,a,d,c){a[d]=this._vvFactory.writeVariables(b,c)};g.hasVisualVariables=function(b,a){return b?0<this.getVisualVariablesForType(b,
a).length:0<this.getVisualVariablesForType("size",a).length||0<this.getVisualVariablesForType("color",a).length||0<this.getVisualVariablesForType("opacity",a).length||0<this.getVisualVariablesForType("rotation",a).length};g.getVisualVariablesForType=function(b,a){const d=this.visualVariables;return d?d.filter(c=>c.type===b&&("string"===typeof a?c.target===a:!1===a?!c.target:!0)):[]};g.collectVVRequiredFields=function(){var b=m._asyncToGenerator(function*(a,d){var c=[];this.visualVariables&&(c=c.concat(this.visualVariables));
for(const e of c)if(e&&(e.field&&k.collectField(a,d,e.field),e.normalizationField&&k.collectField(a,d,e.normalizationField),e.valueExpression)){{c=a;var F=d;const q=x.matchRandomRotationExpression(e.valueExpression);r.isSome(q)?(k.collectField(c,F,q),c=!0):c=!1}c||(yield k.collectArcadeFieldNames(a,d,e.valueExpression))}});return function(a,d){return b.apply(this,arguments)}}();m._createClass(l,[{key:"visualVariables",set:function(b){this._vvFactory.visualVariables=b;this._set("visualVariables",this._vvFactory.visualVariables)}},
{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const b of this.visualVariables)if(b.arcadeRequired)return!0;return!1}}]);return l}(f);h.__decorate([t.property({types:[E],value:null,json:{write:!0}})],f.prototype,"visualVariables",null);h.__decorate([u.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],f.prototype,"readVisualVariables",null);h.__decorate([w.writer("visualVariables")],f.prototype,"writeVisualVariables",null);
return f=h.__decorate([v.subclass("esri.renderers.mixins.VisualVariablesMixin")],f)};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});