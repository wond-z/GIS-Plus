// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/RandomLCG","../CIMPlacements","../enums"],function(p,r,t,n){let q=function(){function d(){}d.local=function(){null===d.instance&&(d.instance=new d);return d.instance};d.prototype.execute=function(f,a,b,c){return new u(f,a,b,c)};return d}();q.instance=null;let u=function(){function d(a,b,c,e){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=Math.abs(b.stepX??16)*c;this._stepY=Math.abs(b.stepY??16)*c;if(0!==this._stepX&&0!==this._stepY&&
a&&void 0!==a.rings&&a.rings){this._gridType=b.gridType??n.PlacementGridType.Fixed;if(this._gridType===n.PlacementGridType.Random)this._randomLCG=new r(1*(b.seed??13)),this._randomness=(b.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0;else{this._randomness=0;this._gridAngle=b.gridAngle??0;this._shiftOddRows=b.shiftOddRows??!1;this._offsetX=(b.offsetX??0)*c;this._offsetY=(b.offsetY??0)*c;this._cosAngle=Math.cos(this._gridAngle/
180*Math.PI);this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new t.Placement;this._calculateMinMax(a);
this._geometry=a}}var f=d.prototype;f.next=function(){return this._geometry?this._nextInside():null};f._calculateMinMax=function(a){this._yMax=this._yMin=this._xMax=this._xMin=0;let b,c,e,g,h;c=e=Number.MAX_VALUE;g=h=-Number.MAX_VALUE;for(const l of a.rings){const v=l?l.length:0;for(let m=0;m<v;++m){var k=l[m][0]-this._graphicOriginX-this._offsetX;b=l[m][1]-this._graphicOriginY-this._offsetY;a=this._cosAngle*k-this._sinAngle*b;k=this._sinAngle*k+this._cosAngle*b;c=Math.min(c,a);g=Math.max(g,a);e=
Math.min(e,k);h=Math.max(h,k)}}c+=this._graphicOriginX;g+=this._graphicOriginX;e+=this._graphicOriginY;h+=this._graphicOriginY;this._xMin=Math.round(c/this._stepX);this._xMax=Math.round(g/this._stepX);this._yMin=Math.round(e/this._stepY);this._yMax=Math.round(h/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};f._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%
2&&this._currentX--}var a=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(a+=.5*this._stepX);const b=this._currentY*this._stepY+this._offsetY;this._currentX++;let c;this._gridType===n.PlacementGridType.Random?(c=this._graphicOriginX+a+this._stepX*this._randomness*(.5-this._randomLCG.getFloat())*2/3,a=this._graphicOriginY+b+this._stepY*this._randomness*(.5-this._randomLCG.getFloat())*2/3):(c=this._graphicOriginX+this._cosAngle*a+this._sinAngle*b,a=this._graphicOriginY-
this._sinAngle*a+this._cosAngle*b);this._internalPlacement.setTranslate(c,a);return this._internalPlacement}};return d}();p.PlacementInsidePolygon=q;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});