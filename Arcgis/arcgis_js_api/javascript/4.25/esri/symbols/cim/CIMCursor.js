// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(e,v,d,w){function h(a){a&&(d.isPoint(a)?a.y=-a.y:d.isPolygon(a)?k(a.rings):d.isPolyline(a)?k(a.paths):d.isMultipoint(a)&&l(a.points))}function l(a){if(a){const b=a.length;for(let c=0;c<b;c++)a[c][1]=-a[c][1]}}function k(a){if(a)for(const b of a)l(b)}function m(a){if(a){var b=a.length;for(--b;0<b;--b)a[b][0]-=a[b-1][0],a[b][1]-=a[b-1][1]}}function n(a){if(a)for(const b of a)m(b)}function p(a){if(a){const b=
a.length;for(let c=1;c<b;++c)a[c][0]+=a[c-1][0],a[c][1]+=a[c-1][1]}}function q(a){if(a)for(const b of a)p(b)}function r(a){a&&(d.isPolygon(a)?q(a.rings):d.isPolyline(a)?q(a.paths):d.isMultipoint(a)&&p(a.points),h(a))}function t(a){a&&a.reverse()}function u(a){return{rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]}}let x=function(){function a(b,c,f,g=0){this.isClosed=!1;this.multiPath=null;this.acceptPolygon=c;this.acceptPolyline=f;this.geomUnitsPerPoint=g;
this.pathIndex=this.pathCount=-1;this.iteratePath=!1;b&&(d.isPolygon(b)?c&&(this.multiPath=b.rings,this.isClosed=!0):d.isPolyline(b)?f&&(this.multiPath=b.paths,this.isClosed=!1):d.isExtent(b)&&c&&(this.multiPath=u(b).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new w.Placement}a.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const b=this.processPath(this.multiPath[this.pathIndex]);
if(b)return b}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return a}(),y=function(){function a(b,c,f,g=0){this.isClosed=!1;this.multiPath=null;this.inputGeometries=b;this.acceptPolygon=c;this.acceptPolyline=f;this.geomUnitsPerPoint=g;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}a.prototype.next=function(){for(;;){if(!this.multiPath){for(var b=this.inputGeometries.next();b;)if(d.isPolygon(b)?this.acceptPolygon&&(this.multiPath=b.rings,this.isClosed=!0):d.isPolyline(b)?this.acceptPolyline&&
(this.multiPath=b.paths,this.isClosed=!1):d.isExtent(b)&&this.acceptPolygon&&(this.multiPath=u(b).rings,this.isClosed=!0),this.multiPath){this.pathCount=this.multiPath.length;this.pathIndex=-1;break}else b=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,b=this.processPath(this.multiPath[this.pathIndex]))return b;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return a}();e.PathGeometryCursor=
y;e.PathTransformationCursor=x;e.cloneAndDecodeGeometry=function(a){a=v.clone(a);r(a);return a};e.deltaDecodeGeometry=r;e.deltaEncodeGeometry=function(a){a&&(h(a),d.isPolygon(a)?n(a.rings):d.isPolyline(a)?n(a.paths):d.isMultipoint(a)&&m(a.points))};e.getCoord2D=function(a,b,c){return[a[0]+(b[0]-a[0])*c,a[1]+(b[1]-a[1])*c]};e.getId=function(a){return a[4]};e.isClosedPath=function(a){return a&&0!==a.length?a[0][0]===a[a.length-1][0]&&a[0][1]===a[a.length-1][1]:!1};e.reverseMultipath=function(a){if(a)for(const b of a)t(b)};
e.reversePath=t;e.setId=function(a,b){a[4]=b};Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});