// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(l,b){l.updateOrigins=function(a){a&&a.writtenProperties&&a.writtenProperties.forEach(({target:d,propName:g,newOrigin:n})=>{b.isMultiOriginJSONMixin(d)&&n&&d.originOf(g)!==n&&d.updateOrigin(g,n)})};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(l){l.isMultiOriginJSONMixin=
function(b){return b&&"getAtOrigin"in b&&"originOf"in b};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/UtilityNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/typeUtils ../rest/support/Query".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m,h,p,u,x,E,H){const r=d.getLogger("esri.networks.UtilityNetwork");d=function(B){function D(w){w=B.call(this,w)||this;w.sharedNamedTraceConfigurations=[];w.type="utility";return w}l._inheritsLoose(D,B);var J=D.prototype;J.load=function(){var w=l._asyncToGenerator(function*(C){this.addResolvingPromise(B.prototype.load.call(this,C));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(C));return this});return function(C){return w.apply(this,arguments)}}();
J.getTerminalConfiguration=function(w){let C=null,F=null;var G=w.layer;let A=null;if("feature"===G?.type){if(A=G.layerId,null===A)return null}else return null;G=w.attributes;if(null==G)return null;for(const K of Object.keys(G))"ASSETGROUP"===K.toUpperCase()&&(C=w.getAttribute(K)),"ASSETTYPE"===K.toUpperCase()&&(F=w.getAttribute(K));if(!this.dataElement)return null;let I=null;w=this.dataElement.domainNetworks;for(var L of w)if(w=L.junctionSources?.find(K=>K.layerId===A))if(w=w.assetGroups?.find(K=>
K.assetGroupCode===C))if(w=w.assetTypes?.find(K=>K.assetTypeCode===F)){I=w.terminalConfigurationId;break}return null!=I?(L=this.dataElement.terminalConfigurations?.find(K=>K.terminalConfigurationId===I))?x.fromJSON(L):null:null};J.getTierNames=function(w){return this.dataElement?.domainNetworks.find(C=>C.domainNetworkName===w)?.tiers.map(C=>C.name)||[]};J.getRulesTable=function(){var w=l._asyncToGenerator(function*(){return this._createRulesTable()});return function(){return w.apply(this,arguments)}}();
J.isUtilityLayer=function(w){return this._utilityLayerList.has(w.layerId)};J._loadNamedTraceConfigurationsFromNetwork=function(){var w=l._asyncToGenerator(function*(C){if(0!==this.sharedNamedTraceConfigurations?.length){var F=this.sharedNamedTraceConfigurations.map(G=>G.globalId);C=yield this.queryNamedTraceConfigurations({globalIds:F},C);for(const G of this.sharedNamedTraceConfigurations)if(F=C?.find(A=>A.globalId===G.globalId))F=F.write({},{origin:"service"}),G.read(F,{origin:"service"})}});return function(C){return w.apply(this,
arguments)}}();J._createRulesTable=function(){var w=l._asyncToGenerator(function*(){const C=new k({url:this.rulesTableUrl});yield C.load();var F=this.dataElement?.domainNetworks;if(!F)return null;const G=F.flatMap(A=>[...A.edgeSources,...A.junctionSources]);F=(yield this._queryRulesTable(C)).map(A=>this._hydrateRuleInfo(C,G,A));return new h({layer:C,rules:F})});return function(){return w.apply(this,arguments)}}();J._queryRulesTable=function(){var w=l._asyncToGenerator(function*(C){const F=new H({where:"1\x3d1",
outFields:["*"]});return(yield e.queryAllJSON(C,F)).features});return function(C){return w.apply(this,arguments)}}();J._hydrateRuleInfo=function(w,C,F){var G=w.fieldsIndex;w=G.get("RULETYPE");var A=G.get("CREATIONDATE"),I=G.get("FROMNETWORKSOURCEID"),L=G.get("FROMASSETGROUP"),K=G.get("FROMASSETTYPE"),M=G.get("FROMTERMINALID"),T=G.get("TONETWORKSOURCEID"),P=G.get("TOASSETGROUP");const ca=G.get("TOASSETTYPE"),O=G.get("TOTERMINALID"),da=G.get("VIANETWORKSOURCEID"),ea=G.get("VIAASSETGROUP"),X=G.get("VIAASSETTYPE");
G=G.get("VIATERMINALID");w=F.attributes[w.name];A=new Date(F.attributes[A.name]);F=[{networkSourceId:F.attributes[I.name],assetGroupId:F.attributes[L.name],assetTypeId:F.attributes[K.name],terminalId:F.attributes[M.name]},{networkSourceId:F.attributes[T.name],assetGroupId:F.attributes[P.name],assetTypeId:F.attributes[ca.name],terminalId:F.attributes[O.name]},{networkSourceId:F.attributes[da.name],assetGroupId:F.attributes[ea.name],assetTypeId:F.attributes[X.name],terminalId:F.attributes[G.name]}];
let S;(function(R){R[R.from=0]="from";R[R.to=1]="to";R[R.via=2]="via"})(S||(S={}));I={ruleType:w,creationDate:A};for(const R of[S.from,S.to,S.via]){if(w!==E.RuleType.RTEdgeJunctionEdgeConnectivity&&R===S.via)continue;const V=F[R];L=C.find(W=>W.sourceId===V.networkSourceId);K=L?.assetGroups.find(W=>W.assetGroupCode===V.assetGroupId);M=K?.assetTypes.find(W=>W.assetTypeCode===V.assetTypeId);T=this._getTerminal(w,M,V);if(w===E.RuleType.RTContainment||w===E.RuleType.RTAttachment)T=null;P="";switch(R){case S.from:P=
"from";break;case S.to:P="to";break;case S.via:P="via"}I[`${P}NetworkSource`]=L;I[`${P}AssetGroup`]=K;I[`${P}AssetType`]=M;I[`${P}Terminal`]=T}return I};J._getTerminal=function(w,C,F){if(w===E.RuleType.RTAttachment||w===E.RuleType.RTContainment)return null;const G=C?.terminalConfigurationId;return this.terminalConfigurations?.find(A=>A.id===G)?.terminals?.find(A=>A.id===F.terminalId)??null};l._createClass(D,[{key:"serviceTerritoryFeatureLayerId",get:function(){return this.dataElement?.serviceTerritoryFeatureLayerId??
null}},{key:"networkSystemLayers",get:function(){return new u({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?
`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null})}},{key:"rulesTableId",get:function(){a.deprecatedProperty(r,"rulesTableId",{replacement:"networkSystemLayers.rulesTableId"});return this.sourceJSON?.systemLayers.rulesTableId}},{key:"rulesTableUrl",get:function(){a.deprecatedProperty(r,"rulesTableUrl",{replacement:"networkSystemLayers.rulesTableUrl"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.rulesTableId}`:null}},{key:"subnetworksTableId",
get:function(){a.deprecatedProperty(r,"subnetworksTableId",{replacement:"networkSystemLayers.subnetworksTableId"});return this.sourceJSON?.systemLayers.subnetworksTableId}},{key:"subnetworksTableUrl",get:function(){a.deprecatedProperty(r,"subnetworksTableUrl",{replacement:"networkSystemLayers.subnetworksTableUrl"});return this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.subnetworksTableId}`:null}},{key:"terminalConfigurations",get:function(){return this.dataElement?.terminalConfigurations.map(w=>
x.fromJSON(w))||[]}},{key:"domainNetworkNames",get:function(){return this.dataElement?.domainNetworks.map(w=>w.domainNetworkName)||[]}},{key:"_utilityLayerList",get:function(){const w=new Set;this.dataElement?.domainNetworks?.map(C=>{C.edgeSources.map(F=>{w.add(F.layerId)});C.junctionSources.map(F=>{w.add(F.layerId)})});return w}}]);return D}(m);b.__decorate([g.property({type:[p],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},
read:!1}})],d.prototype,"sharedNamedTraceConfigurations",void 0);b.__decorate([g.property({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],d.prototype,"type",void 0);b.__decorate([g.property({readOnly:!0})],d.prototype,"serviceTerritoryFeatureLayerId",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"networkSystemLayers",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableId",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"rulesTableUrl",null);b.__decorate([g.property({readOnly:!0})],
d.prototype,"subnetworksTableId",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"subnetworksTableUrl",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"terminalConfigurations",null);b.__decorate([g.property({readOnly:!0})],d.prototype,"domainNetworkNames",null);return d=b.__decorate([t.subclass("esri.networks.UtilityNetwork")],d)})},"esri/layers/support/featureQueryAll":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../rest/support/Query"],
function(l,b,a,d){function g(){g=b._asyncToGenerator(function*(k,e,m){e=e.clone();k.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=t(k));const h=n(k),p=k.capabilities.query.supportsPagination;e.start=0;e.num=h;let u=null;for(;;){const x=yield k.source.queryFeaturesJSON(e,m);a.isNone(u)?u=x:u.features=u.features.concat(x.features);u.exceededTransferLimit=x.exceededTransferLimit;if(!p||!x.exceededTransferLimit)break;e.start+=h}return u});return g.apply(this,arguments)}function n(k){return t(k)*
v(k)}function v(k){return k.capabilities.query.maxRecordCount||2E3}function t(k){return k.capabilities.query.supportsMaxRecordCountFactor?d.MAX_MAX_RECORD_COUNT_FACTOR:1}l.getMaxRecordCountFactor=t;l.getMaximumQuerySize=n;l.getMaximumRecordCount=v;l.queryAllJSON=function(k,e,m){return g.apply(this,arguments)};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/Network":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/Error ../core/Loadable ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/utils ../rest/networks/support/QueryNamedTraceConfigurationsParameters ../rest/networks/support/ValidateNetworkTopologyParameters".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m,h,p,u,x,E,H,r,B,D,J,w){n=function(C){function F(A){A=C.call(this,A)||this;A.id=null;A.title=null;A.layerUrl=null;A.dataElement=null;A.fullExtent=null;A.spatialReference=null;A.type=null;A.sourceJSON=null;return A}b._inheritsLoose(F,C);F.fromPortalItem=function(A){return D.networkFromPortalItem(A)};var G=F.prototype;G.initialize=function(){this.when().catch(A=>{e.isAbortError(A)||v.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??
"no title"}', id: '${this.id??"no id"}')`,{error:A})})};G.load=function(){var A=b._asyncToGenerator(function*(I){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),I));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,I));return this});return function(I){return A.apply(this,arguments)}}();G.getLayerIdBySourceId=function(A){if(this.dataElement){const I=this.dataElement.domainNetworks;for(const L of I){for(const K of L.edgeSources?L.edgeSources:
[])if(K.sourceId===A)return K.layerId;for(const K of L.junctionSources?L.junctionSources:[])if(K.sourceId===A)return K.layerId}}return null};G.queryNamedTraceConfigurations=function(){var A=b._asyncToGenerator(function*(I,L){const {queryNamedTraceConfigurations:K}=yield new Promise((T,P)=>l(["../rest/networks/queryNamedTraceConfigurations"],T,P)),M=this.networkServiceUrl;I=new J({...I});return(yield K(M,I,{...L}))?.namedTraceConfigurations??null});return function(I,L){return A.apply(this,arguments)}}();
G.validateNetworkTopology=function(){var A=b._asyncToGenerator(function*(I,L){if(!I.validateArea)throw new g("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const {validateNetworkTopology:K}=yield new Promise((T,P)=>l(["../rest/networks/validateNetworkTopology"],T,P)),M=this.networkServiceUrl;I=new w({...I,returnEdits:!0});L=yield K(M,I,{...L});L?.serviceEdits&&r.editEventBus.emit("edits",{serviceUrl:this.featureServiceUrl??
"",layerId:null,event:{edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:L.serviceEdits}});return L});return function(I,L){return A.apply(this,arguments)}}();G._fetchLayerMetaData=function(){var A=b._asyncToGenerator(function*(I,L){I=yield d(I,{responseType:"json",query:{f:"json"},...L});this.sourceJSON=I.data;this.read(I.data,{origin:"service"})});return function(I,L){return A.apply(this,arguments)}}();
G._fetchDataElement=function(){var A=b._asyncToGenerator(function*(I,L,K){this.dataElement||(I=yield d(`${I}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([L]),f:"json"},...K}).then(M=>M.data.layerDataElements?.[0]))&&this.read(I,{origin:"service"})});return function(I,L,K){return A.apply(this,arguments)}}();b._createClass(F,[{key:"datasetName",get:function(){return this.dataElement?.name??null}},{key:"owner",get:function(){return this.dataElement?.userIdentity??null}},{key:"schemaGeneration",
get:function(){return this.dataElement?.schemaGeneration??null}},{key:"parsedUrl",get:function(){return m.urlToObject(this.layerUrl)}},{key:"featureServiceUrl",get:function(){const A=this.parsedUrl&&B.parse(this.parsedUrl.path);return t.isSome(A)?A.url.path:null}},{key:"networkServiceUrl",get:function(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}},{key:"layerId",get:function(){const A=this.parsedUrl&&B.parse(this.parsedUrl.path);return t.isSome(A)?
A.sublayer:null}},{key:"networkSystemLayers",get:function(){return null}}]);return F}(k.MultiOriginJSONMixin(n));a.__decorate([h.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],n.prototype,"id",void 0);a.__decorate([h.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],n.prototype,"title",void 0);a.__decorate([h.property({type:String,nonNullable:!0,
json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],n.prototype,"layerUrl",void 0);a.__decorate([h.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],n.prototype,"dataElement",void 0);a.__decorate([h.property({type:E,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],n.prototype,"fullExtent",void 0);a.__decorate([h.property({type:H,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],n.prototype,"spatialReference",
void 0);a.__decorate([h.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],n.prototype,"type",void 0);a.__decorate([h.property({readOnly:!0})],n.prototype,"datasetName",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"owner",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"schemaGeneration",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"parsedUrl",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"featureServiceUrl",null);a.__decorate([h.property({readOnly:!0})],
n.prototype,"networkServiceUrl",null);a.__decorate([h.property({readOnly:!0})],n.prototype,"layerId",null);a.__decorate([h.property()],n.prototype,"sourceJSON",void 0);a.__decorate([h.property({readOnly:!0})],n.prototype,"networkSystemLayers",null);return n=a.__decorate([x.subclass("esri.networks.Network")],n)})},"esri/networks/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),
function(l,b,a,d,g,n,v,t){function k(){k=a._asyncToGenerator(function*(p){const u=p.layers,x=p.layerInfos,E=p.returnGeometry||!1,H=p.outSpatialReference;yield Promise.all(u.map(r=>r.load()));return(yield Promise.all(u.map(function(){var r=a._asyncToGenerator(function*(B){var D=x.find(w=>w.layerUrl===B.parsedUrl?.path);if(!D||!D.objectIds?.length)return{layer:B,featureSet:void 0};const J=B.createQuery();J.returnGeometry=E;J.outFields=D.outFields||["*"];J.outSpatialReference=H;J.gdbVersion=B.gdbVersion;
J.objectIds=D.objectIds;D=t.fromJSON(yield n.queryAllJSON(B,J));return{layer:B,featureSet:D}});return function(B){return r.apply(this,arguments)}}()))).filter(r=>void 0!==r.featureSet)});return k.apply(this,arguments)}function e(p,u){return m.apply(this,arguments)}function m(){m=a._asyncToGenerator(function*(p,u){return"Utility Network Layer"===p?({default:p}=yield new Promise((x,E)=>l(["../UtilityNetwork"],H=>x(Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}))),
E)),new p({layerUrl:u})):null});return m.apply(this,arguments)}function h(){h=a._asyncToGenerator(function*(p){p="portalItem"in p?p:{portalItem:p};!p.portalItem||p.portalItem instanceof v||(p={...p,portalItem:new v(p.portalItem)});p=p.portalItem;yield p.load();if("Feature Service"!==p.type)throw new g("portal:unknown-item-type","Unknown item type '${type}'",{type:p.type});p=p.url;var u=yield d(p,{responseType:"json",query:{f:"json"}});return u.data.type&&u.data.type.includes("Network Layer")?e(u.data.type,
p):u.data.layers&&(u=u.data.layers.find(x=>x.type.includes("Network Layer")))?e(u.type,`${p}/${u.id}`):null});return h.apply(this,arguments)}b.getFeaturesFromLayers=function(p){return k.apply(this,arguments)};b.getObjectIdsFromElements=function(p,u){const x=[],E=new Map;for(const r of u){u=p.getLayerIdBySourceId(r.networkSourceId);if(null==u)continue;let B=E.get(u);void 0===B&&(B=[]);B.push(r.objectId);E.set(u,B)}const H=p.featureServiceUrl;E.forEach((r,B)=>x.push({layerUrl:`${H}/${B}`,objectIds:r}));
return x};b.networkFromPortalItem=function(p){return h.apply(this,arguments)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/networks/support/QueryNamedTraceConfigurationsParameters":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,e)||this;e.globalIds=[];e.creators=[];e.tags=[];e.names=[];return e}l._inheritsLoose(k,t);return k}(a.JSONSupport);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"globalIds",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"creators",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:[String],json:{write:!0}})],
a.prototype,"names",void 0);return a=b.__decorate([v.subclass("esri.rest.networks.support.QueryNamedTraceConfigurationsParameters")],a)})},"esri/rest/networks/support/ValidateNetworkTopologyParameters":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../networks/support/typeUtils ../../../geometry/Extent".split(" "),
function(l,b,a,d,g,n,v,t,k,e){a=function(m){function h(p){p=m.call(this,p)||this;p.gdbVersion=null;p.sessionID=null;p.validationType=null;p.validateArea=null;p.validationSet=null;p.returnEdits=!1;return p}l._inheritsLoose(h,m);return h}(d.JSONSupport);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"sessionID",void 0);b.__decorate([g.property({type:k.validationTypeKebabDict.apiValues,json:{type:k.validationTypeKebabDict.jsonValues,
read:k.validationTypeKebabDict.read,write:k.validationTypeKebabDict.write}})],a.prototype,"validationType",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"validateArea",void 0);b.__decorate([g.property({type:[Object],json:{write:!0}})],a.prototype,"validationSet",void 0);b.__decorate([g.property({type:Boolean,json:{write:!0}})],a.prototype,"returnEdits",void 0);return a=b.__decorate([t.subclass("esri.rest.networks.support.ValidateNetworkTopologyParameters")],a)})},"esri/networks/support/typeUtils":function(){define(["exports",
"../../core/jsonMap"],function(l,b){l.RuleType=void 0;var a=l.RuleType||(l.RuleType={});a[a.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";a[a.RTContainment=2]="RTContainment";a[a.RTAttachment=3]="RTAttachment";a[a.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";a[a.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";a=new b.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",
subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const d=new b.JSONMap({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});b=new b.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});l.associationTypeKebabDict=d;l.traceTypeKebabDict=a;
l.validationTypeKebabDict=b;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/networks/RulesTable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./support/typeUtils".split(" "),function(l,b,a,d,g,n,v,t,k,e){d=function(m){function h(u){u=
m.call(this,u)||this;u.request=a;return u}l._inheritsLoose(h,m);var p=h.prototype;p.initialize=function(){};p.load=function(){var u=l._asyncToGenerator(function*(x){x=this.layer.load(x).then(()=>this._initializeRulesTable());this.addResolvingPromise(x);return this});return function(x){return u.apply(this,arguments)}}();p.getFeatureSQL=function(u,x){var E=u.layerId.toString(),H=u.fieldsIndex?.normalizeFieldName("assetGroup");u=u.fieldsIndex?.normalizeFieldName("assetType");H=H?x.attributes[H]:null;
x=u?x.attributes[u]:null;if(E=this.rulesHash[E])if(E=E.assetGroupHash[H])return(E=E.assetTypeHash[x])?E:null;return null};p._initializeRulesTable=function(){var u=l._asyncToGenerator(function*(){const x={};let E;var H=E||(E={});H[H.from=0]="from";H[H.to=1]="to";H[H.via=2]="via";H=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",
assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const C of this.rules)if(C.ruleType===e.RuleType.RTJunctionJunctionConnectivity||C.ruleType===e.RuleType.RTJunctionEdgeConnectivity||C.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity){var r=[[E.from,E.to],[E.to,E.from]];C.ruleType===e.RuleType.RTEdgeJunctionEdgeConnectivity&&(r=[[E.from,E.via],[E.via,E.from],[E.to,E.via],[E.via,E.to]]);for(const F of r){r=F.shift();var B=F.shift(),D=!1;switch(C.ruleType){case e.RuleType.RTEdgeJunctionEdgeConnectivity:D=
r===E.from||r===E.to;break;case e.RuleType.RTJunctionEdgeConnectivity:D=r===E.to}var J=H[r];r=C[J.networkSourceId].layerId.toString();const G=C[J.assetGroupId]?.assetGroupCode?.toString();J=C[J.assetTypeId]?.assetTypeCode?.toString();var w=H[B];B=C[w.networkSourceId].layerId.toString();const A=C[w.assetGroupId]?.assetGroupCode?.toString();w=C[w.assetTypeId];const I=w?.assetTypeCode?.toString(),L=x[r]?x[r]:{assetGroupHash:{}};if(!(G&&J&&A&&I))continue;const K=L.assetGroupHash[G]?L.assetGroupHash[G]:
{assetTypeHash:{}},M=K.assetTypeHash[J]?K.assetTypeHash[J]:{};M[B]=M[B]?M[B]:{};D&&(M[r]=M[r]?M[r]:{},D=`(assetgroup = ${G} AND assettype = ${J})`,M[r].anyVertex=M[r].anyVertex?`${M[r].anyVertex}`:`${D}`,"esriNECPEndVertex"===w.connectivityPolicy&&(M[r].endVertex=M[r]?.endVertex?`${M[r].endVertex}`:`${D}`));D=`(assetgroup = ${A} AND assettype = ${I})`;M[B].anyVertex=M[B]?.anyVertex?`${M[B].anyVertex} OR ${D}`:`${D}`;"esriNECPEndVertex"===w.connectivityPolicy&&(M[B].endVertex=M[B]?.endVertex?`${M[B].endVertex} OR ${D}`:
`${D}`);K.assetTypeHash[J]=M;L.assetGroupHash[G]=K;x[r]=L}}this.rulesHash=x});return function(){return u.apply(this,arguments)}}();return h}(d.JSONSupportMixin(g));b.__decorate([n.property({constructOnly:!0})],d.prototype,"layer",void 0);b.__decorate([n.property({constructOnly:!0})],d.prototype,"rules",void 0);b.__decorate([n.property()],d.prototype,"rulesHash",void 0);b.__decorate([n.property({constructOnly:!0})],d.prototype,"request",void 0);return d=b.__decorate([k.subclass("esri.networks.RulesTable")],
d)})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(l,b,a,d,g,n,v,t,k,e,m){a=function(h){function p(u){u=h.call(this,
u)||this;u.globalId=null;u.title=null;u.traceConfiguration=null;u.creationDate=null;u.creator=null;u.description=null;u.minStartingPoints=null;u.resultTypes=[];u.tags=[];u.traceType=null;return u}l._inheritsLoose(p,h);p.prototype.readTraceConfiguration=function(u,x){return void 0!==u.tierName?m.fromJSON(u):k.fromJSON(u)};return p}(a.MultiOriginJSONSupport);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},
write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",void 0);b.__decorate([d.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);b.__decorate([d.property({type:k,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"traceConfiguration",void 0);b.__decorate([v.reader("service","traceConfiguration")],
a.prototype,"readTraceConfiguration",null);b.__decorate([d.property({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);b.__decorate([d.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);b.__decorate([d.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},
write:{target:"minNumStartingPoints"}}},read:!1}})],a.prototype,"minStartingPoints",void 0);b.__decorate([d.property({type:[Object],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);b.__decorate([d.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);b.__decorate([d.property({type:e.traceTypeKebabDict.apiValues,json:{type:e.traceTypeKebabDict.jsonValues,origins:{service:{read:e.traceTypeKebabDict.read,write:e.traceTypeKebabDict.write}},
read:!1}})],a.prototype,"traceType",void 0);return a=b.__decorate([t.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){a=function(t){function k(e){e=
t.call(this,e)||this;e.conditionBarriers=[];e.outputConditions=[];e.functions=[];e.functionBarriers=[];e.traversabilityScope=null;e.shortestPathNetworkAttributeName=null;e.includeBarriers=null;e.validateConsistency=null;e.ignoreBarriersAtStartingPoints=null;return e}l._inheritsLoose(k,t);return k}(a.JSONSupport);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",
void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);b.__decorate([d.property({type:[Object],json:{write:!0}})],a.prototype,"functionBarriers",void 0);b.__decorate([d.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],
a.prototype,"includeBarriers",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=b.__decorate([v.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),
function(l,b,a,d,g,n,v){d=function(t){function k(e){e=t.call(this,e)||this;e.filterBarriers=[];e.domainNetworkName=null;e.filterBitsetNetworkAttributeName=null;e.filterFunctionBarriers=[];e.filterScope=null;e.includeContainers=null;e.includeContent=null;e.includeIsolated=null;e.includeStructures=null;e.includeUpToFirstSpatialContainer=null;e.nearestNeighbor=null;e.outputFilterCategories=[];e.outputFilters=[];e.propagators=[];e.subnetworkName=null;e.targetTierName=null;e.tierName=null;e.validateLocatability=
null;return e}l._inheritsLoose(k,t);return k}(v);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterBarriers",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"domainNetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"filterBitsetNetworkAttributeName",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"filterFunctionBarriers",void 0);b.__decorate([a.property({type:["junctions",
"edges","junctionsAndEdges"],json:{write:!0}})],d.prototype,"filterScope",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContainers",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeContent",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeIsolated",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"includeStructures",void 0);b.__decorate([a.property({type:Boolean,
json:{write:!0}})],d.prototype,"includeUpToFirstSpatialContainer",void 0);b.__decorate([a.property({type:Object,json:{write:!0}})],d.prototype,"nearestNeighbor",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilterCategories",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"outputFilters",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],d.prototype,"propagators",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],
d.prototype,"subnetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"targetTierName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"tierName",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],d.prototype,"validateLocatability",void 0);return d=b.__decorate([n.subclass("esri.networks.support.UNTraceConfiguration")],d)})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,e)||this;e.rulesTableId=null;e.rulesTableUrl=null;e.subnetworksTableId=null;e.subnetworksTableUrl=null;e.dirtyAreasLayerId=null;e.dirtyAreasLayerUrl=null;return e}l._inheritsLoose(k,t);return k}(a);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableId",
void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);b.__decorate([d.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);return a=b.__decorate([v.subclass("esri.networks.support.NetworkSystemLayers")],a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),
function(l,b,a,d,g,n,v,t,k){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});d=function(e){function m(h){h=e.call(this,h)||this;h.defaultConfiguration=null;h.id=null;h.name=null;h.terminals=[];h.traversabilityModel=null;return h}l._inheritsLoose(m,e);return m}(d.JSONSupport);b.__decorate([g.property({type:String,json:{write:!0}})],d.prototype,"defaultConfiguration",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"terminalConfigurationId"},
write:{target:"terminalConfigurationId"}}})],d.prototype,"id",void 0);b.__decorate([g.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],d.prototype,"name",void 0);b.__decorate([g.property({type:[k],json:{write:!0}})],d.prototype,"terminals",void 0);b.__decorate([g.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],d.prototype,"traversabilityModel",void 0);return d=b.__decorate([t.subclass("esri.networks.support.TerminalConfiguration")],
d)})},"esri/networks/support/Terminal":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,e)||this;e.id=null;e.name=null;return e}l._inheritsLoose(k,t);return k}(a.JSONSupport);b.__decorate([d.property({type:Number,json:{read:{source:"terminalId"},
write:{target:"terminalId"}}})],a.prototype,"id",void 0);b.__decorate([d.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=b.__decorate([v.subclass("esri.networks.support.Terminal")],a)})},"esri/rest/geometryService/project":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),
function(l,b,a,d,g,n,v,t){function k(){k=b._asyncToGenerator(function*(m,h,p){h=e(h);m=n.parseUrl(m);const u={...m.query,f:"json",...h.toJSON()},x=h.outSpatialReference,E=g.getJsonType(h.geometries[0]);h=n.asValidOptions(u,p);return a(m.path+"/project",h).then(({data:{geometries:H}})=>v.decodeGeometries(H,E,x))});return k.apply(this,arguments)}const e=d.ensureType(t);l.project=function(m,h,p){return k.apply(this,arguments)};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/rest/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),function(l,b,a,d,g,n,v,t){a=function(k){function e(m){m=k.call(this,m)||this;m.geometries=null;m.outSpatialReference=null;m.transformation=null;m.transformForward=
null;return m}l._inheritsLoose(e,k);e.prototype.toJSON=function(){const m=this.geometries.map(u=>u.toJSON()),h=this.geometries[0],p={};p.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());p.inSR=h.spatialReference.wkid||JSON.stringify(h.spatialReference.toJSON());p.geometries=JSON.stringify({geometryType:t.getJsonType(h),geometries:m});this.transformation&&(p.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&
(p.transformForward=this.transformForward);return p};return e}(a.JSONSupport);b.__decorate([d.property()],a.prototype,"geometries",void 0);b.__decorate([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property()],a.prototype,"transformation",void 0);b.__decorate([d.property()],a.prototype,"transformForward",void 0);return a=b.__decorate([v.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(l,b,a,d,g,n,v,t,k,e){a=function(m){function h(p){p=m.call(this,p)||this;p.levelLayer=null;p.facilityLayer=null;p.siteLayer=null;return p}l._inheritsLoose(h,m);return h}(a.JSONSupport);b.__decorate([d.property({type:k,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([d.property({type:t,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([d.property({type:e,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([v.subclass("esri.support.MapFloorInfo")],
a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,e)||this;e.facilityIdField=null;e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}l._inheritsLoose(k,
t);return k}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,
write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([v.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,
e)||this;e.facilityIdField=null;e.layerId=null;e.levelIdField=null;e.levelNumberField=null;e.longNameField=null;e.shortNameField=null;e.sublayerId=null;e.verticalOrderField=null;return e}l._inheritsLoose(k,t);return k}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",void 0);
b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],
a.prototype,"verticalOrderField",void 0);return a=b.__decorate([v.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){a=function(t){function k(e){e=t.call(this,e)||this;
e.layerId=null;e.nameField=null;e.siteIdField=null;e.sublayerId=null;return e}l._inheritsLoose(k,t);return k}(a.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([d.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,
write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([v.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/GeotriggersInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),function(l,b,a,d,g,n,v,t,k){a=function(e){function m(h){h=
e.call(this,h)||this;h.geotriggers=null;return h}l._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({types:[k.types],json:{write:{isRequired:!0}}})],a.prototype,"geotriggers",void 0);return a=b.__decorate([t.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(l,b,a){l.types={base:a,key:"type",typeMap:{fence:b}};Object.defineProperties(l,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m,h){d=function(p){function u(x){x=p.call(this,x)||this;x.enterExitRule="enter-contains-and-exit-does-not-intersect";x.feed=null;x.feedAccuracyMode="use-geometry";x.fenceNotificationRule=null;x.fenceParameters=null;x.name=null;x.notificationOptions=null;x.type="fence";return x}l._inheritsLoose(u,p);return u}(e);b.__decorate([n.enumeration(h.enterExitRuleKebabDict)],d.prototype,"enterExitRule",void 0);b.__decorate([a.property({type:t,json:{write:{isRequired:!0}}})],d.prototype,
"feed",void 0);b.__decorate([n.enumeration(h.feedAccuracyModeKebabDict)],d.prototype,"feedAccuracyMode",void 0);b.__decorate([a.property({type:h.fenceNotificationRuleKebabDict.apiValues,json:{type:h.fenceNotificationRuleKebabDict.jsonValues,read:h.fenceNotificationRuleKebabDict.read,write:{writer:h.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],d.prototype,"fenceNotificationRule",void 0);b.__decorate([a.property({type:k,json:{write:{isRequired:!0}}})],d.prototype,"fenceParameters",void 0);
b.__decorate([a.property({type:String,json:{write:!0}})],d.prototype,"name",void 0);b.__decorate([a.property({type:m,json:{write:!0}})],d.prototype,"notificationOptions",void 0);b.__decorate([n.enumeration({fence:"fence"},{readOnly:!0})],d.prototype,"type",void 0);return d=b.__decorate([v.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],d)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(l,b,a,d,g,n,v,t,k,e){d=new d.JSONMap({deviceLocation:"device-location"});a=function(m){function h(p){p=m.call(this,p)||this;p.filterExpression=null;p.type="device-location";return p}l._inheritsLoose(h,m);return h}(a.ClonableMixin(g.JSONSupport));b.__decorate([n.property({type:e,json:{write:!0}})],a.prototype,"filterExpression",void 0);b.__decorate([n.property({type:d.apiValues,readOnly:!0,json:{type:d.jsonValues,read:d.read,write:d.write}})],a.prototype,"type",void 0);return a=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],
a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v,t){a=function(k){function e(m){m=k.call(this,m)||this;m.expression=null;m.returnType="string";m.title=null;return m}l._inheritsLoose(e,k);
return e}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"expression",void 0);b.__decorate([g.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);b.__decorate([g.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=b.__decorate([t.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m){a=function(h){function p(u){u=h.call(this,u)||this;u.fenceSource=null;u.filter=null;u.bufferDistance=null;u.type="features";return u}l._inheritsLoose(p,h);return p}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:m,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"filter",void 0);b.__decorate([g.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);
b.__decorate([t.enumeration({features:"features"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(l,b,a,d,g,n,v,t,k,e){d=function(m){function h(p){p=m.call(this,p)||this;p.geometry=null;p.where=null;return p}l._inheritsLoose(h,m);return h}(d.ClonableMixin(g.JSONSupport));b.__decorate([n.property({types:a.geometryTypes,json:{read:e.fromJSON,write:!0}})],d.prototype,"geometry",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],d.prototype,"where",void 0);return d=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],d)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v,t,k){a=function(e){function m(h){h=e.call(this,h)||this;h.layerId=null;h.layerUrl=null;h.type="feature-layer";return h}l._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);b.__decorate([g.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,"layerUrl",void 0);b.__decorate([t.enumeration({featureLayer:"feature-layer"},
{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([k.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m){a=function(h){function p(u){u=h.call(this,u)||this;u.type="fence";return u}l._inheritsLoose(p,h);return p}(a.ClonableMixin(d.JSONSupport));b.__decorate([e.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([m.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(l,b,a,d,g,n,v,t,k){a=function(e){function m(h){h=e.call(this,h)||this;h.expressionInfo=null;h.requestedActions=null;return h}l._inheritsLoose(m,e);return m}(a.ClonableMixin(d.JSONSupport));b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"expressionInfo",void 0);b.__decorate([g.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=b.__decorate([t.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(l,b){const a=new b.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),d=new b.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});b=new b.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});l.enterExitRuleKebabDict=
a;l.feedAccuracyModeKebabDict=d;l.fenceNotificationRuleKebabDict=b;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/RangeInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){var t;a=t=function(k){function e(m){m=k.call(this,m)||
this;m.activeRange=null;m.currentRangeExtent=null;m.fullRangeExtent=null;return m}l._inheritsLoose(e,k);e.prototype.clone=function(){return new t(d.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))};return e}(a.JSONSupport);b.__decorate([g.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",void 0);b.__decorate([g.property({type:[Number],
json:{write:!0}})],a.prototype,"currentRangeExtent",void 0);b.__decorate([g.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",void 0);return a=t=b.__decorate([v.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),
function(l,b,a,d,g,n,v,t,k,e){var m;a=m=function(h){function p(u){u=h.call(this,u)||this;u.range=null;u.timeSlider=null;u.floorFilter=null;return u}l._inheritsLoose(p,h);p.prototype.clone=function(){return new m(d.clone({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))};return p}(a.JSONSupport);b.__decorate([g.property({type:k,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([g.property({type:e,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([g.property({type:t,
json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=m=b.__decorate([v.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v){var t;a=t=function(k){function e(m){m=k.call(this,m)||this;m.enabled=
!1;m.longNames=!1;m.minimized=!1;m.pinnedLevels=!1;m.site=null;m.facility=null;m.level=null;return m}l._inheritsLoose(e,k);e.prototype.clone=function(){return new t(d.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))};return e}(a.JSONSupport);b.__decorate([g.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([g.property({type:Boolean,
json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);b.__decorate([g.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([g.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([g.property({type:String,
json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([g.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=t=b.__decorate([v.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v,t){var k;a=new a.JSONMap({slider:"slider",picker:"picker"});d=k=function(e){function m(h){h=e.call(this,h)||this;h.interactionMode=null;h.numStops=null;h.stopInterval=null;return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})};return m}(d.JSONSupport);b.__decorate([g.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},
write:{isRequired:!0,writer:a.write}}})],d.prototype,"interactionMode",void 0);b.__decorate([g.property({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const e=null!=this.stopInterval;return{enabled:!e,isRequired:!e}}}}})],d.prototype,"numStops",void 0);b.__decorate([g.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],d.prototype,"stopInterval",void 0);return d=k=b.__decorate([t.subclass("esri.webdoc.widgets.Range")],
d)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(l,b,a,d,g,n,v,t,k,e,m,h,p){var u;
g=u=function(x){function E(r){r=x.call(this,r)||this;r.currentTimeExtent=null;r.fullTimeExtent=null;r.loop=!1;r.numStops=null;r.numThumbs=null;r.stopDelay=null;r.stopInterval=null;r.stops=null;return r}l._inheritsLoose(E,x);var H=E.prototype;H.readCurrentTimeExtent=function(r){if(r)return new a({start:null!=r[0]?new Date(r[0]):null,end:null!=r[1]?new Date(r[1]):null})};H.writeCurrentTimeExtent=function(r,B,D){r&&t.setDeepValue(D,[v.isSome(r.start)?r.start.getTime():null,v.isSome(r.end)?r.end.getTime():
null],B)};H.readFullTimeExtent=function(r,B){if(r=B.properties)return new a({start:null!=r.startTime?new Date(r.startTime):null,end:null!=r.endTime?new Date(r.endTime):null})};H.writeFullTimeExtent=function(r,B){if(r){B=B.properties=B.properties||{};var D=r.end;r=r.start;D&&(B.endTime=v.isSome(D)?D.getTime():null);r&&(B.startTime=v.isSome(r)?r.getTime():null)}};H.readStopInterval=function(r,B,D){return r?d.fromJSON({value:r.interval,unit:r.units},D):null};H.writeStopInterval=function(r,B,D,J){r&&
(r=r.toJSON(J),t.setDeepValue(D,{interval:r.value,units:r.unit},B))};H.readStops=function(r){return r&&r.length?r.map(B=>new Date(B)):null};H.writeStops=function(r,B,D){r&&r.length&&t.setDeepValue(D,r.map(J=>J.getTime()),B)};H.clone=function(){return new u(n.clone({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))};return E}(g.JSONSupport);
b.__decorate([k.property({type:a,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],g.prototype,"currentTimeExtent",void 0);b.__decorate([m.reader("currentTimeExtent")],g.prototype,"readCurrentTimeExtent",null);b.__decorate([p.writer("currentTimeExtent")],g.prototype,"writeCurrentTimeExtent",null);b.__decorate([k.property({type:a,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],
g.prototype,"fullTimeExtent",void 0);b.__decorate([m.reader("fullTimeExtent")],g.prototype,"readFullTimeExtent",null);b.__decorate([p.writer("fullTimeExtent")],g.prototype,"writeFullTimeExtent",null);b.__decorate([k.property({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],g.prototype,"loop",void 0);b.__decorate([k.property({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var x=
!!this.stops?.length;x=!(this.stopInterval||x);return{enabled:x,isRequired:x}}}}})],g.prototype,"numStops",void 0);b.__decorate([k.property({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],g.prototype,"numThumbs",void 0);b.__decorate([k.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],g.prototype,"stopDelay",void 0);b.__decorate([k.property({type:d,
json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){const x=!!this.stops?.length;return{enabled:!x,isRequired:!(null!=this.numStops||x)}}}}})],g.prototype,"stopInterval",void 0);b.__decorate([m.reader("stopInterval")],g.prototype,"readStopInterval",null);b.__decorate([p.writer("stopInterval")],g.prototype,"writeStopInterval",null);b.__decorate([k.property({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",
overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],g.prototype,"stops",void 0);b.__decorate([m.reader("stops")],g.prototype,"readStops",null);b.__decorate([p.writer("stops")],g.prototype,"writeStops",null);return g=u=b.__decorate([h.subclass("esri.webdoc.widgets.TimeSlider")],g)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(l){const b={width:600,height:400};l.getOptimalThumbnailSize=function(a,d){d=d||b;let {width:g,height:n}=d;d=g/n;
1.5>d?n=g/1.5:1.5<d&&(g=1.5*n);g>a.width&&(n*=a.width/g,g=a.width);n>a.height&&(g*=a.height/n,n=a.height);return{width:Math.round(g),height:Math.round(n)}};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webmap/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(l,b,a,d,g,n,v,t){var k;a=k=function(e){function m(h){h=e.call(this,h)||this;h.editing=null;h.offline=null;h.viewing=null;return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k(d.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))};return m}(a.JSONSupport);b.__decorate([g.property({json:{write:!0}})],a.prototype,"editing",void 0);b.__decorate([g.property({json:{write:!0}})],a.prototype,"offline",void 0);b.__decorate([g.property({type:t,json:{write:!0}})],
a.prototype,"viewing",void 0);return a=k=b.__decorate([v.subclass("esri.webmap.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(l,b,a,d,g,n,v,t){var k;a=k=function(e){function m(h){h=e.call(this,
h)||this;h.search=null;return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k(d.clone({search:this.search}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:!0}})],a.prototype,"search",void 0);return a=k=b.__decorate([v.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m,h,p){var u;const x=a.ofType(h),E=a.ofType(p);a=u=function(H){function r(D){D=H.call(this,D)||this;D.addressSearchEnabled=!0;D.enabled=!0;D.hintText=null;D.layers=new x;D.tables=new E;return D}l._inheritsLoose(r,H);var B=r.prototype;B.readAddressSearchEnabled=function(D){return!D};B.writeAddressSearchEnabled=function(D,J,w){J[w]=!D};B.clone=function(){return new u(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,
tables:this.tables}))};return r}(d.JSONSupport);b.__decorate([n.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([t.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([e.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([n.property({type:Boolean,
nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([n.property({type:x,json:{write:{overridePolicy:m.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([n.property({type:E,json:{read:!0,write:{overridePolicy:m.writeNonEmptyCollectionPolicy}}})],
a.prototype,"tables",void 0);return a=u=b.__decorate([k.subclass("esri.webdoc.applicationProperties.Search")],a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(l){l.writeNonEmptyCollectionPolicy=function(b){return{enabled:!!b?.length}};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(l,b,a,d,g,n,v,t){var k;a=k=function(e){function m(h){h=e.call(this,h)||this;h.field=null;h.id=null;h.subLayer=null;return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k(d.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([g.property({type:n.Integer,
json:{write:!0}})],a.prototype,"subLayer",void 0);return a=k=b.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchLayer")],a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(l,b,a,d,g,n,v,t,k){var e;a=e=function(m){function h(p){p=m.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}l._inheritsLoose(h,m);h.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return h}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([v.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([t.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),function(l,b,a,d,g,n,v,t){var k;a=k=function(e){function m(h){h=
e.call(this,h)||this;h.field=null;h.id=null;return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k(d.clone({field:this.field,id:this.id}))};return m}(a.JSONSupport);b.__decorate([g.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=k=b.__decorate([v.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(l,b,a,d,g,n,v,t,k){var e;a=e=function(m){function h(p){p=m.call(this,p)||this;p.exactMatch=!1;p.name=null;p.type=null;return p}l._inheritsLoose(h,m);h.prototype.clone=function(){return new e({exactMatch:this.exactMatch,type:this.type,name:this.name})};return h}(a.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([v.enumeration(k.kebabDict)],
a.prototype,"type",void 0);return a=e=b.__decorate([t.subclass("esri.webdoc.applicationProperties.SearchTableField")],a)})},"esri/webmap/Bookmark":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../TimeExtent ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m,h,p,u,x,E,H){var r;n=r=function(B){function D(w){w=B.call(this,w)||this;w.name=null;w.thumbnail=new H.SlideThumbnail;w.timeExtent=null;return w}l._inheritsLoose(D,B);var J=D.prototype;J.castThumbnail=function(w){return"string"===typeof w?new H.SlideThumbnail({url:w}):E.ensureType(H.SlideThumbnail,w)};J.readViewpoint=function(w,C){const {extent:F,viewpoint:G}=C;return d.fromJSON(G||{targetGeometry:F})};J.writeViewpoint=function(w,C,F,G){if(w){var {targetGeometry:A}=w;
e.isSome(A)&&"extent"!==A.type?G?.messages?G.messages.push(new g("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):k.getLogger(this.declaredClass).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(e.isSome(A)&&(C.extent=A.toJSON()),C[F]=w.toJSON())}};J.clone=function(){return new r(t.clone({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))};
l._createClass(D,[{key:"viewpoint",set:function(w){const {targetGeometry:C,scale:F}=w;e.isSome(C)&&"point"===C.type&&e.isNone(F)&&k.getLogger(this.declaredClass).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",w);this._set("viewpoint",w)}}]);return D}(n.IdentifiableMixin(v.JSONSupport));b.__decorate([m.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],n.prototype,"name",void 0);b.__decorate([m.property({type:H.SlideThumbnail,json:{write:{overridePolicy(B){return{enabled:!(!B||
!B.url)}}}}})],n.prototype,"thumbnail",void 0);b.__decorate([h.cast("thumbnail")],n.prototype,"castThumbnail",null);b.__decorate([m.property({type:a,json:{write:!0}})],n.prototype,"timeExtent",void 0);b.__decorate([m.property({type:d,nonNullable:!0,json:{write:!0}})],n.prototype,"viewpoint",null);b.__decorate([p.reader("viewpoint",["extent","viewpoint"])],n.prototype,"readViewpoint",null);b.__decorate([x.writer("viewpoint")],n.prototype,"writeViewpoint",null);return n=r=b.__decorate([u.subclass("esri.webmap.Bookmark")],
n)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(l,b,a,d,g,n,v,t){var k;l.SlideThumbnail=k=function(e){function m(){var p=e.apply(this,arguments)||this;p.url="";return p}b._inheritsLoose(m,e);var h=m.prototype;h.destroy=
function(){this.url=""};h.clone=function(){return new k({url:this.url})};return m}(d.JSONSupport);a.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],l.SlideThumbnail.prototype,"url",void 0);l.SlideThumbnail=k=a.__decorate([t.subclass("esri.webdoc.support.SlideThumbnail")],l.SlideThumbnail);Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(l,b,a,d,g,n,v,t,k,e,m){var h;d=h=function(p){function u(x){x=p.call(this,x)||this;x.background=null;x.rangeInfo=null;x.spatialReference=null;x.viewpoint=null;return x}l._inheritsLoose(u,p);u.prototype.clone=function(){return new h(g.clone({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))};return u}(d);b.__decorate([n.property({type:m})],d.prototype,"background",void 0);b.__decorate([n.property({type:e})],d.prototype,"rangeInfo",
void 0);b.__decorate([n.property({type:k})],d.prototype,"spatialReference",void 0);b.__decorate([n.property({type:a})],d.prototype,"viewpoint",void 0);return d=h=b.__decorate([t.subclass("esri.webmap.InitialViewProperties")],d)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(l,b,a,d,g,n,v,t){var k;d=k=function(e){function m(h){h=e.call(this,h)||this;h.color=new a([0,0,0,1]);return h}l._inheritsLoose(m,e);m.prototype.clone=function(){return new k(g.clone({color:this.color}))};return m}(d.JSONSupport);b.__decorate([n.property({type:a,json:{write:!0}})],d.prototype,"color",void 0);return d=k=b.__decorate([t.subclass("esri.webmap.background.ColorBackground")],d)})},"esri/webmap/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],
function(l,b,a){a=function(d){function g(n,v){return d.call(this,n,v,"webmap")||this}b._inheritsLoose(g,d);return g}(a.Version);l.Version=a;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/Version":function(){define(["exports","./Error"],function(l,b){let a=function(){function d(n,v,t=""){this.major=n;this.minor=v;this._context=t}var g=d.prototype;g.lessThan=function(n,v){return this.major<n||n===this.major&&this.minor<v};g.since=function(n,v){return!this.lessThan(n,
v)};g.validate=function(n){if(this.major!==n.major)throw new b((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:n});};g.clone=function(){return new d(this.major,this.minor,this._context)};d.parse=function(n,v=""){const [t,k]=n.split(".");var e=/^\s*\d+\s*$/;if(!t||!t.match||!t.match(e))throw new b((v&&v+":")+"invalid-version","Expected major version to be a number, but got '${version}'",
{version:n});if(!k||!k.match||!k.match(e))throw new b((v&&v+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:n});n=parseInt(t,10);e=parseInt(k,10);return new d(n,e,v)};return d}();l.Version=a;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/SpatialReference ./geometry/support/spatialReferenceUtils ./geometry/support/webMercatorUtils ./layers/support/arcgisLayerUrl ./layers/support/layerUtils ./networks/UtilityNetwork ./portal/Portal ./portal/PortalItem ./portal/support/portalItemUtils ./rest/geometryService/project ./rest/support/ProjectParameters ./support/basemapUtils ./support/MapFloorInfo ./webdoc/GeotriggersInfo ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),function(l,
b,a,d,g,n,v,t,k,e,m,h,p,u,x,E,H,r,B,D,J,w,C,F,G,A,I,L,K,M,T,P,ca,O,da,ea,X,S,R,V,W,na,oa,pa,qa,fa,Y,ja){const ha=new Y.Version(2,26),ka=v.ofType(qa);v=v.ofType(T);const Z=new Map;Z.set("image/jpeg","jpeg");Z.set("image/jpg","jpg");Z.set("image/png","png");Z.set("image/gif","gif");const la=O.TypeKeyword.JSAPI,ma=O.TypeKeyword.DEVELOPER_BASEMAP,ra="NatGeo_World_Map Ocean_Basemap USA_Topo_Maps World_Imagery World_Street_Map World_Terrain_Base World_Topo_Map World_Hillshade Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Reference_Overlay Reference/World_Transportation".split(" ").map(U=>
U.toLowerCase());g=function(U){function aa(c){c=U.call(this,c)||this;c.applicationProperties=null;c.bookmarks=new ka;c.floorInfo=null;c.geotriggersInfo=null;c.initialViewProperties=new fa;c.portalItem=null;c.presentation=null;c.sourceVersion=null;c.widgets=null;c.utilityNetworks=null;c.authoringApp=c.authoringAppVersion=null;c._isAuthoringAppSetByUser=c._isAuthoringAppVersionSetByUser=!1;return c}b._inheritsLoose(aa,U);var z=aa.prototype;z.destroy=function(){const c=this.portalItem;this.portalItem=
null;c?.destroy()};z.initialize=function(){this.when().catch(c=>{m.getLogger(this.declaredClass).error("#load()","Failed to load web map",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(f){this.addResolvingPromise(Promise.reject(f));return}this.read(c)}};z.writeAuthoringApp=function(c,f){f.authoringApp=c&&this._isAuthoringAppSetByUser?c:la};z.writeAuthoringAppVersion=function(c,f){f.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:d.version};z.readInitialViewProperties=
function(c,f){c=new fa;f.background&&(c.background=ja.fromJSON(f.background));const q=f.initialState?.viewpoint;q&&(q.rotation&&Y.Version.parse(f.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===f.authoringApp&&(q.rotation*=-1),c.viewpoint=n.fromJSON(q));f.mapRangeInfo&&(c.rangeInfo=V.fromJSON(f.mapRangeInfo));f.spatialReference&&(c.spatialReference=A.fromJSON(f.spatialReference));return c};z.writeInitialViewProperties=function(c,f,q,y){c&&((q=c.background)&&q.color&&(f.background=q.write({},
y)),c.viewpoint&&(f.initialState={viewpoint:c.viewpoint.write({},y)}),c.rangeInfo&&(f.mapRangeInfo=c.rangeInfo.toJSON(y)),c.spatialReference&&(f.spatialReference=c.spatialReference.write({},y)))};z.writeLayers=function(c,f,q,y){f[q]=this._writeLayers(c,y,"operational-layers")};z.readSourceVersion=function(c,f){const [q,y]=f.version.split(".");return new Y.Version(parseInt(q,10),parseInt(y,10))};z.writeSourceVersion=function(c,f,q){f[q]=`${ha.major}.${ha.minor}`};z.writeTables=function(c,f,q,y){c=
this._writeLayers(c,y,"tables");c.length&&(f[q]=c)};z.load=function(c){this.addResolvingPromise(this._loadFromSource());return Promise.resolve(this)};z.loadAll=function(){return e.loadAll(this,c=>{c(this.ground,this.basemap,this.layers,this.tables)})};z.read=function(c,f){f={...f,origin:"web-map"};const q=this._getAuthoringPropsState();G.readLoadable(this,c,y=>U.prototype.read.call(this,c,y),f);this._restoreAuthoringPropsFromState(q)};z.write=function(c,f){if("loaded"!==this.loadStatus)throw c=new t("webmap:not-loaded",
"Web map must be loaded before it can be serialized"),m.getLogger(this.declaredClass).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),c;this._removeDanglingLayerRefs();f={...f,origin:"web-map",restrictedWebMapWriting:!0,webmap:this};return U.prototype.write.call(this,c,f)};z.save=function(){var c=b._asyncToGenerator(function*(f){f=f||{};this._validateItem();yield this._updateFromPromise;yield this.load();yield this._loadLayerContainers();yield this._beforeSave();
yield this._validateMap();const q=this.portalItem,y={origin:"web-map",messages:[],writtenProperties:[],url:q.itemUrl&&H.urlToObject(q.itemUrl),portal:q.portal||P.getDefault()},N=this.write({},y);this._validateJSONForWriting(y,f);yield this._updateItemProperties(q);yield this._updateItem(q,N,y);yield this._updateItemThumbnail();return q});return function(f){return c.apply(this,arguments)}}();z.saveAs=function(){var c=b._asyncToGenerator(function*(f,q){q=q||{};f=this._getPortalItem(f);yield this._updateFromPromise;
yield this.load();yield this._loadLayerContainers();yield this._beforeSave();yield this._validateMap();const y={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:f.portal},N=this.write({},y);this._validateJSONForWriting(y,q);yield this._updateItemPropertiesForSaveAs(f);const Q=this._getThumbnailState();yield this._createItem(f,N,y,q);this._restoreThumbnailFromState(Q);yield this._updateItemThumbnail();return f});return function(f,q){return c.apply(this,arguments)}}();z.updateFrom=
function(){var c=b._asyncToGenerator(function*(f,q){this._updateFromPromise=f=this._updateFromInternal(f,q);yield f;f===this._updateFromPromise&&(this._updateFromPromise=null)});return function(f,q){return c.apply(this,arguments)}}();z.getLayerJSONFromResourceInfo=function(c){const f=this.resourceInfo;return this._collectAllLayersJSON([...(f?.baseMap?.baseMapLayers||[]),...(f?.operationalLayers||[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(q=>q.id===c.id)};z._collectAllLayersJSON=
function(c){return c.reduce((f,q)=>{f.push(q);"GroupLayer"===q.layerType&&(f=f.concat(this._collectAllLayersJSON(q.layers||[])));return f},[])};z._writeLayers=function(c,f,q){f={...f,layerContainerType:q};return c.map(y=>h.unwrap(oa.getLayerJSON(y,"tables"===q?null:this.getLayerJSONFromResourceInfo(y),f))).filter(Boolean).toArray()};z._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):
Promise.resolve(null)};z._loadFromItem=function(c){return c.load().catch(f=>{throw new t("webmap:load-portal-item","Failed to load portal item",{error:f});}).then(()=>{if("Web Map"!==c.type)throw new t("webmap:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Map'",{type:c.type});}).then(()=>c.fetchData()).then(f=>{this.resourceInfo=f;return this._readAndLoadFromJSON(f,{origin:"web-map",portal:c.portal||P.getDefault()})}).then(()=>this._computeInitialViewpoint())};z._readAndLoadFromJSON=
function(c,f){c=this._validateJSON(c);this.read(c,f);return this._loadFromJSON(c,f)};z._validateJSON=function(c){const f=Y.Version.parse(c.version||"","webmap");ha.validate(f);c.version=`${f.major}.${f.minor}`;return c};z._loadFromJSON=function(c,f){const q={context:{...f,layerContainerType:"operational-layers"}};this.portalItem&&(q.context.portal=this.portalItem.portal||P.getDefault());return(new Promise((y,N)=>l(["./layers/support/layersCreator"],y,N))).then(({populateOperationalLayers:y})=>{const N=
[];var Q=c.operationalLayers;Q&&Q.length&&N.push(y(this.layers,Q,q));Q={...q,context:{...q.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const ba=c.tables;ba&&ba.length&&N.push(y(this.tables,ba,Q));return x.eachAlways(N).then(()=>{})})};z._computeInitialViewpoint=function(){var c=b._asyncToGenerator(function*(){let f=this.initialViewProperties;if(!f?.viewpoint?.targetGeometry){var q=yield this._getExtentFromItem();q&&(f=f?f.clone():new fa,f.viewpoint=new n,f.viewpoint.targetGeometry=
q,this.initialViewProperties=f)}});return function(){return c.apply(this,arguments)}}();z._getExtentFromItem=function(){var c=b._asyncToGenerator(function*(){const f=this.initialViewProperties?.spatialReference,q=this.portalItem?.extent;return f&&q?f.isWGS84?q.clone():f.isWebMercator?L.geographicToWebMercator(q):(yield new Promise((y,N)=>l(["./portal/support/geometryServiceUtils"],y,N))).getGeometryServiceURL(this.portalItem).then(y=>{const N=new ea;N.geometries=[q];N.outSpatialReference=f;return da.project(y,
N)}).then(y=>y[0]).catch(y=>{m.getLogger(this.declaredClass).error("Error projecting item's extent:",y);return null}):null});return function(){return c.apply(this,arguments)}}();z._removeDanglingLayerRefs=function(){var c=this.applicationProperties,f=c&&c.viewing&&c.viewing.search;const q=y=>this.allLayers.some(N=>N.id===y);f&&f.layers&&(f.layers=f.layers.filter(y=>q(y.id)));f&&f.tables&&(f.tables=f.tables.filter(y=>this.tables.some(N=>N.id===y.id)));(f=c&&c.editing&&c.editing.locationTracking)&&
f.info&&!q(f.info.layerId)&&(c.editing=null);(c=this.presentation&&this.presentation.slides)&&c.forEach(y=>{y.visibleLayers&&(y.visibleLayers=y.visibleLayers.filter(N=>q(N.id)))})};z._validateMap=function(){var c=b._asyncToGenerator(function*(){if(!this.basemap?.baseLayers.length)throw new t("webmap:save","Map does not have a valid basemap with a base layer.");let f=null;yield E.whenOnce(()=>{const q=X.findSpatialReference(this.initialViewProperties,this.basemap);f=q.spatialReference;return!q.updating});
if(!I.equals(f,this.initialViewProperties.spatialReference))throw new t("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:f});});return function(){return c.apply(this,arguments)}}();z._validateItem=function(){if(!this.portalItem)throw m.getLogger(this.declaredClass).error("save: requires the portalItem property to be set"),new t("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");
this._validateItemType(this.portalItem)};z._validateItemType=function(c){if("Web Map"!==c.type)throw new t("webmap:portal-item-wrong-type",'Portal item needs to have type "Web Map"');};z._loadLayerContainers=function(){const c=[];this.basemap&&c.push(this.basemap.load());this.ground&&c.push(this.ground.load());return x.eachAlways(c).then(()=>{})};z._beforeSave=function(){var c=b._asyncToGenerator(function*(){const f=[];for(const q of this.allLayers)if("beforeSave"in q&&"function"===typeof q.beforeSave){const y=
q.beforeSave();y&&f.push(y)}yield x.eachAlways(f)});return function(){return c.apply(this,arguments)}}();z._loadAllLayers=function(){const c=this._getAllLayersAndTables().map(f=>f.load());return x.eachAlways(c).then(()=>{})};z._getAllLayersAndTables=function(){return this.allLayers.concat(this.allTables)};z._validateJSONForWriting=function(c,f){c=c.messages.filter(q=>"error"===q.type).map(q=>new t(q.name,q.message,q.details));f.ignoreUnsupported&&(c=c.filter(q=>"layer:unsupported"!==q.name&&"symbol:unsupported"!==
q.name&&"symbol-layer:unsupported"!==q.name&&"property:unsupported"!==q.name&&"url:unsupported"!==q.name));if(0<c.length)throw new t("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:c});};z._updateItemProperties=function(){var c=b._asyncToGenerator(function*(f){f.extent=yield this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry);yield this._updateTypeKeywords(f)});return function(f){return c.apply(this,
arguments)}}();z._updateItemPropertiesForSaveAs=function(){var c=b._asyncToGenerator(function*(f){O.removeTypeKeyword(f,"CollectorDisabled");O.removeTypeKeyword(f,"FieldMapsDisabled");O.removeTypeKeyword(f,O.TypeKeyword.METADATA);O.removeTypeKeyword(f,"OfflineDisabled");O.removeTypeKeyword(f,"Offline Map Areas");O.removeTypeKeyword(f,"Workforce Dispatcher");O.removeTypeKeyword(f,"Workforce Project");O.removeTypeKeyword(f,"Workforce Worker");yield this._updateItemProperties(f)});return function(f){return c.apply(this,
arguments)}}();z._getWGS84Extent=function(){var c=b._asyncToGenerator(function*(f){f=f.clone().normalize();let q;if(1<f.length)for(const y of f)q?y.width>q.width&&(q=y):q=y;else q=f[0];return this._projectToWGS84(q)});return function(f){return c.apply(this,arguments)}}();z._projectToWGS84=function(){var c=b._asyncToGenerator(function*(f){var q=f.spatialReference;if(q.isWGS84)return f.clone();if(q.isWebMercator)return L.webMercatorToGeographic(f);q=yield(yield new Promise((N,Q)=>l(["./portal/support/geometryServiceUtils"],
N,Q))).getGeometryServiceURL(this.portalItem);const y=new ea;y.geometries=[f];y.outSpatialReference=A.WGS84;return(yield da.project(q,y))[0]});return function(f){return c.apply(this,arguments)}}();z._updateTypeKeywords=function(){var c=b._asyncToGenerator(function*(f){O.addTypeKeyword(f,la);yield this._loadAllLayers();this._evalCollectorKeyword(f);this._evalDataEditingKeyword(f);this._evalOfflineKeyword(f);this._evalDeveloperBasemapKeyword(f);this._evalUtilityNetworkKeyword(f);f.typeKeywords&&(f.typeKeywords=
f.typeKeywords.filter((q,y,N)=>N.indexOf(q)===y))});return function(f){return c.apply(this,arguments)}}();z._evalCollectorKeyword=function(c){O.hasTypeKeyword(c,"CollectorDisabled")||O.hasTypeKeyword(c,"Workforce Project")||O.hasTypeKeyword(c,"Workforce Worker")||O.hasTypeKeyword(c,"Workforce Dispatcher")||!this._hasEditableFeatureLayer()?O.removeTypeKeyword(c,"Collector"):O.addTypeKeyword(c,"Collector")};z._evalDataEditingKeyword=function(c){this._hasEditableFeatureLayer()?O.addTypeKeyword(c,"Data Editing"):
O.removeTypeKeyword(c,"Data Editing")};z._evalOfflineKeyword=function(c){!O.hasTypeKeyword(c,"OfflineDisabled")&&this._isOfflineCapableMap()?O.addTypeKeyword(c,"Offline"):O.removeTypeKeyword(c,"Offline")};z._evalDeveloperBasemapKeyword=function(c){X.hasDeveloperBasemapLayer(this.basemap)?O.addTypeKeyword(c,ma):O.removeTypeKeyword(c,ma)};z._evalUtilityNetworkKeyword=function(c){this.utilityNetworks?.length?O.addTypeKeyword(c,"UtilityNetwork"):O.removeTypeKeyword(c,"UtilityNetwork")};z._hasEditableFeatureLayer=
function(){return this._getAllLayersAndTables().some(c=>c.loaded&&M.isFeatureServiceLayer(c)&&c.capabilities.operations.supportsEditing&&c.editingEnabled)};z._isOfflineCapableMap=function(){return this._getAllLayersAndTables().filter(c=>"group"!==c.type).every(c=>c.loaded&&this._isOfflineCapableLayer(c))};z._isFeatureCollectionLike=function(c){return M.isFeatureCollectionLayer(c)||"map-notes"===c.type||"route"===c.type};z._isOfflineCapableLayer=function(c){return M.isFeatureServiceLayer(c)&&c.capabilities.operations.supportsSync||
this._isFeatureCollectionLike(c)&&!c.portalItem||("tile"===c.type||"vector-tile"===c.type)&&(c.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(c)||X.isDeveloperBasemapLayer(c))&&c.spatialReference.equals(this.initialViewProperties.spatialReference)};z._isExportableAGOLTileLayer=function(c){return"tile"===c.type?K.isServerOrServicesAGOLUrl(c.url)&&ra.some(f=>c.url.toLowerCase().includes("/"+f+"/")):!1};z._updateItem=function(){var c=b._asyncToGenerator(function*(f,q,y){yield f.update({data:q});
this._syncUpInstanceWithItem(f,q,y)});return function(f,q,y){return c.apply(this,arguments)}}();z._createItem=function(){var c=b._asyncToGenerator(function*(f,q,y,N){const Q=this.portalItem,ba=!!(Q&&Q.id&&Q.portal.user),ia=f.portal;yield ia._signIn();if(!(yield this._canCopyItem(Q,ba,ia)))throw new t("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");yield ia.user.addItem({item:f,folder:N.folder,data:q});this.portalItem=f;this._syncUpInstanceWithItem(f,q,y)});
return function(f,q,y,N){return c.apply(this,arguments)}}();z._canCopyItem=function(){var c=b._asyncToGenerator(function*(f,q,y){if(h.isSome(f)&&f.id&&f.typeKeywords&&f.typeKeywords.includes("useOnly")){if(f.portal.portalHostname!==y.portalHostname)return!1;q||(yield f.reload());return"admin"===f.itemControl||"update"===f.itemControl}return!0});return function(f,q,y){return c.apply(this,arguments)}}();z._syncUpInstanceWithItem=function(c,f,q){p.MultiOriginJSONSupport.prototype.read.call(this,{version:f.version,
authoringApp:f.authoringApp,authoringAppVersion:f.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:c.itemUrl&&H.urlToObject(c.itemUrl)});F.updateOrigins(q);this.resourceInfo=f};z._updateItemThumbnail=function(){var c=b._asyncToGenerator(function*(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(yield this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename}),this._clearThumbnailOverride())});return function(){return c.apply(this,arguments)}}();
z._getPortalItem=function(c){c=ca.from(c);c.id&&(c=c.clone(),c.id=null);c.type||(c.type="Web Map");c.portal||(c.portal=P.getDefault());this._validateItemType(c);return c};z._updateFromInternal=function(){var c=b._asyncToGenerator(function*(f,q){q=q||{};yield E.whenOnce(()=>f.ready);this._updateInitialViewProperties(f,q);if(f.map===this)for(const y of f.allLayerViews)for(const N of["visible","featureEffect"])N in y&&N in y.layer&&y._isOverridden(N)&&(y.layer[N]=y[N]);yield this._updateThumbnailUrl(f,
q)});return function(f,q){return c.apply(this,arguments)}}();z._updateInitialViewProperties=function(c,f){f.backgroundExcluded||(this.initialViewProperties.background=c.background?.clone());this.initialViewProperties.spatialReference=c.spatialReference.clone();f.viewpointExcluded||(this.initialViewProperties.viewpoint=new n({rotation:c.rotation,scale:f.scalePreserved?c.scale:null,targetGeometry:this._getViewExtent(c)}));if(!f.widgetsExcluded)for(const q of c.persistableViewModels)q.updateWebDocument(this)};
z._getViewExtent=function(c){const f=c.center.clone().normalize();c=c.extent.clone();const q=c.width/2;c.xmin=f.x-q;c.xmax=f.x+q;return c};z._updateThumbnailUrl=function(){var c=b._asyncToGenerator(function*(f,q){q.thumbnailExcluded||(q=na.getOptimalThumbnailSize(f,q.thumbnailSize),f=yield f.takeScreenshot({format:"png",width:q.width,height:q.height}),this._setAutoGeneratedThumbnail(f.dataUrl))});return function(f,q){return c.apply(this,arguments)}}();z._setAutoGeneratedThumbnail=function(c){this.thumbnailUrl=
c;this._thumbnailFilename=null};z._clearThumbnailOverride=function(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null};z._generateCustomThumbnailFilename=function(c){if(H.isDataProtocol(c)){c=(c=(c=H.dataComponents(c))&&c.mediaType)&&Z.get(c.toLowerCase())||null;const f=`thumbnail${Date.now()}`;return c?`${f}.${c}`:f}return null};z._getThumbnailState=function(){let c=this.thumbnailUrl;c&&(c=this._isOverridden("thumbnailUrl")?c:H.addQueryParameter(c,
"w","8192"));return{thumbnailUrl:c,filename:this._thumbnailFilename}};z._restoreThumbnailFromState=function(c){this.thumbnailUrl=c.thumbnailUrl;this._thumbnailFilename=c.filename};z._getAuthoringPropsState=function(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}};z._restoreAuthoringPropsFromState=function(c){c.isAuthoringAppSetByUser?this.authoringApp=
c.authoringApp:this._isAuthoringAppSetByUser=!1;c.isAuthoringAppVersionSetByUser?this.authoringAppVersion=c.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1};aa.fromJSON=function(c){if(!c)throw new t("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:c})};b._createClass(aa,[{key:"authoringApp",set:function(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}},{key:"authoringAppVersion",set:function(c){this._isAuthoringAppVersionSetByUser=
!0;this._set("authoringAppVersion",c)}},{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(c){c?(this._override("thumbnailUrl",c),this._thumbnailFilename=this._generateCustomThumbnailFilename(c)):this._clearThumbnailOverride()}}]);return aa}(p.MultiOriginJSONMixin(k.LoadableMixin(u.EsriPromiseMixin(g))));g.VERSION=ha;a.__decorate([r.property({type:pa,json:{write:!0}})],g.prototype,"applicationProperties",void 0);a.__decorate([r.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([C.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([r.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",null);a.__decorate([C.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",null);a.__decorate([r.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],g.prototype,"basemap",void 0);a.__decorate([r.property({type:ka,
json:{write:{overridePolicy(U){return{enabled:!!(U&&0<U.length),ignoreOrigin:!0}}}}})],g.prototype,"bookmarks",void 0);a.__decorate([r.property({type:S,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([r.property({type:R,json:{write:!0}})],g.prototype,"geotriggersInfo",void 0);a.__decorate([r.property({type:fa,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,
target:{background:{type:ja},"initialState.viewpoint":{type:n},mapRangeInfo:{type:V},spatialReference:{type:A}}}}})],g.prototype,"initialViewProperties",void 0);a.__decorate([J.reader("initialViewProperties")],g.prototype,"readInitialViewProperties",null);a.__decorate([C.writer("initialViewProperties")],g.prototype,"writeInitialViewProperties",null);a.__decorate([r.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],g.prototype,"layers",void 0);a.__decorate([C.writer("layers")],
g.prototype,"writeLayers",null);a.__decorate([r.property({type:ca})],g.prototype,"portalItem",void 0);a.__decorate([r.property({json:{write:!0}})],g.prototype,"presentation",void 0);a.__decorate([r.property()],g.prototype,"resourceInfo",void 0);a.__decorate([r.property({readOnly:!0,type:Y.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],g.prototype,"sourceVersion",void 0);a.__decorate([J.reader("sourceVersion")],g.prototype,"readSourceVersion",
null);a.__decorate([C.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([r.property({json:{read:!1,write:{ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([C.writer("tables")],g.prototype,"writeTables",null);a.__decorate([r.property()],g.prototype,"thumbnailUrl",null);a.__decorate([r.property({type:W,json:{write:!0}})],g.prototype,"widgets",void 0);a.__decorate([r.property({type:v,json:{read:!0,write:!0}})],g.prototype,"utilityNetworks",void 0);return g=a.__decorate([w.subclass("esri.WebMap")],
g)});