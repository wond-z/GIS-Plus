// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require exports ./_rollupPluginBabelHelpers ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../core/has ../core/maybe".split(" "),function(n,d,q,p,la,t,r,U,k,V,ma){function W(a,b){if(!0===b.useAsync||!0===a.isAsync)return na(a,b);if(V("esri-csp-restrictions"))return function(c){return t.executeScript(a,c)};try{return p.compileScript(a,b)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(g){return t.executeScript(a,
g)};throw c;}}function na(a,b){if(null===h)throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.AsyncNotEnabled,null);if(V("esri-csp-restrictions"))return function(c){return h.executeScript(a,c)};try{return p.compileScript(a,b,!0)}catch(c){if("esri.arcade.arcadeuncompilableerror"===c.declaredRootClass)return function(g){return h.executeScript(a,g)};throw c;}}function X(a){t.extend(a);p.extend(a,"sync");null===h?x.push(a):(p.extend(a,"async"),h.extend(a))}function y(a,b=[]){return U.parseScript(a,
b)}function Y(a,b,c=[]){a=U.parseScript(a,c);return z(a,b)}function z(a,b){if(!0===b.useAsync||!0===a.isAsync){if(null===h)throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.AsyncNotEnabled,null);return h.executeScript(a,b)}return t.executeScript(a,b)}function A(a,b){return k.referencesMember(a,b)}function Z(a,b){return k.referencesFunction(a,b)}function aa(a,b=!1){void 0===b&&(b=!1);return k.findFieldLiterals(a)}function ba(a){return k.findExpectedFieldLiterals(a)}function u(a,b=[]){void 0===
a.usesGeometry&&k.findScriptDependencies(a,b);return!0===a.usesGeometry}function B(){return C?C:C=D()}function D(){return E.apply(this,arguments)}function E(){E=q._asyncToGenerator(function*(){const [a,b]=yield Promise.all([new Promise((c,g)=>n(["../geometry/geometryEngine"],c,g)),new Promise((c,g)=>n(["../arcade/functions/geomsync"],c,g))]);F=!0;b.setGeometryEngine(a);return!0});return E.apply(this,arguments)}function v(){return null!==G?G:G=H()}function H(){return I.apply(this,arguments)}function I(){I=
q._asyncToGenerator(function*(){yield p.enableAsyncSupport();h=yield new Promise((a,b)=>n(["../arcade/arcadeAsyncRuntime"],a,b));for(const a of x)h.extend(a),p.extend(a,"async");x=null;return!0});return I.apply(this,arguments)}function ca(){return J}function K(){return h?!0:!1}function da(){return F}function L(){return M?M:M=N()}function N(){return O.apply(this,arguments)}function O(){O=q._asyncToGenerator(function*(){yield v();const [a,b,c,g,m]=yield Promise.all([new Promise((e,f)=>n(["../arcade/featureSetUtils"],
e,f)),new Promise((e,f)=>n(["../arcade/functions/featuresetbase"],e,f)),new Promise((e,f)=>n(["../arcade/functions/featuresetgeom"],e,f)),new Promise((e,f)=>n(["../arcade/functions/featuresetstats"],e,f)),new Promise((e,f)=>n(["../arcade/functions/featuresetstring"],e,f))]);ea=a;h.extend([b,c,g,m]);p.extend([b,c,g,m],"async");return J=!0});return O.apply(this,arguments)}function P(a,b=[]){void 0===a.usesFeatureSet&&k.findScriptDependencies(a,b);return!0===a.usesFeatureSet}function fa(a,b=[]){void 0===
a.isAsync&&k.findScriptDependencies(a,b);return!0===a.isAsync}function ha(a,b){return Q.apply(this,arguments)}function Q(){Q=q._asyncToGenerator(function*(a,b,c=[],g=!1,m=null){return w(new Set,a,b,c,g,m)});return Q.apply(this,arguments)}function w(a,b,c){return R.apply(this,arguments)}function R(){R=q._asyncToGenerator(function*(a,b,c,g=[],m=!1,e=null){b="string"===typeof b?y(b):b;const f=[];if(b&&(!1===F&&(u(b)||m)&&f.push(B()),!1===K()&&(!0===b.isAsync||c)&&f.push(v()),!1===J)){var l;if(!(l=P(b)))a:{if(g)for(const oa of g)if(A(b,
oa)){l=!0;break a}l=!1}l&&f.push(L())}f.length&&(yield Promise.all(f));yield S(a,b,e,c,m);return!0});return R.apply(this,arguments)}function ia(a,b=[]){void 0===a.usesModules&&k.findScriptDependencies(a,b);return!0===a.usesModules}function S(a,b){return T.apply(this,arguments)}function T(){T=q._asyncToGenerator(function*(a,b,c=null,g=!1,m=!1){var e=k.findModuleImports(b);null===c&&0<e.length&&(c=la.ArcadeModuleResolver.getDefault());b.loadedModules={};for(const f of e){ma.assertIsSome(c);e=c.normalizeModuleUri(f.source);
if(a.has(e.uri))throw new r.ArcadeExecutionError(null,r.ExecutionErrorCodes.CircularModules,null);a.add(e.uri);const l=yield c.fetchModule(e);yield w(a,l,g,[],m,c);a.delete(e.uri);l.isAsync&&(b.isAsync=!0);l.usesFeatureSet&&(b.usesFeatureSet=!0);l.usesGeometry&&(b.usesGeometry=!0);b.loadedModules[f.libname]={uri:e.uri,script:l}}});return T.apply(this,arguments)}function ja(a){if(u(a))return!0;a=k.findFunctionCalls(a);let b=!1;for(let c=0;c<a.length;c++)if(pa.includes(a[c])){b=!0;break}return b}function ka(){return ea}
const pa="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" ");let J=!1,F=!1,h=null,x=[],C=null,G=null,M=null,ea=null;const qa=Object.freeze(Object.defineProperty({__proto__:null,compileScript:W,extend:X,parseScript:y,parseAndExecuteScript:Y,executeScript:z,referencesMember:A,referencesFunction:Z,extractFieldLiterals:aa,extractExpectedFieldLiterals:ba,scriptUsesGeometryEngine:u,enableGeometrySupport:B,enableGeometrySupportImpl:D,enableAsyncSupport:v,
enableAsyncSupportImpl:H,isFeatureSetSupportEnabled:ca,isAsyncEnabled:K,isGeometryEnabled:da,enableFeatureSetSupport:L,enableFeatureSetSupportImpl:N,scriptUsesFeatureSet:P,scriptIsAsync:fa,loadScriptDependencies:ha,_loadScriptDependenciesImpl:w,scriptUsesModules:ia,loadDependentModules:S,scriptTouchesGeometry:ja,featureSetUtils:ka},Symbol.toStringTag,{value:"Module"}));d._loadScriptDependenciesImpl=w;d.arcade=qa;d.compileScript=W;d.enableAsyncSupport=v;d.enableAsyncSupportImpl=H;d.enableFeatureSetSupport=
L;d.enableFeatureSetSupportImpl=N;d.enableGeometrySupport=B;d.enableGeometrySupportImpl=D;d.executeScript=z;d.extend=X;d.extractExpectedFieldLiterals=ba;d.extractFieldLiterals=aa;d.featureSetUtils=ka;d.isAsyncEnabled=K;d.isFeatureSetSupportEnabled=ca;d.isGeometryEnabled=da;d.loadDependentModules=S;d.loadScriptDependencies=ha;d.parseAndExecuteScript=Y;d.parseScript=y;d.referencesFunction=Z;d.referencesMember=A;d.scriptIsAsync=fa;d.scriptTouchesGeometry=ja;d.scriptUsesFeatureSet=P;d.scriptUsesGeometryEngine=
u;d.scriptUsesModules=ia});