// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ./_rollupPluginBabelHelpers ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ./datetime ../core/maybe ../core/number ../geometry/support/coordsUtils ../intl/locale ../arcade/featureset/support/shared ../arcade/ArcadeModule ../arcade/executionError".split(" "),function(f,ka,Ta,y,Ua,K,S,B,T,F,U,V,L,Va,la,
Wa,Xa,W,ma,z){function C(a,b,c){return""===b||null===b||void 0===b||b===c||b===c?a:a=a.split(b).join(c)}function G(a){return a instanceof Ta.ArcadeFunction}function M(a){return a instanceof ma.ArcadeModule}function H(a){return m(a)||p(a)||n(a)||q(a)||null===a||a===r||"number"===typeof a?!0:!1}function na(a,b){return void 0===a?b:a}function oa(a){return null==a?"":u(a)||w(a)?"Array":n(a)?"Date":m(a)?"String":q(a)?"Boolean":p(a)?"Number":"esri.arcade.Attachment"===a?.declaredClass?"Attachment":"esri.arcade.Portal"===
a?.declaredClass?"Portal":"esri.arcade.Dictionary"===a?.declaredClass?"Dictionary":a instanceof ma.ArcadeModule?"Module":X(a)?"Feature":a instanceof F?"Point":a instanceof U?"Polygon":a instanceof V?"Polyline":a instanceof T?"Multipoint":a instanceof S?"Extent":G(a)?"Function":Y(a)?"FeatureSet":Z(a)?"FeatureSetCollection":a===r?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function m(a){return"string"===typeof a||a instanceof String}function q(a){return"boolean"===typeof a}function p(a){return"number"===
typeof a}function pa(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a}function u(a){return a instanceof Array}function X(a){return"esri.arcade.Feature"===a?.arcadeDeclaredClass?!0:!1}function Y(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===a.declaredRootClass)}function Z(a){return!0===(a&&a.declaredRootClass&&"esri.arcade.featureSetCollection"===a.declaredRootClass)}function w(a){return a instanceof y}function n(a){return a instanceof Date}function qa(a,
b,c,d,e){if(a.length<b||a.length>c)throw new z.ArcadeExecutionError(d,z.ExecutionErrorCodes.WrongNumberOfParameters,e);}function ra(a){return 0>a?-Math.round(-a):Math.round(a)}function sa(){let a=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,b=>{const c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})}function N(a,b){if(!isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();b=C(b,"\u2030","");b=C(b,"\u00a4","");return la.format(a,
{pattern:b})}return a.toString()}function I(a,b){a=L.DateTime.fromJSDate(a);return void 0===b||null===b||""===b?a.toISO({suppressMilliseconds:!0}):a.toFormat(aa(b),{locale:Xa.getLocale(),numberingSystem:"latn"})}function aa(a){a=a.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let b="";const c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const d of a.match(c))switch(d){case "D":b+=
"d";break;case "DD":b+="dd";break;case "DDD":b+="o";break;case "d":b+="c";break;case "ddd":b+="ccc";break;case "dddd":b+="cccc";break;case "M":b+="L";break;case "MM":b+="LL";break;case "MMM":b+="LLL";break;case "MMMM":b+="LLLL";break;case "YY":b+="yy";break;case "Y":case "YYYY":b+="yyyy";break;case "Q":b+="q";break;case "Z":b+="ZZ";break;case "ZZ":b+="ZZZ";break;case "S":b+="'S'";break;case "SS":b+="'SS'";break;case "SSS":b+="u";break;case "A":case "a":b+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":b+=
d;break;default:b=2<=d.length&&"["===d.slice(0,1)&&"]"===d.slice(-1)?b+`'${d.slice(1,-1)}'`:b+`'${d}'`}return b}function h(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function ta(a,b,c){if(null===a){if(null===b||b===r)return h(null,null,c);if(p(b))return h(0,b,c);if(m(b)||q(b))return h(0,l(b),c);if(n(b))return h(0,b.getTime(),c)}if(a===r){if(null===b||b===r)return h(null,null,c);if(p(b))return h(0,b,c);if(m(b)||q(b))return h(0,
l(b),c);if(n(b))return h(0,b.getTime(),c)}else if(p(a)){if(p(b))return h(a,b,c);if(q(b))return h(a,l(b),c);if(null===b||b===r)return h(a,0,c);if(m(b))return h(a,l(b),c);if(n(b))return h(a,b.getTime(),c)}else if(m(a)){if(m(b))return h(x(a),x(b),c);if(n(b))return h(l(a),b.getTime(),c);if(p(b))return h(l(a),b,c);if(null===b||b===r)return h(l(a),0,c);if(q(b))return h(l(a),l(b),c)}else if(n(a)){if(n(b))return h(a,b,c);if(null===b||b===r)return h(a.getTime(),0,c);if(p(b))return h(a.getTime(),b,c);if(q(b)||
m(b))return h(a.getTime(),l(b),c)}else if(q(a)){if(q(b))return h(a,b,c);if(p(b))return h(l(a),l(b),c);if(n(b))return h(l(a),b.getTime(),c);if(null===b||b===r)return h(l(a),0,c);if(m(b))return h(l(a),l(b),c)}return!ba(a,b)||"\x3c\x3d"!==c&&"\x3e\x3d"!==c?!1:!0}function ba(a,b){if(a===b||null===a&&b===r||null===b&&a===r)return!0;if(n(a)&&n(b))return a.getTime()===b.getTime();if(a instanceof Ua||a instanceof K)return a.equalityTest(b);if(a instanceof F&&b instanceof F){const c=a.cache._arcadeCacheId,
d=b.cache._arcadeCacheId;if(void 0!==c&&null!==c)return c===d}return void 0!==a&&void 0!==b&&null!==a&&null!==b&&"object"===typeof a&&"object"===typeof b&&(a._arcadeCacheId===b._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId||a._underlyingGraphic===b._underlyingGraphic&&void 0!==a._underlyingGraphic&&null!==a._underlyingGraphic)?!0:!1}function x(a,b){if(m(a))return a;if(null===a)return"";if(p(a))return N(a,b);if(q(a))return a.toString();if(n(a))return I(a,b);if(a instanceof B)return JSON.stringify(a.toJSON());
if(u(a)){b=[];for(var c=0;c<a.length;c++)b[c]=O(a[c]);return"["+b.join(",")+"]"}if(a instanceof y){b=[];for(c=0;c<a.length();c++)b[c]=O(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():G(a)?"object, Function":a===r?"":M(a)?"object, Module":""}function ua(a){const b=[];if(!u(a))return null;if(a instanceof y){for(var c=0;c<a.length();c++)b[c]=l(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=l(a[c]);return b}function ca(a,b,c=!1){if(m(a))return a;
if(null===a)return"";if(p(a))return N(a,b);if(q(a))return a.toString();if(n(a))return I(a,b);if(a instanceof B)return a instanceof S?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+P(a.spatialReference)+"}":P(a.toJSON(),(e,g)=>e.key===
g.key?0:"spatialReference"===e.key?1:"spatialReference"===g.key||e.key<g.key?-1:e.key>g.key?1:0);if(u(a)){b=[];for(var d=0;d<a.length;d++)b[d]=O(a[d],c);return"["+b.join(",")+"]"}if(a instanceof y){b=[];for(d=0;d<a.length();d++)b[d]=O(a.get(d),c);return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText(c):G(a)?"object, Function":a===r?"":M(a)?"object, Module":""}function O(a,b=!1){return null===a?"null":q(a)||p(a)||m(a)?JSON.stringify(a):a instanceof B||a instanceof
y||a instanceof Array?ca(a,null,b):a instanceof Date?b?JSON.stringify(a.getTime()):JSON.stringify(I(a,"")):null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText(b):"null"}function l(a,b){return p(a)?a:null===a||""===a?0:n(a)?NaN:q(a)?a?1:0:u(a)||""===a||void 0===a?NaN:void 0!==b&&m(a)?(b=C(b,"\u2030",""),b=C(b,"\u00a4",""),la.parse(a,{pattern:b})):a===r?0:Number(a)}function va(a){return n(a)?a:m(a)&&(a=wa(a))?a.toJSDate():null}function xa(a){return n(a)?L.DateTime.fromJSDate(a):m(a)?wa(a):
null}function wa(a){const b=/ (\d\d)/;let c=L.DateTime.fromISO(a);return c.isValid||b.test(a)&&(a=a.replace(b,"T$1"),c=L.DateTime.fromISO(a),c.isValid)?c:null}function ya(a){return q(a)?a:m(a)?(a=a.toLowerCase(),"true"===a?!0:!1):p(a)?0===a||isNaN(a)?!1:!0:!1}function za(a,b){if(Va.isNone(a))return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a}function Aa(a){if(null===a)return null;if(a instanceof F)return"NaN"===a.x||null===a.x||isNaN(a.x)?null:a;if(a instanceof
U){if(0===a.rings.length)return null;for(const b of a.rings)if(0<b.length)return a;return null}if(a instanceof V){if(0===a.paths.length)return null;for(const b of a.paths)if(0<b.length)return a;return null}return a instanceof T?0===a.points.length?null:a:a instanceof S?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null}function da(a,b){if(!a||!a.domain)return b;let c=null;if("string"===a.field.type||"esriFieldTypeString"===a.field.type)b=x(b);else{if(null===b||void 0===b)return null;if(""===
b)return b;b=l(b)}for(let d=0;d<a.domain.codedValues.length;d++){const e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?b:c.name}function ea(a,b){if(!a||!a.domain)return b;let c=null;b=x(b);for(let d=0;d<a.domain.codedValues.length;d++){const e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?b:c.code}function J(a,b,c=null,d=null){if(!b||!b.fields)return null;let e=null;for(let v=0;v<b.fields.length;v++){const t=b.fields[v];t.name.toLowerCase()===a.toString().toLowerCase()&&(e=
t)}if(null===e)throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.FieldNotFound,null,{key:a});let g,k;null===d&&c&&b.typeIdField&&(d=c.hasField(b.typeIdField)?c.field(b.typeIdField):null);null!==d&&void 0!==d&&b.types.some(v=>v.id===d?((g=v.domains&&v.domains[e.name])&&"inherited"===g.type&&(g=Ba(e.name,b),k=!0),!0):!1);k||g||(g=Ba(a,b));return{field:e,domain:g}}function Ba(a,b){let c;b.fields.some(d=>{d.name.toLowerCase()===a.toLowerCase()&&(c=d.domain);return!!c});return c}function P(a,
b){b||(b={});"function"===typeof b&&(b={cmp:b});const c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(g){return function(k){return function(v,t){return g({key:v,value:k[v]},{key:t,value:k[t]})}}}(b.cmp),e=[];return function v(k){k&&k.toJSON&&"function"===typeof k.toJSON&&(k=k.toJSON());if(void 0!==k){if("number"===typeof k)return isFinite(k)?""+k:"null";if("object"!==typeof k)return JSON.stringify(k);var t;if(Array.isArray(k)){var A="[";for(t=0;t<k.length;t++)t&&(A+=","),A+=v(k[t])||"null";
return A+"]"}if(null===k)return"null";if(e.includes(k)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Ya=e.push(k)-1,Ca=Object.keys(k).sort(d&&d(k));A="";for(t=0;t<Ca.length;t++){const Da=Ca[t],Ea=v(k[Da]);Ea&&(A&&(A+=","),A+=JSON.stringify(Da)+":"+Ea)}e.splice(Ya,1);return"{"+A+"}"}}(a)}function Fa(a){if(null===a)return null;const b=[];for(const c of a)c&&c.arcadeDeclaredClass&&"esri.arcade.Feature"===c.arcadeDeclaredClass?b.push(c.geometry()):
b.push(c);return b}function D(a,b){if(b instanceof F)a.push(b.hasZ?b.hasM?[b.x,b.y,b.z,b.m]:[b.x,b.y,b.z]:[b.x,b.y]);else throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,null);}function Ga(a,b){if(u(a)||w(a)){let c=!1,d=!1,e=[];if(u(a)){for(const g of a)D(e,g);0<e.length&&(b=a[0].spatialReference,c=a[0].hasZ,d=a[0].hasM)}else if(a instanceof K)e=a._elements,0<e.length&&(c=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(w(a)){for(const g of a.toArray())D(e,g);0<
e.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}else throw new z.ArcadeExecutionError(null,z.ExecutionErrorCodes.InvalidParameter,null);if(0===e.length)return null;Wa.isClockwise(e,d,c)||(e=e.slice(0).reverse());return new U({rings:[e],spatialReference:b,hasZ:c,hasM:d})}return a}function Ha(a,b){if(u(a)||w(a)){let c=!1,d=!1,e=[];if(u(a)){for(const g of a)D(e,g);0<e.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,d=!0===a[0].hasM)}else if(a instanceof K)e=a._elements,
0<e.length&&(c=a._hasZ,d=a._hasM,b=a.get(0).spatialReference);else if(w(a)){for(const g of a.toArray())D(e,g);0<e.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}return 0===e.length?null:new V({paths:[e],spatialReference:b,hasZ:c,hasM:d})}return a}function Ia(a,b){if(u(a)||w(a)){let c=!1,d=!1,e=[];if(u(a)){for(const g of a)D(e,g);0<e.length&&(b=a[0].spatialReference,c=!0===a[0].hasZ,d=!0===a[0].hasM)}else if(a instanceof K)e=a._elements,0<e.length&&(c=a._hasZ,d=a._hasM,
b=a.get(0).spatialReference);else if(w(a)){for(const g of a.toArray())D(e,g);0<e.length&&(b=a.get(0).spatialReference,c=!0===a.get(0).hasZ,d=!0===a.get(0).hasM)}return 0===e.length?null:new T({points:e,spatialReference:b,hasZ:c,hasM:d})}return a}function Ja(a,b=!1){const c=[];if(null===a)return c;if(!0===u(a)){for(var d=0;d<a.length;d++){var e=x(a[d]);""===e&&!0!==b||c.push(e)}return c}if(a instanceof y){for(d=0;d<a.length();d++)e=x(a.get(d)),""===e&&!0!==b||c.push(e);return c}return H(a)?(a=x(a),
""===a&&!0!==b||c.push(a),c):[]}function Ka(a){fa++;return 0===fa%100?(fa=0,new Promise(b=>{setTimeout(()=>{b(a)},0)})):a}function La(a,b,c){switch(c){case "\x26":return a&b;case "|":return a|b;case "^":return a^b;case "\x3c\x3c":return a<<b;case "\x3e\x3e":return a>>b;case "\x3e\x3e\x3e":return a>>>b}}function E(a,b=null){if(null!=a){if(q(a)||p(a)||m(a))return a;if(a instanceof B)return!0===b?.keepGeometryType?a:a.toJSON();if(a instanceof y)return a.toArray().map(c=>E(c,b));if(a instanceof Array)return a.map(c=>
E(c,b));if(a instanceof Date)return a;if(null!==a&&"object"===typeof a&&void 0!==a.castAsJson)return a.castAsJson(b)}return null}function Za(a,b,c,d,e){return ha.apply(this,arguments)}function ha(){ha=ka._asyncToGenerator(function*(a,b,c,d,e){a=yield ia(a,b,c);e[d]=a});return ha.apply(this,arguments)}function ia(a){return ja.apply(this,arguments)}function ja(){ja=ka._asyncToGenerator(function*(a,b=null,c=null){a instanceof y&&(a=a.toArray());if(null!=a){if(H(a)||a instanceof B||a instanceof Date)return E(a,
c);if(a instanceof Array){const d=[],e=[];for(const g of a)null===g||H(g)||g instanceof B||g instanceof Date?e.push(E(g,c)):(e.push(null),d.push(Za(g,b,c,e.length-1,e)));0<d.length&&(yield Promise.all(d));return e}if(null!==a&&"object"===typeof a&&void 0!==a.castAsJsonAsync)return a.castAsJsonAsync(b,c)}return null});return ja.apply(this,arguments)}function Ma(a,b,c){const d=a.fullSchema();return null!==d&&d.fields?J(b,d,a,c):null}function Na(a){a=a.fullSchema();return null!==a&&a.fields?a.typeIdField?
{subtypeField:a.typeIdField,subtypes:a.types?a.types.map(b=>({name:b.name,code:b.id})):[]}:null:null}function Oa(a,b,c,d){const e=a.fullSchema();if(null===e||!e.fields)return null;d=J(b,e,a,d);if(void 0===c)try{c=a.field(b)}catch(g){return null}return da(d,c)}function Pa(a,b,c,d){const e=a.fullSchema();if(null===e||!e.fields)return null;if(void 0===c){try{c=a.field(b)}catch(g){return null}return c}a=J(b,e,a,d);return ea(a,c)}function Qa(a){a=a.fullSchema();if(null===a||!a.fields)return null;const b=
[];for(const c of a.fields)b.push(W.esriFieldToJson(c));return{objectIdField:a.objectIdField,globalIdField:a.globalIdField,geometryType:void 0===W.layerGeometryEsriRestConstants[a.geometryType]?"":W.layerGeometryEsriRestConstants[a.geometryType],fields:b}}let Q=function(a){this.value=a},R=function(a){this.value=a};const r={type:"VOID"},Ra={type:"BREAK"},Sa={type:"CONTINUE"};let fa=0;const $a=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:Q,ImplicitResultE:R,ImplicitResult:R,ReturnResult:Q,
voidOperation:r,breakResult:Ra,continueResult:Sa,multiReplace:C,isFunctionParameter:G,isModule:M,isSimpleType:H,defaultUndefined:na,getType:oa,isString:m,isBoolean:q,isNumber:p,isInteger:pa,isArray:u,isFeature:X,isFeatureSet:Y,isFeatureSetCollection:Z,isImmutableArray:w,isDate:n,pcCheck:qa,absRound:ra,generateUUID:sa,formatNumber:N,formatDate:I,standardiseDateFormat:aa,greaterThanLessThan:ta,equalityTest:ba,toString:x,toNumberArray:ua,toStringExplicit:ca,toNumber:l,toDate:va,toDateTime:xa,toBoolean:ya,
fixSpatialReference:za,fixNullGeometry:Aa,getDomainValue:da,getDomainCode:ea,getDomain:J,stableStringify:P,autoCastFeatureToGeometry:Fa,autoCastArrayOfPointsToPolygon:Ga,autoCastArrayOfPointsToPolyline:Ha,autoCastArrayOfPointsToMultiPoint:Ia,toStringArray:Ja,tick:Ka,binaryOperator:La,castAsJson:E,castAsJsonAsync:ia,featureFullDomain:Ma,featureSubtypes:Na,featureDomainValueLookup:Oa,featureDomainCodeLookup:Pa,featureSchema:Qa},Symbol.toStringTag,{value:"Module"}));f.ImplicitResult=R;f.ImplicitResultE=
R;f.ReturnResult=Q;f.ReturnResultE=Q;f.absRound=ra;f.autoCastArrayOfPointsToMultiPoint=Ia;f.autoCastArrayOfPointsToPolygon=Ga;f.autoCastArrayOfPointsToPolyline=Ha;f.autoCastFeatureToGeometry=Fa;f.binaryOperator=La;f.breakResult=Ra;f.castAsJson=E;f.castAsJsonAsync=ia;f.continueResult=Sa;f.defaultUndefined=na;f.equalityTest=ba;f.featureDomainCodeLookup=Pa;f.featureDomainValueLookup=Oa;f.featureFullDomain=Ma;f.featureSchema=Qa;f.featureSubtypes=Na;f.fixNullGeometry=Aa;f.fixSpatialReference=za;f.formatDate=
I;f.formatNumber=N;f.generateUUID=sa;f.getDomain=J;f.getDomainCode=ea;f.getDomainValue=da;f.getType=oa;f.greaterThanLessThan=ta;f.isArray=u;f.isBoolean=q;f.isDate=n;f.isFeature=X;f.isFeatureSet=Y;f.isFeatureSetCollection=Z;f.isFunctionParameter=G;f.isImmutableArray=w;f.isInteger=pa;f.isModule=M;f.isNumber=p;f.isSimpleType=H;f.isString=m;f.lc=$a;f.multiReplace=C;f.pcCheck=qa;f.stableStringify=P;f.standardiseDateFormat=aa;f.tick=Ka;f.toBoolean=ya;f.toDate=va;f.toDateTime=xa;f.toNumber=l;f.toNumberArray=
ua;f.toString=x;f.toStringArray=Ja;f.toStringExplicit=ca;f.voidOperation=r});