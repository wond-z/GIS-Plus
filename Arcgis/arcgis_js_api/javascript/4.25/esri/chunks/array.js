// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ./_rollupPluginBabelHelpers ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(y,p,h,C,f,t){function z(k){function n(b,c,d){if(b instanceof C)return b.toArray();if(f.isArray(b))return b;throw new h.ArcadeExecutionError(c,h.ExecutionErrorCodes.InvalidParameter,d);}function r(b,c){var d=b.length,e=Math.floor(d/2);if(0===d)return[];if(1===d)return[b[0]];var a=r(b.slice(0,e),c);b=r(b.slice(e,d),c);for(d=[];0<a.length||0<b.length;)0<
a.length&&0<b.length?(e=c(a[0],b[0]),isNaN(e)&&(e=0),0>=e?(d.push(a[0]),a=a.slice(1)):(d.push(b[0]),b=b.slice(1))):0<a.length?(d.push(a[0]),a=a.slice(1)):0<b.length&&(d.push(b[0]),b=b.slice(1));return d}function v(b,c){return w.apply(this,arguments)}function w(){w=p._asyncToGenerator(function*(b,c){const d=b.length,e=Math.floor(d/2);if(0===d)return[];if(1===d)return[b[0]];b=[yield v(b.slice(0,e),c),yield v(b.slice(e,d),c)];return u(b[0],b[1],c,[])});return w.apply(this,arguments)}function u(b,c,d,
e){return x.apply(this,arguments)}function x(){x=p._asyncToGenerator(function*(b,c,d,e){if(0<b.length||0<c.length){if(0<b.length&&0<c.length){let a=yield d(b[0],c[0]);isNaN(a)&&(a=1);0>=a?(e.push(b[0]),b=b.slice(1)):(e.push(c[0]),c=c.slice(1));return u(b,c,d,e)}if(0<b.length)return e.push(b[0]),b=b.slice(1),u(b,c,d,e);if(0<c.length)return e.push(c[0]),c=c.slice(1),u(b,c,d,e)}else return e});return x.apply(this,arguments)}function A(b,c,d,e){f.pcCheck(d,1,2,b,c);let a=d[0];f.isImmutableArray(a)&&(a=
a.toArray());if(!1===f.isArray(a))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);if(1<d.length){if(!1===f.isFunctionParameter(d[1]))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);var g=a;const l=d[1].createFunction(b);return e?v(g,l):g=r(g,(m,q)=>l(m,q))}b=a;if(0===b.length)return[];d={};for(e=0;e<b.length;e++)c=f.getType(b[e]),""!==c&&(d[c]=!0);if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||
!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);e=0;c="";for(g in d)e++,c=g;return b=1<e||"String"===c?r(b,(l,m)=>{if(null===l||void 0===l||l===f.voidOperation)return null===m||void 0===m||m===f.voidOperation?0:1;if(null===m||void 0===m||m===f.voidOperation)return-1;l=f.toString(l);m=f.toString(m);return l<m?-1:l===m?0:1}):"Number"===c?r(b,(l,m)=>l-m):"Boolean"===c?r(b,(l,m)=>l===m?0:m?-1:1):"Date"===c?r(b,(l,m)=>m-l):b.slice(0)}k.functions.array=function(b,c){return k.standardFunction(b,
c,(d,e,a)=>{f.pcCheck(a,1,2,b,c);d=f.toNumber(a[0]);if(isNaN(d)||!1===f.isInteger(d))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);a=f.defaultUndefined(a[1],null);d=Array(d);d.fill(a);return d})};k.functions.front=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,1,b,c);if(f.isImmutableArray(a[0])){if(0>=a[0].length())throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);return a[0].get(0)}if(f.isArray(a[0])){if(0>=a[0].length)throw new h.ArcadeExecutionError(b,
h.ExecutionErrorCodes.OutOfBounds,c);return a[0][0]}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.back=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,1,b,c);if(f.isImmutableArray(a[0])){if(0>=a[0].length())throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);return a[0].get(a[0].length()-1)}if(f.isArray(a[0])){if(0>=a[0].length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);return a[0][a[0].length-
1]}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.push=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,2,b,c);if(f.isArray(a[0]))return a[0][a[0].length]=a[1],a[0].length;throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.pop=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,1,b,c);if(f.isArray(a[0])){if(0>=a[0].length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,
c);d=a[0][a[0].length-1];--a[0].length;return d}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.erase=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);if(f.isArray(a[0])){d=f.toNumber(a[1]);if(isNaN(d)||!1===f.isInteger(d))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);a=a[0];if(0>=a.length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);0>d&&(d=a.length+d);if(0>d)throw new h.ArcadeExecutionError(b,
h.ExecutionErrorCodes.OutOfBounds,c);if(d>=a.length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);a.splice(d,1);return f.voidOperation}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.insert=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,3,3,b,c);if(f.isArray(a[0])){d=f.toNumber(a[1]);if(isNaN(d)||!1===f.isInteger(d))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);e=a[2];a=a[0];if(d>
a.length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);if(0>d&&d<-1*a.length)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.OutOfBounds,c);if(d===a.length)return a[d]=e,f.voidOperation;a.splice(d,0,e);return f.voidOperation}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.resize=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,3,b,c);if(f.isArray(a[0])){e=f.toNumber(a[1]);if(isNaN(e)||!1===f.isInteger(e))throw new h.ArcadeExecutionError(b,
h.ExecutionErrorCodes.InvalidParameter,c);if(0>e)throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);d=f.defaultUndefined(a[2],null);a=a[0];if(a.length>=e)return a.length=e,f.voidOperation;const g=a.length;a.length=e;for(e=g;e<a.length;e++)a[e]=d;return f.voidOperation}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.includes=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);if(f.isArray(a[0])){const g=a[1];
return-1<a[0].findIndex(l=>f.equalityTest(l,g))?!0:!1}if(f.isImmutableArray(a[0])){const g=a[1];return-1<a[0].toArray().findIndex(l=>f.equalityTest(l,g))?!0:!1}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.slice=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,3,b,c);if(f.isArray(a[0])){d=f.toNumber(f.defaultUndefined(a[1],0));e=f.toNumber(f.defaultUndefined(a[2],a[0].length));if(isNaN(d)||!1===f.isInteger(d))throw new h.ArcadeExecutionError(b,
h.ExecutionErrorCodes.InvalidParameter,c);if(isNaN(e)||!1===f.isInteger(e))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);return a[0].slice(d,e)}if(f.isImmutableArray(a[0])){d=a[0];e=f.toNumber(f.defaultUndefined(a[1],0));a=f.toNumber(f.defaultUndefined(a[2],d.length()));if(isNaN(e)||!1===f.isInteger(e))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);if(isNaN(a)||!1===f.isInteger(a))throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,
c);return d.toArray().slice(e,a)}throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.splice=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{d=[];for(e=0;e<a.length;e++)f.isArray(a[e])?d.push(...a[e]):f.isImmutableArray(a[e])?d.push(...a[e].toArray()):d.push(a[e]);return d})};k.functions.top=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);if(f.isArray(a[0]))return f.toNumber(a[1])>=a[0].length?a[0].slice(0):a[0].slice(0,f.toNumber(a[1]));
if(f.isImmutableArray(a[0]))return f.toNumber(a[1])>=a[0].length()?a[0].slice(0):a[0].slice(0,f.toNumber(a[1]));throw new h.ArcadeExecutionError(b,h.ExecutionErrorCodes.InvalidParameter,c);})};k.functions.first=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,1,1,b,c);return f.isArray(a[0])?0===a[0].length?null:a[0][0]:f.isImmutableArray(a[0])?0===a[0].length()?null:a[0].get(0):null})};"sync"===k.mode&&(k.functions.sort=function(b,c){return k.standardFunction(b,c,(d,e,a)=>A(b,c,a,
!1))},k.functions.any=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);d=a[1].createFunction(b);a=n(a[0],b,c);for(const g of a)if(a=d(g),f.isBoolean(a)&&!0===a)return!0;return!1})},k.functions.all=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);d=a[1].createFunction(b);a=n(a[0],b,c);for(const g of a)if(!0!==d(g))return!1;return!0})},k.functions.none=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);d=a[1].createFunction(b);
a=n(a[0],b,c);for(const g of a)if(!0===d(g))return!1;return!0})},k.functions.reduce=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,3,b,c);const g=a[1].createFunction(b);d=n(a[0],b,c);return 2===a.length?0===d.length?null:d.reduce((l,m)=>{l=g(l,m);return l=void 0!==l&&l!==f.voidOperation?l:null}):d.reduce((l,m)=>{l=g(l,m);return l=void 0!==l&&l!==f.voidOperation?l:null},a[2])})},k.functions.map=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);d=a[1].createFunction(b);
e=n(a[0],b,c);a=[];for(const g of e)e=d(g),void 0!==e&&e!==f.voidOperation?a.push(e):a.push(null);return a})},k.functions.filter=function(b,c){return k.standardFunction(b,c,(d,e,a)=>{f.pcCheck(a,2,2,b,c);d=a[1].createFunction(b);a=n(a[0],b,c);e=[];for(const g of a)!0===d(g)&&e.push(g);return e})});"async"===k.mode&&(k.functions.sort=function(b,c){return k.standardFunctionAsync(b,c,(d,e,a)=>A(b,c,a,!0))},k.functions.any=function(b,c){return k.standardFunctionAsync(b,c,function(){var d=p._asyncToGenerator(function*(e,
a,g){f.pcCheck(g,2,2,b,c);e=g[1].createFunction(b);g=n(g[0],b,c);for(const l of g)if(g=yield e(l),a=null,a=t.isPromiseLike(a)?yield g:g,f.isBoolean(a)&&!0===a)return!0;return!1});return function(e,a,g){return d.apply(this,arguments)}}())},k.functions.all=function(b,c){return k.standardFunctionAsync(b,c,function(){var d=p._asyncToGenerator(function*(e,a,g){f.pcCheck(g,2,2,b,c);e=g[1].createFunction(b);g=n(g[0],b,c);for(const l of g)if(g=yield e(l),a=null,a=t.isPromiseLike(a)?yield g:g,!0!==a)return!1;
return!0});return function(e,a,g){return d.apply(this,arguments)}}())},k.functions.none=function(b,c){return k.standardFunctionAsync(b,c,function(){var d=p._asyncToGenerator(function*(e,a,g){f.pcCheck(g,2,2,b,c);e=g[1].createFunction(b);g=n(g[0],b,c);for(const l of g)if(g=yield e(l),a=null,a=t.isPromiseLike(a)?yield g:g,!0===a)return!1;return!0});return function(e,a,g){return d.apply(this,arguments)}}())},k.functions.filter=function(b,c){return k.standardFunctionAsync(b,c,function(){var d=p._asyncToGenerator(function*(e,
a,g){f.pcCheck(g,2,2,b,c);e=g[1].createFunction(b);a=n(g[0],b,c);g=[];for(const l of a){a=yield e(l);let m=null;m=t.isPromiseLike(m)?yield a:a;!0===m&&g.push(l)}return g});return function(e,a,g){return d.apply(this,arguments)}}())},k.functions.reduce=function(b,c){return k.standardFunctionAsync(b,c,(d,e,a)=>{f.pcCheck(a,2,3,b,c);const g=a[1].createFunction(b);d=n(a[0],b,c);e=null;if(2<a.length)a=f.defaultUndefined(a[2],null),e=d.reduce(function(){var l=p._asyncToGenerator(function*(m,q){m=yield m;
if(void 0===m||m===f.voidOperation)m=null;return g(m,q)});return function(m,q){return l.apply(this,arguments)}}(),Promise.resolve(a));else{if(0===d.length)return null;e=d.reduce(function(){var l=p._asyncToGenerator(function*(m,q,B){if(1>=B)return g(m,q);m=yield m;if(void 0===m||m===f.voidOperation)m=null;return g(m,q)});return function(m,q,B){return l.apply(this,arguments)}}())}return e.then(l=>void 0!==l&&l!==f.voidOperation?l:null)})},k.functions.map=function(b,c){return k.standardFunctionAsync(b,
c,function(){var d=p._asyncToGenerator(function*(e,a,g){f.pcCheck(g,2,2,b,c);e=g[1].createFunction(b);a=n(g[0],b,c);g=[];for(const l of a){a=yield e(l);let m=null;m=t.isPromiseLike(m)?yield a:a;void 0!==m&&m!==f.voidOperation?g.push(m):g.push(null)}return g});return function(e,a,g){return d.apply(this,arguments)}}())})}const D=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:z},Symbol.toStringTag,{value:"Module"}));y.ArrayFunctions=D;y.registerFunctions=z});