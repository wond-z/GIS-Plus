// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./DirectionsFeature ./FeatureSet ../../geometry/SpatialReference ../../geometry/Extent ../../geometry/Polyline".split(" "),function(p,c,b,l,d,z,A,r,t,u,v,w,x,q){function y(k,h){if(0===k.length)return new q({spatialReference:h});
const a=[];for(const g of k)for(const m of g.paths)a.push(...m);const e=[];a.forEach((g,m)=>{0!==m&&g[0]===a[m-1][0]&&g[1]===a[m-1][1]||e.push(g)});const {hasM:n,hasZ:f}=k[0];return new q({hasM:n,hasZ:f,paths:[e],spatialReference:h})}b=function(k){function h(a){a=k.call(this,a)||this;a.extent=null;a.features=null;a.geometryType="polyline";a.routeId=null;a.routeName=null;a.totalDriveTime=null;a.totalLength=null;a.totalTime=null;return a}p._inheritsLoose(h,k);h.prototype.readFeatures=function(a,e){if(!a)return[];
const n=(e=e.summary.envelope.spatialReference??e.spatialReference)&&w.fromJSON(e);return a.map(f=>{f=u.fromJSON(f);l.isSome(f.geometry)&&(f.geometry.spatialReference=n);if(l.isSome(f.events))for(const g of f.events)l.isSome(g.geometry)&&(g.geometry.spatialReference=n);return f})};p._createClass(h,[{key:"mergedGeometry",get:function(){if(!this.features)return null;const a=this.features.map(({geometry:e})=>l.unwrap(e));return y(a,this.extent.spatialReference)}},{key:"strings",get:function(){return this.features.map(({strings:a})=>
a).flat().filter(l.isSome)}}]);return h}(v);c.__decorate([d.property({type:x,json:{read:{source:"summary.envelope"}}})],b.prototype,"extent",void 0);c.__decorate([d.property()],b.prototype,"features",void 0);c.__decorate([r.reader("features")],b.prototype,"readFeatures",null);c.__decorate([d.property()],b.prototype,"geometryType",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"mergedGeometry",null);c.__decorate([d.property()],b.prototype,"routeId",void 0);c.__decorate([d.property()],
b.prototype,"routeName",void 0);c.__decorate([d.property({value:null,readOnly:!0})],b.prototype,"strings",null);c.__decorate([d.property({json:{read:{source:"summary.totalDriveTime"}}})],b.prototype,"totalDriveTime",void 0);c.__decorate([d.property({json:{read:{source:"summary.totalLength"}}})],b.prototype,"totalLength",void 0);c.__decorate([d.property({json:{read:{source:"summary.totalTime"}}})],b.prototype,"totalTime",void 0);return b=c.__decorate([t.subclass("esri.rest.support.DirectionsFeatureSet")],
b)});