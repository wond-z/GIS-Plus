// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../Graphic ../../core/maybe ../../geometry/Extent ../../geometry/Mesh ../../geometry/Point ../../geometry/support/axisAngleDegrees ../../geometry/support/MeshTransform ./FeatureSet".split(" "),function(k,p,l,q,m,r,t,u,v){function w(a){return({attributes:b})=>{if(!b)return{};if(!a)return b;for(const c in b)a.has(c)||delete b[c];return b}}function x(a,b,c,e,d){b=d.get(a.attributes[b]);if(null==b||b.status===f.FAILED||null==b.url)return null;d=y(a,c,e);const h=q.fromJSON(a.geometry);
h.spatialReference=c;a=z(a.attributes,e,b.geographic);return b.status===f.PENDING?m.createIncomplete(d,{extent:h,transform:a}):m.createWithExternalSource(d,[{name:b.name,source:b.url}],{extent:h,transform:a})}function y({attributes:a},b,{transformFieldRoles:c}){return new r({x:a[c.originX],y:a[c.originY],z:a[c.originZ],spatialReference:b})}function z(a,{transformFieldRoles:b},c){return new u({translation:[a[b.translationX],a[b.translationY],a[b.translationZ]],rotation:t.fromAxisAndAngle([a[b.rotationX],
a[b.rotationY],a[b.rotationZ]],a[b.rotationDeg]),scale:[a[b.scaleX],a[b.scaleY],a[b.scaleZ]],geographic:c})}function A(a,b){a=new Map;for(const c of b){b=c.parentGlobalId;if(null==b)continue;const e=c.assetName,d=c.assetURL,h=c.conversionStatus;let g=a.get(b);if(null==g)g={name:e,status:f.FAILED,url:d,geographic:c.flags.includes("PROJECT_VERTICES")},a.set(b,g);else throw Error("multiple asset parts not expected.");switch(h){case "COMPLETED":case "SUBMITTED":g.status=f.COMPLETED;break;case "INPROGRESS":g.status=
f.PENDING;break;default:g.status=f.FAILED}}return a}var f;(function(a){a[a.FAILED=0]="FAILED";a[a.PENDING=1]="PENDING";a[a.COMPLETED=2]="COMPLETED"})(f||(f={}));k.meshFeatureSetFromJSON=function(a,b,c){var e=c.features;c.features=[];delete c.geometryType;const d=v.fromJSON(c);d.geometryType="mesh";if(!c.assetMaps)return d;const h=A(b,c.assetMaps),g=d.spatialReference;c=c.globalIdFieldName;a=l.isNone(a.outFields)||!a.outFields.length?()=>({}):w(a.outFields.includes("*")?null:new Set(a.outFields));
for(const n of e)e=x(n,c,g,b,h),l.isSome(e)&&d.features.push(new p({geometry:e,attributes:a(n)}));return d};Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});