// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../request ../geometry/support/normalizeUtils ./networkService ./utils ./route/utils ./support/ClosestFacilitySolveResult ./support/FeatureSet".split(" "),function(p,r,t,u,c,v,w,x,y){function h(e){return e instanceof y}function m(){m=r._asyncToGenerator(function*(e,a,f){const n=[];var d=[],b={};const k={},q=v.parseUrl(e);({path:e}=q);h(a.incidents)&&c.collectGeometries(a.incidents.features,d,"incidents.features",b);h(a.facilities)&&c.collectGeometries(a.facilities.features,
d,"facilities.features",b);h(a.pointBarriers)&&c.collectGeometries(a.pointBarriers.features,d,"pointBarriers.features",b);h(a.polylineBarriers)&&c.collectGeometries(a.polylineBarriers.features,d,"polylineBarriers.features",b);h(a.polygonBarriers)&&c.collectGeometries(a.polygonBarriers.features,d,"polygonBarriers.features",b);d=yield u.normalizeCentralMeridian(d);for(const g in b){const l=b[g];n.push(g);k[g]=d.slice(l[0],l[1])}if(c.isInputGeometryZAware(k,n)){b=null;try{b=yield c.fetchServiceDescription(e,
a.apiKey,f)}catch{}b&&!b.hasZ&&c.dropZValuesOffInputGeometry(k,n)}for(const g in k)k[g].forEach((l,z)=>{a.get(g)[z].geometry=l});f={...f,query:{...q.query,...w.closestFacilityParametersToQueryParameters(a),f:"json"}};({data:f}=yield t(`${e}/solveClosestFacility`,f));return x.fromJSON(f)});return m.apply(this,arguments)}p.solve=function(e,a,f){return m.apply(this,arguments)};Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});