// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Collection ../../core/has ../../core/promiseUtils ./lazyLayerLoader ../../portal/PortalItem ../../portal/support/featureCollectionUtils ../../portal/support/portalLayers ../../renderers/support/styleUtils".split(" "),function(u,g,z,P,A,f,B,l,C,D){function v(a,b,c){return m.apply(this,arguments)}function m(){m=g._asyncToGenerator(function*(a,b,c){if(b){var d=[];for(const e of b)b=E(e,c),"GroupLayer"===e.layerType?d.push(F(b,e,c)):d.push(b);
d=yield A.eachAlways(d);for(const e of d)!e.value||c.filter&&!c.filter(e.value)||a.add(e.value)}});return m.apply(this,arguments)}function E(a,b){return n.apply(this,arguments)}function n(){n=g._asyncToGenerator(function*(a,b){const c=yield G(a,b);return H(c,a,b)});return n.apply(this,arguments)}function H(a,b,c){return p.apply(this,arguments)}function p(){p=g._asyncToGenerator(function*(a,b,c){a=new a;a.read(b,c.context);"group"===a.type&&w(b)&&(yield I(a,b,c.context));yield D.loadStyleRenderer(a,
c.context);return a});return p.apply(this,arguments)}function G(a,b){return q.apply(this,arguments)}function q(){q=g._asyncToGenerator(function*(a,b){var c=b.context;let d;switch(c.origin){case "web-scene":switch(c.layerContainerType){case "basemap":d=J;break;case "ground":d=K;break;default:d=L}break;default:switch(c.layerContainerType){case "basemap":d=M;break;case "tables":d=N;break;default:d=O}}let e=a.layerType||a.type;!e&&b&&b.defaultLayerType&&(e=b.defaultLayerType);b=(b=d[e])?f.layerLookupMap[b]:
f.layerLookupMap.UnknownLayer;"Feature Collection"===a.type?(c=c?.portal,a.itemId&&(a=new B({id:a.itemId,portal:c}),yield a.load(),a=(yield C.selectLayerClassPath(a)).className||"UnknownLayer",b=f.layerLookupMap[a])):"ArcGISFeatureLayer"===e?l.isMapNotesLayer(a)||l.isMarkupLayer(a)?b=f.layerLookupMap.MapNotesLayer:l.isRouteLayer(a)?b=f.layerLookupMap.RouteLayer:w(a)&&(b=f.layerLookupMap.GroupLayer):a.wmtsInfo&&a.wmtsInfo.url&&a.wmtsInfo.layerIdentifier?b=f.layerLookupMap.WMTSLayer:"WFS"===e&&"2.0.0"!==
a.wfsInfo.version&&(b=f.layerLookupMap.UnsupportedLayer);return b()});return q.apply(this,arguments)}function w(a){return"ArcGISFeatureLayer"!==a.layerType||"Feature Collection"===a.type?!1:1<(a.featureCollection?.layers?.length??0)}function F(a,b,c){return r.apply(this,arguments)}function r(){r=g._asyncToGenerator(function*(a,b,c){const d=new z;b=v(d,Array.isArray(b.layers)?b.layers:[],c);a=yield a;yield b;if("group"===a.type)return a.layers.addMany(d),a});return r.apply(this,arguments)}function I(a,
b,c){return t.apply(this,arguments)}function t(){t=g._asyncToGenerator(function*(a,b,c){const d=yield(0,f.layerLookupMap.FeatureLayer)();var e=b.featureCollection;const x=e.showLegend;e=e.layers.map((h,y)=>{const k=new d;k.read(h,c);h={...c,ignoreDefaults:!0};k.read({id:`${a.id}-sublayer-${y}`,visibility:b.visibleLayers?.includes(y)??!0},h);null!=x&&k.read({showLegend:x},h);return k});a.layers.addMany(e)});return t.apply(this,arguments)}const L={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",
ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",
WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},K={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},J={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",
WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},O={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",
BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},N={ArcGISFeatureLayer:"FeatureLayer"},M={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",
ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};u.populateOperationalLayers=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});