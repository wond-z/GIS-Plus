// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(k,m,f,n){let p=function(){function g(){this._tasks=[];this._running=new n.ObservableValue(!1)}var d=g.prototype;d.destroy=function(){this.cancelAll()};d.runTask=function(b){for(;!b.done&&this._process(b);)b.madeProgress()};d.push=function(b,a,c){this._running.set(!0);return new Promise((e,h)=>this._tasks.push(new l(e,h,b,a,c)))};d.unshift=function(b,
a,c){this._running.set(!0);return new Promise((e,h)=>this._tasks.unshift(new l(e,h,b,a,c)))};d._process=function(b){if(0===this._tasks.length)return!1;const a=this._tasks.shift();try{const c=f.isAborted(a.signal);if(c&&!a.abortCallback)a.reject(f.createAbortError());else{const e=c?a.abortCallback?.(f.createAbortError()):a.callback(b);f.isPromiseLike(e)?e.then(a.resolve,a.reject):a.resolve(e)}}catch(c){a.reject(c)}this._running.set(0<this._tasks.length);return!0};d.cancelAll=function(){const b=f.createAbortError();
for(const a of this._tasks)if(a.abortCallback){const c=a.abortCallback(b);a.resolve(c)}else a.reject(b);this._tasks.length=0;this._running.set(!1)};m._createClass(g,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return g}(),l=function(g,d,b,a,c){this.resolve=g;this.reject=d;this.callback=b;this.signal=a;this.abortCallback=c};k.PromiseQueue=p;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});