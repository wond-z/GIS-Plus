// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(K){return function(){function m(F){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(F&&F.steps)for(const n of F.steps)n instanceof K?this.steps.push(n):this.steps.push(new K({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}m.cacheKey=function(F,n){return[void 0!==F.wkid&&null!==F.wkid?F.wkid.toString():"-1",void 0!==F.wkt&&null!==F.wkt?F.wkt.toString():
"",void 0!==n.wkid&&null!==n.wkid?n.wkid.toString():"-1",void 0!==n.wkt&&null!==n.wkt?n.wkt.toString():""].join()};m.fromGE=function(F){const n=new m;let N="";for(const aa of F.steps)F=K.fromGE(aa),n.steps.push(F),N+=F.uid.toString()+",";n._cachedProjection={};n._gtlistentry=null;n._chain=N;return n};var R=m.prototype;R.getInverse=function(){const F=new m;F.steps=[];for(let n=this.steps.length-1;0<=n;n--)F.steps.push(this.steps[n].getInverse());return F};R.getGTListEntry=function(){let F="";for(const n of this.steps)F+=
n.uid.toString()+",";F!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=F);return this._gtlistentry};R.assignCachedGe=function(F,n,N){this._cachedProjection[m.cacheKey(F,n)]=N};R.getCachedGeTransformation=function(F,n){let N="";for(const aa of this.steps)N+=aa.uid.toString()+",";N!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=N);F=this._cachedProjection[m.cacheKey(F,n)];return void 0===F?null:F};return m}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(K){let m=0;return function(){function R(F){this.uid=m++;F?(this._wkt=null!=F.wkt?F.wkt:null,this._wkid=null!=F.wkid?F.wkid:-1,this._isInverse=null!=F.isInverse?!0===F.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}R.fromGE=function(F){const n=new R;n._wkt=F.wkt;n._wkid=F.wkid;n._isInverse=F.isInverse;return n};R.prototype.getInverse=function(){const F=new R;F._wkt=this.wkt;F._wkid=this._wkid;F._isInverse=!this.isInverse;return F};K._createClass(R,[{key:"wkt",get:function(){return this._wkt},
set:function(F){this._wkt=F;this.uid=m++}},{key:"wkid",get:function(){return this._wkid},set:function(F){this._wkid=F;this.uid=m++}},{key:"isInverse",get:function(){return this._isInverse},set:function(F){this._isInverse=F;this.uid=m++}}]);return R}()})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y){var p;F=p=function(J){function k(f){f=J.call(this,f)||this;f.width=null;f.height=null;f.pixelType="f32";f.validPixelCount=null;f.mask=null;f.maskIsAlpha=!1;f.statistics=null;return f}K._inheritsLoose(k,J);k.createEmptyBand=function(f,q){return new (p.getPixelArrayConstructor(f))(q)};k.getPixelArrayConstructor=function(f){let q;switch(f){case "u1":case "u2":case "u4":case "u8":q=Uint8Array;break;case "u16":q=Uint16Array;break;case "u32":q=Uint32Array;break;case "s8":q=
Int8Array;break;case "s16":q=Int16Array;break;case "s32":q=Int32Array;break;case "f32":q=Float32Array;break;case "f64":q=Float64Array;break;case "c64":case "c128":case "unknown":q=Float32Array}return q};var d=k.prototype;d.castPixelType=function(f){if(!f)return"f32";f=f.toLowerCase();["u1","u2","u4"].includes(f)?f="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(f)||(f="f32");return f};d.getPlaneCount=function(){return this.pixels?.length};d.addData=function(f){if(!f.pixels||f.pixels.length!==
this.width*this.height)throw new R("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(f.pixels);this.statistics.push(f.statistics??new y.SimpleBandStatistics)};d.getAsRGBA=function(){const f=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(f);
break;default:this._fillFrom8Bit(f)}return new Uint8ClampedArray(f)};d.getAsRGBAFloat=function(){const f=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(f);return f};d.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(z=>this._calculateBandStatistics(z,this.mask));var f=this.mask,q=0;if(aa.isSome(f))for(let z=0;z<f.length;z++)f[z]&&q++;else q=this.width*this.height;this.validPixelCount=q}};d.clamp=function(f){if(f&&"f64"!==f&&"f32"!==f&&this.pixels){switch(f){case "u8":var q=
[0,255];break;case "u16":q=[0,65535];break;case "u32":q=[0,4294967295];break;case "s8":q=[-128,127];break;case "s16":q=[-32768,32767];break;case "s32":q=[-2147483648,2147483647];break;default:q=[-3.4*1E39,3.4*1E39]}var [z,t]=q;q=this.pixels;var b=this.width*this.height,l=q.length,g=[];for(let r=0;r<l;r++){var u=p.createEmptyBand(f,b);var h=q[r];for(let v=0;v<b;v++){var c=h[v];u[v]=c>t?t:c<z?z:c}g.push(u)}this.pixels=g;this.pixelType=f}};d.extractBands=function(f){const {pixels:q,statistics:z}=this;
if(aa.isNone(f)||0===f.length||!q||0===q.length)return this;var t=q.length;const b=f.some(l=>l>=q.length);t=t===f.length&&!f.some((l,g)=>l!==g);return b||t?this:new p({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:f.map(l=>q[l]),statistics:z&&f.map(l=>z[l])})};d.clone=function(){const f=new p({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});
aa.isSome(this.mask)&&(f.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let q;const z=p.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){f.pixels=[];const t=!!this.pixels[0].slice;for(q=0;q<this.pixels.length;q++)f.pixels[q]=t?this.pixels[q].slice(0,this.pixels[q].length):new z(this.pixels[q])}if(this.statistics)for(f.statistics=[],q=0;q<this.statistics.length;q++)f.statistics[q]=n.clone(this.statistics[q]);return f};d._fillFrom8Bit=
function(f){const {mask:q,maskIsAlpha:z,pixels:t}=this;if(f&&t&&t.length){var b,l;var g=b=l=t[0];3<=t.length?(b=t[1],l=t[2]):2===t.length&&(b=t[1]);var u=new Uint32Array(f),h=this.width*this.height;if(g.length!==h)N.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(aa.isSome(q)&&q.length===h)if(z)for(f=0;f<h;f++)q[f]&&(u[f]=q[f]<<24|l[f]<<16|b[f]<<8|g[f]);else for(f=0;f<h;f++)q[f]&&(u[f]=-16777216|l[f]<<16|b[f]<<8|g[f]);else for(f=0;f<
h;f++)u[f]=-16777216|l[f]<<16|b[f]<<8|g[f]}else N.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d._fillFromNon8Bit=function(f){const {pixels:q,mask:z,statistics:t}=this;if(f&&q&&q.length){var b=this.pixelType,l=1,g=0;l=1;if(t&&0<t.length){for(var u of t)null!=u.minValue&&(g=Math.min(g,u.minValue)),null!=u.maxValue&&null!=u.minValue&&(l=Math.max(l,u.maxValue-u.minValue));l=255/l}else l=255,"s8"===b?(g=-128,l=127):"u16"===b?l=65535:
"s16"===b?(g=-32768,l=32767):"u32"===b?l=4294967295:"s32"===b?(g=-2147483648,l=2147483647):"f32"===b?(g=-3.4*1E39,l=3.4*1E39):"f64"===b&&(g=-Number.MAX_VALUE,l=Number.MAX_VALUE),l=255/(l-g);f=new Uint32Array(f);b=this.width*this.height;var h,c,r;u=h=c=q[0];if(u.length!==b)return N.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=q.length)if(h=q[1],3<=q.length&&(c=q[2]),aa.isSome(z)&&z.length===b)for(r=0;r<b;r++)z[r]&&(f[r]=-16777216|
(c[r]-g)*l<<16|(h[r]-g)*l<<8|(u[r]-g)*l);else for(r=0;r<b;r++)f[r]=-16777216|(c[r]-g)*l<<16|(h[r]-g)*l<<8|(u[r]-g)*l;else if(aa.isSome(z)&&z.length===b)for(r=0;r<b;r++)h=(u[r]-g)*l,z[r]&&(f[r]=-16777216|h<<16|h<<8|h);else for(r=0;r<b;r++)h=(u[r]-g)*l,f[r]=-16777216|h<<16|h<<8|h}else N.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d._fillFrom32Bit=function(f){const {pixels:q,mask:z}=this;if(!f||!q||!q.length)return N.getLogger(this.declaredClass).error("getAsRGBAFloat()",
"Unable to convert to RGBA. The input pixel block is empty.");let t,b,l,g;t=b=l=q[0];3<=q.length?(b=q[1],l=q[2]):2===q.length&&(b=q[1]);const u=this.width*this.height;if(t.length!==u)return N.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let h=0;if(aa.isSome(z)&&z.length===u)for(g=0;g<u;g++)f[h++]=t[g],f[h++]=b[g],f[h++]=l[g],f[h++]=z[g]&1;else for(g=0;g<u;g++)f[h++]=t[g],f[h++]=b[g],f[h++]=l[g],f[h++]=1};d._calculateBandStatistics=
function(f,q){let z=Infinity,t=-Infinity;const b=f.length;let l,g=0;if(aa.isSome(q))for(l=0;l<b;l++)q[l]&&(g=f[l],z=g<z?g:z,t=g>t?g:t);else for(l=0;l<b;l++)g=f[l],z=g<z?g:z,t=g>t?g:t;return new y.SimpleBandStatistics(z,t)};return k}(F.JSONSupport);m.__decorate([S.property({json:{write:!0}})],F.prototype,"width",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"height",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"pixelType",void 0);m.__decorate([L.cast("pixelType")],
F.prototype,"castPixelType",null);m.__decorate([S.property({json:{write:!0}})],F.prototype,"validPixelCount",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"mask",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"maskIsAlpha",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"pixels",void 0);m.__decorate([S.property({json:{write:!0}})],F.prototype,"statistics",void 0);return F=p=m.__decorate([M.subclass("esri.layers.support.PixelBlock")],F)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],
function(K){K.SimpleBandStatistics=function(m=null,R=null,F=null){this.minValue=m;this.maxValue=R;this.noDataValue=F};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(K,m,R,
F,n,N,aa,S,L,M,y,p,J){function k(C,X){return d.apply(this,arguments)}function d(){d=m._asyncToGenerator(function*(C,X){if(!J.isPlatformLittleEndian)throw new R("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield S.load();const {offset:G,noDataValue:I}=X,{width:ja,height:H,pixelType:Z,statistics:da,pixels:Y,mask:w}=S.decode(C,{inputOffset:G,noDataValue:I,returnInterleaved:X.returnInterleaved});return new n({width:ja,height:H,pixelType:Z.toLowerCase(),pixels:Y,mask:w,
statistics:da})});return d.apply(this,arguments)}function f(C,X){return q.apply(this,arguments)}function q(){q=m._asyncToGenerator(function*(C,X){C=yield p.decode(C,X);F.assertIsSome(C);C=new n({width:C.width,height:C.height,pixels:C.pixels,pixelType:C.pixelType.toLowerCase(),mask:C.mask,statistics:null});C.updateStatistics();return C});return q.apply(this,arguments)}function z(C,X){return t.apply(this,arguments)}function t(){t=m._asyncToGenerator(function*(C,X){C=yield p.decodeTileOrStrip(C,X.customOptions);
C=new n({width:C.width,height:C.height,pixels:C.pixels,pixelType:C.pixelType.toLowerCase(),mask:C.mask,statistics:null});C.updateStatistics();return C});return t.apply(this,arguments)}function b(C,X){const G=X.pixelType||"u8",I=n.getPixelArrayConstructor(G),ja="u8"===G?C:new I(C.buffer),H=[],Z=X.planes||1;if(1===Z)H.push(ja);else for(let da=0;da<Z;da++){const Y=(X.width||1)*(X.height||C.length),w=new I(Y);for(let O=0;O<Y;O++)w[O]=ja[O*Z+da];H.push(w)}C=new n({width:X.width||1,height:X.height||C.length,
pixels:H,pixelType:G,statistics:null});C.updateStatistics();return C}function l(C,X){C=(new M.Zlib(new Uint8Array(C))).getBytes();return b(C,X)}function g(C,X){C=L.decode(C,X.offset,X.eof,!X.isInputBigEndian);return b(C,X)}function u(C,X){C=aa.decode(C,X.hasNoZlibMask??void 0);C=new n({width:C.width,height:C.height,pixels:C.pixels,pixelType:"U8",mask:C.mask,statistics:null});C.updateStatistics();return C}function h(C,X){C=new Uint8Array(C);C=new P(C);const {width:G,height:I}=X;X=G*I;C=C.decode();
let ja=0;var H=0;let Z;H=new Uint8Array(X);for(ja=0;ja<X;ja++)H[ja]=C[4*ja+3];const da=new n({width:G,height:I,pixels:[],pixelType:"U8",mask:H,statistics:[]});for(ja=0;3>ja;ja++){Z=new Uint8Array(X);for(H=0;H<X;H++)Z[H]=C[4*H+ja];da.addData({pixels:Z})}da.updateStatistics();return da}function c(C,X,G,I){return r.apply(this,arguments)}function r(){r=m._asyncToGenerator(function*(C,X,G,I){C=yield(new N).decode(C,{applyJpegMask:!1,format:X,...G},I);C=new n(C);C.updateStatistics();return C});return r.apply(this,
arguments)}function v(C){if(null==C)throw new R("rasterCodec:decode","parameter encodeddata is required.");C=new Uint8Array(C,0,10);let X="";255===C[0]&&216===C[1]?X="jpg":137===C[0]&&80===C[1]&&78===C[2]&&71===C[3]?X="png":67===C[0]&&110===C[1]&&116===C[2]&&90===C[3]&&73===C[4]&&109===C[5]&&97===C[6]&&103===C[7]&&101===C[8]&&32===C[9]?X="lerc":76===C[0]&&101===C[1]&&114===C[2]&&99===C[3]&&50===C[4]&&32===C[5]?X="lerc2":73===C[0]&&73===C[1]&&42===C[2]&&0===C[3]||77===C[0]&&77===C[1]&&0===C[2]&&42===
C[3]||73===C[0]&&73===C[1]&&43===C[2]&&0===C[3]||77===C[0]&&77===C[1]&&0===C[2]&&43===C[3]?X="tiff":71===C[0]&&73===C[1]&&70===C[2]?X="gif":66===C[0]&&77===C[1]?X="bmp":String.fromCharCode.apply(null,C).toLowerCase().includes("error")&&(X="error");return X}function x(C){let X=null;switch(C){case "lerc":case "lerc2":X=k;break;case "jpg":X=u;break;case "png":X=h;break;case "bsq":case "bip":X=(G,I)=>{var ja=I.pixelType,H=null;let Z=null;switch(ja?ja.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":Z=
255;H=Uint8Array;break;case "u16":Z=Z||65535;H=Uint16Array;break;case "u32":Z=Z||2**32-1;H=Uint32Array;break;case "s8":Z=Z||-128;H=Int8Array;break;case "s16":Z=Z||-32768;H=Int16Array;break;case "s32":Z=Z||-(2**31);H=Int32Array;break;default:H=Float32Array}({pixelTypeCtor:ja}={pixelTypeCtor:H,noDataValue:Z});H=y.decode;G=H(G,{width:I.width,height:I.height,pixelType:ja,format:C});I=new n({width:I.width,height:I.height,pixels:G.pixels,pixelType:I.pixelType,mask:G.mask,statistics:null});I.updateStatistics();
return I};break;case "tiff":X=f;break;case "deflate":X=l;break;case "lzw":X=g;break;case "error":X=()=>{throw new R("rasterCodec:decode","input data contains error");};break;default:X=()=>{throw new R("rasterCodec:decode","unsupported raster format");}}return X}function A(C,X=1){if(C){var {pixels:G,width:I,height:ja,mask:H}=C;if(G&&0!==G.length){var Z=G.length,da=I-1,Y=ja-1,w=[],O,U,ea=null,ca=n.getPixelArrayConstructor(C.pixelType);if(0===X){for(X=0;X<Z;X++){var ha=G[X];var a=new ca(da*Y);for(O=
0;O<Y;O++){var e=O*I;for(U=0;U<da;U++)a[O*da+U]=ha[e+U]}w.push(a)}if(F.isSome(H))for(ea=new Uint8Array(da*Y),O=0;O<Y;O++)for(e=O*I,U=0;U<da;U++)ea[O*da+U]=H[e+U]}else{for(X=0;X<Z;X++){ha=G[X];a=new ca(da*Y);for(O=0;O<Y;O++)for(e=O*I,U=0;U<da;U++)a[O*da+U]=(ha[e+U]+ha[e+U+1]+ha[e+I+U]+ha[e+I+U+1])/4;w.push(a)}if(H)for(ea=new Uint8Array(da*Y),O=0;O<Y;O++)for(e=O*I,U=0;U<da;U++)ea[O*da+U]=Math.min.apply(null,[H[e+U],H[e+U+1],H[e+I+U],H[e+I+U+1]])}C.width=da;C.height=Y;C.mask=ea;C.pixels=w}}}function E(){E=
m._asyncToGenerator(function*(C,X={},G){if(null==C)throw new R("rasterCodec:decode","missing encodeddata parameter.");let I=X.format&&X.format.toLowerCase();if(!("bsq"!==I&&"bip"!==I||null!=X.width&&null!=X.height))throw new R("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===I&&X.customOptions)return z(C,X);if(!I||"bsq"!==I&&"bip"!==I&&"deflate"!==I&&"lzw"!==I)I=v(C);X.useCanvas&&T.has(I)?C=yield c(C,I,X,G):(G=x(I),X.isPoint&&(X={...X},null!=X.width&&X.width++,null!=
X.height&&X.height++),C=yield G(C,X),X.isPoint&&A(C));return C});return E.apply(this,arguments)}var P=function(C){function X(H){var Z,da;this.data=H;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(da=null;;){var Y=this.readUInt32();var w=H=void 0;H=[];for(w=0;4>w;++w)H.push(String.fromCharCode(this.data[this.pos++]));H=H.join("");switch(H){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=
this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(Y);break;case "fcTL":da&&this.animation.frames.push(da);this.pos+=4;da={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};H=this.readUInt16();Y=this.readUInt16()||
100;da.delay=1E3*H/Y;da.disposeOp=this.data[this.pos++];da.blendOp=this.data[this.pos++];da.data=[];break;case "IDAT":case "fdAT":"fdAT"===H&&(this.pos+=4,Y-=4);H=(null!=da?da.data:void 0)||this.imgData;for(w=0;0<=Y?w<Y:w>Y;0<=Y?++w:--w)H.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(Y);Y=255-this.transparency.indexed.length;if(0<Y)for(H=0;0<=Y?H<Y:H>Y;0<=Y?++H:--H)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=
this.read(Y)[0];break;case 2:this.transparency.rgb=this.read(Y)}break;case "tEXt":w=this.read(Y);Y=w.indexOf(0);H=String.fromCharCode.apply(String,w.slice(0,Y));this.text[H]=String.fromCharCode.apply(String,w.slice(Y+1));break;case "IEND":da&&this.animation.frames.push(da);a:{switch(this.colorType){case 0:case 3:case 4:da=1;break a;case 2:case 6:da=3;break a}da=void 0}this.colors=da;this.hasAlphaChannel=4===(Z=this.colorType)||6===Z;Z=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*
Z;a:{switch(this.colors){case 1:Z="DeviceGray";break a;case 3:Z="DeviceRGB";break a}Z=void 0}this.colorSpace=Z;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=Y}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var G;X.load=function(H,Z,da){"function"===typeof Z&&(da=Z);var Y=new XMLHttpRequest;Y.open("GET",H,!0);Y.responseType="arraybuffer";Y.onload=function(){var w=new Uint8Array(Y.response||Y.mozResponseArrayBuffer);w=new X(w);"function"===
typeof(null!=Z?Z.getContext:void 0)&&w.render(Z);return"function"===typeof da?da(w):void 0};return Y.send(null)};X.prototype.read=function(H){var Z;var da=[];for(Z=0;0<=H?Z<H:Z>H;0<=H?++Z:--Z)da.push(this.data[this.pos++]);return da};X.prototype.readUInt32=function(){var H=this.data[this.pos++]<<24;var Z=this.data[this.pos++]<<16;var da=this.data[this.pos++]<<8;var Y=this.data[this.pos++];return H|Z|da|Y};X.prototype.readUInt16=function(){var H=this.data[this.pos++]<<8;var Z=this.data[this.pos++];
return H|Z};X.prototype.decodePixels=function(H){var Z,da,Y,w,O,U,ea,ca;null==H&&(H=this.imgData);if(0===H.length)return new Uint8Array(0);H=new M.Zlib(H);H=H.getBytes();var ha=this.pixelBitlength/8;var a=ha*this.width;var e=new Uint8Array(a*this.height);var D=H.length;for(da=w=O=0;w<D;){switch(H[w++]){case 0:for(Y=Z=0;Z<a;Y=Z+=1)e[da++]=H[w++];break;case 1:for(Y=U=0;U<a;Y=U+=1){Z=H[w++];var Q=Y<ha?0:e[da-ha];e[da++]=(Z+Q)%256}break;case 2:for(Y=Q=0;Q<a;Y=Q+=1){Z=H[w++];var V=(Y-Y%ha)/ha;U=O&&e[(O-
1)*a+V*ha+Y%ha];e[da++]=(U+Z)%256}break;case 3:for(Y=ca=0;ca<a;Y=ca+=1)Z=H[w++],V=(Y-Y%ha)/ha,Q=Y<ha?0:e[da-ha],U=O&&e[(O-1)*a+V*ha+Y%ha],e[da++]=(Z+Math.floor((Q+U)/2))%256;break;case 4:for(Y=ca=0;ca<a;Y=ca+=1){Z=H[w++];V=(Y-Y%ha)/ha;Q=Y<ha?0:e[da-ha];0===O?U=ea=0:(U=e[(O-1)*a+V*ha+Y%ha],ea=V&&e[(O-1)*a+(V-1)*ha+Y%ha]);var ka=Q+U-ea;Y=Math.abs(ka-Q);V=Math.abs(ka-U);ka=Math.abs(ka-ea);Q=Y<=V&&Y<=ka?Q:V<=ka?U:ea;e[da++]=(Z+Q)%256}break;default:throw Error("Invalid filter algorithm: "+H[w-1]);}O++}return e};
X.prototype.decodePalette=function(){var H,Z,da,Y;var w=this.palette;var O=this.transparency.indexed||[];var U=new Uint8Array((O.length||0)+w.length);var ea=0;w.length;var ca=Z=H=0;for(da=w.length;Z<da;ca=Z+=3)U[ea++]=w[ca],U[ea++]=w[ca+1],U[ea++]=w[ca+2],U[ea++]=null!=(Y=O[H++])?Y:255;return U};X.prototype.copyToImageData=function(H,Z){var da,Y;var w=this.colors;var O=null;var U=this.hasAlphaChannel;this.palette.length&&(O=null!=(da=this._decodedPalette)?da:this._decodedPalette=this.decodePalette(),
w=4,U=!0);H=H.data||H;var ea=H.length;var ca=O||Z;da=Y=0;if(1===w)for(;da<ea;)w=O?4*Z[da/4]:Y,Y=ca[w++],H[da++]=Y,H[da++]=Y,H[da++]=Y,H[da++]=U?ca[w++]:this.transparency.grayscale&&this.transparency.grayscale===Y?0:255,Y=w;else for(;da<ea;)w=O?4*Z[da/4]:Y,H[da++]=ca[w++],H[da++]=ca[w++],H[da++]=ca[w++],H[da++]=U?ca[w++]:this.transparency.rgb&&this.transparency.rgb[1]===ca[w-3]&&this.transparency.rgb[3]===ca[w-2]&&this.transparency.rgb[5]===ca[w-1]?0:255,Y=w};X.prototype.decode=function(){var H=new Uint8Array(this.width*
this.height*4);this.copyToImageData(H,this.decodePixels());return H};var I=(G=C.document&&C.document.createElement("canvas"))&&G.getContext("2d");var ja=function(H){I.width=H.width;I.height=H.height;I.clearRect(0,0,H.width,H.height);I.putImageData(H,0,0);H=new Image;H.src=G.toDataURL();return H};X.prototype.decodeFrames=function(H){var Z,da;if(this.animation){var Y=this.animation.frames;var w=[];var O=Z=0;for(da=Y.length;Z<da;O=++Z){O=Y[O];var U=H.createImageData(O.width,O.height);var ea=this.decodePixels(new Uint8Array(O.data));
this.copyToImageData(U,ea);O.imageData=U;w.push(O.image=ja(U))}return w}};X.prototype.renderFrame=function(H,Z){var da=this.animation.frames;var Y=da[Z];da=da[Z-1];0===Z&&H.clearRect(0,0,this.width,this.height);1===(null!=da?da.disposeOp:void 0)?H.clearRect(da.xOffset,da.yOffset,da.width,da.height):2===(null!=da?da.disposeOp:void 0)&&H.putImageData(da.imageData,da.xOffset,da.yOffset);0===Y.blendOp&&H.clearRect(Y.xOffset,Y.yOffset,Y.width,Y.height);return H.drawImage(Y.image,Y.xOffset,Y.yOffset)};
X.prototype.animate=function(H){var Z,da=this;var Y=0;var w=this.animation;var O=w.numFrames;var U=w.frames;var ea=w.numPlays;return(Z=function(){var ca=Y++%O;var ha=U[ca];da.renderFrame(H,ca);if(1<O&&Y/O<ea)return da.animation._timeout=setTimeout(Z,ha.delay)})()};X.prototype.stopAnimation=function(){var H;return clearTimeout(null!=(H=this.animation)?H._timeout:void 0)};X.prototype.render=function(H){H._png&&H._png.stopAnimation();H._png=this;H.width=this.width;H.height=this.height;H=H.getContext("2d");
if(this.animation)return this.decodeFrames(H),this.animate(H);var Z=H.createImageData(this.width,this.height);this.copyToImageData(Z,this.decodePixels());return H.putImageData(Z,0,0)};return X}(self);const T=new Set(["jpg","png","bmp","gif"]);K.decode=function(C){return E.apply(this,arguments)};K.getFormat=function(C){C=v(C);"lerc2"===C?C="lerc":"error"===C&&(C="");return C};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(K,m,R){return function(){function F(n){this._ctx=this._canvas=null;n&&(this._canvas=n.canvas,this._ctx=n.ctx||n.canvas&&n.canvas.getContext("2d"))}F.prototype.decode=function(n,N,aa){if(!n||10>n.byteLength)throw new K("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:S=0,height:L=0,format:M}=N;const {applyJpegMask:y}=N;if(y&&(!S||!L))throw new K("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((p,J)=>{let k=null;"jpg"===M&&y&&(k=F._getMask(n,{width:S,height:L}));const d=new Blob([new Uint8Array(n)],{type:"jpg"==="image/"+M?"jpeg":M}),f=URL.createObjectURL(d),q=new Image;let z;q.src=f;q.onload=()=>{URL.revokeObjectURL(f);if(m.isAborted(aa))J(m.createAbortError());else{S=q.width;L=q.height;if(this._canvas&&this._ctx){if(this._canvas.width!==S||this._canvas.height!==L)this._canvas.width=S,this._canvas.height=L;this._ctx.clearRect(0,0,S,L)}else this._canvas=document.createElement("canvas"),
this._canvas.width=S,this._canvas.height=L,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(q,0,0);var t=this._ctx.getImageData(0,0,S,L);z=t.data;var b;if(N.renderOnCanvas){if(k)for(b=0;b<k.length;b++)z[4*b+3]=k[b]?255:0;this._ctx.putImageData(t,0,0);p(null)}else{t=S*L;var l=new Uint8Array(t),g=new Uint8Array(t),u=new Uint8Array(t);if(k)for(b=0;b<t;b++)l[b]=z[4*b],g[b]=z[4*b+1],u[b]=z[4*b+2];else for(k=new Uint8Array(t),b=0;b<t;b++)l[b]=z[4*b],g[b]=z[4*b+1],u[b]=z[4*b+2],k[b]=z[4*b+3];
p({width:S,height:L,pixels:[l,g,u],mask:k,pixelType:"u8"})}}};q.onerror=()=>{URL.revokeObjectURL(f);J("cannot load image")}})};F._getMask=function(n,N){let aa=null;try{var S=new Uint8Array(n);n=0;var L=S.length-2;for(n=Math.ceil(S.length/2);n<L&&(255!==S[n]||217!==S[n+1]);n++);n+=2;if(n<S.length-1){const M=(new R.Zlib(S.subarray(n))).getBytes();aa=new Uint8Array(N.width*N.height);N=0;for(S=0;S<M.length;S++)for(L=7;0<=L;L--)aa[N++]=M[S]>>L&1}}catch(M){}return aa};return F}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(K){var m={exports:{}};(function(R){(function(F){F=F();void 0!==F&&(R.exports=F)})(function(){var F=function(){function n(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}n.prototype={ensureBuffer:function(N){var aa=this.buffer,S=aa?aa.byteLength:0;if(N<S)return aa;for(var L=512;L<N;)L<<=1;N=new Uint8Array(L);for(L=0;L<S;++L)N[L]=aa[L];return this.buffer=N},getByte:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(N){var aa=this.pos;if(N){this.ensureBuffer(aa+N);for(N=aa+N;!this.eof&&this.bufferLength<N;)this.readBlock();var S=this.bufferLength;N>S&&(N=S)}else{for(;!this.eof;)this.readBlock();N=this.bufferLength}this.pos=N;return this.buffer.subarray(aa,N)},lookChar:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var N=this.pos;this.bufferLength<=N;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(N,aa,S){for(var L=N+aa;this.bufferLength<=L&&!this.eof;)this.readBlock();return new Stream(this.buffer,N,aa,S)},skip:function(N){N||(N=1);this.pos+=N},reset:function(){this.pos=0}};return n}();return function(){function n(p){throw Error(p);}function N(p){var J=0,k=p[J++],d=p[J++];-1!=k&&-1!=d||n("Invalid header in flate stream");8!=(k&15)&&n("Unknown compression method in flate stream");0!=((k<<8)+d)%31&&
n("Bad FCHECK in flate stream");d&32&&n("FDICT bit set in flate stream");this.bytes=p;this.bytesPos=J;this.codeBuf=this.codeSize=0;F.call(this)}if(!self||!self.Uint32Array)return null;var aa=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),L=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,
196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),M=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,
459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,
459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,
459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,
459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,
459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,
459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,
459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],y=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];N.prototype=Object.create(F.prototype);
N.prototype.getBits=function(p){for(var J=this.codeSize,k=this.codeBuf,d=this.bytes,f=this.bytesPos,q;J<p;)"undefined"==typeof(q=d[f++])&&n("Bad encoding in flate stream"),k|=q<<J,J+=8;this.codeBuf=k>>p;this.codeSize=J-=p;this.bytesPos=f;return k&(1<<p)-1};N.prototype.getCode=function(p){var J=p[0],k=p[1];p=this.codeSize;for(var d=this.codeBuf,f=this.bytes,q=this.bytesPos;p<k;){var z;"undefined"==typeof(z=f[q++])&&n("Bad encoding in flate stream");d|=z<<p;p+=8}k=J[d&(1<<k)-1];J=k>>16;k&=65535;(0==
p||p<J||0==J)&&n("Bad encoding in flate stream");this.codeBuf=d>>J;this.codeSize=p-J;this.bytesPos=q;return k};N.prototype.generateHuffmanTable=function(p){for(var J=p.length,k=0,d=0;d<J;++d)p[d]>k&&(k=p[d]);for(var f=1<<k,q=new Uint32Array(f),z=1,t=0,b=2;z<=k;++z,t<<=1,b<<=1)for(var l=0;l<J;++l)if(p[l]==z){var g=0,u=t;for(d=0;d<z;++d)g=g<<1|u&1,u>>=1;for(d=g;d<f;d+=b)q[d]=z<<16|l;++t}return[q,k]};N.prototype.readBlock=function(){function p(g,u,h,c,r){for(g=g.getBits(h)+c;0<g--;)u[t++]=r}var J=this.getBits(3);
J&1&&(this.eof=!0);J>>=1;if(0==J){var k=this.bytes,d=this.bytesPos,f;"undefined"==typeof(f=k[d++])&&n("Bad block header in flate stream");var q=f;"undefined"==typeof(f=k[d++])&&n("Bad block header in flate stream");q|=f<<8;"undefined"==typeof(f=k[d++])&&n("Bad block header in flate stream");J=f;"undefined"==typeof(f=k[d++])&&n("Bad block header in flate stream");(J|f<<8)!=(~q&65535)&&n("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;f=this.bufferLength;J=this.ensureBuffer(f+
q);this.bufferLength=q=f+q;for(var z=f;z<q;++z){if("undefined"==typeof(f=k[d++])){this.eof=!0;break}J[z]=f}this.bytesPos=d}else{if(1==J)d=M,f=y;else if(2==J){J=this.getBits(5)+257;f=this.getBits(5)+1;k=this.getBits(4)+4;d=Array(aa.length);for(var t=0;t<k;)d[aa[t++]]=this.getBits(3);d=this.generateHuffmanTable(d);t=k=0;f=J+f;for(q=Array(f);t<f;)z=this.getCode(d),16==z?p(this,q,2,3,k):17==z?p(this,q,3,3,k=0):18==z?p(this,q,7,11,k=0):q[t++]=k=z;d=this.generateHuffmanTable(q.slice(0,J));f=this.generateHuffmanTable(q.slice(J,
f))}else n("Unknown block type in flate stream");q=(J=this.buffer)?J.length:0;for(z=this.bufferLength;;){var b=this.getCode(d);if(256>b)z+1>=q&&(J=this.ensureBuffer(z+1),q=J.length),J[z++]=b;else{if(256==b){this.bufferLength=z;break}b-=257;b=S[b];var l=b>>16;0<l&&(l=this.getBits(l));k=(b&65535)+l;b=this.getCode(f);b=L[b];l=b>>16;0<l&&(l=this.getBits(l));b=(b&65535)+l;z+k>=q&&(J=this.ensureBuffer(z+k),q=J.length);for(l=0;l<k;++l,++z)J[z]=J[z-b]}}}};return N}()})})(m);K.Zlib=m.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(K,m){return function(){function R(){}R.decode=function(F,n=!1){const N=new Uint8Array(F);F=new K.JpegImage;F.parse(N);const {width:aa,height:S,numComponents:L,eof:M}=F;F=F.getData(aa,S,!0);const y=aa*S;let p=null,J=0,k=0,d=0;if(!n&&M<N.length-1)try{var f=(new m.Zlib(N.subarray(M))).getBytes();p=new Uint8Array(y);for(J=n=0;J<f.length;J++)for(d=7;0<=d;d--)p[n++]=f[J]>>d&1}catch{}if(1===L&&F.length===aa*S)f=[F,F,F];else{f=[];for(J=0;3>J;J++)f.push(new Uint8Array(y));
for(k=d=0;k<y;k++)for(J=0;3>J;J++)f[J][k]=F[d++]}return{width:aa,height:S,pixels:f,mask:p}};return R}()})},"esri/chunks/Jpg":function(){define(["exports"],function(K){var m={exports:{}};(function(R){(function(F){F=F();void 0!==F&&(R.exports=F)})(function(){var F=function(){function n(N){this.message="JPEG error: "+N}n.prototype=Error();n.prototype.name="JpegError";return n.constructor=n}();return function(){function n(){this.decodeTransform=null;this.colorTransform=-1}function N(y,p){for(var J=0,
k=[],d,f,q=16;0<q&&!y[q-1];)q--;k.push({children:[],index:0});var z=k[0],t;for(d=0;d<q;d++){for(f=0;f<y[d];f++){z=k.pop();for(z.children[z.index]=p[J];0<z.index;)z=k.pop();z.index++;for(k.push(z);k.length<=d;)k.push(t={children:[],index:0}),z.children[z.index]=t.children,z=t;J++}d+1<q&&(k.push(t={children:[],index:0}),z.children[z.index]=t.children,z=t)}return k[0].children}function aa(y,p,J,k,d,f,q,z,t){function b(){if(0<T)return T--,P>>T&1;P=y[p++];if(255===P){var ca=y[p++];if(ca)throw new F("unexpected marker "+
(P<<8|ca).toString(16));}T=7;return P>>>7}function l(ca){for(;;){ca=ca[b()];if("number"===typeof ca)return ca;if("object"!==typeof ca)throw new F("invalid huffman sequence");}}function g(ca){for(var ha=0;0<ca;)ha=ha<<1|b(),ca--;return ha}function u(ca){if(1===ca)return 1===b()?1:-1;var ha=g(ca);return ha>=1<<ca-1?ha:ha+(-1<<ca)+1}function h(ca,ha){var a=l(ca.huffmanTableDC);a=0===a?0:u(a);ca.blockData[ha]=ca.pred+=a;for(a=1;64>a;){var e=l(ca.huffmanTableAC),D=e&15;e>>=4;if(0===D){if(15>e)break;a+=
16}else a+=e,ca.blockData[ha+M[a]]=u(D),a++}}function c(ca,ha){var a=l(ca.huffmanTableDC);a=0===a?0:u(a)<<t;ca.blockData[ha]=ca.pred+=a}function r(ca,ha){ca.blockData[ha]|=b()<<t}function v(ca,ha){if(0<C)C--;else for(var a=f;a<=q;){var e=l(ca.huffmanTableAC),D=e&15;e>>=4;if(0===D){if(15>e){C=g(e)+(1<<e)-1;break}a+=16}else a+=e,ca.blockData[ha+M[a]]=u(D)*(1<<t),a++}}function x(ca,ha){for(var a=f,e=0,D;a<=q;){D=M[a];switch(X){case 0:e=l(ca.huffmanTableAC);D=e&15;e>>=4;if(0===D)15>e?(C=g(e)+(1<<e),X=
4):(e=16,X=1);else{if(1!==D)throw new F("invalid ACn encoding");G=u(D);X=e?2:3}continue;case 1:case 2:ca.blockData[ha+D]?ca.blockData[ha+D]+=b()<<t:(e--,0===e&&(X=2===X?3:0));break;case 3:ca.blockData[ha+D]?ca.blockData[ha+D]+=b()<<t:(ca.blockData[ha+D]=G<<t,X=0);break;case 4:ca.blockData[ha+D]&&(ca.blockData[ha+D]+=b()<<t)}a++}4===X&&(C--,0===C&&(X=0))}var A=J.mcusPerLine,E=p,P=0,T=0,C=0,X=0,G,I=k.length,ja,H,Z,da;z=J.progressive?0===f?0===z?c:r:0===z?v:x:h;var Y=0;J=1===I?k[0].blocksPerLine*k[0].blocksPerColumn:
A*J.mcusPerColumn;for(var w,O;Y<J;){var U=d?Math.min(J-Y,d):J;for(ja=0;ja<I;ja++)k[ja].pred=0;C=0;if(1===I){var ea=k[0];for(da=0;da<U;da++)z(ea,64*((ea.blocksPerLine+1)*(Y/ea.blocksPerLine|0)+Y%ea.blocksPerLine)),Y++}else for(da=0;da<U;da++){for(ja=0;ja<I;ja++)for(ea=k[ja],w=ea.h,O=ea.v,H=0;H<O;H++)for(Z=0;Z<w;Z++)z(ea,64*((ea.blocksPerLine+1)*((Y/A|0)*ea.v+H)+(Y%A*ea.h+Z)));Y++}T=0;(ea=L(y,p))&&ea.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ea.invalid),p=ea.offset);
ea=ea&&ea.marker;if(!ea||65280>=ea)throw new F("marker was not found");if(65488<=ea&&65495>=ea)p+=2;else break}(ea=L(y,p))&&ea.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ea.invalid),p=ea.offset);return p-E}function S(y,p){y=p.blocksPerLine;for(var J=p.blocksPerColumn,k=new Int16Array(64),d=0;d<J;d++)for(var f=0;f<y;f++){var q=void 0,z=void 0,t=void 0,b=void 0,l=void 0,g=void 0,u=void 0,h=void 0,c=l=g=b=z=q=void 0,r=void 0,v=void 0,x=void 0,A=64*((p.blocksPerLine+1)*
d+f),E=k,P=p.quantizationTable,T=p.blockData;if(!P)throw new F("missing required Quantization Table.");for(var C=0;64>C;C+=8)q=T[A+C],h=T[A+C+1],u=T[A+C+2],g=T[A+C+3],l=T[A+C+4],b=T[A+C+5],t=T[A+C+6],z=T[A+C+7],q*=P[C],0===(h|u|g|l|b|t|z)?(q=5793*q+512>>10,E[C]=q,E[C+1]=q,E[C+2]=q,E[C+3]=q,E[C+4]=q,E[C+5]=q,E[C+6]=q,E[C+7]=q):(h*=P[C+1],u*=P[C+2],g*=P[C+3],l*=P[C+4],b*=P[C+5],t*=P[C+6],z*=P[C+7],x=5793*q+128>>8,v=5793*l+128>>8,r=u,c=t,l=2896*(h-z)+128>>8,z=2896*(h+z)+128>>8,g<<=4,b<<=4,x=x+v+1>>1,
v=x-v,q=3784*r+1567*c+128>>8,r=1567*r-3784*c+128>>8,c=q,l=l+b+1>>1,b=l-b,z=z+g+1>>1,g=z-g,x=x+c+1>>1,c=x-c,v=v+r+1>>1,r=v-r,q=2276*l+3406*z+2048>>12,l=3406*l-2276*z+2048>>12,z=q,q=799*g+4017*b+2048>>12,g=4017*g-799*b+2048>>12,b=q,E[C]=x+z,E[C+7]=x-z,E[C+1]=v+b,E[C+6]=v-b,E[C+2]=r+g,E[C+5]=r-g,E[C+3]=c+l,E[C+4]=c-l);for(P=0;8>P;++P)q=E[P],h=E[P+8],u=E[P+16],g=E[P+24],l=E[P+32],b=E[P+40],t=E[P+48],z=E[P+56],0===(h|u|g|l|b|t|z)?(q=5793*q+8192>>14,q=-2040>q?0:2024<=q?255:q+2056>>4,T[A+P]=q,T[A+P+8]=q,
T[A+P+16]=q,T[A+P+24]=q,T[A+P+32]=q,T[A+P+40]=q,T[A+P+48]=q,T[A+P+56]=q):(x=5793*q+2048>>12,v=5793*l+2048>>12,r=u,c=t,l=2896*(h-z)+2048>>12,z=2896*(h+z)+2048>>12,x=(x+v+1>>1)+4112,v=x-v,q=3784*r+1567*c+2048>>12,r=1567*r-3784*c+2048>>12,c=q,l=l+b+1>>1,b=l-b,z=z+g+1>>1,g=z-g,x=x+c+1>>1,c=x-c,v=v+r+1>>1,r=v-r,q=2276*l+3406*z+2048>>12,l=3406*l-2276*z+2048>>12,z=q,q=799*g+4017*b+2048>>12,g=4017*g-799*b+2048>>12,b=q,q=x+z,z=x-z,h=v+b,t=v-b,u=r+g,b=r-g,g=c+l,l=c-l,q=16>q?0:4080<=q?255:q>>4,h=16>h?0:4080<=
h?255:h>>4,u=16>u?0:4080<=u?255:u>>4,g=16>g?0:4080<=g?255:g>>4,l=16>l?0:4080<=l?255:l>>4,b=16>b?0:4080<=b?255:b>>4,t=16>t?0:4080<=t?255:t>>4,z=16>z?0:4080<=z?255:z>>4,T[A+P]=q,T[A+P+8]=h,T[A+P+16]=u,T[A+P+24]=g,T[A+P+32]=l,T[A+P+40]=b,T[A+P+48]=t,T[A+P+56]=z)}return p.blockData}function L(y,p,J){var k=y.length-1;J=J<p?J:p;if(p>=k)return null;var d=y[p]<<8|y[p+1];if(65472<=d&&65534>=d)return{invalid:null,marker:d,offset:p};for(p=y[J]<<8|y[J+1];!(65472<=p&&65534>=p);){if(++J>=k)return null;p=y[J]<<
8|y[J+1]}return{invalid:d.toString(16),marker:p,offset:J}}if(!self||!self.Uint8ClampedArray)return null;var M=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);n.prototype={parse:function(y){function p(){var P=y[d]<<8|y[d+1];d+=2;return P}function J(){var P=p();P=d+P-2;var T=L(y,P,d);T&&T.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+
T.invalid),P=T.offset);P=y.subarray(d,P);d+=P.length;return P}function k(P){for(var T=Math.ceil(P.samplesPerLine/8/P.maxH),C=Math.ceil(P.scanLines/8/P.maxV),X=0;X<P.components.length;X++){E=P.components[X];var G=Math.ceil(Math.ceil(P.samplesPerLine/8)*E.h/P.maxH),I=Math.ceil(Math.ceil(P.scanLines/8)*E.v/P.maxV);E.blockData=new Int16Array(64*C*E.v*(T*E.h+1));E.blocksPerLine=G;E.blocksPerColumn=I}P.mcusPerLine=T;P.mcusPerColumn=C}var d=0,f=null,q=null,z=[],t=[],b=[],l=p();if(65496!==l)throw new F("SOI not found");
for(l=p();65497!==l;){switch(l){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var g=J();65504===l&&74===g[0]&&70===g[1]&&73===g[2]&&70===g[3]&&0===g[4]&&(f={version:{major:g[5],minor:g[6]},densityUnits:g[7],xDensity:g[8]<<8|g[9],yDensity:g[10]<<8|g[11],thumbWidth:g[12],thumbHeight:g[13],thumbData:g.subarray(14,14+3*g[12]*g[13])});65518===l&&65===g[0]&&100===
g[1]&&111===g[2]&&98===g[3]&&101===g[4]&&(q={version:g[5]<<8|g[6],flags0:g[7]<<8|g[8],flags1:g[9]<<8|g[10],transformCode:g[11]});break;case 65499:l=p()+d-2;for(var u;d<l;){var h=y[d++],c=new Uint16Array(64);if(0===h>>4)for(g=0;64>g;g++)u=M[g],c[u]=y[d++];else if(1===h>>4)for(g=0;64>g;g++)u=M[g],c[u]=p();else throw new F("DQT - invalid table spec");z[h&15]=c}break;case 65472:case 65473:case 65474:if(r)throw new F("Only single frame JPEGs supported");p();var r={};r.extended=65473===l;r.progressive=
65474===l;r.precision=y[d++];r.scanLines=p();r.samplesPerLine=p();r.components=[];r.componentIds={};g=y[d++];for(l=c=h=0;l<g;l++){u=y[d];var v=y[d+1]>>4;var x=y[d+1]&15;h<v&&(h=v);c<x&&(c=x);v=r.components.push({h:v,v:x,quantizationId:y[d+2],quantizationTable:null});r.componentIds[u]=v-1;d+=3}r.maxH=h;r.maxV=c;k(r);break;case 65476:u=p();for(l=2;l<u;){h=y[d++];c=new Uint8Array(16);for(g=v=0;16>g;g++,d++)v+=c[g]=y[d];x=new Uint8Array(v);for(g=0;g<v;g++,d++)x[g]=y[d];l+=17+v;(0===h>>4?b:t)[h&15]=N(c,
x)}break;case 65501:p();var A=p();break;case 65498:p();u=y[d++];g=[];for(l=0;l<u;l++){h=r.componentIds[y[d++]];var E=r.components[h];h=y[d++];E.huffmanTableDC=b[h>>4];E.huffmanTableAC=t[h&15];g.push(E)}l=y[d++];u=y[d++];h=y[d++];l=aa(y,d,r,g,A,l,u,h>>4,h&15);d+=l;break;case 65535:255!==y[d]&&d--;break;default:if(255===y[d-3]&&192<=y[d-2]&&254>=y[d-2])d-=3;else throw new F("unknown marker "+l.toString(16));}l=p()}this.width=r.samplesPerLine;this.height=r.scanLines;this.jfif=f;this.eof=d;this.adobe=
q;this.components=[];for(l=0;l<r.components.length;l++){E=r.components[l];if(f=z[E.quantizationId])E.quantizationTable=f;this.components.push({output:S(r,E),scaleX:E.h/r.maxH,scaleY:E.v/r.maxV,blocksPerLine:E.blocksPerLine,blocksPerColumn:E.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(y,p){var J=this.width/y,k=this.height/p,d,f,q=0,z=this.components.length,t=y*p*z,b=new Uint8ClampedArray(t),l=new Uint32Array(y);for(f=0;f<z;f++){var g=this.components[f];
var u=g.scaleX*J;var h=g.scaleY*k;q=f;var c=g.output;var r=g.blocksPerLine+1<<3;for(d=0;d<y;d++)g=0|d*u,l[d]=(g&4294967288)<<3|g&7;for(u=0;u<p;u++)for(g=0|u*h,g=r*(g&4294967288)|(g&7)<<3,d=0;d<y;d++)b[q]=c[g+l[d]],q+=z}if(p=this.decodeTransform)for(f=0;f<t;)for(y=g=0;g<z;g++,f++,y+=2)b[f]=(b[f]*p[y]>>8)+p[y+1];return b},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(y){for(var p,
J,k,d=0,f=y.length;d<f;d+=3)p=y[d],J=y[d+1],k=y[d+2],y[d]=p-179.456+1.402*k,y[d+1]=p+135.459-.344*J-.714*k,y[d+2]=p-226.816+1.772*J;return y},_convertYcckToRgb:function(y){for(var p,J,k,d,f=0,q=0,z=y.length;q<z;q+=4)p=y[q],J=y[q+1],k=y[q+2],d=y[q+3],y[f++]=-122.67195406894+J*(-6.60635669420364E-5*J+4.37130475926232E-4*k-5.4080610064599E-5*p+4.8449797120281E-4*d-.154362151871126)+k*(-9.57964378445773E-4*k+8.17076911346625E-4*p-.00477271405408747*d+1.53380253221734)+p*(9.61250184130688E-4*p-.00266257332283933*
d+.48357088451265)+d*(-3.36197177618394E-4*d+.484791561490776),y[f++]=107.268039397724+J*(2.19927104525741E-5*J-6.40992018297945E-4*k+6.59397001245577E-4*p+4.26105652938837E-4*d-.176491792462875)+k*(-7.78269941513683E-4*k+.00130872261408275*p+7.70482631801132E-4*d-.151051492775562)+p*(.00126935368114843*p-.00265090189010898*d+.25802910206845)+d*(-3.18913117588328E-4*d-.213742400323665),y[f++]=-20.810012546947+J*(-5.70115196973677E-4*J-2.63409051004589E-5*k+.0020741088115012*p-.00288260236853442*d+
.814272968359295)+k*(-1.53496057440975E-5*k-1.32689043961446E-4*p+5.60833691242812E-4*d-.195152027534049)+p*(.00174418132927582*p-.00255243321439347*d+.116935020465145)+d*(-3.43531996510555E-4*d+.24165260232407);return y},_convertYcckToCmyk:function(y){for(var p,J,k,d=0,f=y.length;d<f;d+=4)p=y[d],J=y[d+1],k=y[d+2],y[d]=434.456-p-1.402*k,y[d+1]=119.541-p+.344*J+.714*k,y[d+2]=481.816-p-1.772*J;return y},_convertCmykToRgb:function(y){for(var p,J,k,d,f=0,q=1/255,z=0,t=y.length;z<t;z+=4)p=y[z]*q,J=y[z+
1]*q,k=y[z+2]*q,d=y[z+3]*q,y[f++]=255+p*(-4.387332384609988*p+54.48615194189176*J+18.82290502165302*k+212.25662451639585*d-285.2331026137004)+J*(1.7149763477362134*J-5.6096736904047315*k-17.873870861415444*d-5.497006427196366)+k*(-2.5217340131683033*k-21.248923337353073*d+17.5119270841813)-d*(21.86122147463605*d+189.48180835922747),y[f++]=255+p*(8.841041422036149*p+60.118027045597366*J+6.871425592049007*k+31.159100130055922*d-79.2970844816548)+J*(-15.310361306967817*J+17.575251261109482*k+131.35250912493976*
d-190.9453302588951)+k*(4.444339102852739*k+9.8632861493405*d-24.86741582555878)-d*(20.737325471181034*d+187.80453709719578),y[f++]=255+p*(.8842522430003296*p+8.078677503112928*J+30.89978309703729*k-.23883238689178934*d-14.183576799673286)+J*(10.49593273432072*J+63.02378494754052*k+50.606957656360734*d-112.23884253719248)+k*(.03296041114873217*k+115.60384449646641*d-193.58209356861505)-d*(22.33816807309886*d+180.12613974708367);return y},getData:function(y,p,J){if(4<this.numComponents)throw new F("Unsupported color mode");
y=this._getLinearizedBlockData(y,p);if(1===this.numComponents&&J){J=y.length;p=new Uint8ClampedArray(3*J);for(var k=0,d=0;d<J;d++){var f=y[d];p[k++]=f;p[k++]=f;p[k++]=f}return p}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(y);if(4===this.numComponents){if(this._isColorConversionNeeded())return J?this._convertYcckToRgb(y):this._convertYcckToCmyk(y);if(J)return this._convertCmykToRgb(y)}return y}};return n}()})})(m);K.JpegImage=m.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require",
"exports","../../../assets"],function(K,m,R){function F(M,y,p){p.set(M.slice(y,y+p.length))}function n(M){const {_malloc:y,_free:p,_lerc_getBlobInfo:J,_lerc_getDataRanges:k,_lerc_decode_4D:d,asm:f}=M;let q;const z=Object.values(f).find(b=>b&&"buffer"in b&&b.buffer===M.HEAPU8.buffer),t=b=>{b=b.map(u=>(u>>3<<3)+16);var l=b.reduce((u,h)=>u+h),g=y(l);q=new Uint8Array(z.buffer);l=b[0];b[0]=g;for(g=1;g<b.length;g++){const u=b[g];b[g]=b[g-1]+l;l=u}return b};L.getBlobInfo=b=>{var l=new Uint8Array(48),g=new Uint8Array(24);
const [u,h,c]=t([b.length,l.length,g.length]);q.set(b,u);q.set(l,h);q.set(g,c);var r=J(u,b.length,h,c,12,3);if(r)throw p(u),`lerc-getBlobInfo: error code is ${r}`;q=new Uint8Array(z.buffer);F(q,h,l);F(q,c,g);l=new Uint32Array(l.buffer);var v=new Float64Array(g.buffer);const [x,A,,E,P,T,C,X,G,I,ja]=l;g={version:x,depthCount:I,width:E,height:P,validPixelCount:C,bandCount:T,blobSize:X,maskCount:G,dataType:A,minValue:v[0],maxValue:v[1],maxZerror:v[2],statistics:[],bandCountWithNoData:ja};if(ja)return g;
if(1===I&&1===T)return p(u),g.statistics.push({minValue:v[0],maxValue:v[1]}),g;r=I*T*8;var H=new Uint8Array(r),Z=new Uint8Array(r);l=u;var da=v=0;let Y=!1;q.byteLength<u+2*r?(p(u),Y=!0,[l,v,da]=t([b.length,r,r]),q.set(b,l)):[v,da]=t([r,r]);q.set(H,v);q.set(Z,da);if(r=k(l,b.length,I,T,v,da))throw p(l),Y||p(v),`lerc-getDataRanges: error code is ${r}`;q=new Uint8Array(z.buffer);F(q,v,H);F(q,da,Z);b=new Float64Array(H.buffer);r=new Float64Array(Z.buffer);Z=g.statistics;for(H=0;H<T;H++)if(1<I){da=b.slice(H*
I,(H+1)*I);const w=r.slice(H*I,(H+1)*I),O=Math.min.apply(null,da),U=Math.max.apply(null,w);Z.push({minValue:O,maxValue:U,depthStats:{minValues:da,maxValues:w}})}else Z.push({minValue:b[H],maxValue:r[H]});p(l);Y||p(v);return g};L.decode=(b,l)=>{const {maskCount:g,depthCount:u,bandCount:h,width:c,height:r,dataType:v,bandCountWithNoData:x}=l;var A=N[v],E=c*r;l=new Uint8Array(E*h);A=new Uint8Array(E*u*h*A.size);E=new Uint8Array(h);var P=new Uint8Array(8*h);const [T,C,X,G,I]=t([b.length,l.length,A.length,
E.length,P.length]);q.set(b,T);q.set(l,C);q.set(A,X);q.set(E,G);q.set(P,I);if(b=d(T,b.length,g,C,u,c,r,h,v,X,G,I))throw p(T),`lerc-decode: error code is ${b}`;q=new Uint8Array(z.buffer);F(q,X,A);F(q,C,l);b=null;if(x){F(q,G,E);F(q,I,P);b=[];P=new Float64Array(P.buffer);for(let ja=0;ja<E.length;ja++)b.push(E[ja]?P[ja]:null)}p(T);return{data:A,maskData:l,noDataValues:b}}}const N=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",
size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let aa=null,S=!1;const L={getBlobInfo:null,decode:null};m.decode=function(M,
y={}){var p=y.inputOffset??0;M=M instanceof Uint8Array?M.subarray(p):new Uint8Array(M,p);p=L.getBlobInfo(M);const {data:J,maskData:k}=L.decode(M,p),{width:d,height:f,bandCount:q,depthCount:z,dataType:t,maskCount:b,statistics:l}=p;var g=N[t],u=new g.ctor(J.buffer);M=[];p=[];const h=d*f;var c=h*z;for(var r=0;r<q;r++){var v=u.subarray(r*c,(r+1)*c);if(y.returnInterleaved)M.push(v);else{a:{var x=h,A=z;if(2>A)break a;const E=new g.ctor(x*A);for(let P=0,T=0;P<x;P++)for(let C=0,X=P;C<A;C++,X+=x)E[X]=v[T++];
v=E}M.push(v)}p.push(k.subarray(r*c,(r+1)*c))}u=0===b?null:1===b?p[0]:new Uint8Array(h);if(1<b)for(u.set(p[0]),c=1;c<p.length;c++)for(r=p[c],v=0;v<h;v++)u[v]&=r[v];({noDataValue:y}=y);c=null!=y&&g.range[0]<=y&&g.range[1]>=y;if(0<b&&c)for(c=0;c<q;c++)for(r=M[c],v=p[c]||u,x=0;x<h;x++)0===v[x]&&(r[x]=y);({pixelType:g}=g);return{width:d,height:f,bandCount:q,pixelType:g,depthCount:z,statistics:l,pixels:M,mask:u,bandMasks:b===q&&1<q?p:null}};m.getBlobInfo=function(M,y={}){M=M instanceof Uint8Array?M.subarray(y.inputOffset??
0):new Uint8Array(M,y.inputOffset??0);return L.getBlobInfo(M)};m.isLoaded=function(){return S};m.load=function(){return aa?aa:aa=(new Promise((M,y)=>K(["../../../chunks/lerc-wasm"],M,y))).then(M=>M.lercWasm).then(({default:M})=>M({locateFile:y=>R.getAssetUrl(`esri/layers/support/rasterFormats/${y}`)})).then(M=>{n(M);S=!0})};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(K){function m(N,
aa,S,L=!0){if(0!==aa%4||0!==S%4){var M=new ArrayBuffer(4*Math.ceil(S/4));M=new Uint8Array(M);N=new Uint8Array(N,aa,S);if(L)for(L=0;L<M.length;L+=4)M[L]=N[L+3],M[L+1]=N[L+2],M[L+2]=N[L+1],M[L+3]=N[L];else M.set(N);return new Uint32Array(M.buffer)}if(L){L=new Uint8Array(N,aa,S);M=new Uint8Array(L.length);for(N=0;N<M.length;N+=4)M[N]=L[N+3],M[N+1]=L[N+2],M[N+2]=L[N+1],M[N+3]=L[N];return new Uint32Array(M.buffer)}return new Uint32Array(N,aa,S/4)}function R(){const N=[];for(let aa=0;257>=aa;aa++)N[aa]=
[aa];return N}function F(N,aa){for(let S=0;S<aa.length;S++)N.push(aa[S])}const n=new Set;n.add(511);n.add(1023);n.add(2047);n.add(4095);n.add(8191);K.decode=function(N,aa,S,L=!0){N=m(N,aa,S,L);aa=9;L=R();let M=32,y=L.length,p=[],J=1,k=N[0],d=0;const f=N.length;S=8*(4*f-S);const q=[];for(;null!=k;){if(M>=aa)M-=aa,d=k>>>32-aa,k<<=aa;else{d=k>>>32-M;k=N[J++];var z=aa-M;M=32-z;d=(d<<z)+(k>>>M);k<<=z}if(257===d)break;if(256===d)aa=9,L=R(),y=L.length,p=[];else{z=L[d];if(null==z){if(d>L.length)throw"data integrity issue: code does not exist on code page";
p.push(p[0]);L[y++]=p.slice();F(q,p)}else F(q,z),p.push(z[0]),1<p.length&&(L[y++]=p.slice()),p=z.slice();n.has(y)&&aa++;0===M&&(k=N[J++],M=32);if(J>f||J===f&&M<=S)break}}return new Uint8Array(q)};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const K=m=>{let R=1;switch(m){case Uint8Array:case Int8Array:R=1;break;case Uint16Array:case Int16Array:R=2;break;case Uint32Array:case Int32Array:case Float32Array:R=
4;break;case Float64Array:R=8}return R};return function(){function m(){}m.decode=function(R,F){var n=F.pixelType;const N=[],aa=F.width*F.height;var S=Math.floor(R.byteLength/(F.width*F.height*K(F.pixelType)));const {bandIds:L,format:M}=F;F=L&&L.length||Math.floor(R.byteLength/(F.width*F.height*K(F.pixelType)));var y=R.byteLength-R.byteLength%(aa*K(n)),p=new n(R,0,aa*S);let J,k,d,f,q=null;if("bip"===M)for(J=0;J<F;J++){d=new n(aa);f=L?L[J]:J;for(k=0;k<aa;k++)d[k]=p[k*S+f];N.push(d)}else if("bsq"===
M)for(J=0;J<F;J++)f=L?L[J]:J,N.push(p.subarray(f*aa,(f+1)*aa));if(y<R.byteLength-1)if(R=R.slice(y),8*R.byteLength<aa)q=null;else{R=new Uint8Array(R,0,Math.ceil(aa/8));n=new Uint8Array(aa);for(y=p=y=F=S=0;y<R.length-1;y++)for(F=R[y],p=7;0<=p;p--)n[S++]=F>>p&1;for(p=7;S<aa-1;)F=R[R.length-1],n[S++]=F>>p&1,p--;q=n}return{pixels:N,mask:q}};return m}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){function y(G,I){let ja="unknown";3===G?ja=64===I?"f64":"f32":1===G?1===I?ja="u1":2===I?ja="u2":4===I?ja="u4":8>=I?ja="u8":16>=I?ja="u16":32>=I&&(ja="u32"):2===G&&(8>=I?ja="s8":16>=I?ja="s16":32>=I&&(ja="s32"));return ja}function p(G){let I=null;switch(G?G.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":I=Uint8Array;break;case "u16":I=Uint16Array;break;case "u32":I=Uint32Array;break;case "s8":I=Int8Array;break;case "s16":I=Int16Array;break;case "s32":I=Int32Array;
break;case "f64":I=Float64Array;break;default:I=Float32Array}return I}function J(G,I){return{x:I[0]*G.x+I[1]*G.y+I[2],y:I[3]*G.x+I[4]*G.y+I[5]}}function k(G,I){return G.get(I)?.values?.[0]}function d(G,I,ja,H=0,Z=S.TIFF_TAGS,da=4){var Y=8===da;const w=Y?h(new DataView(G,ja,8),0,I):(new DataView(G,ja,2)).getUint16(0,I),O=4+2*da;var U=Y?8:2;Y=U+w*O;if(ja+Y>G.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:Y};const ea=ja+Y+4<=G.byteLength?c(new DataView(G,ja+Y,8===da?8:4),0,I,8===
da):null;ja+=U;U=new Map;let ca,ha,a,e=0,D=0;for(let V=0;V<w;V++){var Q=new DataView(G,ja+O*V,O);ca=Q.getUint16(0,I);a=Q.getUint16(2,I);ha=S.getTagName(ca,Z);const ka=[];2===da?(e=Q.getUint16(4,I),D=Q.getUint16(6,I)):4===da?(e=Q.getUint32(4,I),D=Q.getUint32(8,I)):8===da&&(e=c(Q,4,I,!0),D=c(Q,12,I,!0),ka.push(Q.getUint32(12,I)),ka.push(Q.getUint32(16,I)));Q={id:ca,type:a,valueCount:e,valueOffset:D,valueOffsets:ka,values:null};b(G,I,Q,H,!1,da);U.set(ha,Q)}return{success:!0,ifd:U,nextIFD:ea,requiredBufferSize:Y}}
function f(G,I,ja,H,Z){return q.apply(this,arguments)}function q(){q=m._asyncToGenerator(function*(G,I,ja,H,Z){var da=L.isPlatformLittleEndian===I,Y=k(ja,"BITSPERSAMPLE"),w=k(ja,"SAMPLEFORMAT")??1;w=y(w,Y);const O=k(ja,"COMPRESSION")??1;Y=p(w);if(34887===O)return yield N.load(),N.decode(G,{inputOffset:H}).pixels[0];if(1===O){var U=G.slice(H,H+Z);var ea=new Uint8Array(U)}else if(8===O||32946===O)ea=new Uint8Array(G,H,Z),ea=new M.Zlib(ea),G=ea.getBytes(),U=new ArrayBuffer(G.length),ea=new Uint8Array(U),
ea.set(G);else if(6===O)ea=new Uint8Array(G,H,Z),U=new n.JpegImage,U.parse(ea),G=U.getData(U.width,U.height,!0),U=new ArrayBuffer(G.length),ea=new Uint8Array(U),ea.set(G);else if(7===O){I=ja.get("JPEGTABLES").values;U=I.length-2;ea=new Uint8Array(U+Z-2);for(ja=0;ja<U;ja++)ea[ja]=I[ja];G=new Uint8Array(G,H+2,Z-2);for(H=0;H<G.length;H++)ea[U+H]=G[H];U=new n.JpegImage;U.parse(ea);G=U.getData(U.width,U.height,!0);U=new ArrayBuffer(G.length);ea=new Uint8Array(U);ea.set(G)}else 5===O&&(ea=aa.decode(G,H,
Z,I),U=ea.buffer);if("u8"!==w&&"s8"!==w&&!da)switch(R.assertIsSome(ea),U=new ArrayBuffer(ea.length),da=new Uint8Array(U),w){case "u16":case "s16":for(w=0;w<ea.length;w+=2)da[w]=ea[w+1],da[w+1]=ea[w];break;case "u32":case "s32":case "f32":for(w=0;w<ea.length;w+=4)da[w]=ea[w+3],da[w+1]=ea[w+2],da[w+2]=ea[w+1],da[w+3]=ea[w]}return new Y(U)});return q.apply(this,arguments)}function z(G,I,ja){return t.apply(this,arguments)}function t(){t=m._asyncToGenerator(function*(G,I,ja){const H=ja.get("TILEOFFSETS")?.values;
if(void 0===H)return null;const Z=ja.get("TILEBYTECOUNTS")?.values,{width:da,height:Y,pixelType:w,tileWidth:O,tileHeight:U}=l([ja]);var ea=g(ja,I);const ca=I.planes;var ha=da*Y,a=k(ja,"BITSPERSAMPLE"),e=34887===(k(ja,"COMPRESSION")??1),D=p(w);const Q=[];for(var V=0;V<ca;V++)Q.push(new D(ha));let ka,ma,oa,pa,ta,sa,wa,xa;ha=Math.ceil(da/O);if(0===a%8)if(e&&ea&&1<ca)for(ea=Math.round(H.length/ca),a=0;a<ea;a++){var B=Math.floor(a/ha)*U;oa=a%ha*O;D=B*da+oa;for(e=0;e<ca;e++)if(V=a*ca+e,0!==Z[V])for(V=yield f(G,
I.littleEndian,ja,H[V],Z[V]),ta=0,pa=D,wa=Math.min(O,da-oa),sa=Math.min(U,Y-B),xa=Q[e],ka=0;ka<sa;ka++)for(pa=D+ka*da,ta=ka*O,ma=0;ma<wa;ma++,pa++,ta++)xa[pa]=V[ta]}else for(a=0;a<H.length;a++)if(0!==Z[a])for(B=Math.floor(a/ha)*U,oa=a%ha*O,D=B*da+oa,V=yield f(G,I.littleEndian,ja,H[a],Z[a]),ta=0,pa=D,wa=Math.min(O,da-oa),sa=Math.min(U,Y-B),B=0;B<ca;B++)if(xa=Q[B],ea||e)for(ka=0;ka<sa;ka++)for(pa=D+ka*da,ta=O*U*B+ka*O,ma=0;ma<wa;ma++,pa++,ta++)xa[pa]=V[ta];else for(ka=0;ka<sa;ka++)for(pa=D+ka*da,ta=
ka*O*ca+B,ma=0;ma<wa;ma++,pa++,ta+=ca)xa[pa]=V[ta];return{width:da,height:Y,pixelType:w,pixels:Q}});return t.apply(this,arguments)}function b(G,I,ja,H=0,Z=!1,da=4){if(ja.values)return!0;var Y=ja.type,w=ja.valueCount,O=ja.valueOffset;let U=[];var ea=P[Y],ca=8*ea,ha=w*ea,a=w*P[Y]*8,e=8===da?64:32;da=ja.valueOffsets;if(a>e&&ha>(Z?G.byteLength:G?G.byteLength-O+H:0))return ja.offlineOffsetSize=[O,ha],ja.values=null,!1;if(a<=e)if(I||(32>=e?O>>>=32-a:(G=da?.length?da[0]:O>>>0,I=da?.length?da[1]:Math.round((O-
G)/4294967296),32>=a?(O=G>>>32-a,da[0]=O):(O=G*2**(32-a)+(I>>>32-a),da[0]=G,da[1]=I>>>32-a))),1===w&&ca===e)U=[O];else if(64===e)for(G=da?.length?da[0]:O>>>0,O=da?.length?da[1]:Math.round((O-G)/4294967296),I=G,ea=32,G=1;G<=w;G++)ha=32-ca*G%32,ea<ca?(ha=I<<ha>>>32-ea,a=O<<32-ea>>>32-ea,I=O,U.push(ha+a*2**(ca-ea)),ea-=32-(ca-ea)):(U.push(I<<ha>>>32-ca),ea-=ca),0===ea&&(ea=32,I=O);else for(G=1;G<=w;G++)U.push(O<<32-ca*G>>>32-ca);else for(O-=H,Z&&(O=0),w=O;w<O+ha;w+=ea){switch(Y){case 1:ca=(new DataView(G,
w,1)).getUint8(0);break;case 2:ca=(new DataView(G,w,1)).getUint8(0);break;case 3:ca=(new DataView(G,w,2)).getUint16(0,I);break;case 4:case 13:ca=(new DataView(G,w,4)).getUint32(0,I);break;case 5:ca=(new DataView(G,w,4)).getUint32(0,I)/(new DataView(G,w+4,4)).getUint32(0,I);break;case 6:ca=(new DataView(G,w,1)).getInt8(0);break;case 7:ca=(new DataView(G,w,1)).getUint8(0);break;case 8:ca=(new DataView(G,w,2)).getInt16(0,I);break;case 9:ca=(new DataView(G,w,4)).getInt32(0,I);break;case 10:ca=(new DataView(G,
w,4)).getInt32(0,I)/(new DataView(G,w+4,4)).getInt32(0,I);break;case 11:ca=(new DataView(G,w,4)).getFloat32(0,I);break;case 12:ca=(new DataView(G,w,8)).getFloat64(0,I);break;case 16:case 18:ca=h(new DataView(G,w,8),0,I);break;case 17:da=new DataView(G,w,8);a=(ca=I)?da.getInt32(0,ca):da.getUint32(0,ca);da=ca?da.getUint32(4,ca):da.getInt32(4,ca);e=0<=(ca?a:da)?1:-1;ca?a*=e:da*=e;ca=e*(ca?4294967296*da+a:4294967296*a+da);break;default:ca=null}U.push(ca)}if(2===Y){Y="";O=U;U=[];for(G=0;G<O.length;G++)0===
O[G]&&""!==Y?(U.push(Y),Y=""):Y+=String.fromCharCode(O[G]);""===Y&&0!==U.length||U.push(Y)}ja.values=U;return!0}function l(G){var I=G[0];const ja=k(I,"TILEWIDTH"),H=k(I,"TILELENGTH"),Z=k(I,"IMAGEWIDTH"),da=k(I,"IMAGELENGTH");var Y=k(I,"BITSPERSAMPLE");const w=k(I,"SAMPLESPERPIXEL");var O=k(I,"SAMPLEFORMAT")??1;const U=y(O,Y),ea=g(I);var ca=I.get("GDAL_NODATA")?.values;let ha=null;ca?.length&&(ha=ca.map(xa=>parseFloat(xa)),ha.some(xa=>isNaN(xa))&&(ha=null));var a=k(I,"COMPRESSION")??1;switch(a){case 1:ca=
"NONE";break;case 2:case 3:case 4:case 32771:ca="CCITT";break;case 5:ca="LZW";break;case 6:case 7:ca="JPEG";break;case 32773:ca="PACKBITS";break;case 8:case 32946:ca="DEFLATE";break;case 34712:ca="JPEG2000";break;case 34887:ca="LERC";break;default:ca=String(a)}let e=!0,D="";T.has(a)||(e=!1,D+="unsupported tag compression "+a);3<O&&(e=!1,D+="unsupported tag sampleFormat "+O);0!==Y%8&&(e=!1,D+="unsupported tag bitsPerSample "+Y);Y=I.get("GEOASCIIPARAMS")?.values?.[0];if(Y){var Q=(Q=Y.split("|").find(xa=>
xa.includes("ESRI PE String \x3d ")))?Q.replace("ESRI PE String \x3d ",""):"";Q=Q.startsWith("COMPD_CS")||Q.startsWith("PROJCS")||Q.startsWith("GEOGCS")?{wkid:null,wkt:Q}:null}O=I.get("GEOTIEPOINTS")?.values;Y=I.get("GEOPIXELSCALE")?.values;a=I.get("GEOTRANSMATRIX")?.values;var V=I.has("GEOKEYDIRECTORY")?I.get("GEOKEYDIRECTORY").data:null;I=!1;if(V){I=2===k(V,"GTRasterTypeGeoKey");var ka=k(V,"GTModelTypeGeoKey");2===ka?(V=k(V,"GeographicTypeGeoKey"),1024<=V&&32766>=V&&(Q={wkid:V})):1===ka&&(V=k(V,
"ProjectedCSTypeGeoKey"),1024<=V&&32766>=V&&(Q={wkid:V}))}let ma;Y&&O&&6<=O.length?(ma=[Y[0],0,O[3]-O[0]*Y[0],0,-Math.abs(Y[1]),O[4]-O[1]*Y[1]],I&&(ma[2]-=.5*ma[0]+.5*ma[1],ma[5]-=.5*ma[3]+.5*ma[4])):a&&16===a.length&&(ma=I?[a[0],a[1],a[3]-.5*a[0],a[4],a[5],a[7]-.5*a[5]]:[a[0],a[1],a[3],a[4],a[5],a[7]]);if(ma){I=[{x:0,y:da},{x:0,y:0},{x:Z,y:da},{x:Z,y:0}];V=a=Number.POSITIVE_INFINITY;let xa=ka=Number.NEGATIVE_INFINITY;for(let B=0;B<I.length;B++)O=J(I[B],ma),a=O.x>a?a:O.x,ka=O.x<ka?ka:O.x,V=O.y>V?
V:O.y,xa=O.y<xa?xa:O.y;Q={xmin:a,xmax:ka,ymin:V,ymax:xa,spatialReference:Q}}else Q={xmin:-.5,ymin:.5-da,xmax:Z-.5,ymax:.5,spatialReference:Q};I=G.filter(xa=>1===xa.get("NEWSUBFILETYPE")?.values?.[0]);let oa;let pa,ta;if(0<I.length){pa=Math.round(Math.log(Z/k(I[0],"IMAGEWIDTH"))/Math.LN2);var sa=I[I.length-1];ta=Math.round(Math.log(Z/k(sa,"IMAGEWIDTH"))/Math.LN2);oa=k(sa,"TILEWIDTH");sa=k(sa,"TILELENGTH")}oa=null!=ta&&0<ta?oa||ja:null;sa=null!=ta&&0<ta?sa||H:null;let wa;ja&&(wa=[{maxCol:Math.ceil(Z/
ja)-1,maxRow:Math.ceil(da/H)-1,minRow:0,minCol:0}],I.forEach(xa=>{wa.push({maxCol:Math.ceil(k(xa,"IMAGEWIDTH")/k(xa,"TILEWIDTH"))-1,maxRow:Math.ceil(k(xa,"IMAGELENGTH")/k(xa,"TILELENGTH"))-1,minRow:0,minCol:0})}));I=G[0].get("GDAL_METADATA")?.values?.[0];I=X(I);D+=" "+x({width:Z,height:da,tileWidth:ja,tileHeight:H,planes:w,ifds:G});return{width:Z,height:da,tileWidth:ja,tileHeight:H,planes:w,isBSQ:ea,pixelType:U,compression:ca,noData:ha,isSupported:e,message:D,extent:Q,affine:Y?null:ma,firstPyramidLevel:pa,
maximumPyramidLevel:ta,pyramidBlockWidth:oa,pyramidBlockHeight:sa,tileBoundary:wa,metadata:I}}function g(G,I){return(G=G.get("PLANARCONFIGURATION")?.values)?2===G[0]:I?I.isBSQ:!1}function u(G){const {littleEndian:I,isBigTiff:ja,firstIFDPos:H}=r(G);var Z=H;const da=[];do if(Z=v(G,I,Z,0,S.TIFF_TAGS,ja?8:4),Z.success)da.push(Z.ifd),Z=Z.nextIFD;else break;while(0<Z);return{...l(da),littleEndian:I,isBigTiff:ja,ifds:da}}function h(G,I,ja){const H=G.getUint32(I,ja);G=G.getUint32(I+4,ja);return ja?4294967296*
G+H:4294967296*H+G}function c(G,I,ja,H){return H?h(G,I,ja):G.getUint32(I,ja)}function r(G){var I=new DataView(G,0,16),ja=I.getUint16(0,!1);G=null;if(18761===ja)G=!0;else if(19789===ja)G=!1;else throw"unexpected endianess byte";var H=I.getUint16(2,G);if(42!==H&&43!==H)throw"unexpected tiff identifier";ja=4;if(H=43===H){const Z=I.getUint16(ja,G);ja+=2;if(8!==Z)throw"unsupported bigtiff version";if(0!==I.getUint16(ja,G))throw"unsupported bigtiff version";ja+=2}I=c(I,ja,G,H);return{littleEndian:G,isBigTiff:H,
firstIFDPos:I}}function v(G,I,ja,H=0,Z=S.TIFF_TAGS,da=4){ja=d(G,I,ja,H,Z,da);let Y;const w=ja.ifd;w&&(S.ifdTags.forEach((O,U)=>{w.has(U)&&(Y=w.get(U),Y.data=d(G,I,Y.valueOffset-H,H,O).ifd)}),w.has("GEOKEYDIRECTORY")&&(Y=w.get("GEOKEYDIRECTORY"),(Z=Y.values)&&4<Z.length&&(Z=Z[0]+"."+Z[1]+"."+Z[2],Y.data=d(G,I,Y.valueOffset+6-H,H,S.GEO_KEYS,2).ifd,Y.data&&Y.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[Z]}))),w.has("XMP")&&(Y=w.get("XMP"),Z=Y.values,"number"===typeof Z[0]&&
7===Y.type&&(Y.values=[F.bytesToUTF8(new Uint8Array(Z))])));return ja}function x(G){const {width:I,height:ja,tileHeight:H,tileWidth:Z}=G,da=G.planes,Y=Z?Z*H:I*ja;G=k(G.ifds[0],"BITSPERSAMPLE");let w="";Y*da>2**30/(8<G?G/8:1)&&(w=Z?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return w}function A(){A=m._asyncToGenerator(function*(G,I){const {headerInfo:ja,ifd:H,offsets:Z,sizes:da}=I;var Y=[];for(var w=0;w<Z.length;w++){var O=yield f(G,
ja.littleEndian,H,Z[w],da[w]||G.byteLength);Y.push(O)}var U=g(H,ja);const {pixelType:ea,planes:ca}=ja;var ha=p(ea);G=k(H,"TILEWIDTH");w=k(H,"TILELENGTH");var a=k(H,"COMPRESSION")??1;O=G*w;const e=[];var D=Y[0];const Q=34887===a;for(let ka=0;ka<ca;ka++){a=new ha(O);if(U&&Q){if(D=Y[ka],D.length)for(var V=0;V<O;V++)a[V]=D[ka][V+ka]}else if(D.length)if(U||Q&&!U)a=D.slice(O*ka,O*(ka+1));else for(V=0;V<O;V++)a[V]=D[V*ca+ka];e.push(a)}Y=ja.noData?ja.noData[0]:I.noDataValue;U=(ha=ja.metadata?ja.metadata.statistics:
null)?ha.map(ka=>ka.min):null;D=ha?ha.map(ka=>ka.max):null;ha=null;if(null!=Y)if(ha=new Uint8Array(O),1E24<Math.abs(Y))for(I=0;I<O;I++)ha[I]=1E-6>Math.abs((e[0][I]-Y)/Y)?0:1;else for(I=0;I<O;I++)ha[I]=e[0][I]===Y?0:1;else U&&D&&I.applyMinMaxConstraint&&(ha=C(e,U,D));return{pixelType:ea,width:G,height:w,pixels:e,mask:ha,noDataValue:Y}});return A.apply(this,arguments)}function E(){E=m._asyncToGenerator(function*(G,I={}){var ja=I.pyramidLevel||0,H=I.headerInfo||u(G);const {ifds:Z,noData:da}=H;if(0===
Z.length)throw"no valid image file directory";var Y=x(H);if(Y)throw Y;Y=null;var w=-1===ja?Z[Z.length-1]:Z[ja];I=da?da[0]:I.noDataValue;if(H.tileWidth)Y=yield z(G,H,w);else{{const ta=L.isPlatformLittleEndian===H.littleEndian,sa=w.get("STRIPOFFSETS")?.values;if(void 0===sa)G=null;else{var {width:O,height:U,pixelType:ea}=l([w]);Y=H.planes;ja=O*U;var ca=k(w,"BITSPERSAMPLE"),ha=p(ea),a=new ha(ja*Y),e=w.get("STRIPBYTECOUNTS")?.values,D=k(w,"ROWSPERSTRIP"),Q=k(w,"COMPRESSION")??1;var V=D;if(0===ca%8)for(w=
0;w<sa.length;w++){var ka=w*D*O*Y;V=(w+1)*D>U?U-w*D:D;if("u8"===ea||"s8"===ea||ta)if(8===Q||32946===Q){var ma=new Uint8Array(G,sa[w],e[w]);ma=new M.Zlib(ma);var oa=ma.getBytes();var pa=new ArrayBuffer(oa.length);ma=new Uint8Array(pa);ma.set(oa);ma.length!==V*O*Y*ca/8&&console.log("strip byte counts is different than expected")}else 6===Q?(ma=new Uint8Array(G,sa[w],e[w]),pa=new n.JpegImage,pa.parse(ma),V=pa.getData(pa.width,pa.height,!0),pa=new ArrayBuffer(V.length),ma=new Uint8Array(pa),ma.set(V)):
5===Q?(ma=aa.decode(G,sa[w],e[w],H.littleEndian),pa=ma.buffer):(e[w]!==V*O*Y*ca/8&&console.log("strip byte counts is different than expected"),pa=G.slice(sa[w],sa[w]+e[w]));else{6===Q||8===Q||32946===Q?(ma=new Uint8Array(G,sa[w],e[w]),ma=new M.Zlib(ma),ma=ma.getBytes(),pa=new ArrayBuffer(ma.length),oa=new Uint8Array(pa),ma.length!==V*O*Y*ca/8&&console.log("strip byte counts is different than expected")):(e[w]!==V*O*Y*ca/8&&console.log("strip byte counts is different than expected"),pa=new ArrayBuffer(e[w]),
ma=new Uint8Array(G,sa[w],e[w]),oa=new Uint8Array(pa));switch(ea){case "u16":case "s16":for(V=0;V<ma.length;V+=2)oa[V]=ma[V+1],oa[V+1]=ma[V];break;case "u32":case "s32":case "f32":for(V=0;V<ma.length;V+=4)oa[V]=ma[V+3],oa[V+1]=ma[V+2],oa[V+2]=ma[V+1],oa[V+3]=ma[V]}R.assertIsSome(pa)}ma=new ha(pa);a.set(ma,ka)}ca=[];if(1===Y)ca.push(a);else for(w=0;w<Y;w++){H=new ha(ja);for(G=0;G<ja;G++)H[G]=a[G*Y+w];ca.push(H)}G={width:O,height:U,pixelType:ea,pixels:ca}}}Y=yield G}if(null!=I){R.assertIsSome(Y);Y.mask=
new Uint8Array(Y.width*Y.height);if(1E24<Math.abs(I))for(G=0;G<Y.width*Y.height;G++)Y.mask[G]=1E-6>Math.abs((Y.pixels[0][G]-I)/I)?0:1;else for(G=0;G<Y.width*Y.height;G++)Y.mask[G]=Y.pixels[0][G]===I?0:1;Y.noDataValue=I}return Y});return E.apply(this,arguments)}const P=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],T=new Set([1,5,6,7,8,34712,34887]),C=(G,I,ja)=>{if(!(G&&0<G.length&&I&&ja))return null;let H,Z,da;const Y=G[0].length,w=G.length,O=new Uint8Array(Y);for(let ea=0;ea<w;ea++)if(H=G[ea],Z=I[ea],
da=ja[ea],0===ea)for(var U=0;U<Y;U++)O[U]=H[U]<Z||H[U]>da?0:1;else for(U=0;U<Y;U++)O[U]&&(O[U]=H[U]<Z||H[U]>da?0:1);return O},X=G=>{if(!G)return null;var I=G.match(/<Item(.*?)Item>/gi);if(!I||0===I.length)return null;G=new Map;var ja;for(var H=0;H<I.length;H++){var Z=I[H];var da=Z.slice(6,Z.indexOf("\x3e"));var Y=Z.indexOf("sample\x3d");-1<Y&&(ja=Z.slice(Y+8,Z.indexOf('"',Y+8)));Y=Z.indexOf("name\x3d");-1<Y&&(da=Z.slice(Y+6,Z.indexOf('"',Y+6)));da&&(Z=Z.slice(Z.indexOf("\x3e")+1,Z.indexOf("\x3c/Item\x3e")).trim(),
null!=ja?G.has(da)?G.get(da)[ja]=Z:G.set(da,[Z]):G.set(da,Z));ja=null}I=G.get("STATISTICS_MINIMUM");da=G.get("STATISTICS_MAXIMUM");H=G.get("STATISTICS_MEAN");Z=G.get("STATISTICS_STDDEV");ja=null;if(I&&da)for(ja=[],Y=0;Y<I.length;Y++)ja.push({min:parseFloat(I[Y]),max:parseFloat(da[Y]),avg:H&&parseFloat(H[Y]),stddev:Z&&parseFloat(Z[Y])});da=G.get("BandName");H=G.get("WavelengthMin");Z=G.get("WavelengthMax");I=null;if(da)for(I=[],Y=0;Y<da.length;Y++)I.push({BandName:da[Y],WavelengthMin:H&&parseFloat(H[Y]),
WavelengthMax:Z&&parseFloat(Z[Y])});da=G.get("DataType");return{statistics:ja,bandProperties:I,dataType:da,rawMetadata:G}};K.decode=function(G){return E.apply(this,arguments)};K.decodeTileOrStrip=function(G,I){return A.apply(this,arguments)};K.getImageInfo=l;K.isBSQConfig=g;K.parseFieldValues=b;K.parseHeader=u;K.parseIFD=v;K.parseSignature=r;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],
function(K){K.bytesToUTF8=function(m,R){let F=0,n="",N=0,aa=0;const S=m.length;for(;F<S;)if(aa=m[F++],N=aa>>4,8>N?N=1:15===N?(N=4,aa=(aa&7)<<18|(m[F++]&63)<<12|(m[F++]&63)<<6|m[F++]&63):14===N?(N=3,aa=(aa&15)<<12|(m[F++]&63)<<6|m[F++]&63):(N=2,aa=(aa&31)<<6|m[F++]&63),0!==aa||R)n+=String.fromCharCode(aa);return n};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const K=(()=>{const n=
[];n[254]="NEWSUBFILETYPE";n[255]="SUBFILETYPE";n[256]="IMAGEWIDTH";n[257]="IMAGELENGTH";n[258]="BITSPERSAMPLE";n[259]="COMPRESSION";n[262]="PHOTOMETRICINTERPRETATION";n[263]="THRESHHOLDING";n[264]="CELLWIDTH";n[265]="CELLLENGTH";n[266]="FILLORDER";n[269]="DOCUMENTNAME";n[270]="IMAGEDESCRIPTION";n[271]="MAKE";n[272]="MODEL";n[273]="STRIPOFFSETS";n[274]="ORIENTATION";n[277]="SAMPLESPERPIXEL";n[278]="ROWSPERSTRIP";n[279]="STRIPBYTECOUNTS";n[280]="MINSAMPLEVALUE";n[281]="MAXSAMPLEVALUE";n[282]="XRESOLUTION";
n[283]="YRESOLUTION";n[284]="PLANARCONFIGURATION";n[285]="PAGENAME";n[286]="XPOSITION";n[287]="YPOSITION";n[288]="FREEOFFSETS";n[289]="FREEBYTECOUNTS";n[290]="GRAYRESPONSEUNIT";n[291]="GRAYRESPONSECURVE";n[292]="T4OPTIONS";n[293]="T6OPTIONS";n[296]="RESOLUTIONUNIT";n[297]="PAGENUMBER";n[300]="COLORRESPONSEUNIT";n[301]="TRANSFERFUNCTION";n[305]="SOFTWARE";n[306]="DATETIME";n[315]="ARTIST";n[316]="HOSTCOMPUTER";n[317]="PREDICTOR";n[318]="WHITEPOINT";n[319]="PRIMARYCHROMATICITIES";n[320]="COLORMAP";
n[321]="HALFTONEHINTS";n[322]="TILEWIDTH";n[323]="TILELENGTH";n[324]="TILEOFFSETS";n[325]="TILEBYTECOUNTS";n[326]="BADFAXLINES";n[327]="CLEANFAXDATA";n[328]="CONSECUTIVEBADFAXLINES";n[330]="SUBIFD";n[332]="INKSET";n[333]="INKNAMES";n[334]="NUMBEROFINKS";n[336]="DOTRANGE";n[337]="TARGETPRINTER";n[338]="EXTRASAMPLES";n[339]="SAMPLEFORMAT";n[340]="SMINSAMPLEVALUE";n[341]="SMAXSAMPLEVALUE";n[342]="TRANSFERRANGE";n[347]="JPEGTABLES";n[512]="JPEGPROC";n[513]="JPEGIFOFFSET";n[514]="JPEGIFBYTECOUNT";n[515]=
"JPEGRESTARTINTERVAL";n[517]="JPEGLOSSLESSPREDICTORS";n[518]="JPEGPOINTTRANSFORM";n[519]="JPEGQTABLES";n[520]="JPEGDCTABLES";n[521]="JPEGACTABLES";n[529]="YCBCRCOEFFICIENTS";n[530]="YCBCRSUBSAMPLING";n[531]="YCBCRPOSITIONING";n[532]="REFERENCEBLACKWHITE";n[700]="XMP";n[33550]="GEOPIXELSCALE";n[33922]="GEOTIEPOINTS";n[33432]="COPYRIGHT";n[42112]="GDAL_METADATA";n[42113]="GDAL_NODATA";n[50844]="RPCCOEFFICIENT";n[34264]="GEOTRANSMATRIX";n[34735]="GEOKEYDIRECTORY";n[34736]="GEODOUBLEPARAMS";n[34737]=
"GEOASCIIPARAMS";n[34665]="EXIFIFD";n[34853]="GPSIFD";n[40965]="INTEROPERABILITYIFD";return n})(),m=(()=>{const n=K.slice();n[36864]="ExifVersion";n[40960]="FlashpixVersion";n[40961]="ColorSpace";n[42240]="Gamma";n[37121]="ComponentsConfiguration";n[37122]="CompressedBitsPerPixel";n[40962]="PixelXDimension";n[40963]="PixelYDimension";n[37500]="MakerNote";n[37510]="UserComment";n[40964]="RelatedSoundFile";n[36867]="DateTimeOriginal";n[36868]="DateTimeDigitized";n[36880]="OffsetTime";n[36881]="OffsetTimeOriginal";
n[36882]="OffsetTimeDigitized";n[37520]="SubSecTime";n[37521]="SubSecTimeOriginal";n[37522]="SubSecTimeDigitized";n[37888]="Temperature";n[37889]="Humidity";n[37890]="Pressure";n[37891]="WaterDepth";n[37892]="Acceleration";n[37893]="CameraElevationAngle";n[42016]="ImageUniqueID";n[42032]="CameraOwnerName";n[42033]="BodySerialNumber";n[42034]="LensSpecification";n[42035]="LensMake";n[42036]="LensModel";n[42037]="LensSerialNumber";n[33434]="ExposureTime";n[33437]="FNumber";n[34850]="ExposureProgram";
n[34852]="SpectralSensitivity";n[34855]="PhotographicSensitivity";n[34856]="OECF";n[34864]="SensitivityType";n[34865]="StandardOutputSensitivity";n[34866]="RecommendedExposureIndex";n[34867]="ISOSpeed";n[34868]="ISOSpeedLatitudeyyy";n[34869]="ISOSpeedLatitudezzz";n[37377]="ShutterSpeedValue";n[37378]="ApertureValue";n[37379]="BrightnessValue";n[37380]="ExposureBiasValue";n[37381]="MaxApertureValue";n[37382]="SubjectDistance";n[37383]="MeteringMode";n[37384]="LightSource";n[37385]="Flash";n[37386]=
"FocalLength";n[37396]="SubjectArea";n[41483]="FlashEnergy";n[41484]="SpatialFrequencyResponse";n[41486]="FocalPlaneXResolution";n[41487]="FocalPlaneYResolution";n[41488]="FocalPlaneResolutionUnit";n[41492]="SubjectLocation";n[41493]="ExposureIndex";n[41495]="SensingMethod";n[41728]="FileSource";n[41729]="SceneType";n[41730]="CFAPattern";n[41985]="CustomRendered";n[41986]="ExposureMode";n[41987]="WhiteBalance";n[41988]="DigitalZoomRatio";n[41989]="FocalLengthIn35mmFilm";n[41990]="SceneCaptureType";
n[41991]="GainControl";n[41992]="Contrast";n[41993]="Saturation";n[41994]="Sharpness";n[41995]="DeviceSettingDescription";n[41996]="SubjectDistanceRange";return n})(),R=(()=>{const n=[];n[1024]="GTModelTypeGeoKey";n[1025]="GTRasterTypeGeoKey";n[1026]="GTCitationGeoKey";n[2048]="GeographicTypeGeoKey";n[2049]="GeogCitationGeoKey";n[2050]="GeogGeodeticDatumGeoKey";n[2051]="GeogPrimeMeridianGeoKey";n[2052]="GeogLinearUnitsGeoKey";n[2053]="GeogLinearUnitSizeGeoKey";n[2054]="GeogAngularUnitsGeoKey";n[2055]=
"GeogAngularUnitSizeGeoKey";n[2056]="GeogEllipsoidGeoKey";n[2057]="GeogSemiMajorAxisGeoKey";n[2058]="GeogSemiMinorAxisGeoKey";n[2059]="GeogInvFlatteningGeoKey";n[2061]="GeogPrimeMeridianLongGeoKey";n[2060]="GeogAzimuthUnitsGeoKey";n[3072]="ProjectedCSTypeGeoKey";n[3073]="PCSCitationGeoKey";n[3074]="ProjectionGeoKey";n[3075]="ProjCoordTransGeoKey";n[3076]="ProjLinearUnitsGeoKey";n[3077]="ProjLinearUnitSizeGeoKey";n[3078]="ProjStdParallel1GeoKey";n[3079]="ProjStdParallel2GeoKey";n[3080]="ProjNatOriginLongGeoKey";
n[3081]="ProjNatOriginLatGeoKey";n[3082]="ProjFalseEastingGeoKey";n[3083]="ProjFalseNorthingGeoKey";n[3084]="ProjFalseOriginLongGeoKey";n[3085]="ProjFalseOriginLatGeoKey";n[3086]="ProjFalseOriginEastingGeoKey";n[3087]="ProjFalseOriginNorthingGeoKey";n[3088]="ProjCenterLongGeoKey";n[3090]="ProjCenterEastingGeoKey";n[3091]="ProjCenterNorthingGeoKey";n[3092]="ProjScaleAtNatOriginGeoKey";n[3093]="ProjScaleAtCenterGeoKey";n[3094]="ProjAzimuthAngleGeoKey";n[3095]="ProjStraightVertPoleLongGeoKey";n[4096]=
"VerticalCSTypeGeoKey";n[4097]="VerticalCitationGeoKey";n[4098]="VerticalDatumGeoKey";n[4099]="VerticalUnitsGeoKey";return n})(),F=new Map;F.set("EXIFIFD",m);F.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:K,ifdTags:F,GEO_KEYS:R,getTagName:(n,N)=>{N=(N||K)[n];void 0===N&&(N="unknown"+String(n));return N}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(K){const m=new ArrayBuffer(4),R=new Uint8Array(m);(new Uint32Array(m))[0]=1;K.isPlatformLittleEndian=1===R[0];Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe",
"../PixelBlock"],function(K,m,R){function F(b){return m.isSome(b)&&"esri.layers.support.PixelBlock"===b.declaredClass&&b.pixels&&0<b.pixels.length}function n(b,l,g,u,h){const c=b.length;h=R.createEmptyBand(h,c);if(l)for(let r=0;r<c;r++)l[r]&&(h[r]=g[b[r]-u]);else for(l=0;l<c;l++)h[l]=g[b[l]-u];return h}function N(b,l,g,u){const h=null!=g&&2<=g.length?new Set(g):null;g=1===g?.length?g[0]:null;const c=!!l?.length;for(let r=0;r<b.length;r++)if(u[r]){const v=b[r];if(c){let x=!1;for(let A=0;A<l.length;A+=
2)if(v>=l[A]&&v<=l[A+1]){x=!0;break}x||(u[r]=0)}u[r]&&(v===g||h?.has(v))&&(u[r]=0)}}function aa(b,l){const g=b[0].length;for(let u=0;u<g;u++)if(l[u]){let h=!1;for(let c=0;c<b.length;c++)if(b[c][u]){h=!0;break}h||(l[u]=0)}}function S(b,l){const g=b[0].length;for(let u=0;u<g;u++)if(l[u]){let h=!1;for(let c=0;c<b.length;c++)if(0===b[c][u]){h=!0;break}h&&(l[u]=0)}}function L(b,l,g,u,h,c,r,v){return{xmin:h<=g*b?0:h<g*b+b?h-g*b:b,ymin:c<=u*l?0:c<u*l+l?c-u*l:l,xmax:h+r<=g*b?0:h+r<g*b+b?h+r-g*b:b,ymax:c+
v<=u*l?0:c+v<u*l+l?c+v-u*l:l}}function M(b,l,g,u,h,c){const {width:r,height:v}=g.block,{x,y:A}=g.offset,{width:E,height:P}=g.mosaic;g=L(r,v,u,h,x,A,E,P);let T=0;var C=0;if(c){var X=c.hasGCSSShiftTransform?360:c.halfWorldWidth??0,G=r*c.resolutionX;const I=c.startX+u*G;I<X&&I+G>X?C=c.rightPadding:I>=X&&(T=c.leftMargin-c.rightPadding,C=0)}g.xmax-=C;if("number"===typeof l)for(c=g.ymin;c<g.ymax;c++)for(C=(h*v+c-A)*E+(u*r-x)+T,X=g.xmin;X<g.xmax;X++)b[C+X]=l;else for(c=g.ymin;c<g.ymax;c++)for(C=(h*v+c-A)*
E+(u*r-x)+T,X=c*r,G=g.xmin;G<g.xmax;G++)b[C+G]=l[X+G]}function y(b,l,g={}){const {clipOffset:u,clipSize:h,alignmentInfo:c,blockWidths:r}=g;if(r)return p(b,l,{blockWidths:r});var v=b.find(H=>F(H));if(m.isNone(v))return null;g=h?h.width:l.width;const x=h?h.height:l.height;var A=v.width,E=v.height;const P=l.width/A,T=l.height/E;l={offset:u||{x:0,y:0},mosaic:h||l,block:{width:A,height:E}};A=v.pixelType;E=R.getPixelArrayConstructor(A);var C=v.pixels.length;v=[];for(var X=0;X<C;X++){var G=new E(g*x);for(let H=
0;H<T;H++)for(let Z=0;Z<P;Z++){var I=b[H*P+Z];F(I)&&(I=I.pixels[X],M(G,I,l,Z,H,c))}v.push(G)}let ja;if(b.some(H=>m.isNone(H)||m.isSome(H.mask)&&0<H.mask.length))for(ja=new Uint8Array(g*x),E=0;E<T;E++)for(C=0;C<P;C++)G=b[E*P+C],X=m.isSome(G)?G.mask:null,m.isSome(X)?M(ja,X,l,C,E,c):G?M(ja,1,l,C,E,c):M(ja,0,l,C,E,c);b=new R({width:g,height:x,pixels:v,pixelType:A,mask:ja});b.updateStatistics();return b}function p(b,l,g){const u=b.find(C=>m.isSome(C));if(m.isNone(u))return null;var h=b.some(C=>m.isSome(C)?
!!C.mask:!0);const {width:c,height:r}=l;l=h?new Uint8Array(c*r):null;({blockWidths:g}=g);const v=[],x=u.getPlaneCount(),A=R.getPixelArrayConstructor(u.pixelType);if(h)for(let C=0,X=0;C<b.length;X+=g[C],C++)if(h=b[C],F(h)){var E=m.unwrap(h.mask);for(var P=0;P<r;P++)for(var T=0;T<g[C];T++)l[P*c+T+X]=null==E?255:E[P*h.width+T]}for(h=0;h<x;h++){E=new A(c*r);for(let C=0,X=0;C<b.length;X+=g[C],C++)if(P=b[C],F(P)&&(T=P.pixels[h],null!=T))for(let G=0;G<r;G++)for(let I=0;I<g[C];I++)E[G*c+I+X]=T[G*P.width+
I];v.push(E)}b=new R({width:c,height:r,mask:l,pixels:v,pixelType:u.pixelType});b.updateStatistics();return b}function J(b){if(!F(b))return null;const l=b.clone(),{width:g,height:u,pixels:h}=b;var c=h[0];const r=l.pixels[0];b=m.unwrap(b.mask);for(let A=2;A<u-1;A++){const E=new Map;for(var v=A-2;v<A+2;v++)for(var x=0;4>x;x++){const P=v*g+x;f(E,c[P],b?b[P]:1)}r[A*g]=k(E);r[A*g+1]=r[A*g+2]=r[A*g];for(v=3;v<g-1;v++)x=(A-2)*g+v+1,f(E,c[x],b?b[x]:1),x=(A-1)*g+v+1,f(E,c[x],b?b[x]:1),x=A*g+v+1,f(E,c[x],b?
b[x]:1),x=(A+1)*g+v+1,f(E,c[x],b?b[x]:1),x=(A-2)*g+v-3,d(E,c[x],b?b[x]:1),x=(A-1)*g+v-3,d(E,c[x],b?b[x]:1),x=A*g+v-3,d(E,c[x],b?b[x]:1),x=(A+1)*g+v-3,d(E,c[x],b?b[x]:1),r[A*g+v]=k(E);r[A*g+v+1]=r[A*g+v]}for(c=0;c<g;c++)r[c]=r[g+c]=r[2*g+c],r[(u-1)*g+c]=r[(u-2)*g+c];l.updateStatistics();return l}function k(b){if(0===b.size)return 0;let l=0,g=-1,u=0;const h=b.keys();let c=h.next();for(;!c.done;)u=b.get(c.value),u>l&&(g=c.value,l=u),c=h.next();return g}function d(b,l,g){0!==g&&(g=b.get(l),1===g?b.delete(l):
b.set(l,g-1))}function f(b,l,g){0!==g&&b.set(l,b.has(l)?b.get(l)+1:1)}function q(b,l,g){let {x:u,y:h}=l;const {width:c,height:r}=g;if(0===u&&0===h&&r===b.height&&c===b.width)return b;const {width:v,height:x}=b;l=Math.max(0,h);const A=Math.max(0,u),E=Math.min(u+c,v),P=Math.min(h+r,x);if(0>E||0>P||!F(b))return null;u=Math.max(0,-u);h=Math.max(0,-h);var {pixels:T}=b,C=c*r,X=T.length;const G=[];for(var I=0;I<X;I++){var ja=T[I],H=R.createEmptyBand(b.pixelType,C);for(let Z=l;Z<P;Z++){const da=Z*v;let Y=
(Z+h-l)*c+u;for(let w=A;w<E;w++)H[Y++]=ja[da+w]}G.push(H)}T=new Uint8Array(C);C=m.unwrap(b.mask);for(X=l;X<P;X++)for(I=X*v,ja=(X+h-l)*c+u,H=A;H<E;H++)T[ja++]=C?C[I+H]:1;b=new R({width:g.width,height:g.height,pixelType:b.pixelType,pixels:G,mask:T});b.updateStatistics();return b}function z(b,l=!0){if(!F(b))return null;const {pixels:g,width:u,height:h,mask:c,pixelType:r}=b;b=[];const v=Math.round(u/2),x=Math.round(h/2),A=h-1,E=u-1;for(var P=0;P<g.length;P++){var T=g[P],C=R.createEmptyBand(r,v*x),X=0;
for(var G=0;G<h;G+=2)for(var I=0;I<u;I+=2){var ja=T[G*u+I];if(l){var H=I===E?ja:T[G*u+I+1];const Z=G===A?ja:T[G*u+I+u],da=I===E?Z:G===A?H:T[G*u+I+u+1];C[X++]=(ja+H+Z+da)/4}else C[X++]=ja}b.push(C)}P=null;if(m.isSome(c))for(P=new Uint8Array(v*x),T=0,C=0;C<h;C+=2)for(X=0;X<u;X+=2)G=c[C*u+X],l?(I=X===E?G:c[C*u+X+1],ja=C===A?G:c[C*u+X+u],H=X===E?ja:C===A?I:c[C*u+X+u+1],P[T++]=G*I*ja*H?1:0):P[T++]=G;return new R({width:v,height:x,pixelType:r,pixels:b,mask:P})}function t(b,l,g,u,h=.5){const {width:c,height:r}=
b,{width:v,height:x}=l;b=u.cols;u=u.rows;l=Math.ceil(v/b-.1/b);const A=Math.ceil(x/u-.1/u);let E,P,T,C,X;const G=l*b;var I=G*A*u;const ja=new Float32Array(I),H=new Float32Array(I),Z=new Uint32Array(I),da=new Uint32Array(I);let Y=0,w,O;for(let ca=0;ca<A;ca++)for(let ha=0;ha<l;ha++){var U=12*(ca*l+ha);I=g[U];E=g[U+1];P=g[U+2];T=g[U+3];C=g[U+4];X=g[U+5];for(var ea=0;ea<u;ea++){Y=(ca*u+ea)*G+ha*b;O=(ea+.5)/u;for(let a=0;a<ea;a++)w=(a+.5)/b,ja[Y+a]=(I*w+E*O+P)*c-h,H[Y+a]=(T*w+C*O+X)*r-h,Z[Y+a]=Math.round(ja[Y+
a]),da[Y+a]=Math.round(H[Y+a])}U+=6;I=g[U];E=g[U+1];P=g[U+2];T=g[U+3];C=g[U+4];X=g[U+5];for(U=0;U<u;U++)for(Y=(ca*u+U)*G+ha*b,O=(U+.5)/u,ea=U;ea<b;ea++)w=(ea+.5)/b,ja[Y+ea]=(I*w+E*O+P)*c-h,H[Y+ea]=(T*w+C*O+X)*r-h,Z[Y+ea]=Math.round(ja[Y+ea]),da[Y+ea]=Math.round(H[Y+ea])}return{offsets_x:ja,offsets_y:H,offsets_xi:Z,offsets_yi:da,gridWidth:G}}K.NoDataInterpretation=void 0;(function(b){b[b.matchAny=0]="matchAny";b[b.matchAll=1]="matchAll"})(K.NoDataInterpretation||(K.NoDataInterpretation={}));K.MissingBandAction=
void 0;(function(b){b[b.bestMatch=0]="bestMatch";b[b.fail=1]="fail"})(K.MissingBandAction||(K.MissingBandAction={}));K.approximateTransform=function(b,l,g,u,h="nearest"){if(!F(b))return null;"majority"===h&&(b=J(b));const {pixels:c,mask:r,pixelType:v}=b,x=b.width;var A=b.height;const E=R.getPixelArrayConstructor(v),P=c.length,{width:T,height:C}=l;b=!1;for(let da=0;da<g.length;da+=3)-1===g[da]&&-1===g[da+1]&&-1===g[da+2]&&(b=!0);const {offsets_x:X,offsets_y:G,offsets_xi:I,offsets_yi:ja,gridWidth:H}=
t({width:x,height:A},l,g,u,"majority"===h?0:.5);let Z;l=(da,Y,w)=>{const O=da instanceof Float32Array||da instanceof Float64Array?0:.5;for(let U=0;U<C;U++){Z=U*H;for(let ea=0;ea<T;ea++){if(0>X[Z]||0>G[Z])da[U*T+ea]=0;else if(w)da[U*T+ea]=Y[I[Z]+ja[Z]*x];else{const ca=Math.floor(X[Z]),ha=Math.floor(G[Z]),a=Math.ceil(X[Z]),e=Math.ceil(G[Z]),D=X[Z]-ca,Q=G[Z]-ha;da[U*T+ea]=!r||r[ca+ha*x]&&r[ca+ha*x]&&r[ca+e*x]&&r[a+e*x]?(1-Q)*((1-D)*Y[ca+ha*x]+D*Y[a+ha*x])+Q*((1-D)*Y[ca+e*x]+D*Y[a+e*x])+O:Y[I[Z]+ja[Z]*
x]}Z++}}};g=[];for(A=0;A<P;A++)u=new E(T*C),l(u,c[A],"nearest"===h||"majority"===h),g.push(u);h=new R({width:T,height:C,pixelType:v,pixels:g});if(m.isSome(r))h.mask=new Uint8Array(T*C),l(h.mask,r,!0);else if(b)for(h.mask=new Uint8Array(T*C),b=0;b<T*C;b++)h.mask[b]=0>X[b]||0>G[b]?0:1;h.updateStatistics();return h};K.clip=q;K.colorize=function(b,l){if(!F(b)||!l||!l.indexedColormap&&!l.indexed2DColormap)return b;const g=b.clone();var u=g.pixels;let h=g.mask;const c=g.width*g.height;if(1!==u.length)return b;
const {indexedColormap:r,indexed2DColormap:v,offset:x,alphaSpecified:A}=l;b=0;u=u[0];l=new Uint8Array(u.length);const E=new Uint8Array(u.length),P=new Uint8Array(u.length);var T=0;if(r){const C=r.length-1;if(m.isSome(h))for(b=0;b<c;b++)h[b]&&(T=4*(u[b]-x),T<x||T>C?h[b]=0:(l[b]=r[T],E[b]=r[T+1],P[b]=r[T+2],h[b]=r[T+3]));else{h=new Uint8Array(c);for(b=0;b<c;b++)T=4*(u[b]-x),T<x||T>C?h[b]=0:(l[b]=r[T],E[b]=r[T+1],P[b]=r[T+2],h[b]=r[T+3]);g.mask=h}}else if(v)if(m.isSome(h))for(b=0;b<c;b++)h[b]&&(T=v[u[b]],
l[b]=T[0],E[b]=T[1],P[b]=T[2],h[b]=T[3]);else{h=new Uint8Array(c);for(b=0;b<c;b++)T=v[u[b]],l[b]=T[0],E[b]=T[1],P[b]=T[2],h[b]=T[3];g.mask=h}g.pixels=[l,E,P];g.statistics=null;g.pixelType="u8";g.maskIsAlpha=A;return g};K.compositeBands=function(b){if(!b?.length||b.some(x=>!F(x)))return null;if(1===b.length)return m.isSome(b[0])?b[0].clone():null;const {width:l,height:g,pixelType:u}=b[0];if(b.some(x=>x.width!==l||x.height!==g))return null;const h=b.map(({mask:x})=>x).filter(x=>null!=x);let c=null;
h.length&&(c=new Uint8Array(l*g),c.set(h[0]),1<h.length&&S(h.slice(1),c));const r=[];b.forEach(({pixels:x})=>r.push(...x));const v=[];b.map(({statistics:x})=>x).filter(x=>x?.length).forEach(x=>v.push(...x));return new R({pixelType:u,width:l,height:g,mask:c,pixels:r,statistics:v.length?v:null})};K.createColormapLUT=function(b){if(b){var l=b.colormap;if(l&&0!==l.length){l=l.sort((A,E)=>A[0]-E[0]);var g=0;0>l[0][0]&&(g=l[0][0]);var u=Math.max(256,l[l.length-1][0]-g+1),h=new Uint8Array(4*u),c=[],r=0,
v=0,x=5===l[0].length;if(65536<u)return l.forEach(A=>{c[A[0]-g]=x?A.slice(1):A.slice(1).concat([255])}),{indexed2DColormap:c,offset:g,alphaSpecified:x};if(b.fillUnspecified)for(b=l[v],r=b[0]-g;r<u;r++)h[4*r]=b[1],h[4*r+1]=b[2],h[4*r+2]=b[3],h[4*r+3]=x?b[4]:255,r===b[0]-g&&(b=v===l.length-1?b:l[++v]);else for(r=0;r<l.length;r++)b=l[r],v=4*(b[0]-g),h[v]=b[1],h[v+1]=b[2],h[v+2]=b[3],h[v+3]=x?b[4]:255;return{indexedColormap:h,offset:g,alphaSpecified:x}}}};K.createMaskLUT=function(b,l,g){if("u8"!==b&&
"s8"!==b&&"u16"!==b&&"s16"!==b)return null;var u=b.includes("16")?65536:256;b=b.includes("s")?-u/2:0;u=new Uint8Array(u);if(l)for(let c=0;c<l.length;c++){var h=Math.ceil(l[2*c]-b);const r=Math.floor(l[2*c+1]-b);for(;h<=r;h++)u[h]=255}if(g)for(l=0;l<g.length;l++)u[g[l]-b]=0;return{lut:u,offset:b}};K.createRemapLUT=function(b,l,g){if("u8"!==b&&"s8"!==b&&"u16"!==b&&"s16"!==b)return null;var u=b.includes("16")?65536:256;const h=b.includes("s")?-u/2:0;b=R.createEmptyBand(b,u);for(u=0;u<l.length;u++){const r=
g[u];var c=Math.ceil(l[2*u]-h);const v=Math.floor(l[2*u+1]-h);for(;c<=v;c++)b[c]=r}return{lut:b,offset:h}};K.extractBands=function(b,l){if(!l?.length||!F(b))return b;const g=b.pixels.length;return l&&l.some(u=>u>=g)||1===g&&1===l.length&&0===l[0]||g===l.length&&!l.some((u,h)=>u!==h)?b:new R({pixelType:b.pixelType,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:l.map(u=>b.pixels[u]),statistics:b.statistics&&l.map(u=>b.statistics[u])})};K.getClipBounds=
L;K.getLocalArithmeticNorthRotations=function(b,l){const {coefficients:g,spacing:u}=l,{offsets_x:h,offsets_y:c,gridWidth:r}=t(b,b,g,{rows:u[0],cols:u[1]},.5),{width:v,height:x}=b;b=new Float32Array(v*x);l=180/Math.PI;for(let P=0;P<x;P++)for(let T=0;T<v;T++){var A=P*r+T,E=0===P?A:A-r;const C=P===x-1?A:A+r;A=h[E]-h[C];E=c[C]-c[E];isNaN(A)||isNaN(E)?b[P*v+T]=90:(E=Math.atan2(E,A)*l,E=(360+E)%360,b[P*v+T]=E)}return b};K.isValidPixelBlock=F;K.lookupBandValues=n;K.lookupPixels=function(b,l){if(!F(b))return null;
const {pixels:g,mask:u}=b,h=g.length;let c=l.lut;const {offset:r}=l;c&&1===c[0].length&&(c=g.map(()=>c));const v=[];l=l.outputPixelType||"u8";for(let x=0;x<h;x++){const A=n(g[x],u,c[x],r||0,l);v.push(A)}b=new R({width:b.width,height:b.height,pixels:v,mask:u,pixelType:l});b.updateStatistics();return b};K.mask=function(b,l){if(!F(b))return null;const {width:g,height:u,pixels:h}=b;var c=g*u;const r=new Uint8Array(c);b.mask?r.set(b.mask):r.fill(255);b=h.length;const {includedRanges:v,noDataValues:x,outputPixelType:A,
matchAll:E,lookup:P}=l;if(P){c=[];for(l=0;l<b;l++){var T=n(h[l],r,P.lut,P.offset||0,"u8");c.push(T)}1===c.length?r.set(c[0]):E?aa(c,r):S(c,r)}else if(E){l=[];for(T=0;T<b;T++){const C=new Uint8Array(c);C.set(r);N(h[T],v,x,C);l.push(C)}1===l.length?r.set(l[0]):aa(l,r)}else for(c=0;c<b;c++)N(h[c],v,x,r);return new R({width:g,height:u,pixelType:A,pixels:h,mask:r})};K.mosaic=y;K.mosaicPixelData=function(b,l){if(!b||0===b.length)return null;var g=b.find(P=>P.pixelBlock);if(!g||m.isNone(g.pixelBlock))return null;
var u=(g.extent.xmax-g.extent.xmin)/g.pixelBlock.width;const h=(g.extent.ymax-g.extent.ymin)/g.pixelBlock.height,c=.01*Math.min(u,h),r=b.sort((P,T)=>Math.abs(P.extent.ymax-T.extent.ymax)>c?T.extent.ymax-P.extent.ymax:Math.abs(P.extent.xmin-T.extent.xmin)>c?P.extent.xmin-T.extent.xmin:0);var v=Math.min.apply(null,r.map(P=>P.extent.xmin));const x=Math.min.apply(null,r.map(P=>P.extent.ymin)),A=Math.max.apply(null,r.map(P=>P.extent.xmax)),E=Math.max.apply(null,r.map(P=>P.extent.ymax));b={x:Math.round((l.xmin-
v)/u),y:Math.round((E-l.ymax)/h)};v={width:Math.round((A-v)/u),height:Math.round((E-x)/h)};u={width:Math.round((l.xmax-l.xmin)/u),height:Math.round((l.ymax-l.ymin)/h)};if(Math.round(v.width/g.pixelBlock.width)*Math.round(v.height/g.pixelBlock.height)!==r.length||0>b.x||0>b.y||v.width<u.width||v.height<u.height)return null;g=r.map(P=>P.pixelBlock);g=y(g,v,{clipOffset:b,clipSize:u});return{extent:l,pixelBlock:g}};K.remap=function(b,l){if(!F(b))return null;const {width:g,height:u}=b,{inputRanges:h,outputValues:c,
outputPixelType:r,noDataRanges:v,allowUnmatched:x}=l;l=b.pixels[0];const A=R.createEmptyBand(r,l.length);x&&A.set(l);b=b.mask;const E=h.length/2;for(var P=0;P<u;P++)for(var T=0;T<g;T++){var C=P*g+T;if(!b||b[C]){var X=l[C];for(var G=E-1;0<=G;G--)if(X>=h[2*G]&&X<=h[2*G+1]){A[C]=c[G];break}}}P=b;if(v?.length)for(P=new Uint8Array(g*u),b&&P.set(b),T=0;T<u;T++)for(C=0;C<g;C++)if(X=T*g+C,!b||b[X]){G=l[X];for(let I=0;I<E;I+=2)if(G>=v[I]&&G<=v[I+1]){A[X]=0;P[X]=0;break}}return new R({width:g,height:u,pixelType:r,
pixels:[A],mask:P})};K.remapColor=function(b,l){if(!F(b))return null;b=b.clone();var {pixels:g}=b;const u=b.width*b.height,h=l.length,c=Math.floor(h/2),r=l[Math.floor(c)];g=g[0];let v,x,A,E,P,T,C=!1;const X=new Uint8Array(u),G=new Uint8Array(u),I=new Uint8Array(u);let ja=b.mask;const H=4===l[0].mappedColor.length;ja||(ja=new Uint8Array(u),ja.fill(H?255:1),b.mask=ja);for(P=0;P<u;P++)if(ja[P]){v=g[P];C=!1;T=c;x=r;A=0;for(E=h-1;1<E-A;){if(v===x.value){C=!0;break}v>x.value?A=T:E=T;T=Math.floor((A+E)/
2);x=l[Math.floor(T)]}C||(v===l[A].value?(x=l[A],C=!0):v===l[E].value?(x=l[E],C=!0):v<l[A].value?(C=!1,x=null):v>l[A].value&&(v<l[E].value?(x=l[A],C=!0):E===h-1?(C=!1,x=null):(x=l[E],C=!0)));C?(X[P]=x.mappedColor[0],G[P]=x.mappedColor[1],I[P]=x.mappedColor[2],ja[P]=x.mappedColor[3]):X[P]=G[P]=I[P]=ja[P]=0}b.pixels=[X,G,I];b.mask=ja;b.pixelType="u8";b.maskIsAlpha=H;return b};K.resampleByMajority=J;K.setValidBoundary=function(b,l,g){if(!F(b))return null;const {width:u,height:h}=b,c=l.x;l=l.y;const r=
g.width+c;g=g.height+l;if(0>c||0>l||r>u||g>h||0===c&&0===l&&r===u&&g===h)return b;b.mask||(b.mask=new Uint8Array(u*h));const v=b.mask;for(let x=0;x<h;x++){const A=x*u;for(let E=0;E<u;E++)v[A+E]=x<l||x>=g||E<c||E>=r?0:1}b.updateStatistics();return b};K.split=function(b,l,g){if(!F(b))return null;const {width:u,height:h}=l;let {width:c,height:r}=b;const v=new Map,x={x:0,y:0};g=null==g?1:1+g;for(let A=0;A<g;A++){const E=Math.ceil(c/u),P=Math.ceil(r/h);for(let T=0;T<P;T++){x.y=T*h;for(let C=0;C<E;C++){x.x=
C*u;const X=q(b,x,l);v.set(`${A}/${T}/${C}`,X)}}A<g-1&&(b=z(b));c=Math.round(c/2);r=Math.round(r/2)}return v};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/rasterFunctionHelper":function(){define("exports ../../../core/Error ./AspectFunction ./BandArithmeticFunction ./ColormapFunction ./CompositeBandFunction ./ConvolutionFunction ./ExtractBandFunction ./LocalFunction ./MaskFunction ./NDVIFunction ./RemapFunction ./SlopeFunction ./StatisticsHistogramsFunction ./StretchFunction".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y,p,J,k,d){function f(t,b){return"rasters"===b[0]&&Array.isArray(t.rasters)?t.rasters:b.map(l=>t[l])}function q(t,b){const {rasterFunction:l,rasterFunctionArguments:g}=t;var u=t.outputPixelType?.toLowerCase();if(null==l||!z.has(l))throw new m("raster-function-helper",`unsupported raster function: ${l}`);var h=z.get(l);t=("function"===typeof h.ctor?h.ctor:h.ctor["default"]).fromJSON({...t,outputPixelType:u});({rasterArgumentNames:u}=t);h=[];const c=f(g,u),r="rasters"===
u[0],v=[];for(let x=0;x<c.length;x++){const A=c[x];let E;null==A||"string"===typeof A&&A.startsWith("$")?h.push(b?.raster):"string"===typeof A?b[A]&&h.push(b[A]):"number"!==typeof A&&"rasterFunction"in A&&(E=q(A,b),r||(t.functionArguments[u[x]]=E),h.push(E));r&&v.push(E??A)}r&&(t.functionArguments.rasters=v);b&&(t.sourceRasters=h,b=b.raster?.url)&&(t.mainPrimaryRasterId=b);return t}const z=new Map;z.set("Aspect",{desc:"Aspect Function",ctor:R,rasterArgumentNames:["raster"]});z.set("BandArithmetic",
{desc:"Band Arithmetic Function",ctor:F,rasterArgumentNames:["raster"]});z.set("Colormap",{desc:"Colormap Function",ctor:n,rasterArgumentNames:["raster"]});z.set("CompositeBand",{desc:"CompositeBand Function",ctor:N,rasterArgumentNames:["rasters"]});z.set("Convolution",{desc:"Convolution Function",ctor:aa,rasterArgumentNames:["raster"]});z.set("ExtractBand",{desc:"ExtractBand Function",ctor:S,rasterArgumentNames:["raster"]});z.set("Local",{desc:"Local Function",ctor:L,rasterArgumentNames:["rasters"]});
z.set("Mask",{desc:"Mask Function",ctor:M,rasterArgumentNames:["raster"]});z.set("NDVI",{desc:"NDVI Function",ctor:y,rasterArgumentNames:["raster"]});z.set("Remap",{desc:"Remap Function",ctor:p,rasterArgumentNames:["raster"]});z.set("Slope",{desc:"Slope Function",ctor:J,rasterArgumentNames:["raster"]});z.set("StatisticsHistograms",{desc:"Statistics Histograms Function",ctor:k,rasterArgumentNames:["raster"]});z.set("Stretch",{desc:"Stretch Function",ctor:d,rasterArgumentNames:["raster"]});K.create=
function(t,b){if("rasterFunction"in t)return q(t,b??{});throw new m("raster-function-helper","unsupported raster function json.");};K.getRasterValues=f;K.getSupportedFunctions=function(){const t=new Set;z.forEach((b,l)=>t.add(l));return t};K.register=function(t,b,l=["raster"],g=""){z.set(t,{desc:g,ctor:b,rasterArgumentNames:l})};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/AspectFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./AspectFunctionArguments ./BaseRasterFunction ./surfaceUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="Aspect";k.functionArguments=null;k.rasterArgumentNames=["raster"];k.isGCS=!1;return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){var k=this.sourceRasterInfos[0];this.isGCS=k.spatialReference.isGeographic;this.outputPixelType=this._getOutputPixelType("f32");k=k.clone();k.pixelType=this.outputPixelType;k.statistics=null;k.histograms=null;this.rasterInfo=k;return{success:!0}};
J._processPixels=function(k){const d=k.pixelBlocks?.[0];if(R.isNone(d))return null;({extent:k}=k);return M.aspect(d,{resolution:k?{x:k.width/d.width,y:k.height/d.height}:{x:1,y:1}})};return p}(L);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:S,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);m.__decorate([F.property({json:{write:!0}})],
n.prototype,"isGCS",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.AspectFunction")],n)})},"esri/layers/support/rasterFunctions/AspectFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),function(K,m,R,F,
n,N,aa,S,L){var M;R=M=function(y){function p(){return y.apply(this,arguments)||this}K._inheritsLoose(p,y);p.prototype.clone=function(){return new M({raster:this.raster})};return p}(L);return R=M=m.__decorate([S.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],R)})},"esri/layers/support/rasterFunctions/BaseFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(K,m,R,F,n,N,aa){R=function(S){function L(){var M=S.apply(this,arguments)||this;M.raster=void 0;return M}K._inheritsLoose(L,S);return L}(R.JSONSupport);m.__decorate([F.property({json:{write:!0}})],R.prototype,"raster",void 0);return R=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.AspectFunctionArguments")],R)})},"esri/layers/support/rasterFunctions/BaseRasterFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass".split(" "),
function(K,m,R,F,n,N,aa,S){R=function(L){function M(){var p=L.apply(this,arguments)||this;p.functionArguments=null;p.readingBufferSize=0;return p}K._inheritsLoose(M,L);var y=M.prototype;y.bind=function(p,J=!1){const k=this._getRasterValues();for(let f=0;f<k.length;f++){var d=k[f];if(d&&"object"===typeof d&&"bind"in d&&(!d.rasterInfo||J)&&(d=d.bind(p,J),!d.success))return d}return!this.rasterInfo||J?(this.sourceRasterInfos=this._getSourceRasterInfos(p),this._bindSourceRasters()):{success:!0}};y.process=
function(p){const J=this._getRasterValues().map(k=>this._readRasterValue(k,p));return this._processPixels({...p,pixelBlocks:J})};y.getPrimaryRasters=function(){const p=[],J=[];this._getPrimaryRasters(this,p,J);return{rasters:p,rasterIds:J}};y._getOutputPixelType=function(p){return"unknown"===this.outputPixelType?p:this.outputPixelType??p};y._getRasterValues=function(){const {rasterArgumentNames:p}=this;return"rasters"===p[0]&&Array.isArray(this.functionArguments.rasters)?this.functionArguments.rasters:
p.map(J=>this.functionArguments[J])};y._getSourceRasterInfos=function(p){const J=this._getRasterValues(),{rasterInfos:k,rasterIds:d}=p;return J.map(f=>f&&"object"===typeof f&&"bind"in f&&f.rasterInfo?f.rasterInfo:"string"===typeof f&&d.includes(f)?k[d.indexOf(f)]:k[0])};y._getPrimaryRasterId=function(p){return p?.url};y._getPrimaryRasters=function(p,J=[],k=[]){for(let f=0;f<p.sourceRasters.length;f++){var d=p.sourceRasters[f];if("number"!==typeof d)if("bind"in d)this._getPrimaryRasters(d,J,k);else{const q=
this._getPrimaryRasterId(d);null==q||k.includes(q)||(this.mainPrimaryRasterId===q?(J.unshift(d),k.unshift(q)):(J.push(d),k.push(q)))}}};y._readRasterValue=function(p,J){var {primaryPixelBlocks:k}=J;if(F.isNone(p)||"$$"===p)return p=k[0],F.isNone(p)?null:p.clone();if("string"===typeof p)return p=J.primaryRasterIds.indexOf(p),-1===p?null:k[p];if("number"===typeof p){k=k[0];if(F.isNone(k))return null;const d=new Float32Array(k.width*k.height);d.fill(p);p=k.clone();p.pixels=p.pixels.map(()=>d);return p}return p.process(J)};
return M}(R.JSONSupport);m.__decorate([n.property({json:{write:!0}})],R.prototype,"functionName",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"functionArguments",void 0);m.__decorate([n.property()],R.prototype,"rasterArgumentNames",void 0);m.__decorate([n.property({json:{write:!0}}),aa.cast(L=>L?.toLowerCase())],R.prototype,"outputPixelType",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"mainPrimaryRasterId",void 0);m.__decorate([n.property()],R.prototype,"sourceRasters",
void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"sourceRasterInfos",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"rasterInfo",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"readingBufferSize",void 0);return R=m.__decorate([S.subclass("esri.layers.support.rasterFunctions.BaseRasterFunction")],R)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,m,
R,F){function n(N){let {altitude:aa,azimuth:S}=N;const {hillshadeType:L,pixelSizePower:M=1,pixelSizeFactor:y=1,scalingType:p,isGCS:J,resolution:k}=N;var d="multi-directional"===L?2*N.zFactor:N.zFactor;const {x:f,y:q}=k;N=d/(8*f);var z=d/(8*q);J&&.001<d&&(N/=111E3,z/=111E3);"adjusted"===p&&(J?(N=111E3*f,z=111E3*q,N=(d+N**M*y)/(8*N),z=(d+z**M*y)/(8*z)):(N=(d+f**M*y)/(8*f),z=(d+q**M*y)/(8*q)));var t=(90-aa)*Math.PI/180;d=Math.cos(t);let b=(360-S+90)*Math.PI/180,l=Math.sin(t)*Math.cos(b);t=Math.sin(t)*
Math.sin(b);const g=[315,270,225,360,180,0],u=[60,60,60,60,60,90];var h=new Float32Array([3,5,3,2,1,4]);const c=h.reduce((E,P)=>E+P);h=h.map(E=>E/c);const r="multi-directional"===L?g.length:1,v=new Float32Array(6),x=new Float32Array(6),A=new Float32Array(6);if("multi-directional"===L)for(let E=0;E<r;E++)aa=u[E],S=g[E],t=(90-aa)*Math.PI/180,d=Math.cos(t),b=(360-S+90)*Math.PI/180,l=Math.sin(t)*Math.cos(b),t=Math.sin(t)*Math.sin(b),v[E]=d,x[E]=l,A[E]=t;else v.fill(d),x.fill(l),A.fill(t);return{resolution:k,
factor:[N,z],sinZcosA:l,sinZsinA:t,cosZ:d,sinZcosAs:x,sinZsinAs:A,cosZs:v,weights:h,hillshadeType:["traditional","multi-directional"].indexOf(L)}}K.aspect=function(N,aa={}){if(!F.isValidPixelBlock(N))return N;const {width:S,height:L,mask:M}=N;var y=N.pixels[0];const p=new Uint8Array(S*L);m.isSome(M)&&p.set(M);const J=new Float32Array(S*L);var {resolution:k}=aa;aa=k?1/k.x:1;k=k?1/k.y:1;let d;let f,q,z,t;const b=m.isSome(M);for(let h=1;h<L-1;h++){const c=h*S;for(let r=1;r<S-1;r++)if(M&&!M[c+r])J[c+
r]=0;else{var l=0;if(b&&(l=M[c-S+r-1]+M[c-S+r]+M[c-S+r+1]+M[c+r-1]+M[c+r+1]+M[c+S+r-1]+M[c+S+r]+M[c+S+r+1],7>l)){J[c+r]=0;p[c+r]=0;continue}if(M&&7===l){l=M[c-S+r-1]?y[c-S+r-1]:y[c+r];var g=M[c-S+r]?y[c-S+r]:y[c+r];d=M[c-S+r+1]?y[c-S+r+1]:y[c+r];var u=M[c+r-1]?y[c+r-1]:y[c+r];f=M[c+r+1]?y[c+r+1]:y[c+r];q=M[c+S+r-1]?y[c+S+r-1]:y[c+r];z=M[c+S+r]?y[c+S+r]:y[c+r];t=M[c+S+r+1]?y[c+S+r+1]:y[c+r]}else l=y[c-S+r-1],g=y[c-S+r],d=y[c-S+r+1],u=y[c+r-1],f=y[c+r+1],q=y[c+S+r-1],z=y[c+S+r],t=y[c+S+r+1];u=(d+f+
f+t-(l+u+u+q))*aa;l=(q+z+z+t-(l+g+g+d))*k;g=-1;if(0!==u||0!==l)g=90-57.29578*Math.atan2(l,-u),0>g&&(g+=360),360===g?g=0:360<g&&(g%=360);J[c+r]=g}}for(y=0;y<L;y++)J[y*S]=J[y*S+1],J[(y+1)*S-1]=J[(y+1)*S-2];for(y=1;y<S-1;y++)J[y]=J[y+S],J[y+(L-1)*S]=J[y+(L-2)*S];return new R({width:S,height:L,pixels:[J],mask:M?p:null,pixelType:"f32",validPixelCount:N.validPixelCount,statistics:[{minValue:0,maxValue:360}]})};K.calculateHillshadeParams=n;K.hillshade=function(N,aa){if(!F.isValidPixelBlock(N))return N;const {width:S,
height:L,mask:M}=N,y=new Uint8Array(S*L);var p=1;if(m.isSome(M)){for(var J=0;J<M.length;J++)if(M[J]){p=M[J];break}y.set(M)}const {factor:k,sinZcosA:d,sinZsinA:f,cosZ:q,sinZcosAs:z,sinZsinAs:t,cosZs:b,weights:l}=n(aa),[g,u]=k;({hillshadeType:J}=aa);const h=N.pixels[0];aa=new Uint8Array(S*L);let c;const r=m.isSome(M);for(let X=1;X<L-1;X++){const G=X*S;for(let I=1;I<S-1;I++)if(M&&!M[G+I])aa[G+I]=0;else{var v=8;if(r&&(v=(M[G-S+I-1]+M[G-S+I]+M[G-S+I+1]+M[G+I-1]+M[G+I+1]+M[G+S+I-1]+M[G+S+I]+M[G+S+I+1])/
p,7>v)){aa[G+I]=0;y[G+I]=0;continue}if(M&&7===v){var x=M[G-S+I-1]?h[G-S+I-1]:h[G+I];var A=M[G-S+I]?h[G-S+I]:h[G+I];var E=M[G-S+I+1]?h[G-S+I+1]:h[G+I];v=M[G+I-1]?h[G+I-1]:h[G+I];c=M[G+I+1]?h[G+I+1]:h[G+I];var P=M[G+S+I-1]?h[G+S+I-1]:h[G+I];var T=M[G+S+I]?h[G+S+I]:h[G+I];var C=M[G+S+I+1]?h[G+S+I+1]:h[G+I]}else x=h[G-S+I-1],A=h[G-S+I],E=h[G-S+I+1],v=h[G+I-1],c=h[G+I+1],P=h[G+S+I-1],T=h[G+S+I],C=h[G+S+I+1];v=(E+c+c+C-(x+v+v+P))*g;x=(P+T+T+C-(x+A+A+E))*u;A=Math.sqrt(1+v*v+x*x);E=0;if("traditional"===J)v=
255*(q+f*x-d*v)/A,0>v&&(v=0),E=v;else for(P=t.length,T=0;T<P;T++)C=255*(b[T]+t[T]*x-z[T]*v)/A,0>C&&(C=0),E+=C*l[T];aa[G+I]=E&255}}for(p=0;p<L;p++)aa[p*S]=aa[p*S+1],aa[(p+1)*S-1]=aa[(p+1)*S-2];for(p=1;p<S-1;p++)aa[p]=aa[p+S],aa[p+(L-1)*S]=aa[p+(L-2)*S];return new R({width:S,height:L,pixels:[aa],mask:M?y:null,pixelType:"u8",validPixelCount:N.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};K.slope=function(N,aa){if(!F.isValidPixelBlock(N))return N;var S=aa.zFactor,L=aa.pixelSizePower??1,M=
aa.pixelSizeFactor??1;const y=aa.slopeType;var p=aa.isGCS;const {width:J,height:k,mask:d}=N;var f=N.pixels[0];const q=new Uint8Array(J*k);let z=1;if(m.isSome(d)){for(var t=0;t<d.length;t++)if(d[t]){z=d[t];break}q.set(d)}t=new Float32Array(J*k);const {x:b,y:l}=aa.resolution;aa=S/(8*b);var g=S/(8*l);p&&1E-4>Math.abs(S-1)&&(aa/=111E3,g/=111E3);"adjusted"===y&&(p?(aa=111E3*b,g=111E3*l,aa=(S+aa**L*M)/(8*aa),g=(S+g**L*M)/(8*g)):(aa=(S+b**L*M)/(8*b),g=(S+l**L*M)/(8*l)));let u,h;let c,r,v,x;S=m.isSome(d);
for(L=1;L<k-1;L++)for(M=L*J,p=1;p<J-1;p++)if(d&&!d[M+p])t[M+p]=0;else{var A=0;if(S&&(A=(d[M-J+p-1]+d[M-J+p]+d[M-J+p+1]+d[M+p-1]+d[M+p+1]+d[M+J+p-1]+d[M+J+p]+d[M+J+p+1])/z,7>A)){t[M+p]=0;q[M+p]=0;continue}if(d&&7===A){A=d[M-J+p-1]?f[M-J+p-1]:f[M+p];u=d[M-J+p]?f[M-J+p]:f[M+p];h=d[M-J+p+1]?f[M-J+p+1]:f[M+p];var E=d[M+p-1]?f[M+p-1]:f[M+p];c=d[M+p+1]?f[M+p+1]:f[M+p];r=d[M+J+p-1]?f[M+J+p-1]:f[M+p];v=d[M+J+p]?f[M+J+p]:f[M+p];x=d[M+J+p+1]?f[M+J+p+1]:f[M+p]}else A=f[M-J+p-1],u=f[M-J+p],h=f[M-J+p+1],E=f[M+
p-1],c=f[M+p+1],r=f[M+J+p-1],v=f[M+J+p],x=f[M+J+p+1];E=(h+c+c+x-(A+E+E+r))*aa;A=(r+v+v+x-(A+u+u+h))*g;A=Math.sqrt(E*E+A*A);t[M+p]="percent-rise"===y?100*A:57.2957795*Math.atan(A)}for(f=0;f<k;f++)t[f*J]=t[f*J+1],t[(f+1)*J-1]=t[(f+1)*J-2];for(f=1;f<J-1;f++)t[f]=t[f+J],t[f+(k-1)*J]=t[f+(k-2)*J];return new R({width:J,height:k,pixels:[t],mask:d?q:null,pixelType:"f32",validPixelCount:N.validPixelCount,statistics:[{minValue:0,maxValue:"percent-rise"===y?100:360}]})};K.tintHillshade=function(N,aa,S,L){if(F.isValidPixelBlock(N)&&
F.isValidPixelBlock(aa)){var {min:M,max:y}=L;L=N.pixels[0];var {pixels:p,mask:J}=aa;aa=p[0];var k=255.00001/(y-M),d=new Uint8ClampedArray(aa.length),f=new Uint8ClampedArray(aa.length),q=new Uint8ClampedArray(aa.length),z=S.length-1;for(let l=0;l<aa.length;l++){if(J&&0===J[l])continue;var t=Math.floor((aa[l]-M)*k);const [g,u]=S[0>t?0:t>z?z:t];var b=L[l];t=b*u;const h=t*(1-Math.abs(g%2-1));b-=t;switch(Math.floor(g)){case 0:d[l]=t+b;f[l]=h+b;q[l]=b;break;case 1:d[l]=h+b;f[l]=t+b;q[l]=b;break;case 2:d[l]=
b;f[l]=t+b;q[l]=h+b;break;case 3:d[l]=b;f[l]=h+b;q[l]=t+b;break;case 4:d[l]=h+b;f[l]=b;q[l]=t+b;break;case 5:case 6:d[l]=t+b,f[l]=b,q[l]=h+b}}N.pixels=[d,f,q];N.updateStatistics()}};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/BandArithmeticFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BandArithmeticFunctionArguments ./bandIndexUtils ./BaseRasterFunction".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="BandArithmetic";k.functionArguments=null;k.rasterArgumentNames=["raster"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const k=this.sourceRasterInfos[0],d=k.clone();d.pixelType=this.outputPixelType;d.statistics=null;d.histograms=null;d.bandCount="sultan"===this.functionArguments.method?k.bandCount:1;this.rasterInfo=
d;return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k))return k;const {method:d,bandIndexes:f}=this.functionArguments,q=f.split(" ").map(z=>parseFloat(z));return L.calculateBandIndex(k,{method:d,bandIndexes:q,equation:f})};return p}(M);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:S,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],
n.prototype,"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunction")],n)})},"esri/layers/support/rasterFunctions/BandArithmeticFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S,L){var M;n=M=function(y){function p(){var J=y.apply(this,arguments)||this;J.method="custom";return J}K._inheritsLoose(p,y);p.prototype.clone=function(){return new M({method:this.method,bandIndexes:this.bandIndexes,raster:R.clone(this.raster)})};return p}(L);m.__decorate([F.property({json:{type:String,write:!0}})],n.prototype,"bandIndexes",void 0);m.__decorate([N.enumeration(S.bandIndexMethodMap)],n.prototype,"method",void 0);return n=M=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.BandArithmeticFunctionArguments")],
n)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(K,m,R){K.enumeration=function(F,n={}){F=F instanceof m.JSONMap?F:new m.JSONMap(F,n);F={type:n?.ignoreUnknown??!0?F.apiValues:String,json:{type:F.jsonValues,read:n?.readOnly?!1:{reader:F.read},write:{writer:F.write}}};void 0!==n?.readOnly&&(F.readOnly=!!n.readOnly);void 0!==n?.default&&(F.json.default=n.default);void 0!==n?.name&&(F.json.name=n.name);return R.property(F)};Object.defineProperties(K,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/bandIndexUtils":function(){define("exports ../../../core/jsonMap ../../../core/maybe ../PixelBlock ./customBandIndexUtils ./pixelUtils".split(" "),function(K,m,R,F,n,N){function aa(u,h,c){const r=c.length,v=new Float32Array(r);for(let x=0;x<r;x++)if(null==u||u[x]){const A=h[x],E=c[x],P=A+E;P&&(v[x]=(A-E)/P)}return[v]}function S(u,h,c){const r=c.length,v=new Float32Array(r);for(let x=0;x<r;x++)if(null==
u||u[x]){const A=h[x],E=c[x];E&&(v[x]=A/E)}return[v]}function L(u,h,c){const r=h.length,v=new Float32Array(r);for(let x=0;x<r;x++)if(null==u||u[x]){const A=h[x],E=c[x];E&&(v[x]=A/E-1)}return[v]}function M(u,h,c,r){const v=c.length,x=new Float32Array(v);for(let A=0;A<v;A++)if(null==u||u[A]){const E=c[A],P=h[A],T=P+E+r;T&&(x[A]=(P-E)/T*(1+r))}return[x]}function y(u,h,c,r,v,x){const A=c.length,E=new Float32Array(A);x=-v*r+x*(1+r*r);for(let P=0;P<A;P++)if(null==u||u[P]){const T=c[P],C=h[P],X=v*C+T+x;
X&&(E[P]=r*(C-r*T-v)/X)}return[E]}function p(u,h,c){const r=c.length,v=new Float32Array(r);for(let x=0;x<r;x++)if(null==u||u[x]){const A=h[x];v[x]=.5*(2*(A+1)-Math.sqrt((2*A+1)**2-8*(A-c[x])))}return[v]}function J(u,h,c){const r=c.length,v=new Float32Array(r);for(let A=0;A<r;A++)if(null==u||u[A]){const E=c[A];var x=h[A];1!==E&&(x=(2*(x*x-E*E)+1.5*x+.5*E)/(x+E+.5),v[A]=x*(1-.25*x)-(E-.125)/(1-E))}return[v]}function k(u,h,c,r,v){const x=c.length,A=new Float32Array(x),E=Math.sqrt(1+r*r);for(let P=0;P<
x;P++)if(null==u||u[P])A[P]=(h[P]-r*c[P]-v)/E;return[A]}function d(u,h){const [c,r,v,x,A,E]=h;h=c.length;const P=new Float32Array(h);for(let T=0;T<h;T++)if(null==u||u[T])P[T]=-.2848*c[T]-.2435*r[T]-.5436*v[T]+.7243*x[T]+.084*A[T]-1.18*E[T];return[P]}function f(u,h){const [c,,r,v,x,A]=h;h=c.length;const E=new Float32Array(h),P=new Float32Array(h),T=new Float32Array(h);for(let C=0;C<h;C++)if(null==u||u[C])E[C]=A[C]?x[C]/A[C]*100:0,P[C]=c[C]?x[C]/c[C]*100:0,T[C]=v[C]?r[C]/v[C]*(x[C]/v[C])*100:0;return[E,
P,T]}function q(u,h){const [c,r,v]=h;h=c.length;const x=new Float32Array(h);for(let A=0;A<h;A++)if(null==u||u[A])for(A=0;A<h;A++){const E=c[A],P=r[A],T=P+E-v[A];T&&(x[A]=(P-E)/T)}return[x]}function z(u,h){const [c,r,v]=h;h=c.length;const x=new Float32Array(h);for(let A=0;A<h;A++)if(null==u||u[A])for(A=0;A<h;A++){const E=c[A],P=r[A],T=v[A];x[A]=1.5*(1.2*(E-T)-2.5*(P-T))*Math.sqrt((2*E+1)**2-6*E-5*Math.sqrt(P)-.5)}return[x]}function t(u,h){const [c,r,v]=h;h=c.length;const x=new Float32Array(h);for(let A=
0;A<h;A++)if(null==u||u[A])for(A=0;A<h;A++){const E=c[A];x[A]=100*(E-r[A])-10*(E-v[A])}return[x]}function b(u,h){const [c,r,v]=h;h=c.length;const x=new Float32Array(h);for(let A=0;A<h;A++)if(null==u||u[A])for(A=0;A<h;A++){const E=c[A],P=r[A],T=E+6*P-7.5*v[A]+1;T&&(x[A]=2.5*(E-P)/T)}return[x]}function l(u,h,c=.5){const [r,v,x]=h;h=v.length;const A=new Float32Array(h);for(let E=0;E<h;E++)if(null==u||u[E])for(E=0;E<h;E++){const P=r[E],T=v[E],C=x[E],X=P+c*T+(1-c)*C;X&&(A[E]=(P-c*T-(1-c)*C)/X)}return[A]}
function g(u,h,c){const r=c.length,v=new Float32Array(r);for(let x=0;x<r;x++)if(null==u||u[x])for(x=0;x<r;x++){const A=(.1-h[x])**2+(.06-c[x])**2;A&&(v[x]=1/A)}return[v]}m=new m.JSONMap({0:"custom",1:"ndvi",2:"savi",3:"tsavi",4:"msavi",5:"gemi",6:"pvi",7:"gvitm",8:"sultan",9:"vari",10:"gndvi",11:"sr",12:"ndvi-re",13:"sr-re",14:"mtvi2",15:"rtvi-core",16:"ci-re",17:"ci-g",18:"ndwi",19:"evi",20:"iron-oxide",21:"ferrous-minerals",22:"clay-minerals",23:"wndwi",24:"bai",25:"nbr",26:"ndbi",27:"ndmi",28:"ndsi",
29:"mndwi"},{useNumericKeys:!0});K.bandIndexMethodMap=m;K.calculateBandIndex=function(u,h){if(!N.isValidPixelBlock(u))return u;const {equation:c,method:r}=h;h=h.bandIndexes.map(E=>E-1);const {pixels:v,mask:x}=u;switch(r){case "gndvi":case "nbr":case "ndbi":case "ndvi":case "ndvi-re":case "ndsi":case "ndmi":case "mndwi":h=aa(x,v[h[0]],v[h[1]]);break;case "ndwi":h=aa(x,v[h[1]],v[h[0]]);break;case "sr":case "sr-re":case "iron-oxide":case "ferrous-minerals":case "clay-minerals":h=S(x,v[h[0]],v[h[1]]);
break;case "ci-g":case "ci-re":h=L(x,v[h[0]],v[h[1]]);break;case "savi":h=M(x,v[h[0]],v[h[1]],h[2]+1);break;case "tsavi":h=y(x,v[h[0]],v[h[1]],h[2]+1,h[3]+1,h[4]+1);break;case "msavi":h=p(x,v[h[0]],v[h[1]]);break;case "gemi":h=J(x,v[h[0]],v[h[1]]);break;case "pvi":h=k(x,v[h[0]],v[h[1]],h[2]+1,h[3]+1);break;case "gvitm":h=d(x,[v[h[0]],v[h[1]],v[h[2]],v[h[3]],v[h[4]],v[h[5]]]);break;case "sultan":h=f(x,[v[h[0]],v[h[1]],v[h[2]],v[h[3]],v[h[4]],v[h[5]]]);break;case "vari":h=q(x,[v[h[0]],v[h[1]],v[h[2]]]);
break;case "mtvi2":h=z(x,[v[h[0]],v[h[1]],v[h[2]]]);break;case "rtvi-core":h=t(x,[v[h[0]],v[h[1]],v[h[2]]]);break;case "evi":h=b(x,[v[h[0]],v[h[1]],v[h[2]]]);break;case "wndwi":h=l(x,[v[h[0]],v[h[1]],v[h[2]]],h[3]??.5);break;case "bai":h=g(x,v[h[0]],v[h[1]]);break;case "custom":h=n.calculateCustomBandIndex(x,v,c);break;default:return u}const A=R.isSome(x)?new Uint8Array(x.length):null;R.isSome(x)&&R.isSome(A)&&A.set(x);u=new F({width:u.width,height:u.height,pixelType:"f32",pixels:h,mask:A});u.updateStatistics();
return u};K.calculateNDVI=function(u,h,c,r){const {mask:v,pixels:x,width:A,height:E}=u;u=x[c];h=x[h];c=h.length;const P=r?new Uint8Array(c):new Float32Array(c),T=r?100:1,C=r?100:0;for(let X=0;X<c;X++)if(null==v||v[X]){const G=u[X],I=h[X],ja=G+I;ja&&(P[X]=(G-I)/ja*T+C)}r=new F({width:A,height:E,mask:v,pixelType:r?"u8":"f32",pixels:[P]});r.updateStatistics();return r};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/customBandIndexUtils":function(){define(["exports",
"../../../core/has"],function(K,m){const R=new Set("+-*/()".split(""));K.calculateCustomBandIndex=function(F,n,N){N=N.replace(/ /g,"");N.startsWith("-")&&(N="0"+N);N.startsWith("+")&&(N=N.slice(1,N.length));N=N.split("");var aa=[],S=[],L="";for(let J=0;J<N.length;J++){const k=N[J];R.has(k)?(""!==L&&S.push(parseFloat(L)),aa.push(k),L=""):"b"===k.toLowerCase()?(J++,L=k.concat(N[J]),S.push(n[parseInt(L[1],10)-1]),L=""):(L=L.concat(k),J===N.length-1&&S.push(parseFloat(L)))}let {ops:M,nums:y}={ops:aa,
nums:S};if(0===M.length){F=1===y.length?y[0]:n[0];if(F instanceof Float32Array)return[F];var p=new Float32Array(n[0].length);"number"===typeof F?p.fill(F):p.set(F);return[p]}for(;0<M.length;){p=M;if(1===p.length)p={opIndex:0,numIndex:0};else{aa=N=0;for(n=0;n<p.length;n++)if("("===p[n])N=n;else if(")"===p[n]){aa=n;break}S=0===aa?p:p.slice(N+1,aa);n=-1;for(L=0;L<S.length;L++)if("*"===S[L]||"/"===S[L]){n=L;break}if(!(-1<n))for(L=0;L<S.length;L++)if("+"===S[L]||"-"===S[L]){n=L;break}0<aa&&(n+=N+1);N=
0;for(aa=0;aa<n;aa++)"("===p[aa]&&N++;p={opIndex:n,numIndex:n-N}}const {numIndex:J,opIndex:k}=p;aa=void 0;p=F;L=M[k];n=y[J];N=y[J+1];if("number"===typeof n&&"number"===typeof N)p=n+N;else{"number"===typeof n?(aa=N.length,S=n,n=new Float32Array(aa),n.fill(S)):(aa=n.length,N.constructor===Number&&(S=N,N=new Float32Array(aa),N.fill(S)));S=new Float32Array(aa);switch(L){case "+":for(L=0;L<aa;L++)if(null==p||p[L])S[L]=n[L]+N[L];break;case "-":for(L=0;L<aa;L++)if(null==p||p[L])S[L]=n[L]-N[L];break;case "*":for(L=
0;L<aa;L++)if(null==p||p[L])S[L]=n[L]*N[L];break;case "/":for(L=0;L<aa;L++)(null==p||p[L])&&N[L]&&(S[L]=n[L]/N[L]);break;case "(":case ")":throw"encountered error with custom band index equation";}p=S}if(1===M.length)break;else{n=M;n.splice(k,1);aa=N=0;do{aa=N=0;for(S=0;S<n.length;S++)if("("===n[S])N=S;else if(")"===n[S]){aa=S;break}aa===N+1&&n.splice(N,2)}while(aa===N+1);M=n;y.splice(J,2,p)}}return[p]};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/ColormapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ColormapFunctionArguments ../../../renderers/support/colorRampUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L){F=function(M){function y(){var J=M.apply(this,arguments)||this;J.functionName="Colormap";J.functionArguments=null;J.rasterArgumentNames=["raster"];return J}K._inheritsLoose(y,M);var p=y.prototype;p._bindSourceRasters=function(){var J=this.sourceRasterInfos[0];if(1<J.bandCount)return{success:!1,error:"colormap-function: source data must be single band"};let {colormap:k,colorRamp:d}=this.functionArguments;k?.length||d&&(k=L.convertColorRampToColors(d,256,!0));if(!k?.length)return{success:!1,
error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");J=J.clone();J.pixelType=this.outputPixelType;J.colormap=k;this.rasterInfo=J;return{success:!0}};p._processPixels=function(J){return J.pixelBlocks?.[0]};return y}(aa);m.__decorate([R.property({json:{write:!0,name:"rasterFunction"}})],F.prototype,"functionName",void 0);m.__decorate([R.property({type:S,json:{write:!0,name:"rasterFunctionArguments"}})],F.prototype,"functionArguments",void 0);m.__decorate([R.property()],
F.prototype,"rasterArgumentNames",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"indexedColormap",void 0);return F=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],F)})},"esri/layers/support/rasterFunctions/ColormapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ../../../rest/support/colorRamps".split(" "),
function(K,m,R,F,n,N,aa,S,L){var M;n=M=function(y){function p(){return y.apply(this,arguments)||this}K._inheritsLoose(p,y);var J=p.prototype;J.readColorRamp=function(k){return L.fromJSON(k)};J.clone=function(){return new M({colormap:R.clone(this.colormap),colormapName:this.colormapName,colorRamp:this.colorRamp?.clone(),colorRampName:this.colorRampName})};return p}(S);m.__decorate([F.property({type:[[Number]],json:{write:!0}})],n.prototype,"colormap",void 0);m.__decorate([F.property({type:String,json:{write:!0}})],
n.prototype,"colormapName",void 0);m.__decorate([F.property({types:L.types,json:{write:!0}})],n.prototype,"colorRamp",void 0);m.__decorate([N.reader("colorRamp")],n.prototype,"readColorRamp",null);m.__decorate([F.property({type:String,json:{write:!0}})],n.prototype,"colorRampName",void 0);return n=M=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.ColormapFunctionArguments")],n)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],
function(K,m,R,F){R={key:"type",base:R,typeMap:{algorithmic:m,multipart:F}};K.fromJSON=function(n){return n&&n.type?"algorithmic"===n.type?m.fromJSON(n):"multipart"===n.type?F.fromJSON(n):null:null};K.types=R;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),
function(K,m,R,F,n,N,aa,S,L){var M;L=M=function(y){function p(J){J=y.call(this,J)||this;J.algorithm=null;J.fromColor=null;J.toColor=null;J.type="algorithmic";return J}K._inheritsLoose(p,y);p.prototype.clone=function(){return new M({fromColor:F.clone(this.fromColor),toColor:F.clone(this.toColor),algorithm:this.algorithm})};return p}(L);m.__decorate([aa.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],L.prototype,"algorithm",void 0);m.__decorate([n.property({type:R,
json:{type:[N.Integer],write:!0}})],L.prototype,"fromColor",void 0);m.__decorate([n.property({type:R,json:{type:[N.Integer],write:!0}})],L.prototype,"toColor",void 0);m.__decorate([n.property({type:["algorithmic"]})],L.prototype,"type",void 0);return L=M=m.__decorate([S.subclass("esri.rest.support.AlgorithmicColorRamp")],L)})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(K,m,R,F,n,N,aa){R=function(S){function L(M){M=S.call(this,M)||this;M.type=null;return M}K._inheritsLoose(L,S);return L}(R.JSONSupport);m.__decorate([F.property({readOnly:!0,json:{read:!1,write:!0}})],R.prototype,"type",void 0);return R=m.__decorate([aa.subclass("esri.rest.support.ColorRamp")],R)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(K,m,R,F,n,N,aa,S){var L;n=L=function(M){function y(p){p=M.call(this,p)||this;p.colorRamps=null;p.type="multipart";return p}K._inheritsLoose(y,M);y.prototype.clone=function(){return new L({colorRamps:R.clone(this.colorRamps)})};return y}(S);m.__decorate([F.property({type:[aa],json:{write:!0}})],n.prototype,"colorRamps",void 0);m.__decorate([F.property({type:["multipart"]})],n.prototype,"type",void 0);return n=L=m.__decorate([N.subclass("esri.rest.support.MultipartColorRamp")],n)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils"],function(K,m,R){function F(d,f){if(!d||!f||d.length!==f.length)return!1;for(let q=0;q<d.length;q++)if(d[q]>f[q]+2||d[q]<f[q]-2)return!1;return!0}function n(d,f){if(d){f=f?f:J;var q=null;"algorithmic"===d.type?f.some(z=>{if(F(d.fromColor.toRgb(),z.fromColor)&&F(d.toColor.toRgb(),z.toColor))return q=z.id,!0}):"multipart"===d.type&&f.some(z=>{const t=d.colorRamps,b=z.colorRamps;if(t&&b&&t.length===b.length&&!b.some((l,g)=>{if(!F(t[g].fromColor.toRgb(),(new m(l.fromColor)).toRgb())||
!F(t[g].toColor.toRgb(),(new m(l.toColor)).toRgb()))return!0})){if(q)return!0;q=z.id}});return q}}function N(d){return(d=n(d))?k[d]:null}function aa(d){d=d||{};const f=d.numColors||256;return{...d,numColors:f,distanceOffset:d.distanceOffset||0,interpolateAlpha:!!d.interpolateAlpha,distanceInterval:d.distanceInterval||1/(f-1),isCustomInterval:null!=d.isCustomInterval?d.isCustomInterval:null!==d.distanceInterval&&d.distanceInterval!==1/(f-1),weights:d.weights}}function S(d,f){let {fromColor:q,toColor:z}=
d;3===q.length&&(q=q.concat([255]));3===z.length&&(z=z.concat([255]));var t=d.algorithm||"esriCIELabAlgorithm";const {numColors:b,distanceOffset:l,isCustomInterval:g,interpolateAlpha:u}=aa(f);if(1===b&&0===l)return[q];if(2===b&&0===l&&!g)return[q,z];var h={r:q[0],g:q[1],b:q[2]};d={r:z[0],g:z[1],b:z[2]};if("esriCIELabAlgorithm"===t){t=R.toLAB(h);d=R.toLAB(d);const {numColors:x,distanceOffset:A,distanceInterval:E,isCustomInterval:P}=aa(f);let {l:T,a:C,b:X}=t;t=(d.l-T)*E;h=(d.a-C)*E;f=(d.b-X)*E;var c=
[];if(A){var r=A/E;T+=r*t;C+=r*h;X+=r*f}for(r=0;r<x-1;r++)c.push({l:T,a:C,b:X}),T+=t,C+=h,X+=f;c.push(P?{l:T,a:C,b:X}:d);d=c}else if("esriHSVAlgorithm"===t){t=R.toHSV(h);d=R.toHSV(d);const {numColors:x,distanceOffset:A,distanceInterval:E,isCustomInterval:P}=aa(f);c=0===t.s;r=0===d.s;h=t.h;f=d.h;c&&!r?h=f:r&&!c&&(d={...d,h},f=h);c=Math.abs(f-h);180>c?f=(f-h)*E:(c=360-c,f=h>f?c*E:-c*E);c=(d.s-t.s)*E;r=(d.v-t.v)*E;let {s:T,v:C}=t;t=h;A&&(h=A/E,t=(t+h*f+360)%360,T+=h*c,C+=h*r);h=[];for(var v=0;v<x-1;v++)h.push({h:t,
s:T,v:C}),t=(t+f+360)%360,T+=c,C+=r;h.push(P?{h:t,s:T,v:C}:d);d=h}else{h=R.toLCH(h);d=R.toLCH(d);const {numColors:x,distanceOffset:A,distanceInterval:E,isCustomInterval:P}=aa(f);f=h.h;c=d.h;t=2*Math.PI;f<=c?(r=c-f,f=c-f-t,f=Math.abs(f)<Math.abs(r)?f:r):(r=c+t-f,f=c-f,f=Math.abs(f)<Math.abs(r)?f:r);f*=E;c=(d.l-h.l)*E;r=(d.c-h.c)*E;let {l:T,c:C,h:X}=h;A&&(h=A/E,T+=h*c,C+=h*r,X=(X+h*f+t)%t);h=[];for(v=0;v<x-1;v++)h.push({l:T,c:C,h:X}),T+=c,C+=r,X=(X+f+t)%t;h.push(P?{l:T,c:C,h:X}:d);d=h}t=[];h=q[3]??
255;f=((z[3]??255)-h)/(b-1);for(c=0;c<b;c++){const {r:x,g:A,b:E}=R.toRGB(d[c]);t.push([x,A,E,u?Math.round(h+f*c):255])}return t}function L(d,f){const {numColors:q,interpolateAlpha:z}=aa(f);f=f?.weights;({colorRamps:d}=d);if(f){const c=f.reduce((r,v)=>r+v);f=f.map(r=>r/c)}else{f=[];for(var t=0;t<d.length;t++)f[t]=1/d.length}t=[];let b=0,l=0;const g=1/(q-1);let u=!1;for(let c=0;c<d.length;c++){var h=u?0:b*g-l;let r=c===d.length-1?q-1-b:(f[c]-h)/g;u=Math.ceil(r)===r;r=Math.ceil(r);0!==r&&(h/=f[c],h=
S(d[c],{numColors:r,interpolateAlpha:z,distanceOffset:h,distanceInterval:g/f[c]}),b+=h.length,t.push(...h),l+=f[c])}f=[...d[d.length-1].toColor];3===f.length&&f.push(255);t.push(f);return t}function M(d,f=256,q=!1){d="toJSON"in d?d.toJSON():d;f={numColors:f,interpolateAlpha:q};return"multipart"===d.type?L(d,f):S(d,f)}function y(d){if(d)return{Algorithm:d.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:p(d.fromColor),ToColor:p(d.toColor)}}function p(d){d=R.toHSV(d);return{type:"HsvColor",
Hue:d.h,Saturation:d.s,Value:d.v,AlphaValue:255}}const J=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,
45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",
fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,
255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,
204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,
255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,
137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",
colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,
225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,
13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,
153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],
toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",
colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",
fromColor:[215,240,175],toColor:[96,107,45]}],k={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",
coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",
greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",
prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",
redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",
temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};K.PREDEFINED_COLOR_RAMP_NAME_MAP=k;K.PREDEFINED_JSON_COLOR_RAMPS=J;K.convertColorRampToColormap=function(d,f=256,q=!1){d=M(d,f,q);d.forEach((z,t)=>{z.unshift(t);
q||z.pop()});return d};K.convertColorRampToColors=M;K.getColorRampId=n;K.getColorRampName=N;K.getRFxArgColorRampValue=function(d){const f=N(d);if(d){if("algorithmic"===d.type)return{...y(d),Name:f};if(d.colorRamps)return d=d.colorRamps.map(y),{type:"MultiPartColorRamp",NumColorRamps:d.length,ArrayOfColorRamp:d,Name:f}}};K.rgbaConvertTo32Bit=function(d){d=d.reverse().map(f=>{f=f.toString(16);return 2>f.length?"0"+f:f});return 4294967295&Number.parseInt(d.join(""),16)};Object.defineProperties(K,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/CompositeBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./CompositeBandFunctionArguments ./pixelUtils".split(" "),function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=
y.apply(this,arguments)||this;k.functionName="CompositeBand";k.functionArguments=null;k.rasterArgumentNames=["rasters"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){const {sourceRasterInfos:k}=this;var d=k[0];this.outputPixelType=this._getOutputPixelType(d.pixelType);d=d.clone();d.attributeTable=null;d.colormap=null;d.pixelType=this.outputPixelType;d.bandCount=k.map(({bandCount:f})=>f).reduce((f,q)=>f+q);if(k.every(({statistics:f})=>R.isSome(f)&&f.length)){const f=
[];k.forEach(({statistics:q})=>R.isSome(q)&&f.push(...q));d.statistics=f}if(k.every(({histograms:f})=>R.isSome(f)&&f.length)){const f=[];k.forEach(({histograms:q})=>R.isSome(q)&&f.push(...q));d.histograms=f}this.rasterInfo=d;return{success:!0}};J._processPixels=function(k){({pixelBlocks:k}=k);return!k||R.isNone(k?.[0])?null:M.compositeBands(k)};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,
name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.CompositeBandFunction")],n)})},"esri/layers/support/rasterFunctions/CompositeBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S){var L;n=L=function(M){function y(){return M.apply(this,arguments)||this}K._inheritsLoose(y,M);var p=y.prototype;p.writeRasters=function(J,k){k.rasters=J.map(d=>"number"===typeof d||"string"===typeof d?d:d.toJSON())};p.clone=function(){return new L({rasters:R.clone(this.rasters)})};return y}(S);m.__decorate([F.property({json:{write:!0}})],n.prototype,"rasters",void 0);m.__decorate([aa.writer("rasters")],n.prototype,"writeRasters",null);return n=L=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.CompositeBandFunctionArguments")],
n)})},"esri/layers/support/rasterFunctions/ConvolutionFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ConvolutionFunctionArguments ./convolutionUtils".split(" "),function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||
this;k.functionName="Convolution";k.rasterArgumentNames=["raster"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){const {kernelType:k,rows:d,cols:f,kernel:q}=this.functionArguments;if(!M.convolutionKernels.has(k))return{success:!1,error:`convolution-function: the specified kernel type is not supported ${k}`};if(k!==M.ConvolutionKernel.None&&d*f!==q.length)return{success:!1,error:"convolution-function: the specified rows and cols do not match the length of the kernel"};
var z=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType(z.pixelType);z=z.clone();z.pixelType=this.outputPixelType;const t=[M.ConvolutionKernel.None,M.ConvolutionKernel.Sharpen,M.ConvolutionKernel.Sharpen2,M.ConvolutionKernel.Sharpening3x3,M.ConvolutionKernel.Sharpening5x5];"u8"===this.outputPixelType||t.includes(k)||(z.statistics=null,z.histograms=null);this.rasterInfo=z;return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k)||this.functionArguments.kernelType===
M.ConvolutionKernel.None)return k;let {kernel:d,rows:f,cols:q}=this.functionArguments;const z=d.reduce((t,b)=>t+b);0!==z&&1!==z&&(d=d.map(t=>t/z));return M.convolute(k,{kernel:d,rows:f,cols:q,outputPixelType:this.outputPixelType})};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,
"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.ConvolutionFunction")],n)})},"esri/layers/support/rasterFunctions/ConvolutionFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./convolutionUtils".split(" "),function(K,
m,R,F,n,N,aa,S){var L;n=L=function(M){function y(){var p=M.apply(this,arguments)||this;p.rows=3;p.cols=3;p.kernel=[0,0,0,0,1,0,0,0,0];return p}K._inheritsLoose(y,M);y.prototype.clone=function(){return new L({cols:this.cols,rows:this.rows,kernel:[...this.kernel],kernelType:this.kernelType,raster:R.clone(this.raster)})};K._createClass(y,[{key:"kernelType",set:function(p){this._set("kernelType",p);const J=S.convolutionKernels.get(p);J&&p!==S.ConvolutionKernel.UserDefined&&p!==S.ConvolutionKernel.None&&
(p=Math.sqrt(J.length),this._set("kernel",J),this._set("cols",p),this._set("rows",p))}}]);return y}(aa);m.__decorate([F.property({json:{type:Number,write:!0}})],n.prototype,"rows",void 0);m.__decorate([F.property({json:{type:Number,write:!0}})],n.prototype,"cols",void 0);m.__decorate([F.property({json:{name:"type",type:Number,write:!0}})],n.prototype,"kernelType",null);m.__decorate([F.property({json:{type:[Number],write:!0}})],n.prototype,"kernel",void 0);return n=L=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.ConvolutionFunctionArguments")],
n)})},"esri/layers/support/rasterFunctions/convolutionUtils":function(){define(["exports","../PixelBlock"],function(K,m){function R(L){const M=Math.sqrt(L.length),y=L.slice(0,M),p=[1];for(let J=1;J<M;J++){let k=null;for(let d=0;d<M;d++){const f=L[d+J*M],q=L[d];if(null==k)if(0===q){if(f)return{separable:!1,row:null,col:null}}else k=f/q;else if(f/q!==k)return{separable:!1,row:null,col:null}}if(null==k)return{separable:!1,row:null,col:null};p.push(k)}return{separable:!0,row:y,col:p}}function F(L,M,y,
p,J,k,d){const f=new Float32Array(M*y),q=k.length,z=d?0:p,t=d?p:0;d=d?1:M;for(let b=z;b<y-z;b++){const l=b*M;for(let g=t;g<M-t;g++){if(J&&!J[l+g])continue;let u=0;for(let h=0;h<q;h++)u+=L[l+g+(h-p)*d]*k[h];f[l+g]=u}}return f}function n(L,M,y=!0){const {pixels:p,width:J,height:k,pixelType:d,mask:f}=L;L=p.length;const q=[],{kernel:z,rows:t,cols:b}=M;for(M=0;M<L;M++){var l=p[M],g=J,u=k,h=t,c=b,r=f,v=z;const x=new Float32Array(g*u),A=Math.floor(h/2),E=Math.floor(c/2);for(let P=A;P<u-A;P++){const T=P*
g;for(let C=E;C<g-E;C++){if(r&&!r[T+C])continue;let X=0;for(let G=0;G<h;G++)for(let I=0;I<c;I++)X+=l[T+C+(G-A)*g+I-E]*v[G*c+I];x[T+C]=X}}l=x;y&&N(l,J,k,t,b);q.push(l)}return new m({width:J,height:k,pixelType:d,pixels:q,mask:f})}function N(L,M,y,p,J){p=Math.floor(p/2);for(var k=0;k<p;k++)for(var d=0;d<M;d++)L[k*M+d]=L[(J-1-k)*M+d],L[(y-1-k)*M+d]=L[(y-J+k)*M+d];p=Math.floor(J/2);for(k=0;k<y;k++){d=k*M;for(let f=0;f<p;f++)L[d+f]=L[d+J-1-f],L[d+M-f-1]=L[d+M+f-J]}}function aa(L,M,y,p=!0){const {pixels:J,
width:k,height:d,pixelType:f,mask:q}=L;L=J.length;const z=[],t=M.length,b=y.length,l=Math.floor(t/2),g=Math.floor(b/2);for(let u=0;u<L;u++){let h=F(J[u],k,d,l,q,M,!0);h=F(h,k,d,g,q,y,!1);p&&N(h,k,d,t,b);z.push(h)}return new m({width:k,height:d,pixelType:f,pixels:z,mask:q})}K.ConvolutionKernel=void 0;(function(L){L[L.UserDefined=-1]="UserDefined";L[L.LineDetectionHorizontal=0]="LineDetectionHorizontal";L[L.LineDetectionVertical=1]="LineDetectionVertical";L[L.LineDetectionLeftDiagonal=2]="LineDetectionLeftDiagonal";
L[L.LineDetectionRightDiagonal=3]="LineDetectionRightDiagonal";L[L.GradientNorth=4]="GradientNorth";L[L.GradientWest=5]="GradientWest";L[L.GradientEast=6]="GradientEast";L[L.GradientSouth=7]="GradientSouth";L[L.GradientNorthEast=8]="GradientNorthEast";L[L.GradientNorthWest=9]="GradientNorthWest";L[L.SmoothArithmeticMean=10]="SmoothArithmeticMean";L[L.Smoothing3x3=11]="Smoothing3x3";L[L.Smoothing5x5=12]="Smoothing5x5";L[L.Sharpening3x3=13]="Sharpening3x3";L[L.Sharpening5x5=14]="Sharpening5x5";L[L.Laplacian3x3=
15]="Laplacian3x3";L[L.Laplacian5x5=16]="Laplacian5x5";L[L.SobelHorizontal=17]="SobelHorizontal";L[L.SobelVertical=18]="SobelVertical";L[L.Sharpen=19]="Sharpen";L[L.Sharpen2=20]="Sharpen2";L[L.PointSpread=21]="PointSpread";L[L.None=255]="None"})(K.ConvolutionKernel||(K.ConvolutionKernel={}));const S=new Map;S.set(K.ConvolutionKernel.None,[0,0,0,0,1,0,0,0,0]);S.set(K.ConvolutionKernel.LineDetectionHorizontal,[-1,-1,-1,2,2,2,-1,-1,-1]);S.set(K.ConvolutionKernel.LineDetectionVertical,[-1,2,-1,-1,2,-1,
-1,2,-1]);S.set(K.ConvolutionKernel.LineDetectionLeftDiagonal,[2,-1,-1,-1,2,-1,-1,-1,2]);S.set(K.ConvolutionKernel.LineDetectionRightDiagonal,[-1,-1,2,-1,2,-1,2,-1,-1]);S.set(K.ConvolutionKernel.GradientNorth,[-1,-2,-1,0,0,0,1,2,1]);S.set(K.ConvolutionKernel.GradientWest,[-1,0,1,-2,0,2,-1,0,1]);S.set(K.ConvolutionKernel.GradientEast,[1,0,-1,2,0,-2,1,0,-1]);S.set(K.ConvolutionKernel.GradientSouth,[1,2,1,0,0,0,-1,-2,-1]);S.set(K.ConvolutionKernel.GradientNorthEast,[0,-1,-2,1,0,-1,2,1,0]);S.set(K.ConvolutionKernel.GradientNorthWest,
[-2,-1,0,-1,0,1,0,1,2]);S.set(K.ConvolutionKernel.SmoothArithmeticMean,[.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111,.111111111111]);S.set(K.ConvolutionKernel.Smoothing3x3,[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625]);S.set(K.ConvolutionKernel.Smoothing5x5,[1,1,1,1,1,1,4,4,4,1,1,4,12,4,1,1,4,4,4,1,1,1,1,1,1]);S.set(K.ConvolutionKernel.Sharpening3x3,[-1,-1,-1,-1,9,-1,-1,-1,-1]);S.set(K.ConvolutionKernel.Sharpening5x5,[-1,-3,-4,
-3,-1,-3,0,6,0,-3,-4,6,21,6,-4,-3,0,6,0,-3,-1,-3,-4,-3,-1]);S.set(K.ConvolutionKernel.Laplacian3x3,[0,-1,0,-1,4,-1,0,-1,0]);S.set(K.ConvolutionKernel.Laplacian5x5,[0,0,-1,0,0,0,-1,-2,-1,0,-1,-2,17,-2,-1,0,-1,-2,-1,0,0,0,-1,0,0]);S.set(K.ConvolutionKernel.SobelHorizontal,[-1,-2,-1,0,0,0,1,2,1]);S.set(K.ConvolutionKernel.SobelVertical,[-1,0,1,-2,0,2,-1,0,1]);S.set(K.ConvolutionKernel.Sharpen,[0,-.25,0,-.25,2,-.25,0,-.25,0]);S.set(K.ConvolutionKernel.Sharpen2,[-.25,-.25,-.25,-.25,3,-.25,-.25,-.25,-.25]);
S.set(K.ConvolutionKernel.PointSpread,[-.627,.352,-.627,.352,2.923,.352,-.627,.352,-.627]);K.convolute=function(L,M){const y=R(M.kernel),p=!1!==M.mirrorEdges;L=y.separable?aa(L,y.row,y.col,p):n(L,M,p);({outputPixelType:M}=M);M&&L.clamp(M);return L};K.convoluteSeparable=aa;K.convolutionKernels=S;K.separateKernels=R;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/ExtractBandFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./ExtractBandFunctionArguments ./pixelUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="ExtractBand";k.functionArguments=null;k.rasterArgumentNames=["raster"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){var {sourceRasterInfos:k}=this;k=k[0];const {bandCount:d}=k,{bandIDs:f,missingBandAction:q}=this.functionArguments;if(q===M.MissingBandAction.fail&&f.some(b=>0>b||b>=d))return{success:!1,error:"extract-band-function: invalid bandIDs"};this.outputPixelType=
this._getOutputPixelType("f32");k=k.clone();k.pixelType=this.outputPixelType;const {statistics:z,histograms:t}=k;R.isSome(z)&&z.length&&(k.statistics=f.map(b=>z[b]||z[z.length-1]));R.isSome(t)&&t.length&&(k.histograms=f.map(b=>t[b]||t[t.length-1]));this.rasterInfo=k;return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k))return null;const d=k.pixels.length,f=this.functionArguments.bandIDs.map(q=>q>=d?d-1:q);return k.extractBands(f)};return p}(S);m.__decorate([F.property({json:{write:!0,
name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.ExtractBandFunction")],n)})},"esri/layers/support/rasterFunctions/ExtractBandFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(K,m,R,F,n,N,aa,S){var L;F=L=function(M){function y(){var p=M.apply(this,arguments)||this;p.bandIDs=[];p.missingBandAction=S.MissingBandAction.bestMatch;return p}K._inheritsLoose(y,M);y.prototype.clone=function(){return new L({bandIDs:[...this.bandIDs],missingBandAction:this.missingBandAction})};return y}(aa);m.__decorate([R.property({json:{write:!0}})],F.prototype,"bandIDs",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"missingBandAction",void 0);return F=L=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.ExtractBandFunctionArguments")],
F)})},"esri/layers/support/rasterFunctions/LocalFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./LocalFunctionArguments ./localUtils".split(" "),function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName=
"Local";k.functionArguments=null;k.rasterArgumentNames=["rasters"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){var {sourceRasterInfos:k}=this;const d=k[0],{bandCount:f}=d,{processAsMultiband:q}=this.functionArguments;if(q&&k.some(z=>z.bandCount!==f))return{success:!1,error:"local-function: input rasters do not have same band count"};this.outputPixelType=this._getOutputPixelType("f32");k=d.clone();k.pixelType=this.outputPixelType;k.statistics=null;k.histograms=
null;q||(k.bandCount=1);this.rasterInfo=k;return{success:!0}};J._processPixels=function(k){({pixelBlocks:k}=k);return R.isNone(k)||k.some(d=>R.isNone(d))?null:M.local(k,this.functionArguments.operation,{processAsMultiband:this.functionArguments.processAsMultiband,outputPixelType:this.outputPixelType??void 0})};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],
n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.LocalFunction")],n)})},"esri/layers/support/rasterFunctions/LocalFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S){var L;n=L=function(M){function y(){var J=M.apply(this,arguments)||this;J.rasters=[];J.processAsMultiband=!1;return J}K._inheritsLoose(y,M);var p=y.prototype;p.writeRasters=function(J,k){k.rasters=J.map(d=>"number"===typeof d||"string"===typeof d?d:d.toJSON())};p.clone=function(){return new L({method:this.operation,processAsMultiband:this.processAsMultiband,rasters:R.clone(this.rasters)})};return y}(S);m.__decorate([F.property({json:{write:!0}})],n.prototype,"operation",
void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"rasters",void 0);m.__decorate([aa.writer("rasters")],n.prototype,"writeRasters",null);m.__decorate([F.property({json:{write:!0}})],n.prototype,"processAsMultiband",void 0);return n=L=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.LocalFunctionArguments")],n)})},"esri/layers/support/rasterFunctions/localUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(K,m,R){function F(B){B=B.map(la=>
la.mask).filter(la=>m.isSome(la));if(0===B.length)return null;const qa=B[0].length,fa=new Uint8Array(qa);if(1===B.length)return fa.set(B[0]),fa;let ua=B[0],va;for(let la=1;la<B.length;la++){va=B[la];for(let ya=0;ya<qa;ya++)fa[ya]=ua[ya]|va[ya];ua=va}return fa}function n(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]+va[la];return fa}function N(B,qa,fa){[B]=B;qa=R.createEmptyBand("f32",B.length);qa.set(B);return qa}function aa(B,
qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]-va[la];return fa}function S(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]*va[la];return fa}function L(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=0===va[la]?0:ua[la]/va[la];return fa}function M(B,qa,fa){return L(B,qa,"f32")}function y(B,qa,fa){const [ua,
va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=0===va[la]?0:Math.floor(ua[la]/va[la]);return fa}function p(B,qa,fa,ua){[B]=B;const va=B.length;fa=R.createEmptyBand(fa,va);for(let la=0;la<va;la++)if(!qa||qa[la])fa[la]=ua(B[la]);return fa}function J(B,qa,fa,ua){const [va,la]=B;B=va.length;fa=R.createEmptyBand(fa,B);for(let ya=0;ya<B;ya++)if(!qa||qa[ya])fa[ya]=ua(va[ya],la[ya]);return fa}function k(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,
B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]&va[la];return fa}function d(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]<<va[la];return fa}function f(B,qa,fa){[B]=B;const ua=B.length;fa=R.createEmptyBand(fa,ua);for(let va=0;va<ua;va++)if(!qa||qa[va])fa[va]=~B[va];return fa}function q(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]|va[la];return fa}function z(B,
qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]>>va[la];return fa}function t(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]^va[la];return fa}function b(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]&&va[la]?1:0;return fa}function l(B,qa,fa){[B]=B;const ua=B.length;fa=R.createEmptyBand(fa,ua);for(let va=
0;va<ua;va++)if(!qa||qa[va])fa[va]=B[va]?0:1;return fa}function g(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]||va[la]?1:0;return fa}function u(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=(ua[la]?1:0)^(va[la]?1:0);return fa}function h(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]===va[la]?1:0;return fa}
function c(B,qa,fa,ua){[B]=B;const va=B.length;fa=R.createEmptyBand(fa,va);for(let la=0;la<va;la++)if(!qa||qa[la])fa[la]=ua**B[la];return fa}function r(B,qa,fa){return c(B,qa,fa,10)}function v(B,qa,fa){return c(B,qa,fa,2)}function x(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]>va[la]?1:0;return fa}function A(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]>=va[la]?
1:0;return fa}function E(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]<va[la]?1:0;return fa}function P(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]<=va[la]?1:0;return fa}function T(B,qa,fa){[B]=B;B=B.length;fa=R.createEmptyBand(fa,B);if(!qa)return fa;for(let ua=0;ua<B;ua++)fa[ua]=qa[ua]?0:1;return fa}function C(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,
B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]%va[la];return fa}function X(B,qa,fa){[B]=B;const ua=B.length;fa=R.createEmptyBand(fa,ua);for(let va=0;va<ua;va++)if(!qa||qa[va])fa[va]=-B[va];return fa}function G(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let la=0;la<B;la++)if(!qa||qa[la])fa[la]=ua[la]===va[la]?0:1;return fa}function I(B,qa,fa){const [ua,va]=B;B=ua.length;fa=R.createEmptyBand(fa,B);const la=new Uint8Array(B);for(let ya=0;ya<B;ya++)null!=qa&&!qa[ya]||
0!==ua[ya]||(fa[ya]=va[ya],la[ya]=255);return{band:fa,mask:la}}function ja(B,qa,fa){const [ua,va,la]=B;B=ua.length;fa=R.createEmptyBand(fa,B);for(let ya=0;ya<B;ya++)if(!qa||qa[ya])fa[ya]=ua[ya]?va[ya]:la[ya];return fa}function H(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;const la=va.length;fa=R.createEmptyBand(fa,la);fa.set(va);for(va=0;va<la;va++)if(!qa||qa[va])for(let ya=1;ya<ua;ya++){const Ba=B[ya];fa[va]<Ba[va]&&(fa[va]=Ba[va])}return fa}function Z(B,qa,fa){const ua=B.length;if(2>
ua)return B[0];var [va]=B;const la=va.length;fa=R.createEmptyBand(fa,la);fa.set(va);for(va=0;va<la;va++)if(!qa||qa[va])for(let ya=1;ya<ua;ya++){const Ba=B[ya];fa[va]>Ba[va]&&(fa[va]=Ba[va])}return fa}function da(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;const la=va.length;fa=R.createEmptyBand(fa,la);fa.set(va);for(va=0;va<la;va++)if(!qa||qa[va]){let ya=fa[va];for(let Ba=1;Ba<ua;Ba++){const Ca=B[Ba];fa[va]<Ca[va]&&(fa[va]=Ca[va]);ya>Ca[va]&&(ya=Ca[va])}fa[va]-=ya}return fa}function Y(B,
qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;const la=va.length;fa=R.createEmptyBand(fa,la);fa.set(va);for(va=0;va<la;va++)if(!qa||qa[va]){for(let ya=1;ya<ua;ya++)fa[va]+=B[ya][va];fa[va]/=ua}return fa}function w(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;const la=va.length;fa=R.createEmptyBand(fa,la);fa.set(va);for(va=0;va<la;va++)if(!qa||qa[va])for(let ya=1;ya<ua;ya++)fa[va]+=B[ya][va];return fa}function O(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;va=va.length;
fa=R.createEmptyBand(fa,va);for(let Ba=0;Ba<va;Ba++)if(!qa||qa[Ba]){const Ca=new Float32Array(ua);let Ia=0;for(var la=0;la<ua;la++){var ya=B[la];Ia+=ya[Ba];Ca[la]=ya[Ba]}Ia/=ua;la=0;for(ya=0;ya<ua;ya++)la+=(Ca[ya]-Ia)*Ca[ya]-Ia;fa[Ba]=Math.sqrt(la/ua-1)}return fa}function U(B,qa,fa){const ua=B.length;if(2>ua)return B[0];const va=Math.floor(ua/2);var [la]=B;la=la.length;fa=R.createEmptyBand(fa,la);const ya=new Float32Array(ua);for(let Ba=0;Ba<la;Ba++)if(!qa||qa[Ba]){for(let Ca=0;Ca<ua;Ca++)ya[Ca]=
B[Ca][Ba];ya.sort();fa[Ba]=ya[va]}return fa}function ea(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;va=va.length;fa=R.createEmptyBand(fa,va);const la=new Map;for(let Ba=0;Ba<va;Ba++)if(!qa||qa[Ba]){la.clear();let Ca;for(var ya=0;ya<ua;ya++)Ca=B[ya][Ba],la.set(Ca,la.has(Ca)?la.get(Ca)+1:1);let Ia=ya=0;for(const Ga of la.keys())ya=la.get(Ga),ya>Ia&&(Ia=ya,Ca=Ga);fa[Ba]=Ca}return fa}function ca(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;va=va.length;fa=R.createEmptyBand(fa,
va);const la=new Map;for(let Ba=0;Ba<va;Ba++)if(!qa||qa[Ba]){la.clear();let Ca;for(var ya=0;ya<ua;ya++)Ca=B[ya][Ba],la.set(Ca,la.has(Ca)?la.get(Ca)+1:1);ya=0;let Ia=B.length;for(const Ga of la.keys())ya=la.get(Ga),ya<Ia&&(Ia=ya,Ca=Ga);fa[Ba]=Ca}return fa}function ha(B,qa,fa){const ua=B.length;if(2>ua)return B[0];var [va]=B;va=va.length;fa=R.createEmptyBand(fa,va);const la=new Set;for(let ya=0;ya<va;ya++)if(!qa||qa[ya]){la.clear();let Ba;for(let Ca=0;Ca<ua;Ca++)Ba=B[Ca][ya],la.add(Ba);fa[ya]=la.size}return fa}
function a(B,qa,fa){return ea(B,null,fa)}function e(B,qa,fa){return ca(B,null,fa)}function D(B,qa,fa){return ha(B,null,fa)}function Q(B,qa,fa){return H(B,null,fa)}function V(B,qa,fa){return Z(B,null,fa)}function ka(B,qa,fa){return O(B,null,fa)}function ma(B,qa,fa){return w(B,null,fa)}function oa(B,qa,fa){return Y(B,null,fa)}function pa(B,qa,fa){return U(B,null,fa)}function ta(B,qa,fa){return da(B,null,fa)}K.LocalOperator=void 0;(function(B){B[B.Plus=1]="Plus";B[B.Minus=2]="Minus";B[B.Times=3]="Times";
B[B.SquareRoot=4]="SquareRoot";B[B.Power=5]="Power";B[B.ACos=6]="ACos";B[B.ASin=7]="ASin";B[B.ATan=8]="ATan";B[B.ATanH=9]="ATanH";B[B.Abs=10]="Abs";B[B.BitwiseAnd=11]="BitwiseAnd";B[B.BitwiseLeftShift=12]="BitwiseLeftShift";B[B.BitwiseNot=13]="BitwiseNot";B[B.BitwiseOr=14]="BitwiseOr";B[B.BitwiseRightShift=15]="BitwiseRightShift";B[B.BitwiseXOr=16]="BitwiseXOr";B[B.BooleanAnd=17]="BooleanAnd";B[B.BooleanNot=18]="BooleanNot";B[B.BooleanOr=19]="BooleanOr";B[B.BooleanXOr=20]="BooleanXOr";B[B.Cos=21]=
"Cos";B[B.CosH=22]="CosH";B[B.Divide=23]="Divide";B[B.EqualTo=24]="EqualTo";B[B.Exp=25]="Exp";B[B.Exp10=26]="Exp10";B[B.Exp2=27]="Exp2";B[B.GreaterThan=28]="GreaterThan";B[B.GreaterThanEqual=29]="GreaterThanEqual";B[B.Int=30]="Int";B[B.IsNull=31]="IsNull";B[B.Float=32]="Float";B[B.LessThan=33]="LessThan";B[B.LessThanEqual=34]="LessThanEqual";B[B.Ln=35]="Ln";B[B.Log10=36]="Log10";B[B.Log2=37]="Log2";B[B.Majority=38]="Majority";B[B.Max=39]="Max";B[B.Mean=40]="Mean";B[B.Med=41]="Med";B[B.Min=42]="Min";
B[B.Minority=43]="Minority";B[B.Mod=44]="Mod";B[B.Negate=45]="Negate";B[B.NotEqual=46]="NotEqual";B[B.Range=47]="Range";B[B.RoundDown=48]="RoundDown";B[B.RoundUp=49]="RoundUp";B[B.SetNull=50]="SetNull";B[B.Sin=51]="Sin";B[B.SinH=52]="SinH";B[B.Square=53]="Square";B[B.Std=54]="Std";B[B.Sum=55]="Sum";B[B.Tan=56]="Tan";B[B.TanH=57]="TanH";B[B.Variety=58]="Variety";B[B.ACosH=59]="ACosH";B[B.ASinH=60]="ASinH";B[B.ATan2=61]="ATan2";B[B.FloatDivide=64]="FloatDivide";B[B.FloorDivide=65]="FloorDivide";B[B.MajorityIgnoreNoData=
66]="MajorityIgnoreNoData";B[B.MaxIgnoreNoData=67]="MaxIgnoreNoData";B[B.MeanIgnoreNoData=68]="MeanIgnoreNoData";B[B.MedIgnoreNoData=69]="MedIgnoreNoData";B[B.MinIgnoreNoData=70]="MinIgnoreNoData";B[B.MinorityIgnoreNoData=71]="MinorityIgnoreNoData";B[B.RangeIgnoreNoData=72]="RangeIgnoreNoData";B[B.StdIgnoreNoData=73]="StdIgnoreNoData";B[B.SumIgnoreNoData=74]="SumIgnoreNoData";B[B.VarietyIgnoreNoData=75]="VarietyIgnoreNoData";B[B.Con=76]="Con"})(K.LocalOperator||(K.LocalOperator={}));const sa=new Map,
wa=new Map,xa=new Map;K.local=function(B,qa,fa={}){sa.size||(sa.set(4,Math.sqrt),sa.set(6,Math.acos),sa.set(7,Math.asin),sa.set(8,Math.atan),sa.set(9,Math.atanh),sa.set(10,Math.abs),sa.set(21,Math.cos),sa.set(22,Math.cosh),sa.set(25,Math.exp),sa.set(30,Math.floor),sa.set(35,Math.log),sa.set(36,Math.log10),sa.set(37,Math.log2),sa.set(48,Math.floor),sa.set(49,Math.ceil),sa.set(51,Math.sin),sa.set(52,Math.sinh),sa.set(56,Math.tan),sa.set(57,Math.tanh),sa.set(59,Math.acosh),sa.set(60,Math.asinh),sa.set(65,
Math.floor),wa.set(5,Math.pow),wa.set(61,Math.atan2),xa.set(1,n),xa.set(2,aa),xa.set(3,S),xa.set(11,k),xa.set(12,d),xa.set(12,d),xa.set(13,f),xa.set(14,q),xa.set(15,z),xa.set(16,t),xa.set(17,b),xa.set(18,l),xa.set(19,g),xa.set(20,u),xa.set(23,L),xa.set(24,h),xa.set(26,r),xa.set(27,v),xa.set(28,x),xa.set(29,A),xa.set(31,T),xa.set(32,N),xa.set(33,E),xa.set(34,P),xa.set(44,C),xa.set(45,X),xa.set(46,G),xa.set(64,M),xa.set(65,y),xa.set(76,ja),xa.set(38,ea),xa.set(39,H),xa.set(40,Y),xa.set(41,U),xa.set(42,
Z),xa.set(43,ca),xa.set(47,da),xa.set(54,O),xa.set(55,w),xa.set(58,ha),xa.set(66,a),xa.set(67,Q),xa.set(68,oa),xa.set(69,pa),xa.set(70,V),xa.set(71,e),xa.set(72,ta),xa.set(73,ka),xa.set(74,ma),xa.set(75,D));const ua=m.unwrap(F(B)),{processAsMultiband:va,outputPixelType:la="f32"}=fa,ya=va?B[0].pixels.length:1;fa=[];for(let Ca=0;Ca<ya;Ca++){const Ia=B.map(Ja=>Ja.pixels[Ca]);let Ga;if(qa===K.LocalOperator.SetNull){var Ba=I(Ia,ua,la);Ga=Ba.band;Ba=Ba.mask}else xa.has(qa)?Ga=xa.get(qa)(Ia,ua,la):sa.has(qa)?
Ga=p(Ia,ua,la,sa.get(qa)):wa.has(qa)&&(Ga=J(Ia,ua,la,wa.get(qa)));if(null==Ga)return null;fa.push(Ga)}Ba||qa===K.LocalOperator.IsNull||(Ba=ua);B=B[0];return new R({width:B.width,height:B.height,pixelType:la,mask:Ba,pixels:fa})};K.operandsCount=[0,2,2,2,1,2,1,1,1,1,1,2,2,1,2,2,2,2,1,2,2,1,1,2,2,1,1,1,2,2,1,1,1,2,2,1,1,1,999,999,999,999,999,999,2,1,2,999,1,1,1,1,1,1,999,999,1,1,999,1,1,2,2,2,999,999,999,999,999,999,999,999,999,999,3];Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/rasterFunctions/MaskFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./MaskFunctionArguments ./pixelUtils".split(" "),function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName=
"Mask";k.functionArguments=null;k.rasterArgumentNames=["raster"];k.lookup=null;return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){const k=this.sourceRasterInfos[0].clone(),{pixelType:d}=k;this.outputPixelType=this._getOutputPixelType(d);k.pixelType=this.outputPixelType;this.rasterInfo=k;const {includedRanges:f,noDataValues:q}=this.functionArguments;if(!f?.length&&!q?.length)return{success:!1,error:"missing includedRanges or noDataValues argument"};this.lookup=M.createMaskLUT(d,
this.functionArguments.includedRanges,this.functionArguments.noDataValues);return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k))return null;const {outputPixelType:d,lookup:f}=this,{includedRanges:q,noDataValues:z,noDataInterpretation:t}=this.functionArguments;return M.mask(k,{includedRanges:q,noDataValues:z,outputPixelType:d,matchAll:t===M.NoDataInterpretation.matchAll,lookup:f})};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,
"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"lookup",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.MaskFunction")],n)})},"esri/layers/support/rasterFunctions/MaskFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments ./pixelUtils".split(" "),
function(K,m,R,F,n,N,aa,S){var L;F=L=function(M){function y(){var p=M.apply(this,arguments)||this;p.includedRanges=null;p.noDataValues=null;p.noDataInterpretation=S.NoDataInterpretation.matchAny;return p}K._inheritsLoose(y,M);y.prototype.clone=function(){return new L({includedRanges:this.includedRanges?.slice()??[],noDataValues:this.noDataValues?.slice()??[],noDataInterpretation:this.noDataInterpretation})};return y}(aa);m.__decorate([R.property({json:{write:!0}})],F.prototype,"includedRanges",void 0);
m.__decorate([R.property({json:{write:!0}})],F.prototype,"noDataValues",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"noDataInterpretation",void 0);return F=L=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.MaskFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/NDVIFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./bandIndexUtils ./BaseRasterFunction ./NDVIFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="NDVI";k.functionArguments=null;k.rasterArgumentNames=["raster"];return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){const {scaled:k}=this.functionArguments;this.outputPixelType=this._getOutputPixelType(k?"u8":"f32");const d=this.sourceRasterInfos[0].clone();d.pixelType=this.outputPixelType;d.colormap=null;d.histograms=null;const [f,q,z,t]=k?[0,200,100,10]:[-1,
1,0,.1];d.statistics=[{min:f,max:q,avg:z,stddev:t}];this.rasterInfo=d;return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k))return null;const {visibleBandID:d,infraredBandID:f,scaled:q}=this.functionArguments;return S.calculateNDVI(k,d,f,q)};return p}(L);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",
void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.NDVIFunction")],n)})},"esri/layers/support/rasterFunctions/NDVIFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa){var S;F=S=function(L){function M(){var y=L.apply(this,arguments)||this;y.visibleBandID=0;y.infraredBandID=1;y.scaled=!0;return y}K._inheritsLoose(M,L);M.prototype.clone=function(){const {visibleBandID:y,infraredBandID:p,scaled:J}=this;return new S({visibleBandID:y,infraredBandID:p,scaled:J})};return M}(aa);m.__decorate([R.property({json:{write:!0}})],F.prototype,"visibleBandID",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"infraredBandID",void 0);m.__decorate([R.property({json:{write:!0}})],
F.prototype,"scaled",void 0);return F=S=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.NDVIFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/RemapFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./pixelUtils ./RemapFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="Remap";k.functionArguments=null;k.rasterArgumentNames=["raster"];k.lookup=null;return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){const k=this.sourceRasterInfos[0].clone(),{pixelType:d}=k;this.outputPixelType=this._getOutputPixelType(d);k.pixelType=this.outputPixelType;k.colormap=null;k.histograms=null;const {statistics:f}=k,{allowUnmatched:q,outputValues:z}=
this.functionArguments;if(R.isSome(f)&&f.length&&!q){let b=z[0],l=b;for(var t=0;t<z.length;t++)b=b>z[t]?z[t]:b,l=l>z[t]?l:z[t];for(t=0;t<f.length;t++)f[t]={...f[t],min:b,max:l}}this.rasterInfo=k;this.lookup=q?null:L.createRemapLUT(d,this.functionArguments.inputRanges,z);return{success:!0}};J._processPixels=function(k){k=k.pixelBlocks?.[0];if(R.isNone(k))return null;const {lookup:d,outputPixelType:f}=this;if(d)return L.lookupPixels(k,{lut:[d.lut],offset:d.offset,outputPixelType:f});const {inputRanges:q,
outputValues:z,noDataRanges:t,allowUnmatched:b}=this.functionArguments;return L.remap(k,{inputRanges:q,outputValues:z,noDataRanges:t,allowUnmatched:b,outputPixelType:f})};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);m.__decorate([F.property({json:{write:!0}})],
n.prototype,"lookup",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.RemapFunction")],n)})},"esri/layers/support/rasterFunctions/RemapFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),function(K,m,R,F,n,N,aa){var S;
F=S=function(L){function M(){var y=L.apply(this,arguments)||this;y.inputRanges=null;y.outputValues=null;y.noDataRanges=null;y.allowUnmatched=!1;return y}K._inheritsLoose(M,L);M.prototype.clone=function(){return new S({inputRanges:[...this.inputRanges],outputValues:[...this.outputValues],noDataRanges:[...this.noDataRanges],allowUnmatched:this.allowUnmatched})};return M}(aa);m.__decorate([R.property({json:{write:!0}})],F.prototype,"inputRanges",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,
"outputValues",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"noDataRanges",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"allowUnmatched",void 0);return F=S=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.RemapFunctionArguments")],F)})},"esri/layers/support/rasterFunctions/SlopeFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./SlopeFunctionArguments ./surfaceUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){n=function(y){function p(){var k=y.apply(this,arguments)||this;k.functionName="Slope";k.functionArguments=null;k.rasterArgumentNames=["raster"];k.isGCS=!1;return k}K._inheritsLoose(p,y);var J=p.prototype;J._bindSourceRasters=function(){this.outputPixelType=this._getOutputPixelType("f32");const k=this.sourceRasterInfos[0].clone();k.pixelType=this.outputPixelType;k.statistics=null;k.histograms=null;this.rasterInfo=k;this.isGCS=k.spatialReference.isGeographic;return{success:!0}};
J._processPixels=function(k){const d=k.pixelBlocks?.[0];if(R.isNone(d))return null;const {zFactor:f,slopeType:q,pixelSizePower:z,pixelSizeFactor:t}=this.functionArguments,{isGCS:b}=this;({extent:k}=k);return M.slope(d,{zFactor:f,slopeType:q,pixelSizePower:z,pixelSizeFactor:t,isGCS:b,resolution:k?{x:k.width/d.width,y:k.height/d.height}:{x:1,y:1}})};return p}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:L,json:{write:!0,
name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"isGCS",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.SlopeFunction")],n)})},"esri/layers/support/rasterFunctions/SlopeFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S,L){var M;R=new R.JSONMap({0:"degree",1:"percent-rise",2:"adjusted"},{useNumericKeys:!0});L=M=function(y){function p(){var J=y.apply(this,arguments)||this;J.slopeType="degree";J.zFactor=1;J.pixelSizePower=.664;J.pixelSizeFactor=.024;return J}K._inheritsLoose(p,y);p.prototype.clone=function(){return new M({slopeType:this.slopeType,zFactor:this.zFactor,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,raster:this.raster})};return p}(L);m.__decorate([aa.enumeration(R)],
L.prototype,"slopeType",void 0);m.__decorate([F.property({type:Number,json:{write:!0}})],L.prototype,"zFactor",void 0);m.__decorate([F.property({type:Number,json:{name:"psPower",write:!0}})],L.prototype,"pixelSizePower",void 0);m.__decorate([F.property({type:Number,json:{name:"psFactor",write:!0}})],L.prototype,"pixelSizeFactor",void 0);return L=M=m.__decorate([S.subclass("esri.layers.support.rasterFunctions.SlopeFunctionArguments")],L)})},"esri/layers/support/rasterFunctions/StatisticsHistogramsFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./StatisticsHistogramsFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S){F=function(L){function M(){var p=L.apply(this,arguments)||this;p.functionName="StatisticsHistograms";p.functionArguments=null;p.rasterArgumentNames=["raster"];return p}K._inheritsLoose(M,L);var y=M.prototype;y._bindSourceRasters=function(){var p=this.sourceRasterInfos[0];this.outputPixelType=this._getOutputPixelType("u8");p=p.clone();const {statistics:J,histograms:k}=this.functionArguments;p.histograms=k;J&&(p.statistics=J.map(([d,f,q,z])=>({min:d,max:f,avg:q,stddev:z})));
this.rasterInfo=p;return{success:!0}};y._processPixels=function(p){return p.pixelBlocks?.[0]};return M}(aa);m.__decorate([R.property({json:{write:!0,name:"rasterFunction"}})],F.prototype,"functionName",void 0);m.__decorate([R.property({type:S,json:{write:!0,name:"rasterFunctionArguments"}})],F.prototype,"functionArguments",void 0);m.__decorate([R.property()],F.prototype,"rasterArgumentNames",void 0);m.__decorate([R.property({json:{write:!0}})],F.prototype,"indexedColormap",void 0);return F=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramsFunction")],
F)})},"esri/layers/support/rasterFunctions/StatisticsHistogramsFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseFunctionArguments".split(" "),function(K,m,R,F,n,N,aa){var S;n=S=function(L){function M(){var y=L.apply(this,arguments)||this;y.statistics=null;y.histograms=null;return y}
K._inheritsLoose(M,L);M.prototype.clone=function(){return new S({statistics:R.clone(this.statistics),histograms:R.clone(this.histograms)})};return M}(aa);m.__decorate([F.property({json:{write:!0}})],n.prototype,"statistics",void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"histograms",void 0);return n=S=m.__decorate([N.subclass("esri.layers.support.rasterFunctions.StatisticsHistogramsFunctionArguments")],n)})},"esri/layers/support/rasterFunctions/StretchFunction":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./BaseRasterFunction ./pixelUtils ./StretchFunctionArguments ./stretchUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y){n=function(p){function J(){var d=p.apply(this,arguments)||this;d.functionName="Stretch";d.functionArguments=null;d.rasterArgumentNames=["raster"];d.lookup=null;d.cutOffs=null;return d}K._inheritsLoose(J,p);var k=J.prototype;k._bindSourceRasters=function(){this.cutOffs=this.lookup=null;var d=this.sourceRasterInfos[0];const {pixelType:f}=d;var {functionArguments:q}=this;const {dynamicRangeAdjustment:z,gamma:t,useGamma:b}=q;!z&&["u8","u16","s8","s16"].includes(f)?(q=
y.getStretchCutoff(q.toJSON(),{rasterInfo:d}),this.lookup=y.createStretchLUT({pixelType:f,...q,gamma:b?t:null})):z&&(this.cutOffs=y.getStretchCutoff(q.toJSON(),{rasterInfo:d}));this.outputPixelType=this._getOutputPixelType(f);d=d.clone();d.pixelType=this.outputPixelType;d.statistics=null;d.histograms=null;"u8"===this.outputPixelType&&(d.keyProperties.DataType="processed");this.rasterInfo=d;return{success:!0}};k._processPixels=function(d){d=d.pixelBlocks?.[0];if(R.isNone(d))return d;var {lookup:f}=
this;if(f)return L.lookupPixels(d,{...f,outputPixelType:this.rasterInfo.pixelType});({functionArguments:f}=this);const q=this.cutOffs||y.getStretchCutoff(f.toJSON(),{rasterInfo:this.sourceRasterInfos[0],pixelBlock:d});return y.stretch(d,{...q,gamma:f.useGamma?f.gamma:null,outputPixelType:this.outputPixelType})};return J}(S);m.__decorate([F.property({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0);m.__decorate([F.property({type:M,json:{write:!0,name:"rasterFunctionArguments"}})],
n.prototype,"functionArguments",void 0);m.__decorate([F.property()],n.prototype,"rasterArgumentNames",void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"lookup",void 0);m.__decorate([F.property({json:{write:!0}})],n.prototype,"cutOffs",void 0);return n=m.__decorate([aa.subclass("esri.layers.support.rasterFunctions.StretchFunction")],n)})},"esri/layers/support/rasterFunctions/StretchFunctionArguments":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/lang ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseFunctionArguments".split(" "),
function(K,m,R,F,n,N,aa,S,L,M){var y;R=new R.JSONMap({0:"none",3:"standard-deviation",4:"histogram-equalization",5:"min-max",6:"percent-clip",7:"sigmoid"},{useNumericKeys:!0});M=y=function(p){function J(){var d=p.apply(this,arguments)||this;d.computeGamma=!1;d.dynamicRangeAdjustment=!1;d.gamma=[];d.histograms=null;d.statistics=null;d.stretchType="none";d.useGamma=!1;return d}K._inheritsLoose(J,p);var k=J.prototype;k.writeStatistics=function(d,f,q){d?.length&&(Array.isArray(d[0])||(d=d.map(z=>[z.min,
z.max,z.avg,z.stddev])),f[q]=d)};k.clone=function(){return new y({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:F.clone(this.statistics),gamma:F.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,histograms:F.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment,
raster:this.raster})};return J}(M);m.__decorate([n.property({type:Boolean,json:{write:!0}})],M.prototype,"computeGamma",void 0);m.__decorate([n.property({type:Boolean,json:{name:"dra",write:!0}})],M.prototype,"dynamicRangeAdjustment",void 0);m.__decorate([n.property({type:[Number],json:{write:!0}})],M.prototype,"gamma",void 0);m.__decorate([n.property()],M.prototype,"histograms",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"maxPercent",void 0);m.__decorate([n.property({type:Number,
json:{write:!0}})],M.prototype,"minPercent",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"numberOfStandardDeviations",void 0);m.__decorate([n.property({type:Number,json:{name:"max",write:!0}})],M.prototype,"outputMax",void 0);m.__decorate([n.property({type:Number,json:{name:"min",write:!0}})],M.prototype,"outputMin",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],M.prototype,"sigmoidStrengthLevel",void 0);m.__decorate([n.property({json:{type:[[Number]],
write:!0}})],M.prototype,"statistics",void 0);m.__decorate([L.writer("statistics")],M.prototype,"writeStatistics",null);m.__decorate([aa.enumeration(R)],M.prototype,"stretchType",void 0);m.__decorate([n.property({type:Boolean,json:{write:!0}})],M.prototype,"useGamma",void 0);return M=y=m.__decorate([S.subclass("esri.layers.support.rasterFunctions.StretchFunctionArguments")],M)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock",
"../../../renderers/support/stretchRendererUtils"],function(K,m,R,F){function n(y,p=256){p=Math.min(p,256);const {size:J,counts:k}=y;y=new Uint8Array(J);var d=k.reduce((b,l)=>b+l/p,0);let f=0;var q=0;let z=0,t=d;for(let b=0;b<J;b++)if(z+=k[b],!(b<J-1&&z+k[b+1]<t)){for(;f<p-1&&t<z;)f++,t+=d;for(;q<=b;q++)y[q]=f;q=b+1}for(d=q;d<J;d++)y[d]=p-1;return y}function N(y,p){y=Math.min(Math.max(y,-100),100);p=Math.min(Math.max(p??0,-100),100);let J=0,k=0;const d=new Uint8Array(256);for(J=0;256>J;J++)0<y&&100>
y?k=(200*J-25500+510*p)/(2*(100-y))+128:0>=y&&-100<y?k=(200*J-25500+510*p)*(100+y)/2E4+128:100===y?(k=200*J-25500+256*(100-y)+510*p,k=0<k?255:0):-100===y&&(k=128),d[J]=255<k?255:0>k?0:k;return d}function aa(y){if(m.isNone(y)||!y.pixels?.length)return null;y.statistics||y.updateStatistics();const {pixels:p,mask:J,pixelType:k,statistics:d}=y;y=y.width*y.height;const f=p.length;let q,z;let t;var b;const l=[],g=[];for(t=0;t<f;t++){var u=new Uint32Array(256);var h=p[t];if("u8"===k)if(q=-.5,z=255.5,J)for(b=
0;b<y;b++)J[b]&&u[h[b]]++;else for(b=0;b<y;b++)u[h[b]]++;else{m.assertIsSome(d);q=d[t].minValue;z=d[t].maxValue;var c=(z-q)/256;var r=new Uint32Array(257);if(J)for(b=0;b<y;b++)J[b]&&r[Math.floor((h[b]-q)/c)]++;else for(b=0;b<y;b++)r[Math.floor((h[b]-q)/c)]++;for(b=0;255>b;b++)u[b]=r[b];u[255]=r[255]+r[256]}l.push({min:q,max:z,size:256,counts:u});for(b=h=r=c=0;256>b;b++)c+=u[b],r+=b*u[b];r/=c;for(b=0;256>b;b++)h+=u[b]*(b-r)**2;u=Math.sqrt(h/(c-1));c=(z-q)/256;b=(r+.5)*c+q;u*=c;g.push({min:q,max:z,
avg:b,stddev:u})}return{statistics:g,histograms:l}}function S(y,p){if(null==p||0===p.length)return y;const J=Math.max.apply(null,p),{minCutOff:k,maxCutOff:d,outMin:f,outMax:q,histogramLut:z}=y;return k.length===p.length||k.length<=J?y:{minCutOff:p.map(t=>k[t]),maxCutOff:p.map(t=>d[t]),histogramLut:z?p.map(t=>z[t]):null,outMin:f,outMax:q}}const L={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*
1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},M=[.299,.587,.114];K.computeGammaValues=function(y,p,J){const k=[];for(let t=0;t<p.length;t++){var d=0,f=0,q=0;"min"in p[t]?{min:d,max:f,avg:q}=p[t]:[d,f,q]=p[t];q=q??0;"u8"!==y&&(q=255*(q-d)/(f-d));J&&(q*=M[t]);d=k;f=d.push;if(0>=q||255<=q)q=1;else{var z=0;150!==q&&(z=150>=q?45*Math.cos(.01047*q):17*Math.sin(.021*q));z=Math.log((q+z)/255);0===z?q=1:(q=Math.log(q/255)/z,q=isNaN(q)?1:Math.min(9.9,Math.max(.01,q)))}f.call(d,q)}return k};K.createContrastBrightnessLUT=
N;K.createHistogramEqualizationLUT=n;K.createStretchLUT=function(y){const {minCutOff:p,maxCutOff:J,gamma:k,pixelType:d}=y,f=y.outMin||0,q=y.outMax||255;if(!["u8","u16","s8","s16"].includes(d))return null;const z=p.length;let t;let b=0;"s8"===d?b=-127:"s16"===d&&(b=-32767);let l=256;["u16","s16"].includes(d)&&(l=65536);const g=[],u=q-f;for(t=0;t<z;t++)g[t]=J[t]-p[t],u/(J[t]-p[t]);var h=k&&k.length>=z;const c=[];if(h)for(t=0;t<z;t++)c[t]=1<k[t]?2<k[t]?6.5+(k[t]-2)**2.5:6.5+100*(2-k[t])**4:1;let r;const v=
[];let x,A,E;if(h)for(t=0;t<z;t++){E=[];for(h=0;h<l;h++)x=h+b,r=(x-p[t])/g[t],A=1,1<k[t]&&(A-=(1/u)**(r*c[t])),E[h]=x<J[t]&&x>p[t]?Math.floor(A*u*r**(1/k[t]))+f:x>=J[t]?q:f;v[t]=E}else for(t=0;t<z;t++){E=[];for(h=0;h<l;h++)x=h+b,E[h]=x<=p[t]?f:x>=J[t]?q:Math.floor((x-p[t])/g[t]*u)+f;v[t]=E}if(null!=y.contrastOffset)for(y=N(y.contrastOffset,y.brightnessOffset),t=0;t<z;t++)for(E=v[t],h=0;h<l;h++)E[h]=y[E[h]];return{lut:v,offset:b}};K.estimateStatisticsFromHistograms=function(y){const p=[];for(let f=
0;f<y.length;f++){const {min:q,max:z,size:t,counts:b}=y[f];let l=0;var J=0;for(var k=0;k<t;k++)l+=b[k],J+=k*b[k];J/=l;k=0;for(var d=0;d<t;d++)k+=b[d]*(d-J)**2;d=(z-q)/t;p.push({min:q,max:z,avg:(J+.5)*d+q,stddev:Math.sqrt(k/(l-1))*d})}return p};K.estimateStatisticsHistograms=aa;K.getStretchCutoff=function(y,p){const {pixelBlock:J,bandIds:k,returnHistogramLut:d,rasterInfo:f}=p;var q=null;p=null;var z=y.stretchType;"number"===typeof z&&(z=F.stretchTypeFunctionEnum[z]);y.dra?"minMax"===z&&m.isSome(J)&&
J.statistics?q=J.statistics.map(A=>[A.minValue,A.maxValue,0,0]):(p=aa(J),q=m.isSome(p)?p.statistics:null,p=m.isSome(p)?p.histograms:null):(q=0<y.statistics?.length?y.statistics:m.unwrap(f.statistics),p=y.histograms||m.unwrap(f.histograms));"percentClip"!==z&&"histogramEqualization"!==z||p?.length||(z="minMax");var t=q?.length||p?.length||f.bandCount;const b=[],l=[];let g;let u,h,c,r;q&&!Array.isArray(q[0])&&(q=q.map(A=>[A.min,A.max,A.avg,A.stddev]));switch(z){case "none":q=L[f.pixelType]||L.f32;for(c=
0;c<t;c++)b[c]=q[0],l[c]=q[1];break;case "minMax":m.assertIsSome(q);for(c=0;c<t;c++)b[c]=q[c][0],l[c]=q[c][1];break;case "standardDeviation":m.assertIsSome(q);for(c=0;c<t;c++)b[c]=q[c][2]-y.numberOfStandardDeviations*q[c][3],l[c]=q[c][2]+y.numberOfStandardDeviations*q[c][3],b[c]<q[c][0]&&(b[c]=q[c][0]),l[c]>q[c][1]&&(l[c]=q[c][1]);break;case "histogramEqualization":m.assertIsSome(p);for(c=0;c<t;c++)b[c]=p[c].min,l[c]=p[c].max;break;case "percentClip":m.assertIsSome(p);for(c=0;c<p.length;c++){q=p[c];
u=new Uint32Array(q.size);var v=[...q.counts];20<=v.length&&(v[0]=v[1]=v[2]=v[v.length-1]=v[v.length-2]=0);g=0;t=(q.max-q.min)/q.size;h=-.5===q.min&&1===t?.5:0;for(r=0;r<q.size;r++)g+=v[r],u[r]=g;v=(y.minPercent||0)*g/100;for(r=0;r<q.size;r++)if(u[r]>v){b[c]=q.min+t*(r+h);break}v=(1-(y.maxPercent||0)/100)*g;for(r=q.size-2;0<=r;r--)if(u[r]<v){l[c]=q.min+t*(r+2-h);break}}break;default:for(m.assertIsSome(q),c=0;c<t;c++)b[c]=q[c][0],l[c]=q[c][1]}let x;"histogramEqualization"===z?(m.assertIsSome(p),z=
p[0].size||256,y=0,d&&(x=p.map(A=>n(A)))):(z=y.max||255,y=y.min||0);return S({minCutOff:b,maxCutOff:l,outMax:z,outMin:y,histogramLut:x},k)};K.stretch=function(y,p){if(m.isNone(y)||!y.pixels?.length)return y;const {mask:J,width:k,height:d,pixels:f}=y,{minCutOff:q,maxCutOff:z,gamma:t}=p;var b=p.outMin||0;const l=p.outMax||255,g=k*d,u=p.outputPixelType||"u8";y=y.pixels.map(()=>R.createEmptyBand(u,g));p=y.length;let h;let c,r,v;const x=l-b,A=[];for(h=0;h<p;h++)A[h]=z[h]-q[h],x/(z[h]-q[h]);var E=t&&t.length>=
p;const P=[];if(E)for(h=0;h<p;h++)P[h]=1<t[h]?2<t[h]?6.5+(t[h]-2)**2.5:6.5+100*(2-t[h])**4:1;if(E)if(null!=J)for(E=0;E<g;E++){if(J[E])for(h=0;h<p;h++)c=f[h][E],v=(c-q[h])/A[h],r=1,1<t[h]&&(r-=(1/x)**(v*P[h])),y[h][E]=c<z[h]&&c>q[h]?Math.floor(r*x*v**(1/t[h]))+b:c>=z[h]?l:b}else for(E=0;E<g;E++)for(h=0;h<p;h++)c=f[h][E],v=(c-q[h])/A[h],r=1,1<t[h]&&(r-=(1/x)**(v*P[h])),y[h][E]=c<z[h]&&c>q[h]?Math.floor(r*x*v**(1/t[h]))+b:c>=z[h]?l:b;else if(null!=J)for(E=0;E<g;E++){if(J[E])for(h=0;h<p;h++)c=f[h][E],
y[h][E]=c<z[h]&&c>q[h]?Math.floor((c-q[h])/A[h]*x)+b:c>=z[h]?l:b}else for(E=0;E<g;E++)for(h=0;h<p;h++)c=f[h][E],y[h][E]=c<z[h]&&c>q[h]?Math.floor((c-q[h])/A[h]*x)+b:c>=z[h]?l:b;b=new R({width:k,height:d,mask:J,pixels:y,pixelType:u});b.updateStatistics();return b};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(K,m){m=new m.JSONMap({none:"none",standardDeviation:"standard-deviation",
histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});K.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};K.stretchTypeJSONDict=m;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/unitUtils ../../../chunks/pe ../../../geometry/projection ../../../geometry/Extent ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/SpatialReference".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y,p){function J(w,O,U){return!S.canProjectWithoutEngine(w,O,U)}function k(w,O,U){if((w=J(w,O,U))&&!S.isLoaded())throw new F("rasterprojectionhelper-project","projection engine is not loaded");return w}function d(){d=m._asyncToGenerator(function*(){S.isLoaded()||(yield S.load())});return d.apply(this,arguments)}function f(w,O,U,ea=null){const ca=w.spatialReference;if(ca.equals(O))return w;k(ca,O,ea);U=U.center;U=new L({xmin:U.x-w.x/2,xmax:U.x+w.x/2,ymin:U.y-w.y/2,ymax:U.y+
w.y/2,spatialReference:ca});ea=S.project(U,O,ea);U=P(O);n.isNone(ea)||n.isSome(U)&&ea.width>=U?(O=N.getMetersPerUnitForSR(ca)/N.getMetersPerUnitForSR(O),w={x:w.x*O,y:w.y*O}):w={x:ea.width,y:ea.height};return w}function q(w,O=.01){return N.getMetersPerUnitForSR(w)?O/N.getMetersPerUnitForSR(w):0}function z(w,O,U=null,ea=!0){const ca=w.spatialReference;if(ca.equals(O))return w;k(ca,O,U);U=S.project(w,O,U);if(!ea||!U)return U;t([w],[U],ca,O);return U}function t(w,O,U,ea){const ca=T(U,!0),ha=T(ea,!0);
U=q(U,500);ea=q(ea,500);if(U&&n.isSome(ca)&&n.isSome(ha))for(let a=0;a<w.length;a++){const e=O[a];if(!e)continue;const {x:D}=w[a],{x:Q}=e;Q>=ha[1]-ea&&Math.abs(D-ca[0])<U?e.x-=ha[1]-ha[0]:Q<=ha[0]+ea&&Math.abs(D-ca[1])<U&&(e.x+=ha[1]-ha[0])}}function b(w){const {inSR:O,outSR:U,datumTransformation:ea,preferPE:ca}=w;if(O.equals(U))return{points:w}=c(w,null),w;if(O.isWebMercator&&U.isWGS84||O.isWGS84&&U.isWebMercator){const {cols:Q,rows:V,xres:ka,yres:ma,usePixelCenter:oa,inSR:pa,outSR:ta}=w;let {xmin:sa,
ymax:wa}=w;oa&&(sa+=ka/2,wa-=ma/2);w=[];var ha=[],a=Math.max(Q,V);for(var e=0;e<a;e++){var D=S.project(new M({x:sa+ka*Math.min(Q,e),y:wa-ma*Math.min(V,e),spatialReference:pa}),ta);e<=Q&&w.push(D.x);e<=V&&ha.push(D.y)}a=[];for(e=0;e<Q;e++)for(D=0;D<V;D++)a.push([w[e],ha[D]]);return a}if(k(O,U,ea)&&ca){if(O.isGeographic)return g(w);ha=u(O);if(n.isSome(ha))return g(w)}return l(w)}function l(w){var {points:O}=c(w,null);const {inSR:U,outSR:ea,datumTransformation:ca}=w;w=O.map(ha=>new M(ha[0],ha[1],U));
O=S.project(w,ea,ca);ca&&t(w,O,U,ea);return O.map(ha=>ha?[ha.x,ha.y]:[NaN,NaN])}function g(w){const {inSR:O,outSR:U,datumTransformation:ea}=w;var ca=u(O);const {points:ha,mask:a}=c(w,ca);O.isGeographic||(w=O.wkid?aa.PeFactory.coordsys(O.wkid):aa.PeFactory.fromString(O.isGeographic?aa.PeDefs.PE_TYPE_GEOGCS:aa.PeDefs.PE_TYPE_PROJCS,O.wkt),aa.PeCSTransformations.projToGeog(w,ha.length,ha));if(n.isSome(ea)&&ea.steps.length){var e;U.isGeographic&&(e=ha.map(([D])=>179.9955<D?1:-179.9955>D?-1:0));ea.steps.forEach(D=>
{const Q=D.wkid?aa.PeFactory.geogtran(D.wkid):aa.PeFactory.fromString(aa.PeDefs.PE_TYPE_GEOGTRAN,D.wkt);aa.PeGTTransformations.geogToGeog(Q,ha.length,ha,null,D.isInverse?aa.PeDefs.PE_TRANSFORM_2_TO_1:aa.PeDefs.PE_TRANSFORM_1_TO_2)});if(e)for(w=0;w<ha.length;w++){ca=e[w];const D=ha[w][0],Q=179.9955<D?1:-179.9955>D?-1:0;ca&&Q&&ca!==Q&&(ha[w][0]=0<ca?D+360:D-360)}}U.isGeographic||(e=u(U,!0),e=n.isSome(e)&&e.isEnvelope?[e.bbox[1],e.bbox[3]]:[-90,90],r(ha,e),e=U.wkid?aa.PeFactory.coordsys(U.wkid):aa.PeFactory.fromString(U.isGeographic?
aa.PeDefs.PE_TYPE_GEOGCS:aa.PeDefs.PE_TYPE_PROJCS,U.wkt),aa.PeCSTransformations.geogToProj(e,ha.length,ha));e=ha;if(a&&ha.length!==a.length){e=[];for(let D=0,Q=0;D<a.length;D++)a[D]?e.push(ha[Q++]):e.push([NaN,NaN])}return e}function u(w,O=!1){var U=w.wkid||w.wkt;if(!U||w.isGeographic)return null;U=String(U);if(da.has(U))return U=da.get(U),O?U?.gcs:U?.pcs;var ea=w.wkid?aa.PeFactory.coordsys(w.wkid):aa.PeFactory.fromString(w.isGeographic?aa.PeDefs.PE_TYPE_GEOGCS:aa.PeDefs.PE_TYPE_PROJCS,w.wkt);w=q(w,
1E-4);w=h(ea,w);ea=h(ea,0,!0);da.set(U,{pcs:w,gcs:ea});return O?ea:w}function h(w,O=0,U=!1){var ea=aa.PePCSInfo.generate(w),ca=U?w.horizonGcsGenerate():w.horizonPcsGenerate();if(!ea||!ca?.length)return null;w=!1;var ha=ca.find(V=>1===V.getInclusive()&&1===V.getKind());if(!ha){ha=ca.find(V=>1===V.getInclusive()&&0===V.getKind());if(!ha)return null;w=!0}U=U?0:(2===ea.getNorthPoleLocation()?1:0)|(2===ea.getSouthPoleLocation()?2:0);ea=ea.isPannableRectangle();ha=ha.getCoord();if(w)return{isEnvelope:w,
isPannable:ea,vertices:ha,coef:null,bbox:[ha[0][0]-O,ha[0][1]-O,ha[1][0]+O,ha[1][1]+O],poleLocation:U};O=0;w=[];let [a,e]=ha[0],[D,Q]=ha[0];for(let V=0,ka=ha.length;V<ka;V++){O++;O===ka&&(O=0);const [ma,oa]=ha[V],[pa,ta]=ha[O];if(ta===oa)w.push([ma,pa,oa,ta,2]);else{ca=(pa-ma)/(ta-oa||1E-4);const sa=ma-ca*oa;oa<ta?w.push([ca,sa,oa,ta,0]):w.push([ca,sa,ta,oa,1])}a=a<ma?a:ma;e=e<oa?e:oa;D=D>ma?D:ma;Q=Q>oa?Q:oa}return{isEnvelope:!1,isPannable:ea,vertices:ha,coef:w,bbox:[a,e,D,Q],poleLocation:U}}function c(w,
O){const U=[],{cols:ea,rows:ca,xres:ha,yres:a,usePixelCenter:e}=w;let {xmin:D,ymax:Q}=w;e&&(D+=ha/2,Q-=a/2);if(n.isNone(O)){for(w=0;w<ea;w++)for(O=0;O<ca;O++)U.push([D+ha*w,Q-a*O]);return{points:U}}w=new Uint8Array(ea*ca);if(O.isEnvelope){const {bbox:[sa,wa,xa,B]}=O;for(let qa=0,fa=0;qa<ea;qa++){var V=D+ha*qa,ka=O.isPannable||V>=sa&&V<=xa;for(var ma=0;ma<ca;ma++,fa++){var oa=Q-a*ma;ka&&oa>=wa&&oa<=B&&(U.push([V,oa]),w[fa]=1)}}return{points:U,mask:w}}V=O.coef;O=[];for(ka=0;ka<ca;ka++){var pa=Q-a*ka;
ma=[];oa=[];for(var ta=0;ta<V.length;ta++){const [sa,wa,xa,B,qa]=V[ta];pa===xa&&xa===B?(ma.push(sa),ma.push(wa),oa.push(2),oa.push(2)):pa>=xa&&pa<=B&&(ma.push(sa*pa+wa),oa.push(qa))}pa=ma;if(2<ma.length){ta=2===oa[0]?0:oa[0];let sa=ma[0];pa=[];for(let wa=1;wa<oa.length;wa++)if(2!==oa[wa]||wa===oa.length-1)oa[wa]!==ta&&(pa.push(0===ta?Math.min(sa,ma[wa-1]):Math.max(sa,ma[wa-1])),ta=oa[wa],sa=ma[wa]),wa===oa.length-1&&pa.push(0===oa[wa]?Math.min(sa,ma[wa]):Math.max(sa,ma[wa]));pa.sort((wa,xa)=>wa-xa)}else ma[0]>
ma[1]&&(pa=[ma[1],ma[0]]);O.push(pa)}for(let sa=0,wa=0;sa<ea;sa++)for(V=D+ha*sa,ka=0;ka<ca;ka++,wa++)if(ma=Q-a*ka,oa=O[ka],2===oa.length)V>=oa[0]&&V<=oa[1]&&(U.push([V,ma]),w[wa]=1);else if(2<oa.length){pa=!1;for(ta=0;ta<oa.length;ta+=2)if(V>=oa[ta]&&V<=oa[ta+1]){pa=!0;break}pa&&(U.push([V,ma]),w[wa]=1)}return{points:U,mask:w}}function r(w,O){const [U,ea]=O;for(O=0;O<w.length;O++){const ca=w[O][1];if(ca<U||ca>ea)w[O]=[NaN,NaN]}}function v(w){const O=P(w[0].spatialReference);if(2>w.length||n.isNone(O))return w[0];
let {xmin:U,xmax:ea,ymin:ca,ymax:ha}=w[0];for(let a=1;a<w.length;a++){const e=w[a];ea=e.xmax+O*a;ca=Math.min(ca,e.ymin);ha=Math.max(ha,e.ymax)}return new L({xmin:U,xmax:ea,ymin:ca,ymax:ha,spatialReference:w[0].spatialReference})}function x(w,O,U=null,ea=!0){var ca=w.spatialReference;if(ca.equals(O))return w;var ha=X(w);const a=P(ca,!0);var e=P(O);if(0===ha||n.isNone(a)||n.isNone(e))return ha=E(w,O,U,ea),n.isNone(a)&&n.isSome(e)&&Math.abs(ha.width-e)<q(O)&&S.isLoaded()&&(ca=u(ca),n.isSome(ca)&&ca.poleLocation===
ja.None&&w.width<(ca.bbox[2]-ca.bbox[0])/2)?A(w,O)||ha:ha;e=w.clone().normalize();if(1===e.length&&w.xmax<a&&w.xmax-a/2>q(ca)){const {xmin:D,xmax:Q}=w;for(let V=0;V<=ha;V++)e[V]=new L({xmin:0===V?D:-a/2,xmax:V===ha?Q-a*V:a/2,ymin:w.ymin,ymax:w.ymax,spatialReference:ca})}w=e.map(D=>E(D,O,U,ea));return v(w.filter(n.isSome))}function A(w,O){const U=P(O);if(n.isNone(U))return null;let {xmin:ea,ymin:ca,xmax:ha,ymax:a}=w;var e=w.spatialReference;w=new y({spatialReference:e,rings:[[[ea,ca],[ha,ca],[ha,a],
[ea,a],[ea,ca]]]});w=S.project(w,O);if(2!==w.rings.length||!w.rings[0].length||!w.rings[1].length)return null;({rings:w}=w);e=q(e);O=new L({spatialReference:O});for(let D=0;2>D;D++){ea=ha=w[D][0][0];ca=a=w[D][0][1];for(let Q=0;Q<w[D].length;Q++)ea=ea>w[D][Q][0]?w[D][Q][0]:ea,ha=ha<w[D][Q][0]?w[D][Q][0]:ha,ca=ca>w[D][Q][1]?w[D][Q][1]:ca,a=a<w[D][Q][1]?w[D][Q][1]:a;if(0===D)O.ymin=ca,O.ymax=a,O.xmin=ea,O.xmax=ha;else if(O.ymin=Math.min(O.ymin,ca),O.ymax=Math.max(O.ymax,a),Math.abs(ha-U/2)<e)O.xmin=
ea,O.xmax+=U;else if(Math.abs(ea+U/2)<e)O.xmax=ha+U;else return null}return O}function E(w,O,U=null,ea=!0,ca=!0){const ha=w.spatialReference;if(ha.equals(O)||!O)return w;k(ha,O,U);const a=S.project(w,O,U);if(ca&&O.isWebMercator&&a&&(a.ymax=Math.min(2.0037508342787E7,a.ymax),a.ymin=Math.max(-2.0037508342787E7,a.ymin),a.ymin>=a.ymax))return null;if(!ea||!a)return a;var e=T(ha,!0);ea=T(O,!0);if(n.isNone(e)||n.isNone(ea))return a;ca=q(ha,.001);const D=q(ha,500);var Q=q(O,.001);if(Math.abs(a.xmin-ea[0])<
Q&&Math.abs(a.xmax-ea[1])<Q){Q=Math.abs(w.xmin-e[0]);e=Math.abs(e[1]-w.xmax);if(Q<ca&&e>D){a.xmin=ea[0];var V=[];V.push(new M(w.xmax,w.ymin,ha));V.push(new M(w.xmax,(w.ymin+w.ymax)/2,ha));V.push(new M(w.xmax,w.ymax,ha));V=V.map(ka=>z(ka,O,U)).filter(ka=>!isNaN(ka?.x)).map(ka=>ka.x);a.xmax=Math.max.apply(null,V)}e<ca&&Q>D&&(a.xmax=ea[1],ea=[],ea.push(new M(w.xmin,w.ymin,ha)),ea.push(new M(w.xmin,(w.ymin+w.ymax)/2,ha)),ea.push(new M(w.xmin,w.ymax,ha)),w=ea.map(ka=>z(ka,O,U)).filter(ka=>!isNaN(ka?.x)).map(ka=>
ka.x),a.xmin=Math.min.apply(null,w))}else w=q(O,.001),Math.abs(a.xmin-ea[0])<w&&(a.xmin=ea[0]),Math.abs(a.xmax-ea[1])<w&&(a.xmax=ea[1]);return a}function P(w,O=!1){return w?w.isWebMercator?2*(O?2.0037508342787E7:2.0037508342788905E7):w.wkid&&w.isGeographic?360:2*Z[w.wkid]||null:null}function T(w,O=!1){if(w.isGeographic)return[-180,180];w=P(w,O);return n.isSome(w)?[-w/2,w/2]:null}function C(w,O,U,ea){w=(w-O)/U;0!==w-Math.floor(w)?w=Math.floor(w):ea&&--w;return w}function X(w,O=!1){var U=P(w.spatialReference);
if(n.isNone(U))return 0;const ea=O?0:-(U/2),ca=q(w.spatialReference),ha=!O&&Math.abs(w.xmin+U/2)<ca?-U/2:w.xmin;w=C(!O&&Math.abs(w.xmax-U/2)<ca?U/2:w.xmax,ea,U,!0);U=C(ha,ea,U,!1);return w-U}function G(w){const {projectedExtent:O,srcBufferExtent:U,pixelSize:ea,datumTransformation:ca,rasterTransform:ha}=w;var a=O.spatialReference;const e=U.spatialReference;var D=k(a,e);const {xmin:Q,ymin:V,xmax:ka,ymax:ma}=O,oa=P(e),pa=n.isSome(oa)&&(w.hasWrapAround||"gcs-shift"===ha?.type);w=w.spacing||[32,32];var ta=
w[0]*ea.x,sa=w[1]*ea.y;const wa=1===w[0],xa=Math.ceil((ka-Q)/ta-.1/w[0])+(wa?0:1),B=Math.ceil((ma-V)/sa-.1/w[1])+(wa?0:1);ta=b({cols:xa,rows:B,xmin:Q,ymax:ma,xres:ta,yres:sa,inSR:a,outSR:e,datumTransformation:ca,preferPE:4>=w[0],usePixelCenter:wa});sa=[];let qa,fa=0;const ua=wa?-1:NaN,{xmin:va,xmax:la,ymax:ya,width:Ba,height:Ca}=U,Ia=q(e,500),Ga=n.isSome(oa)&&0<va&&la>oa/2;var Ja=!1;D&&(Ja=u(a),Ja=n.isSome(Ja)&&0<Ja.poleLocation);for(a=0;a<xa;a++){D=[];for(let Pa=0;Pa<B;Pa++){var Fa=ta[a*B+Pa];pa&&
Fa[0]>la&&Fa[0]>oa/2-Ia?Fa[0]-=oa:pa&&0===a&&0>Fa[0]&&Ga&&!ha&&(Fa[0]+=oa);!Fa||isNaN(Fa[0])||isNaN(Fa[1])?(sa.push(ua),sa.push(ua),D.push(null),fa++):(ha&&(Fa=ha.inverseTransform(new M({x:Fa[0],y:Fa[1],spatialReference:e})),Fa=[Fa.x,Fa.y]),D.push(Fa),0<a&&pa&&qa[Pa]&&Fa[0]<qa[Pa][0]&&(Fa[0]+=oa,Ja&&Fa[0]>la&&Fa[0]>oa&&(Fa[0]-=oa)),sa.push((Fa[0]-va)/Ba),sa.push((ya-Fa[1])/Ca))}qa=D}return{offsets:sa,error:null,coefficients:null,outofBoundPointCount:fa,spacing:w,size:wa?[xa,B]:[xa-1,B-1]}}function I(w,
O,U){const {cols:ea,rows:ca}=O;O=new Float32Array((ea-1)*(ca-1)*12);const ha=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let ma=0;ma<ea-1;ma++){for(var e=0;e<ca-1;e++){var D=ma*ca*2+2*e,Q=w[D];const oa=w[D+1];var V=w[D+2],ka=w[D+3];D+=2*ca;const pa=w[D],ta=w[D+1],sa=w[D+2];D=w[D+3];let wa=0,xa=12*(e*(ea-1)+ma);for(let B=0;3>B;B++)O[xa++]=ha[wa++]*Q+ha[wa++]*V+ha[wa++]*sa;wa=0;for(V=0;3>V;V++)O[xa++]=ha[wa++]*oa+ha[wa++]*ka+ha[wa++]*D;wa=0;for(ka=0;3>ka;ka++)O[xa++]=
a[wa++]*Q+a[wa++]*pa+a[wa++]*sa;wa=0;for(Q=0;3>Q;Q++)O[xa++]=a[wa++]*oa+a[wa++]*ta+a[wa++]*D}if(U)for(e=0;e<O.length;e++)isNaN(O[e])&&(O[e]=-1)}return O}var ja;(function(w){w[w.None=0]="None";w[w.North=1]="North";w[w.South=2]="South";w[w.Both=3]="Both"})(ja||(ja={}));const H=(w,O,U,ea=0)=>{if(1===U[0])return[0,0];var ca=1,ha=-1,a=1,e=-1;for(var D=0;D<w.length;D+=2)isNaN(w[D])||(ca=ca>w[D]?w[D]:ca,ha=ha>w[D]?ha:w[D],a=a>w[D+1]?w[D+1]:a,e=e>w[D+1]?e:w[D+1]);const {cols:Q,rows:V}=O;O=(ha-ca)/Q/U[0];
U=(e-a)/V/U[1];ea*=2;a=0;e=!1;ca=[0,0];for(ha=0;ha<Q-3;ha++){for(D=0;D<V-3;D++){var ka=ha*V*2+2*D;const ma=Math.abs(((w[ka]+w[ka+4]+w[ka+4*V]+w[ka+4*V+4])/4-w[ka+2*V+2])/O);ka=Math.abs(((w[ka+1]+w[ka+5]+w[ka+4*V+1]+w[ka+4*V+5])/4-w[ka+2*V+3])/U);ma+ka>a&&(a=ma+ka,ca=[ma,ka]);if(ea&&a>ea){e=!0;break}}if(e)break}return ca},Z={3395:2.0037508342789244E7,3410:1.7334193943686873E7,3857:2.0037508342788905E7,3975:1.7367530445161372E7,4087:2.0037508342789244E7,4088:2.0015108787169147E7,6933:1.7367530445161372E7,
32662:2.0037508342789244E7,53001:2.001508679602057E7,53002:1.000754339801029E7,53003:2.001508679602057E7,53004:2.001508679602057E7,53016:1.4152803599503474E7,53017:1.7333573624304302E7,53034:2.001508679602057E7,53079:2.0015114352186374E7,53080:2.0015114352186374E7,54001:2.0037508342789244E7,54002:1.0018754171394624E7,54003:2.0037508342789244E7,54004:2.0037508342789244E7,54016:1.4168658027268292E7,54017:1.736753044516137E7,54034:2.0037508342789244E7,54079:2.0037508342789244E7,54080:2.0037508342789244E7,
54100:2.0037508342789244E7,54101:2.0037508342789244E7},da=new Map,Y=new Map;K.computeProjectedScales=function(w,O,U=512,ea=!0){const {extent:ca,spatialReference:ha,pixelSize:a}=w,e=f(new M({x:a.x,y:a.y,spatialReference:ha}),O,ca);if(null==e)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const D=(e.x+e.y)/2;var Q=N.getMetersPerUnitForSR(O),V=D*Q*96*39.37,ka=O.isGeographic?256/U*2.958287637958547E8:256/U*5.91657527591555E8,ma="vector-magdir"===w.dataType||"vector-uv"===
w.dataType,oa=x(ca,O);w=Math.min(Math.ceil(Math.log(Math.min(w.width,w.height)/32)/Math.LN2),Math.ceil(Math.log(ka/2/V)/Math.LN2));!ma&&ea&&(O.isGeographic||O.isWebMercator)&&(ma=0>oa.xmin*oa.xmax,!ma&&3>w&&(ea=P(O),n.isSome(ea)&&(ma=2**w*D*U,U=Math.ceil(ea/ma),ma=1===U||2===U&&ea/2-oa.xmax<ma)));U=V;if(ma)U=ka,ka=O.isGeographic?1.341104507446289E-6:.29858214164761665,Q=96*ka*Q*39.37,O=f(new M({x:ka,y:ka,spatialReference:{wkid:O.isGeographic?4326:3857}}),ha,oa),O.x*=U/Q,O.y*=U/Q;else{O={x:a.x,y:a.y};
for(oa=0;U<.5005*ka&&oa<w;)oa++,U*=2,O.x*=2,O.y*=2;1.001>=Math.max(U,ka)/Math.min(U,ka)&&(U=ka)}ka=[U];oa=[{x:O.x,y:O.y}];for(V=Math.min(70.5310735,V)/1.001;U>=V;)U/=2,O.x/=2,O.y/=2,ka.push(U),oa.push({x:O.x,y:O.y});return{projectedPixelSize:e,scales:ka,srcResolutions:oa,isCustomTilingScheme:!ma}};K.defaultGridSpacing=32;K.defaultProjectionToleranceInPixels=4;K.getDefaultDatumTransformationForDataset=function(w,O,U){return k(w.spatialReference,O)?U?S.getTransformation(O,w.spatialReference,w):S.getTransformation(w.spatialReference,
O,w):null};K.getProjectedGridPoints=b;K.getProjectionOffsetGrid=function(w){var O=w.isAdaptive&&null==w.spacing;let U=w.spacing||[32,32],ea=G(w);var ca={cols:ea.size[0]+1,rows:ea.size[1]+1};const ha=0<ea.outofBoundPointCount&&ea.outofBoundPointCount<ea.offsets.length/2;let a=ea.outofBoundPointCount===ea.offsets.length/2||O&&ha?[0,0]:H(ea.offsets,ca,U,4);const e=(a[0]+a[1])/2;var D=w.projectedExtent.spatialReference;const Q=w.srcBufferExtent.spatialReference;O&&(ha||4<e)&&(J(D,Q,w.datumTransformation)&&
(D.isGeographic||n.isSome(u(D))),U=[4,4],ea=G({...w,spacing:U}),ca={cols:ea.size[0]+1,rows:ea.size[1]+1},a=H(ea.offsets,ca,U,4));ea.error=a;1<U[0]&&(ea.coefficients=I(ea.offsets,ca,ha));!w.includeGCSGrid||D.isGeographic||D.isWebMercator||(Q.isGeographic?ea.gcsGrid={offsets:ea.offsets,coefficients:ea.coefficients,spacing:U}:(O=u(D),n.isSome(O)&&!O.isEnvelope&&(D&&!D.isGeographic&&(O=String(D.wkid||D.wkt),Y.has(O)?D=Y.get(O):(D=(D.wkid?aa.PeFactory.coordsys(D.wkid):aa.PeFactory.fromString(aa.PeDefs.PE_TYPE_PROJCS,
D.wkt)).getGeogcs().getCode(),Y.set(O,D)),D=new p({wkid:D})),D=x(w.projectedExtent,D),{offsets:w}=G({...w,srcBufferExtent:D,spacing:U}),ca=I(w,ca,ha),ea.gcsGrid={offsets:w,coefficients:ca,spacing:U})));return ea};K.getRasterDatasetAlignmentInfo=function(w){const O=w.storageInfo.origin.x;var U=P(w.spatialReference,!0);if(n.isNone(U))return{originX:O,halfWorldWidth:null,pyramidsInfo:null};const ea=U/2,{nativePixelSize:ca,storageInfo:ha,extent:a}=w,{maximumPyramidLevel:e,blockWidth:D,pyramidScalingFactor:Q}=
ha;let V=ca.x;const ka=[];w=n.isSome(w.transform)&&"gcs-shift"===w.transform.type;const ma=O+(w?0:ea);U=w?U-O:ea-O;for(let oa=0;oa<=e;oa++){const pa=(a.xmax-O)/V/D,ta=U/V/D;ka.push({resolutionX:V,blockWidth:D,datsetColumnCount:0===pa-Math.floor(pa)?pa:Math.ceil(pa),worldColumnCountFromOrigin:0===ta-Math.floor(ta)?ta:Math.ceil(ta),leftMargin:Math.round(ma/V)%D,rightPadding:(D-Math.round(U/V)%D)%D,originColumnOffset:Math.floor(ma/V/D)});V*=Q}return{originX:O,halfWorldWidth:ea,pyramidsInfo:ka,hasGCSSShiftTransform:w}};
K.getWorldWidth=P;K.getWorldWrapCount=X;K.load=function(){return d.apply(this,arguments)};K.minimumGridSpacing=4;K.projectExtent=x;K.projectPoint=z;K.projectResolution=f;K.requirePE=J;K.snapExtent=function(w){w=w.clone().normalize();return 1===w.length?w[0]:v(w)};K.snapPyramid=function(w,O,U){const {storageInfo:ea,pixelSize:ca}=O;var ha=0;let a=!1;var {pyramidResolutions:e}=ea;if(n.isSome(e)&&e.length){w=(w.x+w.y)/2;var D=e[e.length-1];D=(D.x+D.y)/2;var Q=(ca.x+ca.y)/2;if(w<=Q)ha=0;else if(w>=D)ha=
e.length,a=8<w/D;else{D=Q;for(let V=1;V<=e.length;V++){Q=(e[V-1].x+e[V-1].y)/2;if(w<=Q){w===Q?ha=V:"down"===U?(ha=V-1,a=8<w/D):ha="up"===U?V:w-D>Q-w||2<w/D?V:V-1;break}D=Q}}U=0===ha?ca:e[ha-1];a&&(e=Math.min(U.x,U.y),w=N.getMetersPerUnitForSR(O.spatialReference),19567<e*w&&(a=!1));return{pyramidLevel:ha,pyramidResolution:new M({x:U.x,y:U.y,spatialReference:O.spatialReference}),excessiveReading:a}}ha=Math.log(w.x/ca.x)/Math.LN2;w=Math.log(w.y/ca.y)/Math.LN2;e=O.storageInfo.maximumPyramidLevel||0;ha=
"down"===U?Math.floor(Math.min(ha,w)):"up"===U?Math.ceil(Math.max(ha,w)):Math.round((ha+w)/2);0>ha?ha=0:ha>e&&(a=ha>e+3,ha=e);U=2**ha;O=new M({x:U*O.nativePixelSize.x,y:U*O.nativePixelSize.y,spatialReference:O.spatialReference});return{pyramidLevel:ha,pyramidResolution:O,excessiveReading:a}};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(K,m,R,F,n,N,aa,S){function L(H){H=C[H];if(!H)throw Error("unknown type");return H}function M(H){return T[H].baseUnit}function y(H,Z=null){Z=Z||L(H);return T[Z].baseUnit===H}function p(H,Z,da){if(Z===da)return H;const Y=L(Z);if(Y!==L(da))throw Error("incompatible units");H=y(Z,Y)?H:H*T[Y].units[Z].inBaseUnits;return y(da,Y)?H:H/T[Y].units[da].inBaseUnits}function J(H,Z){H=p(H,Z,"meters");return 3E3>Math.abs(H)?"meters":"kilometers"}function k(H,Z){H=p(H,Z,"meters");return 1E5>Math.abs(H)?
"meters":"kilometers"}function d(H,Z){H=p(H,Z,"feet");return 1E3>Math.abs(H)?"feet":"miles"}function f(H,Z){H=p(H,Z,"feet");return 1E5>Math.abs(H)?"feet":"miles"}function q(H,Z){H=p(H,Z,"square-meters");return 3E6>Math.abs(H)?"square-meters":"square-kilometers"}function z(H,Z){H=p(H,Z,"square-feet");return 1E6>Math.abs(H)?"square-feet":"square-miles"}function t(H){return P.fromJSON(H.toLowerCase())||null}function b(H){const Z=l(H),da=n.getReferenceEllipsoid(H).metersPerDegree;return Z>=da?"meters":
h(H)}function l(H,Z=N.earth.metersPerDegree){return F.unwrapOr(g(H,!0),Z)}function g(H,Z=!1){const da=F.isSome(H)?H.wkid:null;H=F.isSome(H)?H.wkt:null;let Y=null;if(da){if(aa.isWKIDFromMars(da))return N.mars.metersPerDegree;if(aa.isWKIDFromMoon(da))return N.moon.metersPerDegree;Y=x.values[x[da]];!Y&&Z&&E.has(da)&&(Y=r)}else H&&(/^PROJCS/i.test(H)?Y=u(v.exec(H),Y):/^GEOCCS/i.test(H)&&(Y=u(A.exec(H),Y)));return Y}function u(H,Z){return H&&H[1]?parseFloat(H[1].split(",")[1]):Z}function h(H){var Z=F.isSome(H)?
H.wkid:null,da=F.isSome(H)?H.wkt:null;H=null;if(Z)H=x.units[x[Z]];else if(da&&(Z=/^PROJCS/i.test(da)?v:/^GEOCCS/i.test(da)?A:null)&&(Z=Z.exec(da))&&Z[1]&&(Z=Z[1],H=(H=/[\\"\\']{1}([^\\"\\']+)/.exec(Z))&&H[1],!H||!x.units.includes(H))){Z=parseFloat(Z.split(",")[1]);H=null;da=x.values;for(let Y=0;Y<da.length;++Y)if(1E-7>Math.abs(Z-da[Y])){H=x.units[Y];break}}return F.isSome(H)?t(H):null}function c(H){H=h(H);if(F.isNone(H))return null;switch(H){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const r=N.earth.radius*Math.PI/200,v=/UNIT\[([^\]]+)\]\]$/i,x=S,A=/UNIT\[([^\]]+)\]/i,E=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),P=R.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});m={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};S={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(H=>H*H)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const T={length:{baseUnit:"meters",units:m},area:{baseUnit:"square-meters",units:S},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},C=(()=>{const H={};for(const Z in T)for(const da in T[Z].units)H[da]=Z;return H})(),X="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),G=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),I={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ja={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};m=R.strict()(I);S=R.strict()(ja);R=R.strict()({...I,...ja});K.areaUnitFromSpatialReference=function(H){H=h(H);return F.isNone(H)?null:G.get(H)};K.areaUnitsJSONMap=m;K.baseUnitForUnit=function(H){return M(L(H))};K.baseUnitForUnitType=M;K.convertUnit=p;K.getDefaultUnitForView=function(H){if(F.isNone(H))return"metric";var Z=H.map;if(Z=Z&&"portalItem"in Z?Z.portalItem?.portal:null)switch(Z?.user?.units??Z.units){case "metric":return"metric";case "english":return"imperial"}return F.unwrapOr(c(H.spatialReference),
"metric")};K.getDefaultUnitSystem=c;K.getMetersPerUnit=g;K.getMetersPerUnitForSR=l;K.getMetersPerVerticalUnitForSR=function(H){if(F.isSome(H)&&!aa.isEarth(H))return 1;H=l(H);return 1E5<H?1:H};K.getUnitString=h;K.getVerticalUnitStringForSR=b;K.inchesPerMeter=39.37;K.isBaseUnit=y;K.isMeasurementSystem=function(H){return"imperial"===H||"metric"===H};K.lengthToDegrees=function(H,Z,da){return p(H,Z,"meters")/(da*Math.PI/180)};K.lengthUnitFromSpatialReference=function(H){H=h(H);return F.isNone(H)||!X.includes(H)?
null:H};K.lengthUnitsJSONMap=S;K.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");K.measurementLengthUnits=X;K.preferredAreaUnit=function(H,Z,da){switch(da){case "metric":return q(H,Z);case "imperial":return z(H,Z);default:return da}};K.preferredImperialAreaUnit=z;K.preferredImperialLengthUnit=d;K.preferredImperialVerticalLengthUnit=f;K.preferredLengthUnit=function(H,Z,da){switch(da){case "metric":return J(H,
Z);case "imperial":return d(H,Z);default:return da}};K.preferredMetricAreaUnit=q;K.preferredMetricLengthUnit=J;K.preferredMetricVerticalLengthUnit=k;K.preferredVerticalLengthUnit=function(H,Z,da){switch(da){case "metric":return k(H,Z);case "imperial":return f(H,Z);default:return da}};K.unitFromRESTJSON=t;K.unitToRESTJSON=function(H){return P.toJSON(H)||null};K.unitType=L;K.unitsJSONMap=R;K.verticalLengthUnitFromSpatialReference=function(H){H=b(H);return F.isNone(H)||!X.includes(H)?null:H};Object.defineProperties(K,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(K,m,R,F,n){function N(y){return new R({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${y.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const aa=N(F.earth),S=N(F.mars),L=N(F.moon),M=new R({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${F.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});K.SphericalECEFSpatialReference=aa;K.SphericalPCPFMars=
S;K.SphericalPCPFMoon=L;K.WGS84ECEFSpatialReference=M;K.createSphericalPCPF=N;K.getReferenceEllipsoid=function(y){return m.isSome(y)&&(n.isMars(y)||y===S)?F.mars:m.isSome(y)&&(n.isMoon(y)||y===L)?F.moon:F.earth};K.getReferenceEllipsoidFromWKID=function(y){return n.isWKIDFromMars(y)?F.mars:n.isWKIDFromMoon(y)?F.moon:F.earth};K.getSphericalPCPF=function(y){return y&&(n.isMars(y)||y===S)?S:y&&(n.isMoon(y)||y===L)?L:aa};K.getSphericalPCPFForEllipsoid=function(y){return y&&y===F.mars?S:y&&y===F.moon?L:
aa};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(K,m,R,F,n){function N(){return!!m._pe}function aa(){return!!n("esri-wasm")}function S(){return k?k:k=(new Promise((f,q)=>K(["./pe-wasm"],f,q))).then(f=>f.peWasm).then(({default:f})=>f({locateFile:q=>F.getAssetUrl(`esri/geometry/support/${q}`)})).then(f=>{L(f)})}function L(f){function q(b,
l,g){b[l]=g(b[l])}m._pe=f;m.PeDefs.init();m.PeGTlistExtended.init();m.PeNotationMgrs.init();m.PeNotationUtm.init();m.PePCSInfo.init();m.PeGCSExtent=function(b){function l(){return b.apply(this,arguments)||this}R._inheritsLoose(l,b);l.prototype.destroy=function(){m._pe.destroy(this)};return l}(m._pe.PeGCSExtent);f=[m._pe.PeDatum,m._pe.PeGeogcs,m._pe.PeGeogtran,m._pe.PeObject,m._pe.PeParameter,m._pe.PePrimem,m._pe.PeProjcs,m._pe.PeSpheroid,m._pe.PeUnit];for(var z of f)q(z.prototype,"getName",b=>function(){return b.call(this,
Array(m.PeDefs.PE_NAME_MAX))});for(const b of[m._pe.PeGeogtran,m._pe.PeProjcs])q(b.prototype,"getParameters",l=>function(){const g=Array(m.PeDefs.PE_PARM_MAX);let u=l.call(this);for(let h=0;h<g.length;h++){const c=m._pe.getValue(u,"*");g[h]=c?m._pe.wrapPointer(c,m._pe.PeParameter):null;u+=Int32Array.BYTES_PER_ELEMENT}return g});q(m._pe.PeHorizon.prototype,"getCoord",b=>function(){const l=this.getSize();if(!l)return null;const g=[],u=b.call(this);J(g,l,u);return g});q(m._pe.PeGTlistExtendedEntry.prototype,
"getEntries",b=>{const l=m._pe._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;var u=b.call(this);if(!m._pe.compare(u,m._pe.NULL)){g=[u];const h=this.getSteps();if(1<h){u=m._pe.getPointer(u);for(let c=1;c<h;c++)g.push(m._pe.wrapPointer(u+l*c,m._pe.PeGTlistExtendedGTs))}}return g}});const t=m._pe._pe_getPeHorizonSize();z=b=>function(){let l=this._cache;l||(this._cache=l=new Map);if(l.has(b))return l.get(b);let g=null;var u=b.call(this);if(!m._pe.compare(u,m._pe.NULL)){g=[u];const h=u.getNump();
if(1<h){u=m._pe.getPointer(u);for(let c=1;c<h;c++)g.push(m._pe.wrapPointer(u+t*c,m._pe.PeHorizon))}}l.set(b,g);return g};q(m._pe.PeProjcs.prototype,"horizonGcsGenerate",z);q(m._pe.PeProjcs.prototype,"horizonPcsGenerate",z);m._pe.PeObject.prototype.toString=function(b=m.PeDefs.PE_STR_OPTS_NONE){m._pe.ensureCache.prepare();const l=m._pe.getPointer(this),g=m._pe.ensureInt8(Array(m.PeDefs.PE_BUFFER_MAX));return m._pe.UTF8ToString(m._pe._pe_object_to_string_ext(l,b,g))}}function M(f){if(f){var q=m._pe.getClass(f);
q&&(q=m._pe.getCache(q))&&(f=m._pe.getPointer(f))&&delete q[f]}}function y(f,q){const z=[];q=Array(q);for(let t=0;t<f;t++)z.push(m._pe.ensureInt8(q));return z}function p(f){let q;Array.isArray(f[0])?(q=[],f.forEach(z=>{q.push(z[0],z[1])})):q=f;return q}function J(f,q,z,t=!1){if(t)for(t=0;t<2*q;t++)f[t]=m._pe.getValue(z+t*Float64Array.BYTES_PER_ELEMENT,"double");else{t=0===f.length;for(let b=0;b<q;b++)t&&(f[b]=Array(2)),f[b][0]=m._pe.getValue(z,"double"),f[b][1]=m._pe.getValue(z+Float64Array.BYTES_PER_ELEMENT,
"double"),z+=2*Float64Array.BYTES_PER_ELEMENT}}let k;m._pe=null;m.PeCSTransformations=void 0;(function(f){function q(b,l,g){m._pe.ensureCache.prepare();var u=p(g);const h=g===u;u=m._pe.ensureFloat64(u);(b=m._pe._pe_geog_to_proj(m._pe.getPointer(b),l,u))&&J(g,l,u,h);return b}function z(b,l,g){return t(b,l,g,0)}function t(b,l,g,u){m._pe.ensureCache.prepare();var h=p(g);const c=g===h;h=m._pe.ensureFloat64(h);(b=m._pe._pe_proj_to_geog_center(m._pe.getPointer(b),l,h,u))&&J(g,l,h,c);return b}f.geogToProj=
q;f.projGeog=function(b,l,g,u){switch(u){case m.PeDefs.PE_TRANSFORM_P_TO_G:return z(b,l,g);case m.PeDefs.PE_TRANSFORM_G_TO_P:return q(b,l,g)}return 0};f.projToGeog=z;f.projToGeogCenter=t})(m.PeCSTransformations||(m.PeCSTransformations={}));m.PeDefs=void 0;(function(f){f.init=function(){f.PE_BUFFER_MAX=m._pe.PeDefs.prototype.PE_BUFFER_MAX;f.PE_NAME_MAX=m._pe.PeDefs.prototype.PE_NAME_MAX;f.PE_MGRS_MAX=m._pe.PeDefs.prototype.PE_MGRS_MAX;f.PE_USNG_MAX=m._pe.PeDefs.prototype.PE_USNG_MAX;f.PE_DD_MAX=m._pe.PeDefs.prototype.PE_DD_MAX;
f.PE_DDM_MAX=m._pe.PeDefs.prototype.PE_DDM_MAX;f.PE_DMS_MAX=m._pe.PeDefs.prototype.PE_DMS_MAX;f.PE_UTM_MAX=m._pe.PeDefs.prototype.PE_UTM_MAX;f.PE_PARM_MAX=m._pe.PeDefs.prototype.PE_PARM_MAX;f.PE_TYPE_NONE=m._pe.PeDefs.prototype.PE_TYPE_NONE;f.PE_TYPE_GEOGCS=m._pe.PeDefs.prototype.PE_TYPE_GEOGCS;f.PE_TYPE_PROJCS=m._pe.PeDefs.prototype.PE_TYPE_PROJCS;f.PE_TYPE_GEOGTRAN=m._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;f.PE_TYPE_COORDSYS=m._pe.PeDefs.prototype.PE_TYPE_COORDSYS;f.PE_TYPE_UNIT=m._pe.PeDefs.prototype.PE_TYPE_UNIT;
f.PE_TYPE_LINUNIT=m._pe.PeDefs.prototype.PE_TYPE_LINUNIT;f.PE_STR_OPTS_NONE=m._pe.PeDefs.prototype.PE_STR_OPTS_NONE;f.PE_STR_AUTH_NONE=m._pe.PeDefs.prototype.PE_STR_AUTH_NONE;f.PE_STR_AUTH_TOP=m._pe.PeDefs.prototype.PE_STR_AUTH_TOP;f.PE_STR_NAME_CANON=m._pe.PeDefs.prototype.PE_STR_NAME_CANON;f.PE_PARM_X0=m._pe.PeDefs.prototype.PE_PARM_X0;f.PE_PARM_ND=m._pe.PeDefs.prototype.PE_PARM_ND;f.PE_TRANSFORM_1_TO_2=m._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;f.PE_TRANSFORM_2_TO_1=m._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
f.PE_TRANSFORM_P_TO_G=m._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;f.PE_TRANSFORM_G_TO_P=m._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;f.PE_HORIZON_RECT=m._pe.PeDefs.prototype.PE_HORIZON_RECT;f.PE_HORIZON_POLY=m._pe.PeDefs.prototype.PE_HORIZON_POLY;f.PE_HORIZON_LINE=m._pe.PeDefs.prototype.PE_HORIZON_LINE;f.PE_HORIZON_DELTA=m._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(m.PeDefs||(m.PeDefs={}));m.PeFactory=void 0;(function(f){function q(l,g){let u=null,h=z[l];h||(h={},z[l]=h);h.hasOwnProperty(String(g))?u=
h[g]:(l=m._pe.PeFactory.prototype.factoryByType(l,g),m._pe.compare(l,m._pe.NULL)||(u=l,h[g]=u));return u=b(u)}const z={},t={},b=l=>{if(l){const g=l.getType();switch(g){case m.PeDefs.PE_TYPE_GEOGCS:l=m._pe.castObject(l,m._pe.PeGeogcs);break;case m.PeDefs.PE_TYPE_PROJCS:l=m._pe.castObject(l,m._pe.PeProjcs);break;case m.PeDefs.PE_TYPE_GEOGTRAN:l=m._pe.castObject(l,m._pe.PeGeogtran);break;default:g&m.PeDefs.PE_TYPE_UNIT&&(l=m._pe.castObject(l,m._pe.PeUnit))}}return l};f.initialize=function(){m._pe.PeFactory.prototype.initialize(null)};
f.coordsys=function(l){return q(m.PeDefs.PE_TYPE_COORDSYS,l)};f.factoryByType=q;f.fromString=function(l,g){let u=null,h=t[l];h||(h={},t[l]=h);h.hasOwnProperty(g)?u=h[g]:(l=m._pe.PeFactory.prototype.fromString(l,g),m._pe.compare(l,m._pe.NULL)||(u=l,h[g]=u));return u=b(u)};f.geogcs=function(l){return q(m.PeDefs.PE_TYPE_GEOGCS,l)};f.geogtran=function(l){return q(m.PeDefs.PE_TYPE_GEOGTRAN,l)};f.getCode=function(l){return m._pe.PeFactory.prototype.getCode(l)};f.projcs=function(l){return q(m.PeDefs.PE_TYPE_PROJCS,
l)};f.unit=function(l){return q(m.PeDefs.PE_TYPE_UNIT,l)}})(m.PeFactory||(m.PeFactory={}));m.PeGCSExtent=null;m.PeGTlistExtended=void 0;(function(f){let q;f.init=function(){f.PE_GTLIST_OPTS_COMMON=m._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;q=m._pe._pe_getPeGTlistExtendedEntrySize()};f.getGTlist=function(z,t,b,l,g,u){let h=null;const c=new m._pe.PeInteger(u);try{const r=m._pe.PeGTlistExtended.prototype.getGTlist(z,t,b,l,g,c);if(u=c.val)if(h=[r],1<u){const v=m._pe.getPointer(r);for(z=1;z<
u;z++)h.push(m._pe.wrapPointer(v+q*z,m._pe.PeGTlistExtendedEntry))}}finally{m._pe.destroy(c)}return h}})(m.PeGTlistExtended||(m.PeGTlistExtended={}));m.PeGTlistExtendedEntry=void 0;(function(f){f.destroy=function(q){if(q&&q.length){for(const z of q)M(z),z.getEntries().forEach(t=>{M(t);t=t.getGeogtran();M(t);t.getParameters().forEach(M);[t.getGeogcs1(),t.getGeogcs2()].forEach(b=>{M(b);const l=b.getDatum();M(l);M(l.getSpheroid());M(b.getPrimem());M(b.getUnit())})});m._pe.PeGTlistExtendedEntry.prototype.Delete(q[0])}}})(m.PeGTlistExtendedEntry||
(m.PeGTlistExtendedEntry={}));m.PeGTTransformations=void 0;(function(f){f.geogToGeog=function(q,z,t,b,l){m._pe.ensureCache.prepare();var g=p(t);const u=t===g;g=m._pe.ensureFloat64(g);let h=0;b&&(h=m._pe.ensureFloat64(b));(q=m._pe._pe_geog_to_geog(m._pe.getPointer(q),z,g,h,l))&&J(t,z,g,u);return q}})(m.PeGTTransformations||(m.PeGTTransformations={}));m.PeNotationDms=void 0;(function(f){const q=(t,b,l,g,u,h)=>{m._pe.ensureCache.prepare();switch(t){case "dd":var c=m._pe._pe_geog_to_dd;var r=m.PeDefs.PE_DD_MAX;
break;case "ddm":c=m._pe._pe_geog_to_ddm;r=m.PeDefs.PE_DDM_MAX;break;case "dms":c=m._pe._pe_geog_to_dms,r=m.PeDefs.PE_DMS_MAX}t=0;b&&(t=m._pe.getPointer(b));b=p(g);b=m._pe.ensureFloat64(b);r=y(l,r);g=m._pe.ensureInt32(r);if(u=c(t,l,b,u,g))for(c=0;c<l;c++)h[c]=m._pe.UTF8ToString(r[c]);return u},z=(t,b,l,g,u)=>{m._pe.ensureCache.prepare();switch(t){case "dd":var h=m._pe._pe_dd_to_geog;break;case "ddm":h=m._pe._pe_ddm_to_geog;break;case "dms":h=m._pe._pe_dms_to_geog}t=0;b&&(t=m._pe.getPointer(b));b=
g.map(c=>m._pe.ensureString(c));g=m._pe.ensureInt32(b);b=m._pe.ensureFloat64(Array(2*l));(h=h(t,l,g,b))&&J(u,l,b);return h};f.geogToDms=function(t,b,l,g,u){return q("dms",t,b,l,g,u)};f.dmsToGeog=function(t,b,l,g){return z("dms",t,b,l,g)};f.geogToDdm=function(t,b,l,g,u){return q("ddm",t,b,l,g,u)};f.ddmToGeog=function(t,b,l,g){return z("ddm",t,b,l,g)};f.geogToDd=function(t,b,l,g,u){return q("dd",t,b,l,g,u)};f.ddToGeog=function(t,b,l,g){return z("dd",t,b,l,g)}})(m.PeNotationDms||(m.PeNotationDms={}));
m.PeNotationMgrs=void 0;(function(f){f.init=function(){f.PE_MGRS_STYLE_NEW=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;f.PE_MGRS_STYLE_OLD=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;f.PE_MGRS_STYLE_AUTO=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;f.PE_MGRS_180_ZONE_1_PLUS=m._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;f.PE_MGRS_ADD_SPACES=m._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};f.geogToMgrsExtended=function(q,z,t,b,l,g,u){m._pe.ensureCache.prepare();let h=0;q&&
(h=m._pe.getPointer(q));q=p(t);t=m._pe.ensureFloat64(q);q=y(z,m.PeDefs.PE_MGRS_MAX);const c=m._pe.ensureInt32(q);if(b=m._pe._pe_geog_to_mgrs_extended(h,z,t,b,l,g,c))for(l=0;l<z;l++)u[l]=m._pe.UTF8ToString(q[l]);return b};f.mgrsToGeogExtended=function(q,z,t,b,l){m._pe.ensureCache.prepare();let g=0;q&&(g=m._pe.getPointer(q));q=t.map(u=>m._pe.ensureString(u));t=m._pe.ensureInt32(q);q=m._pe.ensureFloat64(Array(2*z));(b=m._pe._pe_mgrs_to_geog_extended(g,z,t,b,q))&&J(l,z,q);return b}})(m.PeNotationMgrs||
(m.PeNotationMgrs={}));m.PeNotationUsng=void 0;(function(f){f.geogToUsng=function(q,z,t,b,l,g,u){m._pe.ensureCache.prepare();let h=0;q&&(h=m._pe.getPointer(q));q=p(t);t=m._pe.ensureFloat64(q);q=y(z,m.PeDefs.PE_MGRS_MAX);const c=m._pe.ensureInt32(q);if(b=m._pe._pe_geog_to_usng(h,z,t,b,l,g,c))for(l=0;l<z;l++)u[l]=m._pe.UTF8ToString(q[l]);return b};f.usngToGeog=function(q,z,t,b){m._pe.ensureCache.prepare();var l=0;q&&(l=m._pe.getPointer(q));q=t.map(g=>m._pe.ensureString(g));t=m._pe.ensureInt32(q);q=
m._pe.ensureFloat64(Array(2*z));(l=m._pe._pe_usng_to_geog(l,z,t,q))&&J(b,z,q);return l}})(m.PeNotationUsng||(m.PeNotationUsng={}));m.PeNotationUtm=void 0;(function(f){f.init=function(){f.PE_UTM_OPTS_NONE=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;f.PE_UTM_OPTS_ADD_SPACES=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;f.PE_UTM_OPTS_NS=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};f.geogToUtm=function(q,z,t,b,l){m._pe.ensureCache.prepare();var g=0;q&&(g=m._pe.getPointer(q));q=p(t);t=m._pe.ensureFloat64(q);
q=y(z,m.PeDefs.PE_UTM_MAX);const u=m._pe.ensureInt32(q);if(b=m._pe._pe_geog_to_utm(g,z,t,b,u))for(g=0;g<z;g++)l[g]=m._pe.UTF8ToString(q[g]);return b};f.utmToGeog=function(q,z,t,b,l){m._pe.ensureCache.prepare();let g=0;q&&(g=m._pe.getPointer(q));q=t.map(u=>m._pe.ensureString(u));t=m._pe.ensureInt32(q);q=m._pe.ensureFloat64(Array(2*z));(b=m._pe._pe_utm_to_geog(g,z,t,b,q))&&J(l,z,q);return b}})(m.PeNotationUtm||(m.PeNotationUtm={}));m.PePCSInfo=void 0;(function(f){const q=new Map;f.init=function(){f.PE_PCSINFO_OPTION_NONE=
m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;f.PE_PCSINFO_OPTION_DOMAIN=m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;f.PE_POLE_OUTSIDE_BOUNDARY=m._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;f.PE_POLE_POINT=m._pe.PePCSInfo.prototype.PE_POLE_POINT};f.generate=function(z,t=f.PE_PCSINFO_OPTION_DOMAIN){let b=null,l=null;q.has(z)&&(l=q.get(z),l[t]&&(b=l[t]));b||(b=m._pe.PePCSInfo.prototype.generate(z,t),l||(l=[],q.set(z,l)),l[t]=b);return b}})(m.PePCSInfo||(m.PePCSInfo={}));m.PeVersion=void 0;
(function(f){f.versionString=function(){return m._pe.PeVersion.prototype.version_string()}})(m.PeVersion||(m.PeVersion={}));const d=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return m._pe},isLoaded:N,isSupported:aa,load:S,get PeCSTransformations(){return m.PeCSTransformations},get PeDefs(){return m.PeDefs},get PeFactory(){return m.PeFactory},get PeGCSExtent(){return m.PeGCSExtent},get PeGTlistExtended(){return m.PeGTlistExtended},get PeGTlistExtendedEntry(){return m.PeGTlistExtendedEntry},
get PeGTTransformations(){return m.PeGTTransformations},get PeNotationDms(){return m.PeNotationDms},get PeNotationMgrs(){return m.PeNotationMgrs},get PeNotationUsng(){return m.PeNotationUsng},get PeNotationUtm(){return m.PeNotationUtm},get PePCSInfo(){return m.PePCSInfo},get PeVersion(){return m.PeVersion},_init:L},Symbol.toStringTag,{value:"Module"}));m._init=L;m.isLoaded=N;m.isSupported=aa;m.load=S;m.pe=d})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y,p,J,k,d,f,q,z,t,b,l,g,u,h,c,r,v){function x(){return!!Ua&&f.isLoaded()}function A(W){N.isNone(Qa)&&(Qa=Promise.all([f.load(),(new Promise((ia,ba)=>K(["../chunks/geometryEngineBase"],ia,ba))).then(ia=>ia.geometryEngineBase),new Promise((ia,ba)=>K(["./geometryAdapters/hydrated"],ia,ba))]));return Qa.then(([,ia,{hydratedAdapter:ba}])=>{aa.throwIfAborted(W);Wa=ba;Ua=ia.default;Ua._enableProjection(f.pe);hb.notify()})}function E(W,ia,ba=null,ra=null){return Array.isArray(W)?
0===W.length?[]:P(Wa,W,W[0].spatialReference,ia,ba,ra):P(Wa,[W],W.spatialReference,ia,ba,ra)[0]}function P(W,ia,ba,ra,za=null,Aa=null){if(N.isNone(ba)||N.isNone(ra))return ia;if(G(ba,ra,za))return ia.map(Da=>N.unwrap(ja(Da,ba,ra)));if(N.isNone(za)){const Da=h.cacheKey(ba,ra);void 0!==db[Da]?za=db[Da]:(za=C(ba,ra,void 0),N.isNone(za)&&(za=new h),db[Da]=za)}if(N.isNone(Ua)||N.isNone(W))throw new eb;return N.isSome(Aa)?Ua._project(W,ia,ba,ra,za,Aa):Ua._project(W,ia,ba,ra,za)}function T(W,ia){if(!x())for(const ba of W)if(N.isSome(ba)&&
!c.equals(ba.spatialReference,ia)&&c.isValid(ba.spatialReference)&&c.isValid(ia)&&!G(ba.spatialReference,ia))return L.trackAccess(hb),{pending:A(),geometries:null};return{pending:null,geometries:W.map(ba=>N.isNone(ba)?null:c.equals(ba.spatialReference,ia)?ba:c.isValid(ba.spatialReference)&&c.isValid(ia)?X(ba,ia):null)}}function C(W,ia,ba=null){if(N.isNone(W)||N.isNone(ia))return null;if(N.isNone(Ua)||N.isNone(Wa))throw new eb;W=Ua._getTransformation(Wa,W,ia,ba,ba?.spatialReference);return null!==
W?h.fromGE(W):null}function X(W,ia){try{const ba=E(W,ia);if(null==ba)return null;"xmin"in W&&"xmin"in ba&&(ba.zmin=W.zmin,ba.zmax=W.zmax);const ra=v.getGeometryZScaler(ba.type,W.spatialReference,ia);N.isSome(ra)&&ra(ba);return ba}catch(ba){if(!(ba instanceof eb))throw ba;return null}}function G(W,ia,ba){return ba?!1:c.equals(W,ia)?!0:c.isValid(W)&&c.isValid(ia)&&!!Ra(W,ia,gb)}function I(){I=R._asyncToGenerator(function*(W,ia,ba,ra){if(x())return aa.waitTick(ra);if(Array.isArray(W))for(const {source:za,
dest:Aa,geographicTransformation:Da}of W){if(!G(za,Aa,Da))return A(ra)}else if(!G(W,ia,ba))return A(ra);return aa.waitTick(ra)});return I.apply(this,arguments)}function ja(W,ia,ba){return W?"x"in W?H(W,ia,new q,ba,0):"xmin"in W?w(W,ia,new k,ba,0):"rings"in W?Y(W,ia,new z,ba,0):"paths"in W?da(W,ia,new t,ba,0):"points"in W?Z(W,ia,new d,ba,0):null:null}function H(W,ia,ba,ra,za){Ha[0]=W.x;Ha[1]=W.y;const Aa=W.z;Ha[2]=void 0!==Aa?Aa:za;if(!ca(Ha,ia,0,Ha,ra,0,1))return null;ba.x=Ha[0];ba.y=Ha[1];ba.spatialReference=
ra;void 0===Aa?(ba.z=void 0,ba.hasZ=!1):(ba.z=Ha[2],ba.hasZ=!0);void 0===W.m?(ba.m=void 0,ba.hasM=!1):(ba.m=W.m,ba.hasM=!0);return ba}function Z(W,ia,ba,ra,za){const {points:Aa,hasZ:Da,hasM:Ea}=W;W=[];const Oa=Aa.length,Na=[];for(var La of Aa)Na.push(La[0],La[1],Da?La[2]:za);if(!ca(Na,ia,0,Na,ra,0,Oa))return null;for(ia=0;ia<Oa;++ia){za=3*ia;La=Na[za];const Sa=Na[za+1];Da&&Ea?W.push([La,Sa,Na[za+2],Aa[ia][3]]):Da?W.push([La,Sa,Na[za+2]]):Ea?W.push([La,Sa,Aa[ia][2]]):W.push([La,Sa])}ba.points=W;ba.spatialReference=
ra;ba.hasZ=Da;ba.hasM=Ea;return ba}function da(W,ia,ba,ra,za){const {paths:Aa,hasZ:Da,hasM:Ea}=W;W=[];if(!ha(Aa,Da??!1,Ea??!1,ia,W,ra,za))return null;ba.paths=W;ba.spatialReference=ra;ba.hasZ=Da;ba.hasM=Ea;return ba}function Y(W,ia,ba,ra,za){const {rings:Aa,hasZ:Da,hasM:Ea}=W;W=[];if(!ha(Aa,Da??!1,Ea??!1,ia,W,ra,za))return null;ba.rings=W;ba.spatialReference=ra;ba.hasZ=Da;ba.hasM=Ea;return ba}function w(W,ia,ba,ra,za){const {xmin:Aa,ymin:Da,xmax:Ea,ymax:Oa,hasZ:Na,hasM:La}=W;if(!O(Aa,Da,Na?W.zmin:
za,ia,Ha,ra))return null;ba.xmin=Ha[0];ba.ymin=Ha[1];Na&&(ba.zmin=Ha[2]);if(!O(Ea,Oa,Na?W.zmax:za,ia,Ha,ra))return null;ba.xmax=Ha[0];ba.ymax=Ha[1];Na&&(ba.zmax=Ha[2]);La&&(ba.mmin=W.mmin,ba.mmax=W.mmax);ba.spatialReference=ra;return ba}function O(W,ia,ba,ra,za,Aa){Ka[0]=W;Ka[1]=ia;Ka[2]=ba;return ca(Ka,ra,0,za,Aa,0,1)}function U(W,ia,ba,ra){if(N.isNone(ia)||N.isNone(ra)||2>W.length)return!1;2===W.length&&(Ka[0]=W[0],Ka[1]=W[1],Ka[2]=0,W=Ka);return ca(W,ia,0,ba,ra,0,1)}function ea(W,ia,ba){if(N.isNone(ia))return!1;
ia=Q(ia,ab);ia=Va[ia][na.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ia))return!1;ia(W,0,Ka,0);ba!==Ka&&(ba[0]=Ka[0],ba[1]=Ka[1],2<ba.length&&(ba[2]=Ka[2]));return!0}function ca(W,ia,ba,ra,za,Aa,Da=1){ia=Ra(ia,za,gb);if(N.isNone(ia))return!1;if(ia===V){if(W===ra&&ba===Aa)return!0;Da=ba+3*Da;for(let Ea=ba,Oa=Aa;Ea<Da;Ea++,Oa++)ra[Oa]=W[Ea];return!0}Da=ba+3*Da;for(let Ea=ba,Oa=Aa;Ea<Da;Ea+=3,Oa+=3)ia(W,Ea,ra,Oa);return!0}function ha(W,ia,ba,ra,za,Aa,Da=0){const Ea=[];for(const Oa of W)for(const Na of Oa)Ea.push(Na[0],
Na[1],ia?Na[2]:Da);if(!ca(Ea,ra,0,Ea,Aa,0,Ea.length/3))return!1;ra=0;za.length=0;for(const Oa of W){W=[];for(const Na of Oa)ia&&ba?W.push([Ea[ra++],Ea[ra++],Ea[ra++],Na[3]]):ia?W.push([Ea[ra++],Ea[ra++],Ea[ra++]]):(ba?W.push([Ea[ra++],Ea[ra++],Na[2]]):W.push([Ea[ra++],Ea[ra++]]),ra++);za.push(W)}return!0}function a(W,ia,ba,ra){ia=ra+ia;if(ia<ra/2||ba>ia)return Number.MAX_VALUE;W=Math.abs(Xa*W)+Math.asin(ba/ia);return W>=Math.PI/2?Number.MAX_VALUE:ba/Math.cos(W)}function e(W,ia,ba){const ra=Math.sin(W);
W=Math.cos(W);const za=Math.sin(ia);ia=Math.cos(ia);ba[0]=-ra;ba[4]=-za*W;ba[8]=ia*W;ba[12]=0;ba[1]=W;ba[5]=-za*ra;ba[9]=ia*ra;ba[13]=0;ba[2]=0;ba[6]=ia;ba[10]=za;ba[14]=0;ba[3]=0;ba[7]=0;ba[11]=0;ba[15]=1;return ba}function D(W,ia,ba){e(W,ia,ba);y.transpose(ba,ba);return ba}function Q(W,ia){if(!W)return na.UNKNOWN;if(ia.spatialReference===W)return ia.spatialReferenceId;ia.spatialReference=W;"metersPerUnit"in ia&&(ia.metersPerUnit=S.getMetersPerUnitForSR(W,1));return W.wkt===b.SphericalECEFSpatialReference.wkt?
ia.spatialReferenceId=na.SPHERICAL_ECEF:c.isWGS84(W)?ia.spatialReferenceId=na.WGS84:c.isWebMercator(W)?ia.spatialReferenceId=na.WEB_MERCATOR:c.isPlateCarree(W)?ia.spatialReferenceId=na.PLATE_CARREE:W.wkt===b.WGS84ECEFSpatialReference.wkt?ia.spatialReferenceId=na.WGS84_ECEF:W.wkid===r.SupportedGCSWkids.CGCS2000?ia.spatialReferenceId=na.CGCS2000:W.wkt===b.SphericalPCPFMars.wkt?ia.spatialReferenceId=na.SPHERICAL_MARS_PCPF:W.wkt===b.SphericalPCPFMoon.wkt?ia.spatialReferenceId=na.SPHERICAL_MOON_PCPF:c.isMars(W)?
ia.spatialReferenceId=na.GCSMARS2000:c.isMoon(W)?ia.spatialReferenceId=na.GCSMOON2000:ia.spatialReferenceId=na.UNKNOWN}function V(W,ia,ba,ra){W!==ba&&(ba[ra++]=W[ia++],ba[ra++]=W[ia++],ba[ra]=W[ia])}function ka(W,ia,ba,ra){ba[ra++]=bb*(W[ia++]/g.earth.radius);ba[ra++]=bb*(Math.PI/2-2*Math.atan(Math.exp(-W[ia++]/g.earth.radius)));ba[ra]=W[ia]}function ma(W,ia,ba,ra){ka(W,ia,ba,ra);ua(ba,ra,ba,ra)}function oa(W,ia,ba,ra){ka(W,ia,ba,ra);Ga(ba,ra,ba,ra)}function pa(W,ia,ba,ra,za){var Aa=.4999999*Math.PI;
Aa=n.clamp(Xa*W[ia+1],-Aa,Aa);Aa=Math.sin(Aa);ba[ra++]=Xa*W[ia]*za.radius;ba[ra++]=za.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));ba[ra]=W[ia+2]}function ta(W,ia,ba,ra){pa(W,ia,ba,ra,g.earth)}function sa(W,ia,ba,ra){ba[ra]=W[ia]*ib;ba[ra+1]=W[ia+1]*ib;ba[ra+2]=W[ia+2]}function wa(W,ia,ba,ra){ba[ra]=W[ia]*cb;ba[ra+1]=W[ia+1]*cb;ba[ra+2]=W[ia+2]}function xa(W,ia,ba,ra){ka(W,ia,ba,ra);sa(ba,ra,ba,ra)}function B(W,ia,ba,ra,za){za+=W[ia+2];const Aa=Xa*W[ia+1];W=Xa*W[ia];ia=Math.cos(Aa);ba[ra++]=Math.cos(W)*
ia*za;ba[ra++]=Math.sin(W)*ia*za;ba[ra]=Math.sin(Aa)*za}function qa(W,ia,ba,ra){B(W,ia,ba,ra,g.moon.radius)}function fa(W,ia,ba,ra){B(W,ia,ba,ra,g.mars.radius)}function ua(W,ia,ba,ra){B(W,ia,ba,ra,g.earth.radius)}function va(W,ia,ba,ra,za){var Aa=W[ia];const Da=W[ia+1];ia=W[ia+2];W=Math.sqrt(Aa*Aa+Da*Da+ia*ia);ia=n.asinClamped(ia/(0===W?1:W));Aa=Math.atan2(Da,Aa);ba[ra++]=bb*Aa;ba[ra++]=bb*ia;ba[ra]=W-za}function la(W,ia,ba,ra){va(W,ia,ba,ra,g.moon.radius)}function ya(W,ia,ba,ra){va(W,ia,ba,ra,g.mars.radius)}
function Ba(W,ia,ba,ra){va(W,ia,ba,ra,g.earth.radius)}function Ca(W,ia,ba,ra){Ba(W,ia,ba,ra);ta(ba,ra,ba,ra)}function Ia(W,ia,ba,ra){Ba(W,ia,ba,ra);Ga(ba,ra,ba,ra)}function Ga(W,ia,ba,ra){var za=g.earth;const Aa=Xa*W[ia];var Da=Xa*W[ia+1];W=W[ia+2];ia=Math.sin(Da);Da=Math.cos(Da);const Ea=za.radius/Math.sqrt(1-za.eccentricitySquared*ia*ia);ba[ra++]=(Ea+W)*Da*Math.cos(Aa);ba[ra++]=(Ea+W)*Da*Math.sin(Aa);ba[ra++]=(Ea*(1-za.eccentricitySquared)+W)*ia}function Ja(W,ia,ba,ra){var za=u.earthEllipsoidConstants,
Aa=W[ia],Da=W[ia+1];W=W[ia+2];let Ea;ia=Math.abs(W);var Oa=Aa*Aa+Da*Da;var Na=Math.sqrt(Oa);var La=Oa+W*W;var Sa=Math.sqrt(La);Aa=Math.atan2(Da,Aa);var Za=W*W/La;La=Oa/La;Da=za.a2/Sa;Oa=za.a3-za.a4/Sa;.3<La?(Za=ia/Sa*(1+La*(za.a1+Da+Za*Oa)/Sa),Sa=Math.asin(Za),Da=Za*Za,La=Math.sqrt(1-Da)):(La=Na/Sa*(1-Za*(za.a5-Da-La*Oa)/Sa),Sa=Math.acos(La),Da=1-La*La,Za=Math.sqrt(Da));Ea=1-g.earth.eccentricitySquared*Da;Da=g.earth.radius/Math.sqrt(Ea);za=za.a6*Da;Da=Na-Da*La;Oa=ia-za*Za;ia=La*Da+Za*Oa;Na=La*Oa-
Za*Da;za=Na/(za/Ea+ia);Sa+=za;0>W&&(Sa=-Sa);ba[ra++]=bb*Aa;ba[ra++]=bb*Sa;ba[ra]=ia+Na*za/2}function Fa(W,ia,ba,ra){Ja(W,ia,ba,ra);ua(ba,ra,ba,ra)}function Pa(W,ia,ba,ra){Ja(W,ia,ba,ra);ta(ba,ra,ba,ra)}function Ra(W,ia,ba=Ma()){return N.isNone(W)||N.isNone(ia)?null:Ta(W,ia,ba).projector}function Ta(W,ia,ba){if(N.isNone(W)||N.isNone(ia)||ba.source.spatialReference===W&&ba.dest.spatialReference===ia)return ba;const ra=Q(W,ba.source),za=Q(ia,ba.dest);ra===na.UNKNOWN&&za===na.UNKNOWN?c.equals(W,ia)?ba.projector=
V:ba.projector=null:ba.projector=Va[ra][za];return ba}function Ma(){return{source:{spatialReference:null,spatialReferenceId:na.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:na.UNKNOWN,metersPerUnit:1},projector:V}}let Ua=null,Wa=null,Qa=null,db={};const hb=new M.SimpleObservable;let eb=function(W){function ia(){return W.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}R._inheritsLoose(ia,W);return ia}(F);var na;(function(W){W[W.UNKNOWN=
0]="UNKNOWN";W[W.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";W[W.WGS84=2]="WGS84";W[W.WEB_MERCATOR=3]="WEB_MERCATOR";W[W.WGS84_ECEF=4]="WGS84_ECEF";W[W.CGCS2000=5]="CGCS2000";W[W.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";W[W.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";W[W.GCSMARS2000=8]="GCSMARS2000";W[W.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";W[W.GCSMOON2000=10]="GCSMOON2000";W[W.LON_LAT=11]="LON_LAT";W[W.PLATE_CARREE=12]="PLATE_CARREE"})(na||(na={}));const ib=g.earth.radius*Math.PI/180,
cb=180/(g.earth.radius*Math.PI),Va={[na.WGS84]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:V,[na.SPHERICAL_ECEF]:ua,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:ta,[na.PLATE_CARREE]:sa,[na.WGS84]:V,[na.WGS84_ECEF]:Ga},[na.CGCS2000]:{[na.CGCS2000]:V,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:V,[na.SPHERICAL_ECEF]:ua,[na.SPHERICAL_MARS_PCPF]:null,
[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:sa,[na.WGS84]:null,[na.WGS84_ECEF]:Ga},[na.GCSMARS2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:V,[na.GCSMOON2000]:null,[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:fa,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.GCSMOON2000]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:V,
[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:qa,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.WEB_MERCATOR]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:ka,[na.WGS84_COMPARABLE_LON_LAT]:ka,[na.SPHERICAL_ECEF]:ma,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:V,[na.PLATE_CARREE]:xa,
[na.WGS84]:ka,[na.WGS84_ECEF]:oa},[na.WGS84_ECEF]:{[na.CGCS2000]:Ja,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:Ja,[na.WGS84_COMPARABLE_LON_LAT]:Ja,[na.SPHERICAL_ECEF]:Fa,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:Pa,[na.PLATE_CARREE]:function(W,ia,ba,ra){Ja(W,ia,ba,ra);sa(ba,ra,ba,ra)},[na.WGS84]:Ja,[na.WGS84_ECEF]:V},[na.SPHERICAL_ECEF]:{[na.CGCS2000]:Ba,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:Ba,[na.WGS84_COMPARABLE_LON_LAT]:Ba,
[na.SPHERICAL_ECEF]:V,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:Ca,[na.PLATE_CARREE]:function(W,ia,ba,ra){Ba(W,ia,ba,ra);sa(ba,ra,ba,ra)},[na.WGS84]:Ba,[na.WGS84_ECEF]:Ia},[na.SPHERICAL_MARS_PCPF]:{[na.CGCS2000]:null,[na.GCSMARS2000]:ya,[na.GCSMOON2000]:null,[na.LON_LAT]:ya,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:V,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,
[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.SPHERICAL_MOON_PCPF]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:la,[na.LON_LAT]:la,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:V,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.UNKNOWN]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:null,[na.WGS84_COMPARABLE_LON_LAT]:null,[na.SPHERICAL_ECEF]:null,
[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:V,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:null,[na.WGS84]:null,[na.WGS84_ECEF]:null},[na.LON_LAT]:{[na.CGCS2000]:V,[na.GCSMARS2000]:V,[na.GCSMOON2000]:V,[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:V,[na.SPHERICAL_ECEF]:ua,[na.SPHERICAL_MARS_PCPF]:fa,[na.SPHERICAL_MOON_PCPF]:qa,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:ta,[na.PLATE_CARREE]:sa,[na.WGS84]:V,[na.WGS84_ECEF]:Ga},[na.WGS84_COMPARABLE_LON_LAT]:{[na.CGCS2000]:null,[na.GCSMARS2000]:null,
[na.GCSMOON2000]:null,[na.LON_LAT]:V,[na.WGS84_COMPARABLE_LON_LAT]:V,[na.SPHERICAL_ECEF]:ua,[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,[na.UNKNOWN]:null,[na.WEB_MERCATOR]:null,[na.PLATE_CARREE]:sa,[na.WGS84]:V,[na.WGS84_ECEF]:Ga},[na.PLATE_CARREE]:{[na.CGCS2000]:wa,[na.GCSMARS2000]:null,[na.GCSMOON2000]:null,[na.LON_LAT]:wa,[na.WGS84_COMPARABLE_LON_LAT]:wa,[na.SPHERICAL_ECEF]:function(W,ia,ba,ra){wa(W,ia,ba,ra);ua(ba,ra,ba,ra)},[na.SPHERICAL_MARS_PCPF]:null,[na.SPHERICAL_MOON_PCPF]:null,
[na.UNKNOWN]:null,[na.WEB_MERCATOR]:function(W,ia,ba,ra){wa(W,ia,ba,ra);ta(ba,ra,ba,ra)},[na.PLATE_CARREE]:V,[na.WGS84]:wa,[na.WGS84_ECEF]:function(W,ia,ba,ra){wa(W,ia,ba,ra);Ga(ba,ra,ba,ra)}}},ab={spatialReference:null,spatialReferenceId:na.UNKNOWN},jb={spatialReference:null,spatialReferenceId:na.UNKNOWN},gb=Ma(),kb=Ma(),Xa=n.deg2rad(1),bb=n.rad2deg(1),Ka=J.create(),Ya=J.create(),$a=J.create(),Ha=J.create(),fb=J.create();m.canProjectToWGS84ComparableLonLat=function(W){if(N.isNone(W))return!1;W=Q(W,
ab);return!!Va[W][na.WGS84_COMPARABLE_LON_LAT]};m.canProjectWithoutEngine=G;m.computeENUToSphericalPCPFLocalRotation=e;m.computeSphericalPCPFToENULocalRotation=D;m.computeTranslationToOriginAndRotation=function(W,ia,ba,ra){if(N.isNone(W)||N.isNone(ra))return!1;var za=Q(W,ab),Aa=Q(ra,jb);if(za===Aa&&Aa!==na.SPHERICAL_ECEF&&Aa!==na.SPHERICAL_MARS_PCPF&&Aa!==na.SPHERICAL_MOON_PCPF&&(za!==na.UNKNOWN||c.equals(W,ra)))return y.fromTranslation(ba,ia),!0;if(Aa===na.SPHERICAL_ECEF||Aa===na.SPHERICAL_MARS_PCPF||
Aa===na.SPHERICAL_MOON_PCPF){za=Va[za][na.LON_LAT];Aa=Va[na.LON_LAT][Aa];if(N.isNone(za)||N.isNone(Aa))return!1;za(ia,0,Ya,0);Aa(Ya,0,$a,0);e(Xa*Ya[0],Xa*Ya[1],ba);ba[12]=$a[0];ba[13]=$a[1];ba[14]=$a[2];return!0}if((Aa===na.WEB_MERCATOR||Aa===na.PLATE_CARREE)&&(za===na.WGS84||za===na.CGCS2000&&Aa===na.PLATE_CARREE||za===na.SPHERICAL_ECEF||za===na.WEB_MERCATOR)){W=Va[za][na.LON_LAT];Aa=Va[na.LON_LAT][Aa];if(N.isNone(W)||N.isNone(Aa))return!1;W(ia,0,Ya,0);Aa(Ya,0,$a,0);za===na.SPHERICAL_ECEF?D(Xa*Ya[0],
Xa*Ya[1],ba):y.identity(ba);ba[12]=$a[0];ba[13]=$a[1];ba[14]=$a[2];return!0}return!1};m.getProjectorName=function(W,ia){switch(Ra(W,ia,gb)){case V:return"copy3";case ua:return"wgs84ToSphericalECEF";case ta:return"wgs84ToWebMercator";case sa:return"wgs84ToPlateCarree";case Ga:return"wgs84ToWGS84ECEF";case ka:return"webMercatorToWGS84";case ma:return"webMercatorToSphericalECEF";case oa:return"webMercatorToWGS84ECEF";case xa:return"webMercatorToPlateCarree";case Ja:return"wgs84ECEFToWGS84";case Fa:return"wgs84ECEFToSphericalECEF";
case Pa:return"wgs84ECEFToWebMercator";case Ba:return"sphericalECEFToWGS84";case Ca:return"sphericalECEFToWebMercator";case ya:return"sphericalMarsPCPFToMars2000";case la:return"sphericalMoonPCPFToMoon2000";case Ia:return"sphericalECEFToWGS84ECEF";case fa:return"mars2000ToSphericalPCPF";case qa:return"moon2000ToSphericalPCPF";default:return null}};m.getTransformation=C;m.getTransformations=function(W,ia,ba=null){if(N.isNone(Ua)||N.isNone(Wa))throw new eb;W=Ua._getTransformationBySuitability(Wa,W,
ia,ba,ba?.spatialReference);if(null!==W){ia=[];for(const ra of W)ia.push(h.fromGE(ra));return ia}return[]};m.initializeProjection=function(W,ia,ba,ra){return I.apply(this,arguments)};m.isLoaded=x;m.load=A;m.localLinearScaleFactors=function(W,ia,ba,ra){if(N.isNone(ia)||N.isNone(ra))return!1;const za=Q(ia,ab);var Aa=Q(ra,jb);if(za===Aa&&za!==na.UNKNOWN||c.equals(ia,ra))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(za===na.SPHERICAL_ECEF){ia=p.length(W);W=ia/Math.sqrt(W[0]*W[0]+W[1]*W[1]);ia/=g.earth.radius;
if(Aa===na.WEB_MERCATOR)return ba[0]=W*ia,ba[1]=W*ia,ba[2]=1,!0;if(Aa===na.WGS84||Aa===na.CGCS2000)return Aa=cb,ba[0]=Aa*W*ia,ba[1]=Aa*ia,ba[2]=1,!0}else if(za===na.PLATE_CARREE){if(Aa===na.WGS84||Aa===na.CGCS2000)return ba[0]=cb,ba[1]=cb,ba[2]=1,!0;if(Aa===na.WEB_MERCATOR)return Aa=W[1]/g.earth.radius,ba[0]=1,ba[1]=1/Math.cos(Aa),ba[2]=1,!0}return!1};m.lonLatToSphericalPCPF=function(W,ia,ba,ra){const za=Math.cos(ba);W[0]=Math.cos(ia)*za*ra;W[1]=Math.sin(ia)*za*ra;W[2]=Math.sin(ba)*ra};m.lonLatToWebMercatorComparable=
pa;m.project=E;m.projectBoundingRect=function(W,ia,ba,ra){if(null==W)return!1;if(c.equals(ia,ra))return l.copy(ba,W),!0;Ka[0]=W[0];Ka[1]=W[1];Ka[2]=0;if(!ca(Ka,ia,0,Ka,ra,0,1))return!1;ba[0]=Ka[0];ba[1]=Ka[1];Ka[0]=W[2];Ka[1]=W[3];Ka[2]=0;if(!ca(Ka,ia,0,Ka,ra,0,1))return!1;ba[2]=Ka[0];ba[3]=Ka[1];return!0};m.projectBoundingSphere=function(W,ia,ba,ra){if(N.isNone(ia)||N.isNone(ra))return!1;ia=Ta(ia,ra,kb);if(ia.projector===V)return ba[0]=W[0],ba[1]=W[1],ba[2]=W[2],ba[3]=W[3],!0;if(N.isNone(ia.projector))return!1;
const {source:za,dest:Aa}=ia;if(Aa.spatialReferenceId===na.WEB_MERCATOR){ia=Va[za.spatialReferenceId][na.WGS84];if(N.isNone(ia))return!1;ia(W,0,Ya,0);ta(Ya,0,ba,0);ba[3]=a(Ya[1],W[2],W[3],g.earth.radius);return!0}if(za.spatialReferenceId!==na.WGS84&&za.spatialReferenceId!==na.CGCS2000||Aa.spatialReferenceId!==na.PLATE_CARREE)ia.projector(W,0,ba,0),ba[3]=W[3]*(za.metersPerUnit??1)/(Aa.metersPerUnit??1);else{ra=Va[na.SPHERICAL_ECEF][na.PLATE_CARREE];let Da=W[3];N.isSome(Va[za.spatialReferenceId][na.SPHERICAL_ECEF])&&
N.isSome(ra)&&(Da=a(W[1],W[2],W[3],g.earth.radius));ia.projector(W,0,ba,0);ba[3]=Da}return!0};m.projectBuffer=ca;m.projectDirection=function(W,ia,ba,ra,za){p.copy(Ha,W);p.add(fb,W,ia);U(Ha,ba,Ha,za);U(fb,ba,fb,za);p.subtract(ra,fb,Ha);p.normalize(ra,ra)};m.projectExtent=function(W,ia,ba=ia.spatialReference,ra=0){return N.isSome(W.spatialReference)&&N.isSome(ba)&&N.isSome(w(W,W.spatialReference,ia,ba,ra))};m.projectMany=P;m.projectMultipoint=function(W,ia,ba=ia.spatialReference,ra=0){return N.isSome(W.spatialReference)&&
N.isSome(ba)&&N.isSome(Z(W,W.spatialReference,ia,ba,ra))};m.projectOrLoad=function(W,ia){W=T([W],ia);return N.isSome(W.pending)?{pending:W.pending,geometry:null}:N.isSome(W.geometries)?{pending:null,geometry:W.geometries[0]}:{pending:null,geometry:null}};m.projectOrLoadMany=T;m.projectPoint=function(W,ia,ba=ia.spatialReference,ra=0){return N.isSome(ba)&&N.isSome(W.spatialReference)&&N.isSome(H(W,W.spatialReference,ia,ba,ra))};m.projectPointToVector=function(W,ia,ba,ra=0){Ha[0]=W.x;Ha[1]=W.y;const za=
W.z;Ha[2]=void 0!==za?za:ra;return ca(Ha,W.spatialReference,0,ia,ba,0,1)};m.projectPointToWGS84ComparableLonLat=function(W,ia){Ha[0]=W.x;Ha[1]=W.y;const ba=W.z;Ha[2]=void 0!==ba?ba:0;return ea(Ha,W.spatialReference,ia)};m.projectPolygon=function(W,ia,ba=ia.spatialReference,ra=0){return N.isSome(W.spatialReference)&&N.isSome(ba)&&N.isSome(Y(W,W.spatialReference,ia,ba,ra))};m.projectPolygonToWGS84ComparableLonLat=function({hasZ:W,spatialReference:ia,rings:ba},ra,za=0){ia=Q(ia,ab);ia=Va[ia][na.WGS84_COMPARABLE_LON_LAT];
if(N.isNone(ia))return!1;W=W?Aa=>Aa:Aa=>p.set(Ha,Aa[0],Aa[1],za);for(const Aa of ba){ba=[];for(const Da of Aa){const Ea=[0,0,za];ia(W(Da),0,Ea,0);ba.push(Ea)}ra.push(ba)}return!0};m.projectPolyline=function(W,ia,ba=ia.spatialReference,ra=0){return N.isSome(W.spatialReference)&&N.isSome(ba)&&N.isSome(da(W,W.spatialReference,ia,ba,ra))};m.projectPolylineToWGS84ComparableLonLat=function({hasZ:W,spatialReference:ia,paths:ba},ra,za=0){ia=Q(ia,ab);ia=Va[ia][na.WGS84_COMPARABLE_LON_LAT];if(N.isNone(ia))return!1;
W=W?Aa=>Aa:Aa=>p.set(Ha,Aa[0],Aa[1],za);for(const Aa of ba){ba=[];for(const Da of Aa){const Ea=[0,0,za];ia(W(Da),0,Ea,0);ba.push(Ea)}ra.push(ba)}return!0};m.projectVectorToDehydratedPoint=function(W,ia,ba){return ca(W,ia,0,Ha,ba.spatialReference,0,1)?(ba.x=Ha[0],ba.y=Ha[1],ba.z=Ha[2],ba):null};m.projectVectorToPoint=function(W,ia,ba){if(N.isNone(ia)||N.isNone(ba))return null;const ra=new q({spatialReference:ba});return ca(W,ia,0,Ha,ba,0,1)?(ra.x=Ha[0],ra.y=Ha[1],ra.z=Ha[2],ra):null};m.projectVectorToVector=
U;m.projectVectorToWGS84ComparableLonLat=function(W,ia,ba){return ea(W,ia,ba)};m.projectWithoutEngine=ja;m.projectXYZToVector=O;m.sphericalPCPFtoLonLatElevation=va;m.test={get loadPromise(){return Qa}};m.tryProjectWithZConversion=X;m.unload=function(){Qa=Wa=Ua=null;db={}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(K,m){let R=function(){function F(){this._observers=
[]}var n=F.prototype;n.observe=function(N){this._observers.includes(N)||this._observers.push(N);return new m.ObservationHandle(this._observers,N)};n.notify=function(){const N=this._observers.slice();for(let aa=0;aa<N.length;++aa){const S=N[aa];S.onInvalidated();S.onCommitted()}};return F}();K.SimpleObservable=R;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(K,m,R){function F(a,
e){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];a[4]=e[4];a[5]=e[5];a[6]=e[6];a[7]=e[7];a[8]=e[8];a[9]=e[9];a[10]=e[10];a[11]=e[11];a[12]=e[12];a[13]=e[13];a[14]=e[14];a[15]=e[15];return a}function n(a,e,D,Q,V,ka,ma,oa,pa,ta,sa,wa,xa,B,qa,fa,ua){a[0]=e;a[1]=D;a[2]=Q;a[3]=V;a[4]=ka;a[5]=ma;a[6]=oa;a[7]=pa;a[8]=ta;a[9]=sa;a[10]=wa;a[11]=xa;a[12]=B;a[13]=qa;a[14]=fa;a[15]=ua;return a}function N(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=
0;a[15]=1;return a}function aa(a,e){if(a===e){const D=e[1],Q=e[2],V=e[3],ka=e[6],ma=e[7],oa=e[11];a[1]=e[4];a[2]=e[8];a[3]=e[12];a[4]=D;a[6]=e[9];a[7]=e[13];a[8]=Q;a[9]=ka;a[11]=e[14];a[12]=V;a[13]=ma;a[14]=oa}else a[0]=e[0],a[1]=e[4],a[2]=e[8],a[3]=e[12],a[4]=e[1],a[5]=e[5],a[6]=e[9],a[7]=e[13],a[8]=e[2],a[9]=e[6],a[10]=e[10],a[11]=e[14],a[12]=e[3],a[13]=e[7],a[14]=e[11],a[15]=e[15];return a}function S(a,e){const D=e[0],Q=e[1],V=e[2],ka=e[3],ma=e[4],oa=e[5],pa=e[6],ta=e[7],sa=e[8],wa=e[9],xa=e[10],
B=e[11],qa=e[12],fa=e[13],ua=e[14];e=e[15];const va=D*oa-Q*ma,la=D*pa-V*ma,ya=D*ta-ka*ma,Ba=Q*pa-V*oa,Ca=Q*ta-ka*oa,Ia=V*ta-ka*pa,Ga=sa*fa-wa*qa,Ja=sa*ua-xa*qa,Fa=sa*e-B*qa,Pa=wa*ua-xa*fa,Ra=wa*e-B*fa,Ta=xa*e-B*ua;let Ma=va*Ta-la*Ra+ya*Pa+Ba*Fa-Ca*Ja+Ia*Ga;if(!Ma)return null;Ma=1/Ma;a[0]=(oa*Ta-pa*Ra+ta*Pa)*Ma;a[1]=(V*Ra-Q*Ta-ka*Pa)*Ma;a[2]=(fa*Ia-ua*Ca+e*Ba)*Ma;a[3]=(xa*Ca-wa*Ia-B*Ba)*Ma;a[4]=(pa*Fa-ma*Ta-ta*Ja)*Ma;a[5]=(D*Ta-V*Fa+ka*Ja)*Ma;a[6]=(ua*ya-qa*Ia-e*la)*Ma;a[7]=(sa*Ia-xa*ya+B*la)*Ma;a[8]=
(ma*Ra-oa*Fa+ta*Ga)*Ma;a[9]=(Q*Fa-D*Ra-ka*Ga)*Ma;a[10]=(qa*Ca-fa*ya+e*va)*Ma;a[11]=(wa*ya-sa*Ca-B*va)*Ma;a[12]=(oa*Ja-ma*Pa-pa*Ga)*Ma;a[13]=(D*Pa-Q*Ja+V*Ga)*Ma;a[14]=(fa*la-qa*Ba-ua*va)*Ma;a[15]=(sa*Ba-wa*la+xa*va)*Ma;return a}function L(a,e){const D=e[0],Q=e[1],V=e[2],ka=e[3],ma=e[4],oa=e[5],pa=e[6],ta=e[7],sa=e[8],wa=e[9],xa=e[10],B=e[11],qa=e[12],fa=e[13],ua=e[14];e=e[15];a[0]=oa*(xa*e-B*ua)-wa*(pa*e-ta*ua)+fa*(pa*B-ta*xa);a[1]=-(Q*(xa*e-B*ua)-wa*(V*e-ka*ua)+fa*(V*B-ka*xa));a[2]=Q*(pa*e-ta*ua)-
oa*(V*e-ka*ua)+fa*(V*ta-ka*pa);a[3]=-(Q*(pa*B-ta*xa)-oa*(V*B-ka*xa)+wa*(V*ta-ka*pa));a[4]=-(ma*(xa*e-B*ua)-sa*(pa*e-ta*ua)+qa*(pa*B-ta*xa));a[5]=D*(xa*e-B*ua)-sa*(V*e-ka*ua)+qa*(V*B-ka*xa);a[6]=-(D*(pa*e-ta*ua)-ma*(V*e-ka*ua)+qa*(V*ta-ka*pa));a[7]=D*(pa*B-ta*xa)-ma*(V*B-ka*xa)+sa*(V*ta-ka*pa);a[8]=ma*(wa*e-B*fa)-sa*(oa*e-ta*fa)+qa*(oa*B-ta*wa);a[9]=-(D*(wa*e-B*fa)-sa*(Q*e-ka*fa)+qa*(Q*B-ka*wa));a[10]=D*(oa*e-ta*fa)-ma*(Q*e-ka*fa)+qa*(Q*ta-ka*oa);a[11]=-(D*(oa*B-ta*wa)-ma*(Q*B-ka*wa)+sa*(Q*ta-ka*oa));
a[12]=-(ma*(wa*ua-xa*fa)-sa*(oa*ua-pa*fa)+qa*(oa*xa-pa*wa));a[13]=D*(wa*ua-xa*fa)-sa*(Q*ua-V*fa)+qa*(Q*xa-V*wa);a[14]=-(D*(oa*ua-pa*fa)-ma*(Q*ua-V*fa)+qa*(Q*pa-V*oa));a[15]=D*(oa*xa-pa*wa)-ma*(Q*xa-V*wa)+sa*(Q*pa-V*oa);return a}function M(a){const e=a[0],D=a[1],Q=a[2],V=a[3],ka=a[4],ma=a[5],oa=a[6],pa=a[7],ta=a[8],sa=a[9],wa=a[10],xa=a[11],B=a[12],qa=a[13],fa=a[14];a=a[15];return(e*ma-D*ka)*(wa*a-xa*fa)-(e*oa-Q*ka)*(sa*a-xa*qa)+(e*pa-V*ka)*(sa*fa-wa*qa)+(D*oa-Q*ma)*(ta*a-xa*B)-(D*pa-V*ma)*(ta*fa-
wa*B)+(Q*pa-V*oa)*(ta*qa-sa*B)}function y(a,e,D){const Q=e[0],V=e[1],ka=e[2],ma=e[3],oa=e[4],pa=e[5],ta=e[6],sa=e[7],wa=e[8],xa=e[9],B=e[10],qa=e[11],fa=e[12],ua=e[13],va=e[14];e=e[15];let la=D[0],ya=D[1],Ba=D[2],Ca=D[3];a[0]=la*Q+ya*oa+Ba*wa+Ca*fa;a[1]=la*V+ya*pa+Ba*xa+Ca*ua;a[2]=la*ka+ya*ta+Ba*B+Ca*va;a[3]=la*ma+ya*sa+Ba*qa+Ca*e;la=D[4];ya=D[5];Ba=D[6];Ca=D[7];a[4]=la*Q+ya*oa+Ba*wa+Ca*fa;a[5]=la*V+ya*pa+Ba*xa+Ca*ua;a[6]=la*ka+ya*ta+Ba*B+Ca*va;a[7]=la*ma+ya*sa+Ba*qa+Ca*e;la=D[8];ya=D[9];Ba=D[10];
Ca=D[11];a[8]=la*Q+ya*oa+Ba*wa+Ca*fa;a[9]=la*V+ya*pa+Ba*xa+Ca*ua;a[10]=la*ka+ya*ta+Ba*B+Ca*va;a[11]=la*ma+ya*sa+Ba*qa+Ca*e;la=D[12];ya=D[13];Ba=D[14];Ca=D[15];a[12]=la*Q+ya*oa+Ba*wa+Ca*fa;a[13]=la*V+ya*pa+Ba*xa+Ca*ua;a[14]=la*ka+ya*ta+Ba*B+Ca*va;a[15]=la*ma+ya*sa+Ba*qa+Ca*e;return a}function p(a,e,D){const Q=D[0],V=D[1];D=D[2];if(e===a)a[12]=e[0]*Q+e[4]*V+e[8]*D+e[12],a[13]=e[1]*Q+e[5]*V+e[9]*D+e[13],a[14]=e[2]*Q+e[6]*V+e[10]*D+e[14],a[15]=e[3]*Q+e[7]*V+e[11]*D+e[15];else{const ka=e[0],ma=e[1],oa=
e[2],pa=e[3],ta=e[4],sa=e[5],wa=e[6],xa=e[7],B=e[8],qa=e[9],fa=e[10],ua=e[11];a[0]=ka;a[1]=ma;a[2]=oa;a[3]=pa;a[4]=ta;a[5]=sa;a[6]=wa;a[7]=xa;a[8]=B;a[9]=qa;a[10]=fa;a[11]=ua;a[12]=ka*Q+ta*V+B*D+e[12];a[13]=ma*Q+sa*V+qa*D+e[13];a[14]=oa*Q+wa*V+fa*D+e[14];a[15]=pa*Q+xa*V+ua*D+e[15]}return a}function J(a,e,D){const Q=D[0],V=D[1];D=D[2];a[0]=e[0]*Q;a[1]=e[1]*Q;a[2]=e[2]*Q;a[3]=e[3]*Q;a[4]=e[4]*V;a[5]=e[5]*V;a[6]=e[6]*V;a[7]=e[7]*V;a[8]=e[8]*D;a[9]=e[9]*D;a[10]=e[10]*D;a[11]=e[11]*D;a[12]=e[12];a[13]=
e[13];a[14]=e[14];a[15]=e[15];return a}function k(a,e,D,Q){let V=Q[0],ka=Q[1];Q=Q[2];let ma=Math.sqrt(V*V+ka*ka+Q*Q);var oa=void 0,pa=void 0;let ta=void 0,sa=void 0,wa=void 0,xa=void 0,B=void 0,qa=void 0,fa=void 0,ua=void 0,va=void 0,la=void 0,ya=void 0,Ba=void 0,Ca=void 0,Ia=void 0,Ga=void 0,Ja=void 0,Fa=void 0,Pa=void 0,Ra=void 0,Ta=void 0;pa=oa=void 0;if(ma<R.getEpsilon())return null;ma=1/ma;V*=ma;ka*=ma;Q*=ma;oa=Math.sin(D);pa=Math.cos(D);ta=1-pa;sa=e[0];wa=e[1];xa=e[2];B=e[3];qa=e[4];fa=e[5];
ua=e[6];va=e[7];la=e[8];ya=e[9];Ba=e[10];Ca=e[11];Ia=V*V*ta+pa;Ga=ka*V*ta+Q*oa;Ja=Q*V*ta-ka*oa;Fa=V*ka*ta-Q*oa;Pa=ka*ka*ta+pa;Ra=Q*ka*ta+V*oa;Ta=V*Q*ta+ka*oa;oa=ka*Q*ta-V*oa;pa=Q*Q*ta+pa;a[0]=sa*Ia+qa*Ga+la*Ja;a[1]=wa*Ia+fa*Ga+ya*Ja;a[2]=xa*Ia+ua*Ga+Ba*Ja;a[3]=B*Ia+va*Ga+Ca*Ja;a[4]=sa*Fa+qa*Pa+la*Ra;a[5]=wa*Fa+fa*Pa+ya*Ra;a[6]=xa*Fa+ua*Pa+Ba*Ra;a[7]=B*Fa+va*Pa+Ca*Ra;a[8]=sa*Ta+qa*oa+la*pa;a[9]=wa*Ta+fa*oa+ya*pa;a[10]=xa*Ta+ua*oa+Ba*pa;a[11]=B*Ta+va*oa+Ca*pa;e!==a&&(a[12]=e[12],a[13]=e[13],a[14]=e[14],
a[15]=e[15]);return a}function d(a,e,D){const Q=Math.sin(D);D=Math.cos(D);const V=e[4],ka=e[5],ma=e[6],oa=e[7],pa=e[8],ta=e[9],sa=e[10],wa=e[11];e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[4]=V*D+pa*Q;a[5]=ka*D+ta*Q;a[6]=ma*D+sa*Q;a[7]=oa*D+wa*Q;a[8]=pa*D-V*Q;a[9]=ta*D-ka*Q;a[10]=sa*D-ma*Q;a[11]=wa*D-oa*Q;return a}function f(a,e,D){const Q=Math.sin(D);D=Math.cos(D);const V=e[0],ka=e[1],ma=e[2],oa=e[3],pa=e[8],ta=e[9],sa=e[10],wa=e[11];e!==a&&
(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=V*D-pa*Q;a[1]=ka*D-ta*Q;a[2]=ma*D-sa*Q;a[3]=oa*D-wa*Q;a[8]=V*Q+pa*D;a[9]=ka*Q+ta*D;a[10]=ma*Q+sa*D;a[11]=oa*Q+wa*D;return a}function q(a,e,D){const Q=Math.sin(D);D=Math.cos(D);const V=e[0],ka=e[1],ma=e[2],oa=e[3],pa=e[4],ta=e[5],sa=e[6],wa=e[7];e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]);a[0]=V*D+pa*Q;a[1]=ka*D+ta*Q;a[2]=ma*D+sa*Q;a[3]=oa*D+wa*Q;a[4]=
pa*D-V*Q;a[5]=ta*D-ka*Q;a[6]=sa*D-ma*Q;a[7]=wa*D-oa*Q;return a}function z(a,e){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a}function t(a,e){a[0]=e[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=e[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function b(a,e,D){if(0===e)return N(a);let Q=D[0],V=D[1];D=D[2];let ka=Math.sqrt(Q*Q+V*V+D*D),ma=void 0,oa=void 0,pa=void 0;if(ka<R.getEpsilon())return null;
ka=1/ka;Q*=ka;V*=ka;D*=ka;ma=Math.sin(e);oa=Math.cos(e);pa=1-oa;a[0]=Q*Q*pa+oa;a[1]=V*Q*pa+D*ma;a[2]=D*Q*pa-V*ma;a[3]=0;a[4]=Q*V*pa-D*ma;a[5]=V*V*pa+oa;a[6]=D*V*pa+Q*ma;a[7]=0;a[8]=Q*D*pa+V*ma;a[9]=V*D*pa-Q*ma;a[10]=D*D*pa+oa;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function l(a,e){const D=Math.sin(e);e=Math.cos(e);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=D;a[7]=0;a[8]=0;a[9]=-D;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function g(a,e){const D=Math.sin(e);e=Math.cos(e);
a[0]=e;a[1]=0;a[2]=-D;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=D;a[9]=0;a[10]=e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,e){const D=Math.sin(e);e=Math.cos(e);a[0]=e;a[1]=D;a[2]=0;a[3]=0;a[4]=-D;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a,e,D){var Q=e[0],V=e[1],ka=e[2],ma=e[3],oa=Q+Q,pa=V+V;const ta=ka+ka;e=Q*oa;const sa=Q*pa;Q*=ta;const wa=V*pa;V*=ta;ka*=ta;oa*=ma;pa*=ma;ma*=ta;a[0]=1-(wa+ka);a[1]=sa+ma;a[2]=Q-pa;a[3]=
0;a[4]=sa-ma;a[5]=1-(e+ka);a[6]=V+oa;a[7]=0;a[8]=Q+pa;a[9]=V-oa;a[10]=1-(e+wa);a[11]=0;a[12]=D[0];a[13]=D[1];a[14]=D[2];a[15]=1;return a}function c(a,e){const D=ha,Q=-e[0],V=-e[1],ka=-e[2],ma=e[3],oa=e[4],pa=e[5],ta=e[6],sa=e[7],wa=Q*Q+V*V+ka*ka+ma*ma;0<wa?(D[0]=2*(oa*ma+sa*Q+pa*ka-ta*V)/wa,D[1]=2*(pa*ma+sa*V+ta*Q-oa*ka)/wa,D[2]=2*(ta*ma+sa*ka+oa*V-pa*Q)/wa):(D[0]=2*(oa*ma+sa*Q+pa*ka-ta*V),D[1]=2*(pa*ma+sa*V+ta*Q-oa*ka),D[2]=2*(ta*ma+sa*ka+oa*V-pa*Q));h(a,e,D);return a}function r(a,e){a[0]=e[12];
a[1]=e[13];a[2]=e[14];return a}function v(a,e){const D=e[0],Q=e[1],V=e[2],ka=e[4],ma=e[5],oa=e[6],pa=e[8],ta=e[9];e=e[10];a[0]=Math.sqrt(D*D+Q*Q+V*V);a[1]=Math.sqrt(ka*ka+ma*ma+oa*oa);a[2]=Math.sqrt(pa*pa+ta*ta+e*e);return a}function x(a,e){const D=e[0]+e[5]+e[10];let Q=0;0<D?(Q=2*Math.sqrt(D+1),a[3]=.25*Q,a[0]=(e[6]-e[9])/Q,a[1]=(e[8]-e[2])/Q,a[2]=(e[1]-e[4])/Q):e[0]>e[5]&&e[0]>e[10]?(Q=2*Math.sqrt(1+e[0]-e[5]-e[10]),a[3]=(e[6]-e[9])/Q,a[0]=.25*Q,a[1]=(e[1]+e[4])/Q,a[2]=(e[8]+e[2])/Q):e[5]>e[10]?
(Q=2*Math.sqrt(1+e[5]-e[0]-e[10]),a[3]=(e[8]-e[2])/Q,a[0]=(e[1]+e[4])/Q,a[1]=.25*Q,a[2]=(e[6]+e[9])/Q):(Q=2*Math.sqrt(1+e[10]-e[0]-e[5]),a[3]=(e[1]-e[4])/Q,a[0]=(e[8]+e[2])/Q,a[1]=(e[6]+e[9])/Q,a[2]=.25*Q);return a}function A(a,e,D,Q){var V=e[0],ka=e[1],ma=e[2],oa=e[3],pa=V+V,ta=ka+ka,sa=ma+ma;e=V*pa;const wa=V*ta;V*=sa;const xa=ka*ta;ka*=sa;ma*=sa;pa*=oa;ta*=oa;oa*=sa;sa=Q[0];const B=Q[1];Q=Q[2];a[0]=(1-(xa+ma))*sa;a[1]=(wa+oa)*sa;a[2]=(V-ta)*sa;a[3]=0;a[4]=(wa-oa)*B;a[5]=(1-(e+ma))*B;a[6]=(ka+pa)*
B;a[7]=0;a[8]=(V+ta)*Q;a[9]=(ka-pa)*Q;a[10]=(1-(e+xa))*Q;a[11]=0;a[12]=D[0];a[13]=D[1];a[14]=D[2];a[15]=1;return a}function E(a,e,D,Q,V){var ka=e[0],ma=e[1],oa=e[2],pa=e[3],ta=ka+ka,sa=ma+ma,wa=oa+oa;e=ka*ta;var xa=ka*sa,B=ka*wa;ka=ma*sa;ma*=wa;var qa=oa*wa;oa=pa*ta;sa*=pa;const fa=pa*wa;var ua=Q[0],va=Q[1];wa=Q[2];Q=V[0];pa=V[1];V=V[2];ta=(1-(ka+qa))*ua;const la=(xa+fa)*ua;ua*=B-sa;xa=(xa-fa)*va;qa=(1-(e+qa))*va;va*=ma+oa;B=(B+sa)*wa;ma=(ma-oa)*wa;e=(1-(e+ka))*wa;a[0]=ta;a[1]=la;a[2]=ua;a[3]=0;a[4]=
xa;a[5]=qa;a[6]=va;a[7]=0;a[8]=B;a[9]=ma;a[10]=e;a[11]=0;a[12]=D[0]+Q-(ta*Q+xa*pa+B*V);a[13]=D[1]+pa-(la*Q+qa*pa+ma*V);a[14]=D[2]+V-(ua*Q+va*pa+e*V);a[15]=1;return a}function P(a,e){var D=e[0],Q=e[1],V=e[2];e=e[3];var ka=D+D,ma=Q+Q;const oa=V+V;D*=ka;const pa=Q*ka;Q*=ma;const ta=V*ka,sa=V*ma;V*=oa;ka*=e;ma*=e;e*=oa;a[0]=1-Q-V;a[1]=pa+e;a[2]=ta-ma;a[3]=0;a[4]=pa-e;a[5]=1-D-V;a[6]=sa+ka;a[7]=0;a[8]=ta+ma;a[9]=sa-ka;a[10]=1-D-Q;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function T(a,e,D,Q,V,ka,
ma){const oa=1/(D-e),pa=1/(V-Q),ta=1/(ka-ma);a[0]=2*ka*oa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*ka*pa;a[6]=0;a[7]=0;a[8]=(D+e)*oa;a[9]=(V+Q)*pa;a[10]=(ma+ka)*ta;a[11]=-1;a[12]=0;a[13]=0;a[14]=ma*ka*2*ta;a[15]=0;return a}function C(a,e,D,Q,V){e=1/Math.tan(e/2);let ka=void 0;a[0]=e/D;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=V&&Infinity!==V?(ka=1/(Q-V),a[10]=(V+Q)*ka,a[14]=2*V*Q*ka):(a[10]=-1,a[14]=-2*Q);return a}function X(a,e,D,Q){const V=Math.tan(e.upDegrees*
Math.PI/180),ka=Math.tan(e.downDegrees*Math.PI/180),ma=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);const oa=2/(ma+e),pa=2/(V+ka);a[0]=oa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=pa;a[6]=0;a[7]=0;a[8]=-((ma-e)*oa*.5);a[9]=(V-ka)*pa*.5;a[10]=Q/(D-Q);a[11]=-1;a[12]=0;a[13]=0;a[14]=Q*D/(D-Q);a[15]=0;return a}function G(a,e,D,Q,V,ka,ma){const oa=1/(e-D),pa=1/(Q-V),ta=1/(ka-ma);a[0]=-2*oa;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*pa;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*ta;a[11]=0;a[12]=
(e+D)*oa;a[13]=(V+Q)*pa;a[14]=(ma+ka)*ta;a[15]=1;return a}function I(a,e,D,Q){var V=void 0;let ka=void 0;var ma=void 0,oa=void 0;let pa=void 0,ta=void 0;var sa=void 0,wa=void 0;let xa=void 0,B=void 0;const qa=e[0],fa=e[1];e=e[2];ma=Q[0];oa=Q[1];Q=Q[2];sa=D[0];wa=D[1];D=D[2];V=R.getEpsilon();if(Math.abs(qa-sa)<V&&Math.abs(fa-wa)<V&&Math.abs(e-D)<V)return N(a);sa=qa-sa;wa=fa-wa;xa=e-D;B=1/Math.sqrt(sa*sa+wa*wa+xa*xa);sa*=B;wa*=B;xa*=B;V=oa*xa-Q*wa;ka=Q*sa-ma*xa;ma=ma*wa-oa*sa;(B=Math.sqrt(V*V+ka*ka+
ma*ma))?(B=1/B,V*=B,ka*=B,ma*=B):ma=ka=V=0;oa=wa*ma-xa*ka;pa=xa*V-sa*ma;ta=sa*ka-wa*V;(B=Math.sqrt(oa*oa+pa*pa+ta*ta))?(B=1/B,oa*=B,pa*=B,ta*=B):ta=pa=oa=0;a[0]=V;a[1]=oa;a[2]=sa;a[3]=0;a[4]=ka;a[5]=pa;a[6]=wa;a[7]=0;a[8]=ma;a[9]=ta;a[10]=xa;a[11]=0;a[12]=-(V*qa+ka*fa+ma*e);a[13]=-(oa*qa+pa*fa+ta*e);a[14]=-(sa*qa+wa*fa+xa*e);a[15]=1;return a}function ja(a,e,D,Q){const V=e[0],ka=e[1];e=e[2];var ma=Q[0];const oa=Q[1];var pa=Q[2];Q=V-D[0];let ta=ka-D[1];D=e-D[2];let sa=Q*Q+ta*ta+D*D;0<sa&&(sa=1/Math.sqrt(sa),
Q*=sa,ta*=sa,D*=sa);let wa=oa*D-pa*ta;pa=pa*Q-ma*D;ma=ma*ta-oa*Q;sa=wa*wa+pa*pa+ma*ma;0<sa&&(sa=1/Math.sqrt(sa),wa*=sa,pa*=sa,ma*=sa);a[0]=wa;a[1]=pa;a[2]=ma;a[3]=0;a[4]=ta*ma-D*pa;a[5]=D*wa-Q*ma;a[6]=Q*pa-ta*wa;a[7]=0;a[8]=Q;a[9]=ta;a[10]=D;a[11]=0;a[12]=V;a[13]=ka;a[14]=e;a[15]=1;return a}function H(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function Z(a){return Math.sqrt(a[0]**
2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function da(a,e,D){a[0]=e[0]+D[0];a[1]=e[1]+D[1];a[2]=e[2]+D[2];a[3]=e[3]+D[3];a[4]=e[4]+D[4];a[5]=e[5]+D[5];a[6]=e[6]+D[6];a[7]=e[7]+D[7];a[8]=e[8]+D[8];a[9]=e[9]+D[9];a[10]=e[10]+D[10];a[11]=e[11]+D[11];a[12]=e[12]+D[12];a[13]=e[13]+D[13];a[14]=e[14]+D[14];a[15]=e[15]+D[15];return a}function Y(a,e,D){a[0]=e[0]-D[0];a[1]=e[1]-D[1];a[2]=e[2]-D[2];a[3]=e[3]-D[3];a[4]=e[4]-
D[4];a[5]=e[5]-D[5];a[6]=e[6]-D[6];a[7]=e[7]-D[7];a[8]=e[8]-D[8];a[9]=e[9]-D[9];a[10]=e[10]-D[10];a[11]=e[11]-D[11];a[12]=e[12]-D[12];a[13]=e[13]-D[13];a[14]=e[14]-D[14];a[15]=e[15]-D[15];return a}function w(a,e,D){a[0]=e[0]*D;a[1]=e[1]*D;a[2]=e[2]*D;a[3]=e[3]*D;a[4]=e[4]*D;a[5]=e[5]*D;a[6]=e[6]*D;a[7]=e[7]*D;a[8]=e[8]*D;a[9]=e[9]*D;a[10]=e[10]*D;a[11]=e[11]*D;a[12]=e[12]*D;a[13]=e[13]*D;a[14]=e[14]*D;a[15]=e[15]*D;return a}function O(a,e,D,Q){a[0]=e[0]+D[0]*Q;a[1]=e[1]+D[1]*Q;a[2]=e[2]+D[2]*Q;a[3]=
e[3]+D[3]*Q;a[4]=e[4]+D[4]*Q;a[5]=e[5]+D[5]*Q;a[6]=e[6]+D[6]*Q;a[7]=e[7]+D[7]*Q;a[8]=e[8]+D[8]*Q;a[9]=e[9]+D[9]*Q;a[10]=e[10]+D[10]*Q;a[11]=e[11]+D[11]*Q;a[12]=e[12]+D[12]*Q;a[13]=e[13]+D[13]*Q;a[14]=e[14]+D[14]*Q;a[15]=e[15]+D[15]*Q;return a}function U(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]}function ea(a,e){if(a===
e)return!0;const D=a[0],Q=a[1],V=a[2],ka=a[3],ma=a[4],oa=a[5],pa=a[6],ta=a[7],sa=a[8],wa=a[9],xa=a[10],B=a[11],qa=a[12],fa=a[13],ua=a[14];a=a[15];const va=e[0],la=e[1],ya=e[2],Ba=e[3],Ca=e[4],Ia=e[5],Ga=e[6],Ja=e[7],Fa=e[8],Pa=e[9],Ra=e[10],Ta=e[11],Ma=e[12],Ua=e[13],Wa=e[14];e=e[15];const Qa=R.getEpsilon();return Math.abs(D-va)<=Qa*Math.max(1,Math.abs(D),Math.abs(va))&&Math.abs(Q-la)<=Qa*Math.max(1,Math.abs(Q),Math.abs(la))&&Math.abs(V-ya)<=Qa*Math.max(1,Math.abs(V),Math.abs(ya))&&Math.abs(ka-Ba)<=
Qa*Math.max(1,Math.abs(ka),Math.abs(Ba))&&Math.abs(ma-Ca)<=Qa*Math.max(1,Math.abs(ma),Math.abs(Ca))&&Math.abs(oa-Ia)<=Qa*Math.max(1,Math.abs(oa),Math.abs(Ia))&&Math.abs(pa-Ga)<=Qa*Math.max(1,Math.abs(pa),Math.abs(Ga))&&Math.abs(ta-Ja)<=Qa*Math.max(1,Math.abs(ta),Math.abs(Ja))&&Math.abs(sa-Fa)<=Qa*Math.max(1,Math.abs(sa),Math.abs(Fa))&&Math.abs(wa-Pa)<=Qa*Math.max(1,Math.abs(wa),Math.abs(Pa))&&Math.abs(xa-Ra)<=Qa*Math.max(1,Math.abs(xa),Math.abs(Ra))&&Math.abs(B-Ta)<=Qa*Math.max(1,Math.abs(B),Math.abs(Ta))&&
Math.abs(qa-Ma)<=Qa*Math.max(1,Math.abs(qa),Math.abs(Ma))&&Math.abs(fa-Ua)<=Qa*Math.max(1,Math.abs(fa),Math.abs(Ua))&&Math.abs(ua-Wa)<=Qa*Math.max(1,Math.abs(ua),Math.abs(Wa))&&Math.abs(a-e)<=Qa*Math.max(1,Math.abs(a),Math.abs(e))}function ca(a){const e=R.getEpsilon(),D=a[0],Q=a[1],V=a[2],ka=a[4],ma=a[5],oa=a[6],pa=a[8],ta=a[9];a=a[10];return Math.abs(1-(D*D+ka*ka+pa*pa))<=e&&Math.abs(1-(Q*Q+ma*ma+ta*ta))<=e&&Math.abs(1-(V*V+oa*oa+a*a))<=e}const ha=m.create();m=Object.freeze(Object.defineProperty({__proto__:null,
copy:F,set:n,identity:N,transpose:aa,invert:S,adjoint:L,determinant:M,multiply:y,translate:p,scale:J,rotate:k,rotateX:d,rotateY:f,rotateZ:q,fromTranslation:z,fromScaling:t,fromRotation:b,fromXRotation:l,fromYRotation:g,fromZRotation:u,fromRotationTranslation:h,fromQuat2:c,getTranslation:r,getScaling:v,getRotation:x,fromRotationTranslationScale:A,fromRotationTranslationScaleOrigin:E,fromQuat:P,frustum:T,perspective:C,perspectiveFromFieldOfView:X,ortho:G,lookAt:I,targetTo:ja,str:H,frob:Z,add:da,subtract:Y,
multiplyScalar:w,multiplyScalarAndAdd:O,exactEquals:U,equals:ea,isOrthoNormal:ca,mul:y,sub:Y},Symbol.toStringTag,{value:"Module"}));K.add=da;K.adjoint=L;K.copy=F;K.determinant=M;K.equals=ea;K.exactEquals=U;K.frob=Z;K.fromQuat=P;K.fromQuat2=c;K.fromRotation=b;K.fromRotationTranslation=h;K.fromRotationTranslationScale=A;K.fromRotationTranslationScaleOrigin=E;K.fromScaling=t;K.fromTranslation=z;K.fromXRotation=l;K.fromYRotation=g;K.fromZRotation=u;K.frustum=T;K.getRotation=x;K.getScaling=v;K.getTranslation=
r;K.identity=N;K.invert=S;K.isOrthoNormal=ca;K.lookAt=I;K.mat4=m;K.mul=y;K.multiply=y;K.multiplyScalar=w;K.multiplyScalarAndAdd=O;K.ortho=G;K.perspective=C;K.perspectiveFromFieldOfView=X;K.rotate=k;K.rotateX=d;K.rotateY=f;K.rotateZ=q;K.scale=J;K.set=n;K.str=H;K.sub=Y;K.subtract=Y;K.targetTo=ja;K.translate=p;K.transpose=aa})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(K,m,R,F,n){function N(k=J){return[k[0],
k[1],k[2],k[3]]}function aa(k,d){k!==d&&(k[0]=d[0],k[1]=d[1],k[2]=d[2],k[3]=d[3]);return k}function S(k){return F.isNone(k)||k[0]>=k[2]?0:k[2]-k[0]}function L(k){return k[1]>=k[3]?0:k[3]-k[1]}function M(k,d,f){return d>=k[0]&&f>=k[1]&&d<=k[2]&&f<=k[3]}function y(k){return null!=k&&4===k.length}const p=[Infinity,Infinity,-Infinity,-Infinity],J=[0,0,0,0];K.NEGATIVE_INFINITY=p;K.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];K.UNIT=[0,0,1,1];K.ZERO=J;K.allFinite=function(k){for(let d=0;4>
d;d++)if(!isFinite(k[d]))return!1;return!0};K.area=function(k){return S(k)*L(k)};K.center=function(k,d=[0,0]){d[0]=(k[0]+k[2])/2;d[1]=(k[1]+k[3])/2;return d};K.clone=function(k){return[k[0],k[1],k[2],k[3]]};K.contains=function(k,d){return d[0]>=k[0]&&d[2]<=k[2]&&d[1]>=k[1]&&d[3]<=k[3]};K.containsPoint=function(k,d){return M(k,d[0],d[1])};K.containsPointObject=function(k,d){return M(k,d.x,d.y)};K.containsPointWithMargin=function(k,d,f){return d[0]>=k[0]-f&&d[1]>=k[1]-f&&d[0]<=k[2]+f&&d[1]<=k[3]+f};
K.containsXY=M;K.containsXYWithMargin=function(k,d,f,q){return d>=k[0]-q&&f>=k[1]-q&&d<=k[2]+q&&f<=k[3]+q};K.copy=aa;K.create=N;K.distance=function(k,d){const f=(k[1]+k[3])/2,q=Math.max(Math.abs(d[0]-(k[0]+k[2])/2)-S(k)/2,0);k=Math.max(Math.abs(d[1]-f)-L(k)/2,0);return Math.sqrt(q*q+k*k)};K.empty=function(k){return k?aa(k,p):N(p)};K.equals=function(k,d){return y(k)&&y(d)?k[0]===d[0]&&k[1]===d[1]&&k[2]===d[2]&&k[3]===d[3]:k===d};K.expand=function(k,d,f){if(F.isNone(d))aa(f,k);else if("length"in d)if(y(d))f[0]=
Math.min(k[0],d[0]),f[1]=Math.min(k[1],d[1]),f[2]=Math.max(k[2],d[2]),f[3]=Math.max(k[3],d[3]);else{if(2===d.length||3===d.length)f[0]=Math.min(k[0],d[0]),f[1]=Math.min(k[1],d[1]),f[2]=Math.max(k[2],d[0]),f[3]=Math.max(k[3],d[1])}else switch(d.type){case "extent":f[0]=Math.min(k[0],d.xmin);f[1]=Math.min(k[1],d.ymin);f[2]=Math.max(k[2],d.xmax);f[3]=Math.max(k[3],d.ymax);break;case "point":f[0]=Math.min(k[0],d.x),f[1]=Math.min(k[1],d.y),f[2]=Math.max(k[2],d.x),f[3]=Math.max(k[3],d.y)}};K.expandPointInPlace=
function(k,d){d[0]<k[0]&&(k[0]=d[0]);d[0]>k[2]&&(k[2]=d[0]);d[1]<k[1]&&(k[1]=d[1]);d[1]>k[3]&&(k[3]=d[1])};K.expandWithNestedArray=function(k,d,f=k){const q=d.length;let z=k[0],t=k[1],b=k[2];k=k[3];for(let l=0;l<q;l++){const g=d[l];z=Math.min(z,g[0]);t=Math.min(t,g[1]);b=Math.max(b,g[0]);k=Math.max(k,g[1])}f[0]=z;f[1]=t;f[2]=b;f[3]=k;return f};K.fromExtent=function(k,d=N()){d[0]=k.xmin;d[1]=k.ymin;d[2]=k.xmax;d[3]=k.ymax;return d};K.fromValues=function(k,d,f,q,z=N()){z[0]=k;z[1]=d;z[2]=f;z[3]=q;return z};
K.height=L;K.intersection=function(k,d,f){if(F.isNone(d))return aa(f,k);const q=d[0],z=d[1],t=d[2];d=d[3];f[0]=R.clamp(k[0],q,t);f[1]=R.clamp(k[1],z,d);f[2]=R.clamp(k[2],q,t);f[3]=R.clamp(k[3],z,d);return f};K.intersects=function(k,d){return Math.max(d[0],k[0])<=Math.min(d[2],k[2])&&Math.max(d[1],k[1])<=Math.min(d[3],k[3])};K.intersectsSegment=function(k,d,f){const q=k[0],z=k[1],t=k[2];k=k[3];const {x:b,y:l}=d,{x:g,y:u}=f;var h=(r,v)=>0>(u-l)*r+(b-g)*v+(g*l-b*u);d=h(q,k);f=h(t,k);const c=h(t,z);h=
h(q,z);return d===f&&f===c&&c===h&&h===d||b<q&&g<q||b>t&&g>t||l>k&&u>k||l<z&&u<z?!1:!0};K.intersectsSphere=function(k,d){const f=d[3];var q=Math.abs(d[0]-.5*(k[0]+k[2]));const z=.5*(k[2]-k[0]);if(q>f+z)return!1;var t=.5*(k[3]-k[1]);k=Math.abs(d[1]-.5*(k[1]+k[3]));if(k>f+t)return!1;if(q<z||k<t)return!0;q-=z;t=k-t;return q*q+t*t<=f*f};K.is=y;K.isPoint=function(k){return(0===S(k)||!isFinite(k[0]))&&(0===L(k)||!isFinite(k[1]))};K.offset=function(k,d,f,q=k){q[0]=k[0]+d;q[1]=k[1]+f;q[2]=k[2]+d;q[3]=k[3]+
f;return q};K.pad=function(k,d,f=k){f[0]=k[0]-d;f[1]=k[1]-d;f[2]=k[2]+d;f[3]=k[3]+d;return f};K.setMax=function(k,d,f=k){f[2]=d[0];f[3]=d[1];f!==k&&(f[0]=k[0],f[1]=k[1]);return k};K.setMin=function(k,d,f=k){f[0]=d[0];f[1]=d[1];f!==k&&(f[2]=k[2],f[3]=k[3]);return f};K.size=function(k,d){d[0]=k[2]-k[0];d[1]=k[3]-k[1]};K.toExtent=function(k,d){return new n({xmin:k[0],ymin:k[1],xmax:k[2],ymax:k[3],spatialReference:d})};K.width=S;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(K,m){const R=Math.PI/180;var F=m.earth.radius;const n=m.earth.eccentricitySquared;F={a1:F*n,a2:F*n*F*n,a3:F*n*n/2,a4:F*n*F*n*2.5,a5:F*n+F*n*n/2,a6:1-n};m={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:m.earth.radius,f:m.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:m.moon.radius,f:m.moon.flattening},104904:{a:3393400,f:.005207166853303471},
104905:{a:m.mars.radius,f:m.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,
f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},
104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:m.mars.radius,f:0},
104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};K.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;K.earthEllipsoidConstants=F;K.spheroids=m;K.toRadians=R;Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(K,m,R,F){K.getGeometryZScaler=function(n,N,aa){if(m.isNone(N)||m.isNone(aa)||aa.vcsWkid||F.equals(N,aa))return null;
N=R.getMetersPerVerticalUnitForSR(N);aa=R.getMetersPerVerticalUnitForSR(aa);const S=N/aa;if(1===S)return null;switch(n){case "point":case "esriGeometryPoint":return L=>{L&&null!=L.z&&(L.z*=S)};case "polyline":case "esriGeometryPolyline":return L=>{if(L)for(const M of L.paths)for(const y of M)2<y.length&&(y[2]*=S)};case "polygon":case "esriGeometryPolygon":return L=>{if(L)for(const M of L.rings)for(const y of M)2<y.length&&(y[2]*=S)};case "multipoint":case "esriGeometryMultipoint":return L=>{if(L)for(const M of L.points)2<
M.length&&(M[2]*=S)};case "extent":case "esriGeometryExtent":return L=>{L&&null!=L.zmin&&null!=L.zmax&&(L.zmin*=S,L.zmax*=S)};default:return null}};Object.defineProperties(K,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(K,m,R,F,n){function N(c,r){return q.get(c)/q.get(r)||1}function aa(c,r="geographic"){const [v,
x]=c;c=Math.sqrt(v*v+x*x);let A=Math.atan2(x,v)*z;A=(360+A)%360;"geographic"===r&&(A=(450-A)%360);return[c,A]}function S(c,r="geographic"){let v=c[1];"geographic"===r&&(v=(450-v)%360);v%=360;c=c[0];return[c*Math.cos(v/z),c*Math.sin(v/z)]}function L(c,r,v="geographic",x=1){if(!n.isValidPixelBlock(c))return c;const {pixels:A,width:E,height:P}=c;var T=E*P;const C=A[0],X=A[1],G=c.pixelType.startsWith("f")?c.pixelType:"f32",I=F.createEmptyBand(G,T);T=F.createEmptyBand(G,T);let ja=0;for(let H=0;H<P;H++)for(let Z=
0;Z<E;Z++)"vector-uv"===r?([I[ja],T[ja]]=aa([C[ja],X[ja]],v),I[ja]*=x):([I[ja],T[ja]]=S([C[ja],X[ja]],v),I[ja]*=x,T[ja]*=x),ja++;c=new F({pixelType:G,width:c.width,height:c.height,mask:c.mask,validPixelCount:c.validPixelCount,maskIsAlpha:c.maskIsAlpha,pixels:[I,T]});c.updateStatistics();return c}function M(c=0,r=0,v=Math.PI,x=!0){x&&(v=(2*Math.PI-v)%(2*Math.PI));x=x?-1:1;const A=-7*x,E=-2*x,P=-16*x,[T,C]=p(0,r+13*x,v,21.75),[X,G]=p(c-5.5,r+A,v,21.75),[I,ja]=p(c+5.5,r+A,v,21.75),[H,Z]=p(c-1.5,r+E,
v,21.75),[da,Y]=p(c+1.5,r+E,v,21.75),[w,O]=p(c-1.5,r+P,v,21.75),[U,ea]=p(c+1.5,r+P,v,21.75);return[T,C,X,G,H,Z,da,Y,I,ja,w,O,U,ea]}function y(c=0,r=Math.PI,v=!0){v&&(r=(2*Math.PI-r)%(2*Math.PI));var x=v?-1:1,A=5*x;const E=20*x,P=25*x;x*=2;const T=v?1:-1;v=5*T;let [C,X]=[0+v,0-E],[G,I]=[C+2*T,X],[ja,H]=[G-0*T,I+x],[Z,da]=[0-v,0-P],[Y,w]=[Z+0*T,da-x],O=Math.ceil(c/5),U=Math.floor(O/10);O-=8*U;c=[];const ea=[];for(let ma=0;ma<O/2;ma++,U--){0>=U&&1===O%2&&ma===(O-1)/2&&(Z=0,Y=Z+0*T,da=(da+X)/2,w=da-x);
const [oa,pa]=p(Z,da,r,45);if(0<U){const [ta,sa]=p(G,da,r,45),[wa,xa]=p(C,X,r,45);c.push(ta);c.push(sa);c.push(oa);c.push(pa);c.push(wa);c.push(xa)}else{const [ta,sa]=p(G,I,r,45),[wa,xa]=p(ja,H,r,45),[B,qa]=p(Y,w,r,45);ea.push(oa);ea.push(pa);ea.push(B);ea.push(qa);ea.push(wa);ea.push(xa);ea.push(ta);ea.push(sa)}da+=A;X+=A;I+=A;H+=A;w+=A}const [ca,ha]=p(0+v,0+E,r,45);A=7*T;const [a,e]=p(0+A,0+E,r,45),[D,Q]=p(0+v,0-P,r,45),[V,ka]=p(0+A,0-P,r,45);return{pennants:c,barbs:ea,shaft:[ca,ha,a,e,D,Q,V,ka]}}
function p(c,r,v,x=1){return[Math.sqrt(c*c+r*r)/x,(2*Math.PI+(2*Math.PI+Math.atan2(r,c))%(2*Math.PI)-v)%(2*Math.PI)]}function J(c,r,v,x){v=N(x||"knots",v);for(x=1;x<r.length;x++)if(x===r.length-1){if(c<r[x]*v)break}else if(c<=r[x]*v)break;return Math.min(x-1,r.length-2)}function k(c,r,v,x,A){let E=0;switch(r){case "beaufort_kn":E=J(c,l,"knots",v);break;case "beaufort_km":E=J(c,l,"kilometer-per-hour",v);break;case "beaufort_ft":E=J(c,l,"feet-per-second",v);break;case "beaufort_m":E=J(c,l,"meter-per-second",
v);break;case "classified_arrow":E=J(c,A??[],x,v);break;case "ocean_current_m":E=J(c,g,"meter-per-second",v);break;case "ocean_current_kn":E=J(c,u,"knots",v)}return E}function d(c,r){const {style:v,inputUnit:x,outputUnit:A,breakValues:E}=r,P=t.fromJSON(x),T=t.fromJSON(A);let C=0,X=0;const {width:G,height:I,mask:ja}=c,H=c.pixels[0];c=c.pixels[1];var Z=R.isSome(ja)?ja.filter(w=>0<w).length:G*I;const da=new Float32Array(42*Z);Z=new Uint32Array(15*Z);r=r.invertDirection?M(0,0,0,!1):b;for(let w=0;w<I;w++)for(let O=
0;O<G;O++){var Y=w*G+O;if(!ja||ja[w*G+O]){const U=(c[Y]+360)%360/180*Math.PI,ea=k(H[Y],v,P,T,E);for(let ca=0;ca<r.length;ca+=2)da[C++]=(O+.5)/G,da[C++]=(w+.5)/I,da[C++]=r[ca],da[C++]=r[ca+1]+U,da[C++]=ea,da[C++]=H[Y];Y=7*(C/42-1);Z[X++]=Y;Z[X++]=Y+1;Z[X++]=Y+2;Z[X++]=Y+0;Z[X++]=Y+4;Z[X++]=Y+3;Z[X++]=Y+0;Z[X++]=Y+2;Z[X++]=Y+3;Z[X++]=Y+2;Z[X++]=Y+5;Z[X++]=Y+3;Z[X++]=Y+5;Z[X++]=Y+6;Z[X++]=Y+3}}return{vertexData:da,indexData:Z}}function f(c,r){let v=0,x=0;const {width:A,height:E,mask:P}=c;c=c.pixels[0];
const T=[],C=[];var X=t.fromJSON(r.inputUnit);X=N(X,"knots");r="wind_speed"===r.style?5:Number.MAX_VALUE;for(let I=0;I<E;I++)for(let ja=0;ja<A;ja++){var G=c[I*A+ja]*X;if((!P||P[I*A+ja])&&G<r){for(let H=0;4>H;H++)T[v++]=(ja+.5)/A,T[v++]=(I+.5)/E,T[v++]=2>H?-.5:.5,T[v++]=0===H%2?-.5:.5,T[v++]=0,T[v++]=G;G=4*(v/24-1);C[x++]=G;C[x++]=G+1;C[x++]=G+2;C[x++]=G+1;C[x++]=G+2;C[x++]=G+3}}return{vertexData:new Float32Array(T),indexData:new Uint32Array(C)}}const q=new Map;q.set("meter-per-second",1);q.set("kilometer-per-hour",
.277778);q.set("knots",.514444);q.set("feet-per-second",.3048);q.set("mile-per-hour",.44704);const z=180/Math.PI,t=new m.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),b=M(0,0,0),l=[0,1,3,6,10,16,21,27,33,40,47,55,63],g=[0,.5,1,1.5,2],u=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],h=[];K.convertToLocalDirections=function(c,r,v,x="geographic"){if(!n.isValidPixelBlock(c)||R.isNone(v))return c;
c="vector-magdir"===r?c.clone():R.unwrap(L(c,r));const A=c.pixels[1];for(let E=0;E<A.length;E++)A[E]="geographic"===x?(A[E]+v[E]+270)%360:(A[E]+360-v[E])%360;return"vector-magdir"===r?c:L(c,"vector-magdir")};K.convertVectorFieldData=L;K.convertVectorFieldUnit=function(c,r,v=1){if(1===v||!n.isValidPixelBlock(c))return c;c=c.clone();const {pixels:x,width:A,height:E}=c,P=x[0],T=x[1];let C=0;for(let X=0;X<E;X++)for(let G=0;G<A;G++)"vector-uv"===r?(P[C]*=v,T[C]*=v):P[C]*=v,C++;c.updateStatistics();return c};
K.createVFMesh=function(c,r){if("simple_scalar"===r.style)r=f(c,r);else if("wind_speed"===r.style){if(0===h.length)for(var v=0;30>v;v++)h.push(y(5*v,0,!r.invertDirection));r=t.fromJSON(r.inputUnit);r=N(r,"knots");const {width:P,height:T,mask:C}=c;v=c.pixels[0];c=c.pixels[1];const X=[],G=[];let I=0,ja=0;for(let H=0;H<T;H++)for(let Z=0;Z<P;Z++){var x=H*P+Z,A=v[x]*r;if((!C||C[H*P+Z])&&5<=A){const da=(c[x]+360)%360/180*Math.PI,{pennants:Y,barbs:w,shaft:O}=h[Math.min(Math.floor(A/5),29)];if(0===Y.length+
w.length)continue;x=X.length/6;const U=(Z+.5)/P,ea=(H+.5)/T;for(var E=0;E<Y.length;E+=2)X[I++]=U,X[I++]=ea,X[I++]=Y[E],X[I++]=Y[E+1]+da,X[I++]=0,X[I++]=A;for(E=0;E<w.length;E+=2)X[I++]=U,X[I++]=ea,X[I++]=w[E],X[I++]=w[E+1]+da,X[I++]=0,X[I++]=A;for(E=0;E<O.length;E+=2)X[I++]=U,X[I++]=ea,X[I++]=O[E],X[I++]=O[E+1]+da,X[I++]=0,X[I++]=A;for(A=0;A<Y.length/6;A++)G[ja++]=x,G[ja++]=x+1,G[ja++]=x+2,x+=3;for(A=0;A<w.length/8;A++)G[ja++]=x,G[ja++]=x+1,G[ja++]=x+2,G[ja++]=x+1,G[ja++]=x+2,G[ja++]=x+3,x+=4;G[ja++]=
x+0;G[ja++]=x+1;G[ja++]=x+2;G[ja++]=x+1;G[ja++]=x+3;G[ja++]=x+2;x+=4}}r={vertexData:new Float32Array(X),indexData:new Uint32Array(G)}}else r=d(c,r);return r};K.createVFMeshScalar=f;K.getUnitConversionFactor=N;K.sampleVectorField=function(c,r,v,x=[0,0],A=.5){const {width:E,height:P,mask:T}=c,[C,X]=c.pixels,[G,I]=x;c=Math.round((E-G)/v);x=Math.round((P-I)/v);var ja=c*x;const H=new Float32Array(ja),Z=new Float32Array(ja);ja=new Uint8Array(ja);r="vector-uv"===r;for(let Y=0;Y<x;Y++)for(let w=0;w<c;w++){let O=
0;const U=Y*c+w,ea=Math.max(0,Y*v+I),ca=Math.max(0,w*v+G),ha=Math.min(P,ea+v),a=Math.min(E,ca+v);for(let e=ea;e<ha;e++)for(let D=ca;D<a;D++){var da=e*E+D;if(!T||T[da]){O++;da=r?[C[da],X[da]]:[C[da],(360+X[da])%360];const [Q,V]=r?da:S(da);H[U]+=Q;Z[U]+=V}}if(O>=(ha-ea)*(a-ca)*(1-A)){ja[U]=1;const [e,D]=aa([H[U]/O,Z[U]/O]);H[U]=e;Z[U]=D}else ja[U]=0,H[U]=0,Z[U]=0}v=new F({width:c,height:x,pixels:[H,Z],mask:ja});v.updateStatistics();return v};K.snapImageToSymbolTile=function(c,r,v,x,A){if(R.isNone(A)||
!A.spatialReference.equals(c.spatialReference))return{extent:c,width:Math.round(r/x),height:Math.round(v/x),resolution:c.width/r};const E=A.xmin;A=A.ymax;r=(c.xmax-c.xmin)/r*x;v=(c.ymax-c.ymin)/v*x;c.xmin=E+Math.floor((c.xmin-E)/r)*r;c.xmax=E+Math.ceil((c.xmax-E)/r)*r;c.ymin=A+Math.floor((c.ymin-A)/v)*v;c.ymax=A+Math.ceil((c.ymax-A)/v)*v;return{extent:c,width:Math.round(c.width/r),height:Math.round(c.height/v),resolution:(r+v)/2}};K.unitKebabDict=t;K.uvComponentToVector=aa;Object.defineProperties(K,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./GCSShiftTransform","./IdentityTransform","./PolynomialTransform"],function(K,m,R,F){const n={GCSShiftXform:m,IdentityXform:R,PolynomialXform:F},N=Object.keys(n);K.isTransformSupported=function(aa){return!aa||N.includes(aa?.type)};K.readTransform=function(aa){if(!aa?.type)return null;var S=n[aa?.type];return S?(S=new S,S.read(aa),S):null};Object.defineProperties(K,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterTransforms/GCSShiftTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(K,m,R,F,n,N,aa,S){F=function(L){function M(){var p=
L.apply(this,arguments)||this;p.type="gcs-shift";p.tolerance=1E-8;return p}K._inheritsLoose(M,L);var y=M.prototype;y.forwardTransform=function(p){p=p.clone();if("point"===p.type)return p.x>180+this.tolerance&&(p.x-=360),p;p.xmin>=180-this.tolerance?(p.xmax-=360,p.xmin-=360):p.xmax>180+this.tolerance&&(p.xmin=-180,p.xmax=180);return p};y.inverseTransform=function(p){p=p.clone();if("point"===p.type)return p.x<-this.tolerance&&(p.x+=360),p;p.xmin<-this.tolerance&&(p.xmin+=360,p.xmax+=360);return p};
return M}(S);m.__decorate([N.enumeration({GCSShiftXform:"gcs-shift"})],F.prototype,"type",void 0);m.__decorate([R.property()],F.prototype,"tolerance",void 0);return F=m.__decorate([aa.subclass("esri.layers.support.rasterTransforms.GCSShiftTransform")],F)})},"esri/layers/support/rasterTransforms/BaseRasterTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(K,m,R,F,n,N,aa){R=function(S){function L(){return S.apply(this,arguments)||this}K._inheritsLoose(L,S);var M=L.prototype;M.forwardTransform=function(y){return y};M.inverseTransform=function(y){return y};K._createClass(L,[{key:"affectsPixelSize",get:function(){return!1}}]);return L}(R.JSONSupport);m.__decorate([F.property()],R.prototype,"affectsPixelSize",null);m.__decorate([F.property({json:{write:!0}})],R.prototype,"spatialReference",void 0);return R=m.__decorate([aa.subclass("esri.layers.support.rasterTransforms.BaseRasterTransform")],
R)})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ./BaseRasterTransform".split(" "),function(K,m,R,F,n,N,aa,S,L,M){R=function(y){function p(){var J=y.apply(this,arguments)||
this;J.type="identity";return J}K._inheritsLoose(p,y);return p}(M);m.__decorate([S.enumeration({IdentityXform:"identity"})],R.prototype,"type",void 0);return R=m.__decorate([L.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],R)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ./BaseRasterTransform ../../../geometry/Point ../../../geometry/Extent".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y,p,J){function k(f,q,z){const {x:t,y:b}=q;if(2>z)return{x:f[0]+t*f[2]+b*f[4],y:f[1]+t*f[3]+b*f[5]};if(2===z){q=t*t;z=b*b;var l=t*b;return{x:f[0]+t*f[2]+b*f[4]+q*f[6]+l*f[8]+z*f[10],y:f[1]+t*f[3]+b*f[5]+q*f[7]+l*f[9]+z*f[11]}}q=t*t;z=b*b;l=t*b;const g=q*t,u=q*b,h=t*z,c=b*z;return{x:f[0]+t*f[2]+b*f[4]+q*f[6]+l*f[8]+z*f[10]+g*f[12]+u*f[14]+h*f[16]+c*f[18],y:f[1]+t*f[3]+b*f[5]+q*f[7]+l*f[9]+z*f[11]+g*f[13]+u*f[15]+h*f[17]+c*f[19]}}function d(f,q,z){const {xmin:t,ymin:b,
xmax:l,ymax:g,spatialReference:u}=q;q=[];if(2>z)q.push({x:t,y:g}),q.push({x:l,y:g}),q.push({x:t,y:b}),q.push({x:l,y:b});else{var h=10;for(var c=0;c<h;c++)q.push({x:t,y:b+(g-b)*c/(h-1)}),q.push({x:l,y:b+(g-b)*c/(h-1)});h=8;for(c=1;c<=h;c++)q.push({x:t+(l-t)*c/h,y:b}),q.push({x:t+(l-t)*c/h,y:g})}q=q.map(r=>k(f,r,z));h=q.map(r=>r.x);q=q.map(r=>r.y);return new J({xmin:Math.min.apply(null,h),xmax:Math.max.apply(null,h),ymin:Math.min.apply(null,q),ymax:Math.max.apply(null,q),spatialReference:u})}R=function(f){function q(){var t=
f.apply(this,arguments)||this;t.polynomialOrder=1;t.type="polynomial";return t}K._inheritsLoose(q,f);var z=q.prototype;z.readForwardCoefficients=function(t,b){const {coeffX:l,coeffY:g}=b;if(!l?.length||!g?.length||l.length!==g.length)return null;t=[];for(b=0;b<l.length;b++)t.push(l[b]),t.push(g[b]);return t};z.writeForwardCoefficients=function(t,b,l){l=[];const g=[];for(let u=0;u<t?.length;u++)0===u%2?l.push(t[u]):g.push(t[u]);b.coeffX=l;b.coeffY=g};z.readInverseCoefficients=function(t,b){const {inverseCoeffX:l,
inverseCoeffY:g}=b;if(!l?.length||!g?.length||l.length!==g.length)return null;t=[];for(b=0;b<l.length;b++)t.push(l[b]),t.push(g[b]);return t};z.writeInverseCoefficients=function(t,b,l){l=[];const g=[];for(let u=0;u<t?.length;u++)0===u%2?l.push(t[u]):g.push(t[u]);b.inverseCoeffX=l;b.inverseCoeffY=g};z.forwardTransform=function(t){if("point"===t.type){const b=k(this.forwardCoefficients,t,this.polynomialOrder);return new p({x:b.x,y:b.y,spatialReference:t.spatialReference})}return d(this.forwardCoefficients,
t,this.polynomialOrder)};z.inverseTransform=function(t){if("point"===t.type){const b=k(this.inverseCoefficients,t,this.polynomialOrder);return new p({x:b.x,y:b.y,spatialReference:t.spatialReference})}return d(this.inverseCoefficients,t,this.polynomialOrder)};K._createClass(q,[{key:"inverseCoefficients",get:function(){var t=this._get("inverseCoefficients"),b=this._get("forwardCoefficients");if(!t&&b&&2>this.polynomialOrder){const [l,g,u,h,c,r]=b;t=u*r-c*h;b=c*h-u*r;t=[(c*g-l*r)/t,(u*g-l*h)/b,r/t,h/
b,-c/t,-u/b]}return t},set:function(t){this._set("inverseCoefficients",t)}},{key:"affectsPixelSize",get:function(){return 0<this.polynomialOrder}}]);return q}(y);m.__decorate([F.property({json:{write:!0}})],R.prototype,"polynomialOrder",void 0);m.__decorate([F.property()],R.prototype,"forwardCoefficients",void 0);m.__decorate([S.reader("forwardCoefficients",["coeffX","coeffY"])],R.prototype,"readForwardCoefficients",null);m.__decorate([M.writer("forwardCoefficients")],R.prototype,"writeForwardCoefficients",
null);m.__decorate([F.property({json:{write:!0}})],R.prototype,"inverseCoefficients",null);m.__decorate([S.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],R.prototype,"readInverseCoefficients",null);m.__decorate([M.writer("inverseCoefficients")],R.prototype,"writeInverseCoefficients",null);m.__decorate([F.property()],R.prototype,"affectsPixelSize",null);m.__decorate([aa.enumeration({PolynomialXform:"polynomial"})],R.prototype,"type",void 0);return R=m.__decorate([L.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],
R)})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y,p,J,k,d){function f(t,b){const {attributeTable:l,bandCount:g}=t;return N.isNone(l)||1<g||b&&null==l.fields.find(u=>u.name.toLowerCase()===b.toLowerCase())?!1:!0}function q(t){const {bandCount:b,colormap:l}=t;return N.isSome(l)&&0<l.length&&1===b}function z(t){return p.isValidPixelBlock(t)&&0!==t.validPixelCount}F=function(t){function b(g){return t.call(this,g)||this}K._inheritsLoose(b,t);var l=b.prototype;l.bind=function(){const {rendererJSON:g}=this;if(!g)return{success:!1};
this.lookup={rendererJSON:{}};let u;switch(g.type){case "uniqueValue":u=this._updateUVRenderer(g);break;case "rasterColormap":u=this._updateColormapRenderer(g);break;case "rasterStretch":u=this._updateStretchRenderer(g);break;case "classBreaks":u=this._updateClassBreaksRenderer(g);break;case "rasterShadedRelief":u=this._updateShadedReliefRenderer(g);break;case "vectorField":u=this._updateVectorFieldRenderer();break;case "flowRenderer":u=this._updateFlowRenderer()}return u};l.symbolize=function(g){let u=
g&&g.pixelBlock;if(!z(u))return u;if(g.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(u,g.simpleStretchParams);try{3<u.pixels.length&&(u=p.extractBands(u,[0,1,2]));let h;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":h=this._symbolizeColormap(u);break;case "classBreaks":h=this._symbolizeClassBreaks(u);break;case "rasterStretch":h=this._symbolizeStretch(u,g.bandIds);break;case "rasterShadedRelief":const c=g.extent;h=this._symbolizeShadedRelief(u,
{isGCS:c.spatialReference.isGeographic,resolution:{x:(c.xmax-c.xmin)/u.width,y:(c.ymax-c.ymin)/u.height}})}return h}catch(h){return n.getLogger(this.declaredClass).error("symbolize",h.message),u}};l.simpleStretch=function(g,u){if(!z(g))return g;try{return 3<g.pixels.length&&(g=p.extractBands(g,[0,1,2])),J.stretch(g,u)}catch(h){return n.getLogger(this.declaredClass).error("symbolize",h.message),g}};l.generateWebGLParameters=function(g){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:v,
offset:x}=this.lookup.colormapLut||{};return{colormap:v,colormapOffset:x,type:"lut"}}const {pixelBlock:u,isGCS:h,resolution:c,bandIds:r}=g;({rendererJSON:g}=this);return"rasterStretch"===g.type?this._generateStretchWebGLParams(u,g,r):"rasterShadedRelief"===g.type?this._generateShadedReliefWebGLParams(g,h,c):"vectorField"===g.type?this._generateVectorFieldWebGLParams(g):null};l._isLUTChanged=function(g){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const u=
this.rendererJSON.colorRamp;if(g)return JSON.stringify(u)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};l._symbolizeColormap=function(g){return this._isLUTChanged()&&!this.bind().success?g:p.colorize(g,this.lookup.colormapLut)};l._symbolizeClassBreaks=function(g){const {canUseIndexedLUT:u}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?g:u?p.colorize(g,this.lookup.colormapLut):p.remapColor(g,this.lookup.remapLut??[])};l._symbolizeStretch=function(g,u){const {rasterInfo:h}=this,{pixelType:c,bandCount:r}=h,v=this.rendererJSON;var x=["u8","u16","s8","s16"].includes(c);let A;var {dra:E}=v;({gamma:P}=this.lookup);if("histogramEqualization"===v.stretchType){x=E?null:this.lookup?.histogramLut;u=J.getStretchCutoff(v,{rasterInfo:h,pixelBlock:g,bandIds:u,returnHistogramLut:!x});var P=J.stretch(g,{...u,gamma:P});P=p.lookupPixels(P,
{lut:E?u.histogramLut:x,offset:0})}else if(x){if(E)E=J.getStretchCutoff(v,{rasterInfo:h,pixelBlock:g,bandIds:u}),A=J.createStretchLUT({pixelType:c,...E,gamma:P});else{if(this._isLUTChanged()&&!this.bind().success)return g;A=this.lookup?this.lookup.stretchLut:null}if(!A)return g;1<r&&u?.length===N.unwrap(g)?.pixels.length&&A?.lut.length===r&&(A={lut:u.map(T=>A.lut[T]),offset:A.offset});P=p.lookupPixels(g,A)}else E=J.getStretchCutoff(v,{rasterInfo:h,pixelBlock:g,bandIds:u}),P=J.stretch(g,{...E,gamma:P});
if(v.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return g;P=p.colorize(P,this.lookup?.colormapLut)}return P};l._symbolizeShadedRelief=function(g,u){var h=this.rendererJSON;u=k.hillshade(g,{...h,...u});if(!h.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return u;h=this.lookup?this.lookup.hsvMap:null;if(!h)return u;const c=N.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};k.tintHillshade(u,g,h,c);return u};l._isVectorFieldData=function(){const {bandCount:g,dataType:u}=
this.rasterInfo;return 2===g&&("vector-magdir"===u||"vector-uv"===u)};l._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};l._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
l._updateUVRenderer=function(g){const {bandCount:u,attributeTable:h,pixelType:c}=this.rasterInfo,r=g.field1;if(!r)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const v=g.defaultSymbol;var x=1===u&&["u8","s8"].includes(c);if(!f(this.rasterInfo,r)&&!x)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const A=[];if(N.isSome(h)){const E=h.fields.find(P=>"value"===P.name.toLowerCase());
if(!E)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};h.features.forEach(P=>{const T=g.uniqueValueInfos?.find(C=>String(C.value)===String(P.attributes[r]))?.symbol?.color;T?A.push([P.attributes[E.name]].concat(T)):v&&A.push([P.attributes[E.name]].concat(v.color))})}else{if("value"!==r.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};g.uniqueValueInfos?.forEach(E=>
{const P=E?.symbol?.color;P?A.push([parseInt(""+E.value,10)].concat(P)):v&&A.push([parseInt(""+E.value,10)].concat(v?.color))})}if(0===A.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};x=p.createColormapLUT({colormap:A});this.lookup={rendererJSON:g,colormapLut:x};this.canRenderInWebGL=!0;return{success:!0}};l._updateColormapRenderer=function(g){if(!q(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var u=g.colormapInfos.map(h=>[h.value].concat(h.color)).sort((h,c)=>h[0]-c[0]);if(!u||0===u.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};u=p.createColormapLUT({colormap:u});this.lookup={rendererJSON:g,colormapLut:u};this.canRenderInWebGL=!0;return{success:!0}};l._updateShadedReliefRenderer=function(g){const {bandCount:u,dataType:h,pixelType:c}=this.rasterInfo;if("elevation"!==h&&("generic"!==h||1!==u||"s16"!==c&&"f32"!==c&&"f64"!==c))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(g.colorRamp){var r=d.convertColorRampToColormap(g.colorRamp,256,!0);r=p.createColormapLUT({colormap:r});const v=[],x=r.indexedColormap;for(let A=0;A<x.length;A+=4){const E=R.toHSV({r:x[A],g:x[A+1],b:x[A+2]});v.push([E.h/60,E.s/100,255*E.v/100])}this.lookup={rendererJSON:g,colormapLut:r,hsvMap:v}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};
l._analyzeClassBreaks=function(g){const {attributeTable:u,pixelType:h}=this.rasterInfo,c=N.isSome(u)?u.fields.find(x=>"value"===x.name.toLowerCase()):null,r=N.isSome(u)?u.fields.find(x=>x.name.toLowerCase()===g.field.toLowerCase()):null,v=null!=c&&null!==r;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(h)||v,tableValueField:c,tableBreakField:r}};l._updateClassBreaksRenderer=function(g){var {attributeTable:u}=this.rasterInfo;const {canUseIndexedLUT:h,tableValueField:c,tableBreakField:r}=
this._analyzeClassBreaks(g);var v=g.classBreakInfos;if(!v?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};v=v.sort((T,C)=>T.classMaxValue-C.classMaxValue);var x=v[v.length-1],A=g.minValue;if(!h){var E=[];for(var P=0;P<v.length;P++)E.push({value:v[P].classMinValue??A,mappedColor:v[P].symbol.color}),A=v[P].classMaxValue;E.push({value:x.classMaxValue,mappedColor:x.symbol.color});this.lookup={rendererJSON:g,remapLut:E};this.canRenderInWebGL=
!1;return{success:!0}}E=[];if(N.isSome(u)&&null!=c&&null!==r&&c!==r){x=c.name;const T=r.name,C=v[v.length-1],{classMaxValue:X}=C;A=g.minValue;for(P of u.features){u=P.attributes[x];const G=P.attributes[T],I=G===X?C:G<A?null:v.find(({classMaxValue:ja})=>ja>G);I&&E.push([u].concat(I.symbol.color))}}else{A=Math.floor(g.minValue);for(P=0;P<v.length;P++){for(u=v[P];A<u.classMaxValue;A++)E.push([A].concat(u.symbol.color));A=Math.ceil(u.classMaxValue)}x.classMaxValue===A&&E.push([x.classMaxValue].concat(x.symbol.color))}v=
p.createColormapLUT({colormap:E,fillUnspecified:!1});this.lookup={rendererJSON:g,colormapLut:v};this.canRenderInWebGL=!0;return{success:!0}};l._isHistogramRequired=function(g){return"percentClip"===g||"histogramEqualization"===g};l._isValidRasterStatistics=function(g){return N.isSome(g)&&0<g.length&&null!=g[0].min&&null!=g[0].max};l._updateStretchRenderer=function(g){let {stretchType:u,dra:h}=g;if(!("none"===u||g.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||h))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var c=N.unwrap(g.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(g.stretchType)||c?.length||h||(u="minMax");const {computeGamma:r,useGamma:v,colorRamp:x}=g;var {gamma:A}=g;v&&r&&!A?.length&&(A=g.statistics?.length?g.statistics:N.unwrap(this.rasterInfo.statistics),A=J.computeGammaValues(this.rasterInfo.pixelType,A));const E=this.rasterInfo.pixelType,P=!h&&["u8","u16",
"s8","s16"].includes(E);"histogramEqualization"===u?(c=c.map(T=>J.createHistogramEqualizationLUT(T)),this.lookup={rendererJSON:g,histogramLut:c}):P&&(c=J.getStretchCutoff(g,{rasterInfo:this.rasterInfo}),c=J.createStretchLUT({pixelType:E,...c,gamma:v?A:null}),this.lookup={rendererJSON:g,stretchLut:c});x&&(c=d.convertColorRampToColormap(x,256,!0),this.lookup||(this.lookup={rendererJSON:g}),this.lookup.colormapLut=p.createColormapLUT({colormap:c}),this.lookup.rendererJSON=g);this.lookup.gamma=v&&A?.length?
A:null;this.canRenderInWebGL=!0;return{success:!0}};l._generateStretchWebGLParams=function(g,u,h){let c=null,r=null;var v=this.lookup&&this.lookup.colormapLut;u.colorRamp&&v&&(c=v.indexedColormap,r=v.offset);"histogramEqualization"===u.stretchType&&(u={...u,stretchType:"minMax"});({gamma:v}=this.lookup);const x=!!(u.useGamma&&v&&v.some(I=>1!==I)),{minCutOff:A,maxCutOff:E,outMin:P,outMax:T}=J.getStretchCutoff(u,{rasterInfo:this.rasterInfo,pixelBlock:g,bandIds:h});var C=0;N.isSome(g)&&(C=g.getPlaneCount(),
2===C&&(g=g.clone(),g.statistics=[g.statistics[0]],g.pixels=[g.pixels[0]]));g=Math.min(3,h?.length||C||this.rasterInfo.bandCount);h=new Float32Array(g);C=c||x?1:255;let X;for(X=0;X<g;X++)h[X]=(T-P)/(E[X]-A[X])/C;const G=new Float32Array(g);if(x)for(X=0;X<g;X++)G[X]=1<v[X]?2<v[X]?6.5+(v[X]-2)**2.5:6.5+100*(2-v[X])**4:1;return{bandCount:g,outMin:P/C,outMax:T/C,minCutOff:A,maxCutOff:E,factor:h,useGamma:x,gamma:x?v:[1,1,1],gammaCorrection:x?G:[1,1,1],colormap:c,colormapOffset:r,stretchType:u.stretchType,
type:"stretch"}};l._generateShadedReliefWebGLParams=function(g,u=!1,h={x:0,y:0}){let c=null,r=null;const v=this.lookup&&this.lookup.colormapLut;g.colorRamp&&v&&(c=v.indexedColormap,r=v.offset);u=k.calculateHillshadeParams({...g,isGCS:u,resolution:h});h=N.unwrap(this.rasterInfo.statistics)?.[0];return{...u,minValue:h?.min??0,maxValue:h?.max??8E3,hillshadeType:"traditional"===g.hillshadeType?0:1,type:"hillshade",colormap:c,colormapOffset:r}};l._generateVectorFieldWebGLParams=function(g){const {style:u,
inputUnit:h,outputUnit:c,visualVariables:r,symbolTileSize:v,flowRepresentation:x}=g;let A;var E=this.rasterInfo.statistics?.[0].min??0,P=this.rasterInfo.statistics?.[0].max??50,T=r?.find(G=>"sizeInfo"===G.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:P,maxSize:.8*v,minDataValue:E,minSize:.2*v},C=T.minDataValue??E,X=T.maxDataValue??P;P=N.isSome(T.maxSize)&&N.isSome(T.minSize)?[T.minSize/v,T.maxSize/v]:[.2,.8];"wind_speed"===u&&(P[0]=P[1]=(P[0]+P[1])/2);E=N.isSome(C)&&N.isSome(X)?[C,X]:null;
if("classified_arrow"===u)if(N.isSome(C)&&N.isSome(X)&&N.isSome(T))for(A=[],C=(T.maxDataValue-T.minDataValue)/5,X=0;6>X;X++)A.push(T.minDataValue+C*X);else A=[0,1E-6,3.5,7,10.5,14];T="flow_to"===x===("ocean_current_kn"===u||"ocean_current_m"===u)?0:Math.PI;C=r?.find(G=>"rotationInfo"===G.type);return{breakValues:A,dataRange:E,inputUnit:h,outputUnit:c,symbolTileSize:v,symbolPercentRange:P,style:u||"single_arrow",rotation:T,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?
"geographic":C?.rotationType||g.rotationType,type:"vectorField"}};return b}(F.JSONSupport);m.__decorate([aa.property({json:{write:!0}})],F.prototype,"rendererJSON",void 0);m.__decorate([aa.property({type:y,json:{write:!0}})],F.prototype,"rasterInfo",void 0);m.__decorate([aa.property({json:{write:!0}})],F.prototype,"lookup",void 0);m.__decorate([aa.property()],F.prototype,"canRenderInWebGL",void 0);return F=m.__decorate([M.subclass("esri.renderers.support.RasterSymbolizer")],F)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),
function(K,m,R,F,n,N,aa,S,L,M,y){var p;R=p=function(J){function k(d){d=J.call(this,d)||this;d.attributeTable=null;d.bandCount=null;d.colormap=null;d.extent=null;d.format=void 0;d.height=null;d.width=null;d.histograms=null;d.keyProperties={};d.multidimensionalInfo=null;d.noDataValue=null;d.pixelSize=null;d.pixelType=null;d.isPseudoSpatialReference=!1;d.spatialReference=null;d.statistics=null;d.storageInfo=null;d.transform=null;return d}K._inheritsLoose(k,J);k.prototype.clone=function(){return new p({attributeTable:F.clone(this.attributeTable),
bandCount:this.bandCount,colormap:F.clone(this.colormap),extent:F.clone(this.extent),nativePixelSize:F.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:F.clone(this.histograms),keyProperties:F.clone(this.keyProperties),multidimensionalInfo:F.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:F.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:F.clone(this.spatialReference),
statistics:F.clone(this.statistics),storageInfo:F.clone(this.storageInfo),transform:F.clone(this.transform)})};K._createClass(k,[{key:"dataType",get:function(){const d=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===d?"standard-time":d}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(d){d&&this._set("nativeExtent",d)}},{key:"nativePixelSize",get:function(){if(n.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;
const d=this.nativeExtent;return{x:d.width/this.width,y:d.height/this.height}}},{key:"hasMultidimensionalTranspose",get:function(){return!!this.storageInfo?.transposeInfo}}]);return k}(R.JSONSupport);m.__decorate([N.property({json:{write:!0}})],R.prototype,"attributeTable",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"bandCount",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"colormap",void 0);m.__decorate([N.property({type:String,readOnly:!0})],R.prototype,"dataType",
null);m.__decorate([N.property({type:L,json:{write:!0}})],R.prototype,"extent",void 0);m.__decorate([N.property({type:L,json:{write:!0}})],R.prototype,"nativeExtent",null);m.__decorate([N.property({json:{write:!0}})],R.prototype,"nativePixelSize",null);m.__decorate([N.property({json:{write:!0}})],R.prototype,"format",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"height",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"width",void 0);m.__decorate([N.property({json:{write:!0}})],
R.prototype,"hasMultidimensionalTranspose",null);m.__decorate([N.property({json:{write:!0}})],R.prototype,"histograms",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"keyProperties",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"multidimensionalInfo",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"noDataValue",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"pixelSize",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,
"pixelType",void 0);m.__decorate([N.property()],R.prototype,"isPseudoSpatialReference",void 0);m.__decorate([N.property({type:M,json:{write:!0}})],R.prototype,"spatialReference",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"statistics",void 0);m.__decorate([N.property({type:y,json:{write:!0}})],R.prototype,"storageInfo",void 0);m.__decorate([N.property({json:{write:!0}})],R.prototype,"transform",void 0);return R=p=m.__decorate([S.subclass("esri.layers.support.RasterInfo")],R)})},
"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(K,m,R,F,n,N,aa,S){var L;R=L=function(M){function y(){var p=M.apply(this,arguments)||this;p.blockWidth=void 0;p.blockHeight=void 0;p.compression=null;p.origin=null;p.firstPyramidLevel=
null;p.maximumPyramidLevel=null;p.pyramidScalingFactor=2;p.pyramidBlockWidth=null;p.pyramidBlockHeight=null;p.isVirtualTileInfo=!1;p.tileInfo=null;p.transposeInfo=null;p.blockBoundary=null;return p}K._inheritsLoose(y,M);y.prototype.clone=function(){return new L({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:F.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:F.clone(this.pyramidResolutions),
pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:F.clone(this.tileInfo),transposeInfo:F.clone(this.transposeInfo),blockBoundary:F.clone(this.blockBoundary)})};return y}(R.JSONSupport);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"blockWidth",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"blockHeight",void 0);m.__decorate([n.property({type:String,
json:{write:!0}})],R.prototype,"compression",void 0);m.__decorate([n.property({type:S,json:{write:!0}})],R.prototype,"origin",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"firstPyramidLevel",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"maximumPyramidLevel",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"pyramidResolutions",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"pyramidScalingFactor",
void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"pyramidBlockWidth",void 0);m.__decorate([n.property({type:Number,json:{write:!0}})],R.prototype,"pyramidBlockHeight",void 0);m.__decorate([n.property({type:Boolean,json:{write:!0}})],R.prototype,"isVirtualTileInfo",void 0);m.__decorate([n.property({json:{write:!0}})],R.prototype,"tileInfo",void 0);m.__decorate([n.property()],R.prototype,"transposeInfo",void 0);m.__decorate([n.property()],R.prototype,"blockBoundary",void 0);
return R=L=m.__decorate([aa.subclass("esri.layers.support.RasterStorageInfo")],R)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),function(K,m,R,F,n,N,aa,S,L,M,y){function p(){p=
m._asyncToGenerator(function*(c,r,v,x){const A=performance.now();var E=J(r,v);const P=performance.now();v=d(r,E,v.width,v.height);r=performance.now();E=q(v,!0);v=performance.now();c="Streamlines"===c?z(E,10):t(E);E=performance.now();F("esri-2d-profiler")&&(h.info("I.1","_createFlowFieldFromData (ms)",Math.round(P-A)),h.info("I.2","_getStreamlines (ms)",Math.round(r-P)),h.info("I.3","createAnimatedLinesData (ms)",Math.round(v-r)),h.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(E-v)),
h.info("I.5","createFlowMesh (ms)",Math.round(E-A)),h.info("I.6","Mesh size (bytes)",c.vertexData.buffer.byteLength+c.indexData.buffer.byteLength));yield Promise.resolve();S.throwIfAborted(x);return c});return p.apply(this,arguments)}function J(c,r){const v=f(r.data,r.width,r.height,c.smoothing);return c.interpolate?(x,A)=>{const E=Math.floor(x),P=Math.floor(A);if(0>E||E>=r.width||0>P||P>=r.height)return[0,0];x-=E;A-=P;const T=E<r.width-1?E+1:E,C=P<r.height-1?P+1:P;return[(v[2*(P*r.width+E)]*(1-A)+
v[2*(C*r.width+E)]*A)*(1-x)+(v[2*(P*r.width+T)]*(1-A)+v[2*(C*r.width+T)]*A)*x,(v[2*(P*r.width+E)+1]*(1-A)+v[2*(C*r.width+E)+1]*A)*(1-x)+(v[2*(P*r.width+T)+1]*(1-A)+v[2*(C*r.width+T)+1]*A)*x]}:(x,A)=>{x=Math.round(x);A=Math.round(A);return 0>x||x>=r.width||0>A||A>=r.height?[0,0]:[v[2*(A*r.width+x)],v[2*(A*r.width+x)+1]]}}function k(c,r,v,x,A,E,P,T,C){const X=[];let G=0,[I,ja]=r(v,x);I*=c.velocityScale;ja*=c.velocityScale;X.push({x:v,y:x,t:G,speed:Math.sqrt(I*I+ja*ja)});for(let da=0;da<c.verticesPerLine;da++){let [Y,
w]=r(v,x);Y*=c.velocityScale;w*=c.velocityScale;const O=Math.sqrt(Y*Y+w*w);if(O<c.minSpeedThreshold)break;const U=Y/O,ea=w/O;v+=U*c.segmentLength;x+=ea*c.segmentLength;G+=c.segmentLength/O;if(Math.acos(U*H+ea*Z)>c.maxTurnAngle)break;if(c.collisions){var H=Math.round(v*C);var Z=Math.round(x*C);if(0>H||H>P-1||0>Z||Z>T-1)break;const ca=E[Z*P+H];if(-1!==ca&&ca!==A)break;E[Z*P+H]=A}X.push({x:v,y:x,t:G,speed:O});H=U;Z=ea}return X}function d(c,r,v,x){const A=[],E=new L,P=1/Math.max(c.lineCollisionWidth,
1),T=Math.round(v*P),C=Math.round(x*P),X=new Int32Array(T*C);for(var G=0;G<X.length;G++)X[G]=-1;G=[];for(let I=0;I<x;I+=c.lineSpacing)for(let ja=0;ja<v;ja+=c.lineSpacing)G.push({x:ja,y:I,sort:E.getFloat()});G.sort((I,ja)=>I.sort-ja.sort);for(const {x:I,y:ja}of G)E.getFloat()<c.density&&(v=k(c,r,I,ja,A.length,X,T,C,P),2>v.length||A.push(v));return A}function f(c,r,v,x){if(0===x)return c;const A=Math.round(3*x),E=Array(2*A+1);var P=0;for(var T=-A;T<=A;T++){var C=Math.exp(-T*T/(x*x));E[T+A]=C;P+=C}for(x=
-A;x<=A;x++)E[x+A]/=P;P=new Float32Array(c.length);for(x=0;x<v;x++)for(T=0;T<r;T++){var X=C=0;for(var G=-A;G<=A;G++)if(!(0>T+G||T+G>=r)){var I=E[G+A];C+=I*c[2*(x*r+(T+G))];X+=I*c[2*(x*r+(T+G))+1]}P[2*(x*r+T)]=C;P[2*(x*r+T)+1]=X}c=new Float32Array(c.length);for(x=0;x<r;x++)for(T=0;T<v;T++){X=C=0;for(G=-A;G<=A;G++)0>T+G||T+G>=v||(I=E[G+A],C+=I*P[2*((T+G)*r+x)],X+=I*P[2*((T+G)*r+x)+1]);c[2*(T*r+x)]=C;c[2*(T*r+x)+1]=X}return c}function q(c,r){const v=new L;var x=c.reduce((T,C)=>T+C.length,0);x=new Float32Array(4*
x);const A=Array(c.length);let E=0,P=0;for(const T of c){c=E;for(const C of T)x[4*E]=C.x,x[4*E+1]=C.y,x[4*E+2]=C.t,x[4*E+3]=C.speed,E++;A[P++]={startVertex:c,numberOfVertices:T.length,totalTime:T[T.length-1].t,timeSeed:r?v.getFloat():0}}return{lineVertices:x,lineDescriptors:A}}function z(c,r){function v(H,Z,da,Y,w,O,U,ea){const ca=9*C;let ha=0;T[ca+ha++]=H;T[ca+ha++]=Z;T[ca+ha++]=1;T[ca+ha++]=da;T[ca+ha++]=O;T[ca+ha++]=U;T[ca+ha++]=Y/2;T[ca+ha++]=w/2;T[ca+ha++]=ea;C++;T[ca+ha++]=H;T[ca+ha++]=Z;T[ca+
ha++]=-1;T[ca+ha++]=da;T[ca+ha++]=O;T[ca+ha++]=U;T[ca+ha++]=-Y/2;T[ca+ha++]=-w/2;T[ca+ha++]=ea;C++}const {lineVertices:x,lineDescriptors:A}=c;var E=c=0;for(var P of A)c+=2*P.numberOfVertices,E+=6*(P.numberOfVertices-1);const T=new Float32Array(9*c);P=new Uint32Array(E);let C=0;c=0;for(const H of A){const {totalTime:Z,timeSeed:da}=H;let Y=E=null,w=null;var X=null,G=null,I=null;for(let O=0;O<H.numberOfVertices;O++){X=x[4*(H.startVertex+O)];const U=x[4*(H.startVertex+O)+1],ea=x[4*(H.startVertex+O)+2],
ca=x[4*(H.startVertex+O)+3];let ha=null,a=null;var ja=null;let e=null;0<O&&(ha=X-E,a=U-Y,ja=Math.sqrt(ha*ha+a*a),ha/=ja,a/=ja,1<O?(G=ha+G,I=a+I,ja=Math.sqrt(G*G+I*I),G/=ja,I/=ja,ja=Math.min(1/(G*ha+I*a),r),G*=ja,I*=ja,ja=-I,e=G):(ja=-a,e=ha),null!==ja&&null!==e&&(v(E,Y,w,ja,e,Z,da,ca),P[c++]=C-2,P[c++]=C,P[c++]=C-1,P[c++]=C,P[c++]=C+1,P[c++]=C-1));E=X;Y=U;w=ea;G=ha;I=a;X=ca}v(E,Y,w,-I,G,Z,da,X)}return{vertexData:T,indexData:P}}function t(c){function r(Q,V){var ka=ea+ha,ma=ca+a,oa=Math.sqrt(ka*ka+
ma*ma);ka/=oa;ma/=oa;var pa=ea*ka+ca*ma,ta=ha+e,sa=a+D;oa=Math.sqrt(ta*ta+sa*sa);ta/=oa;sa/=oa;var wa=ha*ta+a*sa;oa=ja;var xa=H,B=Z,qa=da;ma=-(ma/pa);ka/=pa;pa=Y;var fa=w,ua=O,va=U;sa=-(sa/wa);ta/=wa;wa=16*G;let la=0;for(const ya of[1,2])for(const Ba of[1,2,3,4])C[wa+la++]=oa,C[wa+la++]=xa,C[wa+la++]=B,C[wa+la++]=qa,C[wa+la++]=pa,C[wa+la++]=fa,C[wa+la++]=ua,C[wa+la++]=va,C[wa+la++]=ya,C[wa+la++]=Ba,C[wa+la++]=Q,C[wa+la++]=V,C[wa+la++]=ma/2,C[wa+la++]=ka/2,C[wa+la++]=sa/2,C[wa+la++]=ta/2,G++;X[I++]=
G-8;X[I++]=G-7;X[I++]=G-6;X[I++]=G-7;X[I++]=G-5;X[I++]=G-6;X[I++]=G-4;X[I++]=G-3;X[I++]=G-2;X[I++]=G-3;X[I++]=G-1;X[I++]=G-2}function v(Q,V,ka,ma,oa,pa){ea=ha;ca=a;ha=e;a=D;null==ea&&null==ca&&(ea=ha,ca=a);if(null!=Y&&null!=w){e=Q-Y;D=V-w;const ta=Math.sqrt(e*e+D*D);e/=ta;D/=ta}null!=ea&&null!=ca&&r(oa,pa);ja=Y;H=w;Z=O;da=U;Y=Q;w=V;O=ka;U=ma}function x(Q,V){ea=ha;ca=a;ha=e;a=D;null==ea&&null==ca&&(ea=ha,ca=a);null!=ea&&null!=ca&&r(Q,V)}const {lineVertices:A,lineDescriptors:E}=c;let P=c=0;for(var T of E){const Q=
T.numberOfVertices-1;c+=8*Q;P+=12*Q}const C=new Float32Array(16*c),X=new Uint32Array(P);let G=0,I=0,ja,H,Z,da,Y,w,O,U,ea,ca,ha,a,e,D;for(const Q of E){D=e=a=ha=ca=ea=U=O=w=Y=da=Z=H=ja=null;const {totalTime:V,timeSeed:ka}=Q;for(T=0;T<Q.numberOfVertices;T++)v(A[4*(Q.startVertex+T)],A[4*(Q.startVertex+T)+1],A[4*(Q.startVertex+T)+2],A[4*(Q.startVertex+T)+3],V,ka);x(V,ka)}return{vertexData:C,indexData:X}}function b(c,r){const v=r.pixels,{width:x,height:A}=r,E=new Float32Array(x*A*2),P=r.mask||new Uint8Array(x*
A*2);r.mask||P.fill(255);if("vector-uv"===c)for(c=0;c<x*A;c++)E[2*c]=v[0][c],E[2*c+1]=-v[1][c];else if("vector-magdir"===c)for(c=0;c<x*A;c++){r=v[0][c];const T=N.deg2rad(v[1][c]),C=Math.sin(T-Math.PI/2);E[2*c]=Math.cos(T-Math.PI/2)*r;E[2*c+1]=C*r}return{data:E,mask:P,width:x,height:A}}function l(){l=m._asyncToGenerator(function*(c,r,v,x,A,E){const P=performance.now();var T=M.getInfo(r.spatialReference);if(!T)return v=yield g(c,r,v,x,A,E),F("esri-2d-profiler")&&h.info("I.7","loadImagery, early exit (ms)",
Math.round(performance.now()-P)),F("esri-2d-profiler")&&h.info("I.9","Number of parts",1),v;const [C,X]=T.valid,G=Math.ceil(r.width/(X-C)),I=r.width/G,ja=Math.round(v/G);let H=r.xmin;const Z=[];T=performance.now();for(let da=0;da<G;da++){const Y=new y({xmin:H,xmax:H+I,ymin:r.ymin,ymax:r.ymax,spatialReference:r.spatialReference});Z.push(g(c,Y,ja,x,A,E));H+=I}c=yield Promise.all(Z);F("esri-2d-profiler")&&h.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-T));F("esri-2d-profiler")&&
h.info("I.9","Number of parts",c.length);x={data:new Float32Array(v*x*2),mask:new Uint8Array(v*x),width:v,height:x};r=0;for(const da of c){for(c=0;c<da.height;c++)for(A=0;A<da.width;A++)r+A>=v||(x.data[2*(c*v+r+A)]=da.data[2*(c*da.width+A)],x.data[2*(c*v+r+A)+1]=da.data[2*(c*da.width+A)+1],x.mask[c*v+r+A]=da.mask[c*da.width+A]);r+=da.width}F("esri-2d-profiler")&&h.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-P));return x});return l.apply(this,arguments)}function g(c,r,
v,x,A,E){return u.apply(this,arguments)}function u(){u=m._asyncToGenerator(function*(c,r,v,x,A,E){const P={requestProjectedLocalDirections:!0,signal:E};aa.isSome(A)&&(P.timeExtent=A);if("imagery"===c.type)return yield c.load({signal:E}),A=c.rasterInfo.dataType,c=yield c.fetchImage(r,v,x,P),!c||aa.isNone(c.pixelData)||aa.isNone(c.pixelData.pixelBlock)?{data:new Float32Array(v*x*2),mask:new Uint8Array(v*x),width:v,height:x}:b(A,c.pixelData.pixelBlock);yield c.load({signal:E});A=c.rasterInfo.dataType;
c=yield c.fetchPixels(r,v,x,P);return!c||aa.isNone(c.pixelBlock)?{data:new Float32Array(v*x*2),mask:new Uint8Array(v*x),width:v,height:x}:b(A,c.pixelBlock)});return u.apply(this,arguments)}const h=n.getLogger("esri.views.2d.engine.flow.dataUtils");K.createAnimatedLinesData=q;K.createFlowMesh=function(c,r,v,x){return p.apply(this,arguments)};K.createParticlesMesh=t;K.createStreamlinesMesh=z;K.loadImagery=function(c,r,v,x,A,E){return l.apply(this,arguments)};Object.defineProperties(K,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../chunks/_rollupPluginBabelHelpers ../../geometry ../../core/maybe ../../geometry/support/GeographicTransformation ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ./rasterFunctions/rasterFunctionHelper ./rasterFunctions/rasterProjectionHelper ./rasterFunctions/stretchUtils ./rasterFunctions/vectorFieldUtils ./rasterTransforms/utils ../../renderers/support/RasterSymbolizer ../../views/2d/engine/flow/dataUtils ../../geometry/Extent".split(" "),function(K,m,R,F,n,N,
aa,S,L,M,y,p,J,k,d){return function(){function f(){}var q=f.prototype;q.convertVectorFieldData=function(z){const t=n.fromJSON(z.pixelBlock);z=y.convertVectorFieldData(t,z.type);return Promise.resolve(R.isSome(z)&&z.toJSON())};q.decode=function(){var z=K._asyncToGenerator(function*(t){return(t=yield N.decode(t.data,t.options))&&t.toJSON()});return function(t){return z.apply(this,arguments)}}();q.symbolize=function(z){z.pixelBlock=n.fromJSON(z.pixelBlock);z.extent=z.extent?d.fromJSON(z.extent):null;
z=this.symbolizer.symbolize(z);return Promise.resolve(R.isSome(z)&&z.toJSON())};q.updateSymbolizer=function(){var z=K._asyncToGenerator(function*(t){this.symbolizer=J.fromJSON(t.symbolizerJSON);t.histograms&&"rasterStretch"===this.symbolizer?.rendererJSON.type&&(this.symbolizer.rendererJSON.histograms=t.histograms)});return function(t){return z.apply(this,arguments)}}();q.updateRasterFunction=function(){var z=K._asyncToGenerator(function*(t){this.rasterFunction=S.create(t.rasterFunctionJSON)});return function(t){return z.apply(this,
arguments)}}();q.process=function(){var z=K._asyncToGenerator(function*(t){t=this.rasterFunction.process({extent:d.fromJSON(t.extent),primaryPixelBlocks:t.primaryPixelBlocks.map(b=>R.isSome(b)?n.fromJSON(b):null),primaryRasterIds:t.primaryRasterIds});return R.isSome(t)?t.toJSON():null});return function(t){return z.apply(this,arguments)}}();q.stretch=function(z){z=this.symbolizer.simpleStretch(n.fromJSON(z.srcPixelBlock),z.stretchParams);return Promise.resolve(R.isSome(z)&&z.toJSON())};q.estimateStatisticsHistograms=
function(z){z=M.estimateStatisticsHistograms(n.fromJSON(z.srcPixelBlock));return Promise.resolve(z)};q.split=function(z){const t=aa.split(n.fromJSON(z.srcPixelBlock),z.tileSize,z.maximumPyramidLevel);t&&t.forEach((b,l)=>{t.set(l,b?.toJSON())});return Promise.resolve(t)};q.mosaicAndTransform=function(){var z=K._asyncToGenerator(function*(t){var b=t.srcPixelBlocks.map(u=>u?new n(u):null);let l=b=aa.mosaic(b,t.srcMosaicSize,{blockWidths:t.blockWidths,alignmentInfo:t.alignmentInfo,clipOffset:t.clipOffset,
clipSize:t.clipSize});t.coefs&&(l=aa.approximateTransform(b,t.destDimension,t.coefs,t.sampleSpacing,t.interpolation));let g;t.projectDirections&&t.gcsGrid&&(g=aa.getLocalArithmeticNorthRotations(t.destDimension,t.gcsGrid),l=R.unwrap(y.convertToLocalDirections(l,t.isUV?"vector-uv":"vector-magdir",g)));return{pixelBlock:l?.toJSON(),localNorthDirections:g}});return function(t){return z.apply(this,arguments)}}();q.createFlowMesh=function(){var z=K._asyncToGenerator(function*(t,b){const l={data:new Float32Array(t.flowData.buffer),
mask:new Uint8Array(t.flowData.maskBuffer),width:t.flowData.width,height:t.flowData.height},{vertexData:g,indexData:u}=yield k.createFlowMesh(t.meshType,t.simulationSettings,l,b.signal);return{result:{vertexBuffer:g.buffer,indexBuffer:u.buffer},transferList:[g.buffer,u.buffer]}});return function(t,b){return z.apply(this,arguments)}}();q.getProjectionOffsetGrid=function(){var z=K._asyncToGenerator(function*(t){const b=d.fromJSON(t.projectedExtent),l=d.fromJSON(t.srcBufferExtent);let g=null;t.datumTransformationSteps&&
(g=new F({steps:t.datumTransformationSteps}));if(t.includeGCSGrid||L.requirePE(b.spatialReference,l.spatialReference,g))yield L.load();const u=t.rasterTransform?p.readTransform(t.rasterTransform):null;return L.getProjectionOffsetGrid({...t,projectedExtent:b,srcBufferExtent:l,datumTransformation:g,rasterTransform:u})});return function(t){return z.apply(this,arguments)}}();return f}()});