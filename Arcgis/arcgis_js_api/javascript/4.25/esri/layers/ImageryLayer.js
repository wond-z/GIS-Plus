// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/Error ../../core/jsonMap ../../core/lang ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/support/spatialReferenceUtils ../graphics/featureConversionUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtils ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/ImageAngleParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImageSampleParameters ../../views/2d/engine/flow/dataUtils ../../geometry/SpatialReference".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v,d,n,h,A,r,c,m,k,y,e,b,f,t,x,E,G,C,F,w,H,q,B,R,M,U,V,P,X,Z,ba,da,aa,Q,W,Y,ea,fa,ha,ka,na,sa,qa,wa,ya,xa,va,Ba,Ca,Ka,Ha,Ma,Da,Pa,La,Na,Ya,Ta){function Za(oa){return oa?(oa=JSON.stringify(oa).match(/"rasterFunction":"(.*?")/gi)?.map(Ea=>Ea.replace('"rasterFunction":"',"").replace('"',"")))?oa.join("/"):null:null}const Ua=T.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),
$a=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),ab=d.ensureRange(n.ensureNumber,{min:0,max:255});N.ArcGISImageService=oa=>{function Ea(Oa){return Oa?.path??""}oa=function(Oa){function Qa(){var K=Oa.apply(this,arguments)||this;K._functionRasterInfos={};K._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};K._cachedRendererJson=null;K._serviceSupportsMosaicRule=null;K._rasterAttributeTableFieldPrefix="Raster.";K.adjustAspectRatio=null;K.bandIds=void 0;K.capabilities=
null;K.compressionQuality=void 0;K.compressionTolerance=.01;K.copyright=null;K.defaultMosaicRule=null;K.definitionExpression=null;K.exportImageServiceParameters=null;K.rasterInfo=null;K.fields=null;K.fullExtent=null;K.hasMultidimensions=!1;K.imageMaxHeight=4100;K.imageMaxWidth=4100;K.interpolation=void 0;K.minScale=0;K.maxScale=0;K.multidimensionalSubset=null;K.noData=null;K.noDataInterpretation=void 0;K.objectIdField=null;K.geometryType="polygon";K.typeIdField=null;K.types=[];K.pixelFilter=null;
K.raster=void 0;K.sourceType=null;K.viewId=void 0;K.symbolizer=null;K.rasterFunctionInfos=null;K.serviceDataType=null;K.spatialReference=null;K.pixelType=null;K.serviceRasterInfo=null;K.sourceJSON=null;K.url=null;K.version=void 0;return K}z._inheritsLoose(Qa,Oa);var ma=Qa.prototype;ma.initialize=function(){this._set("exportImageServiceParameters",new k.ExportImageServiceParameters({layer:this}))};ma.readServiceSupportsMosaicRule=function(K,L){return this._isMosaicRuleSupported(L)};ma.readBandIds=
function(K,L){if(Array.isArray(K)&&0<K.length&&K.every(ca=>"number"===typeof ca))return K};ma.readCapabilities=function(K,L){return this._readCapabilities(L)};ma.writeCompressionQuality=function(K,L,ca){null!=K&&"lerc"!==this.format&&(L[ca]=K)};ma.writeCompressionTolerance=function(K,L,ca){"lerc"===this.format&&null!=K&&(L[ca]=K)};ma.readDefaultMosaicRule=function(K,L){return this._serviceSupportsMosaicRule?f.fromJSON(L):null};ma.readFormat=function(K,L){return"esriImageServiceDataTypeVector-UV"===
L.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===L.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ma.readMinScale=function(K,L){return null!=L.minLOD&&null!=L.maxLOD?K:0};ma.readMaxScale=function(K,L){return null!=L.minLOD&&null!=L.maxLOD?K:0};ma.readMosaicRule=function(K,L){return(K=K||L.mosaicRule)?f.fromJSON(K):this._isMosaicRuleSupported(L)?f.fromJSON(L):null};ma.writeMosaicRule=function(K,L,ca){K=this.mosaicRule;const ia=this.definitionExpression;K?ia&&ia!==K.where&&
(K=K.clone(),K.where=ia):ia&&(K=new f({where:ia}));this._isValidCustomizedMosaicRule(K)&&(L[ca]=K.toJSON())};ma.writeNoData=function(K,L,ca){null!=K&&"number"===typeof K&&(L[ca]=ab(K))};ma.readObjectIdField=function(K,L){K||(K=(K=L.fields.filter(ca=>"esriFieldTypeOID"===ca.type||"oid"===ca.type))&&K[0]&&K[0].name);return K};ma.readSourceType=function(K,L){return this._isMosaicDataset(L)?"mosaic-dataset":"raster-dataset"};ma.readRenderer=function(K,L,ca){K=L?.layerDefinition?.drawingInfo?.renderer;
ca=S.read(K,ca);if(null==ca)return null;"vector-field"===ca.type&&L.symbolTileSize&&!K.symbolTileSize&&(ca.symbolTileSize=L.symbolTileSize);b.isSupportedRendererType(ca)||l.getLogger(this.declaredClass).warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return ca};ma.writeRenderer=function(K,L,ca){L.layerDefinition=L.layerDefinition||{};L.layerDefinition.drawingInfo=L.layerDefinition.drawingInfo||{};L.layerDefinition.drawingInfo.renderer=K.toJSON();"vector-field"===K.type&&
(L.symbolTileSize=K.symbolTileSize)};ma.readRenderingRule=function(K,L){K=L.rasterFunctionInfos;return L.renderingRule||K&&K.length&&"None"!==K[0].name?this._isRFTJson(L.renderingRule)?G.fromJSON({rasterFunctionDefinition:L.renderingRule}):G.fromJSON(L.renderingRule||{rasterFunctionInfos:L.rasterFunctionInfos}):null};ma.writeRenderingRule=function(K,L,ca){K=K.toJSON();L[ca]=K.rasterFunctionDefinition?K.rasterFunctionDefinition:K};ma.readSpatialReference=function(K,L){return(K=K||L.extent.spatialReference)?
Ta.fromJSON(K):null};ma.readPixelType=function(K){return Ua.fromJSON(K)||K};ma.writePixelType=function(K,L,ca){if(a.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)L[ca]=Ua.toJSON(K)};ma.readVersion=function(K,L){(K=L.currentVersion)||(K=L.hasOwnProperty("fields")||L.hasOwnProperty("timeInfo")?10:9.3);return K};ma.applyFilter=function(K){let L=K;this.pixelFilter&&(L=this._clonePixelData(K),this.pixelFilter(L));return L};ma.applyRenderer=function(){var K=z._asyncToGenerator(function*(L,
ca){var ia=L;const {renderer:ja,symbolizer:la,pixelFilter:ta,bandIds:pa}=this;if(!this._isPicture()&&ja&&la&&!ta){ia=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(ja.toJSON());const ua=this._rasterJobHandler.instance;ua?(ia&&(la.bind(),yield ua.updateSymbolizer(la,ca),this._cachedRendererJson=ja.toJSON()),ca=yield ua.symbolize({bandIds:pa,...L},ca),ia={extent:L.extent,pixelBlock:ca}):ia={extent:L.extent,pixelBlock:la.symbolize({bandIds:pa,...L})}}return ia});return function(L,ca){return K.apply(this,
arguments)}}();ma.destroy=function(){this._shutdownJobHandler()};ma.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ma.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ma.computeAngles=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsComputeAngles)throw new J("imagery-layer:compute-angles","this operation is not supported on the input image service");
L=n.ensureClass(Ma,L).clone();return M.computeAngles(this.url,L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.computePixelSpaceLocations=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsComputePixelLocation)throw new J("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");L=n.ensureClass(La,L).clone();return M.computePixelSpaceLocations(this.url,
L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.computeHistograms=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsComputeHistograms)throw new J("imagery-layer:compute-histograms","this operation is not supported on the input image service");L=n.ensureClass(Da,L).clone();const {raster:ia,mosaicRule:ja,renderingRule:la}=this;la&&null==L.renderingRule&&(L.renderingRule=la);ja&&null==L.mosaicRule&&
(L.mosaicRule=ja);ia&&null==L.raster&&(L.raster=ia);return M.computeHistograms(this.url,L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.computeStatisticsHistograms=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsComputeStatisticsHistograms)throw new J("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");L=n.ensureClass(Da,L).clone();
const {raster:ia,mosaicRule:ja,renderingRule:la}=this;la&&null==L.renderingRule&&(L.renderingRule=la);ja&&null==L.mosaicRule&&(L.mosaicRule=ja);ia&&null==L.raster&&(L.raster=ia);return M.computeStatisticsHistograms(this.url,L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.getField=function(K){const {fieldsIndex:L}=this;return a.isSome(L)?L.get(K):void 0};ma.getFieldDomain=function(K,L){return(K=this.getField(K))?K.domain:null};ma.fetchImage=function(){var K=
z._asyncToGenerator(function*(L,ca,ia,ja={}){if(null==L||null==ca||null==ia)throw new J("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var la=yield this.generateRasterInfo(this.renderingRule,{signal:ja.signal});la&&(this.rasterInfo=la)}la=this.getExportImageServiceParameters(L,ca,ia,ja.timeExtent);if(null==la){if(ja.requestAsImageElement&&this._canRequestImageElement(this.format))return L=
document.createElement("canvas"),L.width=ca,L.height=ia,{imageOrCanvasElement:L};ja=(this.bandIds?.length||this.rasterInfo?.bandCount)??0;la=ca*ia;const ta=this.rasterInfo?.pixelType??"unknown",pa=[];for(let ua=0;ua<ja;ua++)pa.push(x.createEmptyBand(ta,la));return{pixelData:{pixelBlock:new x({width:ca,height:ia,pixels:pa,mask:new Uint8Array(la),pixelType:ta}),extent:L}}}return this._requestArrayBuffer({imageServiceParameters:la,imageProps:{extent:L,width:ca,height:ia,format:this.format},requestAsImageElement:ja.requestAsImageElement&&
!this.pixelFilter||!1,signal:ja.signal})});return function(L,ca,ia){return K.apply(this,arguments)}}();ma.fetchKeyProperties=function(K){return O(Ea(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?K?.renderingRule:null})}).then(L=>L.data)};ma.fetchRasterAttributeTable=function(K){return 10.1>this.version?Promise.reject(new J("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):O(Ea(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=
this.version?K?.renderingRule:null})}).then(L=>sa.fromJSON(L.data))};ma.getCatalogItemRasterInfo=function(K,L){const ca=this._getQueryParams();L={...L,query:ca};return Ha.getCatalogItemRasterInfo(Ea(this.parsedUrl),K,L)};ma.getCatalogItemICSInfo=function(){var K=z._asyncToGenerator(function*(L,ca){var {data:ia}=yield O(Ea(this.parsedUrl)+"/"+L+"/info/ics",{query:this._getQueryParams(),...ca});if(ia=ia&&ia.ics){var ja=null;try{ja=(yield O(Ea(this.parsedUrl)+"/"+L+"/info",{query:this._getQueryParams(),
...ca})).data.extent}catch{}if(!ja||!ja.spatialReference)return{ics:ia,icsToPixelTransform:null,icsExtent:null,northDirection:null};var la=10.7<=this.version?O(Ea(this.parsedUrl)+"/"+L+"/info/icstopixel",{query:this._getQueryParams(),...ca}).then(za=>za.data).catch(()=>({})):{},ta=ja.spatialReference,pa={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ja]}),inSR:ta.wkid||JSON.stringify(ta),outSR:"0:"+L};pa=O(Ea(this.parsedUrl)+"/project",{query:this._getQueryParams(pa),
...ca}).then(za=>za.data).catch(()=>({}));var ua=(ja.xmin+ja.xmax)/2,ra=(ja.ymax-ja.ymin)/6;ja=ja.ymin+ra;var Aa=[];for(let za=0;5>za;za++)Aa.push({x:ua,y:ja+ra*za});L={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:Aa}),inSR:ta.wkid||JSON.stringify(ta),outSR:"0:"+L};ca=O(Ea(this.parsedUrl)+"/project",{query:this._getQueryParams(L),...ca}).then(za=>za.data).catch(()=>({}));L=yield Promise.all([la,pa,ca]);ca=L[0].ipxf;null==ca&&(la=ia.geodataXform?.xf_0,"topup"===la?.name?.toLowerCase()&&
6===la?.coefficients?.length&&(ca={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:la.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(la=Q.fromJSON(L[1]&&L[1].geometries&&L[1].geometries[0]))la.spatialReference=new Ta({wkid:0,imageCoordinateSystem:ia});L=L[2].geometries?L[2].geometries.filter(za=>null!=za&&null!=za.x&&null!=za.y&&"NaN"!==za.x&&"NaN"!==za.y):[];pa=L.length;if(3>pa)return{ics:ia,icsToPixelTransform:ca,icsExtent:la,northDirection:null};
ja=ra=ua=ta=0;for(Aa=0;Aa<pa;Aa++)ta+=L[Aa].x,ua+=L[Aa].y,ra+=L[Aa].x*L[Aa].x,ja+=L[Aa].x*L[Aa].y;pa=(pa*ja-ta*ua)/(pa*ra-ta*ta);ta=0;ua=L[4].x>L[0].x;L=L[4].y>L[0].y;Infinity===pa?ta=L?90:270:0===pa?ta=ua?0:180:0<pa?ta=ua?180*Math.atan(pa)/Math.PI:180*Math.atan(pa)/Math.PI+180:0>pa&&(ta=L?180+180*Math.atan(pa)/Math.PI:360+180*Math.atan(pa)/Math.PI);return{ics:ia,icsToPixelTransform:ca,icsExtent:la,northDirection:ta}}});return function(L,ca){return K.apply(this,arguments)}}();ma.generateRasterInfo=
function(){var K=z._asyncToGenerator(function*(L,ca){if(this.serviceRasterInfo&&(!L||"none"===L.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(L)))return this.serviceRasterInfo;const ia=Za(L);if(!ia)return null;if(this._functionRasterInfos[ia])return this._functionRasterInfos[ia];L=this._generateRasterInfo(L,ca);this._functionRasterInfos[ia]=L;try{return yield L}catch{return this._functionRasterInfos[ia]=null}});return function(L,ca){return K.apply(this,arguments)}}();ma.getExportImageServiceParameters=
function(K,L,ca,ia){K=K.clone().shiftCentralMeridian();const ja=M.getImageSpatialReferenceQueryParameter(K.spatialReference,Ea(this.parsedUrl));this.pixelType!==this.serviceRasterInfo?.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const la=this.exportImageServiceParameters.toJSON(),{bandIds:ta,noData:pa}=la;var {renderingRule:ua}=la,ra=this.renderingRule?.rasterFunctionDefinition,Aa=!this.renderer||"raster-stretch"===this.renderer.type;ta?.length&&this._hasRenderingRule(this.renderingRule)&&
!ra&&Aa?(ra={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ta}},"Stretch"===ua.rasterFunction?(ra.rasterFunctionArguments.Raster=ua.rasterFunctionArguments.Raster,ua.rasterFunctionArguments.Raster=ra):"Colormap"===ua.rasterFunction?(Aa=ua.rasterFunctionArguments.Raster,"Stretch"===Aa?.rasterFunction?(ra.rasterFunctionArguments.Raster=Aa.rasterFunctionArguments.Raster,Aa.rasterFunctionArguments.Raster=ra):(ra.rasterFunctionArguments.Raster=Aa,ua.rasterFunctionArguments.Raster=ra)):
(ra.rasterFunctionArguments.Raster=ua,ua=ra),la.bandIds=void 0):la.bandIds=ta?.join(",");pa instanceof Array&&0<pa.length&&(la.noData=pa.join(","));Aa=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,ia):null;la.mosaicRule=a.isSome(Aa)?JSON.stringify(Aa):null;({multidimensionalSubset:ra}=this);if(ra&&a.isSome(Aa)&&Aa.multidimensionalDefinition&&w.hasExcludedVariableOrDimension(Aa.multidimensionalDefinition,ra,!0))return null;la.renderingRule=
this._getRenderingRuleString(G.fromJSON(ua));ua={};if(ia){const {start:Fa,end:Ja}=ia.toJSON();if(Fa&&Ja&&Fa===Ja){ua.time=""+Fa;var za=[Fa]}else if(null!=Fa||null!=Ja)ua.time=`${null==Fa?"null":Fa},${null==Ja?"null":Ja}`,za=null!=Fa&&null!=Ja?[Fa,Ja]:[Fa??Ja];if(za&&ra){ia=ra.dimensions.find(({name:Ga})=>"StdTime"===Ga);if(2===za.length&&ia.extent.length){za[0]=Math.max(za[0],ia.extent[0]);za[1]=Math.min(za[1],ia.extent[1]??ia.extent[0]);if(za[1]<za[0])return null;ua.time=za.join()}za=new m({variableName:"",
dimensionName:"StdTime",isSlice:1===za.length,values:za});if(w.hasExcludedVariableOrDimension([za],ra,!0))return null}}return{bbox:K.xmin+","+K.ymin+","+K.xmax+","+K.ymax,bboxSR:ja,imageSR:ja,size:L+","+ca,...la,...ua}};ma.getSamples=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal))?.operations.supportsGetSamples)throw new J("imagery-layer:get-samples","getSamples operation is not supported on the input image service");L=n.ensureClass(Na,L).clone();
const {raster:ia}=this;ia&&null==L.raster&&(L.raster=ia);return M.getSamples(this.url,L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.identify=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsIdentify)throw new J("imagery-layer:query-rasters","query operation is not supported on the input image service");L=n.ensureClass(Pa,L).clone();const {raster:ia,mosaicRule:ja,renderingRule:la}=
this;la&&null==L.renderingRule&&(L.renderingRule=la);if(ja&&null==L.mosaicRule){const ta=this._combineMosaicRuleWithTimeExtent(ja,L.timeExtent);L.mosaicRule=a.unwrap(ta)}ia&&null==L.raster&&(L.raster=ia);return M.identify(this.url,L,this._getRequestOptions(ca))});return function(L,ca){return K.apply(this,arguments)}}();ma.createQuery=function(){const K=new qa;K.outFields=["*"];K.returnGeometry=!0;K.where=this.definitionExpression||"1\x3d1";return K};ma.queryRasters=function(){var K=z._asyncToGenerator(function*(L,
ca){({query:L,requestOptions:ca}=yield this._prepareForQuery(L,ca));return P.executeQueryJSON(this.url,L,ca)});return function(L,ca){return K.apply(this,arguments)}}();ma.queryObjectIds=function(){var K=z._asyncToGenerator(function*(L,ca){({query:L,requestOptions:ca}=yield this._prepareForQuery(L,ca));return va.executeForIds(this.url,L,ca)});return function(L,ca){return K.apply(this,arguments)}}();ma.queryRasterCount=function(){var K=z._asyncToGenerator(function*(L,ca){({query:L,requestOptions:ca}=
yield this._prepareForQuery(L,ca));return xa.executeForCount(this.url,L,ca)});return function(L,ca){return K.apply(this,arguments)}}();ma.queryVisibleRasters=function(){var K=z._asyncToGenerator(function*(L,ca){if(!L)throw new J("imagery-layer: query-visible-rasters","missing query parameter");yield this.load();const {pixelSize:ia,returnDomainValues:ja,returnTopmostRaster:la,showNoDataRecords:ta}=ca||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let pa=!1;var ua=
null,ra=null;const Aa=this._rasterFunctionNamesIndex;if(a.isSome(L.outFields)&&(pa=L.outFields.some(Ga=>!Ga.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){ra=L.outFields.filter(Ia=>Ia.toLowerCase().includes("raster.servicepixelvalue")&&24<Ia.length).map(Ia=>{Ia=Ia.slice(25);return[this._updateRenderingRulesFunctionName(Ia,Aa),Ia]});ua=ra.map(Ia=>new G({functionName:Ia[0]}));ra=ra.map(Ia=>Ia[1]);const {renderingRule:Ga}=this;0===ua.length?Ga?.functionName?(ua.push(Ga),ra.push(Ga.functionName)):
ua=null:Ga?.functionName&&!ua.some(Ia=>Ia.functionName===Ga.functionName)&&(ua.push(Ga),ra.push(Ga.functionName))}const za=a.isNone(L.outSpatialReference)||L.outSpatialReference.equals(this.spatialReference),Fa=L.timeExtent||this.timeExtent,Ja=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Fa);ua=this._getQueryParams({geometry:L.geometry,timeExtent:Fa,mosaicRule:Ja,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:ua,pixelSize:ia,returnCatalogItems:pa,
returnGeometry:za,raster:this.raster,maxItemCount:la?1:null});delete ua.f;ua=new Pa(ua);try{yield this.generateRasterInfo(this.renderingRule);const Ga=yield M.identify(this.url,ua,{signal:ca?.signal,query:{...this.customParameters}}),Ia=L.outFields,bb=null!=Ga.value&&Ga.value.toLowerCase().includes("nodata");if(!pa||za||!Ga?.catalogItems?.features.length||!ta&&bb)return this._processVisibleRastersResponse(Ga,{returnDomainValues:ja,templateRRFunctionNames:ra,showNoDataRecords:ta,templateFields:Ia});
const Ra=this.objectIdField||"ObjectId",Wa=Ga.catalogItems?.features??[],cb=Wa.map(Sa=>Sa.attributes?.[Ra]),db=new qa({objectIds:cb,returnGeometry:!0,outSpatialReference:L.outSpatialReference,outFields:[Ra]}),Xa=yield this.queryRasters(db);Xa?.features?.length&&Xa.features.forEach(Sa=>{Wa.forEach(Va=>{Va.attributes[Ra]===Sa.attributes[Ra]&&(Va.geometry=new fa(Sa.geometry),a.isSome(L.outSpatialReference)&&(Va.geometry.spatialReference=L.outSpatialReference))})});return this._processVisibleRastersResponse(Ga,
{returnDomainValues:ja,templateRRFunctionNames:ra,showNoDataRecords:ta,templateFields:Ia})}catch{throw new J("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}});return function(L,ca){return K.apply(this,arguments)}}();ma.fetchVariableStatisticsHistograms=function(){var K=z._asyncToGenerator(function*(L,ca){var ia=O(Ea(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:L}),signal:ca}).then(ja=>ja.data?.statistics);L=O(Ea(this.parsedUrl)+"/histograms",
{query:this._getQueryParams({variable:L}),signal:ca}).then(ja=>ja.data?.histograms);ia=yield Promise.all([ia,L]);ia[0]&&ia[0].forEach(ja=>{ja.avg=ja.mean;ja.stddev=ja.standardDeviation});return{statistics:ia[0]||null,histograms:ia[1]||null}});return function(L,ca){return K.apply(this,arguments)}}();ma.createFlowMesh=function(){var K=z._asyncToGenerator(function*(L,ca){const ia=this._rasterJobHandler.instance;return ia?ia.createFlowMesh(L,ca):Ya.createFlowMesh(L.meshType,L.simulationSettings,L.flowData,
a.isSome(ca.signal)?ca.signal:(new AbortController).signal)});return function(L,ca){return K.apply(this,arguments)}}();ma.getMultidimensionalSubsetVariables=function(K){return w.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,K??this.multidimensionalInfo)};ma._fetchService=function(){var K=z._asyncToGenerator(function*(L){yield this._fetchServiceInfo(L);this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);var ca=this.sourceJSON;ca=a.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):
Ka.fetchServiceRasterInfo(Ea(this.parsedUrl),ca,{signal:L,query:this._getQueryParams()}).then(ja=>{this._set("serviceRasterInfo",ja);return ja});L=this._hasRenderingRule(this.renderingRule)?this.generateRasterInfo(this.renderingRule,{signal:L}):null;const ia=this._getRasterFunctionInfos();return Promise.all([ca,L,ia]).then(ja=>{ja[1]?this._set("rasterInfo",ja[1]):this._set("rasterInfo",ja[0]);ja[2]&&this._set("rasterFunctionInfos",ja[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",
null),l.getLogger(this.declaredClass).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));this.addHandles([g.watch(()=>this.renderingRule,la=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(la).then(ta=>{ta&&(this.rasterInfo=ta)})})]);({serviceRasterInfo:ja}=this);ja&&a.isSome(ja.multidimensionalInfo)&&this._updateMultidimensionalDefinition(ja)})});
return function(L){return K.apply(this,arguments)}}();ma._combineMosaicRuleWithTimeExtent=function(K,L){var ca=this.timeInfo;if(a.isNone(K)||a.isNone(this.multidimensionalInfo)||a.isNone(L)||a.isNone(ca?.startField))return K;const {startField:ia}=ca,ja=this.multidimensionalInfo.variables.some(ra=>ra.dimensions.some(Aa=>Aa.name===ia))?ia:"StdTime";K=K.clone();if("mosaic-dataset"===this.sourceType)return K.multidimensionalDefinition=K.multidimensionalDefinition?.filter(ra=>ra.dimensionName!==ja),this._cleanupMultidimensionalDefinition(K);
K.multidimensionalDefinition=K.multidimensionalDefinition||[];ca=K.multidimensionalDefinition.filter(ra=>ra.dimensionName===ja);const la=a.isSome(L.start)?L.start.getTime():null;L=a.isSome(L.end)?L.end.getTime():null;const ta=null==la||null==L||la===L,pa=ta?[la||L]:[[la,L]],ua=10.8<=this.version;ca.length?ca.forEach(ra=>{ra.dimensionName===ja&&(ua?(ra.dimensionName=null,ra.isSlice=!1,ra.values=[]):(ra.isSlice=ta,ra.values=pa))}):ua||(L=K.multidimensionalDefinition.filter(ra=>null!=ra.variableName&&
null==ra.dimensionName),L.length?L.forEach(ra=>{ra.dimensionName=ja;ra.isSlice=ta;ra.values=pa}):K.multidimensionalDefinition.push(new m({variableName:"",dimensionName:ja,isSlice:ta,values:pa})));return this._cleanupMultidimensionalDefinition(K)};ma._cleanupMultidimensionalDefinition=function(K){if(a.isNone(K))return null;K.multidimensionalDefinition&&(K.multidimensionalDefinition=K.multidimensionalDefinition.filter(L=>!(!L.variableName&&!L.dimensionName)),0===K.multidimensionalDefinition.length&&
(K.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==K.multidimensionalDefinition?null:K};ma._prepareForQuery=function(){var K=z._asyncToGenerator(function*(L,ca){if(!(yield this._fetchCapabilities(ca?.signal)).operations.supportsQuery)throw new J("imagery-layer:query-rasters","query operation is not supported on the input image service");L=a.isSome(L)?n.ensureClass(qa,L):this.createQuery();ca=this._getRequestOptions(ca);this.raster&&(ca.query={...ca.query,raster:this.raster});
return{query:L,requestOptions:ca}});return function(L,ca){return K.apply(this,arguments)}}();ma._initJobHandler=function(){var K=z._asyncToGenerator(function*(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const L=new F;this._rasterJobHandler.connectionPromise=L.initialize().then(()=>{this._rasterJobHandler.instance=L},()=>{});yield this._rasterJobHandler.connectionPromise});return function(){return K.apply(this,arguments)}}();ma._shutdownJobHandler=
function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null};ma._isSupportedRenderer=function(K){const {rasterInfo:L,renderingRule:ca}=this;return"unique-value"===K.type&&this._hasRenderingRule(ca)&&1===L?.bandCount&&["u8","s8"].includes(L.pixelType)||null!=L&&null!=K&&B.getSupportedRendererTypes(L).includes(K.type)};ma._fetchCapabilities=
function(){var K=z._asyncToGenerator(function*(L){if(this.capabilities)return this.capabilities;yield this._fetchServiceInfo(L);return this.capabilities});return function(L){return K.apply(this,arguments)}}();ma._fetchServiceInfo=function(){var K=z._asyncToGenerator(function*(L){let ca=this.sourceJSON;if(!ca){const {data:ia,ssl:ja}=yield O(Ea(this.parsedUrl),{query:this._getQueryParams(),signal:L});this.sourceJSON=ca=ia;ja&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<ca.capabilities?.toLowerCase().split(",").map(ia=>
ia.trim()).indexOf("tilesonly"))throw new J("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(ca,{origin:"service",url:this.parsedUrl})});return function(L){return K.apply(this,arguments)}}();ma._isMosaicDataset=function(K){return K.serviceSourceType?"esriImageServiceSourceTypeMosaicDataset"===K.serviceSourceType:0<K.fields?.length};ma._isMosaicRuleSupported=function(K){if(!K)return!1;const L=this._isMosaicDataset(K);K=10.71<=K.currentVersion&&
K.hasMultidimensions&&!(1<K.fields?.length);return L||K};ma._isVectorFieldResampleFunction=function(K){if(a.isNone(K))return!1;const {functionName:L,functionArguments:ca}=K;K="resample"===L?.toLowerCase();const ia=ca?.ResampleType||ca?.resampleType;return K&&(7===ia||10===ia)};ma._isPicture=function(){return!this.format||this.format.includes("jpg")||this.format.includes("png")};ma._configRenderer=function(K){if(!this._isPicture()&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&this.rasterInfo&&
3<=this.rasterInfo.bandCount){var L=B.getDefaultBandCombination(this.rasterInfo);!L||3===this.rasterInfo.bandCount&&0===L[0]&&1===L[1]&&2===L[2]||(this.bandIds=L)}K||(K=B.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));L=B.normalizeRendererJSON(K.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=L,this.symbolizer.rasterInfo=this.rasterInfo):this.symbolizer=new R({rendererJSON:L,
rasterInfo:this.rasterInfo});this.symbolizer.bind().success||(this.symbolizer=null)}return K};ma._clonePixelData=function(K){return null==K?K:{extent:K.extent&&K.extent.clone(),pixelBlock:a.isSome(K.pixelBlock)?K.pixelBlock.clone():null}};ma._getQueryParams=function(K){K&&a.isSome(K.renderingRule)&&"string"!==typeof K.renderingRule&&(K.renderingRule=this._getRenderingRuleString(K.renderingRule));const {raster:L,viewId:ca}=this;return{raster:L,viewId:ca,f:"json",...K,...this.customParameters}};ma._getRequestOptions=
function(K){return{...K,query:{...K?.query,...this.customParameters}}};ma._decodePixelBlock=function(K,L,ca){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:K,options:L}):H.decode(K,L,ca)};ma._getRasterFunctionInfos=function(){var K=z._asyncToGenerator(function*(L){const ca=this.sourceJSON.rasterFunctionInfos;return this.loaded?ca:ca&&10.3<=this.version?1===ca.length&&"none"===ca[0].name.toLowerCase()?ca:(yield O(Ea(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),
signal:L})).data?.rasterFunctionInfos:null});return function(L){return K.apply(this,arguments)}}();ma._canRequestImageElement=function(K){return!this.pixelFilter&&(!K||K.includes("png"))};ma._requestArrayBuffer=function(){var K=z._asyncToGenerator(function*(L){const {imageProps:ca,requestAsImageElement:ia,signal:ja}=L;if(ia&&this._canRequestImageElement(ca.format))return{imageOrCanvasElement:(yield O(Ea(this.parsedUrl)+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...this.refreshParameters,
...L.imageServiceParameters}),signal:ja})).data,params:ca};var la=this._initJobHandler();L=O(Ea(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...L.imageServiceParameters}),signal:ja});la=(yield Promise.all([L,la]))[0].data;var ta=L=ca.format||"jpgpng";"bsq"!==ta&&"bip"!==ta&&(ta=H.getFormat(la));if(!ta)throw new J("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(la)));ta="gif"===L||"bmp"===
L||L.includes("png")&&("png"===ta||"jpg"===ta);const pa={signal:ja};return{pixelData:{pixelBlock:yield ta?H.decode(la,{useCanvas:!0,...ca},pa):this._decodePixelBlock(la,{width:ca.width,height:ca.height,planes:null,pixelType:null,noDataValue:null,format:L},pa),extent:ca.extent},params:ca}});return function(L){return K.apply(this,arguments)}}();ma._generateRasterInfo=function(K,L){const ca=this._getQueryParams();L={...L,query:ca};return Ka.generateRasterInfo(Ea(this.parsedUrl),K,L)};ma._isValidCustomizedMosaicRule=
function(K){return K&&JSON.stringify(K.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())};ma._updateMultidimensionalDefinition=function(K){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(K=w.getDefaultMultidimensionalDefinition(K,{multidimensionalSubset:this.multidimensionalSubset}),a.isSome(K)&&0<K.length)){this.mosaicRule=this.mosaicRule||new f;const L=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.renderingRule&&"none"!==this.renderingRule.functionName?.toLowerCase()&&
K.forEach(ca=>ca.variableName="");if(!L||L&&0>=L.length)this.mosaicRule.multidimensionalDefinition=K}};ma._processVisibleRastersResponse=function(K,L){L=L||{};const ca=K.value,{templateRRFunctionNames:ia,showNoDataRecords:ja,returnDomainValues:la,templateFields:ta}=L;L=K.processedValues;var pa=K.catalogItems&&K.catalogItems.features;let ua=K.properties&&K.properties.Values&&K.properties.Values.map(Ja=>Ja.replace(/ /gi,", "))||[];var ra=this.objectIdField||"ObjectId",Aa="string"===typeof ca&&ca.toLowerCase().includes("nodata");
K=[];!ca||pa||Aa||(pa={},pa[ra]=0,pa=new u(this.fullExtent,null,pa),ua=[ca],pa=[pa]);if(!pa)return[];this._updateResponseFieldNames(pa,ta);Aa&&!ja&&(pa=[]);for(ra=0;ra<pa.length;ra++){Aa=pa[ra];if(null!=ca){var za=ua[ra];var Fa=this.renderingRule&&L&&0<L.length&&ia&&0<ia.length&&ia.includes(this.renderingRule.functionName)?L[ia.indexOf(this.renderingRule.functionName)]:ca;if("nodata"===za.toLowerCase()&&!ja)continue;Aa.attributes["Raster.ItemPixelValue"]=za;Aa.attributes["Raster.ServicePixelValue"]=
Fa;this._updateFeatureWithMagDirValues(Aa,za);const Ja=this.fields&&0<this.fields.length;Fa=this.renderingRule&&a.isSome(this.serviceRasterInfo?.attributeTable)?Ja?za:ca:Fa;this.renderingRule||(Fa=Ja?za:ca);this._updateFeatureWithRasterAttributeTableValues(Aa,Fa)}Aa.sourceLayer=Aa.layer=this;la&&this._updateFeatureWithDomainValues(Aa);if(ia&&L&&ia.length===L.length)for(za=0;za<ia.length;za++)Aa.attributes["Raster.ServicePixelValue."+ia[za]]=L[za];K.push(pa[ra])}return K};ma._updateFeatureWithRasterAttributeTableValues=
function(K,L){var ca=this.rasterInfo&&this.rasterInfo.attributeTable||this.serviceRasterInfo?.attributeTable;if(!a.isNone(ca)){var {features:ia,fields:ja}=ca,la=(ca=ja.map(pa=>pa.name).filter(pa=>"value"===pa.toLowerCase()))&&ca[0];if(la){var ta=ia.filter(pa=>pa.attributes[la]===(null!=L?parseInt(L,10):null));ta&&ta[0]&&ja.forEach(pa=>{K.attributes[this._rasterAttributeTableFieldPrefix+pa.name]=ta[0].attributes[pa.name]})}}};ma._updateFeatureWithMagDirValues=function(K,L){if(this._isVectorDataSet()){var ca=
L.split(/,\s*/).map(ia=>parseFloat(ia));L=ca.map(ia=>[ia]);ca=ca.map(ia=>({minValue:ia,maxValue:ia,noDataValue:null}));L=new x({height:1,width:1,pixelType:"f32",pixels:L,statistics:ca});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:L,extent:new Q(0,0,0,0,this.spatialReference)});L="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[L.pixels[0][0],L.pixels[1][0]]:q.uvComponentToVector([L.pixels[0][0],L.pixels[1][0]]);K.attributes["Raster.Magnitude"]=L[0];K.attributes["Raster.Direction"]=
L[1]}};ma._updateFeatureWithDomainValues=function(K){const L=this.fields&&this.fields.filter(ca=>ca.domain&&"coded-value"===ca.domain.type);null!=L&&L.forEach(ca=>{const ia=K.attributes[ca.name];if(null!=ia){const ja=ca.domain.codedValues.find(la=>la.code===ia);ja&&(K.attributes[ca.name]=ja.name)}})};ma._updateResponseFieldNames=function(K,L){if(L&&!(1>L.length)){var ca=this.fieldsIndex;a.isNone(ca)||K.forEach(ia=>{if(ia&&ia.attributes)for(const ja of L){const la=ca.get(ja)?.name;la&&la!==ja&&(ia.attributes[ja]=
ia.attributes[la],delete ia.attributes[la])}})}};ma._getRenderingRuleString=function(K){if(this._hasRenderingRule(K)){K=K.toJSON();K=K.rasterFunctionDefinition??K;if(K.thumbnail||K.thumbnailEx)K.thumbnail=K.thumbnailEx=null;return JSON.stringify(K)}return null};ma._hasRenderingRule=function(K){return null!=K&&null!=K.functionName&&"none"!==K.functionName.toLowerCase()};ma._updateRenderingRulesFunctionName=function(K,L){if(K&&!(1>K.length)){if("Raw"===K)return K.replace("Raw","None");var ca=K.toLowerCase().replace(/ /gi,
"_");return L.has(ca)?L.get(ca):K}};ma._isRFTJson=function(K){return K&&K.name&&K.arguments&&K.function&&K.hasOwnProperty("functionType")};ma._isVectorDataSet=function(){return"esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType};ma._readCapabilities=function(K){const L=K.capabilities?K.capabilities.toLowerCase().split(",").map(ra=>ra.trim()):["image","catalog"],{currentVersion:ca,advancedQueryCapabilities:ia,maxRecordCount:ja}=
K,la=L.includes("image"),ta="esriImageServiceDataTypeElevation"===K.serviceDataType,pa=!!(K.spatialReference||K.extent&&K.extent.spatialReference),ua=L.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:la,supportsExportImage:la,supportsIdentify:la,supportsMeasure:L.includes("mensuration")&&pa,supportsDownload:L.includes("download"),supportsQuery:L.includes("catalog")&&K.fields&&0<K.fields.length,supportsGetSamples:10.2<=ca&&la,supportsProject:10.3<=ca&&la,
supportsComputeStatisticsHistograms:10.4<=ca&&la,supportsQueryBoundary:10.6<=ca&&la,supportsCalculateVolume:10.7<=ca&&ta,supportsComputePixelLocation:10.7<=ca&&L.includes("catalog"),supportsComputeAngles:10.91<=ca,supportsAdd:ua,supportsDelete:ua,supportsEditing:ua,supportsUpdate:ua,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,
supportsQueryTopFeatures:!1},query:{maxRecordCount:ja,maxRecordCountFactor:void 0,supportsStatistics:!!ia?.supportsStatistics,supportsOrderBy:!!ia?.supportsOrderBy,supportsDistinct:!!ia?.supportsDistinct,supportsPagination:!!ia?.supportsPagination,supportsStandardizedQueriesOnly:!!ia?.useStandardizedQueries,supportsPercentileStatistics:!!ia?.supportsPercentileStatistics,supportsCentroid:!!ia?.supportsReturningGeometryCentroid,supportsDistance:!!ia?.supportsQueryWithDistance,supportsExtent:!!ia?.supportsReturningQueryExtent,
supportsGeometryProperties:!!ia?.supportsReturningGeometryProperties,supportsHavingClause:!!ia?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!ia?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}};z._createClass(Qa,[{key:"_rasterFunctionNamesIndex",get:function(){const K=new Map;if(!this.rasterFunctionInfos||a.isSome(this.rasterFunctionInfos)&&1>this.rasterFunctionInfos.length)return K;a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(L=>{K.set(L.name.toLowerCase().replace(/ /gi,
"_"),L.name)});return K}},{key:"fieldsIndex",get:function(){return this.fields?new e(this.fields):null}},{key:"format",set:function(K){K&&$a.has(K.toLowerCase())&&this._set("format",K.toLowerCase())}},{key:"mosaicRule",set:function(K){K&&K.mosaicMethod&&(K=f.fromJSON({...K.toJSON(),mosaicMethod:K.mosaicMethod,mosaicOperation:K.mosaicOperation}));this._set("mosaicRule",K)}},{key:"multidimensionalInfo",get:function(){return a.isSome(this.serviceRasterInfo)?this.serviceRasterInfo.multidimensionalInfo:
null}},{key:"parsedUrl",get:function(){return v.urlToObject(this.url)}},{key:"renderer",set:function(K){this.loaded&&(K=this._configRenderer(K));this._set("renderer",K)}},{key:"rasterFields",get:function(){const K=this._rasterAttributeTableFieldPrefix||"Raster.";var L=new y({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const ca=new y({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),
ia=new y({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ja=this.fields?p.clone(this.fields):[];ja.push(ca);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&ja.push(L);10.4<=this.version&&a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(la=>"none"===la.name.toLowerCase())&&ja.push(ia);a.isSome(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(la=>"none"!==la.name.toLowerCase()).forEach(la=>
{ja.push(new y({name:"Raster.ServicePixelValue."+la.name,alias:la.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(ja.push(new y({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ja.push(new y({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:L}=this.rasterInfo??{});a.isSome(L)&&(L=L.fields.filter(la=>"esriFieldTypeOID"!==la.type&&"value"!==la.name.toLowerCase()).map(la=>{const ta=
p.clone(la);ta.name=K+la.name;return ta}),ja=ja.concat(L));return ja}},{key:"renderingRule",set:function(K){K&&K.rasterFunction&&(K=G.fromJSON({...K.toJSON(),rasterFunction:K.rasterFunction,rasterFunctionArguments:K.rasterFunctionArguments}));this._set("renderingRule",K)}}]);return Qa}(oa);D.__decorate([d.property()],oa.prototype,"_functionRasterInfos",void 0);D.__decorate([d.property()],oa.prototype,"_rasterJobHandler",void 0);D.__decorate([d.property()],oa.prototype,"_cachedRendererJson",void 0);
D.__decorate([d.property({readOnly:!0})],oa.prototype,"_serviceSupportsMosaicRule",void 0);D.__decorate([h.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],oa.prototype,"readServiceSupportsMosaicRule",null);D.__decorate([d.property()],oa.prototype,"_rasterAttributeTableFieldPrefix",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"_rasterFunctionNamesIndex",null);D.__decorate([d.property()],oa.prototype,"adjustAspectRatio",void 0);D.__decorate([d.property({type:[n.Integer],
json:{write:!0}})],oa.prototype,"bandIds",void 0);D.__decorate([h.reader("bandIds")],oa.prototype,"readBandIds",null);D.__decorate([d.property({readOnly:!0,json:{read:!1}})],oa.prototype,"capabilities",void 0);D.__decorate([h.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],oa.prototype,"readCapabilities",null);D.__decorate([d.property({type:Number})],oa.prototype,"compressionQuality",void 0);D.__decorate([r.writer("compressionQuality")],oa.prototype,"writeCompressionQuality",
null);D.__decorate([d.property({type:Number})],oa.prototype,"compressionTolerance",void 0);D.__decorate([r.writer("compressionTolerance")],oa.prototype,"writeCompressionTolerance",null);D.__decorate([d.property({json:{read:{source:"copyrightText"}}})],oa.prototype,"copyright",void 0);D.__decorate([d.property({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],oa.prototype,"defaultMosaicRule",void 0);D.__decorate([h.reader("defaultMosaicRule",["defaultMosaicMethod"])],oa.prototype,"readDefaultMosaicRule",
null);D.__decorate([d.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],oa.prototype,"definitionExpression",void 0);D.__decorate([d.property({readOnly:!0,constructOnly:!0})],oa.prototype,"exportImageServiceParameters",void 0);D.__decorate([d.property()],oa.prototype,"rasterInfo",void 0);D.__decorate([d.property({readOnly:!0,type:[y]})],oa.prototype,"fields",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"fieldsIndex",null);D.__decorate([d.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),
json:{write:!0}})],oa.prototype,"format",null);D.__decorate([h.reader("service","format",["serviceDataType"])],oa.prototype,"readFormat",null);D.__decorate([d.property({type:Q})],oa.prototype,"fullExtent",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"hasMultidimensions",void 0);D.__decorate([d.property({json:{read:{source:"maxImageHeight"}}})],oa.prototype,"imageMaxHeight",void 0);D.__decorate([d.property({json:{read:{source:"maxImageWidth"}}})],oa.prototype,"imageMaxWidth",void 0);
D.__decorate([d.property({type:String,json:{type:E.interpolationKebab.jsonValues,read:E.interpolationKebab.read,write:E.interpolationKebab.write}})],oa.prototype,"interpolation",void 0);D.__decorate([d.property()],oa.prototype,"minScale",void 0);D.__decorate([h.reader("service","minScale")],oa.prototype,"readMinScale",null);D.__decorate([d.property()],oa.prototype,"maxScale",void 0);D.__decorate([h.reader("service","maxScale")],oa.prototype,"readMaxScale",null);D.__decorate([d.property({type:f})],
oa.prototype,"mosaicRule",null);D.__decorate([h.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],oa.prototype,"readMosaicRule",null);D.__decorate([r.writer("mosaicRule")],oa.prototype,"writeMosaicRule",null);D.__decorate([d.property()],oa.prototype,"multidimensionalInfo",null);D.__decorate([d.property({type:t,json:{write:!0}})],oa.prototype,"multidimensionalSubset",void 0);D.__decorate([d.property({json:{type:n.Integer}})],oa.prototype,"noData",void 0);D.__decorate([r.writer("noData")],
oa.prototype,"writeNoData",null);D.__decorate([d.property({type:String,json:{type:E.noDataInterpretationKebab.jsonValues,read:E.noDataInterpretationKebab.read,write:E.noDataInterpretationKebab.write}})],oa.prototype,"noDataInterpretation",void 0);D.__decorate([d.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],oa.prototype,"objectIdField",void 0);D.__decorate([h.reader("objectIdField")],oa.prototype,"readObjectIdField",null);D.__decorate([d.property({})],oa.prototype,"geometryType",
void 0);D.__decorate([d.property({})],oa.prototype,"typeIdField",void 0);D.__decorate([d.property({})],oa.prototype,"types",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"parsedUrl",null);D.__decorate([d.property({type:Function})],oa.prototype,"pixelFilter",void 0);D.__decorate([d.property()],oa.prototype,"raster",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"sourceType",void 0);D.__decorate([h.reader("sourceType",["serviceSourceType","fields"])],oa.prototype,"readSourceType",
null);D.__decorate([d.property()],oa.prototype,"viewId",void 0);D.__decorate([d.property({types:S.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:S.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(Oa){return{enabled:Oa&&"vector-field"!==Oa.type&&"flow"!==Oa.type}}}}}}})],oa.prototype,"renderer",null);D.__decorate([h.reader("renderer")],oa.prototype,"readRenderer",null);D.__decorate([r.writer("renderer")],
oa.prototype,"writeRenderer",null);D.__decorate([d.property()],oa.prototype,"symbolizer",void 0);D.__decorate([d.property(c.opacity)],oa.prototype,"opacity",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"rasterFields",null);D.__decorate([d.property({constructOnly:!0})],oa.prototype,"rasterFunctionInfos",void 0);D.__decorate([d.property({type:G})],oa.prototype,"renderingRule",null);D.__decorate([h.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],oa.prototype,"readRenderingRule",
null);D.__decorate([r.writer("renderingRule")],oa.prototype,"writeRenderingRule",null);D.__decorate([d.property()],oa.prototype,"serviceDataType",void 0);D.__decorate([d.property({readOnly:!0,type:Ta})],oa.prototype,"spatialReference",void 0);D.__decorate([h.reader("spatialReference",["spatialReference","extent"])],oa.prototype,"readSpatialReference",null);D.__decorate([d.property({json:{type:Ua.jsonValues}})],oa.prototype,"pixelType",void 0);D.__decorate([h.reader("pixelType")],oa.prototype,"readPixelType",
null);D.__decorate([r.writer("pixelType")],oa.prototype,"writePixelType",null);D.__decorate([d.property({constructOnly:!0,type:C})],oa.prototype,"serviceRasterInfo",void 0);D.__decorate([d.property()],oa.prototype,"sourceJSON",void 0);D.__decorate([d.property(c.url)],oa.prototype,"url",void 0);D.__decorate([d.property({readOnly:!0})],oa.prototype,"version",void 0);D.__decorate([h.reader("version",["currentVersion","fields","timeInfo"])],oa.prototype,"readVersion",null);return oa=D.__decorate([A.subclass("esri.layers.mixins.ArcGISImageService")],
oa)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(N,z,D,I,u,S,O,J,T){function p(v,d){if(!v)return null;if("classBreaks"===v.type&&v.classificationMethod){var n=
v.authoringInfo||{classificationMethod:""};n.classificationMethod=v.classificationMethod;v.authoringInfo=n}"vectorField"===v.type&&v.visualVariables&&!Array.isArray(v.visualVariables)&&(v.visualVariables=[v.visualVariables]);n=v?g[v.type]||null:null;if(n)return n=new n,n.read(v,d),n;d&&d.messages&&v&&d.messages.push(new z("renderer:unsupported","Renderers of type '"+(v.type||"unknown")+"' are not supported",{definition:v,context:d}));return null}const l={key:"type",base:null,typeMap:{"unique-value":J,
"class-breaks":D,"raster-colormap":u,"raster-stretch":O,"vector-field":T,"raster-shaded-relief":S,flow:I}},a={...l,typeMap:{...l.typeMap}};delete a.typeMap["vector-field"];delete a.typeMap.flow;const g={uniqueValue:J,classBreaks:D,rasterStretch:O,rasterColormap:u,vectorField:T,rasterShadedRelief:S,flowRenderer:I};N.ClassBreaksRenderer=D;N.FlowRenderer=I;N.RasterColormapRenderer=u;N.RasterShadedReliefRenderer=S;N.RasterStretchRenderer=O;N.UniqueValueRenderer=J;N.VectorFieldRenderer=T;N.fromJSON=function(v,
d){return p(v,d)};N.rasterRendererTypes=l;N.read=p;N.websceneRasterRendererTypes=a;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/FlowRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v){var d;I=new I.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});u=d=function(n){function h(r){r=n.call(this,r)||this;r.density=.8;r.color=new D([255,255,255,1]);r.maxPathLength=200;r.trailWidth=1.5;r.flowSpeed=10;r.trailLength=100;r.smoothing=0;r.flowRepresentation="flow-from";r.type="flow";r.authoringInfo=null;r.legendOptions=null;r.trailCap="butt";r.background="none";return r}N._inheritsLoose(h,n);var A=h.prototype;A.clone=function(){const {density:r,maxPathLength:c,
trailWidth:m,flowSpeed:k,trailLength:y,smoothing:e,flowRepresentation:b,trailCap:f,background:t}=this,x=this.color.clone(),E=(this.visualVariables||[]).map(F=>F.clone()),G=this.authoringInfo?.clone(),C=this.legendOptions?.clone();return new d({density:r,color:x,maxPathLength:c,trailWidth:m,flowSpeed:k,trailLength:y,trailCap:f,background:t,smoothing:e,flowRepresentation:b,visualVariables:E,authoringInfo:G,legendOptions:C})};A.getSymbol=function(r,c){};A.getSymbolAsync=function(){var r=N._asyncToGenerator(function*(c,
m){});return function(c,m){return r.apply(this,arguments)}}();A.getSymbols=function(){return[]};return h}(a.VisualVariablesMixin(u.JSONSupport));z.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"density",void 0);z.__decorate([O.property({type:D,json:{write:{allowNull:!0}}})],u.prototype,"color",void 0);z.__decorate([O.property({type:Number,cast:S.toPt,json:{write:!0}})],u.prototype,"maxPathLength",void 0);z.__decorate([O.property({type:Number,cast:S.toPt,json:{write:!0}})],u.prototype,
"trailWidth",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"flowSpeed",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"trailLength",void 0);z.__decorate([O.property({type:Number,cast:S.toPt,json:{write:!1}})],u.prototype,"smoothing",void 0);z.__decorate([O.property({type:I.apiValues,json:{type:I.jsonValues,read:{reader:I.read},write:{writer:I.write}}})],u.prototype,"flowRepresentation",void 0);z.__decorate([p.enumeration({flowRenderer:"flow"})],
u.prototype,"type",void 0);z.__decorate([O.property({type:g,json:{write:!0}})],u.prototype,"authoringInfo",void 0);z.__decorate([O.property({type:v.LegendOptions,json:{write:!0}})],u.prototype,"legendOptions",void 0);z.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"trailCap",void 0);z.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"background",void 0);return u=d=z.__decorate([l.subclass("esri.renderers.FlowRenderer")],u)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(N,z,D,I,u,S,O,J,T,p){var l;D=l=function(a){function g(d){d=a.call(this,d)||this;d.colormapInfos=null;d.type="raster-colormap";return d}N._inheritsLoose(g,a);g.createFromColormap=function(d,n){if(!d)return null;const h=5===d[0].length;d=[...d].sort(A=>A[0][0]-A[1][0]).map(A=>T.fromJSON({value:A[0],color:h?A.slice(1,5):A.slice(1,4).concat([255]),label:n?n[A[0]]??"":A[0]}));return new l({colormapInfos:d})};g.createFromColorramp=function(d){d=p.convertColorRampToColormap(d,256);return l.createFromColormap(d)};
var v=g.prototype;v.clone=function(){return new l({colormapInfos:this.colormapInfos.map(d=>d.toJSON())})};v.extractColormap=function(){return this.colormapInfos.map(({value:d,color:n})=>[d,n.r,n.g,n.b,1<n.a?n.a:255*n.a&255]).sort((d,n)=>d[0]-n[0])};return g}(D.JSONSupport);z.__decorate([I.property({type:[T],json:{write:!0}})],D.prototype,"colormapInfos",void 0);z.__decorate([O.enumeration({rasterColormap:"raster-colormap"})],D.prototype,"type",void 0);return D=l=z.__decorate([J.subclass("esri.renderers.RasterColormapRenderer")],
D)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(N,z,D,I,u,S,O,J){I=function(T){function p(){var l=T.apply(this,arguments)||this;l.value=null;l.label=null;l.color=null;return l}N._inheritsLoose(p,T);return p}(I.JSONSupport);
z.__decorate([u.property({type:Number,json:{write:!0}})],I.prototype,"value",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],I.prototype,"label",void 0);z.__decorate([u.property({type:D,json:{type:[O.Integer],write:!0}})],I.prototype,"color",void 0);return I=z.__decorate([J.subclass("esri.renderers.support.ColormapInfo")],I)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(N,z,D){function I(d,n){if(!d||!n||d.length!==
n.length)return!1;for(let h=0;h<d.length;h++)if(d[h]>n[h]+2||d[h]<n[h]-2)return!1;return!0}function u(d,n){if(d){n=n?n:g;var h=null;"algorithmic"===d.type?n.some(A=>{if(I(d.fromColor.toRgb(),A.fromColor)&&I(d.toColor.toRgb(),A.toColor))return h=A.id,!0}):"multipart"===d.type&&n.some(A=>{const r=d.colorRamps,c=A.colorRamps;if(r&&c&&r.length===c.length&&!c.some((m,k)=>{if(!I(r[k].fromColor.toRgb(),(new z(m.fromColor)).toRgb())||!I(r[k].toColor.toRgb(),(new z(m.toColor)).toRgb()))return!0})){if(h)return!0;
h=A.id}});return h}}function S(d){return(d=u(d))?v[d]:null}function O(d){d=d||{};const n=d.numColors||256;return{...d,numColors:n,distanceOffset:d.distanceOffset||0,interpolateAlpha:!!d.interpolateAlpha,distanceInterval:d.distanceInterval||1/(n-1),isCustomInterval:null!=d.isCustomInterval?d.isCustomInterval:null!==d.distanceInterval&&d.distanceInterval!==1/(n-1),weights:d.weights}}function J(d,n){let {fromColor:h,toColor:A}=d;3===h.length&&(h=h.concat([255]));3===A.length&&(A=A.concat([255]));var r=
d.algorithm||"esriCIELabAlgorithm";const {numColors:c,distanceOffset:m,isCustomInterval:k,interpolateAlpha:y}=O(n);if(1===c&&0===m)return[h];if(2===c&&0===m&&!k)return[h,A];var e={r:h[0],g:h[1],b:h[2]};d={r:A[0],g:A[1],b:A[2]};if("esriCIELabAlgorithm"===r){r=D.toLAB(e);d=D.toLAB(d);const {numColors:x,distanceOffset:E,distanceInterval:G,isCustomInterval:C}=O(n);let {l:F,a:w,b:H}=r;r=(d.l-F)*G;e=(d.a-w)*G;n=(d.b-H)*G;var b=[];if(E){var f=E/G;F+=f*r;w+=f*e;H+=f*n}for(f=0;f<x-1;f++)b.push({l:F,a:w,b:H}),
F+=r,w+=e,H+=n;b.push(C?{l:F,a:w,b:H}:d);d=b}else if("esriHSVAlgorithm"===r){r=D.toHSV(e);d=D.toHSV(d);const {numColors:x,distanceOffset:E,distanceInterval:G,isCustomInterval:C}=O(n);b=0===r.s;f=0===d.s;e=r.h;n=d.h;b&&!f?e=n:f&&!b&&(d={...d,h:e},n=e);b=Math.abs(n-e);180>b?n=(n-e)*G:(b=360-b,n=e>n?b*G:-b*G);b=(d.s-r.s)*G;f=(d.v-r.v)*G;let {s:F,v:w}=r;r=e;E&&(e=E/G,r=(r+e*n+360)%360,F+=e*b,w+=e*f);e=[];for(var t=0;t<x-1;t++)e.push({h:r,s:F,v:w}),r=(r+n+360)%360,F+=b,w+=f;e.push(C?{h:r,s:F,v:w}:d);d=
e}else{e=D.toLCH(e);d=D.toLCH(d);const {numColors:x,distanceOffset:E,distanceInterval:G,isCustomInterval:C}=O(n);n=e.h;b=d.h;r=2*Math.PI;n<=b?(f=b-n,n=b-n-r,n=Math.abs(n)<Math.abs(f)?n:f):(f=b+r-n,n=b-n,n=Math.abs(n)<Math.abs(f)?n:f);n*=G;b=(d.l-e.l)*G;f=(d.c-e.c)*G;let {l:F,c:w,h:H}=e;E&&(e=E/G,F+=e*b,w+=e*f,H=(H+e*n+r)%r);e=[];for(t=0;t<x-1;t++)e.push({l:F,c:w,h:H}),F+=b,w+=f,H=(H+n+r)%r;e.push(C?{l:F,c:w,h:H}:d);d=e}r=[];e=h[3]??255;n=((A[3]??255)-e)/(c-1);for(b=0;b<c;b++){const {r:x,g:E,b:G}=
D.toRGB(d[b]);r.push([x,E,G,y?Math.round(e+n*b):255])}return r}function T(d,n){const {numColors:h,interpolateAlpha:A}=O(n);n=n?.weights;({colorRamps:d}=d);if(n){const b=n.reduce((f,t)=>f+t);n=n.map(f=>f/b)}else{n=[];for(var r=0;r<d.length;r++)n[r]=1/d.length}r=[];let c=0,m=0;const k=1/(h-1);let y=!1;for(let b=0;b<d.length;b++){var e=y?0:c*k-m;let f=b===d.length-1?h-1-c:(n[b]-e)/k;y=Math.ceil(f)===f;f=Math.ceil(f);0!==f&&(e/=n[b],e=J(d[b],{numColors:f,interpolateAlpha:A,distanceOffset:e,distanceInterval:k/
n[b]}),c+=e.length,r.push(...e),m+=n[b])}n=[...d[d.length-1].toColor];3===n.length&&n.push(255);r.push(n);return r}function p(d,n=256,h=!1){d="toJSON"in d?d.toJSON():d;n={numColors:n,interpolateAlpha:h};return"multipart"===d.type?T(d,n):J(d,n)}function l(d){if(d)return{Algorithm:d.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:a(d.fromColor),ToColor:a(d.toColor)}}function a(d){d=D.toHSV(d);return{type:"HsvColor",Hue:d.h,Saturation:d.s,Value:d.v,AlphaValue:255}}const g=
[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,
0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,
85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",
type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",
type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,
255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,
102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},
{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},
{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],
toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",
fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,
53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",
type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},
{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",
colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,
167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],v={aspect_predefined:"Aspect",
blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",
conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",
partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",
purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",
redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",
yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};N.PREDEFINED_COLOR_RAMP_NAME_MAP=v;N.PREDEFINED_JSON_COLOR_RAMPS=g;N.convertColorRampToColormap=function(d,n=256,h=!1){d=p(d,n,h);d.forEach((A,r)=>{A.unshift(r);h||A.pop()});return d};N.convertColorRampToColors=p;N.getColorRampId=u;N.getColorRampName=S;N.getRFxArgColorRampValue=function(d){const n=S(d);if(d){if("algorithmic"===d.type)return{...l(d),
Name:n};if(d.colorRamps)return d=d.colorRamps.map(l),{type:"MultiPartColorRamp",NumColorRamps:d.length,ArrayOfColorRamp:d,Name:n}}};N.rgbaConvertTo32Bit=function(d){d=d.reverse().map(n=>{n=n.toString(16);return 2>n.length?"0"+n:n});return 4294967295&Number.parseInt(d.join(""),16)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(N){function z(p,l){const a=[];let g,v;if(p[0].length!==l.length)throw"dimensions do not match";
const d=p.length,n=p[0].length;let h=0;for(g=0;g<d;g++){for(v=h=0;v<n;v++)h+=p[g][v]*l[v];a.push(h)}return a}function D(p){p=[p.r/255,p.g/255,p.b/255].map(l=>.04045>=l?l/12.92:((l+.055)/1.055)**2.4);p=z(J,p);return{x:100*p[0],y:100*p[1],z:100*p[2]}}function I(p){p=z(T,[p.x/100,p.y/100,p.z/100]).map(l=>Math.min(1,Math.max(.0031308>=l?12.92*l:1.055*l**(1/2.4)-.055,0)));return{r:Math.round(255*p[0]),g:Math.round(255*p[1]),b:Math.round(255*p[2])}}function u(p){p=[p.x/95.047,p.y/100,p.z/108.883].map(l=>
l>(6/29)**3?l**(1/3):1/3*(29/6)**2*l+4/29);return{l:116*p[1]-16,a:500*(p[0]-p[1]),b:200*(p[1]-p[2])}}function S(p){const l=p.l;p=[(l+16)/116+p.a/500,(l+16)/116,(l+16)/116-p.b/200].map(a=>a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*p[0],y:100*p[1],z:108.883*p[2]}}function O(p){if("r"in p&&"g"in p&&"b"in p)return p;if("l"in p&&"c"in p&&"h"in p){var l=p.c,a=p.h;return I(S({l:p.l,a:l*Math.cos(a),b:l*Math.sin(a)}))}if("l"in p&&"a"in p&&"b"in p)return I(S(p));if("x"in p&&"y"in p&&"z"in p)return I(p);
if("h"in p&&"s"in p&&"v"in p){a=(p.h+360)%360/60;l=p.v/100*255;p=p.s/100*l;const g=p*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a={r:p,g,b:0};break;case 1:a={r:g,g:p,b:0};break;case 2:a={r:0,g:p,b:g};break;case 3:a={r:0,g,b:p};break;case 4:a={r:g,g:0,b:p};break;case 5:case 6:a={r:p,g:0,b:g};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+l-p);a.g=Math.round(a.g+l-p);a.b=Math.round(a.b+l-p);return a}return p}const J=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],T=[[3.2406,-1.5372,
-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];N.darken=function(p,l){p=u(D(p));p.l*=1-l;return I(S(p))};N.toHSV=function(p){if("h"in p&&"s"in p&&"v"in p)return p;var l=O(p);p=l.r;const a=l.g,g=l.b;l=Math.max(p,a,g);const v=l-Math.min(p,a,g);p=0===v?0:l===p?(a-g)/v%6:l===a?(g-p)/v+2:(p-a)/v+4;0>p&&(p+=6);return{h:60*p,s:100*(0===v?0:v/l),v:100/255*l}};N.toLAB=function(p){return"l"in p&&"a"in p&&"b"in p?p:u(D(O(p)))};N.toLCH=function(p){if(!("l"in p&&"c"in p&&"h"in p)){var l=u(D(O(p)));p=l.l;var a=
l.a;const g=l.b;l=Math.sqrt(a*a+g*g);a=Math.atan2(g,a);a=0<a?a:a+2*Math.PI;p={l:p,c:l,h:a}}return p};N.toRGB=O;N.toXYZ=function(p){return"x"in p&&"y"in p&&"z"in p?p:D(O(p))};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(N,z,D,I,u,S,O,J,T,p){var l;D=l=function(a){function g(d){d=a.call(this,d)||this;d.altitude=45;d.azimuth=315;d.colorRamp=null;d.hillshadeType="traditional";d.pixelSizePower=.664;d.pixelSizeFactor=.024;d.scalingType="none";d.type="raster-shaded-relief";d.zFactor=1;return d}N._inheritsLoose(g,a);var v=g.prototype;v.readColorRamp=function(d){return p.fromJSON(d)};v.clone=function(){return new l({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:I.clone(this.colorRamp)})};return g}(D.JSONSupport);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"altitude",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"azimuth",void 0);z.__decorate([u.property({types:p.types,json:{write:!0}})],D.prototype,"colorRamp",void 0);z.__decorate([J.reader("colorRamp")],D.prototype,"readColorRamp",null);z.__decorate([u.property({type:["traditional",
"multi-directional"],json:{write:!0}})],D.prototype,"hillshadeType",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"pixelSizePower",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"pixelSizeFactor",void 0);z.__decorate([u.property({type:["none","adjusted"],json:{write:!0}})],D.prototype,"scalingType",void 0);z.__decorate([O.enumeration({rasterShadedRelief:"raster-shaded-relief"})],D.prototype,"type",void 0);z.__decorate([u.property({type:Number,
json:{write:!0}})],D.prototype,"zFactor",void 0);return D=l=z.__decorate([T.subclass("esri.renderers.RasterShadedReliefRenderer")],D)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a){var g;D=g=function(v){function d(h){h=v.call(this,h)||this;h.colorRamp=null;h.computeGamma=!1;h.dynamicRangeAdjustment=!1;h.gamma=[];h.maxPercent=null;h.minPercent=null;h.numberOfStandardDeviations=null;h.outputMax=null;h.outputMin=null;h.sigmoidStrengthLevel=null;h.statistics=[];h.histograms=null;h.useGamma=!1;h.stretchType="none";h.type="raster-stretch";return h}N._inheritsLoose(d,v);var n=d.prototype;n.readColorRamp=function(h){if(h)return a.fromJSON(h)};n.writeStatistics=
function(h,A,r){h?.length&&(Array.isArray(h[0])||(h=h.map(c=>[c.min,c.max,c.avg,c.stddev])),A[r]=h)};n.readStretchType=function(h,A){h=A.stretchType;"number"===typeof h&&(h=l.stretchTypeFunctionEnum[h]);return l.stretchTypeJSONDict.read(h)};n.clone=function(){return new g({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:I.clone(this.statistics),gamma:I.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,
numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:I.clone(this.colorRamp),histograms:I.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return d}(D.JSONSupport);z.__decorate([u.property({types:a.types,json:{write:!0}})],D.prototype,"colorRamp",void 0);z.__decorate([J.reader("colorRamp")],D.prototype,"readColorRamp",null);z.__decorate([u.property({type:Boolean,json:{write:!0}})],D.prototype,"computeGamma",
void 0);z.__decorate([u.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],D.prototype,"dynamicRangeAdjustment",void 0);z.__decorate([u.property({type:[Number],json:{write:!0}})],D.prototype,"gamma",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"maxPercent",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"minPercent",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"numberOfStandardDeviations",
void 0);z.__decorate([u.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],D.prototype,"outputMax",void 0);z.__decorate([u.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],D.prototype,"outputMin",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"sigmoidStrengthLevel",void 0);z.__decorate([u.property({json:{type:[[Number]],write:!0}})],D.prototype,"statistics",void 0);z.__decorate([u.property()],D.prototype,"histograms",void 0);
z.__decorate([p.writer("statistics")],D.prototype,"writeStatistics",null);z.__decorate([u.property({type:Boolean,json:{write:!0}})],D.prototype,"useGamma",void 0);z.__decorate([u.property({type:l.stretchTypeJSONDict.apiValues,json:{type:l.stretchTypeJSONDict.jsonValues,write:l.stretchTypeJSONDict.write}})],D.prototype,"stretchType",void 0);z.__decorate([J.reader("stretchType",["stretchType"])],D.prototype,"readStretchType",null);z.__decorate([O.enumeration({rasterStretch:"raster-stretch"})],D.prototype,
"type",void 0);return D=g=z.__decorate([T.subclass("esri.renderers.RasterStretchRenderer")],D)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(N,z){z=new z.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});N.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};
N.stretchTypeJSONDict=z;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/maybe ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../symbols/PictureMarkerSymbol ../geometry/Point".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v,d,n,h,A,r,c,m,k,y,e,b,f,t,x){var E;const G=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);I=new O.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
O=new O.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});J=E=function(C){function F(H){H=C.call(this,H)||this;H.attributeField="Magnitude";H.flowRepresentation="flow-from";H.rotationType="arithmetic";H.style="single-arrow";H.symbolTileSize=50;H.type="vector-field";return H}N._inheritsLoose(F,C);var w=F.prototype;w.readInputUnit=function(H,q){return G.has(H)?h.unitKebabDict.fromJSON(H):null};w.readOutputUnit=function(H,q){return G.has(H)?h.unitKebabDict.fromJSON(H):null};w.clone=function(){return new E({attributeField:this.attributeField,
flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:T.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};w.getGraphicsFromPixelData=function(){var H=N._asyncToGenerator(function*(q,B=!1,R=[]){const M=[];var U=h.getUnitConversionFactor(this.inputUnit,this.outputUnit),V=this.rotationVariables[0]?.rotationType||this.rotationType;B=B?h.convertVectorFieldData(q.pixelBlock,"vector-uv",
V,U):h.convertVectorFieldUnit(q.pixelBlock,"vector-magdir",U);if(p.isNone(B))return M;q=q.extent;U=p.isSome(B.mask)&&0<B.mask.length;V=0;const P=(q.xmax-q.xmin)/B.width,X=(q.ymax-q.ymin)/B.height;for(let ba=0;ba<B.height;ba++)for(let da=0;da<B.width;da++,V++){let aa=new x({x:q.xmin+da*P+P/2,y:q.ymax-ba*X-X/2,spatialReference:q.spatialReference});aa=(yield n.normalizeCentralMeridian(aa))[0];var Z=R.some(Q=>Q.intersects(aa));U&&!B.mask[V]||Z||(Z=new u({geometry:{type:"point",x:aa.x,y:aa.y,spatialReference:q.spatialReference},
attributes:{Magnitude:B.pixels[0][V],Direction:B.pixels[1][V]}}),Z.symbol=this._getVisualVariablesAppliedSymbol(Z),M.push(Z))}return M});return function(q){return H.apply(this,arguments)}}();w.getSymbol=function(H,q){};w.getSymbolAsync=function(){var H=N._asyncToGenerator(function*(q,B){});return function(q,B){return H.apply(this,arguments)}}();w.getSymbols=function(){return[]};w.getClassBreakInfos=function(){return this.styleRenderer?.classBreakInfos};w.getDefaultSymbol=function(){return this.styleRenderer?.defaultSymbol};
w._getDefaultSymbol=function(H){return new b({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new e({width:0}),size:20,color:H||new D([0,92,230])})};w._getVisualVariablesAppliedSymbol=function(H){if(H){var q=this.styleRenderer?.getSymbol(H)?.clone(),B=this.sizeVariables,R=this.rotationVariables;B&&B.length&&this.sizeVariables.forEach(M=>f.applySizesToSymbol(q,y.getAllSizes([M],H)));R&&R.length&&(H.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||
"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(M=>f.applyRotationToSymbol(q,y.getRotationAngle(M,H),M.axis)));return q}};w._createStyleRenderer=function(H){let q={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(H){case "single-arrow":q=this._createSingleArrowRenderer();break;case "beaufort-kn":q=this._createBeaufortKnotsRenderer();break;case "beaufort-m":q=this._createBeaufortMeterRenderer();break;case "beaufort-ft":q=this._createBeaufortFeetRenderer();break;
case "beaufort-mi":q=this._createBeaufortMilesRenderer();break;case "beaufort-km":q=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":q=this._createCurrentMeterRenderer();break;case "ocean-current-kn":q=this._createCurrentKnotsRenderer();break;case "simple-scalar":q=this._createSimpleScalarRenderer();break;case "wind-barb":q=this._createWindBarbsRenderer();break;case "classified-arrow":q=this._createClassifiedArrowRenderer()}return new A(q)};w._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};
w._createBeaufortKnotsRenderer=function(){const H=this._getDefaultSymbol(new D([214,47,39])),q=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:H,classBreakInfos:q}};w._createBeaufortMeterRenderer=function(){const H=this._getDefaultSymbol(new D([214,47,39])),q=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,
14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:H,classBreakInfos:q}};w._createBeaufortFeetRenderer=function(){const H=this._getDefaultSymbol(new D([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(B=>3.28084*B);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,
204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:H,classBreakInfos:q}};w._createBeaufortMilesRenderer=function(){const H=this._getDefaultSymbol(new D([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(B=>2.23694*B);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],
[232,21,21]]);return{defaultSymbol:H,classBreakInfos:q}};w._createBeaufortKilometersRenderer=function(){const H=this._getDefaultSymbol(new D([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(B=>3.6*B);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:H,classBreakInfos:q}};w._createCurrentMeterRenderer=function(){const H=
this._getDefaultSymbol(new D([177,177,177])),q=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:H,classBreakInfos:q}};w._createCurrentKnotsRenderer=function(){const H=this._getDefaultSymbol(new D([177,177,177])),q=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:H,classBreakInfos:q}};w._createClassifiedArrowRenderer=
function(){const H=this._getDefaultSymbol(new D([56,168,0]));var q=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const B=this.sizeVariables[0].minDataValue,R=this.sizeVariables[0].maxDataValue;if(B&&R){const M=(R-B)/5;q=Array.from(Array(6).keys()).map(U=>B+M*U)}}q=this._getClassBreaks(q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:H,classBreakInfos:q}};w._createSimpleScalarRenderer=function(){return{defaultSymbol:t.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};w._createWindBarbsRenderer=function(){const H=Array.from(Array(31).keys()).map(M=>5*M),q=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],B=t.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),R=H.map((M,U)=>{if(U!==H.length-1)if(0===U)var V={minValue:M,maxValue:H[U+1],symbol:B};else V=t.fromJSON({type:"esriPMS",imageData:q[U].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),V={minValue:M,maxValue:H[U+1],symbol:V};return new c(V)});return{defaultSymbol:B,classBreakInfos:R}};w._getClassBreaks=function(H,q){return q.map((B,R)=>new c({minValue:H[R],maxValue:H[R+1],symbol:this._getDefaultSymbol(new D(B))}))};N._createClass(F,[{key:"styleRenderer",
get:function(){const H=this.attributeField,q=this._createStyleRenderer(this.style);q.field=H;return q}},{key:"sizeVariables",get:function(){const H=[];if(this.visualVariables)for(var q of this.visualVariables)"size"===q.type&&H.push(q);0===H.length&&(q=new k({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),H.push(q));return H}},{key:"rotationVariables",get:function(){const H=[];if(this.visualVariables)for(var q of this.visualVariables)"rotation"===
q.type&&H.push(q);0===H.length&&(q=new m({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),H.push(q));return H}}]);return F}(r.VisualVariablesMixin(J.JSONSupport));z.__decorate([l.property({type:String,json:{write:!0}})],J.prototype,"attributeField",void 0);z.__decorate([l.property({type:O.apiValues,json:{type:O.jsonValues,read:{reader:O.read},write:{writer:O.write}}})],J.prototype,"flowRepresentation",void 0);z.__decorate([l.property({type:["geographic",
"arithmetic"],json:{write:!0}})],J.prototype,"rotationType",void 0);z.__decorate([l.property({type:I.apiValues,json:{type:I.jsonValues,read:{reader:I.read},write:{writer:I.write}}})],J.prototype,"style",void 0);z.__decorate([l.property({json:{write:!0}})],J.prototype,"symbolTileSize",void 0);z.__decorate([l.property({type:h.unitKebabDict.apiValues,json:{type:h.unitKebabDict.jsonValues,write:{writer:h.unitKebabDict.write}}})],J.prototype,"inputUnit",void 0);z.__decorate([v.reader("inputUnit")],J.prototype,
"readInputUnit",null);z.__decorate([l.property({type:h.unitKebabDict.apiValues,json:{type:h.unitKebabDict.jsonValues,read:{reader:h.unitKebabDict.read},write:{writer:h.unitKebabDict.write}}})],J.prototype,"outputUnit",void 0);z.__decorate([v.reader("outputUnit")],J.prototype,"readOutputUnit",null);z.__decorate([g.enumeration({vectorField:"vector-field"})],J.prototype,"type",void 0);z.__decorate([l.property({type:A})],J.prototype,"styleRenderer",null);z.__decorate([l.property({type:k})],J.prototype,
"sizeVariables",null);z.__decorate([l.property({type:m})],J.prototype,"rotationVariables",null);return J=E=z.__decorate([d.subclass("esri.renderers.VectorFieldRenderer")],J)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap","../../../core/maybe","../PixelBlock","./pixelUtils"],function(N,z,D,I,u){function S(b,f){return h.get(b)/h.get(f)||1}function O(b,f="geographic"){const [t,x]=b;b=Math.sqrt(t*t+x*x);let E=Math.atan2(x,t)*A;E=(360+E)%
360;"geographic"===f&&(E=(450-E)%360);return[b,E]}function J(b,f="geographic"){let t=b[1];"geographic"===f&&(t=(450-t)%360);t%=360;b=b[0];return[b*Math.cos(t/A),b*Math.sin(t/A)]}function T(b,f,t="geographic",x=1){if(!u.isValidPixelBlock(b))return b;const {pixels:E,width:G,height:C}=b;var F=G*C;const w=E[0],H=E[1],q=b.pixelType.startsWith("f")?b.pixelType:"f32",B=I.createEmptyBand(q,F);F=I.createEmptyBand(q,F);let R=0;for(let M=0;M<C;M++)for(let U=0;U<G;U++)"vector-uv"===f?([B[R],F[R]]=O([w[R],H[R]],
t),B[R]*=x):([B[R],F[R]]=J([w[R],H[R]],t),B[R]*=x,F[R]*=x),R++;b=new I({pixelType:q,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:[B,F]});b.updateStatistics();return b}function p(b=0,f=0,t=Math.PI,x=!0){x&&(t=(2*Math.PI-t)%(2*Math.PI));x=x?-1:1;const E=-7*x,G=-2*x,C=-16*x,[F,w]=a(0,f+13*x,t,21.75),[H,q]=a(b-5.5,f+E,t,21.75),[B,R]=a(b+5.5,f+E,t,21.75),[M,U]=a(b-1.5,f+G,t,21.75),[V,P]=a(b+1.5,f+G,t,21.75),[X,Z]=a(b-1.5,f+C,t,21.75),[ba,
da]=a(b+1.5,f+C,t,21.75);return[F,w,H,q,M,U,V,P,B,R,X,Z,ba,da]}function l(b=0,f=Math.PI,t=!0){t&&(f=(2*Math.PI-f)%(2*Math.PI));var x=t?-1:1,E=5*x;const G=20*x,C=25*x;x*=2;const F=t?1:-1;t=5*F;let [w,H]=[0+t,0-G],[q,B]=[w+2*F,H],[R,M]=[q-0*F,B+x],[U,V]=[0-t,0-C],[P,X]=[U+0*F,V-x],Z=Math.ceil(b/5),ba=Math.floor(Z/10);Z-=8*ba;b=[];const da=[];for(let na=0;na<Z/2;na++,ba--){0>=ba&&1===Z%2&&na===(Z-1)/2&&(U=0,P=U+0*F,V=(V+H)/2,X=V-x);const [sa,qa]=a(U,V,f,45);if(0<ba){const [wa,ya]=a(q,V,f,45),[xa,va]=
a(w,H,f,45);b.push(wa);b.push(ya);b.push(sa);b.push(qa);b.push(xa);b.push(va)}else{const [wa,ya]=a(q,B,f,45),[xa,va]=a(R,M,f,45),[Ba,Ca]=a(P,X,f,45);da.push(sa);da.push(qa);da.push(Ba);da.push(Ca);da.push(xa);da.push(va);da.push(wa);da.push(ya)}V+=E;H+=E;B+=E;M+=E;X+=E}const [aa,Q]=a(0+t,0+G,f,45);E=7*F;const [W,Y]=a(0+E,0+G,f,45),[ea,fa]=a(0+t,0-C,f,45),[ha,ka]=a(0+E,0-C,f,45);return{pennants:b,barbs:da,shaft:[aa,Q,W,Y,ea,fa,ha,ka]}}function a(b,f,t,x=1){return[Math.sqrt(b*b+f*f)/x,(2*Math.PI+(2*
Math.PI+Math.atan2(f,b))%(2*Math.PI)-t)%(2*Math.PI)]}function g(b,f,t,x){t=S(x||"knots",t);for(x=1;x<f.length;x++)if(x===f.length-1){if(b<f[x]*t)break}else if(b<=f[x]*t)break;return Math.min(x-1,f.length-2)}function v(b,f,t,x,E){let G=0;switch(f){case "beaufort_kn":G=g(b,m,"knots",t);break;case "beaufort_km":G=g(b,m,"kilometer-per-hour",t);break;case "beaufort_ft":G=g(b,m,"feet-per-second",t);break;case "beaufort_m":G=g(b,m,"meter-per-second",t);break;case "classified_arrow":G=g(b,E??[],x,t);break;
case "ocean_current_m":G=g(b,k,"meter-per-second",t);break;case "ocean_current_kn":G=g(b,y,"knots",t)}return G}function d(b,f){const {style:t,inputUnit:x,outputUnit:E,breakValues:G}=f,C=r.fromJSON(x),F=r.fromJSON(E);let w=0,H=0;const {width:q,height:B,mask:R}=b,M=b.pixels[0];b=b.pixels[1];var U=D.isSome(R)?R.filter(X=>0<X).length:q*B;const V=new Float32Array(42*U);U=new Uint32Array(15*U);f=f.invertDirection?p(0,0,0,!1):c;for(let X=0;X<B;X++)for(let Z=0;Z<q;Z++){var P=X*q+Z;if(!R||R[X*q+Z]){const ba=
(b[P]+360)%360/180*Math.PI,da=v(M[P],t,C,F,G);for(let aa=0;aa<f.length;aa+=2)V[w++]=(Z+.5)/q,V[w++]=(X+.5)/B,V[w++]=f[aa],V[w++]=f[aa+1]+ba,V[w++]=da,V[w++]=M[P];P=7*(w/42-1);U[H++]=P;U[H++]=P+1;U[H++]=P+2;U[H++]=P+0;U[H++]=P+4;U[H++]=P+3;U[H++]=P+0;U[H++]=P+2;U[H++]=P+3;U[H++]=P+2;U[H++]=P+5;U[H++]=P+3;U[H++]=P+5;U[H++]=P+6;U[H++]=P+3}}return{vertexData:V,indexData:U}}function n(b,f){let t=0,x=0;const {width:E,height:G,mask:C}=b;b=b.pixels[0];const F=[],w=[];var H=r.fromJSON(f.inputUnit);H=S(H,"knots");
f="wind_speed"===f.style?5:Number.MAX_VALUE;for(let B=0;B<G;B++)for(let R=0;R<E;R++){var q=b[B*E+R]*H;if((!C||C[B*E+R])&&q<f){for(let M=0;4>M;M++)F[t++]=(R+.5)/E,F[t++]=(B+.5)/G,F[t++]=2>M?-.5:.5,F[t++]=0===M%2?-.5:.5,F[t++]=0,F[t++]=q;q=4*(t/24-1);w[x++]=q;w[x++]=q+1;w[x++]=q+2;w[x++]=q+1;w[x++]=q+2;w[x++]=q+3}}return{vertexData:new Float32Array(F),indexData:new Uint32Array(w)}}const h=new Map;h.set("meter-per-second",1);h.set("kilometer-per-hour",.277778);h.set("knots",.514444);h.set("feet-per-second",
.3048);h.set("mile-per-hour",.44704);const A=180/Math.PI,r=new z.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),c=p(0,0,0),m=[0,1,3,6,10,16,21,27,33,40,47,55,63],k=[0,.5,1,1.5,2],y=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],e=[];N.convertToLocalDirections=function(b,f,t,x="geographic"){if(!u.isValidPixelBlock(b)||D.isNone(t))return b;b="vector-magdir"===f?b.clone():D.unwrap(T(b,
f));const E=b.pixels[1];for(let G=0;G<E.length;G++)E[G]="geographic"===x?(E[G]+t[G]+270)%360:(E[G]+360-t[G])%360;return"vector-magdir"===f?b:T(b,"vector-magdir")};N.convertVectorFieldData=T;N.convertVectorFieldUnit=function(b,f,t=1){if(1===t||!u.isValidPixelBlock(b))return b;b=b.clone();const {pixels:x,width:E,height:G}=b,C=x[0],F=x[1];let w=0;for(let H=0;H<G;H++)for(let q=0;q<E;q++)"vector-uv"===f?(C[w]*=t,F[w]*=t):C[w]*=t,w++;b.updateStatistics();return b};N.createVFMesh=function(b,f){if("simple_scalar"===
f.style)f=n(b,f);else if("wind_speed"===f.style){if(0===e.length)for(var t=0;30>t;t++)e.push(l(5*t,0,!f.invertDirection));f=r.fromJSON(f.inputUnit);f=S(f,"knots");const {width:C,height:F,mask:w}=b;t=b.pixels[0];b=b.pixels[1];const H=[],q=[];let B=0,R=0;for(let M=0;M<F;M++)for(let U=0;U<C;U++){var x=M*C+U,E=t[x]*f;if((!w||w[M*C+U])&&5<=E){const V=(b[x]+360)%360/180*Math.PI,{pennants:P,barbs:X,shaft:Z}=e[Math.min(Math.floor(E/5),29)];if(0===P.length+X.length)continue;x=H.length/6;const ba=(U+.5)/C,
da=(M+.5)/F;for(var G=0;G<P.length;G+=2)H[B++]=ba,H[B++]=da,H[B++]=P[G],H[B++]=P[G+1]+V,H[B++]=0,H[B++]=E;for(G=0;G<X.length;G+=2)H[B++]=ba,H[B++]=da,H[B++]=X[G],H[B++]=X[G+1]+V,H[B++]=0,H[B++]=E;for(G=0;G<Z.length;G+=2)H[B++]=ba,H[B++]=da,H[B++]=Z[G],H[B++]=Z[G+1]+V,H[B++]=0,H[B++]=E;for(E=0;E<P.length/6;E++)q[R++]=x,q[R++]=x+1,q[R++]=x+2,x+=3;for(E=0;E<X.length/8;E++)q[R++]=x,q[R++]=x+1,q[R++]=x+2,q[R++]=x+1,q[R++]=x+2,q[R++]=x+3,x+=4;q[R++]=x+0;q[R++]=x+1;q[R++]=x+2;q[R++]=x+1;q[R++]=x+3;q[R++]=
x+2;x+=4}}f={vertexData:new Float32Array(H),indexData:new Uint32Array(q)}}else f=d(b,f);return f};N.createVFMeshScalar=n;N.getUnitConversionFactor=S;N.sampleVectorField=function(b,f,t,x=[0,0],E=.5){const {width:G,height:C,mask:F}=b,[w,H]=b.pixels,[q,B]=x;b=Math.round((G-q)/t);x=Math.round((C-B)/t);var R=b*x;const M=new Float32Array(R),U=new Float32Array(R);R=new Uint8Array(R);f="vector-uv"===f;for(let P=0;P<x;P++)for(let X=0;X<b;X++){let Z=0;const ba=P*b+X,da=Math.max(0,P*t+B),aa=Math.max(0,X*t+q),
Q=Math.min(C,da+t),W=Math.min(G,aa+t);for(let Y=da;Y<Q;Y++)for(let ea=aa;ea<W;ea++){var V=Y*G+ea;if(!F||F[V]){Z++;V=f?[w[V],H[V]]:[w[V],(360+H[V])%360];const [fa,ha]=f?V:J(V);M[ba]+=fa;U[ba]+=ha}}if(Z>=(Q-da)*(W-aa)*(1-E)){R[ba]=1;const [Y,ea]=O([M[ba]/Z,U[ba]/Z]);M[ba]=Y;U[ba]=ea}else R[ba]=0,M[ba]=0,U[ba]=0}t=new I({width:b,height:x,pixels:[M,U],mask:R});t.updateStatistics();return t};N.snapImageToSymbolTile=function(b,f,t,x,E){if(D.isNone(E)||!E.spatialReference.equals(b.spatialReference))return{extent:b,
width:Math.round(f/x),height:Math.round(t/x),resolution:b.width/f};const G=E.xmin;E=E.ymax;f=(b.xmax-b.xmin)/f*x;t=(b.ymax-b.ymin)/t*x;b.xmin=G+Math.floor((b.xmin-G)/f)*f;b.xmax=G+Math.ceil((b.xmax-G)/f)*f;b.ymin=E+Math.floor((b.ymin-E)/t)*t;b.ymax=E+Math.ceil((b.ymax-E)/t)*t;return{extent:b,width:Math.round(b.width/f),height:Math.round(b.height/t),resolution:(f+t)/2}};N.unitKebabDict=r;N.uvComponentToVector=O;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics".split(" "),function(N,z,D,I,u,S,O,J,T,p,l){var a;I=a=function(g){function v(n){n=g.call(this,n)||this;n.width=null;n.height=null;n.pixelType=
"f32";n.validPixelCount=null;n.mask=null;n.maskIsAlpha=!1;n.statistics=null;return n}N._inheritsLoose(v,g);v.createEmptyBand=function(n,h){return new (a.getPixelArrayConstructor(n))(h)};v.getPixelArrayConstructor=function(n){let h;switch(n){case "u1":case "u2":case "u4":case "u8":h=Uint8Array;break;case "u16":h=Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;case "f32":h=Float32Array;break;case "f64":h=Float64Array;
break;case "c64":case "c128":case "unknown":h=Float32Array}return h};var d=v.prototype;d.castPixelType=function(n){if(!n)return"f32";n=n.toLowerCase();["u1","u2","u4"].includes(n)?n="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(n)||(n="f32");return n};d.getPlaneCount=function(){return this.pixels?.length};d.addData=function(n){if(!n.pixels||n.pixels.length!==this.width*this.height)throw new D("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");
this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(n.pixels);this.statistics.push(n.statistics??new l.SimpleBandStatistics)};d.getAsRGBA=function(){const n=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(n);break;default:this._fillFrom8Bit(n)}return new Uint8ClampedArray(n)};d.getAsRGBAFloat=function(){const n=new Float32Array(this.width*this.height*
4);this._fillFrom32Bit(n);return n};d.updateStatistics=function(){if(this.pixels){this.statistics=this.pixels.map(A=>this._calculateBandStatistics(A,this.mask));var n=this.mask,h=0;if(O.isSome(n))for(let A=0;A<n.length;A++)n[A]&&h++;else h=this.width*this.height;this.validPixelCount=h}};d.clamp=function(n){if(n&&"f64"!==n&&"f32"!==n&&this.pixels){switch(n){case "u8":var h=[0,255];break;case "u16":h=[0,65535];break;case "u32":h=[0,4294967295];break;case "s8":h=[-128,127];break;case "s16":h=[-32768,
32767];break;case "s32":h=[-2147483648,2147483647];break;default:h=[-3.4*1E39,3.4*1E39]}var [A,r]=h;h=this.pixels;var c=this.width*this.height,m=h.length,k=[];for(let f=0;f<m;f++){var y=a.createEmptyBand(n,c);var e=h[f];for(let t=0;t<c;t++){var b=e[t];y[t]=b>r?r:b<A?A:b}k.push(y)}this.pixels=k;this.pixelType=n}};d.extractBands=function(n){const {pixels:h,statistics:A}=this;if(O.isNone(n)||0===n.length||!h||0===h.length)return this;var r=h.length;const c=n.some(m=>m>=h.length);r=r===n.length&&!n.some((m,
k)=>m!==k);return c||r?this:new a({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:n.map(m=>h[m]),statistics:A&&n.map(m=>A[m])})};d.clone=function(){const n=new a({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});O.isSome(this.mask)&&(n.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));
let h;const A=a.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){n.pixels=[];const r=!!this.pixels[0].slice;for(h=0;h<this.pixels.length;h++)n.pixels[h]=r?this.pixels[h].slice(0,this.pixels[h].length):new A(this.pixels[h])}if(this.statistics)for(n.statistics=[],h=0;h<this.statistics.length;h++)n.statistics[h]=u.clone(this.statistics[h]);return n};d._fillFrom8Bit=function(n){const {mask:h,maskIsAlpha:A,pixels:r}=this;if(n&&r&&r.length){var c,m;var k=c=m=r[0];3<=r.length?
(c=r[1],m=r[2]):2===r.length&&(c=r[1]);var y=new Uint32Array(n),e=this.width*this.height;if(k.length!==e)S.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(O.isSome(h)&&h.length===e)if(A)for(n=0;n<e;n++)h[n]&&(y[n]=h[n]<<24|m[n]<<16|c[n]<<8|k[n]);else for(n=0;n<e;n++)h[n]&&(y[n]=-16777216|m[n]<<16|c[n]<<8|k[n]);else for(n=0;n<e;n++)y[n]=-16777216|m[n]<<16|c[n]<<8|k[n]}else S.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};
d._fillFromNon8Bit=function(n){const {pixels:h,mask:A,statistics:r}=this;if(n&&h&&h.length){var c=this.pixelType,m=1,k=0;m=1;if(r&&0<r.length){for(var y of r)null!=y.minValue&&(k=Math.min(k,y.minValue)),null!=y.maxValue&&null!=y.minValue&&(m=Math.max(m,y.maxValue-y.minValue));m=255/m}else m=255,"s8"===c?(k=-128,m=127):"u16"===c?m=65535:"s16"===c?(k=-32768,m=32767):"u32"===c?m=4294967295:"s32"===c?(k=-2147483648,m=2147483647):"f32"===c?(k=-3.4*1E39,m=3.4*1E39):"f64"===c&&(k=-Number.MAX_VALUE,m=Number.MAX_VALUE),
m=255/(m-k);n=new Uint32Array(n);c=this.width*this.height;var e,b,f;y=e=b=h[0];if(y.length!==c)return S.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=h.length)if(e=h[1],3<=h.length&&(b=h[2]),O.isSome(A)&&A.length===c)for(f=0;f<c;f++)A[f]&&(n[f]=-16777216|(b[f]-k)*m<<16|(e[f]-k)*m<<8|(y[f]-k)*m);else for(f=0;f<c;f++)n[f]=-16777216|(b[f]-k)*m<<16|(e[f]-k)*m<<8|(y[f]-k)*m;else if(O.isSome(A)&&A.length===c)for(f=0;f<c;f++)e=(y[f]-k)*m,
A[f]&&(n[f]=-16777216|e<<16|e<<8|e);else for(f=0;f<c;f++)e=(y[f]-k)*m,n[f]=-16777216|e<<16|e<<8|e}else S.getLogger(this.declaredClass).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};d._fillFrom32Bit=function(n){const {pixels:h,mask:A}=this;if(!n||!h||!h.length)return S.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let r,c,m,k;r=c=m=h[0];3<=h.length?(c=h[1],m=h[2]):2===h.length&&(c=h[1]);const y=
this.width*this.height;if(r.length!==y)return S.getLogger(this.declaredClass).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let e=0;if(O.isSome(A)&&A.length===y)for(k=0;k<y;k++)n[e++]=r[k],n[e++]=c[k],n[e++]=m[k],n[e++]=A[k]&1;else for(k=0;k<y;k++)n[e++]=r[k],n[e++]=c[k],n[e++]=m[k],n[e++]=1};d._calculateBandStatistics=function(n,h){let A=Infinity,r=-Infinity;const c=n.length;let m,k=0;if(O.isSome(h))for(m=0;m<c;m++)h[m]&&(k=n[m],A=k<A?k:A,r=k>r?k:r);else for(m=
0;m<c;m++)k=n[m],A=k<A?k:A,r=k>r?k:r;return new l.SimpleBandStatistics(A,r)};return v}(I.JSONSupport);z.__decorate([J.property({json:{write:!0}})],I.prototype,"width",void 0);z.__decorate([J.property({json:{write:!0}})],I.prototype,"height",void 0);z.__decorate([J.property({json:{write:!0}})],I.prototype,"pixelType",void 0);z.__decorate([T.cast("pixelType")],I.prototype,"castPixelType",null);z.__decorate([J.property({json:{write:!0}})],I.prototype,"validPixelCount",void 0);z.__decorate([J.property({json:{write:!0}})],
I.prototype,"mask",void 0);z.__decorate([J.property({json:{write:!0}})],I.prototype,"maskIsAlpha",void 0);z.__decorate([J.property({json:{write:!0}})],I.prototype,"pixels",void 0);z.__decorate([J.property({json:{write:!0}})],I.prototype,"statistics",void 0);return I=a=z.__decorate([p.subclass("esri.layers.support.PixelBlock")],I)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],function(N){N.SimpleBandStatistics=function(z=null,D=null,I=null){this.minValue=z;this.maxValue=
D;this.noDataValue=I};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(N,z,D){function I(c){return z.isSome(c)&&"esri.layers.support.PixelBlock"===c.declaredClass&&c.pixels&&0<c.pixels.length}function u(c,m,k,y,e){const b=c.length;e=D.createEmptyBand(e,b);if(m)for(let f=0;f<b;f++)m[f]&&(e[f]=k[c[f]-y]);else for(m=0;m<b;m++)e[m]=k[c[m]-
y];return e}function S(c,m,k,y){const e=null!=k&&2<=k.length?new Set(k):null;k=1===k?.length?k[0]:null;const b=!!m?.length;for(let f=0;f<c.length;f++)if(y[f]){const t=c[f];if(b){let x=!1;for(let E=0;E<m.length;E+=2)if(t>=m[E]&&t<=m[E+1]){x=!0;break}x||(y[f]=0)}y[f]&&(t===k||e?.has(t))&&(y[f]=0)}}function O(c,m){const k=c[0].length;for(let y=0;y<k;y++)if(m[y]){let e=!1;for(let b=0;b<c.length;b++)if(c[b][y]){e=!0;break}e||(m[y]=0)}}function J(c,m){const k=c[0].length;for(let y=0;y<k;y++)if(m[y]){let e=
!1;for(let b=0;b<c.length;b++)if(0===c[b][y]){e=!0;break}e&&(m[y]=0)}}function T(c,m,k,y,e,b,f,t){return{xmin:e<=k*c?0:e<k*c+c?e-k*c:c,ymin:b<=y*m?0:b<y*m+m?b-y*m:m,xmax:e+f<=k*c?0:e+f<k*c+c?e+f-k*c:c,ymax:b+t<=y*m?0:b+t<y*m+m?b+t-y*m:m}}function p(c,m,k,y,e,b){const {width:f,height:t}=k.block,{x,y:E}=k.offset,{width:G,height:C}=k.mosaic;k=T(f,t,y,e,x,E,G,C);let F=0;var w=0;if(b){var H=b.hasGCSSShiftTransform?360:b.halfWorldWidth??0,q=f*b.resolutionX;const B=b.startX+y*q;B<H&&B+q>H?w=b.rightPadding:
B>=H&&(F=b.leftMargin-b.rightPadding,w=0)}k.xmax-=w;if("number"===typeof m)for(b=k.ymin;b<k.ymax;b++)for(w=(e*t+b-E)*G+(y*f-x)+F,H=k.xmin;H<k.xmax;H++)c[w+H]=m;else for(b=k.ymin;b<k.ymax;b++)for(w=(e*t+b-E)*G+(y*f-x)+F,H=b*f,q=k.xmin;q<k.xmax;q++)c[w+q]=m[H+q]}function l(c,m,k={}){const {clipOffset:y,clipSize:e,alignmentInfo:b,blockWidths:f}=k;if(f)return a(c,m,{blockWidths:f});var t=c.find(M=>I(M));if(z.isNone(t))return null;k=e?e.width:m.width;const x=e?e.height:m.height;var E=t.width,G=t.height;
const C=m.width/E,F=m.height/G;m={offset:y||{x:0,y:0},mosaic:e||m,block:{width:E,height:G}};E=t.pixelType;G=D.getPixelArrayConstructor(E);var w=t.pixels.length;t=[];for(var H=0;H<w;H++){var q=new G(k*x);for(let M=0;M<F;M++)for(let U=0;U<C;U++){var B=c[M*C+U];I(B)&&(B=B.pixels[H],p(q,B,m,U,M,b))}t.push(q)}let R;if(c.some(M=>z.isNone(M)||z.isSome(M.mask)&&0<M.mask.length))for(R=new Uint8Array(k*x),G=0;G<F;G++)for(w=0;w<C;w++)q=c[G*C+w],H=z.isSome(q)?q.mask:null,z.isSome(H)?p(R,H,m,w,G,b):q?p(R,1,m,
w,G,b):p(R,0,m,w,G,b);c=new D({width:k,height:x,pixels:t,pixelType:E,mask:R});c.updateStatistics();return c}function a(c,m,k){const y=c.find(w=>z.isSome(w));if(z.isNone(y))return null;var e=c.some(w=>z.isSome(w)?!!w.mask:!0);const {width:b,height:f}=m;m=e?new Uint8Array(b*f):null;({blockWidths:k}=k);const t=[],x=y.getPlaneCount(),E=D.getPixelArrayConstructor(y.pixelType);if(e)for(let w=0,H=0;w<c.length;H+=k[w],w++)if(e=c[w],I(e)){var G=z.unwrap(e.mask);for(var C=0;C<f;C++)for(var F=0;F<k[w];F++)m[C*
b+F+H]=null==G?255:G[C*e.width+F]}for(e=0;e<x;e++){G=new E(b*f);for(let w=0,H=0;w<c.length;H+=k[w],w++)if(C=c[w],I(C)&&(F=C.pixels[e],null!=F))for(let q=0;q<f;q++)for(let B=0;B<k[w];B++)G[q*b+B+H]=F[q*C.width+B];t.push(G)}c=new D({width:b,height:f,mask:m,pixels:t,pixelType:y.pixelType});c.updateStatistics();return c}function g(c){if(!I(c))return null;const m=c.clone(),{width:k,height:y,pixels:e}=c;var b=e[0];const f=m.pixels[0];c=z.unwrap(c.mask);for(let E=2;E<y-1;E++){const G=new Map;for(var t=E-
2;t<E+2;t++)for(var x=0;4>x;x++){const C=t*k+x;n(G,b[C],c?c[C]:1)}f[E*k]=v(G);f[E*k+1]=f[E*k+2]=f[E*k];for(t=3;t<k-1;t++)x=(E-2)*k+t+1,n(G,b[x],c?c[x]:1),x=(E-1)*k+t+1,n(G,b[x],c?c[x]:1),x=E*k+t+1,n(G,b[x],c?c[x]:1),x=(E+1)*k+t+1,n(G,b[x],c?c[x]:1),x=(E-2)*k+t-3,d(G,b[x],c?c[x]:1),x=(E-1)*k+t-3,d(G,b[x],c?c[x]:1),x=E*k+t-3,d(G,b[x],c?c[x]:1),x=(E+1)*k+t-3,d(G,b[x],c?c[x]:1),f[E*k+t]=v(G);f[E*k+t+1]=f[E*k+t]}for(b=0;b<k;b++)f[b]=f[k+b]=f[2*k+b],f[(y-1)*k+b]=f[(y-2)*k+b];m.updateStatistics();return m}
function v(c){if(0===c.size)return 0;let m=0,k=-1,y=0;const e=c.keys();let b=e.next();for(;!b.done;)y=c.get(b.value),y>m&&(k=b.value,m=y),b=e.next();return k}function d(c,m,k){0!==k&&(k=c.get(m),1===k?c.delete(m):c.set(m,k-1))}function n(c,m,k){0!==k&&c.set(m,c.has(m)?c.get(m)+1:1)}function h(c,m,k){let {x:y,y:e}=m;const {width:b,height:f}=k;if(0===y&&0===e&&f===c.height&&b===c.width)return c;const {width:t,height:x}=c;m=Math.max(0,e);const E=Math.max(0,y),G=Math.min(y+b,t),C=Math.min(e+f,x);if(0>
G||0>C||!I(c))return null;y=Math.max(0,-y);e=Math.max(0,-e);var {pixels:F}=c,w=b*f,H=F.length;const q=[];for(var B=0;B<H;B++){var R=F[B],M=D.createEmptyBand(c.pixelType,w);for(let U=m;U<C;U++){const V=U*t;let P=(U+e-m)*b+y;for(let X=E;X<G;X++)M[P++]=R[V+X]}q.push(M)}F=new Uint8Array(w);w=z.unwrap(c.mask);for(H=m;H<C;H++)for(B=H*t,R=(H+e-m)*b+y,M=E;M<G;M++)F[R++]=w?w[B+M]:1;c=new D({width:k.width,height:k.height,pixelType:c.pixelType,pixels:q,mask:F});c.updateStatistics();return c}function A(c,m=!0){if(!I(c))return null;
const {pixels:k,width:y,height:e,mask:b,pixelType:f}=c;c=[];const t=Math.round(y/2),x=Math.round(e/2),E=e-1,G=y-1;for(var C=0;C<k.length;C++){var F=k[C],w=D.createEmptyBand(f,t*x),H=0;for(var q=0;q<e;q+=2)for(var B=0;B<y;B+=2){var R=F[q*y+B];if(m){var M=B===G?R:F[q*y+B+1];const U=q===E?R:F[q*y+B+y],V=B===G?U:q===E?M:F[q*y+B+y+1];w[H++]=(R+M+U+V)/4}else w[H++]=R}c.push(w)}C=null;if(z.isSome(b))for(C=new Uint8Array(t*x),F=0,w=0;w<e;w+=2)for(H=0;H<y;H+=2)q=b[w*y+H],m?(B=H===G?q:b[w*y+H+1],R=w===E?q:
b[w*y+H+y],M=H===G?R:w===E?B:b[w*y+H+y+1],C[F++]=q*B*R*M?1:0):C[F++]=q;return new D({width:t,height:x,pixelType:f,pixels:c,mask:C})}function r(c,m,k,y,e=.5){const {width:b,height:f}=c,{width:t,height:x}=m;c=y.cols;y=y.rows;m=Math.ceil(t/c-.1/c);const E=Math.ceil(x/y-.1/y);let G,C,F,w,H;const q=m*c;var B=q*E*y;const R=new Float32Array(B),M=new Float32Array(B),U=new Uint32Array(B),V=new Uint32Array(B);let P=0,X,Z;for(let aa=0;aa<E;aa++)for(let Q=0;Q<m;Q++){var ba=12*(aa*m+Q);B=k[ba];G=k[ba+1];C=k[ba+
2];F=k[ba+3];w=k[ba+4];H=k[ba+5];for(var da=0;da<y;da++){P=(aa*y+da)*q+Q*c;Z=(da+.5)/y;for(let W=0;W<da;W++)X=(W+.5)/c,R[P+W]=(B*X+G*Z+C)*b-e,M[P+W]=(F*X+w*Z+H)*f-e,U[P+W]=Math.round(R[P+W]),V[P+W]=Math.round(M[P+W])}ba+=6;B=k[ba];G=k[ba+1];C=k[ba+2];F=k[ba+3];w=k[ba+4];H=k[ba+5];for(ba=0;ba<y;ba++)for(P=(aa*y+ba)*q+Q*c,Z=(ba+.5)/y,da=ba;da<c;da++)X=(da+.5)/c,R[P+da]=(B*X+G*Z+C)*b-e,M[P+da]=(F*X+w*Z+H)*f-e,U[P+da]=Math.round(R[P+da]),V[P+da]=Math.round(M[P+da])}return{offsets_x:R,offsets_y:M,offsets_xi:U,
offsets_yi:V,gridWidth:q}}N.NoDataInterpretation=void 0;(function(c){c[c.matchAny=0]="matchAny";c[c.matchAll=1]="matchAll"})(N.NoDataInterpretation||(N.NoDataInterpretation={}));N.MissingBandAction=void 0;(function(c){c[c.bestMatch=0]="bestMatch";c[c.fail=1]="fail"})(N.MissingBandAction||(N.MissingBandAction={}));N.approximateTransform=function(c,m,k,y,e="nearest"){if(!I(c))return null;"majority"===e&&(c=g(c));const {pixels:b,mask:f,pixelType:t}=c,x=c.width;var E=c.height;const G=D.getPixelArrayConstructor(t),
C=b.length,{width:F,height:w}=m;c=!1;for(let V=0;V<k.length;V+=3)-1===k[V]&&-1===k[V+1]&&-1===k[V+2]&&(c=!0);const {offsets_x:H,offsets_y:q,offsets_xi:B,offsets_yi:R,gridWidth:M}=r({width:x,height:E},m,k,y,"majority"===e?0:.5);let U;m=(V,P,X)=>{const Z=V instanceof Float32Array||V instanceof Float64Array?0:.5;for(let ba=0;ba<w;ba++){U=ba*M;for(let da=0;da<F;da++){if(0>H[U]||0>q[U])V[ba*F+da]=0;else if(X)V[ba*F+da]=P[B[U]+R[U]*x];else{const aa=Math.floor(H[U]),Q=Math.floor(q[U]),W=Math.ceil(H[U]),
Y=Math.ceil(q[U]),ea=H[U]-aa,fa=q[U]-Q;V[ba*F+da]=!f||f[aa+Q*x]&&f[aa+Q*x]&&f[aa+Y*x]&&f[W+Y*x]?(1-fa)*((1-ea)*P[aa+Q*x]+ea*P[W+Q*x])+fa*((1-ea)*P[aa+Y*x]+ea*P[W+Y*x])+Z:P[B[U]+R[U]*x]}U++}}};k=[];for(E=0;E<C;E++)y=new G(F*w),m(y,b[E],"nearest"===e||"majority"===e),k.push(y);e=new D({width:F,height:w,pixelType:t,pixels:k});if(z.isSome(f))e.mask=new Uint8Array(F*w),m(e.mask,f,!0);else if(c)for(e.mask=new Uint8Array(F*w),c=0;c<F*w;c++)e.mask[c]=0>H[c]||0>q[c]?0:1;e.updateStatistics();return e};N.clip=
h;N.colorize=function(c,m){if(!I(c)||!m||!m.indexedColormap&&!m.indexed2DColormap)return c;const k=c.clone();var y=k.pixels;let e=k.mask;const b=k.width*k.height;if(1!==y.length)return c;const {indexedColormap:f,indexed2DColormap:t,offset:x,alphaSpecified:E}=m;c=0;y=y[0];m=new Uint8Array(y.length);const G=new Uint8Array(y.length),C=new Uint8Array(y.length);var F=0;if(f){const w=f.length-1;if(z.isSome(e))for(c=0;c<b;c++)e[c]&&(F=4*(y[c]-x),F<x||F>w?e[c]=0:(m[c]=f[F],G[c]=f[F+1],C[c]=f[F+2],e[c]=f[F+
3]));else{e=new Uint8Array(b);for(c=0;c<b;c++)F=4*(y[c]-x),F<x||F>w?e[c]=0:(m[c]=f[F],G[c]=f[F+1],C[c]=f[F+2],e[c]=f[F+3]);k.mask=e}}else if(t)if(z.isSome(e))for(c=0;c<b;c++)e[c]&&(F=t[y[c]],m[c]=F[0],G[c]=F[1],C[c]=F[2],e[c]=F[3]);else{e=new Uint8Array(b);for(c=0;c<b;c++)F=t[y[c]],m[c]=F[0],G[c]=F[1],C[c]=F[2],e[c]=F[3];k.mask=e}k.pixels=[m,G,C];k.statistics=null;k.pixelType="u8";k.maskIsAlpha=E;return k};N.compositeBands=function(c){if(!c?.length||c.some(x=>!I(x)))return null;if(1===c.length)return z.isSome(c[0])?
c[0].clone():null;const {width:m,height:k,pixelType:y}=c[0];if(c.some(x=>x.width!==m||x.height!==k))return null;const e=c.map(({mask:x})=>x).filter(x=>null!=x);let b=null;e.length&&(b=new Uint8Array(m*k),b.set(e[0]),1<e.length&&J(e.slice(1),b));const f=[];c.forEach(({pixels:x})=>f.push(...x));const t=[];c.map(({statistics:x})=>x).filter(x=>x?.length).forEach(x=>t.push(...x));return new D({pixelType:y,width:m,height:k,mask:b,pixels:f,statistics:t.length?t:null})};N.createColormapLUT=function(c){if(c){var m=
c.colormap;if(m&&0!==m.length){m=m.sort((E,G)=>E[0]-G[0]);var k=0;0>m[0][0]&&(k=m[0][0]);var y=Math.max(256,m[m.length-1][0]-k+1),e=new Uint8Array(4*y),b=[],f=0,t=0,x=5===m[0].length;if(65536<y)return m.forEach(E=>{b[E[0]-k]=x?E.slice(1):E.slice(1).concat([255])}),{indexed2DColormap:b,offset:k,alphaSpecified:x};if(c.fillUnspecified)for(c=m[t],f=c[0]-k;f<y;f++)e[4*f]=c[1],e[4*f+1]=c[2],e[4*f+2]=c[3],e[4*f+3]=x?c[4]:255,f===c[0]-k&&(c=t===m.length-1?c:m[++t]);else for(f=0;f<m.length;f++)c=m[f],t=4*
(c[0]-k),e[t]=c[1],e[t+1]=c[2],e[t+2]=c[3],e[t+3]=x?c[4]:255;return{indexedColormap:e,offset:k,alphaSpecified:x}}}};N.createMaskLUT=function(c,m,k){if("u8"!==c&&"s8"!==c&&"u16"!==c&&"s16"!==c)return null;var y=c.includes("16")?65536:256;c=c.includes("s")?-y/2:0;y=new Uint8Array(y);if(m)for(let b=0;b<m.length;b++){var e=Math.ceil(m[2*b]-c);const f=Math.floor(m[2*b+1]-c);for(;e<=f;e++)y[e]=255}if(k)for(m=0;m<k.length;m++)y[k[m]-c]=0;return{lut:y,offset:c}};N.createRemapLUT=function(c,m,k){if("u8"!==
c&&"s8"!==c&&"u16"!==c&&"s16"!==c)return null;var y=c.includes("16")?65536:256;const e=c.includes("s")?-y/2:0;c=D.createEmptyBand(c,y);for(y=0;y<m.length;y++){const f=k[y];var b=Math.ceil(m[2*y]-e);const t=Math.floor(m[2*y+1]-e);for(;b<=t;b++)c[b]=f}return{lut:c,offset:e}};N.extractBands=function(c,m){if(!m?.length||!I(c))return c;const k=c.pixels.length;return m&&m.some(y=>y>=k)||1===k&&1===m.length&&0===m[0]||k===m.length&&!m.some((y,e)=>y!==e)?c:new D({pixelType:c.pixelType,width:c.width,height:c.height,
mask:c.mask,validPixelCount:c.validPixelCount,maskIsAlpha:c.maskIsAlpha,pixels:m.map(y=>c.pixels[y]),statistics:c.statistics&&m.map(y=>c.statistics[y])})};N.getClipBounds=T;N.getLocalArithmeticNorthRotations=function(c,m){const {coefficients:k,spacing:y}=m,{offsets_x:e,offsets_y:b,gridWidth:f}=r(c,c,k,{rows:y[0],cols:y[1]},.5),{width:t,height:x}=c;c=new Float32Array(t*x);m=180/Math.PI;for(let C=0;C<x;C++)for(let F=0;F<t;F++){var E=C*f+F,G=0===C?E:E-f;const w=C===x-1?E:E+f;E=e[G]-e[w];G=b[w]-b[G];
isNaN(E)||isNaN(G)?c[C*t+F]=90:(G=Math.atan2(G,E)*m,G=(360+G)%360,c[C*t+F]=G)}return c};N.isValidPixelBlock=I;N.lookupBandValues=u;N.lookupPixels=function(c,m){if(!I(c))return null;const {pixels:k,mask:y}=c,e=k.length;let b=m.lut;const {offset:f}=m;b&&1===b[0].length&&(b=k.map(()=>b));const t=[];m=m.outputPixelType||"u8";for(let x=0;x<e;x++){const E=u(k[x],y,b[x],f||0,m);t.push(E)}c=new D({width:c.width,height:c.height,pixels:t,mask:y,pixelType:m});c.updateStatistics();return c};N.mask=function(c,
m){if(!I(c))return null;const {width:k,height:y,pixels:e}=c;var b=k*y;const f=new Uint8Array(b);c.mask?f.set(c.mask):f.fill(255);c=e.length;const {includedRanges:t,noDataValues:x,outputPixelType:E,matchAll:G,lookup:C}=m;if(C){b=[];for(m=0;m<c;m++){var F=u(e[m],f,C.lut,C.offset||0,"u8");b.push(F)}1===b.length?f.set(b[0]):G?O(b,f):J(b,f)}else if(G){m=[];for(F=0;F<c;F++){const w=new Uint8Array(b);w.set(f);S(e[F],t,x,w);m.push(w)}1===m.length?f.set(m[0]):O(m,f)}else for(b=0;b<c;b++)S(e[b],t,x,f);return new D({width:k,
height:y,pixelType:E,pixels:e,mask:f})};N.mosaic=l;N.mosaicPixelData=function(c,m){if(!c||0===c.length)return null;var k=c.find(C=>C.pixelBlock);if(!k||z.isNone(k.pixelBlock))return null;var y=(k.extent.xmax-k.extent.xmin)/k.pixelBlock.width;const e=(k.extent.ymax-k.extent.ymin)/k.pixelBlock.height,b=.01*Math.min(y,e),f=c.sort((C,F)=>Math.abs(C.extent.ymax-F.extent.ymax)>b?F.extent.ymax-C.extent.ymax:Math.abs(C.extent.xmin-F.extent.xmin)>b?C.extent.xmin-F.extent.xmin:0);var t=Math.min.apply(null,
f.map(C=>C.extent.xmin));const x=Math.min.apply(null,f.map(C=>C.extent.ymin)),E=Math.max.apply(null,f.map(C=>C.extent.xmax)),G=Math.max.apply(null,f.map(C=>C.extent.ymax));c={x:Math.round((m.xmin-t)/y),y:Math.round((G-m.ymax)/e)};t={width:Math.round((E-t)/y),height:Math.round((G-x)/e)};y={width:Math.round((m.xmax-m.xmin)/y),height:Math.round((m.ymax-m.ymin)/e)};if(Math.round(t.width/k.pixelBlock.width)*Math.round(t.height/k.pixelBlock.height)!==f.length||0>c.x||0>c.y||t.width<y.width||t.height<y.height)return null;
k=f.map(C=>C.pixelBlock);k=l(k,t,{clipOffset:c,clipSize:y});return{extent:m,pixelBlock:k}};N.remap=function(c,m){if(!I(c))return null;const {width:k,height:y}=c,{inputRanges:e,outputValues:b,outputPixelType:f,noDataRanges:t,allowUnmatched:x}=m;m=c.pixels[0];const E=D.createEmptyBand(f,m.length);x&&E.set(m);c=c.mask;const G=e.length/2;for(var C=0;C<y;C++)for(var F=0;F<k;F++){var w=C*k+F;if(!c||c[w]){var H=m[w];for(var q=G-1;0<=q;q--)if(H>=e[2*q]&&H<=e[2*q+1]){E[w]=b[q];break}}}C=c;if(t?.length)for(C=
new Uint8Array(k*y),c&&C.set(c),F=0;F<y;F++)for(w=0;w<k;w++)if(H=F*k+w,!c||c[H]){q=m[H];for(let B=0;B<G;B+=2)if(q>=t[B]&&q<=t[B+1]){E[H]=0;C[H]=0;break}}return new D({width:k,height:y,pixelType:f,pixels:[E],mask:C})};N.remapColor=function(c,m){if(!I(c))return null;c=c.clone();var {pixels:k}=c;const y=c.width*c.height,e=m.length,b=Math.floor(e/2),f=m[Math.floor(b)];k=k[0];let t,x,E,G,C,F,w=!1;const H=new Uint8Array(y),q=new Uint8Array(y),B=new Uint8Array(y);let R=c.mask;const M=4===m[0].mappedColor.length;
R||(R=new Uint8Array(y),R.fill(M?255:1),c.mask=R);for(C=0;C<y;C++)if(R[C]){t=k[C];w=!1;F=b;x=f;E=0;for(G=e-1;1<G-E;){if(t===x.value){w=!0;break}t>x.value?E=F:G=F;F=Math.floor((E+G)/2);x=m[Math.floor(F)]}w||(t===m[E].value?(x=m[E],w=!0):t===m[G].value?(x=m[G],w=!0):t<m[E].value?(w=!1,x=null):t>m[E].value&&(t<m[G].value?(x=m[E],w=!0):G===e-1?(w=!1,x=null):(x=m[G],w=!0)));w?(H[C]=x.mappedColor[0],q[C]=x.mappedColor[1],B[C]=x.mappedColor[2],R[C]=x.mappedColor[3]):H[C]=q[C]=B[C]=R[C]=0}c.pixels=[H,q,B];
c.mask=R;c.pixelType="u8";c.maskIsAlpha=M;return c};N.resampleByMajority=g;N.setValidBoundary=function(c,m,k){if(!I(c))return null;const {width:y,height:e}=c,b=m.x;m=m.y;const f=k.width+b;k=k.height+m;if(0>b||0>m||f>y||k>e||0===b&&0===m&&f===y&&k===e)return c;c.mask||(c.mask=new Uint8Array(y*e));const t=c.mask;for(let x=0;x<e;x++){const E=x*y;for(let G=0;G<y;G++)t[E+G]=x<m||x>=k||G<b||G>=f?0:1}c.updateStatistics();return c};N.split=function(c,m,k){if(!I(c))return null;const {width:y,height:e}=m;let {width:b,
height:f}=c;const t=new Map,x={x:0,y:0};k=null==k?1:1+k;for(let E=0;E<k;E++){const G=Math.ceil(b/y),C=Math.ceil(f/e);for(let F=0;F<C;F++){x.y=F*e;for(let w=0;w<G;w++){x.x=w*y;const H=h(c,x,m);t.set(`${E}/${F}/${w}`,H)}}E<k-1&&(c=A(c));b=Math.round(b/2);f=Math.round(f/2)}return t};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g){function v(C){C=C.symbolLayers;if(!C)return null;let F=null;C.forEach(w=>{if("object"!==w.type||null==w.resource?.href)F="water"===w.type?J.unwrap(w.color):J.isSome(w.material)?J.unwrap(w.material.color):null});return F?new I(F):null}function d(C,F){if(null==F||null==C)return C;C=C.toRgba();C[3]*=F;return new I(C)}function n(C,F,w){if(C=C.symbolLayers){var H=q=>{q=J.isSome(q)?q:null;F=F??q??(null!=w?G:null);return d(F,w)};C.forEach(q=>{if("object"!==q.type||null==
q.resource?.href||F)if("water"===q.type)q.color=H(q.color);else{var B=J.isSome(q.material)?q.material.color:null;B=H(B);J.isNone(q.material)?q.material=new g.Symbol3DMaterial({color:B}):q.material.color=B;null!=w&&"outline"in q&&J.isSome(q.outline)&&J.isSome(q.outline.color)&&(q.outline.color=d(q.outline.color,w))}})}}function h(C,F){return A.apply(this,arguments)}function A(){A=D._asyncToGenerator(function*(C,F){(C=C.symbolLayers)&&(yield S.forEach(C,function(){var w=D._asyncToGenerator(function*(H){return r(H,
F)});return function(H){return w.apply(this,arguments)}}()))});return A.apply(this,arguments)}function r(C,F){return c.apply(this,arguments)}function c(){c=D._asyncToGenerator(function*(C,F){switch(C.type){case "extrude":C.size="number"===typeof F[2]?F[2]:0;break;case "icon":case "line":case "text":F=m(F);J.isSome(F)&&(C.size=F);break;case "path":const w=e(F,p.ONES,[C.width,void 0,C.height]);C.width=t(F[0],C.width,1,w);C.height=t(F[2],C.height,1,w);break;case "object":yield k(C,F)}});return c.apply(this,
arguments)}function m(C){for(const F of C)if("number"===typeof F)return F;return null}function k(C,F){return y.apply(this,arguments)}function y(){y=D._asyncToGenerator(function*(C,F){const {resourceSize:w,symbolSize:H}=yield b(C),q=e(F,w,H);C.width=t(F[0],H[0],w[0],q);C.depth=t(F[1],H[1],w[1],q);C.height=t(F[2],H[2],w[2],q)});return y.apply(this,arguments)}function e(C,F,w){for(let H=0;3>H;H++){const q=C[H];switch(q){case "symbol-value":return C=w[H],null!=C?C/F[H]:1;case "proportional":break;default:if(q&&
F[H])return q/F[H]}}return 1}function b(C){return f.apply(this,arguments)}function f(){f=D._asyncToGenerator(function*(C){const F=yield(yield new Promise((M,U)=>N(["./symbolLayerUtils"],M,U))).computeObjectLayerResourceSize(C,10),{width:w,height:H,depth:q}=C;C=[w,q,H];let B=1;for(var R=0;3>R;R++){const M=C[R];if(null!=M){B=M/F[R];break}}for(R=0;3>R;R++)null==C[R]&&(C[R]=F[R]*B);return{resourceSize:F,symbolSize:C}});return f.apply(this,arguments)}function t(C,F,w,H){switch(C){case "proportional":return w*
H;case "symbol-value":return null!=F?F:w;default:return C}}function x(){x=D._asyncToGenerator(function*(C,F){if(C&&F){if(u.isSymbol3D(C))return h(C,F);if(u.isSymbol2D(C)&&(F=m(F),!J.isNone(F)))switch(C.type){case "simple-marker":C.size=F;break;case "picture-marker":const w=C.width/C.height;1<w?(C.width=F,C.height=F*w):(C.width=F*w,C.height=F);break;case "simple-line":C.width=F;break;case "text":C.font.size=F}}});return x.apply(this,arguments)}const E=/\/resource\/(.*?)\.svg$/,G=new I("white");z.applyColorToSymbol=
function(C,F,w){if(C&&(F||null!=w))if(F&&(F=new I(F)),u.isSymbol3D(C))n(C,F,w);else if(u.isSymbol2D(C)){if(F=F??C.color)C.color=d(F,w);null!=w&&"outline"in C&&C.outline&&C.outline.color&&(C.outline.color=d(C.outline.color,w))}};z.applyOpacityToColor=d;z.applyRotationToSymbol=function(C,F,w){C&&null!=F&&(u.isSymbol3D(C)?(C=C.symbolLayers)&&C.forEach(H=>{if(H&&"object"===H.type)switch(w){case "tilt":H.tilt=F;break;case "roll":H.roll=F;break;default:H.heading=F}}):!u.isSymbol2D(C)||"simple-marker"!==
C.type&&"picture-marker"!==C.type&&"text"!==C.type||(C.angle=F))};z.applySizesToSymbol=function(C,F){return x.apply(this,arguments)};z.getCSSFilterFromEffectList=function(C){if(!C)return null;C=C.effects.filter(F=>"bloom"!==F.type).map(F=>F.toJSON());return l.effectFunctionsFromJSON(C)};z.getColorFromSymbol=function(C,F){if(!C)return null;let w=null;u.isSymbol3D(C)?w=v(C):u.isSymbol2D(C)&&(w=C.color?new I(C.color):null);return w?d(w,F):null};z.getIconHref=function(C,F){F=J.unwrapOrThrow(F.resource).href;
return!O("esri-canvas-svg-support")&&C.styleOrigin&&E.test(F)?F.replace(E,"/resource/png/$1.png"):F};z.getSymbolOutlineSize=function(C){if(!C)return 0;if(u.isSymbol3D(C)){{const F=C.symbolLayers&&C.symbolLayers.length;F?(C=C.symbolLayers.getItemAt(F-1),C="outline"in C?J.get(C,"outline","size"):void 0):C=void 0}return J.isSome(C)?C:0}return T.px2pt(a.getStroke(C)?.width)};z.isVolumetricSymbol=function(C){if(J.isNone(C)||!("symbolLayers"in C)||J.isNone(C.symbolLayers))return!1;switch(C.type){case "point-3d":return C.symbolLayers.some(F=>
"object"===F.type);case "line-3d":return C.symbolLayers.some(F=>"path"===F.type);case "polygon-3d":return C.symbolLayers.some(F=>"object"===F.type||"extrude"===F.type);default:return!1}};z.symbolHasExtrudeSymbolLayer=function(C){return J.isSome(C)&&"polygon-3d"===C.type&&C.symbolLayers.some(F=>"extrude"===F.type)};Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(N,z,D,I,u,S,O){function J(l){if(!l)return null;let a=null;switch(l.type){case "simple-fill":case "picture-fill":case "simple-marker":a=J(l.outline);break;case "simple-line":const g=S.pt2px(l.width);null!=l.style&&"none"!==l.style&&0!==g&&(a={color:l.color,style:p(l.style),width:g,cap:l.cap,join:"miter"===l.join?S.pt2px(l.miterLimit):l.join});break;default:a=null}return a}const T=new u(1E3),p=(()=>{const l={};return a=>{if(l[a])return l[a];const g=a.replace(/-/g,"");return l[a]=g}})();D=new D([128,
128,128]);N.defaultThematicColor=D;N.dekebabifyLineStyle=p;N.getFill=function(l){const a=l.style;let g=null;if(l)switch(l.type){case "simple-marker":"cross"!==a&&"x"!==a&&(g=l.color);break;case "simple-fill":"solid"===a?g=l.color:"none"!==a&&(g={type:"pattern",x:0,y:0,src:z.getAssetUrl(`esri/symbols/patterns/${a}.png`),width:5,height:5});break;case "picture-fill":g={type:"pattern",src:l.url,width:S.pt2px(l.width)*l.xscale,height:S.pt2px(l.height)*l.yscale,x:S.pt2px(l.xoffset),y:S.pt2px(l.yoffset)};
break;case "text":g=l.color;break;case "cim":g=O.getCIMSymbolColor(l)}return g};N.getPatternUrlWithColor=function(l,a){const g=l+"-"+a;return void 0!==T.get(g)?Promise.resolve(T.get(g)):I(l,{responseType:"image"}).then(v=>{v=v.data;const d=v.naturalWidth,n=v.naturalHeight,h=document.createElement("canvas");h.width=d;h.height=n;const A=h.getContext("2d");A.fillStyle=a;A.fillRect(0,0,d,n);A.globalCompositeOperation="destination-in";A.drawImage(v,0,0);v=h.toDataURL();T.put(g,v);return v})};N.getStroke=
J;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(N){return function(){function z(I,u){this._storage=new N.MemCacheStorage;this._storage.maxSize=I;u&&this._storage.registerRemoveFunc("",u)}var D=z.prototype;D.put=function(I,u){this._storage.put(I,u,1,1)};D.pop=function(I){return this._storage.pop(I)};D.get=function(I){return this._storage.get(I)};D.clear=function(){this._storage.clearAll()};
D.destroy=function(){this._storage.destroy()};return z}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(N,z,D){function I(a){a=D.toCIMSymbolJSON(a);if("CIMTextSymbol"===a?.type)return a.height??0;let g=0;if(a?.symbolLayers)for(const v of a.symbolLayers)D.isCIMMarker(v)&&null!=v.size&&v.size>g?g=v.size:D.isCIMStroke(v)&&null!=v.width&&v.width>g?g=v.width:D.isCIMFill(v);return g}function u(a,g,v,d){if(a)if("CIMTextSymbol"===a.type)null!=
a.height&&(a.height*=g);else{if(v&&a.effects)for(const n of a.effects)J(n,g);if(a.symbolLayers)for(const n of a.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":S(n,g,d);break;case "CIMPictureStroke":case "CIMSolidStroke":!d?.preserveOutlineWidth&&n.width&&(n.width*=g);break;case "CIMPictureFill":n.height&&(n.height*=g);n.offsetX&&(n.offsetX*=g);n.offsetY&&(n.offsetY*=g);break;case "CIMHatchFill":u(n.lineSymbol,g,!0,{...d,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=
g),n.offsetY&&(n.offsetY*=g),n.separation&&(n.separation*=g)}}}function S(a,g,v){if(a&&(a.markerPlacement&&O(a.markerPlacement,g),a.offsetX&&(a.offsetX*=g),a.offsetY&&(a.offsetY*=g),a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*g,y:a.anchorPoint.y*g}),a.size=null!=a.size?a.size*g:0,"CIMVectorMarker"===a.type&&a.markerGraphics))for(const d of a.markerGraphics)a.scaleSymbolsProportionally||u(d.symbol,g,!0,v)}function O(a,g){D.isCIMMarkerStrokePlacement(a)&&a.offset&&
(a.offset*=g);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset&&(a.customEndingOffset*=g);a.offsetAlongLine&&(a.offsetAlongLine*=g);if(a.placementTemplate&&a.placementTemplate.length){var v=a.placementTemplate.map(d=>d*g);a.placementTemplate=v}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset&&(a.maxRandomOffset*=g);a.placementTemplate&&a.placementTemplate.length&&(v=a.placementTemplate.map(d=>d*g),a.placementTemplate=
v);break;case "CIMMarkerPlacementOnLine":a.startPointOffset&&(a.startPointOffset*=g);break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine&&(a.offsetAlongLine*=g);break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition&&(a.beginPosition*=g);a.endPosition&&(a.endPosition*=g);break;case "CIMMarkerPlacementPolygonCenter":a.offsetX&&(a.offsetX*=g);a.offsetY&&(a.offsetY*=g);break;case "CIMMarkerPlacementInsidePolygon":a.offsetX&&(a.offsetX*=g),a.offsetY&&(a.offsetY*=g),a.stepX&&(a.stepX*=
g),a.stepY&&(a.stepY*=g)}}function J(a,g){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width&&(a.width*=g);break;case "CIMGeometricEffectBuffer":a.size&&(a.size*=g);break;case "CIMGeometricEffectCut":a.beginCut&&(a.beginCut*=g);a.endCut&&(a.endCut*=g);a.middleCut&&(a.middleCut*=g);break;case "CIMGeometricEffectDashes":a.customEndingOffset&&(a.customEndingOffset*=g);a.offsetAlongLine&&(a.offsetAlongLine*=g);if(a.dashTemplate&&a.dashTemplate.length){const v=a.dashTemplate.map(d=>
d*g);a.dashTemplate=v}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length&&(a.length*=g);break;case "CIMGeometricEffectMove":a.offsetX&&(a.offsetX*=g);a.offsetY&&(a.offsetY*=g);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset&&(a.offset*=g);break;case "CIMGeometricEffectRegularPolygon":a.radius&&(a.radius*=g);break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth&&(a.fromWidth*=g);a.length&&(a.length*=
g);a.toWidth&&(a.toWidth*=g);break;case "CIMGeometricEffectWave":a.amplitude&&(a.amplitude*=g),a.period&&(a.period*=g)}}function T(a,g){if(a){var v="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(v?.symbolLayers)for(const d of v.symbolLayers)if(!(d.colorLocked||a&&(D.isCIMStroke(d)||D.isCIMMarker(d)&&d.markerPlacement&&D.isCIMMarkerStrokePlacement(d.markerPlacement))))switch(d.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":d.tintColor&&p(g,d.tintColor);
break;case "CIMVectorMarker":d.markerGraphics?.forEach(n=>{T(n.symbol,g)});break;case "CIMSolidStroke":case "CIMSolidFill":p(g,d.color);break;case "CIMHatchFill":T(d.lineSymbol,g)}}}function p(a,g){for(const v of a)if(v.join(".")===g.join("."))return;a.push(g)}function l(a,g,v){if(a){var d="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===d?.type;if(d?.symbolLayers)for(const n of d.symbolLayers)if(!n.colorLocked){if(a)if(v){if({layersToColor:d}=v,(D.isCIMStroke(n)||D.isCIMMarker(n)&&n.markerPlacement&&
D.isCIMMarkerStrokePlacement(n.markerPlacement))&&"fill"===d||D.isCIMFill(n)&&"outline"===d)continue}else if(D.isCIMStroke(n)||D.isCIMMarker(n)&&n.markerPlacement&&D.isCIMMarkerStrokePlacement(n.markerPlacement))continue;d=g.toArray();switch(n.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":n.tintColor=d;break;case "CIMVectorMarker":n.markerGraphics?.forEach(h=>{l(h.symbol,g,v)});break;case "CIMSolidStroke":case "CIMSolidFill":n.color=d;break;case "CIMHatchFill":l(n.lineSymbol,
g,v)}}}}N.applyCIMSymbolColor=function(a,g,v){g instanceof z||(g=new z(g));(a=D.toCIMSymbolJSON(a))&&l(a,g,v)};N.applyCIMSymbolRotation=function(a,g,v=!1){a=D.toCIMSymbolJSON(a);v&&0!==g&&(g=360-g);if("CIMTextSymbol"===a?.type)a.angle=g;else if("CIMPointSymbol"===a?.type&&a.symbolLayers){v=g-(a.angle||0);for(const d of a.symbolLayers)if(D.isCIMMarker(d)){let n=d.rotation||0;n=d.rotateClockwise?n-v:n+v;d.rotation=n}a.angle=g}};N.getCIMSymbolColor=function(a){a=D.toCIMSymbolJSON(a);const g=[];T(a,g);
return g.length?new z(D.fromCIMColor(g[0])):null};N.getCIMSymbolRotation=function(a,g=!1){a=D.toCIMSymbolJSON(a);return"CIMTextSymbol"===a?.type||"CIMPointSymbol"===a?.type?(a=a.angle,null!=a&&0!==a&&g?360-a:a??0):0};N.getCIMSymbolSize=I;N.getCIMSymbolType=function(a){a=D.toCIMSymbolJSON(a);if(!a)return null;switch(a.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};N.scaleCIMMarker=S;N.scaleCIMSymbol=u;N.scaleCIMSymbolTo=function(a,g,v){if(a){var d=D.toCIMSymbolJSON(a);a=I(a);if(0===a){if(d)if("CIMTextSymbol"===d.type)d.height=g;else if(d.symbolLayers)for(const n of d.symbolLayers)switch(n.type){case "CIMPictureMarker":case "CIMVectorMarker":n.size=g;break;case "CIMPictureStroke":case "CIMSolidStroke":n.width=g}}else u(d,g/a,!1,v)}};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(N,z){function D(p){let l=p.length;for(;l--;)if(!" /-,\n".includes(p.charAt(l)))return!1;return!0}function I(p,l){const a=[];var g=0;let v=-1;do v=p.indexOf("[",g),v>=g&&(v>g&&(g=p.substr(g,v-g),a.push([g,null,D(g)])),g=v+1,v=p.indexOf("]",g),v>=g&&(v>g&&(g=p.substr(g,v-g),(g=l[g])&&a.push([null,g,!1])),g=v+1));while(-1!==v);g<p.length-1&&(p=p.substr(g),a.push([p,null,D(p)]));return a}function u(p,l,a){let g="",v=null;for(const d of l){const [n,
h,A]=d;if(n)A?v=n:(v&&(g+=v,v=null),g+=n);else if(l=p.attributes[h])v&&(g+=v,v=null),g+=l}return S(g,a)}function S(p,l){"string"!==typeof p&&(p=String(p));switch(l){case "LowerCase":return p.toLowerCase();case "Allcaps":return p.toUpperCase();default:return p}}function O(p){if(!p)return null;switch(p.type){case "CIMPolygonSymbol":if(p.symbolLayers)for(const l of p.symbolLayers)if(p=O(l),null!=p)return p;break;case "CIMTextSymbol":return O(p.symbol);case "CIMSolidFill":return p.color}}function J(p){if(p)switch(p.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(p.symbolLayers)for(const l of p.symbolLayers)if(p=
J(l),void 0!==p)return p;break;case "CIMTextSymbol":return J(p.symbol);case "CIMSolidStroke":case "CIMSolidFill":return p.color}}function T(p){if(p)switch(p.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(p.symbolLayers)for(const l of p.symbolLayers)if(p=T(l),void 0!==p)return p;break;case "CIMTextSymbol":return T(p.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return p.width}}z.adjustTextCase=S;z.analyzeTextParts=I;z.assignTextValuesFromFeature=u;z.attributesToFields=
function(p){return(p?Object.keys(p):[]).map(l=>({name:l,alias:l,type:"string"===typeof p[l]?"esriFieldTypeString":"esriFieldTypeDouble"}))};z.colorToArray=function(p){return[p.r,p.g,p.b,p.a]};z.createLabelOverrideFunction=function(p,l,a){const g=I(l,p);return v=>u(v,g,a)};z.evaluateValueOrFunction=function(p,l,a,g){return"function"===typeof p?p(l,a,g):p};z.fromCIMColor=function(p){return p?{r:p[0],g:p[1],b:p[2],a:p[3]/255}:{r:0,g:0,b:0,a:0}};z.fromCIMFontDecoration=function(p){return p.underline?
"underline":p.strikethrough?"line-through":"none"};z.fromCIMFontStyle=function(p){let l="",a="";p&&(p=p.toLowerCase(),p.includes("italic")?l="italic":p.includes("oblique")&&(l="oblique"),p.includes("bold")?a="bold":p.includes("light")&&(a="lighter"));return{style:l,weight:a}};z.fromCIMHorizontalAlignment=function(p){switch(p){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};z.fromCIMVerticalAlignment=function(p){switch(p){default:return"top";
case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};z.getFillColor=O;z.getFontStyle=function(p){if(!p)return"normal";switch(p.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};z.getFontWeight=function(p){if(!p)return"normal";switch(p.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};z.getStrokeColor=J;z.getStrokeWidth=T;z.getValue=(p,
l=0)=>isNaN(p)||null==p?l:p;z.importGeometryEngine=function(){return new Promise((p,l)=>N(["../../geometry/geometryEngineJSON"],p,l))};z.isCIMFill=function(p){return"CIMGradientFill"===p.type||"CIMHatchFill"===p.type||"CIMPictureFill"===p.type||"CIMSolidFill"===p.type||"CIMWaterFill"===p.type};z.isCIMMarker=function(p){return"CIMVectorMarker"===p.type||"CIMPictureMarker"===p.type||"CIMBarChartMarker"===p.type||"CIMCharacterMarker"===p.type||"CIMPieChartMarker"===p.type||"CIMStackedBarChartMarker"===
p.type};z.isCIMMarkerStrokePlacement=function(p){return"CIMMarkerPlacementAlongLineRandomSize"===p.type||"CIMMarkerPlacementAlongLineSameSize"===p.type||"CIMMarkerPlacementAlongLineVariableSize"===p.type||"CIMMarkerPlacementAtExtremities"===p.type||"CIMMarkerPlacementAtMeasuredUnits"===p.type||"CIMMarkerPlacementAtRatioPositions"===p.type||"CIMMarkerPlacementOnLine"===p.type||"CIMMarkerPlacementOnVertices"===p.type};z.isCIMStroke=function(p){return"CIMGradientStroke"===p.type||"CIMPictureStroke"===
p.type||"CIMSolidStroke"===p.type};z.isGeometryEngineRequired=p=>{if(!p)return!1;for(const l of p)switch(l.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};z.isSVGImage=p=>p.includes("data:image/svg+xml");z.mapCIMSymbolToGeometryType=function(p){if(!p)return null;switch(p.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};
z.resampleHermite=function(p,l,a,g,v,d,n=!0){const h=l/v;a/=d;const A=Math.ceil(h/2),r=Math.ceil(a/2);for(let k=0;k<d;k++)for(let y=0;y<v;y++){const e=4*(y+(n?d-k-1:k)*v);var c=0;let b=0,f=0,t=0,x=0,E=0,G=0;const C=(k+.5)*a;for(let F=Math.floor(k*a);F<(k+1)*a;F++){var m=Math.abs(C-(F+.5))/r;const w=(y+.5)*h;m*=m;for(let H=Math.floor(y*h);H<(y+1)*h;H++){let q=Math.abs(w-(H+.5))/A;c=Math.sqrt(m+q*q);-1<=c&&1>=c&&(c=2*c*c*c-3*c*c+1,0<c&&(q=4*(H+F*l),G+=c*p[q+3],f+=c,255>p[q+3]&&(c=c*p[q+3]/250),t+=c*
p[q],x+=c*p[q+1],E+=c*p[q+2],b+=c))}}g[e]=t/b;g[e+1]=x/b;g[e+2]=E/b;g[e+3]=G/f}};z.toCIMSymbolJSON=function(p){return p.data?.symbol??null};Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(N,z,D,I,u,S,O){var J;D=J=function(T){function p(l){l=T.call(this,l)||this;l.variableName=null;l.dimensionName=null;l.values=[];l.isSlice=!1;return l}N._inheritsLoose(p,T);p.prototype.clone=function(){return new J({variableName:this.variableName,dimensionName:this.dimensionName,values:I.clone(this.values),isSlice:this.isSlice})};return p}(D.JSONSupport);z.__decorate([u.property({type:String,json:{write:!0}})],D.prototype,"variableName",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],
D.prototype,"dimensionName",void 0);z.__decorate([u.property({type:S.types.array(S.types.oneOf([S.types.native(Number),S.types.array(S.types.native(Number))])),json:{write:!0}})],D.prototype,"values",void 0);z.__decorate([u.property({type:Boolean,json:{write:!0}})],D.prototype,"isSlice",void 0);return D=J=z.__decorate([O.subclass("esri.layers.support.DimensionalDefinition")],D)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g){N.ExportImageServiceParameters=function(v){function d(){var h=v.apply(this,arguments)||this;h.layer=null;h.adjustAspectRatio=void 0;h.compression=void 0;h.pixelType=void 0;h.lercVersion=2;return h}z._inheritsLoose(d,v);var n=d.prototype;n.writeAdjustAspectRatio=function(h,A,r){10.3>this.layer.version||(A[r]=h)};n.writeCompressionQuality=function(h,A,r){this.format&&this.format.toLowerCase().includes("jpg")&&null!=h&&(A[r]=h)};n.writeCompressionTolerance=function(h,
A,r){"lerc"===this.format&&null!=h&&(A[r]=h)};n.writeLercVersion=function(h,A,r){"lerc"===this.format&&10.5<=this.layer.version&&(A[r]=h)};n.combineRendererWithRenderingRule=function(h){const A=this.layer,{rasterInfo:r,renderer:c}=A;h=h||A.renderingRule;return c&&p.isSupportedRendererType(c)?p.combineRenderingRules(p.convertRendererToRenderingRule(c,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandProperties:r.keyProperties?.BandProperties,convertColorRampToColormap:10.6>
A.version,convertToRFT:h?.rasterFunctionDefinition?!0:!1,bandCount:r.bandCount}),h):h};n._addResampleRasterFunction=function(h){if("vector-field"!==this.layer.renderer?.type||"Resample"===h?.functionName)return h;let A=new g({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});A=h?.rasterFunctionDefinition?new g({rasterFunctionDefinition:p.convertRenderingRuleToRFT(A)}):
A;return p.combineRenderingRules(A,h)};n._addClipFunction=function(h,A){A=new g({functionName:"Clip",functionArguments:{ClippingGeometry:A.toJSON(),ClippingType:1}});return p.combineRenderingRules(A,h)};z._createClass(d,[{key:"bandIds",get:function(){return this.layer.bandIds},set:function(h){this.layer&&(this.layer.bandIds=h)}},{key:"compressionQuality",get:function(){return this.layer?.compressionQuality},set:function(h){this.layer&&(this.layer.compressionQuality=h)}},{key:"compressionTolerance",
get:function(){return this.layer?.compressionTolerance},set:function(h){this.layer&&(this.layer.compressionTolerance=h)}},{key:"format",get:function(){return"vector-field"===this.layer.renderer?.type?"lerc":this.layer.format}},{key:"interpolation",get:function(){return this.layer?.interpolation},set:function(h){this.layer&&(this.layer.interpolation=h)}},{key:"noData",get:function(){return this.layer?.noData},set:function(h){this.layer&&(this.layer.noData=h)}},{key:"noDataInterpretation",get:function(){return this.layer?.noDataInterpretation},
set:function(h){this.layer&&(this.layer.noDataInterpretation=h)}},{key:"version",get:function(){const h=this.layer;h.commitProperty("bandIds");h.commitProperty("format");h.commitProperty("compressionQuality");h.commitProperty("compressionTolerance");h.commitProperty("interpolation");h.commitProperty("noData");h.commitProperty("noDataInterpretation");h.commitProperty("mosaicRule");h.commitProperty("renderingRule");h.commitProperty("adjustAspectRatio");h.commitProperty("pixelFilter");h.commitProperty("definitionExpression");
h.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1},set:function(h){this._set("version",h)}},{key:"mosaicRule",get:function(){var h=this.layer;let A=h.mosaicRule;h=h.definitionExpression;A?h&&h!==A.where&&(A=A.clone(),A.where=h):h&&(A=new l({where:h}));return A}},{key:"renderingRule",get:function(){const h=this.layer;let A=h.renderingRule;const r=h.pixelFilter,c=!h.format||h.format.includes("jpg")||h.format.includes("png");A=this._addResampleRasterFunction(A);const m=h.multidimensionalSubset?.areaOfInterest;
m&&(A=this._addClipFunction(A,m));c&&!r&&"vector-field"!==h.renderer?.type&&(A=this.combineRendererWithRenderingRule(A));return A}}]);return d}(I.JSONSupport);D.__decorate([u.property()],N.ExportImageServiceParameters.prototype,"layer",void 0);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"adjustAspectRatio",void 0);D.__decorate([T.writer("adjustAspectRatio")],N.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);D.__decorate([u.property({json:{write:!0}})],
N.ExportImageServiceParameters.prototype,"bandIds",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"compression",void 0);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"compressionQuality",null);D.__decorate([T.writer("compressionQuality")],N.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"compressionTolerance",
null);D.__decorate([T.writer("compressionTolerance")],N.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"format",null);D.__decorate([u.property({type:String,json:{read:{reader:a.interpolationKebab.read},write:{writer:a.interpolationKebab.write}}})],N.ExportImageServiceParameters.prototype,"interpolation",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,
"noData",null);D.__decorate([u.property({type:String,json:{read:{reader:a.noDataInterpretationKebab.read},write:{writer:a.noDataInterpretationKebab.write}}})],N.ExportImageServiceParameters.prototype,"noDataInterpretation",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"pixelType",void 0);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"lercVersion",void 0);D.__decorate([T.writer("lercVersion")],N.ExportImageServiceParameters.prototype,
"writeLercVersion",null);D.__decorate([u.property({type:Number})],N.ExportImageServiceParameters.prototype,"version",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"mosaicRule",null);D.__decorate([u.property({json:{write:!0}})],N.ExportImageServiceParameters.prototype,"renderingRule",null);N.ExportImageServiceParameters=D.__decorate([J.subclass("esri.layers.mixins.ExportImageServiceParameters")],N.ExportImageServiceParameters);Object.defineProperties(N,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ../../core/maybe ./RasterFunction ./rasterFunctionUtils ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),function(N,z,D,I,u,S,O,J){function T(e,b){for(const f in e)"raster"===f.toLowerCase()&&("RasterFunctionVariable"===e[f].type?(e[f]=b.rasterFunctionDefinition,
e[f].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===e[f].type&&T(e[f].arguments,b))}function p(e){const b=z.clone(u.schema[e.functionName+"Function"]);e=e.functionArguments;for(const f in e)"raster"===f.toLowerCase()?(b.arguments[f]=p(e[f]),b.arguments[f].type="RasterFunctionTemplate"):"colormap"===f.toLowerCase()?(b.arguments[f].value=r(e[f]),b.arguments.ColorSchemeType.value=0):b.arguments[f].value=e[f];return b}function l(e){const b=e?.Raster;return b&&"esri.layers.support.RasterFunction"===
b.declaredClass?l(b.functionArguments):e}function a(e,b){const f=new I;f.functionName="VectorFieldRenderer";const {dataType:t,bandProperties:x}=b,E="vector-uv"===t?!0:!1;let G,C;x&&2===x.length&&(G=x.map(q=>q.BandName.toLowerCase()).indexOf("magnitude"),C=x.map(q=>q.BandName.toLowerCase()).indexOf("direction"));if(-1===G||null===G)G=0,C=1;const F="arithmetic"===e.rotationType?1:2,w="flow-from"===e.flowRepresentation?0:1,H=e.visualVariables?e.visualVariables.find(q=>"Magnitude"===q.field):new J;e=
{magnitudeBandID:G,directionBandID:C,isUVComponents:E,referenceSystem:F,massFlowAngleRepresentation:w,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:m[e.style.toLowerCase().replace("-","_")],minimumMagnitude:H.minDataValue,maximumMagnitude:H.maxDataValue,minimumSymbolSize:H.minSize,maximumSymbolSize:H.maxSize};f.functionArguments=e;return b.convertToRFT?new I({rasterFunctionDefinition:p(f)}):f}function g(e,b){const f=b.convertToRFT,t=new I;t.functionName=
"Stretch";var x=y[O.stretchTypeJSONDict.toJSON(e.stretchType)],E=A(e.statistics);E={StretchType:x,Statistics:E,DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};null!=e.outputMin&&(E.Min=e.outputMin);null!=e.outputMax&&(E.Max=e.outputMax);x===y.standardDeviation?(E.NumberOfStandardDeviations=e.numberOfStandardDeviations,t.outputPixelType="u8"):x===y.percentClip?(E.MinPercent=e.minPercent,E.MaxPercent=e.maxPercent,t.outputPixelType="u8"):x===y.minMax?t.outputPixelType=
"u8":x===y.sigmoid&&(E.SigmoidStrengthLevel=e.sigmoidStrengthLevel);t.functionArguments=E;t.variableName="Raster";if(e.colorRamp){E=e.colorRamp;x=new I;if(f)x.functionArguments={ColorRamp:S.getRFxArgColorRampValue(E)};else{const G=S.getColorRampName(E);G?x.functionArguments={colorRamp:G}:!b.convertColorRampToColormap||"algorithmic"!==E.type&&"multipart"!==E.type?(e=e.colorRamp.toJSON(),"algorithmic"===e.type?e.algorithm=e.algorithm||"esriCIELabAlgorithm":"multipart"===e.type&&e.colorRamps?.length&&
e.colorRamps.forEach(C=>C.algorithm=C.algorithm||"esriCIELabAlgorithm"),x.functionArguments={colorRamp:e}):x.functionArguments={Colormap:S.convertColorRampToColormap(E,256)}}x.variableName="Raster";x.functionName="Colormap";x.functionArguments.Raster=t;return f?new I({rasterFunctionDefinition:p(x)}):x}return f?new I({rasterFunctionDefinition:p(t)}):t}function v(e,b){const f=[],t=[],x=[],E=[],{pixelType:G,rasterAttributeTable:C}=b,F=D.isNone(C)?null:C.features,w=n(C);if(F&&Array.isArray(F)&&e.classBreakInfos){e.classBreakInfos.forEach((R,
M)=>{const U=R.symbol.color;let V;U.a&&F.forEach(P=>{V=P.attributes[e.field];(V>=R.minValue&&V<R.maxValue||M===e.classBreakInfos.length-1&&V>=R.minValue)&&E.push([P.attributes[w],U.r,U.g,U.b])})});var H=G?d(E,G):E,q=new I;q.functionName="Colormap";q.functionArguments={};q.functionArguments.Colormap=H;q.variableName="Raster";return b.convertToRFT?new I({rasterFunctionDefinition:p(q)}):q}e.classBreakInfos.forEach((R,M)=>{const U=R.symbol&&R.symbol.color;U.a?(0===M?f.push(R.minValue,R.maxValue+1E-6):
f.push(R.minValue+1E-6,R.maxValue+1E-6),t.push(M),E.push([M,U.r,U.g,U.b])):x.push(R.minValue,R.maxValue)});H=G?d(E,G):E;q=new I;q.functionName="Remap";q.functionArguments={InputRanges:f,OutputValues:t,NoDataRanges:x};q.variableName="Raster";const B=new I;B.functionName="Colormap";B.functionArguments={Colormap:H,Raster:q};return b.convertToRFT?new I({rasterFunctionDefinition:p(B)}):B}function d(e,b){(b=c[String(b).toLowerCase()])&&e.push([Math.floor(b[0]-1),0,0,0],[Math.ceil(b[1]+1),0,0,0]);return e}
function n(e){if(!D.isNone(e))return{fields:e}=e,(e=e&&e.find(b=>b&&b.name&&"value"===b.name.toLowerCase()))&&e.name}function h(e,b){const f=[],{pixelType:t,rasterAttributeTable:x}=b;var E=D.isNone(x)?null:x.features;const G=n(x),C=e.defaultSymbol?.color?.toRgb();var F=e.uniqueValueInfos;if(F)if(E){const H=new Map;F.forEach(B=>{const R=B.value;B=B.symbol.color;null!=R&&B&&B.a&&H.set(String(R),B.toRgb())});const q=e.field;E.forEach(({attributes:B})=>{var R=String(B[q]);B=B[G];H.has(R)?(R=H.get(R),
f.push([B,...R])):C&&f.push([B,...C])})}else for(e=0;e<F.length;e++){var w=F[e];E=w.symbol.color;w=+w.value;if(E?.a){if(isNaN(w))return null;f.push([w,E.r,E.g,E.b])}}F=t&&0<f.length?d(f,t):f;e=new I;e.functionName="Colormap";e.functionArguments={};e.functionArguments.Colormap=F;e.variableName="Raster";return b.convertToRFT?new I({rasterFunctionDefinition:p(e)}):e}function A(e){const b=[];e.forEach(f=>{Array.isArray(f)?b.push(f):null!=f.min&&null!=f.max&&b.push([f.min,f.max,f.avg||0,f.stddev||0])});
return b}function r(e){const b=[],f=[];e.forEach(t=>{b.push(t[0]);f.push(S.rgbaConvertTo32Bit([...t.slice(1),255]))});return{type:"RasterColormap",values:b,colors:f}}const c={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},m={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},
k=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),y={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};N.combineRenderingRules=function(e,b){if(!e||!b)return z.clone(e||b);e=z.clone(e);if(b.rasterFunctionDefinition){const f=b.rasterFunctionDefinition;if(f.thumbnail||f.thumbnailEx)f.thumbnail=f.thumbnailEx=null;T(e.rasterFunctionDefinition.arguments,b)}else"none"!==b.functionName.toLowerCase()&&(l(e.functionArguments).Raster=
b);return e};N.convertRendererToRenderingRule=function(e,b){b=b||{};switch(e.type){case "raster-stretch":return g(e,b);case "class-breaks":return v(e,b);case "unique-value":return h(e,b);case "raster-colormap":var f=b;(b=e.extractColormap())&&0!==b.length?({pixelType:e}=f,e=e?d(b,e):b,b=new I,b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=e,e=f.convertToRFT?new I({rasterFunctionDefinition:p(b)}):b):e=void 0;return e;case "vector-field":return a(e,b);case "raster-shaded-relief":f=
b.convertToRFT;if("elevation"!==b.dataType&&("generic"!==b.dataType||1!==b.bandCount||"s16"!==b.pixelType&&"s32"!==b.pixelType&&"f32"!==b.pixelType&&"f64"!==b.pixelType))e=new I;else{b=new I;b.functionName="Hillshade";var t="traditional"===e.hillshadeType?0:1,x="none"===e.scalingType?1:3,E={HillshadeType:t,SlopeType:x,ZFactor:e.zFactor};0===t&&(E.Azimuth=e.azimuth,E.Altitude=e.altitude);3===x&&(E.PSPower=e.pixelSizePower,E.PSZFactor=e.pixelSizeFactor);b.functionArguments=E;b.variableName="Raster";
e.colorRamp&&(b.functionName="ShadedRelief",f?E.ColorRamp=S.getRFxArgColorRampValue(e.colorRamp):E.Colormap=S.convertColorRampToColormap(e.colorRamp,256));e=f?new I({rasterFunctionDefinition:p(b)}):b}return e;case "flow":throw Error("Unsupported rendering rule.");}};N.convertRenderingRuleToRFT=p;N.isSupportedRendererType=function(e){return k.has(e.type)};N.pixelTypeRanges=c;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(N,z,D,I,u,S,O,J,T,p){var l;const a=new Set(["raster","raster2","dem","fillraster"]),g=new Set(["rasters"]),v=A=>A&&A.rasterFunction?h.fromJSON(A):A,d=A=>A&&A instanceof h?A.toJSON():A,n=A=>A?.functionName&&!A.declaredClass?new h(A):A;let h=l=function(A){function r(m){m=A.call(this,m)||this;m.functionName=null;m.outputPixelType="unknown";m.variableName=null;m.rasterFunctionDefinition=null;return m}N._inheritsLoose(r,A);var c=r.prototype;c.readFunctionArguments=function(m){if(null==m)var k=
null;else{m=I.clone(m);var y={};for(k of Object.keys(m))a.has(k.toLowerCase())?y[k]=v(m[k]):g.has(k.toLowerCase())&&Array.isArray(m[k])?y[k]=m[k].map(v):y[k]=m[k];k=y}return k};c.writeFunctionArguments=function(m,k,y){const e={};for(const b of Object.keys(m))a.has(b.toLowerCase())?e[b]=d(m[b]):g.has(b.toLowerCase())&&Array.isArray(m[b])?e[b]=m[b].map(d):e[b]=d(m[b]);k[y]=e};c.readFunctionName=function(m,k){m=k.rasterFunctionInfos;const y=k.name;return y?y:m&&m.length&&"None"!==m[0].name?m[0].name:
k.rasterFunctionDefinition?k.rasterFunctionDefinition.name:k.rasterFunction};c.clone=function(){return new l({functionName:this.functionName,functionArguments:I.clone(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:I.clone(this.rasterFunctionDefinition)})};N._createClass(r,[{key:"functionArguments",set:function(m){if(m){const k=Object.keys(m);if(k.some(y=>{var e;if(e=a.has(y.toLowerCase()))y=m[y],e=y?.functionName&&!y.declaredClass;
return e})||k.some(y=>g.has(y.toLowerCase())&&Array.isArray(m[y])&&m[y].some(e=>e?.functionName&&!e.declaredClass))){m=I.clone(m);for(const y of k)a.has(y.toLowerCase())?m[y]=n(m[y]):g.has(y.toLowerCase())&&Array.isArray(m[y])&&(m[y]=m[y].map(e=>n(e)))}}this._set("functionArguments",m)}}]);return r}(D.JSONSupport);z.__decorate([u.property({json:{type:Object,name:"rasterFunctionArguments"}})],h.prototype,"functionArguments",null);z.__decorate([J.reader("functionArguments")],h.prototype,"readFunctionArguments",
null);z.__decorate([p.writer("functionArguments")],h.prototype,"writeFunctionArguments",null);z.__decorate([u.property({json:{type:String,write:{target:"rasterFunction"}}})],h.prototype,"functionName",void 0);z.__decorate([J.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],h.prototype,"readFunctionName",null);z.__decorate([O.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",
UNKNOWN:"unknown"},{ignoreUnknown:!1}),u.property({json:{default:"unknown"}})],h.prototype,"outputPixelType",void 0);z.__decorate([u.property({type:String,json:{read:!0,write:!0}})],h.prototype,"variableName",void 0);z.__decorate([u.property({type:Object,json:{name:"rasterFunctionDefinition"}})],h.prototype,"rasterFunctionDefinition",void 0);return h=l=z.__decorate([T.subclass("esri.layers.support.RasterFunction")],h)})},"esri/layers/support/rasterFunctionUtils":function(){define(["exports"],function(N){N.schema=
{StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},
Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,
name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",
pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,
type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",
name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,
value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},
arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,
value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",
isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},
arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,
value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",
pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},
functionType:0,thumbnail:""}};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g){var v;const d=D.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),n=D.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});D=v=function(h){function A(c){c=h.call(this,c)||this;c.ascending=!0;c.itemRenderingRule=
null;c.lockRasterIds=null;c.method=null;c.multidimensionalDefinition=null;c.objectIds=null;c.operation=null;c.sortField=null;c.sortValue=null;c.viewpoint=null;c.where=null;return c}N._inheritsLoose(A,h);var r=A.prototype;r.readAscending=function(c,m){return null!=m.ascending?m.ascending:null!=m.sortAscending?m.sortAscending:!0};r.readMethod=function(c,m){c=m.mosaicMethod||m.defaultMosaicMethod;switch(c?c.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":c="esriMosaicAttribute";
break;case "lockraster":c="esriMosaicLockRaster";break;case "center":c="esriMosaicCenter";break;case "northwest":c="esriMosaicNorthwest";break;case "nadir":c="esriMosaicNadir";break;case "viewpoint":c="esriMosaicViewpoint";break;case "seamline":c="esriMosaicSeamline";break;case "none":c="esriMosaicNone";break;default:c="esriMosaicNone"}return n.fromJSON(c)};r.readOperation=function(c,m){c=m.mosaicOperation;m=m.mosaicOperator&&m.mosaicOperator.toLowerCase();m=c||(m?d.toJSON(m):null);return d.fromJSON(m)||
"first"};r.castSortValue=function(c){return null==c||"string"===typeof c||"number"===typeof c?c:`${c}`};r.clone=function(){return new v({ascending:this.ascending,itemRenderingRule:u.clone(this.itemRenderingRule),lockRasterIds:u.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:u.clone(this.multidimensionalDefinition),objectIds:u.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:u.clone(this.viewpoint),where:this.where})};
return A}(I.JSONSupport);z.__decorate([S.property({type:Boolean,json:{write:!0}})],D.prototype,"ascending",void 0);z.__decorate([J.reader("ascending",["ascending","sortAscending"])],D.prototype,"readAscending",null);z.__decorate([S.property({type:g,json:{write:!0}})],D.prototype,"itemRenderingRule",void 0);z.__decorate([S.property({type:[p.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],D.prototype,"lockRasterIds",void 0);z.__decorate([S.property({type:String,
json:{type:n.jsonValues,write:{target:"mosaicMethod",writer:n.write}}})],D.prototype,"method",void 0);z.__decorate([J.reader("method",["mosaicMethod","defaultMosaicMethod"])],D.prototype,"readMethod",null);z.__decorate([S.property({type:[a],json:{write:!0}})],D.prototype,"multidimensionalDefinition",void 0);z.__decorate([S.property({type:[p.Integer],json:{name:"fids",write:!0}})],D.prototype,"objectIds",void 0);z.__decorate([S.property({json:{type:d.jsonValues,read:{reader:d.read},write:{target:"mosaicOperation",
writer:d.write}}})],D.prototype,"operation",void 0);z.__decorate([J.reader("operation",["mosaicOperation","mosaicOperator"])],D.prototype,"readOperation",null);z.__decorate([S.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],D.prototype,"sortField",void 0);z.__decorate([S.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],D.prototype,"sortValue",void 0);z.__decorate([O.cast("sortValue")],
D.prototype,"castSortValue",null);z.__decorate([S.property({type:l,json:{write:!0}})],D.prototype,"viewpoint",void 0);z.__decorate([S.property({type:String,json:{write:!0}})],D.prototype,"where",void 0);return D=v=z.__decorate([T.subclass("esri.layers.support.MosaicRule")],D)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(N,z){const D=z.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});
z=z.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});N.interpolationKebab=D;N.noDataInterpretationKebab=z;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g){var v;D={base:g,key:"type",typeMap:{extent:T,polygon:p}};I=v=function(d){function n(h){h=d.call(this,h)||this;h.areaOfInterest=null;h.subsetDefinitions=null;return h}N._inheritsLoose(n,d);n.prototype.clone=function(){const h=this.subsetDefinitions?.map(r=>r.clone()),A=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new v({areaOfInterest:A,subsetDefinitions:h})};N._createClass(n,[{key:"dimensions",get:function(){var {subsetDefinitions:h}=
this;if(null==h||0===h.length)return[];const A=new Map;h.forEach(r=>{if(r.dimensionName){if(Array.isArray(r.values[0])){var c=r.values;var m=c[0][0];c=c[r.values.length-1][1]}else c=r.values,m=c[0],c=c[r.values.length-1];A.has(r.dimensionName)?(r=A.get(r.dimensionName),r[0]=Math.min(m,r[0]),r[1]=Math.max(c,r[1])):A.set(r.dimensionName,[m,c])}});h=[];for(const r of A)h.push({name:r[0],extent:r[1]});return h}},{key:"variables",get:function(){const {subsetDefinitions:h}=this;if(null==h||0===h.length)return[];
const A=new Set;h.forEach(r=>{r.variableName&&A.add(r.variableName)});return[...A]}}]);return n}(I.JSONSupport);z.__decorate([u.property({types:D,json:{read:l.fromJSON,write:!0}})],I.prototype,"areaOfInterest",void 0);z.__decorate([u.property({readOnly:!0})],I.prototype,"dimensions",null);z.__decorate([u.property({readOnly:!0})],I.prototype,"variables",null);z.__decorate([u.property({type:[a],json:{write:!0}})],I.prototype,"subsetDefinitions",void 0);return I=v=z.__decorate([J.subclass("esri.layers.support.MultidimensionalSubset")],
I)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterStorageInfo".split(" "),function(N,z,D,I,u,S,O,J,T,p,l){var a;D=a=function(g){function v(d){d=g.call(this,d)||this;d.attributeTable=
null;d.bandCount=null;d.colormap=null;d.extent=null;d.format=void 0;d.height=null;d.width=null;d.histograms=null;d.keyProperties={};d.multidimensionalInfo=null;d.noDataValue=null;d.pixelSize=null;d.pixelType=null;d.isPseudoSpatialReference=!1;d.spatialReference=null;d.statistics=null;d.storageInfo=null;d.transform=null;return d}N._inheritsLoose(v,g);v.prototype.clone=function(){return new a({attributeTable:I.clone(this.attributeTable),bandCount:this.bandCount,colormap:I.clone(this.colormap),extent:I.clone(this.extent),
nativePixelSize:I.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:I.clone(this.histograms),keyProperties:I.clone(this.keyProperties),multidimensionalInfo:I.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:I.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:I.clone(this.spatialReference),statistics:I.clone(this.statistics),storageInfo:I.clone(this.storageInfo),transform:I.clone(this.transform)})};
N._createClass(v,[{key:"dataType",get:function(){const d=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===d?"standard-time":d}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(d){d&&this._set("nativeExtent",d)}},{key:"nativePixelSize",get:function(){if(u.isNone(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const d=this.nativeExtent;return{x:d.width/this.width,y:d.height/this.height}}},{key:"hasMultidimensionalTranspose",
get:function(){return!!this.storageInfo?.transposeInfo}}]);return v}(D.JSONSupport);z.__decorate([S.property({json:{write:!0}})],D.prototype,"attributeTable",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"bandCount",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"colormap",void 0);z.__decorate([S.property({type:String,readOnly:!0})],D.prototype,"dataType",null);z.__decorate([S.property({type:T,json:{write:!0}})],D.prototype,"extent",void 0);z.__decorate([S.property({type:T,
json:{write:!0}})],D.prototype,"nativeExtent",null);z.__decorate([S.property({json:{write:!0}})],D.prototype,"nativePixelSize",null);z.__decorate([S.property({json:{write:!0}})],D.prototype,"format",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"height",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"width",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"hasMultidimensionalTranspose",null);z.__decorate([S.property({json:{write:!0}})],D.prototype,
"histograms",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"keyProperties",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"multidimensionalInfo",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"noDataValue",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"pixelSize",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"pixelType",void 0);z.__decorate([S.property()],D.prototype,"isPseudoSpatialReference",void 0);z.__decorate([S.property({type:p,
json:{write:!0}})],D.prototype,"spatialReference",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"statistics",void 0);z.__decorate([S.property({type:l,json:{write:!0}})],D.prototype,"storageInfo",void 0);z.__decorate([S.property({json:{write:!0}})],D.prototype,"transform",void 0);return D=a=z.__decorate([J.subclass("esri.layers.support.RasterInfo")],D)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(N,z,D,I,u,S,O,J){var T;D=T=function(p){function l(){var a=p.apply(this,arguments)||this;a.blockWidth=void 0;a.blockHeight=void 0;a.compression=null;a.origin=null;a.firstPyramidLevel=null;a.maximumPyramidLevel=null;a.pyramidScalingFactor=2;a.pyramidBlockWidth=null;a.pyramidBlockHeight=null;a.isVirtualTileInfo=!1;a.tileInfo=null;a.transposeInfo=null;a.blockBoundary=null;return a}N._inheritsLoose(l,p);l.prototype.clone=function(){return new T({blockWidth:this.blockWidth,blockHeight:this.blockHeight,
compression:this.compression,origin:I.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:I.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:I.clone(this.tileInfo),transposeInfo:I.clone(this.transposeInfo),blockBoundary:I.clone(this.blockBoundary)})};return l}(D.JSONSupport);
z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"blockWidth",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"blockHeight",void 0);z.__decorate([u.property({type:String,json:{write:!0}})],D.prototype,"compression",void 0);z.__decorate([u.property({type:J,json:{write:!0}})],D.prototype,"origin",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"firstPyramidLevel",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],
D.prototype,"maximumPyramidLevel",void 0);z.__decorate([u.property({json:{write:!0}})],D.prototype,"pyramidResolutions",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"pyramidScalingFactor",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"pyramidBlockWidth",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"pyramidBlockHeight",void 0);z.__decorate([u.property({type:Boolean,json:{write:!0}})],D.prototype,"isVirtualTileInfo",
void 0);z.__decorate([u.property({json:{write:!0}})],D.prototype,"tileInfo",void 0);z.__decorate([u.property()],D.prototype,"transposeInfo",void 0);z.__decorate([u.property()],D.prototype,"blockBoundary",void 0);return D=T=z.__decorate([O.subclass("esri.layers.support.RasterStorageInfo")],D)})},"esri/layers/support/RasterJobHandler":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/Error","../../core/maybe","../../core/workers/workers","./PixelBlock"],function(N,z,D,I,u){return function(){function S(){this._workerThread=
null;this._destroyed=!1}var O=S.prototype;O.initialize=function(){var J=N._asyncToGenerator(function*(){const T=yield I.open("RasterWorker");this._destroyed?T.close():this._workerThread=T});return function(){return J.apply(this,arguments)}}();O.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};O.convertVectorFieldData=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection",
"no available worker connection");return(T=yield this._workerThread.invoke("convertVectorFieldData",{pixelBlock:T.pixelBlock.toJSON(),type:T.dataType},p))?new u(T):null});return function(T,p){return J.apply(this,arguments)}}();O.decode=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");return(T=yield this._workerThread.invoke("decode",T,p))?new u(T):null});return function(T,p){return J.apply(this,
arguments)}}();O.symbolize=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");T={extent:T.extent&&T.extent.toJSON(),pixelBlock:D.isSome(T.pixelBlock)&&T.pixelBlock.toJSON(),simpleStretchParams:T.simpleStretchParams,bandIds:T.bandIds};return(p=yield this._workerThread.invoke("symbolize",T,p))?new u(p):null});return function(T,p){return J.apply(this,arguments)}}();O.updateSymbolizer=function(){var J=
N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const l=T?.rendererJSON?.histograms;yield Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:T.toJSON(),histograms:l},p))});return function(T,p){return J.apply(this,arguments)}}();O.updateRasterFunction=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");
yield Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:T.toJSON()},p))});return function(T,p){return J.apply(this,arguments)}}();O.process=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");return(T=yield this._workerThread.invoke("process",{extent:T.extent?.toJSON(),primaryPixelBlocks:T.primaryPixelBlocks.map(l=>D.isSome(l)?l.toJSON():null),primaryRasterIds:T.primaryRasterIds},
p))?new u(T):null});return function(T,p){return J.apply(this,arguments)}}();O.stretch=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(!T?.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON(),stretchParams:T.stretchParams};return(p=yield this._workerThread.invoke("stretch",T,p))?new u(p):null});return function(T,p){return J.apply(this,arguments)}}();O.split=function(){var J=N._asyncToGenerator(function*(T,
p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(!T?.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON(),tileSize:T.tileSize,maximumPyramidLevel:T.maximumPyramidLevel};const l=yield this._workerThread.invoke("split",T,p);l&&l.forEach((a,g)=>{l.set(g,a?u.fromJSON(a):null)});return l});return function(T,p){return J.apply(this,arguments)}}();O.estimateStatisticsHistograms=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection",
"no available worker connection");if(!T?.pixelBlock)return null;T={srcPixelBlock:T.pixelBlock.toJSON()};return yield this._workerThread.invoke("estimateStatisticsHistograms",T,p)});return function(T,p){return J.apply(this,arguments)}}();O.mosaicAndTransform=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");if(!T?.srcPixelBlocks?.length)return{pixelBlock:null};T={...T,srcPixelBlocks:T.srcPixelBlocks.map(l=>
D.isSome(l)?l.toJSON():null)};p=yield this._workerThread.invoke("mosaicAndTransform",T,p);return{pixelBlock:p.pixelBlock?new u(p.pixelBlock):null,localNorthDirections:p.localNorthDirections}});return function(T,p){return J.apply(this,arguments)}}();O.createFlowMesh=function(){var J=N._asyncToGenerator(function*(T,p){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const l={buffer:T.flowData.data.buffer,maskBuffer:T.flowData.mask.buffer,width:T.flowData.width,
height:T.flowData.height},{meshType:a,simulationSettings:g}=T;T=yield this._workerThread.invoke("createFlowMesh",{meshType:a,flowData:l,simulationSettings:g},{...p,transferList:[l.buffer,l.maskBuffer]});return{vertexData:new Float32Array(T.vertexBuffer),indexData:new Uint32Array(T.indexBuffer)}});return function(T,p){return J.apply(this,arguments)}}();O.getProjectionOffsetGrid=function(J,T){if(!this._workerThread)throw new z("raster-jobhandler:no-connection","no available worker connection");const p=
D.isSome(J.datumTransformation)?J.datumTransformation.steps.map(a=>({wkid:a.wkid,wkt:a.wkt,isInverse:a.isInverse})):null,l=D.isSome(J.rasterTransform)?J.rasterTransform.toJSON():null;J={projectedExtent:J.projectedExtent.toJSON(),srcBufferExtent:J.srcBufferExtent.toJSON(),pixelSize:J.pixelSize,hasWrapAround:J.hasWrapAround,spacing:J.spacing,datumTransformationSteps:p,rasterTransform:l,isAdaptive:J.isAdaptive,includeGCSGrid:J.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",
J,T)};return S}()})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/maybe","../DimensionalDefinition"],function(N,z,D){function I(l,a,g){const v=a.shift();0===g.length&&g.push({sliceId:-1,multidimensionalDefinition:[]});const d=g.length;for(let n=0;n<d;n++){const h=g.shift().multidimensionalDefinition;v.values?.forEach(A=>{g.push({sliceId:-1,multidimensionalDefinition:[...h,{variableName:l,dimensionName:v.name,values:[A]}]})})}a.length&&I(l,
a,g)}function u(l,a){return Array.isArray(l)?a[0]===a[1]?l[0]===a[0]||l[1]===a[0]:l[0]>=a[0]&&l[0]<=a[1]&&l[1]>=a[0]&&l[1]<=a[1]:l>=a[0]&&l<=a[1]}function S(l,a){return l[0]<=a[0]&&l[1]>=a[0]||l[0]<=a[1]&&l[1]>=a[1]||l[0]>=a[0]&&l[1]<=a[1]}function O(l){return 1===l.length?[l[0],l[0]]:[l[0],l[l.length-1]]}function J(l,a,g){if(!a?.subsetDefinitions?.length)return l;if(g){const {variables:d}=a;if(d.length&&!d.includes(g))return null;a=a.subsetDefinitions.find(n=>n.dimensionName===l.name&&n.variableName===
g);if(!a?.values?.length)return l;a=O(a.values)}else a=a.dimensions.find(({name:d})=>d===l.name)?.extent;const v=a;if(!v||!v?.length)return l;a=l.values.filter(d=>u(d,v));return{...l,extent:[...v],values:a}}function T(l,a){var {values:g}=a;if(g?.length)return Array.isArray(g[0])!==Array.isArray(l)?-1:Array.isArray(g[0])?g.findIndex(n=>n[0]===l[0]&&n[1]===l[1]):g.indexOf(l);var {extent:v}=a;if(Array.isArray(l)||l<v[0]||l>v[1])return-1;g=a.interval||1;if("ISO8601"!==a.unit)return Math.round((l-v[0])/
g);v=v[0];let d=-1;switch(a.intervalUnit?.toLowerCase()||"seconds"){case "seconds":d=Math.round((l-v)/1E3/g);break;case "minutes":d=Math.round((l-v)/6E4/g);break;case "hours":d=Math.round((l-v)/36E5/g);break;case "days":d=Math.round((l-v)/864E5/g);break;case "months":a=(new Date(l)).getUTCFullYear()-(new Date(v)).getUTCFullYear();g=(new Date(v)).getUTCMonth();v=(new Date(l)).getUTCMonth();d=0===a?v-g:v+11-g+12*(a-1);break;case "years":d=Math.round(((new Date(l)).getUTCFullYear()-(new Date(v)).getUTCFullYear())/
g);break;case "decades":d=Math.round(((new Date(l)).getUTCFullYear()-(new Date(v)).getUTCFullYear())/10/g)}return d}function p(l){var a=l.values?.length;if(a)return a;const {extent:g,unit:v}=l;a=l.interval||1;var d=g?g[1]-g[0]:0;if("ISO8601"!==v)return Math.round(d/a);switch(l.intervalUnit?.toLowerCase()??"seconds"){case "seconds":a=Math.round(d/1E3/a);break;case "minutes":a=Math.round(d/6E4/a);break;case "hours":a=Math.round(d/36E5/a);break;case "days":a=Math.round(d/864E5/a);break;case "months":l=
(new Date(g[1])).getUTCFullYear()-(new Date(g[0])).getUTCFullYear();a=(new Date(g[1][0])).getUTCMonth();d=(new Date(g[1][1])).getUTCMonth();a=0===l?d-a+1:d+11-a+12*(l-1)+1;break;case "years":a=Math.round(((new Date(g[1])).getUTCFullYear()-(new Date(g[0])).getUTCFullYear())/a);break;case "decades":a=Math.round(((new Date(g[1])).getUTCFullYear()-(new Date(g[0])).getUTCFullYear())/10/a);break;default:a=0}return a}N.createSlices=function(l,a){const g=[];let v=0;(a?l.variables.filter(d=>d.name.toLowerCase()===
a.toLowerCase()):[...l.variables].sort((d,n)=>d.name>n.name?1:-1)).forEach(d=>{const n=[],h=[...d.dimensions].sort((A,r)=>A.name>r.name?-1:1);I(d.name,h,n);n.forEach(A=>{g.push({...A,sliceId:v++})})});return g};N.getDefaultMultidimensionalDefinition=function(l,a={}){const {multidimensionalInfo:g,keyProperties:v}=l;if(z.isNone(g))return null;const d=a.variableName||v?.DefaultVariable;({variables:l}=g);const {multidimensionalSubset:n}=a;n?.variables?.length&&(l=l.filter(({name:c})=>n.variables.includes(c)));
var h=d?l.find(({name:c})=>c===d)??l[0]:l[0];if(!h)return null;l=[];const {dimensions:A,name:r}=h;if(0===A.length)return[new D({variableName:r,dimensionName:"",values:[],isSlice:!0})];for(h=0;h<A.length;h++){const c=J(A[h],n,r);if(!c)return null;const {values:m,extent:k}=c;let y=m?.[0]??k[0];"stdz"===c.name.toLowerCase()&&!c.hasRanges&&Math.abs(k[1])<=Math.abs(k[0])&&(y=m?.length?m[m.length-1]:k[1]);l.push(new D({variableName:r,dimensionName:c.name,values:[y],isSlice:a.useRangeForRangedDimensionInfo?
!!c.hasRanges:!0}))}return l};N.getSliceIds=function(l,a,g){let v=l;a&&(a=[...a].sort((d,n)=>d.dimensionName<n.dimensionName?-1:1),a.forEach(({dimensionName:d,values:n,isSlice:h})=>{n.length&&(v=v.filter(A=>{A=A.multidimensionalDefinition.find(c=>c.dimensionName===d);if(null==A)return!1;const r=A.values[0];return"number"===typeof r?"number"===typeof n[0]?n.includes(r):n.some(c=>c[0]<=r&&c[1]>=r):"number"===typeof n[0]?n.some(c=>r[0]<=c&&r[1]>=c):h?n.some(c=>c[0]===r[0]&&c[0]===r[1]):n.some(c=>c[0]>=
r[0]&&c[0]<=r[1]||c[1]>=r[0]&&c[1]<=r[1]||c[0]<r[0]&&c[1]>r[1])}))}));if(v.length&&g&&z.isSome(g.start)&&z.isSome(g.end)){const d=g.start.getTime(),n=g.end.getTime(),h=v[0].multidimensionalDefinition.findIndex(A=>"StdTime"===A.dimensionName);-1<h&&(v=v.filter(A=>{A=A.multidimensionalDefinition[h].values[0];return d<=A&&n>=A}))}return v.map(d=>d.sliceId)};N.getSliceIndex=function(l,a){let g=0;var v=l[0].variableName;a=[...a.variables].sort((n,h)=>n.name>h.name?1:-1);for(var d=0;d<a.length;d++){const n=
a[d],h=[...n.dimensions].sort((A,r)=>A.name>r.name?-1:1);if(n.name!==v)g+=h.map(A=>p(A)).reduce((A,r)=>A*r);else{v=h.map(A=>p(A));a=h.length;for(let A=0;A<a;A++){d=l.find(r=>r.dimensionName===h[A].name);if(null==d)return null;d=T(d.values[0],h[A]);if(-1===d)return null;v.shift();g=A===a-1?g+d:g+d*v.reduce((r,c)=>r*c)}break}}return g};N.getSubsetVariablesFromMdInfo=function(l,a){if(z.isNone(a)||z.isNone(l))return null;a=a.variables.map(g=>({...g}));l?.variables?.length&&(a=a.filter(({name:g})=>l.variables.includes(g)),
a.forEach(g=>{g.dimensions=g.dimensions.map(v=>J(v,l,g.name))}));return a};N.hasExcludedVariableOrDimension=function(l,a,g){if(!a?.subsetDefinitions?.length)return!1;const {variables:v}=a;if(v.length&&l.some(({variableName:d})=>d&&!v.includes(d)))return!0;for(let d=0;d<l.length;d++){const n=l[d],h=a.subsetDefinitions.find(A=>(""===n.variableName||A.variableName===n.variableName)&&A.dimensionName===n.dimensionName);if(h?.values.length){const A=O(h.values);if(!n.isSlice&&2===n.values.length&&!Array.isArray(n.values[0])&&
n.values[0]!==n.values[1]&&g){if(!S(n.values,A))return!0}else if(n.values.some(r=>!u(r,A)))return!0}}return!1};N.isMultiSliceOrRangeDefinition=function(l){return z.isNone(l)||!l.length?!1:l.some(a=>{if(null==a.values)return!0;const g=a.values.length;return 0===g||1<g||!a.isSlice&&Array.isArray(a.values[0])})};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g){function v(w,H){return d.apply(this,arguments)}function d(){d=z._asyncToGenerator(function*(w,H){if(!g.isPlatformLittleEndian)throw new D("rasterCoded:decode","lerc decoder is not supported on big endian platform");yield J.load();const {offset:q,noDataValue:B}=H,{width:R,height:M,pixelType:U,statistics:V,pixels:P,mask:X}=J.decode(w,{inputOffset:q,noDataValue:B,returnInterleaved:H.returnInterleaved});return new u({width:R,height:M,pixelType:U.toLowerCase(),pixels:P,
mask:X,statistics:V})});return d.apply(this,arguments)}function n(w,H){return h.apply(this,arguments)}function h(){h=z._asyncToGenerator(function*(w,H){w=yield a.decode(w,H);I.assertIsSome(w);w=new u({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,statistics:null});w.updateStatistics();return w});return h.apply(this,arguments)}function A(w,H){return r.apply(this,arguments)}function r(){r=z._asyncToGenerator(function*(w,H){w=yield a.decodeTileOrStrip(w,
H.customOptions);w=new u({width:w.width,height:w.height,pixels:w.pixels,pixelType:w.pixelType.toLowerCase(),mask:w.mask,statistics:null});w.updateStatistics();return w});return r.apply(this,arguments)}function c(w,H){const q=H.pixelType||"u8",B=u.getPixelArrayConstructor(q),R="u8"===q?w:new B(w.buffer),M=[],U=H.planes||1;if(1===U)M.push(R);else for(let V=0;V<U;V++){const P=(H.width||1)*(H.height||w.length),X=new B(P);for(let Z=0;Z<P;Z++)X[Z]=R[Z*U+V];M.push(X)}w=new u({width:H.width||1,height:H.height||
w.length,pixels:M,pixelType:q,statistics:null});w.updateStatistics();return w}function m(w,H){w=(new p.Zlib(new Uint8Array(w))).getBytes();return c(w,H)}function k(w,H){w=T.decode(w,H.offset,H.eof,!H.isInputBigEndian);return c(w,H)}function y(w,H){w=O.decode(w,H.hasNoZlibMask??void 0);w=new u({width:w.width,height:w.height,pixels:w.pixels,pixelType:"U8",mask:w.mask,statistics:null});w.updateStatistics();return w}function e(w,H){w=new Uint8Array(w);w=new C(w);const {width:q,height:B}=H;H=q*B;w=w.decode();
let R=0;var M=0;let U;M=new Uint8Array(H);for(R=0;R<H;R++)M[R]=w[4*R+3];const V=new u({width:q,height:B,pixels:[],pixelType:"U8",mask:M,statistics:[]});for(R=0;3>R;R++){U=new Uint8Array(H);for(M=0;M<H;M++)U[M]=w[4*M+R];V.addData({pixels:U})}V.updateStatistics();return V}function b(w,H,q,B){return f.apply(this,arguments)}function f(){f=z._asyncToGenerator(function*(w,H,q,B){w=yield(new S).decode(w,{applyJpegMask:!1,format:H,...q},B);w=new u(w);w.updateStatistics();return w});return f.apply(this,arguments)}
function t(w){if(null==w)throw new D("rasterCodec:decode","parameter encodeddata is required.");w=new Uint8Array(w,0,10);let H="";255===w[0]&&216===w[1]?H="jpg":137===w[0]&&80===w[1]&&78===w[2]&&71===w[3]?H="png":67===w[0]&&110===w[1]&&116===w[2]&&90===w[3]&&73===w[4]&&109===w[5]&&97===w[6]&&103===w[7]&&101===w[8]&&32===w[9]?H="lerc":76===w[0]&&101===w[1]&&114===w[2]&&99===w[3]&&50===w[4]&&32===w[5]?H="lerc2":73===w[0]&&73===w[1]&&42===w[2]&&0===w[3]||77===w[0]&&77===w[1]&&0===w[2]&&42===w[3]||73===
w[0]&&73===w[1]&&43===w[2]&&0===w[3]||77===w[0]&&77===w[1]&&0===w[2]&&43===w[3]?H="tiff":71===w[0]&&73===w[1]&&70===w[2]?H="gif":66===w[0]&&77===w[1]?H="bmp":String.fromCharCode.apply(null,w).toLowerCase().includes("error")&&(H="error");return H}function x(w){let H=null;switch(w){case "lerc":case "lerc2":H=v;break;case "jpg":H=y;break;case "png":H=e;break;case "bsq":case "bip":H=(q,B)=>{var R=B.pixelType,M=null;let U=null;switch(R?R.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":U=255;
M=Uint8Array;break;case "u16":U=U||65535;M=Uint16Array;break;case "u32":U=U||2**32-1;M=Uint32Array;break;case "s8":U=U||-128;M=Int8Array;break;case "s16":U=U||-32768;M=Int16Array;break;case "s32":U=U||-(2**31);M=Int32Array;break;default:M=Float32Array}({pixelTypeCtor:R}={pixelTypeCtor:M,noDataValue:U});M=l.decode;q=M(q,{width:B.width,height:B.height,pixelType:R,format:w});B=new u({width:B.width,height:B.height,pixels:q.pixels,pixelType:B.pixelType,mask:q.mask,statistics:null});B.updateStatistics();
return B};break;case "tiff":H=n;break;case "deflate":H=m;break;case "lzw":H=k;break;case "error":H=()=>{throw new D("rasterCodec:decode","input data contains error");};break;default:H=()=>{throw new D("rasterCodec:decode","unsupported raster format");}}return H}function E(w,H=1){if(w){var {pixels:q,width:B,height:R,mask:M}=w;if(q&&0!==q.length){var U=q.length,V=B-1,P=R-1,X=[],Z,ba,da=null,aa=u.getPixelArrayConstructor(w.pixelType);if(0===H){for(H=0;H<U;H++){var Q=q[H];var W=new aa(V*P);for(Z=0;Z<
P;Z++){var Y=Z*B;for(ba=0;ba<V;ba++)W[Z*V+ba]=Q[Y+ba]}X.push(W)}if(I.isSome(M))for(da=new Uint8Array(V*P),Z=0;Z<P;Z++)for(Y=Z*B,ba=0;ba<V;ba++)da[Z*V+ba]=M[Y+ba]}else{for(H=0;H<U;H++){Q=q[H];W=new aa(V*P);for(Z=0;Z<P;Z++)for(Y=Z*B,ba=0;ba<V;ba++)W[Z*V+ba]=(Q[Y+ba]+Q[Y+ba+1]+Q[Y+B+ba]+Q[Y+B+ba+1])/4;X.push(W)}if(M)for(da=new Uint8Array(V*P),Z=0;Z<P;Z++)for(Y=Z*B,ba=0;ba<V;ba++)da[Z*V+ba]=Math.min.apply(null,[M[Y+ba],M[Y+ba+1],M[Y+B+ba],M[Y+B+ba+1]])}w.width=V;w.height=P;w.mask=da;w.pixels=X}}}function G(){G=
z._asyncToGenerator(function*(w,H={},q){if(null==w)throw new D("rasterCodec:decode","missing encodeddata parameter.");let B=H.format&&H.format.toLowerCase();if(!("bsq"!==B&&"bip"!==B||null!=H.width&&null!=H.height))throw new D("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===B&&H.customOptions)return A(w,H);if(!B||"bsq"!==B&&"bip"!==B&&"deflate"!==B&&"lzw"!==B)B=t(w);H.useCanvas&&F.has(B)?w=yield b(w,B,H,q):(q=x(B),H.isPoint&&(H={...H},null!=H.width&&H.width++,null!=
H.height&&H.height++),w=yield q(w,H),H.isPoint&&E(w));return w});return G.apply(this,arguments)}var C=function(w){function H(M){var U,V;this.data=M;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(V=null;;){var P=this.readUInt32();var X=M=void 0;M=[];for(X=0;4>X;++X)M.push(String.fromCharCode(this.data[this.pos++]));M=M.join("");switch(M){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=
this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(P);break;case "fcTL":V&&this.animation.frames.push(V);this.pos+=4;V={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};M=this.readUInt16();P=this.readUInt16()||
100;V.delay=1E3*M/P;V.disposeOp=this.data[this.pos++];V.blendOp=this.data[this.pos++];V.data=[];break;case "IDAT":case "fdAT":"fdAT"===M&&(this.pos+=4,P-=4);M=(null!=V?V.data:void 0)||this.imgData;for(X=0;0<=P?X<P:X>P;0<=P?++X:--X)M.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(P);P=255-this.transparency.indexed.length;if(0<P)for(M=0;0<=P?M<P:M>P;0<=P?++M:--M)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=
this.read(P)[0];break;case 2:this.transparency.rgb=this.read(P)}break;case "tEXt":X=this.read(P);P=X.indexOf(0);M=String.fromCharCode.apply(String,X.slice(0,P));this.text[M]=String.fromCharCode.apply(String,X.slice(P+1));break;case "IEND":V&&this.animation.frames.push(V);a:{switch(this.colorType){case 0:case 3:case 4:V=1;break a;case 2:case 6:V=3;break a}V=void 0}this.colors=V;this.hasAlphaChannel=4===(U=this.colorType)||6===U;U=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*
U;a:{switch(this.colors){case 1:U="DeviceGray";break a;case 3:U="DeviceRGB";break a}U=void 0}this.colorSpace=U;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=P}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var q;H.load=function(M,U,V){"function"===typeof U&&(V=U);var P=new XMLHttpRequest;P.open("GET",M,!0);P.responseType="arraybuffer";P.onload=function(){var X=new Uint8Array(P.response||P.mozResponseArrayBuffer);X=new H(X);"function"===
typeof(null!=U?U.getContext:void 0)&&X.render(U);return"function"===typeof V?V(X):void 0};return P.send(null)};H.prototype.read=function(M){var U;var V=[];for(U=0;0<=M?U<M:U>M;0<=M?++U:--U)V.push(this.data[this.pos++]);return V};H.prototype.readUInt32=function(){var M=this.data[this.pos++]<<24;var U=this.data[this.pos++]<<16;var V=this.data[this.pos++]<<8;var P=this.data[this.pos++];return M|U|V|P};H.prototype.readUInt16=function(){var M=this.data[this.pos++]<<8;var U=this.data[this.pos++];return M|
U};H.prototype.decodePixels=function(M){var U,V,P,X,Z,ba,da,aa;null==M&&(M=this.imgData);if(0===M.length)return new Uint8Array(0);M=new p.Zlib(M);M=M.getBytes();var Q=this.pixelBitlength/8;var W=Q*this.width;var Y=new Uint8Array(W*this.height);var ea=M.length;for(V=X=Z=0;X<ea;){switch(M[X++]){case 0:for(P=U=0;U<W;P=U+=1)Y[V++]=M[X++];break;case 1:for(P=ba=0;ba<W;P=ba+=1){U=M[X++];var fa=P<Q?0:Y[V-Q];Y[V++]=(U+fa)%256}break;case 2:for(P=fa=0;fa<W;P=fa+=1){U=M[X++];var ha=(P-P%Q)/Q;ba=Z&&Y[(Z-1)*W+
ha*Q+P%Q];Y[V++]=(ba+U)%256}break;case 3:for(P=aa=0;aa<W;P=aa+=1)U=M[X++],ha=(P-P%Q)/Q,fa=P<Q?0:Y[V-Q],ba=Z&&Y[(Z-1)*W+ha*Q+P%Q],Y[V++]=(U+Math.floor((fa+ba)/2))%256;break;case 4:for(P=aa=0;aa<W;P=aa+=1){U=M[X++];ha=(P-P%Q)/Q;fa=P<Q?0:Y[V-Q];0===Z?ba=da=0:(ba=Y[(Z-1)*W+ha*Q+P%Q],da=ha&&Y[(Z-1)*W+(ha-1)*Q+P%Q]);var ka=fa+ba-da;P=Math.abs(ka-fa);ha=Math.abs(ka-ba);ka=Math.abs(ka-da);fa=P<=ha&&P<=ka?fa:ha<=ka?ba:da;Y[V++]=(U+fa)%256}break;default:throw Error("Invalid filter algorithm: "+M[X-1]);}Z++}return Y};
H.prototype.decodePalette=function(){var M,U,V,P;var X=this.palette;var Z=this.transparency.indexed||[];var ba=new Uint8Array((Z.length||0)+X.length);var da=0;X.length;var aa=U=M=0;for(V=X.length;U<V;aa=U+=3)ba[da++]=X[aa],ba[da++]=X[aa+1],ba[da++]=X[aa+2],ba[da++]=null!=(P=Z[M++])?P:255;return ba};H.prototype.copyToImageData=function(M,U){var V,P;var X=this.colors;var Z=null;var ba=this.hasAlphaChannel;this.palette.length&&(Z=null!=(V=this._decodedPalette)?V:this._decodedPalette=this.decodePalette(),
X=4,ba=!0);M=M.data||M;var da=M.length;var aa=Z||U;V=P=0;if(1===X)for(;V<da;)X=Z?4*U[V/4]:P,P=aa[X++],M[V++]=P,M[V++]=P,M[V++]=P,M[V++]=ba?aa[X++]:this.transparency.grayscale&&this.transparency.grayscale===P?0:255,P=X;else for(;V<da;)X=Z?4*U[V/4]:P,M[V++]=aa[X++],M[V++]=aa[X++],M[V++]=aa[X++],M[V++]=ba?aa[X++]:this.transparency.rgb&&this.transparency.rgb[1]===aa[X-3]&&this.transparency.rgb[3]===aa[X-2]&&this.transparency.rgb[5]===aa[X-1]?0:255,P=X};H.prototype.decode=function(){var M=new Uint8Array(this.width*
this.height*4);this.copyToImageData(M,this.decodePixels());return M};var B=(q=w.document&&w.document.createElement("canvas"))&&q.getContext("2d");var R=function(M){B.width=M.width;B.height=M.height;B.clearRect(0,0,M.width,M.height);B.putImageData(M,0,0);M=new Image;M.src=q.toDataURL();return M};H.prototype.decodeFrames=function(M){var U,V;if(this.animation){var P=this.animation.frames;var X=[];var Z=U=0;for(V=P.length;U<V;Z=++U){Z=P[Z];var ba=M.createImageData(Z.width,Z.height);var da=this.decodePixels(new Uint8Array(Z.data));
this.copyToImageData(ba,da);Z.imageData=ba;X.push(Z.image=R(ba))}return X}};H.prototype.renderFrame=function(M,U){var V=this.animation.frames;var P=V[U];V=V[U-1];0===U&&M.clearRect(0,0,this.width,this.height);1===(null!=V?V.disposeOp:void 0)?M.clearRect(V.xOffset,V.yOffset,V.width,V.height):2===(null!=V?V.disposeOp:void 0)&&M.putImageData(V.imageData,V.xOffset,V.yOffset);0===P.blendOp&&M.clearRect(P.xOffset,P.yOffset,P.width,P.height);return M.drawImage(P.image,P.xOffset,P.yOffset)};H.prototype.animate=
function(M){var U,V=this;var P=0;var X=this.animation;var Z=X.numFrames;var ba=X.frames;var da=X.numPlays;return(U=function(){var aa=P++%Z;var Q=ba[aa];V.renderFrame(M,aa);if(1<Z&&P/Z<da)return V.animation._timeout=setTimeout(U,Q.delay)})()};H.prototype.stopAnimation=function(){var M;return clearTimeout(null!=(M=this.animation)?M._timeout:void 0)};H.prototype.render=function(M){M._png&&M._png.stopAnimation();M._png=this;M.width=this.width;M.height=this.height;M=M.getContext("2d");if(this.animation)return this.decodeFrames(M),
this.animate(M);var U=M.createImageData(this.width,this.height);this.copyToImageData(U,this.decodePixels());return M.putImageData(U,0,0)};return H}(self);const F=new Set(["jpg","png","bmp","gif"]);N.decode=function(w){return G.apply(this,arguments)};N.getFormat=function(w){w=t(w);"lerc2"===w?w="lerc":"error"===w&&(w="");return w};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error",
"../../../core/promiseUtils","../../../chunks/Zlib"],function(N,z,D){return function(){function I(u){this._ctx=this._canvas=null;u&&(this._canvas=u.canvas,this._ctx=u.ctx||u.canvas&&u.canvas.getContext("2d"))}I.prototype.decode=function(u,S,O){if(!u||10>u.byteLength)throw new N("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:J=0,height:T=0,format:p}=S;const {applyJpegMask:l}=S;if(l&&(!J||!T))throw new N("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");
return new Promise((a,g)=>{let v=null;"jpg"===p&&l&&(v=I._getMask(u,{width:J,height:T}));const d=new Blob([new Uint8Array(u)],{type:"jpg"==="image/"+p?"jpeg":p}),n=URL.createObjectURL(d),h=new Image;let A;h.src=n;h.onload=()=>{URL.revokeObjectURL(n);if(z.isAborted(O))g(z.createAbortError());else{J=h.width;T=h.height;if(this._canvas&&this._ctx){if(this._canvas.width!==J||this._canvas.height!==T)this._canvas.width=J,this._canvas.height=T;this._ctx.clearRect(0,0,J,T)}else this._canvas=document.createElement("canvas"),
this._canvas.width=J,this._canvas.height=T,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(h,0,0);var r=this._ctx.getImageData(0,0,J,T);A=r.data;var c;if(S.renderOnCanvas){if(v)for(c=0;c<v.length;c++)A[4*c+3]=v[c]?255:0;this._ctx.putImageData(r,0,0);a(null)}else{r=J*T;var m=new Uint8Array(r),k=new Uint8Array(r),y=new Uint8Array(r);if(v)for(c=0;c<r;c++)m[c]=A[4*c],k[c]=A[4*c+1],y[c]=A[4*c+2];else for(v=new Uint8Array(r),c=0;c<r;c++)m[c]=A[4*c],k[c]=A[4*c+1],y[c]=A[4*c+2],v[c]=A[4*c+3];
a({width:J,height:T,pixels:[m,k,y],mask:v,pixelType:"u8"})}}};h.onerror=()=>{URL.revokeObjectURL(n);g("cannot load image")}})};I._getMask=function(u,S){let O=null;try{var J=new Uint8Array(u);u=0;var T=J.length-2;for(u=Math.ceil(J.length/2);u<T&&(255!==J[u]||217!==J[u+1]);u++);u+=2;if(u<J.length-1){const p=(new D.Zlib(J.subarray(u))).getBytes();O=new Uint8Array(S.width*S.height);S=0;for(J=0;J<p.length;J++)for(T=7;0<=T;T--)O[S++]=p[J]>>T&1}}catch(p){}return O};return I}()})},"esri/chunks/Zlib":function(){define(["exports"],
function(N){var z={exports:{}};(function(D){(function(I){I=I();void 0!==I&&(D.exports=I)})(function(){var I=function(){function u(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}u.prototype={ensureBuffer:function(S){var O=this.buffer,J=O?O.byteLength:0;if(S<J)return O;for(var T=512;T<S;)T<<=1;S=new Uint8Array(T);for(T=0;T<J;++T)S[T]=O[T];return this.buffer=S},getByte:function(){for(var S=this.pos;this.bufferLength<=S;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},
getBytes:function(S){var O=this.pos;if(S){this.ensureBuffer(O+S);for(S=O+S;!this.eof&&this.bufferLength<S;)this.readBlock();var J=this.bufferLength;S>J&&(S=J)}else{for(;!this.eof;)this.readBlock();S=this.bufferLength}this.pos=S;return this.buffer.subarray(O,S)},lookChar:function(){for(var S=this.pos;this.bufferLength<=S;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var S=this.pos;this.bufferLength<=S;){if(this.eof)return null;
this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(S,O,J){for(var T=S+O;this.bufferLength<=T&&!this.eof;)this.readBlock();return new Stream(this.buffer,S,O,J)},skip:function(S){S||(S=1);this.pos+=S},reset:function(){this.pos=0}};return u}();return function(){function u(a){throw Error(a);}function S(a){var g=0,v=a[g++],d=a[g++];-1!=v&&-1!=d||u("Invalid header in flate stream");8!=(v&15)&&u("Unknown compression method in flate stream");0!=((v<<8)+d)%31&&u("Bad FCHECK in flate stream");
d&32&&u("FDICT bit set in flate stream");this.bytes=a;this.bytesPos=g;this.codeBuf=this.codeSize=0;I.call(this)}if(!self||!self.Uint32Array)return null;var O=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),J=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),T=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,
393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),p=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,
524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,
524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,
524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,
524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,
524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,
524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,
524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],l=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];S.prototype=Object.create(I.prototype);S.prototype.getBits=function(a){for(var g=
this.codeSize,v=this.codeBuf,d=this.bytes,n=this.bytesPos,h;g<a;)"undefined"==typeof(h=d[n++])&&u("Bad encoding in flate stream"),v|=h<<g,g+=8;this.codeBuf=v>>a;this.codeSize=g-=a;this.bytesPos=n;return v&(1<<a)-1};S.prototype.getCode=function(a){var g=a[0],v=a[1];a=this.codeSize;for(var d=this.codeBuf,n=this.bytes,h=this.bytesPos;a<v;){var A;"undefined"==typeof(A=n[h++])&&u("Bad encoding in flate stream");d|=A<<a;a+=8}v=g[d&(1<<v)-1];g=v>>16;v&=65535;(0==a||a<g||0==g)&&u("Bad encoding in flate stream");
this.codeBuf=d>>g;this.codeSize=a-g;this.bytesPos=h;return v};S.prototype.generateHuffmanTable=function(a){for(var g=a.length,v=0,d=0;d<g;++d)a[d]>v&&(v=a[d]);for(var n=1<<v,h=new Uint32Array(n),A=1,r=0,c=2;A<=v;++A,r<<=1,c<<=1)for(var m=0;m<g;++m)if(a[m]==A){var k=0,y=r;for(d=0;d<A;++d)k=k<<1|y&1,y>>=1;for(d=k;d<n;d+=c)h[d]=A<<16|m;++r}return[h,v]};S.prototype.readBlock=function(){function a(k,y,e,b,f){for(k=k.getBits(e)+b;0<k--;)y[r++]=f}var g=this.getBits(3);g&1&&(this.eof=!0);g>>=1;if(0==g){var v=
this.bytes,d=this.bytesPos,n;"undefined"==typeof(n=v[d++])&&u("Bad block header in flate stream");var h=n;"undefined"==typeof(n=v[d++])&&u("Bad block header in flate stream");h|=n<<8;"undefined"==typeof(n=v[d++])&&u("Bad block header in flate stream");g=n;"undefined"==typeof(n=v[d++])&&u("Bad block header in flate stream");(g|n<<8)!=(~h&65535)&&u("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;n=this.bufferLength;g=this.ensureBuffer(n+h);this.bufferLength=h=n+h;for(var A=
n;A<h;++A){if("undefined"==typeof(n=v[d++])){this.eof=!0;break}g[A]=n}this.bytesPos=d}else{if(1==g)d=p,n=l;else if(2==g){g=this.getBits(5)+257;n=this.getBits(5)+1;v=this.getBits(4)+4;d=Array(O.length);for(var r=0;r<v;)d[O[r++]]=this.getBits(3);d=this.generateHuffmanTable(d);r=v=0;n=g+n;for(h=Array(n);r<n;)A=this.getCode(d),16==A?a(this,h,2,3,v):17==A?a(this,h,3,3,v=0):18==A?a(this,h,7,11,v=0):h[r++]=v=A;d=this.generateHuffmanTable(h.slice(0,g));n=this.generateHuffmanTable(h.slice(g,n))}else u("Unknown block type in flate stream");
h=(g=this.buffer)?g.length:0;for(A=this.bufferLength;;){var c=this.getCode(d);if(256>c)A+1>=h&&(g=this.ensureBuffer(A+1),h=g.length),g[A++]=c;else{if(256==c){this.bufferLength=A;break}c-=257;c=J[c];var m=c>>16;0<m&&(m=this.getBits(m));v=(c&65535)+m;c=this.getCode(n);c=T[c];m=c>>16;0<m&&(m=this.getBits(m));c=(c&65535)+m;A+v>=h&&(g=this.ensureBuffer(A+v),h=g.length);for(m=0;m<v;++m,++A)g[A]=g[A-c]}}}};return S}()})})(z);N.Zlib=z.exports})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg",
"../../../chunks/Zlib"],function(N,z){return function(){function D(){}D.decode=function(I,u=!1){const S=new Uint8Array(I);I=new N.JpegImage;I.parse(S);const {width:O,height:J,numComponents:T,eof:p}=I;I=I.getData(O,J,!0);const l=O*J;let a=null,g=0,v=0,d=0;if(!u&&p<S.length-1)try{var n=(new z.Zlib(S.subarray(p))).getBytes();a=new Uint8Array(l);for(g=u=0;g<n.length;g++)for(d=7;0<=d;d--)a[u++]=n[g]>>d&1}catch{}if(1===T&&I.length===O*J)n=[I,I,I];else{n=[];for(g=0;3>g;g++)n.push(new Uint8Array(l));for(v=
d=0;v<l;v++)for(g=0;3>g;g++)n[g][v]=I[d++]}return{width:O,height:J,pixels:n,mask:a}};return D}()})},"esri/chunks/Jpg":function(){define(["exports"],function(N){var z={exports:{}};(function(D){(function(I){I=I();void 0!==I&&(D.exports=I)})(function(){var I=function(){function u(S){this.message="JPEG error: "+S}u.prototype=Error();u.prototype.name="JpegError";return u.constructor=u}();return function(){function u(){this.decodeTransform=null;this.colorTransform=-1}function S(l,a){for(var g=0,v=[],d,
n,h=16;0<h&&!l[h-1];)h--;v.push({children:[],index:0});var A=v[0],r;for(d=0;d<h;d++){for(n=0;n<l[d];n++){A=v.pop();for(A.children[A.index]=a[g];0<A.index;)A=v.pop();A.index++;for(v.push(A);v.length<=d;)v.push(r={children:[],index:0}),A.children[A.index]=r.children,A=r;g++}d+1<h&&(v.push(r={children:[],index:0}),A.children[A.index]=r.children,A=r)}return v[0].children}function O(l,a,g,v,d,n,h,A,r){function c(){if(0<F)return F--,C>>F&1;C=l[a++];if(255===C){var aa=l[a++];if(aa)throw new I("unexpected marker "+
(C<<8|aa).toString(16));}F=7;return C>>>7}function m(aa){for(;;){aa=aa[c()];if("number"===typeof aa)return aa;if("object"!==typeof aa)throw new I("invalid huffman sequence");}}function k(aa){for(var Q=0;0<aa;)Q=Q<<1|c(),aa--;return Q}function y(aa){if(1===aa)return 1===c()?1:-1;var Q=k(aa);return Q>=1<<aa-1?Q:Q+(-1<<aa)+1}function e(aa,Q){var W=m(aa.huffmanTableDC);W=0===W?0:y(W);aa.blockData[Q]=aa.pred+=W;for(W=1;64>W;){var Y=m(aa.huffmanTableAC),ea=Y&15;Y>>=4;if(0===ea){if(15>Y)break;W+=16}else W+=
Y,aa.blockData[Q+p[W]]=y(ea),W++}}function b(aa,Q){var W=m(aa.huffmanTableDC);W=0===W?0:y(W)<<r;aa.blockData[Q]=aa.pred+=W}function f(aa,Q){aa.blockData[Q]|=c()<<r}function t(aa,Q){if(0<w)w--;else for(var W=n;W<=h;){var Y=m(aa.huffmanTableAC),ea=Y&15;Y>>=4;if(0===ea){if(15>Y){w=k(Y)+(1<<Y)-1;break}W+=16}else W+=Y,aa.blockData[Q+p[W]]=y(ea)*(1<<r),W++}}function x(aa,Q){for(var W=n,Y=0,ea;W<=h;){ea=p[W];switch(H){case 0:Y=m(aa.huffmanTableAC);ea=Y&15;Y>>=4;if(0===ea)15>Y?(w=k(Y)+(1<<Y),H=4):(Y=16,H=
1);else{if(1!==ea)throw new I("invalid ACn encoding");q=y(ea);H=Y?2:3}continue;case 1:case 2:aa.blockData[Q+ea]?aa.blockData[Q+ea]+=c()<<r:(Y--,0===Y&&(H=2===H?3:0));break;case 3:aa.blockData[Q+ea]?aa.blockData[Q+ea]+=c()<<r:(aa.blockData[Q+ea]=q<<r,H=0);break;case 4:aa.blockData[Q+ea]&&(aa.blockData[Q+ea]+=c()<<r)}W++}4===H&&(w--,0===w&&(H=0))}var E=g.mcusPerLine,G=a,C=0,F=0,w=0,H=0,q,B=v.length,R,M,U,V;A=g.progressive?0===n?0===A?b:f:0===A?t:x:e;var P=0;g=1===B?v[0].blocksPerLine*v[0].blocksPerColumn:
E*g.mcusPerColumn;for(var X,Z;P<g;){var ba=d?Math.min(g-P,d):g;for(R=0;R<B;R++)v[R].pred=0;w=0;if(1===B){var da=v[0];for(V=0;V<ba;V++)A(da,64*((da.blocksPerLine+1)*(P/da.blocksPerLine|0)+P%da.blocksPerLine)),P++}else for(V=0;V<ba;V++){for(R=0;R<B;R++)for(da=v[R],X=da.h,Z=da.v,M=0;M<Z;M++)for(U=0;U<X;U++)A(da,64*((da.blocksPerLine+1)*((P/E|0)*da.v+M)+(P%E*da.h+U)));P++}F=0;(da=T(l,a))&&da.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+da.invalid),a=da.offset);da=da&&da.marker;
if(!da||65280>=da)throw new I("marker was not found");if(65488<=da&&65495>=da)a+=2;else break}(da=T(l,a))&&da.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+da.invalid),a=da.offset);return a-G}function J(l,a){l=a.blocksPerLine;for(var g=a.blocksPerColumn,v=new Int16Array(64),d=0;d<g;d++)for(var n=0;n<l;n++){var h=void 0,A=void 0,r=void 0,c=void 0,m=void 0,k=void 0,y=void 0,e=void 0,b=m=k=c=A=h=void 0,f=void 0,t=void 0,x=void 0,E=64*((a.blocksPerLine+1)*d+n),G=v,C=a.quantizationTable,
F=a.blockData;if(!C)throw new I("missing required Quantization Table.");for(var w=0;64>w;w+=8)h=F[E+w],e=F[E+w+1],y=F[E+w+2],k=F[E+w+3],m=F[E+w+4],c=F[E+w+5],r=F[E+w+6],A=F[E+w+7],h*=C[w],0===(e|y|k|m|c|r|A)?(h=5793*h+512>>10,G[w]=h,G[w+1]=h,G[w+2]=h,G[w+3]=h,G[w+4]=h,G[w+5]=h,G[w+6]=h,G[w+7]=h):(e*=C[w+1],y*=C[w+2],k*=C[w+3],m*=C[w+4],c*=C[w+5],r*=C[w+6],A*=C[w+7],x=5793*h+128>>8,t=5793*m+128>>8,f=y,b=r,m=2896*(e-A)+128>>8,A=2896*(e+A)+128>>8,k<<=4,c<<=4,x=x+t+1>>1,t=x-t,h=3784*f+1567*b+128>>8,f=
1567*f-3784*b+128>>8,b=h,m=m+c+1>>1,c=m-c,A=A+k+1>>1,k=A-k,x=x+b+1>>1,b=x-b,t=t+f+1>>1,f=t-f,h=2276*m+3406*A+2048>>12,m=3406*m-2276*A+2048>>12,A=h,h=799*k+4017*c+2048>>12,k=4017*k-799*c+2048>>12,c=h,G[w]=x+A,G[w+7]=x-A,G[w+1]=t+c,G[w+6]=t-c,G[w+2]=f+k,G[w+5]=f-k,G[w+3]=b+m,G[w+4]=b-m);for(C=0;8>C;++C)h=G[C],e=G[C+8],y=G[C+16],k=G[C+24],m=G[C+32],c=G[C+40],r=G[C+48],A=G[C+56],0===(e|y|k|m|c|r|A)?(h=5793*h+8192>>14,h=-2040>h?0:2024<=h?255:h+2056>>4,F[E+C]=h,F[E+C+8]=h,F[E+C+16]=h,F[E+C+24]=h,F[E+C+
32]=h,F[E+C+40]=h,F[E+C+48]=h,F[E+C+56]=h):(x=5793*h+2048>>12,t=5793*m+2048>>12,f=y,b=r,m=2896*(e-A)+2048>>12,A=2896*(e+A)+2048>>12,x=(x+t+1>>1)+4112,t=x-t,h=3784*f+1567*b+2048>>12,f=1567*f-3784*b+2048>>12,b=h,m=m+c+1>>1,c=m-c,A=A+k+1>>1,k=A-k,x=x+b+1>>1,b=x-b,t=t+f+1>>1,f=t-f,h=2276*m+3406*A+2048>>12,m=3406*m-2276*A+2048>>12,A=h,h=799*k+4017*c+2048>>12,k=4017*k-799*c+2048>>12,c=h,h=x+A,A=x-A,e=t+c,r=t-c,y=f+k,c=f-k,k=b+m,m=b-m,h=16>h?0:4080<=h?255:h>>4,e=16>e?0:4080<=e?255:e>>4,y=16>y?0:4080<=y?
255:y>>4,k=16>k?0:4080<=k?255:k>>4,m=16>m?0:4080<=m?255:m>>4,c=16>c?0:4080<=c?255:c>>4,r=16>r?0:4080<=r?255:r>>4,A=16>A?0:4080<=A?255:A>>4,F[E+C]=h,F[E+C+8]=e,F[E+C+16]=y,F[E+C+24]=k,F[E+C+32]=m,F[E+C+40]=c,F[E+C+48]=r,F[E+C+56]=A)}return a.blockData}function T(l,a,g){var v=l.length-1;g=g<a?g:a;if(a>=v)return null;var d=l[a]<<8|l[a+1];if(65472<=d&&65534>=d)return{invalid:null,marker:d,offset:a};for(a=l[g]<<8|l[g+1];!(65472<=a&&65534>=a);){if(++g>=v)return null;a=l[g]<<8|l[g+1]}return{invalid:d.toString(16),
marker:a,offset:g}}if(!self||!self.Uint8ClampedArray)return null;var p=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);u.prototype={parse:function(l){function a(){var C=l[d]<<8|l[d+1];d+=2;return C}function g(){var C=a();C=d+C-2;var F=T(l,C,d);F&&F.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+F.invalid),C=F.offset);C=
l.subarray(d,C);d+=C.length;return C}function v(C){for(var F=Math.ceil(C.samplesPerLine/8/C.maxH),w=Math.ceil(C.scanLines/8/C.maxV),H=0;H<C.components.length;H++){G=C.components[H];var q=Math.ceil(Math.ceil(C.samplesPerLine/8)*G.h/C.maxH),B=Math.ceil(Math.ceil(C.scanLines/8)*G.v/C.maxV);G.blockData=new Int16Array(64*w*G.v*(F*G.h+1));G.blocksPerLine=q;G.blocksPerColumn=B}C.mcusPerLine=F;C.mcusPerColumn=w}var d=0,n=null,h=null,A=[],r=[],c=[],m=a();if(65496!==m)throw new I("SOI not found");for(m=a();65497!==
m;){switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var k=g();65504===m&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(n={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+3*k[12]*k[13])});65518===m&&65===k[0]&&100===k[1]&&111===k[2]&&
98===k[3]&&101===k[4]&&(h={version:k[5]<<8|k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:m=a()+d-2;for(var y;d<m;){var e=l[d++],b=new Uint16Array(64);if(0===e>>4)for(k=0;64>k;k++)y=p[k],b[y]=l[d++];else if(1===e>>4)for(k=0;64>k;k++)y=p[k],b[y]=a();else throw new I("DQT - invalid table spec");A[e&15]=b}break;case 65472:case 65473:case 65474:if(f)throw new I("Only single frame JPEGs supported");a();var f={};f.extended=65473===m;f.progressive=65474===m;f.precision=
l[d++];f.scanLines=a();f.samplesPerLine=a();f.components=[];f.componentIds={};k=l[d++];for(m=b=e=0;m<k;m++){y=l[d];var t=l[d+1]>>4;var x=l[d+1]&15;e<t&&(e=t);b<x&&(b=x);t=f.components.push({h:t,v:x,quantizationId:l[d+2],quantizationTable:null});f.componentIds[y]=t-1;d+=3}f.maxH=e;f.maxV=b;v(f);break;case 65476:y=a();for(m=2;m<y;){e=l[d++];b=new Uint8Array(16);for(k=t=0;16>k;k++,d++)t+=b[k]=l[d];x=new Uint8Array(t);for(k=0;k<t;k++,d++)x[k]=l[d];m+=17+t;(0===e>>4?c:r)[e&15]=S(b,x)}break;case 65501:a();
var E=a();break;case 65498:a();y=l[d++];k=[];for(m=0;m<y;m++){e=f.componentIds[l[d++]];var G=f.components[e];e=l[d++];G.huffmanTableDC=c[e>>4];G.huffmanTableAC=r[e&15];k.push(G)}m=l[d++];y=l[d++];e=l[d++];m=O(l,d,f,k,E,m,y,e>>4,e&15);d+=m;break;case 65535:255!==l[d]&&d--;break;default:if(255===l[d-3]&&192<=l[d-2]&&254>=l[d-2])d-=3;else throw new I("unknown marker "+m.toString(16));}m=a()}this.width=f.samplesPerLine;this.height=f.scanLines;this.jfif=n;this.eof=d;this.adobe=h;this.components=[];for(m=
0;m<f.components.length;m++){G=f.components[m];if(n=A[G.quantizationId])G.quantizationTable=n;this.components.push({output:J(f,G),scaleX:G.h/f.maxH,scaleY:G.v/f.maxV,blocksPerLine:G.blocksPerLine,blocksPerColumn:G.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(l,a){var g=this.width/l,v=this.height/a,d,n,h=0,A=this.components.length,r=l*a*A,c=new Uint8ClampedArray(r),m=new Uint32Array(l);for(n=0;n<A;n++){var k=this.components[n];var y=k.scaleX*g;var e=
k.scaleY*v;h=n;var b=k.output;var f=k.blocksPerLine+1<<3;for(d=0;d<l;d++)k=0|d*y,m[d]=(k&4294967288)<<3|k&7;for(y=0;y<a;y++)for(k=0|y*e,k=f*(k&4294967288)|(k&7)<<3,d=0;d<l;d++)c[h]=b[k+m[d]],h+=A}if(a=this.decodeTransform)for(n=0;n<r;)for(l=k=0;k<A;k++,n++,l+=2)c[n]=(c[n]*a[l]>>8)+a[l+1];return c},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(l){for(var a,
g,v,d=0,n=l.length;d<n;d+=3)a=l[d],g=l[d+1],v=l[d+2],l[d]=a-179.456+1.402*v,l[d+1]=a+135.459-.344*g-.714*v,l[d+2]=a-226.816+1.772*g;return l},_convertYcckToRgb:function(l){for(var a,g,v,d,n=0,h=0,A=l.length;h<A;h+=4)a=l[h],g=l[h+1],v=l[h+2],d=l[h+3],l[n++]=-122.67195406894+g*(-6.60635669420364E-5*g+4.37130475926232E-4*v-5.4080610064599E-5*a+4.8449797120281E-4*d-.154362151871126)+v*(-9.57964378445773E-4*v+8.17076911346625E-4*a-.00477271405408747*d+1.53380253221734)+a*(9.61250184130688E-4*a-.00266257332283933*
d+.48357088451265)+d*(-3.36197177618394E-4*d+.484791561490776),l[n++]=107.268039397724+g*(2.19927104525741E-5*g-6.40992018297945E-4*v+6.59397001245577E-4*a+4.26105652938837E-4*d-.176491792462875)+v*(-7.78269941513683E-4*v+.00130872261408275*a+7.70482631801132E-4*d-.151051492775562)+a*(.00126935368114843*a-.00265090189010898*d+.25802910206845)+d*(-3.18913117588328E-4*d-.213742400323665),l[n++]=-20.810012546947+g*(-5.70115196973677E-4*g-2.63409051004589E-5*v+.0020741088115012*a-.00288260236853442*d+
.814272968359295)+v*(-1.53496057440975E-5*v-1.32689043961446E-4*a+5.60833691242812E-4*d-.195152027534049)+a*(.00174418132927582*a-.00255243321439347*d+.116935020465145)+d*(-3.43531996510555E-4*d+.24165260232407);return l},_convertYcckToCmyk:function(l){for(var a,g,v,d=0,n=l.length;d<n;d+=4)a=l[d],g=l[d+1],v=l[d+2],l[d]=434.456-a-1.402*v,l[d+1]=119.541-a+.344*g+.714*v,l[d+2]=481.816-a-1.772*g;return l},_convertCmykToRgb:function(l){for(var a,g,v,d,n=0,h=1/255,A=0,r=l.length;A<r;A+=4)a=l[A]*h,g=l[A+
1]*h,v=l[A+2]*h,d=l[A+3]*h,l[n++]=255+a*(-4.387332384609988*a+54.48615194189176*g+18.82290502165302*v+212.25662451639585*d-285.2331026137004)+g*(1.7149763477362134*g-5.6096736904047315*v-17.873870861415444*d-5.497006427196366)+v*(-2.5217340131683033*v-21.248923337353073*d+17.5119270841813)-d*(21.86122147463605*d+189.48180835922747),l[n++]=255+a*(8.841041422036149*a+60.118027045597366*g+6.871425592049007*v+31.159100130055922*d-79.2970844816548)+g*(-15.310361306967817*g+17.575251261109482*v+131.35250912493976*
d-190.9453302588951)+v*(4.444339102852739*v+9.8632861493405*d-24.86741582555878)-d*(20.737325471181034*d+187.80453709719578),l[n++]=255+a*(.8842522430003296*a+8.078677503112928*g+30.89978309703729*v-.23883238689178934*d-14.183576799673286)+g*(10.49593273432072*g+63.02378494754052*v+50.606957656360734*d-112.23884253719248)+v*(.03296041114873217*v+115.60384449646641*d-193.58209356861505)-d*(22.33816807309886*d+180.12613974708367);return l},getData:function(l,a,g){if(4<this.numComponents)throw new I("Unsupported color mode");
l=this._getLinearizedBlockData(l,a);if(1===this.numComponents&&g){g=l.length;a=new Uint8ClampedArray(3*g);for(var v=0,d=0;d<g;d++){var n=l[d];a[v++]=n;a[v++]=n;a[v++]=n}return a}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(l);if(4===this.numComponents){if(this._isColorConversionNeeded())return g?this._convertYcckToRgb(l):this._convertYcckToCmyk(l);if(g)return this._convertCmykToRgb(l)}return l}};return u}()})})(z);N.JpegImage=z.exports})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require",
"exports","../../../assets"],function(N,z,D){function I(p,l,a){a.set(p.slice(l,l+a.length))}function u(p){const {_malloc:l,_free:a,_lerc_getBlobInfo:g,_lerc_getDataRanges:v,_lerc_decode_4D:d,asm:n}=p;let h;const A=Object.values(n).find(c=>c&&"buffer"in c&&c.buffer===p.HEAPU8.buffer),r=c=>{c=c.map(y=>(y>>3<<3)+16);var m=c.reduce((y,e)=>y+e),k=l(m);h=new Uint8Array(A.buffer);m=c[0];c[0]=k;for(k=1;k<c.length;k++){const y=c[k];c[k]=c[k-1]+m;m=y}return c};T.getBlobInfo=c=>{var m=new Uint8Array(48),k=new Uint8Array(24);
const [y,e,b]=r([c.length,m.length,k.length]);h.set(c,y);h.set(m,e);h.set(k,b);var f=g(y,c.length,e,b,12,3);if(f)throw a(y),`lerc-getBlobInfo: error code is ${f}`;h=new Uint8Array(A.buffer);I(h,e,m);I(h,b,k);m=new Uint32Array(m.buffer);var t=new Float64Array(k.buffer);const [x,E,,G,C,F,w,H,q,B,R]=m;k={version:x,depthCount:B,width:G,height:C,validPixelCount:w,bandCount:F,blobSize:H,maskCount:q,dataType:E,minValue:t[0],maxValue:t[1],maxZerror:t[2],statistics:[],bandCountWithNoData:R};if(R)return k;
if(1===B&&1===F)return a(y),k.statistics.push({minValue:t[0],maxValue:t[1]}),k;f=B*F*8;var M=new Uint8Array(f),U=new Uint8Array(f);m=y;var V=t=0;let P=!1;h.byteLength<y+2*f?(a(y),P=!0,[m,t,V]=r([c.length,f,f]),h.set(c,m)):[t,V]=r([f,f]);h.set(M,t);h.set(U,V);if(f=v(m,c.length,B,F,t,V))throw a(m),P||a(t),`lerc-getDataRanges: error code is ${f}`;h=new Uint8Array(A.buffer);I(h,t,M);I(h,V,U);c=new Float64Array(M.buffer);f=new Float64Array(U.buffer);U=k.statistics;for(M=0;M<F;M++)if(1<B){V=c.slice(M*B,
(M+1)*B);const X=f.slice(M*B,(M+1)*B),Z=Math.min.apply(null,V),ba=Math.max.apply(null,X);U.push({minValue:Z,maxValue:ba,depthStats:{minValues:V,maxValues:X}})}else U.push({minValue:c[M],maxValue:f[M]});a(m);P||a(t);return k};T.decode=(c,m)=>{const {maskCount:k,depthCount:y,bandCount:e,width:b,height:f,dataType:t,bandCountWithNoData:x}=m;var E=S[t],G=b*f;m=new Uint8Array(G*e);E=new Uint8Array(G*y*e*E.size);G=new Uint8Array(e);var C=new Uint8Array(8*e);const [F,w,H,q,B]=r([c.length,m.length,E.length,
G.length,C.length]);h.set(c,F);h.set(m,w);h.set(E,H);h.set(G,q);h.set(C,B);if(c=d(F,c.length,k,w,y,b,f,e,t,H,q,B))throw a(F),`lerc-decode: error code is ${c}`;h=new Uint8Array(A.buffer);I(h,H,E);I(h,w,m);c=null;if(x){I(h,q,G);I(h,B,C);c=[];C=new Float64Array(C.buffer);for(let R=0;R<G.length;R++)c.push(G[R]?C[R]:null)}a(F);return{data:E,maskData:m,noDataValues:c}}}const S=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,128]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",
size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let O=null,J=!1;const T={getBlobInfo:null,decode:null};z.decode=function(p,
l={}){var a=l.inputOffset??0;p=p instanceof Uint8Array?p.subarray(a):new Uint8Array(p,a);a=T.getBlobInfo(p);const {data:g,maskData:v}=T.decode(p,a),{width:d,height:n,bandCount:h,depthCount:A,dataType:r,maskCount:c,statistics:m}=a;var k=S[r],y=new k.ctor(g.buffer);p=[];a=[];const e=d*n;var b=e*A;for(var f=0;f<h;f++){var t=y.subarray(f*b,(f+1)*b);if(l.returnInterleaved)p.push(t);else{a:{var x=e,E=A;if(2>E)break a;const G=new k.ctor(x*E);for(let C=0,F=0;C<x;C++)for(let w=0,H=C;w<E;w++,H+=x)G[H]=t[F++];
t=G}p.push(t)}a.push(v.subarray(f*b,(f+1)*b))}y=0===c?null:1===c?a[0]:new Uint8Array(e);if(1<c)for(y.set(a[0]),b=1;b<a.length;b++)for(f=a[b],t=0;t<e;t++)y[t]&=f[t];({noDataValue:l}=l);b=null!=l&&k.range[0]<=l&&k.range[1]>=l;if(0<c&&b)for(b=0;b<h;b++)for(f=p[b],t=a[b]||y,x=0;x<e;x++)0===t[x]&&(f[x]=l);({pixelType:k}=k);return{width:d,height:n,bandCount:h,pixelType:k,depthCount:A,statistics:m,pixels:p,mask:y,bandMasks:c===h&&1<h?a:null}};z.getBlobInfo=function(p,l={}){p=p instanceof Uint8Array?p.subarray(l.inputOffset??
0):new Uint8Array(p,l.inputOffset??0);return T.getBlobInfo(p)};z.isLoaded=function(){return J};z.load=function(){return O?O:O=(new Promise((p,l)=>N(["../../../chunks/lerc-wasm"],p,l))).then(p=>p.lercWasm).then(({default:p})=>p({locateFile:l=>D.getAssetUrl(`esri/layers/support/rasterFormats/${l}`)})).then(p=>{u(p);J=!0})};Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(N){function z(S,
O,J,T=!0){if(0!==O%4||0!==J%4){var p=new ArrayBuffer(4*Math.ceil(J/4));p=new Uint8Array(p);S=new Uint8Array(S,O,J);if(T)for(T=0;T<p.length;T+=4)p[T]=S[T+3],p[T+1]=S[T+2],p[T+2]=S[T+1],p[T+3]=S[T];else p.set(S);return new Uint32Array(p.buffer)}if(T){T=new Uint8Array(S,O,J);p=new Uint8Array(T.length);for(S=0;S<p.length;S+=4)p[S]=T[S+3],p[S+1]=T[S+2],p[S+2]=T[S+1],p[S+3]=T[S];return new Uint32Array(p.buffer)}return new Uint32Array(S,O,J/4)}function D(){const S=[];for(let O=0;257>=O;O++)S[O]=[O];return S}
function I(S,O){for(let J=0;J<O.length;J++)S.push(O[J])}const u=new Set;u.add(511);u.add(1023);u.add(2047);u.add(4095);u.add(8191);N.decode=function(S,O,J,T=!0){S=z(S,O,J,T);O=9;T=D();let p=32,l=T.length,a=[],g=1,v=S[0],d=0;const n=S.length;J=8*(4*n-J);const h=[];for(;null!=v;){if(p>=O)p-=O,d=v>>>32-O,v<<=O;else{d=v>>>32-p;v=S[g++];var A=O-p;p=32-A;d=(d<<A)+(v>>>p);v<<=A}if(257===d)break;if(256===d)O=9,T=D(),l=T.length,a=[];else{A=T[d];if(null==A){if(d>T.length)throw"data integrity issue: code does not exist on code page";
a.push(a[0]);T[l++]=a.slice();I(h,a)}else I(h,A),a.push(A[0]),1<a.length&&(T[l++]=a.slice()),a=A.slice();u.has(l)&&O++;0===p&&(v=S[g++],p=32);if(g>n||g===n&&p<=J)break}}return new Uint8Array(h)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const N=z=>{let D=1;switch(z){case Uint8Array:case Int8Array:D=1;break;case Uint16Array:case Int16Array:D=2;break;case Uint32Array:case Int32Array:case Float32Array:D=
4;break;case Float64Array:D=8}return D};return function(){function z(){}z.decode=function(D,I){var u=I.pixelType;const S=[],O=I.width*I.height;var J=Math.floor(D.byteLength/(I.width*I.height*N(I.pixelType)));const {bandIds:T,format:p}=I;I=T&&T.length||Math.floor(D.byteLength/(I.width*I.height*N(I.pixelType)));var l=D.byteLength-D.byteLength%(O*N(u)),a=new u(D,0,O*J);let g,v,d,n,h=null;if("bip"===p)for(g=0;g<I;g++){d=new u(O);n=T?T[g]:g;for(v=0;v<O;v++)d[v]=a[v*J+n];S.push(d)}else if("bsq"===p)for(g=
0;g<I;g++)n=T?T[g]:g,S.push(a.subarray(n*O,(n+1)*O));if(l<D.byteLength-1)if(D=D.slice(l),8*D.byteLength<O)h=null;else{D=new Uint8Array(D,0,Math.ceil(O/8));u=new Uint8Array(O);for(l=a=l=I=J=0;l<D.length-1;l++)for(I=D[l],a=7;0<=a;a--)u[J++]=I>>a&1;for(a=7;J<O-1;)I=D[D.length-1],u[J++]=I>>a&1,a--;h=u}return{pixels:S,mask:h}};return z}()})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./TiffTags ./utils ../../../chunks/Zlib".split(" "),
function(N,z,D,I,u,S,O,J,T,p){function l(q,B){let R="unknown";3===q?R=64===B?"f64":"f32":1===q?1===B?R="u1":2===B?R="u2":4===B?R="u4":8>=B?R="u8":16>=B?R="u16":32>=B&&(R="u32"):2===q&&(8>=B?R="s8":16>=B?R="s16":32>=B&&(R="s32"));return R}function a(q){let B=null;switch(q?q.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":B=Uint8Array;break;case "u16":B=Uint16Array;break;case "u32":B=Uint32Array;break;case "s8":B=Int8Array;break;case "s16":B=Int16Array;break;case "s32":B=Int32Array;break;
case "f64":B=Float64Array;break;default:B=Float32Array}return B}function g(q,B){return{x:B[0]*q.x+B[1]*q.y+B[2],y:B[3]*q.x+B[4]*q.y+B[5]}}function v(q,B){return q.get(B)?.values?.[0]}function d(q,B,R,M=0,U=J.TIFF_TAGS,V=4){var P=8===V;const X=P?e(new DataView(q,R,8),0,B):(new DataView(q,R,2)).getUint16(0,B),Z=4+2*V;var ba=P?8:2;P=ba+X*Z;if(R+P>q.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:P};const da=R+P+4<=q.byteLength?b(new DataView(q,R+P,8===V?8:4),0,B,8===V):null;R+=
ba;ba=new Map;let aa,Q,W,Y=0,ea=0;for(let ha=0;ha<X;ha++){var fa=new DataView(q,R+Z*ha,Z);aa=fa.getUint16(0,B);W=fa.getUint16(2,B);Q=J.getTagName(aa,U);const ka=[];2===V?(Y=fa.getUint16(4,B),ea=fa.getUint16(6,B)):4===V?(Y=fa.getUint32(4,B),ea=fa.getUint32(8,B)):8===V&&(Y=b(fa,4,B,!0),ea=b(fa,12,B,!0),ka.push(fa.getUint32(12,B)),ka.push(fa.getUint32(16,B)));fa={id:aa,type:W,valueCount:Y,valueOffset:ea,valueOffsets:ka,values:null};c(q,B,fa,M,!1,V);ba.set(Q,fa)}return{success:!0,ifd:ba,nextIFD:da,requiredBufferSize:P}}
function n(q,B,R,M,U){return h.apply(this,arguments)}function h(){h=z._asyncToGenerator(function*(q,B,R,M,U){var V=T.isPlatformLittleEndian===B,P=v(R,"BITSPERSAMPLE"),X=v(R,"SAMPLEFORMAT")??1;X=l(X,P);const Z=v(R,"COMPRESSION")??1;P=a(X);if(34887===Z)return yield S.load(),S.decode(q,{inputOffset:M}).pixels[0];if(1===Z){var ba=q.slice(M,M+U);var da=new Uint8Array(ba)}else if(8===Z||32946===Z)da=new Uint8Array(q,M,U),da=new p.Zlib(da),q=da.getBytes(),ba=new ArrayBuffer(q.length),da=new Uint8Array(ba),
da.set(q);else if(6===Z)da=new Uint8Array(q,M,U),ba=new u.JpegImage,ba.parse(da),q=ba.getData(ba.width,ba.height,!0),ba=new ArrayBuffer(q.length),da=new Uint8Array(ba),da.set(q);else if(7===Z){B=R.get("JPEGTABLES").values;ba=B.length-2;da=new Uint8Array(ba+U-2);for(R=0;R<ba;R++)da[R]=B[R];q=new Uint8Array(q,M+2,U-2);for(M=0;M<q.length;M++)da[ba+M]=q[M];ba=new u.JpegImage;ba.parse(da);q=ba.getData(ba.width,ba.height,!0);ba=new ArrayBuffer(q.length);da=new Uint8Array(ba);da.set(q)}else 5===Z&&(da=O.decode(q,
M,U,B),ba=da.buffer);if("u8"!==X&&"s8"!==X&&!V)switch(D.assertIsSome(da),ba=new ArrayBuffer(da.length),V=new Uint8Array(ba),X){case "u16":case "s16":for(X=0;X<da.length;X+=2)V[X]=da[X+1],V[X+1]=da[X];break;case "u32":case "s32":case "f32":for(X=0;X<da.length;X+=4)V[X]=da[X+3],V[X+1]=da[X+2],V[X+2]=da[X+1],V[X+3]=da[X]}return new P(ba)});return h.apply(this,arguments)}function A(q,B,R){return r.apply(this,arguments)}function r(){r=z._asyncToGenerator(function*(q,B,R){const M=R.get("TILEOFFSETS")?.values;
if(void 0===M)return null;const U=R.get("TILEBYTECOUNTS")?.values,{width:V,height:P,pixelType:X,tileWidth:Z,tileHeight:ba}=m([R]);var da=k(R,B);const aa=B.planes;var Q=V*P,W=v(R,"BITSPERSAMPLE"),Y=34887===(v(R,"COMPRESSION")??1),ea=a(X);const fa=[];for(var ha=0;ha<aa;ha++)fa.push(new ea(Q));let ka,na,sa,qa,wa,ya,xa,va;Q=Math.ceil(V/Z);if(0===W%8)if(Y&&da&&1<aa)for(da=Math.round(M.length/aa),W=0;W<da;W++){var Ba=Math.floor(W/Q)*ba;sa=W%Q*Z;ea=Ba*V+sa;for(Y=0;Y<aa;Y++)if(ha=W*aa+Y,0!==U[ha])for(ha=
yield n(q,B.littleEndian,R,M[ha],U[ha]),wa=0,qa=ea,xa=Math.min(Z,V-sa),ya=Math.min(ba,P-Ba),va=fa[Y],ka=0;ka<ya;ka++)for(qa=ea+ka*V,wa=ka*Z,na=0;na<xa;na++,qa++,wa++)va[qa]=ha[wa]}else for(W=0;W<M.length;W++)if(0!==U[W])for(Ba=Math.floor(W/Q)*ba,sa=W%Q*Z,ea=Ba*V+sa,ha=yield n(q,B.littleEndian,R,M[W],U[W]),wa=0,qa=ea,xa=Math.min(Z,V-sa),ya=Math.min(ba,P-Ba),Ba=0;Ba<aa;Ba++)if(va=fa[Ba],da||Y)for(ka=0;ka<ya;ka++)for(qa=ea+ka*V,wa=Z*ba*Ba+ka*Z,na=0;na<xa;na++,qa++,wa++)va[qa]=ha[wa];else for(ka=0;ka<
ya;ka++)for(qa=ea+ka*V,wa=ka*Z*aa+Ba,na=0;na<xa;na++,qa++,wa+=aa)va[qa]=ha[wa];return{width:V,height:P,pixelType:X,pixels:fa}});return r.apply(this,arguments)}function c(q,B,R,M=0,U=!1,V=4){if(R.values)return!0;var P=R.type,X=R.valueCount,Z=R.valueOffset;let ba=[];var da=C[P],aa=8*da,Q=X*da,W=X*C[P]*8,Y=8===V?64:32;V=R.valueOffsets;if(W>Y&&Q>(U?q.byteLength:q?q.byteLength-Z+M:0))return R.offlineOffsetSize=[Z,Q],R.values=null,!1;if(W<=Y)if(B||(32>=Y?Z>>>=32-W:(q=V?.length?V[0]:Z>>>0,B=V?.length?V[1]:
Math.round((Z-q)/4294967296),32>=W?(Z=q>>>32-W,V[0]=Z):(Z=q*2**(32-W)+(B>>>32-W),V[0]=q,V[1]=B>>>32-W))),1===X&&aa===Y)ba=[Z];else if(64===Y)for(q=V?.length?V[0]:Z>>>0,Z=V?.length?V[1]:Math.round((Z-q)/4294967296),B=q,da=32,q=1;q<=X;q++)Q=32-aa*q%32,da<aa?(Q=B<<Q>>>32-da,W=Z<<32-da>>>32-da,B=Z,ba.push(Q+W*2**(aa-da)),da-=32-(aa-da)):(ba.push(B<<Q>>>32-aa),da-=aa),0===da&&(da=32,B=Z);else for(q=1;q<=X;q++)ba.push(Z<<32-aa*q>>>32-aa);else for(Z-=M,U&&(Z=0),X=Z;X<Z+Q;X+=da){switch(P){case 1:aa=(new DataView(q,
X,1)).getUint8(0);break;case 2:aa=(new DataView(q,X,1)).getUint8(0);break;case 3:aa=(new DataView(q,X,2)).getUint16(0,B);break;case 4:case 13:aa=(new DataView(q,X,4)).getUint32(0,B);break;case 5:aa=(new DataView(q,X,4)).getUint32(0,B)/(new DataView(q,X+4,4)).getUint32(0,B);break;case 6:aa=(new DataView(q,X,1)).getInt8(0);break;case 7:aa=(new DataView(q,X,1)).getUint8(0);break;case 8:aa=(new DataView(q,X,2)).getInt16(0,B);break;case 9:aa=(new DataView(q,X,4)).getInt32(0,B);break;case 10:aa=(new DataView(q,
X,4)).getInt32(0,B)/(new DataView(q,X+4,4)).getInt32(0,B);break;case 11:aa=(new DataView(q,X,4)).getFloat32(0,B);break;case 12:aa=(new DataView(q,X,8)).getFloat64(0,B);break;case 16:case 18:aa=e(new DataView(q,X,8),0,B);break;case 17:V=new DataView(q,X,8);W=(aa=B)?V.getInt32(0,aa):V.getUint32(0,aa);V=aa?V.getUint32(4,aa):V.getInt32(4,aa);Y=0<=(aa?W:V)?1:-1;aa?W*=Y:V*=Y;aa=Y*(aa?4294967296*V+W:4294967296*W+V);break;default:aa=null}ba.push(aa)}if(2===P){P="";Z=ba;ba=[];for(q=0;q<Z.length;q++)0===Z[q]&&
""!==P?(ba.push(P),P=""):P+=String.fromCharCode(Z[q]);""===P&&0!==ba.length||ba.push(P)}R.values=ba;return!0}function m(q){var B=q[0];const R=v(B,"TILEWIDTH"),M=v(B,"TILELENGTH"),U=v(B,"IMAGEWIDTH"),V=v(B,"IMAGELENGTH");var P=v(B,"BITSPERSAMPLE");const X=v(B,"SAMPLESPERPIXEL");var Z=v(B,"SAMPLEFORMAT")??1;const ba=l(Z,P),da=k(B);var aa=B.get("GDAL_NODATA")?.values;let Q=null;aa?.length&&(Q=aa.map(va=>parseFloat(va)),Q.some(va=>isNaN(va))&&(Q=null));var W=v(B,"COMPRESSION")??1;switch(W){case 1:aa=
"NONE";break;case 2:case 3:case 4:case 32771:aa="CCITT";break;case 5:aa="LZW";break;case 6:case 7:aa="JPEG";break;case 32773:aa="PACKBITS";break;case 8:case 32946:aa="DEFLATE";break;case 34712:aa="JPEG2000";break;case 34887:aa="LERC";break;default:aa=String(W)}let Y=!0,ea="";F.has(W)||(Y=!1,ea+="unsupported tag compression "+W);3<Z&&(Y=!1,ea+="unsupported tag sampleFormat "+Z);0!==P%8&&(Y=!1,ea+="unsupported tag bitsPerSample "+P);P=B.get("GEOASCIIPARAMS")?.values?.[0];if(P){var fa=(fa=P.split("|").find(va=>
va.includes("ESRI PE String \x3d ")))?fa.replace("ESRI PE String \x3d ",""):"";fa=fa.startsWith("COMPD_CS")||fa.startsWith("PROJCS")||fa.startsWith("GEOGCS")?{wkid:null,wkt:fa}:null}Z=B.get("GEOTIEPOINTS")?.values;P=B.get("GEOPIXELSCALE")?.values;W=B.get("GEOTRANSMATRIX")?.values;var ha=B.has("GEOKEYDIRECTORY")?B.get("GEOKEYDIRECTORY").data:null;B=!1;if(ha){B=2===v(ha,"GTRasterTypeGeoKey");var ka=v(ha,"GTModelTypeGeoKey");2===ka?(ha=v(ha,"GeographicTypeGeoKey"),1024<=ha&&32766>=ha&&(fa={wkid:ha})):
1===ka&&(ha=v(ha,"ProjectedCSTypeGeoKey"),1024<=ha&&32766>=ha&&(fa={wkid:ha}))}let na;P&&Z&&6<=Z.length?(na=[P[0],0,Z[3]-Z[0]*P[0],0,-Math.abs(P[1]),Z[4]-Z[1]*P[1]],B&&(na[2]-=.5*na[0]+.5*na[1],na[5]-=.5*na[3]+.5*na[4])):W&&16===W.length&&(na=B?[W[0],W[1],W[3]-.5*W[0],W[4],W[5],W[7]-.5*W[5]]:[W[0],W[1],W[3],W[4],W[5],W[7]]);if(na){B=[{x:0,y:V},{x:0,y:0},{x:U,y:V},{x:U,y:0}];ha=W=Number.POSITIVE_INFINITY;let va=ka=Number.NEGATIVE_INFINITY;for(let Ba=0;Ba<B.length;Ba++)Z=g(B[Ba],na),W=Z.x>W?W:Z.x,ka=
Z.x<ka?ka:Z.x,ha=Z.y>ha?ha:Z.y,va=Z.y<va?va:Z.y;fa={xmin:W,xmax:ka,ymin:ha,ymax:va,spatialReference:fa}}else fa={xmin:-.5,ymin:.5-V,xmax:U-.5,ymax:.5,spatialReference:fa};B=q.filter(va=>1===va.get("NEWSUBFILETYPE")?.values?.[0]);let sa;let qa,wa;if(0<B.length){qa=Math.round(Math.log(U/v(B[0],"IMAGEWIDTH"))/Math.LN2);var ya=B[B.length-1];wa=Math.round(Math.log(U/v(ya,"IMAGEWIDTH"))/Math.LN2);sa=v(ya,"TILEWIDTH");ya=v(ya,"TILELENGTH")}sa=null!=wa&&0<wa?sa||R:null;ya=null!=wa&&0<wa?ya||M:null;let xa;
R&&(xa=[{maxCol:Math.ceil(U/R)-1,maxRow:Math.ceil(V/M)-1,minRow:0,minCol:0}],B.forEach(va=>{xa.push({maxCol:Math.ceil(v(va,"IMAGEWIDTH")/v(va,"TILEWIDTH"))-1,maxRow:Math.ceil(v(va,"IMAGELENGTH")/v(va,"TILELENGTH"))-1,minRow:0,minCol:0})}));B=q[0].get("GDAL_METADATA")?.values?.[0];B=H(B);ea+=" "+x({width:U,height:V,tileWidth:R,tileHeight:M,planes:X,ifds:q});return{width:U,height:V,tileWidth:R,tileHeight:M,planes:X,isBSQ:da,pixelType:ba,compression:aa,noData:Q,isSupported:Y,message:ea,extent:fa,affine:P?
null:na,firstPyramidLevel:qa,maximumPyramidLevel:wa,pyramidBlockWidth:sa,pyramidBlockHeight:ya,tileBoundary:xa,metadata:B}}function k(q,B){return(q=q.get("PLANARCONFIGURATION")?.values)?2===q[0]:B?B.isBSQ:!1}function y(q){const {littleEndian:B,isBigTiff:R,firstIFDPos:M}=f(q);var U=M;const V=[];do if(U=t(q,B,U,0,J.TIFF_TAGS,R?8:4),U.success)V.push(U.ifd),U=U.nextIFD;else break;while(0<U);return{...m(V),littleEndian:B,isBigTiff:R,ifds:V}}function e(q,B,R){const M=q.getUint32(B,R);q=q.getUint32(B+4,
R);return R?4294967296*q+M:4294967296*M+q}function b(q,B,R,M){return M?e(q,B,R):q.getUint32(B,R)}function f(q){var B=new DataView(q,0,16),R=B.getUint16(0,!1);q=null;if(18761===R)q=!0;else if(19789===R)q=!1;else throw"unexpected endianess byte";var M=B.getUint16(2,q);if(42!==M&&43!==M)throw"unexpected tiff identifier";R=4;if(M=43===M){const U=B.getUint16(R,q);R+=2;if(8!==U)throw"unsupported bigtiff version";if(0!==B.getUint16(R,q))throw"unsupported bigtiff version";R+=2}B=b(B,R,q,M);return{littleEndian:q,
isBigTiff:M,firstIFDPos:B}}function t(q,B,R,M=0,U=J.TIFF_TAGS,V=4){R=d(q,B,R,M,U,V);let P;const X=R.ifd;X&&(J.ifdTags.forEach((Z,ba)=>{X.has(ba)&&(P=X.get(ba),P.data=d(q,B,P.valueOffset-M,M,Z).ifd)}),X.has("GEOKEYDIRECTORY")&&(P=X.get("GEOKEYDIRECTORY"),(U=P.values)&&4<U.length&&(U=U[0]+"."+U[1]+"."+U[2],P.data=d(q,B,P.valueOffset+6-M,M,J.GEO_KEYS,2).ifd,P.data&&P.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[U]}))),X.has("XMP")&&(P=X.get("XMP"),U=P.values,"number"===
typeof U[0]&&7===P.type&&(P.values=[I.bytesToUTF8(new Uint8Array(U))])));return R}function x(q){const {width:B,height:R,tileHeight:M,tileWidth:U}=q,V=q.planes,P=U?U*M:B*R;q=v(q.ifds[0],"BITSPERSAMPLE");let X="";P*V>2**30/(8<q?q/8:1)&&(X=U?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return X}function E(){E=z._asyncToGenerator(function*(q,B){const {headerInfo:R,ifd:M,offsets:U,sizes:V}=B;var P=[];for(var X=0;X<U.length;X++){var Z=
yield n(q,R.littleEndian,M,U[X],V[X]||q.byteLength);P.push(Z)}var ba=k(M,R);const {pixelType:da,planes:aa}=R;var Q=a(da);q=v(M,"TILEWIDTH");X=v(M,"TILELENGTH");var W=v(M,"COMPRESSION")??1;Z=q*X;const Y=[];var ea=P[0];const fa=34887===W;for(let ka=0;ka<aa;ka++){W=new Q(Z);if(ba&&fa){if(ea=P[ka],ea.length)for(var ha=0;ha<Z;ha++)W[ha]=ea[ka][ha+ka]}else if(ea.length)if(ba||fa&&!ba)W=ea.slice(Z*ka,Z*(ka+1));else for(ha=0;ha<Z;ha++)W[ha]=ea[ha*aa+ka];Y.push(W)}P=R.noData?R.noData[0]:B.noDataValue;ba=(Q=
R.metadata?R.metadata.statistics:null)?Q.map(ka=>ka.min):null;ea=Q?Q.map(ka=>ka.max):null;Q=null;if(null!=P)if(Q=new Uint8Array(Z),1E24<Math.abs(P))for(B=0;B<Z;B++)Q[B]=1E-6>Math.abs((Y[0][B]-P)/P)?0:1;else for(B=0;B<Z;B++)Q[B]=Y[0][B]===P?0:1;else ba&&ea&&B.applyMinMaxConstraint&&(Q=w(Y,ba,ea));return{pixelType:da,width:q,height:X,pixels:Y,mask:Q,noDataValue:P}});return E.apply(this,arguments)}function G(){G=z._asyncToGenerator(function*(q,B={}){var R=B.pyramidLevel||0,M=B.headerInfo||y(q);const {ifds:U,
noData:V}=M;if(0===U.length)throw"no valid image file directory";var P=x(M);if(P)throw P;P=null;var X=-1===R?U[U.length-1]:U[R];B=V?V[0]:B.noDataValue;if(M.tileWidth)P=yield A(q,M,X);else{{const wa=T.isPlatformLittleEndian===M.littleEndian,ya=X.get("STRIPOFFSETS")?.values;if(void 0===ya)q=null;else{var {width:Z,height:ba,pixelType:da}=m([X]);P=M.planes;R=Z*ba;var aa=v(X,"BITSPERSAMPLE"),Q=a(da),W=new Q(R*P),Y=X.get("STRIPBYTECOUNTS")?.values,ea=v(X,"ROWSPERSTRIP"),fa=v(X,"COMPRESSION")??1;var ha=
ea;if(0===aa%8)for(X=0;X<ya.length;X++){var ka=X*ea*Z*P;ha=(X+1)*ea>ba?ba-X*ea:ea;if("u8"===da||"s8"===da||wa)if(8===fa||32946===fa){var na=new Uint8Array(q,ya[X],Y[X]);na=new p.Zlib(na);var sa=na.getBytes();var qa=new ArrayBuffer(sa.length);na=new Uint8Array(qa);na.set(sa);na.length!==ha*Z*P*aa/8&&console.log("strip byte counts is different than expected")}else 6===fa?(na=new Uint8Array(q,ya[X],Y[X]),qa=new u.JpegImage,qa.parse(na),ha=qa.getData(qa.width,qa.height,!0),qa=new ArrayBuffer(ha.length),
na=new Uint8Array(qa),na.set(ha)):5===fa?(na=O.decode(q,ya[X],Y[X],M.littleEndian),qa=na.buffer):(Y[X]!==ha*Z*P*aa/8&&console.log("strip byte counts is different than expected"),qa=q.slice(ya[X],ya[X]+Y[X]));else{6===fa||8===fa||32946===fa?(na=new Uint8Array(q,ya[X],Y[X]),na=new p.Zlib(na),na=na.getBytes(),qa=new ArrayBuffer(na.length),sa=new Uint8Array(qa),na.length!==ha*Z*P*aa/8&&console.log("strip byte counts is different than expected")):(Y[X]!==ha*Z*P*aa/8&&console.log("strip byte counts is different than expected"),
qa=new ArrayBuffer(Y[X]),na=new Uint8Array(q,ya[X],Y[X]),sa=new Uint8Array(qa));switch(da){case "u16":case "s16":for(ha=0;ha<na.length;ha+=2)sa[ha]=na[ha+1],sa[ha+1]=na[ha];break;case "u32":case "s32":case "f32":for(ha=0;ha<na.length;ha+=4)sa[ha]=na[ha+3],sa[ha+1]=na[ha+2],sa[ha+2]=na[ha+1],sa[ha+3]=na[ha]}D.assertIsSome(qa)}na=new Q(qa);W.set(na,ka)}aa=[];if(1===P)aa.push(W);else for(X=0;X<P;X++){M=new Q(R);for(q=0;q<R;q++)M[q]=W[q*P+X];aa.push(M)}q={width:Z,height:ba,pixelType:da,pixels:aa}}}P=
yield q}if(null!=B){D.assertIsSome(P);P.mask=new Uint8Array(P.width*P.height);if(1E24<Math.abs(B))for(q=0;q<P.width*P.height;q++)P.mask[q]=1E-6>Math.abs((P.pixels[0][q]-B)/B)?0:1;else for(q=0;q<P.width*P.height;q++)P.mask[q]=P.pixels[0][q]===B?0:1;P.noDataValue=B}return P});return G.apply(this,arguments)}const C=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],F=new Set([1,5,6,7,8,34712,34887]),w=(q,B,R)=>{if(!(q&&0<q.length&&B&&R))return null;let M,U,V;const P=q[0].length,X=q.length,Z=new Uint8Array(P);
for(let da=0;da<X;da++)if(M=q[da],U=B[da],V=R[da],0===da)for(var ba=0;ba<P;ba++)Z[ba]=M[ba]<U||M[ba]>V?0:1;else for(ba=0;ba<P;ba++)Z[ba]&&(Z[ba]=M[ba]<U||M[ba]>V?0:1);return Z},H=q=>{if(!q)return null;var B=q.match(/<Item(.*?)Item>/gi);if(!B||0===B.length)return null;q=new Map;var R;for(var M=0;M<B.length;M++){var U=B[M];var V=U.slice(6,U.indexOf("\x3e"));var P=U.indexOf("sample\x3d");-1<P&&(R=U.slice(P+8,U.indexOf('"',P+8)));P=U.indexOf("name\x3d");-1<P&&(V=U.slice(P+6,U.indexOf('"',P+6)));V&&(U=
U.slice(U.indexOf("\x3e")+1,U.indexOf("\x3c/Item\x3e")).trim(),null!=R?q.has(V)?q.get(V)[R]=U:q.set(V,[U]):q.set(V,U));R=null}B=q.get("STATISTICS_MINIMUM");V=q.get("STATISTICS_MAXIMUM");M=q.get("STATISTICS_MEAN");U=q.get("STATISTICS_STDDEV");R=null;if(B&&V)for(R=[],P=0;P<B.length;P++)R.push({min:parseFloat(B[P]),max:parseFloat(V[P]),avg:M&&parseFloat(M[P]),stddev:U&&parseFloat(U[P])});V=q.get("BandName");M=q.get("WavelengthMin");U=q.get("WavelengthMax");B=null;if(V)for(B=[],P=0;P<V.length;P++)B.push({BandName:V[P],
WavelengthMin:M&&parseFloat(M[P]),WavelengthMax:U&&parseFloat(U[P])});V=q.get("DataType");return{statistics:R,bandProperties:B,dataType:V,rawMetadata:q}};N.decode=function(q){return G.apply(this,arguments)};N.decodeTileOrStrip=function(q,B){return E.apply(this,arguments)};N.getImageInfo=m;N.isBSQConfig=k;N.parseFieldValues=c;N.parseHeader=y;N.parseIFD=t;N.parseSignature=f;Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],
function(N){N.bytesToUTF8=function(z,D){let I=0,u="",S=0,O=0;const J=z.length;for(;I<J;)if(O=z[I++],S=O>>4,8>S?S=1:15===S?(S=4,O=(O&7)<<18|(z[I++]&63)<<12|(z[I++]&63)<<6|z[I++]&63):14===S?(S=3,O=(O&15)<<12|(z[I++]&63)<<6|z[I++]&63):(S=2,O=(O&31)<<6|z[I++]&63),0!==O||D)u+=String.fromCharCode(O);return u};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const N=(()=>{const u=[];u[254]=
"NEWSUBFILETYPE";u[255]="SUBFILETYPE";u[256]="IMAGEWIDTH";u[257]="IMAGELENGTH";u[258]="BITSPERSAMPLE";u[259]="COMPRESSION";u[262]="PHOTOMETRICINTERPRETATION";u[263]="THRESHHOLDING";u[264]="CELLWIDTH";u[265]="CELLLENGTH";u[266]="FILLORDER";u[269]="DOCUMENTNAME";u[270]="IMAGEDESCRIPTION";u[271]="MAKE";u[272]="MODEL";u[273]="STRIPOFFSETS";u[274]="ORIENTATION";u[277]="SAMPLESPERPIXEL";u[278]="ROWSPERSTRIP";u[279]="STRIPBYTECOUNTS";u[280]="MINSAMPLEVALUE";u[281]="MAXSAMPLEVALUE";u[282]="XRESOLUTION";u[283]=
"YRESOLUTION";u[284]="PLANARCONFIGURATION";u[285]="PAGENAME";u[286]="XPOSITION";u[287]="YPOSITION";u[288]="FREEOFFSETS";u[289]="FREEBYTECOUNTS";u[290]="GRAYRESPONSEUNIT";u[291]="GRAYRESPONSECURVE";u[292]="T4OPTIONS";u[293]="T6OPTIONS";u[296]="RESOLUTIONUNIT";u[297]="PAGENUMBER";u[300]="COLORRESPONSEUNIT";u[301]="TRANSFERFUNCTION";u[305]="SOFTWARE";u[306]="DATETIME";u[315]="ARTIST";u[316]="HOSTCOMPUTER";u[317]="PREDICTOR";u[318]="WHITEPOINT";u[319]="PRIMARYCHROMATICITIES";u[320]="COLORMAP";u[321]=
"HALFTONEHINTS";u[322]="TILEWIDTH";u[323]="TILELENGTH";u[324]="TILEOFFSETS";u[325]="TILEBYTECOUNTS";u[326]="BADFAXLINES";u[327]="CLEANFAXDATA";u[328]="CONSECUTIVEBADFAXLINES";u[330]="SUBIFD";u[332]="INKSET";u[333]="INKNAMES";u[334]="NUMBEROFINKS";u[336]="DOTRANGE";u[337]="TARGETPRINTER";u[338]="EXTRASAMPLES";u[339]="SAMPLEFORMAT";u[340]="SMINSAMPLEVALUE";u[341]="SMAXSAMPLEVALUE";u[342]="TRANSFERRANGE";u[347]="JPEGTABLES";u[512]="JPEGPROC";u[513]="JPEGIFOFFSET";u[514]="JPEGIFBYTECOUNT";u[515]="JPEGRESTARTINTERVAL";
u[517]="JPEGLOSSLESSPREDICTORS";u[518]="JPEGPOINTTRANSFORM";u[519]="JPEGQTABLES";u[520]="JPEGDCTABLES";u[521]="JPEGACTABLES";u[529]="YCBCRCOEFFICIENTS";u[530]="YCBCRSUBSAMPLING";u[531]="YCBCRPOSITIONING";u[532]="REFERENCEBLACKWHITE";u[700]="XMP";u[33550]="GEOPIXELSCALE";u[33922]="GEOTIEPOINTS";u[33432]="COPYRIGHT";u[42112]="GDAL_METADATA";u[42113]="GDAL_NODATA";u[50844]="RPCCOEFFICIENT";u[34264]="GEOTRANSMATRIX";u[34735]="GEOKEYDIRECTORY";u[34736]="GEODOUBLEPARAMS";u[34737]="GEOASCIIPARAMS";u[34665]=
"EXIFIFD";u[34853]="GPSIFD";u[40965]="INTEROPERABILITYIFD";return u})(),z=(()=>{const u=N.slice();u[36864]="ExifVersion";u[40960]="FlashpixVersion";u[40961]="ColorSpace";u[42240]="Gamma";u[37121]="ComponentsConfiguration";u[37122]="CompressedBitsPerPixel";u[40962]="PixelXDimension";u[40963]="PixelYDimension";u[37500]="MakerNote";u[37510]="UserComment";u[40964]="RelatedSoundFile";u[36867]="DateTimeOriginal";u[36868]="DateTimeDigitized";u[36880]="OffsetTime";u[36881]="OffsetTimeOriginal";u[36882]="OffsetTimeDigitized";
u[37520]="SubSecTime";u[37521]="SubSecTimeOriginal";u[37522]="SubSecTimeDigitized";u[37888]="Temperature";u[37889]="Humidity";u[37890]="Pressure";u[37891]="WaterDepth";u[37892]="Acceleration";u[37893]="CameraElevationAngle";u[42016]="ImageUniqueID";u[42032]="CameraOwnerName";u[42033]="BodySerialNumber";u[42034]="LensSpecification";u[42035]="LensMake";u[42036]="LensModel";u[42037]="LensSerialNumber";u[33434]="ExposureTime";u[33437]="FNumber";u[34850]="ExposureProgram";u[34852]="SpectralSensitivity";
u[34855]="PhotographicSensitivity";u[34856]="OECF";u[34864]="SensitivityType";u[34865]="StandardOutputSensitivity";u[34866]="RecommendedExposureIndex";u[34867]="ISOSpeed";u[34868]="ISOSpeedLatitudeyyy";u[34869]="ISOSpeedLatitudezzz";u[37377]="ShutterSpeedValue";u[37378]="ApertureValue";u[37379]="BrightnessValue";u[37380]="ExposureBiasValue";u[37381]="MaxApertureValue";u[37382]="SubjectDistance";u[37383]="MeteringMode";u[37384]="LightSource";u[37385]="Flash";u[37386]="FocalLength";u[37396]="SubjectArea";
u[41483]="FlashEnergy";u[41484]="SpatialFrequencyResponse";u[41486]="FocalPlaneXResolution";u[41487]="FocalPlaneYResolution";u[41488]="FocalPlaneResolutionUnit";u[41492]="SubjectLocation";u[41493]="ExposureIndex";u[41495]="SensingMethod";u[41728]="FileSource";u[41729]="SceneType";u[41730]="CFAPattern";u[41985]="CustomRendered";u[41986]="ExposureMode";u[41987]="WhiteBalance";u[41988]="DigitalZoomRatio";u[41989]="FocalLengthIn35mmFilm";u[41990]="SceneCaptureType";u[41991]="GainControl";u[41992]="Contrast";
u[41993]="Saturation";u[41994]="Sharpness";u[41995]="DeviceSettingDescription";u[41996]="SubjectDistanceRange";return u})(),D=(()=>{const u=[];u[1024]="GTModelTypeGeoKey";u[1025]="GTRasterTypeGeoKey";u[1026]="GTCitationGeoKey";u[2048]="GeographicTypeGeoKey";u[2049]="GeogCitationGeoKey";u[2050]="GeogGeodeticDatumGeoKey";u[2051]="GeogPrimeMeridianGeoKey";u[2052]="GeogLinearUnitsGeoKey";u[2053]="GeogLinearUnitSizeGeoKey";u[2054]="GeogAngularUnitsGeoKey";u[2055]="GeogAngularUnitSizeGeoKey";u[2056]="GeogEllipsoidGeoKey";
u[2057]="GeogSemiMajorAxisGeoKey";u[2058]="GeogSemiMinorAxisGeoKey";u[2059]="GeogInvFlatteningGeoKey";u[2061]="GeogPrimeMeridianLongGeoKey";u[2060]="GeogAzimuthUnitsGeoKey";u[3072]="ProjectedCSTypeGeoKey";u[3073]="PCSCitationGeoKey";u[3074]="ProjectionGeoKey";u[3075]="ProjCoordTransGeoKey";u[3076]="ProjLinearUnitsGeoKey";u[3077]="ProjLinearUnitSizeGeoKey";u[3078]="ProjStdParallel1GeoKey";u[3079]="ProjStdParallel2GeoKey";u[3080]="ProjNatOriginLongGeoKey";u[3081]="ProjNatOriginLatGeoKey";u[3082]="ProjFalseEastingGeoKey";
u[3083]="ProjFalseNorthingGeoKey";u[3084]="ProjFalseOriginLongGeoKey";u[3085]="ProjFalseOriginLatGeoKey";u[3086]="ProjFalseOriginEastingGeoKey";u[3087]="ProjFalseOriginNorthingGeoKey";u[3088]="ProjCenterLongGeoKey";u[3090]="ProjCenterEastingGeoKey";u[3091]="ProjCenterNorthingGeoKey";u[3092]="ProjScaleAtNatOriginGeoKey";u[3093]="ProjScaleAtCenterGeoKey";u[3094]="ProjAzimuthAngleGeoKey";u[3095]="ProjStraightVertPoleLongGeoKey";u[4096]="VerticalCSTypeGeoKey";u[4097]="VerticalCitationGeoKey";u[4098]=
"VerticalDatumGeoKey";u[4099]="VerticalUnitsGeoKey";return u})(),I=new Map;I.set("EXIFIFD",z);I.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:N,ifdTags:I,GEO_KEYS:D,getTagName:(u,S)=>{S=(S||N)[u];void 0===S&&(S="unknown"+String(u));return S}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(N){const z=new ArrayBuffer(4),D=new Uint8Array(z);(new Uint32Array(z))[0]=1;N.isPlatformLittleEndian=1===D[0];Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/maybe ../../core/unitUtils ../../layers/support/Field ../../layers/support/RasterInfo ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v,d,n,h,A,r,c,m){function k(Q,W){Q=y(Q,W?.variableName);const {bandCount:Y}=Q;let {bandIds:ea,stretchType:fa}=W||{};ea?.some(qa=>qa>=Y)&&(ea=null);let ha=I.unwrap(Q.statistics),ka=I.unwrap(Q.histograms);1<Y?(ea=ea?.length?ea:e(Q),ha=null==ha?null:ea?.map(qa=>ha[qa]),ka=null==ka?null:ea?.map(qa=>ka[qa])):ea=[0];null==fa&&(fa=f(Q));let na=!1;switch(fa){case "none":na=!1;break;case "percent-clip":na=!ka?.length;break;default:na=!ha?.length}var {dataType:sa}=Q;sa=1===
ea?.length&&da.has(sa)?Z:null;sa=new n({stretchType:fa,dynamicRangeAdjustment:na,colorRamp:sa,outputMin:0,outputMax:255,gamma:1===ea?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===fa?sa.maxPercent=sa.minPercent=.25:"standard-deviation"===fa&&(sa.numberOfStandardDeviations=2);if(!na&&(I.isSome(Q.multidimensionalInfo)||W?.includeStatisticsInStretch))if("percent-clip"===fa)sa.histograms=ka;else if("min-max"===fa||"standard-deviation"===fa)sa.statistics=ha;return sa}function y(Q,W){if(null==W)return Q;
let Y=I.unwrap(Q.statistics),ea=I.unwrap(Q.histograms);var {multidimensionalInfo:fa}=Q;if(W&&I.isSome(fa)&&(fa=fa.variables.find(ha=>ha.name===W))){const {statistics:ha,histograms:ka}=fa;ha?.length&&(Y=ha);ka?.length&&(ea=ka)}return O.fromJSON({...Q.toJSON(),statistics:Y,histograms:ea})}function e(Q){const W=Q.bandCount;if(1===W)return null;if(2===W)return[0];Q=Q.keyProperties&&Q.keyProperties.BandProperties;let Y;if(Q&&Q.length===W){const {red:ea,green:fa,blue:ha,nir:ka}=b(Q);null!=ea&&null!=fa&&
null!=ha?Y=[ea,fa,ha]:null!=ka&&null!=ea&&null!=fa&&(Y=[ka,ea,fa])}!Y&&3<=W&&(Y=[0,1,2]);return Y}function b(Q){const W={};for(let fa=0;fa<Q.length;fa++){var Y=Q[fa],ea=Y.BandName?.toLowerCase();"red"===ea?W.red=fa:"green"===ea?W.green=fa:"blue"===ea?W.blue=fa:"nearinfrared"===ea||"nearinfrared_1"===ea||"nir"===ea?W.nir=fa:Y.WavelengthMax&&Y.WavelengthMin&&(ea=Y.WavelengthMin,Y=Y.WavelengthMax,null==W.blue&&410<=ea&&480>=ea&&480<=Y&&540>=Y?W.blue=fa:null==W.green&&490<=ea&&560>=ea&&560<=Y&&610>=Y?
W.green=fa:null==W.red&&595<=ea&&670>=ea&&660<=Y&&730>=Y?W.red=fa:null==W.nir&&700<=ea&&860>=ea&&800<=Y&&950>=Y&&(W.nir=fa))}return W}function f(Q){let W="percent-clip";const {pixelType:Y,dataType:ea,histograms:fa,statistics:ha}=Q;"u8"!==Y||"processed"!==ea&&I.isSome(fa)&&I.isSome(ha)?"u8"===Y||"elevation"===ea||da.has(ea)?W="min-max":I.isSome(fa)?W="percent-clip":I.isSome(ha)&&(W="min-max"):W="none";return W}function t(Q,W,Y,ea){if(!C(Q,W))return null;const {attributeTable:fa,statistics:ha}=Q,ka=
x(fa,W),na=G(fa,"red"),sa=G(fa,"green"),qa=G(fa,"blue");Q=new T;const wa=[],ya=new Set,xa=!!(na&&sa&&qa);if(I.isSome(fa))fa.features.forEach(va=>{var Ba=va.attributes[ka.name];ya.has(va.attributes[ka.name])||null==Ba||(ya.add(Ba),Ba=!xa||"single"!==na.type&&"double"!==na.type||"single"!==sa.type&&"double"!==sa.type||"single"!==qa.type&&"double"!==qa.type||fa.features.some(Ca=>1<Ca.attributes[na.name]||1<Ca.attributes[sa.name]||1<Ca.attributes[qa.name])?1:255,wa.push(new a({value:va.attributes[ka.name],
label:va.attributes[ka.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:xa?new z([va.attributes[na.name]*Ba,va.attributes[sa.name]*Ba,va.attributes[qa.name]*Ba,1]):new z([0,0,0,0])}})))});else if(ha?.[0])for(W=ha[0].min;W<=ha[0].max;W++)wa.push(new a({value:W,label:W.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new z([0,0,0,0])}}));wa.sort((va,Ba)=>va.value&&"string"===typeof va.value.valueOf()?0:va.value>Ba.value?1:-1);if(!xa){const va=l.convertColorRampToColormap(ba,
wa.length);wa.forEach((Ba,Ca)=>Ba.symbol.color=new z(va[Ca].slice(1,4)));Q.colorRamp=ba}if(Y||ea){const va=Y||l.convertColorRampToColormap(ea,wa.length).map(Ba=>Ba.slice(1));wa.forEach((Ba,Ca)=>Ba.symbol.color=new z(va[Ca]));Q.colorRamp=ea}return new h({field:ka.name,uniqueValueInfos:wa,authoringInfo:Q})}function x(Q,W,Y){let ea;I.isSome(Q)?(ea=W?Q.fields.find(fa=>W.toLowerCase()===fa.name.toLowerCase()):E(Q.fields),ea||(Y||(ea=Q.fields.find(fa=>"string"===fa.type)),ea||(ea=G(Q,"value")))):ea=new S({name:"value"});
return ea}function E(Q){let W;for(let Y=0;Y<Q.length;Y++){const ea=Q[Y].name.toLowerCase();if("string"===Q[Y].type){if(ea.startsWith("class")){W=Q[Y];break}null==W&&(ea.endsWith("name")||ea.endsWith("type"))&&(W=Q[Y])}}return W}function G(Q,W){return I.isNone(Q)?null:Q.fields.find(Y=>Y.name.toLowerCase()===W)}function C(Q,W){const {attributeTable:Y,bandCount:ea}=Q;return I.isNone(Y)&&R(Q)?!0:I.isNone(Y)||1<ea||W&&null==Y.fields.find(fa=>fa.name.toLowerCase()===W.toLowerCase())?!1:!0}function F(Q){const {bandCount:W,
colormap:Y}=Q;return I.isSome(Y)&&0<Y.length&&1===W}function w(Q){if(!F(Q))return null;let W;const {attributeTable:Y,colormap:ea}=Q;if(I.isSome(Y)){const fa=G(Y,"value"),ha=x(Y,null,!0);"string"===ha.type&&(W={},Y.features.forEach(ka=>{ka=ka.attributes;W[ka[fa.name]]=ha?ka[ha.name]:ka[fa.name]}))}return A.createFromColormap(I.unwrap(ea),W)}function H(Q){const {bandCount:W,dataType:Y,pixelType:ea}=Q;return"elevation"===Y||"generic"===Y&&1===W&&("s16"===ea||"s32"===ea||"f32"===ea||"f64"===ea)}function q(Q,
W=!1){const {attributeTable:Y,bandCount:ea}=Q;return 1===ea&&(!W||I.isSome(Y)||I.isSome(Q.histograms))}function B(Q,W,Y){let ea=0,fa=0;I.isSome(Q.attributeTable)?(Q=Q.attributeTable,ea=fa=Q.features[0].attributes[W.name],Q.features.forEach(ha=>{ha=ha.attributes[W.name];ha<ea&&(ea=ha);ha>fa&&(fa=ha)})):I.isSome(Q.histograms)&&(Q=Q.histograms,ea=Q[0].min,fa=Q[0].max);return(fa-ea)/Y}function R(Q){return["u8","s8"].includes(Q.pixelType)&&null!=Q.statistics?.[0]?.min&&null!=Q.statistics[0]?.max&&1===
Q.bandCount}function M(Q){({dataType:Q}=Q);return"vector-uv"===Q||"vector-magdir"===Q}function U(Q){({dataType:Q}=Q);return"vector-uv"===Q||"vector-magdir"===Q}function V(Q){if(!M(Q))return null;if(I.isSome(Q.statistics)&&Q.statistics.length&&("vector-magdir"===Q.dataType||"vector-uv"===Q.dataType)){const {minMagnitude:Y,maxMagnitude:ea}=X(Q.dataType,Q.statistics);var W=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:Y,maxDataValue:ea}]}Q=I.isSome(Q.multidimensionalInfo)?aa.get(Q.multidimensionalInfo.variables[0].unit):
null;W=new m({visualVariables:W,inputUnit:Q,rotationType:"geographic"});W.visualVariables=[...W.sizeVariables,...W.rotationVariables];return W}function P(Q){return{color:Q.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function X(Q,W){if("vector-magdir"===Q)Q=W[0].min,W=W[0].max;else{const Y=W[0].min,ea=W[0].max,fa=W[1].min;W=W[1].max;Q=0;W=Math.max(Math.abs(Y),Math.abs(fa),Math.abs(ea),Math.abs(W))}return{minMagnitude:Q,maxMagnitude:W}}const Z=d.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,
0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),ba=d.fromJSON(l.PREDEFINED_JSON_COLOR_RAMPS[0]),da=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),aa=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);N.createClassBreaksRenderer=function(Q,W){Q=y(Q,W?.variableName);const {attributeTable:Y}=
Q;if(!q(Q))return null;const ea=I.isSome(Q.histograms)?Q.histograms[0]:null,fa=null!=W?.numClasses&&isFinite(W?.numClasses)?W.numClasses:5,ha=new T({classificationMethod:W?.classificationMethod,colorRamp:W?.colorRamp});let ka=W?.field||"value";const na=[],sa=[],qa=I.isSome(Y),wa=qa&&Y.fields.find(Ca=>"count"===Ca.name.toLowerCase()),ya=qa?Y.fields.find(Ca=>Ca.name.toLowerCase()===ka.toLowerCase()):void 0;if(ya&&qa){ka=ya.name;const Ca=Y.features.length;let Ka=0;Y.features.forEach(Ha=>Ka+=(wa?Ha.attributes[wa.name]:
50)/Ca);Y.features.forEach(Ha=>{const Ma=Ha.attributes[ya.name];Ha=wa?Ha.attributes[wa.name]:50;if(0<Ha){sa.push(Ha);Ha=Math.max(1,Math.round(Ha/Ca/Ka*1E3));for(let Da=0;Da<Ha;Da++)na.push(Ma)}})}else{var {pixelType:xa}=Q;const Ca=(ea.max-ea.min)/ea.size,Ka=(xa=xa.includes("s")||xa.includes("u"))&&1===Ca?Math.floor(ea.min+.5):ea.min,Ha=xa&&1===Ca?Math.floor(ea.max-.5):ea.max,Ma=ea.size;let Da=0,Pa;ea.counts.forEach(La=>Da+=La/Ma);ea.counts.forEach((La,Na)=>{if(0<La)for(sa.push(La),La=Math.max(1,Math.round(La/
Ma/Da*1E3)),Pa=qa?Y.features[Na].attributes[ya.name]:0===Na?Ka:Na===Ma-1?Ha:ea.min+Ca*(Na+.5),Na=0;Na<La;Na++)na.push(Pa)})}xa=W?.classificationMethod||"natural-breaks";let va=W?.definedInterval;"defined-interval"!==xa||va||(va=B(Q,ya,fa));Q=v.createGenerateRendererClassBreaks({values:na,valueFrequency:sa,normalizationTotal:null,definition:new g({classificationMethod:xa,breakCount:fa,definedInterval:va})});let Ba=W?.colors;Ba||(W=W?.colorRamp||Z,ha.colorRamp=W,Ba=l.convertColorRampToColormap(W,Q.classBreaks.length,
!0).map(Ca=>Ca.slice(1)));W=Q.classBreaks.map((Ca,Ka)=>new p({minValue:Ca.minValue,maxValue:Ca.maxValue,label:Ca.label,symbol:{type:"simple-fill",color:Ba[Ka]}}));return new c({field:ka,classBreakInfos:W,authoringInfo:ha})};N.createColormapRenderer=w;N.createDefaultRenderer=function(Q,W){const {attributeTable:Y,colormap:ea}=Q;if(M(Q)){var fa=V(Q);if(I.isSome(fa))return fa}return I.isSome(ea)&&(fa=w(Q),I.isSome(fa))||I.isSome(Y)&&(fa=t(Q),I.isSome(fa))?fa:k(Q,W)};N.createFlowRenderer=function(Q){if(!U(Q))return null;
let W;if(I.isSome(Q.statistics)&&0<Q.statistics.length&&("vector-magdir"===Q.dataType||"vector-uv"===Q.dataType)){const {minMagnitude:Y,maxMagnitude:ea}=X(Q.dataType,Q.statistics);W=[{type:"color",field:"Magnitude",stops:[{value:Y,color:"#1020C0"},{value:ea,color:"#C02010"}]}]}return new J({visualVariables:W})};N.createShadedReliefRenderer=function(Q,W="traditional"){if(!H(Q))return null;({extent:Q}=Q);Q=Q.width*u.getMetersPerUnitForSR(Q.spatialReference);return new r({hillshadeType:W,scalingType:5E6<
Q?"adjusted":"none"})};N.createStretchRenderer=k;N.createUVRenderer=t;N.createVectorFieldRenderer=V;N.estimateMagnitudeRange=X;N.getBandNames=function(Q,W){const Y=Q.keyProperties&&Q.keyProperties.BandProperties;W=W?.length?W:Array.from(Array(Q.bandCount).keys());return W.map(ea=>Y&&Y.length===Q.bandCount?Y[ea]&&Y[ea].BandName||"band_"+(ea+1):"band_"+(ea+1))};N.getClassField=x;N.getDefaultBandCombination=e;N.getDefaultInterpolation=function(Q,W,Y){const ea=["nearest","bilinear","cubic","majority"].find(fa=>
fa===Y?.toLowerCase());return"Map"===W?ea??"bilinear":"standard-time"===Q.dataType?ea??"nearest":"thematic"===Q.dataType||Q.attributeTable||Q.colormap?"nearest"===ea||"majority"===ea?ea:"nearest":ea??"bilinear"};N.getDefinedInterval=B;N.getField=G;N.getSupportedRendererTypes=function(Q,W=!1){const Y=["raster-stretch"];F(Q)&&Y.push("raster-colormap");C(Q)&&Y.push("unique-value");q(Q,W)&&Y.push("class-breaks");H(Q)&&Y.push("raster-shaded-relief");M(Q)&&Y.push("vector-field");U(Q)&&Y.push("flow");return Y};
N.getWellKnownBandIndexes=b;N.isClassBreaksSupported=q;N.isColormapRendererSupported=F;N.isFlowRendererSupported=U;N.isShadedReliefRendererSupported=H;N.isSingleBand8BitRasterWithStats=R;N.isUVRendererSupported=C;N.isVectorFieldRendererSupported=M;N.normalizeRendererJSON=function(Q){if("uniqueValue"===Q.type){var W=Q.uniqueValueInfos;W?.[0].symbol?.symbolLayers?.length&&(Q.uniqueValueInfos=W?.map(Y=>({value:Y.value,label:Y.label,symbol:Y.symbol?P(Y.symbol):null})));return Q}"classBreaks"===Q.type&&
(W=Q.classBreakInfos,W[0].symbol?.symbolLayers?.length&&(Q.classBreakInfos=W.map(Y=>({classMinValue:Y.classMinValue,classMaxValue:Y.classMaxValue,label:Y.label,symbol:Y.symbol?P(Y.symbol):null}))));return Q};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(N,z,D,I,u,S,O,J){u=new D.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});D=new D.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});J=function(T){function p(){var l=T.apply(this,arguments)||this;l.breakCount=null;l.classificationField=
null;l.classificationMethod=null;l.normalizationField=null;l.normalizationType=null;l.type="class-breaks-definition";return l}N._inheritsLoose(p,T);N._createClass(p,[{key:"standardDeviationInterval",set:function(l){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",l)}},{key:"definedInterval",set:function(l){"defined-interval"===this.classificationMethod&&this._set("definedInterval",l)}}]);return p}(J);z.__decorate([I.property({json:{write:!0}})],J.prototype,"breakCount",
void 0);z.__decorate([I.property({json:{write:!0}})],J.prototype,"classificationField",void 0);z.__decorate([I.property({type:String,json:{read:u.read,write:u.write}})],J.prototype,"classificationMethod",void 0);z.__decorate([I.property({json:{write:!0}})],J.prototype,"normalizationField",void 0);z.__decorate([I.property({json:{read:D.read,write:D.write}})],J.prototype,"normalizationType",void 0);z.__decorate([I.property({value:null,json:{write:!0}})],J.prototype,"standardDeviationInterval",null);
z.__decorate([I.property({value:null,json:{write:!0}})],J.prototype,"definedInterval",null);z.__decorate([I.property()],J.prototype,"type",void 0);return J=z.__decorate([O.subclass("esri.rest.support.ClassBreaksDefinition")],J)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(N,z,D,I,u,S,O,J,T,p){D=new D.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});I=function(l){function a(){var g=l.apply(this,arguments)||this;g.baseSymbol=null;g.colorRamp=null;g.type=null;return g}N._inheritsLoose(a,l);return a}(I.JSONSupport);z.__decorate([u.property({type:p,json:{write:!0}})],I.prototype,"baseSymbol",void 0);z.__decorate([u.property({types:T.types,json:{read:{reader:T.fromJSON},write:!0}})],I.prototype,"colorRamp",void 0);z.__decorate([u.property({json:{read:D.read,
write:D.write}})],I.prototype,"type",void 0);return I=z.__decorate([J.subclass("esri.rest.support.ClassificationDefinition")],I)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(N,z){function D(g){const {classificationMethod:v,breakCount:d,normalizationType:n,definedInterval:h}=g.definition,A=[];var r=g.values;if(0===r.length)return[];r=r.sort((b,f)=>b-f);var c=r[0],m=r[r.length-1];if("equal-interval"===v)if(r.length>=d){r=(m-c)/d;g=c;for(var k=
1;k<d;k++){var y=Number((c+k*r).toFixed(6));A.push({minValue:g,maxValue:y,label:I(g,y,n)});g=y}A.push({minValue:g,maxValue:m,label:I(g,m,n)})}else r.forEach(b=>{A.push({minValue:b,maxValue:b,label:I(b,b,n)})});else if("natural-breaks"===v){r=u(r);g=S(r.uniqueValues,g.valueFrequency||r.valueFrequency,d);for(k=1;k<d;k++)r.uniqueValues.length>k&&(y=Number(r.uniqueValues[g[k]].toFixed(6)),A.push({minValue:c,maxValue:y,label:I(c,y,n)}),c=y);A.push({minValue:c,maxValue:m,label:I(c,m,n)})}else if("quantile"===
v)if(r.length>=d&&c!==m){g=Math.ceil(r.length/d);k=0;for(y=1;y<d;y++){var e=g+k-1;e>r.length&&(e=r.length-1);0>e&&(e=0);A.push({minValue:c,maxValue:r[e],label:I(c,r[e],n)});c=r[e];k+=g;g=Math.ceil((r.length-k)/(d-y))}A.push({minValue:c,maxValue:m,label:I(c,m,n)})}else for(m=-1,c=0;c<r.length;c++)g=r[c],g!==m&&(m=g,A.push({minValue:m,maxValue:g,label:I(m,g,n)}),m=g);else if("standard-deviation"===v)if(g=T(r),k=p(r,g),0===k)A.push({minValue:r[0],maxValue:r[0],label:I(r[0],r[0],n)});else{r=J(c,m,d,g,
k)*k;k=0;for(y=d;1<=y;y--)e=Number((g-(y-.5)*r).toFixed(6)),A.push({minValue:c,maxValue:e,label:I(c,e,n)}),c=e,k++;y=Number((g+.5*r).toFixed(6));A.push({minValue:c,maxValue:y,label:I(c,y,n)});c=y;k++;for(e=1;e<=d;e++)y=k===2*d?m:Number((g+(e+.5)*r).toFixed(6)),A.push({minValue:c,maxValue:y,label:I(c,y,n)}),c=y,k++}else if("defined-interval"===v){if(!h)return A;m=r[0];r=r[r.length-1];c=Math.ceil((r-m)/h);g=m;for(k=1;k<c;k++)y=Number((m+k*h).toFixed(6)),A.push({minValue:g,maxValue:y,label:I(g,y,n)}),
g=y;A.push({minValue:g,maxValue:r,label:I(g,r,n)})}return A}function I(g,v,d){let n=null;return n=g===v?d&&"percent-of-total"===d?g+"%":g.toString():d&&"percent-of-total"===d?g+"% - "+v+"%":g+" - "+v}function u(g){const v=[],d=[];let n=Number.MIN_VALUE,h=1,A=-1;for(let r=0;r<g.length;r++){const c=g[r];c===n?(h++,d[A]=h):null!==c&&(v.push(c),n=c,h=1,d.push(h),A++)}return{uniqueValues:v,valueFrequency:d}}function S(g,v,d){var n=g.length;const h=[];d>n&&(d=n);for(var A=0;A<d;A++)h.push(Math.round(A*
n/d-1));h.push(n-1);A=O(h,g,v,d);n=A.mean;A=A.sdcm;var r=d,c=0,m=0;let k=0,y=0,e=!0;for(let f=0;2>f&&e;f++){0===f&&(e=!1);for(var b=0;b<r-1;b++)for(;h[b+1]+1!==h[b+2];)if(h[b+1]+=1,c=l(b,h,g,v),k=c.sbMean,c=c.sbSdcm,m=l(b+1,h,g,v),y=m.sbMean,m=m.sbSdcm,c+m<A[b]+A[b+1])A[b]=c,A[b+1]=m,n[b]=k,n[b+1]=y,e=!0;else{--h[b+1];break}for(b=r-1;0<b;b--)for(;h[b]!==h[b-1]+1;)if(--h[b],c=l(b-1,h,g,v),k=c.sbMean,c=c.sbSdcm,m=l(b,h,g,v),y=m.sbMean,m=m.sbSdcm,c+m<A[b-1]+A[b])A[b-1]=c,A[b]=m,n[b-1]=k,n[b]=y,e=!0;
else{h[b]+=1;break}}e&&(A=O(h,g,v,d));return h}function O(g,v,d,n){let h=[];var A=[],r=[];let c=0;const m=[],k=[];for(var y=0;y<n;y++){var e=l(y,g,v,d);m.push(e.sbMean);k.push(e.sbSdcm);c+=k[y]}e=c;for(y=!0;y||c<e;){y=!1;h=[];for(A=0;A<n;A++)h.push(g[A]);for(r=0;r<n;r++)for(e=g[r]+1;e<=g[r+1];e++)if(A=v[e],0<r&&e!==g[r+1]&&Math.abs(A-m[r])>Math.abs(A-m[r-1]))g[r]=e;else if(r<n-1&&g[r]!==e-1&&Math.abs(A-m[r])>Math.abs(A-m[r+1])){g[r+1]=e-1;break}e=c;c=0;A=[];r=[];for(let b=0;b<n;b++){A.push(m[b]);
r.push(k[b]);const f=l(b,g,v,d);m[b]=f.sbMean;k[b]=f.sbSdcm;c+=k[b]}}if(c>e){for(v=0;v<n;v++)g[v]=h[v],m[v]=A[v],k[v]=r[v];c=e}return{mean:m,sdcm:k}}function J(g,v,d,n,h){g=Math.max(n-g,v-n)/h/d;return 1<=g?1:.5<=g?.5:.25}function T(g){let v=0;for(let d=0;d<g.length;d++)v+=g[d];return v/=g.length}function p(g,v){let d=0;for(let n=0;n<g.length;n++){const h=g[n];d+=(h-v)*(h-v)}d/=g.length;return Math.sqrt(d)}function l(g,v,d,n){var h=0,A=0;for(var r=v[g]+1;r<=v[g+1];r++){const c=n[r];h+=d[r]*c;A+=c}0>=
A&&a.warn("Exception in Natural Breaks calculation");h/=A;A=0;for(r=v[g]+1;r<=v[g+1];r++)A+=n[r]*(d[r]-h)**2;return{sbMean:h,sbSdcm:A}}const a=z.getLogger("esri.rest.support.generateRendererUtils");N.createGenerateRendererClassBreaks=function(g){const {normalizationTotal:v}=g;return{classBreaks:D(g),normalizationTotal:v}};N.createGenerateRendererUniqueValues=function(g){g=u(g);const v=[],d=g.uniqueValues.length;for(let n=0;n<d;n++){const h=g.uniqueValues[n];v.push({value:h,count:g.valueFrequency[n],
label:h.toString()})}return{uniqueValues:v}};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v,d){function n(r,c){const {attributeTable:m,bandCount:k}=r;return S.isNone(m)||1<k||c&&null==m.fields.find(y=>y.name.toLowerCase()===c.toLowerCase())?!1:!0}function h(r){const {bandCount:c,colormap:m}=r;return S.isSome(m)&&0<m.length&&1===c}function A(r){return a.isValidPixelBlock(r)&&0!==r.validPixelCount}I=function(r){function c(k){return r.call(this,k)||this}N._inheritsLoose(c,r);var m=c.prototype;m.bind=function(){const {rendererJSON:k}=this;if(!k)return{success:!1};
this.lookup={rendererJSON:{}};let y;switch(k.type){case "uniqueValue":y=this._updateUVRenderer(k);break;case "rasterColormap":y=this._updateColormapRenderer(k);break;case "rasterStretch":y=this._updateStretchRenderer(k);break;case "classBreaks":y=this._updateClassBreaksRenderer(k);break;case "rasterShadedRelief":y=this._updateShadedReliefRenderer(k);break;case "vectorField":y=this._updateVectorFieldRenderer();break;case "flowRenderer":y=this._updateFlowRenderer()}return y};m.symbolize=function(k){let y=
k&&k.pixelBlock;if(!A(y))return y;if(k.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(y,k.simpleStretchParams);try{3<y.pixels.length&&(y=a.extractBands(y,[0,1,2]));let e;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":e=this._symbolizeColormap(y);break;case "classBreaks":e=this._symbolizeClassBreaks(y);break;case "rasterStretch":e=this._symbolizeStretch(y,k.bandIds);break;case "rasterShadedRelief":const b=k.extent;e=this._symbolizeShadedRelief(y,
{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/y.width,y:(b.ymax-b.ymin)/y.height}})}return e}catch(e){return u.getLogger(this.declaredClass).error("symbolize",e.message),y}};m.simpleStretch=function(k,y){if(!A(k))return k;try{return 3<k.pixels.length&&(k=a.extractBands(k,[0,1,2])),g.stretch(k,y)}catch(e){return u.getLogger(this.declaredClass).error("symbolize",e.message),k}};m.generateWebGLParameters=function(k){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:t,
offset:x}=this.lookup.colormapLut||{};return{colormap:t,colormapOffset:x,type:"lut"}}const {pixelBlock:y,isGCS:e,resolution:b,bandIds:f}=k;({rendererJSON:k}=this);return"rasterStretch"===k.type?this._generateStretchWebGLParams(y,k,f):"rasterShadedRelief"===k.type?this._generateShadedReliefWebGLParams(k,e,b):"vectorField"===k.type?this._generateVectorFieldWebGLParams(k):null};m._isLUTChanged=function(k){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const y=
this.rendererJSON.colorRamp;if(k)return JSON.stringify(y)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};m._symbolizeColormap=function(k){return this._isLUTChanged()&&!this.bind().success?k:a.colorize(k,this.lookup.colormapLut)};m._symbolizeClassBreaks=function(k){const {canUseIndexedLUT:y}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&
!this.bind().success?k:y?a.colorize(k,this.lookup.colormapLut):a.remapColor(k,this.lookup.remapLut??[])};m._symbolizeStretch=function(k,y){const {rasterInfo:e}=this,{pixelType:b,bandCount:f}=e,t=this.rendererJSON;var x=["u8","u16","s8","s16"].includes(b);let E;var {dra:G}=t;({gamma:C}=this.lookup);if("histogramEqualization"===t.stretchType){x=G?null:this.lookup?.histogramLut;y=g.getStretchCutoff(t,{rasterInfo:e,pixelBlock:k,bandIds:y,returnHistogramLut:!x});var C=g.stretch(k,{...y,gamma:C});C=a.lookupPixels(C,
{lut:G?y.histogramLut:x,offset:0})}else if(x){if(G)G=g.getStretchCutoff(t,{rasterInfo:e,pixelBlock:k,bandIds:y}),E=g.createStretchLUT({pixelType:b,...G,gamma:C});else{if(this._isLUTChanged()&&!this.bind().success)return k;E=this.lookup?this.lookup.stretchLut:null}if(!E)return k;1<f&&y?.length===S.unwrap(k)?.pixels.length&&E?.lut.length===f&&(E={lut:y.map(F=>E.lut[F]),offset:E.offset});C=a.lookupPixels(k,E)}else G=g.getStretchCutoff(t,{rasterInfo:e,pixelBlock:k,bandIds:y}),C=g.stretch(k,{...G,gamma:C});
if(t.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return k;C=a.colorize(C,this.lookup?.colormapLut)}return C};m._symbolizeShadedRelief=function(k,y){var e=this.rendererJSON;y=v.hillshade(k,{...e,...y});if(!e.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return y;e=this.lookup?this.lookup.hsvMap:null;if(!e)return y;const b=S.unwrap(this.rasterInfo.statistics)?.[0]??{min:0,max:8E3};v.tintHillshade(y,k,e,b);return y};m._isVectorFieldData=function(){const {bandCount:k,dataType:y}=
this.rasterInfo;return 2===k&&("vector-magdir"===y||"vector-uv"===y)};m._updateVectorFieldRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}};m._updateFlowRenderer=function(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}};
m._updateUVRenderer=function(k){const {bandCount:y,attributeTable:e,pixelType:b}=this.rasterInfo,f=k.field1;if(!f)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const t=k.defaultSymbol;var x=1===y&&["u8","s8"].includes(b);if(!n(this.rasterInfo,f)&&!x)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const E=[];if(S.isSome(e)){const G=e.fields.find(C=>"value"===C.name.toLowerCase());
if(!G)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};e.features.forEach(C=>{const F=k.uniqueValueInfos?.find(w=>String(w.value)===String(C.attributes[f]))?.symbol?.color;F?E.push([C.attributes[G.name]].concat(F)):t&&E.push([C.attributes[G.name]].concat(t.color))})}else{if("value"!==f.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};k.uniqueValueInfos?.forEach(G=>
{const C=G?.symbol?.color;C?E.push([parseInt(""+G.value,10)].concat(C)):t&&E.push([parseInt(""+G.value,10)].concat(t?.color))})}if(0===E.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};x=a.createColormapLUT({colormap:E});this.lookup={rendererJSON:k,colormapLut:x};this.canRenderInWebGL=!0;return{success:!0}};m._updateColormapRenderer=function(k){if(!h(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};
var y=k.colormapInfos.map(e=>[e.value].concat(e.color)).sort((e,b)=>e[0]-b[0]);if(!y||0===y.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};y=a.createColormapLUT({colormap:y});this.lookup={rendererJSON:k,colormapLut:y};this.canRenderInWebGL=!0;return{success:!0}};m._updateShadedReliefRenderer=function(k){const {bandCount:y,dataType:e,pixelType:b}=this.rasterInfo;if("elevation"!==e&&("generic"!==e||1!==y||"s16"!==b&&"f32"!==b&&"f64"!==b))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(k.colorRamp){var f=d.convertColorRampToColormap(k.colorRamp,256,!0);f=a.createColormapLUT({colormap:f});const t=[],x=f.indexedColormap;for(let E=0;E<x.length;E+=4){const G=D.toHSV({r:x[E],g:x[E+1],b:x[E+2]});t.push([G.h/60,G.s/100,255*G.v/100])}this.lookup={rendererJSON:k,colormapLut:f,hsvMap:t}}else this.lookup=null;this.canRenderInWebGL=!0;return{success:!0}};
m._analyzeClassBreaks=function(k){const {attributeTable:y,pixelType:e}=this.rasterInfo,b=S.isSome(y)?y.fields.find(x=>"value"===x.name.toLowerCase()):null,f=S.isSome(y)?y.fields.find(x=>x.name.toLowerCase()===k.field.toLowerCase()):null,t=null!=b&&null!==f;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(e)||t,tableValueField:b,tableBreakField:f}};m._updateClassBreaksRenderer=function(k){var {attributeTable:y}=this.rasterInfo;const {canUseIndexedLUT:e,tableValueField:b,tableBreakField:f}=
this._analyzeClassBreaks(k);var t=k.classBreakInfos;if(!t?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};t=t.sort((F,w)=>F.classMaxValue-w.classMaxValue);var x=t[t.length-1],E=k.minValue;if(!e){var G=[];for(var C=0;C<t.length;C++)G.push({value:t[C].classMinValue??E,mappedColor:t[C].symbol.color}),E=t[C].classMaxValue;G.push({value:x.classMaxValue,mappedColor:x.symbol.color});this.lookup={rendererJSON:k,remapLut:G};this.canRenderInWebGL=
!1;return{success:!0}}G=[];if(S.isSome(y)&&null!=b&&null!==f&&b!==f){x=b.name;const F=f.name,w=t[t.length-1],{classMaxValue:H}=w;E=k.minValue;for(C of y.features){y=C.attributes[x];const q=C.attributes[F],B=q===H?w:q<E?null:t.find(({classMaxValue:R})=>R>q);B&&G.push([y].concat(B.symbol.color))}}else{E=Math.floor(k.minValue);for(C=0;C<t.length;C++){for(y=t[C];E<y.classMaxValue;E++)G.push([E].concat(y.symbol.color));E=Math.ceil(y.classMaxValue)}x.classMaxValue===E&&G.push([x.classMaxValue].concat(x.symbol.color))}t=
a.createColormapLUT({colormap:G,fillUnspecified:!1});this.lookup={rendererJSON:k,colormapLut:t};this.canRenderInWebGL=!0;return{success:!0}};m._isHistogramRequired=function(k){return"percentClip"===k||"histogramEqualization"===k};m._isValidRasterStatistics=function(k){return S.isSome(k)&&0<k.length&&null!=k[0].min&&null!=k[0].max};m._updateStretchRenderer=function(k){let {stretchType:y,dra:e}=k;if(!("none"===y||k.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||e))return{success:!1,
error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var b=S.unwrap(k.histograms||this.rasterInfo.histograms);!this._isHistogramRequired(k.stretchType)||b?.length||e||(y="minMax");const {computeGamma:f,useGamma:t,colorRamp:x}=k;var {gamma:E}=k;t&&f&&!E?.length&&(E=k.statistics?.length?k.statistics:S.unwrap(this.rasterInfo.statistics),E=g.computeGammaValues(this.rasterInfo.pixelType,E));const G=this.rasterInfo.pixelType,C=!e&&["u8","u16",
"s8","s16"].includes(G);"histogramEqualization"===y?(b=b.map(F=>g.createHistogramEqualizationLUT(F)),this.lookup={rendererJSON:k,histogramLut:b}):C&&(b=g.getStretchCutoff(k,{rasterInfo:this.rasterInfo}),b=g.createStretchLUT({pixelType:G,...b,gamma:t?E:null}),this.lookup={rendererJSON:k,stretchLut:b});x&&(b=d.convertColorRampToColormap(x,256,!0),this.lookup||(this.lookup={rendererJSON:k}),this.lookup.colormapLut=a.createColormapLUT({colormap:b}),this.lookup.rendererJSON=k);this.lookup.gamma=t&&E?.length?
E:null;this.canRenderInWebGL=!0;return{success:!0}};m._generateStretchWebGLParams=function(k,y,e){let b=null,f=null;var t=this.lookup&&this.lookup.colormapLut;y.colorRamp&&t&&(b=t.indexedColormap,f=t.offset);"histogramEqualization"===y.stretchType&&(y={...y,stretchType:"minMax"});({gamma:t}=this.lookup);const x=!!(y.useGamma&&t&&t.some(B=>1!==B)),{minCutOff:E,maxCutOff:G,outMin:C,outMax:F}=g.getStretchCutoff(y,{rasterInfo:this.rasterInfo,pixelBlock:k,bandIds:e});var w=0;S.isSome(k)&&(w=k.getPlaneCount(),
2===w&&(k=k.clone(),k.statistics=[k.statistics[0]],k.pixels=[k.pixels[0]]));k=Math.min(3,e?.length||w||this.rasterInfo.bandCount);e=new Float32Array(k);w=b||x?1:255;let H;for(H=0;H<k;H++)e[H]=(F-C)/(G[H]-E[H])/w;const q=new Float32Array(k);if(x)for(H=0;H<k;H++)q[H]=1<t[H]?2<t[H]?6.5+(t[H]-2)**2.5:6.5+100*(2-t[H])**4:1;return{bandCount:k,outMin:C/w,outMax:F/w,minCutOff:E,maxCutOff:G,factor:e,useGamma:x,gamma:x?t:[1,1,1],gammaCorrection:x?q:[1,1,1],colormap:b,colormapOffset:f,stretchType:y.stretchType,
type:"stretch"}};m._generateShadedReliefWebGLParams=function(k,y=!1,e={x:0,y:0}){let b=null,f=null;const t=this.lookup&&this.lookup.colormapLut;k.colorRamp&&t&&(b=t.indexedColormap,f=t.offset);y=v.calculateHillshadeParams({...k,isGCS:y,resolution:e});e=S.unwrap(this.rasterInfo.statistics)?.[0];return{...y,minValue:e?.min??0,maxValue:e?.max??8E3,hillshadeType:"traditional"===k.hillshadeType?0:1,type:"hillshade",colormap:b,colormapOffset:f}};m._generateVectorFieldWebGLParams=function(k){const {style:y,
inputUnit:e,outputUnit:b,visualVariables:f,symbolTileSize:t,flowRepresentation:x}=k;let E;var G=this.rasterInfo.statistics?.[0].min??0,C=this.rasterInfo.statistics?.[0].max??50,F=f?.find(q=>"sizeInfo"===q.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:C,maxSize:.8*t,minDataValue:G,minSize:.2*t},w=F.minDataValue??G,H=F.maxDataValue??C;C=S.isSome(F.maxSize)&&S.isSome(F.minSize)?[F.minSize/t,F.maxSize/t]:[.2,.8];"wind_speed"===y&&(C[0]=C[1]=(C[0]+C[1])/2);G=S.isSome(w)&&S.isSome(H)?[w,H]:null;
if("classified_arrow"===y)if(S.isSome(w)&&S.isSome(H)&&S.isSome(F))for(E=[],w=(F.maxDataValue-F.minDataValue)/5,H=0;6>H;H++)E.push(F.minDataValue+w*H);else E=[0,1E-6,3.5,7,10.5,14];F="flow_to"===x===("ocean_current_kn"===y||"ocean_current_m"===y)?0:Math.PI;w=f?.find(q=>"rotationInfo"===q.type);return{breakValues:E,dataRange:G,inputUnit:e,outputUnit:b,symbolTileSize:t,symbolPercentRange:C,style:y||"single_arrow",rotation:F,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?
"geographic":w?.rotationType||k.rotationType,type:"vectorField"}};return c}(I.JSONSupport);z.__decorate([O.property({json:{write:!0}})],I.prototype,"rendererJSON",void 0);z.__decorate([O.property({type:l,json:{write:!0}})],I.prototype,"rasterInfo",void 0);z.__decorate([O.property({json:{write:!0}})],I.prototype,"lookup",void 0);z.__decorate([O.property()],I.prototype,"canRenderInWebGL",void 0);return I=z.__decorate([p.subclass("esri.renderers.support.RasterSymbolizer")],I)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports",
"../../../core/maybe","../PixelBlock","../../../renderers/support/stretchRendererUtils"],function(N,z,D,I){function u(l,a=256){a=Math.min(a,256);const {size:g,counts:v}=l;l=new Uint8Array(g);var d=v.reduce((c,m)=>c+m/a,0);let n=0;var h=0;let A=0,r=d;for(let c=0;c<g;c++)if(A+=v[c],!(c<g-1&&A+v[c+1]<r)){for(;n<a-1&&r<A;)n++,r+=d;for(;h<=c;h++)l[h]=n;h=c+1}for(d=h;d<g;d++)l[d]=a-1;return l}function S(l,a){l=Math.min(Math.max(l,-100),100);a=Math.min(Math.max(a??0,-100),100);let g=0,v=0;const d=new Uint8Array(256);
for(g=0;256>g;g++)0<l&&100>l?v=(200*g-25500+510*a)/(2*(100-l))+128:0>=l&&-100<l?v=(200*g-25500+510*a)*(100+l)/2E4+128:100===l?(v=200*g-25500+256*(100-l)+510*a,v=0<v?255:0):-100===l&&(v=128),d[g]=255<v?255:0>v?0:v;return d}function O(l){if(z.isNone(l)||!l.pixels?.length)return null;l.statistics||l.updateStatistics();const {pixels:a,mask:g,pixelType:v,statistics:d}=l;l=l.width*l.height;const n=a.length;let h,A;let r;var c;const m=[],k=[];for(r=0;r<n;r++){var y=new Uint32Array(256);var e=a[r];if("u8"===
v)if(h=-.5,A=255.5,g)for(c=0;c<l;c++)g[c]&&y[e[c]]++;else for(c=0;c<l;c++)y[e[c]]++;else{z.assertIsSome(d);h=d[r].minValue;A=d[r].maxValue;var b=(A-h)/256;var f=new Uint32Array(257);if(g)for(c=0;c<l;c++)g[c]&&f[Math.floor((e[c]-h)/b)]++;else for(c=0;c<l;c++)f[Math.floor((e[c]-h)/b)]++;for(c=0;255>c;c++)y[c]=f[c];y[255]=f[255]+f[256]}m.push({min:h,max:A,size:256,counts:y});for(c=e=f=b=0;256>c;c++)b+=y[c],f+=c*y[c];f/=b;for(c=0;256>c;c++)e+=y[c]*(c-f)**2;y=Math.sqrt(e/(b-1));b=(A-h)/256;c=(f+.5)*b+
h;y*=b;k.push({min:h,max:A,avg:c,stddev:y})}return{statistics:k,histograms:m}}function J(l,a){if(null==a||0===a.length)return l;const g=Math.max.apply(null,a),{minCutOff:v,maxCutOff:d,outMin:n,outMax:h,histogramLut:A}=l;return v.length===a.length||v.length<=g?l:{minCutOff:a.map(r=>v[r]),maxCutOff:a.map(r=>d[r]),histogramLut:A?a.map(r=>A[r]):null,outMin:n,outMax:h}}const T={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],
f32:[-3.4*1E39,3.4*1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},p=[.299,.587,.114];N.computeGammaValues=function(l,a,g){const v=[];for(let r=0;r<a.length;r++){var d=0,n=0,h=0;"min"in a[r]?{min:d,max:n,avg:h}=a[r]:[d,n,h]=a[r];h=h??0;"u8"!==l&&(h=255*(h-d)/(n-d));g&&(h*=p[r]);d=v;n=d.push;if(0>=h||255<=h)h=1;else{var A=0;150!==h&&(A=150>=h?45*Math.cos(.01047*h):17*Math.sin(.021*h));A=Math.log((h+A)/255);0===A?h=1:(h=Math.log(h/255)/A,h=isNaN(h)?1:Math.min(9.9,Math.max(.01,h)))}n.call(d,h)}return v};
N.createContrastBrightnessLUT=S;N.createHistogramEqualizationLUT=u;N.createStretchLUT=function(l){const {minCutOff:a,maxCutOff:g,gamma:v,pixelType:d}=l,n=l.outMin||0,h=l.outMax||255;if(!["u8","u16","s8","s16"].includes(d))return null;const A=a.length;let r;let c=0;"s8"===d?c=-127:"s16"===d&&(c=-32767);let m=256;["u16","s16"].includes(d)&&(m=65536);const k=[],y=h-n;for(r=0;r<A;r++)k[r]=g[r]-a[r],y/(g[r]-a[r]);var e=v&&v.length>=A;const b=[];if(e)for(r=0;r<A;r++)b[r]=1<v[r]?2<v[r]?6.5+(v[r]-2)**2.5:
6.5+100*(2-v[r])**4:1;let f;const t=[];let x,E,G;if(e)for(r=0;r<A;r++){G=[];for(e=0;e<m;e++)x=e+c,f=(x-a[r])/k[r],E=1,1<v[r]&&(E-=(1/y)**(f*b[r])),G[e]=x<g[r]&&x>a[r]?Math.floor(E*y*f**(1/v[r]))+n:x>=g[r]?h:n;t[r]=G}else for(r=0;r<A;r++){G=[];for(e=0;e<m;e++)x=e+c,G[e]=x<=a[r]?n:x>=g[r]?h:Math.floor((x-a[r])/k[r]*y)+n;t[r]=G}if(null!=l.contrastOffset)for(l=S(l.contrastOffset,l.brightnessOffset),r=0;r<A;r++)for(G=t[r],e=0;e<m;e++)G[e]=l[G[e]];return{lut:t,offset:c}};N.estimateStatisticsFromHistograms=
function(l){const a=[];for(let n=0;n<l.length;n++){const {min:h,max:A,size:r,counts:c}=l[n];let m=0;var g=0;for(var v=0;v<r;v++)m+=c[v],g+=v*c[v];g/=m;v=0;for(var d=0;d<r;d++)v+=c[d]*(d-g)**2;d=(A-h)/r;a.push({min:h,max:A,avg:(g+.5)*d+h,stddev:Math.sqrt(v/(m-1))*d})}return a};N.estimateStatisticsHistograms=O;N.getStretchCutoff=function(l,a){const {pixelBlock:g,bandIds:v,returnHistogramLut:d,rasterInfo:n}=a;var h=null;a=null;var A=l.stretchType;"number"===typeof A&&(A=I.stretchTypeFunctionEnum[A]);
l.dra?"minMax"===A&&z.isSome(g)&&g.statistics?h=g.statistics.map(E=>[E.minValue,E.maxValue,0,0]):(a=O(g),h=z.isSome(a)?a.statistics:null,a=z.isSome(a)?a.histograms:null):(h=0<l.statistics?.length?l.statistics:z.unwrap(n.statistics),a=l.histograms||z.unwrap(n.histograms));"percentClip"!==A&&"histogramEqualization"!==A||a?.length||(A="minMax");var r=h?.length||a?.length||n.bandCount;const c=[],m=[];let k;let y,e,b,f;h&&!Array.isArray(h[0])&&(h=h.map(E=>[E.min,E.max,E.avg,E.stddev]));switch(A){case "none":h=
T[n.pixelType]||T.f32;for(b=0;b<r;b++)c[b]=h[0],m[b]=h[1];break;case "minMax":z.assertIsSome(h);for(b=0;b<r;b++)c[b]=h[b][0],m[b]=h[b][1];break;case "standardDeviation":z.assertIsSome(h);for(b=0;b<r;b++)c[b]=h[b][2]-l.numberOfStandardDeviations*h[b][3],m[b]=h[b][2]+l.numberOfStandardDeviations*h[b][3],c[b]<h[b][0]&&(c[b]=h[b][0]),m[b]>h[b][1]&&(m[b]=h[b][1]);break;case "histogramEqualization":z.assertIsSome(a);for(b=0;b<r;b++)c[b]=a[b].min,m[b]=a[b].max;break;case "percentClip":z.assertIsSome(a);
for(b=0;b<a.length;b++){h=a[b];y=new Uint32Array(h.size);var t=[...h.counts];20<=t.length&&(t[0]=t[1]=t[2]=t[t.length-1]=t[t.length-2]=0);k=0;r=(h.max-h.min)/h.size;e=-.5===h.min&&1===r?.5:0;for(f=0;f<h.size;f++)k+=t[f],y[f]=k;t=(l.minPercent||0)*k/100;for(f=0;f<h.size;f++)if(y[f]>t){c[b]=h.min+r*(f+e);break}t=(1-(l.maxPercent||0)/100)*k;for(f=h.size-2;0<=f;f--)if(y[f]<t){m[b]=h.min+r*(f+2-e);break}}break;default:for(z.assertIsSome(h),b=0;b<r;b++)c[b]=h[b][0],m[b]=h[b][1]}let x;"histogramEqualization"===
A?(z.assertIsSome(a),A=a[0].size||256,l=0,d&&(x=a.map(E=>u(E)))):(A=l.max||255,l=l.min||0);return J({minCutOff:c,maxCutOff:m,outMax:A,outMin:l,histogramLut:x},v)};N.stretch=function(l,a){if(z.isNone(l)||!l.pixels?.length)return l;const {mask:g,width:v,height:d,pixels:n}=l,{minCutOff:h,maxCutOff:A,gamma:r}=a;var c=a.outMin||0;const m=a.outMax||255,k=v*d,y=a.outputPixelType||"u8";l=l.pixels.map(()=>D.createEmptyBand(y,k));a=l.length;let e;let b,f,t;const x=m-c,E=[];for(e=0;e<a;e++)E[e]=A[e]-h[e],x/
(A[e]-h[e]);var G=r&&r.length>=a;const C=[];if(G)for(e=0;e<a;e++)C[e]=1<r[e]?2<r[e]?6.5+(r[e]-2)**2.5:6.5+100*(2-r[e])**4:1;if(G)if(null!=g)for(G=0;G<k;G++){if(g[G])for(e=0;e<a;e++)b=n[e][G],t=(b-h[e])/E[e],f=1,1<r[e]&&(f-=(1/x)**(t*C[e])),l[e][G]=b<A[e]&&b>h[e]?Math.floor(f*x*t**(1/r[e]))+c:b>=A[e]?m:c}else for(G=0;G<k;G++)for(e=0;e<a;e++)b=n[e][G],t=(b-h[e])/E[e],f=1,1<r[e]&&(f-=(1/x)**(t*C[e])),l[e][G]=b<A[e]&&b>h[e]?Math.floor(f*x*t**(1/r[e]))+c:b>=A[e]?m:c;else if(null!=g)for(G=0;G<k;G++){if(g[G])for(e=
0;e<a;e++)b=n[e][G],l[e][G]=b<A[e]&&b>h[e]?Math.floor((b-h[e])/E[e]*x)+c:b>=A[e]?m:c}else for(G=0;G<k;G++)for(e=0;e<a;e++)b=n[e][G],l[e][G]=b<A[e]&&b>h[e]?Math.floor((b-h[e])/E[e]*x)+c:b>=A[e]?m:c;c=new D({width:v,height:d,mask:g,pixels:l,pixelType:y});c.updateStatistics();return c};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","./pixelUtils"],
function(N,z,D,I){function u(S){let {altitude:O,azimuth:J}=S;const {hillshadeType:T,pixelSizePower:p=1,pixelSizeFactor:l=1,scalingType:a,isGCS:g,resolution:v}=S;var d="multi-directional"===T?2*S.zFactor:S.zFactor;const {x:n,y:h}=v;S=d/(8*n);var A=d/(8*h);g&&.001<d&&(S/=111E3,A/=111E3);"adjusted"===a&&(g?(S=111E3*n,A=111E3*h,S=(d+S**p*l)/(8*S),A=(d+A**p*l)/(8*A)):(S=(d+n**p*l)/(8*n),A=(d+h**p*l)/(8*h)));var r=(90-O)*Math.PI/180;d=Math.cos(r);let c=(360-J+90)*Math.PI/180,m=Math.sin(r)*Math.cos(c);r=
Math.sin(r)*Math.sin(c);const k=[315,270,225,360,180,0],y=[60,60,60,60,60,90];var e=new Float32Array([3,5,3,2,1,4]);const b=e.reduce((G,C)=>G+C);e=e.map(G=>G/b);const f="multi-directional"===T?k.length:1,t=new Float32Array(6),x=new Float32Array(6),E=new Float32Array(6);if("multi-directional"===T)for(let G=0;G<f;G++)O=y[G],J=k[G],r=(90-O)*Math.PI/180,d=Math.cos(r),c=(360-J+90)*Math.PI/180,m=Math.sin(r)*Math.cos(c),r=Math.sin(r)*Math.sin(c),t[G]=d,x[G]=m,E[G]=r;else t.fill(d),x.fill(m),E.fill(r);return{resolution:v,
factor:[S,A],sinZcosA:m,sinZsinA:r,cosZ:d,sinZcosAs:x,sinZsinAs:E,cosZs:t,weights:e,hillshadeType:["traditional","multi-directional"].indexOf(T)}}N.aspect=function(S,O={}){if(!I.isValidPixelBlock(S))return S;const {width:J,height:T,mask:p}=S;var l=S.pixels[0];const a=new Uint8Array(J*T);z.isSome(p)&&a.set(p);const g=new Float32Array(J*T);var {resolution:v}=O;O=v?1/v.x:1;v=v?1/v.y:1;let d;let n,h,A,r;const c=z.isSome(p);for(let e=1;e<T-1;e++){const b=e*J;for(let f=1;f<J-1;f++)if(p&&!p[b+f])g[b+f]=
0;else{var m=0;if(c&&(m=p[b-J+f-1]+p[b-J+f]+p[b-J+f+1]+p[b+f-1]+p[b+f+1]+p[b+J+f-1]+p[b+J+f]+p[b+J+f+1],7>m)){g[b+f]=0;a[b+f]=0;continue}if(p&&7===m){m=p[b-J+f-1]?l[b-J+f-1]:l[b+f];var k=p[b-J+f]?l[b-J+f]:l[b+f];d=p[b-J+f+1]?l[b-J+f+1]:l[b+f];var y=p[b+f-1]?l[b+f-1]:l[b+f];n=p[b+f+1]?l[b+f+1]:l[b+f];h=p[b+J+f-1]?l[b+J+f-1]:l[b+f];A=p[b+J+f]?l[b+J+f]:l[b+f];r=p[b+J+f+1]?l[b+J+f+1]:l[b+f]}else m=l[b-J+f-1],k=l[b-J+f],d=l[b-J+f+1],y=l[b+f-1],n=l[b+f+1],h=l[b+J+f-1],A=l[b+J+f],r=l[b+J+f+1];y=(d+n+n+r-
(m+y+y+h))*O;m=(h+A+A+r-(m+k+k+d))*v;k=-1;if(0!==y||0!==m)k=90-57.29578*Math.atan2(m,-y),0>k&&(k+=360),360===k?k=0:360<k&&(k%=360);g[b+f]=k}}for(l=0;l<T;l++)g[l*J]=g[l*J+1],g[(l+1)*J-1]=g[(l+1)*J-2];for(l=1;l<J-1;l++)g[l]=g[l+J],g[l+(T-1)*J]=g[l+(T-2)*J];return new D({width:J,height:T,pixels:[g],mask:p?a:null,pixelType:"f32",validPixelCount:S.validPixelCount,statistics:[{minValue:0,maxValue:360}]})};N.calculateHillshadeParams=u;N.hillshade=function(S,O){if(!I.isValidPixelBlock(S))return S;const {width:J,
height:T,mask:p}=S,l=new Uint8Array(J*T);var a=1;if(z.isSome(p)){for(var g=0;g<p.length;g++)if(p[g]){a=p[g];break}l.set(p)}const {factor:v,sinZcosA:d,sinZsinA:n,cosZ:h,sinZcosAs:A,sinZsinAs:r,cosZs:c,weights:m}=u(O),[k,y]=v;({hillshadeType:g}=O);const e=S.pixels[0];O=new Uint8Array(J*T);let b;const f=z.isSome(p);for(let H=1;H<T-1;H++){const q=H*J;for(let B=1;B<J-1;B++)if(p&&!p[q+B])O[q+B]=0;else{var t=8;if(f&&(t=(p[q-J+B-1]+p[q-J+B]+p[q-J+B+1]+p[q+B-1]+p[q+B+1]+p[q+J+B-1]+p[q+J+B]+p[q+J+B+1])/a,7>
t)){O[q+B]=0;l[q+B]=0;continue}if(p&&7===t){var x=p[q-J+B-1]?e[q-J+B-1]:e[q+B];var E=p[q-J+B]?e[q-J+B]:e[q+B];var G=p[q-J+B+1]?e[q-J+B+1]:e[q+B];t=p[q+B-1]?e[q+B-1]:e[q+B];b=p[q+B+1]?e[q+B+1]:e[q+B];var C=p[q+J+B-1]?e[q+J+B-1]:e[q+B];var F=p[q+J+B]?e[q+J+B]:e[q+B];var w=p[q+J+B+1]?e[q+J+B+1]:e[q+B]}else x=e[q-J+B-1],E=e[q-J+B],G=e[q-J+B+1],t=e[q+B-1],b=e[q+B+1],C=e[q+J+B-1],F=e[q+J+B],w=e[q+J+B+1];t=(G+b+b+w-(x+t+t+C))*k;x=(C+F+F+w-(x+E+E+G))*y;E=Math.sqrt(1+t*t+x*x);G=0;if("traditional"===g)t=255*
(h+n*x-d*t)/E,0>t&&(t=0),G=t;else for(C=r.length,F=0;F<C;F++)w=255*(c[F]+r[F]*x-A[F]*t)/E,0>w&&(w=0),G+=w*m[F];O[q+B]=G&255}}for(a=0;a<T;a++)O[a*J]=O[a*J+1],O[(a+1)*J-1]=O[(a+1)*J-2];for(a=1;a<J-1;a++)O[a]=O[a+J],O[a+(T-1)*J]=O[a+(T-2)*J];return new D({width:J,height:T,pixels:[O],mask:p?l:null,pixelType:"u8",validPixelCount:S.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};N.slope=function(S,O){if(!I.isValidPixelBlock(S))return S;var J=O.zFactor,T=O.pixelSizePower??1,p=O.pixelSizeFactor??
1;const l=O.slopeType;var a=O.isGCS;const {width:g,height:v,mask:d}=S;var n=S.pixels[0];const h=new Uint8Array(g*v);let A=1;if(z.isSome(d)){for(var r=0;r<d.length;r++)if(d[r]){A=d[r];break}h.set(d)}r=new Float32Array(g*v);const {x:c,y:m}=O.resolution;O=J/(8*c);var k=J/(8*m);a&&1E-4>Math.abs(J-1)&&(O/=111E3,k/=111E3);"adjusted"===l&&(a?(O=111E3*c,k=111E3*m,O=(J+O**T*p)/(8*O),k=(J+k**T*p)/(8*k)):(O=(J+c**T*p)/(8*c),k=(J+m**T*p)/(8*m)));let y,e;let b,f,t,x;J=z.isSome(d);for(T=1;T<v-1;T++)for(p=T*g,a=
1;a<g-1;a++)if(d&&!d[p+a])r[p+a]=0;else{var E=0;if(J&&(E=(d[p-g+a-1]+d[p-g+a]+d[p-g+a+1]+d[p+a-1]+d[p+a+1]+d[p+g+a-1]+d[p+g+a]+d[p+g+a+1])/A,7>E)){r[p+a]=0;h[p+a]=0;continue}if(d&&7===E){E=d[p-g+a-1]?n[p-g+a-1]:n[p+a];y=d[p-g+a]?n[p-g+a]:n[p+a];e=d[p-g+a+1]?n[p-g+a+1]:n[p+a];var G=d[p+a-1]?n[p+a-1]:n[p+a];b=d[p+a+1]?n[p+a+1]:n[p+a];f=d[p+g+a-1]?n[p+g+a-1]:n[p+a];t=d[p+g+a]?n[p+g+a]:n[p+a];x=d[p+g+a+1]?n[p+g+a+1]:n[p+a]}else E=n[p-g+a-1],y=n[p-g+a],e=n[p-g+a+1],G=n[p+a-1],b=n[p+a+1],f=n[p+g+a-1],t=
n[p+g+a],x=n[p+g+a+1];G=(e+b+b+x-(E+G+G+f))*O;E=(f+t+t+x-(E+y+y+e))*k;E=Math.sqrt(G*G+E*E);r[p+a]="percent-rise"===l?100*E:57.2957795*Math.atan(E)}for(n=0;n<v;n++)r[n*g]=r[n*g+1],r[(n+1)*g-1]=r[(n+1)*g-2];for(n=1;n<g-1;n++)r[n]=r[n+g],r[n+(v-1)*g]=r[n+(v-2)*g];return new D({width:g,height:v,pixels:[r],mask:d?h:null,pixelType:"f32",validPixelCount:S.validPixelCount,statistics:[{minValue:0,maxValue:"percent-rise"===l?100:360}]})};N.tintHillshade=function(S,O,J,T){if(I.isValidPixelBlock(S)&&I.isValidPixelBlock(O)){var {min:p,
max:l}=T;T=S.pixels[0];var {pixels:a,mask:g}=O;O=a[0];var v=255.00001/(l-p),d=new Uint8ClampedArray(O.length),n=new Uint8ClampedArray(O.length),h=new Uint8ClampedArray(O.length),A=J.length-1;for(let m=0;m<O.length;m++){if(g&&0===g[m])continue;var r=Math.floor((O[m]-p)*v);const [k,y]=J[0>r?0:r>A?A:r];var c=T[m];r=c*y;const e=r*(1-Math.abs(k%2-1));c-=r;switch(Math.floor(k)){case 0:d[m]=r+c;n[m]=e+c;h[m]=c;break;case 1:d[m]=e+c;n[m]=r+c;h[m]=c;break;case 2:d[m]=c;n[m]=r+c;h[m]=e+c;break;case 3:d[m]=
c;n[m]=e+c;h[m]=r+c;break;case 4:d[m]=e+c;n[m]=c;h[m]=r+c;break;case 5:case 6:d[m]=r+c,n[m]=c,h[m]=e+c}}S.pixels=[d,n,h];S.updateStatistics()}};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/imageService":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../geometry ../request ../core/maybe ../geometry/support/normalizeUtils ./utils ./support/ImageAngleResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImageSampleResult ../geometry/SpatialReference".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a){function g(e){const b=e?.time;if(b&&(null!=b.start||null!=b.end)){const f=[];null!=b.start&&f.push(b.start);null==b.end||f.includes(b.end)||f.push(b.end);e.time=f.join(",")}}function v(e,b,f){return d.apply(this,arguments)}function d(){d=z._asyncToGenerator(function*(e,b,f){e=O.parseUrl(e);var t=yield S.normalizeCentralMeridian(b.geometry?[b.geometry]:[]);b=b.toJSON();g(b);t=t&&t[0];u.isSome(t)&&(b.geometry=t.toJSON());e=O.encode({...e.query,f:"json",...b});return O.asValidOptions(e,
f)});return d.apply(this,arguments)}function n(){n=z._asyncToGenerator(function*(e,b,f){var t=b.toJSON();u.isSome(t.angleName)&&(t.angleName=t.angleName.join(","));u.isSome(b.point)&&b.point.spatialReference?.imageCoordinateSystem&&(t.point.spatialReference=k(b.point.spatialReference));u.isSome(b.spatialReference)&&b.spatialReference.imageCoordinateSystem&&(t.spatialReference=y(b.spatialReference));e=O.parseUrl(e);t=O.encode({...e.query,f:"json",...t});f=O.asValidOptions(t,f);({data:f}=yield I(`${e.path}/computeAngles`,
f));f.spatialReference=f.spatialReference?null!=f.spatialReference.geodataXform?new a({wkid:0,imageCoordinateSystem:f.spatialReference}):a.fromJSON(f.spatialReference):null;"NaN"===f.north&&(f.north=null);"NaN"===f.up&&(f.up=null);return new J(f)});return n.apply(this,arguments)}function h(){h=z._asyncToGenerator(function*(e,b,f){var t=b.toJSON();({geometries:b}=b);if(b)for(let x=0;x<b.length;x++)b[x].spatialReference?.imageCoordinateSystem&&(t.geometries.geometries[x].spatialReference=k(b[x].spatialReference));
e=O.parseUrl(e);t=O.encode({...e.query,f:"json",...t});f=O.asValidOptions(t,f);({data:f}=yield I(`${e.path}/computePixelLocation`,f));return p.fromJSON(f)});return h.apply(this,arguments)}function A(){A=z._asyncToGenerator(function*(e,b,f){b=yield v(e,b,f);e=O.parseUrl(e);({data:e}=yield I(`${e.path}/computeStatisticsHistograms`,b));({statistics:b}=e);b?.length&&b.forEach(t=>{t.avg=t.mean;t.stddev=t.standardDeviation});return{statistics:b,histograms:e.histograms}});return A.apply(this,arguments)}
function r(){r=z._asyncToGenerator(function*(e,b,f){b=yield v(e,b,f);e=O.parseUrl(e);({data:e}=yield I(`${e.path}/computeHistograms`,b));return{histograms:e.histograms}});return r.apply(this,arguments)}function c(){c=z._asyncToGenerator(function*(e,b,f){var t=b.toJSON();g(t);t.outFields?.length&&(t.outFields=t.outFields.join(","));b=(yield S.normalizeCentralMeridian(b.geometry))?.[0];u.isSome(b)&&(t.geometry=b.toJSON());e=O.parseUrl(e);t=O.encode({...e.query,f:"json",...t});f=O.asValidOptions(t,f);
({data:f}=yield I(`${e.path}/getSamples`,f));f=f?.samples?.map(x=>{const E="NaN"===x.value||""===x.value?null:x.value.split(" ").map(G=>Number(G));return{...x,pixelValue:E}});return l.fromJSON({samples:f})});return c.apply(this,arguments)}function m(){m=z._asyncToGenerator(function*(e,b,f){const t=O.parseUrl(e);return S.normalizeCentralMeridian(b.geometry?[b.geometry]:[]).then(x=>{var E=b.toJSON();x=x&&x[0];u.isSome(x)&&(E.geometry=JSON.stringify(x.toJSON()));E=O.encode({...t.query,f:"json",...E});
E=O.asValidOptions(E,f);return I(t.path+"/identify",E)}).then(x=>T.fromJSON(x.data))});return m.apply(this,arguments)}function k(e){const {imageCoordinateSystem:b}=e;if(b){const {id:f,referenceServiceName:t}=b;return null!=f?t?{icsid:f,icsns:t}:{icsid:f}:{ics:b}}return e.toJSON()}function y(e,b){e=k(e);const {icsid:f,icsns:t,wkid:x}=e;return null!=f?null==t||b?.toLowerCase().includes("/"+t.toLowerCase()+"/")?`0:${f}`:JSON.stringify(e):x?x.toString():JSON.stringify(e)}N.computeAngles=function(e,b,
f){return n.apply(this,arguments)};N.computeHistograms=function(e,b,f){return r.apply(this,arguments)};N.computePixelSpaceLocations=function(e,b,f){return h.apply(this,arguments)};N.computeStatisticsHistograms=function(e,b,f){return A.apply(this,arguments)};N.getImageSpatialReferenceJSON=k;N.getImageSpatialReferenceQueryParameter=y;N.getSamples=function(e,b,f){return c.apply(this,arguments)};N.identify=function(e,b,f){return m.apply(this,arguments)};Object.defineProperties(N,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ImageAngleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),function(N,z,D,I,u,S,O,J,T){D=function(p){function l(){var a=p.apply(this,arguments)||this;a.north=null;
a.up=null;a.spatialReference=null;return a}N._inheritsLoose(l,p);return l}(I.JSONSupport);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"north",void 0);z.__decorate([u.property({type:Number,json:{write:!0}})],D.prototype,"up",void 0);z.__decorate([u.property({type:T,json:{write:!0}})],D.prototype,"spatialReference",void 0);return D=z.__decorate([J.subclass("esri.rest.support.ImageAngleResult")],D)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(N,z,D,I,u,S,O,J,T){D=function(p){function l(){var a=p.apply(this,arguments)||this;a.catalogItemVisibilities=null;a.catalogItems=null;a.location=null;a.name=null;a.objectId=null;a.processedValues=null;a.properties=null;a.value=null;return a}N._inheritsLoose(l,p);return l}(D.JSONSupport);z.__decorate([I.property({json:{write:!0}})],D.prototype,"catalogItemVisibilities",void 0);z.__decorate([I.property({type:T,json:{write:!0}})],D.prototype,"catalogItems",void 0);z.__decorate([I.property({type:J,
json:{write:!0}})],D.prototype,"location",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"name",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"objectId",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"processedValues",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"properties",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"value",void 0);return D=z.__decorate([O.subclass("esri.rest.support.ImageIdentifyResult")],
D)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(N,z,D,I,u,S,O){D=function(J){function T(){var p=J.apply(this,arguments)||this;p.geometries=null;return p}N._inheritsLoose(T,J);return T}(D.JSONSupport);z.__decorate([I.property({json:{write:!0}})],
D.prototype,"geometries",void 0);return D=z.__decorate([O.subclass("esri.rest.support.ImagePixelLocationResult")],D)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),function(N,z,D,I,u,S,O,J){D=function(T){function p(){var l=
T.apply(this,arguments)||this;l.samples=null;return l}N._inheritsLoose(p,T);return p}(D.JSONSupport);z.__decorate([I.property({type:[J],json:{write:!0}})],D.prototype,"samples",void 0);return D=z.__decorate([O.subclass("esri.rest.support.ImageSampleResult")],D)})},"esri/rest/support/ImageSample":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(N,z,D,I,u,S,O,J){D=function(T){function p(){var l=T.apply(this,arguments)||this;l.attributes=null;l.location=null;l.locationId=null;l.rasterId=null;l.resolution=null;l.pixelValue=null;return l}N._inheritsLoose(p,T);return p}(D.JSONSupport);z.__decorate([I.property({json:{write:!0}})],D.prototype,"attributes",void 0);z.__decorate([I.property({type:J,json:{write:!0}})],D.prototype,"location",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"locationId",void 0);z.__decorate([I.property({json:{write:!0}})],
D.prototype,"rasterId",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"resolution",void 0);z.__decorate([I.property({json:{write:!0}})],D.prototype,"pixelValue",void 0);return D=z.__decorate([O.subclass("esri.rest.support.ImageSample")],D)})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),
function(N,z,D,I,u,S,O,J,T){function p(a,g,v){return l.apply(this,arguments)}function l(){l=z._asyncToGenerator(function*(a,g,v){a=J.parseUrl(a);const {renderingRule:d,sourceJSON:n}=g||{};g=d?JSON.stringify(d.rasterFunctionDefinition||d):null;g=J.encode({...a.query,renderingRule:g,f:"json"});g=J.asValidOptions(g,v);a=a.path;v=n||(yield D(a,g).then(t=>t.data));var h=v.hasRasterAttributeTable?D(`${a}/rasterAttributeTable`,g):null,A=v.hasColormap?D(`${a}/colormap`,g):null,r=v.hasHistograms?D(`${a}/histograms`,
g):null,c=10.3<=v.currentVersion?D(`${a}/keyProperties`,g):null;a=v.hasMultidimensions?D(`${a}/multidimensionalInfo`,g):null;g=yield Promise.allSettled([h,A,r,c,a]);a=null;if(v.minValues&&v.minValues.length===v.bandCount)for(a=[],h=0;h<v.minValues.length;h++)a.push({min:v.minValues[h],max:v.maxValues[h],avg:v.meanValues[h],stddev:v.stdvValues[h]});A=I.fromJSON(v.extent);h=Math.ceil(A.width/v.pixelSizeX-.1);A=Math.ceil(A.height/v.pixelSizeY-.1);r=S.fromJSON(v.spatialReference||v.extent.spatialReference);
c="fulfilled"===g[0].status?g[0].value?T.fromJSON(g[0].value.data):null:null;const m="fulfilled"===g[1].status?g[1].value?.data.colormap:null,k="fulfilled"===g[2].status?g[2].value?.data.histograms:null,y="fulfilled"===g[3].status?g[3].value?.data??{}:{};g="fulfilled"===g[4].status?g[4].value?.data.multidimensionalInfo:null;g?.variables?.length&&g.variables.forEach(t=>{t.statistics?.length&&t.statistics.forEach(x=>{x.avg=x.mean;x.stddev=x.standardDeviation})});const {defaultVariable:e,serviceDataType:b}=
v;e&&e!==y.DefaultVariable&&(y.DefaultVariable=e);b&&b.includes("esriImageServiceDataTypeVector")&&!b.includes(y.DataType)&&(y.DataType=b.replace("esriImageServiceDataType",""));let f=v.noDataValue;v.noDataValues?.length&&v.noDataValues.some(t=>t!==f)&&(f=v.noDataValues);return new O({width:h,height:A,bandCount:v.bandCount,extent:I.fromJSON(v.extent),spatialReference:r,pixelSize:new u({x:v.pixelSizeX,y:v.pixelSizeY,spatialReference:r}),pixelType:v.pixelType.toLowerCase(),statistics:a,attributeTable:c,
colormap:m,histograms:k,keyProperties:y,noDataValue:f,multidimensionalInfo:g})});return l.apply(this,arguments)}N.fetchServiceRasterInfo=function(a,g,v){return p(a,{sourceJSON:g},v)};N.generateRasterInfo=function(a,g,v){return p(a,{renderingRule:g},v)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),
function(N,z,D,I,u,S,O,J){function T(){T=z._asyncToGenerator(function*(p,l,a){p=J.parseUrl(p);var g=J.encode({...p?.query,f:"json"});a=J.asValidOptions(g,a);p=`${p?.path}/${l}/info`;l=D(`${p}`,a);a=D(`${p}/keyProperties`,a);a=yield Promise.allSettled([l,a]);l="fulfilled"===a[0].status?a[0].value.data:null;a="fulfilled"===a[1].status?a[1].value.data:null;p=null;l.statistics?.length&&(p=l.statistics.map(c=>({min:c[0],max:c[1],avg:c[2],stddev:c[3]})));g=I.fromJSON(l.extent);const v=Math.ceil(g.width/
l.pixelSizeX-.1),d=Math.ceil(g.height/l.pixelSizeY-.1),n=g.spatialReference,h=new u({x:l.pixelSizeX,y:l.pixelSizeY,spatialReference:n}),A=l.histograms?.length?l.histograms:null,r=new O({origin:l.origin,blockWidth:l.blockWidth,blockHeight:l.blockHeight,firstPyramidLevel:l.firstPyramidLevel,maximumPyramidLevel:l.maxPyramidLevel});return new S({width:v,height:d,bandCount:l.bandCount,extent:g,spatialReference:n,pixelSize:h,pixelType:l.pixelType.toLowerCase(),statistics:p,histograms:A,keyProperties:a,
storageInfo:r})});return T.apply(this,arguments)}N.getCatalogItemRasterInfo=function(p,l,a){return T.apply(this,arguments)};Object.defineProperties(N,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),
function(N,z,D,I,u,S,O,J,T,p){var l;D=l=function(a){function g(){var v=a.apply(this,arguments)||this;v.angleNames=null;v.point=null;v.spatialReference=null;v.rasterId=null;return v}N._inheritsLoose(g,a);g.prototype.clone=function(){return new l(u.clone({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))};return g}(I.JSONSupport);z.__decorate([S.property({type:[String],json:{name:"angleName",write:!0}})],D.prototype,"angleNames",void 0);z.__decorate([S.property({type:T,
json:{write:!0}})],D.prototype,"point",void 0);z.__decorate([S.property({type:p,json:{write:!0}})],D.prototype,"spatialReference",void 0);z.__decorate([S.property({type:O.Integer,json:{write:!0}})],D.prototype,"rasterId",void 0);return D=l=z.__decorate([J.subclass("esri.rest.support.ImageAngleParameters")],D)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v){var d;u=d=function(n){function h(){var r=n.apply(this,arguments)||this;r.geometry=null;r.mosaicRule=null;r.renderingRule=null;r.pixelSize=null;r.raster=void 0;r.timeExtent=null;return r}N._inheritsLoose(h,n);var A=h.prototype;A.writeGeometry=function(r,c,m){null!=r&&(c.geometryType=l.getJsonType(r),c[m]=r.toJSON())};A.clone=function(){return new d(S.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return h}(u.JSONSupport);z.__decorate([O.property({types:D.geometryTypes,json:{read:l.fromJSON}})],u.prototype,"geometry",void 0);z.__decorate([p.writer("geometry")],u.prototype,"writeGeometry",null);z.__decorate([O.property({type:a,json:{write:!0}})],u.prototype,"mosaicRule",void 0);z.__decorate([O.property({type:g,json:{write:!0}})],u.prototype,"renderingRule",void 0);z.__decorate([O.property({type:v,json:{write:!0}})],u.prototype,"pixelSize",void 0);
z.__decorate([O.property({json:{write:!0}})],u.prototype,"raster",void 0);z.__decorate([O.property({type:I,json:{read:{source:"time"},write:{target:"time"}}})],u.prototype,"timeExtent",void 0);return u=d=z.__decorate([T.subclass("esri.rest.support.ImageHistogramParameters")],u)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v){var d;I=d=function(n){function h(){var r=n.apply(this,arguments)||this;r.geometry=null;r.renderingRules=null;r.pixelSize=null;r.returnGeometry=!0;r.returnCatalogItems=!0;r.returnPixelValues=!0;r.maxItemCount=null;r.timeExtent=null;r.raster=void 0;r.viewId=void 0;r.processAsMultidimensional=!1;return r}N._inheritsLoose(h,n);var A=h.prototype;A.writeGeometry=function(r,c,m){null!=r&&(c.geometryType=a.getJsonType(r),c[m]=JSON.stringify(r.toJSON()))};A.writeMosaicRule=
function(r,c,m){null!=r&&(c[m]=JSON.stringify(r.toJSON()))};A.writeRenderingRule=function(r,c,m){null!=r&&(c[m]=JSON.stringify(r.toJSON()));r.rasterFunctionDefinition&&(c[m]=JSON.stringify(r.rasterFunctionDefinition))};A.writeRenderingRules=function(r,c,m){null!=r&&(c[m]=JSON.stringify(r.map(k=>k.rasterFunctionDefinition||k.toJSON())))};A.writePixelSize=function(r,c,m){null!=r&&(c[m]=JSON.stringify(r))};A.writeTimeExtent=function(r,c,m){if(null!=r){const k=S.isSome(r.start)?r.start.getTime():null;
r=S.isSome(r.end)?r.end.getTime():null;c[m]=null!=k?null!=r?`${k},${r}`:`${k}`:null}};A.clone=function(){return new d(u.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};
N._createClass(h,[{key:"mosaicRule",set:function(r){r&&r.mosaicMethod&&(r=g.fromJSON({...r.toJSON(),mosaicMethod:r.mosaicMethod,mosaicOperation:r.mosaicOperation}));this._set("mosaicRule",r)}},{key:"renderingRule",set:function(r){r&&r.rasterFunction&&(r=v.fromJSON({...r.toJSON(),rasterFunction:r.rasterFunction,rasterFunctionArguments:r.rasterFunctionArguments}));this._set("renderingRule",r)}}]);return h}(I.JSONSupport);z.__decorate([O.property({json:{write:!0}})],I.prototype,"geometry",void 0);z.__decorate([p.writer("geometry")],
I.prototype,"writeGeometry",null);z.__decorate([O.property({type:g,json:{write:!0}})],I.prototype,"mosaicRule",null);z.__decorate([p.writer("mosaicRule")],I.prototype,"writeMosaicRule",null);z.__decorate([O.property({type:v,json:{write:!0}})],I.prototype,"renderingRule",null);z.__decorate([p.writer("renderingRule")],I.prototype,"writeRenderingRule",null);z.__decorate([O.property({type:[v],json:{write:!0}})],I.prototype,"renderingRules",void 0);z.__decorate([p.writer("renderingRules")],I.prototype,
"writeRenderingRules",null);z.__decorate([O.property({type:l,json:{write:!0}})],I.prototype,"pixelSize",void 0);z.__decorate([p.writer("pixelSize")],I.prototype,"writePixelSize",null);z.__decorate([O.property({type:Boolean,json:{write:!0}})],I.prototype,"returnGeometry",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],I.prototype,"returnCatalogItems",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],I.prototype,"returnPixelValues",void 0);z.__decorate([O.property({type:Number,
json:{write:!0}})],I.prototype,"maxItemCount",void 0);z.__decorate([O.property({type:D,json:{write:{target:"time"}}})],I.prototype,"timeExtent",void 0);z.__decorate([p.writer("timeExtent")],I.prototype,"writeTimeExtent",null);z.__decorate([O.property({json:{write:!0}})],I.prototype,"raster",void 0);z.__decorate([O.property({json:{write:!0}})],I.prototype,"viewId",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],I.prototype,"processAsMultidimensional",void 0);return I=d=z.__decorate([T.subclass("esri.rest.support.ImageIdentifyParameters")],
I)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),function(N,z,D,I,u,S,O,J,T,p){var l;D=l=function(a){function g(){var d=a.apply(this,arguments)||
this;d.geometries=null;d.rasterId=null;return d}N._inheritsLoose(g,a);var v=g.prototype;v.writeGeometry=function(d,n,h){n.geometries={geometryType:"esriGeometryPoint",geometries:d.map(A=>A.toJSON())}};v.clone=function(){return new l({geometries:this.geometries?.map(d=>d.clone())??[],rasterId:this.rasterId})};return g}(I.JSONSupport);z.__decorate([u.property({type:[p],json:{write:!0}})],D.prototype,"geometries",void 0);z.__decorate([T.writer("geometries")],D.prototype,"writeGeometry",null);z.__decorate([u.property({type:O.Integer,
json:{write:!0}})],D.prototype,"rasterId",void 0);return D=l=z.__decorate([J.subclass("esri.rest.support.ImagePixelLocationParameters")],D)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l,a,g,v,d){var n;u=n=function(h){function A(){var c=h.apply(this,arguments)||this;c.geometry=null;c.interpolation="nearest";c.mosaicRule=null;c.outFields=null;c.pixelSize=null;c.returnFirstValueOnly=!0;c.sampleDistance=null;c.sampleCount=null;c.sliceId=null;c.timeExtent=null;return c}N._inheritsLoose(A,h);var r=A.prototype;r.writeGeometry=function(c,m,k){null!=c&&(m.geometryType=l.getJsonType(c),m[k]=c.toJSON())};r.clone=function(){return new n(S.clone({geometry:this.geometry,
locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))};N._createClass(A,[{key:"locations",set:function(c){if(c?.length){const m=new v({spatialReference:c[0].spatialReference});m.points=c.map(k=>[k.x,k.y]);this._set("locations",c);this.geometry=
m}}}]);return A}(u.JSONSupport);z.__decorate([O.property({types:D.geometryTypes,json:{read:l.fromJSON}})],u.prototype,"geometry",void 0);z.__decorate([p.writer("geometry")],u.prototype,"writeGeometry",null);z.__decorate([O.property()],u.prototype,"locations",null);z.__decorate([O.property({type:String,json:{type:g.interpolationKebab.jsonValues,read:g.interpolationKebab.read,write:g.interpolationKebab.write}})],u.prototype,"interpolation",void 0);z.__decorate([O.property({type:a,json:{write:!0}})],
u.prototype,"mosaicRule",void 0);z.__decorate([O.property({type:[String],json:{write:!0}})],u.prototype,"outFields",void 0);z.__decorate([O.property({type:d,json:{write:!0}})],u.prototype,"pixelSize",void 0);z.__decorate([O.property({type:String,json:{write:!0}})],u.prototype,"raster",void 0);z.__decorate([O.property({type:Boolean,json:{write:!0}})],u.prototype,"returnFirstValueOnly",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"sampleDistance",void 0);z.__decorate([O.property({type:Number,
json:{write:!0}})],u.prototype,"sampleCount",void 0);z.__decorate([O.property({type:Number,json:{write:!0}})],u.prototype,"sliceId",void 0);z.__decorate([O.property({type:I,json:{read:{source:"time"},write:{target:"time"}}})],u.prototype,"timeExtent",void 0);return u=n=z.__decorate([T.subclass("esri.rest.support.ImageSampleParameters")],u)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(N,z,D,I,u,S,O,J,T,p,l){function a(){a=z._asyncToGenerator(function*(b,f,t,x){const E=performance.now();var G=g(f,t);const C=performance.now();t=d(f,G,t.width,t.height);f=performance.now();G=h(t,!0);t=performance.now();b="Streamlines"===b?A(G,10):r(G);G=performance.now();I("esri-2d-profiler")&&(e.info("I.1","_createFlowFieldFromData (ms)",Math.round(C-E)),e.info("I.2","_getStreamlines (ms)",Math.round(f-C)),e.info("I.3","createAnimatedLinesData (ms)",Math.round(t-f)),e.info("I.4","create{Streamlines|Particles}Mesh (ms)",
Math.round(G-t)),e.info("I.5","createFlowMesh (ms)",Math.round(G-E)),e.info("I.6","Mesh size (bytes)",b.vertexData.buffer.byteLength+b.indexData.buffer.byteLength));yield Promise.resolve();J.throwIfAborted(x);return b});return a.apply(this,arguments)}function g(b,f){const t=n(f.data,f.width,f.height,b.smoothing);return b.interpolate?(x,E)=>{const G=Math.floor(x),C=Math.floor(E);if(0>G||G>=f.width||0>C||C>=f.height)return[0,0];x-=G;E-=C;const F=G<f.width-1?G+1:G,w=C<f.height-1?C+1:C;return[(t[2*(C*
f.width+G)]*(1-E)+t[2*(w*f.width+G)]*E)*(1-x)+(t[2*(C*f.width+F)]*(1-E)+t[2*(w*f.width+F)]*E)*x,(t[2*(C*f.width+G)+1]*(1-E)+t[2*(w*f.width+G)+1]*E)*(1-x)+(t[2*(C*f.width+F)+1]*(1-E)+t[2*(w*f.width+F)+1]*E)*x]}:(x,E)=>{x=Math.round(x);E=Math.round(E);return 0>x||x>=f.width||0>E||E>=f.height?[0,0]:[t[2*(E*f.width+x)],t[2*(E*f.width+x)+1]]}}function v(b,f,t,x,E,G,C,F,w){const H=[];let q=0,[B,R]=f(t,x);B*=b.velocityScale;R*=b.velocityScale;H.push({x:t,y:x,t:q,speed:Math.sqrt(B*B+R*R)});for(let V=0;V<
b.verticesPerLine;V++){let [P,X]=f(t,x);P*=b.velocityScale;X*=b.velocityScale;const Z=Math.sqrt(P*P+X*X);if(Z<b.minSpeedThreshold)break;const ba=P/Z,da=X/Z;t+=ba*b.segmentLength;x+=da*b.segmentLength;q+=b.segmentLength/Z;if(Math.acos(ba*M+da*U)>b.maxTurnAngle)break;if(b.collisions){var M=Math.round(t*w);var U=Math.round(x*w);if(0>M||M>C-1||0>U||U>F-1)break;const aa=G[U*C+M];if(-1!==aa&&aa!==E)break;G[U*C+M]=E}H.push({x:t,y:x,t:q,speed:Z});M=ba;U=da}return H}function d(b,f,t,x){const E=[],G=new T,
C=1/Math.max(b.lineCollisionWidth,1),F=Math.round(t*C),w=Math.round(x*C),H=new Int32Array(F*w);for(var q=0;q<H.length;q++)H[q]=-1;q=[];for(let B=0;B<x;B+=b.lineSpacing)for(let R=0;R<t;R+=b.lineSpacing)q.push({x:R,y:B,sort:G.getFloat()});q.sort((B,R)=>B.sort-R.sort);for(const {x:B,y:R}of q)G.getFloat()<b.density&&(t=v(b,f,B,R,E.length,H,F,w,C),2>t.length||E.push(t));return E}function n(b,f,t,x){if(0===x)return b;const E=Math.round(3*x),G=Array(2*E+1);var C=0;for(var F=-E;F<=E;F++){var w=Math.exp(-F*
F/(x*x));G[F+E]=w;C+=w}for(x=-E;x<=E;x++)G[x+E]/=C;C=new Float32Array(b.length);for(x=0;x<t;x++)for(F=0;F<f;F++){var H=w=0;for(var q=-E;q<=E;q++)if(!(0>F+q||F+q>=f)){var B=G[q+E];w+=B*b[2*(x*f+(F+q))];H+=B*b[2*(x*f+(F+q))+1]}C[2*(x*f+F)]=w;C[2*(x*f+F)+1]=H}b=new Float32Array(b.length);for(x=0;x<f;x++)for(F=0;F<t;F++){H=w=0;for(q=-E;q<=E;q++)0>F+q||F+q>=t||(B=G[q+E],w+=B*C[2*((F+q)*f+x)],H+=B*C[2*((F+q)*f+x)+1]);b[2*(F*f+x)]=w;b[2*(F*f+x)+1]=H}return b}function h(b,f){const t=new T;var x=b.reduce((F,
w)=>F+w.length,0);x=new Float32Array(4*x);const E=Array(b.length);let G=0,C=0;for(const F of b){b=G;for(const w of F)x[4*G]=w.x,x[4*G+1]=w.y,x[4*G+2]=w.t,x[4*G+3]=w.speed,G++;E[C++]={startVertex:b,numberOfVertices:F.length,totalTime:F[F.length-1].t,timeSeed:f?t.getFloat():0}}return{lineVertices:x,lineDescriptors:E}}function A(b,f){function t(M,U,V,P,X,Z,ba,da){const aa=9*w;let Q=0;F[aa+Q++]=M;F[aa+Q++]=U;F[aa+Q++]=1;F[aa+Q++]=V;F[aa+Q++]=Z;F[aa+Q++]=ba;F[aa+Q++]=P/2;F[aa+Q++]=X/2;F[aa+Q++]=da;w++;
F[aa+Q++]=M;F[aa+Q++]=U;F[aa+Q++]=-1;F[aa+Q++]=V;F[aa+Q++]=Z;F[aa+Q++]=ba;F[aa+Q++]=-P/2;F[aa+Q++]=-X/2;F[aa+Q++]=da;w++}const {lineVertices:x,lineDescriptors:E}=b;var G=b=0;for(var C of E)b+=2*C.numberOfVertices,G+=6*(C.numberOfVertices-1);const F=new Float32Array(9*b);C=new Uint32Array(G);let w=0;b=0;for(const M of E){const {totalTime:U,timeSeed:V}=M;let P=G=null,X=null;var H=null,q=null,B=null;for(let Z=0;Z<M.numberOfVertices;Z++){H=x[4*(M.startVertex+Z)];const ba=x[4*(M.startVertex+Z)+1],da=x[4*
(M.startVertex+Z)+2],aa=x[4*(M.startVertex+Z)+3];let Q=null,W=null;var R=null;let Y=null;0<Z&&(Q=H-G,W=ba-P,R=Math.sqrt(Q*Q+W*W),Q/=R,W/=R,1<Z?(q=Q+q,B=W+B,R=Math.sqrt(q*q+B*B),q/=R,B/=R,R=Math.min(1/(q*Q+B*W),f),q*=R,B*=R,R=-B,Y=q):(R=-W,Y=Q),null!==R&&null!==Y&&(t(G,P,X,R,Y,U,V,aa),C[b++]=w-2,C[b++]=w,C[b++]=w-1,C[b++]=w,C[b++]=w+1,C[b++]=w-1));G=H;P=ba;X=da;q=Q;B=W;H=aa}t(G,P,X,-B,q,U,V,H)}return{vertexData:F,indexData:C}}function r(b){function f(fa,ha){var ka=da+Q,na=aa+W,sa=Math.sqrt(ka*ka+na*
na);ka/=sa;na/=sa;var qa=da*ka+aa*na,wa=Q+Y,ya=W+ea;sa=Math.sqrt(wa*wa+ya*ya);wa/=sa;ya/=sa;var xa=Q*wa+W*ya;sa=R;var va=M,Ba=U,Ca=V;na=-(na/qa);ka/=qa;qa=P;var Ka=X,Ha=Z,Ma=ba;ya=-(ya/xa);wa/=xa;xa=16*q;let Da=0;for(const Pa of[1,2])for(const La of[1,2,3,4])w[xa+Da++]=sa,w[xa+Da++]=va,w[xa+Da++]=Ba,w[xa+Da++]=Ca,w[xa+Da++]=qa,w[xa+Da++]=Ka,w[xa+Da++]=Ha,w[xa+Da++]=Ma,w[xa+Da++]=Pa,w[xa+Da++]=La,w[xa+Da++]=fa,w[xa+Da++]=ha,w[xa+Da++]=na/2,w[xa+Da++]=ka/2,w[xa+Da++]=ya/2,w[xa+Da++]=wa/2,q++;H[B++]=
q-8;H[B++]=q-7;H[B++]=q-6;H[B++]=q-7;H[B++]=q-5;H[B++]=q-6;H[B++]=q-4;H[B++]=q-3;H[B++]=q-2;H[B++]=q-3;H[B++]=q-1;H[B++]=q-2}function t(fa,ha,ka,na,sa,qa){da=Q;aa=W;Q=Y;W=ea;null==da&&null==aa&&(da=Q,aa=W);if(null!=P&&null!=X){Y=fa-P;ea=ha-X;const wa=Math.sqrt(Y*Y+ea*ea);Y/=wa;ea/=wa}null!=da&&null!=aa&&f(sa,qa);R=P;M=X;U=Z;V=ba;P=fa;X=ha;Z=ka;ba=na}function x(fa,ha){da=Q;aa=W;Q=Y;W=ea;null==da&&null==aa&&(da=Q,aa=W);null!=da&&null!=aa&&f(fa,ha)}const {lineVertices:E,lineDescriptors:G}=b;let C=b=
0;for(var F of G){const fa=F.numberOfVertices-1;b+=8*fa;C+=12*fa}const w=new Float32Array(16*b),H=new Uint32Array(C);let q=0,B=0,R,M,U,V,P,X,Z,ba,da,aa,Q,W,Y,ea;for(const fa of G){ea=Y=W=Q=aa=da=ba=Z=X=P=V=U=M=R=null;const {totalTime:ha,timeSeed:ka}=fa;for(F=0;F<fa.numberOfVertices;F++)t(E[4*(fa.startVertex+F)],E[4*(fa.startVertex+F)+1],E[4*(fa.startVertex+F)+2],E[4*(fa.startVertex+F)+3],ha,ka);x(ha,ka)}return{vertexData:w,indexData:H}}function c(b,f){const t=f.pixels,{width:x,height:E}=f,G=new Float32Array(x*
E*2),C=f.mask||new Uint8Array(x*E*2);f.mask||C.fill(255);if("vector-uv"===b)for(b=0;b<x*E;b++)G[2*b]=t[0][b],G[2*b+1]=-t[1][b];else if("vector-magdir"===b)for(b=0;b<x*E;b++){f=t[0][b];const F=S.deg2rad(t[1][b]),w=Math.sin(F-Math.PI/2);G[2*b]=Math.cos(F-Math.PI/2)*f;G[2*b+1]=w*f}return{data:G,mask:C,width:x,height:E}}function m(){m=z._asyncToGenerator(function*(b,f,t,x,E,G){const C=performance.now();var F=p.getInfo(f.spatialReference);if(!F)return t=yield k(b,f,t,x,E,G),I("esri-2d-profiler")&&e.info("I.7",
"loadImagery, early exit (ms)",Math.round(performance.now()-C)),I("esri-2d-profiler")&&e.info("I.9","Number of parts",1),t;const [w,H]=F.valid,q=Math.ceil(f.width/(H-w)),B=f.width/q,R=Math.round(t/q);let M=f.xmin;const U=[];F=performance.now();for(let V=0;V<q;V++){const P=new l({xmin:M,xmax:M+B,ymin:f.ymin,ymax:f.ymax,spatialReference:f.spatialReference});U.push(k(b,P,R,x,E,G));M+=B}b=yield Promise.all(U);I("esri-2d-profiler")&&e.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-
F));I("esri-2d-profiler")&&e.info("I.9","Number of parts",b.length);x={data:new Float32Array(t*x*2),mask:new Uint8Array(t*x),width:t,height:x};f=0;for(const V of b){for(b=0;b<V.height;b++)for(E=0;E<V.width;E++)f+E>=t||(x.data[2*(b*t+f+E)]=V.data[2*(b*V.width+E)],x.data[2*(b*t+f+E)+1]=V.data[2*(b*V.width+E)+1],x.mask[b*t+f+E]=V.mask[b*V.width+E]);f+=V.width}I("esri-2d-profiler")&&e.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-C));return x});return m.apply(this,arguments)}
function k(b,f,t,x,E,G){return y.apply(this,arguments)}function y(){y=z._asyncToGenerator(function*(b,f,t,x,E,G){const C={requestProjectedLocalDirections:!0,signal:G};O.isSome(E)&&(C.timeExtent=E);if("imagery"===b.type)return yield b.load({signal:G}),E=b.rasterInfo.dataType,b=yield b.fetchImage(f,t,x,C),!b||O.isNone(b.pixelData)||O.isNone(b.pixelData.pixelBlock)?{data:new Float32Array(t*x*2),mask:new Uint8Array(t*x),width:t,height:x}:c(E,b.pixelData.pixelBlock);yield b.load({signal:G});E=b.rasterInfo.dataType;
b=yield b.fetchPixels(f,t,x,C);return!b||O.isNone(b.pixelBlock)?{data:new Float32Array(t*x*2),mask:new Uint8Array(t*x),width:t,height:x}:c(E,b.pixelBlock)});return y.apply(this,arguments)}const e=u.getLogger("esri.views.2d.engine.flow.dataUtils");N.createAnimatedLinesData=h;N.createFlowMesh=function(b,f,t,x){return a.apply(this,arguments)};N.createParticlesMesh=r;N.createStreamlinesMesh=A;N.loadImagery=function(b,f,t,x,E,G){return m.apply(this,arguments)};Object.defineProperties(N,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../PopupTemplate ../core/maybe ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils".split(" "),function(N,
z,D,I,u,S,O,J,T,p,l,a,g,v,d,n,h,A,r,c,m,k,y,e){u=function(b){function f(...x){x=b.call(this,...x)||this;x.legendEnabled=!0;x.isReference=null;x.operationalLayerType="ArcGISImageServiceLayer";x.popupEnabled=!0;x.popupTemplate=null;x.type="imagery";return x}N._inheritsLoose(f,b);var t=f.prototype;t.normalizeCtorArgs=function(x,E){return"string"===typeof x?{url:x,...E}:x};t.load=function(x){const E=I.isSome(x)?x.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
x).catch(S.throwIfAbortError).then(()=>this._fetchService(E)));return Promise.resolve(this)};t.writeOperationalLayerType=function(x,E,G){E[G]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};t.createPopupTemplate=function(x){const E=this.rasterFields,G=this.title,C=new Set;var F=!1;let w=!1;this.capabilities&&(F=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,w="esriImageServiceDataTypeVector-UV"===this.serviceDataType||
"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const H=new Set;F&&H.add("raster.itempixelvalue");for(const q of E)F=q.name.toLowerCase(),H.has(F)||F.includes("raster.servicepixelvalue.")||C.add(q.name);w&&C.add("raster.magnitude").add("raster.direction");return e.createPopupTemplate({fields:E,title:G},{...x,visibleFieldNames:C})};t.queryFeatures=function(x,E){return this.queryRasters(x,E).then(G=>{if(G?.features)for(const C of G.features)C.layer=C.sourceLayer=this;return G})};t.queryFeatureCount=
function(x,E){return this.queryRasterCount(x,E)};t.redraw=function(){this.emit("redraw")};t.serviceSupportsSpatialReference=function(x){return y.serviceSupportsSpatialReference(this,x)};N._createClass(f,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);return f}(d.BlendLayer(m.TemporalLayer(c.ScaleRangeLayer(h.OperationalLayer(A.PortalLayer(g.ArcGISImageService(r.RefreshableLayer(n.CustomParametersMixin(v.ArcGISService(u.MultiOriginJSONMixin(a)))))))))));z.__decorate([O.property(k.legendEnabled)],
u.prototype,"legendEnabled",void 0);z.__decorate([O.property({type:["show","hide"]})],u.prototype,"listMode",void 0);z.__decorate([O.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],u.prototype,"isReference",void 0);z.__decorate([O.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],u.prototype,"operationalLayerType",
void 0);z.__decorate([l.writer("web-map","operationalLayerType")],u.prototype,"writeOperationalLayerType",null);z.__decorate([O.property(k.popupEnabled)],u.prototype,"popupEnabled",void 0);z.__decorate([O.property({type:D,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],u.prototype,"popupTemplate",void 0);z.__decorate([O.property({readOnly:!0})],u.prototype,"defaultPopupTemplate",null);z.__decorate([O.property({readOnly:!0,json:{read:!1}})],u.prototype,"type",void 0);return u=z.__decorate([p.subclass("esri.layers.ImageryLayer")],
u)});