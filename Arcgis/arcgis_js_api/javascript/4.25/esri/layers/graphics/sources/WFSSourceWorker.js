// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./arrayUtils ./accessorSupport/ensureType ./accessorSupport/decorators/subclass".split(" "),function(g,c,da,L,k,r,t,n,p,q){function N(){N=c._asyncToGenerator(function*(z,A,O){return(yield r.eachAlways(z.map((h,u)=>A.apply(O,[h,u])))).map(h=>h.value)});return N.apply(this,arguments)}function R(z){return{ok:!0,
value:z}}function M(z){return{ok:!1,error:z}}function m(z){return k.isSome(z)&&!0===z.ok?z.value:null}function I(z){return k.isSome(z)&&!1===z.ok?z.error:null}function d(){d=c._asyncToGenerator(function*(z){if(k.isNone(z))return{ok:!1,error:Error("no promise provided")};try{return R(yield z)}catch(A){return M(A)}});return d.apply(this,arguments)}function l(){l=c._asyncToGenerator(function*(z){try{return R(yield z)}catch(A){return r.throwIfAbortError(A),M(A)}});return l.apply(this,arguments)}let G=
function(z){function A(h,u){var B=z.call(this,{})||this;B._result=null;B._abortHandle=null;B.abort=()=>{B._abortController=k.abortMaybe(B._abortController)};B.remove=B.abort;B._abortController=new AbortController;const {signal:E}=B._abortController;B.promise=h(E);B.promise.then(ea=>{B._result=R(ea);B._cleanup()},ea=>{B._result=M(ea);B._cleanup()});B._abortHandle=r.onAbort(u,B.abort);return B}c._inheritsLoose(A,z);var O=A.prototype;O.normalizeCtorArgs=function(){return{}};O.destroy=function(){this.abort()};
O._cleanup=function(){this._abortHandle=k.removeMaybe(this._abortHandle);this._abortController=null};c._createClass(A,[{key:"value",get:function(){return m(this._result)}},{key:"error",get:function(){return I(this._result)}},{key:"finished",get:function(){return k.isSome(this._result)}}]);return A}(L);da.__decorate([t.property()],G.prototype,"value",null);da.__decorate([t.property()],G.prototype,"error",null);da.__decorate([t.property()],G.prototype,"finished",null);da.__decorate([t.property()],G.prototype,
"promise",void 0);da.__decorate([t.property()],G.prototype,"_result",void 0);G=da.__decorate([q.subclass("esri.core.asyncUtils.ReactiveTask")],G);g.assertResult=function(z){if(!0===z.ok)return z.value;throw z.error;};g.createTask=function(z,A){return new G(z,A)};g.forEach=function(z,A,O){return r.eachAlways(z.map((h,u)=>A.apply(O,[h,u])))};g.makeResultError=M;g.makeResultOk=R;g.map=function(z,A,O){return N.apply(this,arguments)};g.result=function(z){return d.apply(this,arguments)};g.resultError=I;
g.resultOrAbort=function(z){return l.apply(this,arguments)};g.resultValue=m;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(g,c,da,L,k,r,t,n){function p(v,H){return v?H?4:3:H?3:2}function q(v,H,S,T){if(v){if(S)return H&&
T?f:xa;if(H&&T)return a}else if(H&&T)return xa;return Na}function N({scale:v,translate:H},S){return Math.round((S-H[0])/v[0])}function R({scale:v,translate:H},S){return Math.round((H[1]-S)/v[1])}function M({scale:v,translate:H},S,T){return S*v[T]+H[T]}function m(v){v=v.coords;return{x:v[0],y:v[1]}}function I(v,H){v.coords[0]=H.x;v.coords[1]=H.y;return v}function d(v){v=v.coords;return{x:v[0],y:v[1],z:v[2]}}function l(v,H){v.coords[0]=H.x;v.coords[1]=H.y;v.coords[2]=H.z;return v}function G(v){v=v.coords;
return{x:v[0],y:v[1],m:v[2]}}function z(v,H){v.coords[0]=H.x;v.coords[1]=H.y;v.coords[2]=H.m;return v}function A(v){v=v.coords;return{x:v[0],y:v[1],z:v[2],m:v[3]}}function O(v,H){v.coords[0]=H.x;v.coords[1]=H.y;v.coords[2]=H.z;v.coords[3]=H.m;return v}function h(v,H){return v&&H?O:v?l:H?z:I}function u(v,H,S,T,ia){S=h(S,T);for(const {geometry:ka,attributes:oa}of H)H=L.isSome(ka)?S(new n,ka):null,v.push(new r.OptimizedFeature(H,oa,null,ia?oa[ia]:void 0));return v}function B(v,H,S,T){for(const {geometry:ia,
attributes:ka}of H)v.push({attributes:ka,geometry:L.isSome(ia)?E(ia,S,T):null});return v}function E(v,H,S){if(L.isNone(v))return null;const T=p(H,S),ia=[];for(let ka=0;ka<v.coords.length;ka+=T){const oa=[];for(let ra=0;ra<T;ra++)oa.push(v.coords[ka+ra]);ia.push(oa)}return H?S?{points:ia,hasZ:H,hasM:S}:{points:ia,hasZ:H}:S?{points:ia,hasM:S}:{points:ia}}function ea(v,H,S,T,ia){S=p(S,T);for(const {geometry:ka,attributes:oa}of H)H=L.isSome(ka)?D(new n,ka,S):null,v.push(new r.OptimizedFeature(H,oa,null,
ia?oa[ia]:void 0));return v}function D(v,H,S=p(H.hasZ,H.hasM)){v.lengths[0]=H.points.length;const T=v.coords;let ia=0;for(const ka of H.points)for(H=0;H<S;H++)T[ia++]=ka[H];return v}function F(v,H,S){if(!v)return null;const T=p(H,S),{coords:ia,lengths:ka}=v;v=[];let oa=0;for(const ra of ka){const sa=[];for(let ba=0;ba<ra;ba++){const ha=[];for(let na=0;na<T;na++)ha.push(ia[oa++]);sa.push(ha)}v.push(sa)}return H?S?{paths:v,hasZ:H,hasM:S}:{paths:v,hasZ:H}:S?{paths:v,hasM:S}:{paths:v}}function P(v,H,
S,T,ia){S=p(S,T);for(const {geometry:ka,attributes:oa}of H)H=L.isSome(ka)?J(new n,ka,S):null,v.push(new r.OptimizedFeature(H,oa,null,ia?oa[ia]:void 0));return v}function J(v,H,S=p(H.hasZ,H.hasM)){const {lengths:T,coords:ia}=v;let ka=0;for(const oa of H.paths){for(const ra of oa)for(H=0;H<S;H++)ia[ka++]=ra[H];T.push(oa.length)}return v}function y(v,H,S){if(!v)return null;const T=p(H,S),{coords:ia,lengths:ka}=v;v=[];let oa=0;for(const ra of ka){const sa=[];for(let ba=0;ba<ra;ba++){const ha=[];for(let na=
0;na<T;na++)ha.push(ia[oa++]);sa.push(ha)}v.push(sa)}return H?S?{rings:v,hasZ:H,hasM:S}:{rings:v,hasZ:H}:S?{rings:v,hasM:S}:{rings:v}}function K(v,H,S,T,ia){for(const {geometry:ka,centroid:oa,attributes:ra}of H){H=L.isSome(ka)?x(new n,ka,S,T):null;const sa=ia?ra[ia]:void 0;L.isSome(oa)?v.push(new r.OptimizedFeature(H,ra,I(new n,oa),sa)):v.push(new r.OptimizedFeature(H,ra,null,sa))}return v}function x(v,H,S=H.hasZ,T=H.hasM){Y(v,H.rings,S,T);return v}function Y(v,H,S,T){S=p(S,T);const {lengths:ia,coords:ka}=
v;T=0;Ba(v);for(const oa of H){for(const ra of oa)for(H=0;H<S;H++)ka[T++]=ra[H];ia.push(oa.length)}return v}function aa(v,H,S,T,ia,ka){Da(v);if(!S){for(const oa of H)v.push(new r.OptimizedFeature(null,oa.attributes,null,ka?oa.attributes[ka]:void 0));return v}switch(S){case "esriGeometryPoint":return u(v,H,T,ia,ka);case "esriGeometryMultipoint":return ea(v,H,T,ia,ka);case "esriGeometryPolyline":return P(v,H,T,ia,ka);case "esriGeometryPolygon":return K(v,H,T,ia,ka);default:Ka.error("convertToFeatureSet:unknown-geometry",
new c(`Unable to parse unknown geometry type '${S}'`)),Da(v)}return v}function W(v,H,S,T){v=v&&("coords"in v?v:v.geometry);if(L.isNone(v))return null;switch(H){case "esriGeometryPoint":return H=m,S&&T?H=A:S?H=d:T&&(H=G),H(v);case "esriGeometryMultipoint":return E(v,S,T);case "esriGeometryPolyline":return F(v,S,T);case "esriGeometryPolygon":return y(v,S,T);default:return Ka.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${H}'`)),null}}function la(v,H,S,T,ia){Da(v);
if(L.isNone(S)){for(const oa of H)v.push({attributes:oa.attributes});return v}switch(S){case "esriGeometryPoint":S=m;T&&ia?S=A:T?S=d:ia&&(S=G);for(var ka of H){const {geometry:oa,attributes:ra}=ka;T=L.isSome(oa)?S(oa):null;v.push({attributes:ra,geometry:T})}break;case "esriGeometryMultipoint":return B(v,H,T,ia);case "esriGeometryPolyline":for(const {geometry:oa,attributes:ra}of H)v.push({attributes:ra,geometry:L.isSome(oa)?F(oa,T,ia):null});break;case "esriGeometryPolygon":for(const {geometry:oa,
attributes:ra,centroid:sa}of H)ka=L.isSome(oa)?y(oa,T,ia):null,L.isSome(sa)?(H=m(sa),v.push({attributes:ra,centroid:H,geometry:ka})):v.push({attributes:ra,geometry:ka});break;default:Ka.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${S}'`))}return v}function ca(v,H,S,T,ia,ka,oa=S,ra=T){Ba(v);if(L.isNone(H)||!H.coords.length)return null;ia=La[ia];const {coords:sa,lengths:ba}=H;H=p(S,T);const ha=p(S&&oa,T&&ra);S=q(S,T,oa,ra);if(!ba.length)return S(v.coords,
sa,0,0,N(ka,sa[0]),R(ka,sa[1])),Ba(v,H,0),v;let na,za=0,Ea,Ha=0;for(const Ia of ba){if(Ia<ia)continue;let Ga=0;Ea=Ha;ra=T=N(ka,sa[za]);na=oa=R(ka,sa[za+1]);S(v.coords,sa,Ea,za,ra,na);Ga++;za+=H;Ea+=ha;for(let Ma=1;Ma<Ia;Ma++,za+=H)if(ra=N(ka,sa[za]),na=R(ka,sa[za+1]),ra!==T||na!==oa)S(v.coords,sa,Ea,za,ra-T,na-oa),Ea+=ha,Ga++,T=ra,oa=na;Ga>=ia&&(v.lengths.push(Ga),Ha=Ea)}Da(v.coords,Ha);return v.coords.length?v:null}function qa(v,H,S,T,ia,ka,oa){let ra=T,sa=0;for(let ha=ka+S;ha<oa;ha+=S){var ba=H[ha];
const na=H[ha+1],za=H[oa],Ea=H[oa+1];let Ha=H[ka],Ia=H[ka+1],Ga=za-Ha,Ma=Ea-Ia;if(0!==Ga||0!==Ma){const ta=((ba-Ha)*Ga+(na-Ia)*Ma)/(Ga*Ga+Ma*Ma);1<ta?(Ha=za,Ia=Ea):0<ta&&(Ha+=Ga*ta,Ia+=Ma*ta)}Ga=ba-Ha;Ma=na-Ia;ba=Ga*Ga+Ma*Ma;ba>ra&&(sa=ha,ra=ba)}ra>T&&(sa-ka>S&&qa(v,H,S,T,ia,ka,sa),ia(v,H,v.length,sa,H[sa],H[sa+1]),oa-sa>S&&qa(v,H,S,T,ia,sa,oa))}function wa(v,H,S,T,ia){const {coords:ka,lengths:oa}=H;S=p(S,T);if(!ka.length)return v!==H&&Ba(v),v;L.assertIsSome(ia);const {originPosition:ra,scale:sa,
translate:ba}=ia;ia=ja;ia.originPosition=ra;T=ia.scale;T[0]=sa[0]??1;T[1]=-(sa[1]??1);T[2]=sa[2]??1;T[3]=sa[3]??1;var ha=ia.translate;ha[0]=ba[0]??0;ha[1]=ba[1]??0;ha[2]=ba[2]??0;ha[3]=ba[3]??0;if(!oa.length){for(T=0;T<S;++T)v.coords[T]=M(ia,ka[T],T);v!==H&&Ba(v,S,0);return v}ha=0;for(let za=0;za<oa.length;za++){const Ea=oa[za];v.lengths[za]=Ea;for(var na=0;na<S;++na)v.coords[ha+na]=M(ia,ka[ha+na],na);na=v.coords[ha];let Ha=v.coords[ha+1];ha+=S;for(let Ia=1;Ia<Ea;Ia++,ha+=S){na+=ka[ha]*T[0];Ha+=ka[ha+
1]*T[1];v.coords[ha]=na;v.coords[ha+1]=Ha;for(let Ga=2;Ga<S;++Ga)v.coords[ha+Ga]=M(ia,ka[ha+Ga],Ga)}}v!==H&&Ba(v,ka.length,oa.length);return v}function ya(v,H,S,T){let ia=0,ka=v[T*H],oa=v[T*(H+1)];for(let ra=1;ra<S;ra++){const sa=ka+v[T*(H+ra)],ba=oa+v[T*(H+ra)+1],ha=(sa-ka)*(ba+oa);ka=sa;oa=ba;ia+=ha}return.5*ia}function Ba(v,H=0,S=0){Da(v.lengths,S);Da(v.coords,H)}function Da(v,H=0){v.length!==H&&(v.length=H)}const Ka=da.getLogger("esri.layers.graphics.featureConversionUtils"),La={esriGeometryPoint:0,
esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Na=(v,H,S,T,ia,ka)=>{v[S]=ia;v[S+1]=ka},xa=(v,H,S,T,ia,ka)=>{v[S]=ia;v[S+1]=ka;v[S+2]=H[T+2]},a=(v,H,S,T,ia,ka)=>{v[S]=ia;v[S+1]=ka;v[S+2]=H[T+3]},f=(v,H,S,T,ia,ka)=>{v[S]=ia;v[S+1]=ka;v[S+2]=H[T+2];v[S+3]=H[T+3]},V=[],Z=[],ja={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};g.convertFromFeature=function(v,H,S,T,ia){V[0]=v;[v]=aa(Z,V,H,S,T,ia);Da(V);Da(Z);return v};g.convertFromFeatureSet=function(v,H){const S=
new t,{hasM:T,hasZ:ia,features:ka,objectIdFieldName:oa,spatialReference:ra,geometryType:sa,exceededTransferLimit:ba,transform:ha,fields:na}=v;na&&(S.fields=na);S.geometryType=sa??null;S.objectIdFieldName=oa??H??null;S.spatialReference=ra??null;if(!S.objectIdFieldName)return Ka.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;ka&&aa(S.features,ka,sa,ia,T,S.objectIdFieldName);ba&&(S.exceededTransferLimit=ba);T&&(S.hasM=T);ia&&(S.hasZ=ia);ha&&(S.transform=
ha);return S};g.convertFromFeatures=aa;g.convertFromGeometry=function(v,H,S){if(L.isNone(v))return null;const T=new n;"hasZ"in v&&null==H&&(H=v.hasZ);"hasM"in v&&null==S&&(S=v.hasM);if(k.isPoint(v))return h(null!=H?H:null!=v.z,null!=S?S:null!=v.m)(T,v);if(k.isPolygon(v))return x(T,v,H,S);if(k.isPolyline(v))return J(T,v,p(H,S));if(k.isMultipoint(v))return D(T,v,p(H,S));Ka.error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${v}'`))};g.convertFromGraphics=function(v,
H,S,T,ia,ka){const oa=v.length;switch(S){case "esriGeometryPoint":u(v,H,T,ia,ka);break;case "esriGeometryMultipoint":ea(v,H,T,ia,ka);break;case "esriGeometryPolyline":P(v,H,T,ia,ka);break;case "esriGeometryPolygon":K(v,H,T,ia,ka);break;default:Ka.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${S}'`))}for(T=0;T<H.length;T++)v[T+oa].geometryType=S,v[T+oa].insertAfter=H[T].insertAfter,v[T+oa].groupId=H[T].groupId;return v};g.convertFromMultipoint=D;g.convertFromMultipointFeatures=
ea;g.convertFromNestedArray=Y;g.convertFromPoint=function(v,H,S=h(null!=H.z,null!=H.m)){return S(v,H)};g.convertFromPointFeatures=u;g.convertFromPolygon=x;g.convertFromPolyline=J;g.convertFromPolylineFeatures=P;g.convertToFeature=function(v,H,S,T){Z[0]=v;la(V,Z,H,S,T);v=V[0];Da(V);Da(Z);return v};g.convertToFeatureSet=function(v){const {objectIdFieldName:H,spatialReference:S,transform:T,fields:ia,hasM:ka,hasZ:oa,features:ra,geometryType:sa,exceededTransferLimit:ba,uniqueIdField:ha,queryGeometry:na,
queryGeometryType:za}=v;v=la([],ra,sa,oa,ka);const Ea=W(na,za,!1,!1);v={features:v,fields:ia,geometryType:sa,objectIdFieldName:H,spatialReference:S,uniqueIdField:ha,queryGeometry:Ea};T&&(v.transform=T);ba&&(v.exceededTransferLimit=ba);ka&&(v.hasM=ka);oa&&(v.hasZ=oa);return v};g.convertToFeatures=la;g.convertToGeometry=W;g.convertToMultipoint=E;g.convertToMultipointFeatures=B;g.convertToPoint=function(v,H,S){return v?H?S?A(v):d(v):S?G(v):m(v):null};g.convertToPolygon=y;g.convertToPolyline=F;g.deltaDecodeGeometry=
function(v,H){if(L.isNone(v))return null;const S=v.clone(),T=v.coords;v=v.lengths;let ia=0;for(let ra=0;ra<v.length;ra++){const sa=v[ra];var ka=T[H*ia],oa=T[H*ia+1];for(let ba=1;ba<sa;ba++)ka+=T[H*(ia+ba)],oa+=T[H*(ia+ba)+1],S.coords[H*(ia+ba)]=ka,S.coords[H*(ia+ba)+1]=oa;ia+=sa}return S};g.deltaEncodeGeometry=function(v,H){const S=v.clone(),T=v.coords;v=v.lengths;let ia=0;for(let oa=0;oa<v.length;oa++){const ra=v[oa];let sa=T[H*ia];var ka=T[H*ia+1];for(let ba=1;ba<ra;ba++){const ha=T[H*(ia+ba)],
na=T[H*(ia+ba)+1];ka=na-ka;S.coords[H*(ia+ba)]=ha-sa;S.coords[H*(ia+ba)+1]=ka;sa=ha;ka=na}ia+=ra}return S};g.generalizeOptimizedGeometry=function(v,H,S,T,ia,ka,oa=S,ra=T){Ba(v);if(!H||!H.coords.length)return null;ia=La[ia];const {coords:sa,lengths:ba}=H;H=p(S,T);const ha=p(S&&oa,T&&ra);S=q(S,T,oa,ra);if(!ba.length)return S(v.coords,sa,0,0,sa[0],sa[1]),Ba(v,H,0),v;T=0;ka*=ka;for(const na of ba){if(na<ia){T+=na*H;continue}oa=v.coords.length/ha;ra=T;const za=T+(na-1)*H;S(v.coords,sa,v.coords.length,
ra,sa[ra],sa[ra+1]);qa(v.coords,sa,H,ka,S,ra,za);S(v.coords,sa,v.coords.length,za,sa[za],sa[za+1]);ra=v.coords.length/ha-oa;ra>=ia?v.lengths.push(ra):Da(v.coords,oa*ha);T+=na*H}return v.coords.length?v:null};g.getBoundsOptimizedGeometry=function(v,H,S,T){if(L.isNone(H)||!H.coords||!H.coords.length)return null;S=p(S,T);let ia=T=Number.POSITIVE_INFINITY,ka=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;if(H&&H.coords){H=H.coords;for(let ra=0;ra<H.length;ra+=S){const sa=H[ra],ba=H[ra+1];T=Math.min(T,
sa);ka=Math.max(ka,sa);ia=Math.min(ia,ba);oa=Math.max(oa,ba)}}v[0]=T;v[1]=ia;v[2]=ka;v[3]=oa;return v};g.getQuantizedArea=function(v,H){const {coords:S,lengths:T}=v;let ia=v=0;for(let ka=0;ka<T.length;ka++){const oa=T[ka];ia+=ya(S,v,oa,H);v+=oa}return Math.abs(ia)};g.getQuantizedBoundsOptimizedGeometry=function(v,H,S,T){S=p(S,T);const {lengths:ia,coords:ka}=H;T=H=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY,sa=0;for(const ba of ia){let ha=ka[sa],na=ka[sa+1];
H=Math.min(ha,H);T=Math.min(na,T);oa=Math.max(ha,oa);ra=Math.max(na,ra);sa+=S;for(let za=1;za<ba;za++,sa+=S){const Ea=ka[sa],Ha=ka[sa+1];ha+=Ea;na+=Ha;0>Ea&&(H=Math.min(H,ha));0<Ea&&(oa=Math.max(oa,ha));0>Ha?T=Math.min(T,na):0<Ha&&(ra=Math.max(ra,na))}}v[0]=H;v[1]=T;v[2]=oa;v[3]=ra;return v};g.getSignedQuantizedRingArea=ya;g.quantizeOptimizedFeatureSet=function(v,H){const {geometryType:S,features:T,hasM:ia,hasZ:ka}=H;if(!v)return H;for(let oa=0;oa<T.length;oa++){const ra=T[oa],sa=ra.weakClone();sa.geometry=
new n;ca(sa.geometry,ra.geometry,ia,ka,S,v);ra.centroid&&(sa.centroid=new n,ca(sa.centroid,ra.centroid,ia,ka,"esriGeometryPoint",v));T[oa]=sa}H.transform=v;return H};g.quantizeOptimizedGeometry=ca;g.quantizeX=N;g.quantizeY=R;g.removeCollinearVectices=function(v,H,S,T,ia){if(!H||!H.coords||!H.coords.length)return null;S=La[S];const {coords:ka,lengths:oa}=H;H=q(T,ia,T,ia);T=p(T,ia);let ra=ia=0,sa=0,ba=0;for(const za of oa){ra=ba;H(v.coords,ka,ra,ia,ka[ia],ka[ia+1]);ia+=T;var ha=ka[ia];let Ea=ka[ia+
1],Ha=ha,Ia=Ea;var na=Ea/ha;ra+=T;H(v.coords,ka,ra,ia,Ha,Ia);ia+=T;for(let Ga=2;Ga<za;Ga++){ha=ka[ia];Ea=ka[ia+1];const Ma=Ea/ha,ta=na===Ma||!isFinite(na)&&!isFinite(Ma);na=ta&&isFinite(Ma)?0<=na&&0<=Ma||0>=na&&0>=Ma:0<=Ia&&0<=Ea||0>=Ia&&0>=Ea;ta&&na?(Ha+=ha,Ia+=Ea):(Ha=ha,Ia=Ea,ra+=T);H(v.coords,ka,ra,ia,Ha,Ia);ia+=T;na=Ma}ra+=T;ha=(ra-ba)/T;ha>=S&&(v.lengths[sa]=ha,ba=ra,sa++)}v.coords.length>ba&&(v.coords.length=ba);v.lengths.length>sa&&(v.lengths.length=sa);return v.coords.length&&v.lengths.length?
v:null};g.removeZMValues=function(v,H,S,T,ia,ka){Ba(v);v.lengths.push(...H.lengths);if(S===ia&&T===ka)for(var oa=0;oa<H.coords.length;oa++)v.coords.push(H.coords[oa]);else for(oa=p(S,T),S=q(S,T,ia,ka),H=H.coords,T=0;T<H.length;T+=oa)S(v.coords,H,v.coords.length,T,H[T],H[T+1]);return v};g.unquantizeOptimizedFeatureSet=function(v){const {transform:H,features:S,hasM:T,hasZ:ia}=v;if(!H)return v;for(const ka of S)L.isSome(ka.geometry)&&wa(ka.geometry,ka.geometry,T,ia,H),L.isSome(ka.centroid)&&wa(ka.centroid,
ka.centroid,T,ia,H);v.transform=null;return v};g.unquantizeOptimizedGeometry=wa;g.unquantizeValue=M;g.unquantizeX=function(v,H){return M(v,H,0)};g.unquantizeY=function(v,H){return M(v,-H,1)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(g,c,da){let L=function(){function r(t=null,n={},p,q){this.geometry=t;this.attributes=
n;this.centroid=p;this.objectId=q;this.geohashY=this.geohashX=this.displayId=0}r.prototype.weakClone=function(){const t=new r(this.geometry,this.attributes,this.centroid,this.objectId);t.displayId=this.displayId;t.geohashX=this.geohashX;t.geohashY=this.geohashY;return t};return r}(),k=function(r){function t(){return r.apply(this,arguments)||this}c._inheritsLoose(t,r);return t}(L);g.OptimizedFeature=L;g.OptimizedFeatureWithGeometry=k;g.hasGeometry=function(r){return!(da.isNone(r.geometry)||!r.geometry.coords||
!r.geometry.coords.length)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function g(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=
this.uniqueIdField=null}g.prototype.weakClone=function(){const c=new g;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;
c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return g}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){return function(){function c(L=[],k=[],r=!1){this.lengths=L??[];this.coords=k??[];this.hasIndeterminateRingOrder=r}c.fromRect=function(L){const [k,r,t,n]=L;L=t-k;const p=n-r;return new c([5],[k,r,L,0,0,p,-L,0,0,-p])};var da=c.prototype;da.forEachVertex=function(L){let k=0;this.lengths.length||
L(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const t=this.lengths[r];for(let n=0;n<t;n++)L(this.coords[2*(n+k)],this.coords[2*(n+k)+1]);k+=t}};da.clone=function(L){return L?(L.set(this.coords),new c(this.lengths.slice(),L,this.hasIndeterminateRingOrder)):new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};g._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((L,k)=>L+k)}}]);return c}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(g,c,da,L,k,r,t,n,p,q){return function(){function N(M){this.geometryInfo=
M;this._boundsStore=new p.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new da;this.featureAdapter=q.optimizedFeatureQueryEngineAdapter}var R=N.prototype;R.add=function(M){this._add(M);this._emitChanged()};R.addMany=function(M){for(const m of M)this._add(m);this._emitChanged()};R.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};R.removeById=function(M){M=this._featuresById.get(M);if(!M)return null;this._remove(M);this._emitChanged();
return M};R.removeManyById=function(M){this._boundsStore.invalidateIndex();for(const m of M)(M=this._featuresById.get(m))&&this._remove(M);this._emitChanged()};R.forEachBounds=function(M,m,I){for(const d of M)(M=this._boundsStore.get(d.objectId))&&m(r.fromRect(I,M))};R.getFeature=function(M){return this._featuresById.get(M)};R.has=function(M){return this._featuresById.has(M)};R.toArray=function(){return Array.from(this._featuresById.values())};R.forEach=function(M){this._featuresById.forEach(m=>M(m))};
R.forEachInBounds=function(M,m){this._boundsStore.forEachInBounds(M,I=>{m(this._featuresById.get(I))})};R.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};R.sweep=function(){let M=!1;this._featuresById.forEach((m,I)=>{this._markedIds.has(I)||(M=!0,this._remove(m))});this._markedIds.clear();M&&this._emitChanged()};R._emitChanged=function(){this.events.emit("changed",void 0)};R._add=function(M){if(M){var m=M.objectId;if(null==m)L.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature",
"feature id is missing",{feature:M}));else{var I=this._featuresById.get(m);this._markedIds.add(m);if(I){M.displayId=I.displayId;var d=this._boundsStore.get(m);this._boundsStore.delete(m)}else if(k.isSome(this.onFeatureAdd))this.onFeatureAdd(M);!k.isNone(M.geometry)&&M.geometry.coords&&M.geometry.coords.length?(d=n.getBoundsOptimizedGeometry(k.isSome(d)?d:t.create(),M.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),k.isSome(d)&&this._boundsStore.set(m,d)):this._boundsStore.set(m,null);this._featuresById.set(m,
M)}}};R._remove=function(M){if(k.isSome(this.onFeatureRemove))this.onFeatureRemove(M);this._markedIds.delete(M.objectId);this._boundsStore.delete(M.objectId);this._featuresById.delete(M.objectId);return M};g._createClass(N,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let M=0;this._featuresById.forEach(m=>{k.isSome(m.geometry)&&m.geometry.coords&&(M+=m.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:M/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return N}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(g,
c,da,L,k){let r=function(){function t(){this._emitter=new t.EventEmitter(this)}var n=t.prototype;n.emit=function(p,q){return this._emitter.emit(p,q)};n.on=function(p,q){return this._emitter.on(p,q)};n.once=function(p,q){return this._emitter.once(p,q)};n.hasEventListener=function(p){return this._emitter.hasEventListener(p)};return t}();(function(t){let n=function(){function q(R=null){this._target=R;this._listenersMap=null}var N=q.prototype;N.clear=function(){this._listenersMap&&this._listenersMap.clear();
this._listenersMap=null};N.emit=function(R,M){R=this._listenersMap&&this._listenersMap.get(R);if(!R)return!1;const m=this._target||this;[...R].forEach(I=>{I.call(m,M)});return 0<R.length};N.on=function(R,M){if(Array.isArray(R)){var m=R.map(I=>this.on(I,M));return L.handlesGroup(m)}if(R.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);m=this._listenersMap.get(R)||[];m.push(M);this._listenersMap.set(R,
m);return{remove:()=>{const I=this._listenersMap&&this._listenersMap.get(R)||[],d=I.indexOf(M);0<=d&&I.splice(d,1)}}};N.once=function(R,M){const m=this.on(R,I=>{m.remove();M.call(null,I)});return m};N.hasEventListener=function(R){R=this._listenersMap&&this._listenersMap.get(R);return null!=R&&0<R.length};return q}();t.EventEmitter=n;t.EventedMixin=q=>{q=function(N){function R(){var m=N.apply(this,arguments)||this;m._emitter=new n;return m}g._inheritsLoose(R,N);var M=R.prototype;M.destroy=function(){this._emitter.clear()};
M.emit=function(m,I){return this._emitter.emit(m,I)};M.on=function(m,I){return this._emitter.on(m,I)};M.once=function(m,I){return this._emitter.once(m,I)};M.hasEventListener=function(m){return this._emitter.hasEventListener(m)};return R}(q);return q=c.__decorate([k.subclass("esri.core.Evented")],q)};let p=function(q){function N(){var M=q.apply(this,arguments)||this;M._emitter=new r.EventEmitter(g._assertThisInitialized(M));return M}g._inheritsLoose(N,q);var R=N.prototype;R.destroy=function(){this._emitter.clear()};
R.emit=function(M,m){return this._emitter.emit(M,m)};R.on=function(M,m){return this._emitter.on(M,m)};R.once=function(M,m){return this._emitter.once(M,m)};R.hasEventListener=function(M){return this._emitter.hasEventListener(M)};return N}(da);p=c.__decorate([k.subclass("esri.core.Evented")],p);t.EventedAccessor=p})(r||(r={}));return r})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(g,c,da,L){function k(d=m){return[d[0],
d[1],d[2],d[3],d[4],d[5]]}function r(d,l,G,z,A,O,h=k()){h[0]=d;h[1]=l;h[2]=G;h[3]=z;h[4]=A;h[5]=O;return h}function t(d){return d[0]>=d[3]?0:d[3]-d[0]}function n(d){return d[1]>=d[4]?0:d[4]-d[1]}function p(d){return d[2]>=d[5]?0:d[5]-d[2]}function q(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function N(d,l){d[0]=l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function R(d){return 6===d.length}
const M=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],m=[0,0,0,0,0,0],I=k();g.NEGATIVE_INFINITY=M;g.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];g.ZERO=m;g.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};g.center=function(d,l=[0,0,0]){l[0]=d[0]+t(d)/2;l[1]=d[1]+n(d)/2;l[2]=d[2]+p(d)/2;return l};g.contains=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};g.containsPoint=function(d,
l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};g.containsPointWithMargin=function(d,l,G){return l[0]>=d[0]-G&&l[1]>=d[1]-G&&l[2]>=d[2]-G&&l[0]<=d[3]+G&&l[1]<=d[4]+G&&l[2]<=d[5]+G};g.create=k;g.depth=n;g.diameter=function(d){const l=t(d),G=p(d);d=n(d);return Math.sqrt(l*l+G*G+d*d)};g.empty=function(d){return d?N(d,M):k(M)};g.equals=function(d,l,G){if(c.isNone(d)||c.isNone(l))return d===l;if(!R(d)||!R(l))return!1;if(G)for(let z=0;z<d.length;z++){if(!G(d[z],l[z]))return!1}else for(G=
0;G<d.length;G++)if(d[G]!==l[G])return!1;return!0};g.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};g.expandWithBuffer=function(d,l,G=0,z=l.length/3){let A=d[0],O=d[1],h=d[2],u=d[3],B=d[4],E=d[5];for(let ea=0;ea<z;ea++)A=Math.min(A,l[G+3*ea]),O=Math.min(O,l[G+3*ea+1]),h=Math.min(h,l[G+3*ea+2]),u=Math.max(u,l[G+3*ea]),B=Math.max(B,l[G+3*ea+1]),E=Math.max(E,l[G+3*ea+2]);
d[0]=A;d[1]=O;d[2]=h;d[3]=u;d[4]=B;d[5]=E};g.expandWithNestedArray=function(d,l,G){const z=l.length;let A=d[0],O=d[1],h=d[2],u=d[3],B=d[4],E=d[5];if(G)for(G=0;G<z;G++){var ea=l[G];A=Math.min(A,ea[0]);O=Math.min(O,ea[1]);h=Math.min(h,ea[2]);u=Math.max(u,ea[0]);B=Math.max(B,ea[1]);E=Math.max(E,ea[2])}else for(G=0;G<z;G++)ea=l[G],A=Math.min(A,ea[0]),O=Math.min(O,ea[1]),u=Math.max(u,ea[0]),B=Math.max(B,ea[1]);d[0]=A;d[1]=O;d[2]=h;d[3]=u;d[4]=B;d[5]=E};g.expandWithOffset=function(d,l,G,z){d[0]=Math.min(d[0],
d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+G);d[4]=Math.max(d[4],d[4]+G);d[2]=Math.min(d[2],d[2]+z);d[5]=Math.max(d[5],d[5]+z)};g.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};g.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],l[1]);d[5]=Math.max(d[5],l[2])};g.fromExtent=function(d,l=k()){l[0]=d.xmin;
l[1]=d.ymin;l[2]=d.hasZ?d.zmin:-Infinity;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.hasZ?d.zmax:Infinity;return l};g.fromMinMax=function(d,l,G=k()){G[0]=d[0];G[1]=d[1];G[2]=d[2];G[3]=l[0];G[4]=l[1];G[5]=l[2];return G};g.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};g.fromValues=r;g.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};g.getMin=function(d,l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};g.height=p;g.intersects=
q;g.intersectsClippingArea=function(d,l){return c.isNone(l)?!0:q(d,l)};g.is=R;g.isPoint=function(d){return 0===t(d)&&0===n(d)&&0===p(d)};g.maximumDimension=function(d){return Math.max(t(d),p(d),n(d))};g.offset=function(d,l,G,z,A=d){A[0]=d[0]+l;A[1]=d[1]+G;A[2]=d[2]+z;A[3]=d[3]+l;A[4]=d[4]+G;A[5]=d[5]+z;return A};g.scale=function(d,l,G=d){const z=d[0]+t(d)/2,A=d[1]+n(d)/2,O=d[2]+p(d)/2;G[0]=z+(d[0]-z)*l;G[1]=A+(d[1]-A)*l;G[2]=O+(d[2]-O)*l;G[3]=z+(d[3]-z)*l;G[4]=A+(d[4]-A)*l;G[5]=O+(d[5]-O)*l;return G};
g.set=N;g.setMax=function(d,l,G=d){G[3]=l[0];G[4]=l[1];G[5]=l[2];G!==d&&(G[0]=d[0],G[1]=d[1],G[2]=d[2]);return d};g.setMin=function(d,l,G=d){G[0]=l[0];G[1]=l[1];G[2]=l[2];G!==d&&(G[3]=d[3],G[4]=d[4],G[5]=d[5]);return G};g.size=function(d,l=[0,0,0]){l[0]=t(d);l[1]=n(d);l[2]=p(d);return l};g.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new da({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):new da({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};
g.toRect=function(d,l){l||(l=L.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};g.width=t;g.wrap=function(d,l,G,z,A,O){return r(d,l,G,z,A,O,I)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(g,c,da,L,k){function r(m=M){return[m[0],m[1],m[2],m[3]]}function t(m,I){m!==I&&(m[0]=I[0],m[1]=I[1],m[2]=
I[2],m[3]=I[3]);return m}function n(m){return L.isNone(m)||m[0]>=m[2]?0:m[2]-m[0]}function p(m){return m[1]>=m[3]?0:m[3]-m[1]}function q(m,I,d){return I>=m[0]&&d>=m[1]&&I<=m[2]&&d<=m[3]}function N(m){return null!=m&&4===m.length}const R=[Infinity,Infinity,-Infinity,-Infinity],M=[0,0,0,0];g.NEGATIVE_INFINITY=R;g.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];g.UNIT=[0,0,1,1];g.ZERO=M;g.allFinite=function(m){for(let I=0;4>I;I++)if(!isFinite(m[I]))return!1;return!0};g.area=function(m){return n(m)*
p(m)};g.center=function(m,I=[0,0]){I[0]=(m[0]+m[2])/2;I[1]=(m[1]+m[3])/2;return I};g.clone=function(m){return[m[0],m[1],m[2],m[3]]};g.contains=function(m,I){return I[0]>=m[0]&&I[2]<=m[2]&&I[1]>=m[1]&&I[3]<=m[3]};g.containsPoint=function(m,I){return q(m,I[0],I[1])};g.containsPointObject=function(m,I){return q(m,I.x,I.y)};g.containsPointWithMargin=function(m,I,d){return I[0]>=m[0]-d&&I[1]>=m[1]-d&&I[0]<=m[2]+d&&I[1]<=m[3]+d};g.containsXY=q;g.containsXYWithMargin=function(m,I,d,l){return I>=m[0]-l&&
d>=m[1]-l&&I<=m[2]+l&&d<=m[3]+l};g.copy=t;g.create=r;g.distance=function(m,I){const d=(m[1]+m[3])/2,l=Math.max(Math.abs(I[0]-(m[0]+m[2])/2)-n(m)/2,0);m=Math.max(Math.abs(I[1]-d)-p(m)/2,0);return Math.sqrt(l*l+m*m)};g.empty=function(m){return m?t(m,R):r(R)};g.equals=function(m,I){return N(m)&&N(I)?m[0]===I[0]&&m[1]===I[1]&&m[2]===I[2]&&m[3]===I[3]:m===I};g.expand=function(m,I,d){if(L.isNone(I))t(d,m);else if("length"in I)if(N(I))d[0]=Math.min(m[0],I[0]),d[1]=Math.min(m[1],I[1]),d[2]=Math.max(m[2],
I[2]),d[3]=Math.max(m[3],I[3]);else{if(2===I.length||3===I.length)d[0]=Math.min(m[0],I[0]),d[1]=Math.min(m[1],I[1]),d[2]=Math.max(m[2],I[0]),d[3]=Math.max(m[3],I[1])}else switch(I.type){case "extent":d[0]=Math.min(m[0],I.xmin);d[1]=Math.min(m[1],I.ymin);d[2]=Math.max(m[2],I.xmax);d[3]=Math.max(m[3],I.ymax);break;case "point":d[0]=Math.min(m[0],I.x),d[1]=Math.min(m[1],I.y),d[2]=Math.max(m[2],I.x),d[3]=Math.max(m[3],I.y)}};g.expandPointInPlace=function(m,I){I[0]<m[0]&&(m[0]=I[0]);I[0]>m[2]&&(m[2]=I[0]);
I[1]<m[1]&&(m[1]=I[1]);I[1]>m[3]&&(m[3]=I[1])};g.expandWithNestedArray=function(m,I,d=m){const l=I.length;let G=m[0],z=m[1],A=m[2];m=m[3];for(let O=0;O<l;O++){const h=I[O];G=Math.min(G,h[0]);z=Math.min(z,h[1]);A=Math.max(A,h[0]);m=Math.max(m,h[1])}d[0]=G;d[1]=z;d[2]=A;d[3]=m;return d};g.fromExtent=function(m,I=r()){I[0]=m.xmin;I[1]=m.ymin;I[2]=m.xmax;I[3]=m.ymax;return I};g.fromValues=function(m,I,d,l,G=r()){G[0]=m;G[1]=I;G[2]=d;G[3]=l;return G};g.height=p;g.intersection=function(m,I,d){if(L.isNone(I))return t(d,
m);const l=I[0],G=I[1],z=I[2];I=I[3];d[0]=da.clamp(m[0],l,z);d[1]=da.clamp(m[1],G,I);d[2]=da.clamp(m[2],l,z);d[3]=da.clamp(m[3],G,I);return d};g.intersects=function(m,I){return Math.max(I[0],m[0])<=Math.min(I[2],m[2])&&Math.max(I[1],m[1])<=Math.min(I[3],m[3])};g.intersectsSegment=function(m,I,d){const l=m[0],G=m[1],z=m[2];m=m[3];const {x:A,y:O}=I,{x:h,y:u}=d;var B=(ea,D)=>0>(u-O)*ea+(A-h)*D+(h*O-A*u);I=B(l,m);d=B(z,m);const E=B(z,G);B=B(l,G);return I===d&&d===E&&E===B&&B===I||A<l&&h<l||A>z&&h>z||
O>m&&u>m||O<G&&u<G?!1:!0};g.intersectsSphere=function(m,I){const d=I[3];var l=Math.abs(I[0]-.5*(m[0]+m[2]));const G=.5*(m[2]-m[0]);if(l>d+G)return!1;var z=.5*(m[3]-m[1]);m=Math.abs(I[1]-.5*(m[1]+m[3]));if(m>d+z)return!1;if(l<G||m<z)return!0;l-=G;z=m-z;return l*l+z*z<=d*d};g.is=N;g.isPoint=function(m){return(0===n(m)||!isFinite(m[0]))&&(0===p(m)||!isFinite(m[1]))};g.offset=function(m,I,d,l=m){l[0]=m[0]+I;l[1]=m[1]+d;l[2]=m[2]+I;l[3]=m[3]+d;return l};g.pad=function(m,I,d=m){d[0]=m[0]-I;d[1]=m[1]-I;
d[2]=m[2]+I;d[3]=m[3]+I;return d};g.setMax=function(m,I,d=m){d[2]=I[0];d[3]=I[1];d!==m&&(d[0]=m[0],d[1]=m[1]);return m};g.setMin=function(m,I,d=m){d[0]=I[0];d[1]=I[1];d!==m&&(d[2]=m[2],d[3]=m[3]);return d};g.size=function(m,I){I[0]=m[2]-m[0];I[1]=m[3]-m[1]};g.toExtent=function(m,I){return new k({xmin:m[0],ymin:m[1],xmax:m[2],ymax:m[3],spatialReference:I})};g.width=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,c,da,L,k){function r(p,q,N){t.minX=q[0];t.minY=q[1];t.maxX=q[2];t.maxY=q[3];p.search(t,N)}const t={minX:0,minY:0,maxX:0,maxY:0};let n=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new L.PooledRBush(9,da("esri-csp-restrictions")?N=>({minX:N[0],minY:N[1],maxX:N[2],
maxY:N[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const N=Array(this._idByBounds.size);let R=0;this._idByBounds.forEach((M,m)=>{N[R++]=m});this._indexInvalid=!1;this._index.clear();this._index.load(N)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(N=>this._idByBounds.has(N))),this._boundsToLoad.length=0)}}var q=p.prototype;q.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();
this._index.clear()};q.delete=function(N){const R=this._boundsById.get(N);this._boundsById.delete(N);R&&(this._idByBounds.delete(R),this._indexInvalid||this._index.remove(R))};q.forEachInBounds=function(N,R){this._loadIndex();r(this._index,N,M=>R(this._idByBounds.get(M)))};q.get=function(N){return this._boundsById.get(N)};q.has=function(N){return this._boundsById.has(N)};q.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};q.set=function(N,R){if(!this._indexInvalid){const M=
this._boundsById.get(N);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(N,R);R&&(this._idByBounds.set(R,N),this._indexInvalid||(this._boundsToLoad.push(R),5E4<this._boundsToLoad.length&&this._loadIndex()))};c._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const N=k.empty();for(const R of this._boundsById.values())R&&(N[0]=Math.min(R[0],N[0]),N[1]=Math.min(R[1],N[1]),N[2]=Math.max(R[2],N[2]),N[3]=Math.max(R[3],N[3]));return N}},{key:"valid",
get:function(){return!this._indexInvalid}}]);return p}();g.BoundsStore=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(g,c,da,L,k,r){function t(E,ea){n(E,0,E.children.length,ea,E)}function n(E,ea,D,F,P){P||(P=new u([]));P.minX=Infinity;P.minY=Infinity;P.maxX=
-Infinity;P.maxY=-Infinity;for(let J=ea,y;J<D;J++)y=E.children[J],p(P,E.leaf?F(y):y);return P}function p(E,ea){E.minX=Math.min(E.minX,ea.minX);E.minY=Math.min(E.minY,ea.minY);E.maxX=Math.max(E.maxX,ea.maxX);E.maxY=Math.max(E.maxY,ea.maxY)}function q(E,ea){return E.minX-ea.minX}function N(E,ea){return E.minY-ea.minY}function R(E){return(E.maxX-E.minX)*(E.maxY-E.minY)}function M(E){return E.maxX-E.minX+(E.maxY-E.minY)}function m(E,ea){return E.minX<=ea.minX&&E.minY<=ea.minY&&ea.maxX<=E.maxX&&ea.maxY<=
E.maxY}function I(E,ea){return ea.minX<=E.maxX&&ea.minY<=E.maxY&&ea.maxX>=E.minX&&ea.maxY>=E.minY}function d(E,ea,D,F,P){for(ea=[ea,D];ea.length;){D=L.assumeNonNull(ea.pop());const J=L.assumeNonNull(ea.pop());if(D-J<=F)continue;const y=J+Math.ceil((D-J)/F/2)*F;r.quickselect(E,y,J,D,P);ea.push(J,y,y,D)}}let l=function(){function E(D=9,F){this._compareMinX=q;this._compareMinY=N;this._toBBox=P=>P;this._maxEntries=Math.max(4,D||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));F&&("function"===
typeof F?this._toBBox=F:this._initFormat(F));this.clear()}var ea=E.prototype;ea.destroy=function(){this.clear();G.prune();z.prune();A.prune();O.prune()};ea.all=function(D){this._all(this._data,D)};ea.search=function(D,F){let P=this._data;const J=this._toBBox;if(I(D,P))for(G.clear();P;){for(let y=0,K=P.children.length;y<K;y++){const x=P.children[y],Y=P.leaf?J(x):x;I(D,Y)&&(P.leaf?F(x):m(D,Y)?this._all(x,F):G.push(x))}P=G.pop()}};ea.collides=function(D){let F=this._data;const P=this._toBBox;if(!I(D,
F))return!1;for(G.clear();F;){for(let J=0,y=F.children.length;J<y;J++){const K=F.children[J],x=F.leaf?P(K):K;if(I(D,x)){if(F.leaf||m(D,x))return!0;G.push(K)}}F=G.pop()}return!1};ea.load=function(D){if(!D.length)return this;if(D.length<this._minEntries){for(let F=0,P=D.length;F<P;F++)this.insert(D[F]);return this}D=this._build(D.slice(0,D.length),0,D.length-1,0);if(this._data.children.length)if(this._data.height===D.height)this._splitRoot(this._data,D);else{if(this._data.height<D.height){const F=this._data;
this._data=D;D=F}this._insert(D,this._data.height-D.height-1,!0)}else this._data=D;return this};ea.insert=function(D){D&&this._insert(D,this._data.height-1);return this};ea.clear=function(){this._data=new u([]);return this};ea.remove=function(D){if(!D)return this;let F=this._data,P=null,J=0,y=!1,K;const x=this._toBBox(D);A.clear();for(O.clear();F||0<A.length;){F||(F=L.assumeNonNull(A.pop()),P=A.data[A.length-1],J=O.pop()??0,y=!0);if(F.leaf&&(K=da.indexOf(F.children,D,F.children.length,F.indexHint),
-1!==K)){F.children.splice(K,1);A.push(F);this._condense(A);break}y||F.leaf||!m(F,x)?P?(J++,F=P.children[J],y=!1):F=null:(A.push(F),O.push(J),J=0,P=F,F=F.children[0])}return this};ea.toJSON=function(){return this._data};ea.fromJSON=function(D){this._data=D;return this};ea._all=function(D,F){for(z.clear();D;){if(!0===D.leaf)for(const P of D.children)F(P);else z.pushArray(D.children);D=z.pop()??null}};ea._build=function(D,F,P,J){var y=P-F+1,K=this._maxEntries;if(y<=K)return D=new u(D.slice(F,P+1)),
t(D,this._toBBox),D;J||(J=Math.ceil(Math.log(y)/Math.log(K)),K=Math.ceil(y/K**(J-1)));const x=new B([]);x.height=J;y=Math.ceil(y/K);K=y*Math.ceil(Math.sqrt(K));for(d(D,F,P,K,this._compareMinX);F<=P;F+=K){const Y=Math.min(F+K-1,P);d(D,F,Y,y,this._compareMinY);for(let aa=F;aa<=Y;aa+=y)x.children.push(this._build(D,aa,Math.min(aa+y-1,Y),J-1))}t(x,this._toBBox);return x};ea._chooseSubtree=function(D,F,P,J){for(;;){J.push(F);if(!0===F.leaf||J.length-1===P)break;let y=Infinity,K=Infinity,x=void 0;for(let Y=
0,aa=F.children.length;Y<aa;Y++){const W=F.children[Y],la=R(W),ca=(Math.max(W.maxX,D.maxX)-Math.min(W.minX,D.minX))*(Math.max(W.maxY,D.maxY)-Math.min(W.minY,D.minY))-la;ca<K?(K=ca,y=la<y?la:y,x=W):ca===K&&la<y&&(y=la,x=W)}F=x||F.children[0]}return F};ea._insert=function(D,F,P){var J=this._toBBox;P=P?D:J(D);A.clear();J=this._chooseSubtree(P,this._data,F,A);J.children.push(D);for(p(J,P);0<=F;)if(A.data[F].children.length>this._maxEntries)this._split(A,F),F--;else break;this._adjustParentBBoxes(P,A,
F)};ea._split=function(D,F){const P=D.data[F];var J=P.children.length;const y=this._minEntries;this._chooseSplitAxis(P,y,J);(J=this._chooseSplitIndex(P,y,J))?(J=P.children.splice(J,P.children.length-J),J=P.leaf?new u(J):new B(J),J.height=P.height,t(P,this._toBBox),t(J,this._toBBox),F?D.data[F-1].children.push(J):this._splitRoot(P,J)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};ea._splitRoot=function(D,F){this._data=new B([D,F]);this._data.height=D.height+
1;t(this._data,this._toBBox)};ea._chooseSplitIndex=function(D,F,P){let J,y,K=void 0;J=y=Infinity;for(let Y=F;Y<=P-F;Y++){var x=n(D,0,Y,this._toBBox);const aa=n(D,Y,P,this._toBBox),W=Math.max(0,Math.min(x.maxX,aa.maxX)-Math.max(x.minX,aa.minX))*Math.max(0,Math.min(x.maxY,aa.maxY)-Math.max(x.minY,aa.minY));x=R(x)+R(aa);W<J?(J=W,K=Y,y=x<y?x:y):W===J&&x<y&&(y=x,K=Y)}return K};ea._chooseSplitAxis=function(D,F,P){const J=D.leaf?this._compareMinX:q,y=D.leaf?this._compareMinY:N,K=this._allDistMargin(D,F,
P,J);F=this._allDistMargin(D,F,P,y);K<F&&D.children.sort(J)};ea._allDistMargin=function(D,F,P,J){D.children.sort(J);J=this._toBBox;var y=n(D,0,F,J);const K=n(D,P-F,P,J);let x=M(y)+M(K);for(let Y=F;Y<P-F;Y++){const aa=D.children[Y];p(y,D.leaf?J(aa):aa);x+=M(y)}for(P=P-F-1;P>=F;P--)y=D.children[P],p(K,D.leaf?J(y):y),x+=M(K);return x};ea._adjustParentBBoxes=function(D,F,P){for(;0<=P;P--)p(F.data[P],D)};ea._condense=function(D){for(let F=D.length-1;0<=F;F--){const P=D.data[F];if(0===P.children.length)if(0<
F){const J=D.data[F-1],y=J.children;y.splice(da.indexOf(y,P,y.length,J.indexHint),1)}else this.clear();else t(P,this._toBBox)}};ea._initFormat=function(D){const F=["return a"," - b",";"];this._compareMinX=new Function("a","b",F.join(D[0]));this._compareMinY=new Function("a","b",F.join(D[1]));this._toBBox=new Function("a","return {minX: a"+D[0]+", minY: a"+D[1]+", maxX: a"+D[2]+", maxY: a"+D[3]+"};")};return E}();const G=new k,z=new k,A=new k,O=new k({deallocator:void 0});k=function(){this.minY=this.minX=
Infinity;this.maxY=this.maxX=-Infinity};let h=function(E){function ea(){var D=E.apply(this,arguments)||this;D.height=1;D.indexHint=new da.PositionHint;return D}c._inheritsLoose(ea,E);return ea}(k),u=function(E){function ea(D){var F=E.call(this)||this;F.children=D;F.leaf=!0;return F}c._inheritsLoose(ea,E);return ea}(h),B=function(E){function ea(D){var F=E.call(this)||this;F.children=D;F.leaf=!1;return F}c._inheritsLoose(ea,E);return ea}(h);g.BBox=k;g.PooledRBush=l;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var c={exports:{}};(function(da){(function(L){L=L();void 0!==L&&(da.exports=L)})(function(){function L(t,n,p,q,N){for(;q>p;){if(600<q-p){var R=q-p+1,M=n-p+1,m=Math.log(R),I=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*I*(R-I)/R)*(0>M-R/2?-1:1);L(t,n,Math.max(p,Math.floor(n-M*I/R+m)),Math.min(q,Math.floor(n+(R-M)*I/R+m)),N)}R=t[n];M=p;I=q;k(t,p,n);for(0<N(t[q],R)&&k(t,p,q);M<I;){k(t,M,I);M++;for(I--;0>
N(t[M],R);)M++;for(;0<N(t[I],R);)I--}0===N(t[p],R)?k(t,p,I):(I++,k(t,I,q));I<=n&&(p=I+1);n<=I&&(q=I-1)}}function k(t,n,p){var q=t[n];t[n]=t[p];t[p]=q}function r(t,n){return t<n?-1:t>n?1:0}return function(t,n,p,q,N){L(t,n,p||0,q||t.length-1,N||r)}})})(c);g.quickselect=c.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(g,c,da,L,k){g.optimizedFeatureQueryEngineAdapter=
{getObjectId(r){return r.objectId},getAttributes(r){return r.attributes},getAttribute(r,t){return r.attributes[t]},cloneWithGeometry(r,t){return new L.OptimizedFeature(t,r.attributes,null,r.objectId)},getGeometry(r){return r.geometry},getCentroid(r,t){c.isNone(r.centroid)&&(r.centroid=da.getCentroidOptimizedGeometry(new k,r.geometry,t.hasZ,t.hasM));return r.centroid}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports",
"../../core/maybe"],function(g,c){function da(k,r,t,n,p,q,N=1){q=p?q?4:3:q?3:2;let R=t,M=t+q,m=0,I=0,d=t=0,l=0;for(let G=0,z=n-1;G<z;G++,R+=q,M+=q){n=r[R];const A=r[R+1],O=r[R+2],h=r[M],u=r[M+1],B=r[M+2];let E=n*u-h*A;d+=E;m+=(n+h)*E;I+=(A+u)*E;p&&(E=n*B-h*O,t+=(O+B)*E,l+=E);n<k[0]&&(k[0]=n);n>k[1]&&(k[1]=n);A<k[2]&&(k[2]=A);A>k[3]&&(k[3]=A);p&&(O<k[4]&&(k[4]=O),O>k[5]&&(k[5]=O))}0<d*N&&(d*=-1);0<l*N&&(l*=-1);if(!d)return null;k=[m,I,.5*d];p&&(k[3]=t,k[4]=.5*l);return k}function L(k,r,t,n,p){p=n?
p?4:3:p?3:2;let q=r,N=r+p,R=0,M=0,m=0,I=0;for(let z=0,A=t-1;z<A;z++,q+=p,N+=p){var d=k[q];const O=k[q+1],h=k[q+2],u=k[N],B=k[N+1],E=k[N+2];if(n){var l=u-d;var G=B-O;const ea=E-h;l=Math.sqrt(l*l+G*G+ea*ea)}else l=u-d,G=B-O,l=Math.sqrt(l*l+G*G);l&&(R+=l,n?(d=[d+.5*(u-d),O+.5*(B-O),h+.5*(E-h)],M+=l*d[0],m+=l*d[1],I+=l*d[2]):(d=[d+.5*(u-d),O+.5*(B-O)],M+=l*d[0],m+=l*d[1]))}return 0<R?n?[M/R,m/R,I/R]:[M/R,m/R]:0<t?n?[k[r],k[r+1],k[r+2]]:[k[r],k[r+1]]:null}g.getCentroidOptimizedGeometry=function(k,r,t,
n,p){if(c.isNone(r)||!r.lengths.length)return null;const q="upperLeft"===p?.originPosition?-1:1;k.lengths.length&&(k.lengths.length=0);k.coords.length&&(k.coords.length=0);p=k.coords;const N=[],R=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:M,coords:m}=r,I=t?n?4:3:n?3:2;let d=0;for(var l of M){const G=
da(R,m,d,l,t,n,q);G&&N.push(G);d+=l*I}N.sort((G,z)=>{let A=q*G[2]-q*z[2];0===A&&t&&(A=G[4]-z[4]);return A});N.length&&(l=6*N[0][2],p[0]=N[0][0]/l,p[1]=N[0][1]/l,t&&(l=6*N[0][4],p[2]=0!==l?N[0][3]/l:0),p[0]<R[0]||p[0]>R[1]||p[1]<R[2]||p[1]>R[3]||t&&(p[2]<R[4]||p[2]>R[5]))&&(p.length=0);if(!p.length)if(r=r.lengths[0]?L(m,0,M[0],t,n):null)p[0]=r[0],p[1]=r[1],t&&2<r.length&&(p[2]=r[2]);else return null;return k};g.lineCentroid=L;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(g,c,da,L,k,r,t){function n(d,l){if(!l)return null;if("x"in l){var G={x:0,y:0};[G.x,G.y]=d(l.x,l.y,R);null!=l.z&&(G.z=l.z);null!=l.m&&(G.m=l.m);return G}return"xmin"in l?(G={xmin:0,ymin:0,
xmax:0,ymax:0},[G.xmin,G.ymin]=d(l.xmin,l.ymin,R),[G.xmax,G.ymax]=d(l.xmax,l.ymax,R),l.hasZ&&(G.zmin=l.zmin,G.zmax=l.zmax,G.hasZ=!0),l.hasM&&(G.mmin=l.mmin,G.mmax=l.mmax,G.hasM=!0),G):"rings"in l?{rings:p(l.rings,d),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:p(l.paths,d),hasM:l.hasM,hasZ:l.hasZ}:"points"in l?{points:q(l.points,d),hasM:l.hasM,hasZ:l.hasZ}:null}function p(d,l){const G=[];for(const z of d)G.push(q(z,l));return G}function q(d,l){const G=[];for(const z of d)d=l(z[0],z[1],[0,0]),G.push(d),
2<z.length&&d.push(z[2]),3<z.length&&d.push(z[3]);return G}function N(){N=c._asyncToGenerator(function*(d,l){d&&l&&(d=Array.isArray(d)?d.map(G=>da.isSome(G.geometry)?G.geometry.spatialReference:null).filter(da.isSome):[d],yield L.initializeProjection(d.map(G=>({source:G,dest:l}))))});return N.apply(this,arguments)}const R=[0,0],M=n.bind(null,t.lngLatToXY),m=n.bind(null,t.xyToLngLat),I=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;
l.push=function(){var G=c._asyncToGenerator(function*(z,A,O){if(!(z&&z.length&&A&&O)||r.equals(A,O))return z;const h={geometries:z,inSpatialReference:A,outSpatialReference:O,resolve:null};this._jobs.push(h);return new Promise(u=>{h.resolve=u;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(z,A,O){return G.apply(this,arguments)}}();l._process=function(){this._timer=null;const G=this._jobs.shift();if(G){var {geometries:z,inSpatialReference:A,outSpatialReference:O,resolve:h}=
G;t.canProject(A,O)?r.isWebMercator(O)?h(z.map(M)):h(z.map(m)):h(L.projectMany(k.jsonAdapter,z,A,O,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());g.checkProjectionSupport=function(d,l){return N.apply(this,arguments)};g.project=function(d,l,G,z){if(!d)return d;G||(G=l,l=d.spatialReference);return r.isValid(l)&&r.isValid(G)&&!r.equals(l,G)?t.canProject(l,G)?(d=r.isWebMercator(G)?M(d):m(d),d.spatialReference=G,d):L.projectMany(k.jsonAdapter,[d],l,G,null,z)[0]:
d};g.projectMany=function(d,l,G){return I.push(d,l,G)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(g,c,da,L,k,r,t,n,p,q,N,R,M,m,I,d,l,G,z,A,O,h,u,B,E,ea,D){function F(){return!!gb&&d.isLoaded()}function P(Q){r.isNone(Za)&&(Za=Promise.all([d.load(),(new Promise((fa,U)=>g(["../chunks/geometryEngineBase"],fa,U))).then(fa=>fa.geometryEngineBase),new Promise((fa,U)=>g(["./geometryAdapters/hydrated"],fa,U))]));return Za.then(([,fa,{hydratedAdapter:U}])=>{t.throwIfAborted(Q);nb=U;gb=fa.default;gb._enableProjection(d.pe);dc.notify()})}function J(Q,fa,U=null,pa=null){return Array.isArray(Q)?0===
Q.length?[]:y(nb,Q,Q[0].spatialReference,fa,U,pa):y(nb,[Q],Q.spatialReference,fa,U,pa)[0]}function y(Q,fa,U,pa,Aa=null,Ca=null){if(r.isNone(U)||r.isNone(pa))return fa;if(aa(U,pa,Aa))return fa.map(Ja=>r.unwrap(la(Ja,U,pa)));if(r.isNone(Aa)){const Ja=B.cacheKey(U,pa);void 0!==Eb[Ja]?Aa=Eb[Ja]:(Aa=x(U,pa,void 0),r.isNone(Aa)&&(Aa=new B),Eb[Ja]=Aa)}if(r.isNone(gb)||r.isNone(Q))throw new Fb;return r.isSome(Ca)?gb._project(Q,fa,U,pa,Aa,Ca):gb._project(Q,fa,U,pa,Aa)}function K(Q,fa){if(!F())for(const U of Q)if(r.isSome(U)&&
!E.equals(U.spatialReference,fa)&&E.isValid(U.spatialReference)&&E.isValid(fa)&&!aa(U.spatialReference,fa))return p.trackAccess(dc),{pending:P(),geometries:null};return{pending:null,geometries:Q.map(U=>r.isNone(U)?null:E.equals(U.spatialReference,fa)?U:E.isValid(U.spatialReference)&&E.isValid(fa)?Y(U,fa):null)}}function x(Q,fa,U=null){if(r.isNone(Q)||r.isNone(fa))return null;if(r.isNone(gb)||r.isNone(nb))throw new Fb;Q=gb._getTransformation(nb,Q,fa,U,U?.spatialReference);return null!==Q?B.fromGE(Q):
null}function Y(Q,fa){try{const U=J(Q,fa);if(null==U)return null;"xmin"in Q&&"xmin"in U&&(U.zmin=Q.zmin,U.zmax=Q.zmax);const pa=D.getGeometryZScaler(U.type,Q.spatialReference,fa);r.isSome(pa)&&pa(U);return U}catch(U){if(!(U instanceof Fb))throw U;return null}}function aa(Q,fa,U){return U?!1:E.equals(Q,fa)?!0:E.isValid(Q)&&E.isValid(fa)&&!!b(Q,fa,Tb)}function W(){W=da._asyncToGenerator(function*(Q,fa,U,pa){if(F())return t.waitTick(pa);if(Array.isArray(Q))for(const {source:Aa,dest:Ca,geographicTransformation:Ja}of Q){if(!aa(Aa,
Ca,Ja))return P(pa)}else if(!aa(Q,fa,U))return P(pa);return t.waitTick(pa)});return W.apply(this,arguments)}function la(Q,fa,U){return Q?"x"in Q?ca(Q,fa,new l,U,0):"xmin"in Q?Ba(Q,fa,new m,U,0):"rings"in Q?ya(Q,fa,new G,U,0):"paths"in Q?wa(Q,fa,new z,U,0):"points"in Q?qa(Q,fa,new I,U,0):null:null}function ca(Q,fa,U,pa,Aa){Qa[0]=Q.x;Qa[1]=Q.y;const Ca=Q.z;Qa[2]=void 0!==Ca?Ca:Aa;if(!Na(Qa,fa,0,Qa,pa,0,1))return null;U.x=Qa[0];U.y=Qa[1];U.spatialReference=pa;void 0===Ca?(U.z=void 0,U.hasZ=!1):(U.z=
Qa[2],U.hasZ=!0);void 0===Q.m?(U.m=void 0,U.hasM=!1):(U.m=Q.m,U.hasM=!0);return U}function qa(Q,fa,U,pa,Aa){const {points:Ca,hasZ:Ja,hasM:Oa}=Q;Q=[];const Wa=Ca.length,Va=[];for(var Ua of Ca)Va.push(Ua[0],Ua[1],Ja?Ua[2]:Aa);if(!Na(Va,fa,0,Va,pa,0,Wa))return null;for(fa=0;fa<Wa;++fa){Aa=3*fa;Ua=Va[Aa];const cb=Va[Aa+1];Ja&&Oa?Q.push([Ua,cb,Va[Aa+2],Ca[fa][3]]):Ja?Q.push([Ua,cb,Va[Aa+2]]):Oa?Q.push([Ua,cb,Ca[fa][2]]):Q.push([Ua,cb])}U.points=Q;U.spatialReference=pa;U.hasZ=Ja;U.hasM=Oa;return U}function wa(Q,
fa,U,pa,Aa){const {paths:Ca,hasZ:Ja,hasM:Oa}=Q;Q=[];if(!xa(Ca,Ja??!1,Oa??!1,fa,Q,pa,Aa))return null;U.paths=Q;U.spatialReference=pa;U.hasZ=Ja;U.hasM=Oa;return U}function ya(Q,fa,U,pa,Aa){const {rings:Ca,hasZ:Ja,hasM:Oa}=Q;Q=[];if(!xa(Ca,Ja??!1,Oa??!1,fa,Q,pa,Aa))return null;U.rings=Q;U.spatialReference=pa;U.hasZ=Ja;U.hasM=Oa;return U}function Ba(Q,fa,U,pa,Aa){const {xmin:Ca,ymin:Ja,xmax:Oa,ymax:Wa,hasZ:Va,hasM:Ua}=Q;if(!Da(Ca,Ja,Va?Q.zmin:Aa,fa,Qa,pa))return null;U.xmin=Qa[0];U.ymin=Qa[1];Va&&(U.zmin=
Qa[2]);if(!Da(Oa,Wa,Va?Q.zmax:Aa,fa,Qa,pa))return null;U.xmax=Qa[0];U.ymax=Qa[1];Va&&(U.zmax=Qa[2]);Ua&&(U.mmin=Q.mmin,U.mmax=Q.mmax);U.spatialReference=pa;return U}function Da(Q,fa,U,pa,Aa,Ca){Sa[0]=Q;Sa[1]=fa;Sa[2]=U;return Na(Sa,pa,0,Aa,Ca,0,1)}function Ka(Q,fa,U,pa){if(r.isNone(fa)||r.isNone(pa)||2>Q.length)return!1;2===Q.length&&(Sa[0]=Q[0],Sa[1]=Q[1],Sa[2]=0,Q=Sa);return Na(Q,fa,0,U,pa,0,1)}function La(Q,fa,U){if(r.isNone(fa))return!1;fa=Z(fa,sb);fa=hb[fa][ma.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;
fa(Q,0,Sa,0);U!==Sa&&(U[0]=Sa[0],U[1]=Sa[1],2<U.length&&(U[2]=Sa[2]));return!0}function Na(Q,fa,U,pa,Aa,Ca,Ja=1){fa=b(fa,Aa,Tb);if(r.isNone(fa))return!1;if(fa===ja){if(Q===pa&&U===Ca)return!0;Ja=U+3*Ja;for(let Oa=U,Wa=Ca;Oa<Ja;Oa++,Wa++)pa[Wa]=Q[Oa];return!0}Ja=U+3*Ja;for(let Oa=U,Wa=Ca;Oa<Ja;Oa+=3,Wa+=3)fa(Q,Oa,pa,Wa);return!0}function xa(Q,fa,U,pa,Aa,Ca,Ja=0){const Oa=[];for(const Wa of Q)for(const Va of Wa)Oa.push(Va[0],Va[1],fa?Va[2]:Ja);if(!Na(Oa,pa,0,Oa,Ca,0,Oa.length/3))return!1;pa=0;Aa.length=
0;for(const Wa of Q){Q=[];for(const Va of Wa)fa&&U?Q.push([Oa[pa++],Oa[pa++],Oa[pa++],Va[3]]):fa?Q.push([Oa[pa++],Oa[pa++],Oa[pa++]]):(U?Q.push([Oa[pa++],Oa[pa++],Va[2]]):Q.push([Oa[pa++],Oa[pa++]]),pa++);Aa.push(Q)}return!0}function a(Q,fa,U,pa){fa=pa+fa;if(fa<pa/2||U>fa)return Number.MAX_VALUE;Q=Math.abs(jb*Q)+Math.asin(U/fa);return Q>=Math.PI/2?Number.MAX_VALUE:U/Math.cos(Q)}function f(Q,fa,U){const pa=Math.sin(Q);Q=Math.cos(Q);const Aa=Math.sin(fa);fa=Math.cos(fa);U[0]=-pa;U[4]=-Aa*Q;U[8]=fa*
Q;U[12]=0;U[1]=Q;U[5]=-Aa*pa;U[9]=fa*pa;U[13]=0;U[2]=0;U[6]=fa;U[10]=Aa;U[14]=0;U[3]=0;U[7]=0;U[11]=0;U[15]=1;return U}function V(Q,fa,U){f(Q,fa,U);N.transpose(U,U);return U}function Z(Q,fa){if(!Q)return ma.UNKNOWN;if(fa.spatialReference===Q)return fa.spatialReferenceId;fa.spatialReference=Q;"metersPerUnit"in fa&&(fa.metersPerUnit=n.getMetersPerUnitForSR(Q,1));return Q.wkt===A.SphericalECEFSpatialReference.wkt?fa.spatialReferenceId=ma.SPHERICAL_ECEF:E.isWGS84(Q)?fa.spatialReferenceId=ma.WGS84:E.isWebMercator(Q)?
fa.spatialReferenceId=ma.WEB_MERCATOR:E.isPlateCarree(Q)?fa.spatialReferenceId=ma.PLATE_CARREE:Q.wkt===A.WGS84ECEFSpatialReference.wkt?fa.spatialReferenceId=ma.WGS84_ECEF:Q.wkid===ea.SupportedGCSWkids.CGCS2000?fa.spatialReferenceId=ma.CGCS2000:Q.wkt===A.SphericalPCPFMars.wkt?fa.spatialReferenceId=ma.SPHERICAL_MARS_PCPF:Q.wkt===A.SphericalPCPFMoon.wkt?fa.spatialReferenceId=ma.SPHERICAL_MOON_PCPF:E.isMars(Q)?fa.spatialReferenceId=ma.GCSMARS2000:E.isMoon(Q)?fa.spatialReferenceId=ma.GCSMOON2000:fa.spatialReferenceId=
ma.UNKNOWN}function ja(Q,fa,U,pa){Q!==U&&(U[pa++]=Q[fa++],U[pa++]=Q[fa++],U[pa]=Q[fa])}function v(Q,fa,U,pa){U[pa++]=xb*(Q[fa++]/h.earth.radius);U[pa++]=xb*(Math.PI/2-2*Math.atan(Math.exp(-Q[fa++]/h.earth.radius)));U[pa]=Q[fa]}function H(Q,fa,U,pa){v(Q,fa,U,pa);na(U,pa,U,pa)}function S(Q,fa,U,pa){v(Q,fa,U,pa);ta(U,pa,U,pa)}function T(Q,fa,U,pa,Aa){var Ca=.4999999*Math.PI;Ca=k.clamp(jb*Q[fa+1],-Ca,Ca);Ca=Math.sin(Ca);U[pa++]=jb*Q[fa]*Aa.radius;U[pa++]=Aa.halfSemiMajorAxis*Math.log((1+Ca)/(1-Ca));U[pa]=
Q[fa+2]}function ia(Q,fa,U,pa){T(Q,fa,U,pa,h.earth)}function ka(Q,fa,U,pa){U[pa]=Q[fa]*ec;U[pa+1]=Q[fa+1]*ec;U[pa+2]=Q[fa+2]}function oa(Q,fa,U,pa){U[pa]=Q[fa]*Cb;U[pa+1]=Q[fa+1]*Cb;U[pa+2]=Q[fa+2]}function ra(Q,fa,U,pa){v(Q,fa,U,pa);ka(U,pa,U,pa)}function sa(Q,fa,U,pa,Aa){Aa+=Q[fa+2];const Ca=jb*Q[fa+1];Q=jb*Q[fa];fa=Math.cos(Ca);U[pa++]=Math.cos(Q)*fa*Aa;U[pa++]=Math.sin(Q)*fa*Aa;U[pa]=Math.sin(Ca)*Aa}function ba(Q,fa,U,pa){sa(Q,fa,U,pa,h.moon.radius)}function ha(Q,fa,U,pa){sa(Q,fa,U,pa,h.mars.radius)}
function na(Q,fa,U,pa){sa(Q,fa,U,pa,h.earth.radius)}function za(Q,fa,U,pa,Aa){var Ca=Q[fa];const Ja=Q[fa+1];fa=Q[fa+2];Q=Math.sqrt(Ca*Ca+Ja*Ja+fa*fa);fa=k.asinClamped(fa/(0===Q?1:Q));Ca=Math.atan2(Ja,Ca);U[pa++]=xb*Ca;U[pa++]=xb*fa;U[pa]=Q-Aa}function Ea(Q,fa,U,pa){za(Q,fa,U,pa,h.moon.radius)}function Ha(Q,fa,U,pa){za(Q,fa,U,pa,h.mars.radius)}function Ia(Q,fa,U,pa){za(Q,fa,U,pa,h.earth.radius)}function Ga(Q,fa,U,pa){Ia(Q,fa,U,pa);ia(U,pa,U,pa)}function Ma(Q,fa,U,pa){Ia(Q,fa,U,pa);ta(U,pa,U,pa)}function ta(Q,
fa,U,pa){var Aa=h.earth;const Ca=jb*Q[fa];var Ja=jb*Q[fa+1];Q=Q[fa+2];fa=Math.sin(Ja);Ja=Math.cos(Ja);const Oa=Aa.radius/Math.sqrt(1-Aa.eccentricitySquared*fa*fa);U[pa++]=(Oa+Q)*Ja*Math.cos(Ca);U[pa++]=(Oa+Q)*Ja*Math.sin(Ca);U[pa++]=(Oa*(1-Aa.eccentricitySquared)+Q)*fa}function Xa(Q,fa,U,pa){var Aa=u.earthEllipsoidConstants,Ca=Q[fa],Ja=Q[fa+1];Q=Q[fa+2];let Oa;fa=Math.abs(Q);var Wa=Ca*Ca+Ja*Ja;var Va=Math.sqrt(Wa);var Ua=Wa+Q*Q;var cb=Math.sqrt(Ua);Ca=Math.atan2(Ja,Ca);var pb=Q*Q/Ua;Ua=Wa/Ua;Ja=Aa.a2/
cb;Wa=Aa.a3-Aa.a4/cb;.3<Ua?(pb=fa/cb*(1+Ua*(Aa.a1+Ja+pb*Wa)/cb),cb=Math.asin(pb),Ja=pb*pb,Ua=Math.sqrt(1-Ja)):(Ua=Va/cb*(1-pb*(Aa.a5-Ja-Ua*Wa)/cb),cb=Math.acos(Ua),Ja=1-Ua*Ua,pb=Math.sqrt(Ja));Oa=1-h.earth.eccentricitySquared*Ja;Ja=h.earth.radius/Math.sqrt(Oa);Aa=Aa.a6*Ja;Ja=Va-Ja*Ua;Wa=fa-Aa*pb;fa=Ua*Ja+pb*Wa;Va=Ua*Wa-pb*Ja;Aa=Va/(Aa/Oa+fa);cb+=Aa;0>Q&&(cb=-cb);U[pa++]=xb*Ca;U[pa++]=xb*cb;U[pa]=fa+Va*Aa/2}function bb(Q,fa,U,pa){Xa(Q,fa,U,pa);na(U,pa,U,pa)}function ab(Q,fa,U,pa){Xa(Q,fa,U,pa);ia(U,
pa,U,pa)}function b(Q,fa,U=Ta()){return r.isNone(Q)||r.isNone(fa)?null:db(Q,fa,U).projector}function db(Q,fa,U){if(r.isNone(Q)||r.isNone(fa)||U.source.spatialReference===Q&&U.dest.spatialReference===fa)return U;const pa=Z(Q,U.source),Aa=Z(fa,U.dest);pa===ma.UNKNOWN&&Aa===ma.UNKNOWN?E.equals(Q,fa)?U.projector=ja:U.projector=null:U.projector=hb[pa][Aa];return U}function Ta(){return{source:{spatialReference:null,spatialReferenceId:ma.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:ma.UNKNOWN,
metersPerUnit:1},projector:ja}}let gb=null,nb=null,Za=null,Eb={};const dc=new q.SimpleObservable;let Fb=function(Q){function fa(){return Q.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}da._inheritsLoose(fa,Q);return fa}(L);var ma;(function(Q){Q[Q.UNKNOWN=0]="UNKNOWN";Q[Q.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Q[Q.WGS84=2]="WGS84";Q[Q.WEB_MERCATOR=3]="WEB_MERCATOR";Q[Q.WGS84_ECEF=4]="WGS84_ECEF";Q[Q.CGCS2000=5]="CGCS2000";Q[Q.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";Q[Q.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Q[Q.GCSMARS2000=8]="GCSMARS2000";Q[Q.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";Q[Q.GCSMOON2000=10]="GCSMOON2000";Q[Q.LON_LAT=11]="LON_LAT";Q[Q.PLATE_CARREE=12]="PLATE_CARREE"})(ma||(ma={}));const ec=h.earth.radius*Math.PI/180,Cb=180/(h.earth.radius*Math.PI),hb={[ma.WGS84]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:ja,[ma.SPHERICAL_ECEF]:na,[ma.SPHERICAL_MARS_PCPF]:null,
[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:ia,[ma.PLATE_CARREE]:ka,[ma.WGS84]:ja,[ma.WGS84_ECEF]:ta},[ma.CGCS2000]:{[ma.CGCS2000]:ja,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:ja,[ma.SPHERICAL_ECEF]:na,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:ka,[ma.WGS84]:null,[ma.WGS84_ECEF]:ta},[ma.GCSMARS2000]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:ja,[ma.GCSMOON2000]:null,
[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:null,[ma.SPHERICAL_ECEF]:null,[ma.SPHERICAL_MARS_PCPF]:ha,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:null,[ma.WGS84]:null,[ma.WGS84_ECEF]:null},[ma.GCSMOON2000]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:ja,[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:null,[ma.SPHERICAL_ECEF]:null,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:ba,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:null,
[ma.WGS84]:null,[ma.WGS84_ECEF]:null},[ma.WEB_MERCATOR]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:v,[ma.WGS84_COMPARABLE_LON_LAT]:v,[ma.SPHERICAL_ECEF]:H,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:ja,[ma.PLATE_CARREE]:ra,[ma.WGS84]:v,[ma.WGS84_ECEF]:S},[ma.WGS84_ECEF]:{[ma.CGCS2000]:Xa,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:Xa,[ma.WGS84_COMPARABLE_LON_LAT]:Xa,[ma.SPHERICAL_ECEF]:bb,[ma.SPHERICAL_MARS_PCPF]:null,
[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:ab,[ma.PLATE_CARREE]:function(Q,fa,U,pa){Xa(Q,fa,U,pa);ka(U,pa,U,pa)},[ma.WGS84]:Xa,[ma.WGS84_ECEF]:ja},[ma.SPHERICAL_ECEF]:{[ma.CGCS2000]:Ia,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:Ia,[ma.WGS84_COMPARABLE_LON_LAT]:Ia,[ma.SPHERICAL_ECEF]:ja,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:Ga,[ma.PLATE_CARREE]:function(Q,fa,U,pa){Ia(Q,fa,U,pa);ka(U,pa,U,pa)},[ma.WGS84]:Ia,
[ma.WGS84_ECEF]:Ma},[ma.SPHERICAL_MARS_PCPF]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:Ha,[ma.GCSMOON2000]:null,[ma.LON_LAT]:Ha,[ma.WGS84_COMPARABLE_LON_LAT]:null,[ma.SPHERICAL_ECEF]:null,[ma.SPHERICAL_MARS_PCPF]:ja,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:null,[ma.WGS84]:null,[ma.WGS84_ECEF]:null},[ma.SPHERICAL_MOON_PCPF]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:Ea,[ma.LON_LAT]:Ea,[ma.WGS84_COMPARABLE_LON_LAT]:null,[ma.SPHERICAL_ECEF]:null,
[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:ja,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:null,[ma.WGS84]:null,[ma.WGS84_ECEF]:null},[ma.UNKNOWN]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:null,[ma.WGS84_COMPARABLE_LON_LAT]:null,[ma.SPHERICAL_ECEF]:null,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:ja,[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:null,[ma.WGS84]:null,[ma.WGS84_ECEF]:null},[ma.LON_LAT]:{[ma.CGCS2000]:ja,
[ma.GCSMARS2000]:ja,[ma.GCSMOON2000]:ja,[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:ja,[ma.SPHERICAL_ECEF]:na,[ma.SPHERICAL_MARS_PCPF]:ha,[ma.SPHERICAL_MOON_PCPF]:ba,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:ia,[ma.PLATE_CARREE]:ka,[ma.WGS84]:ja,[ma.WGS84_ECEF]:ta},[ma.WGS84_COMPARABLE_LON_LAT]:{[ma.CGCS2000]:null,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:ja,[ma.WGS84_COMPARABLE_LON_LAT]:ja,[ma.SPHERICAL_ECEF]:na,[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,
[ma.WEB_MERCATOR]:null,[ma.PLATE_CARREE]:ka,[ma.WGS84]:ja,[ma.WGS84_ECEF]:ta},[ma.PLATE_CARREE]:{[ma.CGCS2000]:oa,[ma.GCSMARS2000]:null,[ma.GCSMOON2000]:null,[ma.LON_LAT]:oa,[ma.WGS84_COMPARABLE_LON_LAT]:oa,[ma.SPHERICAL_ECEF]:function(Q,fa,U,pa){oa(Q,fa,U,pa);na(U,pa,U,pa)},[ma.SPHERICAL_MARS_PCPF]:null,[ma.SPHERICAL_MOON_PCPF]:null,[ma.UNKNOWN]:null,[ma.WEB_MERCATOR]:function(Q,fa,U,pa){oa(Q,fa,U,pa);ia(U,pa,U,pa)},[ma.PLATE_CARREE]:ja,[ma.WGS84]:oa,[ma.WGS84_ECEF]:function(Q,fa,U,pa){oa(Q,fa,U,
pa);ta(U,pa,U,pa)}}},sb={spatialReference:null,spatialReferenceId:ma.UNKNOWN},fc={spatialReference:null,spatialReferenceId:ma.UNKNOWN},Tb=Ta(),zc=Ta(),jb=k.deg2rad(1),xb=k.rad2deg(1),Sa=M.create(),ob=M.create(),tb=M.create(),Qa=M.create(),Hb=M.create();c.canProjectToWGS84ComparableLonLat=function(Q){if(r.isNone(Q))return!1;Q=Z(Q,sb);return!!hb[Q][ma.WGS84_COMPARABLE_LON_LAT]};c.canProjectWithoutEngine=aa;c.computeENUToSphericalPCPFLocalRotation=f;c.computeSphericalPCPFToENULocalRotation=V;c.computeTranslationToOriginAndRotation=
function(Q,fa,U,pa){if(r.isNone(Q)||r.isNone(pa))return!1;var Aa=Z(Q,sb),Ca=Z(pa,fc);if(Aa===Ca&&Ca!==ma.SPHERICAL_ECEF&&Ca!==ma.SPHERICAL_MARS_PCPF&&Ca!==ma.SPHERICAL_MOON_PCPF&&(Aa!==ma.UNKNOWN||E.equals(Q,pa)))return N.fromTranslation(U,fa),!0;if(Ca===ma.SPHERICAL_ECEF||Ca===ma.SPHERICAL_MARS_PCPF||Ca===ma.SPHERICAL_MOON_PCPF){Aa=hb[Aa][ma.LON_LAT];Ca=hb[ma.LON_LAT][Ca];if(r.isNone(Aa)||r.isNone(Ca))return!1;Aa(fa,0,ob,0);Ca(ob,0,tb,0);f(jb*ob[0],jb*ob[1],U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];
return!0}if((Ca===ma.WEB_MERCATOR||Ca===ma.PLATE_CARREE)&&(Aa===ma.WGS84||Aa===ma.CGCS2000&&Ca===ma.PLATE_CARREE||Aa===ma.SPHERICAL_ECEF||Aa===ma.WEB_MERCATOR)){Q=hb[Aa][ma.LON_LAT];Ca=hb[ma.LON_LAT][Ca];if(r.isNone(Q)||r.isNone(Ca))return!1;Q(fa,0,ob,0);Ca(ob,0,tb,0);Aa===ma.SPHERICAL_ECEF?V(jb*ob[0],jb*ob[1],U):N.identity(U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];return!0}return!1};c.getProjectorName=function(Q,fa){switch(b(Q,fa,Tb)){case ja:return"copy3";case na:return"wgs84ToSphericalECEF";case ia:return"wgs84ToWebMercator";
case ka:return"wgs84ToPlateCarree";case ta:return"wgs84ToWGS84ECEF";case v:return"webMercatorToWGS84";case H:return"webMercatorToSphericalECEF";case S:return"webMercatorToWGS84ECEF";case ra:return"webMercatorToPlateCarree";case Xa:return"wgs84ECEFToWGS84";case bb:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ia:return"sphericalECEFToWGS84";case Ga:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case Ea:return"sphericalMoonPCPFToMoon2000";
case Ma:return"sphericalECEFToWGS84ECEF";case ha:return"mars2000ToSphericalPCPF";case ba:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=x;c.getTransformations=function(Q,fa,U=null){if(r.isNone(gb)||r.isNone(nb))throw new Fb;Q=gb._getTransformationBySuitability(nb,Q,fa,U,U?.spatialReference);if(null!==Q){fa=[];for(const pa of Q)fa.push(B.fromGE(pa));return fa}return[]};c.initializeProjection=function(Q,fa,U,pa){return W.apply(this,arguments)};c.isLoaded=F;c.load=P;c.localLinearScaleFactors=
function(Q,fa,U,pa){if(r.isNone(fa)||r.isNone(pa))return!1;const Aa=Z(fa,sb);var Ca=Z(pa,fc);if(Aa===Ca&&Aa!==ma.UNKNOWN||E.equals(fa,pa))return U[0]=1,U[1]=1,U[2]=1,!0;if(Aa===ma.SPHERICAL_ECEF){fa=R.length(Q);Q=fa/Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]);fa/=h.earth.radius;if(Ca===ma.WEB_MERCATOR)return U[0]=Q*fa,U[1]=Q*fa,U[2]=1,!0;if(Ca===ma.WGS84||Ca===ma.CGCS2000)return Ca=Cb,U[0]=Ca*Q*fa,U[1]=Ca*fa,U[2]=1,!0}else if(Aa===ma.PLATE_CARREE){if(Ca===ma.WGS84||Ca===ma.CGCS2000)return U[0]=Cb,U[1]=Cb,U[2]=
1,!0;if(Ca===ma.WEB_MERCATOR)return Ca=Q[1]/h.earth.radius,U[0]=1,U[1]=1/Math.cos(Ca),U[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(Q,fa,U,pa){const Aa=Math.cos(U);Q[0]=Math.cos(fa)*Aa*pa;Q[1]=Math.sin(fa)*Aa*pa;Q[2]=Math.sin(U)*pa};c.lonLatToWebMercatorComparable=T;c.project=J;c.projectBoundingRect=function(Q,fa,U,pa){if(null==Q)return!1;if(E.equals(fa,pa))return O.copy(U,Q),!0;Sa[0]=Q[0];Sa[1]=Q[1];Sa[2]=0;if(!Na(Sa,fa,0,Sa,pa,0,1))return!1;U[0]=Sa[0];U[1]=Sa[1];Sa[0]=Q[2];Sa[1]=Q[3];Sa[2]=
0;if(!Na(Sa,fa,0,Sa,pa,0,1))return!1;U[2]=Sa[0];U[3]=Sa[1];return!0};c.projectBoundingSphere=function(Q,fa,U,pa){if(r.isNone(fa)||r.isNone(pa))return!1;fa=db(fa,pa,zc);if(fa.projector===ja)return U[0]=Q[0],U[1]=Q[1],U[2]=Q[2],U[3]=Q[3],!0;if(r.isNone(fa.projector))return!1;const {source:Aa,dest:Ca}=fa;if(Ca.spatialReferenceId===ma.WEB_MERCATOR){fa=hb[Aa.spatialReferenceId][ma.WGS84];if(r.isNone(fa))return!1;fa(Q,0,ob,0);ia(ob,0,U,0);U[3]=a(ob[1],Q[2],Q[3],h.earth.radius);return!0}if(Aa.spatialReferenceId!==
ma.WGS84&&Aa.spatialReferenceId!==ma.CGCS2000||Ca.spatialReferenceId!==ma.PLATE_CARREE)fa.projector(Q,0,U,0),U[3]=Q[3]*(Aa.metersPerUnit??1)/(Ca.metersPerUnit??1);else{pa=hb[ma.SPHERICAL_ECEF][ma.PLATE_CARREE];let Ja=Q[3];r.isSome(hb[Aa.spatialReferenceId][ma.SPHERICAL_ECEF])&&r.isSome(pa)&&(Ja=a(Q[1],Q[2],Q[3],h.earth.radius));fa.projector(Q,0,U,0);U[3]=Ja}return!0};c.projectBuffer=Na;c.projectDirection=function(Q,fa,U,pa,Aa){R.copy(Qa,Q);R.add(Hb,Q,fa);Ka(Qa,U,Qa,Aa);Ka(Hb,U,Hb,Aa);R.subtract(pa,
Hb,Qa);R.normalize(pa,pa)};c.projectExtent=function(Q,fa,U=fa.spatialReference,pa=0){return r.isSome(Q.spatialReference)&&r.isSome(U)&&r.isSome(Ba(Q,Q.spatialReference,fa,U,pa))};c.projectMany=y;c.projectMultipoint=function(Q,fa,U=fa.spatialReference,pa=0){return r.isSome(Q.spatialReference)&&r.isSome(U)&&r.isSome(qa(Q,Q.spatialReference,fa,U,pa))};c.projectOrLoad=function(Q,fa){Q=K([Q],fa);return r.isSome(Q.pending)?{pending:Q.pending,geometry:null}:r.isSome(Q.geometries)?{pending:null,geometry:Q.geometries[0]}:
{pending:null,geometry:null}};c.projectOrLoadMany=K;c.projectPoint=function(Q,fa,U=fa.spatialReference,pa=0){return r.isSome(U)&&r.isSome(Q.spatialReference)&&r.isSome(ca(Q,Q.spatialReference,fa,U,pa))};c.projectPointToVector=function(Q,fa,U,pa=0){Qa[0]=Q.x;Qa[1]=Q.y;const Aa=Q.z;Qa[2]=void 0!==Aa?Aa:pa;return Na(Qa,Q.spatialReference,0,fa,U,0,1)};c.projectPointToWGS84ComparableLonLat=function(Q,fa){Qa[0]=Q.x;Qa[1]=Q.y;const U=Q.z;Qa[2]=void 0!==U?U:0;return La(Qa,Q.spatialReference,fa)};c.projectPolygon=
function(Q,fa,U=fa.spatialReference,pa=0){return r.isSome(Q.spatialReference)&&r.isSome(U)&&r.isSome(ya(Q,Q.spatialReference,fa,U,pa))};c.projectPolygonToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:fa,rings:U},pa,Aa=0){fa=Z(fa,sb);fa=hb[fa][ma.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;Q=Q?Ca=>Ca:Ca=>R.set(Qa,Ca[0],Ca[1],Aa);for(const Ca of U){U=[];for(const Ja of Ca){const Oa=[0,0,Aa];fa(Q(Ja),0,Oa,0);U.push(Oa)}pa.push(U)}return!0};c.projectPolyline=function(Q,fa,U=fa.spatialReference,
pa=0){return r.isSome(Q.spatialReference)&&r.isSome(U)&&r.isSome(wa(Q,Q.spatialReference,fa,U,pa))};c.projectPolylineToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:fa,paths:U},pa,Aa=0){fa=Z(fa,sb);fa=hb[fa][ma.WGS84_COMPARABLE_LON_LAT];if(r.isNone(fa))return!1;Q=Q?Ca=>Ca:Ca=>R.set(Qa,Ca[0],Ca[1],Aa);for(const Ca of U){U=[];for(const Ja of Ca){const Oa=[0,0,Aa];fa(Q(Ja),0,Oa,0);U.push(Oa)}pa.push(U)}return!0};c.projectVectorToDehydratedPoint=function(Q,fa,U){return Na(Q,fa,0,Qa,U.spatialReference,
0,1)?(U.x=Qa[0],U.y=Qa[1],U.z=Qa[2],U):null};c.projectVectorToPoint=function(Q,fa,U){if(r.isNone(fa)||r.isNone(U))return null;const pa=new l({spatialReference:U});return Na(Q,fa,0,Qa,U,0,1)?(pa.x=Qa[0],pa.y=Qa[1],pa.z=Qa[2],pa):null};c.projectVectorToVector=Ka;c.projectVectorToWGS84ComparableLonLat=function(Q,fa,U){return La(Q,fa,U)};c.projectWithoutEngine=la;c.projectXYZToVector=Da;c.sphericalPCPFtoLonLatElevation=za;c.test={get loadPromise(){return Za}};c.tryProjectWithZConversion=Y;c.unload=function(){Za=
nb=gb=null;Eb={}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(g,c,da,L,k,r,t,n){function p(ca){ca=x[ca];if(!ca)throw Error("unknown type");return ca}function q(ca){return K[ca].baseUnit}function N(ca,qa=null){qa=qa||
p(ca);return K[qa].baseUnit===ca}function R(ca,qa,wa){if(qa===wa)return ca;const ya=p(qa);if(ya!==p(wa))throw Error("incompatible units");ca=N(qa,ya)?ca:ca*K[ya].units[qa].inBaseUnits;return N(wa,ya)?ca:ca/K[ya].units[wa].inBaseUnits}function M(ca,qa){ca=R(ca,qa,"meters");return 3E3>Math.abs(ca)?"meters":"kilometers"}function m(ca,qa){ca=R(ca,qa,"meters");return 1E5>Math.abs(ca)?"meters":"kilometers"}function I(ca,qa){ca=R(ca,qa,"feet");return 1E3>Math.abs(ca)?"feet":"miles"}function d(ca,qa){ca=
R(ca,qa,"feet");return 1E5>Math.abs(ca)?"feet":"miles"}function l(ca,qa){ca=R(ca,qa,"square-meters");return 3E6>Math.abs(ca)?"square-meters":"square-kilometers"}function G(ca,qa){ca=R(ca,qa,"square-feet");return 1E6>Math.abs(ca)?"square-feet":"square-miles"}function z(ca){return y.fromJSON(ca.toLowerCase())||null}function A(ca){const qa=O(ca),wa=k.getReferenceEllipsoid(ca).metersPerDegree;return qa>=wa?"meters":B(ca)}function O(ca,qa=r.earth.metersPerDegree){return L.unwrapOr(h(ca,!0),qa)}function h(ca,
qa=!1){const wa=L.isSome(ca)?ca.wkid:null;ca=L.isSome(ca)?ca.wkt:null;let ya=null;if(wa){if(t.isWKIDFromMars(wa))return r.mars.metersPerDegree;if(t.isWKIDFromMoon(wa))return r.moon.metersPerDegree;ya=F.values[F[wa]];!ya&&qa&&J.has(wa)&&(ya=ea)}else ca&&(/^PROJCS/i.test(ca)?ya=u(D.exec(ca),ya):/^GEOCCS/i.test(ca)&&(ya=u(P.exec(ca),ya)));return ya}function u(ca,qa){return ca&&ca[1]?parseFloat(ca[1].split(",")[1]):qa}function B(ca){var qa=L.isSome(ca)?ca.wkid:null,wa=L.isSome(ca)?ca.wkt:null;ca=null;
if(qa)ca=F.units[F[qa]];else if(wa&&(qa=/^PROJCS/i.test(wa)?D:/^GEOCCS/i.test(wa)?P:null)&&(qa=qa.exec(wa))&&qa[1]&&(qa=qa[1],ca=(ca=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&ca[1],!ca||!F.units.includes(ca))){qa=parseFloat(qa.split(",")[1]);ca=null;wa=F.values;for(let ya=0;ya<wa.length;++ya)if(1E-7>Math.abs(qa-wa[ya])){ca=F.units[ya];break}}return L.isSome(ca)?z(ca):null}function E(ca){ca=B(ca);if(L.isNone(ca))return null;switch(ca){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const ea=r.earth.radius*Math.PI/200,D=/UNIT\[([^\]]+)\]\]$/i,F=n,P=/UNIT\[([^\]]+)\]/i,J=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),y=da.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};n={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(ca=>ca*ca)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const K={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:n},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},x=(()=>{const ca={};for(const qa in K)for(const wa in K[qa].units)ca[wa]=qa;return ca})(),Y="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),aa=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),W={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},la={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};c=da.strict()(W);n=da.strict()(la);da=da.strict()({...W,...la});g.areaUnitFromSpatialReference=function(ca){ca=B(ca);return L.isNone(ca)?null:aa.get(ca)};g.areaUnitsJSONMap=c;g.baseUnitForUnit=function(ca){return q(p(ca))};g.baseUnitForUnitType=q;g.convertUnit=R;g.getDefaultUnitForView=function(ca){if(L.isNone(ca))return"metric";var qa=ca.map;if(qa=qa&&"portalItem"in qa?qa.portalItem?.portal:null)switch(qa?.user?.units??qa.units){case "metric":return"metric";case "english":return"imperial"}return L.unwrapOr(E(ca.spatialReference),
"metric")};g.getDefaultUnitSystem=E;g.getMetersPerUnit=h;g.getMetersPerUnitForSR=O;g.getMetersPerVerticalUnitForSR=function(ca){if(L.isSome(ca)&&!t.isEarth(ca))return 1;ca=O(ca);return 1E5<ca?1:ca};g.getUnitString=B;g.getVerticalUnitStringForSR=A;g.inchesPerMeter=39.37;g.isBaseUnit=N;g.isMeasurementSystem=function(ca){return"imperial"===ca||"metric"===ca};g.lengthToDegrees=function(ca,qa,wa){return R(ca,qa,"meters")/(wa*Math.PI/180)};g.lengthUnitFromSpatialReference=function(ca){ca=B(ca);return L.isNone(ca)||
!Y.includes(ca)?null:ca};g.lengthUnitsJSONMap=n;g.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");g.measurementLengthUnits=Y;g.preferredAreaUnit=function(ca,qa,wa){switch(wa){case "metric":return l(ca,qa);case "imperial":return G(ca,qa);default:return wa}};g.preferredImperialAreaUnit=G;g.preferredImperialLengthUnit=I;g.preferredImperialVerticalLengthUnit=d;g.preferredLengthUnit=
function(ca,qa,wa){switch(wa){case "metric":return M(ca,qa);case "imperial":return I(ca,qa);default:return wa}};g.preferredMetricAreaUnit=l;g.preferredMetricLengthUnit=M;g.preferredMetricVerticalLengthUnit=m;g.preferredVerticalLengthUnit=function(ca,qa,wa){switch(wa){case "metric":return m(ca,qa);case "imperial":return d(ca,qa);default:return wa}};g.unitFromRESTJSON=z;g.unitToRESTJSON=function(ca){return y.toJSON(ca)||null};g.unitType=p;g.unitsJSONMap=da;g.verticalLengthUnitFromSpatialReference=function(ca){ca=
A(ca);return L.isNone(ca)||!Y.includes(ca)?null:ca};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(g,c,da,L,k){function r(N){return new da({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${N.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const t=r(L.earth),n=r(L.mars),p=r(L.moon),q=new da({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${L.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});g.SphericalECEFSpatialReference=t;g.SphericalPCPFMars=
n;g.SphericalPCPFMoon=p;g.WGS84ECEFSpatialReference=q;g.createSphericalPCPF=r;g.getReferenceEllipsoid=function(N){return c.isSome(N)&&(k.isMars(N)||N===n)?L.mars:c.isSome(N)&&(k.isMoon(N)||N===p)?L.moon:L.earth};g.getReferenceEllipsoidFromWKID=function(N){return k.isWKIDFromMars(N)?L.mars:k.isWKIDFromMoon(N)?L.moon:L.earth};g.getSphericalPCPF=function(N){return N&&(k.isMars(N)||N===n)?n:N&&(k.isMoon(N)||N===p)?p:t};g.getSphericalPCPFForEllipsoid=function(N){return N&&N===L.mars?n:N&&N===L.moon?p:
t};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(g,c){let da=function(){function L(){this._observers=[]}var k=L.prototype;k.observe=function(r){this._observers.includes(r)||this._observers.push(r);return new c.ObservationHandle(this._observers,r)};k.notify=function(){const r=this._observers.slice();for(let t=0;t<r.length;++t){const n=r[t];
n.onInvalidated();n.onCommitted()}};return L}();g.SimpleObservable=da;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(g,c,da){function L(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];a[9]=f[9];a[10]=f[10];a[11]=f[11];a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a}function k(a,f,V,Z,ja,v,H,S,T,ia,ka,oa,ra,sa,ba,ha,na){a[0]=
f;a[1]=V;a[2]=Z;a[3]=ja;a[4]=v;a[5]=H;a[6]=S;a[7]=T;a[8]=ia;a[9]=ka;a[10]=oa;a[11]=ra;a[12]=sa;a[13]=ba;a[14]=ha;a[15]=na;return a}function r(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function t(a,f){if(a===f){const V=f[1],Z=f[2],ja=f[3],v=f[6],H=f[7],S=f[11];a[1]=f[4];a[2]=f[8];a[3]=f[12];a[4]=V;a[6]=f[9];a[7]=f[13];a[8]=Z;a[9]=v;a[11]=f[14];a[12]=ja;a[13]=H;a[14]=S}else a[0]=f[0],a[1]=f[4],a[2]=f[8],a[3]=f[12],
a[4]=f[1],a[5]=f[5],a[6]=f[9],a[7]=f[13],a[8]=f[2],a[9]=f[6],a[10]=f[10],a[11]=f[14],a[12]=f[3],a[13]=f[7],a[14]=f[11],a[15]=f[15];return a}function n(a,f){const V=f[0],Z=f[1],ja=f[2],v=f[3],H=f[4],S=f[5],T=f[6],ia=f[7],ka=f[8],oa=f[9],ra=f[10],sa=f[11],ba=f[12],ha=f[13],na=f[14];f=f[15];const za=V*S-Z*H,Ea=V*T-ja*H,Ha=V*ia-v*H,Ia=Z*T-ja*S,Ga=Z*ia-v*S,Ma=ja*ia-v*T,ta=ka*ha-oa*ba,Xa=ka*na-ra*ba,bb=ka*f-sa*ba,ab=oa*na-ra*ha,b=oa*f-sa*ha,db=ra*f-sa*na;let Ta=za*db-Ea*b+Ha*ab+Ia*bb-Ga*Xa+Ma*ta;if(!Ta)return null;
Ta=1/Ta;a[0]=(S*db-T*b+ia*ab)*Ta;a[1]=(ja*b-Z*db-v*ab)*Ta;a[2]=(ha*Ma-na*Ga+f*Ia)*Ta;a[3]=(ra*Ga-oa*Ma-sa*Ia)*Ta;a[4]=(T*bb-H*db-ia*Xa)*Ta;a[5]=(V*db-ja*bb+v*Xa)*Ta;a[6]=(na*Ha-ba*Ma-f*Ea)*Ta;a[7]=(ka*Ma-ra*Ha+sa*Ea)*Ta;a[8]=(H*b-S*bb+ia*ta)*Ta;a[9]=(Z*bb-V*b-v*ta)*Ta;a[10]=(ba*Ga-ha*Ha+f*za)*Ta;a[11]=(oa*Ha-ka*Ga-sa*za)*Ta;a[12]=(S*Xa-H*ab-T*ta)*Ta;a[13]=(V*ab-Z*Xa+ja*ta)*Ta;a[14]=(ha*Ea-ba*Ia-na*za)*Ta;a[15]=(ka*Ia-oa*Ea+ra*za)*Ta;return a}function p(a,f){const V=f[0],Z=f[1],ja=f[2],v=f[3],H=f[4],
S=f[5],T=f[6],ia=f[7],ka=f[8],oa=f[9],ra=f[10],sa=f[11],ba=f[12],ha=f[13],na=f[14];f=f[15];a[0]=S*(ra*f-sa*na)-oa*(T*f-ia*na)+ha*(T*sa-ia*ra);a[1]=-(Z*(ra*f-sa*na)-oa*(ja*f-v*na)+ha*(ja*sa-v*ra));a[2]=Z*(T*f-ia*na)-S*(ja*f-v*na)+ha*(ja*ia-v*T);a[3]=-(Z*(T*sa-ia*ra)-S*(ja*sa-v*ra)+oa*(ja*ia-v*T));a[4]=-(H*(ra*f-sa*na)-ka*(T*f-ia*na)+ba*(T*sa-ia*ra));a[5]=V*(ra*f-sa*na)-ka*(ja*f-v*na)+ba*(ja*sa-v*ra);a[6]=-(V*(T*f-ia*na)-H*(ja*f-v*na)+ba*(ja*ia-v*T));a[7]=V*(T*sa-ia*ra)-H*(ja*sa-v*ra)+ka*(ja*ia-v*T);
a[8]=H*(oa*f-sa*ha)-ka*(S*f-ia*ha)+ba*(S*sa-ia*oa);a[9]=-(V*(oa*f-sa*ha)-ka*(Z*f-v*ha)+ba*(Z*sa-v*oa));a[10]=V*(S*f-ia*ha)-H*(Z*f-v*ha)+ba*(Z*ia-v*S);a[11]=-(V*(S*sa-ia*oa)-H*(Z*sa-v*oa)+ka*(Z*ia-v*S));a[12]=-(H*(oa*na-ra*ha)-ka*(S*na-T*ha)+ba*(S*ra-T*oa));a[13]=V*(oa*na-ra*ha)-ka*(Z*na-ja*ha)+ba*(Z*ra-ja*oa);a[14]=-(V*(S*na-T*ha)-H*(Z*na-ja*ha)+ba*(Z*T-ja*S));a[15]=V*(S*ra-T*oa)-H*(Z*ra-ja*oa)+ka*(Z*T-ja*S);return a}function q(a){const f=a[0],V=a[1],Z=a[2],ja=a[3],v=a[4],H=a[5],S=a[6],T=a[7],ia=
a[8],ka=a[9],oa=a[10],ra=a[11],sa=a[12],ba=a[13],ha=a[14];a=a[15];return(f*H-V*v)*(oa*a-ra*ha)-(f*S-Z*v)*(ka*a-ra*ba)+(f*T-ja*v)*(ka*ha-oa*ba)+(V*S-Z*H)*(ia*a-ra*sa)-(V*T-ja*H)*(ia*ha-oa*sa)+(Z*T-ja*S)*(ia*ba-ka*sa)}function N(a,f,V){const Z=f[0],ja=f[1],v=f[2],H=f[3],S=f[4],T=f[5],ia=f[6],ka=f[7],oa=f[8],ra=f[9],sa=f[10],ba=f[11],ha=f[12],na=f[13],za=f[14];f=f[15];let Ea=V[0],Ha=V[1],Ia=V[2],Ga=V[3];a[0]=Ea*Z+Ha*S+Ia*oa+Ga*ha;a[1]=Ea*ja+Ha*T+Ia*ra+Ga*na;a[2]=Ea*v+Ha*ia+Ia*sa+Ga*za;a[3]=Ea*H+Ha*ka+
Ia*ba+Ga*f;Ea=V[4];Ha=V[5];Ia=V[6];Ga=V[7];a[4]=Ea*Z+Ha*S+Ia*oa+Ga*ha;a[5]=Ea*ja+Ha*T+Ia*ra+Ga*na;a[6]=Ea*v+Ha*ia+Ia*sa+Ga*za;a[7]=Ea*H+Ha*ka+Ia*ba+Ga*f;Ea=V[8];Ha=V[9];Ia=V[10];Ga=V[11];a[8]=Ea*Z+Ha*S+Ia*oa+Ga*ha;a[9]=Ea*ja+Ha*T+Ia*ra+Ga*na;a[10]=Ea*v+Ha*ia+Ia*sa+Ga*za;a[11]=Ea*H+Ha*ka+Ia*ba+Ga*f;Ea=V[12];Ha=V[13];Ia=V[14];Ga=V[15];a[12]=Ea*Z+Ha*S+Ia*oa+Ga*ha;a[13]=Ea*ja+Ha*T+Ia*ra+Ga*na;a[14]=Ea*v+Ha*ia+Ia*sa+Ga*za;a[15]=Ea*H+Ha*ka+Ia*ba+Ga*f;return a}function R(a,f,V){const Z=V[0],ja=V[1];V=V[2];
if(f===a)a[12]=f[0]*Z+f[4]*ja+f[8]*V+f[12],a[13]=f[1]*Z+f[5]*ja+f[9]*V+f[13],a[14]=f[2]*Z+f[6]*ja+f[10]*V+f[14],a[15]=f[3]*Z+f[7]*ja+f[11]*V+f[15];else{const v=f[0],H=f[1],S=f[2],T=f[3],ia=f[4],ka=f[5],oa=f[6],ra=f[7],sa=f[8],ba=f[9],ha=f[10],na=f[11];a[0]=v;a[1]=H;a[2]=S;a[3]=T;a[4]=ia;a[5]=ka;a[6]=oa;a[7]=ra;a[8]=sa;a[9]=ba;a[10]=ha;a[11]=na;a[12]=v*Z+ia*ja+sa*V+f[12];a[13]=H*Z+ka*ja+ba*V+f[13];a[14]=S*Z+oa*ja+ha*V+f[14];a[15]=T*Z+ra*ja+na*V+f[15]}return a}function M(a,f,V){const Z=V[0],ja=V[1];
V=V[2];a[0]=f[0]*Z;a[1]=f[1]*Z;a[2]=f[2]*Z;a[3]=f[3]*Z;a[4]=f[4]*ja;a[5]=f[5]*ja;a[6]=f[6]*ja;a[7]=f[7]*ja;a[8]=f[8]*V;a[9]=f[9]*V;a[10]=f[10]*V;a[11]=f[11]*V;a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a}function m(a,f,V,Z){let ja=Z[0],v=Z[1];Z=Z[2];let H=Math.sqrt(ja*ja+v*v+Z*Z);var S=void 0,T=void 0;let ia=void 0,ka=void 0,oa=void 0,ra=void 0,sa=void 0,ba=void 0,ha=void 0,na=void 0,za=void 0,Ea=void 0,Ha=void 0,Ia=void 0,Ga=void 0,Ma=void 0,ta=void 0,Xa=void 0,bb=void 0,ab=void 0,b=
void 0,db=void 0;T=S=void 0;if(H<da.getEpsilon())return null;H=1/H;ja*=H;v*=H;Z*=H;S=Math.sin(V);T=Math.cos(V);ia=1-T;ka=f[0];oa=f[1];ra=f[2];sa=f[3];ba=f[4];ha=f[5];na=f[6];za=f[7];Ea=f[8];Ha=f[9];Ia=f[10];Ga=f[11];Ma=ja*ja*ia+T;ta=v*ja*ia+Z*S;Xa=Z*ja*ia-v*S;bb=ja*v*ia-Z*S;ab=v*v*ia+T;b=Z*v*ia+ja*S;db=ja*Z*ia+v*S;S=v*Z*ia-ja*S;T=Z*Z*ia+T;a[0]=ka*Ma+ba*ta+Ea*Xa;a[1]=oa*Ma+ha*ta+Ha*Xa;a[2]=ra*Ma+na*ta+Ia*Xa;a[3]=sa*Ma+za*ta+Ga*Xa;a[4]=ka*bb+ba*ab+Ea*b;a[5]=oa*bb+ha*ab+Ha*b;a[6]=ra*bb+na*ab+Ia*b;a[7]=
sa*bb+za*ab+Ga*b;a[8]=ka*db+ba*S+Ea*T;a[9]=oa*db+ha*S+Ha*T;a[10]=ra*db+na*S+Ia*T;a[11]=sa*db+za*S+Ga*T;f!==a&&(a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);return a}function I(a,f,V){const Z=Math.sin(V);V=Math.cos(V);const ja=f[4],v=f[5],H=f[6],S=f[7],T=f[8],ia=f[9],ka=f[10],oa=f[11];f!==a&&(a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[4]=ja*V+T*Z;a[5]=v*V+ia*Z;a[6]=H*V+ka*Z;a[7]=S*V+oa*Z;a[8]=T*V-ja*Z;a[9]=ia*V-v*Z;a[10]=ka*V-H*Z;a[11]=oa*V-S*Z;return a}
function d(a,f,V){const Z=Math.sin(V);V=Math.cos(V);const ja=f[0],v=f[1],H=f[2],S=f[3],T=f[8],ia=f[9],ka=f[10],oa=f[11];f!==a&&(a[4]=f[4],a[5]=f[5],a[6]=f[6],a[7]=f[7],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=ja*V-T*Z;a[1]=v*V-ia*Z;a[2]=H*V-ka*Z;a[3]=S*V-oa*Z;a[8]=ja*Z+T*V;a[9]=v*Z+ia*V;a[10]=H*Z+ka*V;a[11]=S*Z+oa*V;return a}function l(a,f,V){const Z=Math.sin(V);V=Math.cos(V);const ja=f[0],v=f[1],H=f[2],S=f[3],T=f[4],ia=f[5],ka=f[6],oa=f[7];f!==a&&(a[8]=f[8],a[9]=f[9],a[10]=f[10],a[11]=
f[11],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=ja*V+T*Z;a[1]=v*V+ia*Z;a[2]=H*V+ka*Z;a[3]=S*V+oa*Z;a[4]=T*V-ja*Z;a[5]=ia*V-v*Z;a[6]=ka*V-H*Z;a[7]=oa*V-S*Z;return a}function G(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=f[0];a[13]=f[1];a[14]=f[2];a[15]=1;return a}function z(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=f[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function A(a,f,V){if(0===
f)return r(a);let Z=V[0],ja=V[1];V=V[2];let v=Math.sqrt(Z*Z+ja*ja+V*V),H=void 0,S=void 0,T=void 0;if(v<da.getEpsilon())return null;v=1/v;Z*=v;ja*=v;V*=v;H=Math.sin(f);S=Math.cos(f);T=1-S;a[0]=Z*Z*T+S;a[1]=ja*Z*T+V*H;a[2]=V*Z*T-ja*H;a[3]=0;a[4]=Z*ja*T-V*H;a[5]=ja*ja*T+S;a[6]=V*ja*T+Z*H;a[7]=0;a[8]=Z*V*T+ja*H;a[9]=ja*V*T-Z*H;a[10]=V*V*T+S;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function O(a,f){const V=Math.sin(f);f=Math.cos(f);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=V;a[7]=0;a[8]=0;
a[9]=-V;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function h(a,f){const V=Math.sin(f);f=Math.cos(f);a[0]=f;a[1]=0;a[2]=-V;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=V;a[9]=0;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,f){const V=Math.sin(f);f=Math.cos(f);a[0]=f;a[1]=V;a[2]=0;a[3]=0;a[4]=-V;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,f,V){var Z=f[0],ja=f[1],v=f[2],H=f[3],S=Z+Z,T=ja+ja;const ia=v+v;f=
Z*S;const ka=Z*T;Z*=ia;const oa=ja*T;ja*=ia;v*=ia;S*=H;T*=H;H*=ia;a[0]=1-(oa+v);a[1]=ka+H;a[2]=Z-T;a[3]=0;a[4]=ka-H;a[5]=1-(f+v);a[6]=ja+S;a[7]=0;a[8]=Z+T;a[9]=ja-S;a[10]=1-(f+oa);a[11]=0;a[12]=V[0];a[13]=V[1];a[14]=V[2];a[15]=1;return a}function E(a,f){const V=xa,Z=-f[0],ja=-f[1],v=-f[2],H=f[3],S=f[4],T=f[5],ia=f[6],ka=f[7],oa=Z*Z+ja*ja+v*v+H*H;0<oa?(V[0]=2*(S*H+ka*Z+T*v-ia*ja)/oa,V[1]=2*(T*H+ka*ja+ia*Z-S*v)/oa,V[2]=2*(ia*H+ka*v+S*ja-T*Z)/oa):(V[0]=2*(S*H+ka*Z+T*v-ia*ja),V[1]=2*(T*H+ka*ja+ia*Z-S*
v),V[2]=2*(ia*H+ka*v+S*ja-T*Z));B(a,f,V);return a}function ea(a,f){a[0]=f[12];a[1]=f[13];a[2]=f[14];return a}function D(a,f){const V=f[0],Z=f[1],ja=f[2],v=f[4],H=f[5],S=f[6],T=f[8],ia=f[9];f=f[10];a[0]=Math.sqrt(V*V+Z*Z+ja*ja);a[1]=Math.sqrt(v*v+H*H+S*S);a[2]=Math.sqrt(T*T+ia*ia+f*f);return a}function F(a,f){const V=f[0]+f[5]+f[10];let Z=0;0<V?(Z=2*Math.sqrt(V+1),a[3]=.25*Z,a[0]=(f[6]-f[9])/Z,a[1]=(f[8]-f[2])/Z,a[2]=(f[1]-f[4])/Z):f[0]>f[5]&&f[0]>f[10]?(Z=2*Math.sqrt(1+f[0]-f[5]-f[10]),a[3]=(f[6]-
f[9])/Z,a[0]=.25*Z,a[1]=(f[1]+f[4])/Z,a[2]=(f[8]+f[2])/Z):f[5]>f[10]?(Z=2*Math.sqrt(1+f[5]-f[0]-f[10]),a[3]=(f[8]-f[2])/Z,a[0]=(f[1]+f[4])/Z,a[1]=.25*Z,a[2]=(f[6]+f[9])/Z):(Z=2*Math.sqrt(1+f[10]-f[0]-f[5]),a[3]=(f[1]-f[4])/Z,a[0]=(f[8]+f[2])/Z,a[1]=(f[6]+f[9])/Z,a[2]=.25*Z);return a}function P(a,f,V,Z){var ja=f[0],v=f[1],H=f[2],S=f[3],T=ja+ja,ia=v+v,ka=H+H;f=ja*T;const oa=ja*ia;ja*=ka;const ra=v*ia;v*=ka;H*=ka;T*=S;ia*=S;S*=ka;ka=Z[0];const sa=Z[1];Z=Z[2];a[0]=(1-(ra+H))*ka;a[1]=(oa+S)*ka;a[2]=(ja-
ia)*ka;a[3]=0;a[4]=(oa-S)*sa;a[5]=(1-(f+H))*sa;a[6]=(v+T)*sa;a[7]=0;a[8]=(ja+ia)*Z;a[9]=(v-T)*Z;a[10]=(1-(f+ra))*Z;a[11]=0;a[12]=V[0];a[13]=V[1];a[14]=V[2];a[15]=1;return a}function J(a,f,V,Z,ja){var v=f[0],H=f[1],S=f[2],T=f[3],ia=v+v,ka=H+H,oa=S+S;f=v*ia;var ra=v*ka,sa=v*oa;v=H*ka;H*=oa;var ba=S*oa;S=T*ia;ka*=T;const ha=T*oa;var na=Z[0],za=Z[1];oa=Z[2];Z=ja[0];T=ja[1];ja=ja[2];ia=(1-(v+ba))*na;const Ea=(ra+ha)*na;na*=sa-ka;ra=(ra-ha)*za;ba=(1-(f+ba))*za;za*=H+S;sa=(sa+ka)*oa;H=(H-S)*oa;f=(1-(f+v))*
oa;a[0]=ia;a[1]=Ea;a[2]=na;a[3]=0;a[4]=ra;a[5]=ba;a[6]=za;a[7]=0;a[8]=sa;a[9]=H;a[10]=f;a[11]=0;a[12]=V[0]+Z-(ia*Z+ra*T+sa*ja);a[13]=V[1]+T-(Ea*Z+ba*T+H*ja);a[14]=V[2]+ja-(na*Z+za*T+f*ja);a[15]=1;return a}function y(a,f){var V=f[0],Z=f[1],ja=f[2];f=f[3];var v=V+V,H=Z+Z;const S=ja+ja;V*=v;const T=Z*v;Z*=H;const ia=ja*v,ka=ja*H;ja*=S;v*=f;H*=f;f*=S;a[0]=1-Z-ja;a[1]=T+f;a[2]=ia-H;a[3]=0;a[4]=T-f;a[5]=1-V-ja;a[6]=ka+v;a[7]=0;a[8]=ia+H;a[9]=ka-v;a[10]=1-V-Z;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}
function K(a,f,V,Z,ja,v,H){const S=1/(V-f),T=1/(ja-Z),ia=1/(v-H);a[0]=2*v*S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*v*T;a[6]=0;a[7]=0;a[8]=(V+f)*S;a[9]=(ja+Z)*T;a[10]=(H+v)*ia;a[11]=-1;a[12]=0;a[13]=0;a[14]=H*v*2*ia;a[15]=0;return a}function x(a,f,V,Z,ja){f=1/Math.tan(f/2);let v=void 0;a[0]=f/V;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=ja&&Infinity!==ja?(v=1/(Z-ja),a[10]=(ja+Z)*v,a[14]=2*ja*Z*v):(a[10]=-1,a[14]=-2*Z);return a}function Y(a,f,V,
Z){const ja=Math.tan(f.upDegrees*Math.PI/180),v=Math.tan(f.downDegrees*Math.PI/180),H=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*Math.PI/180);const S=2/(H+f),T=2/(ja+v);a[0]=S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=T;a[6]=0;a[7]=0;a[8]=-((H-f)*S*.5);a[9]=(ja-v)*T*.5;a[10]=Z/(V-Z);a[11]=-1;a[12]=0;a[13]=0;a[14]=Z*V/(V-Z);a[15]=0;return a}function aa(a,f,V,Z,ja,v,H){const S=1/(f-V),T=1/(Z-ja),ia=1/(v-H);a[0]=-2*S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*T;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*
ia;a[11]=0;a[12]=(f+V)*S;a[13]=(ja+Z)*T;a[14]=(H+v)*ia;a[15]=1;return a}function W(a,f,V,Z){var ja=void 0;let v=void 0;var H=void 0,S=void 0;let T=void 0,ia=void 0;var ka=void 0,oa=void 0;let ra=void 0,sa=void 0;const ba=f[0],ha=f[1];f=f[2];H=Z[0];S=Z[1];Z=Z[2];ka=V[0];oa=V[1];V=V[2];ja=da.getEpsilon();if(Math.abs(ba-ka)<ja&&Math.abs(ha-oa)<ja&&Math.abs(f-V)<ja)return r(a);ka=ba-ka;oa=ha-oa;ra=f-V;sa=1/Math.sqrt(ka*ka+oa*oa+ra*ra);ka*=sa;oa*=sa;ra*=sa;ja=S*ra-Z*oa;v=Z*ka-H*ra;H=H*oa-S*ka;(sa=Math.sqrt(ja*
ja+v*v+H*H))?(sa=1/sa,ja*=sa,v*=sa,H*=sa):H=v=ja=0;S=oa*H-ra*v;T=ra*ja-ka*H;ia=ka*v-oa*ja;(sa=Math.sqrt(S*S+T*T+ia*ia))?(sa=1/sa,S*=sa,T*=sa,ia*=sa):ia=T=S=0;a[0]=ja;a[1]=S;a[2]=ka;a[3]=0;a[4]=v;a[5]=T;a[6]=oa;a[7]=0;a[8]=H;a[9]=ia;a[10]=ra;a[11]=0;a[12]=-(ja*ba+v*ha+H*f);a[13]=-(S*ba+T*ha+ia*f);a[14]=-(ka*ba+oa*ha+ra*f);a[15]=1;return a}function la(a,f,V,Z){const ja=f[0],v=f[1];f=f[2];var H=Z[0];const S=Z[1];var T=Z[2];Z=ja-V[0];let ia=v-V[1];V=f-V[2];let ka=Z*Z+ia*ia+V*V;0<ka&&(ka=1/Math.sqrt(ka),
Z*=ka,ia*=ka,V*=ka);let oa=S*V-T*ia;T=T*Z-H*V;H=H*ia-S*Z;ka=oa*oa+T*T+H*H;0<ka&&(ka=1/Math.sqrt(ka),oa*=ka,T*=ka,H*=ka);a[0]=oa;a[1]=T;a[2]=H;a[3]=0;a[4]=ia*H-V*T;a[5]=V*oa-Z*H;a[6]=Z*T-ia*oa;a[7]=0;a[8]=Z;a[9]=ia;a[10]=V;a[11]=0;a[12]=ja;a[13]=v;a[14]=f;a[15]=1;return a}function ca(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function qa(a){return Math.sqrt(a[0]**
2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function wa(a,f,V){a[0]=f[0]+V[0];a[1]=f[1]+V[1];a[2]=f[2]+V[2];a[3]=f[3]+V[3];a[4]=f[4]+V[4];a[5]=f[5]+V[5];a[6]=f[6]+V[6];a[7]=f[7]+V[7];a[8]=f[8]+V[8];a[9]=f[9]+V[9];a[10]=f[10]+V[10];a[11]=f[11]+V[11];a[12]=f[12]+V[12];a[13]=f[13]+V[13];a[14]=f[14]+V[14];a[15]=f[15]+V[15];return a}function ya(a,f,V){a[0]=f[0]-V[0];a[1]=f[1]-V[1];a[2]=f[2]-V[2];a[3]=f[3]-V[3];a[4]=f[4]-
V[4];a[5]=f[5]-V[5];a[6]=f[6]-V[6];a[7]=f[7]-V[7];a[8]=f[8]-V[8];a[9]=f[9]-V[9];a[10]=f[10]-V[10];a[11]=f[11]-V[11];a[12]=f[12]-V[12];a[13]=f[13]-V[13];a[14]=f[14]-V[14];a[15]=f[15]-V[15];return a}function Ba(a,f,V){a[0]=f[0]*V;a[1]=f[1]*V;a[2]=f[2]*V;a[3]=f[3]*V;a[4]=f[4]*V;a[5]=f[5]*V;a[6]=f[6]*V;a[7]=f[7]*V;a[8]=f[8]*V;a[9]=f[9]*V;a[10]=f[10]*V;a[11]=f[11]*V;a[12]=f[12]*V;a[13]=f[13]*V;a[14]=f[14]*V;a[15]=f[15]*V;return a}function Da(a,f,V,Z){a[0]=f[0]+V[0]*Z;a[1]=f[1]+V[1]*Z;a[2]=f[2]+V[2]*Z;
a[3]=f[3]+V[3]*Z;a[4]=f[4]+V[4]*Z;a[5]=f[5]+V[5]*Z;a[6]=f[6]+V[6]*Z;a[7]=f[7]+V[7]*Z;a[8]=f[8]+V[8]*Z;a[9]=f[9]+V[9]*Z;a[10]=f[10]+V[10]*Z;a[11]=f[11]+V[11]*Z;a[12]=f[12]+V[12]*Z;a[13]=f[13]+V[13]*Z;a[14]=f[14]+V[14]*Z;a[15]=f[15]+V[15]*Z;return a}function Ka(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]&&a[6]===f[6]&&a[7]===f[7]&&a[8]===f[8]&&a[9]===f[9]&&a[10]===f[10]&&a[11]===f[11]&&a[12]===f[12]&&a[13]===f[13]&&a[14]===f[14]&&a[15]===f[15]}function La(a,
f){if(a===f)return!0;const V=a[0],Z=a[1],ja=a[2],v=a[3],H=a[4],S=a[5],T=a[6],ia=a[7],ka=a[8],oa=a[9],ra=a[10],sa=a[11],ba=a[12],ha=a[13],na=a[14];a=a[15];const za=f[0],Ea=f[1],Ha=f[2],Ia=f[3],Ga=f[4],Ma=f[5],ta=f[6],Xa=f[7],bb=f[8],ab=f[9],b=f[10],db=f[11],Ta=f[12],gb=f[13],nb=f[14];f=f[15];const Za=da.getEpsilon();return Math.abs(V-za)<=Za*Math.max(1,Math.abs(V),Math.abs(za))&&Math.abs(Z-Ea)<=Za*Math.max(1,Math.abs(Z),Math.abs(Ea))&&Math.abs(ja-Ha)<=Za*Math.max(1,Math.abs(ja),Math.abs(Ha))&&Math.abs(v-
Ia)<=Za*Math.max(1,Math.abs(v),Math.abs(Ia))&&Math.abs(H-Ga)<=Za*Math.max(1,Math.abs(H),Math.abs(Ga))&&Math.abs(S-Ma)<=Za*Math.max(1,Math.abs(S),Math.abs(Ma))&&Math.abs(T-ta)<=Za*Math.max(1,Math.abs(T),Math.abs(ta))&&Math.abs(ia-Xa)<=Za*Math.max(1,Math.abs(ia),Math.abs(Xa))&&Math.abs(ka-bb)<=Za*Math.max(1,Math.abs(ka),Math.abs(bb))&&Math.abs(oa-ab)<=Za*Math.max(1,Math.abs(oa),Math.abs(ab))&&Math.abs(ra-b)<=Za*Math.max(1,Math.abs(ra),Math.abs(b))&&Math.abs(sa-db)<=Za*Math.max(1,Math.abs(sa),Math.abs(db))&&
Math.abs(ba-Ta)<=Za*Math.max(1,Math.abs(ba),Math.abs(Ta))&&Math.abs(ha-gb)<=Za*Math.max(1,Math.abs(ha),Math.abs(gb))&&Math.abs(na-nb)<=Za*Math.max(1,Math.abs(na),Math.abs(nb))&&Math.abs(a-f)<=Za*Math.max(1,Math.abs(a),Math.abs(f))}function Na(a){const f=da.getEpsilon(),V=a[0],Z=a[1],ja=a[2],v=a[4],H=a[5],S=a[6],T=a[8],ia=a[9];a=a[10];return Math.abs(1-(V*V+v*v+T*T))<=f&&Math.abs(1-(Z*Z+H*H+ia*ia))<=f&&Math.abs(1-(ja*ja+S*S+a*a))<=f}const xa=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,
copy:L,set:k,identity:r,transpose:t,invert:n,adjoint:p,determinant:q,multiply:N,translate:R,scale:M,rotate:m,rotateX:I,rotateY:d,rotateZ:l,fromTranslation:G,fromScaling:z,fromRotation:A,fromXRotation:O,fromYRotation:h,fromZRotation:u,fromRotationTranslation:B,fromQuat2:E,getTranslation:ea,getScaling:D,getRotation:F,fromRotationTranslationScale:P,fromRotationTranslationScaleOrigin:J,fromQuat:y,frustum:K,perspective:x,perspectiveFromFieldOfView:Y,ortho:aa,lookAt:W,targetTo:la,str:ca,frob:qa,add:wa,
subtract:ya,multiplyScalar:Ba,multiplyScalarAndAdd:Da,exactEquals:Ka,equals:La,isOrthoNormal:Na,mul:N,sub:ya},Symbol.toStringTag,{value:"Module"}));g.add=wa;g.adjoint=p;g.copy=L;g.determinant=q;g.equals=La;g.exactEquals=Ka;g.frob=qa;g.fromQuat=y;g.fromQuat2=E;g.fromRotation=A;g.fromRotationTranslation=B;g.fromRotationTranslationScale=P;g.fromRotationTranslationScaleOrigin=J;g.fromScaling=z;g.fromTranslation=G;g.fromXRotation=O;g.fromYRotation=h;g.fromZRotation=u;g.frustum=K;g.getRotation=F;g.getScaling=
D;g.getTranslation=ea;g.identity=r;g.invert=n;g.isOrthoNormal=Na;g.lookAt=W;g.mat4=c;g.mul=N;g.multiply=N;g.multiplyScalar=Ba;g.multiplyScalarAndAdd=Da;g.ortho=aa;g.perspective=x;g.perspectiveFromFieldOfView=Y;g.rotate=m;g.rotateX=I;g.rotateY=d;g.rotateZ=l;g.scale=M;g.set=k;g.str=ca;g.sub=ya;g.subtract=ya;g.targetTo=la;g.translate=R;g.transpose=t})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(g,c,da,L,k){function r(){return!!c._pe}
function t(){return!!k("esri-wasm")}function n(){return m?m:m=(new Promise((d,l)=>g(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>L.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{p(d)})}function p(d){function l(A,O,h){A[O]=h(A[O])}c._pe=d;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(A){function O(){return A.apply(this,arguments)||this}da._inheritsLoose(O,A);O.prototype.destroy=
function(){c._pe.destroy(this)};return O}(c._pe.PeGCSExtent);d=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var G of d)l(G.prototype,"getName",A=>function(){return A.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const A of[c._pe.PeGeogtran,c._pe.PeProjcs])l(A.prototype,"getParameters",O=>function(){const h=Array(c.PeDefs.PE_PARM_MAX);let u=O.call(this);for(let B=0;B<h.length;B++){const E=c._pe.getValue(u,
"*");h[B]=E?c._pe.wrapPointer(E,c._pe.PeParameter):null;u+=Int32Array.BYTES_PER_ELEMENT}return h});l(c._pe.PeHorizon.prototype,"getCoord",A=>function(){const O=this.getSize();if(!O)return null;const h=[],u=A.call(this);M(h,O,u);return h});l(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",A=>{const O=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let h=null;var u=A.call(this);if(!c._pe.compare(u,c._pe.NULL)){h=[u];const B=this.getSteps();if(1<B){u=c._pe.getPointer(u);for(let E=1;E<B;E++)h.push(c._pe.wrapPointer(u+
O*E,c._pe.PeGTlistExtendedGTs))}}return h}});const z=c._pe._pe_getPeHorizonSize();G=A=>function(){let O=this._cache;O||(this._cache=O=new Map);if(O.has(A))return O.get(A);let h=null;var u=A.call(this);if(!c._pe.compare(u,c._pe.NULL)){h=[u];const B=u.getNump();if(1<B){u=c._pe.getPointer(u);for(let E=1;E<B;E++)h.push(c._pe.wrapPointer(u+z*E,c._pe.PeHorizon))}}O.set(A,h);return h};l(c._pe.PeProjcs.prototype,"horizonGcsGenerate",G);l(c._pe.PeProjcs.prototype,"horizonPcsGenerate",G);c._pe.PeObject.prototype.toString=
function(A=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const O=c._pe.getPointer(this),h=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(O,A,h))}}function q(d){if(d){var l=c._pe.getClass(d);l&&(l=c._pe.getCache(l))&&(d=c._pe.getPointer(d))&&delete l[d]}}function N(d,l){const G=[];l=Array(l);for(let z=0;z<d;z++)G.push(c._pe.ensureInt8(l));return G}function R(d){let l;Array.isArray(d[0])?(l=[],d.forEach(G=>{l.push(G[0],G[1])})):l=d;
return l}function M(d,l,G,z=!1){if(z)for(z=0;z<2*l;z++)d[z]=c._pe.getValue(G+z*Float64Array.BYTES_PER_ELEMENT,"double");else{z=0===d.length;for(let A=0;A<l;A++)z&&(d[A]=Array(2)),d[A][0]=c._pe.getValue(G,"double"),d[A][1]=c._pe.getValue(G+Float64Array.BYTES_PER_ELEMENT,"double"),G+=2*Float64Array.BYTES_PER_ELEMENT}}let m;c._pe=null;c.PeCSTransformations=void 0;(function(d){function l(A,O,h){c._pe.ensureCache.prepare();var u=R(h);const B=h===u;u=c._pe.ensureFloat64(u);(A=c._pe._pe_geog_to_proj(c._pe.getPointer(A),
O,u))&&M(h,O,u,B);return A}function G(A,O,h){return z(A,O,h,0)}function z(A,O,h,u){c._pe.ensureCache.prepare();var B=R(h);const E=h===B;B=c._pe.ensureFloat64(B);(A=c._pe._pe_proj_to_geog_center(c._pe.getPointer(A),O,B,u))&&M(h,O,B,E);return A}d.geogToProj=l;d.projGeog=function(A,O,h,u){switch(u){case c.PeDefs.PE_TRANSFORM_P_TO_G:return G(A,O,h);case c.PeDefs.PE_TRANSFORM_G_TO_P:return l(A,O,h)}return 0};d.projToGeog=G;d.projToGeogCenter=z})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=
void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;
d.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;
d.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;
d.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(d){function l(O,h){let u=null,B=G[O];B||(B={},G[O]=B);B.hasOwnProperty(String(h))?u=B[h]:(O=c._pe.PeFactory.prototype.factoryByType(O,h),c._pe.compare(O,c._pe.NULL)||(u=O,B[h]=u));return u=A(u)}const G={},z={},A=O=>{if(O){const h=O.getType();switch(h){case c.PeDefs.PE_TYPE_GEOGCS:O=c._pe.castObject(O,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:O=
c._pe.castObject(O,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:O=c._pe.castObject(O,c._pe.PeGeogtran);break;default:h&c.PeDefs.PE_TYPE_UNIT&&(O=c._pe.castObject(O,c._pe.PeUnit))}}return O};d.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(O){return l(c.PeDefs.PE_TYPE_COORDSYS,O)};d.factoryByType=l;d.fromString=function(O,h){let u=null,B=z[O];B||(B={},z[O]=B);B.hasOwnProperty(h)?u=B[h]:(O=c._pe.PeFactory.prototype.fromString(O,h),c._pe.compare(O,c._pe.NULL)||
(u=O,B[h]=u));return u=A(u)};d.geogcs=function(O){return l(c.PeDefs.PE_TYPE_GEOGCS,O)};d.geogtran=function(O){return l(c.PeDefs.PE_TYPE_GEOGTRAN,O)};d.getCode=function(O){return c._pe.PeFactory.prototype.getCode(O)};d.projcs=function(O){return l(c.PeDefs.PE_TYPE_PROJCS,O)};d.unit=function(O){return l(c.PeDefs.PE_TYPE_UNIT,O)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
l=c._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(G,z,A,O,h,u){let B=null;const E=new c._pe.PeInteger(u);try{const ea=c._pe.PeGTlistExtended.prototype.getGTlist(G,z,A,O,h,E);if(u=E.val)if(B=[ea],1<u){const D=c._pe.getPointer(ea);for(G=1;G<u;G++)B.push(c._pe.wrapPointer(D+l*G,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(E)}return B}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const G of l)q(G),
G.getEntries().forEach(z=>{q(z);z=z.getGeogtran();q(z);z.getParameters().forEach(q);[z.getGeogcs1(),z.getGeogcs2()].forEach(A=>{q(A);const O=A.getDatum();q(O);q(O.getSpheroid());q(A.getPrimem());q(A.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(l,G,z,A,O){c._pe.ensureCache.prepare();var h=R(z);const u=z===h;h=c._pe.ensureFloat64(h);let B=0;A&&(B=c._pe.ensureFloat64(A));
(l=c._pe._pe_geog_to_geog(c._pe.getPointer(l),G,h,B,O))&&M(z,G,h,u);return l}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(d){const l=(z,A,O,h,u,B)=>{c._pe.ensureCache.prepare();switch(z){case "dd":var E=c._pe._pe_geog_to_dd;var ea=c.PeDefs.PE_DD_MAX;break;case "ddm":E=c._pe._pe_geog_to_ddm;ea=c.PeDefs.PE_DDM_MAX;break;case "dms":E=c._pe._pe_geog_to_dms,ea=c.PeDefs.PE_DMS_MAX}z=0;A&&(z=c._pe.getPointer(A));A=R(h);A=c._pe.ensureFloat64(A);ea=N(O,ea);h=c._pe.ensureInt32(ea);
if(u=E(z,O,A,u,h))for(E=0;E<O;E++)B[E]=c._pe.UTF8ToString(ea[E]);return u},G=(z,A,O,h,u)=>{c._pe.ensureCache.prepare();switch(z){case "dd":var B=c._pe._pe_dd_to_geog;break;case "ddm":B=c._pe._pe_ddm_to_geog;break;case "dms":B=c._pe._pe_dms_to_geog}z=0;A&&(z=c._pe.getPointer(A));A=h.map(E=>c._pe.ensureString(E));h=c._pe.ensureInt32(A);A=c._pe.ensureFloat64(Array(2*O));(B=B(z,O,h,A))&&M(u,O,A);return B};d.geogToDms=function(z,A,O,h,u){return l("dms",z,A,O,h,u)};d.dmsToGeog=function(z,A,O,h){return G("dms",
z,A,O,h)};d.geogToDdm=function(z,A,O,h,u){return l("ddm",z,A,O,h,u)};d.ddmToGeog=function(z,A,O,h){return G("ddm",z,A,O,h)};d.geogToDd=function(z,A,O,h,u){return l("dd",z,A,O,h,u)};d.ddToGeog=function(z,A,O,h){return G("dd",z,A,O,h)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
d.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,G,z,A,O,h,u){c._pe.ensureCache.prepare();let B=0;l&&(B=c._pe.getPointer(l));l=R(z);z=c._pe.ensureFloat64(l);l=N(G,c.PeDefs.PE_MGRS_MAX);const E=c._pe.ensureInt32(l);if(A=c._pe._pe_geog_to_mgrs_extended(B,G,z,A,O,h,E))for(O=0;O<G;O++)u[O]=c._pe.UTF8ToString(l[O]);return A};d.mgrsToGeogExtended=function(l,G,z,A,O){c._pe.ensureCache.prepare();
let h=0;l&&(h=c._pe.getPointer(l));l=z.map(u=>c._pe.ensureString(u));z=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*G));(A=c._pe._pe_mgrs_to_geog_extended(h,G,z,A,l))&&M(O,G,l);return A}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,G,z,A,O,h,u){c._pe.ensureCache.prepare();let B=0;l&&(B=c._pe.getPointer(l));l=R(z);z=c._pe.ensureFloat64(l);l=N(G,c.PeDefs.PE_MGRS_MAX);const E=c._pe.ensureInt32(l);if(A=c._pe._pe_geog_to_usng(B,G,z,A,O,h,
E))for(O=0;O<G;O++)u[O]=c._pe.UTF8ToString(l[O]);return A};d.usngToGeog=function(l,G,z,A){c._pe.ensureCache.prepare();var O=0;l&&(O=c._pe.getPointer(l));l=z.map(h=>c._pe.ensureString(h));z=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*G));(O=c._pe._pe_usng_to_geog(O,G,z,l))&&M(A,G,l);return O}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
d.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,G,z,A,O){c._pe.ensureCache.prepare();var h=0;l&&(h=c._pe.getPointer(l));l=R(z);z=c._pe.ensureFloat64(l);l=N(G,c.PeDefs.PE_UTM_MAX);const u=c._pe.ensureInt32(l);if(A=c._pe._pe_geog_to_utm(h,G,z,A,u))for(h=0;h<G;h++)O[h]=c._pe.UTF8ToString(l[h]);return A};d.utmToGeog=function(l,G,z,A,O){c._pe.ensureCache.prepare();let h=0;l&&(h=c._pe.getPointer(l));l=z.map(u=>c._pe.ensureString(u));z=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*
G));(A=c._pe._pe_utm_to_geog(h,G,z,A,l))&&M(O,G,l);return A}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(G,z=d.PE_PCSINFO_OPTION_DOMAIN){let A=
null,O=null;l.has(G)&&(O=l.get(G),O[z]&&(A=O[z]));A||(A=c._pe.PePCSInfo.prototype.generate(G,z),O||(O=[],l.set(G,O)),O[z]=A);return A}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(d){d.versionString=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));const I=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return c._pe},isLoaded:r,isSupported:t,load:n,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},
get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:p},
Symbol.toStringTag,{value:"Module"}));c._init=p;c.isLoaded=r;c.isSupported=t;c.load=n;c.pe=I})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(g,c){const da=Math.PI/180;var L=c.earth.radius;const k=c.earth.eccentricitySquared;L={a1:L*k,a2:L*k*L*k,a3:L*k*k/2,a4:L*k*L*k*2.5,a5:L*k+L*k*k/2,a6:1-k};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,
f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,
f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};g.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;g.earthEllipsoidConstants=L;g.spheroids=c;g.toRadians=da;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(g){return function(){function c(L){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(L&&L.steps)for(const k of L.steps)k instanceof g?this.steps.push(k):this.steps.push(new g({wkid:k.wkid,wkt:k.wkt,isInverse:k.isInverse}))}c.cacheKey=function(L,k){return[void 0!==L.wkid&&null!==L.wkid?L.wkid.toString():"-1",void 0!==L.wkt&&null!==L.wkt?L.wkt.toString():"",void 0!==k.wkid&&null!==k.wkid?k.wkid.toString():"-1",void 0!==k.wkt&&null!==k.wkt?k.wkt.toString():""].join()};c.fromGE=function(L){const k=new c;let r="";for(const t of L.steps)L=
g.fromGE(t),k.steps.push(L),r+=L.uid.toString()+",";k._cachedProjection={};k._gtlistentry=null;k._chain=r;return k};var da=c.prototype;da.getInverse=function(){const L=new c;L.steps=[];for(let k=this.steps.length-1;0<=k;k--)L.steps.push(this.steps[k].getInverse());return L};da.getGTListEntry=function(){let L="";for(const k of this.steps)L+=k.uid.toString()+",";L!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=L);return this._gtlistentry};da.assignCachedGe=function(L,k,
r){this._cachedProjection[c.cacheKey(L,k)]=r};da.getCachedGeTransformation=function(L,k){let r="";for(const t of this.steps)r+=t.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=r);L=this._cachedProjection[c.cacheKey(L,k)];return void 0===L?null:L};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){let c=0;return function(){function da(L){this.uid=c++;L?(this._wkt=
null!=L.wkt?L.wkt:null,this._wkid=null!=L.wkid?L.wkid:-1,this._isInverse=null!=L.isInverse?!0===L.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}da.fromGE=function(L){const k=new da;k._wkt=L.wkt;k._wkid=L.wkid;k._isInverse=L.isInverse;return k};da.prototype.getInverse=function(){const L=new da;L._wkt=this.wkt;L._wkid=this._wkid;L._isInverse=!this.isInverse;return L};g._createClass(da,[{key:"wkt",get:function(){return this._wkt},set:function(L){this._wkt=L;this.uid=c++}},{key:"wkid",
get:function(){return this._wkid},set:function(L){this._wkid=L;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(L){this._isInverse=L;this.uid=c++}}]);return da}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(g,c,da,L){g.getGeometryZScaler=function(k,r,t){if(c.isNone(r)||c.isNone(t)||t.vcsWkid||L.equals(r,t))return null;r=da.getMetersPerVerticalUnitForSR(r);t=da.getMetersPerVerticalUnitForSR(t);
const n=r/t;if(1===n)return null;switch(k){case "point":case "esriGeometryPoint":return p=>{p&&null!=p.z&&(p.z*=n)};case "polyline":case "esriGeometryPolyline":return p=>{if(p)for(const q of p.paths)for(const N of q)2<N.length&&(N[2]*=n)};case "polygon":case "esriGeometryPolygon":return p=>{if(p)for(const q of p.rings)for(const N of q)2<N.length&&(N[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return p=>{if(p)for(const q of p.points)2<q.length&&(q[2]*=n)};case "extent":case "esriGeometryExtent":return p=>
{p&&null!=p.zmin&&null!=p.zmax&&(p.zmin*=n,p.zmax*=n)};default:return null}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(g){let c=function(t,n,p){this.x=t;this.y=n;this.spatialReference=p;this.m=this.z=void 0},da=function(t,n,p,q){this.rings=t;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},L=function(t,n,p,q){this.paths=t;this.spatialReference=
n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},k=function(t,n,p,q){this.points=t;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},r=function(t,n,p,q,N){this.xmin=t;this.ymin=n;this.xmax=p;this.ymax=q;this.spatialReference=N;this.mmax=this.mmin=this.zmax=this.zmin=void 0};g.jsonAdapter={convertToGEGeometry:function(t,n){return null==n?null:t.convertJSONToGeometry(n)},exportPoint:function(t,n,p){p=new c(t.getPointX(n),t.getPointY(n),p);const q=t.hasZ(n),
N=t.hasM(n);q&&(p.z=t.getPointZ(n));N&&(p.m=t.getPointM(n));return p},exportPolygon:function(t,n,p){return new da(t.exportPaths(n),p,t.hasZ(n),t.hasM(n))},exportPolyline:function(t,n,p){return new L(t.exportPaths(n),p,t.hasZ(n),t.hasM(n))},exportMultipoint:function(t,n,p){return new k(t.exportPoints(n),p,t.hasZ(n),t.hasM(n))},exportExtent:function(t,n,p){var q=t.hasZ(n);const N=t.hasM(n);p=new r(t.getXMin(n),t.getYMin(n),t.getXMax(n),t.getYMax(n),p);q&&(q=t.getZExtent(n),p.zmin=q.vmin,p.zmax=q.vmax);
N&&(t=t.getMExtent(n),p.mmin=t.vmin,p.mmax=t.vmax);return p}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(g,c,da,L,k,r,t,n,p,q,N,R,M,m,I,d,l,G,z,A,O,h,u,B,E){function ea(x){return x.every(Y=>"exceedslimit"!==Y.statisticType)}const D=new t.MemCacheStorage(2E6);let F=0,P=function(){function x(aa){this.capabilities={query:G.queryCapabilities};this.geometryType=aa.geometryType;this.hasM=aa.hasM;this.hasZ=aa.hasZ;this.objectIdField=aa.objectIdField;this.spatialReference=aa.spatialReference;this.definitionExpression=aa.definitionExpression;this.featureStore=aa.featureStore;this.aggregateAdapter=aa.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=aa.timeInfo;aa.cacheSpatialQueries&&(this._geometryQueryCache=new t.MemCache(F++ +"$$",D));this.fieldsIndex=new u(aa.fields);aa.scheduler&&aa.priority&&(this._frameTask=aa.scheduler.registerTask(aa.priority))}var Y=x.prototype;Y.destroy=function(){this._frameTask=r.removeMaybe(this._frameTask);this.clearCache();r.destroyMaybe(this._geometryQueryCache);this._changeHandle=r.removeMaybe(this._changeHandle);
r.destroyMaybe(this.fieldsIndex)};Y.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtent=this._allItems=null};Y.executeQuery=function(){var aa=c._asyncToGenerator(function*(W,la){try{return(yield this._executeQuery(W,{},la)).createQueryResponse()}catch(ca){if(ca!==h.QUERY_ENGINE_EMPTY_RESULT)throw ca;return(new z.QueryEngineResult([],W,this)).createQueryResponse()}});return function(W,la){return aa.apply(this,arguments)}}();Y.executeQueryForCount=function(){var aa=c._asyncToGenerator(function*(W=
{},la){try{return(yield this._executeQuery(W,{returnGeometry:!1,returnCentroid:!1,outSR:null},la)).createQueryResponseForCount()}catch(ca){if(ca!==h.QUERY_ENGINE_EMPTY_RESULT)throw ca;return 0}});return function(){return aa.apply(this,arguments)}}();Y.executeQueryForExtent=function(){var aa=c._asyncToGenerator(function*(W,la){const ca=W.outSR;try{const qa=yield this._executeQuery(W,{returnGeometry:!0,returnCentroid:!1,outSR:null},la),wa=qa.size;if(!wa)return{count:0,extent:null};p.set(y,p.NEGATIVE_INFINITY);
this.featureStore.forEachBounds(qa.items,Da=>p.expandWithAABB(y,Da),J);const ya={xmin:y[0],ymin:y[1],xmax:y[3],ymax:y[4],spatialReference:h.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(y[2])&&isFinite(y[5])&&(ya.zmin=y[2],ya.zmax=y[5]);const Ba=l.project(ya,qa.spatialReference,ca);Ba.spatialReference=h.cleanFromGeometryEngine(ca||this.spatialReference);if(0===Ba.xmax-Ba.xmin){const Da=n.getMetersPerUnitForSR(Ba.spatialReference);Ba.xmin-=Da;Ba.xmax+=Da}if(0===Ba.ymax-Ba.ymin){const Da=
n.getMetersPerUnitForSR(Ba.spatialReference);Ba.ymin-=Da;Ba.ymax+=Da}if(this.hasZ&&null!=Ba.zmin&&null!=Ba.zmax&&0===Ba.zmax-Ba.zmin){const Da=n.getMetersPerUnitForSR(Ba.spatialReference);Ba.zmin-=Da;Ba.zmax+=Da}return{count:wa,extent:Ba}}catch(qa){if(qa===h.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(W,la){return aa.apply(this,arguments)}}();Y.executeQueryForIds=function(){var aa=c._asyncToGenerator(function*(W,la){return this.executeQueryForIdSet(W,la).then(ca=>
Array.from(ca))});return function(W,la){return aa.apply(this,arguments)}}();Y.executeQueryForIdSet=function(){var aa=c._asyncToGenerator(function*(W,la){try{const ca=yield this._executeQuery(W,{returnGeometry:!0,returnCentroid:!1,outSR:null},la),qa=ca.items,wa=new Set;yield this._reschedule(()=>{for(const ya of qa)wa.add(ca.featureAdapter.getObjectId(ya))},la);return wa}catch(ca){if(ca===h.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ca;}});return function(W,la){return aa.apply(this,arguments)}}();
Y.executeQueryForSnapping=function(){var aa=c._asyncToGenerator(function*(W,la){const {point:ca,distance:qa,types:wa}=W;if(wa===z.SnappingTypes.NONE)return{candidates:[]};const ya=yield this._reschedule(()=>this._checkQuerySupport(W.query),la),Ba=!m.equals(ca.spatialReference,this.spatialReference);Ba&&(yield l.checkProjectionSupport(ca.spatialReference,this.spatialReference));var Da="number"===typeof qa?qa:qa.x,Ka="number"===typeof qa?qa:qa.y;Da={xmin:ca.x-Da,xmax:ca.x+Da,ymin:ca.y-Ka,ymax:ca.y+
Ka,spatialReference:ca.spatialReference};Da=Ba?l.project(Da,this.spatialReference):Da;if(!Da)return{candidates:[]};Ka=(yield M.normalizeCentralMeridian(R.fromJSON(ca),null,{signal:la}))[0];const La=(yield M.normalizeCentralMeridian(R.fromJSON(Da),null,{signal:la}))[0];if(r.isNone(Ka)||r.isNone(La))return{candidates:[]};const Na=new z.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(La.toJSON())),ya,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),la);yield this._reschedule(()=>
this._executeTimeQuery(Na),la);yield this._reschedule(()=>this._executeAttributesQuery(Na),la);la=Ka.toJSON();la=Ba?l.project(la,this.spatialReference):la;return Na.createSnappingResponse({...W,point:la,distance:Ba?Math.max(Da.xmax-Da.xmin,Da.ymax-Da.ymin)/2:qa},ca.spatialReference)});return function(W,la){return aa.apply(this,arguments)}}();Y.executeQueryForLatestObservations=function(){var aa=c._asyncToGenerator(function*(W,la){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new L("feature-store:unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:W,timeInfo:this.timeInfo});try{const ca=yield this._executeQuery(W,{},la);yield this._reschedule(()=>this._filterLatest(ca),la);return ca.createQueryResponse()}catch(ca){if(ca!==h.QUERY_ENGINE_EMPTY_RESULT)throw ca;return(new z.QueryEngineResult([],W,this)).createQueryResponse()}});return function(W,la){return aa.apply(this,arguments)}}();Y.executeQueryForSummaryStatistics=function(){var aa=c._asyncToGenerator(function*(W={},la,ca){const {field:qa,
normalizationField:wa,valueExpression:ya}=la;return(yield this._getQueryEngineResultForStats(W,{field:qa,normalizationField:wa,valueExpression:ya},ca)).createSummaryStatisticsResponse(la)});return function(){return aa.apply(this,arguments)}}();Y.executeQueryForUniqueValues=function(){var aa=c._asyncToGenerator(function*(W={},la,ca){const {field:qa,field2:wa,field3:ya,valueExpression:Ba}=la;return(yield this._getQueryEngineResultForStats(W,{field:qa,field2:wa,field3:ya,valueExpression:Ba},ca)).createUniqueValuesResponse(la)});
return function(){return aa.apply(this,arguments)}}();Y.executeQueryForClassBreaks=function(){var aa=c._asyncToGenerator(function*(W={},la,ca){const {field:qa,normalizationField:wa,valueExpression:ya}=la;return(yield this._getQueryEngineResultForStats(W,{field:qa,normalizationField:wa,valueExpression:ya},ca)).createClassBreaksResponse(la)});return function(){return aa.apply(this,arguments)}}();Y.executeQueryForHistogram=function(){var aa=c._asyncToGenerator(function*(W={},la,ca){const {field:qa,normalizationField:wa,
valueExpression:ya}=la;return(yield this._getQueryEngineResultForStats(W,{field:qa,normalizationField:wa,valueExpression:ya},ca)).createHistogramResponse(la)});return function(){return aa.apply(this,arguments)}}();Y._schedule=function(){var aa=c._asyncToGenerator(function*(W,la){return r.isSome(this._frameTask)?this._frameTask.schedule(W,la):W(E.noBudget)});return function(W,la){return aa.apply(this,arguments)}}();Y._reschedule=function(){var aa=c._asyncToGenerator(function*(W,la){return r.isSome(this._frameTask)?
this._frameTask.reschedule(W,la):W(E.noBudget)});return function(W,la){return aa.apply(this,arguments)}}();Y._getAll=function(aa){r.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new z.QueryEngineResult(this._allItems,aa,this)};Y._executeQuery=function(){var aa=c._asyncToGenerator(function*(W,la,ca){W=k.clone(W);W=yield this._schedule(()=>h.normalizeQuery(W,this.definitionExpression,this.spatialReference),ca);W=yield this._reschedule(()=>this._checkQuerySupport(W),ca);
W={...W,...la};const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(W,ca),ca),wa=yield this._reschedule(()=>this._executeGeometryQuery(W,qa,ca),ca);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ca);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ca);yield this._reschedule(()=>this._executeTimeQuery(wa),ca);yield this._reschedule(()=>this._executeAttributesQuery(wa),ca);return wa});return function(W,la,ca){return aa.apply(this,arguments)}}();Y._executeSceneFilterQuery=
function(){var aa=c._asyncToGenerator(function*(W,la){var ca=this;if(r.isNone(W.sceneFilter))return null;const {outSR:qa,returnGeometry:wa,returnCentroid:ya}=W;var Ba=this.featureStore.featureSpatialReference,Da=W.sceneFilter.geometry;const Ka=r.isNone(Ba)||m.equals(Ba,Da.spatialReference)?Da:l.project(Da,Ba);if(!Ka)return null;Ba=wa||ya;Ba=m.isValid(qa)&&!m.equals(this.spatialReference,qa)&&Ba?function(){var a=c._asyncToGenerator(function*(f){return ca._project(f,qa)});return function(f){return a.apply(this,
arguments)}}():a=>a;const La=this.featureAdapter;Da=this._searchFeatures(this._getQueryBBoxes(Ka));if("disjoint"===W.sceneFilter.spatialRelationship){if(!Da.length)return null;const a=new Set;for(var Na of Da)a.add(La.getObjectId(Na));const f=yield this._reschedule(()=>this.featureStore.toArray(),la);Na=yield this._reschedule(c._asyncToGenerator(function*(){const V=yield A.getSpatialQueryOperator("esriSpatialRelDisjoint",Ka,ca.geometryType,ca.hasZ,ca.hasM),Z=yield ca._runSpatialFilter(f,ja=>!a.has(La.getObjectId(ja))||
V(La.getGeometry(ja)),la);return new z.QueryEngineResult(Z,W,ca)}),la);return Ba(Na)}if(!Da.length)return new z.QueryEngineResult([],W,this);if(this._canExecuteSinglePass(Ka,W))return Ba(new z.QueryEngineResult(Da,W,this));const xa=yield A.getSpatialQueryOperator("esriSpatialRelContains",Ka,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Da,a=>xa(La.getGeometry(a)),la);return Ba(new z.QueryEngineResult(Na,W,this))});return function(W,la){return aa.apply(this,arguments)}}();
Y._executeGeometryQuery=function(){var aa=c._asyncToGenerator(function*(W,la,ca){var qa=this;if(r.isSome(la)&&0===la.items.length)return la;W=r.isSome(la)?la.query:W;const {geometry:wa,outSR:ya,spatialRel:Ba,returnGeometry:Da,returnCentroid:Ka}=W;var La=this.featureStore.featureSpatialReference;const Na=!wa||r.isNone(La)||m.equals(La,wa.spatialReference)?wa:l.project(wa,La),xa=Da||Ka,a=m.isValid(ya)&&!m.equals(this.spatialReference,ya),f=this._geometryQueryCache&&r.isNone(la)?a&&xa?JSON.stringify({originalFilterGeometry:wa,
spatialRelationship:Ba,outSpatialReference:ya}):JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba}):null;La=f?this._geometryQueryCache.get(f):null;if(r.isSome(La))return new z.QueryEngineResult(La,W,this);La=function(){var H=c._asyncToGenerator(function*(S){a&&xa&&(yield qa._project(S,ya));f&&qa._geometryQueryCache.put(f,S.items,S.items.length+1);return S});return function(S){return H.apply(this,arguments)}}();if(!Na)return La(r.isSome(la)?la:this._getAll(W));const V=this.featureAdapter;
let Z=this._searchFeatures(this._getQueryBBoxes(wa));if("esriSpatialRelDisjoint"===Ba){if(!Z.length)return La(r.isSome(la)?la:this._getAll(W));const H=new Set;for(var ja of Z)H.add(V.getObjectId(ja));const S=r.isSome(la)?la.items:yield this._reschedule(()=>this.featureStore.toArray(),ca);ja=yield this._reschedule(c._asyncToGenerator(function*(){const T=yield A.getSpatialQueryOperator(Ba,Na,qa.geometryType,qa.hasZ,qa.hasM),ia=yield qa._runSpatialFilter(S,ka=>!H.has(V.getObjectId(ka))||T(V.getGeometry(ka)),
ca);return new z.QueryEngineResult(ia,W,qa)}),ca);return La(ja)}if(r.isSome(la)){const H=new da.PositionHint;Z=Z.filter(S=>0<=da.indexOf(la.items,S,la.items.length,H))}if(!Z.length)return La=new z.QueryEngineResult([],W,this),f&&this._geometryQueryCache.put(f,La.items,1),La;if(this._canExecuteSinglePass(Na,W))return La(new z.QueryEngineResult(Z,W,this));const v=yield A.getSpatialQueryOperator(Ba,Na,this.geometryType,this.hasZ,this.hasM);ja=yield this._runSpatialFilter(Z,H=>v(V.getGeometry(H)),ca);
return La(new z.QueryEngineResult(ja,W,this))});return function(W,la,ca){return aa.apply(this,arguments)}}();Y._executeAggregateIdsQuery=function(aa){if(0!==aa.items.length&&aa.query.aggregateIds&&aa.query.aggregateIds.length&&!r.isNone(this.aggregateAdapter)){var W=new Set;for(const ca of aa.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ca).forEach(qa=>W.add(qa));var la=this.featureAdapter.getObjectId;aa.items=aa.items.filter(ca=>W.has(la(ca)))}};Y._executeObjectIdsQuery=function(aa){if(0!==
aa.items.length&&aa.query.objectIds&&aa.query.objectIds.length){var W=new Set(aa.query.objectIds),la=this.featureAdapter.getObjectId;aa.items=aa.items.filter(ca=>W.has(la(ca)))}};Y._executeTimeQuery=function(aa){if(0!==aa.items.length){var W=O.getTimeOperator(this.timeInfo,aa.query.timeExtent,this.featureAdapter);r.isNone(W)||(aa.items=aa.items.filter(W))}};Y._executeAttributesQuery=function(aa){if(0!==aa.items.length){var W=d.getWhereClause(aa.query.where,this.fieldsIndex);if(W){if(!W.isStandardized)throw new TypeError("Where clause is not standardized");
aa.items=aa.items.filter(la=>W.testFeature(la,this.featureAdapter))}}};Y._runSpatialFilter=function(){var aa=c._asyncToGenerator(function*(W,la,ca){var qa=this;if(!la)return W;if(r.isNone(this._frameTask))return W.filter(Da=>la(Da));let wa=0;const ya=[],Ba=function(){var Da=c._asyncToGenerator(function*(Ka){for(;wa<W.length;){const La=W[wa++];la(La)&&(ya.push(La),Ka.madeProgress());Ka.done&&(yield qa._reschedule(Na=>Ba(Na),ca))}});return function(Ka){return Da.apply(this,arguments)}}();return this._reschedule(Da=>
Ba(Da),ca).then(()=>ya)});return function(W,la,ca){return aa.apply(this,arguments)}}();Y._filterLatest=function(aa){const {trackIdField:W,startTimeField:la,endTimeField:ca}=this.timeInfo,qa=ca||la,wa=new Map,ya=this.featureAdapter.getAttribute;for(const Ba of aa.items){const Da=ya(Ba,W),Ka=ya(Ba,qa),La=wa.get(Da);(!La||Ka>ya(La,qa))&&wa.set(Da,Ba)}aa.items=Array.from(wa.values())};Y._canExecuteSinglePass=function(aa,W){({spatialRel:W}=W);return A.canQueryWithRBush(aa)&&("esriSpatialRelEnvelopeIntersects"===
W||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===W||"esriSpatialRelContains"===W||"esriSpatialRelWithin"===W))};Y._project=function(){var aa=c._asyncToGenerator(function*(W,la){if(!la||m.equals(this.spatialReference,la))return W;const ca=this.featureAdapter;la=yield l.projectMany(W.items.map(qa=>h.getGeometry(this.geometryType,this.hasZ,this.hasM,ca.getGeometry(qa))),this.spatialReference,la);W.items=la.map((qa,wa)=>ca.cloneWithGeometry(W.items[wa],I.convertFromGeometry(qa,
this.hasZ,this.hasM)));return W});return function(W,la){return aa.apply(this,arguments)}}();Y._getQueryBBoxes=function(aa){if(A.canQueryWithRBush(aa)){if(R.isExtent(aa))return[q.fromValues(aa.xmin,aa.ymin,aa.xmax,aa.ymax)];if(R.isPolygon(aa))return aa.rings.map(W=>q.fromValues(Math.min(W[0][0],W[2][0]),Math.min(W[0][1],W[2][1]),Math.max(W[0][0],W[2][0]),Math.max(W[0][1],W[2][1])))}return[N.getBoundsXY(q.create(),aa)]};Y._searchFeatures=function(aa){for(const W of aa)this.featureStore.forEachInBounds(W,
la=>K.add(la));aa=Array.from(K.values());K.clear();return aa};Y._checkStatisticsSupport=function(){var aa=c._asyncToGenerator(function*(W,la){if(0>W.distance||null!=W.geometryPrecision||W.multipatchOption||W.pixelSize||W.relationParam||W.text||W.outStatistics||W.groupByFieldsForStatistics||W.having||W.orderByFields)throw new L("feature-store:unsupported-query","Unsupported query options",{query:W});this._checkAttributesQuerySupport(W);return Promise.all([this._checkStatisticsParamsSupport(la),A.checkSpatialQuerySupport(W,
this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,W.outSR)]).then(()=>W)});return function(W,la){return aa.apply(this,arguments)}}();Y._checkStatisticsParamsSupport=function(){var aa=c._asyncToGenerator(function*(W){var la=[];W.valueExpression&&({arcadeUtils:la}=yield B.loadArcade(),la=la.extractFieldNames(W.valueExpression));W.field&&la.push(W.field);W.field2&&la.push(W.field2);W.field3&&la.push(W.field3);W.normalizationField&&la.push(W.normalizationField);if(!la.length)throw new L("feature-store:unsupported-query",
"params should have at least a field or valueExpression",{params:W});d.validateFields(this.fieldsIndex,la,"params contains missing fields")});return function(W){return aa.apply(this,arguments)}}();Y._checkQuerySupport=function(){var aa=c._asyncToGenerator(function*(W){if(0>W.distance||null!=W.geometryPrecision||W.multipatchOption||W.pixelSize||W.relationParam||W.text)throw new L("feature-store:unsupported-query","Unsupported query options",{query:W});this._checkAttributesQuerySupport(W);this._checkStatisticsQuerySupport(W);
return Promise.all([A.checkSpatialQuerySupport(W,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,W.outSR)]).then(()=>W)});return function(W){return aa.apply(this,arguments)}}();Y._checkAttributesQuerySupport=function(aa){const {outFields:W,orderByFields:la,returnDistinctValues:ca,outStatistics:qa}=aa,wa=qa?qa.map(ya=>ya.outStatisticFieldName&&ya.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(la&&0<la.length){const ya=la.map(Ba=>{const Da=Ba.toLowerCase();
return Da.includes(" asc")?Da.split(" asc")[0]:Da.includes(" desc")?Da.split(" desc")[0]:Ba}).filter(Ba=>!wa.includes(Ba));d.validateFields(this.fieldsIndex,ya,"orderByFields contains missing fields")}if(W&&0<W.length)d.validateFields(this.fieldsIndex,W,"outFields contains missing fields");else if(ca)throw new L("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:aa});d.validateWhere(this.fieldsIndex,aa.where)};Y._checkStatisticsQuerySupport=function(aa){const {outStatistics:W,
groupByFieldsForStatistics:la,having:ca}=aa;var qa=la&&la.length,wa=W&&W.length;if(ca){if(!qa||!wa)throw new L("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:aa});d.validateHaving(this.fieldsIndex,ca,W)}if(wa&&ea(W)){wa=W.map(ya=>ya.onStatisticField).filter(Boolean);d.validateFields(this.fieldsIndex,wa,"onStatisticFields contains missing fields");qa&&d.validateFields(this.fieldsIndex,la,"groupByFieldsForStatistics contains missing fields");
for(const ya of W){const {onStatisticField:Ba,statisticType:Da}=ya;if(("percentile_disc"===Da||"percentile_cont"===Da)&&"statisticParameters"in ya){if({statisticParameters:qa}=ya,!qa)throw new L("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ya,query:aa});}else if("count"!==Da&&Ba&&d.hasInvalidFieldType(Ba,this.fieldsIndex))throw new L("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:ya,query:aa});}}};Y._getQueryEngineResultForStats=
function(){var aa=c._asyncToGenerator(function*(W,la,ca){W=k.clone(W);try{W=yield this._schedule(()=>h.normalizeQuery(W,this.definitionExpression,this.spatialReference),ca);W=yield this._reschedule(()=>this._checkStatisticsSupport(W,la),ca);const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(W,ca),ca),wa=yield this._reschedule(()=>this._executeGeometryQuery(W,qa,ca),ca);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ca);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),
ca);yield this._reschedule(()=>this._executeTimeQuery(wa),ca);yield this._reschedule(()=>this._executeAttributesQuery(wa),ca);return wa}catch(qa){if(qa!==h.QUERY_ENGINE_EMPTY_RESULT)throw qa;return new z.QueryEngineResult([],W,this)}});return function(W,la,ca){return aa.apply(this,arguments)}}();c._createClass(x,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const aa=this.featureStore.fullBounds;return r.isNone(aa)?null:{xmin:aa[0],
ymin:aa[1],xmax:aa[2],ymax:aa[3],spatialReference:h.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;this._timeExtent||(this._timeExtent=O.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return x}();const J=p.create(),y=p.create(),K=new Set;g.Feature=function(x,Y=null,aa,W,la){this.attributes=x;this.geometry=aa;this.centroid=W;this.filterFlags=la;this.groupId=-1;this.displayId=Y};g.QueryEngine=P;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(g,c,da,L){g.RemoveMode=void 0;(function(t){t[t.ALL=0]="ALL";t[t.SOME=1]="SOME"})(g.RemoveMode||(g.RemoveMode={}));let k=function(){function t(p,q,N){this._namespace=p;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";N&&(this._storage.registerRemoveFunc(this._namespace,
N),this._removeFunc=!0)}var n=t.prototype;n.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(p,q,N,R=0){this._storage.put(this._namespace+p,q,N,R)};n.get=function(p){p=this._storage.get(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};n.pop=function(p){p=this._storage.pop(this._namespace+p);
void 0===p?++this._miss:++this._hit;return p};n.updateSize=function(p,q,N){this._storage.updateSize(this._namespace+p,q,N)};n.clear=function(){this._storage.clear(this._namespace)};n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};c._createClass(t,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",
get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return t}(),r=function(){function t(p=10485760){this._maxSize=p;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new L;this._users=new L}var n=t.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(p){this._users.push(p)};n.deregister=function(p){this._users.removeUnordered(p)};n.registerRemoveFunc=
function(p,q){this._removeFuncs.push([p,q])};n.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(q=>q[0]!==p)};n.put=function(p,q,N,R){const M=this._db.get(p);M&&(this._size-=M.size,this._db.delete(p),M.entry!==q&&this._notifyRemove(p,M.entry,g.RemoveMode.ALL));N>this._maxSize?this._notifyRemove(p,q,g.RemoveMode.ALL):void 0===q?console.warn("Refusing to cache undefined entry "):!N||0>N?console.warn("Refusing to cache entry with invalid size "+N):(R=1+Math.max(R,-3)- -3,this._db.set(p,
{entry:q,size:N,lifetime:R,lives:R}),this._size+=N,this._checkSizeLimit())};n.updateSize=function(p,q,N){const R=this._db.get(p);if(R&&R.entry===q){for(this._size-=R.size;N>this._maxSize;)if(N=this._notifyRemove(p,q,g.RemoveMode.SOME),!(da.isSome(N)&&0<N)){this._db.delete(p);return}R.size=N;this._size+=N;this._checkSizeLimit()}};n.pop=function(p){const q=this._db.get(p);if(q)return this._size-=q.size,this._db.delete(p),++this._hit,q.entry;++this._miss};n.get=function(p){const q=this._db.get(p);if(void 0===
q)++this._miss;else return this._db.delete(p),q.lives=q.lifetime,this._db.set(p,q),++this._hit,q.entry};n.getStats=function(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},N=[];this._db.forEach((m,I)=>{const d=m.lifetime;N[d]=(N[d]||0)+m.size;this._users.forAll(l=>{l=l.namespace;I.startsWith(l)&&(q[l]=(q[l]||0)+m.size)})});const R={};this._users.forAll(m=>{const I=m.namespace;
!isNaN(m.hitRate)&&0<m.hitRate?(q[I]=q[I]||0,R[I]=Math.round(100*m.hitRate)+"%"):R[I]="0%"});var M=Object.keys(q);M.sort((m,I)=>q[I]-q[m]);M.forEach(m=>p[m]=Math.round(q[m]/2**20)+"MB / "+R[m]);for(M=N.length-1;0<=M;--M){const m=N[M];m&&(p["Priority "+(M+-3-1)]=Math.round(m/this.size*100)+"%")}return p};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};n.clear=function(p){this._db.forEach((q,N)=>{N.startsWith(p)&&(this._size-=q.size,this._db.delete(N),this._notifyRemove(N,
q.entry,g.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((p,q)=>this._notifyRemove(q,p.entry,g.RemoveMode.ALL));this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/(this._hit+this._miss)};n._notifyRemove=function(p,q,N){let R;this._removeFuncs.some(M=>p.startsWith(M[0])?(M=M[1](q,N),"number"===typeof M&&(R=M),!0):!1);return R};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [p,q]of this._db){this._db.delete(p);if(1>=q.lives){this._size-=q.size;
const N=this._notifyRemove(p,q.entry,g.RemoveMode.SOME);da.isSome(N)&&0<N&&(this._size+=N,q.lives=q.lifetime,q.size=N,this._db.set(p,q))}else--q.lives,this._db.set(p,q);if(this._size<=.9*this.maxSize)break}};c._createClass(t,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimit()}}]);return t}();g.MIN_PRIORITY=-3;g.MemCache=k;g.MemCacheStorage=r;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(g,c,da,L,k,r,t,n,p,q,N,R,M){function m(h){const u=[];let B=0,E=0;for(let ea=0;ea<h.length;ea++){const D=h[ea];let F=
null;for(let P=0;P<D.length;P++)F=D[P],u.push(F),0===P?E=B=F[0]:(B=Math.min(B,F[0]),E=Math.max(E,F[0]));F&&u.push([(B+E)/2,0])}return u}function I(h,u){if(!(h instanceof n||h instanceof t))throw O.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new L("straightLineDensify: the input geometry is neither polyline nor polygon");var B=p.getGeometryParts(h);const E=[];for(const D of B){B=[];E.push(B);B.push([D[0][0],D[0][1]]);for(let F=0;F<D.length-1;F++){const P=D[F][0],
J=D[F][1],y=D[F+1][0],K=D[F+1][1];var ea=Math.sqrt((y-P)*(y-P)+(K-J)*(K-J));const x=(K-J)/ea,Y=(y-P)/ea,aa=ea/u;if(1<aa){for(let W=1;W<=aa-1;W++){const la=W*u;B.push([Y*la+P,x*la+J])}ea=(ea+Math.floor(aa-1)*u)/2;B.push([Y*ea+P,x*ea+J])}B.push([y,K])}}return"polygon"===h.type?new t({rings:E,spatialReference:h.spatialReference}):new n({paths:E,spatialReference:h.spatialReference})}function d(h,u,B){u&&(h=I(h,1E6),h=N.webMercatorToGeographic(h,!0));B&&(h=p.updatePolyGeometry(h,B));return h}function l(h,
u,B){if(Array.isArray(h)){var E=h[0];E>u?(B=p.offsetMagnitude(E,u),h[0]=E+-2*B*u):E<B&&(u=p.offsetMagnitude(E,B),h[0]=E+-2*u*B)}else E=h.x,E>u?(B=p.offsetMagnitude(E,u),h=h.clone().offset(-2*B*u,0)):E<B&&(u=p.offsetMagnitude(E,B),h=h.clone().offset(-2*u*B,0));return h}function G(h,u){let B=-1;for(let E=0;E<u.cutIndexes.length;E++){const ea=u.cutIndexes[E],D=u.geometries[E],F=p.getGeometryParts(D);for(let P=0;P<F.length;P++){const J=F[P];J.some(y=>{if(180>y[0])return!0;y=0;for(var K=0;K<J.length;K++){var x=
J[K][0];y=x>y?x:y}y=Number(y.toFixed(9));y=-360*p.offsetMagnitude(y,180);for(K=0;K<J.length;K++)x=D.getPoint(P,K),D.setPoint(P,K,x.clone().offset(y,0));return!0})}if(ea===B)if("polygon"===h[0].type)for(const P of p.getGeometryParts(D))h[ea]=h[ea].addRing(P);else{if("polyline"===h[0].type)for(const P of p.getGeometryParts(D))h[ea]=h[ea].addPath(P)}else B=ea,h[ea]=D}return h}function z(h,u,B){return A.apply(this,arguments)}function A(){A=c._asyncToGenerator(function*(h,u,B){if(!Array.isArray(h))return z([h],
u);u&&"string"!==typeof u&&O.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var E="string"===typeof u?u:u?.url??da.geometryServiceUrl;let ea,D,F;let P=0;var J=[];u=[];for(var y of h)if(r.isNone(y))u.push(y);else{if(!K){var K=y.spatialReference;var x=q.getInfo(K);var Y=(ea=K.isWebMercator)?102100:4326;D=p.cutParams[Y].maxX;F=p.cutParams[Y].minX;var aa=p.cutParams[Y].plus180Line;Y=p.cutParams[Y].minus180Line}if(x)if("mesh"===y.type)u.push(y);else if("point"===
y.type)u.push(l(y.clone(),D,F));else if("multipoint"===y.type){var W=y.clone();W.points=W.points.map(la=>l(la,D,F));u.push(W)}else if("extent"===y.type)W=y.clone()._normalize(!1,!1,x),u.push(W.rings?new t(W):W);else if(y.extent){W=y.extent;const la=2*p.offsetMagnitude(W.xmin,F)*D;let ca=0===la?y.clone():p.updatePolyGeometry(y.clone(),la);W.offset(la,0);W.intersects(aa)&&W.xmax!==D?(P=W.xmax>P?W.xmax:P,ca=d(ca,ea),J.push(ca),u.push("cut")):W.intersects(Y)&&W.xmin!==F?(P=2*W.xmax*D>P?2*W.xmax*D:P,ca=
d(ca,ea,360),J.push(ca),u.push("cut")):u.push(ca)}else u.push(y.clone());else u.push(y)}K=p.offsetMagnitude(P,D);x=-90;aa=K;for(y=new n;0<K;)Y=-180+360*K,y.addPath([[Y,x],[Y,-1*x]]),x*=-1,K--;if(0<J.length&&0<aa){K=yield R.cut(E,J,y,B);K=G(J,K);x=[];J=[];for(aa=0;aa<u.length;aa++)y=u[aa],"cut"!==y?J.push(y):(y=K.shift(),Y=h[aa],r.isSome(Y)&&"polygon"===Y.type&&Y.rings&&1<Y.rings.length&&y.rings.length>=Y.rings.length?(x.push(y),J.push("simplify")):J.push(ea?N.geographicToWebMercator(y):y));if(!x.length)return J;
u=yield M.simplify(E,x,B);h=[];for(B=0;B<J.length;B++)E=J[B],"simplify"!==E?h.push(E):h.push(ea?N.geographicToWebMercator(u.shift()):u.shift());return h}h=[];for(B=0;B<u.length;B++)E=u[B],"cut"!==E?h.push(E):(E=J.shift(),h.push(!0===ea?N.geographicToWebMercator(E):E));return h});return A.apply(this,arguments)}const O=k.getLogger("esri.geometry.support.normalizeUtils");g.getDenormalizedExtent=function(h){if(!h)return null;const u=h.extent;if(!u)return null;var B=h.spatialReference&&q.getInfo(h.spatialReference);
if(!B)return u;const [E,ea]=B.valid;({width:B}=u);let {xmin:D,xmax:F}=u;[D,F]=[F,D];if("extent"===h.type||0===B||B<=ea||B>2*ea||D<E||F>ea)return u;let P;switch(h.type){case "polygon":if(1<h.rings.length)P=m(h.rings);else return u;break;case "polyline":if(1<h.paths.length)P=m(h.paths);else return u;break;case "multipoint":P=h.points}h=u.clone();for(let J=0;J<P.length;J++){let y=P[J][0];0>y?(y+=ea,F=Math.max(y,F)):(y-=ea,D=Math.min(y,D))}h.xmin=D;h.xmax=F;return h.width<B?(h.xmin-=ea,h.xmax-=ea,h):
u};g.normalizeCentralMeridian=z;g.normalizeMapX=function(h,u){if(u=q.getInfo(u)){const [B,E]=u.valid;u=E-B;if(h<B)for(;h<B;)h+=u;if(h>E)for(;h>E;)h-=u}return h};g.straightLineDensify=I;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(g,c,da,L){function k(r){return L.isPolygon(r)?r.rings:r.paths}c={102100:{maxX:2.0037508342788905E7,
minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:da.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:da.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:da.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:da.WGS84})}};
g.cutParams=c;g.getGeometryParts=k;g.offsetMagnitude=function(r,t){return Math.ceil((r-t)/(2*t))};g.updatePolyGeometry=function(r,t){const n=k(r);for(const p of n)for(const q of p)q[0]+=t;return r};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),function(g,c,da,L,k,r){function t(){t=
c._asyncToGenerator(function*(n,p,q,N){n=r.parseUrl(n);const R=p[0].spatialReference;p={...N,query:{...n.query,f:"json",sr:JSON.stringify(R),target:JSON.stringify({geometryType:k.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(q)}};p=yield L(n.path+"/cut",p);const {cutIndexes:M,geometries:m=[]}=p.data;return{cutIndexes:M,geometries:m.map(I=>{I=k.fromJSON(I);I.spatialReference=R;return I})}});return t.apply(this,arguments)}g.cut=function(n,p,q,N){return t.apply(this,arguments)};Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(g,c,da,L,k,r){function t(n,p,q){const N={};for(const M in n)if("declaredClass"!==M){var R=n[M];if(null!=R&&"function"!==typeof R)if(Array.isArray(R)){N[M]=[];for(let m=0;m<R.length;m++)N[M][m]=t(R[m])}else"object"===typeof R?R.toJSON?(R=R.toJSON(q&&q[M]),N[M]=p?R:JSON.stringify(R)):N[M]=p?R:JSON.stringify(R):
N[M]=R}return N}g.asValidOptions=function(n,p){return p?{...p,query:{...n,...p.query}}:{query:n}};g.encode=t;g.getToken=function(n,p){return r.supportsApiKey(n)&&(p||c.apiKey)?p||c.apiKey:da.id?.findCredential(n)?.token};g.parseUrl=function(n){return"string"===typeof n?k.urlToObject(n):L.clone(n)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(g,c,da,L,k,r){function t(){t=c._asyncToGenerator(function*(n,p,q){const N="string"===typeof n?L.urlToObject(n):n;n=p[0].spatialReference;const R=k.getJsonType(p[0]);p={...q,query:{...N.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(r.encodeGeometries(p))}};({data:p}=yield da(N.path+"/simplify",p));return r.decodeGeometries(p.geometries,R,n)});return t.apply(this,arguments)}g.simplify=function(n,p,q){return t.apply(this,arguments)};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(g,c){g.decodeGeometries=function(da,L,k){const r=c.getGeometryType(L);return da.map(t=>{t=r.fromJSON(t);t.spatialReference=k;return t})};g.encodeGeometries=function(da){return{geometryType:c.getJsonType(da[0]),geometries:da.map(L=>L.toJSON())}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(g,c,da){function L(p,q){return p?t.get(p,q):null}function k(p,q,N,R=!0){const M=[];for(const m of q)if("*"!==m&&!p.has(m))if(R){q=r(m);try{const I=L(q,p);if(!I)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!I.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:I});k(p,I.fieldNames,"expression contains missing fields")}catch(I){if((q=I&&I.details)&&
(q.clause||q.where))throw I;q&&q.missingFields?M.push(...q.missingFields):M.push(m)}}else M.push(m);if(M.length)throw new c("feature-store:unsupported-query",N,{missingFields:M});}function r(p){return p.split(" as ")[0]}const t=new da.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));g.getAliasFromFieldName=function(p){return p.split(" as ")[1]};g.getExpressionFromFieldName=
r;g.getWhereClause=L;g.hasInvalidFieldType=function(p,q){return(p=q.get(p))?!n.has(p.type):!1};g.validateFields=k;g.validateHaving=function(p,q,N){if(!q)return!0;const R=t.get(q,p);if(!R)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:q});if(!R.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:q});k(p,R.fieldNames,"having contains missing fields");if(!R.getExpressions().every(M=>{const {aggregateType:m,
field:I}=M,d=p.has(I)&&p.get(I).name;return N.some(l=>{const {onStatisticField:G,statisticType:z}=l;return(p.has(G)&&p.get(G).name)===d&&z.toLowerCase().trim()===m})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:q});return!0};g.validateWhere=function(p,q){if(!q)return!0;const N=t.get(q,p);if(!N)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!N.isStandardized)throw new c("feature-store:unsupported-query",
"where clause is not standard",{where:q});k(p,N.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(g,c,da){let L=function(){function k(r,t){this._cache=new c(r);this._invalidCache=new c(t)}k.prototype.get=function(r,t){const n=`${t.uid}:${r}`,p=this._cache.get(n);if(p)return p;if(void 0!==this._invalidCache.get(n))return null;
try{const q=da.WhereClause.create(r,t);this._cache.put(n,q);return q}catch{return this._invalidCache.put(n,null),null}};return k}();g.WhereClauseCache=L;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function c(L,k){this._storage=new g.MemCacheStorage;this._storage.maxSize=L;k&&this._storage.registerRemoveFunc("",k)}var da=c.prototype;da.put=function(L,k){this._storage.put(L,
k,1,1)};da.pop=function(L){return this._storage.pop(L)};da.get=function(L){return this._storage.get(L)};da.clear=function(){this._storage.clearAll()};da.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(g,c,da,L,k,r){function t(y,K){y+="";return y.length>=K?y:Array(K-y.length+1).join("0")+y}function n(y,K,x="0",
Y="0",aa="0",W="0",la="",ca="0",qa="0"){return"+"===la||"-"===la?(y=`${t(parseInt(y,10),4)}-${t(parseInt(K,10),2)}-${t(parseInt(x,10),2)}`,K="",10>parseFloat(W)&&(K="0"),Y=`${t(parseInt(Y,10),2)}:${t(parseInt(aa,10),2)}:${K+parseFloat(W).toString()}`,la=`${la}${t(parseInt(ca,10),2)}:${t(parseInt(qa,10),2)}`,new Date(y+"T"+Y+la)):new Date(parseInt(y,10),parseInt(K,10)-1,parseInt(x,10),parseInt(Y,10),parseInt(aa,10),parseFloat(W))}function p(y){let K=h.exec(y);if(null!==K){const [,x,Y,aa,W,la,ca]=K;
return n(x,Y,aa,W,la,ca)}K=u.exec(y);if(null!==K){const [,x,Y,aa,W,la,ca,qa,wa,ya]=K;return n(x,Y,aa,W,la,ca,qa,wa,ya)}K=B.exec(y);if(null!==K){const [,x,Y,aa,W,la,ca,qa,wa]=K;return n(x,Y,aa,W,la,"0",ca,qa,wa)}K=E.exec(y);if(null!==K){const [,x,Y,aa,W,la]=K;return n(x,Y,aa,W,la)}K=O.exec(y);if(null!==K){const [,x,Y,aa]=K;return n(x,Y,aa)}throw Error("SQL Invalid Timestamp");}function q(y){const K=O.exec(y);if(null===K)try{return p(y)}catch{throw Error("SQL Invalid Date");}const [,x,Y,aa]=K;return new Date(parseInt(x,
10),parseInt(Y,10)-1,parseInt(aa,10))}function N(y){return Array.isArray(y)?y:[y]}function R(y){return null!==y?!0!==y:null}function M(y,K){return null!=y&&null!=K?!0===y&&!0===K:!1===y||!1===K?!1:null}function m(y,K){return null!=y&&null!=K?!0===y||!0===K:!0===y||!0===K?!0:null}function I(y,K){if(null==y)return null;let x=!1;for(const Y of K)if(null==Y)x=null;else if(y===Y){x=!0;break}return x}function d(y,K,x){if(null==y)return null;let Y="",aa=P.Normal;for(let W=0;W<K.length;W++){const la=K.charAt(W);
switch(aa){case P.Normal:la===x?aa=P.Escaped:Y="-[]/{}()*+?.\\^$|".includes(la)?Y+("\\"+la):"%"===la?Y+".*":"_"===la?Y+".":Y+la;break;case P.Escaped:Y="-[]/{}()*+?.\\^$|".includes(la)?Y+("\\"+la):Y+la,aa=P.Normal}}return(new RegExp("^"+Y+"$","m")).test(y)}function l(y){return y instanceof Date?y.valueOf():y}function G(y,K,x){if(null==K||null==x)return null;K=l(K);x=l(x);switch(y){case "\x3c\x3e":return K!==x;case "\x3d":return K===x;case "\x3e":return K>x;case "\x3c":return K<x;case "\x3e\x3d":return K>=
x;case "\x3c\x3d":return K<=x}}function z(y,K,x){if(K instanceof k.SqlInterval)if(x instanceof Date)switch(y){case "+":return new Date(K.valueInMilliseconds()+x.getTime());case "-":return K.valueInMilliseconds()-x.getTime();case "*":return K.valueInMilliseconds()*x.getTime();case "/":return K.valueInMilliseconds()/x.getTime()}else if(x instanceof k.SqlInterval)switch(y){case "+":return k.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()+x.valueInMilliseconds());case "-":return k.SqlInterval.createFromMilliseconds(K.valueInMilliseconds()-
x.valueInMilliseconds());case "*":return K.valueInMilliseconds()*x.valueInMilliseconds();case "/":return K.valueInMilliseconds()/x.valueInMilliseconds()}else K=K.valueInMilliseconds();else if(x instanceof k.SqlInterval)if(K instanceof Date)switch(y){case "+":return new Date(x.valueInMilliseconds()+K.getTime());case "-":return new Date(K.getTime()-x.valueInMilliseconds());case "*":return K.getTime()*x.valueInMilliseconds();case "/":return K.getTime()/x.valueInMilliseconds()}else x=x.valueInMilliseconds();
else if(K instanceof Date&&"number"===typeof x)switch(x*=864E5,K=K.getTime(),y){case "+":return new Date(K+x);case "-":return new Date(K-x);case "*":return new Date(K*x);case "/":return new Date(K/x)}else if(x instanceof Date&&"number"===typeof K)switch(K*=864E5,x=x.getTime(),y){case "+":return new Date(K+x);case "-":return new Date(K-x);case "*":return new Date(K*x);case "/":return new Date(K/x)}switch(y){case "+":return K+x;case "-":return K-x;case "*":return K*x;case "/":return K/x}}function A(y,
K,x,Y){y=Y.getAttribute(y,K);return null!=y&&1===x[K]?new Date(y):y}const O=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ea=new Set(["current_timestamp","current_date","current_time"]);let D=function(){function y(){}
y.makeBool=function(K){return!0===K};y.featureValue=function(K,x,Y,aa){return A(K,x,Y,aa)};y.equalsNull=function(K){return null===K};y.applyLike=function(K,x,Y){return d(K,x,Y)};y.ensureArray=function(K){return N(K)};y.applyIn=function(K,x){return I(K,x)};y.currentDate=function(){const K=new Date;K.setHours(0,0,0,0);return K};y.makeSqlInterval=function(K,x,Y){return k.SqlInterval.createFromValueAndQualifer(K,x,Y)};y.convertInterval=function(K){return K instanceof k.SqlInterval?K.valueInMilliseconds():
K};y.currentTimestamp=function(){return new Date};y.compare=function(K,x,Y){return G(K,x,Y)};y.calculate=function(K,x,Y){return z(K,x,Y)};y.makeComparable=function(K){return l(K)};y.evaluateFunction=function(K,x){return k.evaluateFunction(K,x)};y.lookup=function(K,x){K=x[K];return void 0===K?null:K};y.between=function(K,x){return null==K||null==x[0]||null==x[1]?null:K>=x[0]&&K<=x[1]};y.notbetween=function(K,x){return null==K||null==x[0]||null==x[1]?null:K<x[0]||K>x[1]};y.ternaryNot=function(K){return R(K)};
y.ternaryAnd=function(K,x){return M(K,x)};y.ternaryOr=function(K,x){return m(K,x)};return y}(),F=function(){function y(x,Y){this.fieldsIndex=Y;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(x);const {isStandardized:aa,isAggregate:W,referencedFieldNames:la}=this._extractExpressionInfo(Y);this._referencedFieldNames=la;this.isStandardized=aa;this.isAggregate=W}y.create=function(x,Y){return new y(x,Y)};var K=y.prototype;K.testSet=function(x,Y=
J){const aa={};for(const W of this.fieldNames)aa[W]=x.map(la=>Y.getAttribute(la,W));return!!this._evaluateNode(this.parseTree,{attributes:aa},J)};K.calculateValue=function(x,Y=J){x=this._evaluateNode(this.parseTree,x,Y);return x instanceof k.SqlInterval?x.valueInMilliseconds()/864E5:x};K.calculateValueCompiled=function(x,Y=J){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(x,this.parameters,Y,this._datefields);if(da("esri-csp-restrictions"))return this.calculateValue(x,
Y);this._compileMe();return this.parseTree._compiledVersion(x,this.parameters,Y,this._datefields)};K.testFeature=function(x,Y=J){return!!this._evaluateNode(this.parseTree,x,Y)};K.testFeatureCompiled=function(x,Y=J){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(x,this.parameters,Y,this._datefields);if(da("esri-csp-restrictions"))return this.testFeature(x,Y);this._compileMe();return!!this.parseTree._compiledVersion(x,this.parameters,Y,this._datefields)};K.getFunctions=
function(){const x=new Set;this._visitAll(this.parseTree,Y=>{"function"===Y.type&&x.add(Y.name.toLowerCase())});return Array.from(x)};K.getExpressions=function(){const x=new Map;this._visitAll(this.parseTree,Y=>{if("function"===Y.type){const aa=Y.name.toLowerCase();Y=Y.args.value[0];if("column-reference"===Y.type){Y=Y.column;const W=`${aa}-${Y}`;x.has(W)||x.set(W,{aggregateType:aa,field:Y})}}});return[...x.values()]};K.getVariables=function(){const x=new Set;this._visitAll(this.parseTree,Y=>{"parameter"===
Y.type&&x.add(Y.value.toLowerCase())});return Array.from(x)};K._compileMe=function(){const x="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",x)).bind(D)};K._extractExpressionInfo=function(x){const Y=[],aa=new Set;let W=!0,la=!0;this._visitAll(this.parseTree,ca=>{switch(ca.type){case "column-reference":const qa=x?.get(ca.column);let wa,ya;qa?wa=ya=qa.name??"":(ya=ca.column,
wa=ya.toLowerCase());qa&&qa.name&&("date"===qa.type||"esriFieldTypeDate"===qa.type)&&(this._datefields[qa.name]=1);aa.has(wa)||(aa.add(wa),Y.push(ya));ca.column=ya;break;case "function":const {name:Ba,args:Da}=ca;ca=Da.value.length;W&&(W=k.isStandardized(Ba,ca));la&&(la=L.isAggregate(Ba,ca))}});return{referencedFieldNames:Array.from(Y),isStandardized:W,isAggregate:la}};K._visitAll=function(x,Y){if(null!=x)switch(Y(x),x.type){case "when-clause":this._visitAll(x.operand,Y);this._visitAll(x.value,Y);
break;case "case-expression":for(const aa of x.clauses)this._visitAll(aa,Y);"simple"===x.format&&this._visitAll(x.operand,Y);null!==x.else&&this._visitAll(x.else,Y);break;case "expression-list":for(const aa of x.value)this._visitAll(aa,Y);break;case "unary-expression":this._visitAll(x.expr,Y);break;case "binary-expression":this._visitAll(x.left,Y);this._visitAll(x.right,Y);break;case "function":this._visitAll(x.args,Y)}};K.evaluateNodeToJavaScript=function(x){switch(x.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(x.value)+", "+JSON.stringify(x.qualifier)+","+JSON.stringify(x.op)+")";case "case-expression":var Y="";if("simple"===x.format){var aa="this.makeComparable("+this.evaluateNodeToJavaScript(x.operand)+")";Y="( ";for(let W=0;W<x.clauses.length;W++)Y+=" ("+aa+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(x.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(x.clauses[W].value)+") : "}else for(Y="( ",aa=0;aa<x.clauses.length;aa++)Y+=" this.makeBool("+
this.evaluateNodeToJavaScript(x.clauses[aa].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(x.clauses[aa].value)+") : ";Y=null!==x.else?Y+this.evaluateNodeToJavaScript(x.else):Y+"null";return Y+" )";case "parameter":return"this.lookup("+JSON.stringify(x.value.toLowerCase())+",lookups)";case "expression-list":Y="[";for(aa of x.value)"["!==Y&&(Y+=","),Y+=this.evaluateNodeToJavaScript(aa);return Y+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(x.expr)+
")";case "binary-expression":switch(x.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+" )";case "IS":if("null"!==x.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(x.left)+")";case "ISNOT":if("null"!==x.right.type)throw Error("Unsupported RHS for IS");
return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(x.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(x.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(x.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(x.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(x.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+")";case "NOTBETWEEN":return"this.notbetween("+
this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+","+JSON.stringify(x.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+","+JSON.stringify(x.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(x.operator)+","+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(x.operator)+","+this.evaluateNodeToJavaScript(x.left)+","+this.evaluateNodeToJavaScript(x.right)+")"}throw Error("Not Supported Operator "+x.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(x.value);case "date":return"(new Date("+q(x.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
p(x.value).getTime().toString()+"))";case "current-time":return"date"===x.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(x.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(x.name)+","+this.evaluateNodeToJavaScript(x.args)+")"}throw Error("Unsupported sql syntax "+x.type);};K._evaluateNode=function(x,Y,aa){switch(x.type){case "interval":return Y=this._evaluateNode(x.value,
Y,aa),k.SqlInterval.createFromValueAndQualifer(Y,x.qualifier,x.op);case "case-expression":if("simple"===x.format){var W=l(this._evaluateNode(x.operand,Y,aa));for(var la=0;la<x.clauses.length;la++)if(W===l(this._evaluateNode(x.clauses[la].operand,Y,aa)))return this._evaluateNode(x.clauses[la].value,Y,aa)}else for(W=0;W<x.clauses.length;W++)if(!0===this._evaluateNode(x.clauses[W].operand,Y,aa))return this._evaluateNode(x.clauses[W].value,Y,aa);return null!==x.else?this._evaluateNode(x.else,Y,aa):null;
case "parameter":return this.parameters[x.value.toLowerCase()];case "expression-list":W=[];for(la of x.value)W.push(this._evaluateNode(la,Y,aa));return W;case "unary-expression":return R(this._evaluateNode(x.expr,Y,aa));case "binary-expression":switch(x.operator){case "AND":return M(this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,Y,aa));case "OR":return m(this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,Y,aa));case "IS":if("null"!==x.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(x.left,Y,aa);case "ISNOT":if("null"!==x.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(x.left,Y,aa);case "IN":return W=N(this._evaluateNode(x.right,Y,aa)),I(this._evaluateNode(x.left,Y,aa),W);case "NOT IN":return W=N(this._evaluateNode(x.right,Y,aa)),R(I(this._evaluateNode(x.left,Y,aa),W));case "BETWEEN":return W=this._evaluateNode(x.left,Y,aa),x=this._evaluateNode(x.right,Y,aa),null==W||null==x[0]||null==x[1]?null:W>=l(x[0])&&W<=
l(x[1]);case "NOTBETWEEN":return W=this._evaluateNode(x.left,Y,aa),x=this._evaluateNode(x.right,Y,aa),null==W||null==x[0]||null==x[1]?null:W<l(x[0])||W>l(x[1]);case "LIKE":return d(this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,Y,aa),x.escape);case "NOT LIKE":return R(d(this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,Y,aa),x.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return G(x.operator,this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,
Y,aa));case "-":case "+":case "*":case "/":return z(x.operator,this._evaluateNode(x.left,Y,aa),this._evaluateNode(x.right,Y,aa))}case "null":case "boolean":case "string":case "number":return x.value;case "date":return q(x.value);case "timestamp":return p(x.value);case "current-time":return Y=new Date,"date"===x.mode&&Y.setHours(0,0,0,0),Y;case "column-reference":return A(Y,x.column,this._datefields,aa);case "function":return Y=this._evaluateNode(x.args,Y,aa),this.isAggregate?L.aggregateFunction(x.name,
Y):k.evaluateFunction(x.name,Y)}throw Error("Unsupported sql syntax "+x.type);};c._createClass(y,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,x=>{"current-time"===x.type?this._hasDateFunctions=!0:"function"===x.type&&(this._hasDateFunctions=this._hasDateFunctions||ea.has(x.name.toLowerCase()))});return this._hasDateFunctions}}]);
return y}();var P;(function(y){y[y.Normal=0]="Normal";y[y.Escaped=1]="Escaped"})(P||(P={}));const J={getAttribute(y,K){return(y&&"object"===typeof y.attributes?y.attributes:y)[K]}};g.WhereClause=F;g.defaultAttributeAdapter=J;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(g){function c(k){let r=0;for(let t=0;t<k.length;t++)r+=k[t];return r/k.length}function da(k){const r=c(k),t=k.length;
let n=0;for(const p of k)n+=(p-r)**2;return 1<t?n/(t-1):0}const L={min:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.min.apply(Math,k[0])},max:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.max.apply(Math,k[0])},avg:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:c(k[0])},sum:{minParams:1,maxParams:1,evaluate:k=>{if(null==k[0])k=null;else{k=k[0];let r=0;for(let t=0;t<k.length;t++)r+=k[t];k=r}return k}},stddev:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sqrt(da(k[0]))},
count:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].length},var:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:da(k[0])}};g.aggregateFunction=function(k,r){const t=L[k.toLowerCase()];if(null==t)throw Error("Function Not Recognised");if(r.length<t.minParams||r.length>t.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return t.evaluate(r)};g.isAggregate=function(k,r){k=L[k.toLowerCase()];return null!=k&&r>=k.minParams&&r<=k.maxParams};Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(g,c){let da=function(){function k(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(r){if(null!==r.precision||null!==r.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k.createFromMilliseconds=function(r){const t=new k;t.second=r/1E3;return t};k.createFromValueAndQualifer=
function(r,t,n){let p=null;const q=new k;q.op="-"===n?"-":"+";if("interval-period"===t.type){k._fixDefaults(t);n=RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw Error("Year-Month Intervals not supported");if(n.test(r))q[t.period]=parseFloat(r);else throw Error("Illegal Interval");}else{k._fixDefaults(t.start);k._fixDefaults(t.end);if("year"===t.start.period||"month"===t.start.period)throw Error("Year-Month Intervals not supported");if("year"===t.end.period||"month"===t.end.period)throw Error("Year-Month Intervals not supported");
switch(t.start.period){case "day":switch(t.end.period){case "hour":p=RegExp("^[0-9]{1,} [0-9]{1,}$");if(p.test(r))q[t.start.period]=parseFloat(r.split(" ")[0]),q[t.end.period]=parseFloat(r.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(p.test(r))q[t.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),q.hour=parseFloat(r[0]),q.minute=parseFloat(r[1]);else throw Error("Illegal Interval");break;case "second":p=
RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(r))q[t.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),q.hour=parseFloat(r[0]),q.minute=parseFloat(r[1]),q.second=parseFloat(r[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(t.end.period){case "minute":p=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(p.test(r))q.hour=parseFloat(r.split(":")[0]),q.minute=parseFloat(r.split(":")[1]);else throw Error("Illegal Interval");
break;case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(r))r=r.split(":"),q.hour=parseFloat(r[0]),q.minute=parseFloat(r[1]),q.second=parseFloat(r[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(t.end.period){case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(r))r=r.split(":"),q.minute=parseFloat(r[0]),q.second=parseFloat(r[1]);else throw Error("Illegal Interval");
break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return q};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const L={extract:{minParams:2,maxParams:2,evaluate:([k,r])=>{if(null==r)return null;if(r instanceof Date)switch(k.toUpperCase()){case "SECOND":return r.getSeconds();case "MINUTE":return r.getMinutes();case "HOUR":return r.getHours();
case "DAY":return r.getDate();case "MONTH":return r.getMonth()+1;case "YEAR":return r.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [r,t]=k;return null==r||null==t?null:r.toString().substring(t-1)}if(3===k.length){const [r,t,n]=k;return null==r||null==t||null==n?null:0>=n?"":r.toString().substring(t-1,t+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,r])=>null==k||null==r?null:r.indexOf(k)+1},trim:{minParams:2,
maxParams:3,evaluate:k=>{var r=3===k.length,t=r?k[1]:" ";r=r?k[2]:k[1];if(null==t||null==r)return null;t=`(${c.escapeRegExpString(t)})`;switch(k[0]){case "BOTH":return r.replace(new RegExp(`^${t}*|${t}*$`,"g"),"");case "LEADING":return r.replace(new RegExp(`^${t}*`,"g"),"");case "TRAILING":return r.replace(new RegExp(`${t}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const r=
k[0];k=2===k.length?10**k[1]:1;return null==r?null:Math.round(r*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let r="";for(let t=0;t<k.length;t++){if(null==k[t])return null;r+=k[t].toString()}return r}},lower:{minParams:1,maxParams:1,evaluate:k=>
null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()}};g.SqlInterval=da;g.evaluateFunction=function(k,r){const t=L[k.toLowerCase()];if(null==t)throw Error("Function Not Recognised");if(r.length<t.minParams||r.length>t.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return t.evaluate(r)};g.isStandardized=function(k,r){k=L[k.toLowerCase()];return null!=k&&r>=k.minParams&&r<=k.maxParams};
Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(g,c){var da={exports:{}};(function(k){(function(r,t){k.exports&&(k.exports=t())})(c.commonjsGlobal,function(){function r(n,p,q,N){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,r.prototype);n.expected=p;n.found=q;n.location=N;n.name="SyntaxError";return n}function t(n,p,q){q=q||" ";if(n.length>
p)return n;p-=n.length;q+=q.repeat(p);return n+q.slice(0,p)}(function(n,p){function q(){this.constructor=n}q.prototype=p.prototype;n.prototype=new q})(r,Error);r.prototype.format=function(n){var p="Error: "+this.message;if(this.location){var q=null,N;for(N=0;N<n.length;N++)if(n[N].source===this.location.source){q=n[N].text.split(/\r\n|\n|\r/g);break}n=this.location.start;N=this.location.source+":"+n.line+":"+n.column;if(q){var R=this.location.end,M=t("",n.line.toString().length," ");q=q[n.line-1];
R=(n.line===R.line?R.column:q.length+1)-n.column||1;p+="\n --\x3e "+N+"\n"+M+" |\n"+n.line+" | "+q+"\n"+M+" | "+t("",n.column-1," ")+t("",R,"^")}else p+="\n at "+N}return p};r.buildMessage=function(n,p){function q(I){return I.charCodeAt(0).toString(16).toUpperCase()}function N(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+q(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(d){return"\\x"+q(d)})}function R(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+q(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+q(d)})}function M(I){return m[I.type](I)}var m={literal:function(I){return'"'+N(I.text)+'"'},class:function(I){var d=I.parts.map(function(l){return Array.isArray(l)?R(l[0])+
"-"+R(l[1]):R(l)});return"["+(I.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){I=I.map(M);var d,l;I.sort();if(0<I.length){for(l=d=1;d<I.length;d++)I[d-1]!==I[d]&&(I[l]=I[d],l++);I.length=l}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}(n)+" but "+(p?'"'+N(p)+'"':"end of input")+" found."};
return{SyntaxError:r,parse:function(n,p){function q(w,C){return{type:"literal",text:w,ignoreCase:C}}function N(w,C,X){return{type:"class",parts:w,inverted:C,ignoreCase:X}}function R(w){var C=gc[w],X;if(!C){for(X=w-1;!gc[X];)X--;C=gc[X];for(C={line:C.line,column:C.column};X<w;)10===n.charCodeAt(X)?(C.line++,C.column=1):C.column++,X++;gc[w]=C}return C}function M(w,C){var X=R(w),ua=R(C);return{source:db,start:{offset:w,line:X.line,column:X.column},end:{offset:C,line:ua.line,column:ua.column}}}function m(w){e<
ub||(e>ub&&(ub=e,Ac=[]),Ac.push(w))}function I(){var w=e;ta();var C=l();C!==b?(ta(),w=C):(e=w,w=b);return w}function d(){var w=e;var C=l();if(C!==b){w=[];var X=e;var ua=ta();var Fa=Ia();if(Fa!==b){var Pa=ta();var Ra=l();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;for(;X!==b;)w.push(X),X=e,ua=ta(),Fa=Ia(),Fa!==b?(Pa=ta(),Ra=l(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);X={type:"expression-list"};C=[C];for(ua=0;ua<w.length;ua++)C.push(w[ua][3]);X.value=C;w=X}else e=w,w=b;return w}function l(){var w=
e;var C=G();if(C!==b){w=[];var X=e;var ua=ta();var Fa=v();if(Fa!==b){var Pa=ta();var Ra=G();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;for(;X!==b;)w.push(X),X=e,ua=ta(),Fa=v(),Fa!==b?(Pa=ta(),Ra=G(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);w=ab(C,w)}else e=w,w=b;return w}function G(){var w=e;var C=z();if(C!==b){w=[];var X=e;var ua=ta();var Fa=ja();if(Fa!==b){var Pa=ta();var Ra=z();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;for(;X!==b;)w.push(X),X=e,ua=ta(),Fa=ja(),Fa!==b?(Pa=ta(),
Ra=z(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);w=ab(C,w)}else e=w,w=b;return w}function z(){var w=e;var C=Z();if(C===b){C=e;if(33===n.charCodeAt(e)){var X=nb;e++}else X=b,0===va&&m(qd);if(X!==b){var ua=e;va++;if(61===n.charCodeAt(e)){var Fa=Za;e++}else Fa=b,0===va&&m(Qc);va--;Fa===b?ua=void 0:(e=ua,ua=b);ua!==b?C=X=[X,ua]:(e=C,C=b)}else e=C,C=b}C!==b?(X=ta(),ua=z(),ua!==b?w={type:"unary-expression",operator:"NOT",expr:ua}:(e=w,w=b)):(e=w,w=b);if(w===b){C=e;w=u();if(w!==b){ta();C=[];X=e;ua=
ta();Fa=A();if(Fa!==b){var Pa=ta();var Ra=u();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;if(X!==b)for(;X!==b;)C.push(X),X=e,ua=ta(),Fa=A(),Fa!==b?(Pa=ta(),Ra=u(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);else C=b;C!==b&&(C={type:"arithmetic",tail:C});C===b&&(C=e,X=h(),X!==b?(ta(),ua=Ga(),ua!==b?(ta(),ua=d(),ua!==b?(ta(),Fa=Ma(),Fa!==b?C={op:X,right:ua}:(e=C,C=b)):(e=C,C=b)):(e=C,C=b)):(e=C,C=b),C===b&&(C=e,X=h(),X!==b?(ta(),ua=Ga(),ua!==b?(ta(),ua=Ma(),ua!==b?C={op:X,right:{type:"expression-list",
value:[]}}:(e=C,C=b)):(e=C,C=b)):(e=C,C=b),C===b&&(C=e,X=h(),X!==b?(ta(),ua=K(),ua!==b?C={op:X,right:ua}:(e=C,C=b)):(e=C,C=b))),C===b&&(C=e,Fa=Z(),Fa!==b?(ta(),X=H(),X!==b?(ta(),ua=u(),ua!==b?(ta(),Pa=ja(),Pa!==b?(ta(),Fa=u(),Fa!==b?C={op:"NOT"+X,right:{type:"expression-list",value:[ua,Fa]}}:(e=C,C=b)):(e=C,C=b)):(e=C,C=b)):(e=C,C=b)):(e=C,C=b),C===b&&(C=e,Fa=H(),Fa!==b?(ta(),X=u(),X!==b?(ta(),ua=ja(),ua!==b?(ta(),Pa=u(),Pa!==b?C={op:Fa,right:{type:"expression-list",value:[X,Pa]}}:(e=C,C=b)):(e=C,
C=b)):(e=C,C=b)):(e=C,C=b)),C===b&&(C=e,X=f(),X!==b?(ta(),ua=Z(),ua!==b?(ta(),ua=u(),ua!==b?C={op:X+"NOT",right:ua}:(e=C,C=b)):(e=C,C=b)):(e=C,C=b),C===b&&(C=e,X=f(),X!==b?(ta(),ua=u(),ua!==b?C={op:X,right:ua}:(e=C,C=b)):(e=C,C=b)),C===b&&(C=e,X=O(),X!==b?(ta(),ua=ca(),ua!==b?(ta(),Fa=e,n.substr(e,6).toLowerCase()===pa?(Pa=n.substr(e,6),e+=6):(Pa=b,0===va&&m(rd)),Pa!==b?(Pa=e,va++,Ra=J(),va--,Ra===b?Pa=void 0:(e=Pa,Pa=b),Pa!==b?Fa="ESCAPE":(e=Fa,Fa=b)):(e=Fa,Fa=b),Fa!==b?(ta(),Fa=qa(),Fa!==b?C={op:X,
right:ua,escape:Fa.value}:(e=C,C=b)):(e=C,C=b)):(e=C,C=b)):(e=C,C=b),C===b&&(C=e,X=O(),X!==b?(ta(),ua=ca(),ua!==b?C={op:X,right:ua,escape:""}:(e=C,C=b)):(e=C,C=b))))));C===b&&(C=null);""==C||void 0==C||null==C?C=w:(X=null,C=X="arithmetic"==C.type?ab(w,C.tail):bb(C.op,w,C.right,C.escape))}else e=C,C=b;w=C}return w}function A(){if(n.substr(e,2)===Eb){var w=Eb;e+=2}else w=b,0===va&&m(sd);w===b&&(62===n.charCodeAt(e)?(w=dc,e++):(w=b,0===va&&m(td)),w===b&&(n.substr(e,2)===Fb?(w=Fb,e+=2):(w=b,0===va&&m(ud)),
w===b&&(n.substr(e,2)===ma?(w=ma,e+=2):(w=b,0===va&&m(vd)),w===b&&(60===n.charCodeAt(e)?(w=ec,e++):(w=b,0===va&&m(wd)),w===b&&(61===n.charCodeAt(e)?(w=Za,e++):(w=b,0===va&&m(Qc)),w===b&&(n.substr(e,2)===Cb?(w=Cb,e+=2):(w=b,0===va&&m(xd))))))));return w}function O(){var w=w=e;var C=Z();if(C!==b){var X=ta();var ua=V();ua!==b?w=C=[C,X,ua]:(e=w,w=b)}else e=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=V());return w}function h(){var w=w=e;var C=Z();if(C!==b){var X=ta();var ua=a();ua!==b?w=C=[C,X,ua]:(e=w,w=
b)}else e=w,w=b;w!==b&&(w=w[0]+" "+w[2]);w===b&&(w=a());return w}function u(){var w=e;var C=E();if(C!==b){w=[];var X=e;var ua=ta();var Fa=B();if(Fa!==b){var Pa=ta();var Ra=E();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;for(;X!==b;)w.push(X),X=e,ua=ta(),Fa=B(),Fa!==b?(Pa=ta(),Ra=E(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);w=ab(C,w)}else e=w,w=b;return w}function B(){if(43===n.charCodeAt(e)){var w=hb;e++}else w=b,0===va&&m(Bc);w===b&&(45===n.charCodeAt(e)?(w=sb,e++):(w=b,0===va&&m(Cc)));
return w}function E(){var w=e;var C=D();if(C!==b){w=[];var X=e;var ua=ta();var Fa=ea();if(Fa!==b){var Pa=ta();var Ra=D();Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)}else e=X,X=b;for(;X!==b;)w.push(X),X=e,ua=ta(),Fa=ea(),Fa!==b?(Pa=ta(),Ra=D(),Ra!==b?X=ua=[ua,Fa,Pa,Ra]:(e=X,X=b)):(e=X,X=b);w=ab(C,w)}else e=w,w=b;return w}function ea(){if(42===n.charCodeAt(e)){var w=fc;e++}else w=b,0===va&&m(yd);w===b&&(47===n.charCodeAt(e)?(w=Tb,e++):(w=b,0===va&&m(zd)));return w}function D(){var w=qa();if(w===b){var C=e;
var X=e;var ua=Da();if(ua!==b){var Fa=Ka();if(Fa!==b){var Pa=La();Pa!==b?X=parseFloat(ua+Fa+Pa):(e=X,X=b)}else e=X,X=b}else e=X,X=b;X===b&&(X=e,ua=Da(),ua!==b?(Fa=Ka(),Fa!==b?X=parseFloat(ua+Fa):(e=X,X=b)):(e=X,X=b),X===b&&(X=e,ua=Da(),ua!==b?(Fa=La(),Fa!==b?X=parseFloat(ua+Fa):(e=X,X=b)):(e=X,X=b),X===b&&(X=e,ua=Da(),ua!==b&&(ua=parseFloat(ua)),X=ua)));var Ra=X;if(Ra!==b){var hc=e;va++;var Ad=P();va--;Ad===b?hc=void 0:(e=hc,hc=b);hc!==b?C={type:"number",value:Ra}:(e=C,C=b)}else e=C,C=b;w=C;if(w===
b){var Ub=e;var Ib=e;if(n.substr(e,4).toLowerCase()===Qa){var ic=n.substr(e,4);e+=4}else ic=b,0===va&&m(Bd);if(ic!==b){var Vb=e;va++;var Cd=J();va--;Cd===b?Vb=void 0:(e=Vb,Vb=b);Vb!==b?Ib=ic=[ic,Vb]:(e=Ib,Ib=b)}else e=Ib,Ib=b;var Gb=Ib;Gb!==b&&(Gb={type:"boolean",value:!0});Ub=Gb;if(Ub===b){Ub=e;var Jb=e;if(n.substr(e,5).toLowerCase()===Hb){var jc=n.substr(e,5);e+=5}else jc=b,0===va&&m(Dd);if(jc!==b){var Wb=e;va++;var Ed=J();va--;Ed===b?Wb=void 0:(e=Wb,Wb=b);Wb!==b?Jb=jc=[jc,Wb]:(e=Jb,Jb=b)}else e=
Jb,Jb=b;Gb=Jb;Gb!==b&&(Gb={type:"boolean",value:!1});Ub=Gb}w=Ub;if(w===b){var Kb=e;if(n.substr(e,4).toLowerCase()===tb){var kc=n.substr(e,4);e+=4}else kc=b,0===va&&m(Fd);if(kc!==b){var Xb=e;va++;var Gd=J();va--;Gd===b?Xb=void 0:(e=Xb,Xb=b);Xb!==b?Kb=kc=[kc,Xb]:(e=Kb,Kb=b)}else e=Kb,Kb=b;var Dc=Kb;Dc!==b&&(Dc={type:"null",value:null});w=Dc;if(w===b){var Lb=e;var Mb=e;if(n.substr(e,4).toLowerCase()===Hd){var Rc=n.substr(e,4);e+=4}else Rc=b,0===va&&m(Id);if(Rc!==b){var lc=e;va++;var Jd=J();va--;Jd===
b?lc=void 0:(e=lc,lc=b);lc!==b?Mb="DATE":(e=Mb,Mb=b)}else e=Mb,Mb=b;if(Mb!==b){ta();var Sc=ca();Sc!==b?Lb={type:"date",value:Sc.value}:(e=Lb,Lb=b)}else e=Lb,Lb=b;w=Lb;if(w===b){var Nb=e;var Ob=e;if(n.substr(e,9).toLowerCase()===Kd){var Tc=n.substr(e,9);e+=9}else Tc=b,0===va&&m(Ld);if(Tc!==b){var mc=e;va++;var Md=J();va--;Md===b?mc=void 0:(e=mc,mc=b);mc!==b?Ob="TIMESTAMP":(e=Ob,Ob=b)}else e=Ob,Ob=b;if(Ob!==b){ta();var Uc=ca();Uc!==b?Nb={type:"timestamp",value:Uc.value}:(e=Nb,Nb=b)}else e=Nb,Nb=b;w=
Nb;if(w===b){var eb=e;var Ec=ia();if(Ec!==b){ta();if(45===n.charCodeAt(e)){var yb=sb;e++}else yb=b,0===va&&m(Cc);yb===b&&(43===n.charCodeAt(e)?(yb=hb,e++):(yb=b,0===va&&m(Bc)));if(yb!==b){ta();var Yb=ca();if(Yb!==b){ta();var Vc=Y();Vc!==b?eb={type:"interval",value:Yb,qualifier:Vc,op:yb}:(e=eb,eb=b)}else e=eb,eb=b}else e=eb,eb=b}else e=eb,eb=b;eb===b&&(eb=e,Ec=ia(),Ec!==b?(ta(),yb=ca(),yb!==b?(ta(),Yb=Y(),Yb!==b?eb={type:"interval",value:yb,qualifier:Yb,op:""}:(e=eb,eb=b)):(e=eb,eb=b)):(e=eb,eb=b));
w=eb}}}}}}var Ya=w;if(Ya===b){var kb=e;var Pb=e;if(n.substr(e,7).toLowerCase()===cb){var Wc=n.substr(e,7);e+=7}else Wc=b,0===va&&m(Nd);if(Wc!==b){var nc=e;va++;var Od=J();va--;Od===b?nc=void 0:(e=nc,nc=b);nc!==b?Pb="EXTRACT":(e=Pb,Pb=b)}else e=Pb,Pb=b;if(Pb!==b){ta();var Pd=Ga();if(Pd!==b){ta();var qb=ka();qb===b&&(qb=oa(),qb===b&&(qb=ra(),qb===b&&(qb=sa(),qb===b&&(qb=ba(),qb===b&&(qb=ha())))));var Xc=qb;if(Xc!==b){ta();var Qd=S();if(Qd!==b){ta();var Yc=l();if(Yc!==b){ta();var Rd=Ma();Rd!==b?kb={type:"function",
name:"extract",args:{type:"expression-list",value:[{type:"string",value:Xc},Yc]}}:(e=kb,kb=b)}else e=kb,kb=b}else e=kb,kb=b}else e=kb,kb=b}else e=kb,kb=b}else e=kb,kb=b;Ya=kb;if(Ya===b){var lb=e;var Qb=e;if(n.substr(e,9).toLowerCase()===Ua){var Zc=n.substr(e,9);e+=9}else Zc=b,0===va&&m(Sd);if(Zc!==b){var oc=e;va++;var Td=J();va--;Td===b?oc=void 0:(e=oc,oc=b);oc!==b?Qb="SUBSTRING":(e=Qb,Qb=b)}else e=Qb,Qb=b;if(Qb!==b){ta();var Ud=Ga();if(Ud!==b){ta();var Fc=l();if(Fc!==b){ta();var Vd=S();if(Vd!==b){ta();
var Gc=l();if(Gc!==b){ta();var zb=e;var Rb=e;if(n.substr(e,3).toLowerCase()===Va){var $c=n.substr(e,3);e+=3}else $c=b,0===va&&m(Wd);if($c!==b){var pc=e;va++;var Xd=J();va--;Xd===b?pc=void 0:(e=pc,pc=b);pc!==b?Rb="FOR":(e=Rb,Rb=b)}else e=Rb,Rb=b;var Zb=Rb;if(Zb!==b){var Yd=ta();var ad=l();if(ad!==b){var Zd=ta();zb=Zb=[Zb,Yd,ad,Zd]}else e=zb,zb=b}else e=zb,zb=b;zb===b&&(zb=null);Zb=Ma();Zb!==b?lb={type:"function",name:"substring",args:{type:"expression-list",value:zb?[Fc,Gc,zb[2]]:[Fc,Gc]}}:(e=lb,lb=
b)}else e=lb,lb=b}else e=lb,lb=b}else e=lb,lb=b}else e=lb,lb=b}else e=lb,lb=b;Ya=lb;if(Ya===b){var $a=e;var Hc=T();if(Hc!==b){ta();var Ic=Ga();if(Ic!==b){ta();var Ab=x();Ab===b&&(Ab=null);ta();var $b=l();if($b!==b){ta();var Jc=S();if(Jc!==b){ta();var bd=l();if(bd!==b){ta();var $d=Ma();$d!==b?$a={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b,bd]}}:(e=$a,$a=b)}else e=$a,$a=b}else e=$a,$a=b}else e=$a,$a=b}else e=$a,$a=b}else e=$a,$a=b;$a===
b&&($a=e,Hc=T(),Hc!==b?(ta(),Ic=Ga(),Ic!==b?(ta(),Ab=x(),Ab===b&&(Ab=null),ta(),$b=l(),$b!==b?(ta(),Jc=Ma(),Jc!==b?$a={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b]}}:(e=$a,$a=b)):(e=$a,$a=b)):(e=$a,$a=b)):(e=$a,$a=b));Ya=$a;if(Ya===b){var mb=e;var Sb=e;if(n.substr(e,8).toLowerCase()===ae){var cd=n.substr(e,8);e+=8}else cd=b,0===va&&m(be);if(cd!==b){var qc=e;va++;var ce=J();va--;ce===b?qc=void 0:(e=qc,qc=b);qc!==b?Sb="POSITION":(e=Sb,
Sb=b)}else e=Sb,Sb=b;if(Sb!==b){ta();var de=Ga();if(de!==b){ta();var dd=l();if(dd!==b){ta();var ee=a();if(ee!==b){ta();var ed=l();if(ed!==b){ta();var fe=Ma();fe!==b?mb={type:"function",name:"position",args:{type:"expression-list",value:[dd,ed]}}:(e=mb,mb=b)}else e=mb,mb=b}else e=mb,mb=b}else e=mb,mb=b}else e=mb,mb=b}else e=mb,mb=b;Ya=mb;if(Ya===b){var Db=e;var rc;var rb=e;rb=rc=F();if(rb===b)if(rb=e,96===n.charCodeAt(e)?(rc=fd,e++):(rc=b,0===va&&m(gd)),rc!==b){var sc=[];if(hd.test(n.charAt(e))){var Bb=
n.charAt(e);e++}else Bb=b,0===va&&m(id);if(Bb!==b)for(;Bb!==b;)sc.push(Bb),hd.test(n.charAt(e))?(Bb=n.charAt(e),e++):(Bb=b,0===va&&m(id));else sc=b;sc!==b?(96===n.charCodeAt(e)?(Bb=fd,e++):(Bb=b,0===va&&m(gd)),Bb!==b?rb=sc.join(""):(e=rb,rb=b)):(e=rb,rb=b)}else e=rb,rb=b;var jd=rb;if(jd!==b){ta();var ge=Ga();if(ge!==b){ta();var tc=d();tc===b&&(tc=null);ta();var he=Ma();he!==b?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(e=Db,Db=b)}else e=Db,Db=b}else e=Db,Db=b;Ya=Db;
if(Ya===b){var vb;var fb=e;var Kc=na();if(Kc!==b){ta();var ac=l();if(ac!==b){ta();var bc=[];for(vb=ya();vb!==b;)bc.push(vb),vb=ya();vb=ta();var uc=za();uc!==b?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(e=fb,fb=b)}else e=fb,fb=b}else e=fb,fb=b;if(fb===b)if(fb=e,Kc=na(),Kc!==b)if(ta(),ac=l(),ac!==b){ta();bc=[];for(vb=ya();vb!==b;)bc.push(vb),vb=ya();vb=ta();uc=Ba();if(uc!==b){ta();var ie=za();ie!==b?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:
(e=fb,fb=b)}else e=fb,fb=b}else e=fb,fb=b;else e=fb,fb=b;var Lc=fb;if(Lc===b){var wb;var ib=e;var Mc=na();if(Mc!==b){ta();var cc=[];for(wb=wa();wb!==b;)cc.push(wb),wb=wa();wb=ta();var vc=za();vc!==b?ib={type:"case-expression",format:"searched",clauses:cc,else:null}:(e=ib,ib=b)}else e=ib,ib=b;if(ib===b)if(ib=e,Mc=na(),Mc!==b){ta();cc=[];for(wb=wa();wb!==b;)cc.push(wb),wb=wa();wb=ta();vc=Ba();if(vc!==b){ta();var je=za();je!==b?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(e=
ib,ib=b)}else e=ib,ib=b}else e=ib,ib=b;Lc=ib}Ya=Lc;if(Ya===b){var wc;var xc=e;var kd=P();if(kd!==b){var ld=[];for(wc=y();wc!==b;)ld.push(wc),wc=y();xc=kd+ld.join("")}else e=xc,xc=b;var yc=xc;if(yc!==b){var Nc=yc;yc=/^CURRENT_DATE$/i.test(Nc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Ya=yc;if(Ya===b&&(Ya=K(),Ya===b)){Ya=e;var ke=Ga();if(ke!==b){ta();var Oc=l();if(Oc!==b){ta();var le=Ma();le!==
b?(Oc.paren=!0,Ya=Oc):(e=Ya,Ya=b)}else e=Ya,Ya=b}else e=Ya,Ya=b}}}}}}}}return Ya}function F(){var w;var C=e;var X=P();if(X!==b){C=[];for(w=J();w!==b;)C.push(w),w=J();C=X+C.join("")}else e=C,C=b;return C}function P(){if(me.test(n.charAt(e))){var w=n.charAt(e);e++}else w=b,0===va&&m(ne);return w}function J(){if(oe.test(n.charAt(e))){var w=n.charAt(e);e++}else w=b,0===va&&m(pe);return w}function y(){if(qe.test(n.charAt(e))){var w=n.charAt(e);e++}else w=b,0===va&&m(re);return w}function K(){var w=e;if(64===
n.charCodeAt(e)){var C=zc;e++}else C=b,0===va&&m(se);if(C!==b){var X=F();X!==b?w=C=[C,X]:(e=w,w=b)}else e=w,w=b;w!==b&&(w={type:"parameter",value:w[1]});return w}function x(){var w=e;if(n.substr(e,7).toLowerCase()===te){var C=n.substr(e,7);e+=7}else C=b,0===va&&m(ue);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="LEADING":(e=w,w=b)}else e=w,w=b;w===b&&(w=e,n.substr(e,8).toLowerCase()===ve?(C=n.substr(e,8),e+=8):(C=b,0===va&&m(we)),C!==b?(C=e,va++,X=J(),va--,X===b?C=void 0:(e=
C,C=b),C!==b?w="TRAILING":(e=w,w=b)):(e=w,w=b),w===b&&(w=e,n.substr(e,4).toLowerCase()===xe?(C=n.substr(e,4),e+=4):(C=b,0===va&&m(ye)),C!==b?(C=e,va++,X=J(),va--,X===b?C=void 0:(e=C,C=b),C!==b?w="BOTH":(e=w,w=b)):(e=w,w=b)));return w}function Y(){var w=e;var C=e;var X=aa();if(X!==b){ta();var ua=Ga();if(ua!==b)if(ta(),ua=la(),ua!==b){ta();var Fa=Ma();Fa!==b?C={type:"interval-period",period:X.value,precision:ua,secondary:null}:(e=C,C=b)}else e=C,C=b;else e=C,C=b}else e=C,C=b;C===b&&(C=e,X=aa(),X!==
b&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),C=X);if(C!==b)if(ta(),X=e,n.substr(e,2).toLowerCase()===ze?(ua=n.substr(e,2),e+=2):(ua=b,0===va&&m(Ae)),ua!==b?(ua=e,va++,Fa=J(),va--,Fa===b?ua=void 0:(e=ua,ua=b),ua!==b?X="TO":(e=X,X=b)):(e=X,X=b),X!==b){ta();X=e;ua=aa();ua!==b&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});X=ua;if(X===b){X=e;ua=ha();if(ua!==b)if(ta(),ua=Ga(),ua!==b)if(ta(),ua=la(),ua!==b)if(ta(),Fa=Ia(),Fa!==b)if(ta(),Fa=W(),
Fa!==b){ta();var Pa=Ma();Pa!==b?X={type:"interval-period",period:"second",precision:ua,secondary:Fa}:(e=X,X=b)}else e=X,X=b;else e=X,X=b;else e=X,X=b;else e=X,X=b;else e=X,X=b;X===b&&(X=e,ua=ha(),ua!==b?(ta(),ua=Ga(),ua!==b?(ta(),ua=la(),ua!==b?(ta(),Fa=Ma(),Fa!==b?X={type:"interval-period",period:"second",precision:ua,secondary:null}:(e=X,X=b)):(e=X,X=b)):(e=X,X=b)):(e=X,X=b),X===b&&(X=e,ua=ha(),ua!==b&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),X=ua))}X!==b?w={type:"interval-qualifier",
start:C,end:X}:(e=w,w=b)}else e=w,w=b;else e=w,w=b;w===b&&(w=e,X=aa(),X!==b?(ta(),C=Ga(),C!==b?(ta(),C=W(),C!==b?(ta(),ua=Ma(),ua!==b?w={type:"interval-period",period:X.value,precision:C,secondary:null}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,X=aa(),X!==b&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),w=X,w===b&&(w=e,X=ha(),X!==b?(ta(),C=Ga(),C!==b?(ta(),C=la(),C!==b?(ta(),ua=Ia(),ua!==b?(ta(),X=W(),X!==b?(ta(),ua=Ma(),ua!==b?w={type:"interval-period",period:"second",
precision:C,secondary:X}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,X=ha(),X!==b?(ta(),C=Ga(),C!==b?(ta(),C=W(),C!==b?(ta(),ua=Ma(),ua!==b?w={type:"interval-period",period:"second",precision:C,secondary:null}:(e=w,w=b)):(e=w,w=b)):(e=w,w=b)):(e=w,w=b),w===b&&(w=e,X=ha(),X!==b&&(X={type:"interval-period",period:"second",precision:null,secondary:null}),w=X)))));return w}function aa(){var w=e;w=ra();w!==b&&(w={type:"string",value:"day"});w===b&&(w=e,w=sa(),w!==b&&(w=
{type:"string",value:"hour"}),w===b&&(w=e,w=ba(),w!==b&&(w={type:"string",value:"minute"}),w===b&&(w=e,w=oa(),w!==b&&(w={type:"string",value:"month"}),w===b&&(w=e,w=ka(),w!==b&&(w={type:"string",value:"year"})))));return w}function W(){var w=Na();w!==b&&(w=parseFloat(w));return w}function la(){var w=Na();w!==b&&(w=parseFloat(w));return w}function ca(){var w=qa();w===b&&(w=K());return w}function qa(){var w=e;if(39===n.charCodeAt(e)){var C=jb;e++}else C=b,0===va&&m(md);C===b&&(n.substr(e,2)===xb?(C=
xb,e+=2):(C=b,0===va&&m(Be)));if(C!==b){C=[];var X=e;n.substr(e,2)===Sa?(X=Sa,e+=2):(X=b,0===va&&m(nd));X!==b&&(X="'");X===b&&(od.test(n.charAt(e))?(X=n.charAt(e),e++):(X=b,0===va&&m(pd)));for(;X!==b;)C.push(X),X=e,n.substr(e,2)===Sa?(X=Sa,e+=2):(X=b,0===va&&m(nd)),X!==b&&(X="'"),X===b&&(od.test(n.charAt(e))?(X=n.charAt(e),e++):(X=b,0===va&&m(pd)));39===n.charCodeAt(e)?(X=jb,e++):(X=b,0===va&&m(md));X!==b?w={type:"string",value:C.join("")}:(e=w,w=b)}else e=w,w=b;return w}function wa(){var w=e;if(Ea()!==
b){ta();var C=l();if(C!==b){ta();var X=Ha();X!==b?(ta(),X=l(),X!==b?w={type:"when-clause",operand:C,value:X}:(e=w,w=b)):(e=w,w=b)}else e=w,w=b}else e=w,w=b;return w}function ya(){var w=e;if(Ea()!==b){ta();var C=l();if(C!==b){ta();var X=Ha();X!==b?(ta(),X=l(),X!==b?w={type:"when-clause",operand:C,value:X}:(e=w,w=b)):(e=w,w=b)}else e=w,w=b}else e=w,w=b;return w}function Ba(){var w=e;var C=e;if(n.substr(e,4).toLowerCase()===Ce){var X=n.substr(e,4);e+=4}else X=b,0===va&&m(De);if(X!==b){X=e;va++;var ua=
J();va--;ua===b?X=void 0:(e=X,X=b);X!==b?C="ELSE":(e=C,C=b)}else e=C,C=b;C!==b?(ta(),C=l(),C!==b?w={type:"else-clause",value:C}:(e=w,w=b)):(e=w,w=b);return w}function Da(){var w=Na();if(w===b){w=e;if(45===n.charCodeAt(e)){var C=sb;e++}else C=b,0===va&&m(Cc);C===b&&(43===n.charCodeAt(e)?(C=hb,e++):(C=b,0===va&&m(Bc)));if(C!==b){var X=Na();X!==b?w=C[0]+X:(e=w,w=b)}else e=w,w=b}return w}function Ka(){var w=e;if(46===n.charCodeAt(e)){var C=ob;e++}else C=b,0===va&&m(Ee);C!==b?(w=Na(),w===b&&(w=null),w=
"."+(null!=w?w:"")):(e=w,w=b);return w}function La(){var w;var C=w=e;if(Fe.test(n.charAt(e))){var X=n.charAt(e);e++}else X=b,0===va&&m(Ge);X!==b?(He.test(n.charAt(e))?(C=n.charAt(e),e++):(C=b,0===va&&m(Ie)),C===b&&(C=null),C="e"+(null===C?"":C)):(e=C,C=b);C!==b?(X=Na(),X!==b?w=C+X:(e=w,w=b)):(e=w,w=b);return w}function Na(){var w=[];var C=xa();if(C!==b)for(;C!==b;)w.push(C),C=xa();else w=b;w!==b&&(w=w.join(""));return w}function xa(){if(Je.test(n.charAt(e))){var w=n.charAt(e);e++}else w=b,0===va&&
m(Ke);return w}function a(){var w=e;if(n.substr(e,2).toLowerCase()===Q){var C=n.substr(e,2);e+=2}else C=b,0===va&&m(Le);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="IN":(e=w,w=b)}else e=w,w=b;return w}function f(){var w=e;if(n.substr(e,2).toLowerCase()===fa){var C=n.substr(e,2);e+=2}else C=b,0===va&&m(Me);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="IS":(e=w,w=b)}else e=w,w=b;return w}function V(){var w=e;if(n.substr(e,4).toLowerCase()===U){var C=n.substr(e,
4);e+=4}else C=b,0===va&&m(Ne);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="LIKE":(e=w,w=b)}else e=w,w=b;return w}function Z(){var w=e;if(n.substr(e,3).toLowerCase()===Aa){var C=n.substr(e,3);e+=3}else C=b,0===va&&m(Oe);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="NOT":(e=w,w=b)}else e=w,w=b;return w}function ja(){var w=e;if(n.substr(e,3).toLowerCase()===Ca){var C=n.substr(e,3);e+=3}else C=b,0===va&&m(Pe);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:
(e=C,C=b);C!==b?w="AND":(e=w,w=b)}else e=w,w=b;return w}function v(){var w=e;if(n.substr(e,2).toLowerCase()===Ja){var C=n.substr(e,2);e+=2}else C=b,0===va&&m(Qe);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="OR":(e=w,w=b)}else e=w,w=b;return w}function H(){var w=e;if(n.substr(e,7).toLowerCase()===Oa){var C=n.substr(e,7);e+=7}else C=b,0===va&&m(Re);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="BETWEEN":(e=w,w=b)}else e=w,w=b;return w}function S(){var w=e;
if(n.substr(e,4).toLowerCase()===Wa){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(Se);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="FROM":(e=w,w=b)}else e=w,w=b;return w}function T(){var w=e;if(n.substr(e,4).toLowerCase()===pb){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(Te);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="TRIM":(e=w,w=b)}else e=w,w=b;return w}function ia(){var w=e;if(n.substr(e,8).toLowerCase()===Ue){var C=n.substr(e,8);e+=8}else C=b,0===va&&
m(Ve);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="INTERVAL":(e=w,w=b)}else e=w,w=b;return w}function ka(){var w=e;if(n.substr(e,4).toLowerCase()===We){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(Xe);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="YEAR":(e=w,w=b)}else e=w,w=b;return w}function oa(){var w=e;if(n.substr(e,5).toLowerCase()===Ye){var C=n.substr(e,5);e+=5}else C=b,0===va&&m(Ze);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?
w="MONTH":(e=w,w=b)}else e=w,w=b;return w}function ra(){var w=e;if(n.substr(e,3).toLowerCase()===$e){var C=n.substr(e,3);e+=3}else C=b,0===va&&m(af);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="DAY":(e=w,w=b)}else e=w,w=b;return w}function sa(){var w=e;if(n.substr(e,4).toLowerCase()===bf){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(cf);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="HOUR":(e=w,w=b)}else e=w,w=b;return w}function ba(){var w=e;if(n.substr(e,
6).toLowerCase()===df){var C=n.substr(e,6);e+=6}else C=b,0===va&&m(ef);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="MINUTE":(e=w,w=b)}else e=w,w=b;return w}function ha(){var w=e;if(n.substr(e,6).toLowerCase()===ff){var C=n.substr(e,6);e+=6}else C=b,0===va&&m(gf);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="SECOND":(e=w,w=b)}else e=w,w=b;return w}function na(){var w=e;if(n.substr(e,4).toLowerCase()===hf){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(jf);
if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="CASE":(e=w,w=b)}else e=w,w=b;return w}function za(){var w=e;if(n.substr(e,3).toLowerCase()===kf){var C=n.substr(e,3);e+=3}else C=b,0===va&&m(lf);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="END":(e=w,w=b)}else e=w,w=b;return w}function Ea(){var w=e;if(n.substr(e,4).toLowerCase()===mf){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(nf);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="WHEN":(e=
w,w=b)}else e=w,w=b;return w}function Ha(){var w=e;if(n.substr(e,4).toLowerCase()===of){var C=n.substr(e,4);e+=4}else C=b,0===va&&m(pf);if(C!==b){C=e;va++;var X=J();va--;X===b?C=void 0:(e=C,C=b);C!==b?w="THEN":(e=w,w=b)}else e=w,w=b;return w}function Ia(){if(44===n.charCodeAt(e)){var w=qf;e++}else w=b,0===va&&m(rf);return w}function Ga(){if(40===n.charCodeAt(e)){var w=sf;e++}else w=b,0===va&&m(tf);return w}function Ma(){if(41===n.charCodeAt(e)){var w=uf;e++}else w=b,0===va&&m(vf);return w}function ta(){var w;
var C=[];for(w=Xa();w!==b;)C.push(w),w=Xa();return C}function Xa(){if(wf.test(n.charAt(e))){var w=n.charAt(e);e++}else w=b,0===va&&m(xf);return w}function bb(w,C,X,ua){w={type:"binary-expression",operator:w,left:C,right:X};void 0!==ua&&(w.escape=ua);return w}function ab(w,C){for(var X=0;X<C.length;X++)w=bb(C[X][1],w,C[X][3]);return w}p=void 0!==p?p:{};var b={},db=p.grammarSource,Ta={start:I},gb=I,nb="!",Za="\x3d",Eb="\x3e\x3d",dc="\x3e",Fb="\x3c\x3d",ma="\x3c\x3e",ec="\x3c",Cb="!\x3d",hb="+",sb="-",
fc="*",Tb="/",zc="@",jb="'",xb="N'",Sa="''",ob=".",tb="null",Qa="true",Hb="false",Q="in",fa="is",U="like",pa="escape",Aa="not",Ca="and",Ja="or",Oa="between",Wa="from",Va="for",Ua="substring",cb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te="leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf="case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=
/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,hd=/^[^`]/,qd=q("!",!1),Qc=q("\x3d",!1),sd=q("\x3e\x3d",!1),td=q("\x3e",!1),ud=q("\x3c\x3d",!1),vd=q("\x3c\x3e",!1),wd=q("\x3c",!1),xd=q("!\x3d",!1),Bc=q("+",!1),Cc=q("-",!1),yd=q("*",!1),zd=q("/",!1),ne=N([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=N([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=N([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=q("@",!1),md=q("'",!1),Be=q("N'",
!1),nd=q("''",!1),pd=N(["'"],!0,!1),Ee=q(".",!1),Ke=N([["0","9"]],!1,!1),Ge=N(["e","E"],!1,!1),Ie=N(["+","-"],!1,!1),Fd=q("NULL",!0),Bd=q("TRUE",!0),Dd=q("FALSE",!0),Le=q("IN",!0),Me=q("IS",!0),Ne=q("LIKE",!0),rd=q("ESCAPE",!0),Oe=q("NOT",!0),Pe=q("AND",!0),Qe=q("OR",!0),Re=q("BETWEEN",!0),Se=q("FROM",!0),Wd=q("FOR",!0),Sd=q("SUBSTRING",!0),Nd=q("EXTRACT",!0),Te=q("TRIM",!0),be=q("POSITION",!0),Ld=q("TIMESTAMP",!0),Id=q("DATE",!0),ue=q("LEADING",!0),we=q("TRAILING",!0),ye=q("BOTH",!0),Ae=q("TO",!0),
Ve=q("INTERVAL",!0),Xe=q("YEAR",!0),Ze=q("MONTH",!0),af=q("DAY",!0),cf=q("HOUR",!0),ef=q("MINUTE",!0),gf=q("SECOND",!0),jf=q("CASE",!0),lf=q("END",!0),nf=q("WHEN",!0),pf=q("THEN",!0),De=q("ELSE",!0),rf=q(",",!1),tf=q("(",!1),vf=q(")",!1),xf=N([" ","\t","\n","\r"],!1,!1),gd=q("`",!1),id=N(["`"],!0,!1),e=0,gc=[{line:1,column:1}],ub=0,Ac=[],va=0;if("startRule"in p){if(!(p.startRule in Ta))throw Error("Can't start parsing from rule \""+p.startRule+'".');gb=Ta[p.startRule]}var Pc=gb();if(Pc!==b&&e===n.length)return Pc;
Pc!==b&&e<n.length&&m({type:"end"});throw function(w,C,X){return new r(r.buildMessage(w,C),w,C,X)}(Ac,ub<n.length?n.charAt(ub):null,ub<n.length?M(ub,ub+1):M(ub,ub));}}})})(da);let L=function(){function k(){}k.parse=function(r){return da.exports.parse(r)};return k}();g.WhereGrammar=L;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(g){g.commonjsGlobal="undefined"!==typeof globalThis?globalThis:
"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};g.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};g.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],
function(g){g.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,
supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(g,c,da,L,k,r,t,n,p,q,
N,R,M,m,I){function d(A,O,h,u){const B=u.x-h.x;u=u.y-h.y;O=Math.min(1,Math.max(0,((O.x-h.x)*B+(O.y-h.y)*u)/(B*B+u*u)));A.x=h.x+B*O;A.y=h.y+u*O}function l(A,O){return A?O?4:3:O?3:2}let G=function(){function A(h,u,B){this.items=h;this.query=u;this.geometryType=B.geometryType;this.hasM=B.hasM;this.hasZ=B.hasZ;this.fieldsIndex=B.fieldsIndex;this.objectIdField=B.objectIdField;this.spatialReference=B.spatialReference;this.featureAdapter=B.featureAdapter}var O=A.prototype;O.createQueryResponseForCount=function(){const h=
new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return h.countDistinctValues(this.items);const {groupByFieldsForStatistics:u,having:B,outStatistics:E}=this.query;if(!u?.length)return 1;const ea=new Map,D=new Map,F=new Set;for(const y of E){var {statisticType:P}=y;P="exceedslimit"!==P?y.onStatisticField:void 0;if(!D.has(P)){var J=[];for(const K of u){const x=this._getAttributeValues(h,K,ea);J.push(x)}D.set(P,this._calculateUniqueValues(J,h.returnDistinctValues))}P=
D.get(P);for(const K in P){const {data:x,items:Y}=P[K];J=x.join(",");B&&!h.validateItems(Y,B)||F.add(J)}}return F.size};O.createQueryResponse=function(){var h=da._asyncToGenerator(function*(){let u;u=this.query.outStatistics?this.query.outStatistics.some(B=>"exceedslimit"===B.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(n.isValid(this.query.outSR)&&
!n.equals(this.query.geometry.spatialReference,this.query.outSR)?u.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...q.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):u.queryGeometry=R.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return u});return function(){return h.apply(this,arguments)}}();O.createSnappingResponse=function(h,u){const B=this.featureAdapter,E=l(this.hasZ,this.hasM),{point:ea}=
h,D="number"===typeof h.distance?h.distance:h.distance.x,F="number"===typeof h.distance?h.distance:h.distance.y,P={candidates:[]},J="esriGeometryPolygon"===this.geometryType;u=this._getPointCreator(ea,null!=ea.z,null!=ea.m,this.spatialReference,u);const y=new z(null,0),K=new z(null,0),x={x:0,y:0,z:0};for(const wa of this.items){var Y=B.getGeometry(wa);if(L.isNone(Y))continue;const {coords:ya,lengths:Ba}=Y;y.coords=ya;K.coords=ya;if(h.types&c.SnappingTypes.EDGE){Y=0;for(var aa=0;aa<Ba.length;aa++){var W=
Ba[aa];for(var la=0;la<W;la++,Y+=E){var ca=y;ca.coordsIndex=Y;if(la!==W-1){const Da=K;Da.coordsIndex=Y+E;const Ka=x;d(x,ea,ca,Da);var qa=(ea.x-Ka.x)/D;const La=(ea.y-Ka.y)/F;qa=qa*qa+La*La;1>=qa&&P.candidates.push(N.makeEdgeCandidate(B.getObjectId(wa),u(Ka),Math.sqrt(qa),u(ca),u(Da)))}}}}if(h.types&c.SnappingTypes.VERTEX)for(Y=J?ya.length-E:ya.length,aa=0;aa<Y;aa+=E)W=y,W.coordsIndex=aa,la=(ea.x-W.x)/D,ca=(ea.y-W.y)/F,la=la*la+ca*ca,1>=la&&P.candidates.push(N.makeVertexCandidate(B.getObjectId(wa),
u(W),Math.sqrt(la)))}P.candidates.sort((wa,ya)=>wa.distance-ya.distance);return P};O._getPointCreator=function(h,u,B,E,ea){const D=L.isSome(ea)&&!n.equals(E,ea)?J=>q.project(J,E,ea):J=>J,{hasZ:F}=this,P=h.m;return u&&B?F?({x:J,y,z:K})=>D({x:J,y,z:K,m:P}):({x:J,y})=>D({x:J,y,z:0,m:P}):u?F?({x:J,y,z:K})=>D({x:J,y,z:K}):({x:J,y})=>D({x:J,y,z:0}):B?({x:J,y})=>D({x:J,y,m:P}):({x:J,y})=>D({x:J,y})};O.createSummaryStatisticsResponse=function(){var h=da._asyncToGenerator(function*(u){const {field:B,valueExpression:E,
normalizationField:ea,normalizationType:D,normalizationTotal:F,minValue:P,maxValue:J,scale:y}=u;u=this.fieldsIndex.isDateField(B);var K=yield this._getDataValues({field:B,valueExpression:E,normalizationField:ea,normalizationType:D,normalizationTotal:F,scale:y});const x=m.isNullCountSupported({normalizationType:D,normalizationField:ea,minValue:P,maxValue:J}),Y=this.fieldsIndex.get(B),aa={value:.5,fieldType:Y?.type};K=M.isStringField(Y)?m.calculateStringStatistics({values:K,supportsNullCount:x,percentileParams:aa}):
m.calculateStatistics({values:K,minValue:P,maxValue:J,useSampleStdDev:!D,supportsNullCount:x,percentileParams:aa});return m.processSummaryStatisticsResult(K,u)});return function(u){return h.apply(this,arguments)}}();O.createUniqueValuesResponse=function(){var h=da._asyncToGenerator(function*(u){const {field:B,valueExpression:E,domains:ea,returnAllCodedValues:D,scale:F}=u;var P=yield this._getDataValues({field:B,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,valueExpression:E,scale:F});
P=m.calculateUniqueValuesCount(P);return m.createUVResult(P,ea,D,u.fieldDelimiter)});return function(u){return h.apply(this,arguments)}}();O.createClassBreaksResponse=function(){var h=da._asyncToGenerator(function*(u){const {field:B,valueExpression:E,normalizationField:ea,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:J,minValue:y,maxValue:K,numClasses:x,scale:Y}=u;u=yield this._getDataValues({field:B,valueExpression:E,normalizationField:ea,normalizationType:D,
normalizationTotal:F,scale:Y});u=m.calculateClassBreaks(u,{field:B,normalizationField:ea,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:J,minValue:y,maxValue:K,numClasses:x});return m.resolveCBResult(u,P)});return function(u){return h.apply(this,arguments)}}();O.createHistogramResponse=function(){var h=da._asyncToGenerator(function*(u){const {field:B,valueExpression:E,normalizationField:ea,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:J,
minValue:y,maxValue:K,numBins:x,scale:Y}=u;u=yield this._getDataValues({field:B,valueExpression:E,normalizationField:ea,normalizationType:D,normalizationTotal:F,scale:Y});return m.calculateHistogram(u,{field:B,normalizationField:ea,normalizationType:D,normalizationTotal:F,classificationMethod:P,standardDeviationInterval:J,minValue:y,maxValue:K,numBins:x})});return function(u){return h.apply(this,arguments)}}();O._sortFeatures=function(h,u,B){if(1<h.length&&u&&u.length)for(const E of u.reverse()){u=
E.split(" ");const ea=u[0],D=this.fieldsIndex.get(ea);u=u[1]&&"desc"===u[1].toLowerCase();const F=m.getAttributeComparator(D?.type,u);h.sort((P,J)=>{P=B(P,ea,D);J=B(J,ea,D);return F(P,J)})}};O._createFeatureQueryResponse=function(h){const u=this.items,{geometryType:B,hasM:E,hasZ:ea,objectIdField:D,spatialReference:F}=this,{outFields:P,outSR:J,quantizationParameters:y,resultRecordCount:K,resultOffset:x,returnZ:Y,returnM:aa}=h,W=null!=K?u.length>(x||0)+K:!1,la=P&&(P.includes("*")?[...this.fieldsIndex.fields]:
P.map(ca=>this.fieldsIndex.get(ca)));return{exceededTransferLimit:W,features:this._createFeatures(h,u),fields:la,geometryType:B,hasM:E&&aa,hasZ:ea&&Y,objectIdFieldName:D,spatialReference:R.cleanFromGeometryEngine(J?J:F),transform:y&&t.toQuantizationTransform(y)||null}};O._createFeatures=function(h,u){const B=new p(h,this.featureAdapter,this.fieldsIndex),{hasM:E,hasZ:ea}=this,{orderByFields:D,quantizationParameters:F,returnGeometry:P,returnCentroid:J,maxAllowableOffset:y,resultOffset:K,resultRecordCount:x,
returnZ:Y=!1,returnM:aa=!1}=h,W=ea&&Y,la=E&&aa;h=[];var ca=0;u=[...u];this._sortFeatures(u,D,(ya,Ba,Da)=>B.getFieldValue(ya,Ba,Da));if(P||J){var qa=t.toQuantizationTransform(F);if(P&&!J)for(var wa of u)h[ca++]={attributes:B.getAttributes(wa),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),y,qa,W,la)};else if(!P&&J)for(const ya of u)h[ca++]={attributes:B.getAttributes(ya),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(ya,this),qa)};
else for(const ya of u)h[ca++]={attributes:B.getAttributes(ya),centroid:R.transformCentroid(this,this.featureAdapter.getCentroid(ya,this),qa),geometry:R.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ya),y,qa,W,la)}}else for(qa of u)(wa=B.getAttributes(qa))&&(h[ca++]={attributes:wa});ca=K||0;null!=x&&(h=h.slice(ca,Math.min(h.length,ca+x)));return h};O._createExceedsLimitQueryResponse=function(h){var u=!1;let B=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY;
u=Number.POSITIVE_INFINITY;for(const ea of h.outStatistics)if("exceedslimit"===ea.statisticType){B=null!=ea.maxPointCount?ea.maxPointCount:Number.POSITIVE_INFINITY;E=null!=ea.maxRecordCount?ea.maxRecordCount:Number.POSITIVE_INFINITY;u=null!=ea.maxVertexCount?ea.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)u=this.items.length>B;else if(this.items.length>E)u=!0;else{h=l(this.hasZ,this.hasM);const ea=this.featureAdapter;u=this.items.reduce((D,F)=>{F=ea.getGeometry(F);
return D+(L.isSome(F)&&F.coords.length||0)},0)/h>u}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(u)}}]}};O._createStatisticsQueryResponse=function(){var h=da._asyncToGenerator(function*(u){var B={attributes:{}};const E=[],ea=new Map,D=new Map,F=new Map,P=new Map,J=new p(u,this.featureAdapter,this.fieldsIndex);var y=u.outStatistics;const {groupByFieldsForStatistics:K,
having:x,orderByFields:Y}=u;u=K&&K.length;const aa=!!u,W=aa&&K[0],la=aa&&!this.fieldsIndex.get(W);for(const Ba of y){const {outStatisticFieldName:Da,statisticType:Ka}=Ba;y=Ba;var ca="exceedslimit"!==Ka?Ba.onStatisticField:void 0;const La="percentile_disc"===Ka||"percentile_cont"===Ka,Na="EnvelopeAggregate"===Ka||"CentroidAggregate"===Ka||"ConvexHullAggregate"===Ka,xa=aa&&1===u&&(ca===W||la)&&"count"===Ka;if(aa){if(!F.has(ca)){var qa=[];for(const a of K){var wa=this._getAttributeValues(J,a,ea);qa.push(wa)}F.set(ca,
this._calculateUniqueValues(qa,Na?!1:J.returnDistinctValues))}qa=F.get(ca);for(const a in qa){const {count:f,data:V,items:Z,itemPositions:ja}=qa[a];wa=V.join(",");if(!x||J.validateItems(Z,x)){const v=P.get(wa)||{attributes:{}};if(Na){v.aggregateGeometries||(v.aggregateGeometries={});const {aggregateGeometries:S,outStatisticFieldName:T}=yield this._getAggregateGeometry(y,Z);v.aggregateGeometries[T]=S}else{var ya=null;if(xa)ya=f;else{const S=this._getAttributeValues(J,ca,ea);ya=ja.map(T=>S[T]);ya=La&&
"statisticParameters"in y?this._getPercentileValue(y,ya):this._getStatisticValue(y,ya,null,J.returnDistinctValues)}v.attributes[Da]=ya}let H=0;K.forEach((S,T)=>v.attributes[this.fieldsIndex.get(S)?S:`EXPR_${++H}`]=V[T]);P.set(wa,v)}}}else if(Na){B.aggregateGeometries||(B.aggregateGeometries={});const {aggregateGeometries:a,outStatisticFieldName:f}=yield this._getAggregateGeometry(y,this.items);B.aggregateGeometries[f]=a}else ca=this._getAttributeValues(J,ca,ea),B.attributes[Da]=La&&"statisticParameters"in
y?this._getPercentileValue(y,ca):this._getStatisticValue(y,ca,D,J.returnDistinctValues);E.push({name:Da,alias:Da,type:"esriFieldTypeDouble"})}B=aa?Array.from(P.values()):[B];this._sortFeatures(B,Y,(Ba,Da)=>Ba.attributes[Da]);return{fields:E,features:B}});return function(u){return h.apply(this,arguments)}}();O._getAggregateGeometry=function(){var h=da._asyncToGenerator(function*(u,B){var E=yield new Promise((Y,aa)=>g(["../../../geometry/geometryEngineJSON"],Y,aa));const {statisticType:ea,outStatisticFieldName:D}=
u,{featureAdapter:F,spatialReference:P,geometryType:J,hasZ:y,hasM:K}=this;B=B.map(Y=>R.getGeometry(J,y,K,F.getGeometry(Y)));const x=E.convexHull(P,B,!0)[0];u={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===ea?(E=x?r.getPolygonExtent(x):r.getGeometryExtent(E.union(P,B)),u.aggregateGeometries={...E,spatialReference:P},u.outStatisticFieldName=D||"extent"):"CentroidAggregate"===ea?(E=x?k.polygonCentroid(x):k.extentCentroid(r.getGeometryExtent(E.union(P,B))),u.aggregateGeometries=
{x:E[0],y:E[1],spatialReference:P},u.outStatisticFieldName=D||"centroid"):"ConvexHullAggregate"===ea&&(u.aggregateGeometries=x,u.outStatisticFieldName=D||"convexHull");return u});return function(u,B){return h.apply(this,arguments)}}();O._getStatisticValue=function(h,u,B,E){const {onStatisticField:ea,statisticType:D}=h;h=null;h=B?.has(ea)?B.get(ea):M.isStringField(this.fieldsIndex.get(ea))?m.calculateStringStatistics({values:u,returnDistinct:E}):m.calculateStatistics({values:u,minValue:null,maxValue:null,
useSampleStdDev:!0});B&&B.set(ea,h);return h["var"===D?"variance":D]};O._getPercentileValue=function(h,u){const {onStatisticField:B,statisticParameters:E,statisticType:ea}=h,{value:D,orderBy:F}=E;h=this.fieldsIndex.get(B);return m.calculatePercentile(u,{value:D,orderBy:F,fieldType:h?.type,isDiscrete:"percentile_disc"===ea})};O._getAttributeValues=function(h,u,B){if(B.has(u))return B.get(u);const E=this.fieldsIndex.get(u),ea=this.items.map(D=>h.getFieldValue(D,u,E));B.set(u,ea);return ea};O._getAttributeDataValues=
function(h,u){return this.items.map(B=>h.getDataValue(B,{field:u.field,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,normalizationField:u.normalizationField,normalizationType:u.normalizationType,normalizationTotal:u.normalizationTotal}))};O._getAttributeExpressionValues=function(){var h=da._asyncToGenerator(function*(u,B,E){const {arcadeUtils:ea}=yield I.loadArcade();B=ea.createFunction(B);E=E&&ea.getViewInfo(E);return u.getExpressionValues(this.items,B,E,ea)});return function(u,
B,E){return h.apply(this,arguments)}}();O._calculateUniqueValues=function(h,u){const B={},E=this.items,ea=E.length;for(let D=0;D<ea;D++){const F=E[D],P=[];for(const y of h)P.push(y[D]);const J=P.join(",");u?null==B[J]&&(B[J]={count:1,data:P,items:[F],itemPositions:[D]}):null==B[J]?B[J]={count:1,data:P,items:[F],itemPositions:[D]}:(B[J].count++,B[J].items.push(F),B[J].itemPositions.push(D))}return B};O._getDataValues=function(){var h=da._asyncToGenerator(function*(u){const B=new p(this.query,this.featureAdapter,
this.fieldsIndex),{valueExpression:E,field:ea,normalizationField:D,normalizationType:F,normalizationTotal:P,scale:J}=u,y=E?{viewingMode:"map",scale:J,spatialReference:this.query.outSR||this.spatialReference}:null;return E?this._getAttributeExpressionValues(B,E,y):this._getAttributeDataValues(B,{field:ea,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,normalizationField:D,normalizationType:F,normalizationTotal:P})});return function(u){return h.apply(this,arguments)}}();da._createClass(A,
[{key:"size",get:function(){return this.items.length}}]);return A}();c.SnappingTypes=void 0;(function(A){A[A.NONE=0]="NONE";A[A.EDGE=1]="EDGE";A[A.VERTEX=2]="VERTEX"})(c.SnappingTypes||(c.SnappingTypes={}));let z=function(){function A(O,h){this.coords=O;this.coordsIndex=h}da._createClass(A,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return A}();c.QueryEngineResult=
G;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(g,c,da){function L({scale:D,translate:F},P){return Math.round((P-F[0])/D[0])}function k({scale:D,translate:F},P){return Math.round((F[1]-P)/D[1])}function r(D,F,P){const J=[];let y,K,x,Y;for(let aa=0;aa<P.length;aa++){const W=P[aa];if(0<aa){if(x=L(D,W[0]),Y=k(D,W[1]),x!==y||Y!==K)J.push(F(W,x-
y,Y-K)),y=x,K=Y}else y=L(D,W[0]),K=k(D,W[1]),J.push(F(W,y,K))}return 0<J.length?J:null}function t(D,F,P,J){return r(D,P?J?ea:E:J?E:B,F)}function n(D,F,P,J){const y=[];P=P?J?ea:E:J?E:B;for(J=0;J<F.length;J++){const K=r(D,P,F[J]);K&&3<=K.length&&y.push(K)}return y.length?y:null}function p(D,F,P,J){const y=[];P=P?J?ea:E:J?E:B;for(J=0;J<F.length;J++){const K=r(D,P,F[J]);K&&2<=K.length&&y.push(K)}return y.length?y:null}function q({scale:D,translate:F},P){return P*D[0]+F[0]}function N({scale:D,translate:F},
P){return F[1]-P*D[1]}function R(D,F,P){const J=Array(P.length);if(!P.length)return J;const [y,K]=D.scale;let x=q(D,P[0][0]);D=N(D,P[0][1]);J[0]=F(P[0],x,D);for(let Y=1;Y<P.length;Y++){const aa=P[Y];x+=aa[0]*y;D-=aa[1]*K;J[Y]=F(aa,x,D)}return J}function M(D,F,P){const J=Array(P.length);for(let y=0;y<P.length;y++)J[y]=R(D,F,P[y]);return J}function m(D,F,P,J){return R(D,P?J?ea:E:J?E:B,F)}function I(D,F,P,J){return M(D,P?J?ea:E:J?E:B,F)}function d(D,F,P,J){return M(D,P?J?ea:E:J?E:B,F)}function l(D,F,
P){let [J,y]=P[0],K=Math.min(J,F[0]),x=Math.min(y,F[1]),Y=Math.max(J,F[2]);F=Math.max(y,F[3]);for(let aa=1;aa<P.length;aa++){const [W,la]=P[aa];J+=W;y+=la;0>W&&(K=Math.min(K,J));0<W&&(Y=Math.max(Y,J));0>la?x=Math.min(x,y):0<la&&(F=Math.max(F,y))}D[0]=K;D[1]=x;D[2]=Y;D[3]=F;return D}function G(D,F){if(!F.length)return null;D[0]=D[1]=Number.POSITIVE_INFINITY;D[2]=D[3]=Number.NEGATIVE_INFINITY;for(let P=0;P<F.length;P++)l(D,D,F[P]);return D}function z(D,F,P,J,y){F.xmin=L(D,P.xmin);F.ymin=k(D,P.ymin);
F.xmax=L(D,P.xmax);F.ymax=k(D,P.ymax);F!==P&&(J&&(F.zmin=P.zmin,F.zmax=P.zmax),y&&(F.mmin=P.mmin,F.mmax=P.mmax));return F}function A(D,F,P,J,y){F.points=t(D,P.points,J,y)??[];return F}function O(D,F,P,J,y){F.x=L(D,P.x);F.y=k(D,P.y);F!==P&&(J&&(F.z=P.z),y&&(F.m=P.m));return F}function h(D,F,P,J,y){D=n(D,P.rings,J,y);if(!D)return null;F.rings=D;return F}function u(D,F,P,J,y){D=p(D,P.paths,J,y);if(!D)return null;F.paths=D;return F}const B=(D,F,P)=>[F,P],E=(D,F,P)=>[F,P,D[2]],ea=(D,F,P)=>[F,P,D[2],D[3]];
g.equals=function(D,F){if(D===F||null==D&&null==F)return!0;if(null==D||null==F)return!1;let P,J,y,K;D&&"upperLeft"===D.originPosition?(P=D.translate[0],J=D.translate[1],D=D.scale[0]):(P=c.isSome(D.extent)?D.extent.xmin:0,J=c.isSome(D.extent)?D.extent.ymax:0,D=D.tolerance);F&&"upperLeft"===F.originPosition?(y=F.translate[0],K=F.translate[1],F=F.scale[0]):(y=c.isSome(F.extent)?F.extent.xmin:0,K=c.isSome(F.extent)?F.extent.ymax:0,F=F.tolerance);return P===y&&J===K&&D===F};g.getQuantizedBoundsCoordsArray=
l;g.getQuantizedBoundsCoordsArrayArray=G;g.getQuantizedBoundsPaths=function(D){return G([0,0,0,0],D)};g.getQuantizedBoundsPoints=function(D){const F=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(F,F,D)};g.getQuantizedBoundsRings=function(D){return G([0,0,0,0],D)};g.quantizeBounds=function(D,F,P){F[0]=L(D,P[0]);F[3]=k(D,P[1]);F[2]=L(D,P[2]);F[1]=k(D,P[3]);return F};g.quantizeExtent=z;g.quantizeGeometry=function(D,F){return D&&F?da.isPoint(F)?
O(D,{},F,!1,!1):da.isPolyline(F)?u(D,{},F,!1,!1):da.isPolygon(F)?h(D,{},F,!1,!1):da.isMultipoint(F)?A(D,{},F,!1,!1):da.isExtent(F)?z(D,{},F,!1,!1):null:null};g.quantizeMultipoint=A;g.quantizePaths=p;g.quantizePoint=O;g.quantizePoints=t;g.quantizePolygon=h;g.quantizePolyline=u;g.quantizeRings=n;g.quantizeX=L;g.quantizeY=k;g.toQuantizationTransform=function(D){return D?{originPosition:"upper-left"===D.originPosition?"upperLeft":"lower-left"===D.originPosition?"lowerLeft":D.originPosition,scale:D.tolerance?
[D.tolerance,D.tolerance]:[1,1],translate:c.isSome(D.extent)?[D.extent.xmin,D.extent.ymax]:[0,0]}:null};g.unquantizeBounds=function(D,F,P){return P?(F[0]=q(D,P[0]),F[1]=N(D,P[3]),F[2]=q(D,P[2]),F[3]=N(D,P[1]),F):[q(D,F[0]),N(D,F[3]),q(D,F[2]),N(D,F[1])]};g.unquantizeCoordsArray=R;g.unquantizeCoordsArrayArray=M;g.unquantizeExtent=function(D,F,P,J,y){F.xmin=q(D,P.xmin);F.ymin=N(D,P.ymin);F.xmax=q(D,P.xmax);F.ymax=N(D,P.ymax);F!==P&&(J&&(F.zmin=P.zmin,F.zmax=P.zmax),y&&(F.mmin=P.mmin,F.mmax=P.mmax));
return F};g.unquantizeMultipoint=function(D,F,P,J,y){c.isSome(P)&&(F.points=m(D,P.points,J,y));return F};g.unquantizePaths=I;g.unquantizePoint=function(D,F,P,J,y){if(c.isNone(P))return F;F.x=q(D,P.x);F.y=N(D,P.y);F!==P&&(J&&(F.z=P.z),y&&(F.m=P.m));return F};g.unquantizePoints=m;g.unquantizePolygon=function(D,F,P,J,y){c.isSome(P)&&(F.rings=d(D,P.rings,J,y));return F};g.unquantizePolyline=function(D,F,P,J,y){c.isSome(P)&&(F.paths=I(D,P.paths,J,y));return F};g.unquantizeRings=d;g.unquantizeX=q;g.unquantizeY=
N;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport","../../../statistics/utils"],function(g,c,da){return function(){function L(r,t,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=r.returnDistinctValues??!1;this.fieldsIndex=n;this.featureAdapter=t;if((t=r.outFields)&&!t.includes("*")){this.outFields=t;r=0;for(const q of t){var p=
c.getExpressionFromFieldName(q);p=(t=this.fieldsIndex.get(p))?null:c.getWhereClause(p,n);t=t?t.name:c.getAliasFromFieldName(q)||`FIELD_EXP_${r++}`;this._fieldDataCache.set(q,{alias:t,clause:p})}}}var k=L.prototype;k.countDistinctValues=function(r){if(!this.returnDistinctValues)return r.length;r.forEach(t=>this.getAttributes(t));return this._returnDistinctMap.size};k.getAttributes=function(r){r=this._processAttributesForOutFields(r);return this._processAttributesForDistinctValues(r)};k.getFieldValue=
function(r,t,n){const p=n?n.name:t;let q=null;this._fieldDataCache.has(p)?q=this._fieldDataCache.get(p).clause:n||(q=c.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(p,{alias:p,clause:q}));return n?this.featureAdapter.getAttribute(r,p):q.calculateValue(r,this.featureAdapter)};k.getDataValue=function(r,t){const n=t.normalizationType,p=t.normalizationTotal;let q=this.getFieldValue(r,t.field,this.fieldsIndex.get(t.field));t.field2&&(q=`${da.processNullValue(q)}${t.fieldDelimiter}${da.processNullValue(this.getFieldValue(r,
t.field2,this.fieldsIndex.get(t.field2)))}`,t.field3&&(q=`${q}${t.fieldDelimiter}${da.processNullValue(this.getFieldValue(r,t.field3,this.fieldsIndex.get(t.field3)))}`));n&&Number.isFinite(q)&&(r="field"===n&&t.normalizationField?this.getFieldValue(r,t.normalizationField,this.fieldsIndex.get(t.normalizationField)):null,q=da.getNormalizedValue(q,n,r,p));return q};k.getExpressionValue=function(r,t,n,p){r={attributes:this.featureAdapter.getAttributes(r),layer:{fields:this.fieldsIndex.fields}};n=p.createExecContext(r,
n);return p.executeFunction(t,n)};k.getExpressionValues=function(r,t,n,p){const q={fields:this.fieldsIndex.fields};return r.map(N=>{N={attributes:this.featureAdapter.getAttributes(N),layer:q};N=p.createExecContext(N,n);return p.executeFunction(t,N)})};k.validateItem=function(r,t){this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:c.getWhereClause(t,this.fieldsIndex)});return this._fieldDataCache.get(t).clause.testFeature(r,this.featureAdapter)};k.validateItems=function(r,t){this._fieldDataCache.has(t)||
this._fieldDataCache.set(t,{alias:t,clause:c.getWhereClause(t,this.fieldsIndex)});return this._fieldDataCache.get(t).clause.testSet(r,this.featureAdapter)};k._processAttributesForOutFields=function(r){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(r);const n={};for(const p of t){const {alias:q,clause:N}=this._fieldDataCache.get(p);n[q]=N?N.calculateValue(r,this.featureAdapter):this.featureAdapter.getAttribute(r,q)}return n};k._processAttributesForDistinctValues=function(r){if(g.isNone(r)||
!this.returnDistinctValues)return r;var t=this.outFields,n=[];if(t)for(const q of t){var {alias:p}=this._fieldDataCache.get(q);n.push(r[p])}else for(p in r)n.push(r[p]);t=`${(t||["*"]).join(",")}=${n.join(",")}`;n=this._returnDistinctMap.get(t)||0;this._returnDistinctMap.set(t,++n);return 1<n?null:r};return L}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(g,c,da){function L(h){return null==h||"string"===
typeof h&&!h?"\x3cNull\x3e":h}function k(h){const u=null!=h.minValue||null!=h.maxValue,B=!!h.sqlExpression&&h.supportsSQLExpression;return!(null!=h.normalizationField||null!=h.normalizationType)&&!u&&!B}function r(h){const {values:u,useSampleStdDev:B,supportsNullCount:E}=h;var ea=Number.POSITIVE_INFINITY;let D=Number.NEGATIVE_INFINITY,F=null,P=null;var J=null;let y=null,K=0;const x=null==h.minValue?-Infinity:h.minValue,Y=null==h.maxValue?Infinity:h.maxValue;for(const aa of u)Number.isFinite(aa)?aa>=
x&&aa<=Y&&(F+=aa,ea=Math.min(ea,aa),D=Math.max(D,aa),K++):"string"===typeof aa&&K++;if(K&&null!=F){P=F/K;J=0;for(const aa of u)Number.isFinite(aa)&&aa>=x&&aa<=Y&&(J+=(aa-P)**2);y=B?1<K?J/(K-1):0:0<K?J/K:0;J=Math.sqrt(y)}else D=ea=null;ea={avg:P,count:K,max:D,min:ea,stddev:J,sum:F,variance:y};E&&(ea.nullcount=u.length-K);h.percentileParams&&(ea.median=t(u,h.percentileParams));return ea}function t(h,u){const {fieldType:B,value:E,orderBy:ea,isDiscrete:D}=u,F=n(B,"desc"===ea);h=[...h].filter(K=>null!=
K).sort((K,x)=>F(K,x));if(0===h.length)return null;if(0>=E)return h[0];if(1<=E)return h[h.length-1];var P=(h.length-1)*E,J=Math.floor(P);u=J+1;P%=1;J=h[J];const y=h[u];return u>=h.length||D||"string"===typeof J||"string"===typeof y?J:J*(1-P)+y*P}function n(h,u){const B=u?1:-1,E=q(u),ea=p(u);if(!h||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...A].includes(h))return(D,F)=>"number"===typeof D&&"number"===typeof F?E(D,F):"string"===typeof D&&"string"===typeof F?
ea(D,F):B;if("esriFieldTypeDate"===h)return(D,F)=>{D=(new Date(D)).getTime();F=(new Date(F)).getTime();return isNaN(D)||isNaN(F)?B:E(D,F)};if(A.has(h))return(D,F)=>E(D,F);if("esriFieldTypeString"===h)return(D,F)=>ea(D,F);if("esriFieldTypeGUID"===h||"esriFieldTypeGlobalID"===h){const D=p(u);return(F,P)=>D(N(F),N(P))}return u?(D,F)=>1:(D,F)=>-1}function p(h){return h?(u,B)=>{u=u?.toUpperCase();B=B?.toUpperCase();return u>B?-1:u<B?1:0}:(u,B)=>{u=u?.toUpperCase();B=B?.toUpperCase();return u<B?-1:u>B?
1:0}}function q(h){return h?(u,B)=>B-u:(u,B)=>u-B}function N(h){return h.substr(24,12)+h.substr(19,4)+h.substr(16,2)+h.substr(14,2)+h.substr(11,2)+h.substr(9,2)+h.substr(6,2)+h.substr(4,2)+h.substr(2,2)+h.substr(0,2)}function R(h){return"coded-value"!==h?.type?[]:h.codedValues.map(u=>u.code)}function M(h,u){const B=I({field:u.field,normalizationType:u.normalizationType,normalizationField:u.normalizationField,classificationMethod:u.classificationMethod,standardDeviationInterval:u.standardDeviationInterval,
breakCount:u.numClasses||5});h=m(h,u.minValue,u.maxValue);return da.createGenerateRendererClassBreaks({definition:B,values:h,normalizationTotal:u.normalizationTotal})}function m(h,u,B){u=null==u?-Infinity:u;B=null==B?Infinity:B;return h.filter(E=>Number.isFinite(E)&&E>=u&&E<=B)}function I(h){const u=h.field,B=h.classificationMethod||"equal-interval",E=h.normalizationType,ea=h.normalizationField,D=new c;D.classificationField=u;D.breakCount=h.breakCount;D.classificationMethod=B;D.standardDeviationInterval=
"standard-deviation"===B?h.standardDeviationInterval||1:void 0;D.normalizationType=E;D.normalizationField="field"===E?ea:void 0;return D}function d(h,u){const {field:B,classificationMethod:E,standardDeviationInterval:ea,normalizationType:D,normalizationField:F,normalizationTotal:P,minValue:J,maxValue:y}=u,K=u.numBins||10;let x=u=null,Y=null;E&&"equal-interval"!==E||D?({classBreaks:h}=M(h,{field:B,normalizationType:D,normalizationField:F,normalizationTotal:P,classificationMethod:E,standardDeviationInterval:ea,
minValue:J,maxValue:y,numClasses:K}),u=h[0].minValue,x=h[h.length-1].maxValue,Y=h.map(aa=>[aa.minValue,aa.maxValue])):(null!=J&&null!=y?(u=J,x=y):(h=r({values:h,minValue:J,maxValue:y,useSampleStdDev:!D,supportsNullCount:k({normalizationType:D,normalizationField:F,minValue:J,maxValue:y})}),u=h.min,x=h.max),Y=G(u,x,K));return{min:u,max:x,intervals:Y}}function l(h,u){let B=-1;for(let E=h.length-1;0<=E;E--)if(u>=h[E][0]){B=E;break}return B}function G(h,u,B){const E=(u-h)/B,ea=[];let D;for(let F=1;F<=
B;F++)D=h+E,D=Number(D.toFixed(16)),ea.push([h,F===B?u:D]),h=D;return ea}const z=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,A=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),O="min max avg stddev count sum variance nullcount median".split(" ");g.calculateClassBreaks=M;g.calculateHistogram=function(h,u){const {min:B,max:E,intervals:ea}=d(h,u),D=ea.map((F,P)=>({minValue:ea[P][0],maxValue:ea[P][1],count:0}));for(const F of h)null!=F&&F>=B&&F<=E&&
(h=l(ea,F),-1<h&&D[h].count++);return{bins:D,minValue:B,maxValue:E,normalizationTotal:u.normalizationTotal}};g.calculatePercentile=t;g.calculateStatistics=r;g.calculateStringStatistics=function(h){const u=h.returnDistinct?[...(new Set(h.values))]:h.values,B=u.filter(ea=>null!=ea).length,E={count:B};h.supportsNullCount&&(E.nullcount=u.length-B);h.percentileParams&&(E.median=t(u,h.percentileParams));return E};g.calculateUniqueValuesCount=function(h){const u={};for(let B of h){if(null==B||"string"===
typeof B&&""===B.trim())B=null;null==u[B]?u[B]={count:1,data:B}:u[B].count++}return{count:u}};g.createClassBreaksDefinition=I;g.createUVResult=function(h,u,B,E){h=h.count;const ea=[];if(B&&u){B=[];var D=R(u[0]);for(const F of D)if(u[1]){D=R(u[1]);for(const P of D)if(u[2]){D=R(u[2]);for(const J of D)B.push(`${L(F)}${E}${L(P)}${E}${L(J)}`)}else B.push(`${L(F)}${E}${L(P)}`)}else B.push(F);for(const F of B)h.hasOwnProperty(F)||(h[F]={data:F,count:0})}for(const F in h)u=h[F],ea.push({value:u.data,count:u.count,
label:u.label});return{uniqueValueInfos:ea}};g.getAttributeComparator=n;g.getEqualIntervalBins=G;g.getNormalizedValue=function(h,u,B,E){let ea=null;switch(u){case "log":0!==h&&(ea=Math.log(h)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(E)&&0!==E&&(ea=h/E*100);break;case "field":Number.isFinite(B)&&0!==B&&(ea=h/B);break;case "natural-log":0<h&&(ea=Math.log(h));break;case "square-root":0<h&&(ea=h**.5)}return ea};g.isNullCountSupported=k;g.processNullValue=L;g.processSummaryStatisticsResult=
function(h,u){let B;for(B in h)O.includes(B)&&(Number.isFinite(h[B])||(h[B]=null));if(!u)return h;["avg","stddev","variance"].forEach(E=>{null!=h[E]&&(h[E]=Math.ceil(h[E]))});return h};g.resolveCBResult=function(h,u){let B=h.classBreaks;const E=B[0].minValue,ea=B[B.length-1].maxValue,D="standard-deviation"===u;B=B.map(F=>{const P=F.label;F={minValue:F.minValue,maxValue:F.maxValue,label:P};if(D&&P){const J=P.match(z).map(y=>+y.trim());2===J.length?(F.minStdDev=J[0],F.maxStdDev=J[1],0>J[0]&&0<J[1]&&
(F.hasAvg=!0)):1===J.length&&(P.includes("\x3c")?(F.minStdDev=null,F.maxStdDev=J[0]):P.includes("\x3e")&&(F.minStdDev=J[0],F.maxStdDev=null))}return F});return{minValue:E,maxValue:ea,classBreakInfos:B,normalizationTotal:h.normalizationTotal}};g.statisticTypes=O;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(g,c,da,L,k,r,t,n){k=new da.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});da=new da.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});n=function(p){function q(){var N=p.apply(this,arguments)||this;N.breakCount=null;N.classificationField=
null;N.classificationMethod=null;N.normalizationField=null;N.normalizationType=null;N.type="class-breaks-definition";return N}g._inheritsLoose(q,p);g._createClass(q,[{key:"standardDeviationInterval",set:function(N){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",N)}},{key:"definedInterval",set:function(N){"defined-interval"===this.classificationMethod&&this._set("definedInterval",N)}}]);return q}(n);c.__decorate([L.property({json:{write:!0}})],n.prototype,"breakCount",
void 0);c.__decorate([L.property({json:{write:!0}})],n.prototype,"classificationField",void 0);c.__decorate([L.property({type:String,json:{read:k.read,write:k.write}})],n.prototype,"classificationMethod",void 0);c.__decorate([L.property({json:{write:!0}})],n.prototype,"normalizationField",void 0);c.__decorate([L.property({json:{read:da.read,write:da.write}})],n.prototype,"normalizationType",void 0);c.__decorate([L.property({value:null,json:{write:!0}})],n.prototype,"standardDeviationInterval",null);
c.__decorate([L.property({value:null,json:{write:!0}})],n.prototype,"definedInterval",null);c.__decorate([L.property()],n.prototype,"type",void 0);return n=c.__decorate([t.subclass("esri.rest.support.ClassBreaksDefinition")],n)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(g,c,da,L,k,r,t,n,p,q){da=new da.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});L=function(N){function R(){var M=N.apply(this,arguments)||this;M.baseSymbol=null;M.colorRamp=null;M.type=null;return M}g._inheritsLoose(R,N);return R}(L.JSONSupport);c.__decorate([k.property({type:q,json:{write:!0}})],L.prototype,"baseSymbol",void 0);c.__decorate([k.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],L.prototype,"colorRamp",void 0);
c.__decorate([k.property({json:{read:da.read,write:da.write}})],L.prototype,"type",void 0);return L=c.__decorate([n.subclass("esri.rest.support.ClassificationDefinition")],L)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(g,c,da,L){da={key:"type",base:da,typeMap:{algorithmic:c,multipart:L}};g.fromJSON=function(k){return k&&k.type?"algorithmic"===k.type?c.fromJSON(k):"multipart"===k.type?L.fromJSON(k):null:null};
g.types=da;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(g,c,da,L,k,r,t,n,p){var q;p=q=function(N){function R(M){M=
N.call(this,M)||this;M.algorithm=null;M.fromColor=null;M.toColor=null;M.type="algorithmic";return M}g._inheritsLoose(R,N);R.prototype.clone=function(){return new q({fromColor:L.clone(this.fromColor),toColor:L.clone(this.toColor),algorithm:this.algorithm})};return R}(p);c.__decorate([t.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0);c.__decorate([k.property({type:da,json:{type:[r.Integer],write:!0}})],p.prototype,"fromColor",
void 0);c.__decorate([k.property({type:da,json:{type:[r.Integer],write:!0}})],p.prototype,"toColor",void 0);c.__decorate([k.property({type:["algorithmic"]})],p.prototype,"type",void 0);return p=q=c.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(g,c,da){g.enumeration=function(L,k={}){L=L instanceof c.JSONMap?L:new c.JSONMap(L,k);L={type:k?.ignoreUnknown??!0?
L.apiValues:String,json:{type:L.jsonValues,read:k?.readOnly?!1:{reader:L.read},write:{writer:L.write}}};void 0!==k?.readOnly&&(L.readOnly=!!k.readOnly);void 0!==k?.default&&(L.json.default=k.default);void 0!==k?.name&&(L.json.name=k.name);return da.property(L)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,da,L,k,r,t){da=function(n){function p(q){q=n.call(this,q)||this;q.type=null;return q}g._inheritsLoose(p,n);return p}(da.JSONSupport);c.__decorate([L.property({readOnly:!0,json:{read:!1,write:!0}})],da.prototype,"type",void 0);return da=c.__decorate([t.subclass("esri.rest.support.ColorRamp")],da)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(g,c,da,L,k,r,t,n){var p;k=p=function(q){function N(R){R=q.call(this,R)||this;R.colorRamps=null;R.type="multipart";return R}g._inheritsLoose(N,q);N.prototype.clone=function(){return new p({colorRamps:da.clone(this.colorRamps)})};return N}(n);c.__decorate([L.property({type:[t],json:{write:!0}})],k.prototype,"colorRamps",void 0);c.__decorate([L.property({type:["multipart"]})],k.prototype,"type",void 0);return k=p=c.__decorate([r.subclass("esri.rest.support.MultipartColorRamp")],k)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,da,L,k,r,t,n,p,q){L=new L.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let N=0;k=function(R){function M(I){I=R.call(this,I)||this;I.id=`sym${N++}`;I.type=null;I.color=new da([0,0,0,1]);
return I}g._inheritsLoose(M,R);var m=M.prototype;m.readColor=function(I){return I&&null!=I[0]?[I[0],I[1],I[2],I[3]/255]:I};m.collectRequiredFields=function(){var I=g._asyncToGenerator(function*(d,l){});return function(d,l){return I.apply(this,arguments)}}();m.hash=function(){return JSON.stringify(this.toJSON())};m.clone=function(){};return M}(k.JSONSupport);c.__decorate([r.property({type:L.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:L.write}}})],k.prototype,"type",void 0);c.__decorate([r.property({type:da,
json:{write:{allowNull:!0}}})],k.prototype,"color",void 0);c.__decorate([p.reader("color")],k.prototype,"readColor",null);return k=c.__decorate([q.subclass("esri.symbols.Symbol")],k)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(g,c){function da(M){const {classificationMethod:m,breakCount:I,normalizationType:d,definedInterval:l}=M.definition,G=[];var z=M.values;if(0===z.length)return[];z=z.sort((E,ea)=>E-ea);var A=z[0],O=z[z.length-1];if("equal-interval"===
m)if(z.length>=I){z=(O-A)/I;M=A;for(var h=1;h<I;h++){var u=Number((A+h*z).toFixed(6));G.push({minValue:M,maxValue:u,label:L(M,u,d)});M=u}G.push({minValue:M,maxValue:O,label:L(M,O,d)})}else z.forEach(E=>{G.push({minValue:E,maxValue:E,label:L(E,E,d)})});else if("natural-breaks"===m){z=k(z);M=r(z.uniqueValues,M.valueFrequency||z.valueFrequency,I);for(h=1;h<I;h++)z.uniqueValues.length>h&&(u=Number(z.uniqueValues[M[h]].toFixed(6)),G.push({minValue:A,maxValue:u,label:L(A,u,d)}),A=u);G.push({minValue:A,
maxValue:O,label:L(A,O,d)})}else if("quantile"===m)if(z.length>=I&&A!==O){M=Math.ceil(z.length/I);h=0;for(u=1;u<I;u++){var B=M+h-1;B>z.length&&(B=z.length-1);0>B&&(B=0);G.push({minValue:A,maxValue:z[B],label:L(A,z[B],d)});A=z[B];h+=M;M=Math.ceil((z.length-h)/(I-u))}G.push({minValue:A,maxValue:O,label:L(A,O,d)})}else for(O=-1,A=0;A<z.length;A++)M=z[A],M!==O&&(O=M,G.push({minValue:O,maxValue:M,label:L(O,M,d)}),O=M);else if("standard-deviation"===m)if(M=p(z),h=q(z,M),0===h)G.push({minValue:z[0],maxValue:z[0],
label:L(z[0],z[0],d)});else{z=n(A,O,I,M,h)*h;h=0;for(u=I;1<=u;u--)B=Number((M-(u-.5)*z).toFixed(6)),G.push({minValue:A,maxValue:B,label:L(A,B,d)}),A=B,h++;u=Number((M+.5*z).toFixed(6));G.push({minValue:A,maxValue:u,label:L(A,u,d)});A=u;h++;for(B=1;B<=I;B++)u=h===2*I?O:Number((M+(B+.5)*z).toFixed(6)),G.push({minValue:A,maxValue:u,label:L(A,u,d)}),A=u,h++}else if("defined-interval"===m){if(!l)return G;O=z[0];z=z[z.length-1];A=Math.ceil((z-O)/l);M=O;for(h=1;h<A;h++)u=Number((O+h*l).toFixed(6)),G.push({minValue:M,
maxValue:u,label:L(M,u,d)}),M=u;G.push({minValue:M,maxValue:z,label:L(M,z,d)})}return G}function L(M,m,I){let d=null;return d=M===m?I&&"percent-of-total"===I?M+"%":M.toString():I&&"percent-of-total"===I?M+"% - "+m+"%":M+" - "+m}function k(M){const m=[],I=[];let d=Number.MIN_VALUE,l=1,G=-1;for(let z=0;z<M.length;z++){const A=M[z];A===d?(l++,I[G]=l):null!==A&&(m.push(A),d=A,l=1,I.push(l),G++)}return{uniqueValues:m,valueFrequency:I}}function r(M,m,I){var d=M.length;const l=[];I>d&&(I=d);for(var G=0;G<
I;G++)l.push(Math.round(G*d/I-1));l.push(d-1);G=t(l,M,m,I);d=G.mean;G=G.sdcm;var z=I,A=0,O=0;let h=0,u=0,B=!0;for(let ea=0;2>ea&&B;ea++){0===ea&&(B=!1);for(var E=0;E<z-1;E++)for(;l[E+1]+1!==l[E+2];)if(l[E+1]+=1,A=N(E,l,M,m),h=A.sbMean,A=A.sbSdcm,O=N(E+1,l,M,m),u=O.sbMean,O=O.sbSdcm,A+O<G[E]+G[E+1])G[E]=A,G[E+1]=O,d[E]=h,d[E+1]=u,B=!0;else{--l[E+1];break}for(E=z-1;0<E;E--)for(;l[E]!==l[E-1]+1;)if(--l[E],A=N(E-1,l,M,m),h=A.sbMean,A=A.sbSdcm,O=N(E,l,M,m),u=O.sbMean,O=O.sbSdcm,A+O<G[E-1]+G[E])G[E-1]=
A,G[E]=O,d[E-1]=h,d[E]=u,B=!0;else{l[E]+=1;break}}B&&(G=t(l,M,m,I));return l}function t(M,m,I,d){let l=[];var G=[],z=[];let A=0;const O=[],h=[];for(var u=0;u<d;u++){var B=N(u,M,m,I);O.push(B.sbMean);h.push(B.sbSdcm);A+=h[u]}B=A;for(u=!0;u||A<B;){u=!1;l=[];for(G=0;G<d;G++)l.push(M[G]);for(z=0;z<d;z++)for(B=M[z]+1;B<=M[z+1];B++)if(G=m[B],0<z&&B!==M[z+1]&&Math.abs(G-O[z])>Math.abs(G-O[z-1]))M[z]=B;else if(z<d-1&&M[z]!==B-1&&Math.abs(G-O[z])>Math.abs(G-O[z+1])){M[z+1]=B-1;break}B=A;A=0;G=[];z=[];for(let E=
0;E<d;E++){G.push(O[E]);z.push(h[E]);const ea=N(E,M,m,I);O[E]=ea.sbMean;h[E]=ea.sbSdcm;A+=h[E]}}if(A>B){for(m=0;m<d;m++)M[m]=l[m],O[m]=G[m],h[m]=z[m];A=B}return{mean:O,sdcm:h}}function n(M,m,I,d,l){M=Math.max(d-M,m-d)/l/I;return 1<=M?1:.5<=M?.5:.25}function p(M){let m=0;for(let I=0;I<M.length;I++)m+=M[I];return m/=M.length}function q(M,m){let I=0;for(let d=0;d<M.length;d++){const l=M[d];I+=(l-m)*(l-m)}I/=M.length;return Math.sqrt(I)}function N(M,m,I,d){var l=0,G=0;for(var z=m[M]+1;z<=m[M+1];z++){const A=
d[z];l+=I[z]*A;G+=A}0>=G&&R.warn("Exception in Natural Breaks calculation");l/=G;G=0;for(z=m[M]+1;z<=m[M+1];z++)G+=d[z]*(I[z]-l)**2;return{sbMean:l,sbSdcm:G}}const R=c.getLogger("esri.rest.support.generateRendererUtils");g.createGenerateRendererClassBreaks=function(M){const {normalizationTotal:m}=M;return{classBreaks:da(M),normalizationTotal:m}};g.createGenerateRendererUniqueValues=function(M){M=k(M);const m=[],I=M.uniqueValues.length;for(let d=0;d<I;d++){const l=M.uniqueValues[d];m.push({value:l,
count:M.valueFrequency[d],label:l.toString()})}return{uniqueValues:m}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(g){g.makeEdgeCandidate=function(c,da,L,k,r,t=!1){return{objectId:c,target:da,distance:L,type:"edge",start:k,end:r,draped:t}};g.makeVertexCandidate=function(c,da,L){return{objectId:c,target:da,distance:L,type:"vertex"}};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(g,
c,da,L,k,r,t,n,p,q,N,R,M,m){function I(){I=da._asyncToGenerator(function*(J,y,K){const {outFields:x,orderByFields:Y,groupByFieldsForStatistics:aa,outStatistics:W}=J;if(x)for(var la=0;la<x.length;la++)x[la]=x[la].trim();if(Y)for(la=0;la<Y.length;la++)Y[la]=Y[la].trim();if(aa)for(la=0;la<aa.length;la++)aa[la]=aa[la].trim();if(W)for(la=0;la<W.length;la++)W[la].onStatisticField&&(W[la].onStatisticField=W[la].onStatisticField.trim());J.geometry&&!J.outSR&&(J.outSR=J.geometry.spatialReference);return d(J,
y,K)});return I.apply(this,arguments)}function d(J,y,K){return l.apply(this,arguments)}function l(){l=da._asyncToGenerator(function*(J,y,K){if(!J)return null;var {where:x}=J;J.where=x=x&&x.trim();if(!x||/^1 *= *1$/.test(x)||y&&y===x)J.where=null;if(!J.geometry)return J;y=yield z(J);J.distance=0;J.units=null;"esriSpatialRelEnvelopeIntersects"===J.spatialRel&&({spatialReference:x}=J.geometry,y=n.getGeometryExtent(y),y.spatialReference=x);if(y){yield m.checkProjectionSupport(y.spatialReference,K);x=
y.spatialReference;y=G(y,K)&&p.isExtent(y)?{spatialReference:x,rings:[[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]}:y;x=(yield q.normalizeCentralMeridian(p.fromJSON(y)))[0];if(k.isNone(x))throw B;const Y="quantizationParameters"in J&&J.quantizationParameters?.tolerance||"maxAllowableOffset"in J&&J.maxAllowableOffset||0;y=Y&&G(y,K)?{densificationStep:8*Y}:void 0;x=x.toJSON();y=yield m.project(x,x.spatialReference,K,y);if(!y)throw B;y.spatialReference=K;J.geometry=
y}return J});return l.apply(this,arguments)}function G(J,y){if(!J)return!1;const K=J.spatialReference;return(p.isExtent(J)||p.isPolygon(J)||p.isPolyline(J))&&!N.equals(K,y)&&!t.canProjectWithoutEngine(K,y)}function z(J){return A.apply(this,arguments)}function A(){A=da._asyncToGenerator(function*(J){const {distance:y,units:K}=J,x=J.geometry;if(null==y||"vertexAttributes"in x)return x;var Y=x.spatialReference;J=K?u.fromJSON(K):r.getUnitString(Y);Y=Y&&(N.isGeographic(Y)||N.isWebMercator(Y))?x:yield m.checkProjectionSupport(Y,
N.WGS84).then(()=>m.project(x,N.WGS84));return(yield O())(Y.spatialReference,Y,y,J)});return A.apply(this,arguments)}function O(){return h.apply(this,arguments)}function h(){h=da._asyncToGenerator(function*(){return(yield new Promise((J,y)=>g(["../../../geometry/geometryEngineJSON"],J,y))).geodesicBuffer});return h.apply(this,arguments)}const u=new L.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),B=Object.freeze({}),E=new M,ea=new M,D=new M,F={esriGeometryPoint:R.convertToPoint,esriGeometryPolyline:R.convertToPolyline,esriGeometryPolygon:R.convertToPolygon,esriGeometryMultipoint:R.convertToMultipoint},P=(J,y)=>"_geVersion"!==J?y:void 0;c.QUERY_ENGINE_EMPTY_RESULT=B;c.cleanFromGeometryEngine=function(J){return J&&"_geVersion"in J?JSON.parse(JSON.stringify(J,P)):J};c.getGeometry=function(J,y,K,x,Y,aa,W=y,la=K){const ca=y&&W,qa=K&&la;x=k.isSome(x)?
"coords"in x?x:x.geometry:null;if(k.isNone(x))return null;if(Y)return y=R.generalizeOptimizedGeometry(ea,x,y,K,J,Y,W,la),aa&&(y=R.quantizeOptimizedGeometry(D,y,ca,qa,J,aa)),F[J]?.(y,ca,qa)??null;if(aa)return aa=R.quantizeOptimizedGeometry(D,x,y,K,J,aa,W,la),F[J]?.(aa,ca,qa)??null;R.removeZMValues(E,x,y,K,W,la);return F[J]?.(E,ca,qa)??null};c.normalizeQuery=function(J,y,K){return I.apply(this,arguments)};c.normalizeQueryLike=d;c.transformCentroid=function(J,y,K,x=J.hasZ,Y=J.hasM){if(k.isNone(y))return null;
const aa=J.hasZ&&x,W=J.hasM&&Y;return K?(J=R.quantizeOptimizedGeometry(D,y,J.hasZ,J.hasM,"esriGeometryPoint",K,x,Y),R.convertToPoint(J,aa,W)):R.convertToPoint(y,aa,W)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(g,c,da,L,k,r,t,n){function p(ba,
ha,na){if(ba)for(const za of ba)(ba=(ba=r.getDeepValue(za,ha))&&"function"!==typeof ba&&na.get(ba))&&r.setDeepValue(za,ba.name,ha)}function q(ba,ha){if(!ba||!ha)return[];H.clear();N(H,ba,ha);return Array.from(H).sort()}function N(ba,ha,na){if(na)if(ha?.fields?.length)if(na.includes("*"))for(const {name:za}of ha.fields)ba.add(za);else for(const za of na)R(ba,ha,za);else if(na.includes("*"))ba.clear(),ba.add("*");else for(const za of na)null!=za&&ba.add(za)}function R(ba,ha,na){"string"===typeof na&&
(ha?(ha=ha.get(na))&&ba.add(ha.name):ba.add(na))}function M(ba,ha,na){return m.apply(this,arguments)}function m(){m=da._asyncToGenerator(function*(ba,ha,na){if(na){var {arcadeUtils:za}=yield n.loadArcade();na=za.extractFieldNames(na,ha?.fields?.map(Ea=>Ea.name));for(const Ea of na)R(ba,ha,Ea)}});return m.apply(this,arguments)}function I(ba,ha,na){return d.apply(this,arguments)}function d(){d=da._asyncToGenerator(function*(ba,ha,na){if(na&&"1\x3d1"!==na){const za=(yield new Promise((Ea,Ha)=>g(["../../core/sql/WhereClause"],
Ea,Ha))).WhereClause.create(na,ha);if(!za.isStandardized)throw new L("fieldUtils:collectFilterFields","Where clause is not standardized",{where:na});N(ba,ha,za.fieldNames)}});return d.apply(this,arguments)}function l(ba,ha){for(const na of ba)if(na&&na.valueType&&na.valueType===ha)return na.name;return null}function G(){G=da._asyncToGenerator(function*(ba){if(!ba)return[];const ha=new Set;yield z(ha,ba);return Array.from(ha).sort()});return G.apply(this,arguments)}function z(ba,ha){return A.apply(this,
arguments)}function A(){A=da._asyncToGenerator(function*(ba,ha){if(ha){var na=r.getDeepValue("elevationInfo.featureExpressionInfo",ha);if(na)return na.collectRequiredFields(ba,ha.fieldsIndex)}});return A.apply(this,arguments)}function O(){O=da._asyncToGenerator(function*(ba,ha,na){if(ha&&na&&"fields"in na){var za=[];za.push(h(ba,ha,na.popupTemplate));na.fields&&za.push(...na.fields.map(function(){var Ea=da._asyncToGenerator(function*(Ha){Ha.onStatisticExpression?M(ba,ha.fieldsIndex,Ha.onStatisticExpression.expression):
ba.add(Ha.onStatisticField)});return function(Ha){return Ea.apply(this,arguments)}}()));yield Promise.all(za)}});return O.apply(this,arguments)}function h(ba,ha,na){return u.apply(this,arguments)}function u(){u=da._asyncToGenerator(function*(ba,ha,na){const za=[];na?.expressionInfos&&za.push(...na.expressionInfos.map(Ea=>M(ba,ha.fieldsIndex,Ea.expression)));na=na?.content;if(Array.isArray(na))for(const Ea of na)"expression"===Ea.type&&Ea.expressionInfo&&za.push(M(ba,ha.fieldsIndex,Ea.expressionInfo.expression));
yield Promise.all(za)});return u.apply(this,arguments)}function B(){B=da._asyncToGenerator(function*(ba,ha,na){ha&&(ha.timeInfo&&k.isSome(na)&&na.timeExtent&&N(ba,ha.fieldsIndex,[ha.timeInfo.startField,ha.timeInfo.endField]),ha.floorInfo&&N(ba,ha.fieldsIndex,[ha.floorInfo.floorField]),k.isSome(na)&&k.isSome(na.where)&&(yield I(ba,ha.fieldsIndex,na.where)))});return B.apply(this,arguments)}function E(){E=da._asyncToGenerator(function*(ba,ha,na){ha&&na&&(yield Promise.all(na.map(za=>ea(ba,ha,za))))});
return E.apply(this,arguments)}function ea(ba,ha,na){return D.apply(this,arguments)}function D(){D=da._asyncToGenerator(function*(ba,ha,na){ha&&na&&(na.valueExpression?yield M(ba,ha.fieldsIndex,na.valueExpression):na.field&&R(ba,ha.fieldsIndex,na.field))});return D.apply(this,arguments)}function F(){F=da._asyncToGenerator(function*(ba){if(!ba)return[];const ha="timeInfo"in ba&&ba.timeInfo;return ha?q(ba.fieldsIndex,[ba.trackIdField,ha.startField,ha.endField]):[]});return F.apply(this,arguments)}function P(){P=
da._asyncToGenerator(function*(ba){if(!ba)return[];const ha=new Set;yield J(ha,ba);return Array.from(ha).sort()});return P.apply(this,arguments)}function J(ba,ha){return y.apply(this,arguments)}function y(){y=da._asyncToGenerator(function*(ba,ha){const {labelingInfo:na,fieldsIndex:za}=ha;na&&na.length&&(yield Promise.all(na.map(Ea=>K(ba,za,Ea))))});return y.apply(this,arguments)}function K(ba,ha,na){return x.apply(this,arguments)}function x(){x=da._asyncToGenerator(function*(ba,ha,na){if(na){var za=
na.getLabelExpression();na=na.where;"arcade"===za.type?yield M(ba,ha,za.expression):(za=za.expression.match(/{[^}]*}/g))&&za.forEach(Ea=>{R(ba,ha,Ea.slice(1,-1))});yield I(ba,ha,na)}});return x.apply(this,arguments)}function Y(ba){return"number"===typeof ba&&!isNaN(ba)&&isFinite(ba)}function aa(ba){return null===ba||Y(ba)}function W(ba){return null===ba||S(ba)}function la(ba){return null!=ba&&"string"===typeof ba}function ca(ba){return null===ba||la(ba)}function qa(){return!0}function wa(ba,ha){let na;
switch(ba.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":na=ba.nullable?W:S;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":na=ba.nullable?aa:Y;break;case "string":case "esriFieldTypeString":na=ba.nullable?ca:la;break;default:na=qa}return 1===arguments.length?na:na(ha)}function ya(ba){return null!=ba&&ia.has(ba.type)}function Ba(ba,
ha){return ba.nullable&&null===ha?null:ya(ba)&&!Da(ba.type,Number(ha))?c.NumericRangeValidationError.OUT_OF_RANGE:wa(ba,ha)?ba.domain?t.validateDomainValue(ba.domain,ha):null:c.TypeValidationError.INVALID_TYPE}function Da(ba,ha){ba="string"===typeof ba?Ka(ba):ba;if(!ba)return!1;const na=ba.min,za=ba.max;return ba.isInteger?S(ha)&&ha>=na&&ha<=za:ha>=na&&ha<=za}function Ka(ba){switch(ba){case "esriFieldTypeSmallInteger":case "small-integer":return ka;case "esriFieldTypeInteger":case "integer":return oa;
case "esriFieldTypeSingle":case "single":return ra;case "esriFieldTypeDouble":case "double":return sa}}function La(ba,ha,na){if(!ha||!ha.attributes||!ba){if(k.isSome(na))for(var za of ba??[])na.add(za);return!0}ha=ha.attributes;za=!1;for(const Ea of ba)if(!(Ea in ha))if(za=!0,k.isSome(na))na.add(Ea);else break;return za}function Na(){Na=da._asyncToGenerator(function*(ba,ha){const na=new Set;for(const za of ha)yield M(na,ba.fieldsIndex,za);return Array.from(na).sort()});return Na.apply(this,arguments)}
const xa=/^([0-9])/,a=/[^A-Za-z0-9_\u0080-\uffff]/g,f=/_{2,}/g,V=/^_/,Z=/_$/,ja="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),v=["field","normalizationField"],H=new Set,S=(()=>"isInteger"in Number?Number.isInteger:ba=>"number"===typeof ba&&isFinite(ba)&&Math.floor(ba)===ba)(),T=["integer","small-integer","single","double"],ia=new Set([...T,"esriFieldTypeInteger",
"esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ka={min:-32768,max:32767,isInteger:!0},oa={min:-2147483648,max:2147483647,isInteger:!0},ra={min:-3.4E38,max:1.2E38,isInteger:!1},
sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=M;c.collectElevationFields=z;c.collectFeatureReductionFields=function(ba,ha,na){return O.apply(this,arguments)};c.collectField=R;c.collectFields=N;c.collectFilterFields=function(ba,ha,na){return B.apply(this,arguments)};c.collectLabelingFields=J;c.collectOrderByInfos=function(ba,ha,na){return E.apply(this,arguments)};c.collectPopupTemplateFields=h;c.doubleRange=sa;c.featureHasFields=function(ba,ha){return!La(ba,
ha,null)};c.fixFields=q;c.fixRendererFields=function(ba,ha){if(null!=ba&&null!=ha)for(const na of Array.isArray(ba)?ba:[ba])if(p(ja,na,ha),"visualVariables"in na&&na.visualVariables)for(const za of na.visualVariables)p(v,za,ha)};c.fixTimeInfoFields=function(ba,ha){if(null!=ba&&ha?.fields?.length)if("startField"in ba){var na=ha.get(ba.startField);ha=ha.get(ba.endField);ba.startField=na?.name??null;ba.endField=ha?.name??null}else na=ha.get(ba.startTimeField),ha=ha.get(ba.endTimeField),ba.startTimeField=
na?.name??null,ba.endTimeField=ha?.name??null};c.getDisplayFieldName=function({displayField:ba,fields:ha}){if(ba)return ba;if(!ha||!ha.length)return null;if(!(ba=l(ha,"name-or-title")||l(ha,"unique-identifier")||l(ha,"type-or-category")))a:{for(const na of ha)if(na&&na.name&&(ha=na.name.toLowerCase(),ha.includes("name")||ha.includes("title"))){ba=na.name;break a}ba=null}return ba};c.getElevationFields=function(ba){return G.apply(this,arguments)};c.getExpressionFields=function(ba,ha){return Na.apply(this,
arguments)};c.getFeatureEditFields=function(ba){if(!ba)return[];const ha="editFieldsInfo"in ba&&ba.editFieldsInfo;return ha?q(ba.fieldsIndex,[ha&&ha.creatorField,ha&&ha.creationDateField,ha&&ha.editorField,ha&&ha.editDateField]):[]};c.getFeatureGeometryFields=function(ba){if(!ba)return[];const ha=ba.geometryFieldsInfo;return ha?q(ba.fieldsIndex,[ha.shapeAreaField,ha.shapeLengthField]):[]};c.getFieldDefaultValue=function(ba){const ha=ba.defaultValue;if(void 0!==ha&&wa(ba,ha))return ha;if(ba.nullable)return null};
c.getFieldRange=function(ba){const ha=t.getDomainRange(ba.domain);if(ha)return ha;if(ya(ba))return Ka(ba.type)};c.getLabelingFields=function(ba){return P.apply(this,arguments)};c.getNumericTypeForValue=function(ba){if(!Y(ba))return null;if(S(ba)){if(ba>=ka.min&&ba<=ka.max)return"esriFieldTypeSmallInteger";if(ba>=oa.min&&ba<=oa.max)return"esriFieldTypeInteger"}return ba>=ra.min&&ba<=ra.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(ba){return F.apply(this,arguments)};c.integerRange=
oa;c.isDateField=function(ba){return null!=ba&&("date"===ba.type||"esriFieldTypeDate"===ba.type)};c.isNumberInRange=Da;c.isNumericField=ya;c.isRasterPixelValueField=function(ba){return["raster.itempixelvalue","raster.servicepixelvalue"].some(ha=>ba.toLowerCase().startsWith(ha))};c.isStringField=function(ba){return null!=ba&&("string"===ba.type||"esriFieldTypeString"===ba.type)};c.isValidFieldValue=function(ba,ha){return null===Ba(ba,ha)};c.isValueMatchingFieldType=wa;c.normalizeFieldName=function(ba){return ba?
ba.trim().replace(a,"_").replace(f,"_").replace(V,"").replace(Z,"").replace(xa,"F$1"):null};c.numericTypes=T;c.packFields=function(ba,ha,na=1){if(!ha||!ba)return[];if(ha.includes("*"))return["*"];ha=q(ba,ha);return ha.length/ba.fields.length>=na?["*"]:ha};c.populateMissingFields=La;c.rendererFields=ja;c.sanitizeNullFieldValue=function(ba){return null==ba||"number"===typeof ba&&isNaN(ba)?null:ba};c.singleRange=ra;c.smallIntegerRange=ka;c.unpackFieldNames=function(ba,ha){return k.isNone(ha)||k.isNone(ba)?
[]:ha.includes("*")?(ba.fields??[]).map(na=>na.name):ha};c.validateFieldValue=Ba;c.validationErrorToString=function(ba,ha,na){switch(ba){case t.DomainValidationError.INVALID_CODED_VALUE:return`Value ${na} is not in the coded domain - field: ${ha.name}, domain: ${JSON.stringify(ha.domain)}`;case t.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${na} is out of the range of valid values - field: ${ha.name}, domain: ${JSON.stringify(ha.domain)}`;case c.TypeValidationError.INVALID_TYPE:return`Value ${na} is not a valid value for the field type - field: ${ha.name}, type: ${ha.type}, nullable: ${ha.nullable}`;
case c.NumericRangeValidationError.OUT_OF_RANGE:const {min:za,max:Ea}=Ka(ha.type);return`Value ${na} is out of range for the number type - field: ${ha.name}, type: ${ha.type}, value range is ${za} to ${Ea}`}};c.visualVariableFields=v;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(g){g.DomainValidationError=void 0;(function(c){c.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";
c.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(g.DomainValidationError||(g.DomainValidationError={}));g.getDomainRange=function(c){if(c&&"range"===c.type)return{min:"range"in c?c.range[0]:c.minValue,max:"range"in c?c.range[1]:c.maxValue}};g.validateDomainValue=function(c,da){switch(c.type){case "range":const L="range"in c?c.range[0]:c.minValue;c="range"in c?c.range[1]:c.maxValue;if(null!=L&&+da<L||null!=c&&+da>c)return g.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==
c.codedValues||c.codedValues.every(k=>null==k||k.code!==da))return g.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==c.codedValues||c.codedValues.every(k=>null==k||k.code!==da))return g.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),
function(g,c,da,L,k,r,t,n){function p(){N||(N=da._asyncToGenerator(function*(){const M=yield new Promise((m,I)=>g(["./arcadeUtils"],m,I));return{arcade:M.arcade,arcadeUtils:M,Dictionary:M.Dictionary,Feature:M.arcadeFeature}})());return N}const q=r.getLogger("esri.support.arcadeOnDemand");let N;L=(M,m,I)=>R.create(M,m,I,null,["$feature","$view"]);let R=function(){function M(I,d,l,G,z,A,O,h){this.script=I;this.evaluate=z;this.fields=Array.isArray(O)?O:O.fields;this._syntaxTree=G;this._arcade=d;this._arcadeDictionary=
l;this._arcadeFeature=A;this._spatialReference=h;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}M.create=function(){var I=da._asyncToGenerator(function*(d,l,G,z,A,O){const {arcade:h,Feature:u,Dictionary:B}=yield p(),E=n.fromJSON(l);l=null;try{l=h.parseScript(d,O)}catch(K){return q.error(new k("arcade-bad-expression","Failed to parse arcade script",{script:d,error:K})),null}O=A.reduce((K,x)=>({...K,[x]:null}),
{});let ea=null;t.isSome(z)&&(ea=new B(z),ea.immutable=!0,O.$config=null);var D=(z=h.scriptUsesGeometryEngine(l))&&h.enableGeometrySupport();const F=h.scriptUsesFeatureSet(l)&&h.enableFeatureSetSupport(),P=(A=h.scriptIsAsync(l))&&h.enableAsyncSupport();O={vars:O,spatialReference:E,useAsync:!!P};yield Promise.all([D,F,P]);D=new Set;yield h.loadDependentModules(D,l,null,A,z);const J=new B;J.immutable=!1;J.setField("scale",0);const y=h.compileScript(l,O);return new M(d,h,B,l,K=>{"$view"in K&&K.$view&&
(J.setField("scale",K.$view.scale),K.$view=J);ea&&(K.$config=ea);return y({vars:K,spatialReference:E})},new u,G,E)});return function(d,l,G,z,A,O){return I.apply(this,arguments)}}();var m=M.prototype;m.repurposeFeature=function(I){I.geometry&&!I.geometry.spatialReference&&(I.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(I.geometry,I.attributes,{fields:this.fields});return this._arcadeFeature};m.createDictionary=function(){return new this._arcadeDictionary};
m.referencesMember=function(I){return this._arcade.referencesMember(this._syntaxTree,I)};m.referencesFunction=function(I){return this._arcade.referencesFunction(this._syntaxTree,I)};m.referencesGeometry=function(){return this._referencesGeometry};m.referencesScale=function(){return this._referencesScale};m.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return M}();c.ArcadeExpression=R;c.createDictionaryExpression=(M,m,I,d)=>R.create(M,m,I,d,["$feature",
"$view"]);c.createLabelExpression=(M,m,I)=>R.create(M,m,I,null,["$feature"]);c.createRendererExpression=L;c.createVVExpression=L;c.loadArcade=p;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(g,c,da,L,k,r,t,n,p,q,N,R,M){function m(){return new Promise((G,z)=>g(["../../../geometry/geometryEngineJSON"],G,z))}function I(){I=da._asyncToGenerator(function*(G,z,A){const {spatialRel:O,geometry:h}=G;if(h){if(null==O||!0!==l.spatialRelationship[O])throw new L("feature-store:unsupported-query","Unsupported query spatial relationship",{query:G});if(n.isValid(h.spatialReference)&&n.isValid(A)){if(null==h||!0!==l.queryGeometry[t.getJsonType(h)])throw new L("feature-store:unsupported-query",
"Unsupported query geometry type",{query:G});if(null==z||!0!==l.layerGeometry[z])throw new L("feature-store:unsupported-query","Unsupported layer geometry type",{query:G});if(G.outSR)return R.checkProjectionSupport(G.geometry&&G.geometry.spatialReference,G.outSR)}}});return I.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(G){if(t.isExtent(G))return!0;if(t.isPolygon(G)){for(const z of G.rings)if(5!==z.length||z[0][0]!==z[1][0]||z[0][0]!==z[4][0]||z[2][0]!==z[3][0]||z[0][1]!==z[3][1]||z[0][1]!==z[4][1]||z[1][1]!==z[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(G,z,A){return I.apply(this,
arguments)};c.getSpatialQueryOperator=function(G,z,A,O,h){if(t.isPolygon(z)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G)){const u=q.convertFromPolygon(new N,z,!1,!1);return Promise.resolve(B=>p.polygonContainsPoint(u,!1,!1,B))}if(t.isPolygon(z)&&"esriGeometryMultipoint"===A){const u=q.convertFromPolygon(new N,z,!1,!1);if("esriSpatialRelContains"===G)return Promise.resolve(B=>p.polygonContainsMultipoint(u,!1,!1,B,O,h))}if(t.isExtent(z)&&"esriGeometryPoint"===
A&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G))return Promise.resolve(u=>k.extentContainsPoint(z,M.getGeometry(A,O,h,u)));if(t.isExtent(z)&&"esriGeometryMultipoint"===A&&"esriSpatialRelContains"===G)return Promise.resolve(u=>k.extentContainsMultipoint(z,M.getGeometry(A,O,h,u)));if(t.isExtent(z)&&"esriSpatialRelIntersects"===G){const u=r.getExtentIntersector(A);return Promise.resolve(B=>u(z,M.getGeometry(A,O,h,B)))}return m().then(u=>{const B=u[d[G]].bind(null,z.spatialReference,
z);return E=>B(M.getGeometry(A,O,h,E))})};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(g,c){g.extentIntersectsExtent=c.extentIntersectsExtent;g.extentIntersectsMultipoint=c.extentIntersectsMultipoint;g.extentIntersectsPoint=c.extentIntersectsPoint;g.extentIntersectsPolygon=c.extentIntersectsPolygon;g.extentIntersectsPolyline=c.extentIntersectsPolyline;g.extentIntersectsRings=
c.extentIntersectsRings;g.getFeatureExtentIntersector=c.getFeatureExtentIntersector;g.isSelfIntersecting=c.isSelfIntersecting;g.segmentIntersects=c.segmentIntersects;g.getExtentIntersector=function(da){return"mesh"===da?c.extentIntersectsExtent:c.getFeatureExtentIntersector(da)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(g){function c(da,L,k,r,t){if(!da)return!1;L=L?k?4:3:k?3:2;
const {coords:n,lengths:p}=da;k=!1;da=0;for(const N of p){var q=da;for(let R=da,M=da+N*L;R<M;R+=L){q=R+L;q===M&&(q=da);const m=n[R],I=n[R+1],d=n[q];q=n[q+1];(I<t&&q>=t||q<t&&I>=t)&&m+(t-I)/(q-I)*(d-m)<r&&(k=!k)}da+=N*L}return k}g.polygonContainsCoords=c;g.polygonContainsMultipoint=function(da,L,k,r,t,n){t=t?n?4:3:n?3:2;const {coords:p,lengths:q}=r;if(!q)return!1;for(let N=0,R=0;N<q.length;N++,R+=t)if(!c(da,L,k,p[R],p[R+1]))return!1;return!0};g.polygonContainsPoint=function(da,L,k,r){return c(da,L,
k,r.coords[0],r.coords[1])};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(g){function c(k,r,t,n,p){if(null!=n&&null!=p)return q=>{const N=k.getAttribute(q,r);q=k.getAttribute(q,t);return(null==N||N<=p)&&(null==q||q>=n)};if(null!=n)return q=>{q=k.getAttribute(q,t);return null==q||q>=n};if(null!=p)return q=>{q=k.getAttribute(q,r);return null==q||q<=p}}function da(k,r,t,n){if(null!=
t&&null!=n&&t===n)return p=>k.getAttribute(p,r)===t;if(null!=t&&null!=n)return p=>{p=k.getAttribute(p,r);return p>=t&&p<=n};if(null!=t)return p=>k.getAttribute(p,r)>=t;if(null!=n)return p=>k.getAttribute(p,r)<=n}function L(){return()=>!1}g.getTimeExtent=function(k,r){if(!k)return null;const t=r.featureAdapter,{startTimeField:n,endTimeField:p}=k;let q=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;if(n&&p)r.forEach(R=>{const M=t.getAttribute(R,n);R=t.getAttribute(R,p);null==M||isNaN(M)||(q=Math.min(q,
M));null==R||isNaN(R)||(N=Math.max(N,R))});else{const R=n||p;r.forEach(M=>{M=t.getAttribute(M,R);null==M||isNaN(M)||(q=Math.min(q,M),N=Math.max(N,M))})}return{start:q,end:N}};g.getTimeOperator=function(k,r,t){if(!r||!k)return null;const {startTimeField:n,endTimeField:p}=k;if(!n&&!p)return null;const {start:q,end:N}=r;return null===q&&null===N?null:void 0===q&&void 0===N?L():n&&p?c(t,n,p,q,N):da(t,n||p,q,N)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(g,c){function da(k){return"oid"===k.type||"esriFieldTypeOID"===k.type}function L(k){return"global-id"===k.type||"esriFieldTypeGlobalID"===k.type}return function(){function k(t=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(t){this.fields=
t;var n=[];for(const p of t)if(t=p&&p.name){const q=t.trim().toLowerCase(),N=c.normalizeFieldName(t).toLowerCase();this._fieldsMap.set(t,p);this._fieldsMap.set(q,p);this._normalizedFieldsMap.set(N,p);n.push(q);"date"===p.type||"esriFieldTypeDate"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):c.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));da(p)||L(p)||(p.editable=null==p.editable?!0:!!p.editable,p.nullable=null==p.nullable?!0:!!p.nullable)}n.sort();
this.uid=n.join(",")}}var r=k.prototype;r.destroy=function(){this._fieldsMap.clear()};r.has=function(t){return null!=this.get(t)};r.get=function(t){if(t){var n=this._fieldsMap.get(t);if(n)return n;(n=this._fieldsMap.get(t.trim().toLowerCase())??this._normalizedFieldsMap.get(c.normalizeFieldName(t).toLowerCase()))&&this._fieldsMap.set(t,n);return n}};r.isDateField=function(t){return this._dateFieldsSet.has(this.get(t))};r.isNumericField=function(t){return this._numericFieldsSet.has(this.get(t))};r.normalizeFieldName=
function(t){if(t=this.get(t))return t.name??void 0};g._createClass(k,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)da(t)||L(t)||t.nullable||void 0!==c.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}}]);return k}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(g,c,da,L,k,r,t,n,p,q,N,R,M,m){function I(E){return d.has(E)?d.get(E):"number"===typeof E?E:1}g.TaskPriority=void 0;(function(E){E.RESOURCE_CONTROLLER="schedule";E.SLIDE="slide";E.STREAM_DATA_LOADER="stream loader";E.ELEVATION_QUERY="elevation query";E.TERRAIN_SURFACE="terrain";E.SURFACE_GEOMETRY_UPDATES="surface geometry updates";E.GRAPHICS_CORE="Graphics3D";E.I3S_CONTROLLER="I3S";E.POINT_CLOUD_LAYER="point cloud";E.FEATURE_TILE_FETCHER="feature fetcher";E.OVERLAY="overlay";E.STAGE="stage";
E.GRAPHICS_DECONFLICTOR="graphics deconflictor";E.FILTER_VISIBILITY="Graphics3D filter visibility";E.SCALE_VISIBILITY="Graphics3D scale visibility";E.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";E.POINT_OF_INTEREST_FREQUENT="POI frequent";E.POINT_OF_INTEREST_INFREQUENT="POI infrequent";E.LABELER="labeler";E.FEATURE_QUERY_ENGINE="feature query";E.FEATURE_TILE_TREE="feature tile tree";E.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";E.ELEVATION_ALIGNMENT="elevation alignment";E.TEXT_TEXTURE_ATLAS=
"text texture atlas";E.TEXTURE_UNLOAD="texture unload";E.LINE_OF_SIGHT_TOOL="line of sight tool";E.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";E.ELEVATION_PROFILE="elevation profile";E.SNAPPING="snapping";E.SHADOW_ACCUMULATOR="shadow accumulator";E.CLOUDS_GENERATOR="cloud generator";E[E.TEST_PRIO=1]="TEST_PRIO"})(g.TaskPriority||(g.TaskPriority={}));const d=new Map([[g.TaskPriority.RESOURCE_CONTROLLER,0],[g.TaskPriority.SLIDE,0],[g.TaskPriority.STREAM_DATA_LOADER,0],[g.TaskPriority.ELEVATION_QUERY,
0],[g.TaskPriority.TERRAIN_SURFACE,1],[g.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[g.TaskPriority.GRAPHICS_CORE,2],[g.TaskPriority.I3S_CONTROLLER,2],[g.TaskPriority.POINT_CLOUD_LAYER,2],[g.TaskPriority.FEATURE_TILE_FETCHER,2],[g.TaskPriority.OVERLAY,4],[g.TaskPriority.STAGE,4],[g.TaskPriority.GRAPHICS_DECONFLICTOR,4],[g.TaskPriority.FILTER_VISIBILITY,4],[g.TaskPriority.SCALE_VISIBILITY,4],[g.TaskPriority.FRUSTUM_VISIBILITY,4],[g.TaskPriority.CLOUDS_GENERATOR,4],[g.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[g.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[g.TaskPriority.LABELER,8],[g.TaskPriority.FEATURE_QUERY_ENGINE,8],[g.TaskPriority.FEATURE_TILE_TREE,16],[g.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[g.TaskPriority.ELEVATION_ALIGNMENT,12],[g.TaskPriority.TEXT_TEXTURE_ATLAS,12],[g.TaskPriority.TEXTURE_UNLOAD,12],[g.TaskPriority.LINE_OF_SIGHT_TOOL,16],[g.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[g.TaskPriority.SNAPPING,0],[g.TaskPriority.SHADOW_ACCUMULATOR,30]]),l=q.Milliseconds(6.5),G=q.Milliseconds(1),
z=q.Milliseconds(30),A=q.Milliseconds(1E3/30),O=q.Milliseconds(100);var h;(function(E){let ea=function(){function P(){this._updating=new N.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new r("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new F;this._state=m.RenderState.INTERACTING;this._tasks=new t;this._runQueue=new t;this._load=0;this._idleStateCallbacks=new t;this._idleUpdatesStartFired=!1;this._maxReschedule=32;this._debug=this._forceTask=
!1;this._debugHandle=p.watch(()=>M.SCHEDULER_LOG_SLOW_TASKS,K=>this._debug=K,p.initial);for(const K of Object.keys(g.TaskPriority))this.performanceInfo.tasks.set(g.TaskPriority[K],new r(g.TaskPriority[K]));const y=this;this._test={FRAME_SAFETY_BUDGET:l,INTERACTING_BUDGET:A,IDLE_BUDGET:O,get availableBudget(){return y._budget.budget},usedBudget:0,getBudget:()=>y._budget,setBudget:K=>y._budget=K,updateTask:K=>this._updateTask(K),getState:K=>this._getState(K),getRuntime:K=>this._getRuntime(K),frameTaskTimes:this._frameTaskTimes,
resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var J=P.prototype;J.destroy=function(){this._tasks.toArray().forEach(y=>y.remove());this._tasks.clear();k.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updating.set(!1)};J.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))};J.registerTask=
function(y,K){const x=I(y);K=new D(this,y,K,x);this._tasks.push(K);this.performanceInfo.tasks.has(y)||this.performanceInfo.tasks.set(y,new r(y));return K};J.registerIdleStateCallbacks=function(y,K){const x={idleBegin:y,idleEnd:K};this._idleStateCallbacks.push(x);this.state===m.RenderState.IDLE&&this._idleUpdatesStartFired&&x.idleBegin();const Y=this;return{remove:()=>this._removeIdleStateCallbacks(x),set idleBegin(aa){Y._idleUpdatesStartFired&&(x.idleEnd(),Y._state===m.RenderState.IDLE&&aa());x.idleBegin=
aa},set idleEnd(aa){x.idleEnd=aa}}};J.updateBudget=function(y){this._test.usedBudget=0;++this._frameNumber;let K=l,x=y.frameDuration,Y=G;switch(this.state){case m.RenderState.IDLE:K=q.Milliseconds(0);x=q.Milliseconds(Math.max(O,y.frameDuration));Y=z;break;case m.RenderState.INTERACTING:x=q.Milliseconds(Math.max(A,y.frameDuration))}x=q.Milliseconds(x-y.elapsedFrameTime-K);if(this.state!==m.RenderState.IDLE&&x<G&&!this._forceTask)return this._forceTask=!0,!1;x=q.Milliseconds(Math.max(x,Y));this._budget.reset(x,
this.state);this._maxReschedule=32;this._updateLoad();return this._schedule()};J.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case m.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(y=>y.idleBegin()));this._runIdle();break;case m.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};J.stopFrame=function(){this._budget.reset(q.Milliseconds(0),
this._state);this._budget.madeProgress()};J._removeIdleStateCallbacks=function(y){this._idleUpdatesStartFired&&y.idleEnd();this._idleStateCallbacks.removeUnordered(y)};J.removeTask=function(y){this._tasks.removeUnordered(y);this._runQueue.removeUnordered(y)};J._updateTask=function(y){this._tasks.forAll(K=>{K.name===y&&K.setPriority(y)})};J._getState=function(y){if(this._runQueue.some(x=>x.name===y))return g.TaskState.SCHEDULED;let K=g.TaskState.IDLE;this._tasks.forAll(x=>{x.name===y&&x.needsUpdate&&
(1>=x.schedulePriority?K=g.TaskState.READY:K!==g.TaskState.READY&&(K=g.TaskState.WAITING))});return K};J._getRuntime=function(y){let K=0;this._tasks.forAll(x=>{x.name===y&&(K+=x.runtime)});return K};J._resetRuntimes=function(){this._tasks.forAll(y=>y.runtime=0)};J._getRunning=function(){const y=new Map;this._tasks.forAll(x=>{x.needsUpdate&&y.set(x.name,(y.get(x.name)||0)+1)});if(0===y.size)return null;let K="";y.forEach((x,Y)=>{K=1<x?K+` ${x}x ${Y}`:K+` ${Y}`});return K};J._runIdle=function(){this._run()};
J._runInteracting=function(){this._run()};J._runAnimating=function(){this._run()};J._updateLoad=function(){const y=this._tasks.reduce((K,x)=>x.needsUpdate?++K:K,0);this._load=.9*this._load+y*(1-.9)};J._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(y=>{if(y.needsUpdate)return!0;y.schedulePriority=y.basePriority;return!1});for(this._tasks.forAll(y=>{0===y.basePriority&&y.needsUpdate&&!this._runQueue.includes(y)&&this._runQueue.unshift(y)});0===this._runQueue.length;){let y=
!1;this._tasks.forAll(K=>{if(K.needsUpdate&&0!==K.schedulePriority&&0!==K.basePriority&&(!K.task.runOncePerFrame||K.lastFrameRun!==this._frameNumber))switch(y=!0,K.schedulePriority){case 1:K.schedulePriority=0;this._runQueue.push(K);break;default:--K.schedulePriority}});if(!y)return this._updating.set(!1),!1;--this._maxReschedule}this._updating.set(!0);return!0};J._run=function(){const y=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var K=this._budget.now();const x=
this._runQueue.pop();this._budget.resetProgress();try{x.task.runTask(this._budget)}catch(Y){L.getLogger("esri.views.support.Scheduler").error(`Exception in task "${x.name}"`,Y)}x.schedulePriority=x.basePriority;x.lastFrameRun=this._frameNumber;K=this._budget.now()-K;x.runtime+=K;this._frameTaskTimes.set(x.priority,this._frameTaskTimes.get(x.priority)+K);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",x.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");
if(0>=this._budget.remaining){this._updating.set(this._tasks.some(Y=>Y.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-y);return}}while(this._schedule());this._updating.set(this._tasks.some(x=>x.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-y)};J._startFrameTaskTimes=function(){for(const y of Object.keys(g.TaskPriority))this._frameTaskTimes.set(g.TaskPriority[y],0)};J._recordFrameTaskTimes=function(y){this._frameTaskTimes.forEach((K,x)=>this.performanceInfo.tasks.get(x).record(K));
this.performanceInfo.total.record(y)};c._createClass(P,[{key:"updating",get:function(){return this._updating.get()},set:function(y){this._updating.set(y)}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(y){this._state!==y&&(this._state=y,this.state!==m.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(K=>K.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return P}();
E.Scheduler=ea;let D=function(){function P(y,K,x,Y){this._scheduler=y;this.name=K;this._basePriority=Y;this.runtime=this.lastFrameRun=0;this._queue=new R.PromiseQueue;this._handles=new da;this.schedulePriority=this._basePriority;this._task=new N.ObservableValue(k.isSome(x)?x:this._queue);this._handles.add(p.when(()=>this.task.running,()=>y.activate()))}var J=P.prototype;J.remove=function(){this.processQueue(u);this._scheduler.removeTask(this);this.schedule=B.schedule;this.reschedule=B.reschedule;
this._handles.destroy()};J.setPriority=function(y){this.name=y;y=I(y);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=y;this._basePriority=y};J.schedule=function(y,K,x){return this._queue.push(y,K,x)};J.reschedule=function(y,K,x){return this._queue.unshift(y,K,x)};J.processQueue=function(y){this._queue.runTask(y)};c._createClass(P,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},
{key:"priority",get:function(){return this.name},set:function(y){this.setPriority(y)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return P}(),F=function(){function P(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=m.RenderState.IDLE;this._done=!1;this._enabled=!0}var J=P.prototype;J.run=function(y){if(this.done)return!1;!0===y()&&this.madeProgress();return!0};J.madeProgress=function(){this._done=this.elapsed>=this._budget&&
this._enabled};J.reset=function(y,K){this._begin=this.now();this._budget=y;this._state=K;this._done=!1};J.now=function(){return performance.now()};J.resetProgress=function(){this._done=!1};c._createClass(P,[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(y){this._enabled=y}},{key:"remaining",get:function(){return Math.max(this._budget-
this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._done}}]);return P}();E.Budget=F})(h||(h={}));g.TaskState=void 0;(function(E){E.SCHEDULED="s";E.READY="r";E.WAITING="w";E.IDLE="i"})(g.TaskState||(g.TaskState={}));const u=(()=>{const E=new h.Budget;E.enabled=!1;return E})(),B=new (function(){function E(){}var ea=E.prototype;ea.remove=function(){};ea.processQueue=function(){};ea.schedule=function(D,F,P){try{if(n.isAborted(F)){const J=
n.createAbortError();return P?Promise.resolve(P(J)):Promise.reject(J)}return n.when(D(u))}catch(J){return Promise.reject(J)}};ea.reschedule=function(D,F,P){return this.schedule(D,F,P)};return E}());g.ImmediateTask=B;g.getTaskPriority=I;g.newScheduler=function(){return new h.Scheduler};g.noBudget=u;g.taskPriorities=d;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(g,c,da,L,k,r,t){function n(M,m,I={}){return p(M,m,I,N)}function p(M,m,I={},d){let l=null;const G=I.once?(z,A)=>{d(z)&&(L.removeMaybe(l),m(z,A))}:(z,A)=>{d(z)&&m(z,A)};l=r.watchTracked(M,G,I.sync,I.equals);I.initial&&(M=M(),G(M,M));return l}function q(M,m,I){if(k.isAborted(I))return Promise.reject(k.createAbortError());const d=M();if(m?.(d))return Promise.resolve(d);let l=null;return new Promise((G,z)=>{l=da.handlesGroup([k.onAbort(I,()=>{l=L.removeMaybe(l);z(k.createAbortError())}),p(M,A=>
{l=L.removeMaybe(l);G(A)},{sync:!1,once:!0},m??N)])})}function N(M){return!0}function R(M){return!!M}g.autorun=t.autorun;g.initial={initial:!0};g.on=function(M,m,I,d={}){function l(){z&&A&&(A.remove(),d.onListenerRemove?.(z),A=z=null)}function G(u){d.once&&d.once&&L.removeMaybe(O);I(u)}let z=null,A=null,O=null;const h=n(M,(u,B)=>{l();c.isEventTarget(u)&&(z=u,A=c.on(u,m,G),d.onListenerAdd?.(u))},{sync:d.sync,initial:!0});return O=da.makeHandle(()=>{h.remove();l()})};g.once=function(M,m){return q(M,
null,m)};g.pausable=function(M,m,I={}){let d=!1;const l=n(M,(G,z)=>{d||m(G,z)},I);return{remove(){l.remove()},pause(){d=!0},resume(){d=!1}}};g.sync={sync:!0};g.syncAndInitial={sync:!0,initial:!0};g.watch=n;g.when=function(M,m,I={}){return p(M,m,I,R)};g.whenOnce=function(M,m){return q(M,R,m)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],
function(g,c,da){let L=function(){function k(t){this._observable=new da.SimpleObservable;this._value=t}var r=k.prototype;r.get=function(){c.trackAccess(this._observable);return this._value};r.set=function(t){t!==this._value&&(this._value=t,this._observable.notify())};return k}();g.ObservableValue=L;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils",
"../../core/accessorSupport/tracking/ObservableValue"],function(g,c,da,L){let k=function(){function t(){this._tasks=[];this._running=new L.ObservableValue(!1)}var n=t.prototype;n.destroy=function(){this.cancelAll()};n.runTask=function(p){for(;!p.done&&this._process(p);)p.madeProgress()};n.push=function(p,q,N){this._running.set(!0);return new Promise((R,M)=>this._tasks.push(new r(R,M,p,q,N)))};n.unshift=function(p,q,N){this._running.set(!0);return new Promise((R,M)=>this._tasks.unshift(new r(R,M,p,
q,N)))};n._process=function(p){if(0===this._tasks.length)return!1;const q=this._tasks.shift();try{const N=da.isAborted(q.signal);if(N&&!q.abortCallback)q.reject(da.createAbortError());else{const R=N?q.abortCallback?.(da.createAbortError()):q.callback(p);da.isPromiseLike(R)?R.then(q.resolve,q.reject):q.resolve(R)}}catch(N){q.reject(N)}this._running.set(0<this._tasks.length);return!0};n.cancelAll=function(){const p=da.createAbortError();for(const q of this._tasks)if(q.abortCallback){const N=q.abortCallback(p);
q.resolve(N)}else q.reject(p);this._tasks.length=0;this._running.set(!1)};c._createClass(t,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return t}(),r=function(t,n,p,q,N){this.resolve=t;this.reject=n;this.callback=p;this.signal=q;this.abortCallback=N};g.PromiseQueue=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,da,L,k,r,t){da=function(n){function p(){var q=n.apply(this,arguments)||this;q.SCHEDULER_LOG_SLOW_TASKS=!1;q.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return q}g._inheritsLoose(p,n);return p}(da);c.__decorate([L.property()],da.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([L.property()],da.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);da=c.__decorate([t.subclass("esri.views.support.DebugFlags")],da);return new da})},"esri/views/support/RenderState":function(){define(["exports"],
function(g){g.RenderState=void 0;var c=g.RenderState||(g.RenderState={});c[c.ANIMATING=0]="ANIMATING";c[c.INTERACTING=1]="INTERACTING";c[c.IDLE=2]="IDLE";Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(g,c,da,L,k){function*r(z){switch(z.type){case "Feature":yield z;
break;case "FeatureCollection":for(const A of z.features)A&&(yield A)}}function*t(z){if(!z)return null;switch(z.type){case "Point":yield z.coordinates;break;case "LineString":case "MultiPoint":yield*z.coordinates;break;case "MultiLineString":case "Polygon":for(const A of z.coordinates)yield*A;break;case "MultiPolygon":for(const A of z.coordinates)for(const O of A)yield*O}}function*n(z,A={}){const {geometryType:O,objectIdField:h}=A;for(const u of z){const {geometry:B,properties:E,id:ea}=u;if(B&&G[B.type]!==
O)continue;z=E||{};let D=z[h]??null;h&&null!=ea&&!z[h]&&(z[h]=D=ea);yield new da.OptimizedFeature(B?R(new L,B,A):null,z,null,D)}}function p(z){for(const A of z)if(2<A.length)return!0;return!1}function q(z){let A=0;for(let O=0;O<z.length;O++){const h=z[O],u=z[(O+1)%z.length];A+=h[0]*u[1]-u[0]*h[1]}return 0>=A}function N(z){const A=z[0],O=z[z.length-1];A[0]===O[0]&&A[1]===O[1]&&A[2]===O[2]||z.push(A);return z}function R(z,A,O){switch(A.type){case "LineString":return I(z,A.coordinates,O),z;case "MultiLineString":for(const u of A.coordinates)I(z,
u,O);return z;case "MultiPoint":return I(z,A.coordinates,O),z;case "MultiPolygon":for(var h of A.coordinates)for(M(z,h[0],O),A=1;A<h.length;A++)m(z,h[A],O);return z;case "Point":return l(z,A.coordinates,O),z;case "Polygon":h=A.coordinates;M(z,h[0],O);for(A=1;A<h.length;A++)m(z,h[A],O);return z}}function M(z,A,O){A=N(A);q(A)?I(z,A,O):d(z,A,O)}function m(z,A,O){A=N(A);q(A)?d(z,A,O):I(z,A,O)}function I(z,A,O){for(const h of A)l(z,h,O);z.lengths.push(A.length)}function d(z,A,O){for(let h=A.length-1;0<=
h;h--)l(z,A[h],O);z.lengths.push(A.length)}function l(z,A,O){const [h,u,B]=A;z.coords.push(h,u);O.hasZ&&z.coords.push(B||0)}const G={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};g.createOptimizedFeatures=function(z,A){return Array.from(n(r(z),A))};g.getGeometryType=function(z){return G[z]};g.inferLayerProperties=function(z,A={}){const O=[];var h=
new Set;const u=new Set;var B=!1;let E=null,ea=!1,D=void 0;({geometryType:A=null}=A);var F=!1;for(const P of r(z)){const {geometry:J,properties:y,id:K}=P;if(J&&(A||(A=G[J.type]),G[J.type]!==A))continue;B||(B=t(J),B=p(B));!ea&&(ea=null!=K)&&(D=typeof K,E=Object.keys(y).filter(x=>y[x]===K));ea&&null!=K&&(1<E.length?E=E.filter(x=>y[x]===K):1===E.length&&(E=y[E[0]]===K?E:[]));if(!F&&y){z=!0;for(const x in y)if(!h.has(x))if(F=y[x],null==F)z=!1,u.add(x);else{a:switch(typeof F){case "string":F="esriFieldTypeString";
break a;case "number":F="esriFieldTypeDouble";break a;default:F="unknown"}"unknown"===F?u.add(x):(u.delete(x),h.add(x),O.push({name:k.normalizeFieldName(x),alias:x,type:F}))}F=z}}if(h=k.normalizeFieldName(1===E?.length&&E[0]||null))for(const P of O)if(P.name===h&&k.isNumericField(P)){P.type="esriFieldTypeOID";break}return{fields:O,geometryType:A,hasZ:B,objectIdFieldName:h,objectIdFieldType:D,unknownFields:Array.from(u)}};g.validateGeoJSON=function(z){if(!z)throw new c("geojson-layer:empty","GeoJSON data is empty");
if("Feature"!==z.type&&"FeatureCollection"!==z.type)throw new c("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:z});({crs:z}=z);if(z){var A="string"===typeof z?z:"name"===z.type?z.properties.name:"EPSG"===z.type?z.properties.code:null,O=RegExp(".*(CRS84H?|4326)$","i");if(!A||!O.test(A))throw new c("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:z});}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(g,c,da,L,k,r){function t(d){return new R(d)}function n(){return p.apply(this,arguments)}function p(){p=da._asyncToGenerator(function*(){L.isNone(I)&&(I=yield new Promise((d,l)=>g(["../../../../geometry/geometryEngineJSON"],d,l)));return I});return p.apply(this,
arguments)}function q(){q=da._asyncToGenerator(function*(d,l){!k.isValid(d)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||(yield n())});return q.apply(this,arguments)}let N=function(){this.description=this.code=null},R=function(d){this.error=new N;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=d},M=function(d){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=d};const m=new Set;let I;c.createFeatureEditErrorResult=t;c.createFeatureEditSuccessResult=
function(d){return new M(d)};c.loadGeometryEngineForSimplify=function(d,l){return q.apply(this,arguments)};c.mixAttributes=function(d,l,G,z=!1,A){m.clear();for(const B in G){const E=d.get(B);if(!E)continue;var O=G[B],h=E,u=O;let ea=u;"string"===typeof u&&r.isNumericField(h)?ea=parseFloat(u):null!=u&&r.isStringField(h)&&"string"!==typeof u&&(ea=String(u));h=r.sanitizeNullFieldValue(ea);h!==O&&A&&A.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:E,
originalValue:O,sanitizedValue:h}});m.add(E.name);if(E&&(z||E.editable)){if(O=r.validateFieldValue(E,h))return t(r.validationErrorToString(O,E,h));l[E.name]=h}}for(const B of d?.requiredFields??[])if(!m.has(B.name))return t(`missing required field "${B.name}"`);return null};c.simplify=function(d,l){if(!d||!k.isValid(l))return d;if("rings"in d||"paths"in d){if(L.isNone(I))throw new TypeError("geometry engine not loaded");return I.simplify(l,d)}return d};Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/promiseUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./dateUtils ./xmlUtils ../support/Field ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(g,c,da,L,k,r,t,n,p,q,N,R,M,m,I,d,l,G){function z(){z=c._asyncToGenerator(function*(xa,a){a=yield L(xa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...a?.customParameters},signal:a?.signal});a=A(a.data);p.isHTTPSProtocol(xa)&&(p.hasSameOrigin(xa,a.operations.DescribeFeatureType.url,!0)&&(a.operations.DescribeFeatureType.url=p.toHTTPS(a.operations.DescribeFeatureType.url)),p.hasSameOrigin(xa,a.operations.GetFeature.url,!0)&&(a.operations.GetFeature.url=
p.toHTTPS(a.operations.GetFeature.url)));return a});return z.apply(this,arguments)}function A(xa){xa=ya(xa);Da(xa);Ka(xa);xa=xa.firstElementChild;const a=r.cache(h(xa));return{operations:O(xa),get featureTypes(){return Array.from(a())},readFeatureTypes:a}}function O(xa){let a=!1;const f={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};I.visitXML(xa,{OperationsMetadata:{Operation:V=>{switch(V.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:Z=>
{f.GetCapabilities.url=Z.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:Z=>{f.DescribeFeatureType.url=Z.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:Z=>{f.GetFeature.url=Z.getAttribute("xlink:href")}}},Parameter:Z=>{if("outputFormat"===Z.getAttribute("name"))return{AllowedValues:{Value:ja=>{(ja=ja.textContent)&&La.has(ja.toLowerCase())&&(f.GetFeature.outputFormat=ja)}}}}}}},Constraint:V=>{switch(V.getAttribute("name")){case "KVPEncoding":return{DefaultValue:Z=>
{a="true"===Z.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:Z=>{f.GetFeature.supportsPagination="true"===Z.textContent.toLowerCase()}}}}}});if(!a)throw new k("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(t.isNone(f.GetFeature.outputFormat))throw new k("wfs-layer:geojson-not-supported","WFS service doesn't support GeoJSON output format");return f}function h(xa){return I.iterateXML(xa,{FeatureTypeList:{FeatureType:a=>
{const f={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",supportedSpatialReferences:[]},V=new Set([4326]),Z=ja=>{ja=parseInt(ja.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);Number.isNaN(ja)||V.add(ja)};I.visitXML(a,{Name:ja=>{const {name:v,prefix:H}=Ba(ja.textContent);f.typeName=`${H}:${v}`;f.name=v;f.namespacePrefix=H;f.namespaceUri=ja.lookupNamespaceURI(H)},Abstract:ja=>{f.description=ja.textContent},Title:ja=>{f.title=
ja.textContent},WGS84BoundingBox:ja=>{f.extent=u(ja)},DefaultSRS:Z,DefaultCRS:Z,OtherSRS:Z,OtherCRS:Z});f.title||(f.title=f.name);f.supportedSpatialReferences.push(...V);return f}}})}function u(xa){let a,f,V,Z;for(const ja of xa.children)switch(ja.localName){case "LowerCorner":[a,f]=ja.textContent.split(" ").map(v=>Number.parseFloat(v));break;case "UpperCorner":[V,Z]=ja.textContent.split(" ").map(v=>Number.parseFloat(v))}return{xmin:a,ymin:f,xmax:V,ymax:Z,spatialReference:N.WGS84}}function B(xa,a,
f){return r.find(xa,V=>f?V.name===a&&V.namespaceUri===f:V.typeName===a||V.name===a)}function E(){E=c._asyncToGenerator(function*(xa,a,f,V={}){const {featureType:Z,extent:ja}=yield ea(xa,a,f,V),{fields:v,geometryType:H,swapXY:S,objectIdField:T,geometryField:ia}=yield F(xa,Z.typeName,V);return{url:xa.operations.GetCapabilities.url,name:Z.name,namespaceUri:Z.namespaceUri,fields:v,geometryField:ia,geometryType:H,objectIdField:T,spatialReference:V.spatialReference??l.WGS84,extent:ja,swapXY:S,wfsCapabilities:xa,
customParameters:V.customParameters}});return E.apply(this,arguments)}function ea(xa,a,f){return D.apply(this,arguments)}function D(){D=c._asyncToGenerator(function*(xa,a,f,V={}){const {spatialReference:Z=l.WGS84}=V;xa=xa.readFeatureTypes();f=a?B(xa,a,f):xa.next().value;if(t.isNone(f)){if(a)throw new k("wfs-layer:feature-type-not-found",`The type '${a}' could not be found in the service`);throw new k("wfs-layer:empty-service","The service is empty");}a=new G({...f.extent,spatialReference:Z});if(!N.equals(Z,
N.WGS84))try{yield q.initializeProjection(N.WGS84,Z,void 0,V),a=q.project(a,N.WGS84)}catch{throw new k("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:a,spatialReference:Z,featureType:f}});return D.apply(this,arguments)}function F(xa,a){return P.apply(this,arguments)}function P(){P=c._asyncToGenerator(function*(xa,a,f={}){const [V,Z]=yield n.eachAlways([x(xa.operations.DescribeFeatureType.url,a,f),y(xa,a,f)]);if(V.error||Z.error)throw new k("wfs-layer:getWFSLayerTypeInfo-error",
`An error occurred while getting info about the feature type '${a}'`,{error:V.error||Z.error});const {fields:ja,errors:v}=V.value??{};xa=V.value?.geometryType||Z.value?.geometryType;f=Z.value?.swapXY??!1;if(t.isNone(xa))throw new k("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${a}`,{typeName:a,geometryType:xa,fields:ja,errors:v});return{...J(ja??[]),geometryType:xa,swapXY:f}});return P.apply(this,arguments)}function J(xa){const a=xa.find(V=>"geometry"===V.type);
let f=xa.find(V=>"oid"===V.type);xa=xa.filter(V=>"geometry"!==V.type);f||(f=new d({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),xa.unshift(f));return{geometryField:a?.name??null,objectIdField:f.name,fields:xa}}function y(xa,a){return K.apply(this,arguments)}function K(){K=c._asyncToGenerator(function*(xa,a,f={}){let V,Z=!1;const [ja,v]=yield Promise.all([la(xa.operations.GetFeature.url,a,xa.operations.GetFeature.outputFormat,{...f,count:1}),L(xa.operations.GetFeature.url,{responseType:"text",
query:qa(a,void 0,{...f,count:1}),signal:f?.signal})]);if(xa="FeatureCollection"===ja.type&&ja.features[0]?.geometry){V=R.featureGeometryTypeKebabDictionary.fromJSON(M.getGeometryType(xa.type));switch(xa.type){case "Point":var H=xa.coordinates;break;case "LineString":case "MultiPoint":H=xa.coordinates[0];break;case "MultiLineString":case "Polygon":H=xa.coordinates[0][0];break;case "MultiPolygon":H=xa.coordinates[0][0][0]}if(a=/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(v.data))xa=
H[0].toFixed(3),H=H[1].toFixed(3),f=parseFloat(a[1]).toFixed(3),a=parseFloat(a[2]).toFixed(3),xa===a&&H===f&&(Z=!0)}return{geometryType:V,swapXY:Z}});return K.apply(this,arguments)}function x(xa,a,f){return Y.apply(this,arguments)}function Y(){Y=c._asyncToGenerator(function*(xa,a,f){xa=yield L(xa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:a,...f?.customParameters},signal:f?.signal});return aa(a,xa.data)});return Y.apply(this,arguments)}function aa(xa,
a){const {name:f}=Ba(xa);a=ya(a);Ka(a);const V=r.find(I.iterateXML(a.firstElementChild,{element:Z=>({name:Z.getAttribute("name"),typeName:Ba(Z.getAttribute("type")).name})}),({name:Z})=>Z===f);if(t.isSome(V)){const Z=r.find(I.iterateXML(a.firstElementChild,{complexType:ja=>ja}),ja=>ja.getAttribute("name")===V.typeName);if(t.isSome(Z))return W(Z)}throw new k("wfs-layer:feature-type-not-found",`Type '${xa}' not found in document`,{document:(new XMLSerializer).serializeToString(a)});}function W(xa){const a=
[],f=[];let V=void 0;var Z=I.iterateXML(xa,{complexContent:{extension:{sequence:{element:ja=>ja}}}});for(const ja of Z){Z=ja.getAttribute("name");if(!Z)continue;let v,H;ja.hasAttribute("type")?v=Ba(ja.getAttribute("type")).name:I.visitXML(ja,{simpleType:{restriction:ia=>{v=Ba(ia.getAttribute("base")).name;return{maxLength:ka=>{H=+ka.getAttribute("value")}}}}});if(!v)continue;const S="true"===ja.getAttribute("nillable");let T=!1;switch(v.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":f.push(new d({name:Z,
alias:Z,type:"integer",nullable:S}));break;case "float":case "double":case "decimal":f.push(new d({name:Z,alias:Z,type:"double",nullable:S}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":f.push(new d({name:Z,
alias:Z,type:"string",nullable:S,length:H??255}));break;case "datetime":case "date":f.push(new d({name:Z,alias:Z,type:"date",nullable:S,length:H??36}));break;case "pointpropertytype":V="point";T=!0;break;case "multipointpropertytype":V="multipoint";T=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":V="polyline";T=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":V="polygon";T=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":T=
!0;a.push(new k("wfs-layer:unknown-geometry-type",`geometry type '${v}' is not supported`,{type:(new XMLSerializer).serializeToString(xa)}));break;default:a.push(new k("wfs-layer:unknown-field-type",`Unknown field type '${v}'`,{type:(new XMLSerializer).serializeToString(xa)}))}T&&f.push(new d({name:Z,alias:Z,type:"geometry",nullable:S}))}for(const ja of f)if("integer"===ja.type&&!ja.nullable&&Na.has(ja.name.toLowerCase())){ja.type="oid";break}return{geometryType:V,fields:f,errors:a}}function la(xa,
a,f,V){return ca.apply(this,arguments)}function ca(){ca=c._asyncToGenerator(function*(xa,a,f,V){({data:xa}=yield L(xa,{responseType:"text",query:qa(a,f,V),signal:V?.signal}));xa=xa.replace(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{if(V?.dateFields?.length){const Z=new Set(V.dateFields);return JSON.parse(xa,(ja,v)=>Z.has(ja)?m.parseDate(v):v)}return JSON.parse(xa)}catch(Z){throw new k("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:xa,error:Z});}});return ca.apply(this,
arguments)}function qa(xa,a,f){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:xa,OUTPUTFORMAT:a,SRSNAME:"EPSG:4326",STARTINDEX:f?.startIndex,COUNT:f?.count,...f?.customParameters}}function wa(){wa=c._asyncToGenerator(function*(xa,a,f){xa=yield L(xa,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:a,RESULTTYPE:"hits",...f?.customParameters},signal:f?.signal});xa=ya(xa.data);Ka(xa);xa=Number.parseFloat(xa.firstElementChild.getAttribute("numberMatched"));
return Number.isNaN(xa)?0:xa});return wa.apply(this,arguments)}function ya(xa){return(new DOMParser).parseFromString(xa.trim(),"text/xml")}function Ba(xa){const [a,f]=xa.split(":");return{prefix:f?a:"",name:f??a}}function Da(xa){if((xa=xa.firstElementChild?.getAttribute("version"))&&"2.0.0"!==xa)throw new k("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${xa}. Supported version: ${"2.0.0"}`);}function Ka(xa){let a="",f="";I.visitXML(xa.firstElementChild,{Exception:V=>{a=V.getAttribute("exceptionCode");
return{ExceptionText:Z=>{f=Z.textContent}}}});if(a)throw new k(`wfs-layer:${a}`,f);}const La=new Set(["json","application/json","geojson","application/json; subtype\x3dgeojson"]),Na=new Set(["objectid","fid"]);g.WFS_OID_FIELD_NAME="__esri_wfs_id__";g.describeFeatureType=x;g.findFeatureType=B;g.getCapabilities=function(xa,a){return z.apply(this,arguments)};g.getFeature=la;g.getFeatureCount=function(xa,a,f){return wa.apply(this,arguments)};g.getFeatureTypeInfo=ea;g.getWFSLayerInfo=function(xa,a,f){return E.apply(this,
arguments)};g.parseDescribeFeatureTypeResponse=aa;g.parseGetCapabilitiesResponse=A;g.prepareWFSLayerFields=J;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/dateUtils":function(){define(["exports"],function(g){function c(L){L=(new Date(L)).getTime();return Number.isNaN(L)?null:L}const da=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;
g.parseDate=function(L){var k=da.exec(L);if(k?.groups){k=k.groups;var r=+k.year,t=+k.month-1,n=+k.day,p=+(k.hours??0),q=+(k.minutes??0),N=+(k.seconds??0);if(23<p||59<q||59<N)k=null;else{var R=k.ms??"0";R=R?+R.padEnd(3,"0").substring(0,3):0;k=k.isUTC?Date.UTC(r,t,n,p,q,N,R):k.offsetSign?6E4*("+"===k.offsetSign?-1:1)*(60*+k.offsetHours+ +k.offsetMinutes)+Date.UTC(r,t,n,p,q,N,R):(new Date(r,t,n,p,q,N,R)).getTime();k=Number.isNaN(k)?null:k}}else k=null;return k??c(L)};g.parseJSDate=c;Object.defineProperties(g,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(g){function c(L,k){if(L&&k)for(const r of L.children)r.localName in k&&(L=k[r.localName],"function"===typeof L?(L=L(r))&&c(r,L):c(r,L))}function*da(L,k){for(const r of L.children)r.localName in k&&(L=k[r.localName],"function"===typeof L?yield L(r):yield*da(r,L))}g.iterateXML=da;g.visitXML=c;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),function(g,c,da,L,k,r,t,n,p,q,N,R){var M;const m=new da.JSONMap({binary:"binary",
coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});da=M=function(I){function d(G){G=I.call(this,G)||this;G.alias=null;G.defaultValue=void 0;G.description=null;G.domain=null;G.editable=
!0;G.length=-1;G.name=null;G.nullable=!0;G.type=null;G.valueType=null;G.visible=!0;return G}g._inheritsLoose(d,I);var l=d.prototype;l.readDescription=function(G,{description:z}){G=null;try{G=z?JSON.parse(z):null}catch(A){}return G?.value??null};l.readValueType=function(G,{description:z}){G=null;try{G=z?JSON.parse(z):null}catch(A){}return G?m.fromJSON(G.fieldValueType):null};l.clone=function(){return new M({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&
this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return d}(L.JSONSupport);c.__decorate([k.property({type:String,json:{write:!0}})],da.prototype,"alias",void 0);c.__decorate([k.property({type:[String,Number],json:{write:{allowNull:!0}}})],da.prototype,"defaultValue",void 0);c.__decorate([k.property()],da.prototype,"description",void 0);c.__decorate([p.reader("description")],da.prototype,
"readDescription",null);c.__decorate([k.property({types:N.types,json:{read:{reader:N.fromJSON},write:!0}})],da.prototype,"domain",void 0);c.__decorate([k.property({type:Boolean,json:{write:!0}})],da.prototype,"editable",void 0);c.__decorate([k.property({type:t.Integer,json:{write:!0}})],da.prototype,"length",void 0);c.__decorate([k.property({type:String,json:{write:!0}})],da.prototype,"name",void 0);c.__decorate([k.property({type:Boolean,json:{write:!0}})],da.prototype,"nullable",void 0);c.__decorate([n.enumeration(R.kebabDict)],
da.prototype,"type",void 0);c.__decorate([k.property()],da.prototype,"valueType",void 0);c.__decorate([p.reader("valueType",["description"])],da.prototype,"readValueType",null);c.__decorate([k.property({type:Boolean,json:{read:!1}})],da.prototype,"visible",void 0);return da=M=c.__decorate([q.subclass("esri.layers.support.Field")],da)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(g,c,da,L,
k,r){c={key:"type",base:L,typeMap:{range:r,"coded-value":da,inherited:k}};g.CodedValueDomain=da;g.DomainBase=L;g.InheritedDomain=k;g.RangeDomain=r;g.fromJSON=function(t){if(!t||!t.type)return null;switch(t.type){case "range":return r.fromJSON(t);case "codedValue":return da.fromJSON(t);case "inherited":return k.fromJSON(t)}return null};g.types=c;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(g,c,da,L,k,r,t,n,p){var q;k=q=function(N){function R(m){m=N.call(this,m)||this;m.codedValues=null;m.type="coded-value";return m}g._inheritsLoose(R,N);var M=R.prototype;M.getName=function(m){let I=null;if(this.codedValues){const d=String(m);this.codedValues.some(l=>{String(l.code)===d&&(I=l.name);return!!I})}return I};M.clone=function(){return new q({codedValues:da.clone(this.codedValues),name:this.name})};return R}(p);c.__decorate([L.property({type:[n.CodedValue],json:{write:!0}})],k.prototype,
"codedValues",void 0);c.__decorate([r.enumeration({codedValue:"coded-value"})],k.prototype,"type",void 0);return k=q=c.__decorate([t.subclass("esri.layers.support.CodedValueDomain")],k)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(g,
c,da,L,k,r,t,n){var p;g.CodedValue=p=function(q){function N(R){R=q.call(this,R)||this;R.name=null;R.code=null;return R}c._inheritsLoose(N,q);N.prototype.clone=function(){return new p({name:this.name,code:this.code})};return N}(L.JSONSupport);da.__decorate([k.property({type:String,json:{write:!0}})],g.CodedValue.prototype,"name",void 0);da.__decorate([k.property({type:[String,Number],json:{write:!0}})],g.CodedValue.prototype,"code",void 0);g.CodedValue=p=da.__decorate([n.subclass("esri.layers.support.CodedValue")],
g.CodedValue);Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(g,c,da,L,k,r,t,n,p){da=
new da.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});L=function(q){function N(R){R=q.call(this,R)||this;R.name=null;R.type=null;return R}g._inheritsLoose(N,q);return N}(L.JSONSupport);c.__decorate([k.property({type:String,json:{write:!0}})],L.prototype,"name",void 0);c.__decorate([n.enumeration(da)],L.prototype,"type",void 0);return L=c.__decorate([p.subclass("esri.layers.support.Domain")],L)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(g,c,da,L,k,r,t,n,p,q){var N;da=N=function(R){function M(m){m=R.call(this,m)||this;m.type="inherited";return m}g._inheritsLoose(M,R);M.prototype.clone=function(){return new N};return M}(q);c.__decorate([n.enumeration({inherited:"inherited"})],da.prototype,"type",void 0);return da=N=c.__decorate([p.subclass("esri.layers.support.InheritedDomain")],da)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(g,c,da,L,k,r,t,n){var p;L=p=function(q){function N(R){R=q.call(this,R)||this;R.maxValue=null;R.minValue=null;R.type="range";return R}g._inheritsLoose(N,q);N.prototype.clone=function(){return new p({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return N}(n);c.__decorate([da.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,N){return N.range&&N.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(q,N,R){N[R]=[this.minValue||0,q]}}}})],L.prototype,"maxValue",void 0);c.__decorate([da.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,N){return N.range&&N.range[0]}},write:{target:"range",writer(q,N,R){N[R]=[q,this.maxValue||0]}}}})],L.prototype,"minValue",void 0);c.__decorate([r.enumeration({range:"range"})],L.prototype,"type",void 0);return L=p=c.__decorate([t.subclass("esri.layers.support.RangeDomain")],L)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(g,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});g.kebabDict=c;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex".split(" "),function(g,c,da,L,k,r,t,n,p,q,N,R,M,m,I){return function(){function d(){var G=this;this._customParameters=
this._queryEngine=null;this._snapshotFeatures=function(){var z=g._asyncToGenerator(function*(A){const {objectIdField:O}=G._queryEngine;var h=yield m.getFeature(G._getFeatureUrl??"",G._featureType.typeName,G._getFeatureOutputFormat,{customParameters:G._customParameters,dateFields:G._queryEngine.fieldsIndex.dateFields.map(B=>B.name),signal:A});yield R.validateGeoJSON(h);r.throwIfAborted(A);A=R.createOptimizedFeatures(h,{geometryType:G._queryEngine.geometryType,hasZ:!1,objectIdField:O});if(!t.equals(G._queryEngine.spatialReference,
t.WGS84))for(var u of A)k.isSome(u.geometry)&&(u.geometry=n.convertFromGeometry(q.project(n.convertToGeometry(u.geometry,G._queryEngine.geometryType,!1,!1),t.WGS84,G._queryEngine.spatialReference)));u=1;for(const B of A)h={},M.mixAttributes(G._fieldsIndex,h,B.attributes,!0),B.attributes=h,null==B.attributes[O]&&(B.objectId=B.attributes[O]=u++);return A});return function(A){return z.apply(this,arguments)}}()}var l=d.prototype;l.destroy=function(){this._queryEngine?.destroy();this._queryEngine=null};
l.load=function(){var G=g._asyncToGenerator(function*(z,A){const {getFeatureUrl:O,getFeatureOutputFormat:h,spatialReference:u,fields:B,geometryType:E,featureType:ea,objectIdField:D,customParameters:F}=z;this._featureType=ea;this._customParameters=F;this._getFeatureUrl=O;this._getFeatureOutputFormat=h;this._fieldsIndex=new I(B);yield this._checkProjection(u);r.throwIfAborted(A);this._queryEngine=new N.QueryEngine({fields:B,geometryType:E,hasM:!1,hasZ:!1,objectIdField:D,spatialReference:u,timeInfo:null,
featureStore:new p({geometryType:E,hasM:!1,hasZ:!1})});z=yield this._snapshotFeatures(k.unwrap(A.signal));this._queryEngine.featureStore.addMany(z);return{extent:this._queryEngine.fullExtent}});return function(z,A){return G.apply(this,arguments)}}();l.applyEdits=function(){var G=g._asyncToGenerator(function*(){throw new da("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");});return function(){return G.apply(this,arguments)}}();l.queryFeatures=function(){var G=g._asyncToGenerator(function*(z=
{},A={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(z,A.signal)});return function(){return G.apply(this,arguments)}}();l.queryFeatureCount=function(){var G=g._asyncToGenerator(function*(z={},A={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(z,A.signal)});return function(){return G.apply(this,arguments)}}();l.queryObjectIds=function(){var G=g._asyncToGenerator(function*(z={},A={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(z,
A.signal)});return function(){return G.apply(this,arguments)}}();l.queryExtent=function(){var G=g._asyncToGenerator(function*(z={},A={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(z,A.signal)});return function(){return G.apply(this,arguments)}}();l.querySnapping=function(){var G=g._asyncToGenerator(function*(z,A={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(z,A.signal)});return function(z){return G.apply(this,arguments)}}();
l.refresh=function(){var G=g._asyncToGenerator(function*(z){this._customParameters=z;this._snapshotTask?.abort();this._snapshotTask=c.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(A=>{this._queryEngine.featureStore.clear();A&&this._queryEngine.featureStore.addMany(A)},A=>{this._queryEngine.featureStore.clear();r.isAbortError(A)||L.getLogger("esri.layers.WFSLayer").error(new da("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:A}))});yield this._waitSnapshotComplete();
return{extent:this._queryEngine.fullExtent}});return function(z){return G.apply(this,arguments)}}();l._waitSnapshotComplete=function(){var G=g._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return G.apply(this,arguments)}}();l._checkProjection=function(){var G=g._asyncToGenerator(function*(z){try{yield q.checkProjectionSupport(t.WGS84,z)}catch{throw new da("unsupported-projection",
"Projection not supported",{spatialReference:z});}});return function(z){return G.apply(this,arguments)}}();return d}()});