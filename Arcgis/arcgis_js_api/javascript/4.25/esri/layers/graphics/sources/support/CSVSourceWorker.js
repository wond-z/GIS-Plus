// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./arrayUtils ./accessorSupport/ensureType ./accessorSupport/decorators/subclass".split(" "),function(f,d,fa,O,q,B,y,m,p,x){function F(){F=d._asyncToGenerator(function*(M,P,X){return(yield B.eachAlways(M.map((l,A)=>P.apply(X,[l,A])))).map(l=>l.value)});return F.apply(this,arguments)}function N(M){return{ok:!0,
value:M}}function H(M){return{ok:!1,error:M}}function g(M){return q.isSome(M)&&!0===M.ok?M.value:null}function G(M){return q.isSome(M)&&!1===M.ok?M.error:null}function c(){c=d._asyncToGenerator(function*(M){if(q.isNone(M))return{ok:!1,error:Error("no promise provided")};try{return N(yield M)}catch(P){return H(P)}});return c.apply(this,arguments)}function k(){k=d._asyncToGenerator(function*(M){try{return N(yield M)}catch(P){return B.throwIfAbortError(P),H(P)}});return k.apply(this,arguments)}let I=
function(M){function P(l,A){var J=M.call(this,{})||this;J._result=null;J._abortHandle=null;J.abort=()=>{J._abortController=q.abortMaybe(J._abortController)};J.remove=J.abort;J._abortController=new AbortController;const {signal:K}=J._abortController;J.promise=l(K);J.promise.then(ca=>{J._result=N(ca);J._cleanup()},ca=>{J._result=H(ca);J._cleanup()});J._abortHandle=B.onAbort(A,J.abort);return J}d._inheritsLoose(P,M);var X=P.prototype;X.normalizeCtorArgs=function(){return{}};X.destroy=function(){this.abort()};
X._cleanup=function(){this._abortHandle=q.removeMaybe(this._abortHandle);this._abortController=null};d._createClass(P,[{key:"value",get:function(){return g(this._result)}},{key:"error",get:function(){return G(this._result)}},{key:"finished",get:function(){return q.isSome(this._result)}}]);return P}(O);fa.__decorate([y.property()],I.prototype,"value",null);fa.__decorate([y.property()],I.prototype,"error",null);fa.__decorate([y.property()],I.prototype,"finished",null);fa.__decorate([y.property()],I.prototype,
"promise",void 0);fa.__decorate([y.property()],I.prototype,"_result",void 0);I=fa.__decorate([x.subclass("esri.core.asyncUtils.ReactiveTask")],I);f.assertResult=function(M){if(!0===M.ok)return M.value;throw M.error;};f.createTask=function(M,P){return new I(M,P)};f.forEach=function(M,P,X){return B.eachAlways(M.map((l,A)=>P.apply(X,[l,A])))};f.makeResultError=H;f.makeResultOk=N;f.map=function(M,P,X){return F.apply(this,arguments)};f.result=function(M){return c.apply(this,arguments)};f.resultError=G;
f.resultOrAbort=function(M){return k.apply(this,arguments)};f.resultValue=g;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H,g,G,c,k,I,M,P,X,l,A,J,K,ca,v){function w(){return!!gb&&c.isLoaded()}function D(Q){B.isNone(Ya)&&(Ya=Promise.all([c.load(),(new Promise((ba,U)=>f(["../chunks/geometryEngineBase"],ba,U))).then(ba=>ba.geometryEngineBase),new Promise((ba,U)=>f(["./geometryAdapters/hydrated"],ba,U))]));return Ya.then(([,ba,{hydratedAdapter:U}])=>{y.throwIfAborted(Q);nb=U;gb=ba.default;gb._enableProjection(c.pe);dc.notify()})}function t(Q,ba,U=null,pa=null){return Array.isArray(Q)?0===
Q.length?[]:h(nb,Q,Q[0].spatialReference,ba,U,pa):h(nb,[Q],Q.spatialReference,ba,U,pa)[0]}function h(Q,ba,U,pa,Ba=null,Ca=null){if(B.isNone(U)||B.isNone(pa))return ba;if(W(U,pa,Ba))return ba.map(Ia=>B.unwrap(ja(Ia,U,pa)));if(B.isNone(Ba)){const Ia=J.cacheKey(U,pa);void 0!==Eb[Ia]?Ba=Eb[Ia]:(Ba=r(U,pa,void 0),B.isNone(Ba)&&(Ba=new J),Eb[Ia]=Ba)}if(B.isNone(gb)||B.isNone(Q))throw new Fb;return B.isSome(Ca)?gb._project(Q,ba,U,pa,Ba,Ca):gb._project(Q,ba,U,pa,Ba)}function C(Q,ba){if(!w())for(const U of Q)if(B.isSome(U)&&
!K.equals(U.spatialReference,ba)&&K.isValid(U.spatialReference)&&K.isValid(ba)&&!W(U.spatialReference,ba))return p.trackAccess(dc),{pending:D(),geometries:null};return{pending:null,geometries:Q.map(U=>B.isNone(U)?null:K.equals(U.spatialReference,ba)?U:K.isValid(U.spatialReference)&&K.isValid(ba)?R(U,ba):null)}}function r(Q,ba,U=null){if(B.isNone(Q)||B.isNone(ba))return null;if(B.isNone(gb)||B.isNone(nb))throw new Fb;Q=gb._getTransformation(nb,Q,ba,U,U?.spatialReference);return null!==Q?J.fromGE(Q):
null}function R(Q,ba){try{const U=t(Q,ba);if(null==U)return null;"xmin"in Q&&"xmin"in U&&(U.zmin=Q.zmin,U.zmax=Q.zmax);const pa=v.getGeometryZScaler(U.type,Q.spatialReference,ba);B.isSome(pa)&&pa(U);return U}catch(U){if(!(U instanceof Fb))throw U;return null}}function W(Q,ba,U){return U?!1:K.equals(Q,ba)?!0:K.isValid(Q)&&K.isValid(ba)&&!!a(Q,ba,Tb)}function S(){S=fa._asyncToGenerator(function*(Q,ba,U,pa){if(w())return y.waitTick(pa);if(Array.isArray(Q))for(const {source:Ba,dest:Ca,geographicTransformation:Ia}of Q){if(!W(Ba,
Ca,Ia))return D(pa)}else if(!W(Q,ba,U))return D(pa);return y.waitTick(pa)});return S.apply(this,arguments)}function ja(Q,ba,U){return Q?"x"in Q?Z(Q,ba,new k,U,0):"xmin"in Q?ya(Q,ba,new g,U,0):"rings"in Q?xa(Q,ba,new I,U,0):"paths"in Q?wa(Q,ba,new M,U,0):"points"in Q?qa(Q,ba,new G,U,0):null:null}function Z(Q,ba,U,pa,Ba){Pa[0]=Q.x;Pa[1]=Q.y;const Ca=Q.z;Pa[2]=void 0!==Ca?Ca:Ba;if(!Na(Pa,ba,0,Pa,pa,0,1))return null;U.x=Pa[0];U.y=Pa[1];U.spatialReference=pa;void 0===Ca?(U.z=void 0,U.hasZ=!1):(U.z=Pa[2],
U.hasZ=!0);void 0===Q.m?(U.m=void 0,U.hasM=!1):(U.m=Q.m,U.hasM=!0);return U}function qa(Q,ba,U,pa,Ba){const {points:Ca,hasZ:Ia,hasM:Ma}=Q;Q=[];const Va=Ca.length,Ua=[];for(var Ta of Ca)Ua.push(Ta[0],Ta[1],Ia?Ta[2]:Ba);if(!Na(Ua,ba,0,Ua,pa,0,Va))return null;for(ba=0;ba<Va;++ba){Ba=3*ba;Ta=Ua[Ba];const bb=Ua[Ba+1];Ia&&Ma?Q.push([Ta,bb,Ua[Ba+2],Ca[ba][3]]):Ia?Q.push([Ta,bb,Ua[Ba+2]]):Ma?Q.push([Ta,bb,Ca[ba][2]]):Q.push([Ta,bb])}U.points=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function wa(Q,
ba,U,pa,Ba){const {paths:Ca,hasZ:Ia,hasM:Ma}=Q;Q=[];if(!cb(Ca,Ia??!1,Ma??!1,ba,Q,pa,Ba))return null;U.paths=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function xa(Q,ba,U,pa,Ba){const {rings:Ca,hasZ:Ia,hasM:Ma}=Q;Q=[];if(!cb(Ca,Ia??!1,Ma??!1,ba,Q,pa,Ba))return null;U.rings=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function ya(Q,ba,U,pa,Ba){const {xmin:Ca,ymin:Ia,xmax:Ma,ymax:Va,hasZ:Ua,hasM:Ta}=Q;if(!Aa(Ca,Ia,Ua?Q.zmin:Ba,ba,Pa,pa))return null;U.xmin=Pa[0];U.ymin=Pa[1];Ua&&(U.zmin=
Pa[2]);if(!Aa(Ma,Va,Ua?Q.zmax:Ba,ba,Pa,pa))return null;U.xmax=Pa[0];U.ymax=Pa[1];Ua&&(U.zmax=Pa[2]);Ta&&(U.mmin=Q.mmin,U.mmax=Q.mmax);U.spatialReference=pa;return U}function Aa(Q,ba,U,pa,Ba,Ca){Ra[0]=Q;Ra[1]=ba;Ra[2]=U;return Na(Ra,pa,0,Ba,Ca,0,1)}function Ha(Q,ba,U,pa){if(B.isNone(ba)||B.isNone(pa)||2>Q.length)return!1;2===Q.length&&(Ra[0]=Q[0],Ra[1]=Q[1],Ra[2]=0,Q=Ra);return Na(Q,ba,0,U,pa,0,1)}function Ka(Q,ba,U){if(B.isNone(ba))return!1;ba=ia(ba,sb);ba=hb[ba][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ba))return!1;
ba(Q,0,Ra,0);U!==Ra&&(U[0]=Ra[0],U[1]=Ra[1],2<U.length&&(U[2]=Ra[2]));return!0}function Na(Q,ba,U,pa,Ba,Ca,Ia=1){ba=a(ba,Ba,Tb);if(B.isNone(ba))return!1;if(ba===na){if(Q===pa&&U===Ca)return!0;Ia=U+3*Ia;for(let Ma=U,Va=Ca;Ma<Ia;Ma++,Va++)pa[Va]=Q[Ma];return!0}Ia=U+3*Ia;for(let Ma=U,Va=Ca;Ma<Ia;Ma+=3,Va+=3)ba(Q,Ma,pa,Va);return!0}function cb(Q,ba,U,pa,Ba,Ca,Ia=0){const Ma=[];for(const Va of Q)for(const Ua of Va)Ma.push(Ua[0],Ua[1],ba?Ua[2]:Ia);if(!Na(Ma,pa,0,Ma,Ca,0,Ma.length/3))return!1;pa=0;Ba.length=
0;for(const Va of Q){Q=[];for(const Ua of Va)ba&&U?Q.push([Ma[pa++],Ma[pa++],Ma[pa++],Ua[3]]):ba?Q.push([Ma[pa++],Ma[pa++],Ma[pa++]]):(U?Q.push([Ma[pa++],Ma[pa++],Ua[2]]):Q.push([Ma[pa++],Ma[pa++]]),pa++);Ba.push(Q)}return!0}function b(Q,ba,U,pa){ba=pa+ba;if(ba<pa/2||U>ba)return Number.MAX_VALUE;Q=Math.abs(jb*Q)+Math.asin(U/ba);return Q>=Math.PI/2?Number.MAX_VALUE:U/Math.cos(Q)}function n(Q,ba,U){const pa=Math.sin(Q);Q=Math.cos(Q);const Ba=Math.sin(ba);ba=Math.cos(ba);U[0]=-pa;U[4]=-Ba*Q;U[8]=ba*
Q;U[12]=0;U[1]=Q;U[5]=-Ba*pa;U[9]=ba*pa;U[13]=0;U[2]=0;U[6]=ba;U[10]=Ba;U[14]=0;U[3]=0;U[7]=0;U[11]=0;U[15]=1;return U}function ea(Q,ba,U){n(Q,ba,U);F.transpose(U,U);return U}function ia(Q,ba){if(!Q)return la.UNKNOWN;if(ba.spatialReference===Q)return ba.spatialReferenceId;ba.spatialReference=Q;"metersPerUnit"in ba&&(ba.metersPerUnit=m.getMetersPerUnitForSR(Q,1));return Q.wkt===P.SphericalECEFSpatialReference.wkt?ba.spatialReferenceId=la.SPHERICAL_ECEF:K.isWGS84(Q)?ba.spatialReferenceId=la.WGS84:K.isWebMercator(Q)?
ba.spatialReferenceId=la.WEB_MERCATOR:K.isPlateCarree(Q)?ba.spatialReferenceId=la.PLATE_CARREE:Q.wkt===P.WGS84ECEFSpatialReference.wkt?ba.spatialReferenceId=la.WGS84_ECEF:Q.wkid===ca.SupportedGCSWkids.CGCS2000?ba.spatialReferenceId=la.CGCS2000:Q.wkt===P.SphericalPCPFMars.wkt?ba.spatialReferenceId=la.SPHERICAL_MARS_PCPF:Q.wkt===P.SphericalPCPFMoon.wkt?ba.spatialReferenceId=la.SPHERICAL_MOON_PCPF:K.isMars(Q)?ba.spatialReferenceId=la.GCSMARS2000:K.isMoon(Q)?ba.spatialReferenceId=la.GCSMOON2000:ba.spatialReferenceId=
la.UNKNOWN}function na(Q,ba,U,pa){Q!==U&&(U[pa++]=Q[ba++],U[pa++]=Q[ba++],U[pa]=Q[ba])}function z(Q,ba,U,pa){U[pa++]=xb*(Q[ba++]/l.earth.radius);U[pa++]=xb*(Math.PI/2-2*Math.atan(Math.exp(-Q[ba++]/l.earth.radius)));U[pa]=Q[ba]}function L(Q,ba,U,pa){z(Q,ba,U,pa);ma(U,pa,U,pa)}function T(Q,ba,U,pa){z(Q,ba,U,pa);ta(U,pa,U,pa)}function V(Q,ba,U,pa,Ba){var Ca=.4999999*Math.PI;Ca=q.clamp(jb*Q[ba+1],-Ca,Ca);Ca=Math.sin(Ca);U[pa++]=jb*Q[ba]*Ba.radius;U[pa++]=Ba.halfSemiMajorAxis*Math.log((1+Ca)/(1-Ca));U[pa]=
Q[ba+2]}function ha(Q,ba,U,pa){V(Q,ba,U,pa,l.earth)}function ka(Q,ba,U,pa){U[pa]=Q[ba]*ec;U[pa+1]=Q[ba+1]*ec;U[pa+2]=Q[ba+2]}function oa(Q,ba,U,pa){U[pa]=Q[ba]*Cb;U[pa+1]=Q[ba+1]*Cb;U[pa+2]=Q[ba+2]}function ra(Q,ba,U,pa){z(Q,ba,U,pa);ka(U,pa,U,pa)}function sa(Q,ba,U,pa,Ba){Ba+=Q[ba+2];const Ca=jb*Q[ba+1];Q=jb*Q[ba];ba=Math.cos(Ca);U[pa++]=Math.cos(Q)*ba*Ba;U[pa++]=Math.sin(Q)*ba*Ba;U[pa]=Math.sin(Ca)*Ba}function aa(Q,ba,U,pa){sa(Q,ba,U,pa,l.moon.radius)}function da(Q,ba,U,pa){sa(Q,ba,U,pa,l.mars.radius)}
function ma(Q,ba,U,pa){sa(Q,ba,U,pa,l.earth.radius)}function za(Q,ba,U,pa,Ba){var Ca=Q[ba];const Ia=Q[ba+1];ba=Q[ba+2];Q=Math.sqrt(Ca*Ca+Ia*Ia+ba*ba);ba=q.asinClamped(ba/(0===Q?1:Q));Ca=Math.atan2(Ia,Ca);U[pa++]=xb*Ca;U[pa++]=xb*ba;U[pa]=Q-Ba}function Da(Q,ba,U,pa){za(Q,ba,U,pa,l.moon.radius)}function Ga(Q,ba,U,pa){za(Q,ba,U,pa,l.mars.radius)}function Ja(Q,ba,U,pa){za(Q,ba,U,pa,l.earth.radius)}function Fa(Q,ba,U,pa){Ja(Q,ba,U,pa);ha(U,pa,U,pa)}function La(Q,ba,U,pa){Ja(Q,ba,U,pa);ta(U,pa,U,pa)}function ta(Q,
ba,U,pa){var Ba=l.earth;const Ca=jb*Q[ba];var Ia=jb*Q[ba+1];Q=Q[ba+2];ba=Math.sin(Ia);Ia=Math.cos(Ia);const Ma=Ba.radius/Math.sqrt(1-Ba.eccentricitySquared*ba*ba);U[pa++]=(Ma+Q)*Ia*Math.cos(Ca);U[pa++]=(Ma+Q)*Ia*Math.sin(Ca);U[pa++]=(Ma*(1-Ba.eccentricitySquared)+Q)*ba}function Wa(Q,ba,U,pa){var Ba=A.earthEllipsoidConstants,Ca=Q[ba],Ia=Q[ba+1];Q=Q[ba+2];let Ma;ba=Math.abs(Q);var Va=Ca*Ca+Ia*Ia;var Ua=Math.sqrt(Va);var Ta=Va+Q*Q;var bb=Math.sqrt(Ta);Ca=Math.atan2(Ia,Ca);var pb=Q*Q/Ta;Ta=Va/Ta;Ia=Ba.a2/
bb;Va=Ba.a3-Ba.a4/bb;.3<Ta?(pb=ba/bb*(1+Ta*(Ba.a1+Ia+pb*Va)/bb),bb=Math.asin(pb),Ia=pb*pb,Ta=Math.sqrt(1-Ia)):(Ta=Ua/bb*(1-pb*(Ba.a5-Ia-Ta*Va)/bb),bb=Math.acos(Ta),Ia=1-Ta*Ta,pb=Math.sqrt(Ia));Ma=1-l.earth.eccentricitySquared*Ia;Ia=l.earth.radius/Math.sqrt(Ma);Ba=Ba.a6*Ia;Ia=Ua-Ia*Ta;Va=ba-Ba*pb;ba=Ta*Ia+pb*Va;Ua=Ta*Va-pb*Ia;Ba=Ua/(Ba/Ma+ba);bb+=Ba;0>Q&&(bb=-bb);U[pa++]=xb*Ca;U[pa++]=xb*bb;U[pa]=ba+Ua*Ba/2}function ab(Q,ba,U,pa){Wa(Q,ba,U,pa);ma(U,pa,U,pa)}function $a(Q,ba,U,pa){Wa(Q,ba,U,pa);ha(U,
pa,U,pa)}function a(Q,ba,U=Sa()){return B.isNone(Q)||B.isNone(ba)?null:db(Q,ba,U).projector}function db(Q,ba,U){if(B.isNone(Q)||B.isNone(ba)||U.source.spatialReference===Q&&U.dest.spatialReference===ba)return U;const pa=ia(Q,U.source),Ba=ia(ba,U.dest);pa===la.UNKNOWN&&Ba===la.UNKNOWN?K.equals(Q,ba)?U.projector=na:U.projector=null:U.projector=hb[pa][Ba];return U}function Sa(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,
metersPerUnit:1},projector:na}}let gb=null,nb=null,Ya=null,Eb={};const dc=new x.SimpleObservable;let Fb=function(Q){function ba(){return Q.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}fa._inheritsLoose(ba,Q);return ba}(O);var la;(function(Q){Q[Q.UNKNOWN=0]="UNKNOWN";Q[Q.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Q[Q.WGS84=2]="WGS84";Q[Q.WEB_MERCATOR=3]="WEB_MERCATOR";Q[Q.WGS84_ECEF=4]="WGS84_ECEF";Q[Q.CGCS2000=5]="CGCS2000";Q[Q.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";Q[Q.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Q[Q.GCSMARS2000=8]="GCSMARS2000";Q[Q.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";Q[Q.GCSMOON2000=10]="GCSMOON2000";Q[Q.LON_LAT=11]="LON_LAT";Q[Q.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const ec=l.earth.radius*Math.PI/180,Cb=180/(l.earth.radius*Math.PI),hb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ha,[la.PLATE_CARREE]:ka,[la.WGS84]:na,[la.WGS84_ECEF]:ta},[la.CGCS2000]:{[la.CGCS2000]:na,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ka,[la.WGS84]:null,[la.WGS84_ECEF]:ta},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:na,[la.GCSMOON2000]:null,
[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:na,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:z,[la.WGS84_COMPARABLE_LON_LAT]:z,[la.SPHERICAL_ECEF]:L,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:na,[la.PLATE_CARREE]:ra,[la.WGS84]:z,[la.WGS84_ECEF]:T},[la.WGS84_ECEF]:{[la.CGCS2000]:Wa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Wa,[la.WGS84_COMPARABLE_LON_LAT]:Wa,[la.SPHERICAL_ECEF]:ab,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:$a,[la.PLATE_CARREE]:function(Q,ba,U,pa){Wa(Q,ba,U,pa);ka(U,pa,U,pa)},[la.WGS84]:Wa,[la.WGS84_ECEF]:na},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ja,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ja,[la.WGS84_COMPARABLE_LON_LAT]:Ja,[la.SPHERICAL_ECEF]:na,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(Q,ba,U,pa){Ja(Q,ba,U,pa);ka(U,pa,U,pa)},[la.WGS84]:Ja,
[la.WGS84_ECEF]:La},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ga,[la.GCSMOON2000]:null,[la.LON_LAT]:Ga,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:na,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Da,[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:na,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:na,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:na,
[la.GCSMARS2000]:na,[la.GCSMOON2000]:na,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ha,[la.PLATE_CARREE]:ka,[la.WGS84]:na,[la.WGS84_ECEF]:ta},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ka,[la.WGS84]:na,[la.WGS84_ECEF]:ta},[la.PLATE_CARREE]:{[la.CGCS2000]:oa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:function(Q,ba,U,pa){oa(Q,ba,U,pa);ma(U,pa,U,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(Q,ba,U,pa){oa(Q,ba,U,pa);ha(U,pa,U,pa)},[la.PLATE_CARREE]:na,[la.WGS84]:oa,[la.WGS84_ECEF]:function(Q,ba,U,pa){oa(Q,ba,U,
pa);ta(U,pa,U,pa)}}},sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},fc={spatialReference:null,spatialReferenceId:la.UNKNOWN},Tb=Sa(),zc=Sa(),jb=q.deg2rad(1),xb=q.rad2deg(1),Ra=H.create(),ob=H.create(),tb=H.create(),Pa=H.create(),Hb=H.create();d.canProjectToWGS84ComparableLonLat=function(Q){if(B.isNone(Q))return!1;Q=ia(Q,sb);return!!hb[Q][la.WGS84_COMPARABLE_LON_LAT]};d.canProjectWithoutEngine=W;d.computeENUToSphericalPCPFLocalRotation=n;d.computeSphericalPCPFToENULocalRotation=ea;d.computeTranslationToOriginAndRotation=
function(Q,ba,U,pa){if(B.isNone(Q)||B.isNone(pa))return!1;var Ba=ia(Q,sb),Ca=ia(pa,fc);if(Ba===Ca&&Ca!==la.SPHERICAL_ECEF&&Ca!==la.SPHERICAL_MARS_PCPF&&Ca!==la.SPHERICAL_MOON_PCPF&&(Ba!==la.UNKNOWN||K.equals(Q,pa)))return F.fromTranslation(U,ba),!0;if(Ca===la.SPHERICAL_ECEF||Ca===la.SPHERICAL_MARS_PCPF||Ca===la.SPHERICAL_MOON_PCPF){Ba=hb[Ba][la.LON_LAT];Ca=hb[la.LON_LAT][Ca];if(B.isNone(Ba)||B.isNone(Ca))return!1;Ba(ba,0,ob,0);Ca(ob,0,tb,0);n(jb*ob[0],jb*ob[1],U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];
return!0}if((Ca===la.WEB_MERCATOR||Ca===la.PLATE_CARREE)&&(Ba===la.WGS84||Ba===la.CGCS2000&&Ca===la.PLATE_CARREE||Ba===la.SPHERICAL_ECEF||Ba===la.WEB_MERCATOR)){Q=hb[Ba][la.LON_LAT];Ca=hb[la.LON_LAT][Ca];if(B.isNone(Q)||B.isNone(Ca))return!1;Q(ba,0,ob,0);Ca(ob,0,tb,0);Ba===la.SPHERICAL_ECEF?ea(jb*ob[0],jb*ob[1],U):F.identity(U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];return!0}return!1};d.getProjectorName=function(Q,ba){switch(a(Q,ba,Tb)){case na:return"copy3";case ma:return"wgs84ToSphericalECEF";case ha:return"wgs84ToWebMercator";
case ka:return"wgs84ToPlateCarree";case ta:return"wgs84ToWGS84ECEF";case z:return"webMercatorToWGS84";case L:return"webMercatorToSphericalECEF";case T:return"webMercatorToWGS84ECEF";case ra:return"webMercatorToPlateCarree";case Wa:return"wgs84ECEFToWGS84";case ab:return"wgs84ECEFToSphericalECEF";case $a:return"wgs84ECEFToWebMercator";case Ja:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ga:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";
case La:return"sphericalECEFToWGS84ECEF";case da:return"mars2000ToSphericalPCPF";case aa:return"moon2000ToSphericalPCPF";default:return null}};d.getTransformation=r;d.getTransformations=function(Q,ba,U=null){if(B.isNone(gb)||B.isNone(nb))throw new Fb;Q=gb._getTransformationBySuitability(nb,Q,ba,U,U?.spatialReference);if(null!==Q){ba=[];for(const pa of Q)ba.push(J.fromGE(pa));return ba}return[]};d.initializeProjection=function(Q,ba,U,pa){return S.apply(this,arguments)};d.isLoaded=w;d.load=D;d.localLinearScaleFactors=
function(Q,ba,U,pa){if(B.isNone(ba)||B.isNone(pa))return!1;const Ba=ia(ba,sb);var Ca=ia(pa,fc);if(Ba===Ca&&Ba!==la.UNKNOWN||K.equals(ba,pa))return U[0]=1,U[1]=1,U[2]=1,!0;if(Ba===la.SPHERICAL_ECEF){ba=N.length(Q);Q=ba/Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]);ba/=l.earth.radius;if(Ca===la.WEB_MERCATOR)return U[0]=Q*ba,U[1]=Q*ba,U[2]=1,!0;if(Ca===la.WGS84||Ca===la.CGCS2000)return Ca=Cb,U[0]=Ca*Q*ba,U[1]=Ca*ba,U[2]=1,!0}else if(Ba===la.PLATE_CARREE){if(Ca===la.WGS84||Ca===la.CGCS2000)return U[0]=Cb,U[1]=Cb,U[2]=
1,!0;if(Ca===la.WEB_MERCATOR)return Ca=Q[1]/l.earth.radius,U[0]=1,U[1]=1/Math.cos(Ca),U[2]=1,!0}return!1};d.lonLatToSphericalPCPF=function(Q,ba,U,pa){const Ba=Math.cos(U);Q[0]=Math.cos(ba)*Ba*pa;Q[1]=Math.sin(ba)*Ba*pa;Q[2]=Math.sin(U)*pa};d.lonLatToWebMercatorComparable=V;d.project=t;d.projectBoundingRect=function(Q,ba,U,pa){if(null==Q)return!1;if(K.equals(ba,pa))return X.copy(U,Q),!0;Ra[0]=Q[0];Ra[1]=Q[1];Ra[2]=0;if(!Na(Ra,ba,0,Ra,pa,0,1))return!1;U[0]=Ra[0];U[1]=Ra[1];Ra[0]=Q[2];Ra[1]=Q[3];Ra[2]=
0;if(!Na(Ra,ba,0,Ra,pa,0,1))return!1;U[2]=Ra[0];U[3]=Ra[1];return!0};d.projectBoundingSphere=function(Q,ba,U,pa){if(B.isNone(ba)||B.isNone(pa))return!1;ba=db(ba,pa,zc);if(ba.projector===na)return U[0]=Q[0],U[1]=Q[1],U[2]=Q[2],U[3]=Q[3],!0;if(B.isNone(ba.projector))return!1;const {source:Ba,dest:Ca}=ba;if(Ca.spatialReferenceId===la.WEB_MERCATOR){ba=hb[Ba.spatialReferenceId][la.WGS84];if(B.isNone(ba))return!1;ba(Q,0,ob,0);ha(ob,0,U,0);U[3]=b(ob[1],Q[2],Q[3],l.earth.radius);return!0}if(Ba.spatialReferenceId!==
la.WGS84&&Ba.spatialReferenceId!==la.CGCS2000||Ca.spatialReferenceId!==la.PLATE_CARREE)ba.projector(Q,0,U,0),U[3]=Q[3]*(Ba.metersPerUnit??1)/(Ca.metersPerUnit??1);else{pa=hb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ia=Q[3];B.isSome(hb[Ba.spatialReferenceId][la.SPHERICAL_ECEF])&&B.isSome(pa)&&(Ia=b(Q[1],Q[2],Q[3],l.earth.radius));ba.projector(Q,0,U,0);U[3]=Ia}return!0};d.projectBuffer=Na;d.projectDirection=function(Q,ba,U,pa,Ba){N.copy(Pa,Q);N.add(Hb,Q,ba);Ha(Pa,U,Pa,Ba);Ha(Hb,U,Hb,Ba);N.subtract(pa,
Hb,Pa);N.normalize(pa,pa)};d.projectExtent=function(Q,ba,U=ba.spatialReference,pa=0){return B.isSome(Q.spatialReference)&&B.isSome(U)&&B.isSome(ya(Q,Q.spatialReference,ba,U,pa))};d.projectMany=h;d.projectMultipoint=function(Q,ba,U=ba.spatialReference,pa=0){return B.isSome(Q.spatialReference)&&B.isSome(U)&&B.isSome(qa(Q,Q.spatialReference,ba,U,pa))};d.projectOrLoad=function(Q,ba){Q=C([Q],ba);return B.isSome(Q.pending)?{pending:Q.pending,geometry:null}:B.isSome(Q.geometries)?{pending:null,geometry:Q.geometries[0]}:
{pending:null,geometry:null}};d.projectOrLoadMany=C;d.projectPoint=function(Q,ba,U=ba.spatialReference,pa=0){return B.isSome(U)&&B.isSome(Q.spatialReference)&&B.isSome(Z(Q,Q.spatialReference,ba,U,pa))};d.projectPointToVector=function(Q,ba,U,pa=0){Pa[0]=Q.x;Pa[1]=Q.y;const Ba=Q.z;Pa[2]=void 0!==Ba?Ba:pa;return Na(Pa,Q.spatialReference,0,ba,U,0,1)};d.projectPointToWGS84ComparableLonLat=function(Q,ba){Pa[0]=Q.x;Pa[1]=Q.y;const U=Q.z;Pa[2]=void 0!==U?U:0;return Ka(Pa,Q.spatialReference,ba)};d.projectPolygon=
function(Q,ba,U=ba.spatialReference,pa=0){return B.isSome(Q.spatialReference)&&B.isSome(U)&&B.isSome(xa(Q,Q.spatialReference,ba,U,pa))};d.projectPolygonToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:ba,rings:U},pa,Ba=0){ba=ia(ba,sb);ba=hb[ba][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ba))return!1;Q=Q?Ca=>Ca:Ca=>N.set(Pa,Ca[0],Ca[1],Ba);for(const Ca of U){U=[];for(const Ia of Ca){const Ma=[0,0,Ba];ba(Q(Ia),0,Ma,0);U.push(Ma)}pa.push(U)}return!0};d.projectPolyline=function(Q,ba,U=ba.spatialReference,
pa=0){return B.isSome(Q.spatialReference)&&B.isSome(U)&&B.isSome(wa(Q,Q.spatialReference,ba,U,pa))};d.projectPolylineToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:ba,paths:U},pa,Ba=0){ba=ia(ba,sb);ba=hb[ba][la.WGS84_COMPARABLE_LON_LAT];if(B.isNone(ba))return!1;Q=Q?Ca=>Ca:Ca=>N.set(Pa,Ca[0],Ca[1],Ba);for(const Ca of U){U=[];for(const Ia of Ca){const Ma=[0,0,Ba];ba(Q(Ia),0,Ma,0);U.push(Ma)}pa.push(U)}return!0};d.projectVectorToDehydratedPoint=function(Q,ba,U){return Na(Q,ba,0,Pa,U.spatialReference,
0,1)?(U.x=Pa[0],U.y=Pa[1],U.z=Pa[2],U):null};d.projectVectorToPoint=function(Q,ba,U){if(B.isNone(ba)||B.isNone(U))return null;const pa=new k({spatialReference:U});return Na(Q,ba,0,Pa,U,0,1)?(pa.x=Pa[0],pa.y=Pa[1],pa.z=Pa[2],pa):null};d.projectVectorToVector=Ha;d.projectVectorToWGS84ComparableLonLat=function(Q,ba,U){return Ka(Q,ba,U)};d.projectWithoutEngine=ja;d.projectXYZToVector=Aa;d.sphericalPCPFtoLonLatElevation=za;d.test={get loadPromise(){return Ya}};d.tryProjectWithZConversion=R;d.unload=function(){Ya=
nb=gb=null;Eb={}};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(f,d,fa,O,q,B,y,m){function p(Z){Z=r[Z];if(!Z)throw Error("unknown type");return Z}function x(Z){return C[Z].baseUnit}function F(Z,qa=null){qa=qa||p(Z);return C[qa].baseUnit===
Z}function N(Z,qa,wa){if(qa===wa)return Z;const xa=p(qa);if(xa!==p(wa))throw Error("incompatible units");Z=F(qa,xa)?Z:Z*C[xa].units[qa].inBaseUnits;return F(wa,xa)?Z:Z/C[xa].units[wa].inBaseUnits}function H(Z,qa){Z=N(Z,qa,"meters");return 3E3>Math.abs(Z)?"meters":"kilometers"}function g(Z,qa){Z=N(Z,qa,"meters");return 1E5>Math.abs(Z)?"meters":"kilometers"}function G(Z,qa){Z=N(Z,qa,"feet");return 1E3>Math.abs(Z)?"feet":"miles"}function c(Z,qa){Z=N(Z,qa,"feet");return 1E5>Math.abs(Z)?"feet":"miles"}
function k(Z,qa){Z=N(Z,qa,"square-meters");return 3E6>Math.abs(Z)?"square-meters":"square-kilometers"}function I(Z,qa){Z=N(Z,qa,"square-feet");return 1E6>Math.abs(Z)?"square-feet":"square-miles"}function M(Z){return h.fromJSON(Z.toLowerCase())||null}function P(Z){const qa=X(Z),wa=q.getReferenceEllipsoid(Z).metersPerDegree;return qa>=wa?"meters":J(Z)}function X(Z,qa=B.earth.metersPerDegree){return O.unwrapOr(l(Z,!0),qa)}function l(Z,qa=!1){const wa=O.isSome(Z)?Z.wkid:null;Z=O.isSome(Z)?Z.wkt:null;
let xa=null;if(wa){if(y.isWKIDFromMars(wa))return B.mars.metersPerDegree;if(y.isWKIDFromMoon(wa))return B.moon.metersPerDegree;xa=w.values[w[wa]];!xa&&qa&&t.has(wa)&&(xa=ca)}else Z&&(/^PROJCS/i.test(Z)?xa=A(v.exec(Z),xa):/^GEOCCS/i.test(Z)&&(xa=A(D.exec(Z),xa)));return xa}function A(Z,qa){return Z&&Z[1]?parseFloat(Z[1].split(",")[1]):qa}function J(Z){var qa=O.isSome(Z)?Z.wkid:null,wa=O.isSome(Z)?Z.wkt:null;Z=null;if(qa)Z=w.units[w[qa]];else if(wa&&(qa=/^PROJCS/i.test(wa)?v:/^GEOCCS/i.test(wa)?D:null)&&
(qa=qa.exec(wa))&&qa[1]&&(qa=qa[1],Z=(Z=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&Z[1],!Z||!w.units.includes(Z))){qa=parseFloat(qa.split(",")[1]);Z=null;wa=w.values;for(let xa=0;xa<wa.length;++xa)if(1E-7>Math.abs(qa-wa[xa])){Z=w.units[xa];break}}return O.isSome(Z)?M(Z):null}function K(Z){Z=J(Z);if(O.isNone(Z))return null;switch(Z){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const ca=B.earth.radius*Math.PI/200,v=/UNIT\[([^\]]+)\]\]$/i,w=m,D=/UNIT\[([^\]]+)\]/i,t=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),h=fa.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});d={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};m={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(Z=>Z*Z)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const C={length:{baseUnit:"meters",units:d},area:{baseUnit:"square-meters",units:m},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},r=(()=>{const Z={};for(const qa in C)for(const wa in C[qa].units)Z[wa]=qa;return Z})(),R="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),W=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),S={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ja={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};d=fa.strict()(S);m=fa.strict()(ja);fa=fa.strict()({...S,...ja});f.areaUnitFromSpatialReference=function(Z){Z=J(Z);return O.isNone(Z)?null:W.get(Z)};f.areaUnitsJSONMap=d;f.baseUnitForUnit=function(Z){return x(p(Z))};f.baseUnitForUnitType=x;f.convertUnit=N;f.getDefaultUnitForView=function(Z){if(O.isNone(Z))return"metric";var qa=Z.map;if(qa=qa&&"portalItem"in qa?qa.portalItem?.portal:null)switch(qa?.user?.units??qa.units){case "metric":return"metric";case "english":return"imperial"}return O.unwrapOr(K(Z.spatialReference),
"metric")};f.getDefaultUnitSystem=K;f.getMetersPerUnit=l;f.getMetersPerUnitForSR=X;f.getMetersPerVerticalUnitForSR=function(Z){if(O.isSome(Z)&&!y.isEarth(Z))return 1;Z=X(Z);return 1E5<Z?1:Z};f.getUnitString=J;f.getVerticalUnitStringForSR=P;f.inchesPerMeter=39.37;f.isBaseUnit=F;f.isMeasurementSystem=function(Z){return"imperial"===Z||"metric"===Z};f.lengthToDegrees=function(Z,qa,wa){return N(Z,qa,"meters")/(wa*Math.PI/180)};f.lengthUnitFromSpatialReference=function(Z){Z=J(Z);return O.isNone(Z)||!R.includes(Z)?
null:Z};f.lengthUnitsJSONMap=m;f.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");f.measurementLengthUnits=R;f.preferredAreaUnit=function(Z,qa,wa){switch(wa){case "metric":return k(Z,qa);case "imperial":return I(Z,qa);default:return wa}};f.preferredImperialAreaUnit=I;f.preferredImperialLengthUnit=G;f.preferredImperialVerticalLengthUnit=c;f.preferredLengthUnit=function(Z,qa,wa){switch(wa){case "metric":return H(Z,
qa);case "imperial":return G(Z,qa);default:return wa}};f.preferredMetricAreaUnit=k;f.preferredMetricLengthUnit=H;f.preferredMetricVerticalLengthUnit=g;f.preferredVerticalLengthUnit=function(Z,qa,wa){switch(wa){case "metric":return g(Z,qa);case "imperial":return c(Z,qa);default:return wa}};f.unitFromRESTJSON=M;f.unitToRESTJSON=function(Z){return h.toJSON(Z)||null};f.unitType=p;f.unitsJSONMap=fa;f.verticalLengthUnitFromSpatialReference=function(Z){Z=P(Z);return O.isNone(Z)||!R.includes(Z)?null:Z};Object.defineProperties(f,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(f,d,fa,O,q){function B(F){return new fa({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${F.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const y=B(O.earth),m=B(O.mars),p=B(O.moon),x=new fa({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${O.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});f.SphericalECEFSpatialReference=y;f.SphericalPCPFMars=
m;f.SphericalPCPFMoon=p;f.WGS84ECEFSpatialReference=x;f.createSphericalPCPF=B;f.getReferenceEllipsoid=function(F){return d.isSome(F)&&(q.isMars(F)||F===m)?O.mars:d.isSome(F)&&(q.isMoon(F)||F===p)?O.moon:O.earth};f.getReferenceEllipsoidFromWKID=function(F){return q.isWKIDFromMars(F)?O.mars:q.isWKIDFromMoon(F)?O.moon:O.earth};f.getSphericalPCPF=function(F){return F&&(q.isMars(F)||F===m)?m:F&&(q.isMoon(F)||F===p)?p:y};f.getSphericalPCPFForEllipsoid=function(F){return F&&F===O.mars?m:F&&F===O.moon?p:
y};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(f,d){let fa=function(){function O(){this._observers=[]}var q=O.prototype;q.observe=function(B){this._observers.includes(B)||this._observers.push(B);return new d.ObservationHandle(this._observers,B)};q.notify=function(){const B=this._observers.slice();for(let y=0;y<B.length;++y){const m=B[y];
m.onInvalidated();m.onCommitted()}};return O}();f.SimpleObservable=fa;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(f,d,fa){function O(b,n){b[0]=n[0];b[1]=n[1];b[2]=n[2];b[3]=n[3];b[4]=n[4];b[5]=n[5];b[6]=n[6];b[7]=n[7];b[8]=n[8];b[9]=n[9];b[10]=n[10];b[11]=n[11];b[12]=n[12];b[13]=n[13];b[14]=n[14];b[15]=n[15];return b}function q(b,n,ea,ia,na,z,L,T,V,ha,ka,oa,ra,sa,aa,da,
ma){b[0]=n;b[1]=ea;b[2]=ia;b[3]=na;b[4]=z;b[5]=L;b[6]=T;b[7]=V;b[8]=ha;b[9]=ka;b[10]=oa;b[11]=ra;b[12]=sa;b[13]=aa;b[14]=da;b[15]=ma;return b}function B(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function y(b,n){if(b===n){const ea=n[1],ia=n[2],na=n[3],z=n[6],L=n[7],T=n[11];b[1]=n[4];b[2]=n[8];b[3]=n[12];b[4]=ea;b[6]=n[9];b[7]=n[13];b[8]=ia;b[9]=z;b[11]=n[14];b[12]=na;b[13]=L;b[14]=T}else b[0]=n[0],b[1]=n[4],b[2]=
n[8],b[3]=n[12],b[4]=n[1],b[5]=n[5],b[6]=n[9],b[7]=n[13],b[8]=n[2],b[9]=n[6],b[10]=n[10],b[11]=n[14],b[12]=n[3],b[13]=n[7],b[14]=n[11],b[15]=n[15];return b}function m(b,n){const ea=n[0],ia=n[1],na=n[2],z=n[3],L=n[4],T=n[5],V=n[6],ha=n[7],ka=n[8],oa=n[9],ra=n[10],sa=n[11],aa=n[12],da=n[13],ma=n[14];n=n[15];const za=ea*T-ia*L,Da=ea*V-na*L,Ga=ea*ha-z*L,Ja=ia*V-na*T,Fa=ia*ha-z*T,La=na*ha-z*V,ta=ka*da-oa*aa,Wa=ka*ma-ra*aa,ab=ka*n-sa*aa,$a=oa*ma-ra*da,a=oa*n-sa*da,db=ra*n-sa*ma;let Sa=za*db-Da*a+Ga*$a+
Ja*ab-Fa*Wa+La*ta;if(!Sa)return null;Sa=1/Sa;b[0]=(T*db-V*a+ha*$a)*Sa;b[1]=(na*a-ia*db-z*$a)*Sa;b[2]=(da*La-ma*Fa+n*Ja)*Sa;b[3]=(ra*Fa-oa*La-sa*Ja)*Sa;b[4]=(V*ab-L*db-ha*Wa)*Sa;b[5]=(ea*db-na*ab+z*Wa)*Sa;b[6]=(ma*Ga-aa*La-n*Da)*Sa;b[7]=(ka*La-ra*Ga+sa*Da)*Sa;b[8]=(L*a-T*ab+ha*ta)*Sa;b[9]=(ia*ab-ea*a-z*ta)*Sa;b[10]=(aa*Fa-da*Ga+n*za)*Sa;b[11]=(oa*Ga-ka*Fa-sa*za)*Sa;b[12]=(T*Wa-L*$a-V*ta)*Sa;b[13]=(ea*$a-ia*Wa+na*ta)*Sa;b[14]=(da*Da-aa*Ja-ma*za)*Sa;b[15]=(ka*Ja-oa*Da+ra*za)*Sa;return b}function p(b,
n){const ea=n[0],ia=n[1],na=n[2],z=n[3],L=n[4],T=n[5],V=n[6],ha=n[7],ka=n[8],oa=n[9],ra=n[10],sa=n[11],aa=n[12],da=n[13],ma=n[14];n=n[15];b[0]=T*(ra*n-sa*ma)-oa*(V*n-ha*ma)+da*(V*sa-ha*ra);b[1]=-(ia*(ra*n-sa*ma)-oa*(na*n-z*ma)+da*(na*sa-z*ra));b[2]=ia*(V*n-ha*ma)-T*(na*n-z*ma)+da*(na*ha-z*V);b[3]=-(ia*(V*sa-ha*ra)-T*(na*sa-z*ra)+oa*(na*ha-z*V));b[4]=-(L*(ra*n-sa*ma)-ka*(V*n-ha*ma)+aa*(V*sa-ha*ra));b[5]=ea*(ra*n-sa*ma)-ka*(na*n-z*ma)+aa*(na*sa-z*ra);b[6]=-(ea*(V*n-ha*ma)-L*(na*n-z*ma)+aa*(na*ha-z*
V));b[7]=ea*(V*sa-ha*ra)-L*(na*sa-z*ra)+ka*(na*ha-z*V);b[8]=L*(oa*n-sa*da)-ka*(T*n-ha*da)+aa*(T*sa-ha*oa);b[9]=-(ea*(oa*n-sa*da)-ka*(ia*n-z*da)+aa*(ia*sa-z*oa));b[10]=ea*(T*n-ha*da)-L*(ia*n-z*da)+aa*(ia*ha-z*T);b[11]=-(ea*(T*sa-ha*oa)-L*(ia*sa-z*oa)+ka*(ia*ha-z*T));b[12]=-(L*(oa*ma-ra*da)-ka*(T*ma-V*da)+aa*(T*ra-V*oa));b[13]=ea*(oa*ma-ra*da)-ka*(ia*ma-na*da)+aa*(ia*ra-na*oa);b[14]=-(ea*(T*ma-V*da)-L*(ia*ma-na*da)+aa*(ia*V-na*T));b[15]=ea*(T*ra-V*oa)-L*(ia*ra-na*oa)+ka*(ia*V-na*T);return b}function x(b){const n=
b[0],ea=b[1],ia=b[2],na=b[3],z=b[4],L=b[5],T=b[6],V=b[7],ha=b[8],ka=b[9],oa=b[10],ra=b[11],sa=b[12],aa=b[13],da=b[14];b=b[15];return(n*L-ea*z)*(oa*b-ra*da)-(n*T-ia*z)*(ka*b-ra*aa)+(n*V-na*z)*(ka*da-oa*aa)+(ea*T-ia*L)*(ha*b-ra*sa)-(ea*V-na*L)*(ha*da-oa*sa)+(ia*V-na*T)*(ha*aa-ka*sa)}function F(b,n,ea){const ia=n[0],na=n[1],z=n[2],L=n[3],T=n[4],V=n[5],ha=n[6],ka=n[7],oa=n[8],ra=n[9],sa=n[10],aa=n[11],da=n[12],ma=n[13],za=n[14];n=n[15];let Da=ea[0],Ga=ea[1],Ja=ea[2],Fa=ea[3];b[0]=Da*ia+Ga*T+Ja*oa+Fa*
da;b[1]=Da*na+Ga*V+Ja*ra+Fa*ma;b[2]=Da*z+Ga*ha+Ja*sa+Fa*za;b[3]=Da*L+Ga*ka+Ja*aa+Fa*n;Da=ea[4];Ga=ea[5];Ja=ea[6];Fa=ea[7];b[4]=Da*ia+Ga*T+Ja*oa+Fa*da;b[5]=Da*na+Ga*V+Ja*ra+Fa*ma;b[6]=Da*z+Ga*ha+Ja*sa+Fa*za;b[7]=Da*L+Ga*ka+Ja*aa+Fa*n;Da=ea[8];Ga=ea[9];Ja=ea[10];Fa=ea[11];b[8]=Da*ia+Ga*T+Ja*oa+Fa*da;b[9]=Da*na+Ga*V+Ja*ra+Fa*ma;b[10]=Da*z+Ga*ha+Ja*sa+Fa*za;b[11]=Da*L+Ga*ka+Ja*aa+Fa*n;Da=ea[12];Ga=ea[13];Ja=ea[14];Fa=ea[15];b[12]=Da*ia+Ga*T+Ja*oa+Fa*da;b[13]=Da*na+Ga*V+Ja*ra+Fa*ma;b[14]=Da*z+Ga*ha+Ja*
sa+Fa*za;b[15]=Da*L+Ga*ka+Ja*aa+Fa*n;return b}function N(b,n,ea){const ia=ea[0],na=ea[1];ea=ea[2];if(n===b)b[12]=n[0]*ia+n[4]*na+n[8]*ea+n[12],b[13]=n[1]*ia+n[5]*na+n[9]*ea+n[13],b[14]=n[2]*ia+n[6]*na+n[10]*ea+n[14],b[15]=n[3]*ia+n[7]*na+n[11]*ea+n[15];else{const z=n[0],L=n[1],T=n[2],V=n[3],ha=n[4],ka=n[5],oa=n[6],ra=n[7],sa=n[8],aa=n[9],da=n[10],ma=n[11];b[0]=z;b[1]=L;b[2]=T;b[3]=V;b[4]=ha;b[5]=ka;b[6]=oa;b[7]=ra;b[8]=sa;b[9]=aa;b[10]=da;b[11]=ma;b[12]=z*ia+ha*na+sa*ea+n[12];b[13]=L*ia+ka*na+aa*
ea+n[13];b[14]=T*ia+oa*na+da*ea+n[14];b[15]=V*ia+ra*na+ma*ea+n[15]}return b}function H(b,n,ea){const ia=ea[0],na=ea[1];ea=ea[2];b[0]=n[0]*ia;b[1]=n[1]*ia;b[2]=n[2]*ia;b[3]=n[3]*ia;b[4]=n[4]*na;b[5]=n[5]*na;b[6]=n[6]*na;b[7]=n[7]*na;b[8]=n[8]*ea;b[9]=n[9]*ea;b[10]=n[10]*ea;b[11]=n[11]*ea;b[12]=n[12];b[13]=n[13];b[14]=n[14];b[15]=n[15];return b}function g(b,n,ea,ia){let na=ia[0],z=ia[1];ia=ia[2];let L=Math.sqrt(na*na+z*z+ia*ia);var T=void 0,V=void 0;let ha=void 0,ka=void 0,oa=void 0,ra=void 0,sa=void 0,
aa=void 0,da=void 0,ma=void 0,za=void 0,Da=void 0,Ga=void 0,Ja=void 0,Fa=void 0,La=void 0,ta=void 0,Wa=void 0,ab=void 0,$a=void 0,a=void 0,db=void 0;V=T=void 0;if(L<fa.getEpsilon())return null;L=1/L;na*=L;z*=L;ia*=L;T=Math.sin(ea);V=Math.cos(ea);ha=1-V;ka=n[0];oa=n[1];ra=n[2];sa=n[3];aa=n[4];da=n[5];ma=n[6];za=n[7];Da=n[8];Ga=n[9];Ja=n[10];Fa=n[11];La=na*na*ha+V;ta=z*na*ha+ia*T;Wa=ia*na*ha-z*T;ab=na*z*ha-ia*T;$a=z*z*ha+V;a=ia*z*ha+na*T;db=na*ia*ha+z*T;T=z*ia*ha-na*T;V=ia*ia*ha+V;b[0]=ka*La+aa*ta+
Da*Wa;b[1]=oa*La+da*ta+Ga*Wa;b[2]=ra*La+ma*ta+Ja*Wa;b[3]=sa*La+za*ta+Fa*Wa;b[4]=ka*ab+aa*$a+Da*a;b[5]=oa*ab+da*$a+Ga*a;b[6]=ra*ab+ma*$a+Ja*a;b[7]=sa*ab+za*$a+Fa*a;b[8]=ka*db+aa*T+Da*V;b[9]=oa*db+da*T+Ga*V;b[10]=ra*db+ma*T+Ja*V;b[11]=sa*db+za*T+Fa*V;n!==b&&(b[12]=n[12],b[13]=n[13],b[14]=n[14],b[15]=n[15]);return b}function G(b,n,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const na=n[4],z=n[5],L=n[6],T=n[7],V=n[8],ha=n[9],ka=n[10],oa=n[11];n!==b&&(b[0]=n[0],b[1]=n[1],b[2]=n[2],b[3]=n[3],b[12]=n[12],b[13]=
n[13],b[14]=n[14],b[15]=n[15]);b[4]=na*ea+V*ia;b[5]=z*ea+ha*ia;b[6]=L*ea+ka*ia;b[7]=T*ea+oa*ia;b[8]=V*ea-na*ia;b[9]=ha*ea-z*ia;b[10]=ka*ea-L*ia;b[11]=oa*ea-T*ia;return b}function c(b,n,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const na=n[0],z=n[1],L=n[2],T=n[3],V=n[8],ha=n[9],ka=n[10],oa=n[11];n!==b&&(b[4]=n[4],b[5]=n[5],b[6]=n[6],b[7]=n[7],b[12]=n[12],b[13]=n[13],b[14]=n[14],b[15]=n[15]);b[0]=na*ea-V*ia;b[1]=z*ea-ha*ia;b[2]=L*ea-ka*ia;b[3]=T*ea-oa*ia;b[8]=na*ia+V*ea;b[9]=z*ia+ha*ea;b[10]=L*ia+ka*
ea;b[11]=T*ia+oa*ea;return b}function k(b,n,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const na=n[0],z=n[1],L=n[2],T=n[3],V=n[4],ha=n[5],ka=n[6],oa=n[7];n!==b&&(b[8]=n[8],b[9]=n[9],b[10]=n[10],b[11]=n[11],b[12]=n[12],b[13]=n[13],b[14]=n[14],b[15]=n[15]);b[0]=na*ea+V*ia;b[1]=z*ea+ha*ia;b[2]=L*ea+ka*ia;b[3]=T*ea+oa*ia;b[4]=V*ea-na*ia;b[5]=ha*ea-z*ia;b[6]=ka*ea-L*ia;b[7]=oa*ea-T*ia;return b}function I(b,n){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=n[0];
b[13]=n[1];b[14]=n[2];b[15]=1;return b}function M(b,n){b[0]=n[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=n[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=n[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function P(b,n,ea){if(0===n)return B(b);let ia=ea[0],na=ea[1];ea=ea[2];let z=Math.sqrt(ia*ia+na*na+ea*ea),L=void 0,T=void 0,V=void 0;if(z<fa.getEpsilon())return null;z=1/z;ia*=z;na*=z;ea*=z;L=Math.sin(n);T=Math.cos(n);V=1-T;b[0]=ia*ia*V+T;b[1]=na*ia*V+ea*L;b[2]=ea*ia*V-na*L;b[3]=0;b[4]=ia*na*V-ea*L;b[5]=na*na*
V+T;b[6]=ea*na*V+ia*L;b[7]=0;b[8]=ia*ea*V+na*L;b[9]=na*ea*V-ia*L;b[10]=ea*ea*V+T;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function X(b,n){const ea=Math.sin(n);n=Math.cos(n);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=n;b[6]=ea;b[7]=0;b[8]=0;b[9]=-ea;b[10]=n;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function l(b,n){const ea=Math.sin(n);n=Math.cos(n);b[0]=n;b[1]=0;b[2]=-ea;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=ea;b[9]=0;b[10]=n;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function A(b,
n){const ea=Math.sin(n);n=Math.cos(n);b[0]=n;b[1]=ea;b[2]=0;b[3]=0;b[4]=-ea;b[5]=n;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function J(b,n,ea){var ia=n[0],na=n[1],z=n[2],L=n[3],T=ia+ia,V=na+na;const ha=z+z;n=ia*T;const ka=ia*V;ia*=ha;const oa=na*V;na*=ha;z*=ha;T*=L;V*=L;L*=ha;b[0]=1-(oa+z);b[1]=ka+L;b[2]=ia-V;b[3]=0;b[4]=ka-L;b[5]=1-(n+z);b[6]=na+T;b[7]=0;b[8]=ia+V;b[9]=na-T;b[10]=1-(n+oa);b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function K(b,
n){const ea=cb,ia=-n[0],na=-n[1],z=-n[2],L=n[3],T=n[4],V=n[5],ha=n[6],ka=n[7],oa=ia*ia+na*na+z*z+L*L;0<oa?(ea[0]=2*(T*L+ka*ia+V*z-ha*na)/oa,ea[1]=2*(V*L+ka*na+ha*ia-T*z)/oa,ea[2]=2*(ha*L+ka*z+T*na-V*ia)/oa):(ea[0]=2*(T*L+ka*ia+V*z-ha*na),ea[1]=2*(V*L+ka*na+ha*ia-T*z),ea[2]=2*(ha*L+ka*z+T*na-V*ia));J(b,n,ea);return b}function ca(b,n){b[0]=n[12];b[1]=n[13];b[2]=n[14];return b}function v(b,n){const ea=n[0],ia=n[1],na=n[2],z=n[4],L=n[5],T=n[6],V=n[8],ha=n[9];n=n[10];b[0]=Math.sqrt(ea*ea+ia*ia+na*na);
b[1]=Math.sqrt(z*z+L*L+T*T);b[2]=Math.sqrt(V*V+ha*ha+n*n);return b}function w(b,n){const ea=n[0]+n[5]+n[10];let ia=0;0<ea?(ia=2*Math.sqrt(ea+1),b[3]=.25*ia,b[0]=(n[6]-n[9])/ia,b[1]=(n[8]-n[2])/ia,b[2]=(n[1]-n[4])/ia):n[0]>n[5]&&n[0]>n[10]?(ia=2*Math.sqrt(1+n[0]-n[5]-n[10]),b[3]=(n[6]-n[9])/ia,b[0]=.25*ia,b[1]=(n[1]+n[4])/ia,b[2]=(n[8]+n[2])/ia):n[5]>n[10]?(ia=2*Math.sqrt(1+n[5]-n[0]-n[10]),b[3]=(n[8]-n[2])/ia,b[0]=(n[1]+n[4])/ia,b[1]=.25*ia,b[2]=(n[6]+n[9])/ia):(ia=2*Math.sqrt(1+n[10]-n[0]-n[5]),
b[3]=(n[1]-n[4])/ia,b[0]=(n[8]+n[2])/ia,b[1]=(n[6]+n[9])/ia,b[2]=.25*ia);return b}function D(b,n,ea,ia){var na=n[0],z=n[1],L=n[2],T=n[3],V=na+na,ha=z+z,ka=L+L;n=na*V;const oa=na*ha;na*=ka;const ra=z*ha;z*=ka;L*=ka;V*=T;ha*=T;T*=ka;ka=ia[0];const sa=ia[1];ia=ia[2];b[0]=(1-(ra+L))*ka;b[1]=(oa+T)*ka;b[2]=(na-ha)*ka;b[3]=0;b[4]=(oa-T)*sa;b[5]=(1-(n+L))*sa;b[6]=(z+V)*sa;b[7]=0;b[8]=(na+ha)*ia;b[9]=(z-V)*ia;b[10]=(1-(n+ra))*ia;b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function t(b,n,
ea,ia,na){var z=n[0],L=n[1],T=n[2],V=n[3],ha=z+z,ka=L+L,oa=T+T;n=z*ha;var ra=z*ka,sa=z*oa;z=L*ka;L*=oa;var aa=T*oa;T=V*ha;ka*=V;const da=V*oa;var ma=ia[0],za=ia[1];oa=ia[2];ia=na[0];V=na[1];na=na[2];ha=(1-(z+aa))*ma;const Da=(ra+da)*ma;ma*=sa-ka;ra=(ra-da)*za;aa=(1-(n+aa))*za;za*=L+T;sa=(sa+ka)*oa;L=(L-T)*oa;n=(1-(n+z))*oa;b[0]=ha;b[1]=Da;b[2]=ma;b[3]=0;b[4]=ra;b[5]=aa;b[6]=za;b[7]=0;b[8]=sa;b[9]=L;b[10]=n;b[11]=0;b[12]=ea[0]+ia-(ha*ia+ra*V+sa*na);b[13]=ea[1]+V-(Da*ia+aa*V+L*na);b[14]=ea[2]+na-(ma*
ia+za*V+n*na);b[15]=1;return b}function h(b,n){var ea=n[0],ia=n[1],na=n[2];n=n[3];var z=ea+ea,L=ia+ia;const T=na+na;ea*=z;const V=ia*z;ia*=L;const ha=na*z,ka=na*L;na*=T;z*=n;L*=n;n*=T;b[0]=1-ia-na;b[1]=V+n;b[2]=ha-L;b[3]=0;b[4]=V-n;b[5]=1-ea-na;b[6]=ka+z;b[7]=0;b[8]=ha+L;b[9]=ka-z;b[10]=1-ea-ia;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function C(b,n,ea,ia,na,z,L){const T=1/(ea-n),V=1/(na-ia),ha=1/(z-L);b[0]=2*z*T;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*z*V;b[6]=0;b[7]=0;b[8]=(ea+n)*T;b[9]=(na+
ia)*V;b[10]=(L+z)*ha;b[11]=-1;b[12]=0;b[13]=0;b[14]=L*z*2*ha;b[15]=0;return b}function r(b,n,ea,ia,na){n=1/Math.tan(n/2);let z=void 0;b[0]=n/ea;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=n;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=na&&Infinity!==na?(z=1/(ia-na),b[10]=(na+ia)*z,b[14]=2*na*ia*z):(b[10]=-1,b[14]=-2*ia);return b}function R(b,n,ea,ia){const na=Math.tan(n.upDegrees*Math.PI/180),z=Math.tan(n.downDegrees*Math.PI/180),L=Math.tan(n.leftDegrees*Math.PI/180);n=Math.tan(n.rightDegrees*
Math.PI/180);const T=2/(L+n),V=2/(na+z);b[0]=T;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=V;b[6]=0;b[7]=0;b[8]=-((L-n)*T*.5);b[9]=(na-z)*V*.5;b[10]=ia/(ea-ia);b[11]=-1;b[12]=0;b[13]=0;b[14]=ia*ea/(ea-ia);b[15]=0;return b}function W(b,n,ea,ia,na,z,L){const T=1/(n-ea),V=1/(ia-na),ha=1/(z-L);b[0]=-2*T;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*V;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*ha;b[11]=0;b[12]=(n+ea)*T;b[13]=(na+ia)*V;b[14]=(L+z)*ha;b[15]=1;return b}function S(b,n,ea,ia){var na=void 0;let z=void 0;var L=void 0,T=
void 0;let V=void 0,ha=void 0;var ka=void 0,oa=void 0;let ra=void 0,sa=void 0;const aa=n[0],da=n[1];n=n[2];L=ia[0];T=ia[1];ia=ia[2];ka=ea[0];oa=ea[1];ea=ea[2];na=fa.getEpsilon();if(Math.abs(aa-ka)<na&&Math.abs(da-oa)<na&&Math.abs(n-ea)<na)return B(b);ka=aa-ka;oa=da-oa;ra=n-ea;sa=1/Math.sqrt(ka*ka+oa*oa+ra*ra);ka*=sa;oa*=sa;ra*=sa;na=T*ra-ia*oa;z=ia*ka-L*ra;L=L*oa-T*ka;(sa=Math.sqrt(na*na+z*z+L*L))?(sa=1/sa,na*=sa,z*=sa,L*=sa):L=z=na=0;T=oa*L-ra*z;V=ra*na-ka*L;ha=ka*z-oa*na;(sa=Math.sqrt(T*T+V*V+ha*
ha))?(sa=1/sa,T*=sa,V*=sa,ha*=sa):ha=V=T=0;b[0]=na;b[1]=T;b[2]=ka;b[3]=0;b[4]=z;b[5]=V;b[6]=oa;b[7]=0;b[8]=L;b[9]=ha;b[10]=ra;b[11]=0;b[12]=-(na*aa+z*da+L*n);b[13]=-(T*aa+V*da+ha*n);b[14]=-(ka*aa+oa*da+ra*n);b[15]=1;return b}function ja(b,n,ea,ia){const na=n[0],z=n[1];n=n[2];var L=ia[0];const T=ia[1];var V=ia[2];ia=na-ea[0];let ha=z-ea[1];ea=n-ea[2];let ka=ia*ia+ha*ha+ea*ea;0<ka&&(ka=1/Math.sqrt(ka),ia*=ka,ha*=ka,ea*=ka);let oa=T*ea-V*ha;V=V*ia-L*ea;L=L*ha-T*ia;ka=oa*oa+V*V+L*L;0<ka&&(ka=1/Math.sqrt(ka),
oa*=ka,V*=ka,L*=ka);b[0]=oa;b[1]=V;b[2]=L;b[3]=0;b[4]=ha*L-ea*V;b[5]=ea*oa-ia*L;b[6]=ia*V-ha*oa;b[7]=0;b[8]=ia;b[9]=ha;b[10]=ea;b[11]=0;b[12]=na;b[13]=z;b[14]=n;b[15]=1;return b}function Z(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function qa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+
b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function wa(b,n,ea){b[0]=n[0]+ea[0];b[1]=n[1]+ea[1];b[2]=n[2]+ea[2];b[3]=n[3]+ea[3];b[4]=n[4]+ea[4];b[5]=n[5]+ea[5];b[6]=n[6]+ea[6];b[7]=n[7]+ea[7];b[8]=n[8]+ea[8];b[9]=n[9]+ea[9];b[10]=n[10]+ea[10];b[11]=n[11]+ea[11];b[12]=n[12]+ea[12];b[13]=n[13]+ea[13];b[14]=n[14]+ea[14];b[15]=n[15]+ea[15];return b}function xa(b,n,ea){b[0]=n[0]-ea[0];b[1]=n[1]-ea[1];b[2]=n[2]-ea[2];b[3]=n[3]-ea[3];b[4]=n[4]-ea[4];b[5]=n[5]-ea[5];b[6]=n[6]-ea[6];b[7]=n[7]-ea[7];b[8]=n[8]-ea[8];
b[9]=n[9]-ea[9];b[10]=n[10]-ea[10];b[11]=n[11]-ea[11];b[12]=n[12]-ea[12];b[13]=n[13]-ea[13];b[14]=n[14]-ea[14];b[15]=n[15]-ea[15];return b}function ya(b,n,ea){b[0]=n[0]*ea;b[1]=n[1]*ea;b[2]=n[2]*ea;b[3]=n[3]*ea;b[4]=n[4]*ea;b[5]=n[5]*ea;b[6]=n[6]*ea;b[7]=n[7]*ea;b[8]=n[8]*ea;b[9]=n[9]*ea;b[10]=n[10]*ea;b[11]=n[11]*ea;b[12]=n[12]*ea;b[13]=n[13]*ea;b[14]=n[14]*ea;b[15]=n[15]*ea;return b}function Aa(b,n,ea,ia){b[0]=n[0]+ea[0]*ia;b[1]=n[1]+ea[1]*ia;b[2]=n[2]+ea[2]*ia;b[3]=n[3]+ea[3]*ia;b[4]=n[4]+ea[4]*
ia;b[5]=n[5]+ea[5]*ia;b[6]=n[6]+ea[6]*ia;b[7]=n[7]+ea[7]*ia;b[8]=n[8]+ea[8]*ia;b[9]=n[9]+ea[9]*ia;b[10]=n[10]+ea[10]*ia;b[11]=n[11]+ea[11]*ia;b[12]=n[12]+ea[12]*ia;b[13]=n[13]+ea[13]*ia;b[14]=n[14]+ea[14]*ia;b[15]=n[15]+ea[15]*ia;return b}function Ha(b,n){return b[0]===n[0]&&b[1]===n[1]&&b[2]===n[2]&&b[3]===n[3]&&b[4]===n[4]&&b[5]===n[5]&&b[6]===n[6]&&b[7]===n[7]&&b[8]===n[8]&&b[9]===n[9]&&b[10]===n[10]&&b[11]===n[11]&&b[12]===n[12]&&b[13]===n[13]&&b[14]===n[14]&&b[15]===n[15]}function Ka(b,n){if(b===
n)return!0;const ea=b[0],ia=b[1],na=b[2],z=b[3],L=b[4],T=b[5],V=b[6],ha=b[7],ka=b[8],oa=b[9],ra=b[10],sa=b[11],aa=b[12],da=b[13],ma=b[14];b=b[15];const za=n[0],Da=n[1],Ga=n[2],Ja=n[3],Fa=n[4],La=n[5],ta=n[6],Wa=n[7],ab=n[8],$a=n[9],a=n[10],db=n[11],Sa=n[12],gb=n[13],nb=n[14];n=n[15];const Ya=fa.getEpsilon();return Math.abs(ea-za)<=Ya*Math.max(1,Math.abs(ea),Math.abs(za))&&Math.abs(ia-Da)<=Ya*Math.max(1,Math.abs(ia),Math.abs(Da))&&Math.abs(na-Ga)<=Ya*Math.max(1,Math.abs(na),Math.abs(Ga))&&Math.abs(z-
Ja)<=Ya*Math.max(1,Math.abs(z),Math.abs(Ja))&&Math.abs(L-Fa)<=Ya*Math.max(1,Math.abs(L),Math.abs(Fa))&&Math.abs(T-La)<=Ya*Math.max(1,Math.abs(T),Math.abs(La))&&Math.abs(V-ta)<=Ya*Math.max(1,Math.abs(V),Math.abs(ta))&&Math.abs(ha-Wa)<=Ya*Math.max(1,Math.abs(ha),Math.abs(Wa))&&Math.abs(ka-ab)<=Ya*Math.max(1,Math.abs(ka),Math.abs(ab))&&Math.abs(oa-$a)<=Ya*Math.max(1,Math.abs(oa),Math.abs($a))&&Math.abs(ra-a)<=Ya*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-db)<=Ya*Math.max(1,Math.abs(sa),Math.abs(db))&&
Math.abs(aa-Sa)<=Ya*Math.max(1,Math.abs(aa),Math.abs(Sa))&&Math.abs(da-gb)<=Ya*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ma-nb)<=Ya*Math.max(1,Math.abs(ma),Math.abs(nb))&&Math.abs(b-n)<=Ya*Math.max(1,Math.abs(b),Math.abs(n))}function Na(b){const n=fa.getEpsilon(),ea=b[0],ia=b[1],na=b[2],z=b[4],L=b[5],T=b[6],V=b[8],ha=b[9];b=b[10];return Math.abs(1-(ea*ea+z*z+V*V))<=n&&Math.abs(1-(ia*ia+L*L+ha*ha))<=n&&Math.abs(1-(na*na+T*T+b*b))<=n}const cb=d.create();d=Object.freeze(Object.defineProperty({__proto__:null,
copy:O,set:q,identity:B,transpose:y,invert:m,adjoint:p,determinant:x,multiply:F,translate:N,scale:H,rotate:g,rotateX:G,rotateY:c,rotateZ:k,fromTranslation:I,fromScaling:M,fromRotation:P,fromXRotation:X,fromYRotation:l,fromZRotation:A,fromRotationTranslation:J,fromQuat2:K,getTranslation:ca,getScaling:v,getRotation:w,fromRotationTranslationScale:D,fromRotationTranslationScaleOrigin:t,fromQuat:h,frustum:C,perspective:r,perspectiveFromFieldOfView:R,ortho:W,lookAt:S,targetTo:ja,str:Z,frob:qa,add:wa,subtract:xa,
multiplyScalar:ya,multiplyScalarAndAdd:Aa,exactEquals:Ha,equals:Ka,isOrthoNormal:Na,mul:F,sub:xa},Symbol.toStringTag,{value:"Module"}));f.add=wa;f.adjoint=p;f.copy=O;f.determinant=x;f.equals=Ka;f.exactEquals=Ha;f.frob=qa;f.fromQuat=h;f.fromQuat2=K;f.fromRotation=P;f.fromRotationTranslation=J;f.fromRotationTranslationScale=D;f.fromRotationTranslationScaleOrigin=t;f.fromScaling=M;f.fromTranslation=I;f.fromXRotation=X;f.fromYRotation=l;f.fromZRotation=A;f.frustum=C;f.getRotation=w;f.getScaling=v;f.getTranslation=
ca;f.identity=B;f.invert=m;f.isOrthoNormal=Na;f.lookAt=S;f.mat4=d;f.mul=F;f.multiply=F;f.multiplyScalar=ya;f.multiplyScalarAndAdd=Aa;f.ortho=W;f.perspective=r;f.perspectiveFromFieldOfView=R;f.rotate=g;f.rotateX=G;f.rotateY=c;f.rotateZ=k;f.scale=H;f.set=q;f.str=Z;f.sub=xa;f.subtract=xa;f.targetTo=ja;f.translate=N;f.transpose=y})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(f,d,fa,O,q){function B(){return!!d._pe}function y(){return!!q("esri-wasm")}
function m(){return g?g:g=(new Promise((c,k)=>f(["./pe-wasm"],c,k))).then(c=>c.peWasm).then(({default:c})=>c({locateFile:k=>O.getAssetUrl(`esri/geometry/support/${k}`)})).then(c=>{p(c)})}function p(c){function k(P,X,l){P[X]=l(P[X])}d._pe=c;d.PeDefs.init();d.PeGTlistExtended.init();d.PeNotationMgrs.init();d.PeNotationUtm.init();d.PePCSInfo.init();d.PeGCSExtent=function(P){function X(){return P.apply(this,arguments)||this}fa._inheritsLoose(X,P);X.prototype.destroy=function(){d._pe.destroy(this)};return X}(d._pe.PeGCSExtent);
c=[d._pe.PeDatum,d._pe.PeGeogcs,d._pe.PeGeogtran,d._pe.PeObject,d._pe.PeParameter,d._pe.PePrimem,d._pe.PeProjcs,d._pe.PeSpheroid,d._pe.PeUnit];for(var I of c)k(I.prototype,"getName",P=>function(){return P.call(this,Array(d.PeDefs.PE_NAME_MAX))});for(const P of[d._pe.PeGeogtran,d._pe.PeProjcs])k(P.prototype,"getParameters",X=>function(){const l=Array(d.PeDefs.PE_PARM_MAX);let A=X.call(this);for(let J=0;J<l.length;J++){const K=d._pe.getValue(A,"*");l[J]=K?d._pe.wrapPointer(K,d._pe.PeParameter):null;
A+=Int32Array.BYTES_PER_ELEMENT}return l});k(d._pe.PeHorizon.prototype,"getCoord",P=>function(){const X=this.getSize();if(!X)return null;const l=[],A=P.call(this);H(l,X,A);return l});k(d._pe.PeGTlistExtendedEntry.prototype,"getEntries",P=>{const X=d._pe._pe_getPeGTlistExtendedGTsSize();return function(){let l=null;var A=P.call(this);if(!d._pe.compare(A,d._pe.NULL)){l=[A];const J=this.getSteps();if(1<J){A=d._pe.getPointer(A);for(let K=1;K<J;K++)l.push(d._pe.wrapPointer(A+X*K,d._pe.PeGTlistExtendedGTs))}}return l}});
const M=d._pe._pe_getPeHorizonSize();I=P=>function(){let X=this._cache;X||(this._cache=X=new Map);if(X.has(P))return X.get(P);let l=null;var A=P.call(this);if(!d._pe.compare(A,d._pe.NULL)){l=[A];const J=A.getNump();if(1<J){A=d._pe.getPointer(A);for(let K=1;K<J;K++)l.push(d._pe.wrapPointer(A+M*K,d._pe.PeHorizon))}}X.set(P,l);return l};k(d._pe.PeProjcs.prototype,"horizonGcsGenerate",I);k(d._pe.PeProjcs.prototype,"horizonPcsGenerate",I);d._pe.PeObject.prototype.toString=function(P=d.PeDefs.PE_STR_OPTS_NONE){d._pe.ensureCache.prepare();
const X=d._pe.getPointer(this),l=d._pe.ensureInt8(Array(d.PeDefs.PE_BUFFER_MAX));return d._pe.UTF8ToString(d._pe._pe_object_to_string_ext(X,P,l))}}function x(c){if(c){var k=d._pe.getClass(c);k&&(k=d._pe.getCache(k))&&(c=d._pe.getPointer(c))&&delete k[c]}}function F(c,k){const I=[];k=Array(k);for(let M=0;M<c;M++)I.push(d._pe.ensureInt8(k));return I}function N(c){let k;Array.isArray(c[0])?(k=[],c.forEach(I=>{k.push(I[0],I[1])})):k=c;return k}function H(c,k,I,M=!1){if(M)for(M=0;M<2*k;M++)c[M]=d._pe.getValue(I+
M*Float64Array.BYTES_PER_ELEMENT,"double");else{M=0===c.length;for(let P=0;P<k;P++)M&&(c[P]=Array(2)),c[P][0]=d._pe.getValue(I,"double"),c[P][1]=d._pe.getValue(I+Float64Array.BYTES_PER_ELEMENT,"double"),I+=2*Float64Array.BYTES_PER_ELEMENT}}let g;d._pe=null;d.PeCSTransformations=void 0;(function(c){function k(P,X,l){d._pe.ensureCache.prepare();var A=N(l);const J=l===A;A=d._pe.ensureFloat64(A);(P=d._pe._pe_geog_to_proj(d._pe.getPointer(P),X,A))&&H(l,X,A,J);return P}function I(P,X,l){return M(P,X,l,
0)}function M(P,X,l,A){d._pe.ensureCache.prepare();var J=N(l);const K=l===J;J=d._pe.ensureFloat64(J);(P=d._pe._pe_proj_to_geog_center(d._pe.getPointer(P),X,J,A))&&H(l,X,J,K);return P}c.geogToProj=k;c.projGeog=function(P,X,l,A){switch(A){case d.PeDefs.PE_TRANSFORM_P_TO_G:return I(P,X,l);case d.PeDefs.PE_TRANSFORM_G_TO_P:return k(P,X,l)}return 0};c.projToGeog=I;c.projToGeogCenter=M})(d.PeCSTransformations||(d.PeCSTransformations={}));d.PeDefs=void 0;(function(c){c.init=function(){c.PE_BUFFER_MAX=d._pe.PeDefs.prototype.PE_BUFFER_MAX;
c.PE_NAME_MAX=d._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=d._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=d._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=d._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=d._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=d._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=d._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=d._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=d._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=d._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=
d._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=d._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=d._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=d._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=d._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=d._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=d._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=d._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=d._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=
d._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=d._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=d._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=d._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=d._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=d._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=d._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=d._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=d._pe.PeDefs.prototype.PE_HORIZON_LINE;
c.PE_HORIZON_DELTA=d._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(d.PeDefs||(d.PeDefs={}));d.PeFactory=void 0;(function(c){function k(X,l){let A=null,J=I[X];J||(J={},I[X]=J);J.hasOwnProperty(String(l))?A=J[l]:(X=d._pe.PeFactory.prototype.factoryByType(X,l),d._pe.compare(X,d._pe.NULL)||(A=X,J[l]=A));return A=P(A)}const I={},M={},P=X=>{if(X){const l=X.getType();switch(l){case d.PeDefs.PE_TYPE_GEOGCS:X=d._pe.castObject(X,d._pe.PeGeogcs);break;case d.PeDefs.PE_TYPE_PROJCS:X=d._pe.castObject(X,d._pe.PeProjcs);
break;case d.PeDefs.PE_TYPE_GEOGTRAN:X=d._pe.castObject(X,d._pe.PeGeogtran);break;default:l&d.PeDefs.PE_TYPE_UNIT&&(X=d._pe.castObject(X,d._pe.PeUnit))}}return X};c.initialize=function(){d._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(X){return k(d.PeDefs.PE_TYPE_COORDSYS,X)};c.factoryByType=k;c.fromString=function(X,l){let A=null,J=M[X];J||(J={},M[X]=J);J.hasOwnProperty(l)?A=J[l]:(X=d._pe.PeFactory.prototype.fromString(X,l),d._pe.compare(X,d._pe.NULL)||(A=X,J[l]=A));return A=P(A)};
c.geogcs=function(X){return k(d.PeDefs.PE_TYPE_GEOGCS,X)};c.geogtran=function(X){return k(d.PeDefs.PE_TYPE_GEOGTRAN,X)};c.getCode=function(X){return d._pe.PeFactory.prototype.getCode(X)};c.projcs=function(X){return k(d.PeDefs.PE_TYPE_PROJCS,X)};c.unit=function(X){return k(d.PeDefs.PE_TYPE_UNIT,X)}})(d.PeFactory||(d.PeFactory={}));d.PeGCSExtent=null;d.PeGTlistExtended=void 0;(function(c){let k;c.init=function(){c.PE_GTLIST_OPTS_COMMON=d._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;k=d._pe._pe_getPeGTlistExtendedEntrySize()};
c.getGTlist=function(I,M,P,X,l,A){let J=null;const K=new d._pe.PeInteger(A);try{const ca=d._pe.PeGTlistExtended.prototype.getGTlist(I,M,P,X,l,K);if(A=K.val)if(J=[ca],1<A){const v=d._pe.getPointer(ca);for(I=1;I<A;I++)J.push(d._pe.wrapPointer(v+k*I,d._pe.PeGTlistExtendedEntry))}}finally{d._pe.destroy(K)}return J}})(d.PeGTlistExtended||(d.PeGTlistExtended={}));d.PeGTlistExtendedEntry=void 0;(function(c){c.destroy=function(k){if(k&&k.length){for(const I of k)x(I),I.getEntries().forEach(M=>{x(M);M=M.getGeogtran();
x(M);M.getParameters().forEach(x);[M.getGeogcs1(),M.getGeogcs2()].forEach(P=>{x(P);const X=P.getDatum();x(X);x(X.getSpheroid());x(P.getPrimem());x(P.getUnit())})});d._pe.PeGTlistExtendedEntry.prototype.Delete(k[0])}}})(d.PeGTlistExtendedEntry||(d.PeGTlistExtendedEntry={}));d.PeGTTransformations=void 0;(function(c){c.geogToGeog=function(k,I,M,P,X){d._pe.ensureCache.prepare();var l=N(M);const A=M===l;l=d._pe.ensureFloat64(l);let J=0;P&&(J=d._pe.ensureFloat64(P));(k=d._pe._pe_geog_to_geog(d._pe.getPointer(k),
I,l,J,X))&&H(M,I,l,A);return k}})(d.PeGTTransformations||(d.PeGTTransformations={}));d.PeNotationDms=void 0;(function(c){const k=(M,P,X,l,A,J)=>{d._pe.ensureCache.prepare();switch(M){case "dd":var K=d._pe._pe_geog_to_dd;var ca=d.PeDefs.PE_DD_MAX;break;case "ddm":K=d._pe._pe_geog_to_ddm;ca=d.PeDefs.PE_DDM_MAX;break;case "dms":K=d._pe._pe_geog_to_dms,ca=d.PeDefs.PE_DMS_MAX}M=0;P&&(M=d._pe.getPointer(P));P=N(l);P=d._pe.ensureFloat64(P);ca=F(X,ca);l=d._pe.ensureInt32(ca);if(A=K(M,X,P,A,l))for(K=0;K<X;K++)J[K]=
d._pe.UTF8ToString(ca[K]);return A},I=(M,P,X,l,A)=>{d._pe.ensureCache.prepare();switch(M){case "dd":var J=d._pe._pe_dd_to_geog;break;case "ddm":J=d._pe._pe_ddm_to_geog;break;case "dms":J=d._pe._pe_dms_to_geog}M=0;P&&(M=d._pe.getPointer(P));P=l.map(K=>d._pe.ensureString(K));l=d._pe.ensureInt32(P);P=d._pe.ensureFloat64(Array(2*X));(J=J(M,X,l,P))&&H(A,X,P);return J};c.geogToDms=function(M,P,X,l,A){return k("dms",M,P,X,l,A)};c.dmsToGeog=function(M,P,X,l){return I("dms",M,P,X,l)};c.geogToDdm=function(M,
P,X,l,A){return k("ddm",M,P,X,l,A)};c.ddmToGeog=function(M,P,X,l){return I("ddm",M,P,X,l)};c.geogToDd=function(M,P,X,l,A){return k("dd",M,P,X,l,A)};c.ddToGeog=function(M,P,X,l){return I("dd",M,P,X,l)}})(d.PeNotationDms||(d.PeNotationDms={}));d.PeNotationMgrs=void 0;(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=d._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
c.PE_MGRS_180_ZONE_1_PLUS=d._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=d._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geogToMgrsExtended=function(k,I,M,P,X,l,A){d._pe.ensureCache.prepare();let J=0;k&&(J=d._pe.getPointer(k));k=N(M);M=d._pe.ensureFloat64(k);k=F(I,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(k);if(P=d._pe._pe_geog_to_mgrs_extended(J,I,M,P,X,l,K))for(X=0;X<I;X++)A[X]=d._pe.UTF8ToString(k[X]);return P};c.mgrsToGeogExtended=function(k,I,M,P,X){d._pe.ensureCache.prepare();
let l=0;k&&(l=d._pe.getPointer(k));k=M.map(A=>d._pe.ensureString(A));M=d._pe.ensureInt32(k);k=d._pe.ensureFloat64(Array(2*I));(P=d._pe._pe_mgrs_to_geog_extended(l,I,M,P,k))&&H(X,I,k);return P}})(d.PeNotationMgrs||(d.PeNotationMgrs={}));d.PeNotationUsng=void 0;(function(c){c.geogToUsng=function(k,I,M,P,X,l,A){d._pe.ensureCache.prepare();let J=0;k&&(J=d._pe.getPointer(k));k=N(M);M=d._pe.ensureFloat64(k);k=F(I,d.PeDefs.PE_MGRS_MAX);const K=d._pe.ensureInt32(k);if(P=d._pe._pe_geog_to_usng(J,I,M,P,X,l,
K))for(X=0;X<I;X++)A[X]=d._pe.UTF8ToString(k[X]);return P};c.usngToGeog=function(k,I,M,P){d._pe.ensureCache.prepare();var X=0;k&&(X=d._pe.getPointer(k));k=M.map(l=>d._pe.ensureString(l));M=d._pe.ensureInt32(k);k=d._pe.ensureFloat64(Array(2*I));(X=d._pe._pe_usng_to_geog(X,I,M,k))&&H(P,I,k);return X}})(d.PeNotationUsng||(d.PeNotationUsng={}));d.PeNotationUtm=void 0;(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
c.PE_UTM_OPTS_NS=d._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geogToUtm=function(k,I,M,P,X){d._pe.ensureCache.prepare();var l=0;k&&(l=d._pe.getPointer(k));k=N(M);M=d._pe.ensureFloat64(k);k=F(I,d.PeDefs.PE_UTM_MAX);const A=d._pe.ensureInt32(k);if(P=d._pe._pe_geog_to_utm(l,I,M,P,A))for(l=0;l<I;l++)X[l]=d._pe.UTF8ToString(k[l]);return P};c.utmToGeog=function(k,I,M,P,X){d._pe.ensureCache.prepare();let l=0;k&&(l=d._pe.getPointer(k));k=M.map(A=>d._pe.ensureString(A));M=d._pe.ensureInt32(k);k=d._pe.ensureFloat64(Array(2*
I));(P=d._pe._pe_utm_to_geog(l,I,M,P,k))&&H(X,I,k);return P}})(d.PeNotationUtm||(d.PeNotationUtm={}));d.PePCSInfo=void 0;(function(c){const k=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=d._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=d._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=d._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(I,M=c.PE_PCSINFO_OPTION_DOMAIN){let P=
null,X=null;k.has(I)&&(X=k.get(I),X[M]&&(P=X[M]));P||(P=d._pe.PePCSInfo.prototype.generate(I,M),X||(X=[],k.set(I,X)),X[M]=P);return P}})(d.PePCSInfo||(d.PePCSInfo={}));d.PeVersion=void 0;(function(c){c.versionString=function(){return d._pe.PeVersion.prototype.version_string()}})(d.PeVersion||(d.PeVersion={}));const G=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return d._pe},isLoaded:B,isSupported:y,load:m,get PeCSTransformations(){return d.PeCSTransformations},get PeDefs(){return d.PeDefs},
get PeFactory(){return d.PeFactory},get PeGCSExtent(){return d.PeGCSExtent},get PeGTlistExtended(){return d.PeGTlistExtended},get PeGTlistExtendedEntry(){return d.PeGTlistExtendedEntry},get PeGTTransformations(){return d.PeGTTransformations},get PeNotationDms(){return d.PeNotationDms},get PeNotationMgrs(){return d.PeNotationMgrs},get PeNotationUsng(){return d.PeNotationUsng},get PeNotationUtm(){return d.PeNotationUtm},get PePCSInfo(){return d.PePCSInfo},get PeVersion(){return d.PeVersion},_init:p},
Symbol.toStringTag,{value:"Module"}));d._init=p;d.isLoaded=B;d.isSupported=y;d.load=m;d.pe=G})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(f,d,fa,O,q){function B(g=H){return[g[0],g[1],g[2],g[3]]}function y(g,G){g!==G&&(g[0]=G[0],g[1]=G[1],g[2]=G[2],g[3]=G[3]);return g}function m(g){return O.isNone(g)||g[0]>=g[2]?0:g[2]-g[0]}function p(g){return g[1]>=g[3]?0:g[3]-g[1]}function x(g,G,c){return G>=
g[0]&&c>=g[1]&&G<=g[2]&&c<=g[3]}function F(g){return null!=g&&4===g.length}const N=[Infinity,Infinity,-Infinity,-Infinity],H=[0,0,0,0];f.NEGATIVE_INFINITY=N;f.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];f.UNIT=[0,0,1,1];f.ZERO=H;f.allFinite=function(g){for(let G=0;4>G;G++)if(!isFinite(g[G]))return!1;return!0};f.area=function(g){return m(g)*p(g)};f.center=function(g,G=[0,0]){G[0]=(g[0]+g[2])/2;G[1]=(g[1]+g[3])/2;return G};f.clone=function(g){return[g[0],g[1],g[2],g[3]]};f.contains=function(g,
G){return G[0]>=g[0]&&G[2]<=g[2]&&G[1]>=g[1]&&G[3]<=g[3]};f.containsPoint=function(g,G){return x(g,G[0],G[1])};f.containsPointObject=function(g,G){return x(g,G.x,G.y)};f.containsPointWithMargin=function(g,G,c){return G[0]>=g[0]-c&&G[1]>=g[1]-c&&G[0]<=g[2]+c&&G[1]<=g[3]+c};f.containsXY=x;f.containsXYWithMargin=function(g,G,c,k){return G>=g[0]-k&&c>=g[1]-k&&G<=g[2]+k&&c<=g[3]+k};f.copy=y;f.create=B;f.distance=function(g,G){const c=(g[1]+g[3])/2,k=Math.max(Math.abs(G[0]-(g[0]+g[2])/2)-m(g)/2,0);g=Math.max(Math.abs(G[1]-
c)-p(g)/2,0);return Math.sqrt(k*k+g*g)};f.empty=function(g){return g?y(g,N):B(N)};f.equals=function(g,G){return F(g)&&F(G)?g[0]===G[0]&&g[1]===G[1]&&g[2]===G[2]&&g[3]===G[3]:g===G};f.expand=function(g,G,c){if(O.isNone(G))y(c,g);else if("length"in G)if(F(G))c[0]=Math.min(g[0],G[0]),c[1]=Math.min(g[1],G[1]),c[2]=Math.max(g[2],G[2]),c[3]=Math.max(g[3],G[3]);else{if(2===G.length||3===G.length)c[0]=Math.min(g[0],G[0]),c[1]=Math.min(g[1],G[1]),c[2]=Math.max(g[2],G[0]),c[3]=Math.max(g[3],G[1])}else switch(G.type){case "extent":c[0]=
Math.min(g[0],G.xmin);c[1]=Math.min(g[1],G.ymin);c[2]=Math.max(g[2],G.xmax);c[3]=Math.max(g[3],G.ymax);break;case "point":c[0]=Math.min(g[0],G.x),c[1]=Math.min(g[1],G.y),c[2]=Math.max(g[2],G.x),c[3]=Math.max(g[3],G.y)}};f.expandPointInPlace=function(g,G){G[0]<g[0]&&(g[0]=G[0]);G[0]>g[2]&&(g[2]=G[0]);G[1]<g[1]&&(g[1]=G[1]);G[1]>g[3]&&(g[3]=G[1])};f.expandWithNestedArray=function(g,G,c=g){const k=G.length;let I=g[0],M=g[1],P=g[2];g=g[3];for(let X=0;X<k;X++){const l=G[X];I=Math.min(I,l[0]);M=Math.min(M,
l[1]);P=Math.max(P,l[0]);g=Math.max(g,l[1])}c[0]=I;c[1]=M;c[2]=P;c[3]=g;return c};f.fromExtent=function(g,G=B()){G[0]=g.xmin;G[1]=g.ymin;G[2]=g.xmax;G[3]=g.ymax;return G};f.fromValues=function(g,G,c,k,I=B()){I[0]=g;I[1]=G;I[2]=c;I[3]=k;return I};f.height=p;f.intersection=function(g,G,c){if(O.isNone(G))return y(c,g);const k=G[0],I=G[1],M=G[2];G=G[3];c[0]=fa.clamp(g[0],k,M);c[1]=fa.clamp(g[1],I,G);c[2]=fa.clamp(g[2],k,M);c[3]=fa.clamp(g[3],I,G);return c};f.intersects=function(g,G){return Math.max(G[0],
g[0])<=Math.min(G[2],g[2])&&Math.max(G[1],g[1])<=Math.min(G[3],g[3])};f.intersectsSegment=function(g,G,c){const k=g[0],I=g[1],M=g[2];g=g[3];const {x:P,y:X}=G,{x:l,y:A}=c;var J=(ca,v)=>0>(A-X)*ca+(P-l)*v+(l*X-P*A);G=J(k,g);c=J(M,g);const K=J(M,I);J=J(k,I);return G===c&&c===K&&K===J&&J===G||P<k&&l<k||P>M&&l>M||X>g&&A>g||X<I&&A<I?!1:!0};f.intersectsSphere=function(g,G){const c=G[3];var k=Math.abs(G[0]-.5*(g[0]+g[2]));const I=.5*(g[2]-g[0]);if(k>c+I)return!1;var M=.5*(g[3]-g[1]);g=Math.abs(G[1]-.5*(g[1]+
g[3]));if(g>c+M)return!1;if(k<I||g<M)return!0;k-=I;M=g-M;return k*k+M*M<=c*c};f.is=F;f.isPoint=function(g){return(0===m(g)||!isFinite(g[0]))&&(0===p(g)||!isFinite(g[1]))};f.offset=function(g,G,c,k=g){k[0]=g[0]+G;k[1]=g[1]+c;k[2]=g[2]+G;k[3]=g[3]+c;return k};f.pad=function(g,G,c=g){c[0]=g[0]-G;c[1]=g[1]-G;c[2]=g[2]+G;c[3]=g[3]+G;return c};f.setMax=function(g,G,c=g){c[2]=G[0];c[3]=G[1];c!==g&&(c[0]=g[0],c[1]=g[1]);return g};f.setMin=function(g,G,c=g){c[0]=G[0];c[1]=G[1];c!==g&&(c[2]=g[2],c[3]=g[3]);
return c};f.size=function(g,G){G[0]=g[2]-g[0];G[1]=g[3]-g[1]};f.toExtent=function(g,G){return new q({xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:G})};f.width=m;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(f,d){const fa=Math.PI/180;var O=d.earth.radius;const q=d.earth.eccentricitySquared;O={a1:O*q,a2:O*q*O*q,a3:O*q*q/2,a4:O*q*O*q*2.5,a5:O*q+O*q*
q/2,a6:1-q};d={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:d.earth.radius,f:d.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:d.moon.radius,f:d.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:d.mars.radius,f:d.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,
f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,
f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},
104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:d.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};f.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;f.earthEllipsoidConstants=O;f.spheroids=d;f.toRadians=fa;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(f){return function(){function d(O){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(O&&O.steps)for(const q of O.steps)q instanceof f?this.steps.push(q):this.steps.push(new f({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}d.cacheKey=function(O,q){return[void 0!==O.wkid&&null!==O.wkid?O.wkid.toString():"-1",void 0!==O.wkt&&null!==O.wkt?O.wkt.toString():"",void 0!==
q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};d.fromGE=function(O){const q=new d;let B="";for(const y of O.steps)O=f.fromGE(y),q.steps.push(O),B+=O.uid.toString()+",";q._cachedProjection={};q._gtlistentry=null;q._chain=B;return q};var fa=d.prototype;fa.getInverse=function(){const O=new d;O.steps=[];for(let q=this.steps.length-1;0<=q;q--)O.steps.push(this.steps[q].getInverse());return O};fa.getGTListEntry=function(){let O="";for(const q of this.steps)O+=
q.uid.toString()+",";O!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=O);return this._gtlistentry};fa.assignCachedGe=function(O,q,B){this._cachedProjection[d.cacheKey(O,q)]=B};fa.getCachedGeTransformation=function(O,q){let B="";for(const y of this.steps)B+=y.uid.toString()+",";B!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=B);O=this._cachedProjection[d.cacheKey(O,q)];return void 0===O?null:O};return d}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(f){let d=0;return function(){function fa(O){this.uid=d++;O?(this._wkt=null!=O.wkt?O.wkt:null,this._wkid=null!=O.wkid?O.wkid:-1,this._isInverse=null!=O.isInverse?!0===O.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}fa.fromGE=function(O){const q=new fa;q._wkt=O.wkt;q._wkid=O.wkid;q._isInverse=O.isInverse;return q};fa.prototype.getInverse=function(){const O=new fa;O._wkt=this.wkt;O._wkid=this._wkid;O._isInverse=!this.isInverse;return O};f._createClass(fa,[{key:"wkt",get:function(){return this._wkt},
set:function(O){this._wkt=O;this.uid=d++}},{key:"wkid",get:function(){return this._wkid},set:function(O){this._wkid=O;this.uid=d++}},{key:"isInverse",get:function(){return this._isInverse},set:function(O){this._isInverse=O;this.uid=d++}}]);return fa}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(f,d,fa,O){f.getGeometryZScaler=function(q,B,y){if(d.isNone(B)||d.isNone(y)||y.vcsWkid||O.equals(B,y))return null;
B=fa.getMetersPerVerticalUnitForSR(B);y=fa.getMetersPerVerticalUnitForSR(y);const m=B/y;if(1===m)return null;switch(q){case "point":case "esriGeometryPoint":return p=>{p&&null!=p.z&&(p.z*=m)};case "polyline":case "esriGeometryPolyline":return p=>{if(p)for(const x of p.paths)for(const F of x)2<F.length&&(F[2]*=m)};case "polygon":case "esriGeometryPolygon":return p=>{if(p)for(const x of p.rings)for(const F of x)2<F.length&&(F[2]*=m)};case "multipoint":case "esriGeometryMultipoint":return p=>{if(p)for(const x of p.points)2<
x.length&&(x[2]*=m)};case "extent":case "esriGeometryExtent":return p=>{p&&null!=p.zmin&&null!=p.zmax&&(p.zmin*=m,p.zmax*=m)};default:return null}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(f){let d=function(y,m,p){this.x=y;this.y=m;this.spatialReference=p;this.m=this.z=void 0},fa=function(y,m,p,x){this.rings=y;this.spatialReference=m;this.hasM=this.hasZ=void 0;p&&(this.hasZ=
p);x&&(this.hasM=x)},O=function(y,m,p,x){this.paths=y;this.spatialReference=m;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);x&&(this.hasM=x)},q=function(y,m,p,x){this.points=y;this.spatialReference=m;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);x&&(this.hasM=x)},B=function(y,m,p,x,F){this.xmin=y;this.ymin=m;this.xmax=p;this.ymax=x;this.spatialReference=F;this.mmax=this.mmin=this.zmax=this.zmin=void 0};f.jsonAdapter={convertToGEGeometry:function(y,m){return null==m?null:y.convertJSONToGeometry(m)},exportPoint:function(y,
m,p){p=new d(y.getPointX(m),y.getPointY(m),p);const x=y.hasZ(m),F=y.hasM(m);x&&(p.z=y.getPointZ(m));F&&(p.m=y.getPointM(m));return p},exportPolygon:function(y,m,p){return new fa(y.exportPaths(m),p,y.hasZ(m),y.hasM(m))},exportPolyline:function(y,m,p){return new O(y.exportPaths(m),p,y.hasZ(m),y.hasM(m))},exportMultipoint:function(y,m,p){return new q(y.exportPoints(m),p,y.hasZ(m),y.hasM(m))},exportExtent:function(y,m,p){var x=y.hasZ(m);const F=y.hasM(m);p=new B(y.getXMin(m),y.getYMin(m),y.getXMax(m),
y.getYMax(m),p);x&&(x=y.getZExtent(m),p.zmin=x.vmin,p.zmax=x.vmax);F&&(y=y.getMExtent(m),p.mmin=y.vmin,p.mmax=y.vmax);return p}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(f,d,fa){let O=function(){function B(y=null,m={},p,x){this.geometry=y;this.attributes=m;this.centroid=p;this.objectId=x;this.geohashY=this.geohashX=
this.displayId=0}B.prototype.weakClone=function(){const y=new B(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return B}(),q=function(B){function y(){return B.apply(this,arguments)||this}d._inheritsLoose(y,B);return y}(O);f.OptimizedFeature=O;f.OptimizedFeatureWithGeometry=q;f.hasGeometry=function(B){return!(fa.isNone(B.geometry)||!B.geometry.coords||!B.geometry.coords.length)};Object.defineProperties(f,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(f){return function(){function d(O=[],q=[],B=!1){this.lengths=O??[];this.coords=q??[];this.hasIndeterminateRingOrder=B}d.fromRect=function(O){const [q,B,y,m]=O;O=y-q;const p=m-B;return new d([5],[q,B,O,0,0,p,-O,0,0,-p])};var fa=d.prototype;fa.forEachVertex=function(O){let q=0;this.lengths.length||O(this.coords[0],this.coords[1]);
for(let B=0;B<this.lengths.length;B++){const y=this.lengths[B];for(let m=0;m<y;m++)O(this.coords[2*(m+q)],this.coords[2*(m+q)+1]);q+=y}};fa.clone=function(O){return O?(O.set(this.coords),new d(this.lengths.slice(),O,this.hasIndeterminateRingOrder)):new d(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};f._createClass(d,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((O,
q)=>O+q)}}]);return d}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(f,d,fa,O,q,B,y,m,p,x){return function(){function F(H){this.geometryInfo=H;this._boundsStore=new p.BoundsStore;
this._featuresById=new Map;this._markedIds=new Set;this.events=new fa;this.featureAdapter=x.optimizedFeatureQueryEngineAdapter}var N=F.prototype;N.add=function(H){this._add(H);this._emitChanged()};N.addMany=function(H){for(const g of H)this._add(g);this._emitChanged()};N.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};N.removeById=function(H){H=this._featuresById.get(H);if(!H)return null;this._remove(H);this._emitChanged();return H};N.removeManyById=function(H){this._boundsStore.invalidateIndex();
for(const g of H)(H=this._featuresById.get(g))&&this._remove(H);this._emitChanged()};N.forEachBounds=function(H,g,G){for(const c of H)(H=this._boundsStore.get(c.objectId))&&g(B.fromRect(G,H))};N.getFeature=function(H){return this._featuresById.get(H)};N.has=function(H){return this._featuresById.has(H)};N.toArray=function(){return Array.from(this._featuresById.values())};N.forEach=function(H){this._featuresById.forEach(g=>H(g))};N.forEachInBounds=function(H,g){this._boundsStore.forEachInBounds(H,G=>
{g(this._featuresById.get(G))})};N.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};N.sweep=function(){let H=!1;this._featuresById.forEach((g,G)=>{this._markedIds.has(G)||(H=!0,this._remove(g))});this._markedIds.clear();H&&this._emitChanged()};N._emitChanged=function(){this.events.emit("changed",void 0)};N._add=function(H){if(H){var g=H.objectId;if(null==g)O.getLogger("esri.layers.graphics.data.FeatureStore").error(new d("featurestore:invalid-feature",
"feature id is missing",{feature:H}));else{var G=this._featuresById.get(g);this._markedIds.add(g);if(G){H.displayId=G.displayId;var c=this._boundsStore.get(g);this._boundsStore.delete(g)}else if(q.isSome(this.onFeatureAdd))this.onFeatureAdd(H);!q.isNone(H.geometry)&&H.geometry.coords&&H.geometry.coords.length?(c=m.getBoundsOptimizedGeometry(q.isSome(c)?c:y.create(),H.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),q.isSome(c)&&this._boundsStore.set(g,c)):this._boundsStore.set(g,null);this._featuresById.set(g,
H)}}};N._remove=function(H){if(q.isSome(this.onFeatureRemove))this.onFeatureRemove(H);this._markedIds.delete(H.objectId);this._boundsStore.delete(H.objectId);this._featuresById.delete(H.objectId);return H};f._createClass(F,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let H=0;this._featuresById.forEach(g=>{q.isSome(g.geometry)&&g.geometry.coords&&(H+=g.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:H/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return F}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(f,
d,fa,O,q){let B=function(){function y(){this._emitter=new y.EventEmitter(this)}var m=y.prototype;m.emit=function(p,x){return this._emitter.emit(p,x)};m.on=function(p,x){return this._emitter.on(p,x)};m.once=function(p,x){return this._emitter.once(p,x)};m.hasEventListener=function(p){return this._emitter.hasEventListener(p)};return y}();(function(y){let m=function(){function x(N=null){this._target=N;this._listenersMap=null}var F=x.prototype;F.clear=function(){this._listenersMap&&this._listenersMap.clear();
this._listenersMap=null};F.emit=function(N,H){N=this._listenersMap&&this._listenersMap.get(N);if(!N)return!1;const g=this._target||this;[...N].forEach(G=>{G.call(g,H)});return 0<N.length};F.on=function(N,H){if(Array.isArray(N)){var g=N.map(G=>this.on(G,H));return O.handlesGroup(g)}if(N.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);g=this._listenersMap.get(N)||[];g.push(H);this._listenersMap.set(N,
g);return{remove:()=>{const G=this._listenersMap&&this._listenersMap.get(N)||[],c=G.indexOf(H);0<=c&&G.splice(c,1)}}};F.once=function(N,H){const g=this.on(N,G=>{g.remove();H.call(null,G)});return g};F.hasEventListener=function(N){N=this._listenersMap&&this._listenersMap.get(N);return null!=N&&0<N.length};return x}();y.EventEmitter=m;y.EventedMixin=x=>{x=function(F){function N(){var g=F.apply(this,arguments)||this;g._emitter=new m;return g}f._inheritsLoose(N,F);var H=N.prototype;H.destroy=function(){this._emitter.clear()};
H.emit=function(g,G){return this._emitter.emit(g,G)};H.on=function(g,G){return this._emitter.on(g,G)};H.once=function(g,G){return this._emitter.once(g,G)};H.hasEventListener=function(g){return this._emitter.hasEventListener(g)};return N}(x);return x=d.__decorate([q.subclass("esri.core.Evented")],x)};let p=function(x){function F(){var H=x.apply(this,arguments)||this;H._emitter=new B.EventEmitter(f._assertThisInitialized(H));return H}f._inheritsLoose(F,x);var N=F.prototype;N.destroy=function(){this._emitter.clear()};
N.emit=function(H,g){return this._emitter.emit(H,g)};N.on=function(H,g){return this._emitter.on(H,g)};N.once=function(H,g){return this._emitter.once(H,g)};N.hasEventListener=function(H){return this._emitter.hasEventListener(H)};return F}(fa);p=d.__decorate([q.subclass("esri.core.Evented")],p);y.EventedAccessor=p})(B||(B={}));return B})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(f,d,fa,O){function q(c=g){return[c[0],
c[1],c[2],c[3],c[4],c[5]]}function B(c,k,I,M,P,X,l=q()){l[0]=c;l[1]=k;l[2]=I;l[3]=M;l[4]=P;l[5]=X;return l}function y(c){return c[0]>=c[3]?0:c[3]-c[0]}function m(c){return c[1]>=c[4]?0:c[4]-c[1]}function p(c){return c[2]>=c[5]?0:c[5]-c[2]}function x(c,k){return Math.max(k[0],c[0])<=Math.min(k[3],c[3])&&Math.max(k[1],c[1])<=Math.min(k[4],c[4])&&Math.max(k[2],c[2])<=Math.min(k[5],c[5])}function F(c,k){c[0]=k[0];c[1]=k[1];c[2]=k[2];c[3]=k[3];c[4]=k[4];c[5]=k[5];return c}function N(c){return 6===c.length}
const H=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],g=[0,0,0,0,0,0],G=q();f.NEGATIVE_INFINITY=H;f.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];f.ZERO=g;f.allFinite=function(c){for(let k=0;6>k;k++)if(!isFinite(c[k]))return!1;return!0};f.center=function(c,k=[0,0,0]){k[0]=c[0]+y(c)/2;k[1]=c[1]+m(c)/2;k[2]=c[2]+p(c)/2;return k};f.contains=function(c,k){return k[0]>=c[0]&&k[1]>=c[1]&&k[2]>=c[2]&&k[3]<=c[3]&&k[4]<=c[4]&&k[5]<=c[5]};f.containsPoint=function(c,
k){return k[0]>=c[0]&&k[1]>=c[1]&&k[2]>=c[2]&&k[0]<=c[3]&&k[1]<=c[4]&&k[2]<=c[5]};f.containsPointWithMargin=function(c,k,I){return k[0]>=c[0]-I&&k[1]>=c[1]-I&&k[2]>=c[2]-I&&k[0]<=c[3]+I&&k[1]<=c[4]+I&&k[2]<=c[5]+I};f.create=q;f.depth=m;f.diameter=function(c){const k=y(c),I=p(c);c=m(c);return Math.sqrt(k*k+I*I+c*c)};f.empty=function(c){return c?F(c,H):q(H)};f.equals=function(c,k,I){if(d.isNone(c)||d.isNone(k))return c===k;if(!N(c)||!N(k))return!1;if(I)for(let M=0;M<c.length;M++){if(!I(c[M],k[M]))return!1}else for(I=
0;I<c.length;I++)if(c[I]!==k[I])return!1;return!0};f.expandWithAABB=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[2]=Math.min(c[2],k[2]);c[3]=Math.max(c[3],k[3]);c[4]=Math.max(c[4],k[4]);c[5]=Math.max(c[5],k[5])};f.expandWithBuffer=function(c,k,I=0,M=k.length/3){let P=c[0],X=c[1],l=c[2],A=c[3],J=c[4],K=c[5];for(let ca=0;ca<M;ca++)P=Math.min(P,k[I+3*ca]),X=Math.min(X,k[I+3*ca+1]),l=Math.min(l,k[I+3*ca+2]),A=Math.max(A,k[I+3*ca]),J=Math.max(J,k[I+3*ca+1]),K=Math.max(K,k[I+3*ca+2]);
c[0]=P;c[1]=X;c[2]=l;c[3]=A;c[4]=J;c[5]=K};f.expandWithNestedArray=function(c,k,I){const M=k.length;let P=c[0],X=c[1],l=c[2],A=c[3],J=c[4],K=c[5];if(I)for(I=0;I<M;I++){var ca=k[I];P=Math.min(P,ca[0]);X=Math.min(X,ca[1]);l=Math.min(l,ca[2]);A=Math.max(A,ca[0]);J=Math.max(J,ca[1]);K=Math.max(K,ca[2])}else for(I=0;I<M;I++)ca=k[I],P=Math.min(P,ca[0]),X=Math.min(X,ca[1]),A=Math.max(A,ca[0]),J=Math.max(J,ca[1]);c[0]=P;c[1]=X;c[2]=l;c[3]=A;c[4]=J;c[5]=K};f.expandWithOffset=function(c,k,I,M){c[0]=Math.min(c[0],
c[0]+k);c[3]=Math.max(c[3],c[3]+k);c[1]=Math.min(c[1],c[1]+I);c[4]=Math.max(c[4],c[4]+I);c[2]=Math.min(c[2],c[2]+M);c[5]=Math.max(c[5],c[5]+M)};f.expandWithRect=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[3]=Math.max(c[3],k[2]);c[4]=Math.max(c[4],k[3])};f.expandWithVec3=function(c,k){c[0]=Math.min(c[0],k[0]);c[1]=Math.min(c[1],k[1]);c[2]=Math.min(c[2],k[2]);c[3]=Math.max(c[3],k[0]);c[4]=Math.max(c[4],k[1]);c[5]=Math.max(c[5],k[2])};f.fromExtent=function(c,k=q()){k[0]=c.xmin;
k[1]=c.ymin;k[2]=c.hasZ?c.zmin:-Infinity;k[3]=c.xmax;k[4]=c.ymax;k[5]=c.hasZ?c.zmax:Infinity;return k};f.fromMinMax=function(c,k,I=q()){I[0]=c[0];I[1]=c[1];I[2]=c[2];I[3]=k[0];I[4]=k[1];I[5]=k[2];return I};f.fromRect=function(c,k){c[0]=k[0];c[1]=k[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=k[2];c[4]=k[3];c[5]=Number.POSITIVE_INFINITY;return c};f.fromValues=B;f.getMax=function(c,k){k[0]=c[3];k[1]=c[4];k[2]=c[5];return k};f.getMin=function(c,k){k[0]=c[0];k[1]=c[1];k[2]=c[2];return k};f.height=p;f.intersects=
x;f.intersectsClippingArea=function(c,k){return d.isNone(k)?!0:x(c,k)};f.is=N;f.isPoint=function(c){return 0===y(c)&&0===m(c)&&0===p(c)};f.maximumDimension=function(c){return Math.max(y(c),p(c),m(c))};f.offset=function(c,k,I,M,P=c){P[0]=c[0]+k;P[1]=c[1]+I;P[2]=c[2]+M;P[3]=c[3]+k;P[4]=c[4]+I;P[5]=c[5]+M;return P};f.scale=function(c,k,I=c){const M=c[0]+y(c)/2,P=c[1]+m(c)/2,X=c[2]+p(c)/2;I[0]=M+(c[0]-M)*k;I[1]=P+(c[1]-P)*k;I[2]=X+(c[2]-X)*k;I[3]=M+(c[3]-M)*k;I[4]=P+(c[4]-P)*k;I[5]=X+(c[5]-X)*k;return I};
f.set=F;f.setMax=function(c,k,I=c){I[3]=k[0];I[4]=k[1];I[5]=k[2];I!==c&&(I[0]=c[0],I[1]=c[1],I[2]=c[2]);return c};f.setMin=function(c,k,I=c){I[0]=k[0];I[1]=k[1];I[2]=k[2];I!==c&&(I[3]=c[3],I[4]=c[4],I[5]=c[5]);return I};f.size=function(c,k=[0,0,0]){k[0]=y(c);k[1]=m(c);k[2]=p(c);return k};f.toExtent=function(c,k){return isFinite(c[2])||isFinite(c[5])?new fa({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:k}):new fa({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:k})};
f.toRect=function(c,k){k||(k=O.create());k[0]=c[0];k[1]=c[1];k[2]=c[3];k[3]=c[4];return k};f.width=y;f.wrap=function(c,k,I,M,P,X){return B(c,k,I,M,P,X,G)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(f,d,fa,O,q,B,y,
m){function p(z,L){return z?L?4:3:L?3:2}function x(z,L,T,V){if(z){if(T)return L&&V?n:cb;if(L&&V)return b}else if(L&&V)return cb;return Na}function F({scale:z,translate:L},T){return Math.round((T-L[0])/z[0])}function N({scale:z,translate:L},T){return Math.round((L[1]-T)/z[1])}function H({scale:z,translate:L},T,V){return T*z[V]+L[V]}function g(z){z=z.coords;return{x:z[0],y:z[1]}}function G(z,L){z.coords[0]=L.x;z.coords[1]=L.y;return z}function c(z){z=z.coords;return{x:z[0],y:z[1],z:z[2]}}function k(z,
L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.z;return z}function I(z){z=z.coords;return{x:z[0],y:z[1],m:z[2]}}function M(z,L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.m;return z}function P(z){z=z.coords;return{x:z[0],y:z[1],z:z[2],m:z[3]}}function X(z,L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.z;z.coords[3]=L.m;return z}function l(z,L){return z&&L?X:z?k:L?M:G}function A(z,L,T,V,ha){T=l(T,V);for(const {geometry:ka,attributes:oa}of L)L=O.isSome(ka)?T(new m,ka):null,z.push(new B.OptimizedFeature(L,
oa,null,ha?oa[ha]:void 0));return z}function J(z,L,T,V){for(const {geometry:ha,attributes:ka}of L)z.push({attributes:ka,geometry:O.isSome(ha)?K(ha,T,V):null});return z}function K(z,L,T){if(O.isNone(z))return null;const V=p(L,T),ha=[];for(let ka=0;ka<z.coords.length;ka+=V){const oa=[];for(let ra=0;ra<V;ra++)oa.push(z.coords[ka+ra]);ha.push(oa)}return L?T?{points:ha,hasZ:L,hasM:T}:{points:ha,hasZ:L}:T?{points:ha,hasM:T}:{points:ha}}function ca(z,L,T,V,ha){T=p(T,V);for(const {geometry:ka,attributes:oa}of L)L=
O.isSome(ka)?v(new m,ka,T):null,z.push(new B.OptimizedFeature(L,oa,null,ha?oa[ha]:void 0));return z}function v(z,L,T=p(L.hasZ,L.hasM)){z.lengths[0]=L.points.length;const V=z.coords;let ha=0;for(const ka of L.points)for(L=0;L<T;L++)V[ha++]=ka[L];return z}function w(z,L,T){if(!z)return null;const V=p(L,T),{coords:ha,lengths:ka}=z;z=[];let oa=0;for(const ra of ka){const sa=[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=0;ma<V;ma++)da.push(ha[oa++]);sa.push(da)}z.push(sa)}return L?T?{paths:z,hasZ:L,
hasM:T}:{paths:z,hasZ:L}:T?{paths:z,hasM:T}:{paths:z}}function D(z,L,T,V,ha){T=p(T,V);for(const {geometry:ka,attributes:oa}of L)L=O.isSome(ka)?t(new m,ka,T):null,z.push(new B.OptimizedFeature(L,oa,null,ha?oa[ha]:void 0));return z}function t(z,L,T=p(L.hasZ,L.hasM)){const {lengths:V,coords:ha}=z;let ka=0;for(const oa of L.paths){for(const ra of oa)for(L=0;L<T;L++)ha[ka++]=ra[L];V.push(oa.length)}return z}function h(z,L,T){if(!z)return null;const V=p(L,T),{coords:ha,lengths:ka}=z;z=[];let oa=0;for(const ra of ka){const sa=
[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=0;ma<V;ma++)da.push(ha[oa++]);sa.push(da)}z.push(sa)}return L?T?{rings:z,hasZ:L,hasM:T}:{rings:z,hasZ:L}:T?{rings:z,hasM:T}:{rings:z}}function C(z,L,T,V,ha){for(const {geometry:ka,centroid:oa,attributes:ra}of L){L=O.isSome(ka)?r(new m,ka,T,V):null;const sa=ha?ra[ha]:void 0;O.isSome(oa)?z.push(new B.OptimizedFeature(L,ra,G(new m,oa),sa)):z.push(new B.OptimizedFeature(L,ra,null,sa))}return z}function r(z,L,T=L.hasZ,V=L.hasM){R(z,L.rings,T,V);return z}
function R(z,L,T,V){T=p(T,V);const {lengths:ha,coords:ka}=z;V=0;ya(z);for(const oa of L){for(const ra of oa)for(L=0;L<T;L++)ka[V++]=ra[L];ha.push(oa.length)}return z}function W(z,L,T,V,ha,ka){Aa(z);if(!T){for(const oa of L)z.push(new B.OptimizedFeature(null,oa.attributes,null,ka?oa.attributes[ka]:void 0));return z}switch(T){case "esriGeometryPoint":return A(z,L,V,ha,ka);case "esriGeometryMultipoint":return ca(z,L,V,ha,ka);case "esriGeometryPolyline":return D(z,L,V,ha,ka);case "esriGeometryPolygon":return C(z,
L,V,ha,ka);default:Ha.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`)),Aa(z)}return z}function S(z,L,T,V){z=z&&("coords"in z?z:z.geometry);if(O.isNone(z))return null;switch(L){case "esriGeometryPoint":return L=g,T&&V?L=P:T?L=c:V&&(L=I),L(z);case "esriGeometryMultipoint":return K(z,T,V);case "esriGeometryPolyline":return w(z,T,V);case "esriGeometryPolygon":return h(z,T,V);default:return Ha.error("convertToGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${L}'`)),
null}}function ja(z,L,T,V,ha){Aa(z);if(O.isNone(T)){for(const oa of L)z.push({attributes:oa.attributes});return z}switch(T){case "esriGeometryPoint":T=g;V&&ha?T=P:V?T=c:ha&&(T=I);for(var ka of L){const {geometry:oa,attributes:ra}=ka;V=O.isSome(oa)?T(oa):null;z.push({attributes:ra,geometry:V})}break;case "esriGeometryMultipoint":return J(z,L,V,ha);case "esriGeometryPolyline":for(const {geometry:oa,attributes:ra}of L)z.push({attributes:ra,geometry:O.isSome(oa)?w(oa,V,ha):null});break;case "esriGeometryPolygon":for(const {geometry:oa,
attributes:ra,centroid:sa}of L)ka=O.isSome(oa)?h(oa,V,ha):null,O.isSome(sa)?(L=g(sa),z.push({attributes:ra,centroid:L,geometry:ka})):z.push({attributes:ra,geometry:ka});break;default:Ha.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`))}return z}function Z(z,L,T,V,ha,ka,oa=T,ra=V){ya(z);if(O.isNone(L)||!L.coords.length)return null;ha=Ka[ha];const {coords:sa,lengths:aa}=L;L=p(T,V);const da=p(T&&oa,V&&ra);T=x(T,V,oa,ra);if(!aa.length)return T(z.coords,
sa,0,0,F(ka,sa[0]),N(ka,sa[1])),ya(z,L,0),z;let ma,za=0,Da,Ga=0;for(const Ja of aa){if(Ja<ha)continue;let Fa=0;Da=Ga;ra=V=F(ka,sa[za]);ma=oa=N(ka,sa[za+1]);T(z.coords,sa,Da,za,ra,ma);Fa++;za+=L;Da+=da;for(let La=1;La<Ja;La++,za+=L)if(ra=F(ka,sa[za]),ma=N(ka,sa[za+1]),ra!==V||ma!==oa)T(z.coords,sa,Da,za,ra-V,ma-oa),Da+=da,Fa++,V=ra,oa=ma;Fa>=ha&&(z.lengths.push(Fa),Ga=Da)}Aa(z.coords,Ga);return z.coords.length?z:null}function qa(z,L,T,V,ha,ka,oa){let ra=V,sa=0;for(let da=ka+T;da<oa;da+=T){var aa=L[da];
const ma=L[da+1],za=L[oa],Da=L[oa+1];let Ga=L[ka],Ja=L[ka+1],Fa=za-Ga,La=Da-Ja;if(0!==Fa||0!==La){const ta=((aa-Ga)*Fa+(ma-Ja)*La)/(Fa*Fa+La*La);1<ta?(Ga=za,Ja=Da):0<ta&&(Ga+=Fa*ta,Ja+=La*ta)}Fa=aa-Ga;La=ma-Ja;aa=Fa*Fa+La*La;aa>ra&&(sa=da,ra=aa)}ra>V&&(sa-ka>T&&qa(z,L,T,V,ha,ka,sa),ha(z,L,z.length,sa,L[sa],L[sa+1]),oa-sa>T&&qa(z,L,T,V,ha,sa,oa))}function wa(z,L,T,V,ha){const {coords:ka,lengths:oa}=L;T=p(T,V);if(!ka.length)return z!==L&&ya(z),z;O.assertIsSome(ha);const {originPosition:ra,scale:sa,
translate:aa}=ha;ha=na;ha.originPosition=ra;V=ha.scale;V[0]=sa[0]??1;V[1]=-(sa[1]??1);V[2]=sa[2]??1;V[3]=sa[3]??1;var da=ha.translate;da[0]=aa[0]??0;da[1]=aa[1]??0;da[2]=aa[2]??0;da[3]=aa[3]??0;if(!oa.length){for(V=0;V<T;++V)z.coords[V]=H(ha,ka[V],V);z!==L&&ya(z,T,0);return z}da=0;for(let za=0;za<oa.length;za++){const Da=oa[za];z.lengths[za]=Da;for(var ma=0;ma<T;++ma)z.coords[da+ma]=H(ha,ka[da+ma],ma);ma=z.coords[da];let Ga=z.coords[da+1];da+=T;for(let Ja=1;Ja<Da;Ja++,da+=T){ma+=ka[da]*V[0];Ga+=ka[da+
1]*V[1];z.coords[da]=ma;z.coords[da+1]=Ga;for(let Fa=2;Fa<T;++Fa)z.coords[da+Fa]=H(ha,ka[da+Fa],Fa)}}z!==L&&ya(z,ka.length,oa.length);return z}function xa(z,L,T,V){let ha=0,ka=z[V*L],oa=z[V*(L+1)];for(let ra=1;ra<T;ra++){const sa=ka+z[V*(L+ra)],aa=oa+z[V*(L+ra)+1],da=(sa-ka)*(aa+oa);ka=sa;oa=aa;ha+=da}return.5*ha}function ya(z,L=0,T=0){Aa(z.lengths,T);Aa(z.coords,L)}function Aa(z,L=0){z.length!==L&&(z.length=L)}const Ha=fa.getLogger("esri.layers.graphics.featureConversionUtils"),Ka={esriGeometryPoint:0,
esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Na=(z,L,T,V,ha,ka)=>{z[T]=ha;z[T+1]=ka},cb=(z,L,T,V,ha,ka)=>{z[T]=ha;z[T+1]=ka;z[T+2]=L[V+2]},b=(z,L,T,V,ha,ka)=>{z[T]=ha;z[T+1]=ka;z[T+2]=L[V+3]},n=(z,L,T,V,ha,ka)=>{z[T]=ha;z[T+1]=ka;z[T+2]=L[V+2];z[T+3]=L[V+3]},ea=[],ia=[],na={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};f.convertFromFeature=function(z,L,T,V,ha){ea[0]=z;[z]=W(ia,ea,L,T,V,ha);Aa(ea);Aa(ia);return z};f.convertFromFeatureSet=function(z,L){const T=
new y,{hasM:V,hasZ:ha,features:ka,objectIdFieldName:oa,spatialReference:ra,geometryType:sa,exceededTransferLimit:aa,transform:da,fields:ma}=z;ma&&(T.fields=ma);T.geometryType=sa??null;T.objectIdFieldName=oa??L??null;T.spatialReference=ra??null;if(!T.objectIdFieldName)return Ha.error(new d("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;ka&&W(T.features,ka,sa,ha,V,T.objectIdFieldName);aa&&(T.exceededTransferLimit=aa);V&&(T.hasM=V);ha&&(T.hasZ=ha);da&&(T.transform=
da);return T};f.convertFromFeatures=W;f.convertFromGeometry=function(z,L,T){if(O.isNone(z))return null;const V=new m;"hasZ"in z&&null==L&&(L=z.hasZ);"hasM"in z&&null==T&&(T=z.hasM);if(q.isPoint(z))return l(null!=L?L:null!=z.z,null!=T?T:null!=z.m)(V,z);if(q.isPolygon(z))return r(V,z,L,T);if(q.isPolyline(z))return t(V,z,p(L,T));if(q.isMultipoint(z))return v(V,z,p(L,T));Ha.error("convertFromGeometry:unknown-geometry",new d(`Unable to parse unknown geometry type '${z}'`))};f.convertFromGraphics=function(z,
L,T,V,ha,ka){const oa=z.length;switch(T){case "esriGeometryPoint":A(z,L,V,ha,ka);break;case "esriGeometryMultipoint":ca(z,L,V,ha,ka);break;case "esriGeometryPolyline":D(z,L,V,ha,ka);break;case "esriGeometryPolygon":C(z,L,V,ha,ka);break;default:Ha.error("convertToFeatureSet:unknown-geometry",new d(`Unable to parse unknown geometry type '${T}'`))}for(V=0;V<L.length;V++)z[V+oa].geometryType=T,z[V+oa].insertAfter=L[V].insertAfter,z[V+oa].groupId=L[V].groupId;return z};f.convertFromMultipoint=v;f.convertFromMultipointFeatures=
ca;f.convertFromNestedArray=R;f.convertFromPoint=function(z,L,T=l(null!=L.z,null!=L.m)){return T(z,L)};f.convertFromPointFeatures=A;f.convertFromPolygon=r;f.convertFromPolyline=t;f.convertFromPolylineFeatures=D;f.convertToFeature=function(z,L,T,V){ia[0]=z;ja(ea,ia,L,T,V);z=ea[0];Aa(ea);Aa(ia);return z};f.convertToFeatureSet=function(z){const {objectIdFieldName:L,spatialReference:T,transform:V,fields:ha,hasM:ka,hasZ:oa,features:ra,geometryType:sa,exceededTransferLimit:aa,uniqueIdField:da,queryGeometry:ma,
queryGeometryType:za}=z;z=ja([],ra,sa,oa,ka);const Da=S(ma,za,!1,!1);z={features:z,fields:ha,geometryType:sa,objectIdFieldName:L,spatialReference:T,uniqueIdField:da,queryGeometry:Da};V&&(z.transform=V);aa&&(z.exceededTransferLimit=aa);ka&&(z.hasM=ka);oa&&(z.hasZ=oa);return z};f.convertToFeatures=ja;f.convertToGeometry=S;f.convertToMultipoint=K;f.convertToMultipointFeatures=J;f.convertToPoint=function(z,L,T){return z?L?T?P(z):c(z):T?I(z):g(z):null};f.convertToPolygon=h;f.convertToPolyline=w;f.deltaDecodeGeometry=
function(z,L){if(O.isNone(z))return null;const T=z.clone(),V=z.coords;z=z.lengths;let ha=0;for(let ra=0;ra<z.length;ra++){const sa=z[ra];var ka=V[L*ha],oa=V[L*ha+1];for(let aa=1;aa<sa;aa++)ka+=V[L*(ha+aa)],oa+=V[L*(ha+aa)+1],T.coords[L*(ha+aa)]=ka,T.coords[L*(ha+aa)+1]=oa;ha+=sa}return T};f.deltaEncodeGeometry=function(z,L){const T=z.clone(),V=z.coords;z=z.lengths;let ha=0;for(let oa=0;oa<z.length;oa++){const ra=z[oa];let sa=V[L*ha];var ka=V[L*ha+1];for(let aa=1;aa<ra;aa++){const da=V[L*(ha+aa)],
ma=V[L*(ha+aa)+1];ka=ma-ka;T.coords[L*(ha+aa)]=da-sa;T.coords[L*(ha+aa)+1]=ka;sa=da;ka=ma}ha+=ra}return T};f.generalizeOptimizedGeometry=function(z,L,T,V,ha,ka,oa=T,ra=V){ya(z);if(!L||!L.coords.length)return null;ha=Ka[ha];const {coords:sa,lengths:aa}=L;L=p(T,V);const da=p(T&&oa,V&&ra);T=x(T,V,oa,ra);if(!aa.length)return T(z.coords,sa,0,0,sa[0],sa[1]),ya(z,L,0),z;V=0;ka*=ka;for(const ma of aa){if(ma<ha){V+=ma*L;continue}oa=z.coords.length/da;ra=V;const za=V+(ma-1)*L;T(z.coords,sa,z.coords.length,
ra,sa[ra],sa[ra+1]);qa(z.coords,sa,L,ka,T,ra,za);T(z.coords,sa,z.coords.length,za,sa[za],sa[za+1]);ra=z.coords.length/da-oa;ra>=ha?z.lengths.push(ra):Aa(z.coords,oa*da);V+=ma*L}return z.coords.length?z:null};f.getBoundsOptimizedGeometry=function(z,L,T,V){if(O.isNone(L)||!L.coords||!L.coords.length)return null;T=p(T,V);let ha=V=Number.POSITIVE_INFINITY,ka=Number.NEGATIVE_INFINITY,oa=Number.NEGATIVE_INFINITY;if(L&&L.coords){L=L.coords;for(let ra=0;ra<L.length;ra+=T){const sa=L[ra],aa=L[ra+1];V=Math.min(V,
sa);ka=Math.max(ka,sa);ha=Math.min(ha,aa);oa=Math.max(oa,aa)}}z[0]=V;z[1]=ha;z[2]=ka;z[3]=oa;return z};f.getQuantizedArea=function(z,L){const {coords:T,lengths:V}=z;let ha=z=0;for(let ka=0;ka<V.length;ka++){const oa=V[ka];ha+=xa(T,z,oa,L);z+=oa}return Math.abs(ha)};f.getQuantizedBoundsOptimizedGeometry=function(z,L,T,V){T=p(T,V);const {lengths:ha,coords:ka}=L;V=L=Number.POSITIVE_INFINITY;let oa=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY,sa=0;for(const aa of ha){let da=ka[sa],ma=ka[sa+1];
L=Math.min(da,L);V=Math.min(ma,V);oa=Math.max(da,oa);ra=Math.max(ma,ra);sa+=T;for(let za=1;za<aa;za++,sa+=T){const Da=ka[sa],Ga=ka[sa+1];da+=Da;ma+=Ga;0>Da&&(L=Math.min(L,da));0<Da&&(oa=Math.max(oa,da));0>Ga?V=Math.min(V,ma):0<Ga&&(ra=Math.max(ra,ma))}}z[0]=L;z[1]=V;z[2]=oa;z[3]=ra;return z};f.getSignedQuantizedRingArea=xa;f.quantizeOptimizedFeatureSet=function(z,L){const {geometryType:T,features:V,hasM:ha,hasZ:ka}=L;if(!z)return L;for(let oa=0;oa<V.length;oa++){const ra=V[oa],sa=ra.weakClone();sa.geometry=
new m;Z(sa.geometry,ra.geometry,ha,ka,T,z);ra.centroid&&(sa.centroid=new m,Z(sa.centroid,ra.centroid,ha,ka,"esriGeometryPoint",z));V[oa]=sa}L.transform=z;return L};f.quantizeOptimizedGeometry=Z;f.quantizeX=F;f.quantizeY=N;f.removeCollinearVectices=function(z,L,T,V,ha){if(!L||!L.coords||!L.coords.length)return null;T=Ka[T];const {coords:ka,lengths:oa}=L;L=x(V,ha,V,ha);V=p(V,ha);let ra=ha=0,sa=0,aa=0;for(const za of oa){ra=aa;L(z.coords,ka,ra,ha,ka[ha],ka[ha+1]);ha+=V;var da=ka[ha];let Da=ka[ha+1],
Ga=da,Ja=Da;var ma=Da/da;ra+=V;L(z.coords,ka,ra,ha,Ga,Ja);ha+=V;for(let Fa=2;Fa<za;Fa++){da=ka[ha];Da=ka[ha+1];const La=Da/da,ta=ma===La||!isFinite(ma)&&!isFinite(La);ma=ta&&isFinite(La)?0<=ma&&0<=La||0>=ma&&0>=La:0<=Ja&&0<=Da||0>=Ja&&0>=Da;ta&&ma?(Ga+=da,Ja+=Da):(Ga=da,Ja=Da,ra+=V);L(z.coords,ka,ra,ha,Ga,Ja);ha+=V;ma=La}ra+=V;da=(ra-aa)/V;da>=T&&(z.lengths[sa]=da,aa=ra,sa++)}z.coords.length>aa&&(z.coords.length=aa);z.lengths.length>sa&&(z.lengths.length=sa);return z.coords.length&&z.lengths.length?
z:null};f.removeZMValues=function(z,L,T,V,ha,ka){ya(z);z.lengths.push(...L.lengths);if(T===ha&&V===ka)for(var oa=0;oa<L.coords.length;oa++)z.coords.push(L.coords[oa]);else for(oa=p(T,V),T=x(T,V,ha,ka),L=L.coords,V=0;V<L.length;V+=oa)T(z.coords,L,z.coords.length,V,L[V],L[V+1]);return z};f.unquantizeOptimizedFeatureSet=function(z){const {transform:L,features:T,hasM:V,hasZ:ha}=z;if(!L)return z;for(const ka of T)O.isSome(ka.geometry)&&wa(ka.geometry,ka.geometry,V,ha,L),O.isSome(ka.centroid)&&wa(ka.centroid,
ka.centroid,V,ha,L);z.transform=null;return z};f.unquantizeOptimizedGeometry=wa;f.unquantizeValue=H;f.unquantizeX=function(z,L){return H(z,L,0)};f.unquantizeY=function(z,L){return H(z,-L,1)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=
null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const d=new f;d.objectIdFieldName=this.objectIdFieldName;d.globalIdFieldName=this.globalIdFieldName;d.geohashFieldName=this.geohashFieldName;d.geometryProperties=this.geometryProperties;d.geometryType=this.geometryType;d.spatialReference=this.spatialReference;d.hasZ=this.hasZ;d.hasM=this.hasM;
d.features=this.features;d.fields=this.fields;d.transform=this.transform;d.exceededTransferLimit=this.exceededTransferLimit;d.uniqueIdField=this.uniqueIdField;d.queryGeometry=this.queryGeometry;d.queryGeometryType=this.queryGeometryType;return d};return f}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(f,d,fa,O,q){function B(p,
x,F){y.minX=x[0];y.minY=x[1];y.maxX=x[2];y.maxY=x[3];p.search(y,F)}const y={minX:0,minY:0,maxX:0,maxY:0};let m=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new O.PooledRBush(9,fa("esri-csp-restrictions")?F=>({minX:F[0],minY:F[1],maxX:F[2],maxY:F[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const F=Array(this._idByBounds.size);let N=0;this._idByBounds.forEach((H,g)=>{F[N++]=g});this._indexInvalid=
!1;this._index.clear();this._index.load(F)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(F=>this._idByBounds.has(F))),this._boundsToLoad.length=0)}}var x=p.prototype;x.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};x.delete=function(F){const N=this._boundsById.get(F);this._boundsById.delete(F);N&&(this._idByBounds.delete(N),this._indexInvalid||this._index.remove(N))};x.forEachInBounds=
function(F,N){this._loadIndex();B(this._index,F,H=>N(this._idByBounds.get(H)))};x.get=function(F){return this._boundsById.get(F)};x.has=function(F){return this._boundsById.has(F)};x.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};x.set=function(F,N){if(!this._indexInvalid){const H=this._boundsById.get(F);H&&(this._index.remove(H),this._idByBounds.delete(H))}this._boundsById.set(F,N);N&&(this._idByBounds.set(N,F),this._indexInvalid||(this._boundsToLoad.push(N),
5E4<this._boundsToLoad.length&&this._loadIndex()))};d._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const F=q.empty();for(const N of this._boundsById.values())N&&(F[0]=Math.min(N[0],F[0]),F[1]=Math.min(N[1],F[1]),F[2]=Math.max(N[2],F[2]),F[3]=Math.max(N[3],F[3]));return F}},{key:"valid",get:function(){return!this._indexInvalid}}]);return p}();f.BoundsStore=m;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(f,d,fa,O,q,B){function y(K,ca){m(K,0,K.children.length,ca,K)}function m(K,ca,v,w,D){D||(D=new A([]));D.minX=Infinity;D.minY=Infinity;D.maxX=-Infinity;D.maxY=-Infinity;for(let t=ca,h;t<v;t++)h=K.children[t],p(D,K.leaf?w(h):h);return D}function p(K,ca){K.minX=Math.min(K.minX,ca.minX);K.minY=Math.min(K.minY,ca.minY);K.maxX=Math.max(K.maxX,ca.maxX);K.maxY=Math.max(K.maxY,ca.maxY)}function x(K,ca){return K.minX-ca.minX}function F(K,ca){return K.minY-ca.minY}function N(K){return(K.maxX-K.minX)*
(K.maxY-K.minY)}function H(K){return K.maxX-K.minX+(K.maxY-K.minY)}function g(K,ca){return K.minX<=ca.minX&&K.minY<=ca.minY&&ca.maxX<=K.maxX&&ca.maxY<=K.maxY}function G(K,ca){return ca.minX<=K.maxX&&ca.minY<=K.maxY&&ca.maxX>=K.minX&&ca.maxY>=K.minY}function c(K,ca,v,w,D){for(ca=[ca,v];ca.length;){v=O.assumeNonNull(ca.pop());const t=O.assumeNonNull(ca.pop());if(v-t<=w)continue;const h=t+Math.ceil((v-t)/w/2)*w;B.quickselect(K,h,t,v,D);ca.push(t,h,h,v)}}let k=function(){function K(v=9,w){this._compareMinX=
x;this._compareMinY=F;this._toBBox=D=>D;this._maxEntries=Math.max(4,v||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));w&&("function"===typeof w?this._toBBox=w:this._initFormat(w));this.clear()}var ca=K.prototype;ca.destroy=function(){this.clear();I.prune();M.prune();P.prune();X.prune()};ca.all=function(v){this._all(this._data,v)};ca.search=function(v,w){let D=this._data;const t=this._toBBox;if(G(v,D))for(I.clear();D;){for(let h=0,C=D.children.length;h<C;h++){const r=D.children[h],
R=D.leaf?t(r):r;G(v,R)&&(D.leaf?w(r):g(v,R)?this._all(r,w):I.push(r))}D=I.pop()}};ca.collides=function(v){let w=this._data;const D=this._toBBox;if(!G(v,w))return!1;for(I.clear();w;){for(let t=0,h=w.children.length;t<h;t++){const C=w.children[t],r=w.leaf?D(C):C;if(G(v,r)){if(w.leaf||g(v,r))return!0;I.push(C)}}w=I.pop()}return!1};ca.load=function(v){if(!v.length)return this;if(v.length<this._minEntries){for(let w=0,D=v.length;w<D;w++)this.insert(v[w]);return this}v=this._build(v.slice(0,v.length),0,
v.length-1,0);if(this._data.children.length)if(this._data.height===v.height)this._splitRoot(this._data,v);else{if(this._data.height<v.height){const w=this._data;this._data=v;v=w}this._insert(v,this._data.height-v.height-1,!0)}else this._data=v;return this};ca.insert=function(v){v&&this._insert(v,this._data.height-1);return this};ca.clear=function(){this._data=new A([]);return this};ca.remove=function(v){if(!v)return this;let w=this._data,D=null,t=0,h=!1,C;const r=this._toBBox(v);P.clear();for(X.clear();w||
0<P.length;){w||(w=O.assumeNonNull(P.pop()),D=P.data[P.length-1],t=X.pop()??0,h=!0);if(w.leaf&&(C=fa.indexOf(w.children,v,w.children.length,w.indexHint),-1!==C)){w.children.splice(C,1);P.push(w);this._condense(P);break}h||w.leaf||!g(w,r)?D?(t++,w=D.children[t],h=!1):w=null:(P.push(w),X.push(t),t=0,D=w,w=w.children[0])}return this};ca.toJSON=function(){return this._data};ca.fromJSON=function(v){this._data=v;return this};ca._all=function(v,w){for(M.clear();v;){if(!0===v.leaf)for(const D of v.children)w(D);
else M.pushArray(v.children);v=M.pop()??null}};ca._build=function(v,w,D,t){var h=D-w+1,C=this._maxEntries;if(h<=C)return v=new A(v.slice(w,D+1)),y(v,this._toBBox),v;t||(t=Math.ceil(Math.log(h)/Math.log(C)),C=Math.ceil(h/C**(t-1)));const r=new J([]);r.height=t;h=Math.ceil(h/C);C=h*Math.ceil(Math.sqrt(C));for(c(v,w,D,C,this._compareMinX);w<=D;w+=C){const R=Math.min(w+C-1,D);c(v,w,R,h,this._compareMinY);for(let W=w;W<=R;W+=h)r.children.push(this._build(v,W,Math.min(W+h-1,R),t-1))}y(r,this._toBBox);return r};
ca._chooseSubtree=function(v,w,D,t){for(;;){t.push(w);if(!0===w.leaf||t.length-1===D)break;let h=Infinity,C=Infinity,r=void 0;for(let R=0,W=w.children.length;R<W;R++){const S=w.children[R],ja=N(S),Z=(Math.max(S.maxX,v.maxX)-Math.min(S.minX,v.minX))*(Math.max(S.maxY,v.maxY)-Math.min(S.minY,v.minY))-ja;Z<C?(C=Z,h=ja<h?ja:h,r=S):Z===C&&ja<h&&(h=ja,r=S)}w=r||w.children[0]}return w};ca._insert=function(v,w,D){var t=this._toBBox;D=D?v:t(v);P.clear();t=this._chooseSubtree(D,this._data,w,P);t.children.push(v);
for(p(t,D);0<=w;)if(P.data[w].children.length>this._maxEntries)this._split(P,w),w--;else break;this._adjustParentBBoxes(D,P,w)};ca._split=function(v,w){const D=v.data[w];var t=D.children.length;const h=this._minEntries;this._chooseSplitAxis(D,h,t);(t=this._chooseSplitIndex(D,h,t))?(t=D.children.splice(t,D.children.length-t),t=D.leaf?new A(t):new J(t),t.height=D.height,y(D,this._toBBox),y(t,this._toBBox),w?v.data[w-1].children.push(t):this._splitRoot(D,t)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};
ca._splitRoot=function(v,w){this._data=new J([v,w]);this._data.height=v.height+1;y(this._data,this._toBBox)};ca._chooseSplitIndex=function(v,w,D){let t,h,C=void 0;t=h=Infinity;for(let R=w;R<=D-w;R++){var r=m(v,0,R,this._toBBox);const W=m(v,R,D,this._toBBox),S=Math.max(0,Math.min(r.maxX,W.maxX)-Math.max(r.minX,W.minX))*Math.max(0,Math.min(r.maxY,W.maxY)-Math.max(r.minY,W.minY));r=N(r)+N(W);S<t?(t=S,C=R,h=r<h?r:h):S===t&&r<h&&(h=r,C=R)}return C};ca._chooseSplitAxis=function(v,w,D){const t=v.leaf?this._compareMinX:
x,h=v.leaf?this._compareMinY:F,C=this._allDistMargin(v,w,D,t);w=this._allDistMargin(v,w,D,h);C<w&&v.children.sort(t)};ca._allDistMargin=function(v,w,D,t){v.children.sort(t);t=this._toBBox;var h=m(v,0,w,t);const C=m(v,D-w,D,t);let r=H(h)+H(C);for(let R=w;R<D-w;R++){const W=v.children[R];p(h,v.leaf?t(W):W);r+=H(h)}for(D=D-w-1;D>=w;D--)h=v.children[D],p(C,v.leaf?t(h):h),r+=H(C);return r};ca._adjustParentBBoxes=function(v,w,D){for(;0<=D;D--)p(w.data[D],v)};ca._condense=function(v){for(let w=v.length-
1;0<=w;w--){const D=v.data[w];if(0===D.children.length)if(0<w){const t=v.data[w-1],h=t.children;h.splice(fa.indexOf(h,D,h.length,t.indexHint),1)}else this.clear();else y(D,this._toBBox)}};ca._initFormat=function(v){const w=["return a"," - b",";"];this._compareMinX=new Function("a","b",w.join(v[0]));this._compareMinY=new Function("a","b",w.join(v[1]));this._toBBox=new Function("a","return {minX: a"+v[0]+", minY: a"+v[1]+", maxX: a"+v[2]+", maxY: a"+v[3]+"};")};return K}();const I=new q,M=new q,P=new q,
X=new q({deallocator:void 0});q=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let l=function(K){function ca(){var v=K.apply(this,arguments)||this;v.height=1;v.indexHint=new fa.PositionHint;return v}d._inheritsLoose(ca,K);return ca}(q),A=function(K){function ca(v){var w=K.call(this)||this;w.children=v;w.leaf=!0;return w}d._inheritsLoose(ca,K);return ca}(l),J=function(K){function ca(v){var w=K.call(this)||this;w.children=v;w.leaf=!1;return w}d._inheritsLoose(ca,K);return ca}(l);
f.BBox=q;f.PooledRBush=k;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(f){var d={exports:{}};(function(fa){(function(O){O=O();void 0!==O&&(fa.exports=O)})(function(){function O(y,m,p,x,F){for(;x>p;){if(600<x-p){var N=x-p+1,H=m-p+1,g=Math.log(N),G=.5*Math.exp(2*g/3);g=.5*Math.sqrt(g*G*(N-G)/N)*(0>H-N/2?-1:1);O(y,m,Math.max(p,Math.floor(m-H*G/N+g)),Math.min(x,Math.floor(m+(N-H)*G/N+g)),F)}N=
y[m];H=p;G=x;q(y,p,m);for(0<F(y[x],N)&&q(y,p,x);H<G;){q(y,H,G);H++;for(G--;0>F(y[H],N);)H++;for(;0<F(y[G],N);)G--}0===F(y[p],N)?q(y,p,G):(G++,q(y,G,x));G<=m&&(p=G+1);m<=G&&(x=G-1)}}function q(y,m,p){var x=y[m];y[m]=y[p];y[p]=x}function B(y,m){return y<m?-1:y>m?1:0}return function(y,m,p,x,F){O(y,m,p||0,x||y.length-1,F||B)}})})(d);f.quickselect=d.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature",
"../OptimizedGeometry"],function(f,d,fa,O,q){f.optimizedFeatureQueryEngineAdapter={getObjectId(B){return B.objectId},getAttributes(B){return B.attributes},getAttribute(B,y){return B.attributes[y]},cloneWithGeometry(B,y){return new O.OptimizedFeature(y,B.attributes,null,B.objectId)},getGeometry(B){return B.geometry},getCentroid(B,y){d.isNone(B.centroid)&&(B.centroid=fa.getCentroidOptimizedGeometry(new q,B.geometry,y.hasZ,y.hasM));return B.centroid}};Object.defineProperties(f,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(f,d){function fa(q,B,y,m,p,x,F=1){x=p?x?4:3:x?3:2;let N=y,H=y+x,g=0,G=0,c=y=0,k=0;for(let I=0,M=m-1;I<M;I++,N+=x,H+=x){m=B[N];const P=B[N+1],X=B[N+2],l=B[H],A=B[H+1],J=B[H+2];let K=m*A-l*P;c+=K;g+=(m+l)*K;G+=(P+A)*K;p&&(K=m*J-l*X,y+=(X+J)*K,k+=K);m<q[0]&&(q[0]=m);m>q[1]&&(q[1]=m);P<q[2]&&(q[2]=P);P>q[3]&&(q[3]=P);p&&(X<q[4]&&(q[4]=X),X>q[5]&&(q[5]=X))}0<c*F&&(c*=-1);
0<k*F&&(k*=-1);if(!c)return null;q=[g,G,.5*c];p&&(q[3]=y,q[4]=.5*k);return q}function O(q,B,y,m,p){p=m?p?4:3:p?3:2;let x=B,F=B+p,N=0,H=0,g=0,G=0;for(let M=0,P=y-1;M<P;M++,x+=p,F+=p){var c=q[x];const X=q[x+1],l=q[x+2],A=q[F],J=q[F+1],K=q[F+2];if(m){var k=A-c;var I=J-X;const ca=K-l;k=Math.sqrt(k*k+I*I+ca*ca)}else k=A-c,I=J-X,k=Math.sqrt(k*k+I*I);k&&(N+=k,m?(c=[c+.5*(A-c),X+.5*(J-X),l+.5*(K-l)],H+=k*c[0],g+=k*c[1],G+=k*c[2]):(c=[c+.5*(A-c),X+.5*(J-X)],H+=k*c[0],g+=k*c[1]))}return 0<N?m?[H/N,g/N,G/N]:
[H/N,g/N]:0<y?m?[q[B],q[B+1],q[B+2]]:[q[B],q[B+1]]:null}f.getCentroidOptimizedGeometry=function(q,B,y,m,p){if(d.isNone(B)||!B.lengths.length)return null;const x="upperLeft"===p?.originPosition?-1:1;q.lengths.length&&(q.lengths.length=0);q.coords.length&&(q.coords.length=0);p=q.coords;const F=[],N=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:H,coords:g}=B,G=y?m?4:3:m?3:2;let c=0;for(var k of H){const I=fa(N,g,c,k,y,m,x);I&&F.push(I);c+=k*G}F.sort((I,M)=>{let P=x*I[2]-x*M[2];0===P&&y&&(P=I[4]-M[4]);return P});F.length&&(k=6*F[0][2],p[0]=F[0][0]/k,p[1]=F[0][1]/k,y&&(k=6*F[0][4],p[2]=0!==k?F[0][3]/k:0),p[0]<N[0]||p[0]>N[1]||p[1]<N[2]||p[1]>N[3]||y&&(p[2]<N[4]||p[2]>N[5]))&&(p.length=0);if(!p.length)if(B=B.lengths[0]?O(g,0,H[0],y,m):null)p[0]=B[0],p[1]=B[1],y&&2<B.length&&(p[2]=
B[2]);else return null;return q};f.lineCentroid=O;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(f,d,fa,O,q,B,y){function m(c,k){if(!k)return null;
if("x"in k){var I={x:0,y:0};[I.x,I.y]=c(k.x,k.y,N);null!=k.z&&(I.z=k.z);null!=k.m&&(I.m=k.m);return I}return"xmin"in k?(I={xmin:0,ymin:0,xmax:0,ymax:0},[I.xmin,I.ymin]=c(k.xmin,k.ymin,N),[I.xmax,I.ymax]=c(k.xmax,k.ymax,N),k.hasZ&&(I.zmin=k.zmin,I.zmax=k.zmax,I.hasZ=!0),k.hasM&&(I.mmin=k.mmin,I.mmax=k.mmax,I.hasM=!0),I):"rings"in k?{rings:p(k.rings,c),hasM:k.hasM,hasZ:k.hasZ}:"paths"in k?{paths:p(k.paths,c),hasM:k.hasM,hasZ:k.hasZ}:"points"in k?{points:x(k.points,c),hasM:k.hasM,hasZ:k.hasZ}:null}function p(c,
k){const I=[];for(const M of c)I.push(x(M,k));return I}function x(c,k){const I=[];for(const M of c)c=k(M[0],M[1],[0,0]),I.push(c),2<M.length&&c.push(M[2]),3<M.length&&c.push(M[3]);return I}function F(){F=d._asyncToGenerator(function*(c,k){c&&k&&(c=Array.isArray(c)?c.map(I=>fa.isSome(I.geometry)?I.geometry.spatialReference:null).filter(fa.isSome):[c],yield O.initializeProjection(c.map(I=>({source:I,dest:k}))))});return F.apply(this,arguments)}const N=[0,0],H=m.bind(null,y.lngLatToXY),g=m.bind(null,
y.xyToLngLat),G=new (function(){function c(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var k=c.prototype;k.push=function(){var I=d._asyncToGenerator(function*(M,P,X){if(!(M&&M.length&&P&&X)||B.equals(P,X))return M;const l={geometries:M,inSpatialReference:P,outSpatialReference:X,resolve:null};this._jobs.push(l);return new Promise(A=>{l.resolve=A;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(M,P,X){return I.apply(this,arguments)}}();k._process=
function(){this._timer=null;const I=this._jobs.shift();if(I){var {geometries:M,inSpatialReference:P,outSpatialReference:X,resolve:l}=I;y.canProject(P,X)?B.isWebMercator(X)?l(M.map(H)):l(M.map(g)):l(O.projectMany(q.jsonAdapter,M,P,X,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return c}());f.checkProjectionSupport=function(c,k){return F.apply(this,arguments)};f.project=function(c,k,I,M){if(!c)return c;I||(I=k,k=c.spatialReference);return B.isValid(k)&&B.isValid(I)&&
!B.equals(k,I)?y.canProject(k,I)?(c=B.isWebMercator(I)?H(c):g(c),c.spatialReference=I,c):O.projectMany(q.jsonAdapter,[c],k,I,null,M)[0]:c};f.projectMany=function(c,k,I){return G.push(c,k,I)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H,g,G,c,k,I,M,P,X,l,A,J,K){function ca(r){return r.every(R=>"exceedslimit"!==R.statisticType)}const v=new y.MemCacheStorage(2E6);let w=0,D=function(){function r(W){this.capabilities={query:I.queryCapabilities};this.geometryType=W.geometryType;this.hasM=W.hasM;this.hasZ=W.hasZ;this.objectIdField=W.objectIdField;this.spatialReference=W.spatialReference;this.definitionExpression=W.definitionExpression;this.featureStore=W.featureStore;this.aggregateAdapter=W.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=W.timeInfo;W.cacheSpatialQueries&&(this._geometryQueryCache=new y.MemCache(w++ +"$$",v));this.fieldsIndex=new A(W.fields);W.scheduler&&W.priority&&(this._frameTask=W.scheduler.registerTask(W.priority))}var R=r.prototype;R.destroy=function(){this._frameTask=B.removeMaybe(this._frameTask);this.clearCache();B.destroyMaybe(this._geometryQueryCache);this._changeHandle=B.removeMaybe(this._changeHandle);B.destroyMaybe(this.fieldsIndex)};
R.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtent=this._allItems=null};R.executeQuery=function(){var W=d._asyncToGenerator(function*(S,ja){try{return(yield this._executeQuery(S,{},ja)).createQueryResponse()}catch(Z){if(Z!==l.QUERY_ENGINE_EMPTY_RESULT)throw Z;return(new M.QueryEngineResult([],S,this)).createQueryResponse()}});return function(S,ja){return W.apply(this,arguments)}}();R.executeQueryForCount=function(){var W=d._asyncToGenerator(function*(S={},ja){try{return(yield this._executeQuery(S,
{returnGeometry:!1,returnCentroid:!1,outSR:null},ja)).createQueryResponseForCount()}catch(Z){if(Z!==l.QUERY_ENGINE_EMPTY_RESULT)throw Z;return 0}});return function(){return W.apply(this,arguments)}}();R.executeQueryForExtent=function(){var W=d._asyncToGenerator(function*(S,ja){const Z=S.outSR;try{const qa=yield this._executeQuery(S,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),wa=qa.size;if(!wa)return{count:0,extent:null};p.set(h,p.NEGATIVE_INFINITY);this.featureStore.forEachBounds(qa.items,
Aa=>p.expandWithAABB(h,Aa),t);const xa={xmin:h[0],ymin:h[1],xmax:h[3],ymax:h[4],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(h[2])&&isFinite(h[5])&&(xa.zmin=h[2],xa.zmax=h[5]);const ya=k.project(xa,qa.spatialReference,Z);ya.spatialReference=l.cleanFromGeometryEngine(Z||this.spatialReference);if(0===ya.xmax-ya.xmin){const Aa=m.getMetersPerUnitForSR(ya.spatialReference);ya.xmin-=Aa;ya.xmax+=Aa}if(0===ya.ymax-ya.ymin){const Aa=m.getMetersPerUnitForSR(ya.spatialReference);
ya.ymin-=Aa;ya.ymax+=Aa}if(this.hasZ&&null!=ya.zmin&&null!=ya.zmax&&0===ya.zmax-ya.zmin){const Aa=m.getMetersPerUnitForSR(ya.spatialReference);ya.zmin-=Aa;ya.zmax+=Aa}return{count:wa,extent:ya}}catch(qa){if(qa===l.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(S,ja){return W.apply(this,arguments)}}();R.executeQueryForIds=function(){var W=d._asyncToGenerator(function*(S,ja){return this.executeQueryForIdSet(S,ja).then(Z=>Array.from(Z))});return function(S,ja){return W.apply(this,
arguments)}}();R.executeQueryForIdSet=function(){var W=d._asyncToGenerator(function*(S,ja){try{const Z=yield this._executeQuery(S,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),qa=Z.items,wa=new Set;yield this._reschedule(()=>{for(const xa of qa)wa.add(Z.featureAdapter.getObjectId(xa))},ja);return wa}catch(Z){if(Z===l.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw Z;}});return function(S,ja){return W.apply(this,arguments)}}();R.executeQueryForSnapping=function(){var W=d._asyncToGenerator(function*(S,
ja){const {point:Z,distance:qa,types:wa}=S;if(wa===M.SnappingTypes.NONE)return{candidates:[]};const xa=yield this._reschedule(()=>this._checkQuerySupport(S.query),ja),ya=!g.equals(Z.spatialReference,this.spatialReference);ya&&(yield k.checkProjectionSupport(Z.spatialReference,this.spatialReference));var Aa="number"===typeof qa?qa:qa.x,Ha="number"===typeof qa?qa:qa.y;Aa={xmin:Z.x-Aa,xmax:Z.x+Aa,ymin:Z.y-Ha,ymax:Z.y+Ha,spatialReference:Z.spatialReference};Aa=ya?k.project(Aa,this.spatialReference):Aa;
if(!Aa)return{candidates:[]};Ha=(yield H.normalizeCentralMeridian(N.fromJSON(Z),null,{signal:ja}))[0];const Ka=(yield H.normalizeCentralMeridian(N.fromJSON(Aa),null,{signal:ja}))[0];if(B.isNone(Ha)||B.isNone(Ka))return{candidates:[]};const Na=new M.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(Ka.toJSON())),xa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),ja);yield this._reschedule(()=>this._executeTimeQuery(Na),ja);yield this._reschedule(()=>this._executeAttributesQuery(Na),
ja);ja=Ha.toJSON();ja=ya?k.project(ja,this.spatialReference):ja;return Na.createSnappingResponse({...S,point:ja,distance:ya?Math.max(Aa.xmax-Aa.xmin,Aa.ymax-Aa.ymin)/2:qa},Z.spatialReference)});return function(S,ja){return W.apply(this,arguments)}}();R.executeQueryForLatestObservations=function(){var W=d._asyncToGenerator(function*(S,ja){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new O("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:S,timeInfo:this.timeInfo});
try{const Z=yield this._executeQuery(S,{},ja);yield this._reschedule(()=>this._filterLatest(Z),ja);return Z.createQueryResponse()}catch(Z){if(Z!==l.QUERY_ENGINE_EMPTY_RESULT)throw Z;return(new M.QueryEngineResult([],S,this)).createQueryResponse()}});return function(S,ja){return W.apply(this,arguments)}}();R.executeQueryForSummaryStatistics=function(){var W=d._asyncToGenerator(function*(S={},ja,Z){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(S,
{field:qa,normalizationField:wa,valueExpression:xa},Z)).createSummaryStatisticsResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForUniqueValues=function(){var W=d._asyncToGenerator(function*(S={},ja,Z){const {field:qa,field2:wa,field3:xa,valueExpression:ya}=ja;return(yield this._getQueryEngineResultForStats(S,{field:qa,field2:wa,field3:xa,valueExpression:ya},Z)).createUniqueValuesResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForClassBreaks=
function(){var W=d._asyncToGenerator(function*(S={},ja,Z){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(S,{field:qa,normalizationField:wa,valueExpression:xa},Z)).createClassBreaksResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForHistogram=function(){var W=d._asyncToGenerator(function*(S={},ja,Z){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(S,
{field:qa,normalizationField:wa,valueExpression:xa},Z)).createHistogramResponse(ja)});return function(){return W.apply(this,arguments)}}();R._schedule=function(){var W=d._asyncToGenerator(function*(S,ja){return B.isSome(this._frameTask)?this._frameTask.schedule(S,ja):S(K.noBudget)});return function(S,ja){return W.apply(this,arguments)}}();R._reschedule=function(){var W=d._asyncToGenerator(function*(S,ja){return B.isSome(this._frameTask)?this._frameTask.reschedule(S,ja):S(K.noBudget)});return function(S,
ja){return W.apply(this,arguments)}}();R._getAll=function(W){B.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new M.QueryEngineResult(this._allItems,W,this)};R._executeQuery=function(){var W=d._asyncToGenerator(function*(S,ja,Z){S=q.clone(S);S=yield this._schedule(()=>l.normalizeQuery(S,this.definitionExpression,this.spatialReference),Z);S=yield this._reschedule(()=>this._checkQuerySupport(S),Z);S={...S,...ja};const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(S,
Z),Z),wa=yield this._reschedule(()=>this._executeGeometryQuery(S,qa,Z),Z);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),Z);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),Z);yield this._reschedule(()=>this._executeTimeQuery(wa),Z);yield this._reschedule(()=>this._executeAttributesQuery(wa),Z);return wa});return function(S,ja,Z){return W.apply(this,arguments)}}();R._executeSceneFilterQuery=function(){var W=d._asyncToGenerator(function*(S,ja){var Z=this;if(B.isNone(S.sceneFilter))return null;
const {outSR:qa,returnGeometry:wa,returnCentroid:xa}=S;var ya=this.featureStore.featureSpatialReference,Aa=S.sceneFilter.geometry;const Ha=B.isNone(ya)||g.equals(ya,Aa.spatialReference)?Aa:k.project(Aa,ya);if(!Ha)return null;ya=wa||xa;ya=g.isValid(qa)&&!g.equals(this.spatialReference,qa)&&ya?function(){var b=d._asyncToGenerator(function*(n){return Z._project(n,qa)});return function(n){return b.apply(this,arguments)}}():b=>b;const Ka=this.featureAdapter;Aa=this._searchFeatures(this._getQueryBBoxes(Ha));
if("disjoint"===S.sceneFilter.spatialRelationship){if(!Aa.length)return null;const b=new Set;for(var Na of Aa)b.add(Ka.getObjectId(Na));const n=yield this._reschedule(()=>this.featureStore.toArray(),ja);Na=yield this._reschedule(d._asyncToGenerator(function*(){const ea=yield P.getSpatialQueryOperator("esriSpatialRelDisjoint",Ha,Z.geometryType,Z.hasZ,Z.hasM),ia=yield Z._runSpatialFilter(n,na=>!b.has(Ka.getObjectId(na))||ea(Ka.getGeometry(na)),ja);return new M.QueryEngineResult(ia,S,Z)}),ja);return ya(Na)}if(!Aa.length)return new M.QueryEngineResult([],
S,this);if(this._canExecuteSinglePass(Ha,S))return ya(new M.QueryEngineResult(Aa,S,this));const cb=yield P.getSpatialQueryOperator("esriSpatialRelContains",Ha,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Aa,b=>cb(Ka.getGeometry(b)),ja);return ya(new M.QueryEngineResult(Na,S,this))});return function(S,ja){return W.apply(this,arguments)}}();R._executeGeometryQuery=function(){var W=d._asyncToGenerator(function*(S,ja,Z){var qa=this;if(B.isSome(ja)&&0===ja.items.length)return ja;
S=B.isSome(ja)?ja.query:S;const {geometry:wa,outSR:xa,spatialRel:ya,returnGeometry:Aa,returnCentroid:Ha}=S;var Ka=this.featureStore.featureSpatialReference;const Na=!wa||B.isNone(Ka)||g.equals(Ka,wa.spatialReference)?wa:k.project(wa,Ka),cb=Aa||Ha,b=g.isValid(xa)&&!g.equals(this.spatialReference,xa),n=this._geometryQueryCache&&B.isNone(ja)?b&&cb?JSON.stringify({originalFilterGeometry:wa,spatialRelationship:ya,outSpatialReference:xa}):JSON.stringify({originalFilterGeometry:wa,spatialRelationship:ya}):
null;Ka=n?this._geometryQueryCache.get(n):null;if(B.isSome(Ka))return new M.QueryEngineResult(Ka,S,this);Ka=function(){var L=d._asyncToGenerator(function*(T){b&&cb&&(yield qa._project(T,xa));n&&qa._geometryQueryCache.put(n,T.items,T.items.length+1);return T});return function(T){return L.apply(this,arguments)}}();if(!Na)return Ka(B.isSome(ja)?ja:this._getAll(S));const ea=this.featureAdapter;let ia=this._searchFeatures(this._getQueryBBoxes(wa));if("esriSpatialRelDisjoint"===ya){if(!ia.length)return Ka(B.isSome(ja)?
ja:this._getAll(S));const L=new Set;for(var na of ia)L.add(ea.getObjectId(na));const T=B.isSome(ja)?ja.items:yield this._reschedule(()=>this.featureStore.toArray(),Z);na=yield this._reschedule(d._asyncToGenerator(function*(){const V=yield P.getSpatialQueryOperator(ya,Na,qa.geometryType,qa.hasZ,qa.hasM),ha=yield qa._runSpatialFilter(T,ka=>!L.has(ea.getObjectId(ka))||V(ea.getGeometry(ka)),Z);return new M.QueryEngineResult(ha,S,qa)}),Z);return Ka(na)}if(B.isSome(ja)){const L=new fa.PositionHint;ia=ia.filter(T=>
0<=fa.indexOf(ja.items,T,ja.items.length,L))}if(!ia.length)return Ka=new M.QueryEngineResult([],S,this),n&&this._geometryQueryCache.put(n,Ka.items,1),Ka;if(this._canExecuteSinglePass(Na,S))return Ka(new M.QueryEngineResult(ia,S,this));const z=yield P.getSpatialQueryOperator(ya,Na,this.geometryType,this.hasZ,this.hasM);na=yield this._runSpatialFilter(ia,L=>z(ea.getGeometry(L)),Z);return Ka(new M.QueryEngineResult(na,S,this))});return function(S,ja,Z){return W.apply(this,arguments)}}();R._executeAggregateIdsQuery=
function(W){if(0!==W.items.length&&W.query.aggregateIds&&W.query.aggregateIds.length&&!B.isNone(this.aggregateAdapter)){var S=new Set;for(const Z of W.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(Z).forEach(qa=>S.add(qa));var ja=this.featureAdapter.getObjectId;W.items=W.items.filter(Z=>S.has(ja(Z)))}};R._executeObjectIdsQuery=function(W){if(0!==W.items.length&&W.query.objectIds&&W.query.objectIds.length){var S=new Set(W.query.objectIds),ja=this.featureAdapter.getObjectId;W.items=W.items.filter(Z=>
S.has(ja(Z)))}};R._executeTimeQuery=function(W){if(0!==W.items.length){var S=X.getTimeOperator(this.timeInfo,W.query.timeExtent,this.featureAdapter);B.isNone(S)||(W.items=W.items.filter(S))}};R._executeAttributesQuery=function(W){if(0!==W.items.length){var S=c.getWhereClause(W.query.where,this.fieldsIndex);if(S){if(!S.isStandardized)throw new TypeError("Where clause is not standardized");W.items=W.items.filter(ja=>S.testFeature(ja,this.featureAdapter))}}};R._runSpatialFilter=function(){var W=d._asyncToGenerator(function*(S,
ja,Z){var qa=this;if(!ja)return S;if(B.isNone(this._frameTask))return S.filter(Aa=>ja(Aa));let wa=0;const xa=[],ya=function(){var Aa=d._asyncToGenerator(function*(Ha){for(;wa<S.length;){const Ka=S[wa++];ja(Ka)&&(xa.push(Ka),Ha.madeProgress());Ha.done&&(yield qa._reschedule(Na=>ya(Na),Z))}});return function(Ha){return Aa.apply(this,arguments)}}();return this._reschedule(Aa=>ya(Aa),Z).then(()=>xa)});return function(S,ja,Z){return W.apply(this,arguments)}}();R._filterLatest=function(W){const {trackIdField:S,
startTimeField:ja,endTimeField:Z}=this.timeInfo,qa=Z||ja,wa=new Map,xa=this.featureAdapter.getAttribute;for(const ya of W.items){const Aa=xa(ya,S),Ha=xa(ya,qa),Ka=wa.get(Aa);(!Ka||Ha>xa(Ka,qa))&&wa.set(Aa,ya)}W.items=Array.from(wa.values())};R._canExecuteSinglePass=function(W,S){({spatialRel:S}=S);return P.canQueryWithRBush(W)&&("esriSpatialRelEnvelopeIntersects"===S||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===S||"esriSpatialRelContains"===S||"esriSpatialRelWithin"===S))};
R._project=function(){var W=d._asyncToGenerator(function*(S,ja){if(!ja||g.equals(this.spatialReference,ja))return S;const Z=this.featureAdapter;ja=yield k.projectMany(S.items.map(qa=>l.getGeometry(this.geometryType,this.hasZ,this.hasM,Z.getGeometry(qa))),this.spatialReference,ja);S.items=ja.map((qa,wa)=>Z.cloneWithGeometry(S.items[wa],G.convertFromGeometry(qa,this.hasZ,this.hasM)));return S});return function(S,ja){return W.apply(this,arguments)}}();R._getQueryBBoxes=function(W){if(P.canQueryWithRBush(W)){if(N.isExtent(W))return[x.fromValues(W.xmin,
W.ymin,W.xmax,W.ymax)];if(N.isPolygon(W))return W.rings.map(S=>x.fromValues(Math.min(S[0][0],S[2][0]),Math.min(S[0][1],S[2][1]),Math.max(S[0][0],S[2][0]),Math.max(S[0][1],S[2][1])))}return[F.getBoundsXY(x.create(),W)]};R._searchFeatures=function(W){for(const S of W)this.featureStore.forEachInBounds(S,ja=>C.add(ja));W=Array.from(C.values());C.clear();return W};R._checkStatisticsSupport=function(){var W=d._asyncToGenerator(function*(S,ja){if(0>S.distance||null!=S.geometryPrecision||S.multipatchOption||
S.pixelSize||S.relationParam||S.text||S.outStatistics||S.groupByFieldsForStatistics||S.having||S.orderByFields)throw new O("feature-store:unsupported-query","Unsupported query options",{query:S});this._checkAttributesQuerySupport(S);return Promise.all([this._checkStatisticsParamsSupport(ja),P.checkSpatialQuerySupport(S,this.geometryType,this.spatialReference),k.checkProjectionSupport(this.spatialReference,S.outSR)]).then(()=>S)});return function(S,ja){return W.apply(this,arguments)}}();R._checkStatisticsParamsSupport=
function(){var W=d._asyncToGenerator(function*(S){var ja=[];S.valueExpression&&({arcadeUtils:ja}=yield J.loadArcade(),ja=ja.extractFieldNames(S.valueExpression));S.field&&ja.push(S.field);S.field2&&ja.push(S.field2);S.field3&&ja.push(S.field3);S.normalizationField&&ja.push(S.normalizationField);if(!ja.length)throw new O("feature-store:unsupported-query","params should have at least a field or valueExpression",{params:S});c.validateFields(this.fieldsIndex,ja,"params contains missing fields")});return function(S){return W.apply(this,
arguments)}}();R._checkQuerySupport=function(){var W=d._asyncToGenerator(function*(S){if(0>S.distance||null!=S.geometryPrecision||S.multipatchOption||S.pixelSize||S.relationParam||S.text)throw new O("feature-store:unsupported-query","Unsupported query options",{query:S});this._checkAttributesQuerySupport(S);this._checkStatisticsQuerySupport(S);return Promise.all([P.checkSpatialQuerySupport(S,this.geometryType,this.spatialReference),k.checkProjectionSupport(this.spatialReference,S.outSR)]).then(()=>
S)});return function(S){return W.apply(this,arguments)}}();R._checkAttributesQuerySupport=function(W){const {outFields:S,orderByFields:ja,returnDistinctValues:Z,outStatistics:qa}=W,wa=qa?qa.map(xa=>xa.outStatisticFieldName&&xa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const xa=ja.map(ya=>{const Aa=ya.toLowerCase();return Aa.includes(" asc")?Aa.split(" asc")[0]:Aa.includes(" desc")?Aa.split(" desc")[0]:ya}).filter(ya=>!wa.includes(ya));c.validateFields(this.fieldsIndex,
xa,"orderByFields contains missing fields")}if(S&&0<S.length)c.validateFields(this.fieldsIndex,S,"outFields contains missing fields");else if(Z)throw new O("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:W});c.validateWhere(this.fieldsIndex,W.where)};R._checkStatisticsQuerySupport=function(W){const {outStatistics:S,groupByFieldsForStatistics:ja,having:Z}=W;var qa=ja&&ja.length,wa=S&&S.length;if(Z){if(!qa||!wa)throw new O("feature-store:unsupported-query",
"outStatistics and groupByFieldsForStatistics should be specified with having",{query:W});c.validateHaving(this.fieldsIndex,Z,S)}if(wa&&ca(S)){wa=S.map(xa=>xa.onStatisticField).filter(Boolean);c.validateFields(this.fieldsIndex,wa,"onStatisticFields contains missing fields");qa&&c.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const xa of S){const {onStatisticField:ya,statisticType:Aa}=xa;if(("percentile_disc"===Aa||"percentile_cont"===Aa)&&"statisticParameters"in
xa){if({statisticParameters:qa}=xa,!qa)throw new O("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:W});}else if("count"!==Aa&&ya&&c.hasInvalidFieldType(ya,this.fieldsIndex))throw new O("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:W});}}};R._getQueryEngineResultForStats=function(){var W=d._asyncToGenerator(function*(S,ja,Z){S=q.clone(S);try{S=yield this._schedule(()=>l.normalizeQuery(S,
this.definitionExpression,this.spatialReference),Z);S=yield this._reschedule(()=>this._checkStatisticsSupport(S,ja),Z);const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(S,Z),Z),wa=yield this._reschedule(()=>this._executeGeometryQuery(S,qa,Z),Z);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),Z);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),Z);yield this._reschedule(()=>this._executeTimeQuery(wa),Z);yield this._reschedule(()=>this._executeAttributesQuery(wa),
Z);return wa}catch(qa){if(qa!==l.QUERY_ENGINE_EMPTY_RESULT)throw qa;return new M.QueryEngineResult([],S,this)}});return function(S,ja,Z){return W.apply(this,arguments)}}();d._createClass(r,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const W=this.featureStore.fullBounds;return B.isNone(W)?null:{xmin:W[0],ymin:W[1],xmax:W[2],ymax:W[3],spatialReference:l.cleanFromGeometryEngine(this.spatialReference)}}},{key:"timeExtent",get:function(){if(!this.timeInfo)return null;
this._timeExtent||(this._timeExtent=X.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return r}();const t=p.create(),h=p.create(),C=new Set;f.Feature=function(r,R=null,W,S,ja){this.attributes=r;this.geometry=W;this.centroid=S;this.filterFlags=ja;this.groupId=-1;this.displayId=R};f.QueryEngine=D;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers",
"./maybe","./PooledArray"],function(f,d,fa,O){f.RemoveMode=void 0;(function(y){y[y.ALL=0]="ALL";y[y.SOME=1]="SOME"})(f.RemoveMode||(f.RemoveMode={}));let q=function(){function y(p,x,F){this._namespace=p;this._storage=x;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";F&&(this._storage.registerRemoveFunc(this._namespace,F),this._removeFunc=!0)}var m=y.prototype;m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);
this._storage.deregister(this);this._storage=null};m.resetHitRate=function(){this._hit=this._miss=0};m.put=function(p,x,F,N=0){this._storage.put(this._namespace+p,x,F,N)};m.get=function(p){p=this._storage.get(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};m.pop=function(p){p=this._storage.pop(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};m.updateSize=function(p,x,F){this._storage.updateSize(this._namespace+p,x,F)};m.clear=function(){this._storage.clear(this._namespace)};
m.clearAll=function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};d._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),B=function(){function y(p=10485760){this._maxSize=p;this._db=
new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new O;this._users=new O}var m=y.prototype;m.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};m.register=function(p){this._users.push(p)};m.deregister=function(p){this._users.removeUnordered(p)};m.registerRemoveFunc=function(p,x){this._removeFuncs.push([p,x])};m.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(x=>x[0]!==p)};m.put=function(p,x,F,N){const H=this._db.get(p);H&&(this._size-=
H.size,this._db.delete(p),H.entry!==x&&this._notifyRemove(p,H.entry,f.RemoveMode.ALL));F>this._maxSize?this._notifyRemove(p,x,f.RemoveMode.ALL):void 0===x?console.warn("Refusing to cache undefined entry "):!F||0>F?console.warn("Refusing to cache entry with invalid size "+F):(N=1+Math.max(N,-3)- -3,this._db.set(p,{entry:x,size:F,lifetime:N,lives:N}),this._size+=F,this._checkSizeLimit())};m.updateSize=function(p,x,F){const N=this._db.get(p);if(N&&N.entry===x){for(this._size-=N.size;F>this._maxSize;)if(F=
this._notifyRemove(p,x,f.RemoveMode.SOME),!(fa.isSome(F)&&0<F)){this._db.delete(p);return}N.size=F;this._size+=F;this._checkSizeLimit()}};m.pop=function(p){const x=this._db.get(p);if(x)return this._size-=x.size,this._db.delete(p),++this._hit,x.entry;++this._miss};m.get=function(p){const x=this._db.get(p);if(void 0===x)++this._miss;else return this._db.delete(p),x.lives=x.lifetime,this._db.set(p,x),++this._hit,x.entry};m.getStats=function(){const p={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},x={},F=[];this._db.forEach((g,G)=>{const c=g.lifetime;F[c]=(F[c]||0)+g.size;this._users.forAll(k=>{k=k.namespace;G.startsWith(k)&&(x[k]=(x[k]||0)+g.size)})});const N={};this._users.forAll(g=>{const G=g.namespace;!isNaN(g.hitRate)&&0<g.hitRate?(x[G]=x[G]||0,N[G]=Math.round(100*g.hitRate)+"%"):N[G]="0%"});var H=Object.keys(x);H.sort((g,G)=>x[G]-x[g]);H.forEach(g=>p[g]=Math.round(x[g]/2**20)+"MB / "+N[g]);
for(H=F.length-1;0<=H;--H){const g=F[H];g&&(p["Priority "+(H+-3-1)]=Math.round(g/this.size*100)+"%")}return p};m.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};m.clear=function(p){this._db.forEach((x,F)=>{F.startsWith(p)&&(this._size-=x.size,this._db.delete(F),this._notifyRemove(F,x.entry,f.RemoveMode.ALL))})};m.clearAll=function(){this._db.forEach((p,x)=>this._notifyRemove(x,p.entry,f.RemoveMode.ALL));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/
(this._hit+this._miss)};m._notifyRemove=function(p,x,F){let N;this._removeFuncs.some(H=>p.startsWith(H[0])?(H=H[1](x,F),"number"===typeof H&&(N=H),!0):!1);return N};m._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [p,x]of this._db){this._db.delete(p);if(1>=x.lives){this._size-=x.size;const F=this._notifyRemove(p,x.entry,f.RemoveMode.SOME);fa.isSome(F)&&0<F&&(this._size+=F,x.lives=x.lifetime,x.size=F,this._db.set(p,x))}else--x.lives,this._db.set(p,x);if(this._size<=.9*this.maxSize)break}};
d._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimit()}}]);return y}();f.MIN_PRIORITY=-3;f.MemCache=q;f.MemCacheStorage=B;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H){function g(l){const A=[];let J=0,K=0;for(let ca=0;ca<l.length;ca++){const v=l[ca];let w=null;for(let D=0;D<v.length;D++)w=v[D],A.push(w),0===D?K=J=w[0]:(J=Math.min(J,w[0]),K=Math.max(K,w[0]));w&&A.push([(J+K)/2,0])}return A}function G(l,A){if(!(l instanceof m||l instanceof y))throw X.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new O("straightLineDensify: the input geometry is neither polyline nor polygon");var J=p.getGeometryParts(l);
const K=[];for(const v of J){J=[];K.push(J);J.push([v[0][0],v[0][1]]);for(let w=0;w<v.length-1;w++){const D=v[w][0],t=v[w][1],h=v[w+1][0],C=v[w+1][1];var ca=Math.sqrt((h-D)*(h-D)+(C-t)*(C-t));const r=(C-t)/ca,R=(h-D)/ca,W=ca/A;if(1<W){for(let S=1;S<=W-1;S++){const ja=S*A;J.push([R*ja+D,r*ja+t])}ca=(ca+Math.floor(W-1)*A)/2;J.push([R*ca+D,r*ca+t])}J.push([h,C])}}return"polygon"===l.type?new y({rings:K,spatialReference:l.spatialReference}):new m({paths:K,spatialReference:l.spatialReference})}function c(l,
A,J){A&&(l=G(l,1E6),l=F.webMercatorToGeographic(l,!0));J&&(l=p.updatePolyGeometry(l,J));return l}function k(l,A,J){if(Array.isArray(l)){var K=l[0];K>A?(J=p.offsetMagnitude(K,A),l[0]=K+-2*J*A):K<J&&(A=p.offsetMagnitude(K,J),l[0]=K+-2*A*J)}else K=l.x,K>A?(J=p.offsetMagnitude(K,A),l=l.clone().offset(-2*J*A,0)):K<J&&(A=p.offsetMagnitude(K,J),l=l.clone().offset(-2*A*J,0));return l}function I(l,A){let J=-1;for(let K=0;K<A.cutIndexes.length;K++){const ca=A.cutIndexes[K],v=A.geometries[K],w=p.getGeometryParts(v);
for(let D=0;D<w.length;D++){const t=w[D];t.some(h=>{if(180>h[0])return!0;h=0;for(var C=0;C<t.length;C++){var r=t[C][0];h=r>h?r:h}h=Number(h.toFixed(9));h=-360*p.offsetMagnitude(h,180);for(C=0;C<t.length;C++)r=v.getPoint(D,C),v.setPoint(D,C,r.clone().offset(h,0));return!0})}if(ca===J)if("polygon"===l[0].type)for(const D of p.getGeometryParts(v))l[ca]=l[ca].addRing(D);else{if("polyline"===l[0].type)for(const D of p.getGeometryParts(v))l[ca]=l[ca].addPath(D)}else J=ca,l[ca]=v}return l}function M(l,A,
J){return P.apply(this,arguments)}function P(){P=d._asyncToGenerator(function*(l,A,J){if(!Array.isArray(l))return M([l],A);A&&"string"!==typeof A&&X.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var K="string"===typeof A?A:A?.url??fa.geometryServiceUrl;let ca,v,w;let D=0;var t=[];A=[];for(var h of l)if(B.isNone(h))A.push(h);else{if(!C){var C=h.spatialReference;var r=x.getInfo(C);var R=(ca=C.isWebMercator)?102100:4326;v=p.cutParams[R].maxX;w=p.cutParams[R].minX;
var W=p.cutParams[R].plus180Line;R=p.cutParams[R].minus180Line}if(r)if("mesh"===h.type)A.push(h);else if("point"===h.type)A.push(k(h.clone(),v,w));else if("multipoint"===h.type){var S=h.clone();S.points=S.points.map(ja=>k(ja,v,w));A.push(S)}else if("extent"===h.type)S=h.clone()._normalize(!1,!1,r),A.push(S.rings?new y(S):S);else if(h.extent){S=h.extent;const ja=2*p.offsetMagnitude(S.xmin,w)*v;let Z=0===ja?h.clone():p.updatePolyGeometry(h.clone(),ja);S.offset(ja,0);S.intersects(W)&&S.xmax!==v?(D=S.xmax>
D?S.xmax:D,Z=c(Z,ca),t.push(Z),A.push("cut")):S.intersects(R)&&S.xmin!==w?(D=2*S.xmax*v>D?2*S.xmax*v:D,Z=c(Z,ca,360),t.push(Z),A.push("cut")):A.push(Z)}else A.push(h.clone());else A.push(h)}C=p.offsetMagnitude(D,v);r=-90;W=C;for(h=new m;0<C;)R=-180+360*C,h.addPath([[R,r],[R,-1*r]]),r*=-1,C--;if(0<t.length&&0<W){C=yield N.cut(K,t,h,J);C=I(t,C);r=[];t=[];for(W=0;W<A.length;W++)h=A[W],"cut"!==h?t.push(h):(h=C.shift(),R=l[W],B.isSome(R)&&"polygon"===R.type&&R.rings&&1<R.rings.length&&h.rings.length>=
R.rings.length?(r.push(h),t.push("simplify")):t.push(ca?F.geographicToWebMercator(h):h));if(!r.length)return t;A=yield H.simplify(K,r,J);l=[];for(J=0;J<t.length;J++)K=t[J],"simplify"!==K?l.push(K):l.push(ca?F.geographicToWebMercator(A.shift()):A.shift());return l}l=[];for(J=0;J<A.length;J++)K=A[J],"cut"!==K?l.push(K):(K=t.shift(),l.push(!0===ca?F.geographicToWebMercator(K):K));return l});return P.apply(this,arguments)}const X=q.getLogger("esri.geometry.support.normalizeUtils");f.getDenormalizedExtent=
function(l){if(!l)return null;const A=l.extent;if(!A)return null;var J=l.spatialReference&&x.getInfo(l.spatialReference);if(!J)return A;const [K,ca]=J.valid;({width:J}=A);let {xmin:v,xmax:w}=A;[v,w]=[w,v];if("extent"===l.type||0===J||J<=ca||J>2*ca||v<K||w>ca)return A;let D;switch(l.type){case "polygon":if(1<l.rings.length)D=g(l.rings);else return A;break;case "polyline":if(1<l.paths.length)D=g(l.paths);else return A;break;case "multipoint":D=l.points}l=A.clone();for(let t=0;t<D.length;t++){let h=
D[t][0];0>h?(h+=ca,w=Math.max(h,w)):(h-=ca,v=Math.min(h,v))}l.xmin=v;l.xmax=w;return l.width<J?(l.xmin-=ca,l.xmax-=ca,l):A};f.normalizeCentralMeridian=M;f.normalizeMapX=function(l,A){if(A=x.getInfo(A)){const [J,K]=A.valid;A=K-J;if(l<J)for(;l<J;)l+=A;if(l>K)for(;l>K;)l-=A}return l};f.straightLineDensify=G;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference",
"./jsonUtils"],function(f,d,fa,O){function q(B){return O.isPolygon(B)?B.rings:B.paths}d={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new d({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:fa.WebMercator}),minus180Line:new d({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:fa.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new d({paths:[[[180,
-180],[180,180]]],spatialReference:fa.WGS84}),minus180Line:new d({paths:[[[-180,-180],[-180,180]]],spatialReference:fa.WGS84})}};f.cutParams=d;f.getGeometryParts=q;f.offsetMagnitude=function(B,y){return Math.ceil((B-y)/(2*y))};f.updatePolyGeometry=function(B,y){const m=q(B);for(const p of m)for(const x of p)x[0]+=y;return B};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(f,d,fa,O,q,B){function y(){y=d._asyncToGenerator(function*(m,p,x,F){m=B.parseUrl(m);const N=p[0].spatialReference;p={...F,query:{...m.query,f:"json",sr:JSON.stringify(N),target:JSON.stringify({geometryType:q.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(x)}};p=yield O(m.path+"/cut",p);const {cutIndexes:H,geometries:g=[]}=p.data;return{cutIndexes:H,geometries:g.map(G=>{G=q.fromJSON(G);G.spatialReference=N;return G})}});return y.apply(this,arguments)}f.cut=function(m,p,x,F){return y.apply(this,
arguments)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(f,d,fa,O,q,B){function y(m,p,x){const F={};for(const H in m)if("declaredClass"!==H){var N=m[H];if(null!=N&&"function"!==typeof N)if(Array.isArray(N)){F[H]=[];for(let g=0;g<N.length;g++)F[H][g]=y(N[g])}else"object"===typeof N?N.toJSON?(N=N.toJSON(x&&x[H]),F[H]=
p?N:JSON.stringify(N)):F[H]=p?N:JSON.stringify(N):F[H]=N}return F}f.asValidOptions=function(m,p){return p?{...p,query:{...m,...p.query}}:{query:m}};f.encode=y;f.getToken=function(m,p){return B.supportsApiKey(m)&&(p||d.apiKey)?p||d.apiKey:fa.id?.findCredential(m)?.token};f.parseUrl=function(m){return"string"===typeof m?q.urlToObject(m):O.clone(m)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(f,d,fa,O,q,B){function y(){y=d._asyncToGenerator(function*(m,p,x){const F="string"===typeof m?O.urlToObject(m):m;m=p[0].spatialReference;const N=q.getJsonType(p[0]);p={...x,query:{...F.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(B.encodeGeometries(p))}};({data:p}=yield fa(F.path+"/simplify",p));return B.decodeGeometries(p.geometries,N,m)});return y.apply(this,arguments)}f.simplify=function(m,p,x){return y.apply(this,arguments)};Object.defineProperties(f,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(f,d){f.decodeGeometries=function(fa,O,q){const B=d.getGeometryType(O);return fa.map(y=>{y=B.fromJSON(y);y.spatialReference=q;return y})};f.encodeGeometries=function(fa){return{geometryType:d.getJsonType(fa[0]),geometries:fa.map(O=>O.toJSON())}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(f,d,fa){function O(p,x){return p?y.get(p,x):null}function q(p,x,F,N=!0){const H=[];for(const g of x)if("*"!==g&&!p.has(g))if(N){x=B(g);try{const G=O(x,p);if(!G)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:x});if(!G.isStandardized)throw new d("feature-store:unsupported-query","expression is not standard",{clause:G});q(p,G.fieldNames,"expression contains missing fields")}catch(G){if((x=G&&G.details)&&
(x.clause||x.where))throw G;x&&x.missingFields?H.push(...x.missingFields):H.push(g)}}else H.push(g);if(H.length)throw new d("feature-store:unsupported-query",F,{missingFields:H});}function B(p){return p.split(" as ")[0]}const y=new fa.WhereClauseCache(50,500),m=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));f.getAliasFromFieldName=function(p){return p.split(" as ")[1]};f.getExpressionFromFieldName=
B;f.getWhereClause=O;f.hasInvalidFieldType=function(p,x){return(p=x.get(p))?!m.has(p.type):!1};f.validateFields=q;f.validateHaving=function(p,x,F){if(!x)return!0;const N=y.get(x,p);if(!N)throw new d("feature-store:unsupported-query","invalid SQL expression",{having:x});if(!N.isAggregate)throw new d("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:x});q(p,N.fieldNames,"having contains missing fields");if(!N.getExpressions().every(H=>{const {aggregateType:g,
field:G}=H,c=p.has(G)&&p.get(G).name;return F.some(k=>{const {onStatisticField:I,statisticType:M}=k;return(p.has(I)&&p.get(I).name)===c&&M.toLowerCase().trim()===g})}))throw new d("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:x});return!0};f.validateWhere=function(p,x){if(!x)return!0;const F=y.get(x,p);if(!F)throw new d("feature-store:unsupported-query","invalid SQL expression",{where:x});if(!F.isStandardized)throw new d("feature-store:unsupported-query",
"where clause is not standard",{where:x});q(p,F.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(f,d,fa){let O=function(){function q(B,y){this._cache=new d(B);this._invalidCache=new d(y)}q.prototype.get=function(B,y){const m=`${y.uid}:${B}`,p=this._cache.get(m);if(p)return p;if(void 0!==this._invalidCache.get(m))return null;
try{const x=fa.WhereClause.create(B,y);this._cache.put(m,x);return x}catch{return this._invalidCache.put(m,null),null}};return q}();f.WhereClauseCache=O;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(f){return function(){function d(O,q){this._storage=new f.MemCacheStorage;this._storage.maxSize=O;q&&this._storage.registerRemoveFunc("",q)}var fa=d.prototype;fa.put=function(O,q){this._storage.put(O,
q,1,1)};fa.pop=function(O){return this._storage.pop(O)};fa.get=function(O){return this._storage.get(O)};fa.clear=function(){this._storage.clearAll()};fa.destroy=function(){this._storage.destroy()};return d}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(f,d,fa,O,q,B){function y(h,C){h+="";return h.length>=C?h:Array(C-h.length+1).join("0")+h}function m(h,C,r="0",
R="0",W="0",S="0",ja="",Z="0",qa="0"){return"+"===ja||"-"===ja?(h=`${y(parseInt(h,10),4)}-${y(parseInt(C,10),2)}-${y(parseInt(r,10),2)}`,C="",10>parseFloat(S)&&(C="0"),R=`${y(parseInt(R,10),2)}:${y(parseInt(W,10),2)}:${C+parseFloat(S).toString()}`,ja=`${ja}${y(parseInt(Z,10),2)}:${y(parseInt(qa,10),2)}`,new Date(h+"T"+R+ja)):new Date(parseInt(h,10),parseInt(C,10)-1,parseInt(r,10),parseInt(R,10),parseInt(W,10),parseFloat(S))}function p(h){let C=l.exec(h);if(null!==C){const [,r,R,W,S,ja,Z]=C;return m(r,
R,W,S,ja,Z)}C=A.exec(h);if(null!==C){const [,r,R,W,S,ja,Z,qa,wa,xa]=C;return m(r,R,W,S,ja,Z,qa,wa,xa)}C=J.exec(h);if(null!==C){const [,r,R,W,S,ja,Z,qa,wa]=C;return m(r,R,W,S,ja,"0",Z,qa,wa)}C=K.exec(h);if(null!==C){const [,r,R,W,S,ja]=C;return m(r,R,W,S,ja)}C=X.exec(h);if(null!==C){const [,r,R,W]=C;return m(r,R,W)}throw Error("SQL Invalid Timestamp");}function x(h){const C=X.exec(h);if(null===C)try{return p(h)}catch{throw Error("SQL Invalid Date");}const [,r,R,W]=C;return new Date(parseInt(r,10),
parseInt(R,10)-1,parseInt(W,10))}function F(h){return Array.isArray(h)?h:[h]}function N(h){return null!==h?!0!==h:null}function H(h,C){return null!=h&&null!=C?!0===h&&!0===C:!1===h||!1===C?!1:null}function g(h,C){return null!=h&&null!=C?!0===h||!0===C:!0===h||!0===C?!0:null}function G(h,C){if(null==h)return null;let r=!1;for(const R of C)if(null==R)r=null;else if(h===R){r=!0;break}return r}function c(h,C,r){if(null==h)return null;let R="",W=D.Normal;for(let S=0;S<C.length;S++){const ja=C.charAt(S);
switch(W){case D.Normal:ja===r?W=D.Escaped:R="-[]/{}()*+?.\\^$|".includes(ja)?R+("\\"+ja):"%"===ja?R+".*":"_"===ja?R+".":R+ja;break;case D.Escaped:R="-[]/{}()*+?.\\^$|".includes(ja)?R+("\\"+ja):R+ja,W=D.Normal}}return(new RegExp("^"+R+"$","m")).test(h)}function k(h){return h instanceof Date?h.valueOf():h}function I(h,C,r){if(null==C||null==r)return null;C=k(C);r=k(r);switch(h){case "\x3c\x3e":return C!==r;case "\x3d":return C===r;case "\x3e":return C>r;case "\x3c":return C<r;case "\x3e\x3d":return C>=
r;case "\x3c\x3d":return C<=r}}function M(h,C,r){if(C instanceof q.SqlInterval)if(r instanceof Date)switch(h){case "+":return new Date(C.valueInMilliseconds()+r.getTime());case "-":return C.valueInMilliseconds()-r.getTime();case "*":return C.valueInMilliseconds()*r.getTime();case "/":return C.valueInMilliseconds()/r.getTime()}else if(r instanceof q.SqlInterval)switch(h){case "+":return q.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()+r.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(C.valueInMilliseconds()-
r.valueInMilliseconds());case "*":return C.valueInMilliseconds()*r.valueInMilliseconds();case "/":return C.valueInMilliseconds()/r.valueInMilliseconds()}else C=C.valueInMilliseconds();else if(r instanceof q.SqlInterval)if(C instanceof Date)switch(h){case "+":return new Date(r.valueInMilliseconds()+C.getTime());case "-":return new Date(C.getTime()-r.valueInMilliseconds());case "*":return C.getTime()*r.valueInMilliseconds();case "/":return C.getTime()/r.valueInMilliseconds()}else r=r.valueInMilliseconds();
else if(C instanceof Date&&"number"===typeof r)switch(r*=864E5,C=C.getTime(),h){case "+":return new Date(C+r);case "-":return new Date(C-r);case "*":return new Date(C*r);case "/":return new Date(C/r)}else if(r instanceof Date&&"number"===typeof C)switch(C*=864E5,r=r.getTime(),h){case "+":return new Date(C+r);case "-":return new Date(C-r);case "*":return new Date(C*r);case "/":return new Date(C/r)}switch(h){case "+":return C+r;case "-":return C-r;case "*":return C*r;case "/":return C/r}}function P(h,
C,r,R){h=R.getAttribute(h,C);return null!=h&&1===r[C]?new Date(h):h}const X=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,K=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,ca=new Set(["current_timestamp","current_date","current_time"]);let v=function(){function h(){}
h.makeBool=function(C){return!0===C};h.featureValue=function(C,r,R,W){return P(C,r,R,W)};h.equalsNull=function(C){return null===C};h.applyLike=function(C,r,R){return c(C,r,R)};h.ensureArray=function(C){return F(C)};h.applyIn=function(C,r){return G(C,r)};h.currentDate=function(){const C=new Date;C.setHours(0,0,0,0);return C};h.makeSqlInterval=function(C,r,R){return q.SqlInterval.createFromValueAndQualifer(C,r,R)};h.convertInterval=function(C){return C instanceof q.SqlInterval?C.valueInMilliseconds():
C};h.currentTimestamp=function(){return new Date};h.compare=function(C,r,R){return I(C,r,R)};h.calculate=function(C,r,R){return M(C,r,R)};h.makeComparable=function(C){return k(C)};h.evaluateFunction=function(C,r){return q.evaluateFunction(C,r)};h.lookup=function(C,r){C=r[C];return void 0===C?null:C};h.between=function(C,r){return null==C||null==r[0]||null==r[1]?null:C>=r[0]&&C<=r[1]};h.notbetween=function(C,r){return null==C||null==r[0]||null==r[1]?null:C<r[0]||C>r[1]};h.ternaryNot=function(C){return N(C)};
h.ternaryAnd=function(C,r){return H(C,r)};h.ternaryOr=function(C,r){return g(C,r)};return h}(),w=function(){function h(r,R){this.fieldsIndex=R;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=B.WhereGrammar.parse(r);const {isStandardized:W,isAggregate:S,referencedFieldNames:ja}=this._extractExpressionInfo(R);this._referencedFieldNames=ja;this.isStandardized=W;this.isAggregate=S}h.create=function(r,R){return new h(r,R)};var C=h.prototype;C.testSet=function(r,R=t){const W=
{};for(const S of this.fieldNames)W[S]=r.map(ja=>R.getAttribute(ja,S));return!!this._evaluateNode(this.parseTree,{attributes:W},t)};C.calculateValue=function(r,R=t){r=this._evaluateNode(this.parseTree,r,R);return r instanceof q.SqlInterval?r.valueInMilliseconds()/864E5:r};C.calculateValueCompiled=function(r,R=t){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(r,this.parameters,R,this._datefields);if(fa("esri-csp-restrictions"))return this.calculateValue(r,R);this._compileMe();
return this.parseTree._compiledVersion(r,this.parameters,R,this._datefields)};C.testFeature=function(r,R=t){return!!this._evaluateNode(this.parseTree,r,R)};C.testFeatureCompiled=function(r,R=t){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(r,this.parameters,R,this._datefields);if(fa("esri-csp-restrictions"))return this.testFeature(r,R);this._compileMe();return!!this.parseTree._compiledVersion(r,this.parameters,R,this._datefields)};C.getFunctions=function(){const r=
new Set;this._visitAll(this.parseTree,R=>{"function"===R.type&&r.add(R.name.toLowerCase())});return Array.from(r)};C.getExpressions=function(){const r=new Map;this._visitAll(this.parseTree,R=>{if("function"===R.type){const W=R.name.toLowerCase();R=R.args.value[0];if("column-reference"===R.type){R=R.column;const S=`${W}-${R}`;r.has(S)||r.set(S,{aggregateType:W,field:R})}}});return[...r.values()]};C.getVariables=function(){const r=new Set;this._visitAll(this.parseTree,R=>{"parameter"===R.type&&r.add(R.value.toLowerCase())});
return Array.from(r)};C._compileMe=function(){const r="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",r)).bind(v)};C._extractExpressionInfo=function(r){const R=[],W=new Set;let S=!0,ja=!0;this._visitAll(this.parseTree,Z=>{switch(Z.type){case "column-reference":const qa=r?.get(Z.column);let wa,xa;qa?wa=xa=qa.name??"":(xa=Z.column,wa=xa.toLowerCase());qa&&qa.name&&("date"===
qa.type||"esriFieldTypeDate"===qa.type)&&(this._datefields[qa.name]=1);W.has(wa)||(W.add(wa),R.push(xa));Z.column=xa;break;case "function":const {name:ya,args:Aa}=Z;Z=Aa.value.length;S&&(S=q.isStandardized(ya,Z));ja&&(ja=O.isAggregate(ya,Z))}});return{referencedFieldNames:Array.from(R),isStandardized:S,isAggregate:ja}};C._visitAll=function(r,R){if(null!=r)switch(R(r),r.type){case "when-clause":this._visitAll(r.operand,R);this._visitAll(r.value,R);break;case "case-expression":for(const W of r.clauses)this._visitAll(W,
R);"simple"===r.format&&this._visitAll(r.operand,R);null!==r.else&&this._visitAll(r.else,R);break;case "expression-list":for(const W of r.value)this._visitAll(W,R);break;case "unary-expression":this._visitAll(r.expr,R);break;case "binary-expression":this._visitAll(r.left,R);this._visitAll(r.right,R);break;case "function":this._visitAll(r.args,R)}};C.evaluateNodeToJavaScript=function(r){switch(r.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(r.value)+", "+JSON.stringify(r.qualifier)+
","+JSON.stringify(r.op)+")";case "case-expression":var R="";if("simple"===r.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(r.operand)+")";R="( ";for(let S=0;S<r.clauses.length;S++)R+=" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(r.clauses[S].operand)+")) ? ("+this.evaluateNodeToJavaScript(r.clauses[S].value)+") : "}else for(R="( ",W=0;W<r.clauses.length;W++)R+=" this.makeBool("+this.evaluateNodeToJavaScript(r.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(r.clauses[W].value)+") : ";R=null!==r.else?R+this.evaluateNodeToJavaScript(r.else):R+"null";return R+" )";case "parameter":return"this.lookup("+JSON.stringify(r.value.toLowerCase())+",lookups)";case "expression-list":R="[";for(W of r.value)"["!==R&&(R+=","),R+=this.evaluateNodeToJavaScript(W);return R+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(r.expr)+")";case "binary-expression":switch(r.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+" )";case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")";case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(r.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(r.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(r.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+","+JSON.stringify(r.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+
this.evaluateNodeToJavaScript(r.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(r.operator)+","+this.evaluateNodeToJavaScript(r.left)+","+this.evaluateNodeToJavaScript(r.right)+")"}throw Error("Not Supported Operator "+r.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(r.value);case "date":return"(new Date("+x(r.value).getTime().toString()+"))";case "timestamp":return"(new Date("+p(r.value).getTime().toString()+"))";case "current-time":return"date"===
r.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(r.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(r.name)+","+this.evaluateNodeToJavaScript(r.args)+")"}throw Error("Unsupported sql syntax "+r.type);};C._evaluateNode=function(r,R,W){switch(r.type){case "interval":return R=this._evaluateNode(r.value,R,W),q.SqlInterval.createFromValueAndQualifer(R,r.qualifier,r.op);case "case-expression":if("simple"===
r.format){var S=k(this._evaluateNode(r.operand,R,W));for(var ja=0;ja<r.clauses.length;ja++)if(S===k(this._evaluateNode(r.clauses[ja].operand,R,W)))return this._evaluateNode(r.clauses[ja].value,R,W)}else for(S=0;S<r.clauses.length;S++)if(!0===this._evaluateNode(r.clauses[S].operand,R,W))return this._evaluateNode(r.clauses[S].value,R,W);return null!==r.else?this._evaluateNode(r.else,R,W):null;case "parameter":return this.parameters[r.value.toLowerCase()];case "expression-list":S=[];for(ja of r.value)S.push(this._evaluateNode(ja,
R,W));return S;case "unary-expression":return N(this._evaluateNode(r.expr,R,W));case "binary-expression":switch(r.operator){case "AND":return H(this._evaluateNode(r.left,R,W),this._evaluateNode(r.right,R,W));case "OR":return g(this._evaluateNode(r.left,R,W),this._evaluateNode(r.right,R,W));case "IS":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(r.left,R,W);case "ISNOT":if("null"!==r.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(r.left,
R,W);case "IN":return S=F(this._evaluateNode(r.right,R,W)),G(this._evaluateNode(r.left,R,W),S);case "NOT IN":return S=F(this._evaluateNode(r.right,R,W)),N(G(this._evaluateNode(r.left,R,W),S));case "BETWEEN":return S=this._evaluateNode(r.left,R,W),r=this._evaluateNode(r.right,R,W),null==S||null==r[0]||null==r[1]?null:S>=k(r[0])&&S<=k(r[1]);case "NOTBETWEEN":return S=this._evaluateNode(r.left,R,W),r=this._evaluateNode(r.right,R,W),null==S||null==r[0]||null==r[1]?null:S<k(r[0])||S>k(r[1]);case "LIKE":return c(this._evaluateNode(r.left,
R,W),this._evaluateNode(r.right,R,W),r.escape);case "NOT LIKE":return N(c(this._evaluateNode(r.left,R,W),this._evaluateNode(r.right,R,W),r.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return I(r.operator,this._evaluateNode(r.left,R,W),this._evaluateNode(r.right,R,W));case "-":case "+":case "*":case "/":return M(r.operator,this._evaluateNode(r.left,R,W),this._evaluateNode(r.right,R,W))}case "null":case "boolean":case "string":case "number":return r.value;
case "date":return x(r.value);case "timestamp":return p(r.value);case "current-time":return R=new Date,"date"===r.mode&&R.setHours(0,0,0,0),R;case "column-reference":return P(R,r.column,this._datefields,W);case "function":return R=this._evaluateNode(r.args,R,W),this.isAggregate?O.aggregateFunction(r.name,R):q.evaluateFunction(r.name,R)}throw Error("Unsupported sql syntax "+r.type);};d._createClass(h,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,r=>{"current-time"===r.type?this._hasDateFunctions=!0:"function"===r.type&&(this._hasDateFunctions=this._hasDateFunctions||ca.has(r.name.toLowerCase()))});return this._hasDateFunctions}}]);return h}();var D;(function(h){h[h.Normal=0]="Normal";h[h.Escaped=1]="Escaped"})(D||(D={}));const t={getAttribute(h,C){return(h&&"object"===typeof h.attributes?h.attributes:h)[C]}};f.WhereClause=w;f.defaultAttributeAdapter=
t;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(f){function d(q){let B=0;for(let y=0;y<q.length;y++)B+=q[y];return B/q.length}function fa(q){const B=d(q),y=q.length;let m=0;for(const p of q)m+=(p-B)**2;return 1<y?m/(y-1):0}const O={min:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,
q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:d(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{q=q[0];let B=0;for(let y=0;y<q.length;y++)B+=q[y];q=B}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(fa(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:fa(q[0])}};f.aggregateFunction=function(q,B){const y=O[q.toLowerCase()];if(null==y)throw Error("Function Not Recognised");
if(B.length<y.minParams||B.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return y.evaluate(B)};f.isAggregate=function(q,B){q=O[q.toLowerCase()];return null!=q&&B>=q.minParams&&B<=q.maxParams};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(f,d){let fa=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}q._fixDefaults=function(B){if(null!==B.precision||null!==B.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};q.createFromMilliseconds=function(B){const y=new q;y.second=B/1E3;return y};q.createFromValueAndQualifer=function(B,y,m){let p=null;const x=new q;x.op="-"===m?"-":"+";if("interval-period"===y.type){q._fixDefaults(y);m=RegExp("^[0-9]{1,}$");if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(m.test(B))x[y.period]=
parseFloat(B);else throw Error("Illegal Interval");}else{q._fixDefaults(y.start);q._fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":p=RegExp("^[0-9]{1,} [0-9]{1,}$");if(p.test(B))x[y.start.period]=parseFloat(B.split(" ")[0]),x[y.end.period]=parseFloat(B.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(p.test(B))x[y.start.period]=parseFloat(B.split(" ")[0]),B=B.split(" ")[1].split(":"),x.hour=parseFloat(B[0]),x.minute=parseFloat(B[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(B))x[y.start.period]=parseFloat(B.split(" ")[0]),B=B.split(" ")[1].split(":"),x.hour=parseFloat(B[0]),x.minute=parseFloat(B[1]),
x.second=parseFloat(B[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(y.end.period){case "minute":p=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(p.test(B))x.hour=parseFloat(B.split(":")[0]),x.minute=parseFloat(B.split(":")[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(B))B=B.split(":"),x.hour=parseFloat(B[0]),x.minute=parseFloat(B[1]),x.second=parseFloat(B[2]);
else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(y.end.period){case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(B))B=B.split(":"),x.minute=parseFloat(B[0]),x.second=parseFloat(B[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return x};q.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+
6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const O={extract:{minParams:2,maxParams:2,evaluate:([q,B])=>{if(null==B)return null;if(B instanceof Date)switch(q.toUpperCase()){case "SECOND":return B.getSeconds();case "MINUTE":return B.getMinutes();case "HOUR":return B.getHours();case "DAY":return B.getDate();case "MONTH":return B.getMonth()+1;case "YEAR":return B.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:q=>{if(2===q.length){const [B,y]=q;return null==B||null==y?null:B.toString().substring(y-1)}if(3===q.length){const [B,y,m]=q;return null==B||null==y||null==m?null:0>=m?"":B.toString().substring(y-1,y+m-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,B])=>null==q||null==B?null:B.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var B=3===q.length,y=B?q[1]:" ";B=B?q[2]:q[1];if(null==y||null==B)return null;y=`(${d.escapeRegExpString(y)})`;switch(q[0]){case "BOTH":return B.replace(new RegExp(`^${y}*|${y}*$`,
"g"),"");case "LEADING":return B.replace(new RegExp(`^${y}*`,"g"),"");case "TRAILING":return B.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},
sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,maxParams:2,evaluate:q=>{const B=q[0];q=2===q.length?10**q[1]:1;return null==B?null:Math.round(B*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},
char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let B="";for(let y=0;y<q.length;y++){if(null==q[y])return null;B+=q[y].toString()}return B}},lower:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};f.SqlInterval=fa;f.evaluateFunction=function(q,B){const y=O[q.toLowerCase()];
if(null==y)throw Error("Function Not Recognised");if(B.length<y.minParams||B.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return y.evaluate(B)};f.isStandardized=function(q,B){q=O[q.toLowerCase()];return null!=q&&B>=q.minParams&&B<=q.maxParams};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(f,d){var fa={exports:{}};
(function(q){(function(B,y){q.exports&&(q.exports=y())})(d.commonjsGlobal,function(){function B(m,p,x,F){m=Error.call(this,m);Object.setPrototypeOf&&Object.setPrototypeOf(m,B.prototype);m.expected=p;m.found=x;m.location=F;m.name="SyntaxError";return m}function y(m,p,x){x=x||" ";if(m.length>p)return m;p-=m.length;x+=x.repeat(p);return m+x.slice(0,p)}(function(m,p){function x(){this.constructor=m}x.prototype=p.prototype;m.prototype=new x})(B,Error);B.prototype.format=function(m){var p="Error: "+this.message;
if(this.location){var x=null,F;for(F=0;F<m.length;F++)if(m[F].source===this.location.source){x=m[F].text.split(/\r\n|\n|\r/g);break}m=this.location.start;F=this.location.source+":"+m.line+":"+m.column;if(x){var N=this.location.end,H=y("",m.line.toString().length," ");x=x[m.line-1];N=(m.line===N.line?N.column:x.length+1)-m.column||1;p+="\n --\x3e "+F+"\n"+H+" |\n"+m.line+" | "+x+"\n"+H+" | "+y("",m.column-1," ")+y("",N,"^")}else p+="\n at "+F}return p};B.buildMessage=function(m,p){function x(G){return G.charCodeAt(0).toString(16).toUpperCase()}
function F(G){return G.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+x(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+x(c)})}function N(G){return G.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+
x(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+x(c)})}function H(G){return g[G.type](G)}var g={literal:function(G){return'"'+F(G.text)+'"'},class:function(G){var c=G.parts.map(function(k){return Array.isArray(k)?N(k[0])+"-"+N(k[1]):N(k)});return"["+(G.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(G){return G.description}};return"Expected "+function(G){G=G.map(H);var c,k;G.sort();if(0<G.length){for(k=c=1;c<
G.length;c++)G[c-1]!==G[c]&&(G[k]=G[c],k++);G.length=k}switch(G.length){case 1:return G[0];case 2:return G[0]+" or "+G[1];default:return G.slice(0,-1).join(", ")+", or "+G[G.length-1]}}(m)+" but "+(p?'"'+F(p)+'"':"end of input")+" found."};return{SyntaxError:B,parse:function(m,p){function x(u,E){return{type:"literal",text:u,ignoreCase:E}}function F(u,E,Y){return{type:"class",parts:u,inverted:E,ignoreCase:Y}}function N(u){var E=gc[u],Y;if(!E){for(Y=u-1;!gc[Y];)Y--;E=gc[Y];for(E={line:E.line,column:E.column};Y<
u;)10===m.charCodeAt(Y)?(E.line++,E.column=1):E.column++,Y++;gc[u]=E}return E}function H(u,E){var Y=N(u),ua=N(E);return{source:db,start:{offset:u,line:Y.line,column:Y.column},end:{offset:E,line:ua.line,column:ua.column}}}function g(u){e<ub||(e>ub&&(ub=e,Ac=[]),Ac.push(u))}function G(){var u=e;ta();var E=k();E!==a?(ta(),u=E):(e=u,u=a);return u}function c(){var u=e;var E=k();if(E!==a){u=[];var Y=e;var ua=ta();var Ea=Ja();if(Ea!==a){var Oa=ta();var Qa=k();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,
Y=a;for(;Y!==a;)u.push(Y),Y=e,ua=ta(),Ea=Ja(),Ea!==a?(Oa=ta(),Qa=k(),Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);Y={type:"expression-list"};E=[E];for(ua=0;ua<u.length;ua++)E.push(u[ua][3]);Y.value=E;u=Y}else e=u,u=a;return u}function k(){var u=e;var E=I();if(E!==a){u=[];var Y=e;var ua=ta();var Ea=z();if(Ea!==a){var Oa=ta();var Qa=I();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,Y=a;for(;Y!==a;)u.push(Y),Y=e,ua=ta(),Ea=z(),Ea!==a?(Oa=ta(),Qa=I(),Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);u=
$a(E,u)}else e=u,u=a;return u}function I(){var u=e;var E=M();if(E!==a){u=[];var Y=e;var ua=ta();var Ea=na();if(Ea!==a){var Oa=ta();var Qa=M();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,Y=a;for(;Y!==a;)u.push(Y),Y=e,ua=ta(),Ea=na(),Ea!==a?(Oa=ta(),Qa=M(),Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);u=$a(E,u)}else e=u,u=a;return u}function M(){var u=e;var E=ia();if(E===a){E=e;if(33===m.charCodeAt(e)){var Y=nb;e++}else Y=a,0===va&&g(qd);if(Y!==a){var ua=e;va++;if(61===m.charCodeAt(e)){var Ea=Ya;
e++}else Ea=a,0===va&&g(Qc);va--;Ea===a?ua=void 0:(e=ua,ua=a);ua!==a?E=Y=[Y,ua]:(e=E,E=a)}else e=E,E=a}E!==a?(Y=ta(),ua=M(),ua!==a?u={type:"unary-expression",operator:"NOT",expr:ua}:(e=u,u=a)):(e=u,u=a);if(u===a){E=e;u=A();if(u!==a){ta();E=[];Y=e;ua=ta();Ea=P();if(Ea!==a){var Oa=ta();var Qa=A();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,Y=a;if(Y!==a)for(;Y!==a;)E.push(Y),Y=e,ua=ta(),Ea=P(),Ea!==a?(Oa=ta(),Qa=A(),Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);else E=a;E!==a&&(E={type:"arithmetic",
tail:E});E===a&&(E=e,Y=l(),Y!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=c(),ua!==a?(ta(),Ea=La(),Ea!==a?E={op:Y,right:ua}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Y=l(),Y!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=La(),ua!==a?E={op:Y,right:{type:"expression-list",value:[]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Y=l(),Y!==a?(ta(),ua=C(),ua!==a?E={op:Y,right:ua}:(e=E,E=a)):(e=E,E=a))),E===a&&(E=e,Ea=ia(),Ea!==a?(ta(),Y=L(),Y!==a?(ta(),ua=A(),ua!==a?(ta(),Oa=na(),Oa!==a?(ta(),Ea=A(),Ea!==a?E={op:"NOT"+
Y,right:{type:"expression-list",value:[ua,Ea]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Ea=L(),Ea!==a?(ta(),Y=A(),Y!==a?(ta(),ua=na(),ua!==a?(ta(),Oa=A(),Oa!==a?E={op:Ea,right:{type:"expression-list",value:[Y,Oa]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a)),E===a&&(E=e,Y=n(),Y!==a?(ta(),ua=ia(),ua!==a?(ta(),ua=A(),ua!==a?E={op:Y+"NOT",right:ua}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Y=n(),Y!==a?(ta(),ua=A(),ua!==a?E={op:Y,right:ua}:(e=E,E=a)):(e=E,E=a)),E===a&&(E=e,
Y=X(),Y!==a?(ta(),ua=Z(),ua!==a?(ta(),Ea=e,m.substr(e,6).toLowerCase()===pa?(Oa=m.substr(e,6),e+=6):(Oa=a,0===va&&g(rd)),Oa!==a?(Oa=e,va++,Qa=t(),va--,Qa===a?Oa=void 0:(e=Oa,Oa=a),Oa!==a?Ea="ESCAPE":(e=Ea,Ea=a)):(e=Ea,Ea=a),Ea!==a?(ta(),Ea=qa(),Ea!==a?E={op:Y,right:ua,escape:Ea.value}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Y=X(),Y!==a?(ta(),ua=Z(),ua!==a?E={op:Y,right:ua,escape:""}:(e=E,E=a)):(e=E,E=a))))));E===a&&(E=null);""==E||void 0==E||null==E?E=u:(Y=null,E=Y="arithmetic"==E.type?
$a(u,E.tail):ab(E.op,u,E.right,E.escape))}else e=E,E=a;u=E}return u}function P(){if(m.substr(e,2)===Eb){var u=Eb;e+=2}else u=a,0===va&&g(sd);u===a&&(62===m.charCodeAt(e)?(u=dc,e++):(u=a,0===va&&g(td)),u===a&&(m.substr(e,2)===Fb?(u=Fb,e+=2):(u=a,0===va&&g(ud)),u===a&&(m.substr(e,2)===la?(u=la,e+=2):(u=a,0===va&&g(vd)),u===a&&(60===m.charCodeAt(e)?(u=ec,e++):(u=a,0===va&&g(wd)),u===a&&(61===m.charCodeAt(e)?(u=Ya,e++):(u=a,0===va&&g(Qc)),u===a&&(m.substr(e,2)===Cb?(u=Cb,e+=2):(u=a,0===va&&g(xd))))))));
return u}function X(){var u=u=e;var E=ia();if(E!==a){var Y=ta();var ua=ea();ua!==a?u=E=[E,Y,ua]:(e=u,u=a)}else e=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=ea());return u}function l(){var u=u=e;var E=ia();if(E!==a){var Y=ta();var ua=b();ua!==a?u=E=[E,Y,ua]:(e=u,u=a)}else e=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=b());return u}function A(){var u=e;var E=K();if(E!==a){u=[];var Y=e;var ua=ta();var Ea=J();if(Ea!==a){var Oa=ta();var Qa=K();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,Y=a;for(;Y!==a;)u.push(Y),
Y=e,ua=ta(),Ea=J(),Ea!==a?(Oa=ta(),Qa=K(),Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);u=$a(E,u)}else e=u,u=a;return u}function J(){if(43===m.charCodeAt(e)){var u=hb;e++}else u=a,0===va&&g(Bc);u===a&&(45===m.charCodeAt(e)?(u=sb,e++):(u=a,0===va&&g(Cc)));return u}function K(){var u=e;var E=v();if(E!==a){u=[];var Y=e;var ua=ta();var Ea=ca();if(Ea!==a){var Oa=ta();var Qa=v();Qa!==a?Y=ua=[ua,Ea,Oa,Qa]:(e=Y,Y=a)}else e=Y,Y=a;for(;Y!==a;)u.push(Y),Y=e,ua=ta(),Ea=ca(),Ea!==a?(Oa=ta(),Qa=v(),Qa!==a?Y=ua=
[ua,Ea,Oa,Qa]:(e=Y,Y=a)):(e=Y,Y=a);u=$a(E,u)}else e=u,u=a;return u}function ca(){if(42===m.charCodeAt(e)){var u=fc;e++}else u=a,0===va&&g(yd);u===a&&(47===m.charCodeAt(e)?(u=Tb,e++):(u=a,0===va&&g(zd)));return u}function v(){var u=qa();if(u===a){var E=e;var Y=e;var ua=Aa();if(ua!==a){var Ea=Ha();if(Ea!==a){var Oa=Ka();Oa!==a?Y=parseFloat(ua+Ea+Oa):(e=Y,Y=a)}else e=Y,Y=a}else e=Y,Y=a;Y===a&&(Y=e,ua=Aa(),ua!==a?(Ea=Ha(),Ea!==a?Y=parseFloat(ua+Ea):(e=Y,Y=a)):(e=Y,Y=a),Y===a&&(Y=e,ua=Aa(),ua!==a?(Ea=
Ka(),Ea!==a?Y=parseFloat(ua+Ea):(e=Y,Y=a)):(e=Y,Y=a),Y===a&&(Y=e,ua=Aa(),ua!==a&&(ua=parseFloat(ua)),Y=ua)));var Qa=Y;if(Qa!==a){var hc=e;va++;var Ad=D();va--;Ad===a?hc=void 0:(e=hc,hc=a);hc!==a?E={type:"number",value:Qa}:(e=E,E=a)}else e=E,E=a;u=E;if(u===a){var Ub=e;var Ib=e;if(m.substr(e,4).toLowerCase()===Pa){var ic=m.substr(e,4);e+=4}else ic=a,0===va&&g(Bd);if(ic!==a){var Vb=e;va++;var Cd=t();va--;Cd===a?Vb=void 0:(e=Vb,Vb=a);Vb!==a?Ib=ic=[ic,Vb]:(e=Ib,Ib=a)}else e=Ib,Ib=a;var Gb=Ib;Gb!==a&&(Gb=
{type:"boolean",value:!0});Ub=Gb;if(Ub===a){Ub=e;var Jb=e;if(m.substr(e,5).toLowerCase()===Hb){var jc=m.substr(e,5);e+=5}else jc=a,0===va&&g(Dd);if(jc!==a){var Wb=e;va++;var Ed=t();va--;Ed===a?Wb=void 0:(e=Wb,Wb=a);Wb!==a?Jb=jc=[jc,Wb]:(e=Jb,Jb=a)}else e=Jb,Jb=a;Gb=Jb;Gb!==a&&(Gb={type:"boolean",value:!1});Ub=Gb}u=Ub;if(u===a){var Kb=e;if(m.substr(e,4).toLowerCase()===tb){var kc=m.substr(e,4);e+=4}else kc=a,0===va&&g(Fd);if(kc!==a){var Xb=e;va++;var Gd=t();va--;Gd===a?Xb=void 0:(e=Xb,Xb=a);Xb!==a?
Kb=kc=[kc,Xb]:(e=Kb,Kb=a)}else e=Kb,Kb=a;var Dc=Kb;Dc!==a&&(Dc={type:"null",value:null});u=Dc;if(u===a){var Lb=e;var Mb=e;if(m.substr(e,4).toLowerCase()===Hd){var Rc=m.substr(e,4);e+=4}else Rc=a,0===va&&g(Id);if(Rc!==a){var lc=e;va++;var Jd=t();va--;Jd===a?lc=void 0:(e=lc,lc=a);lc!==a?Mb="DATE":(e=Mb,Mb=a)}else e=Mb,Mb=a;if(Mb!==a){ta();var Sc=Z();Sc!==a?Lb={type:"date",value:Sc.value}:(e=Lb,Lb=a)}else e=Lb,Lb=a;u=Lb;if(u===a){var Nb=e;var Ob=e;if(m.substr(e,9).toLowerCase()===Kd){var Tc=m.substr(e,
9);e+=9}else Tc=a,0===va&&g(Ld);if(Tc!==a){var mc=e;va++;var Md=t();va--;Md===a?mc=void 0:(e=mc,mc=a);mc!==a?Ob="TIMESTAMP":(e=Ob,Ob=a)}else e=Ob,Ob=a;if(Ob!==a){ta();var Uc=Z();Uc!==a?Nb={type:"timestamp",value:Uc.value}:(e=Nb,Nb=a)}else e=Nb,Nb=a;u=Nb;if(u===a){var eb=e;var Ec=ha();if(Ec!==a){ta();if(45===m.charCodeAt(e)){var yb=sb;e++}else yb=a,0===va&&g(Cc);yb===a&&(43===m.charCodeAt(e)?(yb=hb,e++):(yb=a,0===va&&g(Bc)));if(yb!==a){ta();var Yb=Z();if(Yb!==a){ta();var Vc=R();Vc!==a?eb={type:"interval",
value:Yb,qualifier:Vc,op:yb}:(e=eb,eb=a)}else e=eb,eb=a}else e=eb,eb=a}else e=eb,eb=a;eb===a&&(eb=e,Ec=ha(),Ec!==a?(ta(),yb=Z(),yb!==a?(ta(),Yb=R(),Yb!==a?eb={type:"interval",value:yb,qualifier:Yb,op:""}:(e=eb,eb=a)):(e=eb,eb=a)):(e=eb,eb=a));u=eb}}}}}}var Xa=u;if(Xa===a){var kb=e;var Pb=e;if(m.substr(e,7).toLowerCase()===bb){var Wc=m.substr(e,7);e+=7}else Wc=a,0===va&&g(Nd);if(Wc!==a){var nc=e;va++;var Od=t();va--;Od===a?nc=void 0:(e=nc,nc=a);nc!==a?Pb="EXTRACT":(e=Pb,Pb=a)}else e=Pb,Pb=a;if(Pb!==
a){ta();var Pd=Fa();if(Pd!==a){ta();var qb=ka();qb===a&&(qb=oa(),qb===a&&(qb=ra(),qb===a&&(qb=sa(),qb===a&&(qb=aa(),qb===a&&(qb=da())))));var Xc=qb;if(Xc!==a){ta();var Qd=T();if(Qd!==a){ta();var Yc=k();if(Yc!==a){ta();var Rd=La();Rd!==a?kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Xc},Yc]}}:(e=kb,kb=a)}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a;Xa=kb;if(Xa===a){var lb=e;var Qb=e;if(m.substr(e,9).toLowerCase()===Ta){var Zc=
m.substr(e,9);e+=9}else Zc=a,0===va&&g(Sd);if(Zc!==a){var oc=e;va++;var Td=t();va--;Td===a?oc=void 0:(e=oc,oc=a);oc!==a?Qb="SUBSTRING":(e=Qb,Qb=a)}else e=Qb,Qb=a;if(Qb!==a){ta();var Ud=Fa();if(Ud!==a){ta();var Fc=k();if(Fc!==a){ta();var Vd=T();if(Vd!==a){ta();var Gc=k();if(Gc!==a){ta();var zb=e;var Rb=e;if(m.substr(e,3).toLowerCase()===Ua){var $c=m.substr(e,3);e+=3}else $c=a,0===va&&g(Wd);if($c!==a){var pc=e;va++;var Xd=t();va--;Xd===a?pc=void 0:(e=pc,pc=a);pc!==a?Rb="FOR":(e=Rb,Rb=a)}else e=Rb,Rb=
a;var Zb=Rb;if(Zb!==a){var Yd=ta();var ad=k();if(ad!==a){var Zd=ta();zb=Zb=[Zb,Yd,ad,Zd]}else e=zb,zb=a}else e=zb,zb=a;zb===a&&(zb=null);Zb=La();Zb!==a?lb={type:"function",name:"substring",args:{type:"expression-list",value:zb?[Fc,Gc,zb[2]]:[Fc,Gc]}}:(e=lb,lb=a)}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a;Xa=lb;if(Xa===a){var Za=e;var Hc=V();if(Hc!==a){ta();var Ic=Fa();if(Ic!==a){ta();var Ab=r();Ab===a&&(Ab=null);ta();var $b=k();if($b!==a){ta();var Jc=T();if(Jc!==a){ta();
var bd=k();if(bd!==a){ta();var $d=La();$d!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b,bd]}}:(e=Za,Za=a)}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a;Za===a&&(Za=e,Hc=V(),Hc!==a?(ta(),Ic=Fa(),Ic!==a?(ta(),Ab=r(),Ab===a&&(Ab=null),ta(),$b=k(),$b!==a?(ta(),Jc=La(),Jc!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b]}}:(e=Za,Za=a)):(e=
Za,Za=a)):(e=Za,Za=a)):(e=Za,Za=a));Xa=Za;if(Xa===a){var mb=e;var Sb=e;if(m.substr(e,8).toLowerCase()===ae){var cd=m.substr(e,8);e+=8}else cd=a,0===va&&g(be);if(cd!==a){var qc=e;va++;var ce=t();va--;ce===a?qc=void 0:(e=qc,qc=a);qc!==a?Sb="POSITION":(e=Sb,Sb=a)}else e=Sb,Sb=a;if(Sb!==a){ta();var de=Fa();if(de!==a){ta();var dd=k();if(dd!==a){ta();var ee=b();if(ee!==a){ta();var ed=k();if(ed!==a){ta();var fe=La();fe!==a?mb={type:"function",name:"position",args:{type:"expression-list",value:[dd,ed]}}:
(e=mb,mb=a)}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a;Xa=mb;if(Xa===a){var Db=e;var rc;var rb=e;rb=rc=w();if(rb===a)if(rb=e,96===m.charCodeAt(e)?(rc=fd,e++):(rc=a,0===va&&g(gd)),rc!==a){var sc=[];if(hd.test(m.charAt(e))){var Bb=m.charAt(e);e++}else Bb=a,0===va&&g(id);if(Bb!==a)for(;Bb!==a;)sc.push(Bb),hd.test(m.charAt(e))?(Bb=m.charAt(e),e++):(Bb=a,0===va&&g(id));else sc=a;sc!==a?(96===m.charCodeAt(e)?(Bb=fd,e++):(Bb=a,0===va&&g(gd)),Bb!==a?rb=sc.join(""):(e=rb,rb=
a)):(e=rb,rb=a)}else e=rb,rb=a;var jd=rb;if(jd!==a){ta();var ge=Fa();if(ge!==a){ta();var tc=c();tc===a&&(tc=null);ta();var he=La();he!==a?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(e=Db,Db=a)}else e=Db,Db=a}else e=Db,Db=a;Xa=Db;if(Xa===a){var vb;var fb=e;var Kc=ma();if(Kc!==a){ta();var ac=k();if(ac!==a){ta();var bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();var uc=za();uc!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(e=fb,
fb=a)}else e=fb,fb=a}else e=fb,fb=a;if(fb===a)if(fb=e,Kc=ma(),Kc!==a)if(ta(),ac=k(),ac!==a){ta();bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();uc=ya();if(uc!==a){ta();var ie=za();ie!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:(e=fb,fb=a)}else e=fb,fb=a}else e=fb,fb=a;else e=fb,fb=a;var Lc=fb;if(Lc===a){var wb;var ib=e;var Mc=ma();if(Mc!==a){ta();var cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();var vc=za();vc!==a?ib={type:"case-expression",format:"searched",
clauses:cc,else:null}:(e=ib,ib=a)}else e=ib,ib=a;if(ib===a)if(ib=e,Mc=ma(),Mc!==a){ta();cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();vc=ya();if(vc!==a){ta();var je=za();je!==a?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(e=ib,ib=a)}else e=ib,ib=a}else e=ib,ib=a;Lc=ib}Xa=Lc;if(Xa===a){var wc;var xc=e;var kd=D();if(kd!==a){var ld=[];for(wc=h();wc!==a;)ld.push(wc),wc=h();xc=kd+ld.join("")}else e=xc,xc=a;var yc=xc;if(yc!==a){var Nc=yc;yc=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Xa=yc;if(Xa===a&&(Xa=C(),Xa===a)){Xa=e;var ke=Fa();if(ke!==a){ta();var Oc=k();if(Oc!==a){ta();var le=La();le!==a?(Oc.paren=!0,Xa=Oc):(e=Xa,Xa=a)}else e=Xa,Xa=a}else e=Xa,Xa=a}}}}}}}}return Xa}function w(){var u;var E=e;var Y=D();if(Y!==a){E=[];for(u=t();u!==a;)E.push(u),u=t();E=Y+E.join("")}else e=E,E=a;return E}function D(){if(me.test(m.charAt(e))){var u=
m.charAt(e);e++}else u=a,0===va&&g(ne);return u}function t(){if(oe.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&g(pe);return u}function h(){if(qe.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&g(re);return u}function C(){var u=e;if(64===m.charCodeAt(e)){var E=zc;e++}else E=a,0===va&&g(se);if(E!==a){var Y=w();Y!==a?u=E=[E,Y]:(e=u,u=a)}else e=u,u=a;u!==a&&(u={type:"parameter",value:u[1]});return u}function r(){var u=e;if(m.substr(e,7).toLowerCase()===te){var E=m.substr(e,7);
e+=7}else E=a,0===va&&g(ue);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="LEADING":(e=u,u=a)}else e=u,u=a;u===a&&(u=e,m.substr(e,8).toLowerCase()===ve?(E=m.substr(e,8),e+=8):(E=a,0===va&&g(we)),E!==a?(E=e,va++,Y=t(),va--,Y===a?E=void 0:(e=E,E=a),E!==a?u="TRAILING":(e=u,u=a)):(e=u,u=a),u===a&&(u=e,m.substr(e,4).toLowerCase()===xe?(E=m.substr(e,4),e+=4):(E=a,0===va&&g(ye)),E!==a?(E=e,va++,Y=t(),va--,Y===a?E=void 0:(e=E,E=a),E!==a?u="BOTH":(e=u,u=a)):(e=u,u=a)));return u}function R(){var u=
e;var E=e;var Y=W();if(Y!==a){ta();var ua=Fa();if(ua!==a)if(ta(),ua=ja(),ua!==a){ta();var Ea=La();Ea!==a?E={type:"interval-period",period:Y.value,precision:ua,secondary:null}:(e=E,E=a)}else e=E,E=a;else e=E,E=a}else e=E,E=a;E===a&&(E=e,Y=W(),Y!==a&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),E=Y);if(E!==a)if(ta(),Y=e,m.substr(e,2).toLowerCase()===ze?(ua=m.substr(e,2),e+=2):(ua=a,0===va&&g(Ae)),ua!==a?(ua=e,va++,Ea=t(),va--,Ea===a?ua=void 0:(e=ua,ua=a),ua!==a?Y="TO":(e=
Y,Y=a)):(e=Y,Y=a),Y!==a){ta();Y=e;ua=W();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});Y=ua;if(Y===a){Y=e;ua=da();if(ua!==a)if(ta(),ua=Fa(),ua!==a)if(ta(),ua=ja(),ua!==a)if(ta(),Ea=Ja(),Ea!==a)if(ta(),Ea=S(),Ea!==a){ta();var Oa=La();Oa!==a?Y={type:"interval-period",period:"second",precision:ua,secondary:Ea}:(e=Y,Y=a)}else e=Y,Y=a;else e=Y,Y=a;else e=Y,Y=a;else e=Y,Y=a;else e=Y,Y=a;Y===a&&(Y=e,ua=da(),ua!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=ja(),ua!==a?(ta(),Ea=La(),
Ea!==a?Y={type:"interval-period",period:"second",precision:ua,secondary:null}:(e=Y,Y=a)):(e=Y,Y=a)):(e=Y,Y=a)):(e=Y,Y=a),Y===a&&(Y=e,ua=da(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),Y=ua))}Y!==a?u={type:"interval-qualifier",start:E,end:Y}:(e=u,u=a)}else e=u,u=a;else e=u,u=a;u===a&&(u=e,Y=W(),Y!==a?(ta(),E=Fa(),E!==a?(ta(),E=S(),E!==a?(ta(),ua=La(),ua!==a?u={type:"interval-period",period:Y.value,precision:E,secondary:null}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):
(e=u,u=a),u===a&&(u=e,Y=W(),Y!==a&&(Y={type:"interval-period",period:Y.value,precision:null,secondary:null}),u=Y,u===a&&(u=e,Y=da(),Y!==a?(ta(),E=Fa(),E!==a?(ta(),E=ja(),E!==a?(ta(),ua=Ja(),ua!==a?(ta(),Y=S(),Y!==a?(ta(),ua=La(),ua!==a?u={type:"interval-period",period:"second",precision:E,secondary:Y}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a),u===a&&(u=e,Y=da(),Y!==a?(ta(),E=Fa(),E!==a?(ta(),E=S(),E!==a?(ta(),ua=La(),ua!==a?u={type:"interval-period",period:"second",precision:E,
secondary:null}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a),u===a&&(u=e,Y=da(),Y!==a&&(Y={type:"interval-period",period:"second",precision:null,secondary:null}),u=Y)))));return u}function W(){var u=e;u=ra();u!==a&&(u={type:"string",value:"day"});u===a&&(u=e,u=sa(),u!==a&&(u={type:"string",value:"hour"}),u===a&&(u=e,u=aa(),u!==a&&(u={type:"string",value:"minute"}),u===a&&(u=e,u=oa(),u!==a&&(u={type:"string",value:"month"}),u===a&&(u=e,u=ka(),u!==a&&(u={type:"string",value:"year"})))));return u}function S(){var u=
Na();u!==a&&(u=parseFloat(u));return u}function ja(){var u=Na();u!==a&&(u=parseFloat(u));return u}function Z(){var u=qa();u===a&&(u=C());return u}function qa(){var u=e;if(39===m.charCodeAt(e)){var E=jb;e++}else E=a,0===va&&g(md);E===a&&(m.substr(e,2)===xb?(E=xb,e+=2):(E=a,0===va&&g(Be)));if(E!==a){E=[];var Y=e;m.substr(e,2)===Ra?(Y=Ra,e+=2):(Y=a,0===va&&g(nd));Y!==a&&(Y="'");Y===a&&(od.test(m.charAt(e))?(Y=m.charAt(e),e++):(Y=a,0===va&&g(pd)));for(;Y!==a;)E.push(Y),Y=e,m.substr(e,2)===Ra?(Y=Ra,e+=
2):(Y=a,0===va&&g(nd)),Y!==a&&(Y="'"),Y===a&&(od.test(m.charAt(e))?(Y=m.charAt(e),e++):(Y=a,0===va&&g(pd)));39===m.charCodeAt(e)?(Y=jb,e++):(Y=a,0===va&&g(md));Y!==a?u={type:"string",value:E.join("")}:(e=u,u=a)}else e=u,u=a;return u}function wa(){var u=e;if(Da()!==a){ta();var E=k();if(E!==a){ta();var Y=Ga();Y!==a?(ta(),Y=k(),Y!==a?u={type:"when-clause",operand:E,value:Y}:(e=u,u=a)):(e=u,u=a)}else e=u,u=a}else e=u,u=a;return u}function xa(){var u=e;if(Da()!==a){ta();var E=k();if(E!==a){ta();var Y=
Ga();Y!==a?(ta(),Y=k(),Y!==a?u={type:"when-clause",operand:E,value:Y}:(e=u,u=a)):(e=u,u=a)}else e=u,u=a}else e=u,u=a;return u}function ya(){var u=e;var E=e;if(m.substr(e,4).toLowerCase()===Ce){var Y=m.substr(e,4);e+=4}else Y=a,0===va&&g(De);if(Y!==a){Y=e;va++;var ua=t();va--;ua===a?Y=void 0:(e=Y,Y=a);Y!==a?E="ELSE":(e=E,E=a)}else e=E,E=a;E!==a?(ta(),E=k(),E!==a?u={type:"else-clause",value:E}:(e=u,u=a)):(e=u,u=a);return u}function Aa(){var u=Na();if(u===a){u=e;if(45===m.charCodeAt(e)){var E=sb;e++}else E=
a,0===va&&g(Cc);E===a&&(43===m.charCodeAt(e)?(E=hb,e++):(E=a,0===va&&g(Bc)));if(E!==a){var Y=Na();Y!==a?u=E[0]+Y:(e=u,u=a)}else e=u,u=a}return u}function Ha(){var u=e;if(46===m.charCodeAt(e)){var E=ob;e++}else E=a,0===va&&g(Ee);E!==a?(u=Na(),u===a&&(u=null),u="."+(null!=u?u:"")):(e=u,u=a);return u}function Ka(){var u;var E=u=e;if(Fe.test(m.charAt(e))){var Y=m.charAt(e);e++}else Y=a,0===va&&g(Ge);Y!==a?(He.test(m.charAt(e))?(E=m.charAt(e),e++):(E=a,0===va&&g(Ie)),E===a&&(E=null),E="e"+(null===E?"":
E)):(e=E,E=a);E!==a?(Y=Na(),Y!==a?u=E+Y:(e=u,u=a)):(e=u,u=a);return u}function Na(){var u=[];var E=cb();if(E!==a)for(;E!==a;)u.push(E),E=cb();else u=a;u!==a&&(u=u.join(""));return u}function cb(){if(Je.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&g(Ke);return u}function b(){var u=e;if(m.substr(e,2).toLowerCase()===Q){var E=m.substr(e,2);e+=2}else E=a,0===va&&g(Le);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="IN":(e=u,u=a)}else e=u,u=a;return u}function n(){var u=
e;if(m.substr(e,2).toLowerCase()===ba){var E=m.substr(e,2);e+=2}else E=a,0===va&&g(Me);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="IS":(e=u,u=a)}else e=u,u=a;return u}function ea(){var u=e;if(m.substr(e,4).toLowerCase()===U){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(Ne);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="LIKE":(e=u,u=a)}else e=u,u=a;return u}function ia(){var u=e;if(m.substr(e,3).toLowerCase()===Ba){var E=m.substr(e,3);e+=3}else E=a,0===va&&
g(Oe);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="NOT":(e=u,u=a)}else e=u,u=a;return u}function na(){var u=e;if(m.substr(e,3).toLowerCase()===Ca){var E=m.substr(e,3);e+=3}else E=a,0===va&&g(Pe);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="AND":(e=u,u=a)}else e=u,u=a;return u}function z(){var u=e;if(m.substr(e,2).toLowerCase()===Ia){var E=m.substr(e,2);e+=2}else E=a,0===va&&g(Qe);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="OR":
(e=u,u=a)}else e=u,u=a;return u}function L(){var u=e;if(m.substr(e,7).toLowerCase()===Ma){var E=m.substr(e,7);e+=7}else E=a,0===va&&g(Re);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="BETWEEN":(e=u,u=a)}else e=u,u=a;return u}function T(){var u=e;if(m.substr(e,4).toLowerCase()===Va){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(Se);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="FROM":(e=u,u=a)}else e=u,u=a;return u}function V(){var u=e;if(m.substr(e,4).toLowerCase()===
pb){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(Te);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="TRIM":(e=u,u=a)}else e=u,u=a;return u}function ha(){var u=e;if(m.substr(e,8).toLowerCase()===Ue){var E=m.substr(e,8);e+=8}else E=a,0===va&&g(Ve);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="INTERVAL":(e=u,u=a)}else e=u,u=a;return u}function ka(){var u=e;if(m.substr(e,4).toLowerCase()===We){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(Xe);if(E!==a){E=e;va++;
var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="YEAR":(e=u,u=a)}else e=u,u=a;return u}function oa(){var u=e;if(m.substr(e,5).toLowerCase()===Ye){var E=m.substr(e,5);e+=5}else E=a,0===va&&g(Ze);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="MONTH":(e=u,u=a)}else e=u,u=a;return u}function ra(){var u=e;if(m.substr(e,3).toLowerCase()===$e){var E=m.substr(e,3);e+=3}else E=a,0===va&&g(af);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="DAY":(e=u,u=a)}else e=u,u=
a;return u}function sa(){var u=e;if(m.substr(e,4).toLowerCase()===bf){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(cf);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="HOUR":(e=u,u=a)}else e=u,u=a;return u}function aa(){var u=e;if(m.substr(e,6).toLowerCase()===df){var E=m.substr(e,6);e+=6}else E=a,0===va&&g(ef);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="MINUTE":(e=u,u=a)}else e=u,u=a;return u}function da(){var u=e;if(m.substr(e,6).toLowerCase()===ff){var E=
m.substr(e,6);e+=6}else E=a,0===va&&g(gf);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="SECOND":(e=u,u=a)}else e=u,u=a;return u}function ma(){var u=e;if(m.substr(e,4).toLowerCase()===hf){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(jf);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="CASE":(e=u,u=a)}else e=u,u=a;return u}function za(){var u=e;if(m.substr(e,3).toLowerCase()===kf){var E=m.substr(e,3);e+=3}else E=a,0===va&&g(lf);if(E!==a){E=e;va++;var Y=t();va--;
Y===a?E=void 0:(e=E,E=a);E!==a?u="END":(e=u,u=a)}else e=u,u=a;return u}function Da(){var u=e;if(m.substr(e,4).toLowerCase()===mf){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(nf);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="WHEN":(e=u,u=a)}else e=u,u=a;return u}function Ga(){var u=e;if(m.substr(e,4).toLowerCase()===of){var E=m.substr(e,4);e+=4}else E=a,0===va&&g(pf);if(E!==a){E=e;va++;var Y=t();va--;Y===a?E=void 0:(e=E,E=a);E!==a?u="THEN":(e=u,u=a)}else e=u,u=a;return u}function Ja(){if(44===
m.charCodeAt(e)){var u=qf;e++}else u=a,0===va&&g(rf);return u}function Fa(){if(40===m.charCodeAt(e)){var u=sf;e++}else u=a,0===va&&g(tf);return u}function La(){if(41===m.charCodeAt(e)){var u=uf;e++}else u=a,0===va&&g(vf);return u}function ta(){var u;var E=[];for(u=Wa();u!==a;)E.push(u),u=Wa();return E}function Wa(){if(wf.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&g(xf);return u}function ab(u,E,Y,ua){u={type:"binary-expression",operator:u,left:E,right:Y};void 0!==ua&&(u.escape=ua);return u}
function $a(u,E){for(var Y=0;Y<E.length;Y++)u=ab(E[Y][1],u,E[Y][3]);return u}p=void 0!==p?p:{};var a={},db=p.grammarSource,Sa={start:G},gb=G,nb="!",Ya="\x3d",Eb="\x3e\x3d",dc="\x3e",Fb="\x3c\x3d",la="\x3c\x3e",ec="\x3c",Cb="!\x3d",hb="+",sb="-",fc="*",Tb="/",zc="@",jb="'",xb="N'",Ra="''",ob=".",tb="null",Pa="true",Hb="false",Q="in",ba="is",U="like",pa="escape",Ba="not",Ca="and",Ia="or",Ma="between",Va="from",Ua="for",Ta="substring",bb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te=
"leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf="case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,hd=/^[^`]/,qd=x("!",!1),Qc=x("\x3d",!1),sd=x("\x3e\x3d",!1),td=x("\x3e",!1),ud=x("\x3c\x3d",!1),vd=x("\x3c\x3e",!1),wd=x("\x3c",!1),xd=x("!\x3d",!1),Bc=x("+",!1),Cc=
x("-",!1),yd=x("*",!1),zd=x("/",!1),ne=F([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=F([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=F([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=x("@",!1),md=x("'",!1),Be=x("N'",!1),nd=x("''",!1),pd=F(["'"],!0,!1),Ee=x(".",!1),Ke=F([["0","9"]],!1,!1),Ge=F(["e","E"],!1,!1),Ie=F(["+","-"],!1,!1),Fd=x("NULL",!0),Bd=x("TRUE",!0),Dd=x("FALSE",!0),Le=x("IN",!0),Me=x("IS",!0),Ne=x("LIKE",!0),rd=x("ESCAPE",!0),Oe=x("NOT",!0),Pe=x("AND",
!0),Qe=x("OR",!0),Re=x("BETWEEN",!0),Se=x("FROM",!0),Wd=x("FOR",!0),Sd=x("SUBSTRING",!0),Nd=x("EXTRACT",!0),Te=x("TRIM",!0),be=x("POSITION",!0),Ld=x("TIMESTAMP",!0),Id=x("DATE",!0),ue=x("LEADING",!0),we=x("TRAILING",!0),ye=x("BOTH",!0),Ae=x("TO",!0),Ve=x("INTERVAL",!0),Xe=x("YEAR",!0),Ze=x("MONTH",!0),af=x("DAY",!0),cf=x("HOUR",!0),ef=x("MINUTE",!0),gf=x("SECOND",!0),jf=x("CASE",!0),lf=x("END",!0),nf=x("WHEN",!0),pf=x("THEN",!0),De=x("ELSE",!0),rf=x(",",!1),tf=x("(",!1),vf=x(")",!1),xf=F([" ","\t",
"\n","\r"],!1,!1),gd=x("`",!1),id=F(["`"],!0,!1),e=0,gc=[{line:1,column:1}],ub=0,Ac=[],va=0;if("startRule"in p){if(!(p.startRule in Sa))throw Error("Can't start parsing from rule \""+p.startRule+'".');gb=Sa[p.startRule]}var Pc=gb();if(Pc!==a&&e===m.length)return Pc;Pc!==a&&e<m.length&&g({type:"end"});throw function(u,E,Y){return new B(B.buildMessage(u,E),u,E,Y)}(Ac,ub<m.length?m.charAt(ub):null,ub<m.length?H(ub,ub+1):H(ub,ub));}}})})(fa);let O=function(){function q(){}q.parse=function(B){return fa.exports.parse(B)};
return q}();f.WhereGrammar=O;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(f){f.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};f.commonjsRequire=function(d){throw Error('Could not dynamically require "'+d+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};f.getDefaultExportFromCjs=function(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d["default"]:d}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(f){f.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H,g,G){function c(P,X,l,A){const J=A.x-l.x;A=A.y-l.y;X=Math.min(1,Math.max(0,((X.x-l.x)*J+(X.y-l.y)*A)/(J*J+A*A)));P.x=l.x+J*X;P.y=l.y+A*X}function k(P,X){return P?X?4:3:X?3:2}let I=function(){function P(l,A,J){this.items=l;this.query=A;this.geometryType=J.geometryType;this.hasM=J.hasM;this.hasZ=J.hasZ;this.fieldsIndex=J.fieldsIndex;this.objectIdField=J.objectIdField;this.spatialReference=J.spatialReference;this.featureAdapter=J.featureAdapter}var X=P.prototype;X.createQueryResponseForCount=
function(){const l=new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return l.countDistinctValues(this.items);const {groupByFieldsForStatistics:A,having:J,outStatistics:K}=this.query;if(!A?.length)return 1;const ca=new Map,v=new Map,w=new Set;for(const h of K){var {statisticType:D}=h;D="exceedslimit"!==D?h.onStatisticField:void 0;if(!v.has(D)){var t=[];for(const C of A){const r=this._getAttributeValues(l,C,ca);t.push(r)}v.set(D,this._calculateUniqueValues(t,l.returnDistinctValues))}D=
v.get(D);for(const C in D){const {data:r,items:R}=D[C];t=r.join(",");J&&!l.validateItems(R,J)||w.add(t)}}return w.size};X.createQueryResponse=function(){var l=fa._asyncToGenerator(function*(){let A;A=this.query.outStatistics?this.query.outStatistics.some(J=>"exceedslimit"===J.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(m.isValid(this.query.outSR)&&
!m.equals(this.query.geometry.spatialReference,this.query.outSR)?A.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...x.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):A.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return A});return function(){return l.apply(this,arguments)}}();X.createSnappingResponse=function(l,A){const J=this.featureAdapter,K=k(this.hasZ,this.hasM),{point:ca}=
l,v="number"===typeof l.distance?l.distance:l.distance.x,w="number"===typeof l.distance?l.distance:l.distance.y,D={candidates:[]},t="esriGeometryPolygon"===this.geometryType;A=this._getPointCreator(ca,null!=ca.z,null!=ca.m,this.spatialReference,A);const h=new M(null,0),C=new M(null,0),r={x:0,y:0,z:0};for(const wa of this.items){var R=J.getGeometry(wa);if(O.isNone(R))continue;const {coords:xa,lengths:ya}=R;h.coords=xa;C.coords=xa;if(l.types&d.SnappingTypes.EDGE){R=0;for(var W=0;W<ya.length;W++){var S=
ya[W];for(var ja=0;ja<S;ja++,R+=K){var Z=h;Z.coordsIndex=R;if(ja!==S-1){const Aa=C;Aa.coordsIndex=R+K;const Ha=r;c(r,ca,Z,Aa);var qa=(ca.x-Ha.x)/v;const Ka=(ca.y-Ha.y)/w;qa=qa*qa+Ka*Ka;1>=qa&&D.candidates.push(F.makeEdgeCandidate(J.getObjectId(wa),A(Ha),Math.sqrt(qa),A(Z),A(Aa)))}}}}if(l.types&d.SnappingTypes.VERTEX)for(R=t?xa.length-K:xa.length,W=0;W<R;W+=K)S=h,S.coordsIndex=W,ja=(ca.x-S.x)/v,Z=(ca.y-S.y)/w,ja=ja*ja+Z*Z,1>=ja&&D.candidates.push(F.makeVertexCandidate(J.getObjectId(wa),A(S),Math.sqrt(ja)))}D.candidates.sort((wa,
xa)=>wa.distance-xa.distance);return D};X._getPointCreator=function(l,A,J,K,ca){const v=O.isSome(ca)&&!m.equals(K,ca)?t=>x.project(t,K,ca):t=>t,{hasZ:w}=this,D=l.m;return A&&J?w?({x:t,y:h,z:C})=>v({x:t,y:h,z:C,m:D}):({x:t,y:h})=>v({x:t,y:h,z:0,m:D}):A?w?({x:t,y:h,z:C})=>v({x:t,y:h,z:C}):({x:t,y:h})=>v({x:t,y:h,z:0}):J?({x:t,y:h})=>v({x:t,y:h,m:D}):({x:t,y:h})=>v({x:t,y:h})};X.createSummaryStatisticsResponse=function(){var l=fa._asyncToGenerator(function*(A){const {field:J,valueExpression:K,normalizationField:ca,
normalizationType:v,normalizationTotal:w,minValue:D,maxValue:t,scale:h}=A;A=this.fieldsIndex.isDateField(J);var C=yield this._getDataValues({field:J,valueExpression:K,normalizationField:ca,normalizationType:v,normalizationTotal:w,scale:h});const r=g.isNullCountSupported({normalizationType:v,normalizationField:ca,minValue:D,maxValue:t}),R=this.fieldsIndex.get(J),W={value:.5,fieldType:R?.type};C=H.isStringField(R)?g.calculateStringStatistics({values:C,supportsNullCount:r,percentileParams:W}):g.calculateStatistics({values:C,
minValue:D,maxValue:t,useSampleStdDev:!v,supportsNullCount:r,percentileParams:W});return g.processSummaryStatisticsResult(C,A)});return function(A){return l.apply(this,arguments)}}();X.createUniqueValuesResponse=function(){var l=fa._asyncToGenerator(function*(A){const {field:J,valueExpression:K,domains:ca,returnAllCodedValues:v,scale:w}=A;var D=yield this._getDataValues({field:J,field2:A.field2,field3:A.field3,fieldDelimiter:A.fieldDelimiter,valueExpression:K,scale:w});D=g.calculateUniqueValuesCount(D);
return g.createUVResult(D,ca,v,A.fieldDelimiter)});return function(A){return l.apply(this,arguments)}}();X.createClassBreaksResponse=function(){var l=fa._asyncToGenerator(function*(A){const {field:J,valueExpression:K,normalizationField:ca,normalizationType:v,normalizationTotal:w,classificationMethod:D,standardDeviationInterval:t,minValue:h,maxValue:C,numClasses:r,scale:R}=A;A=yield this._getDataValues({field:J,valueExpression:K,normalizationField:ca,normalizationType:v,normalizationTotal:w,scale:R});
A=g.calculateClassBreaks(A,{field:J,normalizationField:ca,normalizationType:v,normalizationTotal:w,classificationMethod:D,standardDeviationInterval:t,minValue:h,maxValue:C,numClasses:r});return g.resolveCBResult(A,D)});return function(A){return l.apply(this,arguments)}}();X.createHistogramResponse=function(){var l=fa._asyncToGenerator(function*(A){const {field:J,valueExpression:K,normalizationField:ca,normalizationType:v,normalizationTotal:w,classificationMethod:D,standardDeviationInterval:t,minValue:h,
maxValue:C,numBins:r,scale:R}=A;A=yield this._getDataValues({field:J,valueExpression:K,normalizationField:ca,normalizationType:v,normalizationTotal:w,scale:R});return g.calculateHistogram(A,{field:J,normalizationField:ca,normalizationType:v,normalizationTotal:w,classificationMethod:D,standardDeviationInterval:t,minValue:h,maxValue:C,numBins:r})});return function(A){return l.apply(this,arguments)}}();X._sortFeatures=function(l,A,J){if(1<l.length&&A&&A.length)for(const K of A.reverse()){A=K.split(" ");
const ca=A[0],v=this.fieldsIndex.get(ca);A=A[1]&&"desc"===A[1].toLowerCase();const w=g.getAttributeComparator(v?.type,A);l.sort((D,t)=>{D=J(D,ca,v);t=J(t,ca,v);return w(D,t)})}};X._createFeatureQueryResponse=function(l){const A=this.items,{geometryType:J,hasM:K,hasZ:ca,objectIdField:v,spatialReference:w}=this,{outFields:D,outSR:t,quantizationParameters:h,resultRecordCount:C,resultOffset:r,returnZ:R,returnM:W}=l,S=null!=C?A.length>(r||0)+C:!1,ja=D&&(D.includes("*")?[...this.fieldsIndex.fields]:D.map(Z=>
this.fieldsIndex.get(Z)));return{exceededTransferLimit:S,features:this._createFeatures(l,A),fields:ja,geometryType:J,hasM:K&&W,hasZ:ca&&R,objectIdFieldName:v,spatialReference:N.cleanFromGeometryEngine(t?t:w),transform:h&&y.toQuantizationTransform(h)||null}};X._createFeatures=function(l,A){const J=new p(l,this.featureAdapter,this.fieldsIndex),{hasM:K,hasZ:ca}=this,{orderByFields:v,quantizationParameters:w,returnGeometry:D,returnCentroid:t,maxAllowableOffset:h,resultOffset:C,resultRecordCount:r,returnZ:R=
!1,returnM:W=!1}=l,S=ca&&R,ja=K&&W;l=[];var Z=0;A=[...A];this._sortFeatures(A,v,(xa,ya,Aa)=>J.getFieldValue(xa,ya,Aa));if(D||t){var qa=y.toQuantizationTransform(w);if(D&&!t)for(var wa of A)l[Z++]={attributes:J.getAttributes(wa),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),h,qa,S,ja)};else if(!D&&t)for(const xa of A)l[Z++]={attributes:J.getAttributes(xa),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa)};else for(const xa of A)l[Z++]=
{attributes:J.getAttributes(xa),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),h,qa,S,ja)}}else for(qa of A)(wa=J.getAttributes(qa))&&(l[Z++]={attributes:wa});Z=C||0;null!=r&&(l=l.slice(Z,Math.min(l.length,Z+r)));return l};X._createExceedsLimitQueryResponse=function(l){var A=!1;let J=Number.POSITIVE_INFINITY,K=Number.POSITIVE_INFINITY;A=Number.POSITIVE_INFINITY;for(const ca of l.outStatistics)if("exceedslimit"===
ca.statisticType){J=null!=ca.maxPointCount?ca.maxPointCount:Number.POSITIVE_INFINITY;K=null!=ca.maxRecordCount?ca.maxRecordCount:Number.POSITIVE_INFINITY;A=null!=ca.maxVertexCount?ca.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)A=this.items.length>J;else if(this.items.length>K)A=!0;else{l=k(this.hasZ,this.hasM);const ca=this.featureAdapter;A=this.items.reduce((v,w)=>{w=ca.getGeometry(w);return v+(O.isSome(w)&&w.coords.length||0)},0)/l>A}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(A)}}]}};X._createStatisticsQueryResponse=function(){var l=fa._asyncToGenerator(function*(A){var J={attributes:{}};const K=[],ca=new Map,v=new Map,w=new Map,D=new Map,t=new p(A,this.featureAdapter,this.fieldsIndex);var h=A.outStatistics;const {groupByFieldsForStatistics:C,having:r,orderByFields:R}=A;A=C&&C.length;const W=!!A,S=W&&C[0],ja=W&&!this.fieldsIndex.get(S);
for(const ya of h){const {outStatisticFieldName:Aa,statisticType:Ha}=ya;h=ya;var Z="exceedslimit"!==Ha?ya.onStatisticField:void 0;const Ka="percentile_disc"===Ha||"percentile_cont"===Ha,Na="EnvelopeAggregate"===Ha||"CentroidAggregate"===Ha||"ConvexHullAggregate"===Ha,cb=W&&1===A&&(Z===S||ja)&&"count"===Ha;if(W){if(!w.has(Z)){var qa=[];for(const b of C){var wa=this._getAttributeValues(t,b,ca);qa.push(wa)}w.set(Z,this._calculateUniqueValues(qa,Na?!1:t.returnDistinctValues))}qa=w.get(Z);for(const b in qa){const {count:n,
data:ea,items:ia,itemPositions:na}=qa[b];wa=ea.join(",");if(!r||t.validateItems(ia,r)){const z=D.get(wa)||{attributes:{}};if(Na){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:T,outStatisticFieldName:V}=yield this._getAggregateGeometry(h,ia);z.aggregateGeometries[V]=T}else{var xa=null;if(cb)xa=n;else{const T=this._getAttributeValues(t,Z,ca);xa=na.map(V=>T[V]);xa=Ka&&"statisticParameters"in h?this._getPercentileValue(h,xa):this._getStatisticValue(h,xa,null,t.returnDistinctValues)}z.attributes[Aa]=
xa}let L=0;C.forEach((T,V)=>z.attributes[this.fieldsIndex.get(T)?T:`EXPR_${++L}`]=ea[V]);D.set(wa,z)}}}else if(Na){J.aggregateGeometries||(J.aggregateGeometries={});const {aggregateGeometries:b,outStatisticFieldName:n}=yield this._getAggregateGeometry(h,this.items);J.aggregateGeometries[n]=b}else Z=this._getAttributeValues(t,Z,ca),J.attributes[Aa]=Ka&&"statisticParameters"in h?this._getPercentileValue(h,Z):this._getStatisticValue(h,Z,v,t.returnDistinctValues);K.push({name:Aa,alias:Aa,type:"esriFieldTypeDouble"})}J=
W?Array.from(D.values()):[J];this._sortFeatures(J,R,(ya,Aa)=>ya.attributes[Aa]);return{fields:K,features:J}});return function(A){return l.apply(this,arguments)}}();X._getAggregateGeometry=function(){var l=fa._asyncToGenerator(function*(A,J){var K=yield new Promise((R,W)=>f(["../../../geometry/geometryEngineJSON"],R,W));const {statisticType:ca,outStatisticFieldName:v}=A,{featureAdapter:w,spatialReference:D,geometryType:t,hasZ:h,hasM:C}=this;J=J.map(R=>N.getGeometry(t,h,C,w.getGeometry(R)));const r=
K.convexHull(D,J,!0)[0];A={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===ca?(K=r?B.getPolygonExtent(r):B.getGeometryExtent(K.union(D,J)),A.aggregateGeometries={...K,spatialReference:D},A.outStatisticFieldName=v||"extent"):"CentroidAggregate"===ca?(K=r?q.polygonCentroid(r):q.extentCentroid(B.getGeometryExtent(K.union(D,J))),A.aggregateGeometries={x:K[0],y:K[1],spatialReference:D},A.outStatisticFieldName=v||"centroid"):"ConvexHullAggregate"===ca&&(A.aggregateGeometries=
r,A.outStatisticFieldName=v||"convexHull");return A});return function(A,J){return l.apply(this,arguments)}}();X._getStatisticValue=function(l,A,J,K){const {onStatisticField:ca,statisticType:v}=l;l=null;l=J?.has(ca)?J.get(ca):H.isStringField(this.fieldsIndex.get(ca))?g.calculateStringStatistics({values:A,returnDistinct:K}):g.calculateStatistics({values:A,minValue:null,maxValue:null,useSampleStdDev:!0});J&&J.set(ca,l);return l["var"===v?"variance":v]};X._getPercentileValue=function(l,A){const {onStatisticField:J,
statisticParameters:K,statisticType:ca}=l,{value:v,orderBy:w}=K;l=this.fieldsIndex.get(J);return g.calculatePercentile(A,{value:v,orderBy:w,fieldType:l?.type,isDiscrete:"percentile_disc"===ca})};X._getAttributeValues=function(l,A,J){if(J.has(A))return J.get(A);const K=this.fieldsIndex.get(A),ca=this.items.map(v=>l.getFieldValue(v,A,K));J.set(A,ca);return ca};X._getAttributeDataValues=function(l,A){return this.items.map(J=>l.getDataValue(J,{field:A.field,field2:A.field2,field3:A.field3,fieldDelimiter:A.fieldDelimiter,
normalizationField:A.normalizationField,normalizationType:A.normalizationType,normalizationTotal:A.normalizationTotal}))};X._getAttributeExpressionValues=function(){var l=fa._asyncToGenerator(function*(A,J,K){const {arcadeUtils:ca}=yield G.loadArcade();J=ca.createFunction(J);K=K&&ca.getViewInfo(K);return A.getExpressionValues(this.items,J,K,ca)});return function(A,J,K){return l.apply(this,arguments)}}();X._calculateUniqueValues=function(l,A){const J={},K=this.items,ca=K.length;for(let v=0;v<ca;v++){const w=
K[v],D=[];for(const h of l)D.push(h[v]);const t=D.join(",");A?null==J[t]&&(J[t]={count:1,data:D,items:[w],itemPositions:[v]}):null==J[t]?J[t]={count:1,data:D,items:[w],itemPositions:[v]}:(J[t].count++,J[t].items.push(w),J[t].itemPositions.push(v))}return J};X._getDataValues=function(){var l=fa._asyncToGenerator(function*(A){const J=new p(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:K,field:ca,normalizationField:v,normalizationType:w,normalizationTotal:D,scale:t}=A,h=K?{viewingMode:"map",
scale:t,spatialReference:this.query.outSR||this.spatialReference}:null;return K?this._getAttributeExpressionValues(J,K,h):this._getAttributeDataValues(J,{field:ca,field2:A.field2,field3:A.field3,fieldDelimiter:A.fieldDelimiter,normalizationField:v,normalizationType:w,normalizationTotal:D})});return function(A){return l.apply(this,arguments)}}();fa._createClass(P,[{key:"size",get:function(){return this.items.length}}]);return P}();d.SnappingTypes=void 0;(function(P){P[P.NONE=0]="NONE";P[P.EDGE=1]=
"EDGE";P[P.VERTEX=2]="VERTEX"})(d.SnappingTypes||(d.SnappingTypes={}));let M=function(){function P(X,l){this.coords=X;this.coordsIndex=l}fa._createClass(P,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return P}();d.QueryEngineResult=I;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"../../core/maybe","./jsonUtils"],function(f,d,fa){function O({scale:v,translate:w},D){return Math.round((D-w[0])/v[0])}function q({scale:v,translate:w},D){return Math.round((w[1]-D)/v[1])}function B(v,w,D){const t=[];let h,C,r,R;for(let W=0;W<D.length;W++){const S=D[W];if(0<W){if(r=O(v,S[0]),R=q(v,S[1]),r!==h||R!==C)t.push(w(S,r-h,R-C)),h=r,C=R}else h=O(v,S[0]),C=q(v,S[1]),t.push(w(S,h,C))}return 0<t.length?t:null}function y(v,w,D,t){return B(v,D?t?ca:K:t?K:J,w)}function m(v,w,D,t){const h=[];D=
D?t?ca:K:t?K:J;for(t=0;t<w.length;t++){const C=B(v,D,w[t]);C&&3<=C.length&&h.push(C)}return h.length?h:null}function p(v,w,D,t){const h=[];D=D?t?ca:K:t?K:J;for(t=0;t<w.length;t++){const C=B(v,D,w[t]);C&&2<=C.length&&h.push(C)}return h.length?h:null}function x({scale:v,translate:w},D){return D*v[0]+w[0]}function F({scale:v,translate:w},D){return w[1]-D*v[1]}function N(v,w,D){const t=Array(D.length);if(!D.length)return t;const [h,C]=v.scale;let r=x(v,D[0][0]);v=F(v,D[0][1]);t[0]=w(D[0],r,v);for(let R=
1;R<D.length;R++){const W=D[R];r+=W[0]*h;v-=W[1]*C;t[R]=w(W,r,v)}return t}function H(v,w,D){const t=Array(D.length);for(let h=0;h<D.length;h++)t[h]=N(v,w,D[h]);return t}function g(v,w,D,t){return N(v,D?t?ca:K:t?K:J,w)}function G(v,w,D,t){return H(v,D?t?ca:K:t?K:J,w)}function c(v,w,D,t){return H(v,D?t?ca:K:t?K:J,w)}function k(v,w,D){let [t,h]=D[0],C=Math.min(t,w[0]),r=Math.min(h,w[1]),R=Math.max(t,w[2]);w=Math.max(h,w[3]);for(let W=1;W<D.length;W++){const [S,ja]=D[W];t+=S;h+=ja;0>S&&(C=Math.min(C,
t));0<S&&(R=Math.max(R,t));0>ja?r=Math.min(r,h):0<ja&&(w=Math.max(w,h))}v[0]=C;v[1]=r;v[2]=R;v[3]=w;return v}function I(v,w){if(!w.length)return null;v[0]=v[1]=Number.POSITIVE_INFINITY;v[2]=v[3]=Number.NEGATIVE_INFINITY;for(let D=0;D<w.length;D++)k(v,v,w[D]);return v}function M(v,w,D,t,h){w.xmin=O(v,D.xmin);w.ymin=q(v,D.ymin);w.xmax=O(v,D.xmax);w.ymax=q(v,D.ymax);w!==D&&(t&&(w.zmin=D.zmin,w.zmax=D.zmax),h&&(w.mmin=D.mmin,w.mmax=D.mmax));return w}function P(v,w,D,t,h){w.points=y(v,D.points,t,h)??[];
return w}function X(v,w,D,t,h){w.x=O(v,D.x);w.y=q(v,D.y);w!==D&&(t&&(w.z=D.z),h&&(w.m=D.m));return w}function l(v,w,D,t,h){v=m(v,D.rings,t,h);if(!v)return null;w.rings=v;return w}function A(v,w,D,t,h){v=p(v,D.paths,t,h);if(!v)return null;w.paths=v;return w}const J=(v,w,D)=>[w,D],K=(v,w,D)=>[w,D,v[2]],ca=(v,w,D)=>[w,D,v[2],v[3]];f.equals=function(v,w){if(v===w||null==v&&null==w)return!0;if(null==v||null==w)return!1;let D,t,h,C;v&&"upperLeft"===v.originPosition?(D=v.translate[0],t=v.translate[1],v=
v.scale[0]):(D=d.isSome(v.extent)?v.extent.xmin:0,t=d.isSome(v.extent)?v.extent.ymax:0,v=v.tolerance);w&&"upperLeft"===w.originPosition?(h=w.translate[0],C=w.translate[1],w=w.scale[0]):(h=d.isSome(w.extent)?w.extent.xmin:0,C=d.isSome(w.extent)?w.extent.ymax:0,w=w.tolerance);return D===h&&t===C&&v===w};f.getQuantizedBoundsCoordsArray=k;f.getQuantizedBoundsCoordsArrayArray=I;f.getQuantizedBoundsPaths=function(v){return I([0,0,0,0],v)};f.getQuantizedBoundsPoints=function(v){const w=[Number.POSITIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return k(w,w,v)};f.getQuantizedBoundsRings=function(v){return I([0,0,0,0],v)};f.quantizeBounds=function(v,w,D){w[0]=O(v,D[0]);w[3]=q(v,D[1]);w[2]=O(v,D[2]);w[1]=q(v,D[3]);return w};f.quantizeExtent=M;f.quantizeGeometry=function(v,w){return v&&w?fa.isPoint(w)?X(v,{},w,!1,!1):fa.isPolyline(w)?A(v,{},w,!1,!1):fa.isPolygon(w)?l(v,{},w,!1,!1):fa.isMultipoint(w)?P(v,{},w,!1,!1):fa.isExtent(w)?M(v,{},w,!1,!1):null:null};f.quantizeMultipoint=
P;f.quantizePaths=p;f.quantizePoint=X;f.quantizePoints=y;f.quantizePolygon=l;f.quantizePolyline=A;f.quantizeRings=m;f.quantizeX=O;f.quantizeY=q;f.toQuantizationTransform=function(v){return v?{originPosition:"upper-left"===v.originPosition?"upperLeft":"lower-left"===v.originPosition?"lowerLeft":v.originPosition,scale:v.tolerance?[v.tolerance,v.tolerance]:[1,1],translate:d.isSome(v.extent)?[v.extent.xmin,v.extent.ymax]:[0,0]}:null};f.unquantizeBounds=function(v,w,D){return D?(w[0]=x(v,D[0]),w[1]=F(v,
D[3]),w[2]=x(v,D[2]),w[3]=F(v,D[1]),w):[x(v,w[0]),F(v,w[3]),x(v,w[2]),F(v,w[1])]};f.unquantizeCoordsArray=N;f.unquantizeCoordsArrayArray=H;f.unquantizeExtent=function(v,w,D,t,h){w.xmin=x(v,D.xmin);w.ymin=F(v,D.ymin);w.xmax=x(v,D.xmax);w.ymax=F(v,D.ymax);w!==D&&(t&&(w.zmin=D.zmin,w.zmax=D.zmax),h&&(w.mmin=D.mmin,w.mmax=D.mmax));return w};f.unquantizeMultipoint=function(v,w,D,t,h){d.isSome(D)&&(w.points=g(v,D.points,t,h));return w};f.unquantizePaths=G;f.unquantizePoint=function(v,w,D,t,h){if(d.isNone(D))return w;
w.x=x(v,D.x);w.y=F(v,D.y);w!==D&&(t&&(w.z=D.z),h&&(w.m=D.m));return w};f.unquantizePoints=g;f.unquantizePolygon=function(v,w,D,t,h){d.isSome(D)&&(w.rings=c(v,D.rings,t,h));return w};f.unquantizePolyline=function(v,w,D,t,h){d.isSome(D)&&(w.paths=G(v,D.paths,t,h));return w};f.unquantizeRings=c;f.unquantizeX=x;f.unquantizeY=F;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(f,d,fa){return function(){function O(B,y,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=B.returnDistinctValues??!1;this.fieldsIndex=m;this.featureAdapter=y;if((y=B.outFields)&&!y.includes("*")){this.outFields=y;B=0;for(const x of y){var p=d.getExpressionFromFieldName(x);p=(y=this.fieldsIndex.get(p))?null:d.getWhereClause(p,m);y=y?y.name:d.getAliasFromFieldName(x)||`FIELD_EXP_${B++}`;this._fieldDataCache.set(x,
{alias:y,clause:p})}}}var q=O.prototype;q.countDistinctValues=function(B){if(!this.returnDistinctValues)return B.length;B.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};q.getAttributes=function(B){B=this._processAttributesForOutFields(B);return this._processAttributesForDistinctValues(B)};q.getFieldValue=function(B,y,m){const p=m?m.name:y;let x=null;this._fieldDataCache.has(p)?x=this._fieldDataCache.get(p).clause:m||(x=d.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(p,
{alias:p,clause:x}));return m?this.featureAdapter.getAttribute(B,p):x.calculateValue(B,this.featureAdapter)};q.getDataValue=function(B,y){const m=y.normalizationType,p=y.normalizationTotal;let x=this.getFieldValue(B,y.field,this.fieldsIndex.get(y.field));y.field2&&(x=`${fa.processNullValue(x)}${y.fieldDelimiter}${fa.processNullValue(this.getFieldValue(B,y.field2,this.fieldsIndex.get(y.field2)))}`,y.field3&&(x=`${x}${y.fieldDelimiter}${fa.processNullValue(this.getFieldValue(B,y.field3,this.fieldsIndex.get(y.field3)))}`));
m&&Number.isFinite(x)&&(B="field"===m&&y.normalizationField?this.getFieldValue(B,y.normalizationField,this.fieldsIndex.get(y.normalizationField)):null,x=fa.getNormalizedValue(x,m,B,p));return x};q.getExpressionValue=function(B,y,m,p){B={attributes:this.featureAdapter.getAttributes(B),layer:{fields:this.fieldsIndex.fields}};m=p.createExecContext(B,m);return p.executeFunction(y,m)};q.getExpressionValues=function(B,y,m,p){const x={fields:this.fieldsIndex.fields};return B.map(F=>{F={attributes:this.featureAdapter.getAttributes(F),
layer:x};F=p.createExecContext(F,m);return p.executeFunction(y,F)})};q.validateItem=function(B,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:d.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(B,this.featureAdapter)};q.validateItems=function(B,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:d.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(B,this.featureAdapter)};
q._processAttributesForOutFields=function(B){const y=this.outFields;if(!y||!y.length)return this.featureAdapter.getAttributes(B);const m={};for(const p of y){const {alias:x,clause:F}=this._fieldDataCache.get(p);m[x]=F?F.calculateValue(B,this.featureAdapter):this.featureAdapter.getAttribute(B,x)}return m};q._processAttributesForDistinctValues=function(B){if(f.isNone(B)||!this.returnDistinctValues)return B;var y=this.outFields,m=[];if(y)for(const x of y){var {alias:p}=this._fieldDataCache.get(x);m.push(B[p])}else for(p in B)m.push(B[p]);
y=`${(y||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++m);return 1<m?null:B};return O}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(f,d,fa){function O(l){return null==l||"string"===typeof l&&!l?"\x3cNull\x3e":l}function q(l){const A=null!=l.minValue||null!=l.maxValue,J=!!l.sqlExpression&&l.supportsSQLExpression;return!(null!=l.normalizationField||
null!=l.normalizationType)&&!A&&!J}function B(l){const {values:A,useSampleStdDev:J,supportsNullCount:K}=l;var ca=Number.POSITIVE_INFINITY;let v=Number.NEGATIVE_INFINITY,w=null,D=null;var t=null;let h=null,C=0;const r=null==l.minValue?-Infinity:l.minValue,R=null==l.maxValue?Infinity:l.maxValue;for(const W of A)Number.isFinite(W)?W>=r&&W<=R&&(w+=W,ca=Math.min(ca,W),v=Math.max(v,W),C++):"string"===typeof W&&C++;if(C&&null!=w){D=w/C;t=0;for(const W of A)Number.isFinite(W)&&W>=r&&W<=R&&(t+=(W-D)**2);h=
J?1<C?t/(C-1):0:0<C?t/C:0;t=Math.sqrt(h)}else v=ca=null;ca={avg:D,count:C,max:v,min:ca,stddev:t,sum:w,variance:h};K&&(ca.nullcount=A.length-C);l.percentileParams&&(ca.median=y(A,l.percentileParams));return ca}function y(l,A){const {fieldType:J,value:K,orderBy:ca,isDiscrete:v}=A,w=m(J,"desc"===ca);l=[...l].filter(C=>null!=C).sort((C,r)=>w(C,r));if(0===l.length)return null;if(0>=K)return l[0];if(1<=K)return l[l.length-1];var D=(l.length-1)*K,t=Math.floor(D);A=t+1;D%=1;t=l[t];const h=l[A];return A>=
l.length||v||"string"===typeof t||"string"===typeof h?t:t*(1-D)+h*D}function m(l,A){const J=A?1:-1,K=x(A),ca=p(A);if(!l||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...P].includes(l))return(v,w)=>"number"===typeof v&&"number"===typeof w?K(v,w):"string"===typeof v&&"string"===typeof w?ca(v,w):J;if("esriFieldTypeDate"===l)return(v,w)=>{v=(new Date(v)).getTime();w=(new Date(w)).getTime();return isNaN(v)||isNaN(w)?J:K(v,w)};if(P.has(l))return(v,w)=>K(v,w);if("esriFieldTypeString"===
l)return(v,w)=>ca(v,w);if("esriFieldTypeGUID"===l||"esriFieldTypeGlobalID"===l){const v=p(A);return(w,D)=>v(F(w),F(D))}return A?(v,w)=>1:(v,w)=>-1}function p(l){return l?(A,J)=>{A=A?.toUpperCase();J=J?.toUpperCase();return A>J?-1:A<J?1:0}:(A,J)=>{A=A?.toUpperCase();J=J?.toUpperCase();return A<J?-1:A>J?1:0}}function x(l){return l?(A,J)=>J-A:(A,J)=>A-J}function F(l){return l.substr(24,12)+l.substr(19,4)+l.substr(16,2)+l.substr(14,2)+l.substr(11,2)+l.substr(9,2)+l.substr(6,2)+l.substr(4,2)+l.substr(2,
2)+l.substr(0,2)}function N(l){return"coded-value"!==l?.type?[]:l.codedValues.map(A=>A.code)}function H(l,A){const J=G({field:A.field,normalizationType:A.normalizationType,normalizationField:A.normalizationField,classificationMethod:A.classificationMethod,standardDeviationInterval:A.standardDeviationInterval,breakCount:A.numClasses||5});l=g(l,A.minValue,A.maxValue);return fa.createGenerateRendererClassBreaks({definition:J,values:l,normalizationTotal:A.normalizationTotal})}function g(l,A,J){A=null==
A?-Infinity:A;J=null==J?Infinity:J;return l.filter(K=>Number.isFinite(K)&&K>=A&&K<=J)}function G(l){const A=l.field,J=l.classificationMethod||"equal-interval",K=l.normalizationType,ca=l.normalizationField,v=new d;v.classificationField=A;v.breakCount=l.breakCount;v.classificationMethod=J;v.standardDeviationInterval="standard-deviation"===J?l.standardDeviationInterval||1:void 0;v.normalizationType=K;v.normalizationField="field"===K?ca:void 0;return v}function c(l,A){const {field:J,classificationMethod:K,
standardDeviationInterval:ca,normalizationType:v,normalizationField:w,normalizationTotal:D,minValue:t,maxValue:h}=A,C=A.numBins||10;let r=A=null,R=null;K&&"equal-interval"!==K||v?({classBreaks:l}=H(l,{field:J,normalizationType:v,normalizationField:w,normalizationTotal:D,classificationMethod:K,standardDeviationInterval:ca,minValue:t,maxValue:h,numClasses:C}),A=l[0].minValue,r=l[l.length-1].maxValue,R=l.map(W=>[W.minValue,W.maxValue])):(null!=t&&null!=h?(A=t,r=h):(l=B({values:l,minValue:t,maxValue:h,
useSampleStdDev:!v,supportsNullCount:q({normalizationType:v,normalizationField:w,minValue:t,maxValue:h})}),A=l.min,r=l.max),R=I(A,r,C));return{min:A,max:r,intervals:R}}function k(l,A){let J=-1;for(let K=l.length-1;0<=K;K--)if(A>=l[K][0]){J=K;break}return J}function I(l,A,J){const K=(A-l)/J,ca=[];let v;for(let w=1;w<=J;w++)v=l+K,v=Number(v.toFixed(16)),ca.push([l,w===J?A:v]),l=v;return ca}const M=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,P=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"]),X="min max avg stddev count sum variance nullcount median".split(" ");f.calculateClassBreaks=H;f.calculateHistogram=function(l,A){const {min:J,max:K,intervals:ca}=c(l,A),v=ca.map((w,D)=>({minValue:ca[D][0],maxValue:ca[D][1],count:0}));for(const w of l)null!=w&&w>=J&&w<=K&&(l=k(ca,w),-1<l&&v[l].count++);return{bins:v,minValue:J,maxValue:K,normalizationTotal:A.normalizationTotal}};f.calculatePercentile=y;f.calculateStatistics=B;f.calculateStringStatistics=
function(l){const A=l.returnDistinct?[...(new Set(l.values))]:l.values,J=A.filter(ca=>null!=ca).length,K={count:J};l.supportsNullCount&&(K.nullcount=A.length-J);l.percentileParams&&(K.median=y(A,l.percentileParams));return K};f.calculateUniqueValuesCount=function(l){const A={};for(let J of l){if(null==J||"string"===typeof J&&""===J.trim())J=null;null==A[J]?A[J]={count:1,data:J}:A[J].count++}return{count:A}};f.createClassBreaksDefinition=G;f.createUVResult=function(l,A,J,K){l=l.count;const ca=[];if(J&&
A){J=[];var v=N(A[0]);for(const w of v)if(A[1]){v=N(A[1]);for(const D of v)if(A[2]){v=N(A[2]);for(const t of v)J.push(`${O(w)}${K}${O(D)}${K}${O(t)}`)}else J.push(`${O(w)}${K}${O(D)}`)}else J.push(w);for(const w of J)l.hasOwnProperty(w)||(l[w]={data:w,count:0})}for(const w in l)A=l[w],ca.push({value:A.data,count:A.count,label:A.label});return{uniqueValueInfos:ca}};f.getAttributeComparator=m;f.getEqualIntervalBins=I;f.getNormalizedValue=function(l,A,J,K){let ca=null;switch(A){case "log":0!==l&&(ca=
Math.log(l)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(K)&&0!==K&&(ca=l/K*100);break;case "field":Number.isFinite(J)&&0!==J&&(ca=l/J);break;case "natural-log":0<l&&(ca=Math.log(l));break;case "square-root":0<l&&(ca=l**.5)}return ca};f.isNullCountSupported=q;f.processNullValue=O;f.processSummaryStatisticsResult=function(l,A){let J;for(J in l)X.includes(J)&&(Number.isFinite(l[J])||(l[J]=null));if(!A)return l;["avg","stddev","variance"].forEach(K=>{null!=l[K]&&(l[K]=Math.ceil(l[K]))});
return l};f.resolveCBResult=function(l,A){let J=l.classBreaks;const K=J[0].minValue,ca=J[J.length-1].maxValue,v="standard-deviation"===A;J=J.map(w=>{const D=w.label;w={minValue:w.minValue,maxValue:w.maxValue,label:D};if(v&&D){const t=D.match(M).map(h=>+h.trim());2===t.length?(w.minStdDev=t[0],w.maxStdDev=t[1],0>t[0]&&0<t[1]&&(w.hasAvg=!0)):1===t.length&&(D.includes("\x3c")?(w.minStdDev=null,w.maxStdDev=t[0]):D.includes("\x3e")&&(w.minStdDev=t[0],w.maxStdDev=null))}return w});return{minValue:K,maxValue:ca,
classBreakInfos:J,normalizationTotal:l.normalizationTotal}};f.statisticTypes=X;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(f,d,fa,O,q,B,y,m){q=new fa.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});fa=new fa.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});m=function(p){function x(){var F=p.apply(this,arguments)||this;F.breakCount=null;F.classificationField=
null;F.classificationMethod=null;F.normalizationField=null;F.normalizationType=null;F.type="class-breaks-definition";return F}f._inheritsLoose(x,p);f._createClass(x,[{key:"standardDeviationInterval",set:function(F){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",F)}},{key:"definedInterval",set:function(F){"defined-interval"===this.classificationMethod&&this._set("definedInterval",F)}}]);return x}(m);d.__decorate([O.property({json:{write:!0}})],m.prototype,"breakCount",
void 0);d.__decorate([O.property({json:{write:!0}})],m.prototype,"classificationField",void 0);d.__decorate([O.property({type:String,json:{read:q.read,write:q.write}})],m.prototype,"classificationMethod",void 0);d.__decorate([O.property({json:{write:!0}})],m.prototype,"normalizationField",void 0);d.__decorate([O.property({json:{read:fa.read,write:fa.write}})],m.prototype,"normalizationType",void 0);d.__decorate([O.property({value:null,json:{write:!0}})],m.prototype,"standardDeviationInterval",null);
d.__decorate([O.property({value:null,json:{write:!0}})],m.prototype,"definedInterval",null);d.__decorate([O.property()],m.prototype,"type",void 0);return m=d.__decorate([y.subclass("esri.rest.support.ClassBreaksDefinition")],m)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(f,d,fa,O,q,B,y,m,p,x){fa=new fa.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});O=function(F){function N(){var H=F.apply(this,arguments)||this;H.baseSymbol=null;H.colorRamp=null;H.type=null;return H}f._inheritsLoose(N,F);return N}(O.JSONSupport);d.__decorate([q.property({type:x,json:{write:!0}})],O.prototype,"baseSymbol",void 0);d.__decorate([q.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],O.prototype,"colorRamp",void 0);
d.__decorate([q.property({json:{read:fa.read,write:fa.write}})],O.prototype,"type",void 0);return O=d.__decorate([m.subclass("esri.rest.support.ClassificationDefinition")],O)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(f,d,fa,O){fa={key:"type",base:fa,typeMap:{algorithmic:d,multipart:O}};f.fromJSON=function(q){return q&&q.type?"algorithmic"===q.type?d.fromJSON(q):"multipart"===q.type?O.fromJSON(q):null:null};
f.types=fa;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(f,d,fa,O,q,B,y,m,p){var x;p=x=function(F){function N(H){H=
F.call(this,H)||this;H.algorithm=null;H.fromColor=null;H.toColor=null;H.type="algorithmic";return H}f._inheritsLoose(N,F);N.prototype.clone=function(){return new x({fromColor:O.clone(this.fromColor),toColor:O.clone(this.toColor),algorithm:this.algorithm})};return N}(p);d.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0);d.__decorate([q.property({type:fa,json:{type:[B.Integer],write:!0}})],p.prototype,"fromColor",
void 0);d.__decorate([q.property({type:fa,json:{type:[B.Integer],write:!0}})],p.prototype,"toColor",void 0);d.__decorate([q.property({type:["algorithmic"]})],p.prototype,"type",void 0);return p=x=d.__decorate([m.subclass("esri.rest.support.AlgorithmicColorRamp")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(f,d,fa){f.enumeration=function(O,q={}){O=O instanceof d.JSONMap?O:new d.JSONMap(O,q);O={type:q?.ignoreUnknown??!0?
O.apiValues:String,json:{type:O.jsonValues,read:q?.readOnly?!1:{reader:O.read},write:{writer:O.write}}};void 0!==q?.readOnly&&(O.readOnly=!!q.readOnly);void 0!==q?.default&&(O.json.default=q.default);void 0!==q?.name&&(O.json.name=q.name);return fa.property(O)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,d,fa,O,q,B,y){fa=function(m){function p(x){x=m.call(this,x)||this;x.type=null;return x}f._inheritsLoose(p,m);return p}(fa.JSONSupport);d.__decorate([O.property({readOnly:!0,json:{read:!1,write:!0}})],fa.prototype,"type",void 0);return fa=d.__decorate([y.subclass("esri.rest.support.ColorRamp")],fa)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(f,d,fa,O,q,B,y,m){var p;q=p=function(x){function F(N){N=x.call(this,N)||this;N.colorRamps=null;N.type="multipart";return N}f._inheritsLoose(F,x);F.prototype.clone=function(){return new p({colorRamps:fa.clone(this.colorRamps)})};return F}(m);d.__decorate([O.property({type:[y],json:{write:!0}})],q.prototype,"colorRamps",void 0);d.__decorate([O.property({type:["multipart"]})],q.prototype,"type",void 0);return q=p=d.__decorate([B.subclass("esri.rest.support.MultipartColorRamp")],q)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(f,d,fa,O,q,B,y,m,p,x){O=new O.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let F=0;q=function(N){function H(G){G=N.call(this,G)||this;G.id=`sym${F++}`;G.type=null;G.color=new fa([0,0,0,1]);
return G}f._inheritsLoose(H,N);var g=H.prototype;g.readColor=function(G){return G&&null!=G[0]?[G[0],G[1],G[2],G[3]/255]:G};g.collectRequiredFields=function(){var G=f._asyncToGenerator(function*(c,k){});return function(c,k){return G.apply(this,arguments)}}();g.hash=function(){return JSON.stringify(this.toJSON())};g.clone=function(){};return H}(q.JSONSupport);d.__decorate([B.property({type:O.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:O.write}}})],q.prototype,"type",void 0);d.__decorate([B.property({type:fa,
json:{write:{allowNull:!0}}})],q.prototype,"color",void 0);d.__decorate([p.reader("color")],q.prototype,"readColor",null);return q=d.__decorate([x.subclass("esri.symbols.Symbol")],q)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(f,d){function fa(H){const {classificationMethod:g,breakCount:G,normalizationType:c,definedInterval:k}=H.definition,I=[];var M=H.values;if(0===M.length)return[];M=M.sort((K,ca)=>K-ca);var P=M[0],X=M[M.length-1];if("equal-interval"===
g)if(M.length>=G){M=(X-P)/G;H=P;for(var l=1;l<G;l++){var A=Number((P+l*M).toFixed(6));I.push({minValue:H,maxValue:A,label:O(H,A,c)});H=A}I.push({minValue:H,maxValue:X,label:O(H,X,c)})}else M.forEach(K=>{I.push({minValue:K,maxValue:K,label:O(K,K,c)})});else if("natural-breaks"===g){M=q(M);H=B(M.uniqueValues,H.valueFrequency||M.valueFrequency,G);for(l=1;l<G;l++)M.uniqueValues.length>l&&(A=Number(M.uniqueValues[H[l]].toFixed(6)),I.push({minValue:P,maxValue:A,label:O(P,A,c)}),P=A);I.push({minValue:P,
maxValue:X,label:O(P,X,c)})}else if("quantile"===g)if(M.length>=G&&P!==X){H=Math.ceil(M.length/G);l=0;for(A=1;A<G;A++){var J=H+l-1;J>M.length&&(J=M.length-1);0>J&&(J=0);I.push({minValue:P,maxValue:M[J],label:O(P,M[J],c)});P=M[J];l+=H;H=Math.ceil((M.length-l)/(G-A))}I.push({minValue:P,maxValue:X,label:O(P,X,c)})}else for(X=-1,P=0;P<M.length;P++)H=M[P],H!==X&&(X=H,I.push({minValue:X,maxValue:H,label:O(X,H,c)}),X=H);else if("standard-deviation"===g)if(H=p(M),l=x(M,H),0===l)I.push({minValue:M[0],maxValue:M[0],
label:O(M[0],M[0],c)});else{M=m(P,X,G,H,l)*l;l=0;for(A=G;1<=A;A--)J=Number((H-(A-.5)*M).toFixed(6)),I.push({minValue:P,maxValue:J,label:O(P,J,c)}),P=J,l++;A=Number((H+.5*M).toFixed(6));I.push({minValue:P,maxValue:A,label:O(P,A,c)});P=A;l++;for(J=1;J<=G;J++)A=l===2*G?X:Number((H+(J+.5)*M).toFixed(6)),I.push({minValue:P,maxValue:A,label:O(P,A,c)}),P=A,l++}else if("defined-interval"===g){if(!k)return I;X=M[0];M=M[M.length-1];P=Math.ceil((M-X)/k);H=X;for(l=1;l<P;l++)A=Number((X+l*k).toFixed(6)),I.push({minValue:H,
maxValue:A,label:O(H,A,c)}),H=A;I.push({minValue:H,maxValue:M,label:O(H,M,c)})}return I}function O(H,g,G){let c=null;return c=H===g?G&&"percent-of-total"===G?H+"%":H.toString():G&&"percent-of-total"===G?H+"% - "+g+"%":H+" - "+g}function q(H){const g=[],G=[];let c=Number.MIN_VALUE,k=1,I=-1;for(let M=0;M<H.length;M++){const P=H[M];P===c?(k++,G[I]=k):null!==P&&(g.push(P),c=P,k=1,G.push(k),I++)}return{uniqueValues:g,valueFrequency:G}}function B(H,g,G){var c=H.length;const k=[];G>c&&(G=c);for(var I=0;I<
G;I++)k.push(Math.round(I*c/G-1));k.push(c-1);I=y(k,H,g,G);c=I.mean;I=I.sdcm;var M=G,P=0,X=0;let l=0,A=0,J=!0;for(let ca=0;2>ca&&J;ca++){0===ca&&(J=!1);for(var K=0;K<M-1;K++)for(;k[K+1]+1!==k[K+2];)if(k[K+1]+=1,P=F(K,k,H,g),l=P.sbMean,P=P.sbSdcm,X=F(K+1,k,H,g),A=X.sbMean,X=X.sbSdcm,P+X<I[K]+I[K+1])I[K]=P,I[K+1]=X,c[K]=l,c[K+1]=A,J=!0;else{--k[K+1];break}for(K=M-1;0<K;K--)for(;k[K]!==k[K-1]+1;)if(--k[K],P=F(K-1,k,H,g),l=P.sbMean,P=P.sbSdcm,X=F(K,k,H,g),A=X.sbMean,X=X.sbSdcm,P+X<I[K-1]+I[K])I[K-1]=
P,I[K]=X,c[K-1]=l,c[K]=A,J=!0;else{k[K]+=1;break}}J&&(I=y(k,H,g,G));return k}function y(H,g,G,c){let k=[];var I=[],M=[];let P=0;const X=[],l=[];for(var A=0;A<c;A++){var J=F(A,H,g,G);X.push(J.sbMean);l.push(J.sbSdcm);P+=l[A]}J=P;for(A=!0;A||P<J;){A=!1;k=[];for(I=0;I<c;I++)k.push(H[I]);for(M=0;M<c;M++)for(J=H[M]+1;J<=H[M+1];J++)if(I=g[J],0<M&&J!==H[M+1]&&Math.abs(I-X[M])>Math.abs(I-X[M-1]))H[M]=J;else if(M<c-1&&H[M]!==J-1&&Math.abs(I-X[M])>Math.abs(I-X[M+1])){H[M+1]=J-1;break}J=P;P=0;I=[];M=[];for(let K=
0;K<c;K++){I.push(X[K]);M.push(l[K]);const ca=F(K,H,g,G);X[K]=ca.sbMean;l[K]=ca.sbSdcm;P+=l[K]}}if(P>J){for(g=0;g<c;g++)H[g]=k[g],X[g]=I[g],l[g]=M[g];P=J}return{mean:X,sdcm:l}}function m(H,g,G,c,k){H=Math.max(c-H,g-c)/k/G;return 1<=H?1:.5<=H?.5:.25}function p(H){let g=0;for(let G=0;G<H.length;G++)g+=H[G];return g/=H.length}function x(H,g){let G=0;for(let c=0;c<H.length;c++){const k=H[c];G+=(k-g)*(k-g)}G/=H.length;return Math.sqrt(G)}function F(H,g,G,c){var k=0,I=0;for(var M=g[H]+1;M<=g[H+1];M++){const P=
c[M];k+=G[M]*P;I+=P}0>=I&&N.warn("Exception in Natural Breaks calculation");k/=I;I=0;for(M=g[H]+1;M<=g[H+1];M++)I+=c[M]*(G[M]-k)**2;return{sbMean:k,sbSdcm:I}}const N=d.getLogger("esri.rest.support.generateRendererUtils");f.createGenerateRendererClassBreaks=function(H){const {normalizationTotal:g}=H;return{classBreaks:fa(H),normalizationTotal:g}};f.createGenerateRendererUniqueValues=function(H){H=q(H);const g=[],G=H.uniqueValues.length;for(let c=0;c<G;c++){const k=H.uniqueValues[c];g.push({value:k,
count:H.valueFrequency[c],label:k.toString()})}return{uniqueValues:g}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(f){f.makeEdgeCandidate=function(d,fa,O,q,B,y=!1){return{objectId:d,target:fa,distance:O,type:"edge",start:q,end:B,draped:y}};f.makeVertexCandidate=function(d,fa,O){return{objectId:d,target:fa,distance:O,type:"vertex"}};Object.defineProperties(f,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(f,
d,fa,O,q,B,y,m,p,x,F,N,H,g){function G(){G=fa._asyncToGenerator(function*(t,h,C){const {outFields:r,orderByFields:R,groupByFieldsForStatistics:W,outStatistics:S}=t;if(r)for(var ja=0;ja<r.length;ja++)r[ja]=r[ja].trim();if(R)for(ja=0;ja<R.length;ja++)R[ja]=R[ja].trim();if(W)for(ja=0;ja<W.length;ja++)W[ja]=W[ja].trim();if(S)for(ja=0;ja<S.length;ja++)S[ja].onStatisticField&&(S[ja].onStatisticField=S[ja].onStatisticField.trim());t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference);return c(t,h,
C)});return G.apply(this,arguments)}function c(t,h,C){return k.apply(this,arguments)}function k(){k=fa._asyncToGenerator(function*(t,h,C){if(!t)return null;var {where:r}=t;t.where=r=r&&r.trim();if(!r||/^1 *= *1$/.test(r)||h&&h===r)t.where=null;if(!t.geometry)return t;h=yield M(t);t.distance=0;t.units=null;"esriSpatialRelEnvelopeIntersects"===t.spatialRel&&({spatialReference:r}=t.geometry,h=m.getGeometryExtent(h),h.spatialReference=r);if(h){yield g.checkProjectionSupport(h.spatialReference,C);r=h.spatialReference;
h=I(h,C)&&p.isExtent(h)?{spatialReference:r,rings:[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]]}:h;r=(yield x.normalizeCentralMeridian(p.fromJSON(h)))[0];if(q.isNone(r))throw J;const R="quantizationParameters"in t&&t.quantizationParameters?.tolerance||"maxAllowableOffset"in t&&t.maxAllowableOffset||0;h=R&&I(h,C)?{densificationStep:8*R}:void 0;r=r.toJSON();h=yield g.project(r,r.spatialReference,C,h);if(!h)throw J;h.spatialReference=C;t.geometry=h}return t});return k.apply(this,
arguments)}function I(t,h){if(!t)return!1;const C=t.spatialReference;return(p.isExtent(t)||p.isPolygon(t)||p.isPolyline(t))&&!F.equals(C,h)&&!y.canProjectWithoutEngine(C,h)}function M(t){return P.apply(this,arguments)}function P(){P=fa._asyncToGenerator(function*(t){const {distance:h,units:C}=t,r=t.geometry;if(null==h||"vertexAttributes"in r)return r;var R=r.spatialReference;t=C?A.fromJSON(C):B.getUnitString(R);R=R&&(F.isGeographic(R)||F.isWebMercator(R))?r:yield g.checkProjectionSupport(R,F.WGS84).then(()=>
g.project(r,F.WGS84));return(yield X())(R.spatialReference,R,h,t)});return P.apply(this,arguments)}function X(){return l.apply(this,arguments)}function l(){l=fa._asyncToGenerator(function*(){return(yield new Promise((t,h)=>f(["../../../geometry/geometryEngineJSON"],t,h))).geodesicBuffer});return l.apply(this,arguments)}const A=new O.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),
J=Object.freeze({}),K=new H,ca=new H,v=new H,w={esriGeometryPoint:N.convertToPoint,esriGeometryPolyline:N.convertToPolyline,esriGeometryPolygon:N.convertToPolygon,esriGeometryMultipoint:N.convertToMultipoint},D=(t,h)=>"_geVersion"!==t?h:void 0;d.QUERY_ENGINE_EMPTY_RESULT=J;d.cleanFromGeometryEngine=function(t){return t&&"_geVersion"in t?JSON.parse(JSON.stringify(t,D)):t};d.getGeometry=function(t,h,C,r,R,W,S=h,ja=C){const Z=h&&S,qa=C&&ja;r=q.isSome(r)?"coords"in r?r:r.geometry:null;if(q.isNone(r))return null;
if(R)return h=N.generalizeOptimizedGeometry(ca,r,h,C,t,R,S,ja),W&&(h=N.quantizeOptimizedGeometry(v,h,Z,qa,t,W)),w[t]?.(h,Z,qa)??null;if(W)return W=N.quantizeOptimizedGeometry(v,r,h,C,t,W,S,ja),w[t]?.(W,Z,qa)??null;N.removeZMValues(K,r,h,C,S,ja);return w[t]?.(K,Z,qa)??null};d.normalizeQuery=function(t,h,C){return G.apply(this,arguments)};d.normalizeQueryLike=c;d.transformCentroid=function(t,h,C,r=t.hasZ,R=t.hasM){if(q.isNone(h))return null;const W=t.hasZ&&r,S=t.hasM&&R;return C?(t=N.quantizeOptimizedGeometry(v,
h,t.hasZ,t.hasM,"esriGeometryPoint",C,r,R),N.convertToPoint(t,W,S)):N.convertToPoint(h,W,S)};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(f,d,fa,O,q,B,y,m){function p(aa,da,ma){if(aa)for(const za of aa)(aa=(aa=B.getDeepValue(za,da))&&
"function"!==typeof aa&&ma.get(aa))&&B.setDeepValue(za,aa.name,da)}function x(aa,da){if(!aa||!da)return[];L.clear();F(L,aa,da);return Array.from(L).sort()}function F(aa,da,ma){if(ma)if(da?.fields?.length)if(ma.includes("*"))for(const {name:za}of da.fields)aa.add(za);else for(const za of ma)N(aa,da,za);else if(ma.includes("*"))aa.clear(),aa.add("*");else for(const za of ma)null!=za&&aa.add(za)}function N(aa,da,ma){"string"===typeof ma&&(da?(da=da.get(ma))&&aa.add(da.name):aa.add(ma))}function H(aa,
da,ma){return g.apply(this,arguments)}function g(){g=fa._asyncToGenerator(function*(aa,da,ma){if(ma){var {arcadeUtils:za}=yield m.loadArcade();ma=za.extractFieldNames(ma,da?.fields?.map(Da=>Da.name));for(const Da of ma)N(aa,da,Da)}});return g.apply(this,arguments)}function G(aa,da,ma){return c.apply(this,arguments)}function c(){c=fa._asyncToGenerator(function*(aa,da,ma){if(ma&&"1\x3d1"!==ma){const za=(yield new Promise((Da,Ga)=>f(["../../core/sql/WhereClause"],Da,Ga))).WhereClause.create(ma,da);if(!za.isStandardized)throw new O("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:ma});F(aa,da,za.fieldNames)}});return c.apply(this,arguments)}function k(aa,da){for(const ma of aa)if(ma&&ma.valueType&&ma.valueType===da)return ma.name;return null}function I(){I=fa._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield M(da,aa);return Array.from(da).sort()});return I.apply(this,arguments)}function M(aa,da){return P.apply(this,arguments)}function P(){P=fa._asyncToGenerator(function*(aa,da){if(da){var ma=B.getDeepValue("elevationInfo.featureExpressionInfo",
da);if(ma)return ma.collectRequiredFields(aa,da.fieldsIndex)}});return P.apply(this,arguments)}function X(){X=fa._asyncToGenerator(function*(aa,da,ma){if(da&&ma&&"fields"in ma){var za=[];za.push(l(aa,da,ma.popupTemplate));ma.fields&&za.push(...ma.fields.map(function(){var Da=fa._asyncToGenerator(function*(Ga){Ga.onStatisticExpression?H(aa,da.fieldsIndex,Ga.onStatisticExpression.expression):aa.add(Ga.onStatisticField)});return function(Ga){return Da.apply(this,arguments)}}()));yield Promise.all(za)}});
return X.apply(this,arguments)}function l(aa,da,ma){return A.apply(this,arguments)}function A(){A=fa._asyncToGenerator(function*(aa,da,ma){const za=[];ma?.expressionInfos&&za.push(...ma.expressionInfos.map(Da=>H(aa,da.fieldsIndex,Da.expression)));ma=ma?.content;if(Array.isArray(ma))for(const Da of ma)"expression"===Da.type&&Da.expressionInfo&&za.push(H(aa,da.fieldsIndex,Da.expressionInfo.expression));yield Promise.all(za)});return A.apply(this,arguments)}function J(){J=fa._asyncToGenerator(function*(aa,
da,ma){da&&(da.timeInfo&&q.isSome(ma)&&ma.timeExtent&&F(aa,da.fieldsIndex,[da.timeInfo.startField,da.timeInfo.endField]),da.floorInfo&&F(aa,da.fieldsIndex,[da.floorInfo.floorField]),q.isSome(ma)&&q.isSome(ma.where)&&(yield G(aa,da.fieldsIndex,ma.where)))});return J.apply(this,arguments)}function K(){K=fa._asyncToGenerator(function*(aa,da,ma){da&&ma&&(yield Promise.all(ma.map(za=>ca(aa,da,za))))});return K.apply(this,arguments)}function ca(aa,da,ma){return v.apply(this,arguments)}function v(){v=fa._asyncToGenerator(function*(aa,
da,ma){da&&ma&&(ma.valueExpression?yield H(aa,da.fieldsIndex,ma.valueExpression):ma.field&&N(aa,da.fieldsIndex,ma.field))});return v.apply(this,arguments)}function w(){w=fa._asyncToGenerator(function*(aa){if(!aa)return[];const da="timeInfo"in aa&&aa.timeInfo;return da?x(aa.fieldsIndex,[aa.trackIdField,da.startField,da.endField]):[]});return w.apply(this,arguments)}function D(){D=fa._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield t(da,aa);return Array.from(da).sort()});return D.apply(this,
arguments)}function t(aa,da){return h.apply(this,arguments)}function h(){h=fa._asyncToGenerator(function*(aa,da){const {labelingInfo:ma,fieldsIndex:za}=da;ma&&ma.length&&(yield Promise.all(ma.map(Da=>C(aa,za,Da))))});return h.apply(this,arguments)}function C(aa,da,ma){return r.apply(this,arguments)}function r(){r=fa._asyncToGenerator(function*(aa,da,ma){if(ma){var za=ma.getLabelExpression();ma=ma.where;"arcade"===za.type?yield H(aa,da,za.expression):(za=za.expression.match(/{[^}]*}/g))&&za.forEach(Da=>
{N(aa,da,Da.slice(1,-1))});yield G(aa,da,ma)}});return r.apply(this,arguments)}function R(aa){return"number"===typeof aa&&!isNaN(aa)&&isFinite(aa)}function W(aa){return null===aa||R(aa)}function S(aa){return null===aa||T(aa)}function ja(aa){return null!=aa&&"string"===typeof aa}function Z(aa){return null===aa||ja(aa)}function qa(){return!0}function wa(aa,da){let ma;switch(aa.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ma=
aa.nullable?S:T;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ma=aa.nullable?W:R;break;case "string":case "esriFieldTypeString":ma=aa.nullable?Z:ja;break;default:ma=qa}return 1===arguments.length?ma:ma(da)}function xa(aa){return null!=aa&&ha.has(aa.type)}function ya(aa,da){return aa.nullable&&null===da?null:xa(aa)&&!Aa(aa.type,Number(da))?d.NumericRangeValidationError.OUT_OF_RANGE:wa(aa,da)?aa.domain?y.validateDomainValue(aa.domain,da):null:d.TypeValidationError.INVALID_TYPE}
function Aa(aa,da){aa="string"===typeof aa?Ha(aa):aa;if(!aa)return!1;const ma=aa.min,za=aa.max;return aa.isInteger?T(da)&&da>=ma&&da<=za:da>=ma&&da<=za}function Ha(aa){switch(aa){case "esriFieldTypeSmallInteger":case "small-integer":return ka;case "esriFieldTypeInteger":case "integer":return oa;case "esriFieldTypeSingle":case "single":return ra;case "esriFieldTypeDouble":case "double":return sa}}function Ka(aa,da,ma){if(!da||!da.attributes||!aa){if(q.isSome(ma))for(var za of aa??[])ma.add(za);return!0}da=
da.attributes;za=!1;for(const Da of aa)if(!(Da in da))if(za=!0,q.isSome(ma))ma.add(Da);else break;return za}function Na(){Na=fa._asyncToGenerator(function*(aa,da){const ma=new Set;for(const za of da)yield H(ma,aa.fieldsIndex,za);return Array.from(ma).sort()});return Na.apply(this,arguments)}const cb=/^([0-9])/,b=/[^A-Za-z0-9_\u0080-\uffff]/g,n=/_{2,}/g,ea=/^_/,ia=/_$/,na="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
z=["field","normalizationField"],L=new Set,T=(()=>"isInteger"in Number?Number.isInteger:aa=>"number"===typeof aa&&isFinite(aa)&&Math.floor(aa)===aa)(),V=["integer","small-integer","single","double"],ha=new Set([...V,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);d.NumericRangeValidationError=void 0;(d.NumericRangeValidationError||(d.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";d.TypeValidationError=void 0;
(d.TypeValidationError||(d.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ka={min:-32768,max:32767,isInteger:!0},oa={min:-2147483648,max:2147483647,isInteger:!0},ra={min:-3.4E38,max:1.2E38,isInteger:!1},sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};d.collectArcadeFieldNames=H;d.collectElevationFields=M;d.collectFeatureReductionFields=function(aa,da,ma){return X.apply(this,arguments)};d.collectField=N;d.collectFields=F;d.collectFilterFields=function(aa,
da,ma){return J.apply(this,arguments)};d.collectLabelingFields=t;d.collectOrderByInfos=function(aa,da,ma){return K.apply(this,arguments)};d.collectPopupTemplateFields=l;d.doubleRange=sa;d.featureHasFields=function(aa,da){return!Ka(aa,da,null)};d.fixFields=x;d.fixRendererFields=function(aa,da){if(null!=aa&&null!=da)for(const ma of Array.isArray(aa)?aa:[aa])if(p(na,ma,da),"visualVariables"in ma&&ma.visualVariables)for(const za of ma.visualVariables)p(z,za,da)};d.fixTimeInfoFields=function(aa,da){if(null!=
aa&&da?.fields?.length)if("startField"in aa){var ma=da.get(aa.startField);da=da.get(aa.endField);aa.startField=ma?.name??null;aa.endField=da?.name??null}else ma=da.get(aa.startTimeField),da=da.get(aa.endTimeField),aa.startTimeField=ma?.name??null,aa.endTimeField=da?.name??null};d.getDisplayFieldName=function({displayField:aa,fields:da}){if(aa)return aa;if(!da||!da.length)return null;if(!(aa=k(da,"name-or-title")||k(da,"unique-identifier")||k(da,"type-or-category")))a:{for(const ma of da)if(ma&&ma.name&&
(da=ma.name.toLowerCase(),da.includes("name")||da.includes("title"))){aa=ma.name;break a}aa=null}return aa};d.getElevationFields=function(aa){return I.apply(this,arguments)};d.getExpressionFields=function(aa,da){return Na.apply(this,arguments)};d.getFeatureEditFields=function(aa){if(!aa)return[];const da="editFieldsInfo"in aa&&aa.editFieldsInfo;return da?x(aa.fieldsIndex,[da&&da.creatorField,da&&da.creationDateField,da&&da.editorField,da&&da.editDateField]):[]};d.getFeatureGeometryFields=function(aa){if(!aa)return[];
const da=aa.geometryFieldsInfo;return da?x(aa.fieldsIndex,[da.shapeAreaField,da.shapeLengthField]):[]};d.getFieldDefaultValue=function(aa){const da=aa.defaultValue;if(void 0!==da&&wa(aa,da))return da;if(aa.nullable)return null};d.getFieldRange=function(aa){const da=y.getDomainRange(aa.domain);if(da)return da;if(xa(aa))return Ha(aa.type)};d.getLabelingFields=function(aa){return D.apply(this,arguments)};d.getNumericTypeForValue=function(aa){if(!R(aa))return null;if(T(aa)){if(aa>=ka.min&&aa<=ka.max)return"esriFieldTypeSmallInteger";
if(aa>=oa.min&&aa<=oa.max)return"esriFieldTypeInteger"}return aa>=ra.min&&aa<=ra.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};d.getTimeFields=function(aa){return w.apply(this,arguments)};d.integerRange=oa;d.isDateField=function(aa){return null!=aa&&("date"===aa.type||"esriFieldTypeDate"===aa.type)};d.isNumberInRange=Aa;d.isNumericField=xa;d.isRasterPixelValueField=function(aa){return["raster.itempixelvalue","raster.servicepixelvalue"].some(da=>aa.toLowerCase().startsWith(da))};d.isStringField=
function(aa){return null!=aa&&("string"===aa.type||"esriFieldTypeString"===aa.type)};d.isValidFieldValue=function(aa,da){return null===ya(aa,da)};d.isValueMatchingFieldType=wa;d.normalizeFieldName=function(aa){return aa?aa.trim().replace(b,"_").replace(n,"_").replace(ea,"").replace(ia,"").replace(cb,"F$1"):null};d.numericTypes=V;d.packFields=function(aa,da,ma=1){if(!da||!aa)return[];if(da.includes("*"))return["*"];da=x(aa,da);return da.length/aa.fields.length>=ma?["*"]:da};d.populateMissingFields=
Ka;d.rendererFields=na;d.sanitizeNullFieldValue=function(aa){return null==aa||"number"===typeof aa&&isNaN(aa)?null:aa};d.singleRange=ra;d.smallIntegerRange=ka;d.unpackFieldNames=function(aa,da){return q.isNone(da)||q.isNone(aa)?[]:da.includes("*")?(aa.fields??[]).map(ma=>ma.name):da};d.validateFieldValue=ya;d.validationErrorToString=function(aa,da,ma){switch(aa){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ma} is not in the coded domain - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;
case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ma} is out of the range of valid values - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;case d.TypeValidationError.INVALID_TYPE:return`Value ${ma} is not a valid value for the field type - field: ${da.name}, type: ${da.type}, nullable: ${da.nullable}`;case d.NumericRangeValidationError.OUT_OF_RANGE:const {min:za,max:Da}=Ha(da.type);return`Value ${ma} is out of range for the number type - field: ${da.name}, type: ${da.type}, value range is ${za} to ${Da}`}};
d.visualVariableFields=z;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(f){f.DomainValidationError=void 0;(function(d){d.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";d.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(f.DomainValidationError||(f.DomainValidationError={}));f.getDomainRange=function(d){if(d&&"range"===d.type)return{min:"range"in
d?d.range[0]:d.minValue,max:"range"in d?d.range[1]:d.maxValue}};f.validateDomainValue=function(d,fa){switch(d.type){case "range":const O="range"in d?d.range[0]:d.minValue;d="range"in d?d.range[1]:d.maxValue;if(null!=O&&+fa<O||null!=d&&+fa>d)return f.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==d.codedValues||d.codedValues.every(q=>null==q||q.code!==fa))return f.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==d.codedValues||d.codedValues.every(q=>
null==q||q.code!==fa))return f.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(f,d,fa,O,q,B,y,m){function p(){F||(F=fa._asyncToGenerator(function*(){const H=yield new Promise((g,G)=>f(["./arcadeUtils"],
g,G));return{arcade:H.arcade,arcadeUtils:H,Dictionary:H.Dictionary,Feature:H.arcadeFeature}})());return F}const x=B.getLogger("esri.support.arcadeOnDemand");let F;O=(H,g,G)=>N.create(H,g,G,null,["$feature","$view"]);let N=function(){function H(G,c,k,I,M,P,X,l){this.script=G;this.evaluate=M;this.fields=Array.isArray(X)?X:X.fields;this._syntaxTree=I;this._arcade=c;this._arcadeDictionary=k;this._arcadeFeature=P;this._spatialReference=l;this._referencesGeometry=c.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}H.create=function(){var G=fa._asyncToGenerator(function*(c,k,I,M,P,X){const {arcade:l,Feature:A,Dictionary:J}=yield p(),K=m.fromJSON(k);k=null;try{k=l.parseScript(c,X)}catch(C){return x.error(new q("arcade-bad-expression","Failed to parse arcade script",{script:c,error:C})),null}X=P.reduce((C,r)=>({...C,[r]:null}),{});let ca=null;y.isSome(M)&&(ca=new J(M),ca.immutable=!0,X.$config=null);var v=(M=l.scriptUsesGeometryEngine(k))&&
l.enableGeometrySupport();const w=l.scriptUsesFeatureSet(k)&&l.enableFeatureSetSupport(),D=(P=l.scriptIsAsync(k))&&l.enableAsyncSupport();X={vars:X,spatialReference:K,useAsync:!!D};yield Promise.all([v,w,D]);v=new Set;yield l.loadDependentModules(v,k,null,P,M);const t=new J;t.immutable=!1;t.setField("scale",0);const h=l.compileScript(k,X);return new H(c,l,J,k,C=>{"$view"in C&&C.$view&&(t.setField("scale",C.$view.scale),C.$view=t);ca&&(C.$config=ca);return h({vars:C,spatialReference:K})},new A,I,K)});
return function(c,k,I,M,P,X){return G.apply(this,arguments)}}();var g=H.prototype;g.repurposeFeature=function(G){G.geometry&&!G.geometry.spatialReference&&(G.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(G.geometry,G.attributes,{fields:this.fields});return this._arcadeFeature};g.createDictionary=function(){return new this._arcadeDictionary};g.referencesMember=function(G){return this._arcade.referencesMember(this._syntaxTree,G)};g.referencesFunction=
function(G){return this._arcade.referencesFunction(this._syntaxTree,G)};g.referencesGeometry=function(){return this._referencesGeometry};g.referencesScale=function(){return this._referencesScale};g.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return H}();d.ArcadeExpression=N;d.createDictionaryExpression=(H,g,G,c)=>N.create(H,g,G,c,["$feature","$view"]);d.createLabelExpression=(H,g,G)=>N.create(H,g,G,null,["$feature"]);d.createRendererExpression=
O;d.createVVExpression=O;d.loadArcade=p;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H){function g(){return new Promise((I,M)=>f(["../../../geometry/geometryEngineJSON"],I,M))}function G(){G=fa._asyncToGenerator(function*(I,M,P){const {spatialRel:X,geometry:l}=I;if(l){if(null==X||!0!==k.spatialRelationship[X])throw new O("feature-store:unsupported-query","Unsupported query spatial relationship",{query:I});if(m.isValid(l.spatialReference)&&m.isValid(P)){if(null==l||!0!==k.queryGeometry[y.getJsonType(l)])throw new O("feature-store:unsupported-query",
"Unsupported query geometry type",{query:I});if(null==M||!0!==k.layerGeometry[M])throw new O("feature-store:unsupported-query","Unsupported layer geometry type",{query:I});if(I.outSR)return N.checkProjectionSupport(I.geometry&&I.geometry.spatialReference,I.outSR)}}});return G.apply(this,arguments)}const c={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},k={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};d.canQueryWithRBush=function(I){if(y.isExtent(I))return!0;if(y.isPolygon(I)){for(const M of I.rings)if(5!==M.length||M[0][0]!==M[1][0]||M[0][0]!==M[4][0]||M[2][0]!==M[3][0]||M[0][1]!==M[3][1]||M[0][1]!==M[4][1]||M[1][1]!==M[2][1])return!1;return!0}return!1};d.checkSpatialQuerySupport=function(I,M,P){return G.apply(this,
arguments)};d.getSpatialQueryOperator=function(I,M,P,X,l){if(y.isPolygon(M)&&"esriGeometryPoint"===P&&("esriSpatialRelIntersects"===I||"esriSpatialRelContains"===I)){const A=x.convertFromPolygon(new F,M,!1,!1);return Promise.resolve(J=>p.polygonContainsPoint(A,!1,!1,J))}if(y.isPolygon(M)&&"esriGeometryMultipoint"===P){const A=x.convertFromPolygon(new F,M,!1,!1);if("esriSpatialRelContains"===I)return Promise.resolve(J=>p.polygonContainsMultipoint(A,!1,!1,J,X,l))}if(y.isExtent(M)&&"esriGeometryPoint"===
P&&("esriSpatialRelIntersects"===I||"esriSpatialRelContains"===I))return Promise.resolve(A=>q.extentContainsPoint(M,H.getGeometry(P,X,l,A)));if(y.isExtent(M)&&"esriGeometryMultipoint"===P&&"esriSpatialRelContains"===I)return Promise.resolve(A=>q.extentContainsMultipoint(M,H.getGeometry(P,X,l,A)));if(y.isExtent(M)&&"esriSpatialRelIntersects"===I){const A=B.getExtentIntersector(P);return Promise.resolve(J=>A(M,H.getGeometry(P,X,l,J)))}return g().then(A=>{const J=A[c[I]].bind(null,M.spatialReference,
M);return K=>J(H.getGeometry(P,X,l,K))})};Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(f,d){f.extentIntersectsExtent=d.extentIntersectsExtent;f.extentIntersectsMultipoint=d.extentIntersectsMultipoint;f.extentIntersectsPoint=d.extentIntersectsPoint;f.extentIntersectsPolygon=d.extentIntersectsPolygon;f.extentIntersectsPolyline=d.extentIntersectsPolyline;f.extentIntersectsRings=
d.extentIntersectsRings;f.getFeatureExtentIntersector=d.getFeatureExtentIntersector;f.isSelfIntersecting=d.isSelfIntersecting;f.segmentIntersects=d.segmentIntersects;f.getExtentIntersector=function(fa){return"mesh"===fa?d.extentIntersectsExtent:d.getFeatureExtentIntersector(fa)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(f){function d(fa,O,q,B,y){if(!fa)return!1;O=O?q?4:3:q?3:2;
const {coords:m,lengths:p}=fa;q=!1;fa=0;for(const F of p){var x=fa;for(let N=fa,H=fa+F*O;N<H;N+=O){x=N+O;x===H&&(x=fa);const g=m[N],G=m[N+1],c=m[x];x=m[x+1];(G<y&&x>=y||x<y&&G>=y)&&g+(y-G)/(x-G)*(c-g)<B&&(q=!q)}fa+=F*O}return q}f.polygonContainsCoords=d;f.polygonContainsMultipoint=function(fa,O,q,B,y,m){y=y?m?4:3:m?3:2;const {coords:p,lengths:x}=B;if(!x)return!1;for(let F=0,N=0;F<x.length;F++,N+=y)if(!d(fa,O,q,p[N],p[N+1]))return!1;return!0};f.polygonContainsPoint=function(fa,O,q,B){return d(fa,O,
q,B.coords[0],B.coords[1])};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(f){function d(q,B,y,m,p){if(null!=m&&null!=p)return x=>{const F=q.getAttribute(x,B);x=q.getAttribute(x,y);return(null==F||F<=p)&&(null==x||x>=m)};if(null!=m)return x=>{x=q.getAttribute(x,y);return null==x||x>=m};if(null!=p)return x=>{x=q.getAttribute(x,B);return null==x||x<=p}}function fa(q,B,y,m){if(null!=
y&&null!=m&&y===m)return p=>q.getAttribute(p,B)===y;if(null!=y&&null!=m)return p=>{p=q.getAttribute(p,B);return p>=y&&p<=m};if(null!=y)return p=>q.getAttribute(p,B)>=y;if(null!=m)return p=>q.getAttribute(p,B)<=m}function O(){return()=>!1}f.getTimeExtent=function(q,B){if(!q)return null;const y=B.featureAdapter,{startTimeField:m,endTimeField:p}=q;let x=Number.POSITIVE_INFINITY,F=Number.NEGATIVE_INFINITY;if(m&&p)B.forEach(N=>{const H=y.getAttribute(N,m);N=y.getAttribute(N,p);null==H||isNaN(H)||(x=Math.min(x,
H));null==N||isNaN(N)||(F=Math.max(F,N))});else{const N=m||p;B.forEach(H=>{H=y.getAttribute(H,N);null==H||isNaN(H)||(x=Math.min(x,H),F=Math.max(F,H))})}return{start:x,end:F}};f.getTimeOperator=function(q,B,y){if(!B||!q)return null;const {startTimeField:m,endTimeField:p}=q;if(!m&&!p)return null;const {start:x,end:F}=B;return null===x&&null===F?null:void 0===x&&void 0===F?O():m&&p?d(y,m,p,x,F):fa(y,m||p,x,F)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(f,d){function fa(q){return"oid"===q.type||"esriFieldTypeOID"===q.type}function O(q){return"global-id"===q.type||"esriFieldTypeGlobalID"===q.type}return function(){function q(y=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){this.fields=
y;var m=[];for(const p of y)if(y=p&&p.name){const x=y.trim().toLowerCase(),F=d.normalizeFieldName(y).toLowerCase();this._fieldsMap.set(y,p);this._fieldsMap.set(x,p);this._normalizedFieldsMap.set(F,p);m.push(x);"date"===p.type||"esriFieldTypeDate"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):d.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));fa(p)||O(p)||(p.editable=null==p.editable?!0:!!p.editable,p.nullable=null==p.nullable?!0:!!p.nullable)}m.sort();
this.uid=m.join(",")}}var B=q.prototype;B.destroy=function(){this._fieldsMap.clear()};B.has=function(y){return null!=this.get(y)};B.get=function(y){if(y){var m=this._fieldsMap.get(y);if(m)return m;(m=this._fieldsMap.get(y.trim().toLowerCase())??this._normalizedFieldsMap.get(d.normalizeFieldName(y).toLowerCase()))&&this._fieldsMap.set(y,m);return m}};B.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};B.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};B.normalizeFieldName=
function(y){if(y=this.get(y))return y.name??void 0};f._createClass(q,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)fa(y)||O(y)||y.nullable||void 0!==d.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return q}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(f,d,fa,O,q,B,y,m,p,x,F,N,H,g){function G(K){return c.has(K)?c.get(K):"number"===typeof K?K:1}f.TaskPriority=void 0;(function(K){K.RESOURCE_CONTROLLER="schedule";K.SLIDE="slide";K.STREAM_DATA_LOADER="stream loader";K.ELEVATION_QUERY="elevation query";K.TERRAIN_SURFACE="terrain";K.SURFACE_GEOMETRY_UPDATES="surface geometry updates";K.GRAPHICS_CORE="Graphics3D";K.I3S_CONTROLLER="I3S";K.POINT_CLOUD_LAYER="point cloud";K.FEATURE_TILE_FETCHER="feature fetcher";K.OVERLAY="overlay";K.STAGE="stage";
K.GRAPHICS_DECONFLICTOR="graphics deconflictor";K.FILTER_VISIBILITY="Graphics3D filter visibility";K.SCALE_VISIBILITY="Graphics3D scale visibility";K.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";K.POINT_OF_INTEREST_FREQUENT="POI frequent";K.POINT_OF_INTEREST_INFREQUENT="POI infrequent";K.LABELER="labeler";K.FEATURE_QUERY_ENGINE="feature query";K.FEATURE_TILE_TREE="feature tile tree";K.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";K.ELEVATION_ALIGNMENT="elevation alignment";K.TEXT_TEXTURE_ATLAS=
"text texture atlas";K.TEXTURE_UNLOAD="texture unload";K.LINE_OF_SIGHT_TOOL="line of sight tool";K.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";K.ELEVATION_PROFILE="elevation profile";K.SNAPPING="snapping";K.SHADOW_ACCUMULATOR="shadow accumulator";K.CLOUDS_GENERATOR="cloud generator";K[K.TEST_PRIO=1]="TEST_PRIO"})(f.TaskPriority||(f.TaskPriority={}));const c=new Map([[f.TaskPriority.RESOURCE_CONTROLLER,0],[f.TaskPriority.SLIDE,0],[f.TaskPriority.STREAM_DATA_LOADER,0],[f.TaskPriority.ELEVATION_QUERY,
0],[f.TaskPriority.TERRAIN_SURFACE,1],[f.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[f.TaskPriority.GRAPHICS_CORE,2],[f.TaskPriority.I3S_CONTROLLER,2],[f.TaskPriority.POINT_CLOUD_LAYER,2],[f.TaskPriority.FEATURE_TILE_FETCHER,2],[f.TaskPriority.OVERLAY,4],[f.TaskPriority.STAGE,4],[f.TaskPriority.GRAPHICS_DECONFLICTOR,4],[f.TaskPriority.FILTER_VISIBILITY,4],[f.TaskPriority.SCALE_VISIBILITY,4],[f.TaskPriority.FRUSTUM_VISIBILITY,4],[f.TaskPriority.CLOUDS_GENERATOR,4],[f.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[f.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[f.TaskPriority.LABELER,8],[f.TaskPriority.FEATURE_QUERY_ENGINE,8],[f.TaskPriority.FEATURE_TILE_TREE,16],[f.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[f.TaskPriority.ELEVATION_ALIGNMENT,12],[f.TaskPriority.TEXT_TEXTURE_ATLAS,12],[f.TaskPriority.TEXTURE_UNLOAD,12],[f.TaskPriority.LINE_OF_SIGHT_TOOL,16],[f.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[f.TaskPriority.SNAPPING,0],[f.TaskPriority.SHADOW_ACCUMULATOR,30]]),k=x.Milliseconds(6.5),I=x.Milliseconds(1),
M=x.Milliseconds(30),P=x.Milliseconds(1E3/30),X=x.Milliseconds(100);var l;(function(K){let ca=function(){function D(){this._updating=new F.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new B("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new w;this._state=g.RenderState.INTERACTING;this._tasks=new y;this._runQueue=new y;this._load=0;this._idleStateCallbacks=new y;this._idleUpdatesStartFired=!1;this._maxReschedule=32;this._debug=this._forceTask=
!1;this._debugHandle=p.watch(()=>H.SCHEDULER_LOG_SLOW_TASKS,C=>this._debug=C,p.initial);for(const C of Object.keys(f.TaskPriority))this.performanceInfo.tasks.set(f.TaskPriority[C],new B(f.TaskPriority[C]));const h=this;this._test={FRAME_SAFETY_BUDGET:k,INTERACTING_BUDGET:P,IDLE_BUDGET:X,get availableBudget(){return h._budget.budget},usedBudget:0,getBudget:()=>h._budget,setBudget:C=>h._budget=C,updateTask:C=>this._updateTask(C),getState:C=>this._getState(C),getRuntime:C=>this._getRuntime(C),frameTaskTimes:this._frameTaskTimes,
resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var t=D.prototype;t.destroy=function(){this._tasks.toArray().forEach(h=>h.remove());this._tasks.clear();q.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updating.set(!1)};t.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))};t.registerTask=
function(h,C){const r=G(h);C=new v(this,h,C,r);this._tasks.push(C);this.performanceInfo.tasks.has(h)||this.performanceInfo.tasks.set(h,new B(h));return C};t.registerIdleStateCallbacks=function(h,C){const r={idleBegin:h,idleEnd:C};this._idleStateCallbacks.push(r);this.state===g.RenderState.IDLE&&this._idleUpdatesStartFired&&r.idleBegin();const R=this;return{remove:()=>this._removeIdleStateCallbacks(r),set idleBegin(W){R._idleUpdatesStartFired&&(r.idleEnd(),R._state===g.RenderState.IDLE&&W());r.idleBegin=
W},set idleEnd(W){r.idleEnd=W}}};t.updateBudget=function(h){this._test.usedBudget=0;++this._frameNumber;let C=k,r=h.frameDuration,R=I;switch(this.state){case g.RenderState.IDLE:C=x.Milliseconds(0);r=x.Milliseconds(Math.max(X,h.frameDuration));R=M;break;case g.RenderState.INTERACTING:r=x.Milliseconds(Math.max(P,h.frameDuration))}r=x.Milliseconds(r-h.elapsedFrameTime-C);if(this.state!==g.RenderState.IDLE&&r<I&&!this._forceTask)return this._forceTask=!0,!1;r=x.Milliseconds(Math.max(r,R));this._budget.reset(r,
this.state);this._maxReschedule=32;this._updateLoad();return this._schedule()};t.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case g.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(h=>h.idleBegin()));this._runIdle();break;case g.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};t.stopFrame=function(){this._budget.reset(x.Milliseconds(0),
this._state);this._budget.madeProgress()};t._removeIdleStateCallbacks=function(h){this._idleUpdatesStartFired&&h.idleEnd();this._idleStateCallbacks.removeUnordered(h)};t.removeTask=function(h){this._tasks.removeUnordered(h);this._runQueue.removeUnordered(h)};t._updateTask=function(h){this._tasks.forAll(C=>{C.name===h&&C.setPriority(h)})};t._getState=function(h){if(this._runQueue.some(r=>r.name===h))return f.TaskState.SCHEDULED;let C=f.TaskState.IDLE;this._tasks.forAll(r=>{r.name===h&&r.needsUpdate&&
(1>=r.schedulePriority?C=f.TaskState.READY:C!==f.TaskState.READY&&(C=f.TaskState.WAITING))});return C};t._getRuntime=function(h){let C=0;this._tasks.forAll(r=>{r.name===h&&(C+=r.runtime)});return C};t._resetRuntimes=function(){this._tasks.forAll(h=>h.runtime=0)};t._getRunning=function(){const h=new Map;this._tasks.forAll(r=>{r.needsUpdate&&h.set(r.name,(h.get(r.name)||0)+1)});if(0===h.size)return null;let C="";h.forEach((r,R)=>{C=1<r?C+` ${r}x ${R}`:C+` ${R}`});return C};t._runIdle=function(){this._run()};
t._runInteracting=function(){this._run()};t._runAnimating=function(){this._run()};t._updateLoad=function(){const h=this._tasks.reduce((C,r)=>r.needsUpdate?++C:C,0);this._load=.9*this._load+h*(1-.9)};t._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(h=>{if(h.needsUpdate)return!0;h.schedulePriority=h.basePriority;return!1});for(this._tasks.forAll(h=>{0===h.basePriority&&h.needsUpdate&&!this._runQueue.includes(h)&&this._runQueue.unshift(h)});0===this._runQueue.length;){let h=
!1;this._tasks.forAll(C=>{if(C.needsUpdate&&0!==C.schedulePriority&&0!==C.basePriority&&(!C.task.runOncePerFrame||C.lastFrameRun!==this._frameNumber))switch(h=!0,C.schedulePriority){case 1:C.schedulePriority=0;this._runQueue.push(C);break;default:--C.schedulePriority}});if(!h)return this._updating.set(!1),!1;--this._maxReschedule}this._updating.set(!0);return!0};t._run=function(){const h=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var C=this._budget.now();const r=
this._runQueue.pop();this._budget.resetProgress();try{r.task.runTask(this._budget)}catch(R){O.getLogger("esri.views.support.Scheduler").error(`Exception in task "${r.name}"`,R)}r.schedulePriority=r.basePriority;r.lastFrameRun=this._frameNumber;C=this._budget.now()-C;r.runtime+=C;this._frameTaskTimes.set(r.priority,this._frameTaskTimes.get(r.priority)+C);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",r.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");
if(0>=this._budget.remaining){this._updating.set(this._tasks.some(R=>R.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-h);return}}while(this._schedule());this._updating.set(this._tasks.some(r=>r.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-h)};t._startFrameTaskTimes=function(){for(const h of Object.keys(f.TaskPriority))this._frameTaskTimes.set(f.TaskPriority[h],0)};t._recordFrameTaskTimes=function(h){this._frameTaskTimes.forEach((C,r)=>this.performanceInfo.tasks.get(r).record(C));
this.performanceInfo.total.record(h)};d._createClass(D,[{key:"updating",get:function(){return this._updating.get()},set:function(h){this._updating.set(h)}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(h){this._state!==h&&(this._state=h,this.state!==g.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(C=>C.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return D}();
K.Scheduler=ca;let v=function(){function D(h,C,r,R){this._scheduler=h;this.name=C;this._basePriority=R;this.runtime=this.lastFrameRun=0;this._queue=new N.PromiseQueue;this._handles=new fa;this.schedulePriority=this._basePriority;this._task=new F.ObservableValue(q.isSome(r)?r:this._queue);this._handles.add(p.when(()=>this.task.running,()=>h.activate()))}var t=D.prototype;t.remove=function(){this.processQueue(A);this._scheduler.removeTask(this);this.schedule=J.schedule;this.reschedule=J.reschedule;
this._handles.destroy()};t.setPriority=function(h){this.name=h;h=G(h);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=h;this._basePriority=h};t.schedule=function(h,C,r){return this._queue.push(h,C,r)};t.reschedule=function(h,C,r){return this._queue.unshift(h,C,r)};t.processQueue=function(h){this._queue.runTask(h)};d._createClass(D,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},
{key:"priority",get:function(){return this.name},set:function(h){this.setPriority(h)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return D}(),w=function(){function D(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=g.RenderState.IDLE;this._done=!1;this._enabled=!0}var t=D.prototype;t.run=function(h){if(this.done)return!1;!0===h()&&this.madeProgress();return!0};t.madeProgress=function(){this._done=this.elapsed>=this._budget&&
this._enabled};t.reset=function(h,C){this._begin=this.now();this._budget=h;this._state=C;this._done=!1};t.now=function(){return performance.now()};t.resetProgress=function(){this._done=!1};d._createClass(D,[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(h){this._enabled=h}},{key:"remaining",get:function(){return Math.max(this._budget-
this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._done}}]);return D}();K.Budget=w})(l||(l={}));f.TaskState=void 0;(function(K){K.SCHEDULED="s";K.READY="r";K.WAITING="w";K.IDLE="i"})(f.TaskState||(f.TaskState={}));const A=(()=>{const K=new l.Budget;K.enabled=!1;return K})(),J=new (function(){function K(){}var ca=K.prototype;ca.remove=function(){};ca.processQueue=function(){};ca.schedule=function(v,w,D){try{if(m.isAborted(w)){const t=
m.createAbortError();return D?Promise.resolve(D(t)):Promise.reject(t)}return m.when(v(A))}catch(t){return Promise.reject(t)}};ca.reschedule=function(v,w,D){return this.schedule(v,w,D)};return K}());f.ImmediateTask=J;f.getTaskPriority=G;f.newScheduler=function(){return new l.Scheduler};f.noBudget=A;f.taskPriorities=c;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(f,d,fa,O,q,B,y){function m(H,g,G={}){return p(H,g,G,F)}function p(H,g,G={},c){let k=null;const I=G.once?(M,P)=>{c(M)&&(O.removeMaybe(k),g(M,P))}:(M,P)=>{c(M)&&g(M,P)};k=B.watchTracked(H,I,G.sync,G.equals);G.initial&&(H=H(),I(H,H));return k}function x(H,g,G){if(q.isAborted(G))return Promise.reject(q.createAbortError());const c=H();if(g?.(c))return Promise.resolve(c);let k=null;return new Promise((I,M)=>{k=fa.handlesGroup([q.onAbort(G,()=>{k=O.removeMaybe(k);M(q.createAbortError())}),p(H,P=>
{k=O.removeMaybe(k);I(P)},{sync:!1,once:!0},g??F)])})}function F(H){return!0}function N(H){return!!H}f.autorun=y.autorun;f.initial={initial:!0};f.on=function(H,g,G,c={}){function k(){M&&P&&(P.remove(),c.onListenerRemove?.(M),P=M=null)}function I(A){c.once&&c.once&&O.removeMaybe(X);G(A)}let M=null,P=null,X=null;const l=m(H,(A,J)=>{k();d.isEventTarget(A)&&(M=A,P=d.on(A,g,I),c.onListenerAdd?.(A))},{sync:c.sync,initial:!0});return X=fa.makeHandle(()=>{l.remove();k()})};f.once=function(H,g){return x(H,
null,g)};f.pausable=function(H,g,G={}){let c=!1;const k=m(H,(I,M)=>{c||g(I,M)},G);return{remove(){k.remove()},pause(){c=!0},resume(){c=!1}}};f.sync={sync:!0};f.syncAndInitial={sync:!0,initial:!0};f.watch=m;f.when=function(H,g,G={}){return p(H,g,G,N)};f.whenOnce=function(H,g){return x(H,N,g)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],
function(f,d,fa){let O=function(){function q(y){this._observable=new fa.SimpleObservable;this._value=y}var B=q.prototype;B.get=function(){d.trackAccess(this._observable);return this._value};B.set=function(y){y!==this._value&&(this._value=y,this._observable.notify())};return q}();f.ObservableValue=O;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils",
"../../core/accessorSupport/tracking/ObservableValue"],function(f,d,fa,O){let q=function(){function y(){this._tasks=[];this._running=new O.ObservableValue(!1)}var m=y.prototype;m.destroy=function(){this.cancelAll()};m.runTask=function(p){for(;!p.done&&this._process(p);)p.madeProgress()};m.push=function(p,x,F){this._running.set(!0);return new Promise((N,H)=>this._tasks.push(new B(N,H,p,x,F)))};m.unshift=function(p,x,F){this._running.set(!0);return new Promise((N,H)=>this._tasks.unshift(new B(N,H,p,
x,F)))};m._process=function(p){if(0===this._tasks.length)return!1;const x=this._tasks.shift();try{const F=fa.isAborted(x.signal);if(F&&!x.abortCallback)x.reject(fa.createAbortError());else{const N=F?x.abortCallback?.(fa.createAbortError()):x.callback(p);fa.isPromiseLike(N)?N.then(x.resolve,x.reject):x.resolve(N)}}catch(F){x.reject(F)}this._running.set(0<this._tasks.length);return!0};m.cancelAll=function(){const p=fa.createAbortError();for(const x of this._tasks)if(x.abortCallback){const F=x.abortCallback(p);
x.resolve(F)}else x.reject(p);this._tasks.length=0;this._running.set(!1)};d._createClass(y,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return y}(),B=function(y,m,p,x,F){this.resolve=y;this.reject=m;this.callback=p;this.signal=x;this.abortCallback=F};f.PromiseQueue=q;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,d,fa,O,q,B,y){fa=function(m){function p(){var x=m.apply(this,arguments)||this;x.SCHEDULER_LOG_SLOW_TASKS=!1;x.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return x}f._inheritsLoose(p,m);return p}(fa);d.__decorate([O.property()],fa.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([O.property()],fa.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);fa=d.__decorate([y.subclass("esri.views.support.DebugFlags")],fa);return new fa})},"esri/views/support/RenderState":function(){define(["exports"],
function(f){f.RenderState=void 0;var d=f.RenderState||(f.RenderState={});d[d.ANIMATING=0]="ANIMATING";d[d.INTERACTING=1]="INTERACTING";d[d.IDLE=2]="IDLE";Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/number"],function(f,d){function*fa(v,w,D){let t=0;for(;t<=v.length;){var h=v.indexOf(w,t);h=v.substring(t,-1<h?h:void 0);t+=h.length+w.length;if(!D||h.trim())yield h}}function O(v){const w=
v.includes("\r\n")?"\r\n":"\n";return fa(v,w,!0)}function q(v,w){return fa(v,w,!1)}function*B(v,w,D,t=()=>Object.create(null)){var h=O(v);h.next();var C="";v="";let r=0,R=t(),W=0;a:for(const S of h){h=q(S,D);for(const ja of h)if(C+=v+ja,v="",r+=p(ja),0===r%2){if(0<r)if(C=g.exec(C))R[w[W]]=C[1].replace(G,'"'),W++;else{R=t();W=0;C="";r=0;continue a}else R[w[W]]=C,W++;C="";r=0}else v=D;0===r?(yield R,R=t(),W=0):v="\n"}}function y(v,w){v=m(v,w).filter(D=>null!=D);w=v.map(D=>H(D));for(let D=w.length-1;0<=
D;D--)w[D]||(w.splice(D,1),v.splice(D,1));return{names:w,aliases:v}}function m(v,w){if(!v?.length)return[];const D=[];var t="";let h="",C=0;v=q(v,w);for(const r of v)t+=h+r,h="",C+=p(r),0===C%2?(0<C?(t=g.exec(t))&&D.push(t[1].replace(G,'"')):D.push(t),t="",C=0):h=w;return D}function p(v){let w=0,D;for(D=v.indexOf('"',0);0<=D;)w++,D=v.indexOf('"',D+1);return w}function x(v,w,D){w=H(w)?.toLowerCase();D=H(D)?.toLowerCase();const t=v.map(h=>h.toLowerCase());w=w?v[t.indexOf(w)]:null;D=D?v[t.indexOf(D)]:
null;return{longitudeFieldName:w||v[t.indexOf(X.find(h=>t.includes(h)))],latitudeFieldName:D||v[t.indexOf(P.find(h=>t.includes(h)))]}}function F(v){if(!v.length)return"string";const w=/[^+-.,0-9]/;return v.map(D=>{var t=!1;if(""!==D){if(w.test(D))t=!0;else{t=k(D);if(!isNaN(t))return/[.,]/.test(D)||!Number.isInteger(t)||214783647<t||-214783648>t?"double":"integer";if(D.includes("E"))if(t=Number(D),isNaN(t))if(D.includes(","))if(D=D.replace(",","."),t=Number(D),isNaN(t))t=!0;else return"double";else t=
!0;else return"double";else t=!0}return t&&!/^[-]?\d*[.,]?\d*$/.test(D)&&N(new Date(D),D)?"date":"string"}}).reduce((D,t)=>{if(void 0===D)return t;if(void 0===t)return D;if(D===t)return t;if("string"===D||"string"===t)return"string";if("double"===D||"double"===t)return"double"})}function N(v,w){if(!v||"[object Date]"!==Object.prototype.toString.call(v)||isNaN(v.getTime()))return!1;v=!0;if(!M&&/\d+\W*$/.test(w)&&(w=w.match(/[a-zA-Z]{2,}/))){v=!1;let D=0;for(;!v&&D<=w.length;)v=!I.test(w[D]),D++;v=
!v}return v}function H(v){return v?v.trim().replace(A,"_").replace(J,"_").replace(K,"").replace(ca,"").replace(l,"F$1"):null}const g=/^\s*"([\S\s]*)"\s*$/,G=/""/g,c=[","," ",";","|","\t"],k=function(){const v=d._parseInfo(),w=new RegExp("^"+v.regexp+"$"),D=new RegExp("["+v.group+"\\s\\xa0]","g"),t=v.factor;return h=>{h=w.exec(h);v.factor=t;if(!h)return NaN;let C=h[1];if(!h[1]){if(!h[2])return NaN;C=h[2];v.factor*=-1}C=C.replace(D,"").replace(v.decimal,".");return+C*v.factor}}(),I=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
M=Number.isNaN((new Date("technology 10")).getTime()),P="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),X="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" "),l=/^([0-9])/,A=/[^A-Za-z0-9_\u0080-\uffff]/g,J=/_{2,}/g,K=/^_/,ca=/_$/;f.extractFieldNamesAndAliasesFromRow=y;f.inferDelimiterAndLocationInfo=function(v,w,D){v=v.trim();w=w?.trim();var t=[],h=Array.from(new Set([D?.delimiter,...c])).filter(C=>null!=C);for(const C of h){h=m(v,C).length;
const r=m(w,C).length??h;1<h&&t.push({weight:Math.min(h,r),delimiter:C})}w=t.sort(({weight:C},{weight:r})=>r-C).map(({delimiter:C})=>C);for(const C of w)if(t=y(v,C).names,t=x(t,D?.longitudeField,D?.latitudeField),t.longitudeFieldName&&t.latitudeFieldName)return{delimiter:C,locationInfo:t};return{delimiter:w[0],locationInfo:null}};f.inferFieldType=F;f.inferFields=function(v,w,D,t,h){const C=[];w=B(v,D,w);v=[];for(var r of w){if(10===v.length)break;v.push(r)}for(r=0;r<D.length;r++){const W=D[r];w=t[r];
if(W===h.longitudeFieldName||W===h.latitudeFieldName)C.push({name:W,type:"esriFieldTypeDouble",alias:w});else{var R=v.map(ja=>ja[W]);let S=void 0;switch(F(R)){case "integer":R="esriFieldTypeInteger";break;case "double":R="esriFieldTypeDouble";break;case "date":R="esriFieldTypeDate";S=36;break;default:R="esriFieldTypeString",S=255}C.push({name:W,type:R,alias:w,length:S})}}return C};f.isValidDate=N;f.normalizeFieldName=H;f.parseNumber=k;f.parseRows=B;f.readRowParts=q;f.readRows=O;f.splitSingleRow=m;
Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(f,d,fa){function O(F){F||(F=fa.getLocale());let N=F in m;if(!N){const c=F.split("-");1<c.length&&c[0]in m&&(F=c[0],N=!0);N||(F="en")}const [H,g,G="#,##0.###"]=m[F];return{decimal:H,group:g,pattern:G}}function q(F){F=F||{};var N=O(F.locale);const H=F.pattern||N.pattern,g=N.group,G=N.decimal;let c=1;if(H.includes("%"))c/=100;
else if(H.includes("\u2030"))c/=1E3;else if(H.includes("\u00a4"))throw Error("currency notation not supported");N=H.split(";");1===N.length&&N.push("-"+N[0]);return{regexp:x(N,k=>{k="(?:"+d.escapeRegExpString(k,".")+")";return k.replace(p,I=>{const M={signed:!1,separator:F.strict?g:[g,""],fractional:F.fractional,decimal:G,exponent:!1};I=I.split(".");let P=F.places;1===I.length&&1!==c&&(I[1]="###");1===I.length||0===P?M.fractional=!1:(void 0===P&&(P=F.pattern?I[1].lastIndexOf("0")+1:Infinity),P&&null==
F.fractional&&(M.fractional=!0),!F.places&&P<I[1].length&&(P+=","+I[1].length),M.places=P);I=I[0].split(",");1<I.length&&(M.groupSize=I.pop().length,1<I.length&&(M.groupSize2=I.pop().length));return"("+B(M)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:g,decimal:G,factor:c}}function B(F){F=F||{};"places"in F||(F.places=Infinity);"string"!==typeof F.decimal&&(F.decimal=".");"fractional"in F&&!/^0/.test(String(F.places))||(F.fractional=[!0,!1]);"exponent"in F||(F.exponent=[!0,!1]);"eSigned"in F||
(F.eSigned=[!0,!1]);var N=y(F);const H=x(F.fractional,G=>{let c="";G&&0!==F.places&&(c="\\"+F.decimal,c=Infinity===F.places?"(?:"+c+"\\d+)?":c+("\\d{"+F.places+"}"));return c},!0),g=x(F.exponent,G=>G?"([eE]"+y({signed:F.eSigned})+")":"");N+=H;H&&(N="(?:(?:"+N+")|(?:"+H+"))");return N+g}function y(F){F=F||{};"signed"in F||(F.signed=[!0,!1]);"separator"in F?"groupSize"in F||(F.groupSize=3):F.separator="";const N=x(F.signed,g=>g?"[-+]":"",!0),H=x(F.separator,g=>{if(!g)return"(?:\\d+)";g=d.escapeRegExpString(g);
" "===g?g="\\s":"\u00a0"===g&&(g="\\s\\xa0");const G=F.groupSize,c=F.groupSize2;return c?(g="(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+g+"]\\d{"+c+"})*["+g+"]\\d{"+G+"})",0<G-c?"(?:"+g+"|(?:0|[1-9]\\d{0,"+(G-1)+"}))":g):"(?:0|[1-9]\\d{0,"+(G-1)+"}(?:["+g+"]\\d{"+G+"})*)"},!0);return N+H}const m={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],
fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},
p=/[#0,]*[#0](?:\.0*#*)?/,x=(F,N,H)=>{if(!(F instanceof Array))return N(F);const g=[];for(let G=0;G<F.length;G++)g.push(N(F[G]));F=g.join("|");return"("+(H?"?:":"")+F+")"};f._parseInfo=q;f.format=function(F,N){N={...N};var H=O(N.locale);N.customs=H;H=N.pattern||H.pattern;if(isNaN(F)||Infinity===Math.abs(F))return null;var g=F;var G=N||{};var c=G.customs.group,k=G.customs.decimal;H=H.split(";");F=H[0];N=H[0>g?1:0]||"-"+F;if(N.includes("%"))g*=100;else if(N.includes("\u2030"))g*=1E3;else{if(N.includes("\u00a4"))throw Error("currency notation not supported");
if(N.includes("E"))throw Error("exponential notation not supported");}H=p;var I=F.match(H);if(!I)throw Error("unable to find a number expression in pattern: "+N);!1===G.fractional&&(G.places=0);F=N.replace;I=I[0];G=G={decimal:k,group:c,places:G.places,round:G.round};!0===G.places&&(G.places=0);Infinity===G.places&&(G.places=6);k=I.split(".");var M="string"===typeof G.places&&G.places.indexOf(",");I=G.places;M?I=G.places.substring(M+1):0<=I||(I=(k[1]||[]).length);0>G.round||(g=Number(g.toFixed(Number(I))));
c=String(Math.abs(g)).split(".");g=c[1]||"";k[1]||G.places?(M&&(G.places=G.places.substring(0,M)),M=void 0!==G.places?G.places:k[1]&&k[1].lastIndexOf("0")+1,M>g.length&&(c[1]=g.padEnd(Number(M),"0")),I<g.length&&(c[1]=g.substr(0,Number(I)))):c[1]&&c.pop();g=k[0].replace(",","");I=g.indexOf("0");-1!==I&&(I=g.length-I,I>c[0].length&&(c[0]=c[0].padStart(I,"0")),g.includes("#")||(c[0]=c[0].substr(c[0].length-I)));g=k[0].lastIndexOf(",");let P;if(-1!==g){var X=k[0].length-g-1;k=k[0].substr(0,g);g=k.lastIndexOf(",");
-1!==g&&(P=k.length-g-1)}k=[];for(g=c[0];g;)I=g.length-X,k.push(0<I?g.substr(I):g),g=0<I?g.slice(0,I):"",P&&(X=P,P=void 0);c[0]=k.reverse().join(G.group||",");X=c.join(G.decimal||".");return F.call(N,H,X)};f.getCustoms=O;f.parse=function(F,N){N=q(N);F=(new RegExp("^"+N.regexp+"$")).exec(F);if(!F)return NaN;let H=F[1];if(!F[1]){if(!F[2])return NaN;H=F[2];N.factor*=-1}H=H.replace(new RegExp("["+N.group+"\\s\\xa0]","g"),"").replace(N.decimal,".");return Number(H)*N.factor};f.regexp=function(F){return q(F).regexp};
Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/intl/locale":function(){define(["exports"],function(f){function d(){return m??globalThis.navigator?.language??"en"}function fa(){void 0===y&&(y=d());return y}function O(N=fa()){return/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(N)?.[1].toLowerCase()}function q(){const N=B??d();y!==N&&(y=N,[...F].forEach(H=>{H.call(null,N)}),[...x].forEach(H=>{H.call(null,N)}))}let B=void 0,y=void 0;const m=globalThis.esriConfig?.locale??
globalThis.dojoConfig?.locale,p={he:!0,ar:!0},x=[],F=[];globalThis.addEventListener?.("languagechange",q);f.beforeLocaleChange=function(N){F.push(N);return{remove(){x.splice(F.indexOf(N),1)}}};f.getDefaultLocale=d;f.getLanguage=O;f.getLocale=fa;f.onLocaleChange=function(N){x.push(N);return{remove(){x.splice(x.indexOf(N),1)}}};f.prefersRTL=function(N=fa()){N=O(N);return void 0!==N&&(p[N]||!1)};f.setLocale=function(N){B=N?N:void 0;q()};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(f,d,fa,O,q){const B=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let y=1;f.createCapabilities=function(m,p){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:m},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:p,supportsExceedsLimitStatistics:!0},query:O.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:p,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};f.createDefaultAttributesFunction=function(m,p){if(d("esri-csp-restrictions"))return()=>({[p]:null,...m});try{let x=`this.${p} = null;`;for(const N in m){const H=B.test(N)?`.${N}`:`["${N}"]`;x+=`this${H} = ${JSON.stringify(m[N])};`}const F=
(new Function(`\n      return class AttributesClass$${y++} {\n        constructor() {\n          ${x};\n        }\n      }\n    `))();return()=>new F}catch(x){return()=>({[p]:null,...m})}};f.createDefaultTemplate=function(m={}){return[{name:"New Feature",description:"",prototype:{attributes:fa.clone(m)}}]};f.createDrawingInfo=function(m){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===m||"esriGeometryMultipoint"===m?q.defaultPointSymbolJSON:"esriGeometryPolyline"===m?q.defaultPolylineSymbolJSON:
q.defaultPolygonSymbolJSON}}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(f){const d=[252,146,31,255],fa={type:"esriSMS",style:"esriSMSCircle",size:6,color:d,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},O={type:"esriSLS",style:"esriSLSSolid",width:.75,color:d};f.defaultColor=d;f.defaultOutlineColor=[153,153,153,255];f.defaultPointSymbolJSON=
fa;f.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};f.defaultPolylineSymbolJSON=O;f.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};f.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",
color:[0,0,0,255],outline:null,size:10.5};f.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};f.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../geometry/SpatialReference".split(" "),function(f,
d,fa,O,q,B,y,m,p,x,F,N,H,g,G,c,k,I,M,P,X,l){function A(w,D){var t=D.parsingOptions||{};const h={delimiter:t.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:t.latitudeField,longitudeFieldName:t.longitudeField}},C=h.layerDefinition={name:m.getFilename(D.url,K)||"csv",drawingInfo:J,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:t.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,
spatialReference:t.spatialReference||{wkid:102100}}};var r=I.readRows(w);D=r.next().value?.trim();r=r.next().value?.trim();if(!D)throw new q("csv-layer:empty-csv","CSV is empty",{csv:w});const {delimiter:R,locationInfo:W}=I.inferDelimiterAndLocationInfo(D,r,t);if(!R)throw new q("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:D,secondLine:r,parsingOptions:t});if(!W)throw new q("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:D,secondLine:r,parsingOptions:t});h.locationInfo=W;h.delimiter=R;const {names:S,aliases:ja}=I.extractFieldNamesAndAliasesFromRow(D,R);w=I.inferFields(w,h.delimiter,S,ja,h.locationInfo);if(t.fields?.length){t=new P(t.fields);for(var Z of w)(D=t.get(Z.name))&&Object.assign(Z,D)}w.some(qa=>"esriFieldTypeOID"===qa.type?(C.objectIdField=qa.name,!0):!1)||(Z={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},C.objectIdField=Z.name,w.unshift(Z));C.fields=w;t=
new P(C.fields);h.locationInfo&&(h.locationInfo.latitudeFieldName=t.get(h.locationInfo.latitudeFieldName).name,h.locationInfo.longitudeFieldName=t.get(h.locationInfo.longitudeFieldName).name);C.timeInfo&&(Z=C.timeInfo,Z.startTimeField&&((w=t.get(Z.startTimeField))?(Z.startTimeField=w.name,w.type="esriFieldTypeDate"):Z.startTimeField=null),Z.endTimeField&&((w=t.get(Z.endTimeField))?(Z.endTimeField=w.name,w.type="esriFieldTypeDate"):Z.endTimeField=null),Z.trackIdField&&(t=t.get(Z.trackIdField),Z.trackIdField=
t?t.name:null),Z.startTimeField||Z.endTimeField||(C.timeInfo=null));return h}const J=M.createDrawingInfo("esriGeometryPoint"),K=["csv"],ca=[0,0];let v=function(w,D){this.x=w;this.y=D};return function(){function w(){var t=this;this._queryEngine=null;this._snapshotFeatures=function(){var h=f._asyncToGenerator(function*(C){C=yield t._fetch(C);return t._createFeatures(C)});return function(C){return h.apply(this,arguments)}}()}var D=w.prototype;D.destroy=function(){this._queryEngine?.destroy();this._queryEngine=
null};D.load=function(){var t=f._asyncToGenerator(function*(h,C={}){this._loadOptions=h;[C]=yield Promise.all([this._fetch(C.signal),this._checkProjection(h?.parsingOptions?.spatialReference)]);h=A(C,h);this._locationInfo=h.locationInfo;this._delimiter=h.delimiter;this._queryEngine=this._createQueryEngine(h);C=yield this._createFeatures(C);this._queryEngine.featureStore.addMany(C);h.layerDefinition.extent=this._queryEngine.fullExtent;if(h.layerDefinition.timeInfo){const {start:r,end:R}=this._queryEngine.timeExtent;
h.layerDefinition.timeInfo.timeExtent=[r,R]}return h});return function(h){return t.apply(this,arguments)}}();D.applyEdits=function(){var t=f._asyncToGenerator(function*(){throw new q("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");});return function(){return t.apply(this,arguments)}}();D.queryFeatures=function(){var t=f._asyncToGenerator(function*(h={},C={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(h,C.signal)});return function(){return t.apply(this,
arguments)}}();D.queryFeatureCount=function(){var t=f._asyncToGenerator(function*(h={},C={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(h,C.signal)});return function(){return t.apply(this,arguments)}}();D.queryObjectIds=function(){var t=f._asyncToGenerator(function*(h={},C={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(h,C.signal)});return function(){return t.apply(this,arguments)}}();D.queryExtent=function(){var t=f._asyncToGenerator(function*(h=
{},C={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(h,C.signal)});return function(){return t.apply(this,arguments)}}();D.querySnapping=function(){var t=f._asyncToGenerator(function*(h,C={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(h,C.signal)});return function(h){return t.apply(this,arguments)}}();D.refresh=function(){var t=f._asyncToGenerator(function*(h){this._loadOptions.customParameters=h;this._snapshotTask?.abort();
this._snapshotTask=O.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(C=>{this._queryEngine.featureStore.clear();C&&this._queryEngine.featureStore.addMany(C)},C=>{this._queryEngine.featureStore.clear();y.isAbortError(C)||B.getLogger("esri.layers.CSVLayer").error(new q("csv-layer:refresh","An error occurred during refresh",{error:C}))});yield this._waitSnapshotComplete();return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(h){return t.apply(this,
arguments)}}();D._waitSnapshotComplete=function(){var t=f._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return t.apply(this,arguments)}}();D._fetch=function(){var t=f._asyncToGenerator(function*(h){const {url:C,customParameters:r}=this._loadOptions;if(!C)throw new q("csv-layer:invalid-source","url not defined");const R=m.urlToObject(C);return(yield fa(R.path,{query:{...R.query,
...r},responseType:"text",signal:h})).data});return function(h){return t.apply(this,arguments)}}();D._createQueryEngine=function(t){const {objectIdField:h,fields:C,extent:r,timeInfo:R}=t.layerDefinition;t=new G({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new k.QueryEngine({fields:C,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:R,objectIdField:h,spatialReference:r.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:t})};D._createFeatures=function(){var t=f._asyncToGenerator(function*(h){const {latitudeFieldName:C,
longitudeFieldName:r}=this._locationInfo,{objectIdField:R,fieldsIndex:W,spatialReference:S}=this._queryEngine;let ja=[];const Z=[];var qa=W.fields.filter(Ha=>Ha.name!==R).map(Ha=>Ha.name),wa=0,xa={};for(const Ha of W.fields)if("esriFieldTypeOID"!==Ha.type&&"esriFieldTypeGlobalID"!==Ha.type){const Ka=X.getFieldDefaultValue(Ha);void 0!==Ka&&(xa[Ha.name]=Ka)}h=I.parseRows(h,qa,this._delimiter,M.createDefaultAttributesFunction(xa,R));for(var ya of h)if(h=this._parseCoordinateValue(ya[C]),qa=this._parseCoordinateValue(ya[r]),
null!=qa&&null!=h&&!isNaN(h)&&!isNaN(qa)){ya[C]=h;ya[r]=qa;for(var Aa in ya)Aa!==C&&Aa!==r&&(W.isDateField(Aa)?(xa=new Date(ya[Aa]),ya[Aa]=I.isValidDate(xa,ya[Aa])?xa.getTime():null):W.isNumericField(Aa)&&(xa=I.parseNumber(ya[Aa]),isNaN(xa)?ya[Aa]=null:ya[Aa]=xa));ya[R]=wa;wa++;ja.push(new v(qa,h));Z.push(ya)}if(!F.equals({wkid:4326},S))if(F.isWebMercator(S))for(const Ha of ja)[Ha.x,Ha.y]=N.lngLatToXY(Ha.x,Ha.y,ca);else ja=p.projectMany(x.jsonAdapter,ja,l.WGS84,S,null,null);wa=[];for(ya=0;ya<ja.length;ya++){const {x:Ha,
y:Ka}=ja[ya];Aa=Z[ya];Aa[R]=ya+1;wa.push(new H.OptimizedFeature(new g([],[Ha,Ka]),Aa,null,Aa[R]))}return wa});return function(h){return t.apply(this,arguments)}}();D._parseCoordinateValue=function(t){if(null==t||""===t)return null;let h=I.parseNumber(t);if(isNaN(h)||181<Math.abs(h))h=parseFloat(t);return h};D._checkProjection=function(){var t=f._asyncToGenerator(function*(h){try{yield c.checkProjectionSupport(F.WGS84,h)}catch{throw new q("csv-layer:projection-not-supported","Projection not supported");
}});return function(h){return t.apply(this,arguments)}}();return w}()});