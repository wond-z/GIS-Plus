// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./arrayUtils ./accessorSupport/ensureType ./accessorSupport/decorators/subclass".split(" "),function(g,c,ha,O,t,A,z,n,p,w){function P(){P=c._asyncToGenerator(function*(D,G,N){return(yield A.eachAlways(D.map((f,h)=>G.apply(N,[f,h])))).map(f=>f.value)});return P.apply(this,arguments)}function Y(D){return{ok:!0,
value:D}}function K(D){return{ok:!1,error:D}}function k(D){return t.isSome(D)&&!0===D.ok?D.value:null}function I(D){return t.isSome(D)&&!1===D.ok?D.error:null}function d(){d=c._asyncToGenerator(function*(D){if(t.isNone(D))return{ok:!1,error:Error("no promise provided")};try{return Y(yield D)}catch(G){return K(G)}});return d.apply(this,arguments)}function l(){l=c._asyncToGenerator(function*(D){try{return Y(yield D)}catch(G){return A.throwIfAbortError(G),K(G)}});return l.apply(this,arguments)}let L=
function(D){function G(f,h){var r=D.call(this,{})||this;r._result=null;r._abortHandle=null;r.abort=()=>{r._abortController=t.abortMaybe(r._abortController)};r.remove=r.abort;r._abortController=new AbortController;const {signal:x}=r._abortController;r.promise=f(x);r.promise.then(T=>{r._result=Y(T);r._cleanup()},T=>{r._result=K(T);r._cleanup()});r._abortHandle=A.onAbort(h,r.abort);return r}c._inheritsLoose(G,D);var N=G.prototype;N.normalizeCtorArgs=function(){return{}};N.destroy=function(){this.abort()};
N._cleanup=function(){this._abortHandle=t.removeMaybe(this._abortHandle);this._abortController=null};c._createClass(G,[{key:"value",get:function(){return k(this._result)}},{key:"error",get:function(){return I(this._result)}},{key:"finished",get:function(){return t.isSome(this._result)}}]);return G}(O);ha.__decorate([z.property()],L.prototype,"value",null);ha.__decorate([z.property()],L.prototype,"error",null);ha.__decorate([z.property()],L.prototype,"finished",null);ha.__decorate([z.property()],L.prototype,
"promise",void 0);ha.__decorate([z.property()],L.prototype,"_result",void 0);L=ha.__decorate([w.subclass("esri.core.asyncUtils.ReactiveTask")],L);g.assertResult=function(D){if(!0===D.ok)return D.value;throw D.error;};g.createTask=function(D,G){return new L(D,G)};g.forEach=function(D,G,N){return A.eachAlways(D.map((f,h)=>G.apply(N,[f,h])))};g.makeResultError=K;g.makeResultOk=Y;g.map=function(D,G,N){return P.apply(this,arguments)};g.result=function(D){return d.apply(this,arguments)};g.resultError=I;
g.resultOrAbort=function(D){return l.apply(this,arguments)};g.resultValue=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(g,c,ha,O,t,A,z,n){function p(y,J){return y?J?4:3:J?3:2}function w(y,J,S,V){if(y){if(S)return J&&
V?m:bb;if(J&&V)return b}else if(J&&V)return bb;return Na}function P({scale:y,translate:J},S){return Math.round((S-J[0])/y[0])}function Y({scale:y,translate:J},S){return Math.round((J[1]-S)/y[1])}function K({scale:y,translate:J},S,V){return S*y[V]+J[V]}function k(y){y=y.coords;return{x:y[0],y:y[1]}}function I(y,J){y.coords[0]=J.x;y.coords[1]=J.y;return y}function d(y){y=y.coords;return{x:y[0],y:y[1],z:y[2]}}function l(y,J){y.coords[0]=J.x;y.coords[1]=J.y;y.coords[2]=J.z;return y}function L(y){y=y.coords;
return{x:y[0],y:y[1],m:y[2]}}function D(y,J){y.coords[0]=J.x;y.coords[1]=J.y;y.coords[2]=J.m;return y}function G(y){y=y.coords;return{x:y[0],y:y[1],z:y[2],m:y[3]}}function N(y,J){y.coords[0]=J.x;y.coords[1]=J.y;y.coords[2]=J.z;y.coords[3]=J.m;return y}function f(y,J){return y&&J?N:y?l:J?D:I}function h(y,J,S,V,fa){S=f(S,V);for(const {geometry:ja,attributes:na}of J)J=O.isSome(ja)?S(new n,ja):null,y.push(new A.OptimizedFeature(J,na,null,fa?na[fa]:void 0));return y}function r(y,J,S,V){for(const {geometry:fa,
attributes:ja}of J)y.push({attributes:ja,geometry:O.isSome(fa)?x(fa,S,V):null});return y}function x(y,J,S){if(O.isNone(y))return null;const V=p(J,S),fa=[];for(let ja=0;ja<y.coords.length;ja+=V){const na=[];for(let ra=0;ra<V;ra++)na.push(y.coords[ja+ra]);fa.push(na)}return J?S?{points:fa,hasZ:J,hasM:S}:{points:fa,hasZ:J}:S?{points:fa,hasM:S}:{points:fa}}function T(y,J,S,V,fa){S=p(S,V);for(const {geometry:ja,attributes:na}of J)J=O.isSome(ja)?C(new n,ja,S):null,y.push(new A.OptimizedFeature(J,na,null,
fa?na[fa]:void 0));return y}function C(y,J,S=p(J.hasZ,J.hasM)){y.lengths[0]=J.points.length;const V=y.coords;let fa=0;for(const ja of J.points)for(J=0;J<S;J++)V[fa++]=ja[J];return y}function B(y,J,S){if(!y)return null;const V=p(J,S),{coords:fa,lengths:ja}=y;y=[];let na=0;for(const ra of ja){const sa=[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=0;ma<V;ma++)da.push(fa[na++]);sa.push(da)}y.push(sa)}return J?S?{paths:y,hasZ:J,hasM:S}:{paths:y,hasZ:J}:S?{paths:y,hasM:S}:{paths:y}}function M(y,J,
S,V,fa){S=p(S,V);for(const {geometry:ja,attributes:na}of J)J=O.isSome(ja)?F(new n,ja,S):null,y.push(new A.OptimizedFeature(J,na,null,fa?na[fa]:void 0));return y}function F(y,J,S=p(J.hasZ,J.hasM)){const {lengths:V,coords:fa}=y;let ja=0;for(const na of J.paths){for(const ra of na)for(J=0;J<S;J++)fa[ja++]=ra[J];V.push(na.length)}return y}function u(y,J,S){if(!y)return null;const V=p(J,S),{coords:fa,lengths:ja}=y;y=[];let na=0;for(const ra of ja){const sa=[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=
0;ma<V;ma++)da.push(fa[na++]);sa.push(da)}y.push(sa)}return J?S?{rings:y,hasZ:J,hasM:S}:{rings:y,hasZ:J}:S?{rings:y,hasM:S}:{rings:y}}function H(y,J,S,V,fa){for(const {geometry:ja,centroid:na,attributes:ra}of J){J=O.isSome(ja)?q(new n,ja,S,V):null;const sa=fa?ra[fa]:void 0;O.isSome(na)?y.push(new A.OptimizedFeature(J,ra,I(new n,na),sa)):y.push(new A.OptimizedFeature(J,ra,null,sa))}return y}function q(y,J,S=J.hasZ,V=J.hasM){R(y,J.rings,S,V);return y}function R(y,J,S,V){S=p(S,V);const {lengths:fa,coords:ja}=
y;V=0;Ba(y);for(const na of J){for(const ra of na)for(J=0;J<S;J++)ja[V++]=ra[J];fa.push(na.length)}return y}function Z(y,J,S,V,fa,ja){Ca(y);if(!S){for(const na of J)y.push(new A.OptimizedFeature(null,na.attributes,null,ja?na.attributes[ja]:void 0));return y}switch(S){case "esriGeometryPoint":return h(y,J,V,fa,ja);case "esriGeometryMultipoint":return T(y,J,V,fa,ja);case "esriGeometryPolyline":return M(y,J,V,fa,ja);case "esriGeometryPolygon":return H(y,J,V,fa,ja);default:Ja.error("convertToFeatureSet:unknown-geometry",
new c(`Unable to parse unknown geometry type '${S}'`)),Ca(y)}return y}function W(y,J,S,V){y=y&&("coords"in y?y:y.geometry);if(O.isNone(y))return null;switch(J){case "esriGeometryPoint":return J=k,S&&V?J=G:S?J=d:V&&(J=L),J(y);case "esriGeometryMultipoint":return x(y,S,V);case "esriGeometryPolyline":return B(y,S,V);case "esriGeometryPolygon":return u(y,S,V);default:return Ja.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${J}'`)),null}}function ka(y,J,S,V,fa){Ca(y);
if(O.isNone(S)){for(const na of J)y.push({attributes:na.attributes});return y}switch(S){case "esriGeometryPoint":S=k;V&&fa?S=G:V?S=d:fa&&(S=L);for(var ja of J){const {geometry:na,attributes:ra}=ja;V=O.isSome(na)?S(na):null;y.push({attributes:ra,geometry:V})}break;case "esriGeometryMultipoint":return r(y,J,V,fa);case "esriGeometryPolyline":for(const {geometry:na,attributes:ra}of J)y.push({attributes:ra,geometry:O.isSome(na)?B(na,V,fa):null});break;case "esriGeometryPolygon":for(const {geometry:na,
attributes:ra,centroid:sa}of J)ja=O.isSome(na)?u(na,V,fa):null,O.isSome(sa)?(J=k(sa),y.push({attributes:ra,centroid:J,geometry:ja})):y.push({attributes:ra,geometry:ja});break;default:Ja.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${S}'`))}return y}function ba(y,J,S,V,fa,ja,na=S,ra=V){Ba(y);if(O.isNone(J)||!J.coords.length)return null;fa=La[fa];const {coords:sa,lengths:aa}=J;J=p(S,V);const da=p(S&&na,V&&ra);S=w(S,V,na,ra);if(!aa.length)return S(y.coords,
sa,0,0,P(ja,sa[0]),Y(ja,sa[1])),Ba(y,J,0),y;let ma,ya=0,Da,Ga=0;for(const Ha of aa){if(Ha<fa)continue;let Fa=0;Da=Ga;ra=V=P(ja,sa[ya]);ma=na=Y(ja,sa[ya+1]);S(y.coords,sa,Da,ya,ra,ma);Fa++;ya+=J;Da+=da;for(let Ka=1;Ka<Ha;Ka++,ya+=J)if(ra=P(ja,sa[ya]),ma=Y(ja,sa[ya+1]),ra!==V||ma!==na)S(y.coords,sa,Da,ya,ra-V,ma-na),Da+=da,Fa++,V=ra,na=ma;Fa>=fa&&(y.lengths.push(Fa),Ga=Da)}Ca(y.coords,Ga);return y.coords.length?y:null}function qa(y,J,S,V,fa,ja,na){let ra=V,sa=0;for(let da=ja+S;da<na;da+=S){var aa=J[da];
const ma=J[da+1],ya=J[na],Da=J[na+1];let Ga=J[ja],Ha=J[ja+1],Fa=ya-Ga,Ka=Da-Ha;if(0!==Fa||0!==Ka){const ta=((aa-Ga)*Fa+(ma-Ha)*Ka)/(Fa*Fa+Ka*Ka);1<ta?(Ga=ya,Ha=Da):0<ta&&(Ga+=Fa*ta,Ha+=Ka*ta)}Fa=aa-Ga;Ka=ma-Ha;aa=Fa*Fa+Ka*Ka;aa>ra&&(sa=da,ra=aa)}ra>V&&(sa-ja>S&&qa(y,J,S,V,fa,ja,sa),fa(y,J,y.length,sa,J[sa],J[sa+1]),na-sa>S&&qa(y,J,S,V,fa,sa,na))}function wa(y,J,S,V,fa){const {coords:ja,lengths:na}=J;S=p(S,V);if(!ja.length)return y!==J&&Ba(y),y;O.assertIsSome(fa);const {originPosition:ra,scale:sa,
translate:aa}=fa;fa=oa;fa.originPosition=ra;V=fa.scale;V[0]=sa[0]??1;V[1]=-(sa[1]??1);V[2]=sa[2]??1;V[3]=sa[3]??1;var da=fa.translate;da[0]=aa[0]??0;da[1]=aa[1]??0;da[2]=aa[2]??0;da[3]=aa[3]??0;if(!na.length){for(V=0;V<S;++V)y.coords[V]=K(fa,ja[V],V);y!==J&&Ba(y,S,0);return y}da=0;for(let ya=0;ya<na.length;ya++){const Da=na[ya];y.lengths[ya]=Da;for(var ma=0;ma<S;++ma)y.coords[da+ma]=K(fa,ja[da+ma],ma);ma=y.coords[da];let Ga=y.coords[da+1];da+=S;for(let Ha=1;Ha<Da;Ha++,da+=S){ma+=ja[da]*V[0];Ga+=ja[da+
1]*V[1];y.coords[da]=ma;y.coords[da+1]=Ga;for(let Fa=2;Fa<S;++Fa)y.coords[da+Fa]=K(fa,ja[da+Fa],Fa)}}y!==J&&Ba(y,ja.length,na.length);return y}function xa(y,J,S,V){let fa=0,ja=y[V*J],na=y[V*(J+1)];for(let ra=1;ra<S;ra++){const sa=ja+y[V*(J+ra)],aa=na+y[V*(J+ra)+1],da=(sa-ja)*(aa+na);ja=sa;na=aa;fa+=da}return.5*fa}function Ba(y,J=0,S=0){Ca(y.lengths,S);Ca(y.coords,J)}function Ca(y,J=0){y.length!==J&&(y.length=J)}const Ja=ha.getLogger("esri.layers.graphics.featureConversionUtils"),La={esriGeometryPoint:0,
esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Na=(y,J,S,V,fa,ja)=>{y[S]=fa;y[S+1]=ja},bb=(y,J,S,V,fa,ja)=>{y[S]=fa;y[S+1]=ja;y[S+2]=J[V+2]},b=(y,J,S,V,fa,ja)=>{y[S]=fa;y[S+1]=ja;y[S+2]=J[V+3]},m=(y,J,S,V,fa,ja)=>{y[S]=fa;y[S+1]=ja;y[S+2]=J[V+2];y[S+3]=J[V+3]},ea=[],ia=[],oa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};g.convertFromFeature=function(y,J,S,V,fa){ea[0]=y;[y]=Z(ia,ea,J,S,V,fa);Ca(ea);Ca(ia);return y};g.convertFromFeatureSet=function(y,J){const S=
new z,{hasM:V,hasZ:fa,features:ja,objectIdFieldName:na,spatialReference:ra,geometryType:sa,exceededTransferLimit:aa,transform:da,fields:ma}=y;ma&&(S.fields=ma);S.geometryType=sa??null;S.objectIdFieldName=na??J??null;S.spatialReference=ra??null;if(!S.objectIdFieldName)return Ja.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),S;ja&&Z(S.features,ja,sa,fa,V,S.objectIdFieldName);aa&&(S.exceededTransferLimit=aa);V&&(S.hasM=V);fa&&(S.hasZ=fa);da&&(S.transform=
da);return S};g.convertFromFeatures=Z;g.convertFromGeometry=function(y,J,S){if(O.isNone(y))return null;const V=new n;"hasZ"in y&&null==J&&(J=y.hasZ);"hasM"in y&&null==S&&(S=y.hasM);if(t.isPoint(y))return f(null!=J?J:null!=y.z,null!=S?S:null!=y.m)(V,y);if(t.isPolygon(y))return q(V,y,J,S);if(t.isPolyline(y))return F(V,y,p(J,S));if(t.isMultipoint(y))return C(V,y,p(J,S));Ja.error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${y}'`))};g.convertFromGraphics=function(y,
J,S,V,fa,ja){const na=y.length;switch(S){case "esriGeometryPoint":h(y,J,V,fa,ja);break;case "esriGeometryMultipoint":T(y,J,V,fa,ja);break;case "esriGeometryPolyline":M(y,J,V,fa,ja);break;case "esriGeometryPolygon":H(y,J,V,fa,ja);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${S}'`))}for(V=0;V<J.length;V++)y[V+na].geometryType=S,y[V+na].insertAfter=J[V].insertAfter,y[V+na].groupId=J[V].groupId;return y};g.convertFromMultipoint=C;g.convertFromMultipointFeatures=
T;g.convertFromNestedArray=R;g.convertFromPoint=function(y,J,S=f(null!=J.z,null!=J.m)){return S(y,J)};g.convertFromPointFeatures=h;g.convertFromPolygon=q;g.convertFromPolyline=F;g.convertFromPolylineFeatures=M;g.convertToFeature=function(y,J,S,V){ia[0]=y;ka(ea,ia,J,S,V);y=ea[0];Ca(ea);Ca(ia);return y};g.convertToFeatureSet=function(y){const {objectIdFieldName:J,spatialReference:S,transform:V,fields:fa,hasM:ja,hasZ:na,features:ra,geometryType:sa,exceededTransferLimit:aa,uniqueIdField:da,queryGeometry:ma,
queryGeometryType:ya}=y;y=ka([],ra,sa,na,ja);const Da=W(ma,ya,!1,!1);y={features:y,fields:fa,geometryType:sa,objectIdFieldName:J,spatialReference:S,uniqueIdField:da,queryGeometry:Da};V&&(y.transform=V);aa&&(y.exceededTransferLimit=aa);ja&&(y.hasM=ja);na&&(y.hasZ=na);return y};g.convertToFeatures=ka;g.convertToGeometry=W;g.convertToMultipoint=x;g.convertToMultipointFeatures=r;g.convertToPoint=function(y,J,S){return y?J?S?G(y):d(y):S?L(y):k(y):null};g.convertToPolygon=u;g.convertToPolyline=B;g.deltaDecodeGeometry=
function(y,J){if(O.isNone(y))return null;const S=y.clone(),V=y.coords;y=y.lengths;let fa=0;for(let ra=0;ra<y.length;ra++){const sa=y[ra];var ja=V[J*fa],na=V[J*fa+1];for(let aa=1;aa<sa;aa++)ja+=V[J*(fa+aa)],na+=V[J*(fa+aa)+1],S.coords[J*(fa+aa)]=ja,S.coords[J*(fa+aa)+1]=na;fa+=sa}return S};g.deltaEncodeGeometry=function(y,J){const S=y.clone(),V=y.coords;y=y.lengths;let fa=0;for(let na=0;na<y.length;na++){const ra=y[na];let sa=V[J*fa];var ja=V[J*fa+1];for(let aa=1;aa<ra;aa++){const da=V[J*(fa+aa)],
ma=V[J*(fa+aa)+1];ja=ma-ja;S.coords[J*(fa+aa)]=da-sa;S.coords[J*(fa+aa)+1]=ja;sa=da;ja=ma}fa+=ra}return S};g.generalizeOptimizedGeometry=function(y,J,S,V,fa,ja,na=S,ra=V){Ba(y);if(!J||!J.coords.length)return null;fa=La[fa];const {coords:sa,lengths:aa}=J;J=p(S,V);const da=p(S&&na,V&&ra);S=w(S,V,na,ra);if(!aa.length)return S(y.coords,sa,0,0,sa[0],sa[1]),Ba(y,J,0),y;V=0;ja*=ja;for(const ma of aa){if(ma<fa){V+=ma*J;continue}na=y.coords.length/da;ra=V;const ya=V+(ma-1)*J;S(y.coords,sa,y.coords.length,
ra,sa[ra],sa[ra+1]);qa(y.coords,sa,J,ja,S,ra,ya);S(y.coords,sa,y.coords.length,ya,sa[ya],sa[ya+1]);ra=y.coords.length/da-na;ra>=fa?y.lengths.push(ra):Ca(y.coords,na*da);V+=ma*J}return y.coords.length?y:null};g.getBoundsOptimizedGeometry=function(y,J,S,V){if(O.isNone(J)||!J.coords||!J.coords.length)return null;S=p(S,V);let fa=V=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,na=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let ra=0;ra<J.length;ra+=S){const sa=J[ra],aa=J[ra+1];V=Math.min(V,
sa);ja=Math.max(ja,sa);fa=Math.min(fa,aa);na=Math.max(na,aa)}}y[0]=V;y[1]=fa;y[2]=ja;y[3]=na;return y};g.getQuantizedArea=function(y,J){const {coords:S,lengths:V}=y;let fa=y=0;for(let ja=0;ja<V.length;ja++){const na=V[ja];fa+=xa(S,y,na,J);y+=na}return Math.abs(fa)};g.getQuantizedBoundsOptimizedGeometry=function(y,J,S,V){S=p(S,V);const {lengths:fa,coords:ja}=J;V=J=Number.POSITIVE_INFINITY;let na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY,sa=0;for(const aa of fa){let da=ja[sa],ma=ja[sa+1];
J=Math.min(da,J);V=Math.min(ma,V);na=Math.max(da,na);ra=Math.max(ma,ra);sa+=S;for(let ya=1;ya<aa;ya++,sa+=S){const Da=ja[sa],Ga=ja[sa+1];da+=Da;ma+=Ga;0>Da&&(J=Math.min(J,da));0<Da&&(na=Math.max(na,da));0>Ga?V=Math.min(V,ma):0<Ga&&(ra=Math.max(ra,ma))}}y[0]=J;y[1]=V;y[2]=na;y[3]=ra;return y};g.getSignedQuantizedRingArea=xa;g.quantizeOptimizedFeatureSet=function(y,J){const {geometryType:S,features:V,hasM:fa,hasZ:ja}=J;if(!y)return J;for(let na=0;na<V.length;na++){const ra=V[na],sa=ra.weakClone();sa.geometry=
new n;ba(sa.geometry,ra.geometry,fa,ja,S,y);ra.centroid&&(sa.centroid=new n,ba(sa.centroid,ra.centroid,fa,ja,"esriGeometryPoint",y));V[na]=sa}J.transform=y;return J};g.quantizeOptimizedGeometry=ba;g.quantizeX=P;g.quantizeY=Y;g.removeCollinearVectices=function(y,J,S,V,fa){if(!J||!J.coords||!J.coords.length)return null;S=La[S];const {coords:ja,lengths:na}=J;J=w(V,fa,V,fa);V=p(V,fa);let ra=fa=0,sa=0,aa=0;for(const ya of na){ra=aa;J(y.coords,ja,ra,fa,ja[fa],ja[fa+1]);fa+=V;var da=ja[fa];let Da=ja[fa+
1],Ga=da,Ha=Da;var ma=Da/da;ra+=V;J(y.coords,ja,ra,fa,Ga,Ha);fa+=V;for(let Fa=2;Fa<ya;Fa++){da=ja[fa];Da=ja[fa+1];const Ka=Da/da,ta=ma===Ka||!isFinite(ma)&&!isFinite(Ka);ma=ta&&isFinite(Ka)?0<=ma&&0<=Ka||0>=ma&&0>=Ka:0<=Ha&&0<=Da||0>=Ha&&0>=Da;ta&&ma?(Ga+=da,Ha+=Da):(Ga=da,Ha=Da,ra+=V);J(y.coords,ja,ra,fa,Ga,Ha);fa+=V;ma=Ka}ra+=V;da=(ra-aa)/V;da>=S&&(y.lengths[sa]=da,aa=ra,sa++)}y.coords.length>aa&&(y.coords.length=aa);y.lengths.length>sa&&(y.lengths.length=sa);return y.coords.length&&y.lengths.length?
y:null};g.removeZMValues=function(y,J,S,V,fa,ja){Ba(y);y.lengths.push(...J.lengths);if(S===fa&&V===ja)for(var na=0;na<J.coords.length;na++)y.coords.push(J.coords[na]);else for(na=p(S,V),S=w(S,V,fa,ja),J=J.coords,V=0;V<J.length;V+=na)S(y.coords,J,y.coords.length,V,J[V],J[V+1]);return y};g.unquantizeOptimizedFeatureSet=function(y){const {transform:J,features:S,hasM:V,hasZ:fa}=y;if(!J)return y;for(const ja of S)O.isSome(ja.geometry)&&wa(ja.geometry,ja.geometry,V,fa,J),O.isSome(ja.centroid)&&wa(ja.centroid,
ja.centroid,V,fa,J);y.transform=null;return y};g.unquantizeOptimizedGeometry=wa;g.unquantizeValue=K;g.unquantizeX=function(y,J){return K(y,J,0)};g.unquantizeY=function(y,J){return K(y,-J,1)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(g,c,ha){let O=function(){function A(z=null,n={},p,w){this.geometry=z;this.attributes=
n;this.centroid=p;this.objectId=w;this.geohashY=this.geohashX=this.displayId=0}A.prototype.weakClone=function(){const z=new A(this.geometry,this.attributes,this.centroid,this.objectId);z.displayId=this.displayId;z.geohashX=this.geohashX;z.geohashY=this.geohashY;return z};return A}(),t=function(A){function z(){return A.apply(this,arguments)||this}c._inheritsLoose(z,A);return z}(O);g.OptimizedFeature=O;g.OptimizedFeatureWithGeometry=t;g.hasGeometry=function(A){return!(ha.isNone(A.geometry)||!A.geometry.coords||
!A.geometry.coords.length)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function g(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=
this.uniqueIdField=null}g.prototype.weakClone=function(){const c=new g;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;
c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return g}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){return function(){function c(O=[],t=[],A=!1){this.lengths=O??[];this.coords=t??[];this.hasIndeterminateRingOrder=A}c.fromRect=function(O){const [t,A,z,n]=O;O=z-t;const p=n-A;return new c([5],[t,A,O,0,0,p,-O,0,0,-p])};var ha=c.prototype;ha.forEachVertex=function(O){let t=0;this.lengths.length||
O(this.coords[0],this.coords[1]);for(let A=0;A<this.lengths.length;A++){const z=this.lengths[A];for(let n=0;n<z;n++)O(this.coords[2*(n+t)],this.coords[2*(n+t)+1]);t+=z}};ha.clone=function(O){return O?(O.set(this.coords),new c(this.lengths.slice(),O,this.hasIndeterminateRingOrder)):new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};g._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((O,t)=>O+t)}}]);return c}()})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(g,c,ha,O,t,A,z,n,p,w){return function(){function P(K){this.geometryInfo=
K;this._boundsStore=new p.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ha;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}var Y=P.prototype;Y.add=function(K){this._add(K);this._emitChanged()};Y.addMany=function(K){for(const k of K)this._add(k);this._emitChanged()};Y.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Y.removeById=function(K){K=this._featuresById.get(K);if(!K)return null;this._remove(K);this._emitChanged();
return K};Y.removeManyById=function(K){this._boundsStore.invalidateIndex();for(const k of K)(K=this._featuresById.get(k))&&this._remove(K);this._emitChanged()};Y.forEachBounds=function(K,k,I){for(const d of K)(K=this._boundsStore.get(d.objectId))&&k(A.fromRect(I,K))};Y.getFeature=function(K){return this._featuresById.get(K)};Y.has=function(K){return this._featuresById.has(K)};Y.toArray=function(){return Array.from(this._featuresById.values())};Y.forEach=function(K){this._featuresById.forEach(k=>K(k))};
Y.forEachInBounds=function(K,k){this._boundsStore.forEachInBounds(K,I=>{k(this._featuresById.get(I))})};Y.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Y.sweep=function(){let K=!1;this._featuresById.forEach((k,I)=>{this._markedIds.has(I)||(K=!0,this._remove(k))});this._markedIds.clear();K&&this._emitChanged()};Y._emitChanged=function(){this.events.emit("changed",void 0)};Y._add=function(K){if(K){var k=K.objectId;if(null==k)O.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature",
"feature id is missing",{feature:K}));else{var I=this._featuresById.get(k);this._markedIds.add(k);if(I){K.displayId=I.displayId;var d=this._boundsStore.get(k);this._boundsStore.delete(k)}else if(t.isSome(this.onFeatureAdd))this.onFeatureAdd(K);!t.isNone(K.geometry)&&K.geometry.coords&&K.geometry.coords.length?(d=n.getBoundsOptimizedGeometry(t.isSome(d)?d:z.create(),K.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),t.isSome(d)&&this._boundsStore.set(k,d)):this._boundsStore.set(k,null);this._featuresById.set(k,
K)}}};Y._remove=function(K){if(t.isSome(this.onFeatureRemove))this.onFeatureRemove(K);this._markedIds.delete(K.objectId);this._boundsStore.delete(K.objectId);this._featuresById.delete(K.objectId);return K};g._createClass(P,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",
get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let K=0;this._featuresById.forEach(k=>{t.isSome(k.geometry)&&k.geometry.coords&&(K+=k.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:K/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return P}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(g,
c,ha,O,t){let A=function(){function z(){this._emitter=new z.EventEmitter(this)}var n=z.prototype;n.emit=function(p,w){return this._emitter.emit(p,w)};n.on=function(p,w){return this._emitter.on(p,w)};n.once=function(p,w){return this._emitter.once(p,w)};n.hasEventListener=function(p){return this._emitter.hasEventListener(p)};return z}();(function(z){let n=function(){function w(Y=null){this._target=Y;this._listenersMap=null}var P=w.prototype;P.clear=function(){this._listenersMap&&this._listenersMap.clear();
this._listenersMap=null};P.emit=function(Y,K){Y=this._listenersMap&&this._listenersMap.get(Y);if(!Y)return!1;const k=this._target||this;[...Y].forEach(I=>{I.call(k,K)});return 0<Y.length};P.on=function(Y,K){if(Array.isArray(Y)){var k=Y.map(I=>this.on(I,K));return O.handlesGroup(k)}if(Y.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);k=this._listenersMap.get(Y)||[];k.push(K);this._listenersMap.set(Y,
k);return{remove:()=>{const I=this._listenersMap&&this._listenersMap.get(Y)||[],d=I.indexOf(K);0<=d&&I.splice(d,1)}}};P.once=function(Y,K){const k=this.on(Y,I=>{k.remove();K.call(null,I)});return k};P.hasEventListener=function(Y){Y=this._listenersMap&&this._listenersMap.get(Y);return null!=Y&&0<Y.length};return w}();z.EventEmitter=n;z.EventedMixin=w=>{w=function(P){function Y(){var k=P.apply(this,arguments)||this;k._emitter=new n;return k}g._inheritsLoose(Y,P);var K=Y.prototype;K.destroy=function(){this._emitter.clear()};
K.emit=function(k,I){return this._emitter.emit(k,I)};K.on=function(k,I){return this._emitter.on(k,I)};K.once=function(k,I){return this._emitter.once(k,I)};K.hasEventListener=function(k){return this._emitter.hasEventListener(k)};return Y}(w);return w=c.__decorate([t.subclass("esri.core.Evented")],w)};let p=function(w){function P(){var K=w.apply(this,arguments)||this;K._emitter=new A.EventEmitter(g._assertThisInitialized(K));return K}g._inheritsLoose(P,w);var Y=P.prototype;Y.destroy=function(){this._emitter.clear()};
Y.emit=function(K,k){return this._emitter.emit(K,k)};Y.on=function(K,k){return this._emitter.on(K,k)};Y.once=function(K,k){return this._emitter.once(K,k)};Y.hasEventListener=function(K){return this._emitter.hasEventListener(K)};return P}(ha);p=c.__decorate([t.subclass("esri.core.Evented")],p);z.EventedAccessor=p})(A||(A={}));return A})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(g,c,ha,O){function t(d=k){return[d[0],
d[1],d[2],d[3],d[4],d[5]]}function A(d,l,L,D,G,N,f=t()){f[0]=d;f[1]=l;f[2]=L;f[3]=D;f[4]=G;f[5]=N;return f}function z(d){return d[0]>=d[3]?0:d[3]-d[0]}function n(d){return d[1]>=d[4]?0:d[4]-d[1]}function p(d){return d[2]>=d[5]?0:d[5]-d[2]}function w(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function P(d,l){d[0]=l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function Y(d){return 6===d.length}
const K=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],k=[0,0,0,0,0,0],I=t();g.NEGATIVE_INFINITY=K;g.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];g.ZERO=k;g.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};g.center=function(d,l=[0,0,0]){l[0]=d[0]+z(d)/2;l[1]=d[1]+n(d)/2;l[2]=d[2]+p(d)/2;return l};g.contains=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};g.containsPoint=function(d,
l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};g.containsPointWithMargin=function(d,l,L){return l[0]>=d[0]-L&&l[1]>=d[1]-L&&l[2]>=d[2]-L&&l[0]<=d[3]+L&&l[1]<=d[4]+L&&l[2]<=d[5]+L};g.create=t;g.depth=n;g.diameter=function(d){const l=z(d),L=p(d);d=n(d);return Math.sqrt(l*l+L*L+d*d)};g.empty=function(d){return d?P(d,K):t(K)};g.equals=function(d,l,L){if(c.isNone(d)||c.isNone(l))return d===l;if(!Y(d)||!Y(l))return!1;if(L)for(let D=0;D<d.length;D++){if(!L(d[D],l[D]))return!1}else for(L=
0;L<d.length;L++)if(d[L]!==l[L])return!1;return!0};g.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};g.expandWithBuffer=function(d,l,L=0,D=l.length/3){let G=d[0],N=d[1],f=d[2],h=d[3],r=d[4],x=d[5];for(let T=0;T<D;T++)G=Math.min(G,l[L+3*T]),N=Math.min(N,l[L+3*T+1]),f=Math.min(f,l[L+3*T+2]),h=Math.max(h,l[L+3*T]),r=Math.max(r,l[L+3*T+1]),x=Math.max(x,l[L+3*T+2]);d[0]=G;
d[1]=N;d[2]=f;d[3]=h;d[4]=r;d[5]=x};g.expandWithNestedArray=function(d,l,L){const D=l.length;let G=d[0],N=d[1],f=d[2],h=d[3],r=d[4],x=d[5];if(L)for(L=0;L<D;L++){var T=l[L];G=Math.min(G,T[0]);N=Math.min(N,T[1]);f=Math.min(f,T[2]);h=Math.max(h,T[0]);r=Math.max(r,T[1]);x=Math.max(x,T[2])}else for(L=0;L<D;L++)T=l[L],G=Math.min(G,T[0]),N=Math.min(N,T[1]),h=Math.max(h,T[0]),r=Math.max(r,T[1]);d[0]=G;d[1]=N;d[2]=f;d[3]=h;d[4]=r;d[5]=x};g.expandWithOffset=function(d,l,L,D){d[0]=Math.min(d[0],d[0]+l);d[3]=
Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+L);d[4]=Math.max(d[4],d[4]+L);d[2]=Math.min(d[2],d[2]+D);d[5]=Math.max(d[5],d[5]+D)};g.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};g.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],l[1]);d[5]=Math.max(d[5],l[2])};g.fromExtent=function(d,l=t()){l[0]=d.xmin;l[1]=d.ymin;l[2]=
d.hasZ?d.zmin:-Infinity;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.hasZ?d.zmax:Infinity;return l};g.fromMinMax=function(d,l,L=t()){L[0]=d[0];L[1]=d[1];L[2]=d[2];L[3]=l[0];L[4]=l[1];L[5]=l[2];return L};g.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};g.fromValues=A;g.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};g.getMin=function(d,l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};g.height=p;g.intersects=w;g.intersectsClippingArea=
function(d,l){return c.isNone(l)?!0:w(d,l)};g.is=Y;g.isPoint=function(d){return 0===z(d)&&0===n(d)&&0===p(d)};g.maximumDimension=function(d){return Math.max(z(d),p(d),n(d))};g.offset=function(d,l,L,D,G=d){G[0]=d[0]+l;G[1]=d[1]+L;G[2]=d[2]+D;G[3]=d[3]+l;G[4]=d[4]+L;G[5]=d[5]+D;return G};g.scale=function(d,l,L=d){const D=d[0]+z(d)/2,G=d[1]+n(d)/2,N=d[2]+p(d)/2;L[0]=D+(d[0]-D)*l;L[1]=G+(d[1]-G)*l;L[2]=N+(d[2]-N)*l;L[3]=D+(d[3]-D)*l;L[4]=G+(d[4]-G)*l;L[5]=N+(d[5]-N)*l;return L};g.set=P;g.setMax=function(d,
l,L=d){L[3]=l[0];L[4]=l[1];L[5]=l[2];L!==d&&(L[0]=d[0],L[1]=d[1],L[2]=d[2]);return d};g.setMin=function(d,l,L=d){L[0]=l[0];L[1]=l[1];L[2]=l[2];L!==d&&(L[3]=d[3],L[4]=d[4],L[5]=d[5]);return L};g.size=function(d,l=[0,0,0]){l[0]=z(d);l[1]=n(d);l[2]=p(d);return l};g.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};g.toRect=function(d,
l){l||(l=O.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};g.width=z;g.wrap=function(d,l,L,D,G,N){return A(d,l,L,D,G,N,I)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(g,c,ha,O,t){function A(k=K){return[k[0],k[1],k[2],k[3]]}function z(k,I){k!==I&&(k[0]=I[0],k[1]=I[1],k[2]=I[2],k[3]=I[3]);return k}
function n(k){return O.isNone(k)||k[0]>=k[2]?0:k[2]-k[0]}function p(k){return k[1]>=k[3]?0:k[3]-k[1]}function w(k,I,d){return I>=k[0]&&d>=k[1]&&I<=k[2]&&d<=k[3]}function P(k){return null!=k&&4===k.length}const Y=[Infinity,Infinity,-Infinity,-Infinity],K=[0,0,0,0];g.NEGATIVE_INFINITY=Y;g.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];g.UNIT=[0,0,1,1];g.ZERO=K;g.allFinite=function(k){for(let I=0;4>I;I++)if(!isFinite(k[I]))return!1;return!0};g.area=function(k){return n(k)*p(k)};g.center=function(k,
I=[0,0]){I[0]=(k[0]+k[2])/2;I[1]=(k[1]+k[3])/2;return I};g.clone=function(k){return[k[0],k[1],k[2],k[3]]};g.contains=function(k,I){return I[0]>=k[0]&&I[2]<=k[2]&&I[1]>=k[1]&&I[3]<=k[3]};g.containsPoint=function(k,I){return w(k,I[0],I[1])};g.containsPointObject=function(k,I){return w(k,I.x,I.y)};g.containsPointWithMargin=function(k,I,d){return I[0]>=k[0]-d&&I[1]>=k[1]-d&&I[0]<=k[2]+d&&I[1]<=k[3]+d};g.containsXY=w;g.containsXYWithMargin=function(k,I,d,l){return I>=k[0]-l&&d>=k[1]-l&&I<=k[2]+l&&d<=k[3]+
l};g.copy=z;g.create=A;g.distance=function(k,I){const d=(k[1]+k[3])/2,l=Math.max(Math.abs(I[0]-(k[0]+k[2])/2)-n(k)/2,0);k=Math.max(Math.abs(I[1]-d)-p(k)/2,0);return Math.sqrt(l*l+k*k)};g.empty=function(k){return k?z(k,Y):A(Y)};g.equals=function(k,I){return P(k)&&P(I)?k[0]===I[0]&&k[1]===I[1]&&k[2]===I[2]&&k[3]===I[3]:k===I};g.expand=function(k,I,d){if(O.isNone(I))z(d,k);else if("length"in I)if(P(I))d[0]=Math.min(k[0],I[0]),d[1]=Math.min(k[1],I[1]),d[2]=Math.max(k[2],I[2]),d[3]=Math.max(k[3],I[3]);
else{if(2===I.length||3===I.length)d[0]=Math.min(k[0],I[0]),d[1]=Math.min(k[1],I[1]),d[2]=Math.max(k[2],I[0]),d[3]=Math.max(k[3],I[1])}else switch(I.type){case "extent":d[0]=Math.min(k[0],I.xmin);d[1]=Math.min(k[1],I.ymin);d[2]=Math.max(k[2],I.xmax);d[3]=Math.max(k[3],I.ymax);break;case "point":d[0]=Math.min(k[0],I.x),d[1]=Math.min(k[1],I.y),d[2]=Math.max(k[2],I.x),d[3]=Math.max(k[3],I.y)}};g.expandPointInPlace=function(k,I){I[0]<k[0]&&(k[0]=I[0]);I[0]>k[2]&&(k[2]=I[0]);I[1]<k[1]&&(k[1]=I[1]);I[1]>
k[3]&&(k[3]=I[1])};g.expandWithNestedArray=function(k,I,d=k){const l=I.length;let L=k[0],D=k[1],G=k[2];k=k[3];for(let N=0;N<l;N++){const f=I[N];L=Math.min(L,f[0]);D=Math.min(D,f[1]);G=Math.max(G,f[0]);k=Math.max(k,f[1])}d[0]=L;d[1]=D;d[2]=G;d[3]=k;return d};g.fromExtent=function(k,I=A()){I[0]=k.xmin;I[1]=k.ymin;I[2]=k.xmax;I[3]=k.ymax;return I};g.fromValues=function(k,I,d,l,L=A()){L[0]=k;L[1]=I;L[2]=d;L[3]=l;return L};g.height=p;g.intersection=function(k,I,d){if(O.isNone(I))return z(d,k);const l=
I[0],L=I[1],D=I[2];I=I[3];d[0]=ha.clamp(k[0],l,D);d[1]=ha.clamp(k[1],L,I);d[2]=ha.clamp(k[2],l,D);d[3]=ha.clamp(k[3],L,I);return d};g.intersects=function(k,I){return Math.max(I[0],k[0])<=Math.min(I[2],k[2])&&Math.max(I[1],k[1])<=Math.min(I[3],k[3])};g.intersectsSegment=function(k,I,d){const l=k[0],L=k[1],D=k[2];k=k[3];const {x:G,y:N}=I,{x:f,y:h}=d;var r=(T,C)=>0>(h-N)*T+(G-f)*C+(f*N-G*h);I=r(l,k);d=r(D,k);const x=r(D,L);r=r(l,L);return I===d&&d===x&&x===r&&r===I||G<l&&f<l||G>D&&f>D||N>k&&h>k||N<L&&
h<L?!1:!0};g.intersectsSphere=function(k,I){const d=I[3];var l=Math.abs(I[0]-.5*(k[0]+k[2]));const L=.5*(k[2]-k[0]);if(l>d+L)return!1;var D=.5*(k[3]-k[1]);k=Math.abs(I[1]-.5*(k[1]+k[3]));if(k>d+D)return!1;if(l<L||k<D)return!0;l-=L;D=k-D;return l*l+D*D<=d*d};g.is=P;g.isPoint=function(k){return(0===n(k)||!isFinite(k[0]))&&(0===p(k)||!isFinite(k[1]))};g.offset=function(k,I,d,l=k){l[0]=k[0]+I;l[1]=k[1]+d;l[2]=k[2]+I;l[3]=k[3]+d;return l};g.pad=function(k,I,d=k){d[0]=k[0]-I;d[1]=k[1]-I;d[2]=k[2]+I;d[3]=
k[3]+I;return d};g.setMax=function(k,I,d=k){d[2]=I[0];d[3]=I[1];d!==k&&(d[0]=k[0],d[1]=k[1]);return k};g.setMin=function(k,I,d=k){d[0]=I[0];d[1]=I[1];d!==k&&(d[2]=k[2],d[3]=k[3]);return d};g.size=function(k,I){I[0]=k[2]-k[0];I[1]=k[3]-k[1]};g.toExtent=function(k,I){return new t({xmin:k[0],ymin:k[1],xmax:k[2],ymax:k[3],spatialReference:I})};g.width=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,c,ha,O,t){function A(p,w,P){z.minX=w[0];z.minY=w[1];z.maxX=w[2];z.maxY=w[3];p.search(z,P)}const z={minX:0,minY:0,maxX:0,maxY:0};let n=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new O.PooledRBush(9,ha("esri-csp-restrictions")?P=>({minX:P[0],minY:P[1],maxX:P[2],
maxY:P[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const P=Array(this._idByBounds.size);let Y=0;this._idByBounds.forEach((K,k)=>{P[Y++]=k});this._indexInvalid=!1;this._index.clear();this._index.load(P)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(P=>this._idByBounds.has(P))),this._boundsToLoad.length=0)}}var w=p.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();
this._index.clear()};w.delete=function(P){const Y=this._boundsById.get(P);this._boundsById.delete(P);Y&&(this._idByBounds.delete(Y),this._indexInvalid||this._index.remove(Y))};w.forEachInBounds=function(P,Y){this._loadIndex();A(this._index,P,K=>Y(this._idByBounds.get(K)))};w.get=function(P){return this._boundsById.get(P)};w.has=function(P){return this._boundsById.has(P)};w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};w.set=function(P,Y){if(!this._indexInvalid){const K=
this._boundsById.get(P);K&&(this._index.remove(K),this._idByBounds.delete(K))}this._boundsById.set(P,Y);Y&&(this._idByBounds.set(Y,P),this._indexInvalid||(this._boundsToLoad.push(Y),5E4<this._boundsToLoad.length&&this._loadIndex()))};c._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const P=t.empty();for(const Y of this._boundsById.values())Y&&(P[0]=Math.min(Y[0],P[0]),P[1]=Math.min(Y[1],P[1]),P[2]=Math.max(Y[2],P[2]),P[3]=Math.max(Y[3],P[3]));return P}},{key:"valid",
get:function(){return!this._indexInvalid}}]);return p}();g.BoundsStore=n;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(g,c,ha,O,t,A){function z(x,T){n(x,0,x.children.length,T,x)}function n(x,T,C,B,M){M||(M=new h([]));M.minX=Infinity;M.minY=Infinity;M.maxX=
-Infinity;M.maxY=-Infinity;for(let F=T,u;F<C;F++)u=x.children[F],p(M,x.leaf?B(u):u);return M}function p(x,T){x.minX=Math.min(x.minX,T.minX);x.minY=Math.min(x.minY,T.minY);x.maxX=Math.max(x.maxX,T.maxX);x.maxY=Math.max(x.maxY,T.maxY)}function w(x,T){return x.minX-T.minX}function P(x,T){return x.minY-T.minY}function Y(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function K(x){return x.maxX-x.minX+(x.maxY-x.minY)}function k(x,T){return x.minX<=T.minX&&x.minY<=T.minY&&T.maxX<=x.maxX&&T.maxY<=x.maxY}function I(x,
T){return T.minX<=x.maxX&&T.minY<=x.maxY&&T.maxX>=x.minX&&T.maxY>=x.minY}function d(x,T,C,B,M){for(T=[T,C];T.length;){C=O.assumeNonNull(T.pop());const F=O.assumeNonNull(T.pop());if(C-F<=B)continue;const u=F+Math.ceil((C-F)/B/2)*B;A.quickselect(x,u,F,C,M);T.push(F,u,u,C)}}let l=function(){function x(C=9,B){this._compareMinX=w;this._compareMinY=P;this._toBBox=M=>M;this._maxEntries=Math.max(4,C||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));B&&("function"===typeof B?this._toBBox=B:this._initFormat(B));
this.clear()}var T=x.prototype;T.destroy=function(){this.clear();L.prune();D.prune();G.prune();N.prune()};T.all=function(C){this._all(this._data,C)};T.search=function(C,B){let M=this._data;const F=this._toBBox;if(I(C,M))for(L.clear();M;){for(let u=0,H=M.children.length;u<H;u++){const q=M.children[u],R=M.leaf?F(q):q;I(C,R)&&(M.leaf?B(q):k(C,R)?this._all(q,B):L.push(q))}M=L.pop()}};T.collides=function(C){let B=this._data;const M=this._toBBox;if(!I(C,B))return!1;for(L.clear();B;){for(let F=0,u=B.children.length;F<
u;F++){const H=B.children[F],q=B.leaf?M(H):H;if(I(C,q)){if(B.leaf||k(C,q))return!0;L.push(H)}}B=L.pop()}return!1};T.load=function(C){if(!C.length)return this;if(C.length<this._minEntries){for(let B=0,M=C.length;B<M;B++)this.insert(C[B]);return this}C=this._build(C.slice(0,C.length),0,C.length-1,0);if(this._data.children.length)if(this._data.height===C.height)this._splitRoot(this._data,C);else{if(this._data.height<C.height){const B=this._data;this._data=C;C=B}this._insert(C,this._data.height-C.height-
1,!0)}else this._data=C;return this};T.insert=function(C){C&&this._insert(C,this._data.height-1);return this};T.clear=function(){this._data=new h([]);return this};T.remove=function(C){if(!C)return this;let B=this._data,M=null,F=0,u=!1,H;const q=this._toBBox(C);G.clear();for(N.clear();B||0<G.length;){B||(B=O.assumeNonNull(G.pop()),M=G.data[G.length-1],F=N.pop()??0,u=!0);if(B.leaf&&(H=ha.indexOf(B.children,C,B.children.length,B.indexHint),-1!==H)){B.children.splice(H,1);G.push(B);this._condense(G);
break}u||B.leaf||!k(B,q)?M?(F++,B=M.children[F],u=!1):B=null:(G.push(B),N.push(F),F=0,M=B,B=B.children[0])}return this};T.toJSON=function(){return this._data};T.fromJSON=function(C){this._data=C;return this};T._all=function(C,B){for(D.clear();C;){if(!0===C.leaf)for(const M of C.children)B(M);else D.pushArray(C.children);C=D.pop()??null}};T._build=function(C,B,M,F){var u=M-B+1,H=this._maxEntries;if(u<=H)return C=new h(C.slice(B,M+1)),z(C,this._toBBox),C;F||(F=Math.ceil(Math.log(u)/Math.log(H)),H=Math.ceil(u/
H**(F-1)));const q=new r([]);q.height=F;u=Math.ceil(u/H);H=u*Math.ceil(Math.sqrt(H));for(d(C,B,M,H,this._compareMinX);B<=M;B+=H){const R=Math.min(B+H-1,M);d(C,B,R,u,this._compareMinY);for(let Z=B;Z<=R;Z+=u)q.children.push(this._build(C,Z,Math.min(Z+u-1,R),F-1))}z(q,this._toBBox);return q};T._chooseSubtree=function(C,B,M,F){for(;;){F.push(B);if(!0===B.leaf||F.length-1===M)break;let u=Infinity,H=Infinity,q=void 0;for(let R=0,Z=B.children.length;R<Z;R++){const W=B.children[R],ka=Y(W),ba=(Math.max(W.maxX,
C.maxX)-Math.min(W.minX,C.minX))*(Math.max(W.maxY,C.maxY)-Math.min(W.minY,C.minY))-ka;ba<H?(H=ba,u=ka<u?ka:u,q=W):ba===H&&ka<u&&(u=ka,q=W)}B=q||B.children[0]}return B};T._insert=function(C,B,M){var F=this._toBBox;M=M?C:F(C);G.clear();F=this._chooseSubtree(M,this._data,B,G);F.children.push(C);for(p(F,M);0<=B;)if(G.data[B].children.length>this._maxEntries)this._split(G,B),B--;else break;this._adjustParentBBoxes(M,G,B)};T._split=function(C,B){const M=C.data[B];var F=M.children.length;const u=this._minEntries;
this._chooseSplitAxis(M,u,F);(F=this._chooseSplitIndex(M,u,F))?(F=M.children.splice(F,M.children.length-F),F=M.leaf?new h(F):new r(F),F.height=M.height,z(M,this._toBBox),z(F,this._toBBox),B?C.data[B-1].children.push(F):this._splitRoot(M,F)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};T._splitRoot=function(C,B){this._data=new r([C,B]);this._data.height=C.height+1;z(this._data,this._toBBox)};T._chooseSplitIndex=function(C,B,M){let F,u,H=void 0;F=u=Infinity;
for(let R=B;R<=M-B;R++){var q=n(C,0,R,this._toBBox);const Z=n(C,R,M,this._toBBox),W=Math.max(0,Math.min(q.maxX,Z.maxX)-Math.max(q.minX,Z.minX))*Math.max(0,Math.min(q.maxY,Z.maxY)-Math.max(q.minY,Z.minY));q=Y(q)+Y(Z);W<F?(F=W,H=R,u=q<u?q:u):W===F&&q<u&&(u=q,H=R)}return H};T._chooseSplitAxis=function(C,B,M){const F=C.leaf?this._compareMinX:w,u=C.leaf?this._compareMinY:P,H=this._allDistMargin(C,B,M,F);B=this._allDistMargin(C,B,M,u);H<B&&C.children.sort(F)};T._allDistMargin=function(C,B,M,F){C.children.sort(F);
F=this._toBBox;var u=n(C,0,B,F);const H=n(C,M-B,M,F);let q=K(u)+K(H);for(let R=B;R<M-B;R++){const Z=C.children[R];p(u,C.leaf?F(Z):Z);q+=K(u)}for(M=M-B-1;M>=B;M--)u=C.children[M],p(H,C.leaf?F(u):u),q+=K(H);return q};T._adjustParentBBoxes=function(C,B,M){for(;0<=M;M--)p(B.data[M],C)};T._condense=function(C){for(let B=C.length-1;0<=B;B--){const M=C.data[B];if(0===M.children.length)if(0<B){const F=C.data[B-1],u=F.children;u.splice(ha.indexOf(u,M,u.length,F.indexHint),1)}else this.clear();else z(M,this._toBBox)}};
T._initFormat=function(C){const B=["return a"," - b",";"];this._compareMinX=new Function("a","b",B.join(C[0]));this._compareMinY=new Function("a","b",B.join(C[1]));this._toBBox=new Function("a","return {minX: a"+C[0]+", minY: a"+C[1]+", maxX: a"+C[2]+", maxY: a"+C[3]+"};")};return x}();const L=new t,D=new t,G=new t,N=new t({deallocator:void 0});t=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let f=function(x){function T(){var C=x.apply(this,arguments)||this;C.height=1;C.indexHint=
new ha.PositionHint;return C}c._inheritsLoose(T,x);return T}(t),h=function(x){function T(C){var B=x.call(this)||this;B.children=C;B.leaf=!0;return B}c._inheritsLoose(T,x);return T}(f),r=function(x){function T(C){var B=x.call(this)||this;B.children=C;B.leaf=!1;return B}c._inheritsLoose(T,x);return T}(f);g.BBox=t;g.PooledRBush=l;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var c={exports:{}};
(function(ha){(function(O){O=O();void 0!==O&&(ha.exports=O)})(function(){function O(z,n,p,w,P){for(;w>p;){if(600<w-p){var Y=w-p+1,K=n-p+1,k=Math.log(Y),I=.5*Math.exp(2*k/3);k=.5*Math.sqrt(k*I*(Y-I)/Y)*(0>K-Y/2?-1:1);O(z,n,Math.max(p,Math.floor(n-K*I/Y+k)),Math.min(w,Math.floor(n+(Y-K)*I/Y+k)),P)}Y=z[n];K=p;I=w;t(z,p,n);for(0<P(z[w],Y)&&t(z,p,w);K<I;){t(z,K,I);K++;for(I--;0>P(z[K],Y);)K++;for(;0<P(z[I],Y);)I--}0===P(z[p],Y)?t(z,p,I):(I++,t(z,I,w));I<=n&&(p=I+1);n<=I&&(w=I-1)}}function t(z,n,p){var w=
z[n];z[n]=z[p];z[p]=w}function A(z,n){return z<n?-1:z>n?1:0}return function(z,n,p,w,P){O(z,n,p||0,w||z.length-1,P||A)}})})(c);g.quickselect=c.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(g,c,ha,O,t){g.optimizedFeatureQueryEngineAdapter={getObjectId(A){return A.objectId},getAttributes(A){return A.attributes},getAttribute(A,z){return A.attributes[z]},cloneWithGeometry(A,
z){return new O.OptimizedFeature(z,A.attributes,null,A.objectId)},getGeometry(A){return A.geometry},getCentroid(A,z){c.isNone(A.centroid)&&(A.centroid=ha.getCentroidOptimizedGeometry(new t,A.geometry,z.hasZ,z.hasM));return A.centroid}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(g,c){function ha(t,A,z,n,p,w,P=1){w=p?w?4:3:w?3:2;let Y=z,K=z+w,k=0,I=0,d=z=0,l=0;for(let L=
0,D=n-1;L<D;L++,Y+=w,K+=w){n=A[Y];const G=A[Y+1],N=A[Y+2],f=A[K],h=A[K+1],r=A[K+2];let x=n*h-f*G;d+=x;k+=(n+f)*x;I+=(G+h)*x;p&&(x=n*r-f*N,z+=(N+r)*x,l+=x);n<t[0]&&(t[0]=n);n>t[1]&&(t[1]=n);G<t[2]&&(t[2]=G);G>t[3]&&(t[3]=G);p&&(N<t[4]&&(t[4]=N),N>t[5]&&(t[5]=N))}0<d*P&&(d*=-1);0<l*P&&(l*=-1);if(!d)return null;t=[k,I,.5*d];p&&(t[3]=z,t[4]=.5*l);return t}function O(t,A,z,n,p){p=n?p?4:3:p?3:2;let w=A,P=A+p,Y=0,K=0,k=0,I=0;for(let D=0,G=z-1;D<G;D++,w+=p,P+=p){var d=t[w];const N=t[w+1],f=t[w+2],h=t[P],
r=t[P+1],x=t[P+2];if(n){var l=h-d;var L=r-N;const T=x-f;l=Math.sqrt(l*l+L*L+T*T)}else l=h-d,L=r-N,l=Math.sqrt(l*l+L*L);l&&(Y+=l,n?(d=[d+.5*(h-d),N+.5*(r-N),f+.5*(x-f)],K+=l*d[0],k+=l*d[1],I+=l*d[2]):(d=[d+.5*(h-d),N+.5*(r-N)],K+=l*d[0],k+=l*d[1]))}return 0<Y?n?[K/Y,k/Y,I/Y]:[K/Y,k/Y]:0<z?n?[t[A],t[A+1],t[A+2]]:[t[A],t[A+1]]:null}g.getCentroidOptimizedGeometry=function(t,A,z,n,p){if(c.isNone(A)||!A.lengths.length)return null;const w="upperLeft"===p?.originPosition?-1:1;t.lengths.length&&(t.lengths.length=
0);t.coords.length&&(t.coords.length=0);p=t.coords;const P=[],Y=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:K,coords:k}=A,I=z?n?4:3:n?3:2;let d=0;for(var l of K){const L=ha(Y,k,d,l,z,n,w);L&&P.push(L);d+=l*I}P.sort((L,D)=>{let G=w*L[2]-w*D[2];0===G&&z&&(G=L[4]-D[4]);return G});P.length&&
(l=6*P[0][2],p[0]=P[0][0]/l,p[1]=P[0][1]/l,z&&(l=6*P[0][4],p[2]=0!==l?P[0][3]/l:0),p[0]<Y[0]||p[0]>Y[1]||p[1]<Y[2]||p[1]>Y[3]||z&&(p[2]<Y[4]||p[2]>Y[5]))&&(p.length=0);if(!p.length)if(A=A.lengths[0]?O(k,0,K[0],z,n):null)p[0]=A[0],p[1]=A[1],z&&2<A.length&&(p[2]=A[2]);else return null;return t};g.lineCentroid=O;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(g,c,ha,O,t,A,z){function n(d,l){if(!l)return null;if("x"in l){var L={x:0,y:0};[L.x,L.y]=d(l.x,l.y,Y);null!=l.z&&(L.z=l.z);null!=l.m&&(L.m=l.m);return L}return"xmin"in l?(L={xmin:0,ymin:0,xmax:0,ymax:0},[L.xmin,L.ymin]=d(l.xmin,l.ymin,Y),[L.xmax,L.ymax]=d(l.xmax,l.ymax,Y),l.hasZ&&(L.zmin=l.zmin,L.zmax=l.zmax,L.hasZ=!0),l.hasM&&(L.mmin=l.mmin,L.mmax=l.mmax,L.hasM=!0),L):"rings"in l?{rings:p(l.rings,d),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:p(l.paths,d),hasM:l.hasM,hasZ:l.hasZ}:"points"in
l?{points:w(l.points,d),hasM:l.hasM,hasZ:l.hasZ}:null}function p(d,l){const L=[];for(const D of d)L.push(w(D,l));return L}function w(d,l){const L=[];for(const D of d)d=l(D[0],D[1],[0,0]),L.push(d),2<D.length&&d.push(D[2]),3<D.length&&d.push(D[3]);return L}function P(){P=c._asyncToGenerator(function*(d,l){d&&l&&(d=Array.isArray(d)?d.map(L=>ha.isSome(L.geometry)?L.geometry.spatialReference:null).filter(ha.isSome):[d],yield O.initializeProjection(d.map(L=>({source:L,dest:l}))))});return P.apply(this,
arguments)}const Y=[0,0],K=n.bind(null,z.lngLatToXY),k=n.bind(null,z.xyToLngLat),I=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var L=c._asyncToGenerator(function*(D,G,N){if(!(D&&D.length&&G&&N)||A.equals(G,N))return D;const f={geometries:D,inSpatialReference:G,outSpatialReference:N,resolve:null};this._jobs.push(f);return new Promise(h=>{f.resolve=h;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(D,G,N){return L.apply(this,arguments)}}();l._process=function(){this._timer=null;const L=this._jobs.shift();if(L){var {geometries:D,inSpatialReference:G,outSpatialReference:N,resolve:f}=L;z.canProject(G,N)?A.isWebMercator(N)?f(D.map(K)):f(D.map(k)):f(O.projectMany(t.jsonAdapter,D,G,N,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());g.checkProjectionSupport=function(d,l){return P.apply(this,arguments)};g.project=function(d,l,L,D){if(!d)return d;
L||(L=l,l=d.spatialReference);return A.isValid(l)&&A.isValid(L)&&!A.equals(l,L)?z.canProject(l,L)?(d=A.isWebMercator(L)?K(d):k(d),d.spatialReference=L,d):O.projectMany(t.jsonAdapter,[d],l,L,null,D)[0]:d};g.projectMany=function(d,l,L){return I.push(d,l,L)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K,k,I,d,l,L,D,G,N,f,h,r,x,T,C){function B(){return!!gb&&d.isLoaded()}function M(Q){A.isNone(Ya)&&(Ya=Promise.all([d.load(),(new Promise((ca,U)=>g(["../chunks/geometryEngineBase"],ca,U))).then(ca=>ca.geometryEngineBase),new Promise((ca,U)=>g(["./geometryAdapters/hydrated"],ca,U))]));return Ya.then(([,ca,{hydratedAdapter:U}])=>{z.throwIfAborted(Q);nb=U;gb=ca.default;gb._enableProjection(d.pe);dc.notify()})}function F(Q,ca,U=null,pa=null){return Array.isArray(Q)?0===
Q.length?[]:u(nb,Q,Q[0].spatialReference,ca,U,pa):u(nb,[Q],Q.spatialReference,ca,U,pa)[0]}function u(Q,ca,U,pa,za=null,Aa=null){if(A.isNone(U)||A.isNone(pa))return ca;if(Z(U,pa,za))return ca.map(Ia=>A.unwrap(ka(Ia,U,pa)));if(A.isNone(za)){const Ia=r.cacheKey(U,pa);void 0!==Eb[Ia]?za=Eb[Ia]:(za=q(U,pa,void 0),A.isNone(za)&&(za=new r),Eb[Ia]=za)}if(A.isNone(gb)||A.isNone(Q))throw new Fb;return A.isSome(Aa)?gb._project(Q,ca,U,pa,za,Aa):gb._project(Q,ca,U,pa,za)}function H(Q,ca){if(!B())for(const U of Q)if(A.isSome(U)&&
!x.equals(U.spatialReference,ca)&&x.isValid(U.spatialReference)&&x.isValid(ca)&&!Z(U.spatialReference,ca))return p.trackAccess(dc),{pending:M(),geometries:null};return{pending:null,geometries:Q.map(U=>A.isNone(U)?null:x.equals(U.spatialReference,ca)?U:x.isValid(U.spatialReference)&&x.isValid(ca)?R(U,ca):null)}}function q(Q,ca,U=null){if(A.isNone(Q)||A.isNone(ca))return null;if(A.isNone(gb)||A.isNone(nb))throw new Fb;Q=gb._getTransformation(nb,Q,ca,U,U?.spatialReference);return null!==Q?r.fromGE(Q):
null}function R(Q,ca){try{const U=F(Q,ca);if(null==U)return null;"xmin"in Q&&"xmin"in U&&(U.zmin=Q.zmin,U.zmax=Q.zmax);const pa=C.getGeometryZScaler(U.type,Q.spatialReference,ca);A.isSome(pa)&&pa(U);return U}catch(U){if(!(U instanceof Fb))throw U;return null}}function Z(Q,ca,U){return U?!1:x.equals(Q,ca)?!0:x.isValid(Q)&&x.isValid(ca)&&!!a(Q,ca,Tb)}function W(){W=ha._asyncToGenerator(function*(Q,ca,U,pa){if(B())return z.waitTick(pa);if(Array.isArray(Q))for(const {source:za,dest:Aa,geographicTransformation:Ia}of Q){if(!Z(za,
Aa,Ia))return M(pa)}else if(!Z(Q,ca,U))return M(pa);return z.waitTick(pa)});return W.apply(this,arguments)}function ka(Q,ca,U){return Q?"x"in Q?ba(Q,ca,new l,U,0):"xmin"in Q?Ba(Q,ca,new k,U,0):"rings"in Q?xa(Q,ca,new L,U,0):"paths"in Q?wa(Q,ca,new D,U,0):"points"in Q?qa(Q,ca,new I,U,0):null:null}function ba(Q,ca,U,pa,za){Pa[0]=Q.x;Pa[1]=Q.y;const Aa=Q.z;Pa[2]=void 0!==Aa?Aa:za;if(!Na(Pa,ca,0,Pa,pa,0,1))return null;U.x=Pa[0];U.y=Pa[1];U.spatialReference=pa;void 0===Aa?(U.z=void 0,U.hasZ=!1):(U.z=Pa[2],
U.hasZ=!0);void 0===Q.m?(U.m=void 0,U.hasM=!1):(U.m=Q.m,U.hasM=!0);return U}function qa(Q,ca,U,pa,za){const {points:Aa,hasZ:Ia,hasM:Ma}=Q;Q=[];const Va=Aa.length,Ua=[];for(var Ta of Aa)Ua.push(Ta[0],Ta[1],Ia?Ta[2]:za);if(!Na(Ua,ca,0,Ua,pa,0,Va))return null;for(ca=0;ca<Va;++ca){za=3*ca;Ta=Ua[za];const cb=Ua[za+1];Ia&&Ma?Q.push([Ta,cb,Ua[za+2],Aa[ca][3]]):Ia?Q.push([Ta,cb,Ua[za+2]]):Ma?Q.push([Ta,cb,Aa[ca][2]]):Q.push([Ta,cb])}U.points=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function wa(Q,
ca,U,pa,za){const {paths:Aa,hasZ:Ia,hasM:Ma}=Q;Q=[];if(!bb(Aa,Ia??!1,Ma??!1,ca,Q,pa,za))return null;U.paths=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function xa(Q,ca,U,pa,za){const {rings:Aa,hasZ:Ia,hasM:Ma}=Q;Q=[];if(!bb(Aa,Ia??!1,Ma??!1,ca,Q,pa,za))return null;U.rings=Q;U.spatialReference=pa;U.hasZ=Ia;U.hasM=Ma;return U}function Ba(Q,ca,U,pa,za){const {xmin:Aa,ymin:Ia,xmax:Ma,ymax:Va,hasZ:Ua,hasM:Ta}=Q;if(!Ca(Aa,Ia,Ua?Q.zmin:za,ca,Pa,pa))return null;U.xmin=Pa[0];U.ymin=Pa[1];Ua&&(U.zmin=
Pa[2]);if(!Ca(Ma,Va,Ua?Q.zmax:za,ca,Pa,pa))return null;U.xmax=Pa[0];U.ymax=Pa[1];Ua&&(U.zmax=Pa[2]);Ta&&(U.mmin=Q.mmin,U.mmax=Q.mmax);U.spatialReference=pa;return U}function Ca(Q,ca,U,pa,za,Aa){Ra[0]=Q;Ra[1]=ca;Ra[2]=U;return Na(Ra,pa,0,za,Aa,0,1)}function Ja(Q,ca,U,pa){if(A.isNone(ca)||A.isNone(pa)||2>Q.length)return!1;2===Q.length&&(Ra[0]=Q[0],Ra[1]=Q[1],Ra[2]=0,Q=Ra);return Na(Q,ca,0,U,pa,0,1)}function La(Q,ca,U){if(A.isNone(ca))return!1;ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(A.isNone(ca))return!1;
ca(Q,0,Ra,0);U!==Ra&&(U[0]=Ra[0],U[1]=Ra[1],2<U.length&&(U[2]=Ra[2]));return!0}function Na(Q,ca,U,pa,za,Aa,Ia=1){ca=a(ca,za,Tb);if(A.isNone(ca))return!1;if(ca===oa){if(Q===pa&&U===Aa)return!0;Ia=U+3*Ia;for(let Ma=U,Va=Aa;Ma<Ia;Ma++,Va++)pa[Va]=Q[Ma];return!0}Ia=U+3*Ia;for(let Ma=U,Va=Aa;Ma<Ia;Ma+=3,Va+=3)ca(Q,Ma,pa,Va);return!0}function bb(Q,ca,U,pa,za,Aa,Ia=0){const Ma=[];for(const Va of Q)for(const Ua of Va)Ma.push(Ua[0],Ua[1],ca?Ua[2]:Ia);if(!Na(Ma,pa,0,Ma,Aa,0,Ma.length/3))return!1;pa=0;za.length=
0;for(const Va of Q){Q=[];for(const Ua of Va)ca&&U?Q.push([Ma[pa++],Ma[pa++],Ma[pa++],Ua[3]]):ca?Q.push([Ma[pa++],Ma[pa++],Ma[pa++]]):(U?Q.push([Ma[pa++],Ma[pa++],Ua[2]]):Q.push([Ma[pa++],Ma[pa++]]),pa++);za.push(Q)}return!0}function b(Q,ca,U,pa){ca=pa+ca;if(ca<pa/2||U>ca)return Number.MAX_VALUE;Q=Math.abs(jb*Q)+Math.asin(U/ca);return Q>=Math.PI/2?Number.MAX_VALUE:U/Math.cos(Q)}function m(Q,ca,U){const pa=Math.sin(Q);Q=Math.cos(Q);const za=Math.sin(ca);ca=Math.cos(ca);U[0]=-pa;U[4]=-za*Q;U[8]=ca*
Q;U[12]=0;U[1]=Q;U[5]=-za*pa;U[9]=ca*pa;U[13]=0;U[2]=0;U[6]=ca;U[10]=za;U[14]=0;U[3]=0;U[7]=0;U[11]=0;U[15]=1;return U}function ea(Q,ca,U){m(Q,ca,U);P.transpose(U,U);return U}function ia(Q,ca){if(!Q)return la.UNKNOWN;if(ca.spatialReference===Q)return ca.spatialReferenceId;ca.spatialReference=Q;"metersPerUnit"in ca&&(ca.metersPerUnit=n.getMetersPerUnitForSR(Q,1));return Q.wkt===G.SphericalECEFSpatialReference.wkt?ca.spatialReferenceId=la.SPHERICAL_ECEF:x.isWGS84(Q)?ca.spatialReferenceId=la.WGS84:x.isWebMercator(Q)?
ca.spatialReferenceId=la.WEB_MERCATOR:x.isPlateCarree(Q)?ca.spatialReferenceId=la.PLATE_CARREE:Q.wkt===G.WGS84ECEFSpatialReference.wkt?ca.spatialReferenceId=la.WGS84_ECEF:Q.wkid===T.SupportedGCSWkids.CGCS2000?ca.spatialReferenceId=la.CGCS2000:Q.wkt===G.SphericalPCPFMars.wkt?ca.spatialReferenceId=la.SPHERICAL_MARS_PCPF:Q.wkt===G.SphericalPCPFMoon.wkt?ca.spatialReferenceId=la.SPHERICAL_MOON_PCPF:x.isMars(Q)?ca.spatialReferenceId=la.GCSMARS2000:x.isMoon(Q)?ca.spatialReferenceId=la.GCSMOON2000:ca.spatialReferenceId=
la.UNKNOWN}function oa(Q,ca,U,pa){Q!==U&&(U[pa++]=Q[ca++],U[pa++]=Q[ca++],U[pa]=Q[ca])}function y(Q,ca,U,pa){U[pa++]=xb*(Q[ca++]/f.earth.radius);U[pa++]=xb*(Math.PI/2-2*Math.atan(Math.exp(-Q[ca++]/f.earth.radius)));U[pa]=Q[ca]}function J(Q,ca,U,pa){y(Q,ca,U,pa);ma(U,pa,U,pa)}function S(Q,ca,U,pa){y(Q,ca,U,pa);ta(U,pa,U,pa)}function V(Q,ca,U,pa,za){var Aa=.4999999*Math.PI;Aa=t.clamp(jb*Q[ca+1],-Aa,Aa);Aa=Math.sin(Aa);U[pa++]=jb*Q[ca]*za.radius;U[pa++]=za.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));U[pa]=
Q[ca+2]}function fa(Q,ca,U,pa){V(Q,ca,U,pa,f.earth)}function ja(Q,ca,U,pa){U[pa]=Q[ca]*ec;U[pa+1]=Q[ca+1]*ec;U[pa+2]=Q[ca+2]}function na(Q,ca,U,pa){U[pa]=Q[ca]*Cb;U[pa+1]=Q[ca+1]*Cb;U[pa+2]=Q[ca+2]}function ra(Q,ca,U,pa){y(Q,ca,U,pa);ja(U,pa,U,pa)}function sa(Q,ca,U,pa,za){za+=Q[ca+2];const Aa=jb*Q[ca+1];Q=jb*Q[ca];ca=Math.cos(Aa);U[pa++]=Math.cos(Q)*ca*za;U[pa++]=Math.sin(Q)*ca*za;U[pa]=Math.sin(Aa)*za}function aa(Q,ca,U,pa){sa(Q,ca,U,pa,f.moon.radius)}function da(Q,ca,U,pa){sa(Q,ca,U,pa,f.mars.radius)}
function ma(Q,ca,U,pa){sa(Q,ca,U,pa,f.earth.radius)}function ya(Q,ca,U,pa,za){var Aa=Q[ca];const Ia=Q[ca+1];ca=Q[ca+2];Q=Math.sqrt(Aa*Aa+Ia*Ia+ca*ca);ca=t.asinClamped(ca/(0===Q?1:Q));Aa=Math.atan2(Ia,Aa);U[pa++]=xb*Aa;U[pa++]=xb*ca;U[pa]=Q-za}function Da(Q,ca,U,pa){ya(Q,ca,U,pa,f.moon.radius)}function Ga(Q,ca,U,pa){ya(Q,ca,U,pa,f.mars.radius)}function Ha(Q,ca,U,pa){ya(Q,ca,U,pa,f.earth.radius)}function Fa(Q,ca,U,pa){Ha(Q,ca,U,pa);fa(U,pa,U,pa)}function Ka(Q,ca,U,pa){Ha(Q,ca,U,pa);ta(U,pa,U,pa)}function ta(Q,
ca,U,pa){var za=f.earth;const Aa=jb*Q[ca];var Ia=jb*Q[ca+1];Q=Q[ca+2];ca=Math.sin(Ia);Ia=Math.cos(Ia);const Ma=za.radius/Math.sqrt(1-za.eccentricitySquared*ca*ca);U[pa++]=(Ma+Q)*Ia*Math.cos(Aa);U[pa++]=(Ma+Q)*Ia*Math.sin(Aa);U[pa++]=(Ma*(1-za.eccentricitySquared)+Q)*ca}function Wa(Q,ca,U,pa){var za=h.earthEllipsoidConstants,Aa=Q[ca],Ia=Q[ca+1];Q=Q[ca+2];let Ma;ca=Math.abs(Q);var Va=Aa*Aa+Ia*Ia;var Ua=Math.sqrt(Va);var Ta=Va+Q*Q;var cb=Math.sqrt(Ta);Aa=Math.atan2(Ia,Aa);var pb=Q*Q/Ta;Ta=Va/Ta;Ia=za.a2/
cb;Va=za.a3-za.a4/cb;.3<Ta?(pb=ca/cb*(1+Ta*(za.a1+Ia+pb*Va)/cb),cb=Math.asin(pb),Ia=pb*pb,Ta=Math.sqrt(1-Ia)):(Ta=Ua/cb*(1-pb*(za.a5-Ia-Ta*Va)/cb),cb=Math.acos(Ta),Ia=1-Ta*Ta,pb=Math.sqrt(Ia));Ma=1-f.earth.eccentricitySquared*Ia;Ia=f.earth.radius/Math.sqrt(Ma);za=za.a6*Ia;Ia=Ua-Ia*Ta;Va=ca-za*pb;ca=Ta*Ia+pb*Va;Ua=Ta*Va-pb*Ia;za=Ua/(za/Ma+ca);cb+=za;0>Q&&(cb=-cb);U[pa++]=xb*Aa;U[pa++]=xb*cb;U[pa]=ca+Ua*za/2}function ab(Q,ca,U,pa){Wa(Q,ca,U,pa);ma(U,pa,U,pa)}function $a(Q,ca,U,pa){Wa(Q,ca,U,pa);fa(U,
pa,U,pa)}function a(Q,ca,U=Sa()){return A.isNone(Q)||A.isNone(ca)?null:db(Q,ca,U).projector}function db(Q,ca,U){if(A.isNone(Q)||A.isNone(ca)||U.source.spatialReference===Q&&U.dest.spatialReference===ca)return U;const pa=ia(Q,U.source),za=ia(ca,U.dest);pa===la.UNKNOWN&&za===la.UNKNOWN?x.equals(Q,ca)?U.projector=oa:U.projector=null:U.projector=hb[pa][za];return U}function Sa(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,
metersPerUnit:1},projector:oa}}let gb=null,nb=null,Ya=null,Eb={};const dc=new w.SimpleObservable;let Fb=function(Q){function ca(){return Q.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ha._inheritsLoose(ca,Q);return ca}(O);var la;(function(Q){Q[Q.UNKNOWN=0]="UNKNOWN";Q[Q.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";Q[Q.WGS84=2]="WGS84";Q[Q.WEB_MERCATOR=3]="WEB_MERCATOR";Q[Q.WGS84_ECEF=4]="WGS84_ECEF";Q[Q.CGCS2000=5]="CGCS2000";Q[Q.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";Q[Q.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";Q[Q.GCSMARS2000=8]="GCSMARS2000";Q[Q.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";Q[Q.GCSMOON2000=10]="GCSMOON2000";Q[Q.LON_LAT=11]="LON_LAT";Q[Q.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const ec=f.earth.radius*Math.PI/180,Cb=180/(f.earth.radius*Math.PI),hb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.CGCS2000]:{[la.CGCS2000]:oa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ja,[la.WGS84]:null,[la.WGS84_ECEF]:ta},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:oa,[la.GCSMOON2000]:null,
[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:y,[la.WGS84_COMPARABLE_LON_LAT]:y,[la.SPHERICAL_ECEF]:J,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:oa,[la.PLATE_CARREE]:ra,[la.WGS84]:y,[la.WGS84_ECEF]:S},[la.WGS84_ECEF]:{[la.CGCS2000]:Wa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Wa,[la.WGS84_COMPARABLE_LON_LAT]:Wa,[la.SPHERICAL_ECEF]:ab,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:$a,[la.PLATE_CARREE]:function(Q,ca,U,pa){Wa(Q,ca,U,pa);ja(U,pa,U,pa)},[la.WGS84]:Wa,[la.WGS84_ECEF]:oa},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ha,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:Ha,[la.SPHERICAL_ECEF]:oa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(Q,ca,U,pa){Ha(Q,ca,U,pa);ja(U,pa,U,pa)},[la.WGS84]:Ha,
[la.WGS84_ECEF]:Ka},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ga,[la.GCSMOON2000]:null,[la.LON_LAT]:Ga,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:oa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Da,[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:oa,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:oa,
[la.GCSMARS2000]:oa,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.PLATE_CARREE]:{[la.CGCS2000]:na,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:function(Q,ca,U,pa){na(Q,ca,U,pa);ma(U,pa,U,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(Q,ca,U,pa){na(Q,ca,U,pa);fa(U,pa,U,pa)},[la.PLATE_CARREE]:oa,[la.WGS84]:na,[la.WGS84_ECEF]:function(Q,ca,U,pa){na(Q,ca,U,
pa);ta(U,pa,U,pa)}}},sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},fc={spatialReference:null,spatialReferenceId:la.UNKNOWN},Tb=Sa(),zc=Sa(),jb=t.deg2rad(1),xb=t.rad2deg(1),Ra=K.create(),ob=K.create(),tb=K.create(),Pa=K.create(),Hb=K.create();c.canProjectToWGS84ComparableLonLat=function(Q){if(A.isNone(Q))return!1;Q=ia(Q,sb);return!!hb[Q][la.WGS84_COMPARABLE_LON_LAT]};c.canProjectWithoutEngine=Z;c.computeENUToSphericalPCPFLocalRotation=m;c.computeSphericalPCPFToENULocalRotation=ea;c.computeTranslationToOriginAndRotation=
function(Q,ca,U,pa){if(A.isNone(Q)||A.isNone(pa))return!1;var za=ia(Q,sb),Aa=ia(pa,fc);if(za===Aa&&Aa!==la.SPHERICAL_ECEF&&Aa!==la.SPHERICAL_MARS_PCPF&&Aa!==la.SPHERICAL_MOON_PCPF&&(za!==la.UNKNOWN||x.equals(Q,pa)))return P.fromTranslation(U,ca),!0;if(Aa===la.SPHERICAL_ECEF||Aa===la.SPHERICAL_MARS_PCPF||Aa===la.SPHERICAL_MOON_PCPF){za=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(A.isNone(za)||A.isNone(Aa))return!1;za(ca,0,ob,0);Aa(ob,0,tb,0);m(jb*ob[0],jb*ob[1],U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];
return!0}if((Aa===la.WEB_MERCATOR||Aa===la.PLATE_CARREE)&&(za===la.WGS84||za===la.CGCS2000&&Aa===la.PLATE_CARREE||za===la.SPHERICAL_ECEF||za===la.WEB_MERCATOR)){Q=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(A.isNone(Q)||A.isNone(Aa))return!1;Q(ca,0,ob,0);Aa(ob,0,tb,0);za===la.SPHERICAL_ECEF?ea(jb*ob[0],jb*ob[1],U):P.identity(U);U[12]=tb[0];U[13]=tb[1];U[14]=tb[2];return!0}return!1};c.getProjectorName=function(Q,ca){switch(a(Q,ca,Tb)){case oa:return"copy3";case ma:return"wgs84ToSphericalECEF";case fa:return"wgs84ToWebMercator";
case ja:return"wgs84ToPlateCarree";case ta:return"wgs84ToWGS84ECEF";case y:return"webMercatorToWGS84";case J:return"webMercatorToSphericalECEF";case S:return"webMercatorToWGS84ECEF";case ra:return"webMercatorToPlateCarree";case Wa:return"wgs84ECEFToWGS84";case ab:return"wgs84ECEFToSphericalECEF";case $a:return"wgs84ECEFToWebMercator";case Ha:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ga:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";
case Ka:return"sphericalECEFToWGS84ECEF";case da:return"mars2000ToSphericalPCPF";case aa:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=q;c.getTransformations=function(Q,ca,U=null){if(A.isNone(gb)||A.isNone(nb))throw new Fb;Q=gb._getTransformationBySuitability(nb,Q,ca,U,U?.spatialReference);if(null!==Q){ca=[];for(const pa of Q)ca.push(r.fromGE(pa));return ca}return[]};c.initializeProjection=function(Q,ca,U,pa){return W.apply(this,arguments)};c.isLoaded=B;c.load=M;c.localLinearScaleFactors=
function(Q,ca,U,pa){if(A.isNone(ca)||A.isNone(pa))return!1;const za=ia(ca,sb);var Aa=ia(pa,fc);if(za===Aa&&za!==la.UNKNOWN||x.equals(ca,pa))return U[0]=1,U[1]=1,U[2]=1,!0;if(za===la.SPHERICAL_ECEF){ca=Y.length(Q);Q=ca/Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]);ca/=f.earth.radius;if(Aa===la.WEB_MERCATOR)return U[0]=Q*ca,U[1]=Q*ca,U[2]=1,!0;if(Aa===la.WGS84||Aa===la.CGCS2000)return Aa=Cb,U[0]=Aa*Q*ca,U[1]=Aa*ca,U[2]=1,!0}else if(za===la.PLATE_CARREE){if(Aa===la.WGS84||Aa===la.CGCS2000)return U[0]=Cb,U[1]=Cb,U[2]=
1,!0;if(Aa===la.WEB_MERCATOR)return Aa=Q[1]/f.earth.radius,U[0]=1,U[1]=1/Math.cos(Aa),U[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(Q,ca,U,pa){const za=Math.cos(U);Q[0]=Math.cos(ca)*za*pa;Q[1]=Math.sin(ca)*za*pa;Q[2]=Math.sin(U)*pa};c.lonLatToWebMercatorComparable=V;c.project=F;c.projectBoundingRect=function(Q,ca,U,pa){if(null==Q)return!1;if(x.equals(ca,pa))return N.copy(U,Q),!0;Ra[0]=Q[0];Ra[1]=Q[1];Ra[2]=0;if(!Na(Ra,ca,0,Ra,pa,0,1))return!1;U[0]=Ra[0];U[1]=Ra[1];Ra[0]=Q[2];Ra[1]=Q[3];Ra[2]=
0;if(!Na(Ra,ca,0,Ra,pa,0,1))return!1;U[2]=Ra[0];U[3]=Ra[1];return!0};c.projectBoundingSphere=function(Q,ca,U,pa){if(A.isNone(ca)||A.isNone(pa))return!1;ca=db(ca,pa,zc);if(ca.projector===oa)return U[0]=Q[0],U[1]=Q[1],U[2]=Q[2],U[3]=Q[3],!0;if(A.isNone(ca.projector))return!1;const {source:za,dest:Aa}=ca;if(Aa.spatialReferenceId===la.WEB_MERCATOR){ca=hb[za.spatialReferenceId][la.WGS84];if(A.isNone(ca))return!1;ca(Q,0,ob,0);fa(ob,0,U,0);U[3]=b(ob[1],Q[2],Q[3],f.earth.radius);return!0}if(za.spatialReferenceId!==
la.WGS84&&za.spatialReferenceId!==la.CGCS2000||Aa.spatialReferenceId!==la.PLATE_CARREE)ca.projector(Q,0,U,0),U[3]=Q[3]*(za.metersPerUnit??1)/(Aa.metersPerUnit??1);else{pa=hb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ia=Q[3];A.isSome(hb[za.spatialReferenceId][la.SPHERICAL_ECEF])&&A.isSome(pa)&&(Ia=b(Q[1],Q[2],Q[3],f.earth.radius));ca.projector(Q,0,U,0);U[3]=Ia}return!0};c.projectBuffer=Na;c.projectDirection=function(Q,ca,U,pa,za){Y.copy(Pa,Q);Y.add(Hb,Q,ca);Ja(Pa,U,Pa,za);Ja(Hb,U,Hb,za);Y.subtract(pa,
Hb,Pa);Y.normalize(pa,pa)};c.projectExtent=function(Q,ca,U=ca.spatialReference,pa=0){return A.isSome(Q.spatialReference)&&A.isSome(U)&&A.isSome(Ba(Q,Q.spatialReference,ca,U,pa))};c.projectMany=u;c.projectMultipoint=function(Q,ca,U=ca.spatialReference,pa=0){return A.isSome(Q.spatialReference)&&A.isSome(U)&&A.isSome(qa(Q,Q.spatialReference,ca,U,pa))};c.projectOrLoad=function(Q,ca){Q=H([Q],ca);return A.isSome(Q.pending)?{pending:Q.pending,geometry:null}:A.isSome(Q.geometries)?{pending:null,geometry:Q.geometries[0]}:
{pending:null,geometry:null}};c.projectOrLoadMany=H;c.projectPoint=function(Q,ca,U=ca.spatialReference,pa=0){return A.isSome(U)&&A.isSome(Q.spatialReference)&&A.isSome(ba(Q,Q.spatialReference,ca,U,pa))};c.projectPointToVector=function(Q,ca,U,pa=0){Pa[0]=Q.x;Pa[1]=Q.y;const za=Q.z;Pa[2]=void 0!==za?za:pa;return Na(Pa,Q.spatialReference,0,ca,U,0,1)};c.projectPointToWGS84ComparableLonLat=function(Q,ca){Pa[0]=Q.x;Pa[1]=Q.y;const U=Q.z;Pa[2]=void 0!==U?U:0;return La(Pa,Q.spatialReference,ca)};c.projectPolygon=
function(Q,ca,U=ca.spatialReference,pa=0){return A.isSome(Q.spatialReference)&&A.isSome(U)&&A.isSome(xa(Q,Q.spatialReference,ca,U,pa))};c.projectPolygonToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:ca,rings:U},pa,za=0){ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(A.isNone(ca))return!1;Q=Q?Aa=>Aa:Aa=>Y.set(Pa,Aa[0],Aa[1],za);for(const Aa of U){U=[];for(const Ia of Aa){const Ma=[0,0,za];ca(Q(Ia),0,Ma,0);U.push(Ma)}pa.push(U)}return!0};c.projectPolyline=function(Q,ca,U=ca.spatialReference,
pa=0){return A.isSome(Q.spatialReference)&&A.isSome(U)&&A.isSome(wa(Q,Q.spatialReference,ca,U,pa))};c.projectPolylineToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:ca,paths:U},pa,za=0){ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(A.isNone(ca))return!1;Q=Q?Aa=>Aa:Aa=>Y.set(Pa,Aa[0],Aa[1],za);for(const Aa of U){U=[];for(const Ia of Aa){const Ma=[0,0,za];ca(Q(Ia),0,Ma,0);U.push(Ma)}pa.push(U)}return!0};c.projectVectorToDehydratedPoint=function(Q,ca,U){return Na(Q,ca,0,Pa,U.spatialReference,
0,1)?(U.x=Pa[0],U.y=Pa[1],U.z=Pa[2],U):null};c.projectVectorToPoint=function(Q,ca,U){if(A.isNone(ca)||A.isNone(U))return null;const pa=new l({spatialReference:U});return Na(Q,ca,0,Pa,U,0,1)?(pa.x=Pa[0],pa.y=Pa[1],pa.z=Pa[2],pa):null};c.projectVectorToVector=Ja;c.projectVectorToWGS84ComparableLonLat=function(Q,ca,U){return La(Q,ca,U)};c.projectWithoutEngine=ka;c.projectXYZToVector=Ca;c.sphericalPCPFtoLonLatElevation=ya;c.test={get loadPromise(){return Ya}};c.tryProjectWithZConversion=R;c.unload=function(){Ya=
nb=gb=null;Eb={}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(g,c,ha,O,t,A,z,n){function p(ba){ba=q[ba];if(!ba)throw Error("unknown type");return ba}function w(ba){return H[ba].baseUnit}function P(ba,qa=null){qa=qa||
p(ba);return H[qa].baseUnit===ba}function Y(ba,qa,wa){if(qa===wa)return ba;const xa=p(qa);if(xa!==p(wa))throw Error("incompatible units");ba=P(qa,xa)?ba:ba*H[xa].units[qa].inBaseUnits;return P(wa,xa)?ba:ba/H[xa].units[wa].inBaseUnits}function K(ba,qa){ba=Y(ba,qa,"meters");return 3E3>Math.abs(ba)?"meters":"kilometers"}function k(ba,qa){ba=Y(ba,qa,"meters");return 1E5>Math.abs(ba)?"meters":"kilometers"}function I(ba,qa){ba=Y(ba,qa,"feet");return 1E3>Math.abs(ba)?"feet":"miles"}function d(ba,qa){ba=
Y(ba,qa,"feet");return 1E5>Math.abs(ba)?"feet":"miles"}function l(ba,qa){ba=Y(ba,qa,"square-meters");return 3E6>Math.abs(ba)?"square-meters":"square-kilometers"}function L(ba,qa){ba=Y(ba,qa,"square-feet");return 1E6>Math.abs(ba)?"square-feet":"square-miles"}function D(ba){return u.fromJSON(ba.toLowerCase())||null}function G(ba){const qa=N(ba),wa=t.getReferenceEllipsoid(ba).metersPerDegree;return qa>=wa?"meters":r(ba)}function N(ba,qa=A.earth.metersPerDegree){return O.unwrapOr(f(ba,!0),qa)}function f(ba,
qa=!1){const wa=O.isSome(ba)?ba.wkid:null;ba=O.isSome(ba)?ba.wkt:null;let xa=null;if(wa){if(z.isWKIDFromMars(wa))return A.mars.metersPerDegree;if(z.isWKIDFromMoon(wa))return A.moon.metersPerDegree;xa=B.values[B[wa]];!xa&&qa&&F.has(wa)&&(xa=T)}else ba&&(/^PROJCS/i.test(ba)?xa=h(C.exec(ba),xa):/^GEOCCS/i.test(ba)&&(xa=h(M.exec(ba),xa)));return xa}function h(ba,qa){return ba&&ba[1]?parseFloat(ba[1].split(",")[1]):qa}function r(ba){var qa=O.isSome(ba)?ba.wkid:null,wa=O.isSome(ba)?ba.wkt:null;ba=null;
if(qa)ba=B.units[B[qa]];else if(wa&&(qa=/^PROJCS/i.test(wa)?C:/^GEOCCS/i.test(wa)?M:null)&&(qa=qa.exec(wa))&&qa[1]&&(qa=qa[1],ba=(ba=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&ba[1],!ba||!B.units.includes(ba))){qa=parseFloat(qa.split(",")[1]);ba=null;wa=B.values;for(let xa=0;xa<wa.length;++xa)if(1E-7>Math.abs(qa-wa[xa])){ba=B.units[xa];break}}return O.isSome(ba)?D(ba):null}function x(ba){ba=r(ba);if(O.isNone(ba))return null;switch(ba){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const T=A.earth.radius*Math.PI/200,C=/UNIT\[([^\]]+)\]\]$/i,B=n,M=/UNIT\[([^\]]+)\]/i,F=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),u=ha.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};n={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(ba=>ba*ba)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const H={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:n},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},q=(()=>{const ba={};for(const qa in H)for(const wa in H[qa].units)ba[wa]=qa;return ba})(),R="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),Z=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),W={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ka={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};c=ha.strict()(W);n=ha.strict()(ka);ha=ha.strict()({...W,...ka});g.areaUnitFromSpatialReference=function(ba){ba=r(ba);return O.isNone(ba)?null:Z.get(ba)};g.areaUnitsJSONMap=c;g.baseUnitForUnit=function(ba){return w(p(ba))};g.baseUnitForUnitType=w;g.convertUnit=Y;g.getDefaultUnitForView=function(ba){if(O.isNone(ba))return"metric";var qa=ba.map;if(qa=qa&&"portalItem"in qa?qa.portalItem?.portal:null)switch(qa?.user?.units??qa.units){case "metric":return"metric";case "english":return"imperial"}return O.unwrapOr(x(ba.spatialReference),
"metric")};g.getDefaultUnitSystem=x;g.getMetersPerUnit=f;g.getMetersPerUnitForSR=N;g.getMetersPerVerticalUnitForSR=function(ba){if(O.isSome(ba)&&!z.isEarth(ba))return 1;ba=N(ba);return 1E5<ba?1:ba};g.getUnitString=r;g.getVerticalUnitStringForSR=G;g.inchesPerMeter=39.37;g.isBaseUnit=P;g.isMeasurementSystem=function(ba){return"imperial"===ba||"metric"===ba};g.lengthToDegrees=function(ba,qa,wa){return Y(ba,qa,"meters")/(wa*Math.PI/180)};g.lengthUnitFromSpatialReference=function(ba){ba=r(ba);return O.isNone(ba)||
!R.includes(ba)?null:ba};g.lengthUnitsJSONMap=n;g.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");g.measurementLengthUnits=R;g.preferredAreaUnit=function(ba,qa,wa){switch(wa){case "metric":return l(ba,qa);case "imperial":return L(ba,qa);default:return wa}};g.preferredImperialAreaUnit=L;g.preferredImperialLengthUnit=I;g.preferredImperialVerticalLengthUnit=d;g.preferredLengthUnit=
function(ba,qa,wa){switch(wa){case "metric":return K(ba,qa);case "imperial":return I(ba,qa);default:return wa}};g.preferredMetricAreaUnit=l;g.preferredMetricLengthUnit=K;g.preferredMetricVerticalLengthUnit=k;g.preferredVerticalLengthUnit=function(ba,qa,wa){switch(wa){case "metric":return k(ba,qa);case "imperial":return d(ba,qa);default:return wa}};g.unitFromRESTJSON=D;g.unitToRESTJSON=function(ba){return u.toJSON(ba)||null};g.unitType=p;g.unitsJSONMap=ha;g.verticalLengthUnitFromSpatialReference=function(ba){ba=
G(ba);return O.isNone(ba)||!R.includes(ba)?null:ba};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(g,c,ha,O,t){function A(P){return new ha({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${P.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const z=A(O.earth),n=A(O.mars),p=A(O.moon),w=new ha({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${O.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});g.SphericalECEFSpatialReference=z;g.SphericalPCPFMars=
n;g.SphericalPCPFMoon=p;g.WGS84ECEFSpatialReference=w;g.createSphericalPCPF=A;g.getReferenceEllipsoid=function(P){return c.isSome(P)&&(t.isMars(P)||P===n)?O.mars:c.isSome(P)&&(t.isMoon(P)||P===p)?O.moon:O.earth};g.getReferenceEllipsoidFromWKID=function(P){return t.isWKIDFromMars(P)?O.mars:t.isWKIDFromMoon(P)?O.moon:O.earth};g.getSphericalPCPF=function(P){return P&&(t.isMars(P)||P===n)?n:P&&(t.isMoon(P)||P===p)?p:z};g.getSphericalPCPFForEllipsoid=function(P){return P&&P===O.mars?n:P&&P===O.moon?p:
z};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(g,c){let ha=function(){function O(){this._observers=[]}var t=O.prototype;t.observe=function(A){this._observers.includes(A)||this._observers.push(A);return new c.ObservationHandle(this._observers,A)};t.notify=function(){const A=this._observers.slice();for(let z=0;z<A.length;++z){const n=A[z];
n.onInvalidated();n.onCommitted()}};return O}();g.SimpleObservable=ha;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(g,c,ha){function O(b,m){b[0]=m[0];b[1]=m[1];b[2]=m[2];b[3]=m[3];b[4]=m[4];b[5]=m[5];b[6]=m[6];b[7]=m[7];b[8]=m[8];b[9]=m[9];b[10]=m[10];b[11]=m[11];b[12]=m[12];b[13]=m[13];b[14]=m[14];b[15]=m[15];return b}function t(b,m,ea,ia,oa,y,J,S,V,fa,ja,na,ra,sa,aa,da,
ma){b[0]=m;b[1]=ea;b[2]=ia;b[3]=oa;b[4]=y;b[5]=J;b[6]=S;b[7]=V;b[8]=fa;b[9]=ja;b[10]=na;b[11]=ra;b[12]=sa;b[13]=aa;b[14]=da;b[15]=ma;return b}function A(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function z(b,m){if(b===m){const ea=m[1],ia=m[2],oa=m[3],y=m[6],J=m[7],S=m[11];b[1]=m[4];b[2]=m[8];b[3]=m[12];b[4]=ea;b[6]=m[9];b[7]=m[13];b[8]=ia;b[9]=y;b[11]=m[14];b[12]=oa;b[13]=J;b[14]=S}else b[0]=m[0],b[1]=m[4],b[2]=
m[8],b[3]=m[12],b[4]=m[1],b[5]=m[5],b[6]=m[9],b[7]=m[13],b[8]=m[2],b[9]=m[6],b[10]=m[10],b[11]=m[14],b[12]=m[3],b[13]=m[7],b[14]=m[11],b[15]=m[15];return b}function n(b,m){const ea=m[0],ia=m[1],oa=m[2],y=m[3],J=m[4],S=m[5],V=m[6],fa=m[7],ja=m[8],na=m[9],ra=m[10],sa=m[11],aa=m[12],da=m[13],ma=m[14];m=m[15];const ya=ea*S-ia*J,Da=ea*V-oa*J,Ga=ea*fa-y*J,Ha=ia*V-oa*S,Fa=ia*fa-y*S,Ka=oa*fa-y*V,ta=ja*da-na*aa,Wa=ja*ma-ra*aa,ab=ja*m-sa*aa,$a=na*ma-ra*da,a=na*m-sa*da,db=ra*m-sa*ma;let Sa=ya*db-Da*a+Ga*$a+
Ha*ab-Fa*Wa+Ka*ta;if(!Sa)return null;Sa=1/Sa;b[0]=(S*db-V*a+fa*$a)*Sa;b[1]=(oa*a-ia*db-y*$a)*Sa;b[2]=(da*Ka-ma*Fa+m*Ha)*Sa;b[3]=(ra*Fa-na*Ka-sa*Ha)*Sa;b[4]=(V*ab-J*db-fa*Wa)*Sa;b[5]=(ea*db-oa*ab+y*Wa)*Sa;b[6]=(ma*Ga-aa*Ka-m*Da)*Sa;b[7]=(ja*Ka-ra*Ga+sa*Da)*Sa;b[8]=(J*a-S*ab+fa*ta)*Sa;b[9]=(ia*ab-ea*a-y*ta)*Sa;b[10]=(aa*Fa-da*Ga+m*ya)*Sa;b[11]=(na*Ga-ja*Fa-sa*ya)*Sa;b[12]=(S*Wa-J*$a-V*ta)*Sa;b[13]=(ea*$a-ia*Wa+oa*ta)*Sa;b[14]=(da*Da-aa*Ha-ma*ya)*Sa;b[15]=(ja*Ha-na*Da+ra*ya)*Sa;return b}function p(b,
m){const ea=m[0],ia=m[1],oa=m[2],y=m[3],J=m[4],S=m[5],V=m[6],fa=m[7],ja=m[8],na=m[9],ra=m[10],sa=m[11],aa=m[12],da=m[13],ma=m[14];m=m[15];b[0]=S*(ra*m-sa*ma)-na*(V*m-fa*ma)+da*(V*sa-fa*ra);b[1]=-(ia*(ra*m-sa*ma)-na*(oa*m-y*ma)+da*(oa*sa-y*ra));b[2]=ia*(V*m-fa*ma)-S*(oa*m-y*ma)+da*(oa*fa-y*V);b[3]=-(ia*(V*sa-fa*ra)-S*(oa*sa-y*ra)+na*(oa*fa-y*V));b[4]=-(J*(ra*m-sa*ma)-ja*(V*m-fa*ma)+aa*(V*sa-fa*ra));b[5]=ea*(ra*m-sa*ma)-ja*(oa*m-y*ma)+aa*(oa*sa-y*ra);b[6]=-(ea*(V*m-fa*ma)-J*(oa*m-y*ma)+aa*(oa*fa-y*
V));b[7]=ea*(V*sa-fa*ra)-J*(oa*sa-y*ra)+ja*(oa*fa-y*V);b[8]=J*(na*m-sa*da)-ja*(S*m-fa*da)+aa*(S*sa-fa*na);b[9]=-(ea*(na*m-sa*da)-ja*(ia*m-y*da)+aa*(ia*sa-y*na));b[10]=ea*(S*m-fa*da)-J*(ia*m-y*da)+aa*(ia*fa-y*S);b[11]=-(ea*(S*sa-fa*na)-J*(ia*sa-y*na)+ja*(ia*fa-y*S));b[12]=-(J*(na*ma-ra*da)-ja*(S*ma-V*da)+aa*(S*ra-V*na));b[13]=ea*(na*ma-ra*da)-ja*(ia*ma-oa*da)+aa*(ia*ra-oa*na);b[14]=-(ea*(S*ma-V*da)-J*(ia*ma-oa*da)+aa*(ia*V-oa*S));b[15]=ea*(S*ra-V*na)-J*(ia*ra-oa*na)+ja*(ia*V-oa*S);return b}function w(b){const m=
b[0],ea=b[1],ia=b[2],oa=b[3],y=b[4],J=b[5],S=b[6],V=b[7],fa=b[8],ja=b[9],na=b[10],ra=b[11],sa=b[12],aa=b[13],da=b[14];b=b[15];return(m*J-ea*y)*(na*b-ra*da)-(m*S-ia*y)*(ja*b-ra*aa)+(m*V-oa*y)*(ja*da-na*aa)+(ea*S-ia*J)*(fa*b-ra*sa)-(ea*V-oa*J)*(fa*da-na*sa)+(ia*V-oa*S)*(fa*aa-ja*sa)}function P(b,m,ea){const ia=m[0],oa=m[1],y=m[2],J=m[3],S=m[4],V=m[5],fa=m[6],ja=m[7],na=m[8],ra=m[9],sa=m[10],aa=m[11],da=m[12],ma=m[13],ya=m[14];m=m[15];let Da=ea[0],Ga=ea[1],Ha=ea[2],Fa=ea[3];b[0]=Da*ia+Ga*S+Ha*na+Fa*
da;b[1]=Da*oa+Ga*V+Ha*ra+Fa*ma;b[2]=Da*y+Ga*fa+Ha*sa+Fa*ya;b[3]=Da*J+Ga*ja+Ha*aa+Fa*m;Da=ea[4];Ga=ea[5];Ha=ea[6];Fa=ea[7];b[4]=Da*ia+Ga*S+Ha*na+Fa*da;b[5]=Da*oa+Ga*V+Ha*ra+Fa*ma;b[6]=Da*y+Ga*fa+Ha*sa+Fa*ya;b[7]=Da*J+Ga*ja+Ha*aa+Fa*m;Da=ea[8];Ga=ea[9];Ha=ea[10];Fa=ea[11];b[8]=Da*ia+Ga*S+Ha*na+Fa*da;b[9]=Da*oa+Ga*V+Ha*ra+Fa*ma;b[10]=Da*y+Ga*fa+Ha*sa+Fa*ya;b[11]=Da*J+Ga*ja+Ha*aa+Fa*m;Da=ea[12];Ga=ea[13];Ha=ea[14];Fa=ea[15];b[12]=Da*ia+Ga*S+Ha*na+Fa*da;b[13]=Da*oa+Ga*V+Ha*ra+Fa*ma;b[14]=Da*y+Ga*fa+Ha*
sa+Fa*ya;b[15]=Da*J+Ga*ja+Ha*aa+Fa*m;return b}function Y(b,m,ea){const ia=ea[0],oa=ea[1];ea=ea[2];if(m===b)b[12]=m[0]*ia+m[4]*oa+m[8]*ea+m[12],b[13]=m[1]*ia+m[5]*oa+m[9]*ea+m[13],b[14]=m[2]*ia+m[6]*oa+m[10]*ea+m[14],b[15]=m[3]*ia+m[7]*oa+m[11]*ea+m[15];else{const y=m[0],J=m[1],S=m[2],V=m[3],fa=m[4],ja=m[5],na=m[6],ra=m[7],sa=m[8],aa=m[9],da=m[10],ma=m[11];b[0]=y;b[1]=J;b[2]=S;b[3]=V;b[4]=fa;b[5]=ja;b[6]=na;b[7]=ra;b[8]=sa;b[9]=aa;b[10]=da;b[11]=ma;b[12]=y*ia+fa*oa+sa*ea+m[12];b[13]=J*ia+ja*oa+aa*
ea+m[13];b[14]=S*ia+na*oa+da*ea+m[14];b[15]=V*ia+ra*oa+ma*ea+m[15]}return b}function K(b,m,ea){const ia=ea[0],oa=ea[1];ea=ea[2];b[0]=m[0]*ia;b[1]=m[1]*ia;b[2]=m[2]*ia;b[3]=m[3]*ia;b[4]=m[4]*oa;b[5]=m[5]*oa;b[6]=m[6]*oa;b[7]=m[7]*oa;b[8]=m[8]*ea;b[9]=m[9]*ea;b[10]=m[10]*ea;b[11]=m[11]*ea;b[12]=m[12];b[13]=m[13];b[14]=m[14];b[15]=m[15];return b}function k(b,m,ea,ia){let oa=ia[0],y=ia[1];ia=ia[2];let J=Math.sqrt(oa*oa+y*y+ia*ia);var S=void 0,V=void 0;let fa=void 0,ja=void 0,na=void 0,ra=void 0,sa=void 0,
aa=void 0,da=void 0,ma=void 0,ya=void 0,Da=void 0,Ga=void 0,Ha=void 0,Fa=void 0,Ka=void 0,ta=void 0,Wa=void 0,ab=void 0,$a=void 0,a=void 0,db=void 0;V=S=void 0;if(J<ha.getEpsilon())return null;J=1/J;oa*=J;y*=J;ia*=J;S=Math.sin(ea);V=Math.cos(ea);fa=1-V;ja=m[0];na=m[1];ra=m[2];sa=m[3];aa=m[4];da=m[5];ma=m[6];ya=m[7];Da=m[8];Ga=m[9];Ha=m[10];Fa=m[11];Ka=oa*oa*fa+V;ta=y*oa*fa+ia*S;Wa=ia*oa*fa-y*S;ab=oa*y*fa-ia*S;$a=y*y*fa+V;a=ia*y*fa+oa*S;db=oa*ia*fa+y*S;S=y*ia*fa-oa*S;V=ia*ia*fa+V;b[0]=ja*Ka+aa*ta+
Da*Wa;b[1]=na*Ka+da*ta+Ga*Wa;b[2]=ra*Ka+ma*ta+Ha*Wa;b[3]=sa*Ka+ya*ta+Fa*Wa;b[4]=ja*ab+aa*$a+Da*a;b[5]=na*ab+da*$a+Ga*a;b[6]=ra*ab+ma*$a+Ha*a;b[7]=sa*ab+ya*$a+Fa*a;b[8]=ja*db+aa*S+Da*V;b[9]=na*db+da*S+Ga*V;b[10]=ra*db+ma*S+Ha*V;b[11]=sa*db+ya*S+Fa*V;m!==b&&(b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);return b}function I(b,m,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=m[4],y=m[5],J=m[6],S=m[7],V=m[8],fa=m[9],ja=m[10],na=m[11];m!==b&&(b[0]=m[0],b[1]=m[1],b[2]=m[2],b[3]=m[3],b[12]=m[12],b[13]=
m[13],b[14]=m[14],b[15]=m[15]);b[4]=oa*ea+V*ia;b[5]=y*ea+fa*ia;b[6]=J*ea+ja*ia;b[7]=S*ea+na*ia;b[8]=V*ea-oa*ia;b[9]=fa*ea-y*ia;b[10]=ja*ea-J*ia;b[11]=na*ea-S*ia;return b}function d(b,m,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=m[0],y=m[1],J=m[2],S=m[3],V=m[8],fa=m[9],ja=m[10],na=m[11];m!==b&&(b[4]=m[4],b[5]=m[5],b[6]=m[6],b[7]=m[7],b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);b[0]=oa*ea-V*ia;b[1]=y*ea-fa*ia;b[2]=J*ea-ja*ia;b[3]=S*ea-na*ia;b[8]=oa*ia+V*ea;b[9]=y*ia+fa*ea;b[10]=J*ia+ja*
ea;b[11]=S*ia+na*ea;return b}function l(b,m,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=m[0],y=m[1],J=m[2],S=m[3],V=m[4],fa=m[5],ja=m[6],na=m[7];m!==b&&(b[8]=m[8],b[9]=m[9],b[10]=m[10],b[11]=m[11],b[12]=m[12],b[13]=m[13],b[14]=m[14],b[15]=m[15]);b[0]=oa*ea+V*ia;b[1]=y*ea+fa*ia;b[2]=J*ea+ja*ia;b[3]=S*ea+na*ia;b[4]=V*ea-oa*ia;b[5]=fa*ea-y*ia;b[6]=ja*ea-J*ia;b[7]=na*ea-S*ia;return b}function L(b,m){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=m[0];
b[13]=m[1];b[14]=m[2];b[15]=1;return b}function D(b,m){b[0]=m[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=m[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function G(b,m,ea){if(0===m)return A(b);let ia=ea[0],oa=ea[1];ea=ea[2];let y=Math.sqrt(ia*ia+oa*oa+ea*ea),J=void 0,S=void 0,V=void 0;if(y<ha.getEpsilon())return null;y=1/y;ia*=y;oa*=y;ea*=y;J=Math.sin(m);S=Math.cos(m);V=1-S;b[0]=ia*ia*V+S;b[1]=oa*ia*V+ea*J;b[2]=ea*ia*V-oa*J;b[3]=0;b[4]=ia*oa*V-ea*J;b[5]=oa*oa*
V+S;b[6]=ea*oa*V+ia*J;b[7]=0;b[8]=ia*ea*V+oa*J;b[9]=oa*ea*V-ia*J;b[10]=ea*ea*V+S;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function N(b,m){const ea=Math.sin(m);m=Math.cos(m);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m;b[6]=ea;b[7]=0;b[8]=0;b[9]=-ea;b[10]=m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function f(b,m){const ea=Math.sin(m);m=Math.cos(m);b[0]=m;b[1]=0;b[2]=-ea;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=ea;b[9]=0;b[10]=m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function h(b,
m){const ea=Math.sin(m);m=Math.cos(m);b[0]=m;b[1]=ea;b[2]=0;b[3]=0;b[4]=-ea;b[5]=m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function r(b,m,ea){var ia=m[0],oa=m[1],y=m[2],J=m[3],S=ia+ia,V=oa+oa;const fa=y+y;m=ia*S;const ja=ia*V;ia*=fa;const na=oa*V;oa*=fa;y*=fa;S*=J;V*=J;J*=fa;b[0]=1-(na+y);b[1]=ja+J;b[2]=ia-V;b[3]=0;b[4]=ja-J;b[5]=1-(m+y);b[6]=oa+S;b[7]=0;b[8]=ia+V;b[9]=oa-S;b[10]=1-(m+na);b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function x(b,
m){const ea=bb,ia=-m[0],oa=-m[1],y=-m[2],J=m[3],S=m[4],V=m[5],fa=m[6],ja=m[7],na=ia*ia+oa*oa+y*y+J*J;0<na?(ea[0]=2*(S*J+ja*ia+V*y-fa*oa)/na,ea[1]=2*(V*J+ja*oa+fa*ia-S*y)/na,ea[2]=2*(fa*J+ja*y+S*oa-V*ia)/na):(ea[0]=2*(S*J+ja*ia+V*y-fa*oa),ea[1]=2*(V*J+ja*oa+fa*ia-S*y),ea[2]=2*(fa*J+ja*y+S*oa-V*ia));r(b,m,ea);return b}function T(b,m){b[0]=m[12];b[1]=m[13];b[2]=m[14];return b}function C(b,m){const ea=m[0],ia=m[1],oa=m[2],y=m[4],J=m[5],S=m[6],V=m[8],fa=m[9];m=m[10];b[0]=Math.sqrt(ea*ea+ia*ia+oa*oa);b[1]=
Math.sqrt(y*y+J*J+S*S);b[2]=Math.sqrt(V*V+fa*fa+m*m);return b}function B(b,m){const ea=m[0]+m[5]+m[10];let ia=0;0<ea?(ia=2*Math.sqrt(ea+1),b[3]=.25*ia,b[0]=(m[6]-m[9])/ia,b[1]=(m[8]-m[2])/ia,b[2]=(m[1]-m[4])/ia):m[0]>m[5]&&m[0]>m[10]?(ia=2*Math.sqrt(1+m[0]-m[5]-m[10]),b[3]=(m[6]-m[9])/ia,b[0]=.25*ia,b[1]=(m[1]+m[4])/ia,b[2]=(m[8]+m[2])/ia):m[5]>m[10]?(ia=2*Math.sqrt(1+m[5]-m[0]-m[10]),b[3]=(m[8]-m[2])/ia,b[0]=(m[1]+m[4])/ia,b[1]=.25*ia,b[2]=(m[6]+m[9])/ia):(ia=2*Math.sqrt(1+m[10]-m[0]-m[5]),b[3]=
(m[1]-m[4])/ia,b[0]=(m[8]+m[2])/ia,b[1]=(m[6]+m[9])/ia,b[2]=.25*ia);return b}function M(b,m,ea,ia){var oa=m[0],y=m[1],J=m[2],S=m[3],V=oa+oa,fa=y+y,ja=J+J;m=oa*V;const na=oa*fa;oa*=ja;const ra=y*fa;y*=ja;J*=ja;V*=S;fa*=S;S*=ja;ja=ia[0];const sa=ia[1];ia=ia[2];b[0]=(1-(ra+J))*ja;b[1]=(na+S)*ja;b[2]=(oa-fa)*ja;b[3]=0;b[4]=(na-S)*sa;b[5]=(1-(m+J))*sa;b[6]=(y+V)*sa;b[7]=0;b[8]=(oa+fa)*ia;b[9]=(y-V)*ia;b[10]=(1-(m+ra))*ia;b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function F(b,m,ea,ia,
oa){var y=m[0],J=m[1],S=m[2],V=m[3],fa=y+y,ja=J+J,na=S+S;m=y*fa;var ra=y*ja,sa=y*na;y=J*ja;J*=na;var aa=S*na;S=V*fa;ja*=V;const da=V*na;var ma=ia[0],ya=ia[1];na=ia[2];ia=oa[0];V=oa[1];oa=oa[2];fa=(1-(y+aa))*ma;const Da=(ra+da)*ma;ma*=sa-ja;ra=(ra-da)*ya;aa=(1-(m+aa))*ya;ya*=J+S;sa=(sa+ja)*na;J=(J-S)*na;m=(1-(m+y))*na;b[0]=fa;b[1]=Da;b[2]=ma;b[3]=0;b[4]=ra;b[5]=aa;b[6]=ya;b[7]=0;b[8]=sa;b[9]=J;b[10]=m;b[11]=0;b[12]=ea[0]+ia-(fa*ia+ra*V+sa*oa);b[13]=ea[1]+V-(Da*ia+aa*V+J*oa);b[14]=ea[2]+oa-(ma*ia+ya*
V+m*oa);b[15]=1;return b}function u(b,m){var ea=m[0],ia=m[1],oa=m[2];m=m[3];var y=ea+ea,J=ia+ia;const S=oa+oa;ea*=y;const V=ia*y;ia*=J;const fa=oa*y,ja=oa*J;oa*=S;y*=m;J*=m;m*=S;b[0]=1-ia-oa;b[1]=V+m;b[2]=fa-J;b[3]=0;b[4]=V-m;b[5]=1-ea-oa;b[6]=ja+y;b[7]=0;b[8]=fa+J;b[9]=ja-y;b[10]=1-ea-ia;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function H(b,m,ea,ia,oa,y,J){const S=1/(ea-m),V=1/(oa-ia),fa=1/(y-J);b[0]=2*y*S;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*y*V;b[6]=0;b[7]=0;b[8]=(ea+m)*S;b[9]=(oa+ia)*V;
b[10]=(J+y)*fa;b[11]=-1;b[12]=0;b[13]=0;b[14]=J*y*2*fa;b[15]=0;return b}function q(b,m,ea,ia,oa){m=1/Math.tan(m/2);let y=void 0;b[0]=m/ea;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=oa&&Infinity!==oa?(y=1/(ia-oa),b[10]=(oa+ia)*y,b[14]=2*oa*ia*y):(b[10]=-1,b[14]=-2*ia);return b}function R(b,m,ea,ia){const oa=Math.tan(m.upDegrees*Math.PI/180),y=Math.tan(m.downDegrees*Math.PI/180),J=Math.tan(m.leftDegrees*Math.PI/180);m=Math.tan(m.rightDegrees*
Math.PI/180);const S=2/(J+m),V=2/(oa+y);b[0]=S;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=V;b[6]=0;b[7]=0;b[8]=-((J-m)*S*.5);b[9]=(oa-y)*V*.5;b[10]=ia/(ea-ia);b[11]=-1;b[12]=0;b[13]=0;b[14]=ia*ea/(ea-ia);b[15]=0;return b}function Z(b,m,ea,ia,oa,y,J){const S=1/(m-ea),V=1/(ia-oa),fa=1/(y-J);b[0]=-2*S;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*V;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*fa;b[11]=0;b[12]=(m+ea)*S;b[13]=(oa+ia)*V;b[14]=(J+y)*fa;b[15]=1;return b}function W(b,m,ea,ia){var oa=void 0;let y=void 0;var J=void 0,S=
void 0;let V=void 0,fa=void 0;var ja=void 0,na=void 0;let ra=void 0,sa=void 0;const aa=m[0],da=m[1];m=m[2];J=ia[0];S=ia[1];ia=ia[2];ja=ea[0];na=ea[1];ea=ea[2];oa=ha.getEpsilon();if(Math.abs(aa-ja)<oa&&Math.abs(da-na)<oa&&Math.abs(m-ea)<oa)return A(b);ja=aa-ja;na=da-na;ra=m-ea;sa=1/Math.sqrt(ja*ja+na*na+ra*ra);ja*=sa;na*=sa;ra*=sa;oa=S*ra-ia*na;y=ia*ja-J*ra;J=J*na-S*ja;(sa=Math.sqrt(oa*oa+y*y+J*J))?(sa=1/sa,oa*=sa,y*=sa,J*=sa):J=y=oa=0;S=na*J-ra*y;V=ra*oa-ja*J;fa=ja*y-na*oa;(sa=Math.sqrt(S*S+V*V+fa*
fa))?(sa=1/sa,S*=sa,V*=sa,fa*=sa):fa=V=S=0;b[0]=oa;b[1]=S;b[2]=ja;b[3]=0;b[4]=y;b[5]=V;b[6]=na;b[7]=0;b[8]=J;b[9]=fa;b[10]=ra;b[11]=0;b[12]=-(oa*aa+y*da+J*m);b[13]=-(S*aa+V*da+fa*m);b[14]=-(ja*aa+na*da+ra*m);b[15]=1;return b}function ka(b,m,ea,ia){const oa=m[0],y=m[1];m=m[2];var J=ia[0];const S=ia[1];var V=ia[2];ia=oa-ea[0];let fa=y-ea[1];ea=m-ea[2];let ja=ia*ia+fa*fa+ea*ea;0<ja&&(ja=1/Math.sqrt(ja),ia*=ja,fa*=ja,ea*=ja);let na=S*ea-V*fa;V=V*ia-J*ea;J=J*fa-S*ia;ja=na*na+V*V+J*J;0<ja&&(ja=1/Math.sqrt(ja),
na*=ja,V*=ja,J*=ja);b[0]=na;b[1]=V;b[2]=J;b[3]=0;b[4]=fa*J-ea*V;b[5]=ea*na-ia*J;b[6]=ia*V-fa*na;b[7]=0;b[8]=ia;b[9]=fa;b[10]=ea;b[11]=0;b[12]=oa;b[13]=y;b[14]=m;b[15]=1;return b}function ba(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function qa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+
b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function wa(b,m,ea){b[0]=m[0]+ea[0];b[1]=m[1]+ea[1];b[2]=m[2]+ea[2];b[3]=m[3]+ea[3];b[4]=m[4]+ea[4];b[5]=m[5]+ea[5];b[6]=m[6]+ea[6];b[7]=m[7]+ea[7];b[8]=m[8]+ea[8];b[9]=m[9]+ea[9];b[10]=m[10]+ea[10];b[11]=m[11]+ea[11];b[12]=m[12]+ea[12];b[13]=m[13]+ea[13];b[14]=m[14]+ea[14];b[15]=m[15]+ea[15];return b}function xa(b,m,ea){b[0]=m[0]-ea[0];b[1]=m[1]-ea[1];b[2]=m[2]-ea[2];b[3]=m[3]-ea[3];b[4]=m[4]-ea[4];b[5]=m[5]-ea[5];b[6]=m[6]-ea[6];b[7]=m[7]-ea[7];b[8]=m[8]-ea[8];
b[9]=m[9]-ea[9];b[10]=m[10]-ea[10];b[11]=m[11]-ea[11];b[12]=m[12]-ea[12];b[13]=m[13]-ea[13];b[14]=m[14]-ea[14];b[15]=m[15]-ea[15];return b}function Ba(b,m,ea){b[0]=m[0]*ea;b[1]=m[1]*ea;b[2]=m[2]*ea;b[3]=m[3]*ea;b[4]=m[4]*ea;b[5]=m[5]*ea;b[6]=m[6]*ea;b[7]=m[7]*ea;b[8]=m[8]*ea;b[9]=m[9]*ea;b[10]=m[10]*ea;b[11]=m[11]*ea;b[12]=m[12]*ea;b[13]=m[13]*ea;b[14]=m[14]*ea;b[15]=m[15]*ea;return b}function Ca(b,m,ea,ia){b[0]=m[0]+ea[0]*ia;b[1]=m[1]+ea[1]*ia;b[2]=m[2]+ea[2]*ia;b[3]=m[3]+ea[3]*ia;b[4]=m[4]+ea[4]*
ia;b[5]=m[5]+ea[5]*ia;b[6]=m[6]+ea[6]*ia;b[7]=m[7]+ea[7]*ia;b[8]=m[8]+ea[8]*ia;b[9]=m[9]+ea[9]*ia;b[10]=m[10]+ea[10]*ia;b[11]=m[11]+ea[11]*ia;b[12]=m[12]+ea[12]*ia;b[13]=m[13]+ea[13]*ia;b[14]=m[14]+ea[14]*ia;b[15]=m[15]+ea[15]*ia;return b}function Ja(b,m){return b[0]===m[0]&&b[1]===m[1]&&b[2]===m[2]&&b[3]===m[3]&&b[4]===m[4]&&b[5]===m[5]&&b[6]===m[6]&&b[7]===m[7]&&b[8]===m[8]&&b[9]===m[9]&&b[10]===m[10]&&b[11]===m[11]&&b[12]===m[12]&&b[13]===m[13]&&b[14]===m[14]&&b[15]===m[15]}function La(b,m){if(b===
m)return!0;const ea=b[0],ia=b[1],oa=b[2],y=b[3],J=b[4],S=b[5],V=b[6],fa=b[7],ja=b[8],na=b[9],ra=b[10],sa=b[11],aa=b[12],da=b[13],ma=b[14];b=b[15];const ya=m[0],Da=m[1],Ga=m[2],Ha=m[3],Fa=m[4],Ka=m[5],ta=m[6],Wa=m[7],ab=m[8],$a=m[9],a=m[10],db=m[11],Sa=m[12],gb=m[13],nb=m[14];m=m[15];const Ya=ha.getEpsilon();return Math.abs(ea-ya)<=Ya*Math.max(1,Math.abs(ea),Math.abs(ya))&&Math.abs(ia-Da)<=Ya*Math.max(1,Math.abs(ia),Math.abs(Da))&&Math.abs(oa-Ga)<=Ya*Math.max(1,Math.abs(oa),Math.abs(Ga))&&Math.abs(y-
Ha)<=Ya*Math.max(1,Math.abs(y),Math.abs(Ha))&&Math.abs(J-Fa)<=Ya*Math.max(1,Math.abs(J),Math.abs(Fa))&&Math.abs(S-Ka)<=Ya*Math.max(1,Math.abs(S),Math.abs(Ka))&&Math.abs(V-ta)<=Ya*Math.max(1,Math.abs(V),Math.abs(ta))&&Math.abs(fa-Wa)<=Ya*Math.max(1,Math.abs(fa),Math.abs(Wa))&&Math.abs(ja-ab)<=Ya*Math.max(1,Math.abs(ja),Math.abs(ab))&&Math.abs(na-$a)<=Ya*Math.max(1,Math.abs(na),Math.abs($a))&&Math.abs(ra-a)<=Ya*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-db)<=Ya*Math.max(1,Math.abs(sa),Math.abs(db))&&
Math.abs(aa-Sa)<=Ya*Math.max(1,Math.abs(aa),Math.abs(Sa))&&Math.abs(da-gb)<=Ya*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ma-nb)<=Ya*Math.max(1,Math.abs(ma),Math.abs(nb))&&Math.abs(b-m)<=Ya*Math.max(1,Math.abs(b),Math.abs(m))}function Na(b){const m=ha.getEpsilon(),ea=b[0],ia=b[1],oa=b[2],y=b[4],J=b[5],S=b[6],V=b[8],fa=b[9];b=b[10];return Math.abs(1-(ea*ea+y*y+V*V))<=m&&Math.abs(1-(ia*ia+J*J+fa*fa))<=m&&Math.abs(1-(oa*oa+S*S+b*b))<=m}const bb=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,
copy:O,set:t,identity:A,transpose:z,invert:n,adjoint:p,determinant:w,multiply:P,translate:Y,scale:K,rotate:k,rotateX:I,rotateY:d,rotateZ:l,fromTranslation:L,fromScaling:D,fromRotation:G,fromXRotation:N,fromYRotation:f,fromZRotation:h,fromRotationTranslation:r,fromQuat2:x,getTranslation:T,getScaling:C,getRotation:B,fromRotationTranslationScale:M,fromRotationTranslationScaleOrigin:F,fromQuat:u,frustum:H,perspective:q,perspectiveFromFieldOfView:R,ortho:Z,lookAt:W,targetTo:ka,str:ba,frob:qa,add:wa,subtract:xa,
multiplyScalar:Ba,multiplyScalarAndAdd:Ca,exactEquals:Ja,equals:La,isOrthoNormal:Na,mul:P,sub:xa},Symbol.toStringTag,{value:"Module"}));g.add=wa;g.adjoint=p;g.copy=O;g.determinant=w;g.equals=La;g.exactEquals=Ja;g.frob=qa;g.fromQuat=u;g.fromQuat2=x;g.fromRotation=G;g.fromRotationTranslation=r;g.fromRotationTranslationScale=M;g.fromRotationTranslationScaleOrigin=F;g.fromScaling=D;g.fromTranslation=L;g.fromXRotation=N;g.fromYRotation=f;g.fromZRotation=h;g.frustum=H;g.getRotation=B;g.getScaling=C;g.getTranslation=
T;g.identity=A;g.invert=n;g.isOrthoNormal=Na;g.lookAt=W;g.mat4=c;g.mul=P;g.multiply=P;g.multiplyScalar=Ba;g.multiplyScalarAndAdd=Ca;g.ortho=Z;g.perspective=q;g.perspectiveFromFieldOfView=R;g.rotate=k;g.rotateX=I;g.rotateY=d;g.rotateZ=l;g.scale=K;g.set=t;g.str=ba;g.sub=xa;g.subtract=xa;g.targetTo=ka;g.translate=Y;g.transpose=z})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(g,c,ha,O,t){function A(){return!!c._pe}function z(){return!!t("esri-wasm")}
function n(){return k?k:k=(new Promise((d,l)=>g(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>O.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{p(d)})}function p(d){function l(G,N,f){G[N]=f(G[N])}c._pe=d;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(G){function N(){return G.apply(this,arguments)||this}ha._inheritsLoose(N,G);N.prototype.destroy=function(){c._pe.destroy(this)};return N}(c._pe.PeGCSExtent);
d=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var L of d)l(L.prototype,"getName",G=>function(){return G.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const G of[c._pe.PeGeogtran,c._pe.PeProjcs])l(G.prototype,"getParameters",N=>function(){const f=Array(c.PeDefs.PE_PARM_MAX);let h=N.call(this);for(let r=0;r<f.length;r++){const x=c._pe.getValue(h,"*");f[r]=x?c._pe.wrapPointer(x,c._pe.PeParameter):null;
h+=Int32Array.BYTES_PER_ELEMENT}return f});l(c._pe.PeHorizon.prototype,"getCoord",G=>function(){const N=this.getSize();if(!N)return null;const f=[],h=G.call(this);K(f,N,h);return f});l(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",G=>{const N=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let f=null;var h=G.call(this);if(!c._pe.compare(h,c._pe.NULL)){f=[h];const r=this.getSteps();if(1<r){h=c._pe.getPointer(h);for(let x=1;x<r;x++)f.push(c._pe.wrapPointer(h+N*x,c._pe.PeGTlistExtendedGTs))}}return f}});
const D=c._pe._pe_getPeHorizonSize();L=G=>function(){let N=this._cache;N||(this._cache=N=new Map);if(N.has(G))return N.get(G);let f=null;var h=G.call(this);if(!c._pe.compare(h,c._pe.NULL)){f=[h];const r=h.getNump();if(1<r){h=c._pe.getPointer(h);for(let x=1;x<r;x++)f.push(c._pe.wrapPointer(h+D*x,c._pe.PeHorizon))}}N.set(G,f);return f};l(c._pe.PeProjcs.prototype,"horizonGcsGenerate",L);l(c._pe.PeProjcs.prototype,"horizonPcsGenerate",L);c._pe.PeObject.prototype.toString=function(G=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();
const N=c._pe.getPointer(this),f=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(N,G,f))}}function w(d){if(d){var l=c._pe.getClass(d);l&&(l=c._pe.getCache(l))&&(d=c._pe.getPointer(d))&&delete l[d]}}function P(d,l){const L=[];l=Array(l);for(let D=0;D<d;D++)L.push(c._pe.ensureInt8(l));return L}function Y(d){let l;Array.isArray(d[0])?(l=[],d.forEach(L=>{l.push(L[0],L[1])})):l=d;return l}function K(d,l,L,D=!1){if(D)for(D=0;D<2*l;D++)d[D]=c._pe.getValue(L+
D*Float64Array.BYTES_PER_ELEMENT,"double");else{D=0===d.length;for(let G=0;G<l;G++)D&&(d[G]=Array(2)),d[G][0]=c._pe.getValue(L,"double"),d[G][1]=c._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let k;c._pe=null;c.PeCSTransformations=void 0;(function(d){function l(G,N,f){c._pe.ensureCache.prepare();var h=Y(f);const r=f===h;h=c._pe.ensureFloat64(h);(G=c._pe._pe_geog_to_proj(c._pe.getPointer(G),N,h))&&K(f,N,h,r);return G}function L(G,N,f){return D(G,N,f,
0)}function D(G,N,f,h){c._pe.ensureCache.prepare();var r=Y(f);const x=f===r;r=c._pe.ensureFloat64(r);(G=c._pe._pe_proj_to_geog_center(c._pe.getPointer(G),N,r,h))&&K(f,N,r,x);return G}d.geogToProj=l;d.projGeog=function(G,N,f,h){switch(h){case c.PeDefs.PE_TRANSFORM_P_TO_G:return L(G,N,f);case c.PeDefs.PE_TRANSFORM_G_TO_P:return l(G,N,f)}return 0};d.projToGeog=L;d.projToGeogCenter=D})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;
d.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=
c._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=
c._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;
d.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(d){function l(N,f){let h=null,r=L[N];r||(r={},L[N]=r);r.hasOwnProperty(String(f))?h=r[f]:(N=c._pe.PeFactory.prototype.factoryByType(N,f),c._pe.compare(N,c._pe.NULL)||(h=N,r[f]=h));return h=G(h)}const L={},D={},G=N=>{if(N){const f=N.getType();switch(f){case c.PeDefs.PE_TYPE_GEOGCS:N=c._pe.castObject(N,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:N=c._pe.castObject(N,c._pe.PeProjcs);
break;case c.PeDefs.PE_TYPE_GEOGTRAN:N=c._pe.castObject(N,c._pe.PeGeogtran);break;default:f&c.PeDefs.PE_TYPE_UNIT&&(N=c._pe.castObject(N,c._pe.PeUnit))}}return N};d.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(N){return l(c.PeDefs.PE_TYPE_COORDSYS,N)};d.factoryByType=l;d.fromString=function(N,f){let h=null,r=D[N];r||(r={},D[N]=r);r.hasOwnProperty(f)?h=r[f]:(N=c._pe.PeFactory.prototype.fromString(N,f),c._pe.compare(N,c._pe.NULL)||(h=N,r[f]=h));return h=G(h)};
d.geogcs=function(N){return l(c.PeDefs.PE_TYPE_GEOGCS,N)};d.geogtran=function(N){return l(c.PeDefs.PE_TYPE_GEOGTRAN,N)};d.getCode=function(N){return c._pe.PeFactory.prototype.getCode(N)};d.projcs=function(N){return l(c.PeDefs.PE_TYPE_PROJCS,N)};d.unit=function(N){return l(c.PeDefs.PE_TYPE_UNIT,N)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=c._pe._pe_getPeGTlistExtendedEntrySize()};
d.getGTlist=function(L,D,G,N,f,h){let r=null;const x=new c._pe.PeInteger(h);try{const T=c._pe.PeGTlistExtended.prototype.getGTlist(L,D,G,N,f,x);if(h=x.val)if(r=[T],1<h){const C=c._pe.getPointer(T);for(L=1;L<h;L++)r.push(c._pe.wrapPointer(C+l*L,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(x)}return r}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const L of l)w(L),L.getEntries().forEach(D=>{w(D);D=D.getGeogtran();
w(D);D.getParameters().forEach(w);[D.getGeogcs1(),D.getGeogcs2()].forEach(G=>{w(G);const N=G.getDatum();w(N);w(N.getSpheroid());w(G.getPrimem());w(G.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(l,L,D,G,N){c._pe.ensureCache.prepare();var f=Y(D);const h=D===f;f=c._pe.ensureFloat64(f);let r=0;G&&(r=c._pe.ensureFloat64(G));(l=c._pe._pe_geog_to_geog(c._pe.getPointer(l),
L,f,r,N))&&K(D,L,f,h);return l}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(d){const l=(D,G,N,f,h,r)=>{c._pe.ensureCache.prepare();switch(D){case "dd":var x=c._pe._pe_geog_to_dd;var T=c.PeDefs.PE_DD_MAX;break;case "ddm":x=c._pe._pe_geog_to_ddm;T=c.PeDefs.PE_DDM_MAX;break;case "dms":x=c._pe._pe_geog_to_dms,T=c.PeDefs.PE_DMS_MAX}D=0;G&&(D=c._pe.getPointer(G));G=Y(f);G=c._pe.ensureFloat64(G);T=P(N,T);f=c._pe.ensureInt32(T);if(h=x(D,N,G,h,f))for(x=0;x<N;x++)r[x]=
c._pe.UTF8ToString(T[x]);return h},L=(D,G,N,f,h)=>{c._pe.ensureCache.prepare();switch(D){case "dd":var r=c._pe._pe_dd_to_geog;break;case "ddm":r=c._pe._pe_ddm_to_geog;break;case "dms":r=c._pe._pe_dms_to_geog}D=0;G&&(D=c._pe.getPointer(G));G=f.map(x=>c._pe.ensureString(x));f=c._pe.ensureInt32(G);G=c._pe.ensureFloat64(Array(2*N));(r=r(D,N,f,G))&&K(h,N,G);return r};d.geogToDms=function(D,G,N,f,h){return l("dms",D,G,N,f,h)};d.dmsToGeog=function(D,G,N,f){return L("dms",D,G,N,f)};d.geogToDdm=function(D,
G,N,f,h){return l("ddm",D,G,N,f,h)};d.ddmToGeog=function(D,G,N,f){return L("ddm",D,G,N,f)};d.geogToDd=function(D,G,N,f,h){return l("dd",D,G,N,f,h)};d.ddToGeog=function(D,G,N,f){return L("dd",D,G,N,f)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
d.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,L,D,G,N,f,h){c._pe.ensureCache.prepare();let r=0;l&&(r=c._pe.getPointer(l));l=Y(D);D=c._pe.ensureFloat64(l);l=P(L,c.PeDefs.PE_MGRS_MAX);const x=c._pe.ensureInt32(l);if(G=c._pe._pe_geog_to_mgrs_extended(r,L,D,G,N,f,x))for(N=0;N<L;N++)h[N]=c._pe.UTF8ToString(l[N]);return G};d.mgrsToGeogExtended=function(l,L,D,G,N){c._pe.ensureCache.prepare();
let f=0;l&&(f=c._pe.getPointer(l));l=D.map(h=>c._pe.ensureString(h));D=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*L));(G=c._pe._pe_mgrs_to_geog_extended(f,L,D,G,l))&&K(N,L,l);return G}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,L,D,G,N,f,h){c._pe.ensureCache.prepare();let r=0;l&&(r=c._pe.getPointer(l));l=Y(D);D=c._pe.ensureFloat64(l);l=P(L,c.PeDefs.PE_MGRS_MAX);const x=c._pe.ensureInt32(l);if(G=c._pe._pe_geog_to_usng(r,L,D,G,N,f,
x))for(N=0;N<L;N++)h[N]=c._pe.UTF8ToString(l[N]);return G};d.usngToGeog=function(l,L,D,G){c._pe.ensureCache.prepare();var N=0;l&&(N=c._pe.getPointer(l));l=D.map(f=>c._pe.ensureString(f));D=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*L));(N=c._pe._pe_usng_to_geog(N,L,D,l))&&K(G,L,l);return N}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
d.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,L,D,G,N){c._pe.ensureCache.prepare();var f=0;l&&(f=c._pe.getPointer(l));l=Y(D);D=c._pe.ensureFloat64(l);l=P(L,c.PeDefs.PE_UTM_MAX);const h=c._pe.ensureInt32(l);if(G=c._pe._pe_geog_to_utm(f,L,D,G,h))for(f=0;f<L;f++)N[f]=c._pe.UTF8ToString(l[f]);return G};d.utmToGeog=function(l,L,D,G,N){c._pe.ensureCache.prepare();let f=0;l&&(f=c._pe.getPointer(l));l=D.map(h=>c._pe.ensureString(h));D=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*
L));(G=c._pe._pe_utm_to_geog(f,L,D,G,l))&&K(N,L,l);return G}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(L,D=d.PE_PCSINFO_OPTION_DOMAIN){let G=
null,N=null;l.has(L)&&(N=l.get(L),N[D]&&(G=N[D]));G||(G=c._pe.PePCSInfo.prototype.generate(L,D),N||(N=[],l.set(L,N)),N[D]=G);return G}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(d){d.versionString=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));const I=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return c._pe},isLoaded:A,isSupported:z,load:n,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},
get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:p},
Symbol.toStringTag,{value:"Module"}));c._init=p;c.isLoaded=A;c.isSupported=z;c.load=n;c.pe=I})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(g,c){const ha=Math.PI/180;var O=c.earth.radius;const t=c.earth.eccentricitySquared;O={a1:O*t,a2:O*t*O*t,a3:O*t*t/2,a4:O*t*O*t*2.5,a5:O*t+O*t*t/2,a6:1-t};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,
f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,
f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};g.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;g.earthEllipsoidConstants=O;g.spheroids=c;g.toRadians=ha;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(g){return function(){function c(O){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(O&&O.steps)for(const t of O.steps)t instanceof g?this.steps.push(t):this.steps.push(new g({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}c.cacheKey=function(O,t){return[void 0!==O.wkid&&null!==O.wkid?O.wkid.toString():"-1",void 0!==O.wkt&&null!==O.wkt?O.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join()};c.fromGE=function(O){const t=new c;let A="";for(const z of O.steps)O=
g.fromGE(z),t.steps.push(O),A+=O.uid.toString()+",";t._cachedProjection={};t._gtlistentry=null;t._chain=A;return t};var ha=c.prototype;ha.getInverse=function(){const O=new c;O.steps=[];for(let t=this.steps.length-1;0<=t;t--)O.steps.push(this.steps[t].getInverse());return O};ha.getGTListEntry=function(){let O="";for(const t of this.steps)O+=t.uid.toString()+",";O!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=O);return this._gtlistentry};ha.assignCachedGe=function(O,t,
A){this._cachedProjection[c.cacheKey(O,t)]=A};ha.getCachedGeTransformation=function(O,t){let A="";for(const z of this.steps)A+=z.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=A);O=this._cachedProjection[c.cacheKey(O,t)];return void 0===O?null:O};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(g){let c=0;return function(){function ha(O){this.uid=c++;O?(this._wkt=
null!=O.wkt?O.wkt:null,this._wkid=null!=O.wkid?O.wkid:-1,this._isInverse=null!=O.isInverse?!0===O.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ha.fromGE=function(O){const t=new ha;t._wkt=O.wkt;t._wkid=O.wkid;t._isInverse=O.isInverse;return t};ha.prototype.getInverse=function(){const O=new ha;O._wkt=this.wkt;O._wkid=this._wkid;O._isInverse=!this.isInverse;return O};g._createClass(ha,[{key:"wkt",get:function(){return this._wkt},set:function(O){this._wkt=O;this.uid=c++}},{key:"wkid",
get:function(){return this._wkid},set:function(O){this._wkid=O;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(O){this._isInverse=O;this.uid=c++}}]);return ha}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(g,c,ha,O){g.getGeometryZScaler=function(t,A,z){if(c.isNone(A)||c.isNone(z)||z.vcsWkid||O.equals(A,z))return null;A=ha.getMetersPerVerticalUnitForSR(A);z=ha.getMetersPerVerticalUnitForSR(z);
const n=A/z;if(1===n)return null;switch(t){case "point":case "esriGeometryPoint":return p=>{p&&null!=p.z&&(p.z*=n)};case "polyline":case "esriGeometryPolyline":return p=>{if(p)for(const w of p.paths)for(const P of w)2<P.length&&(P[2]*=n)};case "polygon":case "esriGeometryPolygon":return p=>{if(p)for(const w of p.rings)for(const P of w)2<P.length&&(P[2]*=n)};case "multipoint":case "esriGeometryMultipoint":return p=>{if(p)for(const w of p.points)2<w.length&&(w[2]*=n)};case "extent":case "esriGeometryExtent":return p=>
{p&&null!=p.zmin&&null!=p.zmax&&(p.zmin*=n,p.zmax*=n)};default:return null}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(g){let c=function(z,n,p){this.x=z;this.y=n;this.spatialReference=p;this.m=this.z=void 0},ha=function(z,n,p,w){this.rings=z;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);w&&(this.hasM=w)},O=function(z,n,p,w){this.paths=z;this.spatialReference=
n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);w&&(this.hasM=w)},t=function(z,n,p,w){this.points=z;this.spatialReference=n;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);w&&(this.hasM=w)},A=function(z,n,p,w,P){this.xmin=z;this.ymin=n;this.xmax=p;this.ymax=w;this.spatialReference=P;this.mmax=this.mmin=this.zmax=this.zmin=void 0};g.jsonAdapter={convertToGEGeometry:function(z,n){return null==n?null:z.convertJSONToGeometry(n)},exportPoint:function(z,n,p){p=new c(z.getPointX(n),z.getPointY(n),p);const w=z.hasZ(n),
P=z.hasM(n);w&&(p.z=z.getPointZ(n));P&&(p.m=z.getPointM(n));return p},exportPolygon:function(z,n,p){return new ha(z.exportPaths(n),p,z.hasZ(n),z.hasM(n))},exportPolyline:function(z,n,p){return new O(z.exportPaths(n),p,z.hasZ(n),z.hasM(n))},exportMultipoint:function(z,n,p){return new t(z.exportPoints(n),p,z.hasZ(n),z.hasM(n))},exportExtent:function(z,n,p){var w=z.hasZ(n);const P=z.hasM(n);p=new A(z.getXMin(n),z.getYMin(n),z.getXMax(n),z.getYMax(n),p);w&&(w=z.getZExtent(n),p.zmin=w.vmin,p.zmax=w.vmax);
P&&(z=z.getMExtent(n),p.mmin=z.vmin,p.mmax=z.vmax);return p}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K,k,I,d,l,L,D,G,N,f,h,r,x){function T(q){return q.every(R=>"exceedslimit"!==R.statisticType)}const C=new z.MemCacheStorage(2E6);let B=0,M=function(){function q(Z){this.capabilities={query:L.queryCapabilities};this.geometryType=Z.geometryType;this.hasM=Z.hasM;this.hasZ=Z.hasZ;this.objectIdField=Z.objectIdField;this.spatialReference=Z.spatialReference;this.definitionExpression=Z.definitionExpression;this.featureStore=Z.featureStore;this.aggregateAdapter=Z.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=Z.timeInfo;Z.cacheSpatialQueries&&(this._geometryQueryCache=new z.MemCache(B++ +"$$",C));this.fieldsIndex=new h(Z.fields);Z.scheduler&&Z.priority&&(this._frameTask=Z.scheduler.registerTask(Z.priority))}var R=q.prototype;R.destroy=function(){this._frameTask=A.removeMaybe(this._frameTask);this.clearCache();A.destroyMaybe(this._geometryQueryCache);this._changeHandle=A.removeMaybe(this._changeHandle);A.destroyMaybe(this.fieldsIndex)};
R.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtent=this._allItems=null};R.executeQuery=function(){var Z=c._asyncToGenerator(function*(W,ka){try{return(yield this._executeQuery(W,{},ka)).createQueryResponse()}catch(ba){if(ba!==f.QUERY_ENGINE_EMPTY_RESULT)throw ba;return(new D.QueryEngineResult([],W,this)).createQueryResponse()}});return function(W,ka){return Z.apply(this,arguments)}}();R.executeQueryForCount=function(){var Z=c._asyncToGenerator(function*(W={},ka){try{return(yield this._executeQuery(W,
{returnGeometry:!1,returnCentroid:!1,outSR:null},ka)).createQueryResponseForCount()}catch(ba){if(ba!==f.QUERY_ENGINE_EMPTY_RESULT)throw ba;return 0}});return function(){return Z.apply(this,arguments)}}();R.executeQueryForExtent=function(){var Z=c._asyncToGenerator(function*(W,ka){const ba=W.outSR;try{const qa=yield this._executeQuery(W,{returnGeometry:!0,returnCentroid:!1,outSR:null},ka),wa=qa.size;if(!wa)return{count:0,extent:null};p.set(u,p.NEGATIVE_INFINITY);this.featureStore.forEachBounds(qa.items,
Ca=>p.expandWithAABB(u,Ca),F);const xa={xmin:u[0],ymin:u[1],xmax:u[3],ymax:u[4],spatialReference:f.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(u[2])&&isFinite(u[5])&&(xa.zmin=u[2],xa.zmax=u[5]);const Ba=l.project(xa,qa.spatialReference,ba);Ba.spatialReference=f.cleanFromGeometryEngine(ba||this.spatialReference);if(0===Ba.xmax-Ba.xmin){const Ca=n.getMetersPerUnitForSR(Ba.spatialReference);Ba.xmin-=Ca;Ba.xmax+=Ca}if(0===Ba.ymax-Ba.ymin){const Ca=n.getMetersPerUnitForSR(Ba.spatialReference);
Ba.ymin-=Ca;Ba.ymax+=Ca}if(this.hasZ&&null!=Ba.zmin&&null!=Ba.zmax&&0===Ba.zmax-Ba.zmin){const Ca=n.getMetersPerUnitForSR(Ba.spatialReference);Ba.zmin-=Ca;Ba.zmax+=Ca}return{count:wa,extent:Ba}}catch(qa){if(qa===f.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(W,ka){return Z.apply(this,arguments)}}();R.executeQueryForIds=function(){var Z=c._asyncToGenerator(function*(W,ka){return this.executeQueryForIdSet(W,ka).then(ba=>Array.from(ba))});return function(W,ka){return Z.apply(this,
arguments)}}();R.executeQueryForIdSet=function(){var Z=c._asyncToGenerator(function*(W,ka){try{const ba=yield this._executeQuery(W,{returnGeometry:!0,returnCentroid:!1,outSR:null},ka),qa=ba.items,wa=new Set;yield this._reschedule(()=>{for(const xa of qa)wa.add(ba.featureAdapter.getObjectId(xa))},ka);return wa}catch(ba){if(ba===f.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ba;}});return function(W,ka){return Z.apply(this,arguments)}}();R.executeQueryForSnapping=function(){var Z=c._asyncToGenerator(function*(W,
ka){const {point:ba,distance:qa,types:wa}=W;if(wa===D.SnappingTypes.NONE)return{candidates:[]};const xa=yield this._reschedule(()=>this._checkQuerySupport(W.query),ka),Ba=!k.equals(ba.spatialReference,this.spatialReference);Ba&&(yield l.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof qa?qa:qa.x,Ja="number"===typeof qa?qa:qa.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ja,ymax:ba.y+Ja,spatialReference:ba.spatialReference};Ca=Ba?l.project(Ca,this.spatialReference):
Ca;if(!Ca)return{candidates:[]};Ja=(yield K.normalizeCentralMeridian(Y.fromJSON(ba),null,{signal:ka}))[0];const La=(yield K.normalizeCentralMeridian(Y.fromJSON(Ca),null,{signal:ka}))[0];if(A.isNone(Ja)||A.isNone(La))return{candidates:[]};const Na=new D.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(La.toJSON())),xa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),ka);yield this._reschedule(()=>this._executeTimeQuery(Na),ka);yield this._reschedule(()=>this._executeAttributesQuery(Na),
ka);ka=Ja.toJSON();ka=Ba?l.project(ka,this.spatialReference):ka;return Na.createSnappingResponse({...W,point:ka,distance:Ba?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:qa},ba.spatialReference)});return function(W,ka){return Z.apply(this,arguments)}}();R.executeQueryForLatestObservations=function(){var Z=c._asyncToGenerator(function*(W,ka){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new O("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:W,timeInfo:this.timeInfo});
try{const ba=yield this._executeQuery(W,{},ka);yield this._reschedule(()=>this._filterLatest(ba),ka);return ba.createQueryResponse()}catch(ba){if(ba!==f.QUERY_ENGINE_EMPTY_RESULT)throw ba;return(new D.QueryEngineResult([],W,this)).createQueryResponse()}});return function(W,ka){return Z.apply(this,arguments)}}();R.executeQueryForSummaryStatistics=function(){var Z=c._asyncToGenerator(function*(W={},ka,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(W,
{field:qa,normalizationField:wa,valueExpression:xa},ba)).createSummaryStatisticsResponse(ka)});return function(){return Z.apply(this,arguments)}}();R.executeQueryForUniqueValues=function(){var Z=c._asyncToGenerator(function*(W={},ka,ba){const {field:qa,field2:wa,field3:xa,valueExpression:Ba}=ka;return(yield this._getQueryEngineResultForStats(W,{field:qa,field2:wa,field3:xa,valueExpression:Ba},ba)).createUniqueValuesResponse(ka)});return function(){return Z.apply(this,arguments)}}();R.executeQueryForClassBreaks=
function(){var Z=c._asyncToGenerator(function*(W={},ka,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(W,{field:qa,normalizationField:wa,valueExpression:xa},ba)).createClassBreaksResponse(ka)});return function(){return Z.apply(this,arguments)}}();R.executeQueryForHistogram=function(){var Z=c._asyncToGenerator(function*(W={},ka,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(W,
{field:qa,normalizationField:wa,valueExpression:xa},ba)).createHistogramResponse(ka)});return function(){return Z.apply(this,arguments)}}();R._schedule=function(){var Z=c._asyncToGenerator(function*(W,ka){return A.isSome(this._frameTask)?this._frameTask.schedule(W,ka):W(x.noBudget)});return function(W,ka){return Z.apply(this,arguments)}}();R._reschedule=function(){var Z=c._asyncToGenerator(function*(W,ka){return A.isSome(this._frameTask)?this._frameTask.reschedule(W,ka):W(x.noBudget)});return function(W,
ka){return Z.apply(this,arguments)}}();R._getAll=function(Z){A.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new D.QueryEngineResult(this._allItems,Z,this)};R._executeQuery=function(){var Z=c._asyncToGenerator(function*(W,ka,ba){W=t.clone(W);W=yield this._schedule(()=>f.normalizeQuery(W,this.definitionExpression,this.spatialReference),ba);W=yield this._reschedule(()=>this._checkQuerySupport(W),ba);W={...W,...ka};const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(W,
ba),ba),wa=yield this._reschedule(()=>this._executeGeometryQuery(W,qa,ba),ba);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ba);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ba);yield this._reschedule(()=>this._executeTimeQuery(wa),ba);yield this._reschedule(()=>this._executeAttributesQuery(wa),ba);return wa});return function(W,ka,ba){return Z.apply(this,arguments)}}();R._executeSceneFilterQuery=function(){var Z=c._asyncToGenerator(function*(W,ka){var ba=this;if(A.isNone(W.sceneFilter))return null;
const {outSR:qa,returnGeometry:wa,returnCentroid:xa}=W;var Ba=this.featureStore.featureSpatialReference,Ca=W.sceneFilter.geometry;const Ja=A.isNone(Ba)||k.equals(Ba,Ca.spatialReference)?Ca:l.project(Ca,Ba);if(!Ja)return null;Ba=wa||xa;Ba=k.isValid(qa)&&!k.equals(this.spatialReference,qa)&&Ba?function(){var b=c._asyncToGenerator(function*(m){return ba._project(m,qa)});return function(m){return b.apply(this,arguments)}}():b=>b;const La=this.featureAdapter;Ca=this._searchFeatures(this._getQueryBBoxes(Ja));
if("disjoint"===W.sceneFilter.spatialRelationship){if(!Ca.length)return null;const b=new Set;for(var Na of Ca)b.add(La.getObjectId(Na));const m=yield this._reschedule(()=>this.featureStore.toArray(),ka);Na=yield this._reschedule(c._asyncToGenerator(function*(){const ea=yield G.getSpatialQueryOperator("esriSpatialRelDisjoint",Ja,ba.geometryType,ba.hasZ,ba.hasM),ia=yield ba._runSpatialFilter(m,oa=>!b.has(La.getObjectId(oa))||ea(La.getGeometry(oa)),ka);return new D.QueryEngineResult(ia,W,ba)}),ka);return Ba(Na)}if(!Ca.length)return new D.QueryEngineResult([],
W,this);if(this._canExecuteSinglePass(Ja,W))return Ba(new D.QueryEngineResult(Ca,W,this));const bb=yield G.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Ca,b=>bb(La.getGeometry(b)),ka);return Ba(new D.QueryEngineResult(Na,W,this))});return function(W,ka){return Z.apply(this,arguments)}}();R._executeGeometryQuery=function(){var Z=c._asyncToGenerator(function*(W,ka,ba){var qa=this;if(A.isSome(ka)&&0===ka.items.length)return ka;
W=A.isSome(ka)?ka.query:W;const {geometry:wa,outSR:xa,spatialRel:Ba,returnGeometry:Ca,returnCentroid:Ja}=W;var La=this.featureStore.featureSpatialReference;const Na=!wa||A.isNone(La)||k.equals(La,wa.spatialReference)?wa:l.project(wa,La),bb=Ca||Ja,b=k.isValid(xa)&&!k.equals(this.spatialReference,xa),m=this._geometryQueryCache&&A.isNone(ka)?b&&bb?JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba,outSpatialReference:xa}):JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba}):
null;La=m?this._geometryQueryCache.get(m):null;if(A.isSome(La))return new D.QueryEngineResult(La,W,this);La=function(){var J=c._asyncToGenerator(function*(S){b&&bb&&(yield qa._project(S,xa));m&&qa._geometryQueryCache.put(m,S.items,S.items.length+1);return S});return function(S){return J.apply(this,arguments)}}();if(!Na)return La(A.isSome(ka)?ka:this._getAll(W));const ea=this.featureAdapter;let ia=this._searchFeatures(this._getQueryBBoxes(wa));if("esriSpatialRelDisjoint"===Ba){if(!ia.length)return La(A.isSome(ka)?
ka:this._getAll(W));const J=new Set;for(var oa of ia)J.add(ea.getObjectId(oa));const S=A.isSome(ka)?ka.items:yield this._reschedule(()=>this.featureStore.toArray(),ba);oa=yield this._reschedule(c._asyncToGenerator(function*(){const V=yield G.getSpatialQueryOperator(Ba,Na,qa.geometryType,qa.hasZ,qa.hasM),fa=yield qa._runSpatialFilter(S,ja=>!J.has(ea.getObjectId(ja))||V(ea.getGeometry(ja)),ba);return new D.QueryEngineResult(fa,W,qa)}),ba);return La(oa)}if(A.isSome(ka)){const J=new ha.PositionHint;ia=
ia.filter(S=>0<=ha.indexOf(ka.items,S,ka.items.length,J))}if(!ia.length)return La=new D.QueryEngineResult([],W,this),m&&this._geometryQueryCache.put(m,La.items,1),La;if(this._canExecuteSinglePass(Na,W))return La(new D.QueryEngineResult(ia,W,this));const y=yield G.getSpatialQueryOperator(Ba,Na,this.geometryType,this.hasZ,this.hasM);oa=yield this._runSpatialFilter(ia,J=>y(ea.getGeometry(J)),ba);return La(new D.QueryEngineResult(oa,W,this))});return function(W,ka,ba){return Z.apply(this,arguments)}}();
R._executeAggregateIdsQuery=function(Z){if(0!==Z.items.length&&Z.query.aggregateIds&&Z.query.aggregateIds.length&&!A.isNone(this.aggregateAdapter)){var W=new Set;for(const ba of Z.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ba).forEach(qa=>W.add(qa));var ka=this.featureAdapter.getObjectId;Z.items=Z.items.filter(ba=>W.has(ka(ba)))}};R._executeObjectIdsQuery=function(Z){if(0!==Z.items.length&&Z.query.objectIds&&Z.query.objectIds.length){var W=new Set(Z.query.objectIds),ka=this.featureAdapter.getObjectId;
Z.items=Z.items.filter(ba=>W.has(ka(ba)))}};R._executeTimeQuery=function(Z){if(0!==Z.items.length){var W=N.getTimeOperator(this.timeInfo,Z.query.timeExtent,this.featureAdapter);A.isNone(W)||(Z.items=Z.items.filter(W))}};R._executeAttributesQuery=function(Z){if(0!==Z.items.length){var W=d.getWhereClause(Z.query.where,this.fieldsIndex);if(W){if(!W.isStandardized)throw new TypeError("Where clause is not standardized");Z.items=Z.items.filter(ka=>W.testFeature(ka,this.featureAdapter))}}};R._runSpatialFilter=
function(){var Z=c._asyncToGenerator(function*(W,ka,ba){var qa=this;if(!ka)return W;if(A.isNone(this._frameTask))return W.filter(Ca=>ka(Ca));let wa=0;const xa=[],Ba=function(){var Ca=c._asyncToGenerator(function*(Ja){for(;wa<W.length;){const La=W[wa++];ka(La)&&(xa.push(La),Ja.madeProgress());Ja.done&&(yield qa._reschedule(Na=>Ba(Na),ba))}});return function(Ja){return Ca.apply(this,arguments)}}();return this._reschedule(Ca=>Ba(Ca),ba).then(()=>xa)});return function(W,ka,ba){return Z.apply(this,arguments)}}();
R._filterLatest=function(Z){const {trackIdField:W,startTimeField:ka,endTimeField:ba}=this.timeInfo,qa=ba||ka,wa=new Map,xa=this.featureAdapter.getAttribute;for(const Ba of Z.items){const Ca=xa(Ba,W),Ja=xa(Ba,qa),La=wa.get(Ca);(!La||Ja>xa(La,qa))&&wa.set(Ca,Ba)}Z.items=Array.from(wa.values())};R._canExecuteSinglePass=function(Z,W){({spatialRel:W}=W);return G.canQueryWithRBush(Z)&&("esriSpatialRelEnvelopeIntersects"===W||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===W||"esriSpatialRelContains"===
W||"esriSpatialRelWithin"===W))};R._project=function(){var Z=c._asyncToGenerator(function*(W,ka){if(!ka||k.equals(this.spatialReference,ka))return W;const ba=this.featureAdapter;ka=yield l.projectMany(W.items.map(qa=>f.getGeometry(this.geometryType,this.hasZ,this.hasM,ba.getGeometry(qa))),this.spatialReference,ka);W.items=ka.map((qa,wa)=>ba.cloneWithGeometry(W.items[wa],I.convertFromGeometry(qa,this.hasZ,this.hasM)));return W});return function(W,ka){return Z.apply(this,arguments)}}();R._getQueryBBoxes=
function(Z){if(G.canQueryWithRBush(Z)){if(Y.isExtent(Z))return[w.fromValues(Z.xmin,Z.ymin,Z.xmax,Z.ymax)];if(Y.isPolygon(Z))return Z.rings.map(W=>w.fromValues(Math.min(W[0][0],W[2][0]),Math.min(W[0][1],W[2][1]),Math.max(W[0][0],W[2][0]),Math.max(W[0][1],W[2][1])))}return[P.getBoundsXY(w.create(),Z)]};R._searchFeatures=function(Z){for(const W of Z)this.featureStore.forEachInBounds(W,ka=>H.add(ka));Z=Array.from(H.values());H.clear();return Z};R._checkStatisticsSupport=function(){var Z=c._asyncToGenerator(function*(W,
ka){if(0>W.distance||null!=W.geometryPrecision||W.multipatchOption||W.pixelSize||W.relationParam||W.text||W.outStatistics||W.groupByFieldsForStatistics||W.having||W.orderByFields)throw new O("feature-store:unsupported-query","Unsupported query options",{query:W});this._checkAttributesQuerySupport(W);return Promise.all([this._checkStatisticsParamsSupport(ka),G.checkSpatialQuerySupport(W,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,W.outSR)]).then(()=>W)});
return function(W,ka){return Z.apply(this,arguments)}}();R._checkStatisticsParamsSupport=function(){var Z=c._asyncToGenerator(function*(W){var ka=[];W.valueExpression&&({arcadeUtils:ka}=yield r.loadArcade(),ka=ka.extractFieldNames(W.valueExpression));W.field&&ka.push(W.field);W.field2&&ka.push(W.field2);W.field3&&ka.push(W.field3);W.normalizationField&&ka.push(W.normalizationField);if(!ka.length)throw new O("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:W});d.validateFields(this.fieldsIndex,ka,"params contains missing fields")});return function(W){return Z.apply(this,arguments)}}();R._checkQuerySupport=function(){var Z=c._asyncToGenerator(function*(W){if(0>W.distance||null!=W.geometryPrecision||W.multipatchOption||W.pixelSize||W.relationParam||W.text)throw new O("feature-store:unsupported-query","Unsupported query options",{query:W});this._checkAttributesQuerySupport(W);this._checkStatisticsQuerySupport(W);return Promise.all([G.checkSpatialQuerySupport(W,
this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,W.outSR)]).then(()=>W)});return function(W){return Z.apply(this,arguments)}}();R._checkAttributesQuerySupport=function(Z){const {outFields:W,orderByFields:ka,returnDistinctValues:ba,outStatistics:qa}=Z,wa=qa?qa.map(xa=>xa.outStatisticFieldName&&xa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ka&&0<ka.length){const xa=ka.map(Ba=>{const Ca=Ba.toLowerCase();return Ca.includes(" asc")?Ca.split(" asc")[0]:
Ca.includes(" desc")?Ca.split(" desc")[0]:Ba}).filter(Ba=>!wa.includes(Ba));d.validateFields(this.fieldsIndex,xa,"orderByFields contains missing fields")}if(W&&0<W.length)d.validateFields(this.fieldsIndex,W,"outFields contains missing fields");else if(ba)throw new O("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:Z});d.validateWhere(this.fieldsIndex,Z.where)};R._checkStatisticsQuerySupport=function(Z){const {outStatistics:W,groupByFieldsForStatistics:ka,
having:ba}=Z;var qa=ka&&ka.length,wa=W&&W.length;if(ba){if(!qa||!wa)throw new O("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:Z});d.validateHaving(this.fieldsIndex,ba,W)}if(wa&&T(W)){wa=W.map(xa=>xa.onStatisticField).filter(Boolean);d.validateFields(this.fieldsIndex,wa,"onStatisticFields contains missing fields");qa&&d.validateFields(this.fieldsIndex,ka,"groupByFieldsForStatistics contains missing fields");for(const xa of W){const {onStatisticField:Ba,
statisticType:Ca}=xa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in xa){if({statisticParameters:qa}=xa,!qa)throw new O("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:Z});}else if("count"!==Ca&&Ba&&d.hasInvalidFieldType(Ba,this.fieldsIndex))throw new O("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:Z});}}};R._getQueryEngineResultForStats=function(){var Z=
c._asyncToGenerator(function*(W,ka,ba){W=t.clone(W);try{W=yield this._schedule(()=>f.normalizeQuery(W,this.definitionExpression,this.spatialReference),ba);W=yield this._reschedule(()=>this._checkStatisticsSupport(W,ka),ba);const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(W,ba),ba),wa=yield this._reschedule(()=>this._executeGeometryQuery(W,qa,ba),ba);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ba);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ba);yield this._reschedule(()=>
this._executeTimeQuery(wa),ba);yield this._reschedule(()=>this._executeAttributesQuery(wa),ba);return wa}catch(qa){if(qa!==f.QUERY_ENGINE_EMPTY_RESULT)throw qa;return new D.QueryEngineResult([],W,this)}});return function(W,ka,ba){return Z.apply(this,arguments)}}();c._createClass(q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const Z=this.featureStore.fullBounds;return A.isNone(Z)?null:{xmin:Z[0],ymin:Z[1],xmax:Z[2],ymax:Z[3],spatialReference:f.cleanFromGeometryEngine(this.spatialReference)}}},
{key:"timeExtent",get:function(){if(!this.timeInfo)return null;this._timeExtent||(this._timeExtent=N.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return q}();const F=p.create(),u=p.create(),H=new Set;g.Feature=function(q,R=null,Z,W,ka){this.attributes=q;this.geometry=Z;this.centroid=W;this.filterFlags=ka;this.groupId=-1;this.displayId=R};g.QueryEngine=M;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(g,c,ha,O){g.RemoveMode=void 0;(function(z){z[z.ALL=0]="ALL";z[z.SOME=1]="SOME"})(g.RemoveMode||(g.RemoveMode={}));let t=function(){function z(p,w,P){this._namespace=p;this._storage=w;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";P&&(this._storage.registerRemoveFunc(this._namespace,P),this._removeFunc=!0)}var n=z.prototype;n.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};n.resetHitRate=function(){this._hit=this._miss=0};n.put=function(p,w,P,Y=0){this._storage.put(this._namespace+p,w,P,Y)};n.get=function(p){p=this._storage.get(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};n.pop=function(p){p=this._storage.pop(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};n.updateSize=function(p,w,P){this._storage.updateSize(this._namespace+
p,w,P)};n.clear=function(){this._storage.clear(this._namespace)};n.clearAll=function(){this._storage.clearAll()};n.getStats=function(){return this._storage.getStats()};n.resetStats=function(){this._storage.resetStats()};c._createClass(z,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return z}(),
A=function(){function z(p=10485760){this._maxSize=p;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new O;this._users=new O}var n=z.prototype;n.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};n.register=function(p){this._users.push(p)};n.deregister=function(p){this._users.removeUnordered(p)};n.registerRemoveFunc=function(p,w){this._removeFuncs.push([p,w])};n.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(w=>w[0]!==
p)};n.put=function(p,w,P,Y){const K=this._db.get(p);K&&(this._size-=K.size,this._db.delete(p),K.entry!==w&&this._notifyRemove(p,K.entry,g.RemoveMode.ALL));P>this._maxSize?this._notifyRemove(p,w,g.RemoveMode.ALL):void 0===w?console.warn("Refusing to cache undefined entry "):!P||0>P?console.warn("Refusing to cache entry with invalid size "+P):(Y=1+Math.max(Y,-3)- -3,this._db.set(p,{entry:w,size:P,lifetime:Y,lives:Y}),this._size+=P,this._checkSizeLimit())};n.updateSize=function(p,w,P){const Y=this._db.get(p);
if(Y&&Y.entry===w){for(this._size-=Y.size;P>this._maxSize;)if(P=this._notifyRemove(p,w,g.RemoveMode.SOME),!(ha.isSome(P)&&0<P)){this._db.delete(p);return}Y.size=P;this._size+=P;this._checkSizeLimit()}};n.pop=function(p){const w=this._db.get(p);if(w)return this._size-=w.size,this._db.delete(p),++this._hit,w.entry;++this._miss};n.get=function(p){const w=this._db.get(p);if(void 0===w)++this._miss;else return this._db.delete(p),w.lives=w.lifetime,this._db.set(p,w),++this._hit,w.entry};n.getStats=function(){const p=
{Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},w={},P=[];this._db.forEach((k,I)=>{const d=k.lifetime;P[d]=(P[d]||0)+k.size;this._users.forAll(l=>{l=l.namespace;I.startsWith(l)&&(w[l]=(w[l]||0)+k.size)})});const Y={};this._users.forAll(k=>{const I=k.namespace;!isNaN(k.hitRate)&&0<k.hitRate?(w[I]=w[I]||0,Y[I]=Math.round(100*k.hitRate)+"%"):Y[I]="0%"});var K=Object.keys(w);K.sort((k,I)=>
w[I]-w[k]);K.forEach(k=>p[k]=Math.round(w[k]/2**20)+"MB / "+Y[k]);for(K=P.length-1;0<=K;--K){const k=P[K];k&&(p["Priority "+(K+-3-1)]=Math.round(k/this.size*100)+"%")}return p};n.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};n.clear=function(p){this._db.forEach((w,P)=>{P.startsWith(p)&&(this._size-=w.size,this._db.delete(P),this._notifyRemove(P,w.entry,g.RemoveMode.ALL))})};n.clearAll=function(){this._db.forEach((p,w)=>this._notifyRemove(w,p.entry,g.RemoveMode.ALL));
this._size=0;this._db.clear()};n._getHitRate=function(){return this._hit/(this._hit+this._miss)};n._notifyRemove=function(p,w,P){let Y;this._removeFuncs.some(K=>p.startsWith(K[0])?(K=K[1](w,P),"number"===typeof K&&(Y=K),!0):!1);return Y};n._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [p,w]of this._db){this._db.delete(p);if(1>=w.lives){this._size-=w.size;const P=this._notifyRemove(p,w.entry,g.RemoveMode.SOME);ha.isSome(P)&&0<P&&(this._size+=P,w.lives=w.lifetime,w.size=P,this._db.set(p,
w))}else--w.lives,this._db.set(p,w);if(this._size<=.9*this.maxSize)break}};c._createClass(z,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimit()}}]);return z}();g.MIN_PRIORITY=-3;g.MemCache=t;g.MemCacheStorage=A;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K){function k(f){const h=[];let r=0,x=0;for(let T=0;T<f.length;T++){const C=f[T];let B=null;for(let M=0;M<C.length;M++)B=C[M],h.push(B),0===M?x=r=B[0]:(r=Math.min(r,B[0]),x=Math.max(x,B[0]));B&&h.push([(r+x)/2,0])}return h}function I(f,h){if(!(f instanceof n||f instanceof z))throw N.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new O("straightLineDensify: the input geometry is neither polyline nor polygon");var r=p.getGeometryParts(f);
const x=[];for(const C of r){r=[];x.push(r);r.push([C[0][0],C[0][1]]);for(let B=0;B<C.length-1;B++){const M=C[B][0],F=C[B][1],u=C[B+1][0],H=C[B+1][1];var T=Math.sqrt((u-M)*(u-M)+(H-F)*(H-F));const q=(H-F)/T,R=(u-M)/T,Z=T/h;if(1<Z){for(let W=1;W<=Z-1;W++){const ka=W*h;r.push([R*ka+M,q*ka+F])}T=(T+Math.floor(Z-1)*h)/2;r.push([R*T+M,q*T+F])}r.push([u,H])}}return"polygon"===f.type?new z({rings:x,spatialReference:f.spatialReference}):new n({paths:x,spatialReference:f.spatialReference})}function d(f,h,
r){h&&(f=I(f,1E6),f=P.webMercatorToGeographic(f,!0));r&&(f=p.updatePolyGeometry(f,r));return f}function l(f,h,r){if(Array.isArray(f)){var x=f[0];x>h?(r=p.offsetMagnitude(x,h),f[0]=x+-2*r*h):x<r&&(h=p.offsetMagnitude(x,r),f[0]=x+-2*h*r)}else x=f.x,x>h?(r=p.offsetMagnitude(x,h),f=f.clone().offset(-2*r*h,0)):x<r&&(h=p.offsetMagnitude(x,r),f=f.clone().offset(-2*h*r,0));return f}function L(f,h){let r=-1;for(let x=0;x<h.cutIndexes.length;x++){const T=h.cutIndexes[x],C=h.geometries[x],B=p.getGeometryParts(C);
for(let M=0;M<B.length;M++){const F=B[M];F.some(u=>{if(180>u[0])return!0;u=0;for(var H=0;H<F.length;H++){var q=F[H][0];u=q>u?q:u}u=Number(u.toFixed(9));u=-360*p.offsetMagnitude(u,180);for(H=0;H<F.length;H++)q=C.getPoint(M,H),C.setPoint(M,H,q.clone().offset(u,0));return!0})}if(T===r)if("polygon"===f[0].type)for(const M of p.getGeometryParts(C))f[T]=f[T].addRing(M);else{if("polyline"===f[0].type)for(const M of p.getGeometryParts(C))f[T]=f[T].addPath(M)}else r=T,f[T]=C}return f}function D(f,h,r){return G.apply(this,
arguments)}function G(){G=c._asyncToGenerator(function*(f,h,r){if(!Array.isArray(f))return D([f],h);h&&"string"!==typeof h&&N.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var x="string"===typeof h?h:h?.url??ha.geometryServiceUrl;let T,C,B;let M=0;var F=[];h=[];for(var u of f)if(A.isNone(u))h.push(u);else{if(!H){var H=u.spatialReference;var q=w.getInfo(H);var R=(T=H.isWebMercator)?102100:4326;C=p.cutParams[R].maxX;B=p.cutParams[R].minX;var Z=p.cutParams[R].plus180Line;
R=p.cutParams[R].minus180Line}if(q)if("mesh"===u.type)h.push(u);else if("point"===u.type)h.push(l(u.clone(),C,B));else if("multipoint"===u.type){var W=u.clone();W.points=W.points.map(ka=>l(ka,C,B));h.push(W)}else if("extent"===u.type)W=u.clone()._normalize(!1,!1,q),h.push(W.rings?new z(W):W);else if(u.extent){W=u.extent;const ka=2*p.offsetMagnitude(W.xmin,B)*C;let ba=0===ka?u.clone():p.updatePolyGeometry(u.clone(),ka);W.offset(ka,0);W.intersects(Z)&&W.xmax!==C?(M=W.xmax>M?W.xmax:M,ba=d(ba,T),F.push(ba),
h.push("cut")):W.intersects(R)&&W.xmin!==B?(M=2*W.xmax*C>M?2*W.xmax*C:M,ba=d(ba,T,360),F.push(ba),h.push("cut")):h.push(ba)}else h.push(u.clone());else h.push(u)}H=p.offsetMagnitude(M,C);q=-90;Z=H;for(u=new n;0<H;)R=-180+360*H,u.addPath([[R,q],[R,-1*q]]),q*=-1,H--;if(0<F.length&&0<Z){H=yield Y.cut(x,F,u,r);H=L(F,H);q=[];F=[];for(Z=0;Z<h.length;Z++)u=h[Z],"cut"!==u?F.push(u):(u=H.shift(),R=f[Z],A.isSome(R)&&"polygon"===R.type&&R.rings&&1<R.rings.length&&u.rings.length>=R.rings.length?(q.push(u),F.push("simplify")):
F.push(T?P.geographicToWebMercator(u):u));if(!q.length)return F;h=yield K.simplify(x,q,r);f=[];for(r=0;r<F.length;r++)x=F[r],"simplify"!==x?f.push(x):f.push(T?P.geographicToWebMercator(h.shift()):h.shift());return f}f=[];for(r=0;r<h.length;r++)x=h[r],"cut"!==x?f.push(x):(x=F.shift(),f.push(!0===T?P.geographicToWebMercator(x):x));return f});return G.apply(this,arguments)}const N=t.getLogger("esri.geometry.support.normalizeUtils");g.getDenormalizedExtent=function(f){if(!f)return null;const h=f.extent;
if(!h)return null;var r=f.spatialReference&&w.getInfo(f.spatialReference);if(!r)return h;const [x,T]=r.valid;({width:r}=h);let {xmin:C,xmax:B}=h;[C,B]=[B,C];if("extent"===f.type||0===r||r<=T||r>2*T||C<x||B>T)return h;let M;switch(f.type){case "polygon":if(1<f.rings.length)M=k(f.rings);else return h;break;case "polyline":if(1<f.paths.length)M=k(f.paths);else return h;break;case "multipoint":M=f.points}f=h.clone();for(let F=0;F<M.length;F++){let u=M[F][0];0>u?(u+=T,B=Math.max(u,B)):(u-=T,C=Math.min(u,
C))}f.xmin=C;f.xmax=B;return f.width<r?(f.xmin-=T,f.xmax-=T,f):h};g.normalizeCentralMeridian=D;g.normalizeMapX=function(f,h){if(h=w.getInfo(h)){const [r,x]=h.valid;h=x-r;if(f<r)for(;f<r;)f+=h;if(f>x)for(;f>x;)f-=h}return f};g.straightLineDensify=I;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(g,c,ha,O){function t(A){return O.isPolygon(A)?
A.rings:A.paths}c={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:ha.WGS84}),minus180Line:new c({paths:[[[-180,
-180],[-180,180]]],spatialReference:ha.WGS84})}};g.cutParams=c;g.getGeometryParts=t;g.offsetMagnitude=function(A,z){return Math.ceil((A-z)/(2*z))};g.updatePolyGeometry=function(A,z){const n=t(A);for(const p of n)for(const w of p)w[0]+=z;return A};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(g,c,ha,O,t,A){function z(){z=c._asyncToGenerator(function*(n,p,w,P){n=A.parseUrl(n);const Y=p[0].spatialReference;p={...P,query:{...n.query,f:"json",sr:JSON.stringify(Y),target:JSON.stringify({geometryType:t.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(w)}};p=yield O(n.path+"/cut",p);const {cutIndexes:K,geometries:k=[]}=p.data;return{cutIndexes:K,geometries:k.map(I=>{I=t.fromJSON(I);I.spatialReference=Y;return I})}});return z.apply(this,arguments)}g.cut=function(n,p,w,P){return z.apply(this,
arguments)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(g,c,ha,O,t,A){function z(n,p,w){const P={};for(const K in n)if("declaredClass"!==K){var Y=n[K];if(null!=Y&&"function"!==typeof Y)if(Array.isArray(Y)){P[K]=[];for(let k=0;k<Y.length;k++)P[K][k]=z(Y[k])}else"object"===typeof Y?Y.toJSON?(Y=Y.toJSON(w&&w[K]),P[K]=
p?Y:JSON.stringify(Y)):P[K]=p?Y:JSON.stringify(Y):P[K]=Y}return P}g.asValidOptions=function(n,p){return p?{...p,query:{...n,...p.query}}:{query:n}};g.encode=z;g.getToken=function(n,p){return A.supportsApiKey(n)&&(p||c.apiKey)?p||c.apiKey:ha.id?.findCredential(n)?.token};g.parseUrl=function(n){return"string"===typeof n?t.urlToObject(n):O.clone(n)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(g,c,ha,O,t,A){function z(){z=c._asyncToGenerator(function*(n,p,w){const P="string"===typeof n?O.urlToObject(n):n;n=p[0].spatialReference;const Y=t.getJsonType(p[0]);p={...w,query:{...P.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(A.encodeGeometries(p))}};({data:p}=yield ha(P.path+"/simplify",p));return A.decodeGeometries(p.geometries,Y,n)});return z.apply(this,arguments)}g.simplify=function(n,p,w){return z.apply(this,arguments)};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(g,c){g.decodeGeometries=function(ha,O,t){const A=c.getGeometryType(O);return ha.map(z=>{z=A.fromJSON(z);z.spatialReference=t;return z})};g.encodeGeometries=function(ha){return{geometryType:c.getJsonType(ha[0]),geometries:ha.map(O=>O.toJSON())}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(g,c,ha){function O(p,w){return p?z.get(p,w):null}function t(p,w,P,Y=!0){const K=[];for(const k of w)if("*"!==k&&!p.has(k))if(Y){w=A(k);try{const I=O(w,p);if(!I)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!I.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:I});t(p,I.fieldNames,"expression contains missing fields")}catch(I){if((w=I&&I.details)&&
(w.clause||w.where))throw I;w&&w.missingFields?K.push(...w.missingFields):K.push(k)}}else K.push(k);if(K.length)throw new c("feature-store:unsupported-query",P,{missingFields:K});}function A(p){return p.split(" as ")[0]}const z=new ha.WhereClauseCache(50,500),n=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));g.getAliasFromFieldName=function(p){return p.split(" as ")[1]};g.getExpressionFromFieldName=
A;g.getWhereClause=O;g.hasInvalidFieldType=function(p,w){return(p=w.get(p))?!n.has(p.type):!1};g.validateFields=t;g.validateHaving=function(p,w,P){if(!w)return!0;const Y=z.get(w,p);if(!Y)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:w});if(!Y.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:w});t(p,Y.fieldNames,"having contains missing fields");if(!Y.getExpressions().every(K=>{const {aggregateType:k,
field:I}=K,d=p.has(I)&&p.get(I).name;return P.some(l=>{const {onStatisticField:L,statisticType:D}=l;return(p.has(L)&&p.get(L).name)===d&&D.toLowerCase().trim()===k})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:w});return!0};g.validateWhere=function(p,w){if(!w)return!0;const P=z.get(w,p);if(!P)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!P.isStandardized)throw new c("feature-store:unsupported-query",
"where clause is not standard",{where:w});t(p,P.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(g,c,ha){let O=function(){function t(A,z){this._cache=new c(A);this._invalidCache=new c(z)}t.prototype.get=function(A,z){const n=`${z.uid}:${A}`,p=this._cache.get(n);if(p)return p;if(void 0!==this._invalidCache.get(n))return null;
try{const w=ha.WhereClause.create(A,z);this._cache.put(n,w);return w}catch{return this._invalidCache.put(n,null),null}};return t}();g.WhereClauseCache=O;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(g){return function(){function c(O,t){this._storage=new g.MemCacheStorage;this._storage.maxSize=O;t&&this._storage.registerRemoveFunc("",t)}var ha=c.prototype;ha.put=function(O,t){this._storage.put(O,
t,1,1)};ha.pop=function(O){return this._storage.pop(O)};ha.get=function(O){return this._storage.get(O)};ha.clear=function(){this._storage.clearAll()};ha.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(g,c,ha,O,t,A){function z(u,H){u+="";return u.length>=H?u:Array(H-u.length+1).join("0")+u}function n(u,H,q="0",
R="0",Z="0",W="0",ka="",ba="0",qa="0"){return"+"===ka||"-"===ka?(u=`${z(parseInt(u,10),4)}-${z(parseInt(H,10),2)}-${z(parseInt(q,10),2)}`,H="",10>parseFloat(W)&&(H="0"),R=`${z(parseInt(R,10),2)}:${z(parseInt(Z,10),2)}:${H+parseFloat(W).toString()}`,ka=`${ka}${z(parseInt(ba,10),2)}:${z(parseInt(qa,10),2)}`,new Date(u+"T"+R+ka)):new Date(parseInt(u,10),parseInt(H,10)-1,parseInt(q,10),parseInt(R,10),parseInt(Z,10),parseFloat(W))}function p(u){let H=f.exec(u);if(null!==H){const [,q,R,Z,W,ka,ba]=H;return n(q,
R,Z,W,ka,ba)}H=h.exec(u);if(null!==H){const [,q,R,Z,W,ka,ba,qa,wa,xa]=H;return n(q,R,Z,W,ka,ba,qa,wa,xa)}H=r.exec(u);if(null!==H){const [,q,R,Z,W,ka,ba,qa,wa]=H;return n(q,R,Z,W,ka,"0",ba,qa,wa)}H=x.exec(u);if(null!==H){const [,q,R,Z,W,ka]=H;return n(q,R,Z,W,ka)}H=N.exec(u);if(null!==H){const [,q,R,Z]=H;return n(q,R,Z)}throw Error("SQL Invalid Timestamp");}function w(u){const H=N.exec(u);if(null===H)try{return p(u)}catch{throw Error("SQL Invalid Date");}const [,q,R,Z]=H;return new Date(parseInt(q,
10),parseInt(R,10)-1,parseInt(Z,10))}function P(u){return Array.isArray(u)?u:[u]}function Y(u){return null!==u?!0!==u:null}function K(u,H){return null!=u&&null!=H?!0===u&&!0===H:!1===u||!1===H?!1:null}function k(u,H){return null!=u&&null!=H?!0===u||!0===H:!0===u||!0===H?!0:null}function I(u,H){if(null==u)return null;let q=!1;for(const R of H)if(null==R)q=null;else if(u===R){q=!0;break}return q}function d(u,H,q){if(null==u)return null;let R="",Z=M.Normal;for(let W=0;W<H.length;W++){const ka=H.charAt(W);
switch(Z){case M.Normal:ka===q?Z=M.Escaped:R="-[]/{}()*+?.\\^$|".includes(ka)?R+("\\"+ka):"%"===ka?R+".*":"_"===ka?R+".":R+ka;break;case M.Escaped:R="-[]/{}()*+?.\\^$|".includes(ka)?R+("\\"+ka):R+ka,Z=M.Normal}}return(new RegExp("^"+R+"$","m")).test(u)}function l(u){return u instanceof Date?u.valueOf():u}function L(u,H,q){if(null==H||null==q)return null;H=l(H);q=l(q);switch(u){case "\x3c\x3e":return H!==q;case "\x3d":return H===q;case "\x3e":return H>q;case "\x3c":return H<q;case "\x3e\x3d":return H>=
q;case "\x3c\x3d":return H<=q}}function D(u,H,q){if(H instanceof t.SqlInterval)if(q instanceof Date)switch(u){case "+":return new Date(H.valueInMilliseconds()+q.getTime());case "-":return H.valueInMilliseconds()-q.getTime();case "*":return H.valueInMilliseconds()*q.getTime();case "/":return H.valueInMilliseconds()/q.getTime()}else if(q instanceof t.SqlInterval)switch(u){case "+":return t.SqlInterval.createFromMilliseconds(H.valueInMilliseconds()+q.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(H.valueInMilliseconds()-
q.valueInMilliseconds());case "*":return H.valueInMilliseconds()*q.valueInMilliseconds();case "/":return H.valueInMilliseconds()/q.valueInMilliseconds()}else H=H.valueInMilliseconds();else if(q instanceof t.SqlInterval)if(H instanceof Date)switch(u){case "+":return new Date(q.valueInMilliseconds()+H.getTime());case "-":return new Date(H.getTime()-q.valueInMilliseconds());case "*":return H.getTime()*q.valueInMilliseconds();case "/":return H.getTime()/q.valueInMilliseconds()}else q=q.valueInMilliseconds();
else if(H instanceof Date&&"number"===typeof q)switch(q*=864E5,H=H.getTime(),u){case "+":return new Date(H+q);case "-":return new Date(H-q);case "*":return new Date(H*q);case "/":return new Date(H/q)}else if(q instanceof Date&&"number"===typeof H)switch(H*=864E5,q=q.getTime(),u){case "+":return new Date(H+q);case "-":return new Date(H-q);case "*":return new Date(H*q);case "/":return new Date(H/q)}switch(u){case "+":return H+q;case "-":return H-q;case "*":return H*q;case "/":return H/q}}function G(u,
H,q,R){u=R.getAttribute(u,H);return null!=u&&1===q[H]?new Date(u):u}const N=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,f=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,T=new Set(["current_timestamp","current_date","current_time"]);let C=function(){function u(){}
u.makeBool=function(H){return!0===H};u.featureValue=function(H,q,R,Z){return G(H,q,R,Z)};u.equalsNull=function(H){return null===H};u.applyLike=function(H,q,R){return d(H,q,R)};u.ensureArray=function(H){return P(H)};u.applyIn=function(H,q){return I(H,q)};u.currentDate=function(){const H=new Date;H.setHours(0,0,0,0);return H};u.makeSqlInterval=function(H,q,R){return t.SqlInterval.createFromValueAndQualifer(H,q,R)};u.convertInterval=function(H){return H instanceof t.SqlInterval?H.valueInMilliseconds():
H};u.currentTimestamp=function(){return new Date};u.compare=function(H,q,R){return L(H,q,R)};u.calculate=function(H,q,R){return D(H,q,R)};u.makeComparable=function(H){return l(H)};u.evaluateFunction=function(H,q){return t.evaluateFunction(H,q)};u.lookup=function(H,q){H=q[H];return void 0===H?null:H};u.between=function(H,q){return null==H||null==q[0]||null==q[1]?null:H>=q[0]&&H<=q[1]};u.notbetween=function(H,q){return null==H||null==q[0]||null==q[1]?null:H<q[0]||H>q[1]};u.ternaryNot=function(H){return Y(H)};
u.ternaryAnd=function(H,q){return K(H,q)};u.ternaryOr=function(H,q){return k(H,q)};return u}(),B=function(){function u(q,R){this.fieldsIndex=R;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=A.WhereGrammar.parse(q);const {isStandardized:Z,isAggregate:W,referencedFieldNames:ka}=this._extractExpressionInfo(R);this._referencedFieldNames=ka;this.isStandardized=Z;this.isAggregate=W}u.create=function(q,R){return new u(q,R)};var H=u.prototype;H.testSet=function(q,R=F){const Z=
{};for(const W of this.fieldNames)Z[W]=q.map(ka=>R.getAttribute(ka,W));return!!this._evaluateNode(this.parseTree,{attributes:Z},F)};H.calculateValue=function(q,R=F){q=this._evaluateNode(this.parseTree,q,R);return q instanceof t.SqlInterval?q.valueInMilliseconds()/864E5:q};H.calculateValueCompiled=function(q,R=F){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(q,this.parameters,R,this._datefields);if(ha("esri-csp-restrictions"))return this.calculateValue(q,R);this._compileMe();
return this.parseTree._compiledVersion(q,this.parameters,R,this._datefields)};H.testFeature=function(q,R=F){return!!this._evaluateNode(this.parseTree,q,R)};H.testFeatureCompiled=function(q,R=F){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(q,this.parameters,R,this._datefields);if(ha("esri-csp-restrictions"))return this.testFeature(q,R);this._compileMe();return!!this.parseTree._compiledVersion(q,this.parameters,R,this._datefields)};H.getFunctions=function(){const q=
new Set;this._visitAll(this.parseTree,R=>{"function"===R.type&&q.add(R.name.toLowerCase())});return Array.from(q)};H.getExpressions=function(){const q=new Map;this._visitAll(this.parseTree,R=>{if("function"===R.type){const Z=R.name.toLowerCase();R=R.args.value[0];if("column-reference"===R.type){R=R.column;const W=`${Z}-${R}`;q.has(W)||q.set(W,{aggregateType:Z,field:R})}}});return[...q.values()]};H.getVariables=function(){const q=new Set;this._visitAll(this.parseTree,R=>{"parameter"===R.type&&q.add(R.value.toLowerCase())});
return Array.from(q)};H._compileMe=function(){const q="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",q)).bind(C)};H._extractExpressionInfo=function(q){const R=[],Z=new Set;let W=!0,ka=!0;this._visitAll(this.parseTree,ba=>{switch(ba.type){case "column-reference":const qa=q?.get(ba.column);let wa,xa;qa?wa=xa=qa.name??"":(xa=ba.column,wa=xa.toLowerCase());qa&&qa.name&&("date"===
qa.type||"esriFieldTypeDate"===qa.type)&&(this._datefields[qa.name]=1);Z.has(wa)||(Z.add(wa),R.push(xa));ba.column=xa;break;case "function":const {name:Ba,args:Ca}=ba;ba=Ca.value.length;W&&(W=t.isStandardized(Ba,ba));ka&&(ka=O.isAggregate(Ba,ba))}});return{referencedFieldNames:Array.from(R),isStandardized:W,isAggregate:ka}};H._visitAll=function(q,R){if(null!=q)switch(R(q),q.type){case "when-clause":this._visitAll(q.operand,R);this._visitAll(q.value,R);break;case "case-expression":for(const Z of q.clauses)this._visitAll(Z,
R);"simple"===q.format&&this._visitAll(q.operand,R);null!==q.else&&this._visitAll(q.else,R);break;case "expression-list":for(const Z of q.value)this._visitAll(Z,R);break;case "unary-expression":this._visitAll(q.expr,R);break;case "binary-expression":this._visitAll(q.left,R);this._visitAll(q.right,R);break;case "function":this._visitAll(q.args,R)}};H.evaluateNodeToJavaScript=function(q){switch(q.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(q.value)+", "+JSON.stringify(q.qualifier)+
","+JSON.stringify(q.op)+")";case "case-expression":var R="";if("simple"===q.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(q.operand)+")";R="( ";for(let W=0;W<q.clauses.length;W++)R+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(q.clauses[W].operand)+")) ? ("+this.evaluateNodeToJavaScript(q.clauses[W].value)+") : "}else for(R="( ",Z=0;Z<q.clauses.length;Z++)R+=" this.makeBool("+this.evaluateNodeToJavaScript(q.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(q.clauses[Z].value)+") : ";R=null!==q.else?R+this.evaluateNodeToJavaScript(q.else):R+"null";return R+" )";case "parameter":return"this.lookup("+JSON.stringify(q.value.toLowerCase())+",lookups)";case "expression-list":R="[";for(Z of q.value)"["!==R&&(R+=","),R+=this.evaluateNodeToJavaScript(Z);return R+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(q.expr)+")";case "binary-expression":switch(q.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")";case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+
this.evaluateNodeToJavaScript(q.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")"}throw Error("Not Supported Operator "+q.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(q.value);case "date":return"(new Date("+w(q.value).getTime().toString()+"))";case "timestamp":return"(new Date("+p(q.value).getTime().toString()+"))";case "current-time":return"date"===
q.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(q.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(q.name)+","+this.evaluateNodeToJavaScript(q.args)+")"}throw Error("Unsupported sql syntax "+q.type);};H._evaluateNode=function(q,R,Z){switch(q.type){case "interval":return R=this._evaluateNode(q.value,R,Z),t.SqlInterval.createFromValueAndQualifer(R,q.qualifier,q.op);case "case-expression":if("simple"===
q.format){var W=l(this._evaluateNode(q.operand,R,Z));for(var ka=0;ka<q.clauses.length;ka++)if(W===l(this._evaluateNode(q.clauses[ka].operand,R,Z)))return this._evaluateNode(q.clauses[ka].value,R,Z)}else for(W=0;W<q.clauses.length;W++)if(!0===this._evaluateNode(q.clauses[W].operand,R,Z))return this._evaluateNode(q.clauses[W].value,R,Z);return null!==q.else?this._evaluateNode(q.else,R,Z):null;case "parameter":return this.parameters[q.value.toLowerCase()];case "expression-list":W=[];for(ka of q.value)W.push(this._evaluateNode(ka,
R,Z));return W;case "unary-expression":return Y(this._evaluateNode(q.expr,R,Z));case "binary-expression":switch(q.operator){case "AND":return K(this._evaluateNode(q.left,R,Z),this._evaluateNode(q.right,R,Z));case "OR":return k(this._evaluateNode(q.left,R,Z),this._evaluateNode(q.right,R,Z));case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(q.left,R,Z);case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(q.left,
R,Z);case "IN":return W=P(this._evaluateNode(q.right,R,Z)),I(this._evaluateNode(q.left,R,Z),W);case "NOT IN":return W=P(this._evaluateNode(q.right,R,Z)),Y(I(this._evaluateNode(q.left,R,Z),W));case "BETWEEN":return W=this._evaluateNode(q.left,R,Z),q=this._evaluateNode(q.right,R,Z),null==W||null==q[0]||null==q[1]?null:W>=l(q[0])&&W<=l(q[1]);case "NOTBETWEEN":return W=this._evaluateNode(q.left,R,Z),q=this._evaluateNode(q.right,R,Z),null==W||null==q[0]||null==q[1]?null:W<l(q[0])||W>l(q[1]);case "LIKE":return d(this._evaluateNode(q.left,
R,Z),this._evaluateNode(q.right,R,Z),q.escape);case "NOT LIKE":return Y(d(this._evaluateNode(q.left,R,Z),this._evaluateNode(q.right,R,Z),q.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(q.operator,this._evaluateNode(q.left,R,Z),this._evaluateNode(q.right,R,Z));case "-":case "+":case "*":case "/":return D(q.operator,this._evaluateNode(q.left,R,Z),this._evaluateNode(q.right,R,Z))}case "null":case "boolean":case "string":case "number":return q.value;
case "date":return w(q.value);case "timestamp":return p(q.value);case "current-time":return R=new Date,"date"===q.mode&&R.setHours(0,0,0,0),R;case "column-reference":return G(R,q.column,this._datefields,Z);case "function":return R=this._evaluateNode(q.args,R,Z),this.isAggregate?O.aggregateFunction(q.name,R):t.evaluateFunction(q.name,R)}throw Error("Unsupported sql syntax "+q.type);};c._createClass(u,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,q=>{"current-time"===q.type?this._hasDateFunctions=!0:"function"===q.type&&(this._hasDateFunctions=this._hasDateFunctions||T.has(q.name.toLowerCase()))});return this._hasDateFunctions}}]);return u}();var M;(function(u){u[u.Normal=0]="Normal";u[u.Escaped=1]="Escaped"})(M||(M={}));const F={getAttribute(u,H){return(u&&"object"===typeof u.attributes?u.attributes:u)[H]}};g.WhereClause=B;g.defaultAttributeAdapter=
F;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(g){function c(t){let A=0;for(let z=0;z<t.length;z++)A+=t[z];return A/t.length}function ha(t){const A=c(t),z=t.length;let n=0;for(const p of t)n+=(p-A)**2;return 1<z?n/(z-1):0}const O={min:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.max.apply(Math,
t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:c(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{if(null==t[0])t=null;else{t=t[0];let A=0;for(let z=0;z<t.length;z++)A+=t[z];t=A}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sqrt(ha(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:ha(t[0])}};g.aggregateFunction=function(t,A){const z=O[t.toLowerCase()];if(null==z)throw Error("Function Not Recognised");
if(A.length<z.minParams||A.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return z.evaluate(A)};g.isAggregate=function(t,A){t=O[t.toLowerCase()];return null!=t&&A>=t.minParams&&A<=t.maxParams};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(g,c){let ha=function(){function t(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}t._fixDefaults=function(A){if(null!==A.precision||null!==A.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};t.createFromMilliseconds=function(A){const z=new t;z.second=A/1E3;return z};t.createFromValueAndQualifer=function(A,z,n){let p=null;const w=new t;w.op="-"===n?"-":"+";if("interval-period"===z.type){t._fixDefaults(z);n=RegExp("^[0-9]{1,}$");if("year"===z.period||"month"===z.period)throw Error("Year-Month Intervals not supported");if(n.test(A))w[z.period]=
parseFloat(A);else throw Error("Illegal Interval");}else{t._fixDefaults(z.start);t._fixDefaults(z.end);if("year"===z.start.period||"month"===z.start.period)throw Error("Year-Month Intervals not supported");if("year"===z.end.period||"month"===z.end.period)throw Error("Year-Month Intervals not supported");switch(z.start.period){case "day":switch(z.end.period){case "hour":p=RegExp("^[0-9]{1,} [0-9]{1,}$");if(p.test(A))w[z.start.period]=parseFloat(A.split(" ")[0]),w[z.end.period]=parseFloat(A.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(p.test(A))w[z.start.period]=parseFloat(A.split(" ")[0]),A=A.split(" ")[1].split(":"),w.hour=parseFloat(A[0]),w.minute=parseFloat(A[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(A))w[z.start.period]=parseFloat(A.split(" ")[0]),A=A.split(" ")[1].split(":"),w.hour=parseFloat(A[0]),w.minute=parseFloat(A[1]),
w.second=parseFloat(A[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(z.end.period){case "minute":p=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(p.test(A))w.hour=parseFloat(A.split(":")[0]),w.minute=parseFloat(A.split(":")[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(A))A=A.split(":"),w.hour=parseFloat(A[0]),w.minute=parseFloat(A[1]),w.second=parseFloat(A[2]);
else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(z.end.period){case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(A))A=A.split(":"),w.minute=parseFloat(A[0]),w.second=parseFloat(A[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return w};t.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+
6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return t}();const O={extract:{minParams:2,maxParams:2,evaluate:([t,A])=>{if(null==A)return null;if(A instanceof Date)switch(t.toUpperCase()){case "SECOND":return A.getSeconds();case "MINUTE":return A.getMinutes();case "HOUR":return A.getHours();case "DAY":return A.getDate();case "MONTH":return A.getMonth()+1;case "YEAR":return A.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:t=>{if(2===t.length){const [A,z]=t;return null==A||null==z?null:A.toString().substring(z-1)}if(3===t.length){const [A,z,n]=t;return null==A||null==z||null==n?null:0>=n?"":A.toString().substring(z-1,z+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,A])=>null==t||null==A?null:A.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{var A=3===t.length,z=A?t[1]:" ";A=A?t[2]:t[1];if(null==z||null==A)return null;z=`(${c.escapeRegExpString(z)})`;switch(t[0]){case "BOTH":return A.replace(new RegExp(`^${z}*|${z}*$`,
"g"),"");case "LEADING":return A.replace(new RegExp(`^${z}*`,"g"),"");case "TRAILING":return A.replace(new RegExp(`${z}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])},log10:{minParams:1,
maxParams:1,evaluate:t=>null==t[0]?null:Math.log(t[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:Math.atan(t[0])},
sign:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:0<t[0]?1:0>t[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>null==t[0]||null==t[1]?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const A=t[0];t=2===t.length?10**t[1]:1;return null==A?null:Math.round(A*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:t=>null==t[0]?null:1===t.length?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},
char_length:{minParams:1,maxParams:1,evaluate:t=>"string"===typeof t[0]||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:t=>{let A="";for(let z=0;z<t.length;z++){if(null==t[z])return null;A+=t[z].toString()}return A}},lower:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].toString().toUpperCase()}};g.SqlInterval=ha;g.evaluateFunction=function(t,A){const z=O[t.toLowerCase()];
if(null==z)throw Error("Function Not Recognised");if(A.length<z.minParams||A.length>z.maxParams)throw Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return z.evaluate(A)};g.isStandardized=function(t,A){t=O[t.toLowerCase()];return null!=t&&A>=t.minParams&&A<=t.maxParams};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(g,c){var ha={exports:{}};
(function(t){(function(A,z){t.exports&&(t.exports=z())})(c.commonjsGlobal,function(){function A(n,p,w,P){n=Error.call(this,n);Object.setPrototypeOf&&Object.setPrototypeOf(n,A.prototype);n.expected=p;n.found=w;n.location=P;n.name="SyntaxError";return n}function z(n,p,w){w=w||" ";if(n.length>p)return n;p-=n.length;w+=w.repeat(p);return n+w.slice(0,p)}(function(n,p){function w(){this.constructor=n}w.prototype=p.prototype;n.prototype=new w})(A,Error);A.prototype.format=function(n){var p="Error: "+this.message;
if(this.location){var w=null,P;for(P=0;P<n.length;P++)if(n[P].source===this.location.source){w=n[P].text.split(/\r\n|\n|\r/g);break}n=this.location.start;P=this.location.source+":"+n.line+":"+n.column;if(w){var Y=this.location.end,K=z("",n.line.toString().length," ");w=w[n.line-1];Y=(n.line===Y.line?Y.column:w.length+1)-n.column||1;p+="\n --\x3e "+P+"\n"+K+" |\n"+n.line+" | "+w+"\n"+K+" | "+z("",n.column-1," ")+z("",Y,"^")}else p+="\n at "+P}return p};A.buildMessage=function(n,p){function w(I){return I.charCodeAt(0).toString(16).toUpperCase()}
function P(I){return I.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function Y(I){return I.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function K(I){return k[I.type](I)}var k={literal:function(I){return'"'+P(I.text)+'"'},class:function(I){var d=I.parts.map(function(l){return Array.isArray(l)?Y(l[0])+"-"+Y(l[1]):Y(l)});return"["+(I.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(I){return I.description}};return"Expected "+function(I){I=I.map(K);var d,l;I.sort();if(0<I.length){for(l=d=1;d<
I.length;d++)I[d-1]!==I[d]&&(I[l]=I[d],l++);I.length=l}switch(I.length){case 1:return I[0];case 2:return I[0]+" or "+I[1];default:return I.slice(0,-1).join(", ")+", or "+I[I.length-1]}}(n)+" but "+(p?'"'+P(p)+'"':"end of input")+" found."};return{SyntaxError:A,parse:function(n,p){function w(v,E){return{type:"literal",text:v,ignoreCase:E}}function P(v,E,X){return{type:"class",parts:v,inverted:E,ignoreCase:X}}function Y(v){var E=gc[v],X;if(!E){for(X=v-1;!gc[X];)X--;E=gc[X];for(E={line:E.line,column:E.column};X<
v;)10===n.charCodeAt(X)?(E.line++,E.column=1):E.column++,X++;gc[v]=E}return E}function K(v,E){var X=Y(v),ua=Y(E);return{source:db,start:{offset:v,line:X.line,column:X.column},end:{offset:E,line:ua.line,column:ua.column}}}function k(v){e<ub||(e>ub&&(ub=e,Ac=[]),Ac.push(v))}function I(){var v=e;ta();var E=l();E!==a?(ta(),v=E):(e=v,v=a);return v}function d(){var v=e;var E=l();if(E!==a){v=[];var X=e;var ua=ta();var Ea=Ha();if(Ea!==a){var Oa=ta();var Qa=l();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,
X=a;for(;X!==a;)v.push(X),X=e,ua=ta(),Ea=Ha(),Ea!==a?(Oa=ta(),Qa=l(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);X={type:"expression-list"};E=[E];for(ua=0;ua<v.length;ua++)E.push(v[ua][3]);X.value=E;v=X}else e=v,v=a;return v}function l(){var v=e;var E=L();if(E!==a){v=[];var X=e;var ua=ta();var Ea=y();if(Ea!==a){var Oa=ta();var Qa=L();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)v.push(X),X=e,ua=ta(),Ea=y(),Ea!==a?(Oa=ta(),Qa=L(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);v=
$a(E,v)}else e=v,v=a;return v}function L(){var v=e;var E=D();if(E!==a){v=[];var X=e;var ua=ta();var Ea=oa();if(Ea!==a){var Oa=ta();var Qa=D();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)v.push(X),X=e,ua=ta(),Ea=oa(),Ea!==a?(Oa=ta(),Qa=D(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);v=$a(E,v)}else e=v,v=a;return v}function D(){var v=e;var E=ia();if(E===a){E=e;if(33===n.charCodeAt(e)){var X=nb;e++}else X=a,0===va&&k(qd);if(X!==a){var ua=e;va++;if(61===n.charCodeAt(e)){var Ea=Ya;
e++}else Ea=a,0===va&&k(Qc);va--;Ea===a?ua=void 0:(e=ua,ua=a);ua!==a?E=X=[X,ua]:(e=E,E=a)}else e=E,E=a}E!==a?(X=ta(),ua=D(),ua!==a?v={type:"unary-expression",operator:"NOT",expr:ua}:(e=v,v=a)):(e=v,v=a);if(v===a){E=e;v=h();if(v!==a){ta();E=[];X=e;ua=ta();Ea=G();if(Ea!==a){var Oa=ta();var Qa=h();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;if(X!==a)for(;X!==a;)E.push(X),X=e,ua=ta(),Ea=G(),Ea!==a?(Oa=ta(),Qa=h(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);else E=a;E!==a&&(E={type:"arithmetic",
tail:E});E===a&&(E=e,X=f(),X!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=d(),ua!==a?(ta(),Ea=Ka(),Ea!==a?E={op:X,right:ua}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,X=f(),X!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=Ka(),ua!==a?E={op:X,right:{type:"expression-list",value:[]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,X=f(),X!==a?(ta(),ua=H(),ua!==a?E={op:X,right:ua}:(e=E,E=a)):(e=E,E=a))),E===a&&(E=e,Ea=ia(),Ea!==a?(ta(),X=J(),X!==a?(ta(),ua=h(),ua!==a?(ta(),Oa=oa(),Oa!==a?(ta(),Ea=h(),Ea!==a?E={op:"NOT"+
X,right:{type:"expression-list",value:[ua,Ea]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,Ea=J(),Ea!==a?(ta(),X=h(),X!==a?(ta(),ua=oa(),ua!==a?(ta(),Oa=h(),Oa!==a?E={op:Ea,right:{type:"expression-list",value:[X,Oa]}}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a)),E===a&&(E=e,X=m(),X!==a?(ta(),ua=ia(),ua!==a?(ta(),ua=h(),ua!==a?E={op:X+"NOT",right:ua}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,X=m(),X!==a?(ta(),ua=h(),ua!==a?E={op:X,right:ua}:(e=E,E=a)):(e=E,E=a)),E===a&&(E=e,
X=N(),X!==a?(ta(),ua=ba(),ua!==a?(ta(),Ea=e,n.substr(e,6).toLowerCase()===pa?(Oa=n.substr(e,6),e+=6):(Oa=a,0===va&&k(rd)),Oa!==a?(Oa=e,va++,Qa=F(),va--,Qa===a?Oa=void 0:(e=Oa,Oa=a),Oa!==a?Ea="ESCAPE":(e=Ea,Ea=a)):(e=Ea,Ea=a),Ea!==a?(ta(),Ea=qa(),Ea!==a?E={op:X,right:ua,escape:Ea.value}:(e=E,E=a)):(e=E,E=a)):(e=E,E=a)):(e=E,E=a),E===a&&(E=e,X=N(),X!==a?(ta(),ua=ba(),ua!==a?E={op:X,right:ua,escape:""}:(e=E,E=a)):(e=E,E=a))))));E===a&&(E=null);""==E||void 0==E||null==E?E=v:(X=null,E=X="arithmetic"==
E.type?$a(v,E.tail):ab(E.op,v,E.right,E.escape))}else e=E,E=a;v=E}return v}function G(){if(n.substr(e,2)===Eb){var v=Eb;e+=2}else v=a,0===va&&k(sd);v===a&&(62===n.charCodeAt(e)?(v=dc,e++):(v=a,0===va&&k(td)),v===a&&(n.substr(e,2)===Fb?(v=Fb,e+=2):(v=a,0===va&&k(ud)),v===a&&(n.substr(e,2)===la?(v=la,e+=2):(v=a,0===va&&k(vd)),v===a&&(60===n.charCodeAt(e)?(v=ec,e++):(v=a,0===va&&k(wd)),v===a&&(61===n.charCodeAt(e)?(v=Ya,e++):(v=a,0===va&&k(Qc)),v===a&&(n.substr(e,2)===Cb?(v=Cb,e+=2):(v=a,0===va&&k(xd))))))));
return v}function N(){var v=v=e;var E=ia();if(E!==a){var X=ta();var ua=ea();ua!==a?v=E=[E,X,ua]:(e=v,v=a)}else e=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=ea());return v}function f(){var v=v=e;var E=ia();if(E!==a){var X=ta();var ua=b();ua!==a?v=E=[E,X,ua]:(e=v,v=a)}else e=v,v=a;v!==a&&(v=v[0]+" "+v[2]);v===a&&(v=b());return v}function h(){var v=e;var E=x();if(E!==a){v=[];var X=e;var ua=ta();var Ea=r();if(Ea!==a){var Oa=ta();var Qa=x();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)v.push(X),
X=e,ua=ta(),Ea=r(),Ea!==a?(Oa=ta(),Qa=x(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);v=$a(E,v)}else e=v,v=a;return v}function r(){if(43===n.charCodeAt(e)){var v=hb;e++}else v=a,0===va&&k(Bc);v===a&&(45===n.charCodeAt(e)?(v=sb,e++):(v=a,0===va&&k(Cc)));return v}function x(){var v=e;var E=C();if(E!==a){v=[];var X=e;var ua=ta();var Ea=T();if(Ea!==a){var Oa=ta();var Qa=C();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)v.push(X),X=e,ua=ta(),Ea=T(),Ea!==a?(Oa=ta(),Qa=C(),Qa!==a?X=ua=
[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);v=$a(E,v)}else e=v,v=a;return v}function T(){if(42===n.charCodeAt(e)){var v=fc;e++}else v=a,0===va&&k(yd);v===a&&(47===n.charCodeAt(e)?(v=Tb,e++):(v=a,0===va&&k(zd)));return v}function C(){var v=qa();if(v===a){var E=e;var X=e;var ua=Ca();if(ua!==a){var Ea=Ja();if(Ea!==a){var Oa=La();Oa!==a?X=parseFloat(ua+Ea+Oa):(e=X,X=a)}else e=X,X=a}else e=X,X=a;X===a&&(X=e,ua=Ca(),ua!==a?(Ea=Ja(),Ea!==a?X=parseFloat(ua+Ea):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=Ca(),ua!==a?(Ea=La(),
Ea!==a?X=parseFloat(ua+Ea):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=Ca(),ua!==a&&(ua=parseFloat(ua)),X=ua)));var Qa=X;if(Qa!==a){var hc=e;va++;var Ad=M();va--;Ad===a?hc=void 0:(e=hc,hc=a);hc!==a?E={type:"number",value:Qa}:(e=E,E=a)}else e=E,E=a;v=E;if(v===a){var Ub=e;var Ib=e;if(n.substr(e,4).toLowerCase()===Pa){var ic=n.substr(e,4);e+=4}else ic=a,0===va&&k(Bd);if(ic!==a){var Vb=e;va++;var Cd=F();va--;Cd===a?Vb=void 0:(e=Vb,Vb=a);Vb!==a?Ib=ic=[ic,Vb]:(e=Ib,Ib=a)}else e=Ib,Ib=a;var Gb=Ib;Gb!==a&&(Gb={type:"boolean",
value:!0});Ub=Gb;if(Ub===a){Ub=e;var Jb=e;if(n.substr(e,5).toLowerCase()===Hb){var jc=n.substr(e,5);e+=5}else jc=a,0===va&&k(Dd);if(jc!==a){var Wb=e;va++;var Ed=F();va--;Ed===a?Wb=void 0:(e=Wb,Wb=a);Wb!==a?Jb=jc=[jc,Wb]:(e=Jb,Jb=a)}else e=Jb,Jb=a;Gb=Jb;Gb!==a&&(Gb={type:"boolean",value:!1});Ub=Gb}v=Ub;if(v===a){var Kb=e;if(n.substr(e,4).toLowerCase()===tb){var kc=n.substr(e,4);e+=4}else kc=a,0===va&&k(Fd);if(kc!==a){var Xb=e;va++;var Gd=F();va--;Gd===a?Xb=void 0:(e=Xb,Xb=a);Xb!==a?Kb=kc=[kc,Xb]:(e=
Kb,Kb=a)}else e=Kb,Kb=a;var Dc=Kb;Dc!==a&&(Dc={type:"null",value:null});v=Dc;if(v===a){var Lb=e;var Mb=e;if(n.substr(e,4).toLowerCase()===Hd){var Rc=n.substr(e,4);e+=4}else Rc=a,0===va&&k(Id);if(Rc!==a){var lc=e;va++;var Jd=F();va--;Jd===a?lc=void 0:(e=lc,lc=a);lc!==a?Mb="DATE":(e=Mb,Mb=a)}else e=Mb,Mb=a;if(Mb!==a){ta();var Sc=ba();Sc!==a?Lb={type:"date",value:Sc.value}:(e=Lb,Lb=a)}else e=Lb,Lb=a;v=Lb;if(v===a){var Nb=e;var Ob=e;if(n.substr(e,9).toLowerCase()===Kd){var Tc=n.substr(e,9);e+=9}else Tc=
a,0===va&&k(Ld);if(Tc!==a){var mc=e;va++;var Md=F();va--;Md===a?mc=void 0:(e=mc,mc=a);mc!==a?Ob="TIMESTAMP":(e=Ob,Ob=a)}else e=Ob,Ob=a;if(Ob!==a){ta();var Uc=ba();Uc!==a?Nb={type:"timestamp",value:Uc.value}:(e=Nb,Nb=a)}else e=Nb,Nb=a;v=Nb;if(v===a){var eb=e;var Ec=fa();if(Ec!==a){ta();if(45===n.charCodeAt(e)){var yb=sb;e++}else yb=a,0===va&&k(Cc);yb===a&&(43===n.charCodeAt(e)?(yb=hb,e++):(yb=a,0===va&&k(Bc)));if(yb!==a){ta();var Yb=ba();if(Yb!==a){ta();var Vc=R();Vc!==a?eb={type:"interval",value:Yb,
qualifier:Vc,op:yb}:(e=eb,eb=a)}else e=eb,eb=a}else e=eb,eb=a}else e=eb,eb=a;eb===a&&(eb=e,Ec=fa(),Ec!==a?(ta(),yb=ba(),yb!==a?(ta(),Yb=R(),Yb!==a?eb={type:"interval",value:yb,qualifier:Yb,op:""}:(e=eb,eb=a)):(e=eb,eb=a)):(e=eb,eb=a));v=eb}}}}}}var Xa=v;if(Xa===a){var kb=e;var Pb=e;if(n.substr(e,7).toLowerCase()===cb){var Wc=n.substr(e,7);e+=7}else Wc=a,0===va&&k(Nd);if(Wc!==a){var nc=e;va++;var Od=F();va--;Od===a?nc=void 0:(e=nc,nc=a);nc!==a?Pb="EXTRACT":(e=Pb,Pb=a)}else e=Pb,Pb=a;if(Pb!==a){ta();
var Pd=Fa();if(Pd!==a){ta();var qb=ja();qb===a&&(qb=na(),qb===a&&(qb=ra(),qb===a&&(qb=sa(),qb===a&&(qb=aa(),qb===a&&(qb=da())))));var Xc=qb;if(Xc!==a){ta();var Qd=S();if(Qd!==a){ta();var Yc=l();if(Yc!==a){ta();var Rd=Ka();Rd!==a?kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Xc},Yc]}}:(e=kb,kb=a)}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a;Xa=kb;if(Xa===a){var lb=e;var Qb=e;if(n.substr(e,9).toLowerCase()===Ta){var Zc=n.substr(e,
9);e+=9}else Zc=a,0===va&&k(Sd);if(Zc!==a){var oc=e;va++;var Td=F();va--;Td===a?oc=void 0:(e=oc,oc=a);oc!==a?Qb="SUBSTRING":(e=Qb,Qb=a)}else e=Qb,Qb=a;if(Qb!==a){ta();var Ud=Fa();if(Ud!==a){ta();var Fc=l();if(Fc!==a){ta();var Vd=S();if(Vd!==a){ta();var Gc=l();if(Gc!==a){ta();var zb=e;var Rb=e;if(n.substr(e,3).toLowerCase()===Ua){var $c=n.substr(e,3);e+=3}else $c=a,0===va&&k(Wd);if($c!==a){var pc=e;va++;var Xd=F();va--;Xd===a?pc=void 0:(e=pc,pc=a);pc!==a?Rb="FOR":(e=Rb,Rb=a)}else e=Rb,Rb=a;var Zb=
Rb;if(Zb!==a){var Yd=ta();var ad=l();if(ad!==a){var Zd=ta();zb=Zb=[Zb,Yd,ad,Zd]}else e=zb,zb=a}else e=zb,zb=a;zb===a&&(zb=null);Zb=Ka();Zb!==a?lb={type:"function",name:"substring",args:{type:"expression-list",value:zb?[Fc,Gc,zb[2]]:[Fc,Gc]}}:(e=lb,lb=a)}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a;Xa=lb;if(Xa===a){var Za=e;var Hc=V();if(Hc!==a){ta();var Ic=Fa();if(Ic!==a){ta();var Ab=q();Ab===a&&(Ab=null);ta();var $b=l();if($b!==a){ta();var Jc=S();if(Jc!==a){ta();var bd=
l();if(bd!==a){ta();var $d=Ka();$d!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b,bd]}}:(e=Za,Za=a)}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a;Za===a&&(Za=e,Hc=V(),Hc!==a?(ta(),Ic=Fa(),Ic!==a?(ta(),Ab=q(),Ab===a&&(Ab=null),ta(),$b=l(),$b!==a?(ta(),Jc=Ka(),Jc!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b]}}:(e=Za,Za=a)):(e=Za,Za=
a)):(e=Za,Za=a)):(e=Za,Za=a));Xa=Za;if(Xa===a){var mb=e;var Sb=e;if(n.substr(e,8).toLowerCase()===ae){var cd=n.substr(e,8);e+=8}else cd=a,0===va&&k(be);if(cd!==a){var qc=e;va++;var ce=F();va--;ce===a?qc=void 0:(e=qc,qc=a);qc!==a?Sb="POSITION":(e=Sb,Sb=a)}else e=Sb,Sb=a;if(Sb!==a){ta();var de=Fa();if(de!==a){ta();var dd=l();if(dd!==a){ta();var ee=b();if(ee!==a){ta();var ed=l();if(ed!==a){ta();var fe=Ka();fe!==a?mb={type:"function",name:"position",args:{type:"expression-list",value:[dd,ed]}}:(e=mb,
mb=a)}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a;Xa=mb;if(Xa===a){var Db=e;var rc;var rb=e;rb=rc=B();if(rb===a)if(rb=e,96===n.charCodeAt(e)?(rc=fd,e++):(rc=a,0===va&&k(gd)),rc!==a){var sc=[];if(hd.test(n.charAt(e))){var Bb=n.charAt(e);e++}else Bb=a,0===va&&k(id);if(Bb!==a)for(;Bb!==a;)sc.push(Bb),hd.test(n.charAt(e))?(Bb=n.charAt(e),e++):(Bb=a,0===va&&k(id));else sc=a;sc!==a?(96===n.charCodeAt(e)?(Bb=fd,e++):(Bb=a,0===va&&k(gd)),Bb!==a?rb=sc.join(""):(e=rb,rb=a)):(e=
rb,rb=a)}else e=rb,rb=a;var jd=rb;if(jd!==a){ta();var ge=Fa();if(ge!==a){ta();var tc=d();tc===a&&(tc=null);ta();var he=Ka();he!==a?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(e=Db,Db=a)}else e=Db,Db=a}else e=Db,Db=a;Xa=Db;if(Xa===a){var vb;var fb=e;var Kc=ma();if(Kc!==a){ta();var ac=l();if(ac!==a){ta();var bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();var uc=ya();uc!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(e=fb,fb=a)}else e=
fb,fb=a}else e=fb,fb=a;if(fb===a)if(fb=e,Kc=ma(),Kc!==a)if(ta(),ac=l(),ac!==a){ta();bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();uc=Ba();if(uc!==a){ta();var ie=ya();ie!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:(e=fb,fb=a)}else e=fb,fb=a}else e=fb,fb=a;else e=fb,fb=a;var Lc=fb;if(Lc===a){var wb;var ib=e;var Mc=ma();if(Mc!==a){ta();var cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();var vc=ya();vc!==a?ib={type:"case-expression",format:"searched",
clauses:cc,else:null}:(e=ib,ib=a)}else e=ib,ib=a;if(ib===a)if(ib=e,Mc=ma(),Mc!==a){ta();cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();vc=Ba();if(vc!==a){ta();var je=ya();je!==a?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(e=ib,ib=a)}else e=ib,ib=a}else e=ib,ib=a;Lc=ib}Xa=Lc;if(Xa===a){var wc;var xc=e;var kd=M();if(kd!==a){var ld=[];for(wc=u();wc!==a;)ld.push(wc),wc=u();xc=kd+ld.join("")}else e=xc,xc=a;var yc=xc;if(yc!==a){var Nc=yc;yc=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Xa=yc;if(Xa===a&&(Xa=H(),Xa===a)){Xa=e;var ke=Fa();if(ke!==a){ta();var Oc=l();if(Oc!==a){ta();var le=Ka();le!==a?(Oc.paren=!0,Xa=Oc):(e=Xa,Xa=a)}else e=Xa,Xa=a}else e=Xa,Xa=a}}}}}}}}return Xa}function B(){var v;var E=e;var X=M();if(X!==a){E=[];for(v=F();v!==a;)E.push(v),v=F();E=X+E.join("")}else e=E,E=a;return E}function M(){if(me.test(n.charAt(e))){var v=
n.charAt(e);e++}else v=a,0===va&&k(ne);return v}function F(){if(oe.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&k(pe);return v}function u(){if(qe.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&k(re);return v}function H(){var v=e;if(64===n.charCodeAt(e)){var E=zc;e++}else E=a,0===va&&k(se);if(E!==a){var X=B();X!==a?v=E=[E,X]:(e=v,v=a)}else e=v,v=a;v!==a&&(v={type:"parameter",value:v[1]});return v}function q(){var v=e;if(n.substr(e,7).toLowerCase()===te){var E=n.substr(e,7);
e+=7}else E=a,0===va&&k(ue);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="LEADING":(e=v,v=a)}else e=v,v=a;v===a&&(v=e,n.substr(e,8).toLowerCase()===ve?(E=n.substr(e,8),e+=8):(E=a,0===va&&k(we)),E!==a?(E=e,va++,X=F(),va--,X===a?E=void 0:(e=E,E=a),E!==a?v="TRAILING":(e=v,v=a)):(e=v,v=a),v===a&&(v=e,n.substr(e,4).toLowerCase()===xe?(E=n.substr(e,4),e+=4):(E=a,0===va&&k(ye)),E!==a?(E=e,va++,X=F(),va--,X===a?E=void 0:(e=E,E=a),E!==a?v="BOTH":(e=v,v=a)):(e=v,v=a)));return v}function R(){var v=
e;var E=e;var X=Z();if(X!==a){ta();var ua=Fa();if(ua!==a)if(ta(),ua=ka(),ua!==a){ta();var Ea=Ka();Ea!==a?E={type:"interval-period",period:X.value,precision:ua,secondary:null}:(e=E,E=a)}else e=E,E=a;else e=E,E=a}else e=E,E=a;E===a&&(E=e,X=Z(),X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),E=X);if(E!==a)if(ta(),X=e,n.substr(e,2).toLowerCase()===ze?(ua=n.substr(e,2),e+=2):(ua=a,0===va&&k(Ae)),ua!==a?(ua=e,va++,Ea=F(),va--,Ea===a?ua=void 0:(e=ua,ua=a),ua!==a?X="TO":(e=
X,X=a)):(e=X,X=a),X!==a){ta();X=e;ua=Z();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});X=ua;if(X===a){X=e;ua=da();if(ua!==a)if(ta(),ua=Fa(),ua!==a)if(ta(),ua=ka(),ua!==a)if(ta(),Ea=Ha(),Ea!==a)if(ta(),Ea=W(),Ea!==a){ta();var Oa=Ka();Oa!==a?X={type:"interval-period",period:"second",precision:ua,secondary:Ea}:(e=X,X=a)}else e=X,X=a;else e=X,X=a;else e=X,X=a;else e=X,X=a;else e=X,X=a;X===a&&(X=e,ua=da(),ua!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=ka(),ua!==a?(ta(),Ea=Ka(),
Ea!==a?X={type:"interval-period",period:"second",precision:ua,secondary:null}:(e=X,X=a)):(e=X,X=a)):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=da(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),X=ua))}X!==a?v={type:"interval-qualifier",start:E,end:X}:(e=v,v=a)}else e=v,v=a;else e=v,v=a;v===a&&(v=e,X=Z(),X!==a?(ta(),E=Fa(),E!==a?(ta(),E=W(),E!==a?(ta(),ua=Ka(),ua!==a?v={type:"interval-period",period:X.value,precision:E,secondary:null}:(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):
(e=v,v=a),v===a&&(v=e,X=Z(),X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),v=X,v===a&&(v=e,X=da(),X!==a?(ta(),E=Fa(),E!==a?(ta(),E=ka(),E!==a?(ta(),ua=Ha(),ua!==a?(ta(),X=W(),X!==a?(ta(),ua=Ka(),ua!==a?v={type:"interval-period",period:"second",precision:E,secondary:X}:(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a),v===a&&(v=e,X=da(),X!==a?(ta(),E=Fa(),E!==a?(ta(),E=W(),E!==a?(ta(),ua=Ka(),ua!==a?v={type:"interval-period",period:"second",precision:E,
secondary:null}:(e=v,v=a)):(e=v,v=a)):(e=v,v=a)):(e=v,v=a),v===a&&(v=e,X=da(),X!==a&&(X={type:"interval-period",period:"second",precision:null,secondary:null}),v=X)))));return v}function Z(){var v=e;v=ra();v!==a&&(v={type:"string",value:"day"});v===a&&(v=e,v=sa(),v!==a&&(v={type:"string",value:"hour"}),v===a&&(v=e,v=aa(),v!==a&&(v={type:"string",value:"minute"}),v===a&&(v=e,v=na(),v!==a&&(v={type:"string",value:"month"}),v===a&&(v=e,v=ja(),v!==a&&(v={type:"string",value:"year"})))));return v}function W(){var v=
Na();v!==a&&(v=parseFloat(v));return v}function ka(){var v=Na();v!==a&&(v=parseFloat(v));return v}function ba(){var v=qa();v===a&&(v=H());return v}function qa(){var v=e;if(39===n.charCodeAt(e)){var E=jb;e++}else E=a,0===va&&k(md);E===a&&(n.substr(e,2)===xb?(E=xb,e+=2):(E=a,0===va&&k(Be)));if(E!==a){E=[];var X=e;n.substr(e,2)===Ra?(X=Ra,e+=2):(X=a,0===va&&k(nd));X!==a&&(X="'");X===a&&(od.test(n.charAt(e))?(X=n.charAt(e),e++):(X=a,0===va&&k(pd)));for(;X!==a;)E.push(X),X=e,n.substr(e,2)===Ra?(X=Ra,e+=
2):(X=a,0===va&&k(nd)),X!==a&&(X="'"),X===a&&(od.test(n.charAt(e))?(X=n.charAt(e),e++):(X=a,0===va&&k(pd)));39===n.charCodeAt(e)?(X=jb,e++):(X=a,0===va&&k(md));X!==a?v={type:"string",value:E.join("")}:(e=v,v=a)}else e=v,v=a;return v}function wa(){var v=e;if(Da()!==a){ta();var E=l();if(E!==a){ta();var X=Ga();X!==a?(ta(),X=l(),X!==a?v={type:"when-clause",operand:E,value:X}:(e=v,v=a)):(e=v,v=a)}else e=v,v=a}else e=v,v=a;return v}function xa(){var v=e;if(Da()!==a){ta();var E=l();if(E!==a){ta();var X=
Ga();X!==a?(ta(),X=l(),X!==a?v={type:"when-clause",operand:E,value:X}:(e=v,v=a)):(e=v,v=a)}else e=v,v=a}else e=v,v=a;return v}function Ba(){var v=e;var E=e;if(n.substr(e,4).toLowerCase()===Ce){var X=n.substr(e,4);e+=4}else X=a,0===va&&k(De);if(X!==a){X=e;va++;var ua=F();va--;ua===a?X=void 0:(e=X,X=a);X!==a?E="ELSE":(e=E,E=a)}else e=E,E=a;E!==a?(ta(),E=l(),E!==a?v={type:"else-clause",value:E}:(e=v,v=a)):(e=v,v=a);return v}function Ca(){var v=Na();if(v===a){v=e;if(45===n.charCodeAt(e)){var E=sb;e++}else E=
a,0===va&&k(Cc);E===a&&(43===n.charCodeAt(e)?(E=hb,e++):(E=a,0===va&&k(Bc)));if(E!==a){var X=Na();X!==a?v=E[0]+X:(e=v,v=a)}else e=v,v=a}return v}function Ja(){var v=e;if(46===n.charCodeAt(e)){var E=ob;e++}else E=a,0===va&&k(Ee);E!==a?(v=Na(),v===a&&(v=null),v="."+(null!=v?v:"")):(e=v,v=a);return v}function La(){var v;var E=v=e;if(Fe.test(n.charAt(e))){var X=n.charAt(e);e++}else X=a,0===va&&k(Ge);X!==a?(He.test(n.charAt(e))?(E=n.charAt(e),e++):(E=a,0===va&&k(Ie)),E===a&&(E=null),E="e"+(null===E?"":
E)):(e=E,E=a);E!==a?(X=Na(),X!==a?v=E+X:(e=v,v=a)):(e=v,v=a);return v}function Na(){var v=[];var E=bb();if(E!==a)for(;E!==a;)v.push(E),E=bb();else v=a;v!==a&&(v=v.join(""));return v}function bb(){if(Je.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&k(Ke);return v}function b(){var v=e;if(n.substr(e,2).toLowerCase()===Q){var E=n.substr(e,2);e+=2}else E=a,0===va&&k(Le);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="IN":(e=v,v=a)}else e=v,v=a;return v}function m(){var v=
e;if(n.substr(e,2).toLowerCase()===ca){var E=n.substr(e,2);e+=2}else E=a,0===va&&k(Me);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="IS":(e=v,v=a)}else e=v,v=a;return v}function ea(){var v=e;if(n.substr(e,4).toLowerCase()===U){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(Ne);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="LIKE":(e=v,v=a)}else e=v,v=a;return v}function ia(){var v=e;if(n.substr(e,3).toLowerCase()===za){var E=n.substr(e,3);e+=3}else E=a,0===va&&
k(Oe);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="NOT":(e=v,v=a)}else e=v,v=a;return v}function oa(){var v=e;if(n.substr(e,3).toLowerCase()===Aa){var E=n.substr(e,3);e+=3}else E=a,0===va&&k(Pe);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="AND":(e=v,v=a)}else e=v,v=a;return v}function y(){var v=e;if(n.substr(e,2).toLowerCase()===Ia){var E=n.substr(e,2);e+=2}else E=a,0===va&&k(Qe);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="OR":
(e=v,v=a)}else e=v,v=a;return v}function J(){var v=e;if(n.substr(e,7).toLowerCase()===Ma){var E=n.substr(e,7);e+=7}else E=a,0===va&&k(Re);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="BETWEEN":(e=v,v=a)}else e=v,v=a;return v}function S(){var v=e;if(n.substr(e,4).toLowerCase()===Va){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(Se);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="FROM":(e=v,v=a)}else e=v,v=a;return v}function V(){var v=e;if(n.substr(e,4).toLowerCase()===
pb){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(Te);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="TRIM":(e=v,v=a)}else e=v,v=a;return v}function fa(){var v=e;if(n.substr(e,8).toLowerCase()===Ue){var E=n.substr(e,8);e+=8}else E=a,0===va&&k(Ve);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="INTERVAL":(e=v,v=a)}else e=v,v=a;return v}function ja(){var v=e;if(n.substr(e,4).toLowerCase()===We){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(Xe);if(E!==a){E=e;va++;
var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="YEAR":(e=v,v=a)}else e=v,v=a;return v}function na(){var v=e;if(n.substr(e,5).toLowerCase()===Ye){var E=n.substr(e,5);e+=5}else E=a,0===va&&k(Ze);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="MONTH":(e=v,v=a)}else e=v,v=a;return v}function ra(){var v=e;if(n.substr(e,3).toLowerCase()===$e){var E=n.substr(e,3);e+=3}else E=a,0===va&&k(af);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="DAY":(e=v,v=a)}else e=v,v=
a;return v}function sa(){var v=e;if(n.substr(e,4).toLowerCase()===bf){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(cf);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="HOUR":(e=v,v=a)}else e=v,v=a;return v}function aa(){var v=e;if(n.substr(e,6).toLowerCase()===df){var E=n.substr(e,6);e+=6}else E=a,0===va&&k(ef);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="MINUTE":(e=v,v=a)}else e=v,v=a;return v}function da(){var v=e;if(n.substr(e,6).toLowerCase()===ff){var E=
n.substr(e,6);e+=6}else E=a,0===va&&k(gf);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="SECOND":(e=v,v=a)}else e=v,v=a;return v}function ma(){var v=e;if(n.substr(e,4).toLowerCase()===hf){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(jf);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="CASE":(e=v,v=a)}else e=v,v=a;return v}function ya(){var v=e;if(n.substr(e,3).toLowerCase()===kf){var E=n.substr(e,3);e+=3}else E=a,0===va&&k(lf);if(E!==a){E=e;va++;var X=F();va--;
X===a?E=void 0:(e=E,E=a);E!==a?v="END":(e=v,v=a)}else e=v,v=a;return v}function Da(){var v=e;if(n.substr(e,4).toLowerCase()===mf){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(nf);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="WHEN":(e=v,v=a)}else e=v,v=a;return v}function Ga(){var v=e;if(n.substr(e,4).toLowerCase()===of){var E=n.substr(e,4);e+=4}else E=a,0===va&&k(pf);if(E!==a){E=e;va++;var X=F();va--;X===a?E=void 0:(e=E,E=a);E!==a?v="THEN":(e=v,v=a)}else e=v,v=a;return v}function Ha(){if(44===
n.charCodeAt(e)){var v=qf;e++}else v=a,0===va&&k(rf);return v}function Fa(){if(40===n.charCodeAt(e)){var v=sf;e++}else v=a,0===va&&k(tf);return v}function Ka(){if(41===n.charCodeAt(e)){var v=uf;e++}else v=a,0===va&&k(vf);return v}function ta(){var v;var E=[];for(v=Wa();v!==a;)E.push(v),v=Wa();return E}function Wa(){if(wf.test(n.charAt(e))){var v=n.charAt(e);e++}else v=a,0===va&&k(xf);return v}function ab(v,E,X,ua){v={type:"binary-expression",operator:v,left:E,right:X};void 0!==ua&&(v.escape=ua);return v}
function $a(v,E){for(var X=0;X<E.length;X++)v=ab(E[X][1],v,E[X][3]);return v}p=void 0!==p?p:{};var a={},db=p.grammarSource,Sa={start:I},gb=I,nb="!",Ya="\x3d",Eb="\x3e\x3d",dc="\x3e",Fb="\x3c\x3d",la="\x3c\x3e",ec="\x3c",Cb="!\x3d",hb="+",sb="-",fc="*",Tb="/",zc="@",jb="'",xb="N'",Ra="''",ob=".",tb="null",Pa="true",Hb="false",Q="in",ca="is",U="like",pa="escape",za="not",Aa="and",Ia="or",Ma="between",Va="from",Ua="for",Ta="substring",cb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te=
"leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf="case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,hd=/^[^`]/,qd=w("!",!1),Qc=w("\x3d",!1),sd=w("\x3e\x3d",!1),td=w("\x3e",!1),ud=w("\x3c\x3d",!1),vd=w("\x3c\x3e",!1),wd=w("\x3c",!1),xd=w("!\x3d",!1),Bc=w("+",!1),Cc=
w("-",!1),yd=w("*",!1),zd=w("/",!1),ne=P([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=P([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=P([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=w("@",!1),md=w("'",!1),Be=w("N'",!1),nd=w("''",!1),pd=P(["'"],!0,!1),Ee=w(".",!1),Ke=P([["0","9"]],!1,!1),Ge=P(["e","E"],!1,!1),Ie=P(["+","-"],!1,!1),Fd=w("NULL",!0),Bd=w("TRUE",!0),Dd=w("FALSE",!0),Le=w("IN",!0),Me=w("IS",!0),Ne=w("LIKE",!0),rd=w("ESCAPE",!0),Oe=w("NOT",!0),Pe=w("AND",
!0),Qe=w("OR",!0),Re=w("BETWEEN",!0),Se=w("FROM",!0),Wd=w("FOR",!0),Sd=w("SUBSTRING",!0),Nd=w("EXTRACT",!0),Te=w("TRIM",!0),be=w("POSITION",!0),Ld=w("TIMESTAMP",!0),Id=w("DATE",!0),ue=w("LEADING",!0),we=w("TRAILING",!0),ye=w("BOTH",!0),Ae=w("TO",!0),Ve=w("INTERVAL",!0),Xe=w("YEAR",!0),Ze=w("MONTH",!0),af=w("DAY",!0),cf=w("HOUR",!0),ef=w("MINUTE",!0),gf=w("SECOND",!0),jf=w("CASE",!0),lf=w("END",!0),nf=w("WHEN",!0),pf=w("THEN",!0),De=w("ELSE",!0),rf=w(",",!1),tf=w("(",!1),vf=w(")",!1),xf=P([" ","\t",
"\n","\r"],!1,!1),gd=w("`",!1),id=P(["`"],!0,!1),e=0,gc=[{line:1,column:1}],ub=0,Ac=[],va=0;if("startRule"in p){if(!(p.startRule in Sa))throw Error("Can't start parsing from rule \""+p.startRule+'".');gb=Sa[p.startRule]}var Pc=gb();if(Pc!==a&&e===n.length)return Pc;Pc!==a&&e<n.length&&k({type:"end"});throw function(v,E,X){return new A(A.buildMessage(v,E),v,E,X)}(Ac,ub<n.length?n.charAt(ub):null,ub<n.length?K(ub,ub+1):K(ub,ub));}}})})(ha);let O=function(){function t(){}t.parse=function(A){return ha.exports.parse(A)};
return t}();g.WhereGrammar=O;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(g){g.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};g.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};g.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(g){g.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K,k,I){function d(G,N,f,h){const r=h.x-f.x;h=h.y-f.y;N=Math.min(1,Math.max(0,((N.x-f.x)*r+(N.y-f.y)*h)/(r*r+h*h)));G.x=f.x+r*N;G.y=f.y+h*N}function l(G,N){return G?N?4:3:N?3:2}let L=function(){function G(f,h,r){this.items=f;this.query=h;this.geometryType=r.geometryType;this.hasM=r.hasM;this.hasZ=r.hasZ;this.fieldsIndex=r.fieldsIndex;this.objectIdField=r.objectIdField;this.spatialReference=r.spatialReference;this.featureAdapter=r.featureAdapter}var N=G.prototype;N.createQueryResponseForCount=
function(){const f=new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return f.countDistinctValues(this.items);const {groupByFieldsForStatistics:h,having:r,outStatistics:x}=this.query;if(!h?.length)return 1;const T=new Map,C=new Map,B=new Set;for(const u of x){var {statisticType:M}=u;M="exceedslimit"!==M?u.onStatisticField:void 0;if(!C.has(M)){var F=[];for(const H of h){const q=this._getAttributeValues(f,H,T);F.push(q)}C.set(M,this._calculateUniqueValues(F,f.returnDistinctValues))}M=
C.get(M);for(const H in M){const {data:q,items:R}=M[H];F=q.join(",");r&&!f.validateItems(R,r)||B.add(F)}}return B.size};N.createQueryResponse=function(){var f=ha._asyncToGenerator(function*(){let h;h=this.query.outStatistics?this.query.outStatistics.some(r=>"exceedslimit"===r.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(n.isValid(this.query.outSR)&&
!n.equals(this.query.geometry.spatialReference,this.query.outSR)?h.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...w.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):h.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return h});return function(){return f.apply(this,arguments)}}();N.createSnappingResponse=function(f,h){const r=this.featureAdapter,x=l(this.hasZ,this.hasM),{point:T}=
f,C="number"===typeof f.distance?f.distance:f.distance.x,B="number"===typeof f.distance?f.distance:f.distance.y,M={candidates:[]},F="esriGeometryPolygon"===this.geometryType;h=this._getPointCreator(T,null!=T.z,null!=T.m,this.spatialReference,h);const u=new D(null,0),H=new D(null,0),q={x:0,y:0,z:0};for(const wa of this.items){var R=r.getGeometry(wa);if(O.isNone(R))continue;const {coords:xa,lengths:Ba}=R;u.coords=xa;H.coords=xa;if(f.types&c.SnappingTypes.EDGE){R=0;for(var Z=0;Z<Ba.length;Z++){var W=
Ba[Z];for(var ka=0;ka<W;ka++,R+=x){var ba=u;ba.coordsIndex=R;if(ka!==W-1){const Ca=H;Ca.coordsIndex=R+x;const Ja=q;d(q,T,ba,Ca);var qa=(T.x-Ja.x)/C;const La=(T.y-Ja.y)/B;qa=qa*qa+La*La;1>=qa&&M.candidates.push(P.makeEdgeCandidate(r.getObjectId(wa),h(Ja),Math.sqrt(qa),h(ba),h(Ca)))}}}}if(f.types&c.SnappingTypes.VERTEX)for(R=F?xa.length-x:xa.length,Z=0;Z<R;Z+=x)W=u,W.coordsIndex=Z,ka=(T.x-W.x)/C,ba=(T.y-W.y)/B,ka=ka*ka+ba*ba,1>=ka&&M.candidates.push(P.makeVertexCandidate(r.getObjectId(wa),h(W),Math.sqrt(ka)))}M.candidates.sort((wa,
xa)=>wa.distance-xa.distance);return M};N._getPointCreator=function(f,h,r,x,T){const C=O.isSome(T)&&!n.equals(x,T)?F=>w.project(F,x,T):F=>F,{hasZ:B}=this,M=f.m;return h&&r?B?({x:F,y:u,z:H})=>C({x:F,y:u,z:H,m:M}):({x:F,y:u})=>C({x:F,y:u,z:0,m:M}):h?B?({x:F,y:u,z:H})=>C({x:F,y:u,z:H}):({x:F,y:u})=>C({x:F,y:u,z:0}):r?({x:F,y:u})=>C({x:F,y:u,m:M}):({x:F,y:u})=>C({x:F,y:u})};N.createSummaryStatisticsResponse=function(){var f=ha._asyncToGenerator(function*(h){const {field:r,valueExpression:x,normalizationField:T,
normalizationType:C,normalizationTotal:B,minValue:M,maxValue:F,scale:u}=h;h=this.fieldsIndex.isDateField(r);var H=yield this._getDataValues({field:r,valueExpression:x,normalizationField:T,normalizationType:C,normalizationTotal:B,scale:u});const q=k.isNullCountSupported({normalizationType:C,normalizationField:T,minValue:M,maxValue:F}),R=this.fieldsIndex.get(r),Z={value:.5,fieldType:R?.type};H=K.isStringField(R)?k.calculateStringStatistics({values:H,supportsNullCount:q,percentileParams:Z}):k.calculateStatistics({values:H,
minValue:M,maxValue:F,useSampleStdDev:!C,supportsNullCount:q,percentileParams:Z});return k.processSummaryStatisticsResult(H,h)});return function(h){return f.apply(this,arguments)}}();N.createUniqueValuesResponse=function(){var f=ha._asyncToGenerator(function*(h){const {field:r,valueExpression:x,domains:T,returnAllCodedValues:C,scale:B}=h;var M=yield this._getDataValues({field:r,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,valueExpression:x,scale:B});M=k.calculateUniqueValuesCount(M);
return k.createUVResult(M,T,C,h.fieldDelimiter)});return function(h){return f.apply(this,arguments)}}();N.createClassBreaksResponse=function(){var f=ha._asyncToGenerator(function*(h){const {field:r,valueExpression:x,normalizationField:T,normalizationType:C,normalizationTotal:B,classificationMethod:M,standardDeviationInterval:F,minValue:u,maxValue:H,numClasses:q,scale:R}=h;h=yield this._getDataValues({field:r,valueExpression:x,normalizationField:T,normalizationType:C,normalizationTotal:B,scale:R});
h=k.calculateClassBreaks(h,{field:r,normalizationField:T,normalizationType:C,normalizationTotal:B,classificationMethod:M,standardDeviationInterval:F,minValue:u,maxValue:H,numClasses:q});return k.resolveCBResult(h,M)});return function(h){return f.apply(this,arguments)}}();N.createHistogramResponse=function(){var f=ha._asyncToGenerator(function*(h){const {field:r,valueExpression:x,normalizationField:T,normalizationType:C,normalizationTotal:B,classificationMethod:M,standardDeviationInterval:F,minValue:u,
maxValue:H,numBins:q,scale:R}=h;h=yield this._getDataValues({field:r,valueExpression:x,normalizationField:T,normalizationType:C,normalizationTotal:B,scale:R});return k.calculateHistogram(h,{field:r,normalizationField:T,normalizationType:C,normalizationTotal:B,classificationMethod:M,standardDeviationInterval:F,minValue:u,maxValue:H,numBins:q})});return function(h){return f.apply(this,arguments)}}();N._sortFeatures=function(f,h,r){if(1<f.length&&h&&h.length)for(const x of h.reverse()){h=x.split(" ");
const T=h[0],C=this.fieldsIndex.get(T);h=h[1]&&"desc"===h[1].toLowerCase();const B=k.getAttributeComparator(C?.type,h);f.sort((M,F)=>{M=r(M,T,C);F=r(F,T,C);return B(M,F)})}};N._createFeatureQueryResponse=function(f){const h=this.items,{geometryType:r,hasM:x,hasZ:T,objectIdField:C,spatialReference:B}=this,{outFields:M,outSR:F,quantizationParameters:u,resultRecordCount:H,resultOffset:q,returnZ:R,returnM:Z}=f,W=null!=H?h.length>(q||0)+H:!1,ka=M&&(M.includes("*")?[...this.fieldsIndex.fields]:M.map(ba=>
this.fieldsIndex.get(ba)));return{exceededTransferLimit:W,features:this._createFeatures(f,h),fields:ka,geometryType:r,hasM:x&&Z,hasZ:T&&R,objectIdFieldName:C,spatialReference:Y.cleanFromGeometryEngine(F?F:B),transform:u&&z.toQuantizationTransform(u)||null}};N._createFeatures=function(f,h){const r=new p(f,this.featureAdapter,this.fieldsIndex),{hasM:x,hasZ:T}=this,{orderByFields:C,quantizationParameters:B,returnGeometry:M,returnCentroid:F,maxAllowableOffset:u,resultOffset:H,resultRecordCount:q,returnZ:R=
!1,returnM:Z=!1}=f,W=T&&R,ka=x&&Z;f=[];var ba=0;h=[...h];this._sortFeatures(h,C,(xa,Ba,Ca)=>r.getFieldValue(xa,Ba,Ca));if(M||F){var qa=z.toQuantizationTransform(B);if(M&&!F)for(var wa of h)f[ba++]={attributes:r.getAttributes(wa),geometry:Y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),u,qa,W,ka)};else if(!M&&F)for(const xa of h)f[ba++]={attributes:r.getAttributes(xa),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa)};else for(const xa of h)f[ba++]=
{attributes:r.getAttributes(xa),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa),geometry:Y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),u,qa,W,ka)}}else for(qa of h)(wa=r.getAttributes(qa))&&(f[ba++]={attributes:wa});ba=H||0;null!=q&&(f=f.slice(ba,Math.min(f.length,ba+q)));return f};N._createExceedsLimitQueryResponse=function(f){var h=!1;let r=Number.POSITIVE_INFINITY,x=Number.POSITIVE_INFINITY;h=Number.POSITIVE_INFINITY;for(const T of f.outStatistics)if("exceedslimit"===
T.statisticType){r=null!=T.maxPointCount?T.maxPointCount:Number.POSITIVE_INFINITY;x=null!=T.maxRecordCount?T.maxRecordCount:Number.POSITIVE_INFINITY;h=null!=T.maxVertexCount?T.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)h=this.items.length>r;else if(this.items.length>x)h=!0;else{f=l(this.hasZ,this.hasM);const T=this.featureAdapter;h=this.items.reduce((C,B)=>{B=T.getGeometry(B);return C+(O.isSome(B)&&B.coords.length||0)},0)/f>h}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(h)}}]}};N._createStatisticsQueryResponse=function(){var f=ha._asyncToGenerator(function*(h){var r={attributes:{}};const x=[],T=new Map,C=new Map,B=new Map,M=new Map,F=new p(h,this.featureAdapter,this.fieldsIndex);var u=h.outStatistics;const {groupByFieldsForStatistics:H,having:q,orderByFields:R}=h;h=H&&H.length;const Z=!!h,W=Z&&H[0],ka=Z&&!this.fieldsIndex.get(W);
for(const Ba of u){const {outStatisticFieldName:Ca,statisticType:Ja}=Ba;u=Ba;var ba="exceedslimit"!==Ja?Ba.onStatisticField:void 0;const La="percentile_disc"===Ja||"percentile_cont"===Ja,Na="EnvelopeAggregate"===Ja||"CentroidAggregate"===Ja||"ConvexHullAggregate"===Ja,bb=Z&&1===h&&(ba===W||ka)&&"count"===Ja;if(Z){if(!B.has(ba)){var qa=[];for(const b of H){var wa=this._getAttributeValues(F,b,T);qa.push(wa)}B.set(ba,this._calculateUniqueValues(qa,Na?!1:F.returnDistinctValues))}qa=B.get(ba);for(const b in qa){const {count:m,
data:ea,items:ia,itemPositions:oa}=qa[b];wa=ea.join(",");if(!q||F.validateItems(ia,q)){const y=M.get(wa)||{attributes:{}};if(Na){y.aggregateGeometries||(y.aggregateGeometries={});const {aggregateGeometries:S,outStatisticFieldName:V}=yield this._getAggregateGeometry(u,ia);y.aggregateGeometries[V]=S}else{var xa=null;if(bb)xa=m;else{const S=this._getAttributeValues(F,ba,T);xa=oa.map(V=>S[V]);xa=La&&"statisticParameters"in u?this._getPercentileValue(u,xa):this._getStatisticValue(u,xa,null,F.returnDistinctValues)}y.attributes[Ca]=
xa}let J=0;H.forEach((S,V)=>y.attributes[this.fieldsIndex.get(S)?S:`EXPR_${++J}`]=ea[V]);M.set(wa,y)}}}else if(Na){r.aggregateGeometries||(r.aggregateGeometries={});const {aggregateGeometries:b,outStatisticFieldName:m}=yield this._getAggregateGeometry(u,this.items);r.aggregateGeometries[m]=b}else ba=this._getAttributeValues(F,ba,T),r.attributes[Ca]=La&&"statisticParameters"in u?this._getPercentileValue(u,ba):this._getStatisticValue(u,ba,C,F.returnDistinctValues);x.push({name:Ca,alias:Ca,type:"esriFieldTypeDouble"})}r=
Z?Array.from(M.values()):[r];this._sortFeatures(r,R,(Ba,Ca)=>Ba.attributes[Ca]);return{fields:x,features:r}});return function(h){return f.apply(this,arguments)}}();N._getAggregateGeometry=function(){var f=ha._asyncToGenerator(function*(h,r){var x=yield new Promise((R,Z)=>g(["../../../geometry/geometryEngineJSON"],R,Z));const {statisticType:T,outStatisticFieldName:C}=h,{featureAdapter:B,spatialReference:M,geometryType:F,hasZ:u,hasM:H}=this;r=r.map(R=>Y.getGeometry(F,u,H,B.getGeometry(R)));const q=
x.convexHull(M,r,!0)[0];h={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===T?(x=q?A.getPolygonExtent(q):A.getGeometryExtent(x.union(M,r)),h.aggregateGeometries={...x,spatialReference:M},h.outStatisticFieldName=C||"extent"):"CentroidAggregate"===T?(x=q?t.polygonCentroid(q):t.extentCentroid(A.getGeometryExtent(x.union(M,r))),h.aggregateGeometries={x:x[0],y:x[1],spatialReference:M},h.outStatisticFieldName=C||"centroid"):"ConvexHullAggregate"===T&&(h.aggregateGeometries=q,h.outStatisticFieldName=
C||"convexHull");return h});return function(h,r){return f.apply(this,arguments)}}();N._getStatisticValue=function(f,h,r,x){const {onStatisticField:T,statisticType:C}=f;f=null;f=r?.has(T)?r.get(T):K.isStringField(this.fieldsIndex.get(T))?k.calculateStringStatistics({values:h,returnDistinct:x}):k.calculateStatistics({values:h,minValue:null,maxValue:null,useSampleStdDev:!0});r&&r.set(T,f);return f["var"===C?"variance":C]};N._getPercentileValue=function(f,h){const {onStatisticField:r,statisticParameters:x,
statisticType:T}=f,{value:C,orderBy:B}=x;f=this.fieldsIndex.get(r);return k.calculatePercentile(h,{value:C,orderBy:B,fieldType:f?.type,isDiscrete:"percentile_disc"===T})};N._getAttributeValues=function(f,h,r){if(r.has(h))return r.get(h);const x=this.fieldsIndex.get(h),T=this.items.map(C=>f.getFieldValue(C,h,x));r.set(h,T);return T};N._getAttributeDataValues=function(f,h){return this.items.map(r=>f.getDataValue(r,{field:h.field,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,normalizationField:h.normalizationField,
normalizationType:h.normalizationType,normalizationTotal:h.normalizationTotal}))};N._getAttributeExpressionValues=function(){var f=ha._asyncToGenerator(function*(h,r,x){const {arcadeUtils:T}=yield I.loadArcade();r=T.createFunction(r);x=x&&T.getViewInfo(x);return h.getExpressionValues(this.items,r,x,T)});return function(h,r,x){return f.apply(this,arguments)}}();N._calculateUniqueValues=function(f,h){const r={},x=this.items,T=x.length;for(let C=0;C<T;C++){const B=x[C],M=[];for(const u of f)M.push(u[C]);
const F=M.join(",");h?null==r[F]&&(r[F]={count:1,data:M,items:[B],itemPositions:[C]}):null==r[F]?r[F]={count:1,data:M,items:[B],itemPositions:[C]}:(r[F].count++,r[F].items.push(B),r[F].itemPositions.push(C))}return r};N._getDataValues=function(){var f=ha._asyncToGenerator(function*(h){const r=new p(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:x,field:T,normalizationField:C,normalizationType:B,normalizationTotal:M,scale:F}=h,u=x?{viewingMode:"map",scale:F,spatialReference:this.query.outSR||
this.spatialReference}:null;return x?this._getAttributeExpressionValues(r,x,u):this._getAttributeDataValues(r,{field:T,field2:h.field2,field3:h.field3,fieldDelimiter:h.fieldDelimiter,normalizationField:C,normalizationType:B,normalizationTotal:M})});return function(h){return f.apply(this,arguments)}}();ha._createClass(G,[{key:"size",get:function(){return this.items.length}}]);return G}();c.SnappingTypes=void 0;(function(G){G[G.NONE=0]="NONE";G[G.EDGE=1]="EDGE";G[G.VERTEX=2]="VERTEX"})(c.SnappingTypes||
(c.SnappingTypes={}));let D=function(){function G(N,f){this.coords=N;this.coordsIndex=f}ha._createClass(G,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return G}();c.QueryEngineResult=L;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(g,c,ha){function O({scale:C,translate:B},M){return Math.round((M-B[0])/C[0])}function t({scale:C,translate:B},M){return Math.round((B[1]-M)/C[1])}function A(C,B,M){const F=[];let u,H,q,R;for(let Z=0;Z<M.length;Z++){const W=M[Z];if(0<Z){if(q=O(C,W[0]),R=t(C,W[1]),q!==u||R!==H)F.push(B(W,q-u,R-H)),u=q,H=R}else u=O(C,W[0]),H=t(C,W[1]),F.push(B(W,u,H))}return 0<F.length?F:null}function z(C,B,M,F){return A(C,M?F?T:x:F?x:r,B)}function n(C,B,M,F){const u=[];M=M?F?T:x:F?x:r;for(F=
0;F<B.length;F++){const H=A(C,M,B[F]);H&&3<=H.length&&u.push(H)}return u.length?u:null}function p(C,B,M,F){const u=[];M=M?F?T:x:F?x:r;for(F=0;F<B.length;F++){const H=A(C,M,B[F]);H&&2<=H.length&&u.push(H)}return u.length?u:null}function w({scale:C,translate:B},M){return M*C[0]+B[0]}function P({scale:C,translate:B},M){return B[1]-M*C[1]}function Y(C,B,M){const F=Array(M.length);if(!M.length)return F;const [u,H]=C.scale;let q=w(C,M[0][0]);C=P(C,M[0][1]);F[0]=B(M[0],q,C);for(let R=1;R<M.length;R++){const Z=
M[R];q+=Z[0]*u;C-=Z[1]*H;F[R]=B(Z,q,C)}return F}function K(C,B,M){const F=Array(M.length);for(let u=0;u<M.length;u++)F[u]=Y(C,B,M[u]);return F}function k(C,B,M,F){return Y(C,M?F?T:x:F?x:r,B)}function I(C,B,M,F){return K(C,M?F?T:x:F?x:r,B)}function d(C,B,M,F){return K(C,M?F?T:x:F?x:r,B)}function l(C,B,M){let [F,u]=M[0],H=Math.min(F,B[0]),q=Math.min(u,B[1]),R=Math.max(F,B[2]);B=Math.max(u,B[3]);for(let Z=1;Z<M.length;Z++){const [W,ka]=M[Z];F+=W;u+=ka;0>W&&(H=Math.min(H,F));0<W&&(R=Math.max(R,F));0>
ka?q=Math.min(q,u):0<ka&&(B=Math.max(B,u))}C[0]=H;C[1]=q;C[2]=R;C[3]=B;return C}function L(C,B){if(!B.length)return null;C[0]=C[1]=Number.POSITIVE_INFINITY;C[2]=C[3]=Number.NEGATIVE_INFINITY;for(let M=0;M<B.length;M++)l(C,C,B[M]);return C}function D(C,B,M,F,u){B.xmin=O(C,M.xmin);B.ymin=t(C,M.ymin);B.xmax=O(C,M.xmax);B.ymax=t(C,M.ymax);B!==M&&(F&&(B.zmin=M.zmin,B.zmax=M.zmax),u&&(B.mmin=M.mmin,B.mmax=M.mmax));return B}function G(C,B,M,F,u){B.points=z(C,M.points,F,u)??[];return B}function N(C,B,M,F,
u){B.x=O(C,M.x);B.y=t(C,M.y);B!==M&&(F&&(B.z=M.z),u&&(B.m=M.m));return B}function f(C,B,M,F,u){C=n(C,M.rings,F,u);if(!C)return null;B.rings=C;return B}function h(C,B,M,F,u){C=p(C,M.paths,F,u);if(!C)return null;B.paths=C;return B}const r=(C,B,M)=>[B,M],x=(C,B,M)=>[B,M,C[2]],T=(C,B,M)=>[B,M,C[2],C[3]];g.equals=function(C,B){if(C===B||null==C&&null==B)return!0;if(null==C||null==B)return!1;let M,F,u,H;C&&"upperLeft"===C.originPosition?(M=C.translate[0],F=C.translate[1],C=C.scale[0]):(M=c.isSome(C.extent)?
C.extent.xmin:0,F=c.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);B&&"upperLeft"===B.originPosition?(u=B.translate[0],H=B.translate[1],B=B.scale[0]):(u=c.isSome(B.extent)?B.extent.xmin:0,H=c.isSome(B.extent)?B.extent.ymax:0,B=B.tolerance);return M===u&&F===H&&C===B};g.getQuantizedBoundsCoordsArray=l;g.getQuantizedBoundsCoordsArrayArray=L;g.getQuantizedBoundsPaths=function(C){return L([0,0,0,0],C)};g.getQuantizedBoundsPoints=function(C){const B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(B,B,C)};g.getQuantizedBoundsRings=function(C){return L([0,0,0,0],C)};g.quantizeBounds=function(C,B,M){B[0]=O(C,M[0]);B[3]=t(C,M[1]);B[2]=O(C,M[2]);B[1]=t(C,M[3]);return B};g.quantizeExtent=D;g.quantizeGeometry=function(C,B){return C&&B?ha.isPoint(B)?N(C,{},B,!1,!1):ha.isPolyline(B)?h(C,{},B,!1,!1):ha.isPolygon(B)?f(C,{},B,!1,!1):ha.isMultipoint(B)?G(C,{},B,!1,!1):ha.isExtent(B)?D(C,{},B,!1,!1):null:null};g.quantizeMultipoint=G;g.quantizePaths=
p;g.quantizePoint=N;g.quantizePoints=z;g.quantizePolygon=f;g.quantizePolyline=h;g.quantizeRings=n;g.quantizeX=O;g.quantizeY=t;g.toQuantizationTransform=function(C){return C?{originPosition:"upper-left"===C.originPosition?"upperLeft":"lower-left"===C.originPosition?"lowerLeft":C.originPosition,scale:C.tolerance?[C.tolerance,C.tolerance]:[1,1],translate:c.isSome(C.extent)?[C.extent.xmin,C.extent.ymax]:[0,0]}:null};g.unquantizeBounds=function(C,B,M){return M?(B[0]=w(C,M[0]),B[1]=P(C,M[3]),B[2]=w(C,M[2]),
B[3]=P(C,M[1]),B):[w(C,B[0]),P(C,B[3]),w(C,B[2]),P(C,B[1])]};g.unquantizeCoordsArray=Y;g.unquantizeCoordsArrayArray=K;g.unquantizeExtent=function(C,B,M,F,u){B.xmin=w(C,M.xmin);B.ymin=P(C,M.ymin);B.xmax=w(C,M.xmax);B.ymax=P(C,M.ymax);B!==M&&(F&&(B.zmin=M.zmin,B.zmax=M.zmax),u&&(B.mmin=M.mmin,B.mmax=M.mmax));return B};g.unquantizeMultipoint=function(C,B,M,F,u){c.isSome(M)&&(B.points=k(C,M.points,F,u));return B};g.unquantizePaths=I;g.unquantizePoint=function(C,B,M,F,u){if(c.isNone(M))return B;B.x=w(C,
M.x);B.y=P(C,M.y);B!==M&&(F&&(B.z=M.z),u&&(B.m=M.m));return B};g.unquantizePoints=k;g.unquantizePolygon=function(C,B,M,F,u){c.isSome(M)&&(B.rings=d(C,M.rings,F,u));return B};g.unquantizePolyline=function(C,B,M,F,u){c.isSome(M)&&(B.paths=I(C,M.paths,F,u));return B};g.unquantizeRings=d;g.unquantizeX=w;g.unquantizeY=P;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport",
"../../../statistics/utils"],function(g,c,ha){return function(){function O(A,z,n){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=A.returnDistinctValues??!1;this.fieldsIndex=n;this.featureAdapter=z;if((z=A.outFields)&&!z.includes("*")){this.outFields=z;A=0;for(const w of z){var p=c.getExpressionFromFieldName(w);p=(z=this.fieldsIndex.get(p))?null:c.getWhereClause(p,n);z=z?z.name:c.getAliasFromFieldName(w)||`FIELD_EXP_${A++}`;this._fieldDataCache.set(w,{alias:z,
clause:p})}}}var t=O.prototype;t.countDistinctValues=function(A){if(!this.returnDistinctValues)return A.length;A.forEach(z=>this.getAttributes(z));return this._returnDistinctMap.size};t.getAttributes=function(A){A=this._processAttributesForOutFields(A);return this._processAttributesForDistinctValues(A)};t.getFieldValue=function(A,z,n){const p=n?n.name:z;let w=null;this._fieldDataCache.has(p)?w=this._fieldDataCache.get(p).clause:n||(w=c.getWhereClause(z,this.fieldsIndex),this._fieldDataCache.set(p,
{alias:p,clause:w}));return n?this.featureAdapter.getAttribute(A,p):w.calculateValue(A,this.featureAdapter)};t.getDataValue=function(A,z){const n=z.normalizationType,p=z.normalizationTotal;let w=this.getFieldValue(A,z.field,this.fieldsIndex.get(z.field));z.field2&&(w=`${ha.processNullValue(w)}${z.fieldDelimiter}${ha.processNullValue(this.getFieldValue(A,z.field2,this.fieldsIndex.get(z.field2)))}`,z.field3&&(w=`${w}${z.fieldDelimiter}${ha.processNullValue(this.getFieldValue(A,z.field3,this.fieldsIndex.get(z.field3)))}`));
n&&Number.isFinite(w)&&(A="field"===n&&z.normalizationField?this.getFieldValue(A,z.normalizationField,this.fieldsIndex.get(z.normalizationField)):null,w=ha.getNormalizedValue(w,n,A,p));return w};t.getExpressionValue=function(A,z,n,p){A={attributes:this.featureAdapter.getAttributes(A),layer:{fields:this.fieldsIndex.fields}};n=p.createExecContext(A,n);return p.executeFunction(z,n)};t.getExpressionValues=function(A,z,n,p){const w={fields:this.fieldsIndex.fields};return A.map(P=>{P={attributes:this.featureAdapter.getAttributes(P),
layer:w};P=p.createExecContext(P,n);return p.executeFunction(z,P)})};t.validateItem=function(A,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:c.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testFeature(A,this.featureAdapter)};t.validateItems=function(A,z){this._fieldDataCache.has(z)||this._fieldDataCache.set(z,{alias:z,clause:c.getWhereClause(z,this.fieldsIndex)});return this._fieldDataCache.get(z).clause.testSet(A,this.featureAdapter)};
t._processAttributesForOutFields=function(A){const z=this.outFields;if(!z||!z.length)return this.featureAdapter.getAttributes(A);const n={};for(const p of z){const {alias:w,clause:P}=this._fieldDataCache.get(p);n[w]=P?P.calculateValue(A,this.featureAdapter):this.featureAdapter.getAttribute(A,w)}return n};t._processAttributesForDistinctValues=function(A){if(g.isNone(A)||!this.returnDistinctValues)return A;var z=this.outFields,n=[];if(z)for(const w of z){var {alias:p}=this._fieldDataCache.get(w);n.push(A[p])}else for(p in A)n.push(A[p]);
z=`${(z||["*"]).join(",")}=${n.join(",")}`;n=this._returnDistinctMap.get(z)||0;this._returnDistinctMap.set(z,++n);return 1<n?null:A};return O}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(g,c,ha){function O(f){return null==f||"string"===typeof f&&!f?"\x3cNull\x3e":f}function t(f){const h=null!=f.minValue||null!=f.maxValue,r=!!f.sqlExpression&&f.supportsSQLExpression;return!(null!=f.normalizationField||
null!=f.normalizationType)&&!h&&!r}function A(f){const {values:h,useSampleStdDev:r,supportsNullCount:x}=f;var T=Number.POSITIVE_INFINITY;let C=Number.NEGATIVE_INFINITY,B=null,M=null;var F=null;let u=null,H=0;const q=null==f.minValue?-Infinity:f.minValue,R=null==f.maxValue?Infinity:f.maxValue;for(const Z of h)Number.isFinite(Z)?Z>=q&&Z<=R&&(B+=Z,T=Math.min(T,Z),C=Math.max(C,Z),H++):"string"===typeof Z&&H++;if(H&&null!=B){M=B/H;F=0;for(const Z of h)Number.isFinite(Z)&&Z>=q&&Z<=R&&(F+=(Z-M)**2);u=r?
1<H?F/(H-1):0:0<H?F/H:0;F=Math.sqrt(u)}else C=T=null;T={avg:M,count:H,max:C,min:T,stddev:F,sum:B,variance:u};x&&(T.nullcount=h.length-H);f.percentileParams&&(T.median=z(h,f.percentileParams));return T}function z(f,h){const {fieldType:r,value:x,orderBy:T,isDiscrete:C}=h,B=n(r,"desc"===T);f=[...f].filter(H=>null!=H).sort((H,q)=>B(H,q));if(0===f.length)return null;if(0>=x)return f[0];if(1<=x)return f[f.length-1];var M=(f.length-1)*x,F=Math.floor(M);h=F+1;M%=1;F=f[F];const u=f[h];return h>=f.length||
C||"string"===typeof F||"string"===typeof u?F:F*(1-M)+u*M}function n(f,h){const r=h?1:-1,x=w(h),T=p(h);if(!f||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...G].includes(f))return(C,B)=>"number"===typeof C&&"number"===typeof B?x(C,B):"string"===typeof C&&"string"===typeof B?T(C,B):r;if("esriFieldTypeDate"===f)return(C,B)=>{C=(new Date(C)).getTime();B=(new Date(B)).getTime();return isNaN(C)||isNaN(B)?r:x(C,B)};if(G.has(f))return(C,B)=>x(C,B);if("esriFieldTypeString"===
f)return(C,B)=>T(C,B);if("esriFieldTypeGUID"===f||"esriFieldTypeGlobalID"===f){const C=p(h);return(B,M)=>C(P(B),P(M))}return h?(C,B)=>1:(C,B)=>-1}function p(f){return f?(h,r)=>{h=h?.toUpperCase();r=r?.toUpperCase();return h>r?-1:h<r?1:0}:(h,r)=>{h=h?.toUpperCase();r=r?.toUpperCase();return h<r?-1:h>r?1:0}}function w(f){return f?(h,r)=>r-h:(h,r)=>h-r}function P(f){return f.substr(24,12)+f.substr(19,4)+f.substr(16,2)+f.substr(14,2)+f.substr(11,2)+f.substr(9,2)+f.substr(6,2)+f.substr(4,2)+f.substr(2,
2)+f.substr(0,2)}function Y(f){return"coded-value"!==f?.type?[]:f.codedValues.map(h=>h.code)}function K(f,h){const r=I({field:h.field,normalizationType:h.normalizationType,normalizationField:h.normalizationField,classificationMethod:h.classificationMethod,standardDeviationInterval:h.standardDeviationInterval,breakCount:h.numClasses||5});f=k(f,h.minValue,h.maxValue);return ha.createGenerateRendererClassBreaks({definition:r,values:f,normalizationTotal:h.normalizationTotal})}function k(f,h,r){h=null==
h?-Infinity:h;r=null==r?Infinity:r;return f.filter(x=>Number.isFinite(x)&&x>=h&&x<=r)}function I(f){const h=f.field,r=f.classificationMethod||"equal-interval",x=f.normalizationType,T=f.normalizationField,C=new c;C.classificationField=h;C.breakCount=f.breakCount;C.classificationMethod=r;C.standardDeviationInterval="standard-deviation"===r?f.standardDeviationInterval||1:void 0;C.normalizationType=x;C.normalizationField="field"===x?T:void 0;return C}function d(f,h){const {field:r,classificationMethod:x,
standardDeviationInterval:T,normalizationType:C,normalizationField:B,normalizationTotal:M,minValue:F,maxValue:u}=h,H=h.numBins||10;let q=h=null,R=null;x&&"equal-interval"!==x||C?({classBreaks:f}=K(f,{field:r,normalizationType:C,normalizationField:B,normalizationTotal:M,classificationMethod:x,standardDeviationInterval:T,minValue:F,maxValue:u,numClasses:H}),h=f[0].minValue,q=f[f.length-1].maxValue,R=f.map(Z=>[Z.minValue,Z.maxValue])):(null!=F&&null!=u?(h=F,q=u):(f=A({values:f,minValue:F,maxValue:u,
useSampleStdDev:!C,supportsNullCount:t({normalizationType:C,normalizationField:B,minValue:F,maxValue:u})}),h=f.min,q=f.max),R=L(h,q,H));return{min:h,max:q,intervals:R}}function l(f,h){let r=-1;for(let x=f.length-1;0<=x;x--)if(h>=f[x][0]){r=x;break}return r}function L(f,h,r){const x=(h-f)/r,T=[];let C;for(let B=1;B<=r;B++)C=f+x,C=Number(C.toFixed(16)),T.push([f,B===r?h:C]),f=C;return T}const D=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,G=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]),N="min max avg stddev count sum variance nullcount median".split(" ");g.calculateClassBreaks=K;g.calculateHistogram=function(f,h){const {min:r,max:x,intervals:T}=d(f,h),C=T.map((B,M)=>({minValue:T[M][0],maxValue:T[M][1],count:0}));for(const B of f)null!=B&&B>=r&&B<=x&&(f=l(T,B),-1<f&&C[f].count++);return{bins:C,minValue:r,maxValue:x,normalizationTotal:h.normalizationTotal}};g.calculatePercentile=z;g.calculateStatistics=A;g.calculateStringStatistics=function(f){const h=f.returnDistinct?
[...(new Set(f.values))]:f.values,r=h.filter(T=>null!=T).length,x={count:r};f.supportsNullCount&&(x.nullcount=h.length-r);f.percentileParams&&(x.median=z(h,f.percentileParams));return x};g.calculateUniqueValuesCount=function(f){const h={};for(let r of f){if(null==r||"string"===typeof r&&""===r.trim())r=null;null==h[r]?h[r]={count:1,data:r}:h[r].count++}return{count:h}};g.createClassBreaksDefinition=I;g.createUVResult=function(f,h,r,x){f=f.count;const T=[];if(r&&h){r=[];var C=Y(h[0]);for(const B of C)if(h[1]){C=
Y(h[1]);for(const M of C)if(h[2]){C=Y(h[2]);for(const F of C)r.push(`${O(B)}${x}${O(M)}${x}${O(F)}`)}else r.push(`${O(B)}${x}${O(M)}`)}else r.push(B);for(const B of r)f.hasOwnProperty(B)||(f[B]={data:B,count:0})}for(const B in f)h=f[B],T.push({value:h.data,count:h.count,label:h.label});return{uniqueValueInfos:T}};g.getAttributeComparator=n;g.getEqualIntervalBins=L;g.getNormalizedValue=function(f,h,r,x){let T=null;switch(h){case "log":0!==f&&(T=Math.log(f)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(x)&&
0!==x&&(T=f/x*100);break;case "field":Number.isFinite(r)&&0!==r&&(T=f/r);break;case "natural-log":0<f&&(T=Math.log(f));break;case "square-root":0<f&&(T=f**.5)}return T};g.isNullCountSupported=t;g.processNullValue=O;g.processSummaryStatisticsResult=function(f,h){let r;for(r in f)N.includes(r)&&(Number.isFinite(f[r])||(f[r]=null));if(!h)return f;["avg","stddev","variance"].forEach(x=>{null!=f[x]&&(f[x]=Math.ceil(f[x]))});return f};g.resolveCBResult=function(f,h){let r=f.classBreaks;const x=r[0].minValue,
T=r[r.length-1].maxValue,C="standard-deviation"===h;r=r.map(B=>{const M=B.label;B={minValue:B.minValue,maxValue:B.maxValue,label:M};if(C&&M){const F=M.match(D).map(u=>+u.trim());2===F.length?(B.minStdDev=F[0],B.maxStdDev=F[1],0>F[0]&&0<F[1]&&(B.hasAvg=!0)):1===F.length&&(M.includes("\x3c")?(B.minStdDev=null,B.maxStdDev=F[0]):M.includes("\x3e")&&(B.minStdDev=F[0],B.maxStdDev=null))}return B});return{minValue:x,maxValue:T,classBreakInfos:r,normalizationTotal:f.normalizationTotal}};g.statisticTypes=
N;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(g,c,ha,O,t,A,z,n){t=new ha.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ha=new ha.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});n=function(p){function w(){var P=p.apply(this,arguments)||this;P.breakCount=null;P.classificationField=null;P.classificationMethod=null;P.normalizationField=null;P.normalizationType=
null;P.type="class-breaks-definition";return P}g._inheritsLoose(w,p);g._createClass(w,[{key:"standardDeviationInterval",set:function(P){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",P)}},{key:"definedInterval",set:function(P){"defined-interval"===this.classificationMethod&&this._set("definedInterval",P)}}]);return w}(n);c.__decorate([O.property({json:{write:!0}})],n.prototype,"breakCount",void 0);c.__decorate([O.property({json:{write:!0}})],n.prototype,"classificationField",
void 0);c.__decorate([O.property({type:String,json:{read:t.read,write:t.write}})],n.prototype,"classificationMethod",void 0);c.__decorate([O.property({json:{write:!0}})],n.prototype,"normalizationField",void 0);c.__decorate([O.property({json:{read:ha.read,write:ha.write}})],n.prototype,"normalizationType",void 0);c.__decorate([O.property({value:null,json:{write:!0}})],n.prototype,"standardDeviationInterval",null);c.__decorate([O.property({value:null,json:{write:!0}})],n.prototype,"definedInterval",
null);c.__decorate([O.property()],n.prototype,"type",void 0);return n=c.__decorate([z.subclass("esri.rest.support.ClassBreaksDefinition")],n)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(g,c,ha,O,t,A,z,n,p,w){ha=new ha.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});O=function(P){function Y(){var K=P.apply(this,arguments)||this;K.baseSymbol=null;K.colorRamp=null;K.type=null;return K}g._inheritsLoose(Y,P);return Y}(O.JSONSupport);c.__decorate([t.property({type:w,json:{write:!0}})],O.prototype,"baseSymbol",void 0);c.__decorate([t.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],O.prototype,"colorRamp",void 0);
c.__decorate([t.property({json:{read:ha.read,write:ha.write}})],O.prototype,"type",void 0);return O=c.__decorate([n.subclass("esri.rest.support.ClassificationDefinition")],O)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(g,c,ha,O){ha={key:"type",base:ha,typeMap:{algorithmic:c,multipart:O}};g.fromJSON=function(t){return t&&t.type?"algorithmic"===t.type?c.fromJSON(t):"multipart"===t.type?O.fromJSON(t):null:null};
g.types=ha;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(g,c,ha,O,t,A,z,n,p){var w;p=w=function(P){function Y(K){K=
P.call(this,K)||this;K.algorithm=null;K.fromColor=null;K.toColor=null;K.type="algorithmic";return K}g._inheritsLoose(Y,P);Y.prototype.clone=function(){return new w({fromColor:O.clone(this.fromColor),toColor:O.clone(this.toColor),algorithm:this.algorithm})};return Y}(p);c.__decorate([z.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0);c.__decorate([t.property({type:ha,json:{type:[A.Integer],write:!0}})],p.prototype,"fromColor",
void 0);c.__decorate([t.property({type:ha,json:{type:[A.Integer],write:!0}})],p.prototype,"toColor",void 0);c.__decorate([t.property({type:["algorithmic"]})],p.prototype,"type",void 0);return p=w=c.__decorate([n.subclass("esri.rest.support.AlgorithmicColorRamp")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(g,c,ha){g.enumeration=function(O,t={}){O=O instanceof c.JSONMap?O:new c.JSONMap(O,t);O={type:t?.ignoreUnknown??!0?
O.apiValues:String,json:{type:O.jsonValues,read:t?.readOnly?!1:{reader:O.read},write:{writer:O.write}}};void 0!==t?.readOnly&&(O.readOnly=!!t.readOnly);void 0!==t?.default&&(O.json.default=t.default);void 0!==t?.name&&(O.json.name=t.name);return ha.property(O)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,ha,O,t,A,z){ha=function(n){function p(w){w=n.call(this,w)||this;w.type=null;return w}g._inheritsLoose(p,n);return p}(ha.JSONSupport);c.__decorate([O.property({readOnly:!0,json:{read:!1,write:!0}})],ha.prototype,"type",void 0);return ha=c.__decorate([z.subclass("esri.rest.support.ColorRamp")],ha)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(g,c,ha,O,t,A,z,n){var p;t=p=function(w){function P(Y){Y=w.call(this,Y)||this;Y.colorRamps=null;Y.type="multipart";return Y}g._inheritsLoose(P,w);P.prototype.clone=function(){return new p({colorRamps:ha.clone(this.colorRamps)})};return P}(n);c.__decorate([O.property({type:[z],json:{write:!0}})],t.prototype,"colorRamps",void 0);c.__decorate([O.property({type:["multipart"]})],t.prototype,"type",void 0);return t=p=c.__decorate([A.subclass("esri.rest.support.MultipartColorRamp")],t)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,ha,O,t,A,z,n,p,w){O=new O.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let P=0;t=function(Y){function K(I){I=Y.call(this,I)||this;I.id=`sym${P++}`;I.type=null;I.color=new ha([0,0,0,1]);
return I}g._inheritsLoose(K,Y);var k=K.prototype;k.readColor=function(I){return I&&null!=I[0]?[I[0],I[1],I[2],I[3]/255]:I};k.collectRequiredFields=function(){var I=g._asyncToGenerator(function*(d,l){});return function(d,l){return I.apply(this,arguments)}}();k.hash=function(){return JSON.stringify(this.toJSON())};k.clone=function(){};return K}(t.JSONSupport);c.__decorate([A.property({type:O.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:O.write}}})],t.prototype,"type",void 0);c.__decorate([A.property({type:ha,
json:{write:{allowNull:!0}}})],t.prototype,"color",void 0);c.__decorate([p.reader("color")],t.prototype,"readColor",null);return t=c.__decorate([w.subclass("esri.symbols.Symbol")],t)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(g,c){function ha(K){const {classificationMethod:k,breakCount:I,normalizationType:d,definedInterval:l}=K.definition,L=[];var D=K.values;if(0===D.length)return[];D=D.sort((x,T)=>x-T);var G=D[0],N=D[D.length-1];if("equal-interval"===
k)if(D.length>=I){D=(N-G)/I;K=G;for(var f=1;f<I;f++){var h=Number((G+f*D).toFixed(6));L.push({minValue:K,maxValue:h,label:O(K,h,d)});K=h}L.push({minValue:K,maxValue:N,label:O(K,N,d)})}else D.forEach(x=>{L.push({minValue:x,maxValue:x,label:O(x,x,d)})});else if("natural-breaks"===k){D=t(D);K=A(D.uniqueValues,K.valueFrequency||D.valueFrequency,I);for(f=1;f<I;f++)D.uniqueValues.length>f&&(h=Number(D.uniqueValues[K[f]].toFixed(6)),L.push({minValue:G,maxValue:h,label:O(G,h,d)}),G=h);L.push({minValue:G,
maxValue:N,label:O(G,N,d)})}else if("quantile"===k)if(D.length>=I&&G!==N){K=Math.ceil(D.length/I);f=0;for(h=1;h<I;h++){var r=K+f-1;r>D.length&&(r=D.length-1);0>r&&(r=0);L.push({minValue:G,maxValue:D[r],label:O(G,D[r],d)});G=D[r];f+=K;K=Math.ceil((D.length-f)/(I-h))}L.push({minValue:G,maxValue:N,label:O(G,N,d)})}else for(N=-1,G=0;G<D.length;G++)K=D[G],K!==N&&(N=K,L.push({minValue:N,maxValue:K,label:O(N,K,d)}),N=K);else if("standard-deviation"===k)if(K=p(D),f=w(D,K),0===f)L.push({minValue:D[0],maxValue:D[0],
label:O(D[0],D[0],d)});else{D=n(G,N,I,K,f)*f;f=0;for(h=I;1<=h;h--)r=Number((K-(h-.5)*D).toFixed(6)),L.push({minValue:G,maxValue:r,label:O(G,r,d)}),G=r,f++;h=Number((K+.5*D).toFixed(6));L.push({minValue:G,maxValue:h,label:O(G,h,d)});G=h;f++;for(r=1;r<=I;r++)h=f===2*I?N:Number((K+(r+.5)*D).toFixed(6)),L.push({minValue:G,maxValue:h,label:O(G,h,d)}),G=h,f++}else if("defined-interval"===k){if(!l)return L;N=D[0];D=D[D.length-1];G=Math.ceil((D-N)/l);K=N;for(f=1;f<G;f++)h=Number((N+f*l).toFixed(6)),L.push({minValue:K,
maxValue:h,label:O(K,h,d)}),K=h;L.push({minValue:K,maxValue:D,label:O(K,D,d)})}return L}function O(K,k,I){let d=null;return d=K===k?I&&"percent-of-total"===I?K+"%":K.toString():I&&"percent-of-total"===I?K+"% - "+k+"%":K+" - "+k}function t(K){const k=[],I=[];let d=Number.MIN_VALUE,l=1,L=-1;for(let D=0;D<K.length;D++){const G=K[D];G===d?(l++,I[L]=l):null!==G&&(k.push(G),d=G,l=1,I.push(l),L++)}return{uniqueValues:k,valueFrequency:I}}function A(K,k,I){var d=K.length;const l=[];I>d&&(I=d);for(var L=0;L<
I;L++)l.push(Math.round(L*d/I-1));l.push(d-1);L=z(l,K,k,I);d=L.mean;L=L.sdcm;var D=I,G=0,N=0;let f=0,h=0,r=!0;for(let T=0;2>T&&r;T++){0===T&&(r=!1);for(var x=0;x<D-1;x++)for(;l[x+1]+1!==l[x+2];)if(l[x+1]+=1,G=P(x,l,K,k),f=G.sbMean,G=G.sbSdcm,N=P(x+1,l,K,k),h=N.sbMean,N=N.sbSdcm,G+N<L[x]+L[x+1])L[x]=G,L[x+1]=N,d[x]=f,d[x+1]=h,r=!0;else{--l[x+1];break}for(x=D-1;0<x;x--)for(;l[x]!==l[x-1]+1;)if(--l[x],G=P(x-1,l,K,k),f=G.sbMean,G=G.sbSdcm,N=P(x,l,K,k),h=N.sbMean,N=N.sbSdcm,G+N<L[x-1]+L[x])L[x-1]=G,L[x]=
N,d[x-1]=f,d[x]=h,r=!0;else{l[x]+=1;break}}r&&(L=z(l,K,k,I));return l}function z(K,k,I,d){let l=[];var L=[],D=[];let G=0;const N=[],f=[];for(var h=0;h<d;h++){var r=P(h,K,k,I);N.push(r.sbMean);f.push(r.sbSdcm);G+=f[h]}r=G;for(h=!0;h||G<r;){h=!1;l=[];for(L=0;L<d;L++)l.push(K[L]);for(D=0;D<d;D++)for(r=K[D]+1;r<=K[D+1];r++)if(L=k[r],0<D&&r!==K[D+1]&&Math.abs(L-N[D])>Math.abs(L-N[D-1]))K[D]=r;else if(D<d-1&&K[D]!==r-1&&Math.abs(L-N[D])>Math.abs(L-N[D+1])){K[D+1]=r-1;break}r=G;G=0;L=[];D=[];for(let x=0;x<
d;x++){L.push(N[x]);D.push(f[x]);const T=P(x,K,k,I);N[x]=T.sbMean;f[x]=T.sbSdcm;G+=f[x]}}if(G>r){for(k=0;k<d;k++)K[k]=l[k],N[k]=L[k],f[k]=D[k];G=r}return{mean:N,sdcm:f}}function n(K,k,I,d,l){K=Math.max(d-K,k-d)/l/I;return 1<=K?1:.5<=K?.5:.25}function p(K){let k=0;for(let I=0;I<K.length;I++)k+=K[I];return k/=K.length}function w(K,k){let I=0;for(let d=0;d<K.length;d++){const l=K[d];I+=(l-k)*(l-k)}I/=K.length;return Math.sqrt(I)}function P(K,k,I,d){var l=0,L=0;for(var D=k[K]+1;D<=k[K+1];D++){const G=
d[D];l+=I[D]*G;L+=G}0>=L&&Y.warn("Exception in Natural Breaks calculation");l/=L;L=0;for(D=k[K]+1;D<=k[K+1];D++)L+=d[D]*(I[D]-l)**2;return{sbMean:l,sbSdcm:L}}const Y=c.getLogger("esri.rest.support.generateRendererUtils");g.createGenerateRendererClassBreaks=function(K){const {normalizationTotal:k}=K;return{classBreaks:ha(K),normalizationTotal:k}};g.createGenerateRendererUniqueValues=function(K){K=t(K);const k=[],I=K.uniqueValues.length;for(let d=0;d<I;d++){const l=K.uniqueValues[d];k.push({value:l,
count:K.valueFrequency[d],label:l.toString()})}return{uniqueValues:k}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(g){g.makeEdgeCandidate=function(c,ha,O,t,A,z=!1){return{objectId:c,target:ha,distance:O,type:"edge",start:t,end:A,draped:z}};g.makeVertexCandidate=function(c,ha,O){return{objectId:c,target:ha,distance:O,type:"vertex"}};Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(g,
c,ha,O,t,A,z,n,p,w,P,Y,K,k){function I(){I=ha._asyncToGenerator(function*(F,u,H){const {outFields:q,orderByFields:R,groupByFieldsForStatistics:Z,outStatistics:W}=F;if(q)for(var ka=0;ka<q.length;ka++)q[ka]=q[ka].trim();if(R)for(ka=0;ka<R.length;ka++)R[ka]=R[ka].trim();if(Z)for(ka=0;ka<Z.length;ka++)Z[ka]=Z[ka].trim();if(W)for(ka=0;ka<W.length;ka++)W[ka].onStatisticField&&(W[ka].onStatisticField=W[ka].onStatisticField.trim());F.geometry&&!F.outSR&&(F.outSR=F.geometry.spatialReference);return d(F,u,
H)});return I.apply(this,arguments)}function d(F,u,H){return l.apply(this,arguments)}function l(){l=ha._asyncToGenerator(function*(F,u,H){if(!F)return null;var {where:q}=F;F.where=q=q&&q.trim();if(!q||/^1 *= *1$/.test(q)||u&&u===q)F.where=null;if(!F.geometry)return F;u=yield D(F);F.distance=0;F.units=null;"esriSpatialRelEnvelopeIntersects"===F.spatialRel&&({spatialReference:q}=F.geometry,u=n.getGeometryExtent(u),u.spatialReference=q);if(u){yield k.checkProjectionSupport(u.spatialReference,H);q=u.spatialReference;
u=L(u,H)&&p.isExtent(u)?{spatialReference:q,rings:[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]}:u;q=(yield w.normalizeCentralMeridian(p.fromJSON(u)))[0];if(t.isNone(q))throw r;const R="quantizationParameters"in F&&F.quantizationParameters?.tolerance||"maxAllowableOffset"in F&&F.maxAllowableOffset||0;u=R&&L(u,H)?{densificationStep:8*R}:void 0;q=q.toJSON();u=yield k.project(q,q.spatialReference,H,u);if(!u)throw r;u.spatialReference=H;F.geometry=u}return F});return l.apply(this,
arguments)}function L(F,u){if(!F)return!1;const H=F.spatialReference;return(p.isExtent(F)||p.isPolygon(F)||p.isPolyline(F))&&!P.equals(H,u)&&!z.canProjectWithoutEngine(H,u)}function D(F){return G.apply(this,arguments)}function G(){G=ha._asyncToGenerator(function*(F){const {distance:u,units:H}=F,q=F.geometry;if(null==u||"vertexAttributes"in q)return q;var R=q.spatialReference;F=H?h.fromJSON(H):A.getUnitString(R);R=R&&(P.isGeographic(R)||P.isWebMercator(R))?q:yield k.checkProjectionSupport(R,P.WGS84).then(()=>
k.project(q,P.WGS84));return(yield N())(R.spatialReference,R,u,F)});return G.apply(this,arguments)}function N(){return f.apply(this,arguments)}function f(){f=ha._asyncToGenerator(function*(){return(yield new Promise((F,u)=>g(["../../../geometry/geometryEngineJSON"],F,u))).geodesicBuffer});return f.apply(this,arguments)}const h=new O.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),
r=Object.freeze({}),x=new K,T=new K,C=new K,B={esriGeometryPoint:Y.convertToPoint,esriGeometryPolyline:Y.convertToPolyline,esriGeometryPolygon:Y.convertToPolygon,esriGeometryMultipoint:Y.convertToMultipoint},M=(F,u)=>"_geVersion"!==F?u:void 0;c.QUERY_ENGINE_EMPTY_RESULT=r;c.cleanFromGeometryEngine=function(F){return F&&"_geVersion"in F?JSON.parse(JSON.stringify(F,M)):F};c.getGeometry=function(F,u,H,q,R,Z,W=u,ka=H){const ba=u&&W,qa=H&&ka;q=t.isSome(q)?"coords"in q?q:q.geometry:null;if(t.isNone(q))return null;
if(R)return u=Y.generalizeOptimizedGeometry(T,q,u,H,F,R,W,ka),Z&&(u=Y.quantizeOptimizedGeometry(C,u,ba,qa,F,Z)),B[F]?.(u,ba,qa)??null;if(Z)return Z=Y.quantizeOptimizedGeometry(C,q,u,H,F,Z,W,ka),B[F]?.(Z,ba,qa)??null;Y.removeZMValues(x,q,u,H,W,ka);return B[F]?.(x,ba,qa)??null};c.normalizeQuery=function(F,u,H){return I.apply(this,arguments)};c.normalizeQueryLike=d;c.transformCentroid=function(F,u,H,q=F.hasZ,R=F.hasM){if(t.isNone(u))return null;const Z=F.hasZ&&q,W=F.hasM&&R;return H?(F=Y.quantizeOptimizedGeometry(C,
u,F.hasZ,F.hasM,"esriGeometryPoint",H,q,R),Y.convertToPoint(F,Z,W)):Y.convertToPoint(u,Z,W)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(g,c,ha,O,t,A,z,n){function p(aa,da,ma){if(aa)for(const ya of aa)(aa=(aa=A.getDeepValue(ya,da))&&
"function"!==typeof aa&&ma.get(aa))&&A.setDeepValue(ya,aa.name,da)}function w(aa,da){if(!aa||!da)return[];J.clear();P(J,aa,da);return Array.from(J).sort()}function P(aa,da,ma){if(ma)if(da?.fields?.length)if(ma.includes("*"))for(const {name:ya}of da.fields)aa.add(ya);else for(const ya of ma)Y(aa,da,ya);else if(ma.includes("*"))aa.clear(),aa.add("*");else for(const ya of ma)null!=ya&&aa.add(ya)}function Y(aa,da,ma){"string"===typeof ma&&(da?(da=da.get(ma))&&aa.add(da.name):aa.add(ma))}function K(aa,
da,ma){return k.apply(this,arguments)}function k(){k=ha._asyncToGenerator(function*(aa,da,ma){if(ma){var {arcadeUtils:ya}=yield n.loadArcade();ma=ya.extractFieldNames(ma,da?.fields?.map(Da=>Da.name));for(const Da of ma)Y(aa,da,Da)}});return k.apply(this,arguments)}function I(aa,da,ma){return d.apply(this,arguments)}function d(){d=ha._asyncToGenerator(function*(aa,da,ma){if(ma&&"1\x3d1"!==ma){const ya=(yield new Promise((Da,Ga)=>g(["../../core/sql/WhereClause"],Da,Ga))).WhereClause.create(ma,da);if(!ya.isStandardized)throw new O("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:ma});P(aa,da,ya.fieldNames)}});return d.apply(this,arguments)}function l(aa,da){for(const ma of aa)if(ma&&ma.valueType&&ma.valueType===da)return ma.name;return null}function L(){L=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield D(da,aa);return Array.from(da).sort()});return L.apply(this,arguments)}function D(aa,da){return G.apply(this,arguments)}function G(){G=ha._asyncToGenerator(function*(aa,da){if(da){var ma=A.getDeepValue("elevationInfo.featureExpressionInfo",
da);if(ma)return ma.collectRequiredFields(aa,da.fieldsIndex)}});return G.apply(this,arguments)}function N(){N=ha._asyncToGenerator(function*(aa,da,ma){if(da&&ma&&"fields"in ma){var ya=[];ya.push(f(aa,da,ma.popupTemplate));ma.fields&&ya.push(...ma.fields.map(function(){var Da=ha._asyncToGenerator(function*(Ga){Ga.onStatisticExpression?K(aa,da.fieldsIndex,Ga.onStatisticExpression.expression):aa.add(Ga.onStatisticField)});return function(Ga){return Da.apply(this,arguments)}}()));yield Promise.all(ya)}});
return N.apply(this,arguments)}function f(aa,da,ma){return h.apply(this,arguments)}function h(){h=ha._asyncToGenerator(function*(aa,da,ma){const ya=[];ma?.expressionInfos&&ya.push(...ma.expressionInfos.map(Da=>K(aa,da.fieldsIndex,Da.expression)));ma=ma?.content;if(Array.isArray(ma))for(const Da of ma)"expression"===Da.type&&Da.expressionInfo&&ya.push(K(aa,da.fieldsIndex,Da.expressionInfo.expression));yield Promise.all(ya)});return h.apply(this,arguments)}function r(){r=ha._asyncToGenerator(function*(aa,
da,ma){da&&(da.timeInfo&&t.isSome(ma)&&ma.timeExtent&&P(aa,da.fieldsIndex,[da.timeInfo.startField,da.timeInfo.endField]),da.floorInfo&&P(aa,da.fieldsIndex,[da.floorInfo.floorField]),t.isSome(ma)&&t.isSome(ma.where)&&(yield I(aa,da.fieldsIndex,ma.where)))});return r.apply(this,arguments)}function x(){x=ha._asyncToGenerator(function*(aa,da,ma){da&&ma&&(yield Promise.all(ma.map(ya=>T(aa,da,ya))))});return x.apply(this,arguments)}function T(aa,da,ma){return C.apply(this,arguments)}function C(){C=ha._asyncToGenerator(function*(aa,
da,ma){da&&ma&&(ma.valueExpression?yield K(aa,da.fieldsIndex,ma.valueExpression):ma.field&&Y(aa,da.fieldsIndex,ma.field))});return C.apply(this,arguments)}function B(){B=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da="timeInfo"in aa&&aa.timeInfo;return da?w(aa.fieldsIndex,[aa.trackIdField,da.startField,da.endField]):[]});return B.apply(this,arguments)}function M(){M=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield F(da,aa);return Array.from(da).sort()});return M.apply(this,
arguments)}function F(aa,da){return u.apply(this,arguments)}function u(){u=ha._asyncToGenerator(function*(aa,da){const {labelingInfo:ma,fieldsIndex:ya}=da;ma&&ma.length&&(yield Promise.all(ma.map(Da=>H(aa,ya,Da))))});return u.apply(this,arguments)}function H(aa,da,ma){return q.apply(this,arguments)}function q(){q=ha._asyncToGenerator(function*(aa,da,ma){if(ma){var ya=ma.getLabelExpression();ma=ma.where;"arcade"===ya.type?yield K(aa,da,ya.expression):(ya=ya.expression.match(/{[^}]*}/g))&&ya.forEach(Da=>
{Y(aa,da,Da.slice(1,-1))});yield I(aa,da,ma)}});return q.apply(this,arguments)}function R(aa){return"number"===typeof aa&&!isNaN(aa)&&isFinite(aa)}function Z(aa){return null===aa||R(aa)}function W(aa){return null===aa||S(aa)}function ka(aa){return null!=aa&&"string"===typeof aa}function ba(aa){return null===aa||ka(aa)}function qa(){return!0}function wa(aa,da){let ma;switch(aa.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ma=
aa.nullable?W:S;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ma=aa.nullable?Z:R;break;case "string":case "esriFieldTypeString":ma=aa.nullable?ba:ka;break;default:ma=qa}return 1===arguments.length?ma:ma(da)}function xa(aa){return null!=aa&&fa.has(aa.type)}function Ba(aa,da){return aa.nullable&&null===da?null:xa(aa)&&!Ca(aa.type,Number(da))?c.NumericRangeValidationError.OUT_OF_RANGE:wa(aa,da)?aa.domain?z.validateDomainValue(aa.domain,da):null:c.TypeValidationError.INVALID_TYPE}
function Ca(aa,da){aa="string"===typeof aa?Ja(aa):aa;if(!aa)return!1;const ma=aa.min,ya=aa.max;return aa.isInteger?S(da)&&da>=ma&&da<=ya:da>=ma&&da<=ya}function Ja(aa){switch(aa){case "esriFieldTypeSmallInteger":case "small-integer":return ja;case "esriFieldTypeInteger":case "integer":return na;case "esriFieldTypeSingle":case "single":return ra;case "esriFieldTypeDouble":case "double":return sa}}function La(aa,da,ma){if(!da||!da.attributes||!aa){if(t.isSome(ma))for(var ya of aa??[])ma.add(ya);return!0}da=
da.attributes;ya=!1;for(const Da of aa)if(!(Da in da))if(ya=!0,t.isSome(ma))ma.add(Da);else break;return ya}function Na(){Na=ha._asyncToGenerator(function*(aa,da){const ma=new Set;for(const ya of da)yield K(ma,aa.fieldsIndex,ya);return Array.from(ma).sort()});return Na.apply(this,arguments)}const bb=/^([0-9])/,b=/[^A-Za-z0-9_\u0080-\uffff]/g,m=/_{2,}/g,ea=/^_/,ia=/_$/,oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
y=["field","normalizationField"],J=new Set,S=(()=>"isInteger"in Number?Number.isInteger:aa=>"number"===typeof aa&&isFinite(aa)&&Math.floor(aa)===aa)(),V=["integer","small-integer","single","double"],fa=new Set([...V,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;
(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ja={min:-32768,max:32767,isInteger:!0},na={min:-2147483648,max:2147483647,isInteger:!0},ra={min:-3.4E38,max:1.2E38,isInteger:!1},sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=K;c.collectElevationFields=D;c.collectFeatureReductionFields=function(aa,da,ma){return N.apply(this,arguments)};c.collectField=Y;c.collectFields=P;c.collectFilterFields=function(aa,
da,ma){return r.apply(this,arguments)};c.collectLabelingFields=F;c.collectOrderByInfos=function(aa,da,ma){return x.apply(this,arguments)};c.collectPopupTemplateFields=f;c.doubleRange=sa;c.featureHasFields=function(aa,da){return!La(aa,da,null)};c.fixFields=w;c.fixRendererFields=function(aa,da){if(null!=aa&&null!=da)for(const ma of Array.isArray(aa)?aa:[aa])if(p(oa,ma,da),"visualVariables"in ma&&ma.visualVariables)for(const ya of ma.visualVariables)p(y,ya,da)};c.fixTimeInfoFields=function(aa,da){if(null!=
aa&&da?.fields?.length)if("startField"in aa){var ma=da.get(aa.startField);da=da.get(aa.endField);aa.startField=ma?.name??null;aa.endField=da?.name??null}else ma=da.get(aa.startTimeField),da=da.get(aa.endTimeField),aa.startTimeField=ma?.name??null,aa.endTimeField=da?.name??null};c.getDisplayFieldName=function({displayField:aa,fields:da}){if(aa)return aa;if(!da||!da.length)return null;if(!(aa=l(da,"name-or-title")||l(da,"unique-identifier")||l(da,"type-or-category")))a:{for(const ma of da)if(ma&&ma.name&&
(da=ma.name.toLowerCase(),da.includes("name")||da.includes("title"))){aa=ma.name;break a}aa=null}return aa};c.getElevationFields=function(aa){return L.apply(this,arguments)};c.getExpressionFields=function(aa,da){return Na.apply(this,arguments)};c.getFeatureEditFields=function(aa){if(!aa)return[];const da="editFieldsInfo"in aa&&aa.editFieldsInfo;return da?w(aa.fieldsIndex,[da&&da.creatorField,da&&da.creationDateField,da&&da.editorField,da&&da.editDateField]):[]};c.getFeatureGeometryFields=function(aa){if(!aa)return[];
const da=aa.geometryFieldsInfo;return da?w(aa.fieldsIndex,[da.shapeAreaField,da.shapeLengthField]):[]};c.getFieldDefaultValue=function(aa){const da=aa.defaultValue;if(void 0!==da&&wa(aa,da))return da;if(aa.nullable)return null};c.getFieldRange=function(aa){const da=z.getDomainRange(aa.domain);if(da)return da;if(xa(aa))return Ja(aa.type)};c.getLabelingFields=function(aa){return M.apply(this,arguments)};c.getNumericTypeForValue=function(aa){if(!R(aa))return null;if(S(aa)){if(aa>=ja.min&&aa<=ja.max)return"esriFieldTypeSmallInteger";
if(aa>=na.min&&aa<=na.max)return"esriFieldTypeInteger"}return aa>=ra.min&&aa<=ra.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(aa){return B.apply(this,arguments)};c.integerRange=na;c.isDateField=function(aa){return null!=aa&&("date"===aa.type||"esriFieldTypeDate"===aa.type)};c.isNumberInRange=Ca;c.isNumericField=xa;c.isRasterPixelValueField=function(aa){return["raster.itempixelvalue","raster.servicepixelvalue"].some(da=>aa.toLowerCase().startsWith(da))};c.isStringField=
function(aa){return null!=aa&&("string"===aa.type||"esriFieldTypeString"===aa.type)};c.isValidFieldValue=function(aa,da){return null===Ba(aa,da)};c.isValueMatchingFieldType=wa;c.normalizeFieldName=function(aa){return aa?aa.trim().replace(b,"_").replace(m,"_").replace(ea,"").replace(ia,"").replace(bb,"F$1"):null};c.numericTypes=V;c.packFields=function(aa,da,ma=1){if(!da||!aa)return[];if(da.includes("*"))return["*"];da=w(aa,da);return da.length/aa.fields.length>=ma?["*"]:da};c.populateMissingFields=
La;c.rendererFields=oa;c.sanitizeNullFieldValue=function(aa){return null==aa||"number"===typeof aa&&isNaN(aa)?null:aa};c.singleRange=ra;c.smallIntegerRange=ja;c.unpackFieldNames=function(aa,da){return t.isNone(da)||t.isNone(aa)?[]:da.includes("*")?(aa.fields??[]).map(ma=>ma.name):da};c.validateFieldValue=Ba;c.validationErrorToString=function(aa,da,ma){switch(aa){case z.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ma} is not in the coded domain - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;
case z.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ma} is out of the range of valid values - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;case c.TypeValidationError.INVALID_TYPE:return`Value ${ma} is not a valid value for the field type - field: ${da.name}, type: ${da.type}, nullable: ${da.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:const {min:ya,max:Da}=Ja(da.type);return`Value ${ma} is out of range for the number type - field: ${da.name}, type: ${da.type}, value range is ${ya} to ${Da}`}};
c.visualVariableFields=y;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(g){g.DomainValidationError=void 0;(function(c){c.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";c.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(g.DomainValidationError||(g.DomainValidationError={}));g.getDomainRange=function(c){if(c&&"range"===c.type)return{min:"range"in
c?c.range[0]:c.minValue,max:"range"in c?c.range[1]:c.maxValue}};g.validateDomainValue=function(c,ha){switch(c.type){case "range":const O="range"in c?c.range[0]:c.minValue;c="range"in c?c.range[1]:c.maxValue;if(null!=O&&+ha<O||null!=c&&+ha>c)return g.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==c.codedValues||c.codedValues.every(t=>null==t||t.code!==ha))return g.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==c.codedValues||c.codedValues.every(t=>
null==t||t.code!==ha))return g.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(g,c,ha,O,t,A,z,n){function p(){P||(P=ha._asyncToGenerator(function*(){const K=yield new Promise((k,I)=>g(["./arcadeUtils"],
k,I));return{arcade:K.arcade,arcadeUtils:K,Dictionary:K.Dictionary,Feature:K.arcadeFeature}})());return P}const w=A.getLogger("esri.support.arcadeOnDemand");let P;O=(K,k,I)=>Y.create(K,k,I,null,["$feature","$view"]);let Y=function(){function K(I,d,l,L,D,G,N,f){this.script=I;this.evaluate=D;this.fields=Array.isArray(N)?N:N.fields;this._syntaxTree=L;this._arcade=d;this._arcadeDictionary=l;this._arcadeFeature=G;this._spatialReference=f;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}K.create=function(){var I=ha._asyncToGenerator(function*(d,l,L,D,G,N){const {arcade:f,Feature:h,Dictionary:r}=yield p(),x=n.fromJSON(l);l=null;try{l=f.parseScript(d,N)}catch(H){return w.error(new t("arcade-bad-expression","Failed to parse arcade script",{script:d,error:H})),null}N=G.reduce((H,q)=>({...H,[q]:null}),{});let T=null;z.isSome(D)&&(T=new r(D),T.immutable=!0,N.$config=null);var C=(D=f.scriptUsesGeometryEngine(l))&&
f.enableGeometrySupport();const B=f.scriptUsesFeatureSet(l)&&f.enableFeatureSetSupport(),M=(G=f.scriptIsAsync(l))&&f.enableAsyncSupport();N={vars:N,spatialReference:x,useAsync:!!M};yield Promise.all([C,B,M]);C=new Set;yield f.loadDependentModules(C,l,null,G,D);const F=new r;F.immutable=!1;F.setField("scale",0);const u=f.compileScript(l,N);return new K(d,f,r,l,H=>{"$view"in H&&H.$view&&(F.setField("scale",H.$view.scale),H.$view=F);T&&(H.$config=T);return u({vars:H,spatialReference:x})},new h,L,x)});
return function(d,l,L,D,G,N){return I.apply(this,arguments)}}();var k=K.prototype;k.repurposeFeature=function(I){I.geometry&&!I.geometry.spatialReference&&(I.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(I.geometry,I.attributes,{fields:this.fields});return this._arcadeFeature};k.createDictionary=function(){return new this._arcadeDictionary};k.referencesMember=function(I){return this._arcade.referencesMember(this._syntaxTree,I)};k.referencesFunction=
function(I){return this._arcade.referencesFunction(this._syntaxTree,I)};k.referencesGeometry=function(){return this._referencesGeometry};k.referencesScale=function(){return this._referencesScale};k.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return K}();c.ArcadeExpression=Y;c.createDictionaryExpression=(K,k,I,d)=>Y.create(K,k,I,d,["$feature","$view"]);c.createLabelExpression=(K,k,I)=>Y.create(K,k,I,null,["$feature"]);c.createRendererExpression=
O;c.createVVExpression=O;c.loadArcade=p;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K){function k(){return new Promise((L,D)=>g(["../../../geometry/geometryEngineJSON"],L,D))}function I(){I=ha._asyncToGenerator(function*(L,D,G){const {spatialRel:N,geometry:f}=L;if(f){if(null==N||!0!==l.spatialRelationship[N])throw new O("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(n.isValid(f.spatialReference)&&n.isValid(G)){if(null==f||!0!==l.queryGeometry[z.getJsonType(f)])throw new O("feature-store:unsupported-query",
"Unsupported query geometry type",{query:L});if(null==D||!0!==l.layerGeometry[D])throw new O("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return Y.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}});return I.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(L){if(z.isExtent(L))return!0;if(z.isPolygon(L)){for(const D of L.rings)if(5!==D.length||D[0][0]!==D[1][0]||D[0][0]!==D[4][0]||D[2][0]!==D[3][0]||D[0][1]!==D[3][1]||D[0][1]!==D[4][1]||D[1][1]!==D[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(L,D,G){return I.apply(this,
arguments)};c.getSpatialQueryOperator=function(L,D,G,N,f){if(z.isPolygon(D)&&"esriGeometryPoint"===G&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const h=w.convertFromPolygon(new P,D,!1,!1);return Promise.resolve(r=>p.polygonContainsPoint(h,!1,!1,r))}if(z.isPolygon(D)&&"esriGeometryMultipoint"===G){const h=w.convertFromPolygon(new P,D,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(r=>p.polygonContainsMultipoint(h,!1,!1,r,N,f))}if(z.isExtent(D)&&"esriGeometryPoint"===
G&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L))return Promise.resolve(h=>t.extentContainsPoint(D,K.getGeometry(G,N,f,h)));if(z.isExtent(D)&&"esriGeometryMultipoint"===G&&"esriSpatialRelContains"===L)return Promise.resolve(h=>t.extentContainsMultipoint(D,K.getGeometry(G,N,f,h)));if(z.isExtent(D)&&"esriSpatialRelIntersects"===L){const h=A.getExtentIntersector(G);return Promise.resolve(r=>h(D,K.getGeometry(G,N,f,r)))}return k().then(h=>{const r=h[d[L]].bind(null,D.spatialReference,
D);return x=>r(K.getGeometry(G,N,f,x))})};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(g,c){g.extentIntersectsExtent=c.extentIntersectsExtent;g.extentIntersectsMultipoint=c.extentIntersectsMultipoint;g.extentIntersectsPoint=c.extentIntersectsPoint;g.extentIntersectsPolygon=c.extentIntersectsPolygon;g.extentIntersectsPolyline=c.extentIntersectsPolyline;g.extentIntersectsRings=
c.extentIntersectsRings;g.getFeatureExtentIntersector=c.getFeatureExtentIntersector;g.isSelfIntersecting=c.isSelfIntersecting;g.segmentIntersects=c.segmentIntersects;g.getExtentIntersector=function(ha){return"mesh"===ha?c.extentIntersectsExtent:c.getFeatureExtentIntersector(ha)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(g){function c(ha,O,t,A,z){if(!ha)return!1;O=O?t?4:3:t?3:2;
const {coords:n,lengths:p}=ha;t=!1;ha=0;for(const P of p){var w=ha;for(let Y=ha,K=ha+P*O;Y<K;Y+=O){w=Y+O;w===K&&(w=ha);const k=n[Y],I=n[Y+1],d=n[w];w=n[w+1];(I<z&&w>=z||w<z&&I>=z)&&k+(z-I)/(w-I)*(d-k)<A&&(t=!t)}ha+=P*O}return t}g.polygonContainsCoords=c;g.polygonContainsMultipoint=function(ha,O,t,A,z,n){z=z?n?4:3:n?3:2;const {coords:p,lengths:w}=A;if(!w)return!1;for(let P=0,Y=0;P<w.length;P++,Y+=z)if(!c(ha,O,t,p[Y],p[Y+1]))return!1;return!0};g.polygonContainsPoint=function(ha,O,t,A){return c(ha,O,
t,A.coords[0],A.coords[1])};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(g){function c(t,A,z,n,p){if(null!=n&&null!=p)return w=>{const P=t.getAttribute(w,A);w=t.getAttribute(w,z);return(null==P||P<=p)&&(null==w||w>=n)};if(null!=n)return w=>{w=t.getAttribute(w,z);return null==w||w>=n};if(null!=p)return w=>{w=t.getAttribute(w,A);return null==w||w<=p}}function ha(t,A,z,n){if(null!=
z&&null!=n&&z===n)return p=>t.getAttribute(p,A)===z;if(null!=z&&null!=n)return p=>{p=t.getAttribute(p,A);return p>=z&&p<=n};if(null!=z)return p=>t.getAttribute(p,A)>=z;if(null!=n)return p=>t.getAttribute(p,A)<=n}function O(){return()=>!1}g.getTimeExtent=function(t,A){if(!t)return null;const z=A.featureAdapter,{startTimeField:n,endTimeField:p}=t;let w=Number.POSITIVE_INFINITY,P=Number.NEGATIVE_INFINITY;if(n&&p)A.forEach(Y=>{const K=z.getAttribute(Y,n);Y=z.getAttribute(Y,p);null==K||isNaN(K)||(w=Math.min(w,
K));null==Y||isNaN(Y)||(P=Math.max(P,Y))});else{const Y=n||p;A.forEach(K=>{K=z.getAttribute(K,Y);null==K||isNaN(K)||(w=Math.min(w,K),P=Math.max(P,K))})}return{start:w,end:P}};g.getTimeOperator=function(t,A,z){if(!A||!t)return null;const {startTimeField:n,endTimeField:p}=t;if(!n&&!p)return null;const {start:w,end:P}=A;return null===w&&null===P?null:void 0===w&&void 0===P?O():n&&p?c(z,n,p,w,P):ha(z,n||p,w,P)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(g,c){function ha(t){return"oid"===t.type||"esriFieldTypeOID"===t.type}function O(t){return"global-id"===t.type||"esriFieldTypeGlobalID"===t.type}return function(){function t(z=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(z){this.fields=
z;var n=[];for(const p of z)if(z=p&&p.name){const w=z.trim().toLowerCase(),P=c.normalizeFieldName(z).toLowerCase();this._fieldsMap.set(z,p);this._fieldsMap.set(w,p);this._normalizedFieldsMap.set(P,p);n.push(w);"date"===p.type||"esriFieldTypeDate"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):c.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));ha(p)||O(p)||(p.editable=null==p.editable?!0:!!p.editable,p.nullable=null==p.nullable?!0:!!p.nullable)}n.sort();
this.uid=n.join(",")}}var A=t.prototype;A.destroy=function(){this._fieldsMap.clear()};A.has=function(z){return null!=this.get(z)};A.get=function(z){if(z){var n=this._fieldsMap.get(z);if(n)return n;(n=this._fieldsMap.get(z.trim().toLowerCase())??this._normalizedFieldsMap.get(c.normalizeFieldName(z).toLowerCase()))&&this._fieldsMap.set(z,n);return n}};A.isDateField=function(z){return this._dateFieldsSet.has(this.get(z))};A.isNumericField=function(z){return this._numericFieldsSet.has(this.get(z))};A.normalizeFieldName=
function(z){if(z=this.get(z))return z.name??void 0};g._createClass(t,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const z of this.fields)ha(z)||O(z)||z.nullable||void 0!==c.getFieldDefaultValue(z)||this._requiredFields.push(z)}return this._requiredFields}}]);return t}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(g,c,ha,O,t,A,z,n,p,w,P,Y,K,k){function I(x){return d.has(x)?d.get(x):"number"===typeof x?x:1}g.TaskPriority=void 0;(function(x){x.RESOURCE_CONTROLLER="schedule";x.SLIDE="slide";x.STREAM_DATA_LOADER="stream loader";x.ELEVATION_QUERY="elevation query";x.TERRAIN_SURFACE="terrain";x.SURFACE_GEOMETRY_UPDATES="surface geometry updates";x.GRAPHICS_CORE="Graphics3D";x.I3S_CONTROLLER="I3S";x.POINT_CLOUD_LAYER="point cloud";x.FEATURE_TILE_FETCHER="feature fetcher";x.OVERLAY="overlay";x.STAGE="stage";
x.GRAPHICS_DECONFLICTOR="graphics deconflictor";x.FILTER_VISIBILITY="Graphics3D filter visibility";x.SCALE_VISIBILITY="Graphics3D scale visibility";x.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";x.POINT_OF_INTEREST_FREQUENT="POI frequent";x.POINT_OF_INTEREST_INFREQUENT="POI infrequent";x.LABELER="labeler";x.FEATURE_QUERY_ENGINE="feature query";x.FEATURE_TILE_TREE="feature tile tree";x.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";x.ELEVATION_ALIGNMENT="elevation alignment";x.TEXT_TEXTURE_ATLAS=
"text texture atlas";x.TEXTURE_UNLOAD="texture unload";x.LINE_OF_SIGHT_TOOL="line of sight tool";x.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";x.ELEVATION_PROFILE="elevation profile";x.SNAPPING="snapping";x.SHADOW_ACCUMULATOR="shadow accumulator";x.CLOUDS_GENERATOR="cloud generator";x[x.TEST_PRIO=1]="TEST_PRIO"})(g.TaskPriority||(g.TaskPriority={}));const d=new Map([[g.TaskPriority.RESOURCE_CONTROLLER,0],[g.TaskPriority.SLIDE,0],[g.TaskPriority.STREAM_DATA_LOADER,0],[g.TaskPriority.ELEVATION_QUERY,
0],[g.TaskPriority.TERRAIN_SURFACE,1],[g.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[g.TaskPriority.GRAPHICS_CORE,2],[g.TaskPriority.I3S_CONTROLLER,2],[g.TaskPriority.POINT_CLOUD_LAYER,2],[g.TaskPriority.FEATURE_TILE_FETCHER,2],[g.TaskPriority.OVERLAY,4],[g.TaskPriority.STAGE,4],[g.TaskPriority.GRAPHICS_DECONFLICTOR,4],[g.TaskPriority.FILTER_VISIBILITY,4],[g.TaskPriority.SCALE_VISIBILITY,4],[g.TaskPriority.FRUSTUM_VISIBILITY,4],[g.TaskPriority.CLOUDS_GENERATOR,4],[g.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[g.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[g.TaskPriority.LABELER,8],[g.TaskPriority.FEATURE_QUERY_ENGINE,8],[g.TaskPriority.FEATURE_TILE_TREE,16],[g.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[g.TaskPriority.ELEVATION_ALIGNMENT,12],[g.TaskPriority.TEXT_TEXTURE_ATLAS,12],[g.TaskPriority.TEXTURE_UNLOAD,12],[g.TaskPriority.LINE_OF_SIGHT_TOOL,16],[g.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[g.TaskPriority.SNAPPING,0],[g.TaskPriority.SHADOW_ACCUMULATOR,30]]),l=w.Milliseconds(6.5),L=w.Milliseconds(1),
D=w.Milliseconds(30),G=w.Milliseconds(1E3/30),N=w.Milliseconds(100);var f;(function(x){let T=function(){function M(){this._updating=new P.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new A("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new B;this._state=k.RenderState.INTERACTING;this._tasks=new z;this._runQueue=new z;this._load=0;this._idleStateCallbacks=new z;this._idleUpdatesStartFired=!1;this._maxReschedule=32;this._debug=this._forceTask=
!1;this._debugHandle=p.watch(()=>K.SCHEDULER_LOG_SLOW_TASKS,H=>this._debug=H,p.initial);for(const H of Object.keys(g.TaskPriority))this.performanceInfo.tasks.set(g.TaskPriority[H],new A(g.TaskPriority[H]));const u=this;this._test={FRAME_SAFETY_BUDGET:l,INTERACTING_BUDGET:G,IDLE_BUDGET:N,get availableBudget(){return u._budget.budget},usedBudget:0,getBudget:()=>u._budget,setBudget:H=>u._budget=H,updateTask:H=>this._updateTask(H),getState:H=>this._getState(H),getRuntime:H=>this._getRuntime(H),frameTaskTimes:this._frameTaskTimes,
resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var F=M.prototype;F.destroy=function(){this._tasks.toArray().forEach(u=>u.remove());this._tasks.clear();t.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updating.set(!1)};F.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))};F.registerTask=
function(u,H){const q=I(u);H=new C(this,u,H,q);this._tasks.push(H);this.performanceInfo.tasks.has(u)||this.performanceInfo.tasks.set(u,new A(u));return H};F.registerIdleStateCallbacks=function(u,H){const q={idleBegin:u,idleEnd:H};this._idleStateCallbacks.push(q);this.state===k.RenderState.IDLE&&this._idleUpdatesStartFired&&q.idleBegin();const R=this;return{remove:()=>this._removeIdleStateCallbacks(q),set idleBegin(Z){R._idleUpdatesStartFired&&(q.idleEnd(),R._state===k.RenderState.IDLE&&Z());q.idleBegin=
Z},set idleEnd(Z){q.idleEnd=Z}}};F.updateBudget=function(u){this._test.usedBudget=0;++this._frameNumber;let H=l,q=u.frameDuration,R=L;switch(this.state){case k.RenderState.IDLE:H=w.Milliseconds(0);q=w.Milliseconds(Math.max(N,u.frameDuration));R=D;break;case k.RenderState.INTERACTING:q=w.Milliseconds(Math.max(G,u.frameDuration))}q=w.Milliseconds(q-u.elapsedFrameTime-H);if(this.state!==k.RenderState.IDLE&&q<L&&!this._forceTask)return this._forceTask=!0,!1;q=w.Milliseconds(Math.max(q,R));this._budget.reset(q,
this.state);this._maxReschedule=32;this._updateLoad();return this._schedule()};F.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(u=>u.idleBegin()));this._runIdle();break;case k.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};F.stopFrame=function(){this._budget.reset(w.Milliseconds(0),
this._state);this._budget.madeProgress()};F._removeIdleStateCallbacks=function(u){this._idleUpdatesStartFired&&u.idleEnd();this._idleStateCallbacks.removeUnordered(u)};F.removeTask=function(u){this._tasks.removeUnordered(u);this._runQueue.removeUnordered(u)};F._updateTask=function(u){this._tasks.forAll(H=>{H.name===u&&H.setPriority(u)})};F._getState=function(u){if(this._runQueue.some(q=>q.name===u))return g.TaskState.SCHEDULED;let H=g.TaskState.IDLE;this._tasks.forAll(q=>{q.name===u&&q.needsUpdate&&
(1>=q.schedulePriority?H=g.TaskState.READY:H!==g.TaskState.READY&&(H=g.TaskState.WAITING))});return H};F._getRuntime=function(u){let H=0;this._tasks.forAll(q=>{q.name===u&&(H+=q.runtime)});return H};F._resetRuntimes=function(){this._tasks.forAll(u=>u.runtime=0)};F._getRunning=function(){const u=new Map;this._tasks.forAll(q=>{q.needsUpdate&&u.set(q.name,(u.get(q.name)||0)+1)});if(0===u.size)return null;let H="";u.forEach((q,R)=>{H=1<q?H+` ${q}x ${R}`:H+` ${R}`});return H};F._runIdle=function(){this._run()};
F._runInteracting=function(){this._run()};F._runAnimating=function(){this._run()};F._updateLoad=function(){const u=this._tasks.reduce((H,q)=>q.needsUpdate?++H:H,0);this._load=.9*this._load+u*(1-.9)};F._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(u=>{if(u.needsUpdate)return!0;u.schedulePriority=u.basePriority;return!1});for(this._tasks.forAll(u=>{0===u.basePriority&&u.needsUpdate&&!this._runQueue.includes(u)&&this._runQueue.unshift(u)});0===this._runQueue.length;){let u=
!1;this._tasks.forAll(H=>{if(H.needsUpdate&&0!==H.schedulePriority&&0!==H.basePriority&&(!H.task.runOncePerFrame||H.lastFrameRun!==this._frameNumber))switch(u=!0,H.schedulePriority){case 1:H.schedulePriority=0;this._runQueue.push(H);break;default:--H.schedulePriority}});if(!u)return this._updating.set(!1),!1;--this._maxReschedule}this._updating.set(!0);return!0};F._run=function(){const u=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var H=this._budget.now();const q=
this._runQueue.pop();this._budget.resetProgress();try{q.task.runTask(this._budget)}catch(R){O.getLogger("esri.views.support.Scheduler").error(`Exception in task "${q.name}"`,R)}q.schedulePriority=q.basePriority;q.lastFrameRun=this._frameNumber;H=this._budget.now()-H;q.runtime+=H;this._frameTaskTimes.set(q.priority,this._frameTaskTimes.get(q.priority)+H);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",q.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");
if(0>=this._budget.remaining){this._updating.set(this._tasks.some(R=>R.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-u);return}}while(this._schedule());this._updating.set(this._tasks.some(q=>q.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-u)};F._startFrameTaskTimes=function(){for(const u of Object.keys(g.TaskPriority))this._frameTaskTimes.set(g.TaskPriority[u],0)};F._recordFrameTaskTimes=function(u){this._frameTaskTimes.forEach((H,q)=>this.performanceInfo.tasks.get(q).record(H));
this.performanceInfo.total.record(u)};c._createClass(M,[{key:"updating",get:function(){return this._updating.get()},set:function(u){this._updating.set(u)}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(u){this._state!==u&&(this._state=u,this.state!==k.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(H=>H.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return M}();
x.Scheduler=T;let C=function(){function M(u,H,q,R){this._scheduler=u;this.name=H;this._basePriority=R;this.runtime=this.lastFrameRun=0;this._queue=new Y.PromiseQueue;this._handles=new ha;this.schedulePriority=this._basePriority;this._task=new P.ObservableValue(t.isSome(q)?q:this._queue);this._handles.add(p.when(()=>this.task.running,()=>u.activate()))}var F=M.prototype;F.remove=function(){this.processQueue(h);this._scheduler.removeTask(this);this.schedule=r.schedule;this.reschedule=r.reschedule;this._handles.destroy()};
F.setPriority=function(u){this.name=u;u=I(u);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=u;this._basePriority=u};F.schedule=function(u,H,q){return this._queue.push(u,H,q)};F.reschedule=function(u,H,q){return this._queue.unshift(u,H,q)};F.processQueue=function(u){this._queue.runTask(u)};c._createClass(M,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},
{key:"priority",get:function(){return this.name},set:function(u){this.setPriority(u)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return M}(),B=function(){function M(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=k.RenderState.IDLE;this._done=!1;this._enabled=!0}var F=M.prototype;F.run=function(u){if(this.done)return!1;!0===u()&&this.madeProgress();return!0};F.madeProgress=function(){this._done=this.elapsed>=this._budget&&
this._enabled};F.reset=function(u,H){this._begin=this.now();this._budget=u;this._state=H;this._done=!1};F.now=function(){return performance.now()};F.resetProgress=function(){this._done=!1};c._createClass(M,[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(u){this._enabled=u}},{key:"remaining",get:function(){return Math.max(this._budget-
this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._done}}]);return M}();x.Budget=B})(f||(f={}));g.TaskState=void 0;(function(x){x.SCHEDULED="s";x.READY="r";x.WAITING="w";x.IDLE="i"})(g.TaskState||(g.TaskState={}));const h=(()=>{const x=new f.Budget;x.enabled=!1;return x})(),r=new (function(){function x(){}var T=x.prototype;T.remove=function(){};T.processQueue=function(){};T.schedule=function(C,B,M){try{if(n.isAborted(B)){const F=
n.createAbortError();return M?Promise.resolve(M(F)):Promise.reject(F)}return n.when(C(h))}catch(F){return Promise.reject(F)}};T.reschedule=function(C,B,M){return this.schedule(C,B,M)};return x}());g.ImmediateTask=r;g.getTaskPriority=I;g.newScheduler=function(){return new f.Scheduler};g.noBudget=h;g.taskPriorities=d;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(g,c,ha,O,t,A,z){function n(K,k,I={}){return p(K,k,I,P)}function p(K,k,I={},d){let l=null;const L=I.once?(D,G)=>{d(D)&&(O.removeMaybe(l),k(D,G))}:(D,G)=>{d(D)&&k(D,G)};l=A.watchTracked(K,L,I.sync,I.equals);I.initial&&(K=K(),L(K,K));return l}function w(K,k,I){if(t.isAborted(I))return Promise.reject(t.createAbortError());const d=K();if(k?.(d))return Promise.resolve(d);let l=null;return new Promise((L,D)=>{l=ha.handlesGroup([t.onAbort(I,()=>{l=O.removeMaybe(l);D(t.createAbortError())}),p(K,G=>
{l=O.removeMaybe(l);L(G)},{sync:!1,once:!0},k??P)])})}function P(K){return!0}function Y(K){return!!K}g.autorun=z.autorun;g.initial={initial:!0};g.on=function(K,k,I,d={}){function l(){D&&G&&(G.remove(),d.onListenerRemove?.(D),G=D=null)}function L(h){d.once&&d.once&&O.removeMaybe(N);I(h)}let D=null,G=null,N=null;const f=n(K,(h,r)=>{l();c.isEventTarget(h)&&(D=h,G=c.on(h,k,L),d.onListenerAdd?.(h))},{sync:d.sync,initial:!0});return N=ha.makeHandle(()=>{f.remove();l()})};g.once=function(K,k){return w(K,
null,k)};g.pausable=function(K,k,I={}){let d=!1;const l=n(K,(L,D)=>{d||k(L,D)},I);return{remove(){l.remove()},pause(){d=!0},resume(){d=!1}}};g.sync={sync:!0};g.syncAndInitial={sync:!0,initial:!0};g.watch=n;g.when=function(K,k,I={}){return p(K,k,I,Y)};g.whenOnce=function(K,k){return w(K,Y,k)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],
function(g,c,ha){let O=function(){function t(z){this._observable=new ha.SimpleObservable;this._value=z}var A=t.prototype;A.get=function(){c.trackAccess(this._observable);return this._value};A.set=function(z){z!==this._value&&(this._value=z,this._observable.notify())};return t}();g.ObservableValue=O;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils",
"../../core/accessorSupport/tracking/ObservableValue"],function(g,c,ha,O){let t=function(){function z(){this._tasks=[];this._running=new O.ObservableValue(!1)}var n=z.prototype;n.destroy=function(){this.cancelAll()};n.runTask=function(p){for(;!p.done&&this._process(p);)p.madeProgress()};n.push=function(p,w,P){this._running.set(!0);return new Promise((Y,K)=>this._tasks.push(new A(Y,K,p,w,P)))};n.unshift=function(p,w,P){this._running.set(!0);return new Promise((Y,K)=>this._tasks.unshift(new A(Y,K,p,
w,P)))};n._process=function(p){if(0===this._tasks.length)return!1;const w=this._tasks.shift();try{const P=ha.isAborted(w.signal);if(P&&!w.abortCallback)w.reject(ha.createAbortError());else{const Y=P?w.abortCallback?.(ha.createAbortError()):w.callback(p);ha.isPromiseLike(Y)?Y.then(w.resolve,w.reject):w.resolve(Y)}}catch(P){w.reject(P)}this._running.set(0<this._tasks.length);return!0};n.cancelAll=function(){const p=ha.createAbortError();for(const w of this._tasks)if(w.abortCallback){const P=w.abortCallback(p);
w.resolve(P)}else w.reject(p);this._tasks.length=0;this._running.set(!1)};c._createClass(z,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return z}(),A=function(z,n,p,w,P){this.resolve=z;this.reject=n;this.callback=p;this.signal=w;this.abortCallback=P};g.PromiseQueue=t;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,c,ha,O,t,A,z){ha=function(n){function p(){var w=n.apply(this,arguments)||this;w.SCHEDULER_LOG_SLOW_TASKS=!1;w.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return w}g._inheritsLoose(p,n);return p}(ha);c.__decorate([O.property()],ha.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([O.property()],ha.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ha=c.__decorate([z.subclass("esri.views.support.DebugFlags")],ha);return new ha})},"esri/views/support/RenderState":function(){define(["exports"],
function(g){g.RenderState=void 0;var c=g.RenderState||(g.RenderState={});c[c.ANIMATING=0]="ANIMATING";c[c.INTERACTING=1]="INTERACTING";c[c.IDLE=2]="IDLE";Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry","../../../support/fieldUtils"],function(g,c,ha,O,t){function*A(D){switch(D.type){case "Feature":yield D;
break;case "FeatureCollection":for(const G of D.features)G&&(yield G)}}function*z(D){if(!D)return null;switch(D.type){case "Point":yield D.coordinates;break;case "LineString":case "MultiPoint":yield*D.coordinates;break;case "MultiLineString":case "Polygon":for(const G of D.coordinates)yield*G;break;case "MultiPolygon":for(const G of D.coordinates)for(const N of G)yield*N}}function*n(D,G={}){const {geometryType:N,objectIdField:f}=G;for(const h of D){const {geometry:r,properties:x,id:T}=h;if(r&&L[r.type]!==
N)continue;D=x||{};let C=D[f]??null;f&&null!=T&&!D[f]&&(D[f]=C=T);yield new ha.OptimizedFeature(r?Y(new O,r,G):null,D,null,C)}}function p(D){for(const G of D)if(2<G.length)return!0;return!1}function w(D){let G=0;for(let N=0;N<D.length;N++){const f=D[N],h=D[(N+1)%D.length];G+=f[0]*h[1]-h[0]*f[1]}return 0>=G}function P(D){const G=D[0],N=D[D.length-1];G[0]===N[0]&&G[1]===N[1]&&G[2]===N[2]||D.push(G);return D}function Y(D,G,N){switch(G.type){case "LineString":return I(D,G.coordinates,N),D;case "MultiLineString":for(const h of G.coordinates)I(D,
h,N);return D;case "MultiPoint":return I(D,G.coordinates,N),D;case "MultiPolygon":for(var f of G.coordinates)for(K(D,f[0],N),G=1;G<f.length;G++)k(D,f[G],N);return D;case "Point":return l(D,G.coordinates,N),D;case "Polygon":f=G.coordinates;K(D,f[0],N);for(G=1;G<f.length;G++)k(D,f[G],N);return D}}function K(D,G,N){G=P(G);w(G)?I(D,G,N):d(D,G,N)}function k(D,G,N){G=P(G);w(G)?d(D,G,N):I(D,G,N)}function I(D,G,N){for(const f of G)l(D,f,N);D.lengths.push(G.length)}function d(D,G,N){for(let f=G.length-1;0<=
f;f--)l(D,G[f],N);D.lengths.push(G.length)}function l(D,G,N){const [f,h,r]=G;D.coords.push(f,h);N.hasZ&&D.coords.push(r||0)}const L={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};g.createOptimizedFeatures=function(D,G){return Array.from(n(A(D),G))};g.getGeometryType=function(D){return L[D]};g.inferLayerProperties=function(D,G={}){const N=[];var f=
new Set;const h=new Set;var r=!1;let x=null,T=!1,C=void 0;({geometryType:G=null}=G);var B=!1;for(const M of A(D)){const {geometry:F,properties:u,id:H}=M;if(F&&(G||(G=L[F.type]),L[F.type]!==G))continue;r||(r=z(F),r=p(r));!T&&(T=null!=H)&&(C=typeof H,x=Object.keys(u).filter(q=>u[q]===H));T&&null!=H&&(1<x.length?x=x.filter(q=>u[q]===H):1===x.length&&(x=u[x[0]]===H?x:[]));if(!B&&u){D=!0;for(const q in u)if(!f.has(q))if(B=u[q],null==B)D=!1,h.add(q);else{a:switch(typeof B){case "string":B="esriFieldTypeString";
break a;case "number":B="esriFieldTypeDouble";break a;default:B="unknown"}"unknown"===B?h.add(q):(h.delete(q),f.add(q),N.push({name:t.normalizeFieldName(q),alias:q,type:B}))}B=D}}if(f=t.normalizeFieldName(1===x?.length&&x[0]||null))for(const M of N)if(M.name===f&&t.isNumericField(M)){M.type="esriFieldTypeOID";break}return{fields:N,geometryType:G,hasZ:r,objectIdFieldName:f,objectIdFieldType:C,unknownFields:Array.from(h)}};g.validateGeoJSON=function(D){if(!D)throw new c("geojson-layer:empty","GeoJSON data is empty");
if("Feature"!==D.type&&"FeatureCollection"!==D.type)throw new c("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:D});({crs:D}=D);if(D){var G="string"===typeof D?D:"name"===D.type?D.properties.name:"EPSG"===D.type?D.properties.code:null,N=RegExp(".*(CRS84H?|4326)$","i");if(!G||!N.test(G))throw new c("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:D});}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(g,c,ha,O,t){const A=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let z=1;g.createCapabilities=function(n,p){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,
supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:p,supportsExceedsLimitStatistics:!0},query:O.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:p,
supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};g.createDefaultAttributesFunction=function(n,p){if(c("esri-csp-restrictions"))return()=>({[p]:null,...n});try{let w=`this.${p} = null;`;for(const Y in n){const K=A.test(Y)?`.${Y}`:`["${Y}"]`;w+=`this${K} = ${JSON.stringify(n[Y])};`}const P=
(new Function(`\n      return class AttributesClass$${z++} {\n        constructor() {\n          ${w};\n        }\n      }\n    `))();return()=>new P}catch(w){return()=>({[p]:null,...n})}};g.createDefaultTemplate=function(n={}){return[{name:"New Feature",description:"",prototype:{attributes:ha.clone(n)}}]};g.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?t.defaultPointSymbolJSON:"esriGeometryPolyline"===n?t.defaultPolylineSymbolJSON:
t.defaultPolygonSymbolJSON}}};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(g){const c=[252,146,31,255],ha={type:"esriSMS",style:"esriSMSCircle",size:6,color:c,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},O={type:"esriSLS",style:"esriSLSSolid",width:.75,color:c};g.defaultColor=c;g.defaultOutlineColor=[153,153,153,255];g.defaultPointSymbolJSON=
ha;g.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};g.defaultPolylineSymbolJSON=O;g.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};g.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",
color:[0,0,0,255],outline:null,size:10.5};g.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};g.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),
function(g,c,ha,O,t,A){function z(d){return new Y(d)}function n(){return p.apply(this,arguments)}function p(){p=ha._asyncToGenerator(function*(){O.isNone(I)&&(I=yield new Promise((d,l)=>g(["../../../../geometry/geometryEngineJSON"],d,l)));return I});return p.apply(this,arguments)}function w(){w=ha._asyncToGenerator(function*(d,l){!t.isValid(d)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||(yield n())});return w.apply(this,arguments)}let P=function(){this.description=this.code=null},Y=function(d){this.error=
new P;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=d},K=function(d){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=d};const k=new Set;let I;c.createFeatureEditErrorResult=z;c.createFeatureEditSuccessResult=function(d){return new K(d)};c.loadGeometryEngineForSimplify=function(d,l){return w.apply(this,arguments)};c.mixAttributes=function(d,l,L,D=!1,G){k.clear();for(const r in L){const x=d.get(r);if(!x)continue;var N=L[r],f=x,h=N;let T=h;
"string"===typeof h&&A.isNumericField(f)?T=parseFloat(h):null!=h&&A.isStringField(f)&&"string"!==typeof h&&(T=String(h));f=A.sanitizeNullFieldValue(T);f!==N&&G&&G.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:x,originalValue:N,sanitizedValue:f}});k.add(x.name);if(x&&(D||x.editable)){if(N=A.validateFieldValue(x,f))return z(A.validationErrorToString(N,x,f));l[x.name]=f}}for(const r of d?.requiredFields??[])if(!k.has(r.name))return z(`missing required field "${r.name}"`);
return null};c.simplify=function(d,l){if(!d||!t.isValid(l))return d;if("rings"in d||"paths"in d){if(O.isNone(I))throw new TypeError("geometry engine not loaded");return I.simplify(l,d)}return d};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(g,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});g.kebabDict=c;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(g,
c,ha,O,t,A,z,n,p,w,P,Y,K,k,I,d,l,L,D){const G={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function N(){var h=this;this._queryEngine=null;this._snapshotFeatures=function(){var r=g._asyncToGenerator(function*(x){x=yield h._fetch(x);return h._createFeatures(x)});return function(x){return r.apply(this,arguments)}}()}var f=N.prototype;f.destroy=function(){this._queryEngine?.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=
null};f.load=function(){var h=g._asyncToGenerator(function*(r,x={}){this._loadOptions={url:r.url,customParameters:r.customParameters};var T=[];yield this._checkProjection(r.spatialReference);var C=null;r.url&&(C=yield this._fetch(x?.signal));var B=k.inferLayerProperties(C,{geometryType:r.geometryType});x=r.fields||B.fields||[];const M=null!=r.hasZ?r.hasZ:B.hasZ,F=B.geometryType;let u=r.objectIdField||B.objectIdFieldName||"__OBJECTID";const H=r.spatialReference||p.WGS84;r=r.timeInfo;x===B.fields&&
0<B.unknownFields.length&&T.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:B.unknownFields}});let q=(new l(x)).get(u);q?("esriFieldTypeString"!==q.type&&(q.type="esriFieldTypeOID"),q.editable=!1,q.nullable=!1,u=q.name):(q={alias:u,name:u,type:"string"===B.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},x.unshift(q));B={};for(var R of x){null==R.name&&(R.name=
R.alias);null==R.alias&&(R.alias=R.name);if(!R.name)throw new O("geojson-layer:invalid-field-name","field name is missing",{field:R});if(!L.kebabDict.jsonValues.includes(R.type))throw new O("geojson-layer:invalid-field-type",`invalid type for field "${R.name}"`,{field:R});if(R.name!==q.name){const Z=D.getFieldDefaultValue(R);void 0!==Z&&(B[R.name]=Z)}}this._fieldsIndex=new l(x);R=this._fieldsIndex.requiredFields.indexOf(q);-1<R&&this._fieldsIndex.requiredFields.splice(R,1);r&&(r.startTimeField&&((R=
this._fieldsIndex.get(r.startTimeField))?(r.startTimeField=R.name,R.type="esriFieldTypeDate"):r.startTimeField=null),r.endTimeField&&((R=this._fieldsIndex.get(r.endTimeField))?(r.endTimeField=R.name,R.type="esriFieldTypeDate"):r.endTimeField=null),r.trackIdField&&((R=this._fieldsIndex.get(r.trackIdField))?r.trackIdField=R.name:(r.trackIdField=null,T.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:r}}))),r.startTimeField||r.endTimeField||
(T.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:r}}),r=null));R=F?I.createDrawingInfo(F):null;T={warnings:T,featureErrors:[],layerDefinition:{...G,drawingInfo:R,templates:I.createDefaultTemplate(B),extent:null,geometryType:F,objectIdField:u,fields:x,hasZ:!!M,timeInfo:r}};this._queryEngine=new K.QueryEngine({fields:x,geometryType:F,hasM:!1,hasZ:M,objectIdField:u,spatialReference:H,timeInfo:r,featureStore:new P({geometryType:F,hasM:!1,
hasZ:M}),cacheSpatialQueries:!0});this._createDefaultAttributes=I.createDefaultAttributesFunction(B,u);C=yield this._createFeatures(C);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,C);C=this._normalizeFeatures(C,T.warnings,T.featureErrors);this._queryEngine.featureStore.addMany(C);T.layerDefinition.extent=this._queryEngine.fullExtent;if(T.layerDefinition.timeInfo){const {start:Z,end:W}=this._queryEngine.timeExtent;T.layerDefinition.timeInfo.timeExtent=[Z,W]}return T});return function(r){return h.apply(this,
arguments)}}();f.applyEdits=function(){var h=g._asyncToGenerator(function*(r){const {spatialReference:x,geometryType:T}=this._queryEngine;yield Promise.all([d.loadGeometryEngineForSimplify(x,T),Y.checkProjectionSupport(r.adds,x),Y.checkProjectionSupport(r.updates,x)]);yield this._waitSnapshotComplete();return this._applyEdits(r)});return function(r){return h.apply(this,arguments)}}();f.queryFeatures=function(){var h=g._asyncToGenerator(function*(r={},x={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQuery(r,
x.signal)});return function(){return h.apply(this,arguments)}}();f.queryFeatureCount=function(){var h=g._asyncToGenerator(function*(r={},x={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(r,x.signal)});return function(){return h.apply(this,arguments)}}();f.queryObjectIds=function(){var h=g._asyncToGenerator(function*(r={},x={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(r,x.signal)});return function(){return h.apply(this,arguments)}}();
f.queryExtent=function(){var h=g._asyncToGenerator(function*(r={},x={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(r,x.signal)});return function(){return h.apply(this,arguments)}}();f.querySnapping=function(){var h=g._asyncToGenerator(function*(r,x={}){yield this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(r,x.signal)});return function(r){return h.apply(this,arguments)}}();f.refresh=function(){var h=g._asyncToGenerator(function*(r){this._loadOptions.customParameters=
r;this._snapshotTask?.abort();this._snapshotTask=ha.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(x=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,x);(x=this._normalizeFeatures(x))&&this._queryEngine.featureStore.addMany(x)},x=>{this._queryEngine.featureStore.clear();z.isAbortError(x)||t.getLogger("esri.layers.GeoJSONLayer").error(new O("geojson-layer:refresh","An error occurred during refresh",{error:x}))});yield this._waitSnapshotComplete();
return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}});return function(r){return h.apply(this,arguments)}}();f._createFeatures=function(){var h=g._asyncToGenerator(function*(r){const {geometryType:x,hasZ:T,objectIdField:C}=this._queryEngine;r=k.createOptimizedFeatures(r,{geometryType:x,hasZ:T,objectIdField:C});if(!p.equals(this._queryEngine.spatialReference,p.WGS84))for(const B of r)A.isSome(B.geometry)&&(B.geometry=w.convertFromGeometry(Y.project(w.convertToGeometry(B.geometry,
this._queryEngine.geometryType,this._queryEngine.hasZ,!1),p.WGS84,this._queryEngine.spatialReference)));return r});return function(r){return h.apply(this,arguments)}}();f._waitSnapshotComplete=function(){var h=g._asyncToGenerator(function*(){if(this._snapshotTask&&!this._snapshotTask.finished){try{yield this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}});return function(){return h.apply(this,arguments)}}();f._fetch=function(){var h=g._asyncToGenerator(function*(r){const {url:x,
customParameters:T}=this._loadOptions;r=(yield c(x,{responseType:"json",query:{...T},signal:r})).data;yield k.validateGeoJSON(r);return r});return function(r){return h.apply(this,arguments)}}();f._normalizeFeatures=function(h,r,x){const {objectIdField:T}=this._queryEngine,C=[];for(const B of h){h=this._createDefaultAttributes();const M=d.mixAttributes(this._fieldsIndex,h,B.attributes,!0,r);M?x?.push(M):(this._assignObjectId(h,B.attributes,!0),B.attributes=h,B.objectId=h[T],C.push(B))}return C};f._applyEdits=
function(h){const {adds:r,updates:x,deletes:T}=h;h={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};r&&r.length&&this._applyAddEdits(h,r);x&&x.length&&this._applyUpdateEdits(h,x);if(T&&T.length){for(const C of T)h.deleteResults.push(d.createFeatureEditSuccessResult(C));this._queryEngine.featureStore.removeManyById(T)}return{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:h}};f._applyAddEdits=function(h,r){const {addResults:x}=h,{geometryType:T,
hasM:C,hasZ:B,objectIdField:M,spatialReference:F,featureStore:u}=this._queryEngine,H=[];for(const q of r){if(q.geometry&&T!==n.getJsonType(q.geometry)){x.push(d.createFeatureEditErrorResult("Incorrect geometry type."));continue}r=this._createDefaultAttributes();const R=d.mixAttributes(this._fieldsIndex,r,q.attributes);R?x.push(R):(this._assignObjectId(r,q.attributes),q.attributes=r,null!=q.uid&&(h.uidToObjectId[q.uid]=q.attributes[M]),A.isSome(q.geometry)&&(r=q.geometry.spatialReference??F,q.geometry=
Y.project(d.simplify(q.geometry,r),r,F)),H.push(q),x.push(d.createFeatureEditSuccessResult(q.attributes[M])))}u.addMany(w.convertFromFeatures([],H,T,B,C,M))};f._applyUpdateEdits=function({updateResults:h},r){const {geometryType:x,hasM:T,hasZ:C,objectIdField:B,spatialReference:M,featureStore:F}=this._queryEngine;for(const H of r){const {attributes:q,geometry:R}=H;r=q&&q[B];if(null==r){h.push(d.createFeatureEditErrorResult(`Identifier field ${B} missing`));continue}if(!F.has(r)){h.push(d.createFeatureEditErrorResult(`Feature with object id ${r} missing`));
continue}const Z=w.convertToFeature(F.getFeature(r),x,C,T);if(A.isSome(R)){if(x!==n.getJsonType(R)){h.push(d.createFeatureEditErrorResult("Incorrect geometry type."));continue}var u=R.spatialReference??M;Z.geometry=Y.project(d.simplify(R,u),u,M)}if(q&&(u=d.mixAttributes(this._fieldsIndex,Z.attributes,q))){h.push(u);continue}F.add(w.convertFromFeature(Z,x,C,T,B));h.push(d.createFeatureEditSuccessResult(r))}};f._createObjectIdGenerator=function(h,r){const x=h.fieldsIndex.get(h.objectIdField);if("esriFieldTypeString"===
x.type)return()=>x.name+"-"+Date.now().toString(16);let T=Number.NEGATIVE_INFINITY;for(const C of r)C.objectId&&(T=Math.max(T,C.objectId));T=Math.max(0,T)+1;return()=>T++};f._assignObjectId=function(h,r,x=!1){const T=this._queryEngine.objectIdField;h[T]=x&&T in r?r[T]:this._objectIdGenerator()};f._checkProjection=function(){var h=g._asyncToGenerator(function*(r){try{yield Y.checkProjectionSupport(p.WGS84,r)}catch{throw new O("geojson-layer","Projection not supported");}});return function(r){return h.apply(this,
arguments)}}();return N}()});