// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(f,c,ha,K,r,z,y,m){function n(v,G){return v?G?4:3:G?3:2}function w(v,G,Q,T){if(v){if(Q)return G&&T?h:bb;if(G&&T)return b}else if(G&&T)return bb;return Na}function N({scale:v,translate:G},Q){return Math.round((Q-G[0])/v[0])}function Y({scale:v,translate:G},
Q){return Math.round((G[1]-Q)/v[1])}function I({scale:v,translate:G},Q,T){return Q*v[T]+G[T]}function k(v){v=v.coords;return{x:v[0],y:v[1]}}function H(v,G){v.coords[0]=G.x;v.coords[1]=G.y;return v}function d(v){v=v.coords;return{x:v[0],y:v[1],z:v[2]}}function l(v,G){v.coords[0]=G.x;v.coords[1]=G.y;v.coords[2]=G.z;return v}function L(v){v=v.coords;return{x:v[0],y:v[1],m:v[2]}}function O(v,G){v.coords[0]=G.x;v.coords[1]=G.y;v.coords[2]=G.m;return v}function U(v){v=v.coords;return{x:v[0],y:v[1],z:v[2],
m:v[3]}}function V(v,G){v.coords[0]=G.x;v.coords[1]=G.y;v.coords[2]=G.z;v.coords[3]=G.m;return v}function g(v,G){return v&&G?V:v?l:G?O:H}function p(v,G,Q,T,fa){Q=g(Q,T);for(const {geometry:ka,attributes:na}of G)G=K.isSome(ka)?Q(new m,ka):null,v.push(new z.OptimizedFeature(G,na,null,fa?na[fa]:void 0));return v}function x(v,G,Q,T){for(const {geometry:fa,attributes:ka}of G)v.push({attributes:ka,geometry:K.isSome(fa)?B(fa,Q,T):null});return v}function B(v,G,Q){if(K.isNone(v))return null;const T=n(G,Q),
fa=[];for(let ka=0;ka<v.coords.length;ka+=T){const na=[];for(let ra=0;ra<T;ra++)na.push(v.coords[ka+ra]);fa.push(na)}return G?Q?{points:fa,hasZ:G,hasM:Q}:{points:fa,hasZ:G}:Q?{points:fa,hasM:Q}:{points:fa}}function Z(v,G,Q,T,fa){Q=n(Q,T);for(const {geometry:ka,attributes:na}of G)G=K.isSome(ka)?A(new m,ka,Q):null,v.push(new z.OptimizedFeature(G,na,null,fa?na[fa]:void 0));return v}function A(v,G,Q=n(G.hasZ,G.hasM)){v.lengths[0]=G.points.length;const T=v.coords;let fa=0;for(const ka of G.points)for(G=
0;G<Q;G++)T[fa++]=ka[G];return v}function C(v,G,Q){if(!v)return null;const T=n(G,Q),{coords:fa,lengths:ka}=v;v=[];let na=0;for(const ra of ka){const sa=[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=0;ma<T;ma++)da.push(fa[na++]);sa.push(da)}v.push(sa)}return G?Q?{paths:v,hasZ:G,hasM:Q}:{paths:v,hasZ:G}:Q?{paths:v,hasM:Q}:{paths:v}}function J(v,G,Q,T,fa){Q=n(Q,T);for(const {geometry:ka,attributes:na}of G)G=K.isSome(ka)?E(new m,ka,Q):null,v.push(new z.OptimizedFeature(G,na,null,fa?na[fa]:void 0));
return v}function E(v,G,Q=n(G.hasZ,G.hasM)){const {lengths:T,coords:fa}=v;let ka=0;for(const na of G.paths){for(const ra of na)for(G=0;G<Q;G++)fa[ka++]=ra[G];T.push(na.length)}return v}function t(v,G,Q){if(!v)return null;const T=n(G,Q),{coords:fa,lengths:ka}=v;v=[];let na=0;for(const ra of ka){const sa=[];for(let aa=0;aa<ra;aa++){const da=[];for(let ma=0;ma<T;ma++)da.push(fa[na++]);sa.push(da)}v.push(sa)}return G?Q?{rings:v,hasZ:G,hasM:Q}:{rings:v,hasZ:G}:Q?{rings:v,hasM:Q}:{rings:v}}function F(v,
G,Q,T,fa){for(const {geometry:ka,centroid:na,attributes:ra}of G){G=K.isSome(ka)?q(new m,ka,Q,T):null;const sa=fa?ra[fa]:void 0;K.isSome(na)?v.push(new z.OptimizedFeature(G,ra,H(new m,na),sa)):v.push(new z.OptimizedFeature(G,ra,null,sa))}return v}function q(v,G,Q=G.hasZ,T=G.hasM){R(v,G.rings,Q,T);return v}function R(v,G,Q,T){Q=n(Q,T);const {lengths:fa,coords:ka}=v;T=0;Ba(v);for(const na of G){for(const ra of na)for(G=0;G<Q;G++)ka[T++]=ra[G];fa.push(na.length)}return v}function W(v,G,Q,T,fa,ka){Ca(v);
if(!Q){for(const na of G)v.push(new z.OptimizedFeature(null,na.attributes,null,ka?na.attributes[ka]:void 0));return v}switch(Q){case "esriGeometryPoint":return p(v,G,T,fa,ka);case "esriGeometryMultipoint":return Z(v,G,T,fa,ka);case "esriGeometryPolyline":return J(v,G,T,fa,ka);case "esriGeometryPolygon":return F(v,G,T,fa,ka);default:Ja.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Q}'`)),Ca(v)}return v}function P(v,G,Q,T){v=v&&("coords"in v?v:v.geometry);
if(K.isNone(v))return null;switch(G){case "esriGeometryPoint":return G=k,Q&&T?G=U:Q?G=d:T&&(G=L),G(v);case "esriGeometryMultipoint":return B(v,Q,T);case "esriGeometryPolyline":return C(v,Q,T);case "esriGeometryPolygon":return t(v,Q,T);default:return Ja.error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${G}'`)),null}}function ja(v,G,Q,T,fa){Ca(v);if(K.isNone(Q)){for(const na of G)v.push({attributes:na.attributes});return v}switch(Q){case "esriGeometryPoint":Q=
k;T&&fa?Q=U:T?Q=d:fa&&(Q=L);for(var ka of G){const {geometry:na,attributes:ra}=ka;T=K.isSome(na)?Q(na):null;v.push({attributes:ra,geometry:T})}break;case "esriGeometryMultipoint":return x(v,G,T,fa);case "esriGeometryPolyline":for(const {geometry:na,attributes:ra}of G)v.push({attributes:ra,geometry:K.isSome(na)?C(na,T,fa):null});break;case "esriGeometryPolygon":for(const {geometry:na,attributes:ra,centroid:sa}of G)ka=K.isSome(na)?t(na,T,fa):null,K.isSome(sa)?(G=k(sa),v.push({attributes:ra,centroid:G,
geometry:ka})):v.push({attributes:ra,geometry:ka});break;default:Ja.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Q}'`))}return v}function ba(v,G,Q,T,fa,ka,na=Q,ra=T){Ba(v);if(K.isNone(G)||!G.coords.length)return null;fa=La[fa];const {coords:sa,lengths:aa}=G;G=n(Q,T);const da=n(Q&&na,T&&ra);Q=w(Q,T,na,ra);if(!aa.length)return Q(v.coords,sa,0,0,N(ka,sa[0]),Y(ka,sa[1])),Ba(v,G,0),v;let ma,ya=0,Da,Ga=0;for(const Ha of aa){if(Ha<fa)continue;let Fa=0;Da=Ga;
ra=T=N(ka,sa[ya]);ma=na=Y(ka,sa[ya+1]);Q(v.coords,sa,Da,ya,ra,ma);Fa++;ya+=G;Da+=da;for(let Ka=1;Ka<Ha;Ka++,ya+=G)if(ra=N(ka,sa[ya]),ma=Y(ka,sa[ya+1]),ra!==T||ma!==na)Q(v.coords,sa,Da,ya,ra-T,ma-na),Da+=da,Fa++,T=ra,na=ma;Fa>=fa&&(v.lengths.push(Fa),Ga=Da)}Ca(v.coords,Ga);return v.coords.length?v:null}function qa(v,G,Q,T,fa,ka,na){let ra=T,sa=0;for(let da=ka+Q;da<na;da+=Q){var aa=G[da];const ma=G[da+1],ya=G[na],Da=G[na+1];let Ga=G[ka],Ha=G[ka+1],Fa=ya-Ga,Ka=Da-Ha;if(0!==Fa||0!==Ka){const ta=((aa-
Ga)*Fa+(ma-Ha)*Ka)/(Fa*Fa+Ka*Ka);1<ta?(Ga=ya,Ha=Da):0<ta&&(Ga+=Fa*ta,Ha+=Ka*ta)}Fa=aa-Ga;Ka=ma-Ha;aa=Fa*Fa+Ka*Ka;aa>ra&&(sa=da,ra=aa)}ra>T&&(sa-ka>Q&&qa(v,G,Q,T,fa,ka,sa),fa(v,G,v.length,sa,G[sa],G[sa+1]),na-sa>Q&&qa(v,G,Q,T,fa,sa,na))}function wa(v,G,Q,T,fa){const {coords:ka,lengths:na}=G;Q=n(Q,T);if(!ka.length)return v!==G&&Ba(v),v;K.assertIsSome(fa);const {originPosition:ra,scale:sa,translate:aa}=fa;fa=oa;fa.originPosition=ra;T=fa.scale;T[0]=sa[0]??1;T[1]=-(sa[1]??1);T[2]=sa[2]??1;T[3]=sa[3]??
1;var da=fa.translate;da[0]=aa[0]??0;da[1]=aa[1]??0;da[2]=aa[2]??0;da[3]=aa[3]??0;if(!na.length){for(T=0;T<Q;++T)v.coords[T]=I(fa,ka[T],T);v!==G&&Ba(v,Q,0);return v}da=0;for(let ya=0;ya<na.length;ya++){const Da=na[ya];v.lengths[ya]=Da;for(var ma=0;ma<Q;++ma)v.coords[da+ma]=I(fa,ka[da+ma],ma);ma=v.coords[da];let Ga=v.coords[da+1];da+=Q;for(let Ha=1;Ha<Da;Ha++,da+=Q){ma+=ka[da]*T[0];Ga+=ka[da+1]*T[1];v.coords[da]=ma;v.coords[da+1]=Ga;for(let Fa=2;Fa<Q;++Fa)v.coords[da+Fa]=I(fa,ka[da+Fa],Fa)}}v!==G&&
Ba(v,ka.length,na.length);return v}function xa(v,G,Q,T){let fa=0,ka=v[T*G],na=v[T*(G+1)];for(let ra=1;ra<Q;ra++){const sa=ka+v[T*(G+ra)],aa=na+v[T*(G+ra)+1],da=(sa-ka)*(aa+na);ka=sa;na=aa;fa+=da}return.5*fa}function Ba(v,G=0,Q=0){Ca(v.lengths,Q);Ca(v.coords,G)}function Ca(v,G=0){v.length!==G&&(v.length=G)}const Ja=ha.getLogger("esri.layers.graphics.featureConversionUtils"),La={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Na=(v,G,Q,T,fa,ka)=>{v[Q]=fa;v[Q+
1]=ka},bb=(v,G,Q,T,fa,ka)=>{v[Q]=fa;v[Q+1]=ka;v[Q+2]=G[T+2]},b=(v,G,Q,T,fa,ka)=>{v[Q]=fa;v[Q+1]=ka;v[Q+2]=G[T+3]},h=(v,G,Q,T,fa,ka)=>{v[Q]=fa;v[Q+1]=ka;v[Q+2]=G[T+2];v[Q+3]=G[T+3]},ea=[],ia=[],oa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};f.convertFromFeature=function(v,G,Q,T,fa){ea[0]=v;[v]=W(ia,ea,G,Q,T,fa);Ca(ea);Ca(ia);return v};f.convertFromFeatureSet=function(v,G){const Q=new y,{hasM:T,hasZ:fa,features:ka,objectIdFieldName:na,spatialReference:ra,geometryType:sa,exceededTransferLimit:aa,
transform:da,fields:ma}=v;ma&&(Q.fields=ma);Q.geometryType=sa??null;Q.objectIdFieldName=na??G??null;Q.spatialReference=ra??null;if(!Q.objectIdFieldName)return Ja.error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Q;ka&&W(Q.features,ka,sa,fa,T,Q.objectIdFieldName);aa&&(Q.exceededTransferLimit=aa);T&&(Q.hasM=T);fa&&(Q.hasZ=fa);da&&(Q.transform=da);return Q};f.convertFromFeatures=W;f.convertFromGeometry=function(v,G,Q){if(K.isNone(v))return null;const T=new m;
"hasZ"in v&&null==G&&(G=v.hasZ);"hasM"in v&&null==Q&&(Q=v.hasM);if(r.isPoint(v))return g(null!=G?G:null!=v.z,null!=Q?Q:null!=v.m)(T,v);if(r.isPolygon(v))return q(T,v,G,Q);if(r.isPolyline(v))return E(T,v,n(G,Q));if(r.isMultipoint(v))return A(T,v,n(G,Q));Ja.error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${v}'`))};f.convertFromGraphics=function(v,G,Q,T,fa,ka){const na=v.length;switch(Q){case "esriGeometryPoint":p(v,G,T,fa,ka);break;case "esriGeometryMultipoint":Z(v,
G,T,fa,ka);break;case "esriGeometryPolyline":J(v,G,T,fa,ka);break;case "esriGeometryPolygon":F(v,G,T,fa,ka);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Q}'`))}for(T=0;T<G.length;T++)v[T+na].geometryType=Q,v[T+na].insertAfter=G[T].insertAfter,v[T+na].groupId=G[T].groupId;return v};f.convertFromMultipoint=A;f.convertFromMultipointFeatures=Z;f.convertFromNestedArray=R;f.convertFromPoint=function(v,G,Q=g(null!=G.z,null!=G.m)){return Q(v,
G)};f.convertFromPointFeatures=p;f.convertFromPolygon=q;f.convertFromPolyline=E;f.convertFromPolylineFeatures=J;f.convertToFeature=function(v,G,Q,T){ia[0]=v;ja(ea,ia,G,Q,T);v=ea[0];Ca(ea);Ca(ia);return v};f.convertToFeatureSet=function(v){const {objectIdFieldName:G,spatialReference:Q,transform:T,fields:fa,hasM:ka,hasZ:na,features:ra,geometryType:sa,exceededTransferLimit:aa,uniqueIdField:da,queryGeometry:ma,queryGeometryType:ya}=v;v=ja([],ra,sa,na,ka);const Da=P(ma,ya,!1,!1);v={features:v,fields:fa,
geometryType:sa,objectIdFieldName:G,spatialReference:Q,uniqueIdField:da,queryGeometry:Da};T&&(v.transform=T);aa&&(v.exceededTransferLimit=aa);ka&&(v.hasM=ka);na&&(v.hasZ=na);return v};f.convertToFeatures=ja;f.convertToGeometry=P;f.convertToMultipoint=B;f.convertToMultipointFeatures=x;f.convertToPoint=function(v,G,Q){return v?G?Q?U(v):d(v):Q?L(v):k(v):null};f.convertToPolygon=t;f.convertToPolyline=C;f.deltaDecodeGeometry=function(v,G){if(K.isNone(v))return null;const Q=v.clone(),T=v.coords;v=v.lengths;
let fa=0;for(let ra=0;ra<v.length;ra++){const sa=v[ra];var ka=T[G*fa],na=T[G*fa+1];for(let aa=1;aa<sa;aa++)ka+=T[G*(fa+aa)],na+=T[G*(fa+aa)+1],Q.coords[G*(fa+aa)]=ka,Q.coords[G*(fa+aa)+1]=na;fa+=sa}return Q};f.deltaEncodeGeometry=function(v,G){const Q=v.clone(),T=v.coords;v=v.lengths;let fa=0;for(let na=0;na<v.length;na++){const ra=v[na];let sa=T[G*fa];var ka=T[G*fa+1];for(let aa=1;aa<ra;aa++){const da=T[G*(fa+aa)],ma=T[G*(fa+aa)+1];ka=ma-ka;Q.coords[G*(fa+aa)]=da-sa;Q.coords[G*(fa+aa)+1]=ka;sa=da;
ka=ma}fa+=ra}return Q};f.generalizeOptimizedGeometry=function(v,G,Q,T,fa,ka,na=Q,ra=T){Ba(v);if(!G||!G.coords.length)return null;fa=La[fa];const {coords:sa,lengths:aa}=G;G=n(Q,T);const da=n(Q&&na,T&&ra);Q=w(Q,T,na,ra);if(!aa.length)return Q(v.coords,sa,0,0,sa[0],sa[1]),Ba(v,G,0),v;T=0;ka*=ka;for(const ma of aa){if(ma<fa){T+=ma*G;continue}na=v.coords.length/da;ra=T;const ya=T+(ma-1)*G;Q(v.coords,sa,v.coords.length,ra,sa[ra],sa[ra+1]);qa(v.coords,sa,G,ka,Q,ra,ya);Q(v.coords,sa,v.coords.length,ya,sa[ya],
sa[ya+1]);ra=v.coords.length/da-na;ra>=fa?v.lengths.push(ra):Ca(v.coords,na*da);T+=ma*G}return v.coords.length?v:null};f.getBoundsOptimizedGeometry=function(v,G,Q,T){if(K.isNone(G)||!G.coords||!G.coords.length)return null;Q=n(Q,T);let fa=T=Number.POSITIVE_INFINITY,ka=Number.NEGATIVE_INFINITY,na=Number.NEGATIVE_INFINITY;if(G&&G.coords){G=G.coords;for(let ra=0;ra<G.length;ra+=Q){const sa=G[ra],aa=G[ra+1];T=Math.min(T,sa);ka=Math.max(ka,sa);fa=Math.min(fa,aa);na=Math.max(na,aa)}}v[0]=T;v[1]=fa;v[2]=
ka;v[3]=na;return v};f.getQuantizedArea=function(v,G){const {coords:Q,lengths:T}=v;let fa=v=0;for(let ka=0;ka<T.length;ka++){const na=T[ka];fa+=xa(Q,v,na,G);v+=na}return Math.abs(fa)};f.getQuantizedBoundsOptimizedGeometry=function(v,G,Q,T){Q=n(Q,T);const {lengths:fa,coords:ka}=G;T=G=Number.POSITIVE_INFINITY;let na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY,sa=0;for(const aa of fa){let da=ka[sa],ma=ka[sa+1];G=Math.min(da,G);T=Math.min(ma,T);na=Math.max(da,na);ra=Math.max(ma,ra);sa+=Q;for(let ya=
1;ya<aa;ya++,sa+=Q){const Da=ka[sa],Ga=ka[sa+1];da+=Da;ma+=Ga;0>Da&&(G=Math.min(G,da));0<Da&&(na=Math.max(na,da));0>Ga?T=Math.min(T,ma):0<Ga&&(ra=Math.max(ra,ma))}}v[0]=G;v[1]=T;v[2]=na;v[3]=ra;return v};f.getSignedQuantizedRingArea=xa;f.quantizeOptimizedFeatureSet=function(v,G){const {geometryType:Q,features:T,hasM:fa,hasZ:ka}=G;if(!v)return G;for(let na=0;na<T.length;na++){const ra=T[na],sa=ra.weakClone();sa.geometry=new m;ba(sa.geometry,ra.geometry,fa,ka,Q,v);ra.centroid&&(sa.centroid=new m,ba(sa.centroid,
ra.centroid,fa,ka,"esriGeometryPoint",v));T[na]=sa}G.transform=v;return G};f.quantizeOptimizedGeometry=ba;f.quantizeX=N;f.quantizeY=Y;f.removeCollinearVectices=function(v,G,Q,T,fa){if(!G||!G.coords||!G.coords.length)return null;Q=La[Q];const {coords:ka,lengths:na}=G;G=w(T,fa,T,fa);T=n(T,fa);let ra=fa=0,sa=0,aa=0;for(const ya of na){ra=aa;G(v.coords,ka,ra,fa,ka[fa],ka[fa+1]);fa+=T;var da=ka[fa];let Da=ka[fa+1],Ga=da,Ha=Da;var ma=Da/da;ra+=T;G(v.coords,ka,ra,fa,Ga,Ha);fa+=T;for(let Fa=2;Fa<ya;Fa++){da=
ka[fa];Da=ka[fa+1];const Ka=Da/da,ta=ma===Ka||!isFinite(ma)&&!isFinite(Ka);ma=ta&&isFinite(Ka)?0<=ma&&0<=Ka||0>=ma&&0>=Ka:0<=Ha&&0<=Da||0>=Ha&&0>=Da;ta&&ma?(Ga+=da,Ha+=Da):(Ga=da,Ha=Da,ra+=T);G(v.coords,ka,ra,fa,Ga,Ha);fa+=T;ma=Ka}ra+=T;da=(ra-aa)/T;da>=Q&&(v.lengths[sa]=da,aa=ra,sa++)}v.coords.length>aa&&(v.coords.length=aa);v.lengths.length>sa&&(v.lengths.length=sa);return v.coords.length&&v.lengths.length?v:null};f.removeZMValues=function(v,G,Q,T,fa,ka){Ba(v);v.lengths.push(...G.lengths);if(Q===
fa&&T===ka)for(var na=0;na<G.coords.length;na++)v.coords.push(G.coords[na]);else for(na=n(Q,T),Q=w(Q,T,fa,ka),G=G.coords,T=0;T<G.length;T+=na)Q(v.coords,G,v.coords.length,T,G[T],G[T+1]);return v};f.unquantizeOptimizedFeatureSet=function(v){const {transform:G,features:Q,hasM:T,hasZ:fa}=v;if(!G)return v;for(const ka of Q)K.isSome(ka.geometry)&&wa(ka.geometry,ka.geometry,T,fa,G),K.isSome(ka.centroid)&&wa(ka.centroid,ka.centroid,T,fa,G);v.transform=null;return v};f.unquantizeOptimizedGeometry=wa;f.unquantizeValue=
I;f.unquantizeX=function(v,G){return I(v,G,0)};f.unquantizeY=function(v,G){return I(v,-G,1)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(f,c,ha){let K=function(){function z(y=null,m={},n,w){this.geometry=y;this.attributes=m;this.centroid=n;this.objectId=w;this.geohashY=this.geohashX=this.displayId=0}z.prototype.weakClone=
function(){const y=new z(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y};return z}(),r=function(z){function y(){return z.apply(this,arguments)||this}c._inheritsLoose(y,z);return y}(K);f.OptimizedFeature=K;f.OptimizedFeatureWithGeometry=r;f.hasGeometry=function(z){return!(ha.isNone(z.geometry)||!z.geometry.coords||!z.geometry.coords.length)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function f(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}f.prototype.weakClone=function(){const c=new f;c.objectIdFieldName=this.objectIdFieldName;
c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c};return f}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(f){return function(){function c(K=[],r=[],z=!1){this.lengths=K??[];this.coords=r??[];this.hasIndeterminateRingOrder=z}c.fromRect=function(K){const [r,z,y,m]=K;K=y-r;const n=m-z;return new c([5],[r,z,K,0,0,n,-K,0,0,-n])};var ha=c.prototype;ha.forEachVertex=function(K){let r=0;this.lengths.length||K(this.coords[0],this.coords[1]);for(let z=0;z<this.lengths.length;z++){const y=this.lengths[z];for(let m=0;m<y;m++)K(this.coords[2*(m+r)],this.coords[2*(m+r)+1]);r+=y}};ha.clone=function(K){return K?
(K.set(this.coords),new c(this.lengths.slice(),K,this.hasIndeterminateRingOrder)):new c(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};f._createClass(c,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((K,r)=>K+r)}}]);return c}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(f){f.findLastObjectIdFromFeatures=
function(c,ha){let K=0;for(const r of ha)ha=r.attributes?.[c],"number"===typeof ha&&isFinite(ha)&&(K=Math.max(K,ha));return K};f.initialObjectId=1;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(f,c,ha,K,r,z,y,m,n,w){return function(){function N(I){this.geometryInfo=I;this._boundsStore=new n.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new ha;this.featureAdapter=w.optimizedFeatureQueryEngineAdapter}var Y=N.prototype;Y.add=function(I){this._add(I);this._emitChanged()};Y.addMany=function(I){for(const k of I)this._add(k);this._emitChanged()};Y.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};Y.removeById=function(I){I=
this._featuresById.get(I);if(!I)return null;this._remove(I);this._emitChanged();return I};Y.removeManyById=function(I){this._boundsStore.invalidateIndex();for(const k of I)(I=this._featuresById.get(k))&&this._remove(I);this._emitChanged()};Y.forEachBounds=function(I,k,H){for(const d of I)(I=this._boundsStore.get(d.objectId))&&k(z.fromRect(H,I))};Y.getFeature=function(I){return this._featuresById.get(I)};Y.has=function(I){return this._featuresById.has(I)};Y.toArray=function(){return Array.from(this._featuresById.values())};
Y.forEach=function(I){this._featuresById.forEach(k=>I(k))};Y.forEachInBounds=function(I,k){this._boundsStore.forEachInBounds(I,H=>{k(this._featuresById.get(H))})};Y.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};Y.sweep=function(){let I=!1;this._featuresById.forEach((k,H)=>{this._markedIds.has(H)||(I=!0,this._remove(k))});this._markedIds.clear();I&&this._emitChanged()};Y._emitChanged=function(){this.events.emit("changed",void 0)};Y._add=function(I){if(I){var k=
I.objectId;if(null==k)K.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature","feature id is missing",{feature:I}));else{var H=this._featuresById.get(k);this._markedIds.add(k);if(H){I.displayId=H.displayId;var d=this._boundsStore.get(k);this._boundsStore.delete(k)}else if(r.isSome(this.onFeatureAdd))this.onFeatureAdd(I);!r.isNone(I.geometry)&&I.geometry.coords&&I.geometry.coords.length?(d=m.getBoundsOptimizedGeometry(r.isSome(d)?d:y.create(),I.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),r.isSome(d)&&this._boundsStore.set(k,d)):this._boundsStore.set(k,null);this._featuresById.set(k,I)}}};Y._remove=function(I){if(r.isSome(this.onFeatureRemove))this.onFeatureRemove(I);this._markedIds.delete(I.objectId);this._boundsStore.delete(I.objectId);this._featuresById.delete(I.objectId);return I};f._createClass(N,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let I=0;this._featuresById.forEach(k=>{r.isSome(k.geometry)&&k.geometry.coords&&(I+=k.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:I/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return N}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(f,c,ha,K,r){let z=function(){function y(){this._emitter=new y.EventEmitter(this)}var m=y.prototype;m.emit=function(n,w){return this._emitter.emit(n,w)};m.on=function(n,w){return this._emitter.on(n,w)};m.once=function(n,w){return this._emitter.once(n,w)};m.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return y}();(function(y){let m=function(){function w(Y=null){this._target=Y;this._listenersMap=
null}var N=w.prototype;N.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};N.emit=function(Y,I){Y=this._listenersMap&&this._listenersMap.get(Y);if(!Y)return!1;const k=this._target||this;[...Y].forEach(H=>{H.call(k,I)});return 0<Y.length};N.on=function(Y,I){if(Array.isArray(Y)){var k=Y.map(H=>this.on(H,I));return K.handlesGroup(k)}if(Y.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);k=this._listenersMap.get(Y)||[];k.push(I);this._listenersMap.set(Y,k);return{remove:()=>{const H=this._listenersMap&&this._listenersMap.get(Y)||[],d=H.indexOf(I);0<=d&&H.splice(d,1)}}};N.once=function(Y,I){const k=this.on(Y,H=>{k.remove();I.call(null,H)});return k};N.hasEventListener=function(Y){Y=this._listenersMap&&this._listenersMap.get(Y);return null!=Y&&0<Y.length};return w}();y.EventEmitter=m;y.EventedMixin=w=>{w=function(N){function Y(){var k=N.apply(this,arguments)||
this;k._emitter=new m;return k}f._inheritsLoose(Y,N);var I=Y.prototype;I.destroy=function(){this._emitter.clear()};I.emit=function(k,H){return this._emitter.emit(k,H)};I.on=function(k,H){return this._emitter.on(k,H)};I.once=function(k,H){return this._emitter.once(k,H)};I.hasEventListener=function(k){return this._emitter.hasEventListener(k)};return Y}(w);return w=c.__decorate([r.subclass("esri.core.Evented")],w)};let n=function(w){function N(){var I=w.apply(this,arguments)||this;I._emitter=new z.EventEmitter(f._assertThisInitialized(I));
return I}f._inheritsLoose(N,w);var Y=N.prototype;Y.destroy=function(){this._emitter.clear()};Y.emit=function(I,k){return this._emitter.emit(I,k)};Y.on=function(I,k){return this._emitter.on(I,k)};Y.once=function(I,k){return this._emitter.once(I,k)};Y.hasEventListener=function(I){return this._emitter.hasEventListener(I)};return N}(ha);n=c.__decorate([r.subclass("esri.core.Evented")],n);y.EventedAccessor=n})(z||(z={}));return z})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe",
"../Extent","./aaBoundingRect"],function(f,c,ha,K){function r(d=k){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function z(d,l,L,O,U,V,g=r()){g[0]=d;g[1]=l;g[2]=L;g[3]=O;g[4]=U;g[5]=V;return g}function y(d){return d[0]>=d[3]?0:d[3]-d[0]}function m(d){return d[1]>=d[4]?0:d[4]-d[1]}function n(d){return d[2]>=d[5]?0:d[5]-d[2]}function w(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function N(d,l){d[0]=l[0];d[1]=l[1];
d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function Y(d){return 6===d.length}const I=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],k=[0,0,0,0,0,0],H=r();f.NEGATIVE_INFINITY=I;f.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];f.ZERO=k;f.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};f.center=function(d,l=[0,0,0]){l[0]=d[0]+y(d)/2;l[1]=d[1]+m(d)/2;l[2]=d[2]+n(d)/2;return l};f.contains=function(d,l){return l[0]>=d[0]&&l[1]>=
d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};f.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};f.containsPointWithMargin=function(d,l,L){return l[0]>=d[0]-L&&l[1]>=d[1]-L&&l[2]>=d[2]-L&&l[0]<=d[3]+L&&l[1]<=d[4]+L&&l[2]<=d[5]+L};f.create=r;f.depth=m;f.diameter=function(d){const l=y(d),L=n(d);d=m(d);return Math.sqrt(l*l+L*L+d*d)};f.empty=function(d){return d?N(d,I):r(I)};f.equals=function(d,l,L){if(c.isNone(d)||c.isNone(l))return d===
l;if(!Y(d)||!Y(l))return!1;if(L)for(let O=0;O<d.length;O++){if(!L(d[O],l[O]))return!1}else for(L=0;L<d.length;L++)if(d[L]!==l[L])return!1;return!0};f.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};f.expandWithBuffer=function(d,l,L=0,O=l.length/3){let U=d[0],V=d[1],g=d[2],p=d[3],x=d[4],B=d[5];for(let Z=0;Z<O;Z++)U=Math.min(U,l[L+3*Z]),V=Math.min(V,l[L+3*Z+1]),g=Math.min(g,
l[L+3*Z+2]),p=Math.max(p,l[L+3*Z]),x=Math.max(x,l[L+3*Z+1]),B=Math.max(B,l[L+3*Z+2]);d[0]=U;d[1]=V;d[2]=g;d[3]=p;d[4]=x;d[5]=B};f.expandWithNestedArray=function(d,l,L){const O=l.length;let U=d[0],V=d[1],g=d[2],p=d[3],x=d[4],B=d[5];if(L)for(L=0;L<O;L++){var Z=l[L];U=Math.min(U,Z[0]);V=Math.min(V,Z[1]);g=Math.min(g,Z[2]);p=Math.max(p,Z[0]);x=Math.max(x,Z[1]);B=Math.max(B,Z[2])}else for(L=0;L<O;L++)Z=l[L],U=Math.min(U,Z[0]),V=Math.min(V,Z[1]),p=Math.max(p,Z[0]),x=Math.max(x,Z[1]);d[0]=U;d[1]=V;d[2]=
g;d[3]=p;d[4]=x;d[5]=B};f.expandWithOffset=function(d,l,L,O){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+L);d[4]=Math.max(d[4],d[4]+L);d[2]=Math.min(d[2],d[2]+O);d[5]=Math.max(d[5],d[5]+O)};f.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};f.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],
l[1]);d[5]=Math.max(d[5],l[2])};f.fromExtent=function(d,l=r()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.hasZ?d.zmin:-Infinity;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.hasZ?d.zmax:Infinity;return l};f.fromMinMax=function(d,l,L=r()){L[0]=d[0];L[1]=d[1];L[2]=d[2];L[3]=l[0];L[4]=l[1];L[5]=l[2];return L};f.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};f.fromValues=z;f.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};f.getMin=
function(d,l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};f.height=n;f.intersects=w;f.intersectsClippingArea=function(d,l){return c.isNone(l)?!0:w(d,l)};f.is=Y;f.isPoint=function(d){return 0===y(d)&&0===m(d)&&0===n(d)};f.maximumDimension=function(d){return Math.max(y(d),n(d),m(d))};f.offset=function(d,l,L,O,U=d){U[0]=d[0]+l;U[1]=d[1]+L;U[2]=d[2]+O;U[3]=d[3]+l;U[4]=d[4]+L;U[5]=d[5]+O;return U};f.scale=function(d,l,L=d){const O=d[0]+y(d)/2,U=d[1]+m(d)/2,V=d[2]+n(d)/2;L[0]=O+(d[0]-O)*l;L[1]=U+(d[1]-U)*l;
L[2]=V+(d[2]-V)*l;L[3]=O+(d[3]-O)*l;L[4]=U+(d[4]-U)*l;L[5]=V+(d[5]-V)*l;return L};f.set=N;f.setMax=function(d,l,L=d){L[3]=l[0];L[4]=l[1];L[5]=l[2];L!==d&&(L[0]=d[0],L[1]=d[1],L[2]=d[2]);return d};f.setMin=function(d,l,L=d){L[0]=l[0];L[1]=l[1];L[2]=l[2];L!==d&&(L[3]=d[3],L[4]=d[4],L[5]=d[5]);return L};f.size=function(d,l=[0,0,0]){l[0]=y(d);l[1]=m(d);l[2]=n(d);return l};f.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],
spatialReference:l}):new ha({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};f.toRect=function(d,l){l||(l=K.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};f.width=y;f.wrap=function(d,l,L,O,U,V){return z(d,l,L,O,U,V,H)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(f,c,ha,K,r){function z(k=
I){return[k[0],k[1],k[2],k[3]]}function y(k,H){k!==H&&(k[0]=H[0],k[1]=H[1],k[2]=H[2],k[3]=H[3]);return k}function m(k){return K.isNone(k)||k[0]>=k[2]?0:k[2]-k[0]}function n(k){return k[1]>=k[3]?0:k[3]-k[1]}function w(k,H,d){return H>=k[0]&&d>=k[1]&&H<=k[2]&&d<=k[3]}function N(k){return null!=k&&4===k.length}const Y=[Infinity,Infinity,-Infinity,-Infinity],I=[0,0,0,0];f.NEGATIVE_INFINITY=Y;f.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];f.UNIT=[0,0,1,1];f.ZERO=I;f.allFinite=function(k){for(let H=
0;4>H;H++)if(!isFinite(k[H]))return!1;return!0};f.area=function(k){return m(k)*n(k)};f.center=function(k,H=[0,0]){H[0]=(k[0]+k[2])/2;H[1]=(k[1]+k[3])/2;return H};f.clone=function(k){return[k[0],k[1],k[2],k[3]]};f.contains=function(k,H){return H[0]>=k[0]&&H[2]<=k[2]&&H[1]>=k[1]&&H[3]<=k[3]};f.containsPoint=function(k,H){return w(k,H[0],H[1])};f.containsPointObject=function(k,H){return w(k,H.x,H.y)};f.containsPointWithMargin=function(k,H,d){return H[0]>=k[0]-d&&H[1]>=k[1]-d&&H[0]<=k[2]+d&&H[1]<=k[3]+
d};f.containsXY=w;f.containsXYWithMargin=function(k,H,d,l){return H>=k[0]-l&&d>=k[1]-l&&H<=k[2]+l&&d<=k[3]+l};f.copy=y;f.create=z;f.distance=function(k,H){const d=(k[1]+k[3])/2,l=Math.max(Math.abs(H[0]-(k[0]+k[2])/2)-m(k)/2,0);k=Math.max(Math.abs(H[1]-d)-n(k)/2,0);return Math.sqrt(l*l+k*k)};f.empty=function(k){return k?y(k,Y):z(Y)};f.equals=function(k,H){return N(k)&&N(H)?k[0]===H[0]&&k[1]===H[1]&&k[2]===H[2]&&k[3]===H[3]:k===H};f.expand=function(k,H,d){if(K.isNone(H))y(d,k);else if("length"in H)if(N(H))d[0]=
Math.min(k[0],H[0]),d[1]=Math.min(k[1],H[1]),d[2]=Math.max(k[2],H[2]),d[3]=Math.max(k[3],H[3]);else{if(2===H.length||3===H.length)d[0]=Math.min(k[0],H[0]),d[1]=Math.min(k[1],H[1]),d[2]=Math.max(k[2],H[0]),d[3]=Math.max(k[3],H[1])}else switch(H.type){case "extent":d[0]=Math.min(k[0],H.xmin);d[1]=Math.min(k[1],H.ymin);d[2]=Math.max(k[2],H.xmax);d[3]=Math.max(k[3],H.ymax);break;case "point":d[0]=Math.min(k[0],H.x),d[1]=Math.min(k[1],H.y),d[2]=Math.max(k[2],H.x),d[3]=Math.max(k[3],H.y)}};f.expandPointInPlace=
function(k,H){H[0]<k[0]&&(k[0]=H[0]);H[0]>k[2]&&(k[2]=H[0]);H[1]<k[1]&&(k[1]=H[1]);H[1]>k[3]&&(k[3]=H[1])};f.expandWithNestedArray=function(k,H,d=k){const l=H.length;let L=k[0],O=k[1],U=k[2];k=k[3];for(let V=0;V<l;V++){const g=H[V];L=Math.min(L,g[0]);O=Math.min(O,g[1]);U=Math.max(U,g[0]);k=Math.max(k,g[1])}d[0]=L;d[1]=O;d[2]=U;d[3]=k;return d};f.fromExtent=function(k,H=z()){H[0]=k.xmin;H[1]=k.ymin;H[2]=k.xmax;H[3]=k.ymax;return H};f.fromValues=function(k,H,d,l,L=z()){L[0]=k;L[1]=H;L[2]=d;L[3]=l;return L};
f.height=n;f.intersection=function(k,H,d){if(K.isNone(H))return y(d,k);const l=H[0],L=H[1],O=H[2];H=H[3];d[0]=ha.clamp(k[0],l,O);d[1]=ha.clamp(k[1],L,H);d[2]=ha.clamp(k[2],l,O);d[3]=ha.clamp(k[3],L,H);return d};f.intersects=function(k,H){return Math.max(H[0],k[0])<=Math.min(H[2],k[2])&&Math.max(H[1],k[1])<=Math.min(H[3],k[3])};f.intersectsSegment=function(k,H,d){const l=k[0],L=k[1],O=k[2];k=k[3];const {x:U,y:V}=H,{x:g,y:p}=d;var x=(Z,A)=>0>(p-V)*Z+(U-g)*A+(g*V-U*p);H=x(l,k);d=x(O,k);const B=x(O,L);
x=x(l,L);return H===d&&d===B&&B===x&&x===H||U<l&&g<l||U>O&&g>O||V>k&&p>k||V<L&&p<L?!1:!0};f.intersectsSphere=function(k,H){const d=H[3];var l=Math.abs(H[0]-.5*(k[0]+k[2]));const L=.5*(k[2]-k[0]);if(l>d+L)return!1;var O=.5*(k[3]-k[1]);k=Math.abs(H[1]-.5*(k[1]+k[3]));if(k>d+O)return!1;if(l<L||k<O)return!0;l-=L;O=k-O;return l*l+O*O<=d*d};f.is=N;f.isPoint=function(k){return(0===m(k)||!isFinite(k[0]))&&(0===n(k)||!isFinite(k[1]))};f.offset=function(k,H,d,l=k){l[0]=k[0]+H;l[1]=k[1]+d;l[2]=k[2]+H;l[3]=k[3]+
d;return l};f.pad=function(k,H,d=k){d[0]=k[0]-H;d[1]=k[1]-H;d[2]=k[2]+H;d[3]=k[3]+H;return d};f.setMax=function(k,H,d=k){d[2]=H[0];d[3]=H[1];d!==k&&(d[0]=k[0],d[1]=k[1]);return k};f.setMin=function(k,H,d=k){d[0]=H[0];d[1]=H[1];d!==k&&(d[2]=k[2],d[3]=k[3]);return d};f.size=function(k,H){H[0]=k[2]-k[0];H[1]=k[3]-k[1]};f.toExtent=function(k,H){return new r({xmin:k[0],ymin:k[1],xmax:k[2],ymax:k[3],spatialReference:H})};f.width=m;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(f,c,ha,K,r){function z(n,w,N){y.minX=w[0];y.minY=w[1];y.maxX=w[2];y.maxY=w[3];n.search(y,N)}const y={minX:0,minY:0,maxX:0,maxY:0};let m=function(){function n(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new K.PooledRBush(9,
ha("esri-csp-restrictions")?N=>({minX:N[0],minY:N[1],maxX:N[2],maxY:N[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const N=Array(this._idByBounds.size);let Y=0;this._idByBounds.forEach((I,k)=>{N[Y++]=k});this._indexInvalid=!1;this._index.clear();this._index.load(N)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(N=>this._idByBounds.has(N))),this._boundsToLoad.length=0)}}var w=n.prototype;w.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=
0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};w.delete=function(N){const Y=this._boundsById.get(N);this._boundsById.delete(N);Y&&(this._idByBounds.delete(Y),this._indexInvalid||this._index.remove(Y))};w.forEachInBounds=function(N,Y){this._loadIndex();z(this._index,N,I=>Y(this._idByBounds.get(I)))};w.get=function(N){return this._boundsById.get(N)};w.has=function(N){return this._boundsById.has(N)};w.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=
0)};w.set=function(N,Y){if(!this._indexInvalid){const I=this._boundsById.get(N);I&&(this._index.remove(I),this._idByBounds.delete(I))}this._boundsById.set(N,Y);Y&&(this._idByBounds.set(Y,N),this._indexInvalid||(this._boundsToLoad.push(Y),5E4<this._boundsToLoad.length&&this._loadIndex()))};c._createClass(n,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const N=r.empty();for(const Y of this._boundsById.values())Y&&(N[0]=Math.min(Y[0],N[0]),N[1]=Math.min(Y[1],N[1]),N[2]=Math.max(Y[2],
N[2]),N[3]=Math.max(Y[3],N[3]));return N}},{key:"valid",get:function(){return!this._indexInvalid}}]);return n}();f.BoundsStore=m;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(f,c,ha,K,r,z){function y(B,Z){m(B,0,B.children.length,Z,B)}function m(B,Z,A,C,J){J||
(J=new p([]));J.minX=Infinity;J.minY=Infinity;J.maxX=-Infinity;J.maxY=-Infinity;for(let E=Z,t;E<A;E++)t=B.children[E],n(J,B.leaf?C(t):t);return J}function n(B,Z){B.minX=Math.min(B.minX,Z.minX);B.minY=Math.min(B.minY,Z.minY);B.maxX=Math.max(B.maxX,Z.maxX);B.maxY=Math.max(B.maxY,Z.maxY)}function w(B,Z){return B.minX-Z.minX}function N(B,Z){return B.minY-Z.minY}function Y(B){return(B.maxX-B.minX)*(B.maxY-B.minY)}function I(B){return B.maxX-B.minX+(B.maxY-B.minY)}function k(B,Z){return B.minX<=Z.minX&&
B.minY<=Z.minY&&Z.maxX<=B.maxX&&Z.maxY<=B.maxY}function H(B,Z){return Z.minX<=B.maxX&&Z.minY<=B.maxY&&Z.maxX>=B.minX&&Z.maxY>=B.minY}function d(B,Z,A,C,J){for(Z=[Z,A];Z.length;){A=K.assumeNonNull(Z.pop());const E=K.assumeNonNull(Z.pop());if(A-E<=C)continue;const t=E+Math.ceil((A-E)/C/2)*C;z.quickselect(B,t,E,A,J);Z.push(E,t,t,A)}}let l=function(){function B(A=9,C){this._compareMinX=w;this._compareMinY=N;this._toBBox=J=>J;this._maxEntries=Math.max(4,A||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));
C&&("function"===typeof C?this._toBBox=C:this._initFormat(C));this.clear()}var Z=B.prototype;Z.destroy=function(){this.clear();L.prune();O.prune();U.prune();V.prune()};Z.all=function(A){this._all(this._data,A)};Z.search=function(A,C){let J=this._data;const E=this._toBBox;if(H(A,J))for(L.clear();J;){for(let t=0,F=J.children.length;t<F;t++){const q=J.children[t],R=J.leaf?E(q):q;H(A,R)&&(J.leaf?C(q):k(A,R)?this._all(q,C):L.push(q))}J=L.pop()}};Z.collides=function(A){let C=this._data;const J=this._toBBox;
if(!H(A,C))return!1;for(L.clear();C;){for(let E=0,t=C.children.length;E<t;E++){const F=C.children[E],q=C.leaf?J(F):F;if(H(A,q)){if(C.leaf||k(A,q))return!0;L.push(F)}}C=L.pop()}return!1};Z.load=function(A){if(!A.length)return this;if(A.length<this._minEntries){for(let C=0,J=A.length;C<J;C++)this.insert(A[C]);return this}A=this._build(A.slice(0,A.length),0,A.length-1,0);if(this._data.children.length)if(this._data.height===A.height)this._splitRoot(this._data,A);else{if(this._data.height<A.height){const C=
this._data;this._data=A;A=C}this._insert(A,this._data.height-A.height-1,!0)}else this._data=A;return this};Z.insert=function(A){A&&this._insert(A,this._data.height-1);return this};Z.clear=function(){this._data=new p([]);return this};Z.remove=function(A){if(!A)return this;let C=this._data,J=null,E=0,t=!1,F;const q=this._toBBox(A);U.clear();for(V.clear();C||0<U.length;){C||(C=K.assumeNonNull(U.pop()),J=U.data[U.length-1],E=V.pop()??0,t=!0);if(C.leaf&&(F=ha.indexOf(C.children,A,C.children.length,C.indexHint),
-1!==F)){C.children.splice(F,1);U.push(C);this._condense(U);break}t||C.leaf||!k(C,q)?J?(E++,C=J.children[E],t=!1):C=null:(U.push(C),V.push(E),E=0,J=C,C=C.children[0])}return this};Z.toJSON=function(){return this._data};Z.fromJSON=function(A){this._data=A;return this};Z._all=function(A,C){for(O.clear();A;){if(!0===A.leaf)for(const J of A.children)C(J);else O.pushArray(A.children);A=O.pop()??null}};Z._build=function(A,C,J,E){var t=J-C+1,F=this._maxEntries;if(t<=F)return A=new p(A.slice(C,J+1)),y(A,
this._toBBox),A;E||(E=Math.ceil(Math.log(t)/Math.log(F)),F=Math.ceil(t/F**(E-1)));const q=new x([]);q.height=E;t=Math.ceil(t/F);F=t*Math.ceil(Math.sqrt(F));for(d(A,C,J,F,this._compareMinX);C<=J;C+=F){const R=Math.min(C+F-1,J);d(A,C,R,t,this._compareMinY);for(let W=C;W<=R;W+=t)q.children.push(this._build(A,W,Math.min(W+t-1,R),E-1))}y(q,this._toBBox);return q};Z._chooseSubtree=function(A,C,J,E){for(;;){E.push(C);if(!0===C.leaf||E.length-1===J)break;let t=Infinity,F=Infinity,q=void 0;for(let R=0,W=C.children.length;R<
W;R++){const P=C.children[R],ja=Y(P),ba=(Math.max(P.maxX,A.maxX)-Math.min(P.minX,A.minX))*(Math.max(P.maxY,A.maxY)-Math.min(P.minY,A.minY))-ja;ba<F?(F=ba,t=ja<t?ja:t,q=P):ba===F&&ja<t&&(t=ja,q=P)}C=q||C.children[0]}return C};Z._insert=function(A,C,J){var E=this._toBBox;J=J?A:E(A);U.clear();E=this._chooseSubtree(J,this._data,C,U);E.children.push(A);for(n(E,J);0<=C;)if(U.data[C].children.length>this._maxEntries)this._split(U,C),C--;else break;this._adjustParentBBoxes(J,U,C)};Z._split=function(A,C){const J=
A.data[C];var E=J.children.length;const t=this._minEntries;this._chooseSplitAxis(J,t,E);(E=this._chooseSplitIndex(J,t,E))?(E=J.children.splice(E,J.children.length-E),E=J.leaf?new p(E):new x(E),E.height=J.height,y(J,this._toBBox),y(E,this._toBBox),C?A.data[C-1].children.push(E):this._splitRoot(J,E)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};Z._splitRoot=function(A,C){this._data=new x([A,C]);this._data.height=A.height+1;y(this._data,this._toBBox)};Z._chooseSplitIndex=
function(A,C,J){let E,t,F=void 0;E=t=Infinity;for(let R=C;R<=J-C;R++){var q=m(A,0,R,this._toBBox);const W=m(A,R,J,this._toBBox),P=Math.max(0,Math.min(q.maxX,W.maxX)-Math.max(q.minX,W.minX))*Math.max(0,Math.min(q.maxY,W.maxY)-Math.max(q.minY,W.minY));q=Y(q)+Y(W);P<E?(E=P,F=R,t=q<t?q:t):P===E&&q<t&&(t=q,F=R)}return F};Z._chooseSplitAxis=function(A,C,J){const E=A.leaf?this._compareMinX:w,t=A.leaf?this._compareMinY:N,F=this._allDistMargin(A,C,J,E);C=this._allDistMargin(A,C,J,t);F<C&&A.children.sort(E)};
Z._allDistMargin=function(A,C,J,E){A.children.sort(E);E=this._toBBox;var t=m(A,0,C,E);const F=m(A,J-C,J,E);let q=I(t)+I(F);for(let R=C;R<J-C;R++){const W=A.children[R];n(t,A.leaf?E(W):W);q+=I(t)}for(J=J-C-1;J>=C;J--)t=A.children[J],n(F,A.leaf?E(t):t),q+=I(F);return q};Z._adjustParentBBoxes=function(A,C,J){for(;0<=J;J--)n(C.data[J],A)};Z._condense=function(A){for(let C=A.length-1;0<=C;C--){const J=A.data[C];if(0===J.children.length)if(0<C){const E=A.data[C-1],t=E.children;t.splice(ha.indexOf(t,J,t.length,
E.indexHint),1)}else this.clear();else y(J,this._toBBox)}};Z._initFormat=function(A){const C=["return a"," - b",";"];this._compareMinX=new Function("a","b",C.join(A[0]));this._compareMinY=new Function("a","b",C.join(A[1]));this._toBBox=new Function("a","return {minX: a"+A[0]+", minY: a"+A[1]+", maxX: a"+A[2]+", maxY: a"+A[3]+"};")};return B}();const L=new r,O=new r,U=new r,V=new r({deallocator:void 0});r=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let g=function(B){function Z(){var A=
B.apply(this,arguments)||this;A.height=1;A.indexHint=new ha.PositionHint;return A}c._inheritsLoose(Z,B);return Z}(r),p=function(B){function Z(A){var C=B.call(this)||this;C.children=A;C.leaf=!0;return C}c._inheritsLoose(Z,B);return Z}(g),x=function(B){function Z(A){var C=B.call(this)||this;C.children=A;C.leaf=!1;return C}c._inheritsLoose(Z,B);return Z}(g);f.BBox=r;f.PooledRBush=l;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],
function(f){var c={exports:{}};(function(ha){(function(K){K=K();void 0!==K&&(ha.exports=K)})(function(){function K(y,m,n,w,N){for(;w>n;){if(600<w-n){var Y=w-n+1,I=m-n+1,k=Math.log(Y),H=.5*Math.exp(2*k/3);k=.5*Math.sqrt(k*H*(Y-H)/Y)*(0>I-Y/2?-1:1);K(y,m,Math.max(n,Math.floor(m-I*H/Y+k)),Math.min(w,Math.floor(m+(Y-I)*H/Y+k)),N)}Y=y[m];I=n;H=w;r(y,n,m);for(0<N(y[w],Y)&&r(y,n,w);I<H;){r(y,I,H);I++;for(H--;0>N(y[I],Y);)I++;for(;0<N(y[H],Y);)H--}0===N(y[n],Y)?r(y,n,H):(H++,r(y,H,w));H<=m&&(n=H+1);m<=H&&
(w=H-1)}}function r(y,m,n){var w=y[m];y[m]=y[n];y[n]=w}function z(y,m){return y<m?-1:y>m?1:0}return function(y,m,n,w,N){K(y,m,n||0,w||y.length-1,N||z)}})})(c);f.quickselect=c.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(f,c,ha,K,r){f.optimizedFeatureQueryEngineAdapter={getObjectId(z){return z.objectId},getAttributes(z){return z.attributes},getAttribute(z,
y){return z.attributes[y]},cloneWithGeometry(z,y){return new K.OptimizedFeature(y,z.attributes,null,z.objectId)},getGeometry(z){return z.geometry},getCentroid(z,y){c.isNone(z.centroid)&&(z.centroid=ha.getCentroidOptimizedGeometry(new r,z.geometry,y.hasZ,y.hasM));return z.centroid}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],function(f,c){function ha(r,z,y,m,n,w,N=1){w=
n?w?4:3:w?3:2;let Y=y,I=y+w,k=0,H=0,d=y=0,l=0;for(let L=0,O=m-1;L<O;L++,Y+=w,I+=w){m=z[Y];const U=z[Y+1],V=z[Y+2],g=z[I],p=z[I+1],x=z[I+2];let B=m*p-g*U;d+=B;k+=(m+g)*B;H+=(U+p)*B;n&&(B=m*x-g*V,y+=(V+x)*B,l+=B);m<r[0]&&(r[0]=m);m>r[1]&&(r[1]=m);U<r[2]&&(r[2]=U);U>r[3]&&(r[3]=U);n&&(V<r[4]&&(r[4]=V),V>r[5]&&(r[5]=V))}0<d*N&&(d*=-1);0<l*N&&(l*=-1);if(!d)return null;r=[k,H,.5*d];n&&(r[3]=y,r[4]=.5*l);return r}function K(r,z,y,m,n){n=m?n?4:3:n?3:2;let w=z,N=z+n,Y=0,I=0,k=0,H=0;for(let O=0,U=y-1;O<U;O++,
w+=n,N+=n){var d=r[w];const V=r[w+1],g=r[w+2],p=r[N],x=r[N+1],B=r[N+2];if(m){var l=p-d;var L=x-V;const Z=B-g;l=Math.sqrt(l*l+L*L+Z*Z)}else l=p-d,L=x-V,l=Math.sqrt(l*l+L*L);l&&(Y+=l,m?(d=[d+.5*(p-d),V+.5*(x-V),g+.5*(B-g)],I+=l*d[0],k+=l*d[1],H+=l*d[2]):(d=[d+.5*(p-d),V+.5*(x-V)],I+=l*d[0],k+=l*d[1]))}return 0<Y?m?[I/Y,k/Y,H/Y]:[I/Y,k/Y]:0<y?m?[r[z],r[z+1],r[z+2]]:[r[z],r[z+1]]:null}f.getCentroidOptimizedGeometry=function(r,z,y,m,n){if(c.isNone(z)||!z.lengths.length)return null;const w="upperLeft"===
n?.originPosition?-1:1;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);n=r.coords;const N=[],Y=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:k}=z,H=y?m?4:3:m?3:2;let d=0;for(var l of I){const L=ha(Y,k,d,l,y,m,w);L&&N.push(L);d+=l*H}N.sort((L,O)=>
{let U=w*L[2]-w*O[2];0===U&&y&&(U=L[4]-O[4]);return U});N.length&&(l=6*N[0][2],n[0]=N[0][0]/l,n[1]=N[0][1]/l,y&&(l=6*N[0][4],n[2]=0!==l?N[0][3]/l:0),n[0]<Y[0]||n[0]>Y[1]||n[1]<Y[2]||n[1]>Y[3]||y&&(n[2]<Y[4]||n[2]>Y[5]))&&(n.length=0);if(!n.length)if(z=z.lengths[0]?K(k,0,I[0],y,m):null)n[0]=z[0],n[1]=z[1],y&&2<z.length&&(n[2]=z[2]);else return null;return r};f.lineCentroid=K;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(f,c,ha,K,r,z,y){function m(d,l){if(!l)return null;if("x"in l){var L={x:0,y:0};[L.x,L.y]=d(l.x,l.y,Y);null!=l.z&&(L.z=l.z);null!=l.m&&(L.m=l.m);return L}return"xmin"in l?(L={xmin:0,ymin:0,xmax:0,ymax:0},[L.xmin,L.ymin]=d(l.xmin,l.ymin,Y),[L.xmax,L.ymax]=d(l.xmax,l.ymax,Y),l.hasZ&&(L.zmin=l.zmin,L.zmax=l.zmax,L.hasZ=!0),l.hasM&&(L.mmin=l.mmin,L.mmax=l.mmax,L.hasM=!0),L):"rings"in l?{rings:n(l.rings,d),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:n(l.paths,d),hasM:l.hasM,hasZ:l.hasZ}:"points"in
l?{points:w(l.points,d),hasM:l.hasM,hasZ:l.hasZ}:null}function n(d,l){const L=[];for(const O of d)L.push(w(O,l));return L}function w(d,l){const L=[];for(const O of d)d=l(O[0],O[1],[0,0]),L.push(d),2<O.length&&d.push(O[2]),3<O.length&&d.push(O[3]);return L}function N(){N=c._asyncToGenerator(function*(d,l){d&&l&&(d=Array.isArray(d)?d.map(L=>ha.isSome(L.geometry)?L.geometry.spatialReference:null).filter(ha.isSome):[d],yield K.initializeProjection(d.map(L=>({source:L,dest:l}))))});return N.apply(this,
arguments)}const Y=[0,0],I=m.bind(null,y.lngLatToXY),k=m.bind(null,y.xyToLngLat),H=new (function(){function d(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var L=c._asyncToGenerator(function*(O,U,V){if(!(O&&O.length&&U&&V)||z.equals(U,V))return O;const g={geometries:O,inSpatialReference:U,outSpatialReference:V,resolve:null};this._jobs.push(g);return new Promise(p=>{g.resolve=p;null===this._timer&&(this._timer=setTimeout(this._process,10))})});
return function(O,U,V){return L.apply(this,arguments)}}();l._process=function(){this._timer=null;const L=this._jobs.shift();if(L){var {geometries:O,inSpatialReference:U,outSpatialReference:V,resolve:g}=L;y.canProject(U,V)?z.isWebMercator(V)?g(O.map(I)):g(O.map(k)):g(K.projectMany(r.jsonAdapter,O,U,V,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());f.checkProjectionSupport=function(d,l){return N.apply(this,arguments)};f.project=function(d,l,L,O){if(!d)return d;
L||(L=l,l=d.spatialReference);return z.isValid(l)&&z.isValid(L)&&!z.equals(l,L)?y.canProject(l,L)?(d=z.isWebMercator(L)?I(d):k(d),d.spatialReference=L,d):K.projectMany(r.jsonAdapter,[d],l,L,null,O)[0]:d};f.projectMany=function(d,l,L){return H.push(d,l,L)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I,k,H,d,l,L,O,U,V,g,p,x,B,Z,A){function C(){return!!gb&&d.isLoaded()}function J(M){z.isNone(Ya)&&(Ya=Promise.all([d.load(),(new Promise((ca,S)=>f(["../chunks/geometryEngineBase"],ca,S))).then(ca=>ca.geometryEngineBase),new Promise((ca,S)=>f(["./geometryAdapters/hydrated"],ca,S))]));return Ya.then(([,ca,{hydratedAdapter:S}])=>{y.throwIfAborted(M);nb=S;gb=ca.default;gb._enableProjection(d.pe);dc.notify()})}function E(M,ca,S=null,pa=null){return Array.isArray(M)?0===
M.length?[]:t(nb,M,M[0].spatialReference,ca,S,pa):t(nb,[M],M.spatialReference,ca,S,pa)[0]}function t(M,ca,S,pa,za=null,Aa=null){if(z.isNone(S)||z.isNone(pa))return ca;if(W(S,pa,za))return ca.map(Ia=>z.unwrap(ja(Ia,S,pa)));if(z.isNone(za)){const Ia=x.cacheKey(S,pa);void 0!==Eb[Ia]?za=Eb[Ia]:(za=q(S,pa,void 0),z.isNone(za)&&(za=new x),Eb[Ia]=za)}if(z.isNone(gb)||z.isNone(M))throw new Fb;return z.isSome(Aa)?gb._project(M,ca,S,pa,za,Aa):gb._project(M,ca,S,pa,za)}function F(M,ca){if(!C())for(const S of M)if(z.isSome(S)&&
!B.equals(S.spatialReference,ca)&&B.isValid(S.spatialReference)&&B.isValid(ca)&&!W(S.spatialReference,ca))return n.trackAccess(dc),{pending:J(),geometries:null};return{pending:null,geometries:M.map(S=>z.isNone(S)?null:B.equals(S.spatialReference,ca)?S:B.isValid(S.spatialReference)&&B.isValid(ca)?R(S,ca):null)}}function q(M,ca,S=null){if(z.isNone(M)||z.isNone(ca))return null;if(z.isNone(gb)||z.isNone(nb))throw new Fb;M=gb._getTransformation(nb,M,ca,S,S?.spatialReference);return null!==M?x.fromGE(M):
null}function R(M,ca){try{const S=E(M,ca);if(null==S)return null;"xmin"in M&&"xmin"in S&&(S.zmin=M.zmin,S.zmax=M.zmax);const pa=A.getGeometryZScaler(S.type,M.spatialReference,ca);z.isSome(pa)&&pa(S);return S}catch(S){if(!(S instanceof Fb))throw S;return null}}function W(M,ca,S){return S?!1:B.equals(M,ca)?!0:B.isValid(M)&&B.isValid(ca)&&!!a(M,ca,Tb)}function P(){P=ha._asyncToGenerator(function*(M,ca,S,pa){if(C())return y.waitTick(pa);if(Array.isArray(M))for(const {source:za,dest:Aa,geographicTransformation:Ia}of M){if(!W(za,
Aa,Ia))return J(pa)}else if(!W(M,ca,S))return J(pa);return y.waitTick(pa)});return P.apply(this,arguments)}function ja(M,ca,S){return M?"x"in M?ba(M,ca,new l,S,0):"xmin"in M?Ba(M,ca,new k,S,0):"rings"in M?xa(M,ca,new L,S,0):"paths"in M?wa(M,ca,new O,S,0):"points"in M?qa(M,ca,new H,S,0):null:null}function ba(M,ca,S,pa,za){Pa[0]=M.x;Pa[1]=M.y;const Aa=M.z;Pa[2]=void 0!==Aa?Aa:za;if(!Na(Pa,ca,0,Pa,pa,0,1))return null;S.x=Pa[0];S.y=Pa[1];S.spatialReference=pa;void 0===Aa?(S.z=void 0,S.hasZ=!1):(S.z=Pa[2],
S.hasZ=!0);void 0===M.m?(S.m=void 0,S.hasM=!1):(S.m=M.m,S.hasM=!0);return S}function qa(M,ca,S,pa,za){const {points:Aa,hasZ:Ia,hasM:Ma}=M;M=[];const Va=Aa.length,Ua=[];for(var Ta of Aa)Ua.push(Ta[0],Ta[1],Ia?Ta[2]:za);if(!Na(Ua,ca,0,Ua,pa,0,Va))return null;for(ca=0;ca<Va;++ca){za=3*ca;Ta=Ua[za];const cb=Ua[za+1];Ia&&Ma?M.push([Ta,cb,Ua[za+2],Aa[ca][3]]):Ia?M.push([Ta,cb,Ua[za+2]]):Ma?M.push([Ta,cb,Aa[ca][2]]):M.push([Ta,cb])}S.points=M;S.spatialReference=pa;S.hasZ=Ia;S.hasM=Ma;return S}function wa(M,
ca,S,pa,za){const {paths:Aa,hasZ:Ia,hasM:Ma}=M;M=[];if(!bb(Aa,Ia??!1,Ma??!1,ca,M,pa,za))return null;S.paths=M;S.spatialReference=pa;S.hasZ=Ia;S.hasM=Ma;return S}function xa(M,ca,S,pa,za){const {rings:Aa,hasZ:Ia,hasM:Ma}=M;M=[];if(!bb(Aa,Ia??!1,Ma??!1,ca,M,pa,za))return null;S.rings=M;S.spatialReference=pa;S.hasZ=Ia;S.hasM=Ma;return S}function Ba(M,ca,S,pa,za){const {xmin:Aa,ymin:Ia,xmax:Ma,ymax:Va,hasZ:Ua,hasM:Ta}=M;if(!Ca(Aa,Ia,Ua?M.zmin:za,ca,Pa,pa))return null;S.xmin=Pa[0];S.ymin=Pa[1];Ua&&(S.zmin=
Pa[2]);if(!Ca(Ma,Va,Ua?M.zmax:za,ca,Pa,pa))return null;S.xmax=Pa[0];S.ymax=Pa[1];Ua&&(S.zmax=Pa[2]);Ta&&(S.mmin=M.mmin,S.mmax=M.mmax);S.spatialReference=pa;return S}function Ca(M,ca,S,pa,za,Aa){Ra[0]=M;Ra[1]=ca;Ra[2]=S;return Na(Ra,pa,0,za,Aa,0,1)}function Ja(M,ca,S,pa){if(z.isNone(ca)||z.isNone(pa)||2>M.length)return!1;2===M.length&&(Ra[0]=M[0],Ra[1]=M[1],Ra[2]=0,M=Ra);return Na(M,ca,0,S,pa,0,1)}function La(M,ca,S){if(z.isNone(ca))return!1;ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(z.isNone(ca))return!1;
ca(M,0,Ra,0);S!==Ra&&(S[0]=Ra[0],S[1]=Ra[1],2<S.length&&(S[2]=Ra[2]));return!0}function Na(M,ca,S,pa,za,Aa,Ia=1){ca=a(ca,za,Tb);if(z.isNone(ca))return!1;if(ca===oa){if(M===pa&&S===Aa)return!0;Ia=S+3*Ia;for(let Ma=S,Va=Aa;Ma<Ia;Ma++,Va++)pa[Va]=M[Ma];return!0}Ia=S+3*Ia;for(let Ma=S,Va=Aa;Ma<Ia;Ma+=3,Va+=3)ca(M,Ma,pa,Va);return!0}function bb(M,ca,S,pa,za,Aa,Ia=0){const Ma=[];for(const Va of M)for(const Ua of Va)Ma.push(Ua[0],Ua[1],ca?Ua[2]:Ia);if(!Na(Ma,pa,0,Ma,Aa,0,Ma.length/3))return!1;pa=0;za.length=
0;for(const Va of M){M=[];for(const Ua of Va)ca&&S?M.push([Ma[pa++],Ma[pa++],Ma[pa++],Ua[3]]):ca?M.push([Ma[pa++],Ma[pa++],Ma[pa++]]):(S?M.push([Ma[pa++],Ma[pa++],Ua[2]]):M.push([Ma[pa++],Ma[pa++]]),pa++);za.push(M)}return!0}function b(M,ca,S,pa){ca=pa+ca;if(ca<pa/2||S>ca)return Number.MAX_VALUE;M=Math.abs(jb*M)+Math.asin(S/ca);return M>=Math.PI/2?Number.MAX_VALUE:S/Math.cos(M)}function h(M,ca,S){const pa=Math.sin(M);M=Math.cos(M);const za=Math.sin(ca);ca=Math.cos(ca);S[0]=-pa;S[4]=-za*M;S[8]=ca*
M;S[12]=0;S[1]=M;S[5]=-za*pa;S[9]=ca*pa;S[13]=0;S[2]=0;S[6]=ca;S[10]=za;S[14]=0;S[3]=0;S[7]=0;S[11]=0;S[15]=1;return S}function ea(M,ca,S){h(M,ca,S);N.transpose(S,S);return S}function ia(M,ca){if(!M)return la.UNKNOWN;if(ca.spatialReference===M)return ca.spatialReferenceId;ca.spatialReference=M;"metersPerUnit"in ca&&(ca.metersPerUnit=m.getMetersPerUnitForSR(M,1));return M.wkt===U.SphericalECEFSpatialReference.wkt?ca.spatialReferenceId=la.SPHERICAL_ECEF:B.isWGS84(M)?ca.spatialReferenceId=la.WGS84:B.isWebMercator(M)?
ca.spatialReferenceId=la.WEB_MERCATOR:B.isPlateCarree(M)?ca.spatialReferenceId=la.PLATE_CARREE:M.wkt===U.WGS84ECEFSpatialReference.wkt?ca.spatialReferenceId=la.WGS84_ECEF:M.wkid===Z.SupportedGCSWkids.CGCS2000?ca.spatialReferenceId=la.CGCS2000:M.wkt===U.SphericalPCPFMars.wkt?ca.spatialReferenceId=la.SPHERICAL_MARS_PCPF:M.wkt===U.SphericalPCPFMoon.wkt?ca.spatialReferenceId=la.SPHERICAL_MOON_PCPF:B.isMars(M)?ca.spatialReferenceId=la.GCSMARS2000:B.isMoon(M)?ca.spatialReferenceId=la.GCSMOON2000:ca.spatialReferenceId=
la.UNKNOWN}function oa(M,ca,S,pa){M!==S&&(S[pa++]=M[ca++],S[pa++]=M[ca++],S[pa]=M[ca])}function v(M,ca,S,pa){S[pa++]=xb*(M[ca++]/g.earth.radius);S[pa++]=xb*(Math.PI/2-2*Math.atan(Math.exp(-M[ca++]/g.earth.radius)));S[pa]=M[ca]}function G(M,ca,S,pa){v(M,ca,S,pa);ma(S,pa,S,pa)}function Q(M,ca,S,pa){v(M,ca,S,pa);ta(S,pa,S,pa)}function T(M,ca,S,pa,za){var Aa=.4999999*Math.PI;Aa=r.clamp(jb*M[ca+1],-Aa,Aa);Aa=Math.sin(Aa);S[pa++]=jb*M[ca]*za.radius;S[pa++]=za.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));S[pa]=
M[ca+2]}function fa(M,ca,S,pa){T(M,ca,S,pa,g.earth)}function ka(M,ca,S,pa){S[pa]=M[ca]*ec;S[pa+1]=M[ca+1]*ec;S[pa+2]=M[ca+2]}function na(M,ca,S,pa){S[pa]=M[ca]*Cb;S[pa+1]=M[ca+1]*Cb;S[pa+2]=M[ca+2]}function ra(M,ca,S,pa){v(M,ca,S,pa);ka(S,pa,S,pa)}function sa(M,ca,S,pa,za){za+=M[ca+2];const Aa=jb*M[ca+1];M=jb*M[ca];ca=Math.cos(Aa);S[pa++]=Math.cos(M)*ca*za;S[pa++]=Math.sin(M)*ca*za;S[pa]=Math.sin(Aa)*za}function aa(M,ca,S,pa){sa(M,ca,S,pa,g.moon.radius)}function da(M,ca,S,pa){sa(M,ca,S,pa,g.mars.radius)}
function ma(M,ca,S,pa){sa(M,ca,S,pa,g.earth.radius)}function ya(M,ca,S,pa,za){var Aa=M[ca];const Ia=M[ca+1];ca=M[ca+2];M=Math.sqrt(Aa*Aa+Ia*Ia+ca*ca);ca=r.asinClamped(ca/(0===M?1:M));Aa=Math.atan2(Ia,Aa);S[pa++]=xb*Aa;S[pa++]=xb*ca;S[pa]=M-za}function Da(M,ca,S,pa){ya(M,ca,S,pa,g.moon.radius)}function Ga(M,ca,S,pa){ya(M,ca,S,pa,g.mars.radius)}function Ha(M,ca,S,pa){ya(M,ca,S,pa,g.earth.radius)}function Fa(M,ca,S,pa){Ha(M,ca,S,pa);fa(S,pa,S,pa)}function Ka(M,ca,S,pa){Ha(M,ca,S,pa);ta(S,pa,S,pa)}function ta(M,
ca,S,pa){var za=g.earth;const Aa=jb*M[ca];var Ia=jb*M[ca+1];M=M[ca+2];ca=Math.sin(Ia);Ia=Math.cos(Ia);const Ma=za.radius/Math.sqrt(1-za.eccentricitySquared*ca*ca);S[pa++]=(Ma+M)*Ia*Math.cos(Aa);S[pa++]=(Ma+M)*Ia*Math.sin(Aa);S[pa++]=(Ma*(1-za.eccentricitySquared)+M)*ca}function Wa(M,ca,S,pa){var za=p.earthEllipsoidConstants,Aa=M[ca],Ia=M[ca+1];M=M[ca+2];let Ma;ca=Math.abs(M);var Va=Aa*Aa+Ia*Ia;var Ua=Math.sqrt(Va);var Ta=Va+M*M;var cb=Math.sqrt(Ta);Aa=Math.atan2(Ia,Aa);var pb=M*M/Ta;Ta=Va/Ta;Ia=za.a2/
cb;Va=za.a3-za.a4/cb;.3<Ta?(pb=ca/cb*(1+Ta*(za.a1+Ia+pb*Va)/cb),cb=Math.asin(pb),Ia=pb*pb,Ta=Math.sqrt(1-Ia)):(Ta=Ua/cb*(1-pb*(za.a5-Ia-Ta*Va)/cb),cb=Math.acos(Ta),Ia=1-Ta*Ta,pb=Math.sqrt(Ia));Ma=1-g.earth.eccentricitySquared*Ia;Ia=g.earth.radius/Math.sqrt(Ma);za=za.a6*Ia;Ia=Ua-Ia*Ta;Va=ca-za*pb;ca=Ta*Ia+pb*Va;Ua=Ta*Va-pb*Ia;za=Ua/(za/Ma+ca);cb+=za;0>M&&(cb=-cb);S[pa++]=xb*Aa;S[pa++]=xb*cb;S[pa]=ca+Ua*za/2}function ab(M,ca,S,pa){Wa(M,ca,S,pa);ma(S,pa,S,pa)}function $a(M,ca,S,pa){Wa(M,ca,S,pa);fa(S,
pa,S,pa)}function a(M,ca,S=Sa()){return z.isNone(M)||z.isNone(ca)?null:db(M,ca,S).projector}function db(M,ca,S){if(z.isNone(M)||z.isNone(ca)||S.source.spatialReference===M&&S.dest.spatialReference===ca)return S;const pa=ia(M,S.source),za=ia(ca,S.dest);pa===la.UNKNOWN&&za===la.UNKNOWN?B.equals(M,ca)?S.projector=oa:S.projector=null:S.projector=hb[pa][za];return S}function Sa(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,
metersPerUnit:1},projector:oa}}let gb=null,nb=null,Ya=null,Eb={};const dc=new w.SimpleObservable;let Fb=function(M){function ca(){return M.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}ha._inheritsLoose(ca,M);return ca}(K);var la;(function(M){M[M.UNKNOWN=0]="UNKNOWN";M[M.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";M[M.WGS84=2]="WGS84";M[M.WEB_MERCATOR=3]="WEB_MERCATOR";M[M.WGS84_ECEF=4]="WGS84_ECEF";M[M.CGCS2000=5]="CGCS2000";M[M.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";M[M.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";M[M.GCSMARS2000=8]="GCSMARS2000";M[M.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";M[M.GCSMOON2000=10]="GCSMOON2000";M[M.LON_LAT=11]="LON_LAT";M[M.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const ec=g.earth.radius*Math.PI/180,Cb=180/(g.earth.radius*Math.PI),hb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:ka,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.CGCS2000]:{[la.CGCS2000]:oa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ka,[la.WGS84]:null,[la.WGS84_ECEF]:ta},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:oa,[la.GCSMOON2000]:null,
[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:v,[la.WGS84_COMPARABLE_LON_LAT]:v,[la.SPHERICAL_ECEF]:G,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:oa,[la.PLATE_CARREE]:ra,[la.WGS84]:v,[la.WGS84_ECEF]:Q},[la.WGS84_ECEF]:{[la.CGCS2000]:Wa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Wa,[la.WGS84_COMPARABLE_LON_LAT]:Wa,[la.SPHERICAL_ECEF]:ab,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:$a,[la.PLATE_CARREE]:function(M,ca,S,pa){Wa(M,ca,S,pa);ka(S,pa,S,pa)},[la.WGS84]:Wa,[la.WGS84_ECEF]:oa},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ha,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:Ha,[la.SPHERICAL_ECEF]:oa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(M,ca,S,pa){Ha(M,ca,S,pa);ka(S,pa,S,pa)},[la.WGS84]:Ha,
[la.WGS84_ECEF]:Ka},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ga,[la.GCSMOON2000]:null,[la.LON_LAT]:Ga,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:oa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Da,[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:oa,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:oa,
[la.GCSMARS2000]:oa,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:da,[la.SPHERICAL_MOON_PCPF]:aa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:fa,[la.PLATE_CARREE]:ka,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ka,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.PLATE_CARREE]:{[la.CGCS2000]:na,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:function(M,ca,S,pa){na(M,ca,S,pa);ma(S,pa,S,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(M,ca,S,pa){na(M,ca,S,pa);fa(S,pa,S,pa)},[la.PLATE_CARREE]:oa,[la.WGS84]:na,[la.WGS84_ECEF]:function(M,ca,S,pa){na(M,ca,S,
pa);ta(S,pa,S,pa)}}},sb={spatialReference:null,spatialReferenceId:la.UNKNOWN},fc={spatialReference:null,spatialReferenceId:la.UNKNOWN},Tb=Sa(),zc=Sa(),jb=r.deg2rad(1),xb=r.rad2deg(1),Ra=I.create(),ob=I.create(),tb=I.create(),Pa=I.create(),Hb=I.create();c.canProjectToWGS84ComparableLonLat=function(M){if(z.isNone(M))return!1;M=ia(M,sb);return!!hb[M][la.WGS84_COMPARABLE_LON_LAT]};c.canProjectWithoutEngine=W;c.computeENUToSphericalPCPFLocalRotation=h;c.computeSphericalPCPFToENULocalRotation=ea;c.computeTranslationToOriginAndRotation=
function(M,ca,S,pa){if(z.isNone(M)||z.isNone(pa))return!1;var za=ia(M,sb),Aa=ia(pa,fc);if(za===Aa&&Aa!==la.SPHERICAL_ECEF&&Aa!==la.SPHERICAL_MARS_PCPF&&Aa!==la.SPHERICAL_MOON_PCPF&&(za!==la.UNKNOWN||B.equals(M,pa)))return N.fromTranslation(S,ca),!0;if(Aa===la.SPHERICAL_ECEF||Aa===la.SPHERICAL_MARS_PCPF||Aa===la.SPHERICAL_MOON_PCPF){za=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(z.isNone(za)||z.isNone(Aa))return!1;za(ca,0,ob,0);Aa(ob,0,tb,0);h(jb*ob[0],jb*ob[1],S);S[12]=tb[0];S[13]=tb[1];S[14]=tb[2];
return!0}if((Aa===la.WEB_MERCATOR||Aa===la.PLATE_CARREE)&&(za===la.WGS84||za===la.CGCS2000&&Aa===la.PLATE_CARREE||za===la.SPHERICAL_ECEF||za===la.WEB_MERCATOR)){M=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(z.isNone(M)||z.isNone(Aa))return!1;M(ca,0,ob,0);Aa(ob,0,tb,0);za===la.SPHERICAL_ECEF?ea(jb*ob[0],jb*ob[1],S):N.identity(S);S[12]=tb[0];S[13]=tb[1];S[14]=tb[2];return!0}return!1};c.getProjectorName=function(M,ca){switch(a(M,ca,Tb)){case oa:return"copy3";case ma:return"wgs84ToSphericalECEF";case fa:return"wgs84ToWebMercator";
case ka:return"wgs84ToPlateCarree";case ta:return"wgs84ToWGS84ECEF";case v:return"webMercatorToWGS84";case G:return"webMercatorToSphericalECEF";case Q:return"webMercatorToWGS84ECEF";case ra:return"webMercatorToPlateCarree";case Wa:return"wgs84ECEFToWGS84";case ab:return"wgs84ECEFToSphericalECEF";case $a:return"wgs84ECEFToWebMercator";case Ha:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ga:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";
case Ka:return"sphericalECEFToWGS84ECEF";case da:return"mars2000ToSphericalPCPF";case aa:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=q;c.getTransformations=function(M,ca,S=null){if(z.isNone(gb)||z.isNone(nb))throw new Fb;M=gb._getTransformationBySuitability(nb,M,ca,S,S?.spatialReference);if(null!==M){ca=[];for(const pa of M)ca.push(x.fromGE(pa));return ca}return[]};c.initializeProjection=function(M,ca,S,pa){return P.apply(this,arguments)};c.isLoaded=C;c.load=J;c.localLinearScaleFactors=
function(M,ca,S,pa){if(z.isNone(ca)||z.isNone(pa))return!1;const za=ia(ca,sb);var Aa=ia(pa,fc);if(za===Aa&&za!==la.UNKNOWN||B.equals(ca,pa))return S[0]=1,S[1]=1,S[2]=1,!0;if(za===la.SPHERICAL_ECEF){ca=Y.length(M);M=ca/Math.sqrt(M[0]*M[0]+M[1]*M[1]);ca/=g.earth.radius;if(Aa===la.WEB_MERCATOR)return S[0]=M*ca,S[1]=M*ca,S[2]=1,!0;if(Aa===la.WGS84||Aa===la.CGCS2000)return Aa=Cb,S[0]=Aa*M*ca,S[1]=Aa*ca,S[2]=1,!0}else if(za===la.PLATE_CARREE){if(Aa===la.WGS84||Aa===la.CGCS2000)return S[0]=Cb,S[1]=Cb,S[2]=
1,!0;if(Aa===la.WEB_MERCATOR)return Aa=M[1]/g.earth.radius,S[0]=1,S[1]=1/Math.cos(Aa),S[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(M,ca,S,pa){const za=Math.cos(S);M[0]=Math.cos(ca)*za*pa;M[1]=Math.sin(ca)*za*pa;M[2]=Math.sin(S)*pa};c.lonLatToWebMercatorComparable=T;c.project=E;c.projectBoundingRect=function(M,ca,S,pa){if(null==M)return!1;if(B.equals(ca,pa))return V.copy(S,M),!0;Ra[0]=M[0];Ra[1]=M[1];Ra[2]=0;if(!Na(Ra,ca,0,Ra,pa,0,1))return!1;S[0]=Ra[0];S[1]=Ra[1];Ra[0]=M[2];Ra[1]=M[3];Ra[2]=
0;if(!Na(Ra,ca,0,Ra,pa,0,1))return!1;S[2]=Ra[0];S[3]=Ra[1];return!0};c.projectBoundingSphere=function(M,ca,S,pa){if(z.isNone(ca)||z.isNone(pa))return!1;ca=db(ca,pa,zc);if(ca.projector===oa)return S[0]=M[0],S[1]=M[1],S[2]=M[2],S[3]=M[3],!0;if(z.isNone(ca.projector))return!1;const {source:za,dest:Aa}=ca;if(Aa.spatialReferenceId===la.WEB_MERCATOR){ca=hb[za.spatialReferenceId][la.WGS84];if(z.isNone(ca))return!1;ca(M,0,ob,0);fa(ob,0,S,0);S[3]=b(ob[1],M[2],M[3],g.earth.radius);return!0}if(za.spatialReferenceId!==
la.WGS84&&za.spatialReferenceId!==la.CGCS2000||Aa.spatialReferenceId!==la.PLATE_CARREE)ca.projector(M,0,S,0),S[3]=M[3]*(za.metersPerUnit??1)/(Aa.metersPerUnit??1);else{pa=hb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ia=M[3];z.isSome(hb[za.spatialReferenceId][la.SPHERICAL_ECEF])&&z.isSome(pa)&&(Ia=b(M[1],M[2],M[3],g.earth.radius));ca.projector(M,0,S,0);S[3]=Ia}return!0};c.projectBuffer=Na;c.projectDirection=function(M,ca,S,pa,za){Y.copy(Pa,M);Y.add(Hb,M,ca);Ja(Pa,S,Pa,za);Ja(Hb,S,Hb,za);Y.subtract(pa,
Hb,Pa);Y.normalize(pa,pa)};c.projectExtent=function(M,ca,S=ca.spatialReference,pa=0){return z.isSome(M.spatialReference)&&z.isSome(S)&&z.isSome(Ba(M,M.spatialReference,ca,S,pa))};c.projectMany=t;c.projectMultipoint=function(M,ca,S=ca.spatialReference,pa=0){return z.isSome(M.spatialReference)&&z.isSome(S)&&z.isSome(qa(M,M.spatialReference,ca,S,pa))};c.projectOrLoad=function(M,ca){M=F([M],ca);return z.isSome(M.pending)?{pending:M.pending,geometry:null}:z.isSome(M.geometries)?{pending:null,geometry:M.geometries[0]}:
{pending:null,geometry:null}};c.projectOrLoadMany=F;c.projectPoint=function(M,ca,S=ca.spatialReference,pa=0){return z.isSome(S)&&z.isSome(M.spatialReference)&&z.isSome(ba(M,M.spatialReference,ca,S,pa))};c.projectPointToVector=function(M,ca,S,pa=0){Pa[0]=M.x;Pa[1]=M.y;const za=M.z;Pa[2]=void 0!==za?za:pa;return Na(Pa,M.spatialReference,0,ca,S,0,1)};c.projectPointToWGS84ComparableLonLat=function(M,ca){Pa[0]=M.x;Pa[1]=M.y;const S=M.z;Pa[2]=void 0!==S?S:0;return La(Pa,M.spatialReference,ca)};c.projectPolygon=
function(M,ca,S=ca.spatialReference,pa=0){return z.isSome(M.spatialReference)&&z.isSome(S)&&z.isSome(xa(M,M.spatialReference,ca,S,pa))};c.projectPolygonToWGS84ComparableLonLat=function({hasZ:M,spatialReference:ca,rings:S},pa,za=0){ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(z.isNone(ca))return!1;M=M?Aa=>Aa:Aa=>Y.set(Pa,Aa[0],Aa[1],za);for(const Aa of S){S=[];for(const Ia of Aa){const Ma=[0,0,za];ca(M(Ia),0,Ma,0);S.push(Ma)}pa.push(S)}return!0};c.projectPolyline=function(M,ca,S=ca.spatialReference,
pa=0){return z.isSome(M.spatialReference)&&z.isSome(S)&&z.isSome(wa(M,M.spatialReference,ca,S,pa))};c.projectPolylineToWGS84ComparableLonLat=function({hasZ:M,spatialReference:ca,paths:S},pa,za=0){ca=ia(ca,sb);ca=hb[ca][la.WGS84_COMPARABLE_LON_LAT];if(z.isNone(ca))return!1;M=M?Aa=>Aa:Aa=>Y.set(Pa,Aa[0],Aa[1],za);for(const Aa of S){S=[];for(const Ia of Aa){const Ma=[0,0,za];ca(M(Ia),0,Ma,0);S.push(Ma)}pa.push(S)}return!0};c.projectVectorToDehydratedPoint=function(M,ca,S){return Na(M,ca,0,Pa,S.spatialReference,
0,1)?(S.x=Pa[0],S.y=Pa[1],S.z=Pa[2],S):null};c.projectVectorToPoint=function(M,ca,S){if(z.isNone(ca)||z.isNone(S))return null;const pa=new l({spatialReference:S});return Na(M,ca,0,Pa,S,0,1)?(pa.x=Pa[0],pa.y=Pa[1],pa.z=Pa[2],pa):null};c.projectVectorToVector=Ja;c.projectVectorToWGS84ComparableLonLat=function(M,ca,S){return La(M,ca,S)};c.projectWithoutEngine=ja;c.projectXYZToVector=Ca;c.sphericalPCPFtoLonLatElevation=ya;c.test={get loadPromise(){return Ya}};c.tryProjectWithZConversion=R;c.unload=function(){Ya=
nb=gb=null;Eb={}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(f,c,ha,K,r,z,y,m){function n(ba){ba=q[ba];if(!ba)throw Error("unknown type");return ba}function w(ba){return F[ba].baseUnit}function N(ba,qa=null){qa=qa||
n(ba);return F[qa].baseUnit===ba}function Y(ba,qa,wa){if(qa===wa)return ba;const xa=n(qa);if(xa!==n(wa))throw Error("incompatible units");ba=N(qa,xa)?ba:ba*F[xa].units[qa].inBaseUnits;return N(wa,xa)?ba:ba/F[xa].units[wa].inBaseUnits}function I(ba,qa){ba=Y(ba,qa,"meters");return 3E3>Math.abs(ba)?"meters":"kilometers"}function k(ba,qa){ba=Y(ba,qa,"meters");return 1E5>Math.abs(ba)?"meters":"kilometers"}function H(ba,qa){ba=Y(ba,qa,"feet");return 1E3>Math.abs(ba)?"feet":"miles"}function d(ba,qa){ba=
Y(ba,qa,"feet");return 1E5>Math.abs(ba)?"feet":"miles"}function l(ba,qa){ba=Y(ba,qa,"square-meters");return 3E6>Math.abs(ba)?"square-meters":"square-kilometers"}function L(ba,qa){ba=Y(ba,qa,"square-feet");return 1E6>Math.abs(ba)?"square-feet":"square-miles"}function O(ba){return t.fromJSON(ba.toLowerCase())||null}function U(ba){const qa=V(ba),wa=r.getReferenceEllipsoid(ba).metersPerDegree;return qa>=wa?"meters":x(ba)}function V(ba,qa=z.earth.metersPerDegree){return K.unwrapOr(g(ba,!0),qa)}function g(ba,
qa=!1){const wa=K.isSome(ba)?ba.wkid:null;ba=K.isSome(ba)?ba.wkt:null;let xa=null;if(wa){if(y.isWKIDFromMars(wa))return z.mars.metersPerDegree;if(y.isWKIDFromMoon(wa))return z.moon.metersPerDegree;xa=C.values[C[wa]];!xa&&qa&&E.has(wa)&&(xa=Z)}else ba&&(/^PROJCS/i.test(ba)?xa=p(A.exec(ba),xa):/^GEOCCS/i.test(ba)&&(xa=p(J.exec(ba),xa)));return xa}function p(ba,qa){return ba&&ba[1]?parseFloat(ba[1].split(",")[1]):qa}function x(ba){var qa=K.isSome(ba)?ba.wkid:null,wa=K.isSome(ba)?ba.wkt:null;ba=null;
if(qa)ba=C.units[C[qa]];else if(wa&&(qa=/^PROJCS/i.test(wa)?A:/^GEOCCS/i.test(wa)?J:null)&&(qa=qa.exec(wa))&&qa[1]&&(qa=qa[1],ba=(ba=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&ba[1],!ba||!C.units.includes(ba))){qa=parseFloat(qa.split(",")[1]);ba=null;wa=C.values;for(let xa=0;xa<wa.length;++xa)if(1E-7>Math.abs(qa-wa[xa])){ba=C.units[xa];break}}return K.isSome(ba)?O(ba):null}function B(ba){ba=x(ba);if(K.isNone(ba))return null;switch(ba){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const Z=z.earth.radius*Math.PI/200,A=/UNIT\[([^\]]+)\]\]$/i,C=m,J=/UNIT\[([^\]]+)\]/i,E=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),t=ha.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",
yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},
"us-feet":{inBaseUnits:1200/3937}};m={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(ba=>ba*ba)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};
const F={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:m},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},
angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},q=(()=>{const ba={};for(const qa in F)for(const wa in F[qa].units)ba[wa]=qa;return ba})(),R="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),W=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),P={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ja={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};c=ha.strict()(P);m=ha.strict()(ja);ha=ha.strict()({...P,...ja});f.areaUnitFromSpatialReference=function(ba){ba=x(ba);return K.isNone(ba)?null:W.get(ba)};f.areaUnitsJSONMap=c;f.baseUnitForUnit=function(ba){return w(n(ba))};f.baseUnitForUnitType=w;f.convertUnit=Y;f.getDefaultUnitForView=function(ba){if(K.isNone(ba))return"metric";var qa=ba.map;if(qa=qa&&"portalItem"in qa?qa.portalItem?.portal:null)switch(qa?.user?.units??qa.units){case "metric":return"metric";case "english":return"imperial"}return K.unwrapOr(B(ba.spatialReference),
"metric")};f.getDefaultUnitSystem=B;f.getMetersPerUnit=g;f.getMetersPerUnitForSR=V;f.getMetersPerVerticalUnitForSR=function(ba){if(K.isSome(ba)&&!y.isEarth(ba))return 1;ba=V(ba);return 1E5<ba?1:ba};f.getUnitString=x;f.getVerticalUnitStringForSR=U;f.inchesPerMeter=39.37;f.isBaseUnit=N;f.isMeasurementSystem=function(ba){return"imperial"===ba||"metric"===ba};f.lengthToDegrees=function(ba,qa,wa){return Y(ba,qa,"meters")/(wa*Math.PI/180)};f.lengthUnitFromSpatialReference=function(ba){ba=x(ba);return K.isNone(ba)||
!R.includes(ba)?null:ba};f.lengthUnitsJSONMap=m;f.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");f.measurementLengthUnits=R;f.preferredAreaUnit=function(ba,qa,wa){switch(wa){case "metric":return l(ba,qa);case "imperial":return L(ba,qa);default:return wa}};f.preferredImperialAreaUnit=L;f.preferredImperialLengthUnit=H;f.preferredImperialVerticalLengthUnit=d;f.preferredLengthUnit=
function(ba,qa,wa){switch(wa){case "metric":return I(ba,qa);case "imperial":return H(ba,qa);default:return wa}};f.preferredMetricAreaUnit=l;f.preferredMetricLengthUnit=I;f.preferredMetricVerticalLengthUnit=k;f.preferredVerticalLengthUnit=function(ba,qa,wa){switch(wa){case "metric":return k(ba,qa);case "imperial":return d(ba,qa);default:return wa}};f.unitFromRESTJSON=O;f.unitToRESTJSON=function(ba){return t.toJSON(ba)||null};f.unitType=n;f.unitsJSONMap=ha;f.verticalLengthUnitFromSpatialReference=function(ba){ba=
U(ba);return K.isNone(ba)||!R.includes(ba)?null:ba};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(f,c,ha,K,r){function z(N){return new ha({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${N.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}
const y=z(K.earth),m=z(K.mars),n=z(K.moon),w=new ha({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${K.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});f.SphericalECEFSpatialReference=y;f.SphericalPCPFMars=
m;f.SphericalPCPFMoon=n;f.WGS84ECEFSpatialReference=w;f.createSphericalPCPF=z;f.getReferenceEllipsoid=function(N){return c.isSome(N)&&(r.isMars(N)||N===m)?K.mars:c.isSome(N)&&(r.isMoon(N)||N===n)?K.moon:K.earth};f.getReferenceEllipsoidFromWKID=function(N){return r.isWKIDFromMars(N)?K.mars:r.isWKIDFromMoon(N)?K.moon:K.earth};f.getSphericalPCPF=function(N){return N&&(r.isMars(N)||N===m)?m:N&&(r.isMoon(N)||N===n)?n:y};f.getSphericalPCPFForEllipsoid=function(N){return N&&N===K.mars?m:N&&N===K.moon?n:
y};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(f,c){let ha=function(){function K(){this._observers=[]}var r=K.prototype;r.observe=function(z){this._observers.includes(z)||this._observers.push(z);return new c.ObservationHandle(this._observers,z)};r.notify=function(){const z=this._observers.slice();for(let y=0;y<z.length;++y){const m=z[y];
m.onInvalidated();m.onCommitted()}};return K}();f.SimpleObservable=ha;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(f,c,ha){function K(b,h){b[0]=h[0];b[1]=h[1];b[2]=h[2];b[3]=h[3];b[4]=h[4];b[5]=h[5];b[6]=h[6];b[7]=h[7];b[8]=h[8];b[9]=h[9];b[10]=h[10];b[11]=h[11];b[12]=h[12];b[13]=h[13];b[14]=h[14];b[15]=h[15];return b}function r(b,h,ea,ia,oa,v,G,Q,T,fa,ka,na,ra,sa,aa,da,
ma){b[0]=h;b[1]=ea;b[2]=ia;b[3]=oa;b[4]=v;b[5]=G;b[6]=Q;b[7]=T;b[8]=fa;b[9]=ka;b[10]=na;b[11]=ra;b[12]=sa;b[13]=aa;b[14]=da;b[15]=ma;return b}function z(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function y(b,h){if(b===h){const ea=h[1],ia=h[2],oa=h[3],v=h[6],G=h[7],Q=h[11];b[1]=h[4];b[2]=h[8];b[3]=h[12];b[4]=ea;b[6]=h[9];b[7]=h[13];b[8]=ia;b[9]=v;b[11]=h[14];b[12]=oa;b[13]=G;b[14]=Q}else b[0]=h[0],b[1]=h[4],b[2]=
h[8],b[3]=h[12],b[4]=h[1],b[5]=h[5],b[6]=h[9],b[7]=h[13],b[8]=h[2],b[9]=h[6],b[10]=h[10],b[11]=h[14],b[12]=h[3],b[13]=h[7],b[14]=h[11],b[15]=h[15];return b}function m(b,h){const ea=h[0],ia=h[1],oa=h[2],v=h[3],G=h[4],Q=h[5],T=h[6],fa=h[7],ka=h[8],na=h[9],ra=h[10],sa=h[11],aa=h[12],da=h[13],ma=h[14];h=h[15];const ya=ea*Q-ia*G,Da=ea*T-oa*G,Ga=ea*fa-v*G,Ha=ia*T-oa*Q,Fa=ia*fa-v*Q,Ka=oa*fa-v*T,ta=ka*da-na*aa,Wa=ka*ma-ra*aa,ab=ka*h-sa*aa,$a=na*ma-ra*da,a=na*h-sa*da,db=ra*h-sa*ma;let Sa=ya*db-Da*a+Ga*$a+
Ha*ab-Fa*Wa+Ka*ta;if(!Sa)return null;Sa=1/Sa;b[0]=(Q*db-T*a+fa*$a)*Sa;b[1]=(oa*a-ia*db-v*$a)*Sa;b[2]=(da*Ka-ma*Fa+h*Ha)*Sa;b[3]=(ra*Fa-na*Ka-sa*Ha)*Sa;b[4]=(T*ab-G*db-fa*Wa)*Sa;b[5]=(ea*db-oa*ab+v*Wa)*Sa;b[6]=(ma*Ga-aa*Ka-h*Da)*Sa;b[7]=(ka*Ka-ra*Ga+sa*Da)*Sa;b[8]=(G*a-Q*ab+fa*ta)*Sa;b[9]=(ia*ab-ea*a-v*ta)*Sa;b[10]=(aa*Fa-da*Ga+h*ya)*Sa;b[11]=(na*Ga-ka*Fa-sa*ya)*Sa;b[12]=(Q*Wa-G*$a-T*ta)*Sa;b[13]=(ea*$a-ia*Wa+oa*ta)*Sa;b[14]=(da*Da-aa*Ha-ma*ya)*Sa;b[15]=(ka*Ha-na*Da+ra*ya)*Sa;return b}function n(b,
h){const ea=h[0],ia=h[1],oa=h[2],v=h[3],G=h[4],Q=h[5],T=h[6],fa=h[7],ka=h[8],na=h[9],ra=h[10],sa=h[11],aa=h[12],da=h[13],ma=h[14];h=h[15];b[0]=Q*(ra*h-sa*ma)-na*(T*h-fa*ma)+da*(T*sa-fa*ra);b[1]=-(ia*(ra*h-sa*ma)-na*(oa*h-v*ma)+da*(oa*sa-v*ra));b[2]=ia*(T*h-fa*ma)-Q*(oa*h-v*ma)+da*(oa*fa-v*T);b[3]=-(ia*(T*sa-fa*ra)-Q*(oa*sa-v*ra)+na*(oa*fa-v*T));b[4]=-(G*(ra*h-sa*ma)-ka*(T*h-fa*ma)+aa*(T*sa-fa*ra));b[5]=ea*(ra*h-sa*ma)-ka*(oa*h-v*ma)+aa*(oa*sa-v*ra);b[6]=-(ea*(T*h-fa*ma)-G*(oa*h-v*ma)+aa*(oa*fa-v*
T));b[7]=ea*(T*sa-fa*ra)-G*(oa*sa-v*ra)+ka*(oa*fa-v*T);b[8]=G*(na*h-sa*da)-ka*(Q*h-fa*da)+aa*(Q*sa-fa*na);b[9]=-(ea*(na*h-sa*da)-ka*(ia*h-v*da)+aa*(ia*sa-v*na));b[10]=ea*(Q*h-fa*da)-G*(ia*h-v*da)+aa*(ia*fa-v*Q);b[11]=-(ea*(Q*sa-fa*na)-G*(ia*sa-v*na)+ka*(ia*fa-v*Q));b[12]=-(G*(na*ma-ra*da)-ka*(Q*ma-T*da)+aa*(Q*ra-T*na));b[13]=ea*(na*ma-ra*da)-ka*(ia*ma-oa*da)+aa*(ia*ra-oa*na);b[14]=-(ea*(Q*ma-T*da)-G*(ia*ma-oa*da)+aa*(ia*T-oa*Q));b[15]=ea*(Q*ra-T*na)-G*(ia*ra-oa*na)+ka*(ia*T-oa*Q);return b}function w(b){const h=
b[0],ea=b[1],ia=b[2],oa=b[3],v=b[4],G=b[5],Q=b[6],T=b[7],fa=b[8],ka=b[9],na=b[10],ra=b[11],sa=b[12],aa=b[13],da=b[14];b=b[15];return(h*G-ea*v)*(na*b-ra*da)-(h*Q-ia*v)*(ka*b-ra*aa)+(h*T-oa*v)*(ka*da-na*aa)+(ea*Q-ia*G)*(fa*b-ra*sa)-(ea*T-oa*G)*(fa*da-na*sa)+(ia*T-oa*Q)*(fa*aa-ka*sa)}function N(b,h,ea){const ia=h[0],oa=h[1],v=h[2],G=h[3],Q=h[4],T=h[5],fa=h[6],ka=h[7],na=h[8],ra=h[9],sa=h[10],aa=h[11],da=h[12],ma=h[13],ya=h[14];h=h[15];let Da=ea[0],Ga=ea[1],Ha=ea[2],Fa=ea[3];b[0]=Da*ia+Ga*Q+Ha*na+Fa*
da;b[1]=Da*oa+Ga*T+Ha*ra+Fa*ma;b[2]=Da*v+Ga*fa+Ha*sa+Fa*ya;b[3]=Da*G+Ga*ka+Ha*aa+Fa*h;Da=ea[4];Ga=ea[5];Ha=ea[6];Fa=ea[7];b[4]=Da*ia+Ga*Q+Ha*na+Fa*da;b[5]=Da*oa+Ga*T+Ha*ra+Fa*ma;b[6]=Da*v+Ga*fa+Ha*sa+Fa*ya;b[7]=Da*G+Ga*ka+Ha*aa+Fa*h;Da=ea[8];Ga=ea[9];Ha=ea[10];Fa=ea[11];b[8]=Da*ia+Ga*Q+Ha*na+Fa*da;b[9]=Da*oa+Ga*T+Ha*ra+Fa*ma;b[10]=Da*v+Ga*fa+Ha*sa+Fa*ya;b[11]=Da*G+Ga*ka+Ha*aa+Fa*h;Da=ea[12];Ga=ea[13];Ha=ea[14];Fa=ea[15];b[12]=Da*ia+Ga*Q+Ha*na+Fa*da;b[13]=Da*oa+Ga*T+Ha*ra+Fa*ma;b[14]=Da*v+Ga*fa+Ha*
sa+Fa*ya;b[15]=Da*G+Ga*ka+Ha*aa+Fa*h;return b}function Y(b,h,ea){const ia=ea[0],oa=ea[1];ea=ea[2];if(h===b)b[12]=h[0]*ia+h[4]*oa+h[8]*ea+h[12],b[13]=h[1]*ia+h[5]*oa+h[9]*ea+h[13],b[14]=h[2]*ia+h[6]*oa+h[10]*ea+h[14],b[15]=h[3]*ia+h[7]*oa+h[11]*ea+h[15];else{const v=h[0],G=h[1],Q=h[2],T=h[3],fa=h[4],ka=h[5],na=h[6],ra=h[7],sa=h[8],aa=h[9],da=h[10],ma=h[11];b[0]=v;b[1]=G;b[2]=Q;b[3]=T;b[4]=fa;b[5]=ka;b[6]=na;b[7]=ra;b[8]=sa;b[9]=aa;b[10]=da;b[11]=ma;b[12]=v*ia+fa*oa+sa*ea+h[12];b[13]=G*ia+ka*oa+aa*
ea+h[13];b[14]=Q*ia+na*oa+da*ea+h[14];b[15]=T*ia+ra*oa+ma*ea+h[15]}return b}function I(b,h,ea){const ia=ea[0],oa=ea[1];ea=ea[2];b[0]=h[0]*ia;b[1]=h[1]*ia;b[2]=h[2]*ia;b[3]=h[3]*ia;b[4]=h[4]*oa;b[5]=h[5]*oa;b[6]=h[6]*oa;b[7]=h[7]*oa;b[8]=h[8]*ea;b[9]=h[9]*ea;b[10]=h[10]*ea;b[11]=h[11]*ea;b[12]=h[12];b[13]=h[13];b[14]=h[14];b[15]=h[15];return b}function k(b,h,ea,ia){let oa=ia[0],v=ia[1];ia=ia[2];let G=Math.sqrt(oa*oa+v*v+ia*ia);var Q=void 0,T=void 0;let fa=void 0,ka=void 0,na=void 0,ra=void 0,sa=void 0,
aa=void 0,da=void 0,ma=void 0,ya=void 0,Da=void 0,Ga=void 0,Ha=void 0,Fa=void 0,Ka=void 0,ta=void 0,Wa=void 0,ab=void 0,$a=void 0,a=void 0,db=void 0;T=Q=void 0;if(G<ha.getEpsilon())return null;G=1/G;oa*=G;v*=G;ia*=G;Q=Math.sin(ea);T=Math.cos(ea);fa=1-T;ka=h[0];na=h[1];ra=h[2];sa=h[3];aa=h[4];da=h[5];ma=h[6];ya=h[7];Da=h[8];Ga=h[9];Ha=h[10];Fa=h[11];Ka=oa*oa*fa+T;ta=v*oa*fa+ia*Q;Wa=ia*oa*fa-v*Q;ab=oa*v*fa-ia*Q;$a=v*v*fa+T;a=ia*v*fa+oa*Q;db=oa*ia*fa+v*Q;Q=v*ia*fa-oa*Q;T=ia*ia*fa+T;b[0]=ka*Ka+aa*ta+
Da*Wa;b[1]=na*Ka+da*ta+Ga*Wa;b[2]=ra*Ka+ma*ta+Ha*Wa;b[3]=sa*Ka+ya*ta+Fa*Wa;b[4]=ka*ab+aa*$a+Da*a;b[5]=na*ab+da*$a+Ga*a;b[6]=ra*ab+ma*$a+Ha*a;b[7]=sa*ab+ya*$a+Fa*a;b[8]=ka*db+aa*Q+Da*T;b[9]=na*db+da*Q+Ga*T;b[10]=ra*db+ma*Q+Ha*T;b[11]=sa*db+ya*Q+Fa*T;h!==b&&(b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15]);return b}function H(b,h,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=h[4],v=h[5],G=h[6],Q=h[7],T=h[8],fa=h[9],ka=h[10],na=h[11];h!==b&&(b[0]=h[0],b[1]=h[1],b[2]=h[2],b[3]=h[3],b[12]=h[12],b[13]=
h[13],b[14]=h[14],b[15]=h[15]);b[4]=oa*ea+T*ia;b[5]=v*ea+fa*ia;b[6]=G*ea+ka*ia;b[7]=Q*ea+na*ia;b[8]=T*ea-oa*ia;b[9]=fa*ea-v*ia;b[10]=ka*ea-G*ia;b[11]=na*ea-Q*ia;return b}function d(b,h,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=h[0],v=h[1],G=h[2],Q=h[3],T=h[8],fa=h[9],ka=h[10],na=h[11];h!==b&&(b[4]=h[4],b[5]=h[5],b[6]=h[6],b[7]=h[7],b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15]);b[0]=oa*ea-T*ia;b[1]=v*ea-fa*ia;b[2]=G*ea-ka*ia;b[3]=Q*ea-na*ia;b[8]=oa*ia+T*ea;b[9]=v*ia+fa*ea;b[10]=G*ia+ka*
ea;b[11]=Q*ia+na*ea;return b}function l(b,h,ea){const ia=Math.sin(ea);ea=Math.cos(ea);const oa=h[0],v=h[1],G=h[2],Q=h[3],T=h[4],fa=h[5],ka=h[6],na=h[7];h!==b&&(b[8]=h[8],b[9]=h[9],b[10]=h[10],b[11]=h[11],b[12]=h[12],b[13]=h[13],b[14]=h[14],b[15]=h[15]);b[0]=oa*ea+T*ia;b[1]=v*ea+fa*ia;b[2]=G*ea+ka*ia;b[3]=Q*ea+na*ia;b[4]=T*ea-oa*ia;b[5]=fa*ea-v*ia;b[6]=ka*ea-G*ia;b[7]=na*ea-Q*ia;return b}function L(b,h){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=h[0];
b[13]=h[1];b[14]=h[2];b[15]=1;return b}function O(b,h){b[0]=h[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h[1];b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=h[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function U(b,h,ea){if(0===h)return z(b);let ia=ea[0],oa=ea[1];ea=ea[2];let v=Math.sqrt(ia*ia+oa*oa+ea*ea),G=void 0,Q=void 0,T=void 0;if(v<ha.getEpsilon())return null;v=1/v;ia*=v;oa*=v;ea*=v;G=Math.sin(h);Q=Math.cos(h);T=1-Q;b[0]=ia*ia*T+Q;b[1]=oa*ia*T+ea*G;b[2]=ea*ia*T-oa*G;b[3]=0;b[4]=ia*oa*T-ea*G;b[5]=oa*oa*
T+Q;b[6]=ea*oa*T+ia*G;b[7]=0;b[8]=ia*ea*T+oa*G;b[9]=oa*ea*T-ia*G;b[10]=ea*ea*T+Q;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function V(b,h){const ea=Math.sin(h);h=Math.cos(h);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=ea;b[7]=0;b[8]=0;b[9]=-ea;b[10]=h;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function g(b,h){const ea=Math.sin(h);h=Math.cos(h);b[0]=h;b[1]=0;b[2]=-ea;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=ea;b[9]=0;b[10]=h;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function p(b,
h){const ea=Math.sin(h);h=Math.cos(h);b[0]=h;b[1]=ea;b[2]=0;b[3]=0;b[4]=-ea;b[5]=h;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function x(b,h,ea){var ia=h[0],oa=h[1],v=h[2],G=h[3],Q=ia+ia,T=oa+oa;const fa=v+v;h=ia*Q;const ka=ia*T;ia*=fa;const na=oa*T;oa*=fa;v*=fa;Q*=G;T*=G;G*=fa;b[0]=1-(na+v);b[1]=ka+G;b[2]=ia-T;b[3]=0;b[4]=ka-G;b[5]=1-(h+v);b[6]=oa+Q;b[7]=0;b[8]=ia+T;b[9]=oa-Q;b[10]=1-(h+na);b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function B(b,
h){const ea=bb,ia=-h[0],oa=-h[1],v=-h[2],G=h[3],Q=h[4],T=h[5],fa=h[6],ka=h[7],na=ia*ia+oa*oa+v*v+G*G;0<na?(ea[0]=2*(Q*G+ka*ia+T*v-fa*oa)/na,ea[1]=2*(T*G+ka*oa+fa*ia-Q*v)/na,ea[2]=2*(fa*G+ka*v+Q*oa-T*ia)/na):(ea[0]=2*(Q*G+ka*ia+T*v-fa*oa),ea[1]=2*(T*G+ka*oa+fa*ia-Q*v),ea[2]=2*(fa*G+ka*v+Q*oa-T*ia));x(b,h,ea);return b}function Z(b,h){b[0]=h[12];b[1]=h[13];b[2]=h[14];return b}function A(b,h){const ea=h[0],ia=h[1],oa=h[2],v=h[4],G=h[5],Q=h[6],T=h[8],fa=h[9];h=h[10];b[0]=Math.sqrt(ea*ea+ia*ia+oa*oa);b[1]=
Math.sqrt(v*v+G*G+Q*Q);b[2]=Math.sqrt(T*T+fa*fa+h*h);return b}function C(b,h){const ea=h[0]+h[5]+h[10];let ia=0;0<ea?(ia=2*Math.sqrt(ea+1),b[3]=.25*ia,b[0]=(h[6]-h[9])/ia,b[1]=(h[8]-h[2])/ia,b[2]=(h[1]-h[4])/ia):h[0]>h[5]&&h[0]>h[10]?(ia=2*Math.sqrt(1+h[0]-h[5]-h[10]),b[3]=(h[6]-h[9])/ia,b[0]=.25*ia,b[1]=(h[1]+h[4])/ia,b[2]=(h[8]+h[2])/ia):h[5]>h[10]?(ia=2*Math.sqrt(1+h[5]-h[0]-h[10]),b[3]=(h[8]-h[2])/ia,b[0]=(h[1]+h[4])/ia,b[1]=.25*ia,b[2]=(h[6]+h[9])/ia):(ia=2*Math.sqrt(1+h[10]-h[0]-h[5]),b[3]=
(h[1]-h[4])/ia,b[0]=(h[8]+h[2])/ia,b[1]=(h[6]+h[9])/ia,b[2]=.25*ia);return b}function J(b,h,ea,ia){var oa=h[0],v=h[1],G=h[2],Q=h[3],T=oa+oa,fa=v+v,ka=G+G;h=oa*T;const na=oa*fa;oa*=ka;const ra=v*fa;v*=ka;G*=ka;T*=Q;fa*=Q;Q*=ka;ka=ia[0];const sa=ia[1];ia=ia[2];b[0]=(1-(ra+G))*ka;b[1]=(na+Q)*ka;b[2]=(oa-fa)*ka;b[3]=0;b[4]=(na-Q)*sa;b[5]=(1-(h+G))*sa;b[6]=(v+T)*sa;b[7]=0;b[8]=(oa+fa)*ia;b[9]=(v-T)*ia;b[10]=(1-(h+ra))*ia;b[11]=0;b[12]=ea[0];b[13]=ea[1];b[14]=ea[2];b[15]=1;return b}function E(b,h,ea,ia,
oa){var v=h[0],G=h[1],Q=h[2],T=h[3],fa=v+v,ka=G+G,na=Q+Q;h=v*fa;var ra=v*ka,sa=v*na;v=G*ka;G*=na;var aa=Q*na;Q=T*fa;ka*=T;const da=T*na;var ma=ia[0],ya=ia[1];na=ia[2];ia=oa[0];T=oa[1];oa=oa[2];fa=(1-(v+aa))*ma;const Da=(ra+da)*ma;ma*=sa-ka;ra=(ra-da)*ya;aa=(1-(h+aa))*ya;ya*=G+Q;sa=(sa+ka)*na;G=(G-Q)*na;h=(1-(h+v))*na;b[0]=fa;b[1]=Da;b[2]=ma;b[3]=0;b[4]=ra;b[5]=aa;b[6]=ya;b[7]=0;b[8]=sa;b[9]=G;b[10]=h;b[11]=0;b[12]=ea[0]+ia-(fa*ia+ra*T+sa*oa);b[13]=ea[1]+T-(Da*ia+aa*T+G*oa);b[14]=ea[2]+oa-(ma*ia+ya*
T+h*oa);b[15]=1;return b}function t(b,h){var ea=h[0],ia=h[1],oa=h[2];h=h[3];var v=ea+ea,G=ia+ia;const Q=oa+oa;ea*=v;const T=ia*v;ia*=G;const fa=oa*v,ka=oa*G;oa*=Q;v*=h;G*=h;h*=Q;b[0]=1-ia-oa;b[1]=T+h;b[2]=fa-G;b[3]=0;b[4]=T-h;b[5]=1-ea-oa;b[6]=ka+v;b[7]=0;b[8]=fa+G;b[9]=ka-v;b[10]=1-ea-ia;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function F(b,h,ea,ia,oa,v,G){const Q=1/(ea-h),T=1/(oa-ia),fa=1/(v-G);b[0]=2*v*Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*v*T;b[6]=0;b[7]=0;b[8]=(ea+h)*Q;b[9]=(oa+ia)*T;
b[10]=(G+v)*fa;b[11]=-1;b[12]=0;b[13]=0;b[14]=G*v*2*fa;b[15]=0;return b}function q(b,h,ea,ia,oa){h=1/Math.tan(h/2);let v=void 0;b[0]=h/ea;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=h;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=oa&&Infinity!==oa?(v=1/(ia-oa),b[10]=(oa+ia)*v,b[14]=2*oa*ia*v):(b[10]=-1,b[14]=-2*ia);return b}function R(b,h,ea,ia){const oa=Math.tan(h.upDegrees*Math.PI/180),v=Math.tan(h.downDegrees*Math.PI/180),G=Math.tan(h.leftDegrees*Math.PI/180);h=Math.tan(h.rightDegrees*
Math.PI/180);const Q=2/(G+h),T=2/(oa+v);b[0]=Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=T;b[6]=0;b[7]=0;b[8]=-((G-h)*Q*.5);b[9]=(oa-v)*T*.5;b[10]=ia/(ea-ia);b[11]=-1;b[12]=0;b[13]=0;b[14]=ia*ea/(ea-ia);b[15]=0;return b}function W(b,h,ea,ia,oa,v,G){const Q=1/(h-ea),T=1/(ia-oa),fa=1/(v-G);b[0]=-2*Q;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*T;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*fa;b[11]=0;b[12]=(h+ea)*Q;b[13]=(oa+ia)*T;b[14]=(G+v)*fa;b[15]=1;return b}function P(b,h,ea,ia){var oa=void 0;let v=void 0;var G=void 0,Q=
void 0;let T=void 0,fa=void 0;var ka=void 0,na=void 0;let ra=void 0,sa=void 0;const aa=h[0],da=h[1];h=h[2];G=ia[0];Q=ia[1];ia=ia[2];ka=ea[0];na=ea[1];ea=ea[2];oa=ha.getEpsilon();if(Math.abs(aa-ka)<oa&&Math.abs(da-na)<oa&&Math.abs(h-ea)<oa)return z(b);ka=aa-ka;na=da-na;ra=h-ea;sa=1/Math.sqrt(ka*ka+na*na+ra*ra);ka*=sa;na*=sa;ra*=sa;oa=Q*ra-ia*na;v=ia*ka-G*ra;G=G*na-Q*ka;(sa=Math.sqrt(oa*oa+v*v+G*G))?(sa=1/sa,oa*=sa,v*=sa,G*=sa):G=v=oa=0;Q=na*G-ra*v;T=ra*oa-ka*G;fa=ka*v-na*oa;(sa=Math.sqrt(Q*Q+T*T+fa*
fa))?(sa=1/sa,Q*=sa,T*=sa,fa*=sa):fa=T=Q=0;b[0]=oa;b[1]=Q;b[2]=ka;b[3]=0;b[4]=v;b[5]=T;b[6]=na;b[7]=0;b[8]=G;b[9]=fa;b[10]=ra;b[11]=0;b[12]=-(oa*aa+v*da+G*h);b[13]=-(Q*aa+T*da+fa*h);b[14]=-(ka*aa+na*da+ra*h);b[15]=1;return b}function ja(b,h,ea,ia){const oa=h[0],v=h[1];h=h[2];var G=ia[0];const Q=ia[1];var T=ia[2];ia=oa-ea[0];let fa=v-ea[1];ea=h-ea[2];let ka=ia*ia+fa*fa+ea*ea;0<ka&&(ka=1/Math.sqrt(ka),ia*=ka,fa*=ka,ea*=ka);let na=Q*ea-T*fa;T=T*ia-G*ea;G=G*fa-Q*ia;ka=na*na+T*T+G*G;0<ka&&(ka=1/Math.sqrt(ka),
na*=ka,T*=ka,G*=ka);b[0]=na;b[1]=T;b[2]=G;b[3]=0;b[4]=fa*G-ea*T;b[5]=ea*na-ia*G;b[6]=ia*T-fa*na;b[7]=0;b[8]=ia;b[9]=fa;b[10]=ea;b[11]=0;b[12]=oa;b[13]=v;b[14]=h;b[15]=1;return b}function ba(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function qa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+
b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function wa(b,h,ea){b[0]=h[0]+ea[0];b[1]=h[1]+ea[1];b[2]=h[2]+ea[2];b[3]=h[3]+ea[3];b[4]=h[4]+ea[4];b[5]=h[5]+ea[5];b[6]=h[6]+ea[6];b[7]=h[7]+ea[7];b[8]=h[8]+ea[8];b[9]=h[9]+ea[9];b[10]=h[10]+ea[10];b[11]=h[11]+ea[11];b[12]=h[12]+ea[12];b[13]=h[13]+ea[13];b[14]=h[14]+ea[14];b[15]=h[15]+ea[15];return b}function xa(b,h,ea){b[0]=h[0]-ea[0];b[1]=h[1]-ea[1];b[2]=h[2]-ea[2];b[3]=h[3]-ea[3];b[4]=h[4]-ea[4];b[5]=h[5]-ea[5];b[6]=h[6]-ea[6];b[7]=h[7]-ea[7];b[8]=h[8]-ea[8];
b[9]=h[9]-ea[9];b[10]=h[10]-ea[10];b[11]=h[11]-ea[11];b[12]=h[12]-ea[12];b[13]=h[13]-ea[13];b[14]=h[14]-ea[14];b[15]=h[15]-ea[15];return b}function Ba(b,h,ea){b[0]=h[0]*ea;b[1]=h[1]*ea;b[2]=h[2]*ea;b[3]=h[3]*ea;b[4]=h[4]*ea;b[5]=h[5]*ea;b[6]=h[6]*ea;b[7]=h[7]*ea;b[8]=h[8]*ea;b[9]=h[9]*ea;b[10]=h[10]*ea;b[11]=h[11]*ea;b[12]=h[12]*ea;b[13]=h[13]*ea;b[14]=h[14]*ea;b[15]=h[15]*ea;return b}function Ca(b,h,ea,ia){b[0]=h[0]+ea[0]*ia;b[1]=h[1]+ea[1]*ia;b[2]=h[2]+ea[2]*ia;b[3]=h[3]+ea[3]*ia;b[4]=h[4]+ea[4]*
ia;b[5]=h[5]+ea[5]*ia;b[6]=h[6]+ea[6]*ia;b[7]=h[7]+ea[7]*ia;b[8]=h[8]+ea[8]*ia;b[9]=h[9]+ea[9]*ia;b[10]=h[10]+ea[10]*ia;b[11]=h[11]+ea[11]*ia;b[12]=h[12]+ea[12]*ia;b[13]=h[13]+ea[13]*ia;b[14]=h[14]+ea[14]*ia;b[15]=h[15]+ea[15]*ia;return b}function Ja(b,h){return b[0]===h[0]&&b[1]===h[1]&&b[2]===h[2]&&b[3]===h[3]&&b[4]===h[4]&&b[5]===h[5]&&b[6]===h[6]&&b[7]===h[7]&&b[8]===h[8]&&b[9]===h[9]&&b[10]===h[10]&&b[11]===h[11]&&b[12]===h[12]&&b[13]===h[13]&&b[14]===h[14]&&b[15]===h[15]}function La(b,h){if(b===
h)return!0;const ea=b[0],ia=b[1],oa=b[2],v=b[3],G=b[4],Q=b[5],T=b[6],fa=b[7],ka=b[8],na=b[9],ra=b[10],sa=b[11],aa=b[12],da=b[13],ma=b[14];b=b[15];const ya=h[0],Da=h[1],Ga=h[2],Ha=h[3],Fa=h[4],Ka=h[5],ta=h[6],Wa=h[7],ab=h[8],$a=h[9],a=h[10],db=h[11],Sa=h[12],gb=h[13],nb=h[14];h=h[15];const Ya=ha.getEpsilon();return Math.abs(ea-ya)<=Ya*Math.max(1,Math.abs(ea),Math.abs(ya))&&Math.abs(ia-Da)<=Ya*Math.max(1,Math.abs(ia),Math.abs(Da))&&Math.abs(oa-Ga)<=Ya*Math.max(1,Math.abs(oa),Math.abs(Ga))&&Math.abs(v-
Ha)<=Ya*Math.max(1,Math.abs(v),Math.abs(Ha))&&Math.abs(G-Fa)<=Ya*Math.max(1,Math.abs(G),Math.abs(Fa))&&Math.abs(Q-Ka)<=Ya*Math.max(1,Math.abs(Q),Math.abs(Ka))&&Math.abs(T-ta)<=Ya*Math.max(1,Math.abs(T),Math.abs(ta))&&Math.abs(fa-Wa)<=Ya*Math.max(1,Math.abs(fa),Math.abs(Wa))&&Math.abs(ka-ab)<=Ya*Math.max(1,Math.abs(ka),Math.abs(ab))&&Math.abs(na-$a)<=Ya*Math.max(1,Math.abs(na),Math.abs($a))&&Math.abs(ra-a)<=Ya*Math.max(1,Math.abs(ra),Math.abs(a))&&Math.abs(sa-db)<=Ya*Math.max(1,Math.abs(sa),Math.abs(db))&&
Math.abs(aa-Sa)<=Ya*Math.max(1,Math.abs(aa),Math.abs(Sa))&&Math.abs(da-gb)<=Ya*Math.max(1,Math.abs(da),Math.abs(gb))&&Math.abs(ma-nb)<=Ya*Math.max(1,Math.abs(ma),Math.abs(nb))&&Math.abs(b-h)<=Ya*Math.max(1,Math.abs(b),Math.abs(h))}function Na(b){const h=ha.getEpsilon(),ea=b[0],ia=b[1],oa=b[2],v=b[4],G=b[5],Q=b[6],T=b[8],fa=b[9];b=b[10];return Math.abs(1-(ea*ea+v*v+T*T))<=h&&Math.abs(1-(ia*ia+G*G+fa*fa))<=h&&Math.abs(1-(oa*oa+Q*Q+b*b))<=h}const bb=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,
copy:K,set:r,identity:z,transpose:y,invert:m,adjoint:n,determinant:w,multiply:N,translate:Y,scale:I,rotate:k,rotateX:H,rotateY:d,rotateZ:l,fromTranslation:L,fromScaling:O,fromRotation:U,fromXRotation:V,fromYRotation:g,fromZRotation:p,fromRotationTranslation:x,fromQuat2:B,getTranslation:Z,getScaling:A,getRotation:C,fromRotationTranslationScale:J,fromRotationTranslationScaleOrigin:E,fromQuat:t,frustum:F,perspective:q,perspectiveFromFieldOfView:R,ortho:W,lookAt:P,targetTo:ja,str:ba,frob:qa,add:wa,subtract:xa,
multiplyScalar:Ba,multiplyScalarAndAdd:Ca,exactEquals:Ja,equals:La,isOrthoNormal:Na,mul:N,sub:xa},Symbol.toStringTag,{value:"Module"}));f.add=wa;f.adjoint=n;f.copy=K;f.determinant=w;f.equals=La;f.exactEquals=Ja;f.frob=qa;f.fromQuat=t;f.fromQuat2=B;f.fromRotation=U;f.fromRotationTranslation=x;f.fromRotationTranslationScale=J;f.fromRotationTranslationScaleOrigin=E;f.fromScaling=O;f.fromTranslation=L;f.fromXRotation=V;f.fromYRotation=g;f.fromZRotation=p;f.frustum=F;f.getRotation=C;f.getScaling=A;f.getTranslation=
Z;f.identity=z;f.invert=m;f.isOrthoNormal=Na;f.lookAt=P;f.mat4=c;f.mul=N;f.multiply=N;f.multiplyScalar=Ba;f.multiplyScalarAndAdd=Ca;f.ortho=W;f.perspective=q;f.perspectiveFromFieldOfView=R;f.rotate=k;f.rotateX=H;f.rotateY=d;f.rotateZ=l;f.scale=I;f.set=r;f.str=ba;f.sub=xa;f.subtract=xa;f.targetTo=ja;f.translate=Y;f.transpose=y})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(f,c,ha,K,r){function z(){return!!c._pe}function y(){return!!r("esri-wasm")}
function m(){return k?k:k=(new Promise((d,l)=>f(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>K.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{n(d)})}function n(d){function l(U,V,g){U[V]=g(U[V])}c._pe=d;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(U){function V(){return U.apply(this,arguments)||this}ha._inheritsLoose(V,U);V.prototype.destroy=function(){c._pe.destroy(this)};return V}(c._pe.PeGCSExtent);
d=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var L of d)l(L.prototype,"getName",U=>function(){return U.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const U of[c._pe.PeGeogtran,c._pe.PeProjcs])l(U.prototype,"getParameters",V=>function(){const g=Array(c.PeDefs.PE_PARM_MAX);let p=V.call(this);for(let x=0;x<g.length;x++){const B=c._pe.getValue(p,"*");g[x]=B?c._pe.wrapPointer(B,c._pe.PeParameter):null;
p+=Int32Array.BYTES_PER_ELEMENT}return g});l(c._pe.PeHorizon.prototype,"getCoord",U=>function(){const V=this.getSize();if(!V)return null;const g=[],p=U.call(this);I(g,V,p);return g});l(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",U=>{const V=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let g=null;var p=U.call(this);if(!c._pe.compare(p,c._pe.NULL)){g=[p];const x=this.getSteps();if(1<x){p=c._pe.getPointer(p);for(let B=1;B<x;B++)g.push(c._pe.wrapPointer(p+V*B,c._pe.PeGTlistExtendedGTs))}}return g}});
const O=c._pe._pe_getPeHorizonSize();L=U=>function(){let V=this._cache;V||(this._cache=V=new Map);if(V.has(U))return V.get(U);let g=null;var p=U.call(this);if(!c._pe.compare(p,c._pe.NULL)){g=[p];const x=p.getNump();if(1<x){p=c._pe.getPointer(p);for(let B=1;B<x;B++)g.push(c._pe.wrapPointer(p+O*B,c._pe.PeHorizon))}}V.set(U,g);return g};l(c._pe.PeProjcs.prototype,"horizonGcsGenerate",L);l(c._pe.PeProjcs.prototype,"horizonPcsGenerate",L);c._pe.PeObject.prototype.toString=function(U=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();
const V=c._pe.getPointer(this),g=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(V,U,g))}}function w(d){if(d){var l=c._pe.getClass(d);l&&(l=c._pe.getCache(l))&&(d=c._pe.getPointer(d))&&delete l[d]}}function N(d,l){const L=[];l=Array(l);for(let O=0;O<d;O++)L.push(c._pe.ensureInt8(l));return L}function Y(d){let l;Array.isArray(d[0])?(l=[],d.forEach(L=>{l.push(L[0],L[1])})):l=d;return l}function I(d,l,L,O=!1){if(O)for(O=0;O<2*l;O++)d[O]=c._pe.getValue(L+
O*Float64Array.BYTES_PER_ELEMENT,"double");else{O=0===d.length;for(let U=0;U<l;U++)O&&(d[U]=Array(2)),d[U][0]=c._pe.getValue(L,"double"),d[U][1]=c._pe.getValue(L+Float64Array.BYTES_PER_ELEMENT,"double"),L+=2*Float64Array.BYTES_PER_ELEMENT}}let k;c._pe=null;c.PeCSTransformations=void 0;(function(d){function l(U,V,g){c._pe.ensureCache.prepare();var p=Y(g);const x=g===p;p=c._pe.ensureFloat64(p);(U=c._pe._pe_geog_to_proj(c._pe.getPointer(U),V,p))&&I(g,V,p,x);return U}function L(U,V,g){return O(U,V,g,
0)}function O(U,V,g,p){c._pe.ensureCache.prepare();var x=Y(g);const B=g===x;x=c._pe.ensureFloat64(x);(U=c._pe._pe_proj_to_geog_center(c._pe.getPointer(U),V,x,p))&&I(g,V,x,B);return U}d.geogToProj=l;d.projGeog=function(U,V,g,p){switch(p){case c.PeDefs.PE_TRANSFORM_P_TO_G:return L(U,V,g);case c.PeDefs.PE_TRANSFORM_G_TO_P:return l(U,V,g)}return 0};d.projToGeog=L;d.projToGeogCenter=O})(c.PeCSTransformations||(c.PeCSTransformations={}));c.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;
d.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=
c._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=
c._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;
d.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));c.PeFactory=void 0;(function(d){function l(V,g){let p=null,x=L[V];x||(x={},L[V]=x);x.hasOwnProperty(String(g))?p=x[g]:(V=c._pe.PeFactory.prototype.factoryByType(V,g),c._pe.compare(V,c._pe.NULL)||(p=V,x[g]=p));return p=U(p)}const L={},O={},U=V=>{if(V){const g=V.getType();switch(g){case c.PeDefs.PE_TYPE_GEOGCS:V=c._pe.castObject(V,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:V=c._pe.castObject(V,c._pe.PeProjcs);
break;case c.PeDefs.PE_TYPE_GEOGTRAN:V=c._pe.castObject(V,c._pe.PeGeogtran);break;default:g&c.PeDefs.PE_TYPE_UNIT&&(V=c._pe.castObject(V,c._pe.PeUnit))}}return V};d.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(V){return l(c.PeDefs.PE_TYPE_COORDSYS,V)};d.factoryByType=l;d.fromString=function(V,g){let p=null,x=O[V];x||(x={},O[V]=x);x.hasOwnProperty(g)?p=x[g]:(V=c._pe.PeFactory.prototype.fromString(V,g),c._pe.compare(V,c._pe.NULL)||(p=V,x[g]=p));return p=U(p)};
d.geogcs=function(V){return l(c.PeDefs.PE_TYPE_GEOGCS,V)};d.geogtran=function(V){return l(c.PeDefs.PE_TYPE_GEOGTRAN,V)};d.getCode=function(V){return c._pe.PeFactory.prototype.getCode(V)};d.projcs=function(V){return l(c.PeDefs.PE_TYPE_PROJCS,V)};d.unit=function(V){return l(c.PeDefs.PE_TYPE_UNIT,V)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;c.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=c._pe._pe_getPeGTlistExtendedEntrySize()};
d.getGTlist=function(L,O,U,V,g,p){let x=null;const B=new c._pe.PeInteger(p);try{const Z=c._pe.PeGTlistExtended.prototype.getGTlist(L,O,U,V,g,B);if(p=B.val)if(x=[Z],1<p){const A=c._pe.getPointer(Z);for(L=1;L<p;L++)x.push(c._pe.wrapPointer(A+l*L,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(B)}return x}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));c.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const L of l)w(L),L.getEntries().forEach(O=>{w(O);O=O.getGeogtran();
w(O);O.getParameters().forEach(w);[O.getGeogcs1(),O.getGeogcs2()].forEach(U=>{w(U);const V=U.getDatum();w(V);w(V.getSpheroid());w(U.getPrimem());w(U.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(c.PeGTlistExtendedEntry||(c.PeGTlistExtendedEntry={}));c.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(l,L,O,U,V){c._pe.ensureCache.prepare();var g=Y(O);const p=O===g;g=c._pe.ensureFloat64(g);let x=0;U&&(x=c._pe.ensureFloat64(U));(l=c._pe._pe_geog_to_geog(c._pe.getPointer(l),
L,g,x,V))&&I(O,L,g,p);return l}})(c.PeGTTransformations||(c.PeGTTransformations={}));c.PeNotationDms=void 0;(function(d){const l=(O,U,V,g,p,x)=>{c._pe.ensureCache.prepare();switch(O){case "dd":var B=c._pe._pe_geog_to_dd;var Z=c.PeDefs.PE_DD_MAX;break;case "ddm":B=c._pe._pe_geog_to_ddm;Z=c.PeDefs.PE_DDM_MAX;break;case "dms":B=c._pe._pe_geog_to_dms,Z=c.PeDefs.PE_DMS_MAX}O=0;U&&(O=c._pe.getPointer(U));U=Y(g);U=c._pe.ensureFloat64(U);Z=N(V,Z);g=c._pe.ensureInt32(Z);if(p=B(O,V,U,p,g))for(B=0;B<V;B++)x[B]=
c._pe.UTF8ToString(Z[B]);return p},L=(O,U,V,g,p)=>{c._pe.ensureCache.prepare();switch(O){case "dd":var x=c._pe._pe_dd_to_geog;break;case "ddm":x=c._pe._pe_ddm_to_geog;break;case "dms":x=c._pe._pe_dms_to_geog}O=0;U&&(O=c._pe.getPointer(U));U=g.map(B=>c._pe.ensureString(B));g=c._pe.ensureInt32(U);U=c._pe.ensureFloat64(Array(2*V));(x=x(O,V,g,U))&&I(p,V,U);return x};d.geogToDms=function(O,U,V,g,p){return l("dms",O,U,V,g,p)};d.dmsToGeog=function(O,U,V,g){return L("dms",O,U,V,g)};d.geogToDdm=function(O,
U,V,g,p){return l("ddm",O,U,V,g,p)};d.ddmToGeog=function(O,U,V,g){return L("ddm",O,U,V,g)};d.geogToDd=function(O,U,V,g,p){return l("dd",O,U,V,g,p)};d.ddToGeog=function(O,U,V,g){return L("dd",O,U,V,g)}})(c.PeNotationDms||(c.PeNotationDms={}));c.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
d.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,L,O,U,V,g,p){c._pe.ensureCache.prepare();let x=0;l&&(x=c._pe.getPointer(l));l=Y(O);O=c._pe.ensureFloat64(l);l=N(L,c.PeDefs.PE_MGRS_MAX);const B=c._pe.ensureInt32(l);if(U=c._pe._pe_geog_to_mgrs_extended(x,L,O,U,V,g,B))for(V=0;V<L;V++)p[V]=c._pe.UTF8ToString(l[V]);return U};d.mgrsToGeogExtended=function(l,L,O,U,V){c._pe.ensureCache.prepare();
let g=0;l&&(g=c._pe.getPointer(l));l=O.map(p=>c._pe.ensureString(p));O=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*L));(U=c._pe._pe_mgrs_to_geog_extended(g,L,O,U,l))&&I(V,L,l);return U}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));c.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,L,O,U,V,g,p){c._pe.ensureCache.prepare();let x=0;l&&(x=c._pe.getPointer(l));l=Y(O);O=c._pe.ensureFloat64(l);l=N(L,c.PeDefs.PE_MGRS_MAX);const B=c._pe.ensureInt32(l);if(U=c._pe._pe_geog_to_usng(x,L,O,U,V,g,
B))for(V=0;V<L;V++)p[V]=c._pe.UTF8ToString(l[V]);return U};d.usngToGeog=function(l,L,O,U){c._pe.ensureCache.prepare();var V=0;l&&(V=c._pe.getPointer(l));l=O.map(g=>c._pe.ensureString(g));O=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*L));(V=c._pe._pe_usng_to_geog(V,L,O,l))&&I(U,L,l);return V}})(c.PeNotationUsng||(c.PeNotationUsng={}));c.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
d.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,L,O,U,V){c._pe.ensureCache.prepare();var g=0;l&&(g=c._pe.getPointer(l));l=Y(O);O=c._pe.ensureFloat64(l);l=N(L,c.PeDefs.PE_UTM_MAX);const p=c._pe.ensureInt32(l);if(U=c._pe._pe_geog_to_utm(g,L,O,U,p))for(g=0;g<L;g++)V[g]=c._pe.UTF8ToString(l[g]);return U};d.utmToGeog=function(l,L,O,U,V){c._pe.ensureCache.prepare();let g=0;l&&(g=c._pe.getPointer(l));l=O.map(p=>c._pe.ensureString(p));O=c._pe.ensureInt32(l);l=c._pe.ensureFloat64(Array(2*
L));(U=c._pe._pe_utm_to_geog(g,L,O,U,l))&&I(V,L,l);return U}})(c.PeNotationUtm||(c.PeNotationUtm={}));c.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(L,O=d.PE_PCSINFO_OPTION_DOMAIN){let U=
null,V=null;l.has(L)&&(V=l.get(L),V[O]&&(U=V[O]));U||(U=c._pe.PePCSInfo.prototype.generate(L,O),V||(V=[],l.set(L,V)),V[O]=U);return U}})(c.PePCSInfo||(c.PePCSInfo={}));c.PeVersion=void 0;(function(d){d.versionString=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));const H=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return c._pe},isLoaded:z,isSupported:y,load:m,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},
get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:n},
Symbol.toStringTag,{value:"Module"}));c._init=n;c.isLoaded=z;c.isSupported=y;c.load=m;c.pe=H})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(f,c){const ha=Math.PI/180;var K=c.earth.radius;const r=c.earth.eccentricitySquared;K={a1:K*r,a2:K*r*K*r,a3:K*r*r/2,a4:K*r*K*r*2.5,a5:K*r+K*r*r/2,a6:1-r};c={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,
f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,
f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};f.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;f.earthEllipsoidConstants=K;f.spheroids=c;f.toRadians=ha;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(f){return function(){function c(K){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(K&&K.steps)for(const r of K.steps)r instanceof f?this.steps.push(r):this.steps.push(new f({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}c.cacheKey=function(K,r){return[void 0!==K.wkid&&null!==K.wkid?K.wkid.toString():"-1",void 0!==K.wkt&&null!==K.wkt?K.wkt.toString():"",void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():""].join()};c.fromGE=function(K){const r=new c;let z="";for(const y of K.steps)K=
f.fromGE(y),r.steps.push(K),z+=K.uid.toString()+",";r._cachedProjection={};r._gtlistentry=null;r._chain=z;return r};var ha=c.prototype;ha.getInverse=function(){const K=new c;K.steps=[];for(let r=this.steps.length-1;0<=r;r--)K.steps.push(this.steps[r].getInverse());return K};ha.getGTListEntry=function(){let K="";for(const r of this.steps)K+=r.uid.toString()+",";K!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=K);return this._gtlistentry};ha.assignCachedGe=function(K,r,
z){this._cachedProjection[c.cacheKey(K,r)]=z};ha.getCachedGeTransformation=function(K,r){let z="";for(const y of this.steps)z+=y.uid.toString()+",";z!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=z);K=this._cachedProjection[c.cacheKey(K,r)];return void 0===K?null:K};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(f){let c=0;return function(){function ha(K){this.uid=c++;K?(this._wkt=
null!=K.wkt?K.wkt:null,this._wkid=null!=K.wkid?K.wkid:-1,this._isInverse=null!=K.isInverse?!0===K.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}ha.fromGE=function(K){const r=new ha;r._wkt=K.wkt;r._wkid=K.wkid;r._isInverse=K.isInverse;return r};ha.prototype.getInverse=function(){const K=new ha;K._wkt=this.wkt;K._wkid=this._wkid;K._isInverse=!this.isInverse;return K};f._createClass(ha,[{key:"wkt",get:function(){return this._wkt},set:function(K){this._wkt=K;this.uid=c++}},{key:"wkid",
get:function(){return this._wkid},set:function(K){this._wkid=K;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(K){this._isInverse=K;this.uid=c++}}]);return ha}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(f,c,ha,K){f.getGeometryZScaler=function(r,z,y){if(c.isNone(z)||c.isNone(y)||y.vcsWkid||K.equals(z,y))return null;z=ha.getMetersPerVerticalUnitForSR(z);y=ha.getMetersPerVerticalUnitForSR(y);
const m=z/y;if(1===m)return null;switch(r){case "point":case "esriGeometryPoint":return n=>{n&&null!=n.z&&(n.z*=m)};case "polyline":case "esriGeometryPolyline":return n=>{if(n)for(const w of n.paths)for(const N of w)2<N.length&&(N[2]*=m)};case "polygon":case "esriGeometryPolygon":return n=>{if(n)for(const w of n.rings)for(const N of w)2<N.length&&(N[2]*=m)};case "multipoint":case "esriGeometryMultipoint":return n=>{if(n)for(const w of n.points)2<w.length&&(w[2]*=m)};case "extent":case "esriGeometryExtent":return n=>
{n&&null!=n.zmin&&null!=n.zmax&&(n.zmin*=m,n.zmax*=m)};default:return null}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(f){let c=function(y,m,n){this.x=y;this.y=m;this.spatialReference=n;this.m=this.z=void 0},ha=function(y,m,n,w){this.rings=y;this.spatialReference=m;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);w&&(this.hasM=w)},K=function(y,m,n,w){this.paths=y;this.spatialReference=
m;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);w&&(this.hasM=w)},r=function(y,m,n,w){this.points=y;this.spatialReference=m;this.hasM=this.hasZ=void 0;n&&(this.hasZ=n);w&&(this.hasM=w)},z=function(y,m,n,w,N){this.xmin=y;this.ymin=m;this.xmax=n;this.ymax=w;this.spatialReference=N;this.mmax=this.mmin=this.zmax=this.zmin=void 0};f.jsonAdapter={convertToGEGeometry:function(y,m){return null==m?null:y.convertJSONToGeometry(m)},exportPoint:function(y,m,n){n=new c(y.getPointX(m),y.getPointY(m),n);const w=y.hasZ(m),
N=y.hasM(m);w&&(n.z=y.getPointZ(m));N&&(n.m=y.getPointM(m));return n},exportPolygon:function(y,m,n){return new ha(y.exportPaths(m),n,y.hasZ(m),y.hasM(m))},exportPolyline:function(y,m,n){return new K(y.exportPaths(m),n,y.hasZ(m),y.hasM(m))},exportMultipoint:function(y,m,n){return new r(y.exportPoints(m),n,y.hasZ(m),y.hasM(m))},exportExtent:function(y,m,n){var w=y.hasZ(m);const N=y.hasM(m);n=new z(y.getXMin(m),y.getYMin(m),y.getXMax(m),y.getYMax(m),n);w&&(w=y.getZExtent(m),n.zmin=w.vmin,n.zmax=w.vmax);
N&&(y=y.getMExtent(m),n.mmin=y.vmin,n.mmax=y.vmax);return n}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I,k,H,d,l,L,O,U,V,g,p,x,B){function Z(q){return q.every(R=>"exceedslimit"!==R.statisticType)}const A=new y.MemCacheStorage(2E6);let C=0,J=function(){function q(W){this.capabilities={query:L.queryCapabilities};this.geometryType=W.geometryType;this.hasM=W.hasM;this.hasZ=W.hasZ;this.objectIdField=W.objectIdField;this.spatialReference=W.spatialReference;this.definitionExpression=W.definitionExpression;this.featureStore=W.featureStore;this.aggregateAdapter=W.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=W.timeInfo;W.cacheSpatialQueries&&(this._geometryQueryCache=new y.MemCache(C++ +"$$",A));this.fieldsIndex=new p(W.fields);W.scheduler&&W.priority&&(this._frameTask=W.scheduler.registerTask(W.priority))}var R=q.prototype;R.destroy=function(){this._frameTask=z.removeMaybe(this._frameTask);this.clearCache();z.destroyMaybe(this._geometryQueryCache);this._changeHandle=z.removeMaybe(this._changeHandle);z.destroyMaybe(this.fieldsIndex)};
R.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtent=this._allItems=null};R.executeQuery=function(){var W=c._asyncToGenerator(function*(P,ja){try{return(yield this._executeQuery(P,{},ja)).createQueryResponse()}catch(ba){if(ba!==g.QUERY_ENGINE_EMPTY_RESULT)throw ba;return(new O.QueryEngineResult([],P,this)).createQueryResponse()}});return function(P,ja){return W.apply(this,arguments)}}();R.executeQueryForCount=function(){var W=c._asyncToGenerator(function*(P={},ja){try{return(yield this._executeQuery(P,
{returnGeometry:!1,returnCentroid:!1,outSR:null},ja)).createQueryResponseForCount()}catch(ba){if(ba!==g.QUERY_ENGINE_EMPTY_RESULT)throw ba;return 0}});return function(){return W.apply(this,arguments)}}();R.executeQueryForExtent=function(){var W=c._asyncToGenerator(function*(P,ja){const ba=P.outSR;try{const qa=yield this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),wa=qa.size;if(!wa)return{count:0,extent:null};n.set(t,n.NEGATIVE_INFINITY);this.featureStore.forEachBounds(qa.items,
Ca=>n.expandWithAABB(t,Ca),E);const xa={xmin:t[0],ymin:t[1],xmax:t[3],ymax:t[4],spatialReference:g.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(t[2])&&isFinite(t[5])&&(xa.zmin=t[2],xa.zmax=t[5]);const Ba=l.project(xa,qa.spatialReference,ba);Ba.spatialReference=g.cleanFromGeometryEngine(ba||this.spatialReference);if(0===Ba.xmax-Ba.xmin){const Ca=m.getMetersPerUnitForSR(Ba.spatialReference);Ba.xmin-=Ca;Ba.xmax+=Ca}if(0===Ba.ymax-Ba.ymin){const Ca=m.getMetersPerUnitForSR(Ba.spatialReference);
Ba.ymin-=Ca;Ba.ymax+=Ca}if(this.hasZ&&null!=Ba.zmin&&null!=Ba.zmax&&0===Ba.zmax-Ba.zmin){const Ca=m.getMetersPerUnitForSR(Ba.spatialReference);Ba.zmin-=Ca;Ba.zmax+=Ca}return{count:wa,extent:Ba}}catch(qa){if(qa===g.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(P,ja){return W.apply(this,arguments)}}();R.executeQueryForIds=function(){var W=c._asyncToGenerator(function*(P,ja){return this.executeQueryForIdSet(P,ja).then(ba=>Array.from(ba))});return function(P,ja){return W.apply(this,
arguments)}}();R.executeQueryForIdSet=function(){var W=c._asyncToGenerator(function*(P,ja){try{const ba=yield this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},ja),qa=ba.items,wa=new Set;yield this._reschedule(()=>{for(const xa of qa)wa.add(ba.featureAdapter.getObjectId(xa))},ja);return wa}catch(ba){if(ba===g.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ba;}});return function(P,ja){return W.apply(this,arguments)}}();R.executeQueryForSnapping=function(){var W=c._asyncToGenerator(function*(P,
ja){const {point:ba,distance:qa,types:wa}=P;if(wa===O.SnappingTypes.NONE)return{candidates:[]};const xa=yield this._reschedule(()=>this._checkQuerySupport(P.query),ja),Ba=!k.equals(ba.spatialReference,this.spatialReference);Ba&&(yield l.checkProjectionSupport(ba.spatialReference,this.spatialReference));var Ca="number"===typeof qa?qa:qa.x,Ja="number"===typeof qa?qa:qa.y;Ca={xmin:ba.x-Ca,xmax:ba.x+Ca,ymin:ba.y-Ja,ymax:ba.y+Ja,spatialReference:ba.spatialReference};Ca=Ba?l.project(Ca,this.spatialReference):
Ca;if(!Ca)return{candidates:[]};Ja=(yield I.normalizeCentralMeridian(Y.fromJSON(ba),null,{signal:ja}))[0];const La=(yield I.normalizeCentralMeridian(Y.fromJSON(Ca),null,{signal:ja}))[0];if(z.isNone(Ja)||z.isNone(La))return{candidates:[]};const Na=new O.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(La.toJSON())),xa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),ja);yield this._reschedule(()=>this._executeTimeQuery(Na),ja);yield this._reschedule(()=>this._executeAttributesQuery(Na),
ja);ja=Ja.toJSON();ja=Ba?l.project(ja,this.spatialReference):ja;return Na.createSnappingResponse({...P,point:ja,distance:Ba?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:qa},ba.spatialReference)});return function(P,ja){return W.apply(this,arguments)}}();R.executeQueryForLatestObservations=function(){var W=c._asyncToGenerator(function*(P,ja){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new K("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:P,timeInfo:this.timeInfo});
try{const ba=yield this._executeQuery(P,{},ja);yield this._reschedule(()=>this._filterLatest(ba),ja);return ba.createQueryResponse()}catch(ba){if(ba!==g.QUERY_ENGINE_EMPTY_RESULT)throw ba;return(new O.QueryEngineResult([],P,this)).createQueryResponse()}});return function(P,ja){return W.apply(this,arguments)}}();R.executeQueryForSummaryStatistics=function(){var W=c._asyncToGenerator(function*(P={},ja,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(P,
{field:qa,normalizationField:wa,valueExpression:xa},ba)).createSummaryStatisticsResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForUniqueValues=function(){var W=c._asyncToGenerator(function*(P={},ja,ba){const {field:qa,field2:wa,field3:xa,valueExpression:Ba}=ja;return(yield this._getQueryEngineResultForStats(P,{field:qa,field2:wa,field3:xa,valueExpression:Ba},ba)).createUniqueValuesResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForClassBreaks=
function(){var W=c._asyncToGenerator(function*(P={},ja,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(P,{field:qa,normalizationField:wa,valueExpression:xa},ba)).createClassBreaksResponse(ja)});return function(){return W.apply(this,arguments)}}();R.executeQueryForHistogram=function(){var W=c._asyncToGenerator(function*(P={},ja,ba){const {field:qa,normalizationField:wa,valueExpression:xa}=ja;return(yield this._getQueryEngineResultForStats(P,
{field:qa,normalizationField:wa,valueExpression:xa},ba)).createHistogramResponse(ja)});return function(){return W.apply(this,arguments)}}();R._schedule=function(){var W=c._asyncToGenerator(function*(P,ja){return z.isSome(this._frameTask)?this._frameTask.schedule(P,ja):P(B.noBudget)});return function(P,ja){return W.apply(this,arguments)}}();R._reschedule=function(){var W=c._asyncToGenerator(function*(P,ja){return z.isSome(this._frameTask)?this._frameTask.reschedule(P,ja):P(B.noBudget)});return function(P,
ja){return W.apply(this,arguments)}}();R._getAll=function(W){z.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new O.QueryEngineResult(this._allItems,W,this)};R._executeQuery=function(){var W=c._asyncToGenerator(function*(P,ja,ba){P=r.clone(P);P=yield this._schedule(()=>g.normalizeQuery(P,this.definitionExpression,this.spatialReference),ba);P=yield this._reschedule(()=>this._checkQuerySupport(P),ba);P={...P,...ja};const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(P,
ba),ba),wa=yield this._reschedule(()=>this._executeGeometryQuery(P,qa,ba),ba);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ba);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ba);yield this._reschedule(()=>this._executeTimeQuery(wa),ba);yield this._reschedule(()=>this._executeAttributesQuery(wa),ba);return wa});return function(P,ja,ba){return W.apply(this,arguments)}}();R._executeSceneFilterQuery=function(){var W=c._asyncToGenerator(function*(P,ja){var ba=this;if(z.isNone(P.sceneFilter))return null;
const {outSR:qa,returnGeometry:wa,returnCentroid:xa}=P;var Ba=this.featureStore.featureSpatialReference,Ca=P.sceneFilter.geometry;const Ja=z.isNone(Ba)||k.equals(Ba,Ca.spatialReference)?Ca:l.project(Ca,Ba);if(!Ja)return null;Ba=wa||xa;Ba=k.isValid(qa)&&!k.equals(this.spatialReference,qa)&&Ba?function(){var b=c._asyncToGenerator(function*(h){return ba._project(h,qa)});return function(h){return b.apply(this,arguments)}}():b=>b;const La=this.featureAdapter;Ca=this._searchFeatures(this._getQueryBBoxes(Ja));
if("disjoint"===P.sceneFilter.spatialRelationship){if(!Ca.length)return null;const b=new Set;for(var Na of Ca)b.add(La.getObjectId(Na));const h=yield this._reschedule(()=>this.featureStore.toArray(),ja);Na=yield this._reschedule(c._asyncToGenerator(function*(){const ea=yield U.getSpatialQueryOperator("esriSpatialRelDisjoint",Ja,ba.geometryType,ba.hasZ,ba.hasM),ia=yield ba._runSpatialFilter(h,oa=>!b.has(La.getObjectId(oa))||ea(La.getGeometry(oa)),ja);return new O.QueryEngineResult(ia,P,ba)}),ja);return Ba(Na)}if(!Ca.length)return new O.QueryEngineResult([],
P,this);if(this._canExecuteSinglePass(Ja,P))return Ba(new O.QueryEngineResult(Ca,P,this));const bb=yield U.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Ca,b=>bb(La.getGeometry(b)),ja);return Ba(new O.QueryEngineResult(Na,P,this))});return function(P,ja){return W.apply(this,arguments)}}();R._executeGeometryQuery=function(){var W=c._asyncToGenerator(function*(P,ja,ba){var qa=this;if(z.isSome(ja)&&0===ja.items.length)return ja;
P=z.isSome(ja)?ja.query:P;const {geometry:wa,outSR:xa,spatialRel:Ba,returnGeometry:Ca,returnCentroid:Ja}=P;var La=this.featureStore.featureSpatialReference;const Na=!wa||z.isNone(La)||k.equals(La,wa.spatialReference)?wa:l.project(wa,La),bb=Ca||Ja,b=k.isValid(xa)&&!k.equals(this.spatialReference,xa),h=this._geometryQueryCache&&z.isNone(ja)?b&&bb?JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba,outSpatialReference:xa}):JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba}):
null;La=h?this._geometryQueryCache.get(h):null;if(z.isSome(La))return new O.QueryEngineResult(La,P,this);La=function(){var G=c._asyncToGenerator(function*(Q){b&&bb&&(yield qa._project(Q,xa));h&&qa._geometryQueryCache.put(h,Q.items,Q.items.length+1);return Q});return function(Q){return G.apply(this,arguments)}}();if(!Na)return La(z.isSome(ja)?ja:this._getAll(P));const ea=this.featureAdapter;let ia=this._searchFeatures(this._getQueryBBoxes(wa));if("esriSpatialRelDisjoint"===Ba){if(!ia.length)return La(z.isSome(ja)?
ja:this._getAll(P));const G=new Set;for(var oa of ia)G.add(ea.getObjectId(oa));const Q=z.isSome(ja)?ja.items:yield this._reschedule(()=>this.featureStore.toArray(),ba);oa=yield this._reschedule(c._asyncToGenerator(function*(){const T=yield U.getSpatialQueryOperator(Ba,Na,qa.geometryType,qa.hasZ,qa.hasM),fa=yield qa._runSpatialFilter(Q,ka=>!G.has(ea.getObjectId(ka))||T(ea.getGeometry(ka)),ba);return new O.QueryEngineResult(fa,P,qa)}),ba);return La(oa)}if(z.isSome(ja)){const G=new ha.PositionHint;ia=
ia.filter(Q=>0<=ha.indexOf(ja.items,Q,ja.items.length,G))}if(!ia.length)return La=new O.QueryEngineResult([],P,this),h&&this._geometryQueryCache.put(h,La.items,1),La;if(this._canExecuteSinglePass(Na,P))return La(new O.QueryEngineResult(ia,P,this));const v=yield U.getSpatialQueryOperator(Ba,Na,this.geometryType,this.hasZ,this.hasM);oa=yield this._runSpatialFilter(ia,G=>v(ea.getGeometry(G)),ba);return La(new O.QueryEngineResult(oa,P,this))});return function(P,ja,ba){return W.apply(this,arguments)}}();
R._executeAggregateIdsQuery=function(W){if(0!==W.items.length&&W.query.aggregateIds&&W.query.aggregateIds.length&&!z.isNone(this.aggregateAdapter)){var P=new Set;for(const ba of W.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ba).forEach(qa=>P.add(qa));var ja=this.featureAdapter.getObjectId;W.items=W.items.filter(ba=>P.has(ja(ba)))}};R._executeObjectIdsQuery=function(W){if(0!==W.items.length&&W.query.objectIds&&W.query.objectIds.length){var P=new Set(W.query.objectIds),ja=this.featureAdapter.getObjectId;
W.items=W.items.filter(ba=>P.has(ja(ba)))}};R._executeTimeQuery=function(W){if(0!==W.items.length){var P=V.getTimeOperator(this.timeInfo,W.query.timeExtent,this.featureAdapter);z.isNone(P)||(W.items=W.items.filter(P))}};R._executeAttributesQuery=function(W){if(0!==W.items.length){var P=d.getWhereClause(W.query.where,this.fieldsIndex);if(P){if(!P.isStandardized)throw new TypeError("Where clause is not standardized");W.items=W.items.filter(ja=>P.testFeature(ja,this.featureAdapter))}}};R._runSpatialFilter=
function(){var W=c._asyncToGenerator(function*(P,ja,ba){var qa=this;if(!ja)return P;if(z.isNone(this._frameTask))return P.filter(Ca=>ja(Ca));let wa=0;const xa=[],Ba=function(){var Ca=c._asyncToGenerator(function*(Ja){for(;wa<P.length;){const La=P[wa++];ja(La)&&(xa.push(La),Ja.madeProgress());Ja.done&&(yield qa._reschedule(Na=>Ba(Na),ba))}});return function(Ja){return Ca.apply(this,arguments)}}();return this._reschedule(Ca=>Ba(Ca),ba).then(()=>xa)});return function(P,ja,ba){return W.apply(this,arguments)}}();
R._filterLatest=function(W){const {trackIdField:P,startTimeField:ja,endTimeField:ba}=this.timeInfo,qa=ba||ja,wa=new Map,xa=this.featureAdapter.getAttribute;for(const Ba of W.items){const Ca=xa(Ba,P),Ja=xa(Ba,qa),La=wa.get(Ca);(!La||Ja>xa(La,qa))&&wa.set(Ca,Ba)}W.items=Array.from(wa.values())};R._canExecuteSinglePass=function(W,P){({spatialRel:P}=P);return U.canQueryWithRBush(W)&&("esriSpatialRelEnvelopeIntersects"===P||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===P||"esriSpatialRelContains"===
P||"esriSpatialRelWithin"===P))};R._project=function(){var W=c._asyncToGenerator(function*(P,ja){if(!ja||k.equals(this.spatialReference,ja))return P;const ba=this.featureAdapter;ja=yield l.projectMany(P.items.map(qa=>g.getGeometry(this.geometryType,this.hasZ,this.hasM,ba.getGeometry(qa))),this.spatialReference,ja);P.items=ja.map((qa,wa)=>ba.cloneWithGeometry(P.items[wa],H.convertFromGeometry(qa,this.hasZ,this.hasM)));return P});return function(P,ja){return W.apply(this,arguments)}}();R._getQueryBBoxes=
function(W){if(U.canQueryWithRBush(W)){if(Y.isExtent(W))return[w.fromValues(W.xmin,W.ymin,W.xmax,W.ymax)];if(Y.isPolygon(W))return W.rings.map(P=>w.fromValues(Math.min(P[0][0],P[2][0]),Math.min(P[0][1],P[2][1]),Math.max(P[0][0],P[2][0]),Math.max(P[0][1],P[2][1])))}return[N.getBoundsXY(w.create(),W)]};R._searchFeatures=function(W){for(const P of W)this.featureStore.forEachInBounds(P,ja=>F.add(ja));W=Array.from(F.values());F.clear();return W};R._checkStatisticsSupport=function(){var W=c._asyncToGenerator(function*(P,
ja){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||P.pixelSize||P.relationParam||P.text||P.outStatistics||P.groupByFieldsForStatistics||P.having||P.orderByFields)throw new K("feature-store:unsupported-query","Unsupported query options",{query:P});this._checkAttributesQuerySupport(P);return Promise.all([this._checkStatisticsParamsSupport(ja),U.checkSpatialQuerySupport(P,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,P.outSR)]).then(()=>P)});
return function(P,ja){return W.apply(this,arguments)}}();R._checkStatisticsParamsSupport=function(){var W=c._asyncToGenerator(function*(P){var ja=[];P.valueExpression&&({arcadeUtils:ja}=yield x.loadArcade(),ja=ja.extractFieldNames(P.valueExpression));P.field&&ja.push(P.field);P.field2&&ja.push(P.field2);P.field3&&ja.push(P.field3);P.normalizationField&&ja.push(P.normalizationField);if(!ja.length)throw new K("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:P});d.validateFields(this.fieldsIndex,ja,"params contains missing fields")});return function(P){return W.apply(this,arguments)}}();R._checkQuerySupport=function(){var W=c._asyncToGenerator(function*(P){if(0>P.distance||null!=P.geometryPrecision||P.multipatchOption||P.pixelSize||P.relationParam||P.text)throw new K("feature-store:unsupported-query","Unsupported query options",{query:P});this._checkAttributesQuerySupport(P);this._checkStatisticsQuerySupport(P);return Promise.all([U.checkSpatialQuerySupport(P,
this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,P.outSR)]).then(()=>P)});return function(P){return W.apply(this,arguments)}}();R._checkAttributesQuerySupport=function(W){const {outFields:P,orderByFields:ja,returnDistinctValues:ba,outStatistics:qa}=W,wa=qa?qa.map(xa=>xa.outStatisticFieldName&&xa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ja&&0<ja.length){const xa=ja.map(Ba=>{const Ca=Ba.toLowerCase();return Ca.includes(" asc")?Ca.split(" asc")[0]:
Ca.includes(" desc")?Ca.split(" desc")[0]:Ba}).filter(Ba=>!wa.includes(Ba));d.validateFields(this.fieldsIndex,xa,"orderByFields contains missing fields")}if(P&&0<P.length)d.validateFields(this.fieldsIndex,P,"outFields contains missing fields");else if(ba)throw new K("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:W});d.validateWhere(this.fieldsIndex,W.where)};R._checkStatisticsQuerySupport=function(W){const {outStatistics:P,groupByFieldsForStatistics:ja,
having:ba}=W;var qa=ja&&ja.length,wa=P&&P.length;if(ba){if(!qa||!wa)throw new K("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:W});d.validateHaving(this.fieldsIndex,ba,P)}if(wa&&Z(P)){wa=P.map(xa=>xa.onStatisticField).filter(Boolean);d.validateFields(this.fieldsIndex,wa,"onStatisticFields contains missing fields");qa&&d.validateFields(this.fieldsIndex,ja,"groupByFieldsForStatistics contains missing fields");for(const xa of P){const {onStatisticField:Ba,
statisticType:Ca}=xa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in xa){if({statisticParameters:qa}=xa,!qa)throw new K("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:W});}else if("count"!==Ca&&Ba&&d.hasInvalidFieldType(Ba,this.fieldsIndex))throw new K("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:W});}}};R._getQueryEngineResultForStats=function(){var W=
c._asyncToGenerator(function*(P,ja,ba){P=r.clone(P);try{P=yield this._schedule(()=>g.normalizeQuery(P,this.definitionExpression,this.spatialReference),ba);P=yield this._reschedule(()=>this._checkStatisticsSupport(P,ja),ba);const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(P,ba),ba),wa=yield this._reschedule(()=>this._executeGeometryQuery(P,qa,ba),ba);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ba);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ba);yield this._reschedule(()=>
this._executeTimeQuery(wa),ba);yield this._reschedule(()=>this._executeAttributesQuery(wa),ba);return wa}catch(qa){if(qa!==g.QUERY_ENGINE_EMPTY_RESULT)throw qa;return new O.QueryEngineResult([],P,this)}});return function(P,ja,ba){return W.apply(this,arguments)}}();c._createClass(q,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const W=this.featureStore.fullBounds;return z.isNone(W)?null:{xmin:W[0],ymin:W[1],xmax:W[2],ymax:W[3],spatialReference:g.cleanFromGeometryEngine(this.spatialReference)}}},
{key:"timeExtent",get:function(){if(!this.timeInfo)return null;this._timeExtent||(this._timeExtent=V.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return q}();const E=n.create(),t=n.create(),F=new Set;f.Feature=function(q,R=null,W,P,ja){this.attributes=q;this.geometry=W;this.centroid=P;this.filterFlags=ja;this.groupId=-1;this.displayId=R};f.QueryEngine=J;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(f,c,ha,K){f.RemoveMode=void 0;(function(y){y[y.ALL=0]="ALL";y[y.SOME=1]="SOME"})(f.RemoveMode||(f.RemoveMode={}));let r=function(){function y(n,w,N){this._namespace=n;this._storage=w;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";N&&(this._storage.registerRemoveFunc(this._namespace,N),this._removeFunc=!0)}var m=y.prototype;m.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};m.resetHitRate=function(){this._hit=this._miss=0};m.put=function(n,w,N,Y=0){this._storage.put(this._namespace+n,w,N,Y)};m.get=function(n){n=this._storage.get(this._namespace+n);void 0===n?++this._miss:++this._hit;return n};m.pop=function(n){n=this._storage.pop(this._namespace+n);void 0===n?++this._miss:++this._hit;return n};m.updateSize=function(n,w,N){this._storage.updateSize(this._namespace+
n,w,N)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};c._createClass(y,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return y}(),
z=function(){function y(n=10485760){this._maxSize=n;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new K;this._users=new K}var m=y.prototype;m.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};m.register=function(n){this._users.push(n)};m.deregister=function(n){this._users.removeUnordered(n)};m.registerRemoveFunc=function(n,w){this._removeFuncs.push([n,w])};m.deregisterRemoveFunc=function(n){this._removeFuncs.filterInPlace(w=>w[0]!==
n)};m.put=function(n,w,N,Y){const I=this._db.get(n);I&&(this._size-=I.size,this._db.delete(n),I.entry!==w&&this._notifyRemove(n,I.entry,f.RemoveMode.ALL));N>this._maxSize?this._notifyRemove(n,w,f.RemoveMode.ALL):void 0===w?console.warn("Refusing to cache undefined entry "):!N||0>N?console.warn("Refusing to cache entry with invalid size "+N):(Y=1+Math.max(Y,-3)- -3,this._db.set(n,{entry:w,size:N,lifetime:Y,lives:Y}),this._size+=N,this._checkSizeLimit())};m.updateSize=function(n,w,N){const Y=this._db.get(n);
if(Y&&Y.entry===w){for(this._size-=Y.size;N>this._maxSize;)if(N=this._notifyRemove(n,w,f.RemoveMode.SOME),!(ha.isSome(N)&&0<N)){this._db.delete(n);return}Y.size=N;this._size+=N;this._checkSizeLimit()}};m.pop=function(n){const w=this._db.get(n);if(w)return this._size-=w.size,this._db.delete(n),++this._hit,w.entry;++this._miss};m.get=function(n){const w=this._db.get(n);if(void 0===w)++this._miss;else return this._db.delete(n),w.lives=w.lifetime,this._db.set(n,w),++this._hit,w.entry};m.getStats=function(){const n=
{Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},w={},N=[];this._db.forEach((k,H)=>{const d=k.lifetime;N[d]=(N[d]||0)+k.size;this._users.forAll(l=>{l=l.namespace;H.startsWith(l)&&(w[l]=(w[l]||0)+k.size)})});const Y={};this._users.forAll(k=>{const H=k.namespace;!isNaN(k.hitRate)&&0<k.hitRate?(w[H]=w[H]||0,Y[H]=Math.round(100*k.hitRate)+"%"):Y[H]="0%"});var I=Object.keys(w);I.sort((k,H)=>
w[H]-w[k]);I.forEach(k=>n[k]=Math.round(w[k]/2**20)+"MB / "+Y[k]);for(I=N.length-1;0<=I;--I){const k=N[I];k&&(n["Priority "+(I+-3-1)]=Math.round(k/this.size*100)+"%")}return n};m.resetStats=function(){this._hit=this._miss=0;this._users.forAll(n=>n.resetHitRate())};m.clear=function(n){this._db.forEach((w,N)=>{N.startsWith(n)&&(this._size-=w.size,this._db.delete(N),this._notifyRemove(N,w.entry,f.RemoveMode.ALL))})};m.clearAll=function(){this._db.forEach((n,w)=>this._notifyRemove(w,n.entry,f.RemoveMode.ALL));
this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemove=function(n,w,N){let Y;this._removeFuncs.some(I=>n.startsWith(I[0])?(I=I[1](w,N),"number"===typeof I&&(Y=I),!0):!1);return Y};m._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [n,w]of this._db){this._db.delete(n);if(1>=w.lives){this._size-=w.size;const N=this._notifyRemove(n,w.entry,f.RemoveMode.SOME);ha.isSome(N)&&0<N&&(this._size+=N,w.lives=w.lifetime,w.size=N,this._db.set(n,
w))}else--w.lives,this._db.set(n,w);if(this._size<=.9*this.maxSize)break}};c._createClass(y,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(n){this._maxSize=Math.max(n,0);this._checkSizeLimit()}}]);return y}();f.MIN_PRIORITY=-3;f.MemCache=r;f.MemCacheStorage=z;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I){function k(g){const p=[];let x=0,B=0;for(let Z=0;Z<g.length;Z++){const A=g[Z];let C=null;for(let J=0;J<A.length;J++)C=A[J],p.push(C),0===J?B=x=C[0]:(x=Math.min(x,C[0]),B=Math.max(B,C[0]));C&&p.push([(x+B)/2,0])}return p}function H(g,p){if(!(g instanceof m||g instanceof y))throw V.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new K("straightLineDensify: the input geometry is neither polyline nor polygon");var x=n.getGeometryParts(g);
const B=[];for(const A of x){x=[];B.push(x);x.push([A[0][0],A[0][1]]);for(let C=0;C<A.length-1;C++){const J=A[C][0],E=A[C][1],t=A[C+1][0],F=A[C+1][1];var Z=Math.sqrt((t-J)*(t-J)+(F-E)*(F-E));const q=(F-E)/Z,R=(t-J)/Z,W=Z/p;if(1<W){for(let P=1;P<=W-1;P++){const ja=P*p;x.push([R*ja+J,q*ja+E])}Z=(Z+Math.floor(W-1)*p)/2;x.push([R*Z+J,q*Z+E])}x.push([t,F])}}return"polygon"===g.type?new y({rings:B,spatialReference:g.spatialReference}):new m({paths:B,spatialReference:g.spatialReference})}function d(g,p,
x){p&&(g=H(g,1E6),g=N.webMercatorToGeographic(g,!0));x&&(g=n.updatePolyGeometry(g,x));return g}function l(g,p,x){if(Array.isArray(g)){var B=g[0];B>p?(x=n.offsetMagnitude(B,p),g[0]=B+-2*x*p):B<x&&(p=n.offsetMagnitude(B,x),g[0]=B+-2*p*x)}else B=g.x,B>p?(x=n.offsetMagnitude(B,p),g=g.clone().offset(-2*x*p,0)):B<x&&(p=n.offsetMagnitude(B,x),g=g.clone().offset(-2*p*x,0));return g}function L(g,p){let x=-1;for(let B=0;B<p.cutIndexes.length;B++){const Z=p.cutIndexes[B],A=p.geometries[B],C=n.getGeometryParts(A);
for(let J=0;J<C.length;J++){const E=C[J];E.some(t=>{if(180>t[0])return!0;t=0;for(var F=0;F<E.length;F++){var q=E[F][0];t=q>t?q:t}t=Number(t.toFixed(9));t=-360*n.offsetMagnitude(t,180);for(F=0;F<E.length;F++)q=A.getPoint(J,F),A.setPoint(J,F,q.clone().offset(t,0));return!0})}if(Z===x)if("polygon"===g[0].type)for(const J of n.getGeometryParts(A))g[Z]=g[Z].addRing(J);else{if("polyline"===g[0].type)for(const J of n.getGeometryParts(A))g[Z]=g[Z].addPath(J)}else x=Z,g[Z]=A}return g}function O(g,p,x){return U.apply(this,
arguments)}function U(){U=c._asyncToGenerator(function*(g,p,x){if(!Array.isArray(g))return O([g],p);p&&"string"!==typeof p&&V.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var B="string"===typeof p?p:p?.url??ha.geometryServiceUrl;let Z,A,C;let J=0;var E=[];p=[];for(var t of g)if(z.isNone(t))p.push(t);else{if(!F){var F=t.spatialReference;var q=w.getInfo(F);var R=(Z=F.isWebMercator)?102100:4326;A=n.cutParams[R].maxX;C=n.cutParams[R].minX;var W=n.cutParams[R].plus180Line;
R=n.cutParams[R].minus180Line}if(q)if("mesh"===t.type)p.push(t);else if("point"===t.type)p.push(l(t.clone(),A,C));else if("multipoint"===t.type){var P=t.clone();P.points=P.points.map(ja=>l(ja,A,C));p.push(P)}else if("extent"===t.type)P=t.clone()._normalize(!1,!1,q),p.push(P.rings?new y(P):P);else if(t.extent){P=t.extent;const ja=2*n.offsetMagnitude(P.xmin,C)*A;let ba=0===ja?t.clone():n.updatePolyGeometry(t.clone(),ja);P.offset(ja,0);P.intersects(W)&&P.xmax!==A?(J=P.xmax>J?P.xmax:J,ba=d(ba,Z),E.push(ba),
p.push("cut")):P.intersects(R)&&P.xmin!==C?(J=2*P.xmax*A>J?2*P.xmax*A:J,ba=d(ba,Z,360),E.push(ba),p.push("cut")):p.push(ba)}else p.push(t.clone());else p.push(t)}F=n.offsetMagnitude(J,A);q=-90;W=F;for(t=new m;0<F;)R=-180+360*F,t.addPath([[R,q],[R,-1*q]]),q*=-1,F--;if(0<E.length&&0<W){F=yield Y.cut(B,E,t,x);F=L(E,F);q=[];E=[];for(W=0;W<p.length;W++)t=p[W],"cut"!==t?E.push(t):(t=F.shift(),R=g[W],z.isSome(R)&&"polygon"===R.type&&R.rings&&1<R.rings.length&&t.rings.length>=R.rings.length?(q.push(t),E.push("simplify")):
E.push(Z?N.geographicToWebMercator(t):t));if(!q.length)return E;p=yield I.simplify(B,q,x);g=[];for(x=0;x<E.length;x++)B=E[x],"simplify"!==B?g.push(B):g.push(Z?N.geographicToWebMercator(p.shift()):p.shift());return g}g=[];for(x=0;x<p.length;x++)B=p[x],"cut"!==B?g.push(B):(B=E.shift(),g.push(!0===Z?N.geographicToWebMercator(B):B));return g});return U.apply(this,arguments)}const V=r.getLogger("esri.geometry.support.normalizeUtils");f.getDenormalizedExtent=function(g){if(!g)return null;const p=g.extent;
if(!p)return null;var x=g.spatialReference&&w.getInfo(g.spatialReference);if(!x)return p;const [B,Z]=x.valid;({width:x}=p);let {xmin:A,xmax:C}=p;[A,C]=[C,A];if("extent"===g.type||0===x||x<=Z||x>2*Z||A<B||C>Z)return p;let J;switch(g.type){case "polygon":if(1<g.rings.length)J=k(g.rings);else return p;break;case "polyline":if(1<g.paths.length)J=k(g.paths);else return p;break;case "multipoint":J=g.points}g=p.clone();for(let E=0;E<J.length;E++){let t=J[E][0];0>t?(t+=Z,C=Math.max(t,C)):(t-=Z,A=Math.min(t,
A))}g.xmin=A;g.xmax=C;return g.width<x?(g.xmin-=Z,g.xmax-=Z,g):p};f.normalizeCentralMeridian=O;f.normalizeMapX=function(g,p){if(p=w.getInfo(p)){const [x,B]=p.valid;p=B-x;if(g<x)for(;g<x;)g+=p;if(g>B)for(;g>B;)g-=p}return g};f.straightLineDensify=H;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(f,c,ha,K){function r(z){return K.isPolygon(z)?
z.rings:z.paths}c={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:ha.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:ha.WGS84}),minus180Line:new c({paths:[[[-180,
-180],[-180,180]]],spatialReference:ha.WGS84})}};f.cutParams=c;f.getGeometryParts=r;f.offsetMagnitude=function(z,y){return Math.ceil((z-y)/(2*y))};f.updatePolyGeometry=function(z,y){const m=r(z);for(const n of m)for(const w of n)w[0]+=y;return z};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(f,c,ha,K,r,z){function y(){y=c._asyncToGenerator(function*(m,n,w,N){m=z.parseUrl(m);const Y=n[0].spatialReference;n={...N,query:{...m.query,f:"json",sr:JSON.stringify(Y),target:JSON.stringify({geometryType:r.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(w)}};n=yield K(m.path+"/cut",n);const {cutIndexes:I,geometries:k=[]}=n.data;return{cutIndexes:I,geometries:k.map(H=>{H=r.fromJSON(H);H.spatialReference=Y;return H})}});return y.apply(this,arguments)}f.cut=function(m,n,w,N){return y.apply(this,
arguments)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(f,c,ha,K,r,z){function y(m,n,w){const N={};for(const I in m)if("declaredClass"!==I){var Y=m[I];if(null!=Y&&"function"!==typeof Y)if(Array.isArray(Y)){N[I]=[];for(let k=0;k<Y.length;k++)N[I][k]=y(Y[k])}else"object"===typeof Y?Y.toJSON?(Y=Y.toJSON(w&&w[I]),N[I]=
n?Y:JSON.stringify(Y)):N[I]=n?Y:JSON.stringify(Y):N[I]=Y}return N}f.asValidOptions=function(m,n){return n?{...n,query:{...m,...n.query}}:{query:m}};f.encode=y;f.getToken=function(m,n){return z.supportsApiKey(m)&&(n||c.apiKey)?n||c.apiKey:ha.id?.findCredential(m)?.token};f.parseUrl=function(m){return"string"===typeof m?r.urlToObject(m):K.clone(m)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(f,c,ha,K,r,z){function y(){y=c._asyncToGenerator(function*(m,n,w){const N="string"===typeof m?K.urlToObject(m):m;m=n[0].spatialReference;const Y=r.getJsonType(n[0]);n={...w,query:{...N.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(z.encodeGeometries(n))}};({data:n}=yield ha(N.path+"/simplify",n));return z.decodeGeometries(n.geometries,Y,m)});return y.apply(this,arguments)}f.simplify=function(m,n,w){return y.apply(this,arguments)};Object.defineProperties(f,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(f,c){f.decodeGeometries=function(ha,K,r){const z=c.getGeometryType(K);return ha.map(y=>{y=z.fromJSON(y);y.spatialReference=r;return y})};f.encodeGeometries=function(ha){return{geometryType:c.getJsonType(ha[0]),geometries:ha.map(K=>K.toJSON())}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(f,c,ha){function K(n,w){return n?y.get(n,w):null}function r(n,w,N,Y=!0){const I=[];for(const k of w)if("*"!==k&&!n.has(k))if(Y){w=z(k);try{const H=K(w,n);if(!H)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!H.isStandardized)throw new c("feature-store:unsupported-query","expression is not standard",{clause:H});r(n,H.fieldNames,"expression contains missing fields")}catch(H){if((w=H&&H.details)&&
(w.clause||w.where))throw H;w&&w.missingFields?I.push(...w.missingFields):I.push(k)}}else I.push(k);if(I.length)throw new c("feature-store:unsupported-query",N,{missingFields:I});}function z(n){return n.split(" as ")[0]}const y=new ha.WhereClauseCache(50,500),m=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));f.getAliasFromFieldName=function(n){return n.split(" as ")[1]};f.getExpressionFromFieldName=
z;f.getWhereClause=K;f.hasInvalidFieldType=function(n,w){return(n=w.get(n))?!m.has(n.type):!1};f.validateFields=r;f.validateHaving=function(n,w,N){if(!w)return!0;const Y=y.get(w,n);if(!Y)throw new c("feature-store:unsupported-query","invalid SQL expression",{having:w});if(!Y.isAggregate)throw new c("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:w});r(n,Y.fieldNames,"having contains missing fields");if(!Y.getExpressions().every(I=>{const {aggregateType:k,
field:H}=I,d=n.has(H)&&n.get(H).name;return N.some(l=>{const {onStatisticField:L,statisticType:O}=l;return(n.has(L)&&n.get(L).name)===d&&O.toLowerCase().trim()===k})}))throw new c("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:w});return!0};f.validateWhere=function(n,w){if(!w)return!0;const N=y.get(w,n);if(!N)throw new c("feature-store:unsupported-query","invalid SQL expression",{where:w});if(!N.isStandardized)throw new c("feature-store:unsupported-query",
"where clause is not standard",{where:w});r(n,N.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(f,c,ha){let K=function(){function r(z,y){this._cache=new c(z);this._invalidCache=new c(y)}r.prototype.get=function(z,y){const m=`${y.uid}:${z}`,n=this._cache.get(m);if(n)return n;if(void 0!==this._invalidCache.get(m))return null;
try{const w=ha.WhereClause.create(z,y);this._cache.put(m,w);return w}catch{return this._invalidCache.put(m,null),null}};return r}();f.WhereClauseCache=K;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(f){return function(){function c(K,r){this._storage=new f.MemCacheStorage;this._storage.maxSize=K;r&&this._storage.registerRemoveFunc("",r)}var ha=c.prototype;ha.put=function(K,r){this._storage.put(K,
r,1,1)};ha.pop=function(K){return this._storage.pop(K)};ha.get=function(K){return this._storage.get(K)};ha.clear=function(){this._storage.clearAll()};ha.destroy=function(){this._storage.destroy()};return c}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(f,c,ha,K,r,z){function y(t,F){t+="";return t.length>=F?t:Array(F-t.length+1).join("0")+t}function m(t,F,q="0",
R="0",W="0",P="0",ja="",ba="0",qa="0"){return"+"===ja||"-"===ja?(t=`${y(parseInt(t,10),4)}-${y(parseInt(F,10),2)}-${y(parseInt(q,10),2)}`,F="",10>parseFloat(P)&&(F="0"),R=`${y(parseInt(R,10),2)}:${y(parseInt(W,10),2)}:${F+parseFloat(P).toString()}`,ja=`${ja}${y(parseInt(ba,10),2)}:${y(parseInt(qa,10),2)}`,new Date(t+"T"+R+ja)):new Date(parseInt(t,10),parseInt(F,10)-1,parseInt(q,10),parseInt(R,10),parseInt(W,10),parseFloat(P))}function n(t){let F=g.exec(t);if(null!==F){const [,q,R,W,P,ja,ba]=F;return m(q,
R,W,P,ja,ba)}F=p.exec(t);if(null!==F){const [,q,R,W,P,ja,ba,qa,wa,xa]=F;return m(q,R,W,P,ja,ba,qa,wa,xa)}F=x.exec(t);if(null!==F){const [,q,R,W,P,ja,ba,qa,wa]=F;return m(q,R,W,P,ja,"0",ba,qa,wa)}F=B.exec(t);if(null!==F){const [,q,R,W,P,ja]=F;return m(q,R,W,P,ja)}F=V.exec(t);if(null!==F){const [,q,R,W]=F;return m(q,R,W)}throw Error("SQL Invalid Timestamp");}function w(t){const F=V.exec(t);if(null===F)try{return n(t)}catch{throw Error("SQL Invalid Date");}const [,q,R,W]=F;return new Date(parseInt(q,
10),parseInt(R,10)-1,parseInt(W,10))}function N(t){return Array.isArray(t)?t:[t]}function Y(t){return null!==t?!0!==t:null}function I(t,F){return null!=t&&null!=F?!0===t&&!0===F:!1===t||!1===F?!1:null}function k(t,F){return null!=t&&null!=F?!0===t||!0===F:!0===t||!0===F?!0:null}function H(t,F){if(null==t)return null;let q=!1;for(const R of F)if(null==R)q=null;else if(t===R){q=!0;break}return q}function d(t,F,q){if(null==t)return null;let R="",W=J.Normal;for(let P=0;P<F.length;P++){const ja=F.charAt(P);
switch(W){case J.Normal:ja===q?W=J.Escaped:R="-[]/{}()*+?.\\^$|".includes(ja)?R+("\\"+ja):"%"===ja?R+".*":"_"===ja?R+".":R+ja;break;case J.Escaped:R="-[]/{}()*+?.\\^$|".includes(ja)?R+("\\"+ja):R+ja,W=J.Normal}}return(new RegExp("^"+R+"$","m")).test(t)}function l(t){return t instanceof Date?t.valueOf():t}function L(t,F,q){if(null==F||null==q)return null;F=l(F);q=l(q);switch(t){case "\x3c\x3e":return F!==q;case "\x3d":return F===q;case "\x3e":return F>q;case "\x3c":return F<q;case "\x3e\x3d":return F>=
q;case "\x3c\x3d":return F<=q}}function O(t,F,q){if(F instanceof r.SqlInterval)if(q instanceof Date)switch(t){case "+":return new Date(F.valueInMilliseconds()+q.getTime());case "-":return F.valueInMilliseconds()-q.getTime();case "*":return F.valueInMilliseconds()*q.getTime();case "/":return F.valueInMilliseconds()/q.getTime()}else if(q instanceof r.SqlInterval)switch(t){case "+":return r.SqlInterval.createFromMilliseconds(F.valueInMilliseconds()+q.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(F.valueInMilliseconds()-
q.valueInMilliseconds());case "*":return F.valueInMilliseconds()*q.valueInMilliseconds();case "/":return F.valueInMilliseconds()/q.valueInMilliseconds()}else F=F.valueInMilliseconds();else if(q instanceof r.SqlInterval)if(F instanceof Date)switch(t){case "+":return new Date(q.valueInMilliseconds()+F.getTime());case "-":return new Date(F.getTime()-q.valueInMilliseconds());case "*":return F.getTime()*q.valueInMilliseconds();case "/":return F.getTime()/q.valueInMilliseconds()}else q=q.valueInMilliseconds();
else if(F instanceof Date&&"number"===typeof q)switch(q*=864E5,F=F.getTime(),t){case "+":return new Date(F+q);case "-":return new Date(F-q);case "*":return new Date(F*q);case "/":return new Date(F/q)}else if(q instanceof Date&&"number"===typeof F)switch(F*=864E5,q=q.getTime(),t){case "+":return new Date(F+q);case "-":return new Date(F-q);case "*":return new Date(F*q);case "/":return new Date(F/q)}switch(t){case "+":return F+q;case "-":return F-q;case "*":return F*q;case "/":return F/q}}function U(t,
F,q,R){t=R.getAttribute(t,F);return null!=t&&1===q[F]?new Date(t):t}const V=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,g=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,x=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Z=new Set(["current_timestamp","current_date","current_time"]);let A=function(){function t(){}
t.makeBool=function(F){return!0===F};t.featureValue=function(F,q,R,W){return U(F,q,R,W)};t.equalsNull=function(F){return null===F};t.applyLike=function(F,q,R){return d(F,q,R)};t.ensureArray=function(F){return N(F)};t.applyIn=function(F,q){return H(F,q)};t.currentDate=function(){const F=new Date;F.setHours(0,0,0,0);return F};t.makeSqlInterval=function(F,q,R){return r.SqlInterval.createFromValueAndQualifer(F,q,R)};t.convertInterval=function(F){return F instanceof r.SqlInterval?F.valueInMilliseconds():
F};t.currentTimestamp=function(){return new Date};t.compare=function(F,q,R){return L(F,q,R)};t.calculate=function(F,q,R){return O(F,q,R)};t.makeComparable=function(F){return l(F)};t.evaluateFunction=function(F,q){return r.evaluateFunction(F,q)};t.lookup=function(F,q){F=q[F];return void 0===F?null:F};t.between=function(F,q){return null==F||null==q[0]||null==q[1]?null:F>=q[0]&&F<=q[1]};t.notbetween=function(F,q){return null==F||null==q[0]||null==q[1]?null:F<q[0]||F>q[1]};t.ternaryNot=function(F){return Y(F)};
t.ternaryAnd=function(F,q){return I(F,q)};t.ternaryOr=function(F,q){return k(F,q)};return t}(),C=function(){function t(q,R){this.fieldsIndex=R;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=z.WhereGrammar.parse(q);const {isStandardized:W,isAggregate:P,referencedFieldNames:ja}=this._extractExpressionInfo(R);this._referencedFieldNames=ja;this.isStandardized=W;this.isAggregate=P}t.create=function(q,R){return new t(q,R)};var F=t.prototype;F.testSet=function(q,R=E){const W=
{};for(const P of this.fieldNames)W[P]=q.map(ja=>R.getAttribute(ja,P));return!!this._evaluateNode(this.parseTree,{attributes:W},E)};F.calculateValue=function(q,R=E){q=this._evaluateNode(this.parseTree,q,R);return q instanceof r.SqlInterval?q.valueInMilliseconds()/864E5:q};F.calculateValueCompiled=function(q,R=E){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(q,this.parameters,R,this._datefields);if(ha("esri-csp-restrictions"))return this.calculateValue(q,R);this._compileMe();
return this.parseTree._compiledVersion(q,this.parameters,R,this._datefields)};F.testFeature=function(q,R=E){return!!this._evaluateNode(this.parseTree,q,R)};F.testFeatureCompiled=function(q,R=E){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(q,this.parameters,R,this._datefields);if(ha("esri-csp-restrictions"))return this.testFeature(q,R);this._compileMe();return!!this.parseTree._compiledVersion(q,this.parameters,R,this._datefields)};F.getFunctions=function(){const q=
new Set;this._visitAll(this.parseTree,R=>{"function"===R.type&&q.add(R.name.toLowerCase())});return Array.from(q)};F.getExpressions=function(){const q=new Map;this._visitAll(this.parseTree,R=>{if("function"===R.type){const W=R.name.toLowerCase();R=R.args.value[0];if("column-reference"===R.type){R=R.column;const P=`${W}-${R}`;q.has(P)||q.set(P,{aggregateType:W,field:R})}}});return[...q.values()]};F.getVariables=function(){const q=new Set;this._visitAll(this.parseTree,R=>{"parameter"===R.type&&q.add(R.value.toLowerCase())});
return Array.from(q)};F._compileMe=function(){const q="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",q)).bind(A)};F._extractExpressionInfo=function(q){const R=[],W=new Set;let P=!0,ja=!0;this._visitAll(this.parseTree,ba=>{switch(ba.type){case "column-reference":const qa=q?.get(ba.column);let wa,xa;qa?wa=xa=qa.name??"":(xa=ba.column,wa=xa.toLowerCase());qa&&qa.name&&("date"===
qa.type||"esriFieldTypeDate"===qa.type)&&(this._datefields[qa.name]=1);W.has(wa)||(W.add(wa),R.push(xa));ba.column=xa;break;case "function":const {name:Ba,args:Ca}=ba;ba=Ca.value.length;P&&(P=r.isStandardized(Ba,ba));ja&&(ja=K.isAggregate(Ba,ba))}});return{referencedFieldNames:Array.from(R),isStandardized:P,isAggregate:ja}};F._visitAll=function(q,R){if(null!=q)switch(R(q),q.type){case "when-clause":this._visitAll(q.operand,R);this._visitAll(q.value,R);break;case "case-expression":for(const W of q.clauses)this._visitAll(W,
R);"simple"===q.format&&this._visitAll(q.operand,R);null!==q.else&&this._visitAll(q.else,R);break;case "expression-list":for(const W of q.value)this._visitAll(W,R);break;case "unary-expression":this._visitAll(q.expr,R);break;case "binary-expression":this._visitAll(q.left,R);this._visitAll(q.right,R);break;case "function":this._visitAll(q.args,R)}};F.evaluateNodeToJavaScript=function(q){switch(q.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(q.value)+", "+JSON.stringify(q.qualifier)+
","+JSON.stringify(q.op)+")";case "case-expression":var R="";if("simple"===q.format){var W="this.makeComparable("+this.evaluateNodeToJavaScript(q.operand)+")";R="( ";for(let P=0;P<q.clauses.length;P++)R+=" ("+W+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(q.clauses[P].operand)+")) ? ("+this.evaluateNodeToJavaScript(q.clauses[P].value)+") : "}else for(R="( ",W=0;W<q.clauses.length;W++)R+=" this.makeBool("+this.evaluateNodeToJavaScript(q.clauses[W].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(q.clauses[W].value)+") : ";R=null!==q.else?R+this.evaluateNodeToJavaScript(q.else):R+"null";return R+" )";case "parameter":return"this.lookup("+JSON.stringify(q.value.toLowerCase())+",lookups)";case "expression-list":R="[";for(W of q.value)"["!==R&&(R+=","),R+=this.evaluateNodeToJavaScript(W);return R+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(q.expr)+")";case "binary-expression":switch(q.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+" )";case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")";case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(q.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(q.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(q.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+","+JSON.stringify(q.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+
this.evaluateNodeToJavaScript(q.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(q.operator)+","+this.evaluateNodeToJavaScript(q.left)+","+this.evaluateNodeToJavaScript(q.right)+")"}throw Error("Not Supported Operator "+q.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(q.value);case "date":return"(new Date("+w(q.value).getTime().toString()+"))";case "timestamp":return"(new Date("+n(q.value).getTime().toString()+"))";case "current-time":return"date"===
q.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(q.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(q.name)+","+this.evaluateNodeToJavaScript(q.args)+")"}throw Error("Unsupported sql syntax "+q.type);};F._evaluateNode=function(q,R,W){switch(q.type){case "interval":return R=this._evaluateNode(q.value,R,W),r.SqlInterval.createFromValueAndQualifer(R,q.qualifier,q.op);case "case-expression":if("simple"===
q.format){var P=l(this._evaluateNode(q.operand,R,W));for(var ja=0;ja<q.clauses.length;ja++)if(P===l(this._evaluateNode(q.clauses[ja].operand,R,W)))return this._evaluateNode(q.clauses[ja].value,R,W)}else for(P=0;P<q.clauses.length;P++)if(!0===this._evaluateNode(q.clauses[P].operand,R,W))return this._evaluateNode(q.clauses[P].value,R,W);return null!==q.else?this._evaluateNode(q.else,R,W):null;case "parameter":return this.parameters[q.value.toLowerCase()];case "expression-list":P=[];for(ja of q.value)P.push(this._evaluateNode(ja,
R,W));return P;case "unary-expression":return Y(this._evaluateNode(q.expr,R,W));case "binary-expression":switch(q.operator){case "AND":return I(this._evaluateNode(q.left,R,W),this._evaluateNode(q.right,R,W));case "OR":return k(this._evaluateNode(q.left,R,W),this._evaluateNode(q.right,R,W));case "IS":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(q.left,R,W);case "ISNOT":if("null"!==q.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(q.left,
R,W);case "IN":return P=N(this._evaluateNode(q.right,R,W)),H(this._evaluateNode(q.left,R,W),P);case "NOT IN":return P=N(this._evaluateNode(q.right,R,W)),Y(H(this._evaluateNode(q.left,R,W),P));case "BETWEEN":return P=this._evaluateNode(q.left,R,W),q=this._evaluateNode(q.right,R,W),null==P||null==q[0]||null==q[1]?null:P>=l(q[0])&&P<=l(q[1]);case "NOTBETWEEN":return P=this._evaluateNode(q.left,R,W),q=this._evaluateNode(q.right,R,W),null==P||null==q[0]||null==q[1]?null:P<l(q[0])||P>l(q[1]);case "LIKE":return d(this._evaluateNode(q.left,
R,W),this._evaluateNode(q.right,R,W),q.escape);case "NOT LIKE":return Y(d(this._evaluateNode(q.left,R,W),this._evaluateNode(q.right,R,W),q.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return L(q.operator,this._evaluateNode(q.left,R,W),this._evaluateNode(q.right,R,W));case "-":case "+":case "*":case "/":return O(q.operator,this._evaluateNode(q.left,R,W),this._evaluateNode(q.right,R,W))}case "null":case "boolean":case "string":case "number":return q.value;
case "date":return w(q.value);case "timestamp":return n(q.value);case "current-time":return R=new Date,"date"===q.mode&&R.setHours(0,0,0,0),R;case "column-reference":return U(R,q.column,this._datefields,W);case "function":return R=this._evaluateNode(q.args,R,W),this.isAggregate?K.aggregateFunction(q.name,R):r.evaluateFunction(q.name,R)}throw Error("Unsupported sql syntax "+q.type);};c._createClass(t,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,q=>{"current-time"===q.type?this._hasDateFunctions=!0:"function"===q.type&&(this._hasDateFunctions=this._hasDateFunctions||Z.has(q.name.toLowerCase()))});return this._hasDateFunctions}}]);return t}();var J;(function(t){t[t.Normal=0]="Normal";t[t.Escaped=1]="Escaped"})(J||(J={}));const E={getAttribute(t,F){return(t&&"object"===typeof t.attributes?t.attributes:t)[F]}};f.WhereClause=C;f.defaultAttributeAdapter=
E;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(f){function c(r){let z=0;for(let y=0;y<r.length;y++)z+=r[y];return z/r.length}function ha(r){const z=c(r),y=r.length;let m=0;for(const n of r)m+=(n-z)**2;return 1<y?m/(y-1):0}const K={min:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.min.apply(Math,r[0])},max:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.max.apply(Math,
r[0])},avg:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:c(r[0])},sum:{minParams:1,maxParams:1,evaluate:r=>{if(null==r[0])r=null;else{r=r[0];let z=0;for(let y=0;y<r.length;y++)z+=r[y];r=z}return r}},stddev:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sqrt(ha(r[0]))},count:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].length},var:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:ha(r[0])}};f.aggregateFunction=function(r,z){const y=K[r.toLowerCase()];if(null==y)throw Error("Function Not Recognised");
if(z.length<y.minParams||z.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return y.evaluate(z)};f.isAggregate=function(r,z){r=K[r.toLowerCase()];return null!=r&&z>=r.minParams&&z<=r.maxParams};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(f,c){let ha=function(){function r(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}r._fixDefaults=function(z){if(null!==z.precision||null!==z.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};r.createFromMilliseconds=function(z){const y=new r;y.second=z/1E3;return y};r.createFromValueAndQualifer=function(z,y,m){let n=null;const w=new r;w.op="-"===m?"-":"+";if("interval-period"===y.type){r._fixDefaults(y);m=RegExp("^[0-9]{1,}$");if("year"===y.period||"month"===y.period)throw Error("Year-Month Intervals not supported");if(m.test(z))w[y.period]=
parseFloat(z);else throw Error("Illegal Interval");}else{r._fixDefaults(y.start);r._fixDefaults(y.end);if("year"===y.start.period||"month"===y.start.period)throw Error("Year-Month Intervals not supported");if("year"===y.end.period||"month"===y.end.period)throw Error("Year-Month Intervals not supported");switch(y.start.period){case "day":switch(y.end.period){case "hour":n=RegExp("^[0-9]{1,} [0-9]{1,}$");if(n.test(z))w[y.start.period]=parseFloat(z.split(" ")[0]),w[y.end.period]=parseFloat(z.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":n=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(n.test(z))w[y.start.period]=parseFloat(z.split(" ")[0]),z=z.split(" ")[1].split(":"),w.hour=parseFloat(z[0]),w.minute=parseFloat(z[1]);else throw Error("Illegal Interval");break;case "second":n=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(n.test(z))w[y.start.period]=parseFloat(z.split(" ")[0]),z=z.split(" ")[1].split(":"),w.hour=parseFloat(z[0]),w.minute=parseFloat(z[1]),
w.second=parseFloat(z[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(y.end.period){case "minute":n=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(n.test(z))w.hour=parseFloat(z.split(":")[0]),w.minute=parseFloat(z.split(":")[1]);else throw Error("Illegal Interval");break;case "second":n=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(n.test(z))z=z.split(":"),w.hour=parseFloat(z[0]),w.minute=parseFloat(z[1]),w.second=parseFloat(z[2]);
else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(y.end.period){case "second":n=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(n.test(z))z=z.split(":"),w.minute=parseFloat(z[0]),w.second=parseFloat(z[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return w};r.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+
6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return r}();const K={extract:{minParams:2,maxParams:2,evaluate:([r,z])=>{if(null==z)return null;if(z instanceof Date)switch(r.toUpperCase()){case "SECOND":return z.getSeconds();case "MINUTE":return z.getMinutes();case "HOUR":return z.getHours();case "DAY":return z.getDate();case "MONTH":return z.getMonth()+1;case "YEAR":return z.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:r=>{if(2===r.length){const [z,y]=r;return null==z||null==y?null:z.toString().substring(y-1)}if(3===r.length){const [z,y,m]=r;return null==z||null==y||null==m?null:0>=m?"":z.toString().substring(y-1,y+m-1)}}},position:{minParams:2,maxParams:2,evaluate:([r,z])=>null==r||null==z?null:z.indexOf(r)+1},trim:{minParams:2,maxParams:3,evaluate:r=>{var z=3===r.length,y=z?r[1]:" ";z=z?r[2]:r[1];if(null==y||null==z)return null;y=`(${c.escapeRegExpString(y)})`;switch(r[0]){case "BOTH":return z.replace(new RegExp(`^${y}*|${y}*$`,
"g"),"");case "LEADING":return z.replace(new RegExp(`^${y}*`,"g"),"");case "TRAILING":return z.replace(new RegExp(`${y}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.abs(r[0])},ceiling:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.ceil(r[0])},floor:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.floor(r[0])},log:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])},log10:{minParams:1,
maxParams:1,evaluate:r=>null==r[0]?null:Math.log(r[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.sin(r[0])},cos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.cos(r[0])},tan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.tan(r[0])},asin:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.asin(r[0])},acos:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.acos(r[0])},atan:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:Math.atan(r[0])},
sign:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:0<r[0]?1:0>r[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]**r[1]},mod:{minParams:2,maxParams:2,evaluate:r=>null==r[0]||null==r[1]?null:r[0]%r[1]},round:{minParams:1,maxParams:2,evaluate:r=>{const z=r[0];r=2===r.length?10**r[1]:1;return null==z?null:Math.round(z*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:r=>null==r[0]?null:1===r.length?parseInt(r[0].toFixed(0),10):parseFloat(r[0].toFixed(r[1]))},
char_length:{minParams:1,maxParams:1,evaluate:r=>"string"===typeof r[0]||r[0]instanceof String?r[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:r=>{let z="";for(let y=0;y<r.length;y++){if(null==r[y])return null;z+=r[y].toString()}return z}},lower:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:r=>null==r[0]?null:r[0].toString().toUpperCase()}};f.SqlInterval=ha;f.evaluateFunction=function(r,z){const y=K[r.toLowerCase()];
if(null==y)throw Error("Function Not Recognised");if(z.length<y.minParams||z.length>y.maxParams)throw Error(`Invalid Parameter count for call to ${r.toUpperCase()}`);return y.evaluate(z)};f.isStandardized=function(r,z){r=K[r.toLowerCase()];return null!=r&&z>=r.minParams&&z<=r.maxParams};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(f,c){var ha={exports:{}};
(function(r){(function(z,y){r.exports&&(r.exports=y())})(c.commonjsGlobal,function(){function z(m,n,w,N){m=Error.call(this,m);Object.setPrototypeOf&&Object.setPrototypeOf(m,z.prototype);m.expected=n;m.found=w;m.location=N;m.name="SyntaxError";return m}function y(m,n,w){w=w||" ";if(m.length>n)return m;n-=m.length;w+=w.repeat(n);return m+w.slice(0,n)}(function(m,n){function w(){this.constructor=m}w.prototype=n.prototype;m.prototype=new w})(z,Error);z.prototype.format=function(m){var n="Error: "+this.message;
if(this.location){var w=null,N;for(N=0;N<m.length;N++)if(m[N].source===this.location.source){w=m[N].text.split(/\r\n|\n|\r/g);break}m=this.location.start;N=this.location.source+":"+m.line+":"+m.column;if(w){var Y=this.location.end,I=y("",m.line.toString().length," ");w=w[m.line-1];Y=(m.line===Y.line?Y.column:w.length+1)-m.column||1;n+="\n --\x3e "+N+"\n"+I+" |\n"+m.line+" | "+w+"\n"+I+" | "+y("",m.column-1," ")+y("",Y,"^")}else n+="\n at "+N}return n};z.buildMessage=function(m,n){function w(H){return H.charCodeAt(0).toString(16).toUpperCase()}
function N(H){return H.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function Y(H){return H.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
w(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+w(d)})}function I(H){return k[H.type](H)}var k={literal:function(H){return'"'+N(H.text)+'"'},class:function(H){var d=H.parts.map(function(l){return Array.isArray(l)?Y(l[0])+"-"+Y(l[1]):Y(l)});return"["+(H.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(H){return H.description}};return"Expected "+function(H){H=H.map(I);var d,l;H.sort();if(0<H.length){for(l=d=1;d<
H.length;d++)H[d-1]!==H[d]&&(H[l]=H[d],l++);H.length=l}switch(H.length){case 1:return H[0];case 2:return H[0]+" or "+H[1];default:return H.slice(0,-1).join(", ")+", or "+H[H.length-1]}}(m)+" but "+(n?'"'+N(n)+'"':"end of input")+" found."};return{SyntaxError:z,parse:function(m,n){function w(u,D){return{type:"literal",text:u,ignoreCase:D}}function N(u,D,X){return{type:"class",parts:u,inverted:D,ignoreCase:X}}function Y(u){var D=gc[u],X;if(!D){for(X=u-1;!gc[X];)X--;D=gc[X];for(D={line:D.line,column:D.column};X<
u;)10===m.charCodeAt(X)?(D.line++,D.column=1):D.column++,X++;gc[u]=D}return D}function I(u,D){var X=Y(u),ua=Y(D);return{source:db,start:{offset:u,line:X.line,column:X.column},end:{offset:D,line:ua.line,column:ua.column}}}function k(u){e<ub||(e>ub&&(ub=e,Ac=[]),Ac.push(u))}function H(){var u=e;ta();var D=l();D!==a?(ta(),u=D):(e=u,u=a);return u}function d(){var u=e;var D=l();if(D!==a){u=[];var X=e;var ua=ta();var Ea=Ha();if(Ea!==a){var Oa=ta();var Qa=l();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,
X=a;for(;X!==a;)u.push(X),X=e,ua=ta(),Ea=Ha(),Ea!==a?(Oa=ta(),Qa=l(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);X={type:"expression-list"};D=[D];for(ua=0;ua<u.length;ua++)D.push(u[ua][3]);X.value=D;u=X}else e=u,u=a;return u}function l(){var u=e;var D=L();if(D!==a){u=[];var X=e;var ua=ta();var Ea=v();if(Ea!==a){var Oa=ta();var Qa=L();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)u.push(X),X=e,ua=ta(),Ea=v(),Ea!==a?(Oa=ta(),Qa=L(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);u=
$a(D,u)}else e=u,u=a;return u}function L(){var u=e;var D=O();if(D!==a){u=[];var X=e;var ua=ta();var Ea=oa();if(Ea!==a){var Oa=ta();var Qa=O();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)u.push(X),X=e,ua=ta(),Ea=oa(),Ea!==a?(Oa=ta(),Qa=O(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);u=$a(D,u)}else e=u,u=a;return u}function O(){var u=e;var D=ia();if(D===a){D=e;if(33===m.charCodeAt(e)){var X=nb;e++}else X=a,0===va&&k(qd);if(X!==a){var ua=e;va++;if(61===m.charCodeAt(e)){var Ea=Ya;
e++}else Ea=a,0===va&&k(Qc);va--;Ea===a?ua=void 0:(e=ua,ua=a);ua!==a?D=X=[X,ua]:(e=D,D=a)}else e=D,D=a}D!==a?(X=ta(),ua=O(),ua!==a?u={type:"unary-expression",operator:"NOT",expr:ua}:(e=u,u=a)):(e=u,u=a);if(u===a){D=e;u=p();if(u!==a){ta();D=[];X=e;ua=ta();Ea=U();if(Ea!==a){var Oa=ta();var Qa=p();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;if(X!==a)for(;X!==a;)D.push(X),X=e,ua=ta(),Ea=U(),Ea!==a?(Oa=ta(),Qa=p(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);else D=a;D!==a&&(D={type:"arithmetic",
tail:D});D===a&&(D=e,X=g(),X!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=d(),ua!==a?(ta(),Ea=Ka(),Ea!==a?D={op:X,right:ua}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a)):(e=D,D=a),D===a&&(D=e,X=g(),X!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=Ka(),ua!==a?D={op:X,right:{type:"expression-list",value:[]}}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a),D===a&&(D=e,X=g(),X!==a?(ta(),ua=F(),ua!==a?D={op:X,right:ua}:(e=D,D=a)):(e=D,D=a))),D===a&&(D=e,Ea=ia(),Ea!==a?(ta(),X=G(),X!==a?(ta(),ua=p(),ua!==a?(ta(),Oa=oa(),Oa!==a?(ta(),Ea=p(),Ea!==a?D={op:"NOT"+
X,right:{type:"expression-list",value:[ua,Ea]}}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a)):(e=D,D=a)):(e=D,D=a),D===a&&(D=e,Ea=G(),Ea!==a?(ta(),X=p(),X!==a?(ta(),ua=oa(),ua!==a?(ta(),Oa=p(),Oa!==a?D={op:Ea,right:{type:"expression-list",value:[X,Oa]}}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a)):(e=D,D=a)),D===a&&(D=e,X=h(),X!==a?(ta(),ua=ia(),ua!==a?(ta(),ua=p(),ua!==a?D={op:X+"NOT",right:ua}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a),D===a&&(D=e,X=h(),X!==a?(ta(),ua=p(),ua!==a?D={op:X,right:ua}:(e=D,D=a)):(e=D,D=a)),D===a&&(D=e,
X=V(),X!==a?(ta(),ua=ba(),ua!==a?(ta(),Ea=e,m.substr(e,6).toLowerCase()===pa?(Oa=m.substr(e,6),e+=6):(Oa=a,0===va&&k(rd)),Oa!==a?(Oa=e,va++,Qa=E(),va--,Qa===a?Oa=void 0:(e=Oa,Oa=a),Oa!==a?Ea="ESCAPE":(e=Ea,Ea=a)):(e=Ea,Ea=a),Ea!==a?(ta(),Ea=qa(),Ea!==a?D={op:X,right:ua,escape:Ea.value}:(e=D,D=a)):(e=D,D=a)):(e=D,D=a)):(e=D,D=a),D===a&&(D=e,X=V(),X!==a?(ta(),ua=ba(),ua!==a?D={op:X,right:ua,escape:""}:(e=D,D=a)):(e=D,D=a))))));D===a&&(D=null);""==D||void 0==D||null==D?D=u:(X=null,D=X="arithmetic"==
D.type?$a(u,D.tail):ab(D.op,u,D.right,D.escape))}else e=D,D=a;u=D}return u}function U(){if(m.substr(e,2)===Eb){var u=Eb;e+=2}else u=a,0===va&&k(sd);u===a&&(62===m.charCodeAt(e)?(u=dc,e++):(u=a,0===va&&k(td)),u===a&&(m.substr(e,2)===Fb?(u=Fb,e+=2):(u=a,0===va&&k(ud)),u===a&&(m.substr(e,2)===la?(u=la,e+=2):(u=a,0===va&&k(vd)),u===a&&(60===m.charCodeAt(e)?(u=ec,e++):(u=a,0===va&&k(wd)),u===a&&(61===m.charCodeAt(e)?(u=Ya,e++):(u=a,0===va&&k(Qc)),u===a&&(m.substr(e,2)===Cb?(u=Cb,e+=2):(u=a,0===va&&k(xd))))))));
return u}function V(){var u=u=e;var D=ia();if(D!==a){var X=ta();var ua=ea();ua!==a?u=D=[D,X,ua]:(e=u,u=a)}else e=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=ea());return u}function g(){var u=u=e;var D=ia();if(D!==a){var X=ta();var ua=b();ua!==a?u=D=[D,X,ua]:(e=u,u=a)}else e=u,u=a;u!==a&&(u=u[0]+" "+u[2]);u===a&&(u=b());return u}function p(){var u=e;var D=B();if(D!==a){u=[];var X=e;var ua=ta();var Ea=x();if(Ea!==a){var Oa=ta();var Qa=B();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)u.push(X),
X=e,ua=ta(),Ea=x(),Ea!==a?(Oa=ta(),Qa=B(),Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);u=$a(D,u)}else e=u,u=a;return u}function x(){if(43===m.charCodeAt(e)){var u=hb;e++}else u=a,0===va&&k(Bc);u===a&&(45===m.charCodeAt(e)?(u=sb,e++):(u=a,0===va&&k(Cc)));return u}function B(){var u=e;var D=A();if(D!==a){u=[];var X=e;var ua=ta();var Ea=Z();if(Ea!==a){var Oa=ta();var Qa=A();Qa!==a?X=ua=[ua,Ea,Oa,Qa]:(e=X,X=a)}else e=X,X=a;for(;X!==a;)u.push(X),X=e,ua=ta(),Ea=Z(),Ea!==a?(Oa=ta(),Qa=A(),Qa!==a?X=ua=
[ua,Ea,Oa,Qa]:(e=X,X=a)):(e=X,X=a);u=$a(D,u)}else e=u,u=a;return u}function Z(){if(42===m.charCodeAt(e)){var u=fc;e++}else u=a,0===va&&k(yd);u===a&&(47===m.charCodeAt(e)?(u=Tb,e++):(u=a,0===va&&k(zd)));return u}function A(){var u=qa();if(u===a){var D=e;var X=e;var ua=Ca();if(ua!==a){var Ea=Ja();if(Ea!==a){var Oa=La();Oa!==a?X=parseFloat(ua+Ea+Oa):(e=X,X=a)}else e=X,X=a}else e=X,X=a;X===a&&(X=e,ua=Ca(),ua!==a?(Ea=Ja(),Ea!==a?X=parseFloat(ua+Ea):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=Ca(),ua!==a?(Ea=La(),
Ea!==a?X=parseFloat(ua+Ea):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=Ca(),ua!==a&&(ua=parseFloat(ua)),X=ua)));var Qa=X;if(Qa!==a){var hc=e;va++;var Ad=J();va--;Ad===a?hc=void 0:(e=hc,hc=a);hc!==a?D={type:"number",value:Qa}:(e=D,D=a)}else e=D,D=a;u=D;if(u===a){var Ub=e;var Ib=e;if(m.substr(e,4).toLowerCase()===Pa){var ic=m.substr(e,4);e+=4}else ic=a,0===va&&k(Bd);if(ic!==a){var Vb=e;va++;var Cd=E();va--;Cd===a?Vb=void 0:(e=Vb,Vb=a);Vb!==a?Ib=ic=[ic,Vb]:(e=Ib,Ib=a)}else e=Ib,Ib=a;var Gb=Ib;Gb!==a&&(Gb={type:"boolean",
value:!0});Ub=Gb;if(Ub===a){Ub=e;var Jb=e;if(m.substr(e,5).toLowerCase()===Hb){var jc=m.substr(e,5);e+=5}else jc=a,0===va&&k(Dd);if(jc!==a){var Wb=e;va++;var Ed=E();va--;Ed===a?Wb=void 0:(e=Wb,Wb=a);Wb!==a?Jb=jc=[jc,Wb]:(e=Jb,Jb=a)}else e=Jb,Jb=a;Gb=Jb;Gb!==a&&(Gb={type:"boolean",value:!1});Ub=Gb}u=Ub;if(u===a){var Kb=e;if(m.substr(e,4).toLowerCase()===tb){var kc=m.substr(e,4);e+=4}else kc=a,0===va&&k(Fd);if(kc!==a){var Xb=e;va++;var Gd=E();va--;Gd===a?Xb=void 0:(e=Xb,Xb=a);Xb!==a?Kb=kc=[kc,Xb]:(e=
Kb,Kb=a)}else e=Kb,Kb=a;var Dc=Kb;Dc!==a&&(Dc={type:"null",value:null});u=Dc;if(u===a){var Lb=e;var Mb=e;if(m.substr(e,4).toLowerCase()===Hd){var Rc=m.substr(e,4);e+=4}else Rc=a,0===va&&k(Id);if(Rc!==a){var lc=e;va++;var Jd=E();va--;Jd===a?lc=void 0:(e=lc,lc=a);lc!==a?Mb="DATE":(e=Mb,Mb=a)}else e=Mb,Mb=a;if(Mb!==a){ta();var Sc=ba();Sc!==a?Lb={type:"date",value:Sc.value}:(e=Lb,Lb=a)}else e=Lb,Lb=a;u=Lb;if(u===a){var Nb=e;var Ob=e;if(m.substr(e,9).toLowerCase()===Kd){var Tc=m.substr(e,9);e+=9}else Tc=
a,0===va&&k(Ld);if(Tc!==a){var mc=e;va++;var Md=E();va--;Md===a?mc=void 0:(e=mc,mc=a);mc!==a?Ob="TIMESTAMP":(e=Ob,Ob=a)}else e=Ob,Ob=a;if(Ob!==a){ta();var Uc=ba();Uc!==a?Nb={type:"timestamp",value:Uc.value}:(e=Nb,Nb=a)}else e=Nb,Nb=a;u=Nb;if(u===a){var eb=e;var Ec=fa();if(Ec!==a){ta();if(45===m.charCodeAt(e)){var yb=sb;e++}else yb=a,0===va&&k(Cc);yb===a&&(43===m.charCodeAt(e)?(yb=hb,e++):(yb=a,0===va&&k(Bc)));if(yb!==a){ta();var Yb=ba();if(Yb!==a){ta();var Vc=R();Vc!==a?eb={type:"interval",value:Yb,
qualifier:Vc,op:yb}:(e=eb,eb=a)}else e=eb,eb=a}else e=eb,eb=a}else e=eb,eb=a;eb===a&&(eb=e,Ec=fa(),Ec!==a?(ta(),yb=ba(),yb!==a?(ta(),Yb=R(),Yb!==a?eb={type:"interval",value:yb,qualifier:Yb,op:""}:(e=eb,eb=a)):(e=eb,eb=a)):(e=eb,eb=a));u=eb}}}}}}var Xa=u;if(Xa===a){var kb=e;var Pb=e;if(m.substr(e,7).toLowerCase()===cb){var Wc=m.substr(e,7);e+=7}else Wc=a,0===va&&k(Nd);if(Wc!==a){var nc=e;va++;var Od=E();va--;Od===a?nc=void 0:(e=nc,nc=a);nc!==a?Pb="EXTRACT":(e=Pb,Pb=a)}else e=Pb,Pb=a;if(Pb!==a){ta();
var Pd=Fa();if(Pd!==a){ta();var qb=ka();qb===a&&(qb=na(),qb===a&&(qb=ra(),qb===a&&(qb=sa(),qb===a&&(qb=aa(),qb===a&&(qb=da())))));var Xc=qb;if(Xc!==a){ta();var Qd=Q();if(Qd!==a){ta();var Yc=l();if(Yc!==a){ta();var Rd=Ka();Rd!==a?kb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Xc},Yc]}}:(e=kb,kb=a)}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a}else e=kb,kb=a;Xa=kb;if(Xa===a){var lb=e;var Qb=e;if(m.substr(e,9).toLowerCase()===Ta){var Zc=m.substr(e,
9);e+=9}else Zc=a,0===va&&k(Sd);if(Zc!==a){var oc=e;va++;var Td=E();va--;Td===a?oc=void 0:(e=oc,oc=a);oc!==a?Qb="SUBSTRING":(e=Qb,Qb=a)}else e=Qb,Qb=a;if(Qb!==a){ta();var Ud=Fa();if(Ud!==a){ta();var Fc=l();if(Fc!==a){ta();var Vd=Q();if(Vd!==a){ta();var Gc=l();if(Gc!==a){ta();var zb=e;var Rb=e;if(m.substr(e,3).toLowerCase()===Ua){var $c=m.substr(e,3);e+=3}else $c=a,0===va&&k(Wd);if($c!==a){var pc=e;va++;var Xd=E();va--;Xd===a?pc=void 0:(e=pc,pc=a);pc!==a?Rb="FOR":(e=Rb,Rb=a)}else e=Rb,Rb=a;var Zb=
Rb;if(Zb!==a){var Yd=ta();var ad=l();if(ad!==a){var Zd=ta();zb=Zb=[Zb,Yd,ad,Zd]}else e=zb,zb=a}else e=zb,zb=a;zb===a&&(zb=null);Zb=Ka();Zb!==a?lb={type:"function",name:"substring",args:{type:"expression-list",value:zb?[Fc,Gc,zb[2]]:[Fc,Gc]}}:(e=lb,lb=a)}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a}else e=lb,lb=a;Xa=lb;if(Xa===a){var Za=e;var Hc=T();if(Hc!==a){ta();var Ic=Fa();if(Ic!==a){ta();var Ab=q();Ab===a&&(Ab=null);ta();var $b=l();if($b!==a){ta();var Jc=Q();if(Jc!==a){ta();var bd=
l();if(bd!==a){ta();var $d=Ka();$d!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b,bd]}}:(e=Za,Za=a)}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a}else e=Za,Za=a;Za===a&&(Za=e,Hc=T(),Hc!==a?(ta(),Ic=Fa(),Ic!==a?(ta(),Ab=q(),Ab===a&&(Ab=null),ta(),$b=l(),$b!==a?(ta(),Jc=Ka(),Jc!==a?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==Ab?"BOTH":Ab},$b]}}:(e=Za,Za=a)):(e=Za,Za=
a)):(e=Za,Za=a)):(e=Za,Za=a));Xa=Za;if(Xa===a){var mb=e;var Sb=e;if(m.substr(e,8).toLowerCase()===ae){var cd=m.substr(e,8);e+=8}else cd=a,0===va&&k(be);if(cd!==a){var qc=e;va++;var ce=E();va--;ce===a?qc=void 0:(e=qc,qc=a);qc!==a?Sb="POSITION":(e=Sb,Sb=a)}else e=Sb,Sb=a;if(Sb!==a){ta();var de=Fa();if(de!==a){ta();var dd=l();if(dd!==a){ta();var ee=b();if(ee!==a){ta();var ed=l();if(ed!==a){ta();var fe=Ka();fe!==a?mb={type:"function",name:"position",args:{type:"expression-list",value:[dd,ed]}}:(e=mb,
mb=a)}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a}else e=mb,mb=a;Xa=mb;if(Xa===a){var Db=e;var rc;var rb=e;rb=rc=C();if(rb===a)if(rb=e,96===m.charCodeAt(e)?(rc=fd,e++):(rc=a,0===va&&k(gd)),rc!==a){var sc=[];if(hd.test(m.charAt(e))){var Bb=m.charAt(e);e++}else Bb=a,0===va&&k(id);if(Bb!==a)for(;Bb!==a;)sc.push(Bb),hd.test(m.charAt(e))?(Bb=m.charAt(e),e++):(Bb=a,0===va&&k(id));else sc=a;sc!==a?(96===m.charCodeAt(e)?(Bb=fd,e++):(Bb=a,0===va&&k(gd)),Bb!==a?rb=sc.join(""):(e=rb,rb=a)):(e=
rb,rb=a)}else e=rb,rb=a;var jd=rb;if(jd!==a){ta();var ge=Fa();if(ge!==a){ta();var tc=d();tc===a&&(tc=null);ta();var he=Ka();he!==a?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(e=Db,Db=a)}else e=Db,Db=a}else e=Db,Db=a;Xa=Db;if(Xa===a){var vb;var fb=e;var Kc=ma();if(Kc!==a){ta();var ac=l();if(ac!==a){ta();var bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();var uc=ya();uc!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(e=fb,fb=a)}else e=
fb,fb=a}else e=fb,fb=a;if(fb===a)if(fb=e,Kc=ma(),Kc!==a)if(ta(),ac=l(),ac!==a){ta();bc=[];for(vb=xa();vb!==a;)bc.push(vb),vb=xa();vb=ta();uc=Ba();if(uc!==a){ta();var ie=ya();ie!==a?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:(e=fb,fb=a)}else e=fb,fb=a}else e=fb,fb=a;else e=fb,fb=a;var Lc=fb;if(Lc===a){var wb;var ib=e;var Mc=ma();if(Mc!==a){ta();var cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();var vc=ya();vc!==a?ib={type:"case-expression",format:"searched",
clauses:cc,else:null}:(e=ib,ib=a)}else e=ib,ib=a;if(ib===a)if(ib=e,Mc=ma(),Mc!==a){ta();cc=[];for(wb=wa();wb!==a;)cc.push(wb),wb=wa();wb=ta();vc=Ba();if(vc!==a){ta();var je=ya();je!==a?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(e=ib,ib=a)}else e=ib,ib=a}else e=ib,ib=a;Lc=ib}Xa=Lc;if(Xa===a){var wc;var xc=e;var kd=J();if(kd!==a){var ld=[];for(wc=t();wc!==a;)ld.push(wc),wc=t();xc=kd+ld.join("")}else e=xc,xc=a;var yc=xc;if(yc!==a){var Nc=yc;yc=/^CURRENT_DATE$/i.test(Nc)?
{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Nc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Nc}}Xa=yc;if(Xa===a&&(Xa=F(),Xa===a)){Xa=e;var ke=Fa();if(ke!==a){ta();var Oc=l();if(Oc!==a){ta();var le=Ka();le!==a?(Oc.paren=!0,Xa=Oc):(e=Xa,Xa=a)}else e=Xa,Xa=a}else e=Xa,Xa=a}}}}}}}}return Xa}function C(){var u;var D=e;var X=J();if(X!==a){D=[];for(u=E();u!==a;)D.push(u),u=E();D=X+D.join("")}else e=D,D=a;return D}function J(){if(me.test(m.charAt(e))){var u=
m.charAt(e);e++}else u=a,0===va&&k(ne);return u}function E(){if(oe.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&k(pe);return u}function t(){if(qe.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&k(re);return u}function F(){var u=e;if(64===m.charCodeAt(e)){var D=zc;e++}else D=a,0===va&&k(se);if(D!==a){var X=C();X!==a?u=D=[D,X]:(e=u,u=a)}else e=u,u=a;u!==a&&(u={type:"parameter",value:u[1]});return u}function q(){var u=e;if(m.substr(e,7).toLowerCase()===te){var D=m.substr(e,7);
e+=7}else D=a,0===va&&k(ue);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="LEADING":(e=u,u=a)}else e=u,u=a;u===a&&(u=e,m.substr(e,8).toLowerCase()===ve?(D=m.substr(e,8),e+=8):(D=a,0===va&&k(we)),D!==a?(D=e,va++,X=E(),va--,X===a?D=void 0:(e=D,D=a),D!==a?u="TRAILING":(e=u,u=a)):(e=u,u=a),u===a&&(u=e,m.substr(e,4).toLowerCase()===xe?(D=m.substr(e,4),e+=4):(D=a,0===va&&k(ye)),D!==a?(D=e,va++,X=E(),va--,X===a?D=void 0:(e=D,D=a),D!==a?u="BOTH":(e=u,u=a)):(e=u,u=a)));return u}function R(){var u=
e;var D=e;var X=W();if(X!==a){ta();var ua=Fa();if(ua!==a)if(ta(),ua=ja(),ua!==a){ta();var Ea=Ka();Ea!==a?D={type:"interval-period",period:X.value,precision:ua,secondary:null}:(e=D,D=a)}else e=D,D=a;else e=D,D=a}else e=D,D=a;D===a&&(D=e,X=W(),X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),D=X);if(D!==a)if(ta(),X=e,m.substr(e,2).toLowerCase()===ze?(ua=m.substr(e,2),e+=2):(ua=a,0===va&&k(Ae)),ua!==a?(ua=e,va++,Ea=E(),va--,Ea===a?ua=void 0:(e=ua,ua=a),ua!==a?X="TO":(e=
X,X=a)):(e=X,X=a),X!==a){ta();X=e;ua=W();ua!==a&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});X=ua;if(X===a){X=e;ua=da();if(ua!==a)if(ta(),ua=Fa(),ua!==a)if(ta(),ua=ja(),ua!==a)if(ta(),Ea=Ha(),Ea!==a)if(ta(),Ea=P(),Ea!==a){ta();var Oa=Ka();Oa!==a?X={type:"interval-period",period:"second",precision:ua,secondary:Ea}:(e=X,X=a)}else e=X,X=a;else e=X,X=a;else e=X,X=a;else e=X,X=a;else e=X,X=a;X===a&&(X=e,ua=da(),ua!==a?(ta(),ua=Fa(),ua!==a?(ta(),ua=ja(),ua!==a?(ta(),Ea=Ka(),
Ea!==a?X={type:"interval-period",period:"second",precision:ua,secondary:null}:(e=X,X=a)):(e=X,X=a)):(e=X,X=a)):(e=X,X=a),X===a&&(X=e,ua=da(),ua!==a&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),X=ua))}X!==a?u={type:"interval-qualifier",start:D,end:X}:(e=u,u=a)}else e=u,u=a;else e=u,u=a;u===a&&(u=e,X=W(),X!==a?(ta(),D=Fa(),D!==a?(ta(),D=P(),D!==a?(ta(),ua=Ka(),ua!==a?u={type:"interval-period",period:X.value,precision:D,secondary:null}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):
(e=u,u=a),u===a&&(u=e,X=W(),X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null}),u=X,u===a&&(u=e,X=da(),X!==a?(ta(),D=Fa(),D!==a?(ta(),D=ja(),D!==a?(ta(),ua=Ha(),ua!==a?(ta(),X=P(),X!==a?(ta(),ua=Ka(),ua!==a?u={type:"interval-period",period:"second",precision:D,secondary:X}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a),u===a&&(u=e,X=da(),X!==a?(ta(),D=Fa(),D!==a?(ta(),D=P(),D!==a?(ta(),ua=Ka(),ua!==a?u={type:"interval-period",period:"second",precision:D,
secondary:null}:(e=u,u=a)):(e=u,u=a)):(e=u,u=a)):(e=u,u=a),u===a&&(u=e,X=da(),X!==a&&(X={type:"interval-period",period:"second",precision:null,secondary:null}),u=X)))));return u}function W(){var u=e;u=ra();u!==a&&(u={type:"string",value:"day"});u===a&&(u=e,u=sa(),u!==a&&(u={type:"string",value:"hour"}),u===a&&(u=e,u=aa(),u!==a&&(u={type:"string",value:"minute"}),u===a&&(u=e,u=na(),u!==a&&(u={type:"string",value:"month"}),u===a&&(u=e,u=ka(),u!==a&&(u={type:"string",value:"year"})))));return u}function P(){var u=
Na();u!==a&&(u=parseFloat(u));return u}function ja(){var u=Na();u!==a&&(u=parseFloat(u));return u}function ba(){var u=qa();u===a&&(u=F());return u}function qa(){var u=e;if(39===m.charCodeAt(e)){var D=jb;e++}else D=a,0===va&&k(md);D===a&&(m.substr(e,2)===xb?(D=xb,e+=2):(D=a,0===va&&k(Be)));if(D!==a){D=[];var X=e;m.substr(e,2)===Ra?(X=Ra,e+=2):(X=a,0===va&&k(nd));X!==a&&(X="'");X===a&&(od.test(m.charAt(e))?(X=m.charAt(e),e++):(X=a,0===va&&k(pd)));for(;X!==a;)D.push(X),X=e,m.substr(e,2)===Ra?(X=Ra,e+=
2):(X=a,0===va&&k(nd)),X!==a&&(X="'"),X===a&&(od.test(m.charAt(e))?(X=m.charAt(e),e++):(X=a,0===va&&k(pd)));39===m.charCodeAt(e)?(X=jb,e++):(X=a,0===va&&k(md));X!==a?u={type:"string",value:D.join("")}:(e=u,u=a)}else e=u,u=a;return u}function wa(){var u=e;if(Da()!==a){ta();var D=l();if(D!==a){ta();var X=Ga();X!==a?(ta(),X=l(),X!==a?u={type:"when-clause",operand:D,value:X}:(e=u,u=a)):(e=u,u=a)}else e=u,u=a}else e=u,u=a;return u}function xa(){var u=e;if(Da()!==a){ta();var D=l();if(D!==a){ta();var X=
Ga();X!==a?(ta(),X=l(),X!==a?u={type:"when-clause",operand:D,value:X}:(e=u,u=a)):(e=u,u=a)}else e=u,u=a}else e=u,u=a;return u}function Ba(){var u=e;var D=e;if(m.substr(e,4).toLowerCase()===Ce){var X=m.substr(e,4);e+=4}else X=a,0===va&&k(De);if(X!==a){X=e;va++;var ua=E();va--;ua===a?X=void 0:(e=X,X=a);X!==a?D="ELSE":(e=D,D=a)}else e=D,D=a;D!==a?(ta(),D=l(),D!==a?u={type:"else-clause",value:D}:(e=u,u=a)):(e=u,u=a);return u}function Ca(){var u=Na();if(u===a){u=e;if(45===m.charCodeAt(e)){var D=sb;e++}else D=
a,0===va&&k(Cc);D===a&&(43===m.charCodeAt(e)?(D=hb,e++):(D=a,0===va&&k(Bc)));if(D!==a){var X=Na();X!==a?u=D[0]+X:(e=u,u=a)}else e=u,u=a}return u}function Ja(){var u=e;if(46===m.charCodeAt(e)){var D=ob;e++}else D=a,0===va&&k(Ee);D!==a?(u=Na(),u===a&&(u=null),u="."+(null!=u?u:"")):(e=u,u=a);return u}function La(){var u;var D=u=e;if(Fe.test(m.charAt(e))){var X=m.charAt(e);e++}else X=a,0===va&&k(Ge);X!==a?(He.test(m.charAt(e))?(D=m.charAt(e),e++):(D=a,0===va&&k(Ie)),D===a&&(D=null),D="e"+(null===D?"":
D)):(e=D,D=a);D!==a?(X=Na(),X!==a?u=D+X:(e=u,u=a)):(e=u,u=a);return u}function Na(){var u=[];var D=bb();if(D!==a)for(;D!==a;)u.push(D),D=bb();else u=a;u!==a&&(u=u.join(""));return u}function bb(){if(Je.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&k(Ke);return u}function b(){var u=e;if(m.substr(e,2).toLowerCase()===M){var D=m.substr(e,2);e+=2}else D=a,0===va&&k(Le);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="IN":(e=u,u=a)}else e=u,u=a;return u}function h(){var u=
e;if(m.substr(e,2).toLowerCase()===ca){var D=m.substr(e,2);e+=2}else D=a,0===va&&k(Me);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="IS":(e=u,u=a)}else e=u,u=a;return u}function ea(){var u=e;if(m.substr(e,4).toLowerCase()===S){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(Ne);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="LIKE":(e=u,u=a)}else e=u,u=a;return u}function ia(){var u=e;if(m.substr(e,3).toLowerCase()===za){var D=m.substr(e,3);e+=3}else D=a,0===va&&
k(Oe);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="NOT":(e=u,u=a)}else e=u,u=a;return u}function oa(){var u=e;if(m.substr(e,3).toLowerCase()===Aa){var D=m.substr(e,3);e+=3}else D=a,0===va&&k(Pe);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="AND":(e=u,u=a)}else e=u,u=a;return u}function v(){var u=e;if(m.substr(e,2).toLowerCase()===Ia){var D=m.substr(e,2);e+=2}else D=a,0===va&&k(Qe);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="OR":
(e=u,u=a)}else e=u,u=a;return u}function G(){var u=e;if(m.substr(e,7).toLowerCase()===Ma){var D=m.substr(e,7);e+=7}else D=a,0===va&&k(Re);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="BETWEEN":(e=u,u=a)}else e=u,u=a;return u}function Q(){var u=e;if(m.substr(e,4).toLowerCase()===Va){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(Se);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="FROM":(e=u,u=a)}else e=u,u=a;return u}function T(){var u=e;if(m.substr(e,4).toLowerCase()===
pb){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(Te);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="TRIM":(e=u,u=a)}else e=u,u=a;return u}function fa(){var u=e;if(m.substr(e,8).toLowerCase()===Ue){var D=m.substr(e,8);e+=8}else D=a,0===va&&k(Ve);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="INTERVAL":(e=u,u=a)}else e=u,u=a;return u}function ka(){var u=e;if(m.substr(e,4).toLowerCase()===We){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(Xe);if(D!==a){D=e;va++;
var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="YEAR":(e=u,u=a)}else e=u,u=a;return u}function na(){var u=e;if(m.substr(e,5).toLowerCase()===Ye){var D=m.substr(e,5);e+=5}else D=a,0===va&&k(Ze);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="MONTH":(e=u,u=a)}else e=u,u=a;return u}function ra(){var u=e;if(m.substr(e,3).toLowerCase()===$e){var D=m.substr(e,3);e+=3}else D=a,0===va&&k(af);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="DAY":(e=u,u=a)}else e=u,u=
a;return u}function sa(){var u=e;if(m.substr(e,4).toLowerCase()===bf){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(cf);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="HOUR":(e=u,u=a)}else e=u,u=a;return u}function aa(){var u=e;if(m.substr(e,6).toLowerCase()===df){var D=m.substr(e,6);e+=6}else D=a,0===va&&k(ef);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="MINUTE":(e=u,u=a)}else e=u,u=a;return u}function da(){var u=e;if(m.substr(e,6).toLowerCase()===ff){var D=
m.substr(e,6);e+=6}else D=a,0===va&&k(gf);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="SECOND":(e=u,u=a)}else e=u,u=a;return u}function ma(){var u=e;if(m.substr(e,4).toLowerCase()===hf){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(jf);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="CASE":(e=u,u=a)}else e=u,u=a;return u}function ya(){var u=e;if(m.substr(e,3).toLowerCase()===kf){var D=m.substr(e,3);e+=3}else D=a,0===va&&k(lf);if(D!==a){D=e;va++;var X=E();va--;
X===a?D=void 0:(e=D,D=a);D!==a?u="END":(e=u,u=a)}else e=u,u=a;return u}function Da(){var u=e;if(m.substr(e,4).toLowerCase()===mf){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(nf);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="WHEN":(e=u,u=a)}else e=u,u=a;return u}function Ga(){var u=e;if(m.substr(e,4).toLowerCase()===of){var D=m.substr(e,4);e+=4}else D=a,0===va&&k(pf);if(D!==a){D=e;va++;var X=E();va--;X===a?D=void 0:(e=D,D=a);D!==a?u="THEN":(e=u,u=a)}else e=u,u=a;return u}function Ha(){if(44===
m.charCodeAt(e)){var u=qf;e++}else u=a,0===va&&k(rf);return u}function Fa(){if(40===m.charCodeAt(e)){var u=sf;e++}else u=a,0===va&&k(tf);return u}function Ka(){if(41===m.charCodeAt(e)){var u=uf;e++}else u=a,0===va&&k(vf);return u}function ta(){var u;var D=[];for(u=Wa();u!==a;)D.push(u),u=Wa();return D}function Wa(){if(wf.test(m.charAt(e))){var u=m.charAt(e);e++}else u=a,0===va&&k(xf);return u}function ab(u,D,X,ua){u={type:"binary-expression",operator:u,left:D,right:X};void 0!==ua&&(u.escape=ua);return u}
function $a(u,D){for(var X=0;X<D.length;X++)u=ab(D[X][1],u,D[X][3]);return u}n=void 0!==n?n:{};var a={},db=n.grammarSource,Sa={start:H},gb=H,nb="!",Ya="\x3d",Eb="\x3e\x3d",dc="\x3e",Fb="\x3c\x3d",la="\x3c\x3e",ec="\x3c",Cb="!\x3d",hb="+",sb="-",fc="*",Tb="/",zc="@",jb="'",xb="N'",Ra="''",ob=".",tb="null",Pa="true",Hb="false",M="in",ca="is",S="like",pa="escape",za="not",Aa="and",Ia="or",Ma="between",Va="from",Ua="for",Ta="substring",cb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te=
"leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf="case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,hd=/^[^`]/,qd=w("!",!1),Qc=w("\x3d",!1),sd=w("\x3e\x3d",!1),td=w("\x3e",!1),ud=w("\x3c\x3d",!1),vd=w("\x3c\x3e",!1),wd=w("\x3c",!1),xd=w("!\x3d",!1),Bc=w("+",!1),Cc=
w("-",!1),yd=w("*",!1),zd=w("/",!1),ne=N([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=N([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=N([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=w("@",!1),md=w("'",!1),Be=w("N'",!1),nd=w("''",!1),pd=N(["'"],!0,!1),Ee=w(".",!1),Ke=N([["0","9"]],!1,!1),Ge=N(["e","E"],!1,!1),Ie=N(["+","-"],!1,!1),Fd=w("NULL",!0),Bd=w("TRUE",!0),Dd=w("FALSE",!0),Le=w("IN",!0),Me=w("IS",!0),Ne=w("LIKE",!0),rd=w("ESCAPE",!0),Oe=w("NOT",!0),Pe=w("AND",
!0),Qe=w("OR",!0),Re=w("BETWEEN",!0),Se=w("FROM",!0),Wd=w("FOR",!0),Sd=w("SUBSTRING",!0),Nd=w("EXTRACT",!0),Te=w("TRIM",!0),be=w("POSITION",!0),Ld=w("TIMESTAMP",!0),Id=w("DATE",!0),ue=w("LEADING",!0),we=w("TRAILING",!0),ye=w("BOTH",!0),Ae=w("TO",!0),Ve=w("INTERVAL",!0),Xe=w("YEAR",!0),Ze=w("MONTH",!0),af=w("DAY",!0),cf=w("HOUR",!0),ef=w("MINUTE",!0),gf=w("SECOND",!0),jf=w("CASE",!0),lf=w("END",!0),nf=w("WHEN",!0),pf=w("THEN",!0),De=w("ELSE",!0),rf=w(",",!1),tf=w("(",!1),vf=w(")",!1),xf=N([" ","\t",
"\n","\r"],!1,!1),gd=w("`",!1),id=N(["`"],!0,!1),e=0,gc=[{line:1,column:1}],ub=0,Ac=[],va=0;if("startRule"in n){if(!(n.startRule in Sa))throw Error("Can't start parsing from rule \""+n.startRule+'".');gb=Sa[n.startRule]}var Pc=gb();if(Pc!==a&&e===m.length)return Pc;Pc!==a&&e<m.length&&k({type:"end"});throw function(u,D,X){return new z(z.buildMessage(u,D),u,D,X)}(Ac,ub<m.length?m.charAt(ub):null,ub<m.length?I(ub,ub+1):I(ub,ub));}}})})(ha);let K=function(){function r(){}r.parse=function(z){return ha.exports.parse(z)};
return r}();f.WhereGrammar=K;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(f){f.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};f.commonjsRequire=function(c){throw Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
};f.getDefaultExportFromCjs=function(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c["default"]:c}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(f){f.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,
supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,
supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I,k,H){function d(U,V,g,p){const x=p.x-g.x;p=p.y-g.y;V=Math.min(1,Math.max(0,((V.x-g.x)*x+(V.y-g.y)*p)/(x*x+p*p)));U.x=g.x+x*V;U.y=g.y+p*V}function l(U,V){return U?V?4:3:V?3:2}let L=function(){function U(g,p,x){this.items=g;this.query=p;this.geometryType=x.geometryType;this.hasM=x.hasM;this.hasZ=x.hasZ;this.fieldsIndex=x.fieldsIndex;this.objectIdField=x.objectIdField;this.spatialReference=x.spatialReference;this.featureAdapter=x.featureAdapter}var V=U.prototype;V.createQueryResponseForCount=
function(){const g=new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:p,having:x,outStatistics:B}=this.query;if(!p?.length)return 1;const Z=new Map,A=new Map,C=new Set;for(const t of B){var {statisticType:J}=t;J="exceedslimit"!==J?t.onStatisticField:void 0;if(!A.has(J)){var E=[];for(const F of p){const q=this._getAttributeValues(g,F,Z);E.push(q)}A.set(J,this._calculateUniqueValues(E,g.returnDistinctValues))}J=
A.get(J);for(const F in J){const {data:q,items:R}=J[F];E=q.join(",");x&&!g.validateItems(R,x)||C.add(E)}}return C.size};V.createQueryResponse=function(){var g=ha._asyncToGenerator(function*(){let p;p=this.query.outStatistics?this.query.outStatistics.some(x=>"exceedslimit"===x.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(m.isValid(this.query.outSR)&&
!m.equals(this.query.geometry.spatialReference,this.query.outSR)?p.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...w.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):p.queryGeometry=Y.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return p});return function(){return g.apply(this,arguments)}}();V.createSnappingResponse=function(g,p){const x=this.featureAdapter,B=l(this.hasZ,this.hasM),{point:Z}=
g,A="number"===typeof g.distance?g.distance:g.distance.x,C="number"===typeof g.distance?g.distance:g.distance.y,J={candidates:[]},E="esriGeometryPolygon"===this.geometryType;p=this._getPointCreator(Z,null!=Z.z,null!=Z.m,this.spatialReference,p);const t=new O(null,0),F=new O(null,0),q={x:0,y:0,z:0};for(const wa of this.items){var R=x.getGeometry(wa);if(K.isNone(R))continue;const {coords:xa,lengths:Ba}=R;t.coords=xa;F.coords=xa;if(g.types&c.SnappingTypes.EDGE){R=0;for(var W=0;W<Ba.length;W++){var P=
Ba[W];for(var ja=0;ja<P;ja++,R+=B){var ba=t;ba.coordsIndex=R;if(ja!==P-1){const Ca=F;Ca.coordsIndex=R+B;const Ja=q;d(q,Z,ba,Ca);var qa=(Z.x-Ja.x)/A;const La=(Z.y-Ja.y)/C;qa=qa*qa+La*La;1>=qa&&J.candidates.push(N.makeEdgeCandidate(x.getObjectId(wa),p(Ja),Math.sqrt(qa),p(ba),p(Ca)))}}}}if(g.types&c.SnappingTypes.VERTEX)for(R=E?xa.length-B:xa.length,W=0;W<R;W+=B)P=t,P.coordsIndex=W,ja=(Z.x-P.x)/A,ba=(Z.y-P.y)/C,ja=ja*ja+ba*ba,1>=ja&&J.candidates.push(N.makeVertexCandidate(x.getObjectId(wa),p(P),Math.sqrt(ja)))}J.candidates.sort((wa,
xa)=>wa.distance-xa.distance);return J};V._getPointCreator=function(g,p,x,B,Z){const A=K.isSome(Z)&&!m.equals(B,Z)?E=>w.project(E,B,Z):E=>E,{hasZ:C}=this,J=g.m;return p&&x?C?({x:E,y:t,z:F})=>A({x:E,y:t,z:F,m:J}):({x:E,y:t})=>A({x:E,y:t,z:0,m:J}):p?C?({x:E,y:t,z:F})=>A({x:E,y:t,z:F}):({x:E,y:t})=>A({x:E,y:t,z:0}):x?({x:E,y:t})=>A({x:E,y:t,m:J}):({x:E,y:t})=>A({x:E,y:t})};V.createSummaryStatisticsResponse=function(){var g=ha._asyncToGenerator(function*(p){const {field:x,valueExpression:B,normalizationField:Z,
normalizationType:A,normalizationTotal:C,minValue:J,maxValue:E,scale:t}=p;p=this.fieldsIndex.isDateField(x);var F=yield this._getDataValues({field:x,valueExpression:B,normalizationField:Z,normalizationType:A,normalizationTotal:C,scale:t});const q=k.isNullCountSupported({normalizationType:A,normalizationField:Z,minValue:J,maxValue:E}),R=this.fieldsIndex.get(x),W={value:.5,fieldType:R?.type};F=I.isStringField(R)?k.calculateStringStatistics({values:F,supportsNullCount:q,percentileParams:W}):k.calculateStatistics({values:F,
minValue:J,maxValue:E,useSampleStdDev:!A,supportsNullCount:q,percentileParams:W});return k.processSummaryStatisticsResult(F,p)});return function(p){return g.apply(this,arguments)}}();V.createUniqueValuesResponse=function(){var g=ha._asyncToGenerator(function*(p){const {field:x,valueExpression:B,domains:Z,returnAllCodedValues:A,scale:C}=p;var J=yield this._getDataValues({field:x,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:B,scale:C});J=k.calculateUniqueValuesCount(J);
return k.createUVResult(J,Z,A,p.fieldDelimiter)});return function(p){return g.apply(this,arguments)}}();V.createClassBreaksResponse=function(){var g=ha._asyncToGenerator(function*(p){const {field:x,valueExpression:B,normalizationField:Z,normalizationType:A,normalizationTotal:C,classificationMethod:J,standardDeviationInterval:E,minValue:t,maxValue:F,numClasses:q,scale:R}=p;p=yield this._getDataValues({field:x,valueExpression:B,normalizationField:Z,normalizationType:A,normalizationTotal:C,scale:R});
p=k.calculateClassBreaks(p,{field:x,normalizationField:Z,normalizationType:A,normalizationTotal:C,classificationMethod:J,standardDeviationInterval:E,minValue:t,maxValue:F,numClasses:q});return k.resolveCBResult(p,J)});return function(p){return g.apply(this,arguments)}}();V.createHistogramResponse=function(){var g=ha._asyncToGenerator(function*(p){const {field:x,valueExpression:B,normalizationField:Z,normalizationType:A,normalizationTotal:C,classificationMethod:J,standardDeviationInterval:E,minValue:t,
maxValue:F,numBins:q,scale:R}=p;p=yield this._getDataValues({field:x,valueExpression:B,normalizationField:Z,normalizationType:A,normalizationTotal:C,scale:R});return k.calculateHistogram(p,{field:x,normalizationField:Z,normalizationType:A,normalizationTotal:C,classificationMethod:J,standardDeviationInterval:E,minValue:t,maxValue:F,numBins:q})});return function(p){return g.apply(this,arguments)}}();V._sortFeatures=function(g,p,x){if(1<g.length&&p&&p.length)for(const B of p.reverse()){p=B.split(" ");
const Z=p[0],A=this.fieldsIndex.get(Z);p=p[1]&&"desc"===p[1].toLowerCase();const C=k.getAttributeComparator(A?.type,p);g.sort((J,E)=>{J=x(J,Z,A);E=x(E,Z,A);return C(J,E)})}};V._createFeatureQueryResponse=function(g){const p=this.items,{geometryType:x,hasM:B,hasZ:Z,objectIdField:A,spatialReference:C}=this,{outFields:J,outSR:E,quantizationParameters:t,resultRecordCount:F,resultOffset:q,returnZ:R,returnM:W}=g,P=null!=F?p.length>(q||0)+F:!1,ja=J&&(J.includes("*")?[...this.fieldsIndex.fields]:J.map(ba=>
this.fieldsIndex.get(ba)));return{exceededTransferLimit:P,features:this._createFeatures(g,p),fields:ja,geometryType:x,hasM:B&&W,hasZ:Z&&R,objectIdFieldName:A,spatialReference:Y.cleanFromGeometryEngine(E?E:C),transform:t&&y.toQuantizationTransform(t)||null}};V._createFeatures=function(g,p){const x=new n(g,this.featureAdapter,this.fieldsIndex),{hasM:B,hasZ:Z}=this,{orderByFields:A,quantizationParameters:C,returnGeometry:J,returnCentroid:E,maxAllowableOffset:t,resultOffset:F,resultRecordCount:q,returnZ:R=
!1,returnM:W=!1}=g,P=Z&&R,ja=B&&W;g=[];var ba=0;p=[...p];this._sortFeatures(p,A,(xa,Ba,Ca)=>x.getFieldValue(xa,Ba,Ca));if(J||E){var qa=y.toQuantizationTransform(C);if(J&&!E)for(var wa of p)g[ba++]={attributes:x.getAttributes(wa),geometry:Y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),t,qa,P,ja)};else if(!J&&E)for(const xa of p)g[ba++]={attributes:x.getAttributes(xa),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa)};else for(const xa of p)g[ba++]=
{attributes:x.getAttributes(xa),centroid:Y.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa),geometry:Y.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),t,qa,P,ja)}}else for(qa of p)(wa=x.getAttributes(qa))&&(g[ba++]={attributes:wa});ba=F||0;null!=q&&(g=g.slice(ba,Math.min(g.length,ba+q)));return g};V._createExceedsLimitQueryResponse=function(g){var p=!1;let x=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY;p=Number.POSITIVE_INFINITY;for(const Z of g.outStatistics)if("exceedslimit"===
Z.statisticType){x=null!=Z.maxPointCount?Z.maxPointCount:Number.POSITIVE_INFINITY;B=null!=Z.maxRecordCount?Z.maxRecordCount:Number.POSITIVE_INFINITY;p=null!=Z.maxVertexCount?Z.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)p=this.items.length>x;else if(this.items.length>B)p=!0;else{g=l(this.hasZ,this.hasM);const Z=this.featureAdapter;p=this.items.reduce((A,C)=>{C=Z.getGeometry(C);return A+(K.isSome(C)&&C.coords.length||0)},0)/g>p}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(p)}}]}};V._createStatisticsQueryResponse=function(){var g=ha._asyncToGenerator(function*(p){var x={attributes:{}};const B=[],Z=new Map,A=new Map,C=new Map,J=new Map,E=new n(p,this.featureAdapter,this.fieldsIndex);var t=p.outStatistics;const {groupByFieldsForStatistics:F,having:q,orderByFields:R}=p;p=F&&F.length;const W=!!p,P=W&&F[0],ja=W&&!this.fieldsIndex.get(P);
for(const Ba of t){const {outStatisticFieldName:Ca,statisticType:Ja}=Ba;t=Ba;var ba="exceedslimit"!==Ja?Ba.onStatisticField:void 0;const La="percentile_disc"===Ja||"percentile_cont"===Ja,Na="EnvelopeAggregate"===Ja||"CentroidAggregate"===Ja||"ConvexHullAggregate"===Ja,bb=W&&1===p&&(ba===P||ja)&&"count"===Ja;if(W){if(!C.has(ba)){var qa=[];for(const b of F){var wa=this._getAttributeValues(E,b,Z);qa.push(wa)}C.set(ba,this._calculateUniqueValues(qa,Na?!1:E.returnDistinctValues))}qa=C.get(ba);for(const b in qa){const {count:h,
data:ea,items:ia,itemPositions:oa}=qa[b];wa=ea.join(",");if(!q||E.validateItems(ia,q)){const v=J.get(wa)||{attributes:{}};if(Na){v.aggregateGeometries||(v.aggregateGeometries={});const {aggregateGeometries:Q,outStatisticFieldName:T}=yield this._getAggregateGeometry(t,ia);v.aggregateGeometries[T]=Q}else{var xa=null;if(bb)xa=h;else{const Q=this._getAttributeValues(E,ba,Z);xa=oa.map(T=>Q[T]);xa=La&&"statisticParameters"in t?this._getPercentileValue(t,xa):this._getStatisticValue(t,xa,null,E.returnDistinctValues)}v.attributes[Ca]=
xa}let G=0;F.forEach((Q,T)=>v.attributes[this.fieldsIndex.get(Q)?Q:`EXPR_${++G}`]=ea[T]);J.set(wa,v)}}}else if(Na){x.aggregateGeometries||(x.aggregateGeometries={});const {aggregateGeometries:b,outStatisticFieldName:h}=yield this._getAggregateGeometry(t,this.items);x.aggregateGeometries[h]=b}else ba=this._getAttributeValues(E,ba,Z),x.attributes[Ca]=La&&"statisticParameters"in t?this._getPercentileValue(t,ba):this._getStatisticValue(t,ba,A,E.returnDistinctValues);B.push({name:Ca,alias:Ca,type:"esriFieldTypeDouble"})}x=
W?Array.from(J.values()):[x];this._sortFeatures(x,R,(Ba,Ca)=>Ba.attributes[Ca]);return{fields:B,features:x}});return function(p){return g.apply(this,arguments)}}();V._getAggregateGeometry=function(){var g=ha._asyncToGenerator(function*(p,x){var B=yield new Promise((R,W)=>f(["../../../geometry/geometryEngineJSON"],R,W));const {statisticType:Z,outStatisticFieldName:A}=p,{featureAdapter:C,spatialReference:J,geometryType:E,hasZ:t,hasM:F}=this;x=x.map(R=>Y.getGeometry(E,t,F,C.getGeometry(R)));const q=
B.convexHull(J,x,!0)[0];p={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===Z?(B=q?z.getPolygonExtent(q):z.getGeometryExtent(B.union(J,x)),p.aggregateGeometries={...B,spatialReference:J},p.outStatisticFieldName=A||"extent"):"CentroidAggregate"===Z?(B=q?r.polygonCentroid(q):r.extentCentroid(z.getGeometryExtent(B.union(J,x))),p.aggregateGeometries={x:B[0],y:B[1],spatialReference:J},p.outStatisticFieldName=A||"centroid"):"ConvexHullAggregate"===Z&&(p.aggregateGeometries=q,p.outStatisticFieldName=
A||"convexHull");return p});return function(p,x){return g.apply(this,arguments)}}();V._getStatisticValue=function(g,p,x,B){const {onStatisticField:Z,statisticType:A}=g;g=null;g=x?.has(Z)?x.get(Z):I.isStringField(this.fieldsIndex.get(Z))?k.calculateStringStatistics({values:p,returnDistinct:B}):k.calculateStatistics({values:p,minValue:null,maxValue:null,useSampleStdDev:!0});x&&x.set(Z,g);return g["var"===A?"variance":A]};V._getPercentileValue=function(g,p){const {onStatisticField:x,statisticParameters:B,
statisticType:Z}=g,{value:A,orderBy:C}=B;g=this.fieldsIndex.get(x);return k.calculatePercentile(p,{value:A,orderBy:C,fieldType:g?.type,isDiscrete:"percentile_disc"===Z})};V._getAttributeValues=function(g,p,x){if(x.has(p))return x.get(p);const B=this.fieldsIndex.get(p),Z=this.items.map(A=>g.getFieldValue(A,p,B));x.set(p,Z);return Z};V._getAttributeDataValues=function(g,p){return this.items.map(x=>g.getDataValue(x,{field:p.field,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,normalizationField:p.normalizationField,
normalizationType:p.normalizationType,normalizationTotal:p.normalizationTotal}))};V._getAttributeExpressionValues=function(){var g=ha._asyncToGenerator(function*(p,x,B){const {arcadeUtils:Z}=yield H.loadArcade();x=Z.createFunction(x);B=B&&Z.getViewInfo(B);return p.getExpressionValues(this.items,x,B,Z)});return function(p,x,B){return g.apply(this,arguments)}}();V._calculateUniqueValues=function(g,p){const x={},B=this.items,Z=B.length;for(let A=0;A<Z;A++){const C=B[A],J=[];for(const t of g)J.push(t[A]);
const E=J.join(",");p?null==x[E]&&(x[E]={count:1,data:J,items:[C],itemPositions:[A]}):null==x[E]?x[E]={count:1,data:J,items:[C],itemPositions:[A]}:(x[E].count++,x[E].items.push(C),x[E].itemPositions.push(A))}return x};V._getDataValues=function(){var g=ha._asyncToGenerator(function*(p){const x=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:B,field:Z,normalizationField:A,normalizationType:C,normalizationTotal:J,scale:E}=p,t=B?{viewingMode:"map",scale:E,spatialReference:this.query.outSR||
this.spatialReference}:null;return B?this._getAttributeExpressionValues(x,B,t):this._getAttributeDataValues(x,{field:Z,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,normalizationField:A,normalizationType:C,normalizationTotal:J})});return function(p){return g.apply(this,arguments)}}();ha._createClass(U,[{key:"size",get:function(){return this.items.length}}]);return U}();c.SnappingTypes=void 0;(function(U){U[U.NONE=0]="NONE";U[U.EDGE=1]="EDGE";U[U.VERTEX=2]="VERTEX"})(c.SnappingTypes||
(c.SnappingTypes={}));let O=function(){function U(V,g){this.coords=V;this.coordsIndex=g}ha._createClass(U,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return U}();c.QueryEngineResult=L;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(f,c,ha){function K({scale:A,translate:C},J){return Math.round((J-C[0])/A[0])}function r({scale:A,translate:C},J){return Math.round((C[1]-J)/A[1])}function z(A,C,J){const E=[];let t,F,q,R;for(let W=0;W<J.length;W++){const P=J[W];if(0<W){if(q=K(A,P[0]),R=r(A,P[1]),q!==t||R!==F)E.push(C(P,q-t,R-F)),t=q,F=R}else t=K(A,P[0]),F=r(A,P[1]),E.push(C(P,t,F))}return 0<E.length?E:null}function y(A,C,J,E){return z(A,J?E?Z:B:E?B:x,C)}function m(A,C,J,E){const t=[];J=J?E?Z:B:E?B:x;for(E=
0;E<C.length;E++){const F=z(A,J,C[E]);F&&3<=F.length&&t.push(F)}return t.length?t:null}function n(A,C,J,E){const t=[];J=J?E?Z:B:E?B:x;for(E=0;E<C.length;E++){const F=z(A,J,C[E]);F&&2<=F.length&&t.push(F)}return t.length?t:null}function w({scale:A,translate:C},J){return J*A[0]+C[0]}function N({scale:A,translate:C},J){return C[1]-J*A[1]}function Y(A,C,J){const E=Array(J.length);if(!J.length)return E;const [t,F]=A.scale;let q=w(A,J[0][0]);A=N(A,J[0][1]);E[0]=C(J[0],q,A);for(let R=1;R<J.length;R++){const W=
J[R];q+=W[0]*t;A-=W[1]*F;E[R]=C(W,q,A)}return E}function I(A,C,J){const E=Array(J.length);for(let t=0;t<J.length;t++)E[t]=Y(A,C,J[t]);return E}function k(A,C,J,E){return Y(A,J?E?Z:B:E?B:x,C)}function H(A,C,J,E){return I(A,J?E?Z:B:E?B:x,C)}function d(A,C,J,E){return I(A,J?E?Z:B:E?B:x,C)}function l(A,C,J){let [E,t]=J[0],F=Math.min(E,C[0]),q=Math.min(t,C[1]),R=Math.max(E,C[2]);C=Math.max(t,C[3]);for(let W=1;W<J.length;W++){const [P,ja]=J[W];E+=P;t+=ja;0>P&&(F=Math.min(F,E));0<P&&(R=Math.max(R,E));0>
ja?q=Math.min(q,t):0<ja&&(C=Math.max(C,t))}A[0]=F;A[1]=q;A[2]=R;A[3]=C;return A}function L(A,C){if(!C.length)return null;A[0]=A[1]=Number.POSITIVE_INFINITY;A[2]=A[3]=Number.NEGATIVE_INFINITY;for(let J=0;J<C.length;J++)l(A,A,C[J]);return A}function O(A,C,J,E,t){C.xmin=K(A,J.xmin);C.ymin=r(A,J.ymin);C.xmax=K(A,J.xmax);C.ymax=r(A,J.ymax);C!==J&&(E&&(C.zmin=J.zmin,C.zmax=J.zmax),t&&(C.mmin=J.mmin,C.mmax=J.mmax));return C}function U(A,C,J,E,t){C.points=y(A,J.points,E,t)??[];return C}function V(A,C,J,E,
t){C.x=K(A,J.x);C.y=r(A,J.y);C!==J&&(E&&(C.z=J.z),t&&(C.m=J.m));return C}function g(A,C,J,E,t){A=m(A,J.rings,E,t);if(!A)return null;C.rings=A;return C}function p(A,C,J,E,t){A=n(A,J.paths,E,t);if(!A)return null;C.paths=A;return C}const x=(A,C,J)=>[C,J],B=(A,C,J)=>[C,J,A[2]],Z=(A,C,J)=>[C,J,A[2],A[3]];f.equals=function(A,C){if(A===C||null==A&&null==C)return!0;if(null==A||null==C)return!1;let J,E,t,F;A&&"upperLeft"===A.originPosition?(J=A.translate[0],E=A.translate[1],A=A.scale[0]):(J=c.isSome(A.extent)?
A.extent.xmin:0,E=c.isSome(A.extent)?A.extent.ymax:0,A=A.tolerance);C&&"upperLeft"===C.originPosition?(t=C.translate[0],F=C.translate[1],C=C.scale[0]):(t=c.isSome(C.extent)?C.extent.xmin:0,F=c.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);return J===t&&E===F&&A===C};f.getQuantizedBoundsCoordsArray=l;f.getQuantizedBoundsCoordsArrayArray=L;f.getQuantizedBoundsPaths=function(A){return L([0,0,0,0],A)};f.getQuantizedBoundsPoints=function(A){const C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(C,C,A)};f.getQuantizedBoundsRings=function(A){return L([0,0,0,0],A)};f.quantizeBounds=function(A,C,J){C[0]=K(A,J[0]);C[3]=r(A,J[1]);C[2]=K(A,J[2]);C[1]=r(A,J[3]);return C};f.quantizeExtent=O;f.quantizeGeometry=function(A,C){return A&&C?ha.isPoint(C)?V(A,{},C,!1,!1):ha.isPolyline(C)?p(A,{},C,!1,!1):ha.isPolygon(C)?g(A,{},C,!1,!1):ha.isMultipoint(C)?U(A,{},C,!1,!1):ha.isExtent(C)?O(A,{},C,!1,!1):null:null};f.quantizeMultipoint=U;f.quantizePaths=
n;f.quantizePoint=V;f.quantizePoints=y;f.quantizePolygon=g;f.quantizePolyline=p;f.quantizeRings=m;f.quantizeX=K;f.quantizeY=r;f.toQuantizationTransform=function(A){return A?{originPosition:"upper-left"===A.originPosition?"upperLeft":"lower-left"===A.originPosition?"lowerLeft":A.originPosition,scale:A.tolerance?[A.tolerance,A.tolerance]:[1,1],translate:c.isSome(A.extent)?[A.extent.xmin,A.extent.ymax]:[0,0]}:null};f.unquantizeBounds=function(A,C,J){return J?(C[0]=w(A,J[0]),C[1]=N(A,J[3]),C[2]=w(A,J[2]),
C[3]=N(A,J[1]),C):[w(A,C[0]),N(A,C[3]),w(A,C[2]),N(A,C[1])]};f.unquantizeCoordsArray=Y;f.unquantizeCoordsArrayArray=I;f.unquantizeExtent=function(A,C,J,E,t){C.xmin=w(A,J.xmin);C.ymin=N(A,J.ymin);C.xmax=w(A,J.xmax);C.ymax=N(A,J.ymax);C!==J&&(E&&(C.zmin=J.zmin,C.zmax=J.zmax),t&&(C.mmin=J.mmin,C.mmax=J.mmax));return C};f.unquantizeMultipoint=function(A,C,J,E,t){c.isSome(J)&&(C.points=k(A,J.points,E,t));return C};f.unquantizePaths=H;f.unquantizePoint=function(A,C,J,E,t){if(c.isNone(J))return C;C.x=w(A,
J.x);C.y=N(A,J.y);C!==J&&(E&&(C.z=J.z),t&&(C.m=J.m));return C};f.unquantizePoints=k;f.unquantizePolygon=function(A,C,J,E,t){c.isSome(J)&&(C.rings=d(A,J.rings,E,t));return C};f.unquantizePolyline=function(A,C,J,E,t){c.isSome(J)&&(C.paths=H(A,J.paths,E,t));return C};f.unquantizeRings=d;f.unquantizeX=w;f.unquantizeY=N;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport",
"../../../statistics/utils"],function(f,c,ha){return function(){function K(z,y,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=z.returnDistinctValues??!1;this.fieldsIndex=m;this.featureAdapter=y;if((y=z.outFields)&&!y.includes("*")){this.outFields=y;z=0;for(const w of y){var n=c.getExpressionFromFieldName(w);n=(y=this.fieldsIndex.get(n))?null:c.getWhereClause(n,m);y=y?y.name:c.getAliasFromFieldName(w)||`FIELD_EXP_${z++}`;this._fieldDataCache.set(w,{alias:y,
clause:n})}}}var r=K.prototype;r.countDistinctValues=function(z){if(!this.returnDistinctValues)return z.length;z.forEach(y=>this.getAttributes(y));return this._returnDistinctMap.size};r.getAttributes=function(z){z=this._processAttributesForOutFields(z);return this._processAttributesForDistinctValues(z)};r.getFieldValue=function(z,y,m){const n=m?m.name:y;let w=null;this._fieldDataCache.has(n)?w=this._fieldDataCache.get(n).clause:m||(w=c.getWhereClause(y,this.fieldsIndex),this._fieldDataCache.set(n,
{alias:n,clause:w}));return m?this.featureAdapter.getAttribute(z,n):w.calculateValue(z,this.featureAdapter)};r.getDataValue=function(z,y){const m=y.normalizationType,n=y.normalizationTotal;let w=this.getFieldValue(z,y.field,this.fieldsIndex.get(y.field));y.field2&&(w=`${ha.processNullValue(w)}${y.fieldDelimiter}${ha.processNullValue(this.getFieldValue(z,y.field2,this.fieldsIndex.get(y.field2)))}`,y.field3&&(w=`${w}${y.fieldDelimiter}${ha.processNullValue(this.getFieldValue(z,y.field3,this.fieldsIndex.get(y.field3)))}`));
m&&Number.isFinite(w)&&(z="field"===m&&y.normalizationField?this.getFieldValue(z,y.normalizationField,this.fieldsIndex.get(y.normalizationField)):null,w=ha.getNormalizedValue(w,m,z,n));return w};r.getExpressionValue=function(z,y,m,n){z={attributes:this.featureAdapter.getAttributes(z),layer:{fields:this.fieldsIndex.fields}};m=n.createExecContext(z,m);return n.executeFunction(y,m)};r.getExpressionValues=function(z,y,m,n){const w={fields:this.fieldsIndex.fields};return z.map(N=>{N={attributes:this.featureAdapter.getAttributes(N),
layer:w};N=n.createExecContext(N,m);return n.executeFunction(y,N)})};r.validateItem=function(z,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:c.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testFeature(z,this.featureAdapter)};r.validateItems=function(z,y){this._fieldDataCache.has(y)||this._fieldDataCache.set(y,{alias:y,clause:c.getWhereClause(y,this.fieldsIndex)});return this._fieldDataCache.get(y).clause.testSet(z,this.featureAdapter)};
r._processAttributesForOutFields=function(z){const y=this.outFields;if(!y||!y.length)return this.featureAdapter.getAttributes(z);const m={};for(const n of y){const {alias:w,clause:N}=this._fieldDataCache.get(n);m[w]=N?N.calculateValue(z,this.featureAdapter):this.featureAdapter.getAttribute(z,w)}return m};r._processAttributesForDistinctValues=function(z){if(f.isNone(z)||!this.returnDistinctValues)return z;var y=this.outFields,m=[];if(y)for(const w of y){var {alias:n}=this._fieldDataCache.get(w);m.push(z[n])}else for(n in z)m.push(z[n]);
y=`${(y||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(y)||0;this._returnDistinctMap.set(y,++m);return 1<m?null:z};return K}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(f,c,ha){function K(g){return null==g||"string"===typeof g&&!g?"\x3cNull\x3e":g}function r(g){const p=null!=g.minValue||null!=g.maxValue,x=!!g.sqlExpression&&g.supportsSQLExpression;return!(null!=g.normalizationField||
null!=g.normalizationType)&&!p&&!x}function z(g){const {values:p,useSampleStdDev:x,supportsNullCount:B}=g;var Z=Number.POSITIVE_INFINITY;let A=Number.NEGATIVE_INFINITY,C=null,J=null;var E=null;let t=null,F=0;const q=null==g.minValue?-Infinity:g.minValue,R=null==g.maxValue?Infinity:g.maxValue;for(const W of p)Number.isFinite(W)?W>=q&&W<=R&&(C+=W,Z=Math.min(Z,W),A=Math.max(A,W),F++):"string"===typeof W&&F++;if(F&&null!=C){J=C/F;E=0;for(const W of p)Number.isFinite(W)&&W>=q&&W<=R&&(E+=(W-J)**2);t=x?
1<F?E/(F-1):0:0<F?E/F:0;E=Math.sqrt(t)}else A=Z=null;Z={avg:J,count:F,max:A,min:Z,stddev:E,sum:C,variance:t};B&&(Z.nullcount=p.length-F);g.percentileParams&&(Z.median=y(p,g.percentileParams));return Z}function y(g,p){const {fieldType:x,value:B,orderBy:Z,isDiscrete:A}=p,C=m(x,"desc"===Z);g=[...g].filter(F=>null!=F).sort((F,q)=>C(F,q));if(0===g.length)return null;if(0>=B)return g[0];if(1<=B)return g[g.length-1];var J=(g.length-1)*B,E=Math.floor(J);p=E+1;J%=1;E=g[E];const t=g[p];return p>=g.length||
A||"string"===typeof E||"string"===typeof t?E:E*(1-J)+t*J}function m(g,p){const x=p?1:-1,B=w(p),Z=n(p);if(!g||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...U].includes(g))return(A,C)=>"number"===typeof A&&"number"===typeof C?B(A,C):"string"===typeof A&&"string"===typeof C?Z(A,C):x;if("esriFieldTypeDate"===g)return(A,C)=>{A=(new Date(A)).getTime();C=(new Date(C)).getTime();return isNaN(A)||isNaN(C)?x:B(A,C)};if(U.has(g))return(A,C)=>B(A,C);if("esriFieldTypeString"===
g)return(A,C)=>Z(A,C);if("esriFieldTypeGUID"===g||"esriFieldTypeGlobalID"===g){const A=n(p);return(C,J)=>A(N(C),N(J))}return p?(A,C)=>1:(A,C)=>-1}function n(g){return g?(p,x)=>{p=p?.toUpperCase();x=x?.toUpperCase();return p>x?-1:p<x?1:0}:(p,x)=>{p=p?.toUpperCase();x=x?.toUpperCase();return p<x?-1:p>x?1:0}}function w(g){return g?(p,x)=>x-p:(p,x)=>p-x}function N(g){return g.substr(24,12)+g.substr(19,4)+g.substr(16,2)+g.substr(14,2)+g.substr(11,2)+g.substr(9,2)+g.substr(6,2)+g.substr(4,2)+g.substr(2,
2)+g.substr(0,2)}function Y(g){return"coded-value"!==g?.type?[]:g.codedValues.map(p=>p.code)}function I(g,p){const x=H({field:p.field,normalizationType:p.normalizationType,normalizationField:p.normalizationField,classificationMethod:p.classificationMethod,standardDeviationInterval:p.standardDeviationInterval,breakCount:p.numClasses||5});g=k(g,p.minValue,p.maxValue);return ha.createGenerateRendererClassBreaks({definition:x,values:g,normalizationTotal:p.normalizationTotal})}function k(g,p,x){p=null==
p?-Infinity:p;x=null==x?Infinity:x;return g.filter(B=>Number.isFinite(B)&&B>=p&&B<=x)}function H(g){const p=g.field,x=g.classificationMethod||"equal-interval",B=g.normalizationType,Z=g.normalizationField,A=new c;A.classificationField=p;A.breakCount=g.breakCount;A.classificationMethod=x;A.standardDeviationInterval="standard-deviation"===x?g.standardDeviationInterval||1:void 0;A.normalizationType=B;A.normalizationField="field"===B?Z:void 0;return A}function d(g,p){const {field:x,classificationMethod:B,
standardDeviationInterval:Z,normalizationType:A,normalizationField:C,normalizationTotal:J,minValue:E,maxValue:t}=p,F=p.numBins||10;let q=p=null,R=null;B&&"equal-interval"!==B||A?({classBreaks:g}=I(g,{field:x,normalizationType:A,normalizationField:C,normalizationTotal:J,classificationMethod:B,standardDeviationInterval:Z,minValue:E,maxValue:t,numClasses:F}),p=g[0].minValue,q=g[g.length-1].maxValue,R=g.map(W=>[W.minValue,W.maxValue])):(null!=E&&null!=t?(p=E,q=t):(g=z({values:g,minValue:E,maxValue:t,
useSampleStdDev:!A,supportsNullCount:r({normalizationType:A,normalizationField:C,minValue:E,maxValue:t})}),p=g.min,q=g.max),R=L(p,q,F));return{min:p,max:q,intervals:R}}function l(g,p){let x=-1;for(let B=g.length-1;0<=B;B--)if(p>=g[B][0]){x=B;break}return x}function L(g,p,x){const B=(p-g)/x,Z=[];let A;for(let C=1;C<=x;C++)A=g+B,A=Number(A.toFixed(16)),Z.push([g,C===x?p:A]),g=A;return Z}const O=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,U=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]),V="min max avg stddev count sum variance nullcount median".split(" ");f.calculateClassBreaks=I;f.calculateHistogram=function(g,p){const {min:x,max:B,intervals:Z}=d(g,p),A=Z.map((C,J)=>({minValue:Z[J][0],maxValue:Z[J][1],count:0}));for(const C of g)null!=C&&C>=x&&C<=B&&(g=l(Z,C),-1<g&&A[g].count++);return{bins:A,minValue:x,maxValue:B,normalizationTotal:p.normalizationTotal}};f.calculatePercentile=y;f.calculateStatistics=z;f.calculateStringStatistics=function(g){const p=g.returnDistinct?
[...(new Set(g.values))]:g.values,x=p.filter(Z=>null!=Z).length,B={count:x};g.supportsNullCount&&(B.nullcount=p.length-x);g.percentileParams&&(B.median=y(p,g.percentileParams));return B};f.calculateUniqueValuesCount=function(g){const p={};for(let x of g){if(null==x||"string"===typeof x&&""===x.trim())x=null;null==p[x]?p[x]={count:1,data:x}:p[x].count++}return{count:p}};f.createClassBreaksDefinition=H;f.createUVResult=function(g,p,x,B){g=g.count;const Z=[];if(x&&p){x=[];var A=Y(p[0]);for(const C of A)if(p[1]){A=
Y(p[1]);for(const J of A)if(p[2]){A=Y(p[2]);for(const E of A)x.push(`${K(C)}${B}${K(J)}${B}${K(E)}`)}else x.push(`${K(C)}${B}${K(J)}`)}else x.push(C);for(const C of x)g.hasOwnProperty(C)||(g[C]={data:C,count:0})}for(const C in g)p=g[C],Z.push({value:p.data,count:p.count,label:p.label});return{uniqueValueInfos:Z}};f.getAttributeComparator=m;f.getEqualIntervalBins=L;f.getNormalizedValue=function(g,p,x,B){let Z=null;switch(p){case "log":0!==g&&(Z=Math.log(g)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(B)&&
0!==B&&(Z=g/B*100);break;case "field":Number.isFinite(x)&&0!==x&&(Z=g/x);break;case "natural-log":0<g&&(Z=Math.log(g));break;case "square-root":0<g&&(Z=g**.5)}return Z};f.isNullCountSupported=r;f.processNullValue=K;f.processSummaryStatisticsResult=function(g,p){let x;for(x in g)V.includes(x)&&(Number.isFinite(g[x])||(g[x]=null));if(!p)return g;["avg","stddev","variance"].forEach(B=>{null!=g[B]&&(g[B]=Math.ceil(g[B]))});return g};f.resolveCBResult=function(g,p){let x=g.classBreaks;const B=x[0].minValue,
Z=x[x.length-1].maxValue,A="standard-deviation"===p;x=x.map(C=>{const J=C.label;C={minValue:C.minValue,maxValue:C.maxValue,label:J};if(A&&J){const E=J.match(O).map(t=>+t.trim());2===E.length?(C.minStdDev=E[0],C.maxStdDev=E[1],0>E[0]&&0<E[1]&&(C.hasAvg=!0)):1===E.length&&(J.includes("\x3c")?(C.minStdDev=null,C.maxStdDev=E[0]):J.includes("\x3e")&&(C.minStdDev=E[0],C.maxStdDev=null))}return C});return{minValue:B,maxValue:Z,classBreakInfos:x,normalizationTotal:g.normalizationTotal}};f.statisticTypes=
V;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(f,c,ha,K,r,z,y,m){r=new ha.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});ha=new ha.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});m=function(n){function w(){var N=n.apply(this,arguments)||this;N.breakCount=null;N.classificationField=null;N.classificationMethod=null;N.normalizationField=null;N.normalizationType=
null;N.type="class-breaks-definition";return N}f._inheritsLoose(w,n);f._createClass(w,[{key:"standardDeviationInterval",set:function(N){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",N)}},{key:"definedInterval",set:function(N){"defined-interval"===this.classificationMethod&&this._set("definedInterval",N)}}]);return w}(m);c.__decorate([K.property({json:{write:!0}})],m.prototype,"breakCount",void 0);c.__decorate([K.property({json:{write:!0}})],m.prototype,"classificationField",
void 0);c.__decorate([K.property({type:String,json:{read:r.read,write:r.write}})],m.prototype,"classificationMethod",void 0);c.__decorate([K.property({json:{write:!0}})],m.prototype,"normalizationField",void 0);c.__decorate([K.property({json:{read:ha.read,write:ha.write}})],m.prototype,"normalizationType",void 0);c.__decorate([K.property({value:null,json:{write:!0}})],m.prototype,"standardDeviationInterval",null);c.__decorate([K.property({value:null,json:{write:!0}})],m.prototype,"definedInterval",
null);c.__decorate([K.property()],m.prototype,"type",void 0);return m=c.__decorate([y.subclass("esri.rest.support.ClassBreaksDefinition")],m)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(f,c,ha,K,r,z,y,m,n,w){ha=new ha.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});K=function(N){function Y(){var I=N.apply(this,arguments)||this;I.baseSymbol=null;I.colorRamp=null;I.type=null;return I}f._inheritsLoose(Y,N);return Y}(K.JSONSupport);c.__decorate([r.property({type:w,json:{write:!0}})],K.prototype,"baseSymbol",void 0);c.__decorate([r.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],K.prototype,"colorRamp",void 0);
c.__decorate([r.property({json:{read:ha.read,write:ha.write}})],K.prototype,"type",void 0);return K=c.__decorate([m.subclass("esri.rest.support.ClassificationDefinition")],K)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(f,c,ha,K){ha={key:"type",base:ha,typeMap:{algorithmic:c,multipart:K}};f.fromJSON=function(r){return r&&r.type?"algorithmic"===r.type?c.fromJSON(r):"multipart"===r.type?K.fromJSON(r):null:null};
f.types=ha;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(f,c,ha,K,r,z,y,m,n){var w;n=w=function(N){function Y(I){I=
N.call(this,I)||this;I.algorithm=null;I.fromColor=null;I.toColor=null;I.type="algorithmic";return I}f._inheritsLoose(Y,N);Y.prototype.clone=function(){return new w({fromColor:K.clone(this.fromColor),toColor:K.clone(this.toColor),algorithm:this.algorithm})};return Y}(n);c.__decorate([y.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],n.prototype,"algorithm",void 0);c.__decorate([r.property({type:ha,json:{type:[z.Integer],write:!0}})],n.prototype,"fromColor",
void 0);c.__decorate([r.property({type:ha,json:{type:[z.Integer],write:!0}})],n.prototype,"toColor",void 0);c.__decorate([r.property({type:["algorithmic"]})],n.prototype,"type",void 0);return n=w=c.__decorate([m.subclass("esri.rest.support.AlgorithmicColorRamp")],n)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(f,c,ha){f.enumeration=function(K,r={}){K=K instanceof c.JSONMap?K:new c.JSONMap(K,r);K={type:r?.ignoreUnknown??!0?
K.apiValues:String,json:{type:K.jsonValues,read:r?.readOnly?!1:{reader:K.read},write:{writer:K.write}}};void 0!==r?.readOnly&&(K.readOnly=!!r.readOnly);void 0!==r?.default&&(K.json.default=r.default);void 0!==r?.name&&(K.json.name=r.name);return ha.property(K)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,ha,K,r,z,y){ha=function(m){function n(w){w=m.call(this,w)||this;w.type=null;return w}f._inheritsLoose(n,m);return n}(ha.JSONSupport);c.__decorate([K.property({readOnly:!0,json:{read:!1,write:!0}})],ha.prototype,"type",void 0);return ha=c.__decorate([y.subclass("esri.rest.support.ColorRamp")],ha)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(f,c,ha,K,r,z,y,m){var n;r=n=function(w){function N(Y){Y=w.call(this,Y)||this;Y.colorRamps=null;Y.type="multipart";return Y}f._inheritsLoose(N,w);N.prototype.clone=function(){return new n({colorRamps:ha.clone(this.colorRamps)})};return N}(m);c.__decorate([K.property({type:[y],json:{write:!0}})],r.prototype,"colorRamps",void 0);c.__decorate([K.property({type:["multipart"]})],r.prototype,"type",void 0);return r=n=c.__decorate([z.subclass("esri.rest.support.MultipartColorRamp")],r)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,ha,K,r,z,y,m,n,w){K=new K.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let N=0;r=function(Y){function I(H){H=Y.call(this,H)||this;H.id=`sym${N++}`;H.type=null;H.color=new ha([0,0,0,1]);
return H}f._inheritsLoose(I,Y);var k=I.prototype;k.readColor=function(H){return H&&null!=H[0]?[H[0],H[1],H[2],H[3]/255]:H};k.collectRequiredFields=function(){var H=f._asyncToGenerator(function*(d,l){});return function(d,l){return H.apply(this,arguments)}}();k.hash=function(){return JSON.stringify(this.toJSON())};k.clone=function(){};return I}(r.JSONSupport);c.__decorate([z.property({type:K.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:K.write}}})],r.prototype,"type",void 0);c.__decorate([z.property({type:ha,
json:{write:{allowNull:!0}}})],r.prototype,"color",void 0);c.__decorate([n.reader("color")],r.prototype,"readColor",null);return r=c.__decorate([w.subclass("esri.symbols.Symbol")],r)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(f,c){function ha(I){const {classificationMethod:k,breakCount:H,normalizationType:d,definedInterval:l}=I.definition,L=[];var O=I.values;if(0===O.length)return[];O=O.sort((B,Z)=>B-Z);var U=O[0],V=O[O.length-1];if("equal-interval"===
k)if(O.length>=H){O=(V-U)/H;I=U;for(var g=1;g<H;g++){var p=Number((U+g*O).toFixed(6));L.push({minValue:I,maxValue:p,label:K(I,p,d)});I=p}L.push({minValue:I,maxValue:V,label:K(I,V,d)})}else O.forEach(B=>{L.push({minValue:B,maxValue:B,label:K(B,B,d)})});else if("natural-breaks"===k){O=r(O);I=z(O.uniqueValues,I.valueFrequency||O.valueFrequency,H);for(g=1;g<H;g++)O.uniqueValues.length>g&&(p=Number(O.uniqueValues[I[g]].toFixed(6)),L.push({minValue:U,maxValue:p,label:K(U,p,d)}),U=p);L.push({minValue:U,
maxValue:V,label:K(U,V,d)})}else if("quantile"===k)if(O.length>=H&&U!==V){I=Math.ceil(O.length/H);g=0;for(p=1;p<H;p++){var x=I+g-1;x>O.length&&(x=O.length-1);0>x&&(x=0);L.push({minValue:U,maxValue:O[x],label:K(U,O[x],d)});U=O[x];g+=I;I=Math.ceil((O.length-g)/(H-p))}L.push({minValue:U,maxValue:V,label:K(U,V,d)})}else for(V=-1,U=0;U<O.length;U++)I=O[U],I!==V&&(V=I,L.push({minValue:V,maxValue:I,label:K(V,I,d)}),V=I);else if("standard-deviation"===k)if(I=n(O),g=w(O,I),0===g)L.push({minValue:O[0],maxValue:O[0],
label:K(O[0],O[0],d)});else{O=m(U,V,H,I,g)*g;g=0;for(p=H;1<=p;p--)x=Number((I-(p-.5)*O).toFixed(6)),L.push({minValue:U,maxValue:x,label:K(U,x,d)}),U=x,g++;p=Number((I+.5*O).toFixed(6));L.push({minValue:U,maxValue:p,label:K(U,p,d)});U=p;g++;for(x=1;x<=H;x++)p=g===2*H?V:Number((I+(x+.5)*O).toFixed(6)),L.push({minValue:U,maxValue:p,label:K(U,p,d)}),U=p,g++}else if("defined-interval"===k){if(!l)return L;V=O[0];O=O[O.length-1];U=Math.ceil((O-V)/l);I=V;for(g=1;g<U;g++)p=Number((V+g*l).toFixed(6)),L.push({minValue:I,
maxValue:p,label:K(I,p,d)}),I=p;L.push({minValue:I,maxValue:O,label:K(I,O,d)})}return L}function K(I,k,H){let d=null;return d=I===k?H&&"percent-of-total"===H?I+"%":I.toString():H&&"percent-of-total"===H?I+"% - "+k+"%":I+" - "+k}function r(I){const k=[],H=[];let d=Number.MIN_VALUE,l=1,L=-1;for(let O=0;O<I.length;O++){const U=I[O];U===d?(l++,H[L]=l):null!==U&&(k.push(U),d=U,l=1,H.push(l),L++)}return{uniqueValues:k,valueFrequency:H}}function z(I,k,H){var d=I.length;const l=[];H>d&&(H=d);for(var L=0;L<
H;L++)l.push(Math.round(L*d/H-1));l.push(d-1);L=y(l,I,k,H);d=L.mean;L=L.sdcm;var O=H,U=0,V=0;let g=0,p=0,x=!0;for(let Z=0;2>Z&&x;Z++){0===Z&&(x=!1);for(var B=0;B<O-1;B++)for(;l[B+1]+1!==l[B+2];)if(l[B+1]+=1,U=N(B,l,I,k),g=U.sbMean,U=U.sbSdcm,V=N(B+1,l,I,k),p=V.sbMean,V=V.sbSdcm,U+V<L[B]+L[B+1])L[B]=U,L[B+1]=V,d[B]=g,d[B+1]=p,x=!0;else{--l[B+1];break}for(B=O-1;0<B;B--)for(;l[B]!==l[B-1]+1;)if(--l[B],U=N(B-1,l,I,k),g=U.sbMean,U=U.sbSdcm,V=N(B,l,I,k),p=V.sbMean,V=V.sbSdcm,U+V<L[B-1]+L[B])L[B-1]=U,L[B]=
V,d[B-1]=g,d[B]=p,x=!0;else{l[B]+=1;break}}x&&(L=y(l,I,k,H));return l}function y(I,k,H,d){let l=[];var L=[],O=[];let U=0;const V=[],g=[];for(var p=0;p<d;p++){var x=N(p,I,k,H);V.push(x.sbMean);g.push(x.sbSdcm);U+=g[p]}x=U;for(p=!0;p||U<x;){p=!1;l=[];for(L=0;L<d;L++)l.push(I[L]);for(O=0;O<d;O++)for(x=I[O]+1;x<=I[O+1];x++)if(L=k[x],0<O&&x!==I[O+1]&&Math.abs(L-V[O])>Math.abs(L-V[O-1]))I[O]=x;else if(O<d-1&&I[O]!==x-1&&Math.abs(L-V[O])>Math.abs(L-V[O+1])){I[O+1]=x-1;break}x=U;U=0;L=[];O=[];for(let B=0;B<
d;B++){L.push(V[B]);O.push(g[B]);const Z=N(B,I,k,H);V[B]=Z.sbMean;g[B]=Z.sbSdcm;U+=g[B]}}if(U>x){for(k=0;k<d;k++)I[k]=l[k],V[k]=L[k],g[k]=O[k];U=x}return{mean:V,sdcm:g}}function m(I,k,H,d,l){I=Math.max(d-I,k-d)/l/H;return 1<=I?1:.5<=I?.5:.25}function n(I){let k=0;for(let H=0;H<I.length;H++)k+=I[H];return k/=I.length}function w(I,k){let H=0;for(let d=0;d<I.length;d++){const l=I[d];H+=(l-k)*(l-k)}H/=I.length;return Math.sqrt(H)}function N(I,k,H,d){var l=0,L=0;for(var O=k[I]+1;O<=k[I+1];O++){const U=
d[O];l+=H[O]*U;L+=U}0>=L&&Y.warn("Exception in Natural Breaks calculation");l/=L;L=0;for(O=k[I]+1;O<=k[I+1];O++)L+=d[O]*(H[O]-l)**2;return{sbMean:l,sbSdcm:L}}const Y=c.getLogger("esri.rest.support.generateRendererUtils");f.createGenerateRendererClassBreaks=function(I){const {normalizationTotal:k}=I;return{classBreaks:ha(I),normalizationTotal:k}};f.createGenerateRendererUniqueValues=function(I){I=r(I);const k=[],H=I.uniqueValues.length;for(let d=0;d<H;d++){const l=I.uniqueValues[d];k.push({value:l,
count:I.valueFrequency[d],label:l.toString()})}return{uniqueValues:k}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(f){f.makeEdgeCandidate=function(c,ha,K,r,z,y=!1){return{objectId:c,target:ha,distance:K,type:"edge",start:r,end:z,draped:y}};f.makeVertexCandidate=function(c,ha,K){return{objectId:c,target:ha,distance:K,type:"vertex"}};Object.defineProperties(f,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(f,
c,ha,K,r,z,y,m,n,w,N,Y,I,k){function H(){H=ha._asyncToGenerator(function*(E,t,F){const {outFields:q,orderByFields:R,groupByFieldsForStatistics:W,outStatistics:P}=E;if(q)for(var ja=0;ja<q.length;ja++)q[ja]=q[ja].trim();if(R)for(ja=0;ja<R.length;ja++)R[ja]=R[ja].trim();if(W)for(ja=0;ja<W.length;ja++)W[ja]=W[ja].trim();if(P)for(ja=0;ja<P.length;ja++)P[ja].onStatisticField&&(P[ja].onStatisticField=P[ja].onStatisticField.trim());E.geometry&&!E.outSR&&(E.outSR=E.geometry.spatialReference);return d(E,t,
F)});return H.apply(this,arguments)}function d(E,t,F){return l.apply(this,arguments)}function l(){l=ha._asyncToGenerator(function*(E,t,F){if(!E)return null;var {where:q}=E;E.where=q=q&&q.trim();if(!q||/^1 *= *1$/.test(q)||t&&t===q)E.where=null;if(!E.geometry)return E;t=yield O(E);E.distance=0;E.units=null;"esriSpatialRelEnvelopeIntersects"===E.spatialRel&&({spatialReference:q}=E.geometry,t=m.getGeometryExtent(t),t.spatialReference=q);if(t){yield k.checkProjectionSupport(t.spatialReference,F);q=t.spatialReference;
t=L(t,F)&&n.isExtent(t)?{spatialReference:q,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t;q=(yield w.normalizeCentralMeridian(n.fromJSON(t)))[0];if(r.isNone(q))throw x;const R="quantizationParameters"in E&&E.quantizationParameters?.tolerance||"maxAllowableOffset"in E&&E.maxAllowableOffset||0;t=R&&L(t,F)?{densificationStep:8*R}:void 0;q=q.toJSON();t=yield k.project(q,q.spatialReference,F,t);if(!t)throw x;t.spatialReference=F;E.geometry=t}return E});return l.apply(this,
arguments)}function L(E,t){if(!E)return!1;const F=E.spatialReference;return(n.isExtent(E)||n.isPolygon(E)||n.isPolyline(E))&&!N.equals(F,t)&&!y.canProjectWithoutEngine(F,t)}function O(E){return U.apply(this,arguments)}function U(){U=ha._asyncToGenerator(function*(E){const {distance:t,units:F}=E,q=E.geometry;if(null==t||"vertexAttributes"in q)return q;var R=q.spatialReference;E=F?p.fromJSON(F):z.getUnitString(R);R=R&&(N.isGeographic(R)||N.isWebMercator(R))?q:yield k.checkProjectionSupport(R,N.WGS84).then(()=>
k.project(q,N.WGS84));return(yield V())(R.spatialReference,R,t,E)});return U.apply(this,arguments)}function V(){return g.apply(this,arguments)}function g(){g=ha._asyncToGenerator(function*(){return(yield new Promise((E,t)=>f(["../../../geometry/geometryEngineJSON"],E,t))).geodesicBuffer});return g.apply(this,arguments)}const p=new K.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),
x=Object.freeze({}),B=new I,Z=new I,A=new I,C={esriGeometryPoint:Y.convertToPoint,esriGeometryPolyline:Y.convertToPolyline,esriGeometryPolygon:Y.convertToPolygon,esriGeometryMultipoint:Y.convertToMultipoint},J=(E,t)=>"_geVersion"!==E?t:void 0;c.QUERY_ENGINE_EMPTY_RESULT=x;c.cleanFromGeometryEngine=function(E){return E&&"_geVersion"in E?JSON.parse(JSON.stringify(E,J)):E};c.getGeometry=function(E,t,F,q,R,W,P=t,ja=F){const ba=t&&P,qa=F&&ja;q=r.isSome(q)?"coords"in q?q:q.geometry:null;if(r.isNone(q))return null;
if(R)return t=Y.generalizeOptimizedGeometry(Z,q,t,F,E,R,P,ja),W&&(t=Y.quantizeOptimizedGeometry(A,t,ba,qa,E,W)),C[E]?.(t,ba,qa)??null;if(W)return W=Y.quantizeOptimizedGeometry(A,q,t,F,E,W,P,ja),C[E]?.(W,ba,qa)??null;Y.removeZMValues(B,q,t,F,P,ja);return C[E]?.(B,ba,qa)??null};c.normalizeQuery=function(E,t,F){return H.apply(this,arguments)};c.normalizeQueryLike=d;c.transformCentroid=function(E,t,F,q=E.hasZ,R=E.hasM){if(r.isNone(t))return null;const W=E.hasZ&&q,P=E.hasM&&R;return F?(E=Y.quantizeOptimizedGeometry(A,
t,E.hasZ,E.hasM,"esriGeometryPoint",F,q,R),Y.convertToPoint(E,W,P)):Y.convertToPoint(t,W,P)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(f,c,ha,K,r,z,y,m){function n(aa,da,ma){if(aa)for(const ya of aa)(aa=(aa=z.getDeepValue(ya,da))&&
"function"!==typeof aa&&ma.get(aa))&&z.setDeepValue(ya,aa.name,da)}function w(aa,da){if(!aa||!da)return[];G.clear();N(G,aa,da);return Array.from(G).sort()}function N(aa,da,ma){if(ma)if(da?.fields?.length)if(ma.includes("*"))for(const {name:ya}of da.fields)aa.add(ya);else for(const ya of ma)Y(aa,da,ya);else if(ma.includes("*"))aa.clear(),aa.add("*");else for(const ya of ma)null!=ya&&aa.add(ya)}function Y(aa,da,ma){"string"===typeof ma&&(da?(da=da.get(ma))&&aa.add(da.name):aa.add(ma))}function I(aa,
da,ma){return k.apply(this,arguments)}function k(){k=ha._asyncToGenerator(function*(aa,da,ma){if(ma){var {arcadeUtils:ya}=yield m.loadArcade();ma=ya.extractFieldNames(ma,da?.fields?.map(Da=>Da.name));for(const Da of ma)Y(aa,da,Da)}});return k.apply(this,arguments)}function H(aa,da,ma){return d.apply(this,arguments)}function d(){d=ha._asyncToGenerator(function*(aa,da,ma){if(ma&&"1\x3d1"!==ma){const ya=(yield new Promise((Da,Ga)=>f(["../../core/sql/WhereClause"],Da,Ga))).WhereClause.create(ma,da);if(!ya.isStandardized)throw new K("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:ma});N(aa,da,ya.fieldNames)}});return d.apply(this,arguments)}function l(aa,da){for(const ma of aa)if(ma&&ma.valueType&&ma.valueType===da)return ma.name;return null}function L(){L=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield O(da,aa);return Array.from(da).sort()});return L.apply(this,arguments)}function O(aa,da){return U.apply(this,arguments)}function U(){U=ha._asyncToGenerator(function*(aa,da){if(da){var ma=z.getDeepValue("elevationInfo.featureExpressionInfo",
da);if(ma)return ma.collectRequiredFields(aa,da.fieldsIndex)}});return U.apply(this,arguments)}function V(){V=ha._asyncToGenerator(function*(aa,da,ma){if(da&&ma&&"fields"in ma){var ya=[];ya.push(g(aa,da,ma.popupTemplate));ma.fields&&ya.push(...ma.fields.map(function(){var Da=ha._asyncToGenerator(function*(Ga){Ga.onStatisticExpression?I(aa,da.fieldsIndex,Ga.onStatisticExpression.expression):aa.add(Ga.onStatisticField)});return function(Ga){return Da.apply(this,arguments)}}()));yield Promise.all(ya)}});
return V.apply(this,arguments)}function g(aa,da,ma){return p.apply(this,arguments)}function p(){p=ha._asyncToGenerator(function*(aa,da,ma){const ya=[];ma?.expressionInfos&&ya.push(...ma.expressionInfos.map(Da=>I(aa,da.fieldsIndex,Da.expression)));ma=ma?.content;if(Array.isArray(ma))for(const Da of ma)"expression"===Da.type&&Da.expressionInfo&&ya.push(I(aa,da.fieldsIndex,Da.expressionInfo.expression));yield Promise.all(ya)});return p.apply(this,arguments)}function x(){x=ha._asyncToGenerator(function*(aa,
da,ma){da&&(da.timeInfo&&r.isSome(ma)&&ma.timeExtent&&N(aa,da.fieldsIndex,[da.timeInfo.startField,da.timeInfo.endField]),da.floorInfo&&N(aa,da.fieldsIndex,[da.floorInfo.floorField]),r.isSome(ma)&&r.isSome(ma.where)&&(yield H(aa,da.fieldsIndex,ma.where)))});return x.apply(this,arguments)}function B(){B=ha._asyncToGenerator(function*(aa,da,ma){da&&ma&&(yield Promise.all(ma.map(ya=>Z(aa,da,ya))))});return B.apply(this,arguments)}function Z(aa,da,ma){return A.apply(this,arguments)}function A(){A=ha._asyncToGenerator(function*(aa,
da,ma){da&&ma&&(ma.valueExpression?yield I(aa,da.fieldsIndex,ma.valueExpression):ma.field&&Y(aa,da.fieldsIndex,ma.field))});return A.apply(this,arguments)}function C(){C=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da="timeInfo"in aa&&aa.timeInfo;return da?w(aa.fieldsIndex,[aa.trackIdField,da.startField,da.endField]):[]});return C.apply(this,arguments)}function J(){J=ha._asyncToGenerator(function*(aa){if(!aa)return[];const da=new Set;yield E(da,aa);return Array.from(da).sort()});return J.apply(this,
arguments)}function E(aa,da){return t.apply(this,arguments)}function t(){t=ha._asyncToGenerator(function*(aa,da){const {labelingInfo:ma,fieldsIndex:ya}=da;ma&&ma.length&&(yield Promise.all(ma.map(Da=>F(aa,ya,Da))))});return t.apply(this,arguments)}function F(aa,da,ma){return q.apply(this,arguments)}function q(){q=ha._asyncToGenerator(function*(aa,da,ma){if(ma){var ya=ma.getLabelExpression();ma=ma.where;"arcade"===ya.type?yield I(aa,da,ya.expression):(ya=ya.expression.match(/{[^}]*}/g))&&ya.forEach(Da=>
{Y(aa,da,Da.slice(1,-1))});yield H(aa,da,ma)}});return q.apply(this,arguments)}function R(aa){return"number"===typeof aa&&!isNaN(aa)&&isFinite(aa)}function W(aa){return null===aa||R(aa)}function P(aa){return null===aa||Q(aa)}function ja(aa){return null!=aa&&"string"===typeof aa}function ba(aa){return null===aa||ja(aa)}function qa(){return!0}function wa(aa,da){let ma;switch(aa.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ma=
aa.nullable?P:Q;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ma=aa.nullable?W:R;break;case "string":case "esriFieldTypeString":ma=aa.nullable?ba:ja;break;default:ma=qa}return 1===arguments.length?ma:ma(da)}function xa(aa){return null!=aa&&fa.has(aa.type)}function Ba(aa,da){return aa.nullable&&null===da?null:xa(aa)&&!Ca(aa.type,Number(da))?c.NumericRangeValidationError.OUT_OF_RANGE:wa(aa,da)?aa.domain?y.validateDomainValue(aa.domain,da):null:c.TypeValidationError.INVALID_TYPE}
function Ca(aa,da){aa="string"===typeof aa?Ja(aa):aa;if(!aa)return!1;const ma=aa.min,ya=aa.max;return aa.isInteger?Q(da)&&da>=ma&&da<=ya:da>=ma&&da<=ya}function Ja(aa){switch(aa){case "esriFieldTypeSmallInteger":case "small-integer":return ka;case "esriFieldTypeInteger":case "integer":return na;case "esriFieldTypeSingle":case "single":return ra;case "esriFieldTypeDouble":case "double":return sa}}function La(aa,da,ma){if(!da||!da.attributes||!aa){if(r.isSome(ma))for(var ya of aa??[])ma.add(ya);return!0}da=
da.attributes;ya=!1;for(const Da of aa)if(!(Da in da))if(ya=!0,r.isSome(ma))ma.add(Da);else break;return ya}function Na(){Na=ha._asyncToGenerator(function*(aa,da){const ma=new Set;for(const ya of da)yield I(ma,aa.fieldsIndex,ya);return Array.from(ma).sort()});return Na.apply(this,arguments)}const bb=/^([0-9])/,b=/[^A-Za-z0-9_\u0080-\uffff]/g,h=/_{2,}/g,ea=/^_/,ia=/_$/,oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
v=["field","normalizationField"],G=new Set,Q=(()=>"isInteger"in Number?Number.isInteger:aa=>"number"===typeof aa&&isFinite(aa)&&Math.floor(aa)===aa)(),T=["integer","small-integer","single","double"],fa=new Set([...T,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);c.NumericRangeValidationError=void 0;(c.NumericRangeValidationError||(c.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";c.TypeValidationError=void 0;
(c.TypeValidationError||(c.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ka={min:-32768,max:32767,isInteger:!0},na={min:-2147483648,max:2147483647,isInteger:!0},ra={min:-3.4E38,max:1.2E38,isInteger:!1},sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};c.collectArcadeFieldNames=I;c.collectElevationFields=O;c.collectFeatureReductionFields=function(aa,da,ma){return V.apply(this,arguments)};c.collectField=Y;c.collectFields=N;c.collectFilterFields=function(aa,
da,ma){return x.apply(this,arguments)};c.collectLabelingFields=E;c.collectOrderByInfos=function(aa,da,ma){return B.apply(this,arguments)};c.collectPopupTemplateFields=g;c.doubleRange=sa;c.featureHasFields=function(aa,da){return!La(aa,da,null)};c.fixFields=w;c.fixRendererFields=function(aa,da){if(null!=aa&&null!=da)for(const ma of Array.isArray(aa)?aa:[aa])if(n(oa,ma,da),"visualVariables"in ma&&ma.visualVariables)for(const ya of ma.visualVariables)n(v,ya,da)};c.fixTimeInfoFields=function(aa,da){if(null!=
aa&&da?.fields?.length)if("startField"in aa){var ma=da.get(aa.startField);da=da.get(aa.endField);aa.startField=ma?.name??null;aa.endField=da?.name??null}else ma=da.get(aa.startTimeField),da=da.get(aa.endTimeField),aa.startTimeField=ma?.name??null,aa.endTimeField=da?.name??null};c.getDisplayFieldName=function({displayField:aa,fields:da}){if(aa)return aa;if(!da||!da.length)return null;if(!(aa=l(da,"name-or-title")||l(da,"unique-identifier")||l(da,"type-or-category")))a:{for(const ma of da)if(ma&&ma.name&&
(da=ma.name.toLowerCase(),da.includes("name")||da.includes("title"))){aa=ma.name;break a}aa=null}return aa};c.getElevationFields=function(aa){return L.apply(this,arguments)};c.getExpressionFields=function(aa,da){return Na.apply(this,arguments)};c.getFeatureEditFields=function(aa){if(!aa)return[];const da="editFieldsInfo"in aa&&aa.editFieldsInfo;return da?w(aa.fieldsIndex,[da&&da.creatorField,da&&da.creationDateField,da&&da.editorField,da&&da.editDateField]):[]};c.getFeatureGeometryFields=function(aa){if(!aa)return[];
const da=aa.geometryFieldsInfo;return da?w(aa.fieldsIndex,[da.shapeAreaField,da.shapeLengthField]):[]};c.getFieldDefaultValue=function(aa){const da=aa.defaultValue;if(void 0!==da&&wa(aa,da))return da;if(aa.nullable)return null};c.getFieldRange=function(aa){const da=y.getDomainRange(aa.domain);if(da)return da;if(xa(aa))return Ja(aa.type)};c.getLabelingFields=function(aa){return J.apply(this,arguments)};c.getNumericTypeForValue=function(aa){if(!R(aa))return null;if(Q(aa)){if(aa>=ka.min&&aa<=ka.max)return"esriFieldTypeSmallInteger";
if(aa>=na.min&&aa<=na.max)return"esriFieldTypeInteger"}return aa>=ra.min&&aa<=ra.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};c.getTimeFields=function(aa){return C.apply(this,arguments)};c.integerRange=na;c.isDateField=function(aa){return null!=aa&&("date"===aa.type||"esriFieldTypeDate"===aa.type)};c.isNumberInRange=Ca;c.isNumericField=xa;c.isRasterPixelValueField=function(aa){return["raster.itempixelvalue","raster.servicepixelvalue"].some(da=>aa.toLowerCase().startsWith(da))};c.isStringField=
function(aa){return null!=aa&&("string"===aa.type||"esriFieldTypeString"===aa.type)};c.isValidFieldValue=function(aa,da){return null===Ba(aa,da)};c.isValueMatchingFieldType=wa;c.normalizeFieldName=function(aa){return aa?aa.trim().replace(b,"_").replace(h,"_").replace(ea,"").replace(ia,"").replace(bb,"F$1"):null};c.numericTypes=T;c.packFields=function(aa,da,ma=1){if(!da||!aa)return[];if(da.includes("*"))return["*"];da=w(aa,da);return da.length/aa.fields.length>=ma?["*"]:da};c.populateMissingFields=
La;c.rendererFields=oa;c.sanitizeNullFieldValue=function(aa){return null==aa||"number"===typeof aa&&isNaN(aa)?null:aa};c.singleRange=ra;c.smallIntegerRange=ka;c.unpackFieldNames=function(aa,da){return r.isNone(da)||r.isNone(aa)?[]:da.includes("*")?(aa.fields??[]).map(ma=>ma.name):da};c.validateFieldValue=Ba;c.validationErrorToString=function(aa,da,ma){switch(aa){case y.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ma} is not in the coded domain - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;
case y.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ma} is out of the range of valid values - field: ${da.name}, domain: ${JSON.stringify(da.domain)}`;case c.TypeValidationError.INVALID_TYPE:return`Value ${ma} is not a valid value for the field type - field: ${da.name}, type: ${da.type}, nullable: ${da.nullable}`;case c.NumericRangeValidationError.OUT_OF_RANGE:const {min:ya,max:Da}=Ja(da.type);return`Value ${ma} is out of range for the number type - field: ${da.name}, type: ${da.type}, value range is ${ya} to ${Da}`}};
c.visualVariableFields=v;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(f){f.DomainValidationError=void 0;(function(c){c.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";c.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(f.DomainValidationError||(f.DomainValidationError={}));f.getDomainRange=function(c){if(c&&"range"===c.type)return{min:"range"in
c?c.range[0]:c.minValue,max:"range"in c?c.range[1]:c.maxValue}};f.validateDomainValue=function(c,ha){switch(c.type){case "range":const K="range"in c?c.range[0]:c.minValue;c="range"in c?c.range[1]:c.maxValue;if(null!=K&&+ha<K||null!=c&&+ha>c)return f.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==c.codedValues||c.codedValues.every(r=>null==r||r.code!==ha))return f.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==c.codedValues||c.codedValues.every(r=>
null==r||r.code!==ha))return f.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(f,c,ha,K,r,z,y,m){function n(){N||(N=ha._asyncToGenerator(function*(){const I=yield new Promise((k,H)=>f(["./arcadeUtils"],
k,H));return{arcade:I.arcade,arcadeUtils:I,Dictionary:I.Dictionary,Feature:I.arcadeFeature}})());return N}const w=z.getLogger("esri.support.arcadeOnDemand");let N;K=(I,k,H)=>Y.create(I,k,H,null,["$feature","$view"]);let Y=function(){function I(H,d,l,L,O,U,V,g){this.script=H;this.evaluate=O;this.fields=Array.isArray(V)?V:V.fields;this._syntaxTree=L;this._arcade=d;this._arcadeDictionary=l;this._arcadeFeature=U;this._spatialReference=g;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}I.create=function(){var H=ha._asyncToGenerator(function*(d,l,L,O,U,V){const {arcade:g,Feature:p,Dictionary:x}=yield n(),B=m.fromJSON(l);l=null;try{l=g.parseScript(d,V)}catch(F){return w.error(new r("arcade-bad-expression","Failed to parse arcade script",{script:d,error:F})),null}V=U.reduce((F,q)=>({...F,[q]:null}),{});let Z=null;y.isSome(O)&&(Z=new x(O),Z.immutable=!0,V.$config=null);var A=(O=g.scriptUsesGeometryEngine(l))&&
g.enableGeometrySupport();const C=g.scriptUsesFeatureSet(l)&&g.enableFeatureSetSupport(),J=(U=g.scriptIsAsync(l))&&g.enableAsyncSupport();V={vars:V,spatialReference:B,useAsync:!!J};yield Promise.all([A,C,J]);A=new Set;yield g.loadDependentModules(A,l,null,U,O);const E=new x;E.immutable=!1;E.setField("scale",0);const t=g.compileScript(l,V);return new I(d,g,x,l,F=>{"$view"in F&&F.$view&&(E.setField("scale",F.$view.scale),F.$view=E);Z&&(F.$config=Z);return t({vars:F,spatialReference:B})},new p,L,B)});
return function(d,l,L,O,U,V){return H.apply(this,arguments)}}();var k=I.prototype;k.repurposeFeature=function(H){H.geometry&&!H.geometry.spatialReference&&(H.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(H.geometry,H.attributes,{fields:this.fields});return this._arcadeFeature};k.createDictionary=function(){return new this._arcadeDictionary};k.referencesMember=function(H){return this._arcade.referencesMember(this._syntaxTree,H)};k.referencesFunction=
function(H){return this._arcade.referencesFunction(this._syntaxTree,H)};k.referencesGeometry=function(){return this._referencesGeometry};k.referencesScale=function(){return this._referencesScale};k.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return I}();c.ArcadeExpression=Y;c.createDictionaryExpression=(I,k,H,d)=>Y.create(I,k,H,d,["$feature","$view"]);c.createLabelExpression=(I,k,H)=>Y.create(I,k,H,null,["$feature"]);c.createRendererExpression=
K;c.createVVExpression=K;c.loadArcade=n;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I){function k(){return new Promise((L,O)=>f(["../../../geometry/geometryEngineJSON"],L,O))}function H(){H=ha._asyncToGenerator(function*(L,O,U){const {spatialRel:V,geometry:g}=L;if(g){if(null==V||!0!==l.spatialRelationship[V])throw new K("feature-store:unsupported-query","Unsupported query spatial relationship",{query:L});if(m.isValid(g.spatialReference)&&m.isValid(U)){if(null==g||!0!==l.queryGeometry[y.getJsonType(g)])throw new K("feature-store:unsupported-query",
"Unsupported query geometry type",{query:L});if(null==O||!0!==l.layerGeometry[O])throw new K("feature-store:unsupported-query","Unsupported layer geometry type",{query:L});if(L.outSR)return Y.checkProjectionSupport(L.geometry&&L.geometry.spatialReference,L.outSR)}}});return H.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};c.canQueryWithRBush=function(L){if(y.isExtent(L))return!0;if(y.isPolygon(L)){for(const O of L.rings)if(5!==O.length||O[0][0]!==O[1][0]||O[0][0]!==O[4][0]||O[2][0]!==O[3][0]||O[0][1]!==O[3][1]||O[0][1]!==O[4][1]||O[1][1]!==O[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=function(L,O,U){return H.apply(this,
arguments)};c.getSpatialQueryOperator=function(L,O,U,V,g){if(y.isPolygon(O)&&"esriGeometryPoint"===U&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L)){const p=w.convertFromPolygon(new N,O,!1,!1);return Promise.resolve(x=>n.polygonContainsPoint(p,!1,!1,x))}if(y.isPolygon(O)&&"esriGeometryMultipoint"===U){const p=w.convertFromPolygon(new N,O,!1,!1);if("esriSpatialRelContains"===L)return Promise.resolve(x=>n.polygonContainsMultipoint(p,!1,!1,x,V,g))}if(y.isExtent(O)&&"esriGeometryPoint"===
U&&("esriSpatialRelIntersects"===L||"esriSpatialRelContains"===L))return Promise.resolve(p=>r.extentContainsPoint(O,I.getGeometry(U,V,g,p)));if(y.isExtent(O)&&"esriGeometryMultipoint"===U&&"esriSpatialRelContains"===L)return Promise.resolve(p=>r.extentContainsMultipoint(O,I.getGeometry(U,V,g,p)));if(y.isExtent(O)&&"esriSpatialRelIntersects"===L){const p=z.getExtentIntersector(U);return Promise.resolve(x=>p(O,I.getGeometry(U,V,g,x)))}return k().then(p=>{const x=p[d[L]].bind(null,O.spatialReference,
O);return B=>x(I.getGeometry(U,V,g,B))})};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(f,c){f.extentIntersectsExtent=c.extentIntersectsExtent;f.extentIntersectsMultipoint=c.extentIntersectsMultipoint;f.extentIntersectsPoint=c.extentIntersectsPoint;f.extentIntersectsPolygon=c.extentIntersectsPolygon;f.extentIntersectsPolyline=c.extentIntersectsPolyline;f.extentIntersectsRings=
c.extentIntersectsRings;f.getFeatureExtentIntersector=c.getFeatureExtentIntersector;f.isSelfIntersecting=c.isSelfIntersecting;f.segmentIntersects=c.segmentIntersects;f.getExtentIntersector=function(ha){return"mesh"===ha?c.extentIntersectsExtent:c.getFeatureExtentIntersector(ha)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(f){function c(ha,K,r,z,y){if(!ha)return!1;K=K?r?4:3:r?3:2;
const {coords:m,lengths:n}=ha;r=!1;ha=0;for(const N of n){var w=ha;for(let Y=ha,I=ha+N*K;Y<I;Y+=K){w=Y+K;w===I&&(w=ha);const k=m[Y],H=m[Y+1],d=m[w];w=m[w+1];(H<y&&w>=y||w<y&&H>=y)&&k+(y-H)/(w-H)*(d-k)<z&&(r=!r)}ha+=N*K}return r}f.polygonContainsCoords=c;f.polygonContainsMultipoint=function(ha,K,r,z,y,m){y=y?m?4:3:m?3:2;const {coords:n,lengths:w}=z;if(!w)return!1;for(let N=0,Y=0;N<w.length;N++,Y+=y)if(!c(ha,K,r,n[Y],n[Y+1]))return!1;return!0};f.polygonContainsPoint=function(ha,K,r,z){return c(ha,K,
r,z.coords[0],z.coords[1])};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(f){function c(r,z,y,m,n){if(null!=m&&null!=n)return w=>{const N=r.getAttribute(w,z);w=r.getAttribute(w,y);return(null==N||N<=n)&&(null==w||w>=m)};if(null!=m)return w=>{w=r.getAttribute(w,y);return null==w||w>=m};if(null!=n)return w=>{w=r.getAttribute(w,z);return null==w||w<=n}}function ha(r,z,y,m){if(null!=
y&&null!=m&&y===m)return n=>r.getAttribute(n,z)===y;if(null!=y&&null!=m)return n=>{n=r.getAttribute(n,z);return n>=y&&n<=m};if(null!=y)return n=>r.getAttribute(n,z)>=y;if(null!=m)return n=>r.getAttribute(n,z)<=m}function K(){return()=>!1}f.getTimeExtent=function(r,z){if(!r)return null;const y=z.featureAdapter,{startTimeField:m,endTimeField:n}=r;let w=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;if(m&&n)z.forEach(Y=>{const I=y.getAttribute(Y,m);Y=y.getAttribute(Y,n);null==I||isNaN(I)||(w=Math.min(w,
I));null==Y||isNaN(Y)||(N=Math.max(N,Y))});else{const Y=m||n;z.forEach(I=>{I=y.getAttribute(I,Y);null==I||isNaN(I)||(w=Math.min(w,I),N=Math.max(N,I))})}return{start:w,end:N}};f.getTimeOperator=function(r,z,y){if(!z||!r)return null;const {startTimeField:m,endTimeField:n}=r;if(!m&&!n)return null;const {start:w,end:N}=z;return null===w&&null===N?null:void 0===w&&void 0===N?K():m&&n?c(y,m,n,w,N):ha(y,m||n,w,N)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers","./fieldUtils"],function(f,c){function ha(r){return"oid"===r.type||"esriFieldTypeOID"===r.type}function K(r){return"global-id"===r.type||"esriFieldTypeGlobalID"===r.type}return function(){function r(y=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(y){this.fields=
y;var m=[];for(const n of y)if(y=n&&n.name){const w=y.trim().toLowerCase(),N=c.normalizeFieldName(y).toLowerCase();this._fieldsMap.set(y,n);this._fieldsMap.set(w,n);this._normalizedFieldsMap.set(N,n);m.push(w);"date"===n.type||"esriFieldTypeDate"===n.type?(this.dateFields.push(n),this._dateFieldsSet.add(n)):c.isNumericField(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n));ha(n)||K(n)||(n.editable=null==n.editable?!0:!!n.editable,n.nullable=null==n.nullable?!0:!!n.nullable)}m.sort();
this.uid=m.join(",")}}var z=r.prototype;z.destroy=function(){this._fieldsMap.clear()};z.has=function(y){return null!=this.get(y)};z.get=function(y){if(y){var m=this._fieldsMap.get(y);if(m)return m;(m=this._fieldsMap.get(y.trim().toLowerCase())??this._normalizedFieldsMap.get(c.normalizeFieldName(y).toLowerCase()))&&this._fieldsMap.set(y,m);return m}};z.isDateField=function(y){return this._dateFieldsSet.has(this.get(y))};z.isNumericField=function(y){return this._numericFieldsSet.has(this.get(y))};z.normalizeFieldName=
function(y){if(y=this.get(y))return y.name??void 0};f._createClass(r,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];for(const y of this.fields)ha(y)||K(y)||y.nullable||void 0!==c.getFieldDefaultValue(y)||this._requiredFields.push(y)}return this._requiredFields}}]);return r}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(f,c,ha,K,r,z,y,m,n,w,N,Y,I,k){function H(B){return d.has(B)?d.get(B):"number"===typeof B?B:1}f.TaskPriority=void 0;(function(B){B.RESOURCE_CONTROLLER="schedule";B.SLIDE="slide";B.STREAM_DATA_LOADER="stream loader";B.ELEVATION_QUERY="elevation query";B.TERRAIN_SURFACE="terrain";B.SURFACE_GEOMETRY_UPDATES="surface geometry updates";B.GRAPHICS_CORE="Graphics3D";B.I3S_CONTROLLER="I3S";B.POINT_CLOUD_LAYER="point cloud";B.FEATURE_TILE_FETCHER="feature fetcher";B.OVERLAY="overlay";B.STAGE="stage";
B.GRAPHICS_DECONFLICTOR="graphics deconflictor";B.FILTER_VISIBILITY="Graphics3D filter visibility";B.SCALE_VISIBILITY="Graphics3D scale visibility";B.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";B.POINT_OF_INTEREST_FREQUENT="POI frequent";B.POINT_OF_INTEREST_INFREQUENT="POI infrequent";B.LABELER="labeler";B.FEATURE_QUERY_ENGINE="feature query";B.FEATURE_TILE_TREE="feature tile tree";B.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";B.ELEVATION_ALIGNMENT="elevation alignment";B.TEXT_TEXTURE_ATLAS=
"text texture atlas";B.TEXTURE_UNLOAD="texture unload";B.LINE_OF_SIGHT_TOOL="line of sight tool";B.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";B.ELEVATION_PROFILE="elevation profile";B.SNAPPING="snapping";B.SHADOW_ACCUMULATOR="shadow accumulator";B.CLOUDS_GENERATOR="cloud generator";B[B.TEST_PRIO=1]="TEST_PRIO"})(f.TaskPriority||(f.TaskPriority={}));const d=new Map([[f.TaskPriority.RESOURCE_CONTROLLER,0],[f.TaskPriority.SLIDE,0],[f.TaskPriority.STREAM_DATA_LOADER,0],[f.TaskPriority.ELEVATION_QUERY,
0],[f.TaskPriority.TERRAIN_SURFACE,1],[f.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[f.TaskPriority.GRAPHICS_CORE,2],[f.TaskPriority.I3S_CONTROLLER,2],[f.TaskPriority.POINT_CLOUD_LAYER,2],[f.TaskPriority.FEATURE_TILE_FETCHER,2],[f.TaskPriority.OVERLAY,4],[f.TaskPriority.STAGE,4],[f.TaskPriority.GRAPHICS_DECONFLICTOR,4],[f.TaskPriority.FILTER_VISIBILITY,4],[f.TaskPriority.SCALE_VISIBILITY,4],[f.TaskPriority.FRUSTUM_VISIBILITY,4],[f.TaskPriority.CLOUDS_GENERATOR,4],[f.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[f.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[f.TaskPriority.LABELER,8],[f.TaskPriority.FEATURE_QUERY_ENGINE,8],[f.TaskPriority.FEATURE_TILE_TREE,16],[f.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[f.TaskPriority.ELEVATION_ALIGNMENT,12],[f.TaskPriority.TEXT_TEXTURE_ATLAS,12],[f.TaskPriority.TEXTURE_UNLOAD,12],[f.TaskPriority.LINE_OF_SIGHT_TOOL,16],[f.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[f.TaskPriority.SNAPPING,0],[f.TaskPriority.SHADOW_ACCUMULATOR,30]]),l=w.Milliseconds(6.5),L=w.Milliseconds(1),
O=w.Milliseconds(30),U=w.Milliseconds(1E3/30),V=w.Milliseconds(100);var g;(function(B){let Z=function(){function J(){this._updating=new N.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new z("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new C;this._state=k.RenderState.INTERACTING;this._tasks=new y;this._runQueue=new y;this._load=0;this._idleStateCallbacks=new y;this._idleUpdatesStartFired=!1;this._maxReschedule=32;this._debug=this._forceTask=
!1;this._debugHandle=n.watch(()=>I.SCHEDULER_LOG_SLOW_TASKS,F=>this._debug=F,n.initial);for(const F of Object.keys(f.TaskPriority))this.performanceInfo.tasks.set(f.TaskPriority[F],new z(f.TaskPriority[F]));const t=this;this._test={FRAME_SAFETY_BUDGET:l,INTERACTING_BUDGET:U,IDLE_BUDGET:V,get availableBudget(){return t._budget.budget},usedBudget:0,getBudget:()=>t._budget,setBudget:F=>t._budget=F,updateTask:F=>this._updateTask(F),getState:F=>this._getState(F),getRuntime:F=>this._getRuntime(F),frameTaskTimes:this._frameTaskTimes,
resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var E=J.prototype;E.destroy=function(){this._tasks.toArray().forEach(t=>t.remove());this._tasks.clear();r.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updating.set(!1)};E.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))};E.registerTask=
function(t,F){const q=H(t);F=new A(this,t,F,q);this._tasks.push(F);this.performanceInfo.tasks.has(t)||this.performanceInfo.tasks.set(t,new z(t));return F};E.registerIdleStateCallbacks=function(t,F){const q={idleBegin:t,idleEnd:F};this._idleStateCallbacks.push(q);this.state===k.RenderState.IDLE&&this._idleUpdatesStartFired&&q.idleBegin();const R=this;return{remove:()=>this._removeIdleStateCallbacks(q),set idleBegin(W){R._idleUpdatesStartFired&&(q.idleEnd(),R._state===k.RenderState.IDLE&&W());q.idleBegin=
W},set idleEnd(W){q.idleEnd=W}}};E.updateBudget=function(t){this._test.usedBudget=0;++this._frameNumber;let F=l,q=t.frameDuration,R=L;switch(this.state){case k.RenderState.IDLE:F=w.Milliseconds(0);q=w.Milliseconds(Math.max(V,t.frameDuration));R=O;break;case k.RenderState.INTERACTING:q=w.Milliseconds(Math.max(U,t.frameDuration))}q=w.Milliseconds(q-t.elapsedFrameTime-F);if(this.state!==k.RenderState.IDLE&&q<L&&!this._forceTask)return this._forceTask=!0,!1;q=w.Milliseconds(Math.max(q,R));this._budget.reset(q,
this.state);this._maxReschedule=32;this._updateLoad();return this._schedule()};E.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case k.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(t=>t.idleBegin()));this._runIdle();break;case k.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};E.stopFrame=function(){this._budget.reset(w.Milliseconds(0),
this._state);this._budget.madeProgress()};E._removeIdleStateCallbacks=function(t){this._idleUpdatesStartFired&&t.idleEnd();this._idleStateCallbacks.removeUnordered(t)};E.removeTask=function(t){this._tasks.removeUnordered(t);this._runQueue.removeUnordered(t)};E._updateTask=function(t){this._tasks.forAll(F=>{F.name===t&&F.setPriority(t)})};E._getState=function(t){if(this._runQueue.some(q=>q.name===t))return f.TaskState.SCHEDULED;let F=f.TaskState.IDLE;this._tasks.forAll(q=>{q.name===t&&q.needsUpdate&&
(1>=q.schedulePriority?F=f.TaskState.READY:F!==f.TaskState.READY&&(F=f.TaskState.WAITING))});return F};E._getRuntime=function(t){let F=0;this._tasks.forAll(q=>{q.name===t&&(F+=q.runtime)});return F};E._resetRuntimes=function(){this._tasks.forAll(t=>t.runtime=0)};E._getRunning=function(){const t=new Map;this._tasks.forAll(q=>{q.needsUpdate&&t.set(q.name,(t.get(q.name)||0)+1)});if(0===t.size)return null;let F="";t.forEach((q,R)=>{F=1<q?F+` ${q}x ${R}`:F+` ${R}`});return F};E._runIdle=function(){this._run()};
E._runInteracting=function(){this._run()};E._runAnimating=function(){this._run()};E._updateLoad=function(){const t=this._tasks.reduce((F,q)=>q.needsUpdate?++F:F,0);this._load=.9*this._load+t*(1-.9)};E._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(t=>{if(t.needsUpdate)return!0;t.schedulePriority=t.basePriority;return!1});for(this._tasks.forAll(t=>{0===t.basePriority&&t.needsUpdate&&!this._runQueue.includes(t)&&this._runQueue.unshift(t)});0===this._runQueue.length;){let t=
!1;this._tasks.forAll(F=>{if(F.needsUpdate&&0!==F.schedulePriority&&0!==F.basePriority&&(!F.task.runOncePerFrame||F.lastFrameRun!==this._frameNumber))switch(t=!0,F.schedulePriority){case 1:F.schedulePriority=0;this._runQueue.push(F);break;default:--F.schedulePriority}});if(!t)return this._updating.set(!1),!1;--this._maxReschedule}this._updating.set(!0);return!0};E._run=function(){const t=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var F=this._budget.now();const q=
this._runQueue.pop();this._budget.resetProgress();try{q.task.runTask(this._budget)}catch(R){K.getLogger("esri.views.support.Scheduler").error(`Exception in task "${q.name}"`,R)}q.schedulePriority=q.basePriority;q.lastFrameRun=this._frameNumber;F=this._budget.now()-F;q.runtime+=F;this._frameTaskTimes.set(q.priority,this._frameTaskTimes.get(q.priority)+F);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",q.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");
if(0>=this._budget.remaining){this._updating.set(this._tasks.some(R=>R.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-t);return}}while(this._schedule());this._updating.set(this._tasks.some(q=>q.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-t)};E._startFrameTaskTimes=function(){for(const t of Object.keys(f.TaskPriority))this._frameTaskTimes.set(f.TaskPriority[t],0)};E._recordFrameTaskTimes=function(t){this._frameTaskTimes.forEach((F,q)=>this.performanceInfo.tasks.get(q).record(F));
this.performanceInfo.total.record(t)};c._createClass(J,[{key:"updating",get:function(){return this._updating.get()},set:function(t){this._updating.set(t)}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(t){this._state!==t&&(this._state=t,this.state!==k.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(F=>F.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return J}();
B.Scheduler=Z;let A=function(){function J(t,F,q,R){this._scheduler=t;this.name=F;this._basePriority=R;this.runtime=this.lastFrameRun=0;this._queue=new Y.PromiseQueue;this._handles=new ha;this.schedulePriority=this._basePriority;this._task=new N.ObservableValue(r.isSome(q)?q:this._queue);this._handles.add(n.when(()=>this.task.running,()=>t.activate()))}var E=J.prototype;E.remove=function(){this.processQueue(p);this._scheduler.removeTask(this);this.schedule=x.schedule;this.reschedule=x.reschedule;this._handles.destroy()};
E.setPriority=function(t){this.name=t;t=H(t);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=t;this._basePriority=t};E.schedule=function(t,F,q){return this._queue.push(t,F,q)};E.reschedule=function(t,F,q){return this._queue.unshift(t,F,q)};E.processQueue=function(t){this._queue.runTask(t)};c._createClass(J,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},
{key:"priority",get:function(){return this.name},set:function(t){this.setPriority(t)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return J}(),C=function(){function J(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=k.RenderState.IDLE;this._done=!1;this._enabled=!0}var E=J.prototype;E.run=function(t){if(this.done)return!1;!0===t()&&this.madeProgress();return!0};E.madeProgress=function(){this._done=this.elapsed>=this._budget&&
this._enabled};E.reset=function(t,F){this._begin=this.now();this._budget=t;this._state=F;this._done=!1};E.now=function(){return performance.now()};E.resetProgress=function(){this._done=!1};c._createClass(J,[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t}},{key:"remaining",get:function(){return Math.max(this._budget-
this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._done}}]);return J}();B.Budget=C})(g||(g={}));f.TaskState=void 0;(function(B){B.SCHEDULED="s";B.READY="r";B.WAITING="w";B.IDLE="i"})(f.TaskState||(f.TaskState={}));const p=(()=>{const B=new g.Budget;B.enabled=!1;return B})(),x=new (function(){function B(){}var Z=B.prototype;Z.remove=function(){};Z.processQueue=function(){};Z.schedule=function(A,C,J){try{if(m.isAborted(C)){const E=
m.createAbortError();return J?Promise.resolve(J(E)):Promise.reject(E)}return m.when(A(p))}catch(E){return Promise.reject(E)}};Z.reschedule=function(A,C,J){return this.schedule(A,C,J)};return B}());f.ImmediateTask=x;f.getTaskPriority=H;f.newScheduler=function(){return new g.Scheduler};f.noBudget=p;f.taskPriorities=d;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(f,c,ha,K,r,z,y){function m(I,k,H={}){return n(I,k,H,N)}function n(I,k,H={},d){let l=null;const L=H.once?(O,U)=>{d(O)&&(K.removeMaybe(l),k(O,U))}:(O,U)=>{d(O)&&k(O,U)};l=z.watchTracked(I,L,H.sync,H.equals);H.initial&&(I=I(),L(I,I));return l}function w(I,k,H){if(r.isAborted(H))return Promise.reject(r.createAbortError());const d=I();if(k?.(d))return Promise.resolve(d);let l=null;return new Promise((L,O)=>{l=ha.handlesGroup([r.onAbort(H,()=>{l=K.removeMaybe(l);O(r.createAbortError())}),n(I,U=>
{l=K.removeMaybe(l);L(U)},{sync:!1,once:!0},k??N)])})}function N(I){return!0}function Y(I){return!!I}f.autorun=y.autorun;f.initial={initial:!0};f.on=function(I,k,H,d={}){function l(){O&&U&&(U.remove(),d.onListenerRemove?.(O),U=O=null)}function L(p){d.once&&d.once&&K.removeMaybe(V);H(p)}let O=null,U=null,V=null;const g=m(I,(p,x)=>{l();c.isEventTarget(p)&&(O=p,U=c.on(p,k,L),d.onListenerAdd?.(p))},{sync:d.sync,initial:!0});return V=ha.makeHandle(()=>{g.remove();l()})};f.once=function(I,k){return w(I,
null,k)};f.pausable=function(I,k,H={}){let d=!1;const l=m(I,(L,O)=>{d||k(L,O)},H);return{remove(){l.remove()},pause(){d=!0},resume(){d=!1}}};f.sync={sync:!0};f.syncAndInitial={sync:!0,initial:!0};f.watch=m;f.when=function(I,k,H={}){return n(I,k,H,Y)};f.whenOnce=function(I,k){return w(I,Y,k)};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking","./SimpleObservable"],
function(f,c,ha){let K=function(){function r(y){this._observable=new ha.SimpleObservable;this._value=y}var z=r.prototype;z.get=function(){c.trackAccess(this._observable);return this._value};z.set=function(y){y!==this._value&&(this._value=y,this._observable.notify())};return r}();f.ObservableValue=K;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/promiseUtils",
"../../core/accessorSupport/tracking/ObservableValue"],function(f,c,ha,K){let r=function(){function y(){this._tasks=[];this._running=new K.ObservableValue(!1)}var m=y.prototype;m.destroy=function(){this.cancelAll()};m.runTask=function(n){for(;!n.done&&this._process(n);)n.madeProgress()};m.push=function(n,w,N){this._running.set(!0);return new Promise((Y,I)=>this._tasks.push(new z(Y,I,n,w,N)))};m.unshift=function(n,w,N){this._running.set(!0);return new Promise((Y,I)=>this._tasks.unshift(new z(Y,I,n,
w,N)))};m._process=function(n){if(0===this._tasks.length)return!1;const w=this._tasks.shift();try{const N=ha.isAborted(w.signal);if(N&&!w.abortCallback)w.reject(ha.createAbortError());else{const Y=N?w.abortCallback?.(ha.createAbortError()):w.callback(n);ha.isPromiseLike(Y)?Y.then(w.resolve,w.reject):w.resolve(Y)}}catch(N){w.reject(N)}this._running.set(0<this._tasks.length);return!0};m.cancelAll=function(){const n=ha.createAbortError();for(const w of this._tasks)if(w.abortCallback){const N=w.abortCallback(n);
w.resolve(N)}else w.reject(n);this._tasks.length=0;this._running.set(!1)};c._createClass(y,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return y}(),z=function(y,m,n,w,N){this.resolve=y;this.reject=m;this.callback=n;this.signal=w;this.abortCallback=N};f.PromiseQueue=r;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,ha,K,r,z,y){ha=function(m){function n(){var w=m.apply(this,arguments)||this;w.SCHEDULER_LOG_SLOW_TASKS=!1;w.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return w}f._inheritsLoose(n,m);return n}(ha);c.__decorate([K.property()],ha.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([K.property()],ha.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);ha=c.__decorate([y.subclass("esri.views.support.DebugFlags")],ha);return new ha})},"esri/views/support/RenderState":function(){define(["exports"],
function(f){f.RenderState=void 0;var c=f.RenderState||(f.RenderState={});c[c.ANIMATING=0]="ANIMATING";c[c.INTERACTING=1]="INTERACTING";c[c.IDLE=2]="IDLE";Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(f,c,ha,K,r){const z=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;
let y=1;f.createCapabilities=function(m,n){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:m},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:n,supportsDelete:n,supportsEditing:n,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,
supportsUpdate:n,supportsExceedsLimitStatistics:!0},query:K.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:n,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}};
f.createDefaultAttributesFunction=function(m,n){if(c("esri-csp-restrictions"))return()=>({[n]:null,...m});try{let w=`this.${n} = null;`;for(const Y in m){const I=z.test(Y)?`.${Y}`:`["${Y}"]`;w+=`this${I} = ${JSON.stringify(m[Y])};`}const N=(new Function(`\n      return class AttributesClass$${y++} {\n        constructor() {\n          ${w};\n        }\n      }\n    `))();return()=>new N}catch(w){return()=>({[n]:null,...m})}};f.createDefaultTemplate=function(m={}){return[{name:"New Feature",description:"",
prototype:{attributes:ha.clone(m)}}]};f.createDrawingInfo=function(m){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===m||"esriGeometryMultipoint"===m?r.defaultPointSymbolJSON:"esriGeometryPolyline"===m?r.defaultPolylineSymbolJSON:r.defaultPolygonSymbolJSON}}};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(f){const c=[252,146,31,255],ha={type:"esriSMS",style:"esriSMSCircle",
size:6,color:c,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},K={type:"esriSLS",style:"esriSLSSolid",width:.75,color:c};f.defaultColor=c;f.defaultOutlineColor=[153,153,153,255];f.defaultPointSymbolJSON=ha;f.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};f.defaultPolylineSymbolJSON=K;f.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",
size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};f.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};f.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};f.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/graphics/sources/support/sourceUtils":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../support/fieldUtils".split(" "),function(f,c,ha,K,r,z){function y(d){return new Y(d)}function m(){return n.apply(this,arguments)}function n(){n=ha._asyncToGenerator(function*(){K.isNone(H)&&(H=yield new Promise((d,l)=>f(["../../../../geometry/geometryEngineJSON"],d,l)));return H});return n.apply(this,
arguments)}function w(){w=ha._asyncToGenerator(function*(d,l){!r.isValid(d)||"esriGeometryPolygon"!==l&&"esriGeometryPolyline"!==l||(yield m())});return w.apply(this,arguments)}let N=function(){this.description=this.code=null},Y=function(d){this.error=new N;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=d},I=function(d){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=d};const k=new Set;let H;c.createFeatureEditErrorResult=y;c.createFeatureEditSuccessResult=
function(d){return new I(d)};c.loadGeometryEngineForSimplify=function(d,l){return w.apply(this,arguments)};c.mixAttributes=function(d,l,L,O=!1,U){k.clear();for(const x in L){const B=d.get(x);if(!B)continue;var V=L[x],g=B,p=V;let Z=p;"string"===typeof p&&z.isNumericField(g)?Z=parseFloat(p):null!=p&&z.isStringField(g)&&"string"!==typeof p&&(Z=String(p));g=z.sanitizeNullFieldValue(Z);g!==V&&U&&U.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:B,
originalValue:V,sanitizedValue:g}});k.add(B.name);if(B&&(O||B.editable)){if(V=z.validateFieldValue(B,g))return y(z.validationErrorToString(V,B,g));l[B.name]=g}}for(const x of d?.requiredFields??[])if(!k.has(x.name))return y(`missing required field "${x.name}"`);return null};c.simplify=function(d,l){if(!d||!r.isValid(l))return d;if("rings"in d||"paths"in d){if(K.isNone(H))throw new TypeError("geometry engine not loaded");return H.simplify(l,d)}return d};Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(f,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});f.kebabDict=c;Object.defineProperties(f,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Error ../../../../core/maybe ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils".split(" "),function(f,c,ha,K,r,z,y,m,n,w,N,Y,I,k,H){function d(V){return K.isPoint(V)?
null!=V.z:!!V.hasZ}function l(V){return K.isPoint(V)?null!=V.m:!!V.hasM}const L=r.WGS84,O={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:r.WGS84},U={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,
supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function V(){this._nextObjectId=this._queryEngine=null}var g=V.prototype;g.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null};g.load=function(){var p=f._asyncToGenerator(function*(x){var B=
[];const {features:Z}=x;var A=this._inferLayerProperties(Z,x.fields);const C=x.fields||[],J=null!=x.hasM?x.hasM:A.hasM,E=null!=x.hasZ?x.hasZ:A.hasZ;var t=!x.spatialReference&&!A.spatialReference;const F=t?L:x.spatialReference||A.spatialReference,q=t?O:null,R=x.geometryType||A.geometryType;let W=x.objectIdField||A.objectIdField;x=x.timeInfo;if(R&&(t&&B.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!R))throw new c("feature-layer:missing-property",
"geometryType not set and couldn't be inferred from the provided features");if(!W)throw new c("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");A.objectIdField&&W!==A.objectIdField&&(B.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${W}" doesn't match the field name "${A.objectIdField}", found in the provided fields`}),W=A.objectIdField);if(W&&!A.objectIdField){let ja=null;C.some(ba=>ba.name===W?(ja=ba,!0):!1)?
(ja.type="esriFieldTypeOID",ja.editable=!1,ja.nullable=!1):C.unshift({alias:W,name:W,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const ja of C){null==ja.name&&(ja.name=ja.alias);null==ja.alias&&(ja.alias=ja.name);if(!ja.name)throw new c("feature-layer:invalid-field-name","field name is missing",{field:ja});ja.name===W&&(ja.type="esriFieldTypeOID");if(!k.kebabDict.jsonValues.includes(ja.type))throw new c("feature-layer:invalid-field-type",`invalid type for field "${ja.name}"`,{field:ja});
}A={};for(var P of C)"esriFieldTypeOID"!==P.type&&"esriFieldTypeGlobalID"!==P.type&&(t=H.getFieldDefaultValue(P),void 0!==t&&(A[P.name]=t));this._fieldsIndex=new I(C);this._createDefaultAttributes=N.createDefaultAttributesFunction(A,W);x&&(x.startTimeField&&((P=this._fieldsIndex.get(x.startTimeField))?(x.startTimeField=P.name,P.type="esriFieldTypeDate"):x.startTimeField=null),x.endTimeField&&((P=this._fieldsIndex.get(x.endTimeField))?(x.endTimeField=P.name,P.type="esriFieldTypeDate"):x.endTimeField=
null),x.trackIdField&&((P=this._fieldsIndex.get(x.trackIdField))?x.trackIdField=P.name:(x.trackIdField=null,B.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:x}}))),x.startTimeField||x.endTimeField||(B.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:x}}),x=null));B={warnings:B,featureErrors:[],layerDefinition:{...U,drawingInfo:N.createDrawingInfo(R),templates:N.createDefaultTemplate(A),
extent:q,geometryType:R,objectIdField:W,fields:C,hasZ:!!E,hasM:!!J,timeInfo:x},assignedObjectIds:{}};this._queryEngine=new w.QueryEngine({fields:C,geometryType:R,hasM:J,hasZ:E,objectIdField:W,spatialReference:F,featureStore:new m({geometryType:R,hasM:J,hasZ:E}),timeInfo:x,cacheSpatialQueries:!0});if(!Z||!Z.length)return this._nextObjectId=y.initialObjectId,B;this._nextObjectId=y.findLastObjectIdFromFeatures(W,Z)+1;yield n.checkProjectionSupport(Z,F);return this._loadInitialFeatures(B,Z)});return function(x){return p.apply(this,
arguments)}}();g.applyEdits=function(){var p=f._asyncToGenerator(function*(x){const {spatialReference:B,geometryType:Z}=this._queryEngine;yield Promise.all([Y.loadGeometryEngineForSimplify(B,Z),n.checkProjectionSupport(x.adds,B),n.checkProjectionSupport(x.updates,B)]);return this._applyEdits(x)});return function(x){return p.apply(this,arguments)}}();g.queryFeatures=function(p,x={}){return this._queryEngine.executeQuery(p,x.signal)};g.queryFeatureCount=function(p,x={}){return this._queryEngine.executeQueryForCount(p,
x.signal)};g.queryObjectIds=function(p,x={}){return this._queryEngine.executeQueryForIds(p,x.signal)};g.queryExtent=function(p,x={}){return this._queryEngine.executeQueryForExtent(p,x.signal)};g.querySnapping=function(p,x={}){return this._queryEngine.executeQueryForSnapping(p,x.signal)};g._inferLayerProperties=function(p,x){let B=void 0,Z=void 0,A=null,C=null,J=null;for(const E of p)if(p=E.geometry,!ha.isNone(p)&&(A||(A=K.getJsonType(p)),C||(C=p.spatialReference),null==B&&(B=d(p)),null==Z&&(Z=l(p)),
A&&C&&null!=B&&null!=Z))break;if(x&&x.length){let E=null;x.some(t=>{const F="esriFieldTypeOID"===t.type,q=!t.type&&t.name&&"objectid"===t.name.toLowerCase();E=t;return F||q})&&(J=E.name)}return{geometryType:A,spatialReference:C,objectIdField:J,hasM:Z,hasZ:B}};g._loadInitialFeatures=function(p,x){const {geometryType:B,hasM:Z,hasZ:A,objectIdField:C,spatialReference:J,featureStore:E}=this._queryEngine,t=[];for(const F of x){null!=F.uid&&(p.assignedObjectIds[F.uid]=-1);if(F.geometry&&B!==K.getJsonType(F.geometry)){p.featureErrors.push(Y.createFeatureEditErrorResult("Incorrect geometry type."));
continue}x=this._createDefaultAttributes();const q=Y.mixAttributes(this._fieldsIndex,x,F.attributes,!0,p.warnings);q?p.featureErrors.push(q):(this._assignObjectId(x,F.attributes,!0),F.attributes=x,null!=F.uid&&(p.assignedObjectIds[F.uid]=F.attributes[C]),ha.isSome(F.geometry)&&(F.geometry=n.project(F.geometry,F.geometry.spatialReference,J)),t.push(F))}E.addMany(z.convertFromFeatures([],t,B,A,Z,C));p.layerDefinition.extent=this._queryEngine.fullExtent;if(p.layerDefinition.timeInfo){const {start:F,
end:q}=this._queryEngine.timeExtent;p.layerDefinition.timeInfo.timeExtent=[F,q]}return p};g._applyEdits=function(p){const {adds:x,updates:B,deletes:Z}=p;p={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};x&&x.length&&this._applyAddEdits(p,x);B&&B.length&&this._applyUpdateEdits(p,B);if(Z&&Z.length){for(const A of Z)p.deleteResults.push(Y.createFeatureEditSuccessResult(A));this._queryEngine.featureStore.removeManyById(Z)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:p}};
g._applyAddEdits=function(p,x){const {addResults:B}=p,{geometryType:Z,hasM:A,hasZ:C,objectIdField:J,spatialReference:E,featureStore:t}=this._queryEngine,F=[];for(const q of x){if(q.geometry&&Z!==K.getJsonType(q.geometry)){B.push(Y.createFeatureEditErrorResult("Incorrect geometry type."));continue}x=this._createDefaultAttributes();const R=Y.mixAttributes(this._fieldsIndex,x,q.attributes);R?B.push(R):(this._assignObjectId(x,q.attributes),q.attributes=x,null!=q.uid&&(p.uidToObjectId[q.uid]=q.attributes[J]),
ha.isSome(q.geometry)&&(x=q.geometry.spatialReference??E,q.geometry=n.project(Y.simplify(q.geometry,x),x,E)),F.push(q),B.push(Y.createFeatureEditSuccessResult(q.attributes[J])))}t.addMany(z.convertFromFeatures([],F,Z,C,A,J))};g._applyUpdateEdits=function({updateResults:p},x){const {geometryType:B,hasM:Z,hasZ:A,objectIdField:C,spatialReference:J,featureStore:E}=this._queryEngine;for(const F of x){const {attributes:q,geometry:R}=F;x=q&&q[C];if(null==x){p.push(Y.createFeatureEditErrorResult(`Identifier field ${C} missing`));
continue}if(!E.has(x)){p.push(Y.createFeatureEditErrorResult(`Feature with object id ${x} missing`));continue}const W=z.convertToFeature(E.getFeature(x),B,A,Z);if(ha.isSome(R)){if(B!==K.getJsonType(R)){p.push(Y.createFeatureEditErrorResult("Incorrect geometry type."));continue}var t=R.spatialReference??J;W.geometry=n.project(Y.simplify(R,t),t,J)}if(q&&(t=Y.mixAttributes(this._fieldsIndex,W.attributes,q))){p.push(t);continue}E.add(z.convertFromFeature(W,B,A,Z,C));p.push(Y.createFeatureEditSuccessResult(x))}};
g._assignObjectId=function(p,x,B=!1){const Z=this._queryEngine.objectIdField;B?x&&isFinite(x[Z])?p[Z]=x[Z]:p[Z]=this._nextObjectId++:p[Z]=this._nextObjectId++};return V}()});