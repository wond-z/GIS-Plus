// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/MultiOriginJSONSupport ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/ImageryTileMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/Field ./support/rasterDatasets/WCSRaster ../support/popupUtils".split(" "),
function(m,d,t,p,c,u,e,J,K,v,w,x,y,z,A,B,C,D,E,F,n,G,H){const I=new Set("milliseconds seconds minutes hours days weeks months years decades centuries".split(" "));c=function(q){function h(...a){a=q.call(this,...a)||this;a.coverageId=null;a.version=null;a.isReference=null;a.type="wcs";a.popupEnabled=!0;a.popupTemplate=null;a.fields=null;return a}m._inheritsLoose(h,q);var k=h.prototype;k.normalizeCtorArgs=function(a,b){return"string"===typeof a?{url:a,...b}:a};k.load=function(a){a=p.isSome(a)?a.signal:
null;this.addResolvingPromise(this._openRaster(a));return Promise.resolve(this)};k.createPopupTemplate=function(a){return H.createPopupTemplate({fields:this.rasterFields,title:this.title},a)};k._openRaster=function(){var a=m._asyncToGenerator(function*(b){const g=new G({url:this.url,version:this.version,coverageId:this.coverageId,ioConfig:{sampling:"closest",...this.ioConfig,customFetchParameters:this.customParameters}});yield g.open({signal:b});if(!g.rasterInfo)throw g.destroy(),new t("wcs-layer:load",
"cannot load resources on "+this.url);null==this.title&&this.setAtOrigin("title",g.datasetName,"service");null==this.coverageId&&this.setAtOrigin("coverageId",g.coverageInfo.id,"service");({multidimensionalInfo:b}=g.rasterInfo);if(p.isSome(b)&&(b=b.variables[0].dimensions.find(({name:f})=>"StdTime"===f))){let f=b.extent?.[0]??b.values[0];Array.isArray(f)&&(f=f[0]);let l=b.extent?.[1]??b.values[b.values.length-1];Array.isArray(l)&&(l=l[1]);const r=I.has(b.intervalUnit?.toLowerCase())?b.intervalUnit.toLowerCase():
null;this.set("timeInfo",{startField:"StdTime",fullTimeExtent:{start:f,end:l},timeReference:null,interval:r?{value:b.interval,unit:r}:null})}this.raster=g;this._configDefaultSettings();this.addHandles(u.watch(()=>this.customParameters,f=>this.raster.ioConfig.customFetchParameters=f))});return function(b){return a.apply(this,arguments)}}();m._createClass(h,[{key:"coverageInfo",get:function(){return this.raster.coverageInfo}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"rasterFields",get:function(){return[new n({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})]}}]);return h}(x.BlendLayer(D.ScaleRangeLayer(A.OperationalLayer(B.PortalLayer(y.CustomParametersMixin(z.ImageryTileMixin(E.TemporalLayer(C.RefreshableLayer(c.MultiOriginJSONMixin(w))))))))));d.__decorate([e.property({type:String,nonNullable:!0,json:{write:!0}})],c.prototype,"coverageId",void 0);d.__decorate([e.property()],c.prototype,"coverageInfo",
null);d.__decorate([e.property()],c.prototype,"version",void 0);d.__decorate([e.property()],c.prototype,"isReference",void 0);d.__decorate([e.property()],c.prototype,"raster",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"type",void 0);d.__decorate([e.property(F.popupEnabled)],c.prototype,"popupEnabled",void 0);d.__decorate([e.property()],c.prototype,"popupTemplate",void 0);d.__decorate([e.property({readOnly:!0})],c.prototype,"defaultPopupTemplate",null);d.__decorate([e.property({readOnly:!0,
type:[n]})],c.prototype,"fields",void 0);d.__decorate([e.property({readOnly:!0,type:[n]})],c.prototype,"rasterFields",null);return c=d.__decorate([v.subclass("esri.layers.WCSLayer")],c)});