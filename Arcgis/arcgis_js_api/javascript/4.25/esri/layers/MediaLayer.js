// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/LocalMediaElementSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Collection ../../core/collectionUtils ../../core/Evented ../../core/HandleOwner ../../core/Loadable ../../core/Logger ../../core/maybe ../../core/Promise ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/intersectsBase ../../geometry/support/spatialReferenceUtils ../graphics/data/BoundsStore ./ImageElement ./MediaElementBase ./mediaUtils ./VideoElement ../../geometry/SpatialReference".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A,G,n,y,r,P,O,V,U,l,D,m,p,R,x,B,h,k){const u=S.ofType({key:"type",defaultKeyValue:"image",base:x,typeMap:{image:R,video:h}});N=function(z){function E(K){var a=z.call(this,K)||this;a._index=new p.BoundsStore;a._elementViewsMap=new Map;a._elementsIndexes=new Map;a._elementsChangedHandler=b=>{for(var f of b.removed){const v=a._elementViewsMap.get(f);a._elementViewsMap.delete(f);a._index.delete(v);a.handles.remove(v);v.destroy();a.notifyChange("fullExtent")}({spatialReference:f}=
g._assertThisInitialized(a));for(const v of b.added){if(a._elementViewsMap.get(v))continue;const c=new B.MediaElementView({spatialReference:f,element:v});a._elementViewsMap.set(v,c);b=n.watch(()=>c.bounds,()=>a._updateIndexForElement(c,!1));a._updateIndexForElement(c,!0);a.handles.add(b,c)}a._elementsIndexes.clear();a.elements.forEach((v,c)=>a._elementsIndexes.set(v,c));a.emit("refresh")};a.elements=new u;return a}g._inheritsLoose(E,z);var Q=E.prototype;Q.load=function(){var K=g._asyncToGenerator(function*(a){G.throwIfAborted(a);
this.spatialReference||(a=this.elements.find(b=>L.isSome(b.georeference)&&L.isSome(b.georeference.coords)),this._set("spatialReference",a?L.unwrap(L.unwrap(a.georeference).coords).spatialReference:k.WGS84));this._elementsChangedHandler({added:this.elements.items,removed:[]});this.handles.add(this.elements.on("change",this._elementsChangedHandler));return this});return function(a){return K.apply(this,arguments)}}();Q.destroy=function(){this._index.clear();this._elementViewsMap.clear();this._elementsIndexes.clear()};
Q.queryElements=function(){var K=g._asyncToGenerator(function*(a,b){yield this.load();yield U.initializeProjection(a.spatialReference,this.spatialReference,null,b);a=m.equals(a.spatialReference,this.spatialReference)?a:U.project(a,this.spatialReference);if(!a)return[];a=a.normalize();const f=[];for(const v of a)this._index.forEachInBounds(l.fromExtent(v),({normalizedCoords:c,element:d})=>{L.isSome(c)&&D.extentIntersectsPolygon(v,c)&&f.push(d)});f.sort((v,c)=>this._elementsIndexes.get(v)-this._elementsIndexes.get(c));
return f});return function(a,b){return K.apply(this,arguments)}}();Q._updateIndexForElement=function(K,a){const b=K.normalizedBounds,f=this._index.has(K),v=L.isSome(b);this._index.delete(K);v&&this._index.set(K,b);this.notifyChange("fullExtent");a||f===v||this.emit("refresh")};g._createClass(E,[{key:"elements",set:function(K){this._set("elements",F.referenceSetter(K,this._get("elements"),u))}},{key:"fullExtent",get:function(){if("not-loaded"===this.loadStatus)return null;const K=this._index.fullBounds;
return L.isNone(K)?null:new V({xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3],spatialReference:this.spatialReference})}},{key:"spatialReference",set:function(K){"not-loaded"!==this.loadStatus?M.getLogger(this.declaredClass).error("#spatialReference","spatialReference cannot be changed after the source is loaded."):this._set("spatialReference",K)}}]);return E}(H.LoadableMixin(A.EsriPromiseMixin(w.HandleOwnerMixin(J.EventedAccessor))));C.__decorate([y.property()],N.prototype,"elements",null);C.__decorate([y.property({readOnly:!0})],
N.prototype,"fullExtent",null);C.__decorate([y.property()],N.prototype,"spatialReference",null);return N=C.__decorate([O.subclass("esri.layers.support.LocalMediaElementSource")],N)})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(g,C,N,S,F){function J(M,L,A){w.minX=L[0];w.minY=L[1];w.maxX=L[2];w.maxY=L[3];M.search(w,A)}const w=
{minX:0,minY:0,maxX:0,maxY:0};let H=function(){function M(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new S.PooledRBush(9,N("esri-csp-restrictions")?A=>({minX:A[0],minY:A[1],maxX:A[2],maxY:A[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const A=Array(this._idByBounds.size);let G=0;this._idByBounds.forEach((n,y)=>{A[G++]=y});this._indexInvalid=!1;this._index.clear();this._index.load(A)}else this._boundsToLoad.length&&
(this._index.load(this._boundsToLoad.filter(A=>this._idByBounds.has(A))),this._boundsToLoad.length=0)}}var L=M.prototype;L.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};L.delete=function(A){const G=this._boundsById.get(A);this._boundsById.delete(A);G&&(this._idByBounds.delete(G),this._indexInvalid||this._index.remove(G))};L.forEachInBounds=function(A,G){this._loadIndex();J(this._index,A,n=>G(this._idByBounds.get(n)))};
L.get=function(A){return this._boundsById.get(A)};L.has=function(A){return this._boundsById.has(A)};L.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};L.set=function(A,G){if(!this._indexInvalid){const n=this._boundsById.get(A);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(A,G);G&&(this._idByBounds.set(G,A),this._indexInvalid||(this._boundsToLoad.push(G),5E4<this._boundsToLoad.length&&this._loadIndex()))};C._createClass(M,
[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const A=F.empty();for(const G of this._boundsById.values())G&&(A[0]=Math.min(G[0],A[0]),A[1]=Math.min(G[1],A[1]),A[2]=Math.max(G[2],A[2]),A[3]=Math.max(G[3],A[3]));return A}},{key:"valid",get:function(){return!this._indexInvalid}}]);return M}();g.BoundsStore=H;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),
function(g,C,N,S,F,J){function w(x,B){H(x,0,x.children.length,B,x)}function H(x,B,h,k,u){u||(u=new p([]));u.minX=Infinity;u.minY=Infinity;u.maxX=-Infinity;u.maxY=-Infinity;for(let z=B,E;z<h;z++)E=x.children[z],M(u,x.leaf?k(E):E);return u}function M(x,B){x.minX=Math.min(x.minX,B.minX);x.minY=Math.min(x.minY,B.minY);x.maxX=Math.max(x.maxX,B.maxX);x.maxY=Math.max(x.maxY,B.maxY)}function L(x,B){return x.minX-B.minX}function A(x,B){return x.minY-B.minY}function G(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}
function n(x){return x.maxX-x.minX+(x.maxY-x.minY)}function y(x,B){return x.minX<=B.minX&&x.minY<=B.minY&&B.maxX<=x.maxX&&B.maxY<=x.maxY}function r(x,B){return B.minX<=x.maxX&&B.minY<=x.maxY&&B.maxX>=x.minX&&B.maxY>=x.minY}function P(x,B,h,k,u){for(B=[B,h];B.length;){h=S.assumeNonNull(B.pop());const z=S.assumeNonNull(B.pop());if(h-z<=k)continue;const E=z+Math.ceil((h-z)/k/2)*k;J.quickselect(x,E,z,h,u);B.push(z,E,E,h)}}let O=function(){function x(h=9,k){this._compareMinX=L;this._compareMinY=A;this._toBBox=
u=>u;this._maxEntries=Math.max(4,h||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));k&&("function"===typeof k?this._toBBox=k:this._initFormat(k));this.clear()}var B=x.prototype;B.destroy=function(){this.clear();V.prune();U.prune();l.prune();D.prune()};B.all=function(h){this._all(this._data,h)};B.search=function(h,k){let u=this._data;const z=this._toBBox;if(r(h,u))for(V.clear();u;){for(let E=0,Q=u.children.length;E<Q;E++){const K=u.children[E],a=u.leaf?z(K):K;r(h,a)&&(u.leaf?k(K):y(h,
a)?this._all(K,k):V.push(K))}u=V.pop()}};B.collides=function(h){let k=this._data;const u=this._toBBox;if(!r(h,k))return!1;for(V.clear();k;){for(let z=0,E=k.children.length;z<E;z++){const Q=k.children[z],K=k.leaf?u(Q):Q;if(r(h,K)){if(k.leaf||y(h,K))return!0;V.push(Q)}}k=V.pop()}return!1};B.load=function(h){if(!h.length)return this;if(h.length<this._minEntries){for(let k=0,u=h.length;k<u;k++)this.insert(h[k]);return this}h=this._build(h.slice(0,h.length),0,h.length-1,0);if(this._data.children.length)if(this._data.height===
h.height)this._splitRoot(this._data,h);else{if(this._data.height<h.height){const k=this._data;this._data=h;h=k}this._insert(h,this._data.height-h.height-1,!0)}else this._data=h;return this};B.insert=function(h){h&&this._insert(h,this._data.height-1);return this};B.clear=function(){this._data=new p([]);return this};B.remove=function(h){if(!h)return this;let k=this._data,u=null,z=0,E=!1,Q;const K=this._toBBox(h);l.clear();for(D.clear();k||0<l.length;){k||(k=S.assumeNonNull(l.pop()),u=l.data[l.length-
1],z=D.pop()??0,E=!0);if(k.leaf&&(Q=N.indexOf(k.children,h,k.children.length,k.indexHint),-1!==Q)){k.children.splice(Q,1);l.push(k);this._condense(l);break}E||k.leaf||!y(k,K)?u?(z++,k=u.children[z],E=!1):k=null:(l.push(k),D.push(z),z=0,u=k,k=k.children[0])}return this};B.toJSON=function(){return this._data};B.fromJSON=function(h){this._data=h;return this};B._all=function(h,k){for(U.clear();h;){if(!0===h.leaf)for(const u of h.children)k(u);else U.pushArray(h.children);h=U.pop()??null}};B._build=function(h,
k,u,z){var E=u-k+1,Q=this._maxEntries;if(E<=Q)return h=new p(h.slice(k,u+1)),w(h,this._toBBox),h;z||(z=Math.ceil(Math.log(E)/Math.log(Q)),Q=Math.ceil(E/Q**(z-1)));const K=new R([]);K.height=z;E=Math.ceil(E/Q);Q=E*Math.ceil(Math.sqrt(Q));for(P(h,k,u,Q,this._compareMinX);k<=u;k+=Q){const a=Math.min(k+Q-1,u);P(h,k,a,E,this._compareMinY);for(let b=k;b<=a;b+=E)K.children.push(this._build(h,b,Math.min(b+E-1,a),z-1))}w(K,this._toBBox);return K};B._chooseSubtree=function(h,k,u,z){for(;;){z.push(k);if(!0===
k.leaf||z.length-1===u)break;let E=Infinity,Q=Infinity,K=void 0;for(let a=0,b=k.children.length;a<b;a++){const f=k.children[a],v=G(f),c=(Math.max(f.maxX,h.maxX)-Math.min(f.minX,h.minX))*(Math.max(f.maxY,h.maxY)-Math.min(f.minY,h.minY))-v;c<Q?(Q=c,E=v<E?v:E,K=f):c===Q&&v<E&&(E=v,K=f)}k=K||k.children[0]}return k};B._insert=function(h,k,u){var z=this._toBBox;u=u?h:z(h);l.clear();z=this._chooseSubtree(u,this._data,k,l);z.children.push(h);for(M(z,u);0<=k;)if(l.data[k].children.length>this._maxEntries)this._split(l,
k),k--;else break;this._adjustParentBBoxes(u,l,k)};B._split=function(h,k){const u=h.data[k];var z=u.children.length;const E=this._minEntries;this._chooseSplitAxis(u,E,z);(z=this._chooseSplitIndex(u,E,z))?(z=u.children.splice(z,u.children.length-z),z=u.leaf?new p(z):new R(z),z.height=u.height,w(u,this._toBBox),w(z,this._toBBox),k?h.data[k-1].children.push(z):this._splitRoot(u,z)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};B._splitRoot=function(h,k){this._data=
new R([h,k]);this._data.height=h.height+1;w(this._data,this._toBBox)};B._chooseSplitIndex=function(h,k,u){let z,E,Q=void 0;z=E=Infinity;for(let a=k;a<=u-k;a++){var K=H(h,0,a,this._toBBox);const b=H(h,a,u,this._toBBox),f=Math.max(0,Math.min(K.maxX,b.maxX)-Math.max(K.minX,b.minX))*Math.max(0,Math.min(K.maxY,b.maxY)-Math.max(K.minY,b.minY));K=G(K)+G(b);f<z?(z=f,Q=a,E=K<E?K:E):f===z&&K<E&&(E=K,Q=a)}return Q};B._chooseSplitAxis=function(h,k,u){const z=h.leaf?this._compareMinX:L,E=h.leaf?this._compareMinY:
A,Q=this._allDistMargin(h,k,u,z);k=this._allDistMargin(h,k,u,E);Q<k&&h.children.sort(z)};B._allDistMargin=function(h,k,u,z){h.children.sort(z);z=this._toBBox;var E=H(h,0,k,z);const Q=H(h,u-k,u,z);let K=n(E)+n(Q);for(let a=k;a<u-k;a++){const b=h.children[a];M(E,h.leaf?z(b):b);K+=n(E)}for(u=u-k-1;u>=k;u--)E=h.children[u],M(Q,h.leaf?z(E):E),K+=n(Q);return K};B._adjustParentBBoxes=function(h,k,u){for(;0<=u;u--)M(k.data[u],h)};B._condense=function(h){for(let k=h.length-1;0<=k;k--){const u=h.data[k];if(0===
u.children.length)if(0<k){const z=h.data[k-1],E=z.children;E.splice(N.indexOf(E,u,E.length,z.indexHint),1)}else this.clear();else w(u,this._toBBox)}};B._initFormat=function(h){const k=["return a"," - b",";"];this._compareMinX=new Function("a","b",k.join(h[0]));this._compareMinY=new Function("a","b",k.join(h[1]));this._toBBox=new Function("a","return {minX: a"+h[0]+", minY: a"+h[1]+", maxX: a"+h[2]+", maxY: a"+h[3]+"};")};return x}();const V=new F,U=new F,l=new F,D=new F({deallocator:void 0});F=function(){this.minY=
this.minX=Infinity;this.maxY=this.maxX=-Infinity};let m=function(x){function B(){var h=x.apply(this,arguments)||this;h.height=1;h.indexHint=new N.PositionHint;return h}C._inheritsLoose(B,x);return B}(F),p=function(x){function B(h){var k=x.call(this)||this;k.children=h;k.leaf=!0;return k}C._inheritsLoose(B,x);return B}(m),R=function(x){function B(h){var k=x.call(this)||this;k.children=h;k.leaf=!1;return k}C._inheritsLoose(B,x);return B}(m);g.BBox=F;g.PooledRBush=O;Object.defineProperties(g,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/quickselect":function(){define(["exports"],function(g){var C={exports:{}};(function(N){(function(S){S=S();void 0!==S&&(N.exports=S)})(function(){function S(w,H,M,L,A){for(;L>M;){if(600<L-M){var G=L-M+1,n=H-M+1,y=Math.log(G),r=.5*Math.exp(2*y/3);y=.5*Math.sqrt(y*r*(G-r)/G)*(0>n-G/2?-1:1);S(w,H,Math.max(M,Math.floor(H-n*r/G+y)),Math.min(L,Math.floor(H+(G-n)*r/G+y)),A)}G=w[H];n=M;r=L;F(w,M,H);for(0<A(w[L],G)&&F(w,M,L);n<r;){F(w,n,r);n++;for(r--;0>
A(w[n],G);)n++;for(;0<A(w[r],G);)r--}0===A(w[M],G)?F(w,M,r):(r++,F(w,r,L));r<=H&&(M=r+1);H<=r&&(L=r-1)}}function F(w,H,M){var L=w[H];w[H]=w[M];w[M]=L}function J(w,H){return w<H?-1:w>H?1:0}return function(w,H,M,L,A){S(w,H,M||0,L||w.length-1,A||J)}})})(C);g.quickselect=C.exports})},"esri/layers/support/ImageElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../request ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),
function(g,C,N,S,F,J,w,H,M,L){w=function(A){function G(n){n=A.call(this,n)||this;n.content=null;n.type="image";n.image=null;return n}g._inheritsLoose(G,A);G.prototype.load=function(){const n=this.image;if("string"===typeof n){var y=N(n,{responseType:"image"}).then(({data:r})=>{this._set("content",r)});this.addResolvingPromise(y)}else n instanceof HTMLImageElement?(y=n.decode().then(()=>{this._set("content",n)}),this.addResolvingPromise(y)):n?this._set("content",n):this.addResolvingPromise(Promise.reject(new S("image-element:invalid-image-type",
"Invalid image type",{image:n})));return Promise.resolve(this)};g._createClass(G,[{key:"image",set:function(n){"not-loaded"!==this.loadStatus?F.getLogger(this.declaredClass).error("#image","image cannot be changed after the element is loaded."):this._set("image",n)}}]);return G}(L);C.__decorate([J.property({readOnly:!0})],w.prototype,"content",void 0);C.__decorate([J.property()],w.prototype,"image",null);return w=C.__decorate([M.subclass("esri.layers.support.ImageElement")],w)})},"esri/layers/support/MediaElementBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Identifiable ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ControlPointsGeoreference ./CornersGeoreference ./ExtentAndRotationGeoreference ./GeoreferenceBase".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A,G){J={key:"type",base:G,typeMap:{"control-points":M,corners:L,"extent-and-rotation":A}};N=function(n){function y(){var r=n.apply(this,arguments)||this;r.georeference=null;r.opacity=1;return r}g._inheritsLoose(y,n);return y}(N.NumericIdentifiableMixin(S));C.__decorate([F.property({types:J})],N.prototype,"georeference",void 0);C.__decorate([F.property()],N.prototype,"opacity",void 0);return N=C.__decorate([H.subclass("esri.layers.support.MediaElementBase")],N)})},"esri/layers/support/ControlPointsGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Logger ../../core/maybe ../../core/perspectiveUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/mat3 ../../chunks/mat3f64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A,G,n,y,r,P,O,V,U){function l(d){return F.isSome(d)&&F.isSome(d.sourcePoint)&&F.isSome(d.mapPoint)}function D(d,e,t){y.set(d,t.sourcePoint.x,t.sourcePoint.y);y.set(e,t.mapPoint.x,t.mapPoint.y)}function m(d,e,t){D(k,Q,e);D(u,K,t);y.rotate(z,u,k,f);y.rotate(E,k,u,f);y.rotate(a,K,Q,-f);y.rotate(b,Q,K,-f);e=Q;t=K;var q=a,I=b;return J.getProjectiveTransform(d,x(v,k,u,z,E),x(c,e,t,q,I))}function p(d,e,t,q){D(k,Q,e);D(u,K,t);D(z,a,q);y.lerp(E,k,u,.5);y.rotate(E,z,E,Math.PI);
y.lerp(b,Q,K,.5);y.rotate(b,a,b,Math.PI);e=Q;t=K;q=a;var I=b;return J.getProjectiveTransform(d,x(v,k,u,z,E),x(c,e,t,q,I))}function R(d,e,t,q,I){D(k,Q,e);D(u,K,t);D(z,a,q);D(E,b,I);e=Q;t=K;q=a;I=b;return J.getProjectiveTransform(d,x(v,k,u,z,E),x(c,e,t,q,I))}function x(d,e,t,q,I){d[0]=e[0];d[1]=e[1];d[2]=t[0];d[3]=t[1];d[4]=q[0];d[5]=q[1];d[6]=I[0];d[7]=I[1];return d}const B=n.create(),h=r.create();N=function(d){function e(){var t=d.apply(this,arguments)||this;t.sourcePoint=null;t.mapPoint=null;return t}
g._inheritsLoose(e,d);return e}(N);C.__decorate([H.property()],N.prototype,"sourcePoint",void 0);C.__decorate([H.property({type:P})],N.prototype,"mapPoint",void 0);N=C.__decorate([A.subclass("esri.layers.support.ControlPoint")],N);U=function(d){function e(q){q=d.call(this,q)||this;q.controlPoints=null;q.height=0;q.type="control-points";q.width=0;return q}g._inheritsLoose(e,d);var t=e.prototype;t.toMap=function(q){if(F.isNone(q)||F.isNone(this.transform)||F.isNone(this.controlPoints)||!l(this.controlPoints[0]))return null;
y.set(h,q.x,q.y);q=this.controlPoints[0].mapPoint.spatialReference;J.transformProjective(h,h,this.transform);return new P({x:h[0],y:h[1],spatialReference:q})};t.toSource=function(q){if(F.isNone(q)||F.isNone(this.inverseTransform)||F.isNone(this.controlPoints)||!l(this.controlPoints[0]))return null;const I=this.controlPoints[0].mapPoint.spatialReference;q=q.normalize();q=V.projectOrLoad(q,I).geometry;if(F.isNone(q))return null;y.set(h,q.x,q.y);J.transformProjective(h,h,this.inverseTransform);return w.createScreenPoint(h[0],
h[1])};t._updateTransform=function(q){const {controlPoints:I,width:X,height:W}=this;if(!(!F.isNone(I)&&0<X&&0<W))return null;const [Y,T,ba,da]=I;if(!l(Y))return null;var aa=Y.mapPoint.spatialReference;const ca=this._projectControlPoint(T,aa),Z=this._projectControlPoint(ba,aa);aa=this._projectControlPoint(da,aa);if(!(ca.valid&&Z.valid&&aa.valid&&l(ca.controlPoint)))return null;F.isNone(q)&&(q=n.create());let ea=null;ea=l(Z.controlPoint)&&l(aa.controlPoint)?R(q,Y,ca.controlPoint,Z.controlPoint,aa.controlPoint):
l(Z.controlPoint)?p(q,Y,ca.controlPoint,Z.controlPoint):m(q,Y,ca.controlPoint);return ea.every(fa=>0===fa)?null:ea};t._projectControlPoint=function(q,I){if(!l(q))return{valid:!0,controlPoint:q};const {sourcePoint:X,mapPoint:W}=q,{geometry:Y,pending:T}=V.projectOrLoad(W,I);return T?{valid:!1,controlPoint:null}:T||Y?{valid:!0,controlPoint:{sourcePoint:X,mapPoint:Y}}:(S.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:q,sourceSpatialReference:W.spatialReference,
targetSpatialReference:I}),{valid:!1,controlPoint:null})};g._createClass(e,[{key:"coords",get:function(){if(F.isNone(this.controlPoints))return null;const q=this._updateTransform(B);if(F.isNone(q)||!l(this.controlPoints[0]))return null;var I=this.width,X=this.height,W=this.controlPoints[0].mapPoint.spatialReference;const Y=r.fromValues(0,X),T=r.fromValues(0,0),ba=r.fromValues(I,0);I=r.fromValues(I,X);J.transformProjective(Y,Y,q);J.transformProjective(T,T,q);J.transformProjective(ba,ba,q);J.transformProjective(I,
I,q);return new O({rings:[[Y,T,ba,I,Y]],spatialReference:W})}},{key:"inverseTransform",get:function(){return F.isNone(this.transform)?null:G.invert(n.create(),this.transform)}},{key:"transform",get:function(){return this._updateTransform()}}]);return e}(U);C.__decorate([H.property({type:[N]})],U.prototype,"controlPoints",void 0);C.__decorate([H.property({readOnly:!0})],U.prototype,"coords",null);C.__decorate([H.property()],U.prototype,"height",void 0);C.__decorate([H.property({readOnly:!0})],U.prototype,
"inverseTransform",null);C.__decorate([H.property({readOnly:!0})],U.prototype,"transform",null);C.__decorate([H.property()],U.prototype,"width",void 0);U=C.__decorate([A.subclass("esri.layers.support.ControlPointsGeoreference")],U);const k=r.create(),u=r.create(),z=r.create(),E=r.create(),Q=r.create(),K=r.create(),a=r.create(),b=r.create(),f=Math.PI/2,v=Array(8).fill(0),c=Array(8).fill(0);return U})},"esri/core/perspectiveUtils":function(){define("exports ../chunks/mat3 ../chunks/mat3f64 ../chunks/vec2 ../chunks/vec3 ../chunks/vec3f64".split(" "),
function(g,C,N,S,F,J){function w(G,n,y,r,P,O,V,U,l){C.set(G,n,r,O,y,P,V,1,1,1);F.set(H,U,l,1);C.adjoint(M,G);const [D,m,p]=F.transformMat3(H,H,C.transpose(M,M));C.set(M,D,0,0,0,m,0,0,0,p);return C.multiply(G,M,G)}const H=J.create(),M=N.create(),L=N.create(),A=N.create();g.getProjectiveTransform=function(G,n,y){w(L,n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);w(A,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);return C.multiply(G,C.adjoint(L,L),A)};g.transformProjective=function(G,n,y){F.set(H,n[0],n[1],1);F.transformMat3(H,
H,C.transpose(M,y));return 0===H[2]?S.set(G,H[0],H[1]):S.set(G,H[0]/H[2],H[1]/H[2])};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(g,C){function N(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a}function S(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a}function F(a,b,f,v,
c,d,e,t,q,I){a[0]=b;a[1]=f;a[2]=v;a[3]=c;a[4]=d;a[5]=e;a[6]=t;a[7]=q;a[8]=I;return a}function J(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function w(a,b){if(a===b){const f=b[1],v=b[2],c=b[5];a[1]=b[3];a[2]=b[6];a[3]=f;a[5]=b[7];a[6]=v;a[7]=c}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a}function H(a,b){const f=b[0],v=b[1],c=b[2],d=b[3],e=b[4],t=b[5],q=b[6],I=b[7];b=b[8];const X=b*e-t*I,W=-b*d+t*q,Y=I*d-e*q;
let T=f*X+v*W+c*Y;if(!T)return null;T=1/T;a[0]=X*T;a[1]=(-b*v+c*I)*T;a[2]=(t*v-c*e)*T;a[3]=W*T;a[4]=(b*f-c*q)*T;a[5]=(-t*f+c*d)*T;a[6]=Y*T;a[7]=(-I*f+v*q)*T;a[8]=(e*f-v*d)*T;return a}function M(a,b){const f=b[0],v=b[1],c=b[2],d=b[3],e=b[4],t=b[5],q=b[6],I=b[7];b=b[8];a[0]=e*b-t*I;a[1]=c*I-v*b;a[2]=v*t-c*e;a[3]=t*q-d*b;a[4]=f*b-c*q;a[5]=c*d-f*t;a[6]=d*I-e*q;a[7]=v*q-f*I;a[8]=f*e-v*d;return a}function L(a){const b=a[3],f=a[4],v=a[5],c=a[6],d=a[7],e=a[8];return a[0]*(e*f-v*d)+a[1]*(-e*b+v*c)+a[2]*(d*
b-f*c)}function A(a,b,f){const v=b[0],c=b[1],d=b[2],e=b[3],t=b[4],q=b[5],I=b[6],X=b[7];b=b[8];const W=f[0],Y=f[1],T=f[2],ba=f[3],da=f[4],aa=f[5],ca=f[6],Z=f[7];f=f[8];a[0]=W*v+Y*e+T*I;a[1]=W*c+Y*t+T*X;a[2]=W*d+Y*q+T*b;a[3]=ba*v+da*e+aa*I;a[4]=ba*c+da*t+aa*X;a[5]=ba*d+da*q+aa*b;a[6]=ca*v+Z*e+f*I;a[7]=ca*c+Z*t+f*X;a[8]=ca*d+Z*q+f*b;return a}function G(a,b,f){const v=b[0],c=b[1],d=b[2],e=b[3],t=b[4],q=b[5],I=b[6],X=b[7];b=b[8];const W=f[0];f=f[1];a[0]=v;a[1]=c;a[2]=d;a[3]=e;a[4]=t;a[5]=q;a[6]=W*v+f*
e+I;a[7]=W*c+f*t+X;a[8]=W*d+f*q+b;return a}function n(a,b,f){const v=b[0],c=b[1],d=b[2],e=b[3],t=b[4],q=b[5],I=b[6],X=b[7];b=b[8];const W=Math.sin(f);f=Math.cos(f);a[0]=f*v+W*e;a[1]=f*c+W*t;a[2]=f*d+W*q;a[3]=f*e-W*v;a[4]=f*t-W*c;a[5]=f*q-W*d;a[6]=I;a[7]=X;a[8]=b;return a}function y(a,b,f){const v=f[0],c=f[1];f=f[2];a[0]=v*b[0];a[1]=v*b[1];a[2]=v*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=f*b[6];a[7]=f*b[7];a[8]=f*b[8];return a}function r(a,b,f){const v=f[0];f=f[1];a[0]=v*b[0];a[1]=v*b[1];a[2]=
v*b[2];a[3]=f*b[3];a[4]=f*b[4];a[5]=f*b[5];return a}function P(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a}function O(a,b){const f=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=f;a[2]=0;a[3]=-f;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function V(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a}function U(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a}function l(a,b){var f=b[0],v=b[1],
c=b[2];b=b[3];var d=f+f,e=v+v;const t=c+c;f*=d;const q=v*d;v*=e;const I=c*d,X=c*e;c*=t;d*=b;e*=b;b*=t;a[0]=1-v-c;a[3]=q-b;a[6]=I+e;a[1]=q+b;a[4]=1-f-c;a[7]=X-d;a[2]=I-e;a[5]=X+d;a[8]=1-f-v;return a}function D(a,b){const f=b[0],v=b[1],c=b[2],d=b[4],e=b[5],t=b[6],q=b[8],I=b[9];b=b[10];const X=b*e-t*I,W=-b*d+t*q,Y=I*d-e*q;var T=f*X+v*W+c*Y;if(!T)return null;T=1/T;a[0]=X*T;a[1]=(-b*v+c*I)*T;a[2]=(t*v-c*e)*T;a[3]=W*T;a[4]=(b*f-c*q)*T;a[5]=(-t*f+c*d)*T;a[6]=Y*T;a[7]=(-I*f+v*q)*T;a[8]=(e*f-v*d)*T;return a}
function m(a,b){const f=b[0],v=b[1],c=b[2],d=b[3],e=b[4],t=b[5],q=b[6],I=b[7];var X=b[8],W=b[9],Y=b[10],T=b[11];const ba=b[12],da=b[13],aa=b[14];b=b[15];const ca=f*t-v*e,Z=f*q-c*e,ea=f*I-d*e,fa=v*q-c*t,ha=v*I-d*t,ia=c*I-d*q,ja=X*da-W*ba,ka=X*aa-Y*ba;X=X*b-T*ba;const la=W*aa-Y*da;W=W*b-T*da;Y=Y*b-T*aa;T=ca*Y-Z*W+ea*la+fa*X-ha*ka+ia*ja;if(!T)return null;T=1/T;a[0]=(t*Y-q*W+I*la)*T;a[1]=(q*X-e*Y-I*ka)*T;a[2]=(e*W-t*X+I*ja)*T;a[3]=(c*W-v*Y-d*la)*T;a[4]=(f*Y-c*X+d*ka)*T;a[5]=(v*X-f*W-d*ja)*T;a[6]=(da*
ia-aa*ha+b*fa)*T;a[7]=(aa*ea-ba*ia-b*Z)*T;a[8]=(ba*ha-da*ea+b*ca)*T;return a}function p(a,b,f){a[0]=2/b;a[1]=0;a[2]=0;a[3]=0;a[4]=-2/f;a[5]=0;a[6]=-1;a[7]=1;a[8]=1;return a}function R(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"}function x(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2)}function B(a,b,f){a[0]=b[0]+f[0];a[1]=b[1]+f[1];a[2]=b[2]+f[2];a[3]=b[3]+f[3];a[4]=b[4]+f[4];a[5]=b[5]+f[5];
a[6]=b[6]+f[6];a[7]=b[7]+f[7];a[8]=b[8]+f[8];return a}function h(a,b,f){a[0]=b[0]-f[0];a[1]=b[1]-f[1];a[2]=b[2]-f[2];a[3]=b[3]-f[3];a[4]=b[4]-f[4];a[5]=b[5]-f[5];a[6]=b[6]-f[6];a[7]=b[7]-f[7];a[8]=b[8]-f[8];return a}function k(a,b,f){a[0]=b[0]*f;a[1]=b[1]*f;a[2]=b[2]*f;a[3]=b[3]*f;a[4]=b[4]*f;a[5]=b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*f;return a}function u(a,b,f,v){a[0]=b[0]+f[0]*v;a[1]=b[1]+f[1]*v;a[2]=b[2]+f[2]*v;a[3]=b[3]+f[3]*v;a[4]=b[4]+f[4]*v;a[5]=b[5]+f[5]*v;a[6]=b[6]+f[6]*v;a[7]=b[7]+f[7]*
v;a[8]=b[8]+f[8]*v;return a}function z(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]}function E(a,b){const f=a[0],v=a[1],c=a[2],d=a[3],e=a[4],t=a[5],q=a[6],I=a[7];a=a[8];const X=b[0],W=b[1],Y=b[2],T=b[3],ba=b[4],da=b[5],aa=b[6],ca=b[7];b=b[8];const Z=C.getEpsilon();return Math.abs(f-X)<=Z*Math.max(1,Math.abs(f),Math.abs(X))&&Math.abs(v-W)<=Z*Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(c-Y)<=Z*Math.max(1,Math.abs(c),
Math.abs(Y))&&Math.abs(d-T)<=Z*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(e-ba)<=Z*Math.max(1,Math.abs(e),Math.abs(ba))&&Math.abs(t-da)<=Z*Math.max(1,Math.abs(t),Math.abs(da))&&Math.abs(q-aa)<=Z*Math.max(1,Math.abs(q),Math.abs(aa))&&Math.abs(I-ca)<=Z*Math.max(1,Math.abs(I),Math.abs(ca))&&Math.abs(a-b)<=Z*Math.max(1,Math.abs(a),Math.abs(b))}function Q(a){const b=C.getEpsilon(),f=a[0],v=a[1],c=a[2],d=a[3],e=a[4],t=a[5],q=a[6],I=a[7];a=a[8];return Math.abs(1-(f*f+d*d+q*q))<=b&&Math.abs(1-(v*v+e*e+
I*I))<=b&&Math.abs(1-(c*c+t*t+a*a))<=b}const K=Object.freeze(Object.defineProperty({__proto__:null,fromMat4:N,copy:S,set:F,identity:J,transpose:w,invert:H,adjoint:M,determinant:L,multiply:A,translate:G,rotate:n,scale:y,scaleByVec2:r,fromTranslation:P,fromRotation:O,fromScaling:V,fromMat2d:U,fromQuat:l,normalFromMat4Legacy:D,normalFromMat4:m,projection:p,str:R,frob:x,add:B,subtract:h,multiplyScalar:k,multiplyScalarAndAdd:u,exactEquals:z,equals:E,isOrthoNormal:Q,mul:A,sub:h},Symbol.toStringTag,{value:"Module"}));
g.add=B;g.adjoint=M;g.copy=S;g.determinant=L;g.equals=E;g.exactEquals=z;g.frob=x;g.fromMat2d=U;g.fromMat4=N;g.fromQuat=l;g.fromRotation=O;g.fromScaling=V;g.fromTranslation=P;g.identity=J;g.invert=H;g.isOrthoNormal=Q;g.mat3=K;g.mul=A;g.multiply=A;g.multiplyScalar=k;g.multiplyScalarAndAdd=u;g.normalFromMat4=m;g.normalFromMat4Legacy=D;g.projection=p;g.rotate=n;g.scale=y;g.scaleByVec2=r;g.set=F;g.str=R;g.sub=h;g.subtract=h;g.translate=G;g.transpose=w})},"esri/chunks/mat3f64":function(){define(["exports"],
function(g){function C(){return[1,0,0,0,1,0,0,0,1]}function N(w){return[w[0],w[1],w[2],w[3],w[4],w[5],w[6],w[7],w[8]]}function S(w,H,M,L,A,G,n,y,r){return[w,H,M,L,A,G,n,y,r]}function F(w,H){return new Float64Array(w,H,9)}const J=Object.freeze(Object.defineProperty({__proto__:null,create:C,clone:N,fromValues:S,createView:F},Symbol.toStringTag,{value:"Module"}));g.clone=N;g.create=C;g.createView=F;g.fromValues=S;g.mat3f64=J})},"esri/chunks/vec2":function(){define(["exports","./common"],function(g,C){function N(c,
d){c[0]=d[0];c[1]=d[1];return c}function S(c,d,e){c[0]=d;c[1]=e;return c}function F(c,d,e){c[0]=d[0]+e[0];c[1]=d[1]+e[1];return c}function J(c,d,e){c[0]=d[0]-e[0];c[1]=d[1]-e[1];return c}function w(c,d,e){c[0]=d[0]*e[0];c[1]=d[1]*e[1];return c}function H(c,d,e){c[0]=d[0]/e[0];c[1]=d[1]/e[1];return c}function M(c,d){c[0]=Math.ceil(d[0]);c[1]=Math.ceil(d[1]);return c}function L(c,d){c[0]=Math.floor(d[0]);c[1]=Math.floor(d[1]);return c}function A(c,d,e){c[0]=Math.min(d[0],e[0]);c[1]=Math.min(d[1],e[1]);
return c}function G(c,d,e){c[0]=Math.max(d[0],e[0]);c[1]=Math.max(d[1],e[1]);return c}function n(c,d){c[0]=Math.round(d[0]);c[1]=Math.round(d[1]);return c}function y(c,d,e){c[0]=d[0]*e;c[1]=d[1]*e;return c}function r(c,d,e,t){c[0]=d[0]+e[0]*t;c[1]=d[1]+e[1]*t;return c}function P(c,d){const e=d[0]-c[0];c=d[1]-c[1];return Math.sqrt(e*e+c*c)}function O(c,d){const e=d[0]-c[0];c=d[1]-c[1];return e*e+c*c}function V(c){const d=c[0];c=c[1];return Math.sqrt(d*d+c*c)}function U(c){const d=c[0];c=c[1];return d*
d+c*c}function l(c,d){c[0]=-d[0];c[1]=-d[1];return c}function D(c,d){c[0]=1/d[0];c[1]=1/d[1];return c}function m(c,d){var e=d[0];const t=d[1];e=e*e+t*t;0<e&&(e=1/Math.sqrt(e),c[0]=d[0]*e,c[1]=d[1]*e);return c}function p(c,d){return c[0]*d[0]+c[1]*d[1]}function R(c,d,e){d=d[0]*e[1]-d[1]*e[0];c[0]=c[1]=0;c[2]=d;return c}function x(c,d,e,t){const q=d[0];d=d[1];c[0]=q+t*(e[0]-q);c[1]=d+t*(e[1]-d);return c}function B(c,d){d=d||1;const e=2*C.RANDOM()*Math.PI;c[0]=Math.cos(e)*d;c[1]=Math.sin(e)*d;return c}
function h(c,d,e){const t=d[0];d=d[1];c[0]=e[0]*t+e[2]*d;c[1]=e[1]*t+e[3]*d;return c}function k(c,d,e){const t=d[0];d=d[1];c[0]=e[0]*t+e[2]*d+e[4];c[1]=e[1]*t+e[3]*d+e[5];return c}function u(c,d,e){const t=d[0];d=d[1];c[0]=e[0]*t+e[3]*d+e[6];c[1]=e[1]*t+e[4]*d+e[7];return c}function z(c,d,e){const t=d[0];d=d[1];c[0]=e[0]*t+e[4]*d+e[12];c[1]=e[1]*t+e[5]*d+e[13];return c}function E(c,d,e,t){const q=d[0]-e[0];d=d[1]-e[1];const I=Math.sin(t);t=Math.cos(t);c[0]=q*t-d*I+e[0];c[1]=q*I+d*t+e[1];return c}
function Q(c,d){var e=c[0];c=c[1];const t=d[0];d=d[1];let q=e*e+c*c;0<q&&(q=1/Math.sqrt(q));let I=t*t+d*d;0<I&&(I=1/Math.sqrt(I));e=(e*t+c*d)*q*I;return 1<e?0:-1>e?Math.PI:Math.acos(e)}function K(c){return"vec2("+c[0]+", "+c[1]+")"}function a(c,d){return c[0]===d[0]&&c[1]===d[1]}function b(c,d){const e=c[0];c=c[1];const t=d[0];d=d[1];const q=C.getEpsilon();return Math.abs(e-t)<=q*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(c-d)<=q*Math.max(1,Math.abs(c),Math.abs(d))}function f(c,d,e,t,q){let I=
d[0]-e[0];e=d[1]-e[1];q=(t[0]*I+t[1]*e)*(q-1);I=t[0]*q;e=t[1]*q;c[0]=d[0]+I;c[1]=d[1]+e;return c}const v=Object.freeze(Object.defineProperty({__proto__:null,copy:N,set:S,add:F,subtract:J,multiply:w,divide:H,ceil:M,floor:L,min:A,max:G,round:n,scale:y,scaleAndAdd:r,distance:P,squaredDistance:O,length:V,squaredLength:U,negate:l,inverse:D,normalize:m,dot:p,cross:R,lerp:x,random:B,transformMat2:h,transformMat2d:k,transformMat3:u,transformMat4:z,rotate:E,angle:Q,str:K,exactEquals:a,equals:b,projectAndScale:f,
len:V,sub:J,mul:w,div:H,dist:P,sqrDist:O,sqrLen:U},Symbol.toStringTag,{value:"Module"}));g.add=F;g.angle=Q;g.ceil=M;g.copy=N;g.cross=R;g.dist=P;g.distance=P;g.div=H;g.divide=H;g.dot=p;g.equals=b;g.exactEquals=a;g.floor=L;g.inverse=D;g.len=V;g.length=V;g.lerp=x;g.max=G;g.min=A;g.mul=w;g.multiply=w;g.negate=l;g.normalize=m;g.projectAndScale=f;g.random=B;g.rotate=E;g.round=n;g.scale=y;g.scaleAndAdd=r;g.set=S;g.sqrDist=O;g.sqrLen=U;g.squaredDistance=O;g.squaredLength=U;g.str=K;g.sub=J;g.subtract=J;g.transformMat2=
h;g.transformMat2d=k;g.transformMat3=u;g.transformMat4=z;g.vec2=v})},"esri/chunks/vec2f64":function(){define(["exports"],function(g){function C(){return[0,0]}function N(P){return[P[0],P[1]]}function S(P,O){return[P,O]}function F(P){const O=[0,0],V=Math.min(2,P.length);for(let U=0;U<V;++U)O[U]=P[U];return O}function J(P,O){return new Float64Array(P,O,2)}function w(){return[0,0]}function H(){return[1,1]}function M(){return[1,0]}function L(){return[0,1]}const A=[0,0],G=[1,1],n=[1,0],y=[0,1],r=Object.freeze(Object.defineProperty({__proto__:null,
create:C,clone:N,fromValues:S,fromArray:F,createView:J,zeros:w,ones:H,unitX:M,unitY:L,ZEROS:A,ONES:G,UNIT_X:n,UNIT_Y:y},Symbol.toStringTag,{value:"Module"}));g.ONES=G;g.UNIT_X=n;g.UNIT_Y=y;g.ZEROS=A;g.clone=N;g.create=C;g.createView=J;g.fromArray=F;g.fromValues=S;g.ones=H;g.unitX=M;g.unitY=L;g.vec2f64=r;g.zeros=w})},"esri/layers/support/GeoreferenceBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,C,N,S,F,J,w,H,M){N=function(L){function A(){return L.apply(this,arguments)||this}g._inheritsLoose(A,L);return A}(N.Clonable);return N=C.__decorate([M.subclass("esri.layers.support.GeoreferenceBase")],N)})},"esri/layers/support/CornersGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A,G){J=function(n){function y(r){r=n.call(this,r)||this;r.bottomLeft=null;r.bottomRight=null;r.topLeft=null;r.topRight=null;r.type="corners";return r}g._inheritsLoose(y,n);y.prototype._projectCorner=function(r,P){if(S.isNone(r))return r;const {geometry:O,pending:V}=A.projectOrLoad(r,P);return V?null:V||O?O:(N.getLogger(this.declaredClass).warn("map point could not be projected to the spatial reference",{georeference:this,point:r,sourceSpatialReference:r.spatialReference,
targetSpatialReference:P}),null)};g._createClass(y,[{key:"coords",get:function(){let {topLeft:r,topRight:P,bottomLeft:O,bottomRight:V}=this;if(S.isNone(r)||S.isNone(P)||S.isNone(O)||S.isNone(V))return null;const U=r.spatialReference;P=this._projectCorner(P,U);O=this._projectCorner(O,U);V=this._projectCorner(V,U);return S.isNone(P)||S.isNone(O)||S.isNone(V)?null:new L({rings:[[[O.x,O.y],[r.x,r.y],[P.x,P.y],[V.x,V.y],[O.x,O.y]]],spatialReference:U})}}]);return y}(G);C.__decorate([F.property({readOnly:!0})],
J.prototype,"coords",null);C.__decorate([F.property({type:M})],J.prototype,"bottomLeft",void 0);C.__decorate([F.property({type:M})],J.prototype,"bottomRight",void 0);C.__decorate([F.property({type:M})],J.prototype,"topLeft",void 0);C.__decorate([F.property({type:M})],J.prototype,"topRight",void 0);return J=C.__decorate([H.subclass("esri.layers.support.CornersGeoreference")],J)})},"esri/layers/support/ExtentAndRotationGeoreference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../geometry/Extent ../../geometry/Polygon ./GeoreferenceBase".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A){function G(n,y,r){r=H.toRadian(r);const P=Math.cos(r),O=Math.sin(r);return(V,U)=>[P*(V-n)+O*(U-y)+n,P*(U-y)-O*(V-n)+y]}F=function(n){function y(r){r=n.call(this,r)||this;r.extent=null;r.rotation=0;r.type="extent-and-rotation";return r}g._inheritsLoose(y,n);g._createClass(y,[{key:"coords",get:function(){if(N.isNone(this.extent))return null;const {xmin:r,ymin:P,xmax:O,ymax:V,spatialReference:U}=this.extent;if(this.rotation){const {x:D,y:m}=this.extent.center;var l=G(D,
m,this.rotation);l=[l(r,P),l(r,V),l(O,V),l(O,P)];l.push(l[0])}else l=[[r,P],[r,V],[O,V],[O,P],[r,P]];return new L({rings:[l],spatialReference:U})}}]);return y}(A);C.__decorate([S.property({readOnly:!0})],F.prototype,"coords",null);C.__decorate([S.property({type:M})],F.prototype,"extent",void 0);C.__decorate([S.property({type:Number})],F.prototype,"rotation",void 0);return F=C.__decorate([w.subclass("esri.layers.support.ExtentAndRotationGeoreference")],F)})},"esri/layers/support/mediaUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Polygon ../../geometry/projection ../../geometry/support/aaBoundingRect ../../geometry/support/normalizeUtilsSync".split(" "),
function(g,C,N,S,F,J,w,H,M,L,A,G,n){g.MediaElementView=function(y){function r(P){return y.call(this,P)||this}C._inheritsLoose(r,y);C._createClass(r,[{key:"bounds",get:function(){const P=this.coords;return F.isNone(P)||F.isNone(P.extent)?null:G.fromExtent(P.extent)}},{key:"coords",get:function(){const P=F.unwrap(this.element.georeference)?.coords;return A.projectOrLoad(P,this.spatialReference).geometry}},{key:"normalizedCoords",get:function(){return L.fromJSON(n.normalizeCentralMeridianSync(this.coords))}},
{key:"normalizedBounds",get:function(){const P=F.isSome(this.normalizedCoords)?this.normalizedCoords.extent:null;return F.isSome(P)?G.fromExtent(P):null}}]);return r}(S);N.__decorate([J.property()],g.MediaElementView.prototype,"spatialReference",void 0);N.__decorate([J.property()],g.MediaElementView.prototype,"element",void 0);N.__decorate([J.property()],g.MediaElementView.prototype,"bounds",null);N.__decorate([J.property()],g.MediaElementView.prototype,"coords",null);N.__decorate([J.property()],
g.MediaElementView.prototype,"normalizedCoords",null);N.__decorate([J.property()],g.MediaElementView.prototype,"normalizedBounds",null);g.MediaElementView=N.__decorate([M.subclass("esri.layers.support.media.MediaElementView")],g.MediaElementView);Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsSync":function(){define("exports ../../core/maybe ./aaBoundingRect ./boundsUtils ./coordsUtils ./jsonUtils ./normalizeUtilsCommon ./spatialReferenceUtils".split(" "),
function(g,C,N,S,F,J,w,H){function M(l,D){if(C.isNone(l))return null;var m=l.spatialReference,p=H.getInfo(m);l="toJSON"in l?l.toJSON():l;if(!p)return l;m=H.isWebMercator(m)?102100:4326;const R=w.cutParams[m].maxX,x=w.cutParams[m].minX;if(J.isPoint(l))return A(l,R,x);if(J.isMultipoint(l))l.points=l.points.map(B=>A(B,R,x));else{if(J.isExtent(l))return L(l,p);if(J.isPolygon(l)||J.isPolyline(l)){m=S.getBoundsXY(V,l);p=m[0];m=m[2];const B=2*w.offsetMagnitude(p,x)*R;l=0===B?l:w.updatePolyGeometry(l,B);
p+=B;m+=B;return m>R?P(l,R,D):p<x?P(l,x,D):l}}return l}function L(l,D){if(!D)return l;const m=G(l,D).map(p=>p.extent);return 2>m.length?m[0]||l:2<m.length?(l.xmin=D.valid[0],l.xmax=D.valid[1],l):{rings:m.map(p=>[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]])}}function A(l,D,m){if(Array.isArray(l)){var p=l[0];p>D?(m=w.offsetMagnitude(p,D),l[0]=p+-2*m*D):p<m&&(D=w.offsetMagnitude(p,m),l[0]=p+-2*D*m)}else p=l.x,p>D?(m=w.offsetMagnitude(p,D),l.x+=-2*m*D):p<m&&(D=w.offsetMagnitude(p,
m),l.x+=-2*D*m);return l}function G(l,D){const m=[],{ymin:p,ymax:R,xmin:x,xmax:B}=l;var h=l.xmax-l.xmin;const [k,u]=D.valid,{x:z,frameId:E}=n(l.xmin,D),{x:Q,frameId:K}=n(l.xmax,D);l=z===Q&&0<h;if(h>2*u){h={xmin:x<B?z:Q,ymin:p,xmax:u,ymax:R};l={xmin:k,ymin:p,xmax:x<B?Q:z,ymax:R};D={xmin:0,ymin:p,xmax:u,ymax:R};const a={xmin:k,ymin:p,xmax:0,ymax:R},b=[],f=[];y(h,D)&&b.push(E);y(h,a)&&f.push(E);y(l,D)&&b.push(K);y(l,a)&&f.push(K);for(let v=E+1;v<K;v++)b.push(v),f.push(v);m.push(new O(h,[E]),new O(l,
[K]),new O(D,b),new O(a,f))}else z>Q||l?m.push(new O({xmin:z,ymin:p,xmax:u,ymax:R},[E]),new O({xmin:k,ymin:p,xmax:Q,ymax:R},[K])):m.push(new O({xmin:z,ymin:p,xmax:Q,ymax:R},[E]));return m}function n(l,D){const [m,p]=D.valid;D=2*p;var R=0;l>p?(R=Math.ceil(Math.abs(l-p)/D),l-=R*D):l<m&&(R=Math.ceil(Math.abs(l-m)/D),l+=R*D,R=-R);return{x:l,frameId:R}}function y(l,D){const {xmin:m,ymin:p,xmax:R,ymax:x}=D;return r(l,m,p)&&r(l,m,x)&&r(l,R,x)&&r(l,R,p)}function r(l,D,m){return D>=l.xmin&&D<=l.xmax&&m>=l.ymin&&
m<=l.ymax?!0:!1}function P(l,D,m=!0){const p=!J.isPolyline(l);p&&F.closeRings(l);if(m)return(new U).cut(l,D);m=p?l.rings:l.paths;const R=p?4:2,x=m.length;D*=-2;for(let B=0;B<x;B++){const h=m[B];if(h&&h.length>=R){const k=[];for(const u of h)k.push([u[0]+D,u[1]]);m.push(k)}}p?l.rings=m:l.paths=m;return l}let O=function(l,D){this.extent=l;this.frameIds=D};const V=N.create();let U=function(){function l(){this._linesIn=[];this._linesOut=[]}var D=l.prototype;D.cut=function(m,p){this._xCut=p;if(m.rings)this._closed=
!0,p=m.rings,this._minPts=4;else if(m.paths)this._closed=!1,p=m.paths,this._minPts=2;else return null;for(var R of p)if(R&&!(R.length<this._minPts)){p=!0;for(const x of R)p?(this.moveTo(x),p=!1):this.lineTo(x);this._closed&&this.close()}this._pushLineIn();this._pushLineOut();p=[];for(const x of this._linesIn)x&&x.length>=this._minPts&&p.push(x);R=-2*this._xCut;for(const x of this._linesOut)if(x&&x.length>=this._minPts){for(const B of x)B[0]+=R;p.push(x)}this._closed?m.rings=p:m.paths=p;return m};
D.moveTo=function(m){this._pushLineIn();this._pushLineOut();this._prevSide=this._side(m[0]);this._moveTo(m[0],m[1],this._prevSide);this._firstPt=this._prevPt=m};D.lineTo=function(m){const p=this._side(m[0]);if(-1===p*this._prevSide){const R=this._intersect(this._prevPt,m);this._lineTo(this._xCut,R,0);this._prevSide=0}this._lineTo(m[0],m[1],p);this._prevSide=p;this._prevPt=m};D.close=function(){const m=this._firstPt,p=this._prevPt;m[0]===p[0]&&m[1]===p[1]||this.lineTo(m);this._checkClosingPt(this._lineIn);
this._checkClosingPt(this._lineOut)};D._moveTo=function(m,p,R){this._closed?(this._lineIn.push([0>=R?m:this._xCut,p]),this._lineOut.push([0<=R?m:this._xCut,p])):(0>=R&&this._lineIn.push([m,p]),0<=R&&this._lineOut.push([m,p]))};D._lineTo=function(m,p,R){this._closed?(this._addPolyVertex(this._lineIn,0>=R?m:this._xCut,p),this._addPolyVertex(this._lineOut,0<=R?m:this._xCut,p)):0>R?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([m,p])):0<R?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([m,
p])):0>this._prevSide?(this._lineIn.push([m,p]),this._lineOut.push([m,p])):0<this._prevSide&&(this._lineOut.push([m,p]),this._lineIn.push([m,p]))};D._addPolyVertex=function(m,p,R){const x=m.length;1<x&&m[x-1][0]===p&&m[x-2][0]===p?m[x-1][1]=R:m.push([p,R])};D._checkClosingPt=function(m){const p=m.length;3<p&&m[0][0]===this._xCut&&m[p-2][0]===this._xCut&&m[1][0]===this._xCut&&(m[0][1]=m[p-2][1],m.pop())};D._side=function(m){return m<this._xCut?-1:m>this._xCut?1:0};D._intersect=function(m,p){return m[1]+
(this._xCut-m[0])/(p[0]-m[0])*(p[1]-m[1])};D._pushLineIn=function(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn);this._lineIn=[]};D._pushLineOut=function(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut);this._lineOut=[]};return l}();g.CutVertical=U;g.normalizeCentralMeridianForDisplay=function(l){return M(l,!1)};g.normalizeCentralMeridianSync=function(l){return M(l,!0)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/VideoElement":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./MediaElementBase".split(" "),function(g,C,N,S,F,J,w,H,M){J=function(L){function A(n){n=L.call(this,n)||this;n.content=null;n.type="video";return n}g._inheritsLoose(A,L);var G=A.prototype;G.load=
function(){const n=this.video;if("string"===typeof n){const y=document.createElement("video");y.src=n;y.crossOrigin="anonymous";y.autoplay=!0;y.muted=!0;y.loop=!0;this.addResolvingPromise(this._loadVideo(y).then(()=>{this._set("content",y)}))}else n instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(n).then(()=>{this._set("content",n)})):this.addResolvingPromise(Promise.reject(new N("video-element:invalid-video-type","Invalid video type",{video:n})));return Promise.resolve(this)};
G._loadVideo=function(n){return new Promise((y,r)=>{n.oncanplay=()=>{n.oncanplay=null;n.play().then(y,r)};"anonymous"!==n.crossOrigin&&(n.crossOrigin="anonymous",n.src=n.src)})};g._createClass(A,[{key:"video",set:function(n){"not-loaded"!==this.loadStatus?S.getLogger(this.declaredClass).error("#video","video cannot be changed after the element is loaded."):this._set("video",n)}}]);return A}(M);C.__decorate([F.property({readOnly:!0})],J.prototype,"content",void 0);C.__decorate([F.property()],J.prototype,
"video",null);return J=C.__decorate([H.subclass("esri.layers.support.VideoElement")],J)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Collection ../core/Logger ../core/maybe ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ./support/LocalMediaElementSource".split(" "),function(g,C,N,S,F,J,w,H,M,L,A,G,n){w=function(y){function r(O){O=y.call(this,O)||this;O.copyright=null;O.spatialReference=null;O.type="media";
O.source=new n;return O}g._inheritsLoose(r,y);var P=r.prototype;P.load=function(O){this.spatialReference&&(this.source.spatialReference=this.spatialReference);O=this.source.load(O).then(()=>{this.spatialReference=this.source.spatialReference});this.addResolvingPromise(O);return Promise.resolve(this)};P.destroy=function(){F.unwrap(this.source)?.destroy()};P.castSource=function(O){return O?Array.isArray(O)||O instanceof N?new n({elements:O}):O:null};g._createClass(r,[{key:"fullExtent",get:function(){return this.source?.fullExtent}},
{key:"source",set:function(O){"not-loaded"!==this.loadStatus?S.getLogger(this.declaredClass).error("#source","source cannot be changed after the layer is loaded."):this._set("source",O)}}]);return r}(A.BlendLayer(G.ScaleRangeLayer(L)));C.__decorate([J.property({type:String})],w.prototype,"copyright",void 0);C.__decorate([J.property({readOnly:!0})],w.prototype,"fullExtent",null);C.__decorate([J.property({type:["show","hide"]})],w.prototype,"listMode",void 0);C.__decorate([J.property({nonNullable:!0})],
w.prototype,"source",null);C.__decorate([H.cast("source")],w.prototype,"castSource",null);C.__decorate([J.property()],w.prototype,"spatialReference",void 0);C.__decorate([J.property({readOnly:!0})],w.prototype,"type",void 0);return w=C.__decorate([M.subclass("esri.layers.MediaLayer")],w)});