// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ./clock ./deprecate ./Error ./events ./Logger ./maybe".split(" "),function(g,m,N,O,w,J,K,k){function x(){x=m._asyncToGenerator(function*(a,b){const c=a.slice(),f=yield Promise.all(a.map((e,d)=>b(e,d)));return c.filter((e,d)=>f[d])});return x.apply(this,arguments)}function n(a="Aborted"){return new w("AbortError",a)}function y(a,b="Aborted"){if(L(a))throw n(b);}function t(a){return k.isSome(a)?"aborted"in a?a:a.signal:a}function L(a){a=t(a);return k.isSome(a)&&
a.aborted}function u(a,b){a=t(a);if(!k.isNone(a))if(a.aborted)b();else return J.once(a,"abort",()=>b())}function r(a){return"AbortError"===a?.name}function z(){z=m._asyncToGenerator(function*(a){try{return yield a}catch(b){if(!r(b))throw b;}});return z.apply(this,arguments)}function A(){A=m._asyncToGenerator(function*(a,b=K.getLogger("esri")){try{return yield a}catch(c){r(c)||b.error(c)}});return A.apply(this,arguments)}function B(){let a=null;const b=new Promise((c,f)=>{a={promise:void 0,resolve:c,
reject:f}});a.promise=b;return a}function C(a){return D.apply(this,arguments)}function D(){D=m._asyncToGenerator(function*(a){if(a){if("function"!==typeof a.forEach){const b=Object.keys(a),c=b.map(d=>a[d]),f=yield C(c),e={};b.map((d,h)=>e[d]=f[h]);return e}return new Promise(b=>{const c=[];let f=a.length;0===f&&b(c);a.forEach(e=>{const d={promise:e||Promise.resolve(e)};c.push(d);d.promise.then(h=>{d.value=h}).catch(h=>{d.error=h}).then(()=>{--f;0===f&&b(c)})})})}});return D.apply(this,arguments)}
function E(){E=m._asyncToGenerator(function*(a){return(yield C(a)).filter(b=>!!b.value).map(b=>b.value)});return E.apply(this,arguments)}function F(a,b,c){const f=new AbortController;u(c,()=>f.abort());return new Promise((e,d)=>{let h=setTimeout(()=>{h=0;e(b)},a);u(f,()=>{h&&(clearTimeout(h),d(n()))})})}function M(a){return a&&"function"===typeof a.then}function G(a){return M(a)?a:Promise.resolve(a)}function H(){H=m._asyncToGenerator(function*(a){yield Promise.resolve();y(a)});return H.apply(this,
arguments)}g.after=F;g.always=function(a,b){return a.then(b,b)};g.create=function(a){O.deprecatedFunction(K.getLogger("esri.core.promiseUtils"),"create",{moduleName:"esri.core.promiseUtils",replacement:"new Promise()",version:"4.24"});return new Promise((b,c)=>{try{a(b,c)}catch(f){Promise.resolve().then(()=>c(f))}})};g.createAbortError=n;g.createDeferred=B;g.createResolver=function(){let a,b;const c=new Promise((e,d)=>{a=e;b=d}),f=e=>{a(e)};f.resolve=e=>a(e);f.reject=e=>b(e);f.timeout=(e,d)=>N.clock.setTimeout(()=>
f.reject(d),e);f.promise=c;return f};g.debounce=function(a,b=-1){let c,f,e,d,h=null;const q=(...l)=>{if(c){f=l;d&&d.reject(n());d=B();l=k.assumeNonNull(d.promise);if(h){var v=h;h=null;v.abort()}return l}e=d||B();d=null;if(0<b){const p=new AbortController,P=c=G(a(...l,p.signal));F(b).then(()=>{c===P&&(d?p.abort():h=p)})}else c=1,c=G(a(...l));l=()=>{const p=f;f=e=c=h=null;null!=p&&q(...p)};v=c;const I=e;v.then(l,l);v.then(I.resolve,I.reject);return k.assumeNonNull(I.promise)};return q};g.eachAlways=
C;g.eachAlwaysValues=function(a){return E.apply(this,arguments)};g.filter=function(a,b){return x.apply(this,arguments)};g.ignoreAbortErrors=function(a){return z.apply(this,arguments)};g.isAbortError=r;g.isAborted=L;g.isPromiseLike=M;g.logOnError=function(a){return A.apply(this,arguments)};g.onAbort=u;g.onAbortOrThrow=function(a,b){a=t(a);if(!k.isNone(a))return y(a),J.once(a,"abort",()=>b(n()))};g.throwIfAbortError=function(a){if(r(a))throw a;};g.throwIfAborted=y;g.throwIfNotAbortError=function(a){if(!r(a))throw a;
};g.timeout=function(a,b,c,f){const e=c&&"abort"in c?c:null;null!=f||e||(f=c);let d=setTimeout(()=>{d=0;e&&e.abort()},b);const h=()=>f||new w("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");return a.then(q=>{if(0===d)throw h();clearTimeout(d);return q},q=>{clearTimeout(d);throw 0===d?h():q;})};g.waitTick=function(a){return H.apply(this,arguments)};g.when=G;g.whenOrAbort=function(a,b){const c=t(b);return k.isNone(c)?a:new Promise((f,e)=>{let d=u(b,()=>e(n()));const h=
()=>d=k.removeMaybe(d);a.then(h,h);a.then(f,e)})};g.whenOrTimeout=function(a,b,c){return Promise.race([a,F(b).then(()=>{throw new w("timeout",`Did not resolve within ${b} milliseconds (${c??"timeout"})`);})])};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});