// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(l,r,t,u,m,k,p){function v(a,d,b,f,e){const c={};d.write?.writer?.call(a,f,c,b,e);return c}function q(a,d,b,f,e,c){if(!f||!f.write)return!1;const h=a.get(b);if(!e&&f.write.overridePolicy){var g=f.write.overridePolicy.call(a,h,b,c);void 0!==g&&(e=g)}e||(e=f.write);if(!e||!1===e.enabled)return!1;if((null===h&&!e.allowNull&&!e.writerEnsuresNonNull||void 0===h)&&e.isRequired)return(d=
new t("web-document-write:property-required",`Missing value for required property '${b}' on '${a.declaredClass}'`,{propertyName:b,target:a}),c)&&c.messages?c.messages.push(d):d&&!c&&u.getLogger("esri.core.accessorSupport.write").error(d.name,d.message),!1;if(void 0===h||null===h&&!e.allowNull&&!e.writerEnsuresNonNull)return!1;if(g=!d.store.multipleOriginsSupported||d.store.originOf(b)===m.OriginId.DEFAULTS)g=f.default,void 0===g?g=!1:null!=f.defaultEquals?g=f.defaultEquals(h):"function"===typeof g?
Array.isArray(h)?(a=g.call(a,b,c),g=r.equals(a,h)):g=!1:g=g===h;return g||!e.ignoreOrigin&&c&&c.origin&&d.store.multipleOriginsSupported&&d.store.originOf(b)<m.nameToId(c.origin)?!1:!0}l.willPropertyWrite=function(a,d,b,f){const e=k.getProperties(a),c=p.originSpecificWritePropertyDefinition(e.metadatas[d],f);return c?q(a,e,d,c,b,f):!1};l.write=function(a,d,b){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return k.merge(d,a.toJSON(b));const f=k.getProperties(a),e=f.metadatas;
for(const c in e){const h=p.originSpecificWritePropertyDefinition(e[c],b);if(!q(a,f,c,h,void 0,b))continue;const g=a.get(c),n=v(a,h,h.write&&"string"===typeof h.write.target?h.write.target:c,g,b);0<Object.keys(n).length&&(d=k.merge(d,n),b?.resources?.pendingOperations?.length&&Promise.all(b.resources.pendingOperations).then(()=>k.merge(d,n)),b&&b.writtenProperties&&b.writtenProperties.push({target:a,propName:c,oldOrigin:m.idToReadableName(f.store.originOf(c)),newOrigin:b.origin}))}return d};Object.defineProperties(l,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});