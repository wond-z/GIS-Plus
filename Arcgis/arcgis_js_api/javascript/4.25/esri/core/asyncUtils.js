// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./arrayUtils ./accessorSupport/ensureType ./accessorSupport/decorators/subclass".split(" "),function(d,l,h,z,k,p,m,C,D,A){function t(){t=l._asyncToGenerator(function*(a,c,e){return(yield p.eachAlways(a.map((g,n)=>c.apply(e,[g,n])))).map(g=>g.value)});return t.apply(this,arguments)}function q(a){return{ok:!0,value:a}}function r(a){return{ok:!1,error:a}}function x(a){return k.isSome(a)&&
!0===a.ok?a.value:null}function y(a){return k.isSome(a)&&!1===a.ok?a.error:null}function u(){u=l._asyncToGenerator(function*(a){if(k.isNone(a))return{ok:!1,error:Error("no promise provided")};try{return q(yield a)}catch(c){return r(c)}});return u.apply(this,arguments)}function v(){v=l._asyncToGenerator(function*(a){try{return q(yield a)}catch(c){return p.throwIfAbortError(c),r(c)}});return v.apply(this,arguments)}let f=function(a){function c(g,n){var b=a.call(this,{})||this;b._result=null;b._abortHandle=
null;b.abort=()=>{b._abortController=k.abortMaybe(b._abortController)};b.remove=b.abort;b._abortController=new AbortController;const {signal:B}=b._abortController;b.promise=g(B);b.promise.then(w=>{b._result=q(w);b._cleanup()},w=>{b._result=r(w);b._cleanup()});b._abortHandle=p.onAbort(n,b.abort);return b}l._inheritsLoose(c,a);var e=c.prototype;e.normalizeCtorArgs=function(){return{}};e.destroy=function(){this.abort()};e._cleanup=function(){this._abortHandle=k.removeMaybe(this._abortHandle);this._abortController=
null};l._createClass(c,[{key:"value",get:function(){return x(this._result)}},{key:"error",get:function(){return y(this._result)}},{key:"finished",get:function(){return k.isSome(this._result)}}]);return c}(z);h.__decorate([m.property()],f.prototype,"value",null);h.__decorate([m.property()],f.prototype,"error",null);h.__decorate([m.property()],f.prototype,"finished",null);h.__decorate([m.property()],f.prototype,"promise",void 0);h.__decorate([m.property()],f.prototype,"_result",void 0);f=h.__decorate([A.subclass("esri.core.asyncUtils.ReactiveTask")],
f);d.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};d.createTask=function(a,c){return new f(a,c)};d.forEach=function(a,c,e){return p.eachAlways(a.map((g,n)=>c.apply(e,[g,n])))};d.makeResultError=r;d.makeResultOk=q;d.map=function(a,c,e){return t.apply(this,arguments)};d.result=function(a){return u.apply(this,arguments)};d.resultError=y;d.resultOrAbort=function(a){return v.apply(this,arguments)};d.resultValue=x;Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});