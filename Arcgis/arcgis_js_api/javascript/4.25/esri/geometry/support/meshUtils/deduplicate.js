// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils"],function(C,F){let k=null;C.deduplicate=function(f,b,a){var c=f.byteLength/(4*b),r=new Uint32Array(f,0,c*b);f=new Uint32Array(c);var l=a?.minReduction??0;const m=a?.originalIndices||null,A=m?m.length:0;var d=a?.componentOffsets||null;a=0;if(d)for(var n=0;n<d.length-1;n++){var u=d[n+1]-d[n];u>a&&(a=u)}else a=c;var t=Math.floor(1.1*a)+1;if(null==k||k.length<2*t)k=new Uint32Array(F.nextHighestPowerOfTwo(2*t));for(a=0;a<2*t;a++)k[a]=0;a=0;u=(n=!!d&&!!m)?A:c;
var w=n?new Uint32Array(A):null,x=0!==l?Math.ceil(7.84*1.96/(l*l)*l*(1-l)):u,p=1,h=d?d[1]:u;for(var e=0;e<u;e++){if(e===x){var v=1-a/e;if(v+1.96*Math.sqrt(v*(1-v)/e)<l)return null;x*=2}if(e===h){for(h=0;h<2*t;h++)k[h]=0;if(m)for(h=d[p-1];h<d[p];h++)w[h]=f[m[h]];h=d[++p]}v=n?m[e]:e;const D=v*b;var q=0;for(var g=0;g<b;g++)q=r[D+g]+q|0,q=q+(q<<11)+(q>>>2)|0;q>>>=0;g=q%t;let B=a;for(;0!==k[2*g+1];){if(k[2*g]===q){const E=k[2*g+1]-1;var y=E*b;a:{for(let z=0;z<b;z++)if(r[D+z]!==r[y+z]){y=!1;break a}y=!0}if(y){B=
f[E];break}}g++;g>=t&&(g-=t)}B===a&&(k[2*g]=q,k[2*g+1]=v+1,a++);f[v]=B}if(0!==l&&1-a/c<l)return null;if(n){for(c=d[p-1];c<w.length;c++)w[c]=f[m[c]];f=w}c=new Uint32Array(b*a);a=0;for(p=0;p<u;p++)if(f[p]===a){l=r;d=(n?m[p]:p)*b;t=c;w=a*b;x=b;for(e=0;e<x;e++)t[w+e]=l[d+e];a++}if(m&&!n){b=new Uint32Array(A);for(r=0;r<b.length;r++)b[r]=f[m[r]];f=b}return{buffer:c.buffer,indices:f,uniqueCount:a}};Object.defineProperties(C,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});