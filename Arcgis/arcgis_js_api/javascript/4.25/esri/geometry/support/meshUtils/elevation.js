// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../Ground ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/unitUtils ../../Mesh ../../projection ../MeshComponent ../MeshVertexAttributes ../../Point".split(" "),function(y,z,U,E,F,A,G,H,I,J,K,L,M){function t(){t=z._asyncToGenerator(function*(a,b,c){return B(a)||a instanceof E?(a=yield(yield N(a)).createElevationSampler(b,{demResolution:c?.demResolution??"finest-contiguous"}),C(a,b,{material:c?.material})):
"string"===typeof c?.demResolution?(F.getLogger("esri.geometry.support.meshUtils.elevation").error("create()","demResolution must be a number when used directly with a sampler"),null):C(a,b,{material:c?.material,demResolution:c?.demResolution})});return t.apply(this,arguments)}function C(a,b,c){var f=H.getMetersPerUnitForSR(b.spatialReference),d=(c.demResolution??a.demResolution.min)/f;f=Math.round(b.width/d);d=Math.round(b.height/d);const k=f+1,u=d+1,m=new Float64Array(k*u*3),v=new Float32Array(k*
u*2);let q=0,D=0;const g=new Uint32Array(f*d*6);let h=0,l=0;const O=!a.spatialReference.equals(b.spatialReference);r.spatialReference=b.spatialReference;const {xmin:P,ymin:Q,height:R,width:S}=b;for(let n=0;n<u;n++){const w=Q+n/d*R;for(let p=0;p<k;p++){var e=P+p/f*S;m[q++]=e;m[q++]=w;O?(r.x=e,r.y=w,e=J.project(r,a.spatialReference),m[q++]=A.unwrapOr(a.elevationAt(e.x,e.y),0)):m[q++]=A.unwrapOr(a.elevationAt(e,w),0);e=p/f;const T=n/d;v[D++]=e;v[D++]=T;n!==d&&p!==f&&(g[l++]=h+1,g[l++]=h+k+1,g[l++]=h+
k,g[l++]=h,g[l++]=h+1,g[l++]=h+k);h++}}return new I({vertexAttributes:new L.MeshVertexAttributes({position:m,uv:v}),components:[new K({faces:g,shading:"smooth",material:c?.material??null})],spatialReference:b.spatialReference})}function N(a){return x.apply(this,arguments)}function x(){x=z._asyncToGenerator(function*(a){if(B(a))return a.load();yield a.load();yield G.eachAlways(a.layers.map(b=>b.load()));return a});return x.apply(this,arguments)}function B(a){return"type"in a&&("elevation"===a.type||
"base-elevation"===a.type)}const r=new M;y.create=function(a,b,c){return t.apply(this,arguments)};Object.defineProperties(y,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});