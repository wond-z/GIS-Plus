// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(wa,m,xa,Za,W,k,ea,$a,ab,bb,fa,M,S,cb,db,ha,ya,eb,fb,X,gb,v,hb,Y,w,ib,jb){function ia(){return!!z&&ha.isLoaded()}function Z(a){k.isNone(T)&&(T=Promise.all([ha.load(),(new Promise((c,b)=>wa(["../chunks/geometryEngineBase"],c,b))).then(c=>c.geometryEngineBase),new Promise((c,b)=>wa(["./geometryAdapters/hydrated"],c,b))]));return T.then(([,c,{hydratedAdapter:b}])=>{ea.throwIfAborted(a);F=b;z=c.default;z._enableProjection(ha.pe);za.notify()})}function Aa(a,c,b=null,e=null){return Array.isArray(a)?
0===a.length?[]:ja(F,a,a[0].spatialReference,c,b,e):ja(F,[a],a.spatialReference,c,b,e)[0]}function ja(a,c,b,e,f=null,g=null){if(k.isNone(b)||k.isNone(e))return c;if(U(b,e,f))return c.map(h=>k.unwrap(Ba(h,b,e)));if(k.isNone(f)){const h=Y.cacheKey(b,e);void 0!==aa[h]?f=aa[h]:(f=Ca(b,e,void 0),k.isNone(f)&&(f=new Y),aa[h]=f)}if(k.isNone(z)||k.isNone(a))throw new ba;return k.isSome(g)?z._project(a,c,b,e,f,g):z._project(a,c,b,e,f)}function Da(a,c){if(!ia())for(const b of a)if(k.isSome(b)&&!w.equals(b.spatialReference,
c)&&w.isValid(b.spatialReference)&&w.isValid(c)&&!U(b.spatialReference,c))return ab.trackAccess(za),{pending:Z(),geometries:null};return{pending:null,geometries:a.map(b=>k.isNone(b)?null:w.equals(b.spatialReference,c)?b:w.isValid(b.spatialReference)&&w.isValid(c)?Ea(b,c):null)}}function Ca(a,c,b=null){if(k.isNone(a)||k.isNone(c))return null;if(k.isNone(z)||k.isNone(F))throw new ba;a=z._getTransformation(F,a,c,b,b?.spatialReference);return null!==a?Y.fromGE(a):null}function Ea(a,c){try{const b=Aa(a,
c);if(null==b)return null;"xmin"in a&&"xmin"in b&&(b.zmin=a.zmin,b.zmax=a.zmax);const e=jb.getGeometryZScaler(b.type,a.spatialReference,c);k.isSome(e)&&e(b);return b}catch(b){if(!(b instanceof ba))throw b;return null}}function U(a,c,b){return b?!1:w.equals(a,c)?!0:w.isValid(a)&&w.isValid(c)&&!!ka(a,c,la)}function ma(){ma=xa._asyncToGenerator(function*(a,c,b,e){if(ia())return ea.waitTick(e);if(Array.isArray(a))for(const {source:f,dest:g,geographicTransformation:h}of a){if(!U(f,g,h))return Z(e)}else if(!U(a,
c,b))return Z(e);return ea.waitTick(e)});return ma.apply(this,arguments)}function Ba(a,c,b){return a?"x"in a?Fa(a,c,new ya,b,0):"xmin"in a?Ga(a,c,new cb,b,0):"rings"in a?Ha(a,c,new eb,b,0):"paths"in a?Ia(a,c,new fb,b,0):"points"in a?Ja(a,c,new db,b,0):null:null}function Fa(a,c,b,e,f){n[0]=a.x;n[1]=a.y;const g=a.z;n[2]=void 0!==g?g:f;if(!A(n,c,0,n,e,0,1))return null;b.x=n[0];b.y=n[1];b.spatialReference=e;void 0===g?(b.z=void 0,b.hasZ=!1):(b.z=n[2],b.hasZ=!0);void 0===a.m?(b.m=void 0,b.hasM=!1):(b.m=
a.m,b.hasM=!0);return b}function Ja(a,c,b,e,f){const {points:g,hasZ:h,hasM:l}=a;a=[];const u=g.length,t=[];for(var r of g)t.push(r[0],r[1],h?r[2]:f);if(!A(t,c,0,t,e,0,u))return null;for(c=0;c<u;++c){f=3*c;r=t[f];const x=t[f+1];h&&l?a.push([r,x,t[f+2],g[c][3]]):h?a.push([r,x,t[f+2]]):l?a.push([r,x,g[c][2]]):a.push([r,x])}b.points=a;b.spatialReference=e;b.hasZ=h;b.hasM=l;return b}function Ia(a,c,b,e,f){const {paths:g,hasZ:h,hasM:l}=a;a=[];if(!Ka(g,h??!1,l??!1,c,a,e,f))return null;b.paths=a;b.spatialReference=
e;b.hasZ=h;b.hasM=l;return b}function Ha(a,c,b,e,f){const {rings:g,hasZ:h,hasM:l}=a;a=[];if(!Ka(g,h??!1,l??!1,c,a,e,f))return null;b.rings=a;b.spatialReference=e;b.hasZ=h;b.hasM=l;return b}function Ga(a,c,b,e,f){const {xmin:g,ymin:h,xmax:l,ymax:u,hasZ:t,hasM:r}=a;if(!na(g,h,t?a.zmin:f,c,n,e))return null;b.xmin=n[0];b.ymin=n[1];t&&(b.zmin=n[2]);if(!na(l,u,t?a.zmax:f,c,n,e))return null;b.xmax=n[0];b.ymax=n[1];t&&(b.zmax=n[2]);r&&(b.mmin=a.mmin,b.mmax=a.mmax);b.spatialReference=e;return b}function na(a,
c,b,e,f,g){q[0]=a;q[1]=c;q[2]=b;return A(q,e,0,f,g,0,1)}function oa(a,c,b,e){if(k.isNone(c)||k.isNone(e)||2>a.length)return!1;2===a.length&&(q[0]=a[0],q[1]=a[1],q[2]=0,a=q);return A(a,c,0,b,e,0,1)}function La(a,c,b){if(k.isNone(c))return!1;c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];if(k.isNone(c))return!1;c(a,0,q,0);b!==q&&(b[0]=q[0],b[1]=q[1],2<b.length&&(b[2]=q[2]));return!0}function A(a,c,b,e,f,g,h=1){c=ka(c,f,la);if(k.isNone(c))return!1;if(c===p){if(a===e&&b===g)return!0;h=b+3*h;for(let l=b,
u=g;l<h;l++,u++)e[u]=a[l];return!0}h=b+3*h;for(let l=b,u=g;l<h;l+=3,u+=3)c(a,l,e,u);return!0}function Ka(a,c,b,e,f,g,h=0){const l=[];for(const u of a)for(const t of u)l.push(t[0],t[1],c?t[2]:h);if(!A(l,e,0,l,g,0,l.length/3))return!1;e=0;f.length=0;for(const u of a){a=[];for(const t of u)c&&b?a.push([l[e++],l[e++],l[e++],t[3]]):c?a.push([l[e++],l[e++],l[e++]]):(b?a.push([l[e++],l[e++],t[2]]):a.push([l[e++],l[e++]]),e++);f.push(a)}return!0}function Ma(a,c,b,e){c=e+c;if(c<e/2||b>c)return Number.MAX_VALUE;
a=Math.abs(B*a)+Math.asin(b/c);return a>=Math.PI/2?Number.MAX_VALUE:b/Math.cos(a)}function pa(a,c,b){const e=Math.sin(a);a=Math.cos(a);const f=Math.sin(c);c=Math.cos(c);b[0]=-e;b[4]=-f*a;b[8]=c*a;b[12]=0;b[1]=a;b[5]=-f*e;b[9]=c*e;b[13]=0;b[2]=0;b[6]=c;b[10]=f;b[14]=0;b[3]=0;b[7]=0;b[11]=0;b[15]=1;return b}function Na(a,c,b){pa(a,c,b);fa.transpose(b,b);return b}function D(a,c){if(!a)return d.UNKNOWN;if(c.spatialReference===a)return c.spatialReferenceId;c.spatialReference=a;"metersPerUnit"in c&&(c.metersPerUnit=
$a.getMetersPerUnitForSR(a,1));return a.wkt===X.SphericalECEFSpatialReference.wkt?c.spatialReferenceId=d.SPHERICAL_ECEF:w.isWGS84(a)?c.spatialReferenceId=d.WGS84:w.isWebMercator(a)?c.spatialReferenceId=d.WEB_MERCATOR:w.isPlateCarree(a)?c.spatialReferenceId=d.PLATE_CARREE:a.wkt===X.WGS84ECEFSpatialReference.wkt?c.spatialReferenceId=d.WGS84_ECEF:a.wkid===ib.SupportedGCSWkids.CGCS2000?c.spatialReferenceId=d.CGCS2000:a.wkt===X.SphericalPCPFMars.wkt?c.spatialReferenceId=d.SPHERICAL_MARS_PCPF:a.wkt===X.SphericalPCPFMoon.wkt?
c.spatialReferenceId=d.SPHERICAL_MOON_PCPF:w.isMars(a)?c.spatialReferenceId=d.GCSMARS2000:w.isMoon(a)?c.spatialReferenceId=d.GCSMOON2000:c.spatialReferenceId=d.UNKNOWN}function p(a,c,b,e){a!==b&&(b[e++]=a[c++],b[e++]=a[c++],b[e]=a[c])}function N(a,c,b,e){b[e++]=R*(a[c++]/v.earth.radius);b[e++]=R*(Math.PI/2-2*Math.atan(Math.exp(-a[c++]/v.earth.radius)));b[e]=a[c]}function Oa(a,c,b,e){N(a,c,b,e);G(b,e,b,e)}function Pa(a,c,b,e){N(a,c,b,e);H(b,e,b,e)}function Qa(a,c,b,e,f){var g=.4999999*Math.PI;g=W.clamp(B*
a[c+1],-g,g);g=Math.sin(g);b[e++]=B*a[c]*f.radius;b[e++]=f.halfSemiMajorAxis*Math.log((1+g)/(1-g));b[e]=a[c+2]}function O(a,c,b,e){Qa(a,c,b,e,v.earth)}function I(a,c,b,e){b[e]=a[c]*Ra;b[e+1]=a[c+1]*Ra;b[e+2]=a[c+2]}function P(a,c,b,e){b[e]=a[c]*V;b[e+1]=a[c+1]*V;b[e+2]=a[c+2]}function Sa(a,c,b,e){N(a,c,b,e);I(b,e,b,e)}function qa(a,c,b,e,f){f+=a[c+2];const g=B*a[c+1];a=B*a[c];c=Math.cos(g);b[e++]=Math.cos(a)*c*f;b[e++]=Math.sin(a)*c*f;b[e]=Math.sin(g)*f}function ra(a,c,b,e){qa(a,c,b,e,v.moon.radius)}
function sa(a,c,b,e){qa(a,c,b,e,v.mars.radius)}function G(a,c,b,e){qa(a,c,b,e,v.earth.radius)}function ca(a,c,b,e,f){var g=a[c];const h=a[c+1];c=a[c+2];a=Math.sqrt(g*g+h*h+c*c);c=W.asinClamped(c/(0===a?1:a));g=Math.atan2(h,g);b[e++]=R*g;b[e++]=R*c;b[e]=a-f}function ta(a,c,b,e){ca(a,c,b,e,v.moon.radius)}function ua(a,c,b,e){ca(a,c,b,e,v.mars.radius)}function J(a,c,b,e){ca(a,c,b,e,v.earth.radius)}function Ta(a,c,b,e){J(a,c,b,e);O(b,e,b,e)}function Ua(a,c,b,e){J(a,c,b,e);H(b,e,b,e)}function H(a,c,b,
e){var f=v.earth;const g=B*a[c];var h=B*a[c+1];a=a[c+2];c=Math.sin(h);h=Math.cos(h);const l=f.radius/Math.sqrt(1-f.eccentricitySquared*c*c);b[e++]=(l+a)*h*Math.cos(g);b[e++]=(l+a)*h*Math.sin(g);b[e++]=(l*(1-f.eccentricitySquared)+a)*c}function K(a,c,b,e){var f=hb.earthEllipsoidConstants,g=a[c],h=a[c+1];a=a[c+2];let l;c=Math.abs(a);var u=g*g+h*h;var t=Math.sqrt(u);var r=u+a*a;var x=Math.sqrt(r);g=Math.atan2(h,g);var E=a*a/r;r=u/r;h=f.a2/x;u=f.a3-f.a4/x;.3<r?(E=c/x*(1+r*(f.a1+h+E*u)/x),x=Math.asin(E),
h=E*E,r=Math.sqrt(1-h)):(r=t/x*(1-E*(f.a5-h-r*u)/x),x=Math.acos(r),h=1-r*r,E=Math.sqrt(h));l=1-v.earth.eccentricitySquared*h;h=v.earth.radius/Math.sqrt(l);f=f.a6*h;h=t-h*r;u=c-f*E;c=r*h+E*u;t=r*u-E*h;f=t/(f/l+c);x+=f;0>a&&(x=-x);b[e++]=R*g;b[e++]=R*x;b[e]=c+t*f/2}function Va(a,c,b,e){K(a,c,b,e);G(b,e,b,e)}function Wa(a,c,b,e){K(a,c,b,e);O(b,e,b,e)}function ka(a,c,b=va()){return k.isNone(a)||k.isNone(c)?null:Xa(a,c,b).projector}function Xa(a,c,b){if(k.isNone(a)||k.isNone(c)||b.source.spatialReference===
a&&b.dest.spatialReference===c)return b;const e=D(a,b.source),f=D(c,b.dest);e===d.UNKNOWN&&f===d.UNKNOWN?w.equals(a,c)?b.projector=p:b.projector=null:b.projector=y[e][f];return b}function va(){return{source:{spatialReference:null,spatialReferenceId:d.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:d.UNKNOWN,metersPerUnit:1},projector:p}}let z=null,F=null,T=null,aa={};const za=new bb.SimpleObservable;let ba=function(a){function c(){return a.call(this,"projection:not-loaded",
"projection engine not fully loaded yet, please call load()")||this}xa._inheritsLoose(c,a);return c}(Za);var d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEB_MERCATOR=3]="WEB_MERCATOR";a[a.WGS84_ECEF=4]="WGS84_ECEF";a[a.CGCS2000=5]="CGCS2000";a[a.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT";a[a.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";a[a.GCSMARS2000=8]="GCSMARS2000";a[a.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";a[a.GCSMOON2000=
10]="GCSMOON2000";a[a.LON_LAT=11]="LON_LAT";a[a.PLATE_CARREE=12]="PLATE_CARREE"})(d||(d={}));const Ra=v.earth.radius*Math.PI/180,V=180/(v.earth.radius*Math.PI),y={[d.WGS84]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:G,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:O,[d.PLATE_CARREE]:I,[d.WGS84]:p,[d.WGS84_ECEF]:H},[d.CGCS2000]:{[d.CGCS2000]:p,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,
[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:G,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:I,[d.WGS84]:null,[d.WGS84_ECEF]:H},[d.GCSMARS2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:p,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:sa,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},
[d.GCSMOON2000]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:p,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:ra,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.WEB_MERCATOR]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:N,[d.WGS84_COMPARABLE_LON_LAT]:N,[d.SPHERICAL_ECEF]:Oa,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,
[d.UNKNOWN]:null,[d.WEB_MERCATOR]:p,[d.PLATE_CARREE]:Sa,[d.WGS84]:N,[d.WGS84_ECEF]:Pa},[d.WGS84_ECEF]:{[d.CGCS2000]:K,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:K,[d.WGS84_COMPARABLE_LON_LAT]:K,[d.SPHERICAL_ECEF]:Va,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Wa,[d.PLATE_CARREE]:function(a,c,b,e){K(a,c,b,e);I(b,e,b,e)},[d.WGS84]:K,[d.WGS84_ECEF]:p},[d.SPHERICAL_ECEF]:{[d.CGCS2000]:J,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:J,
[d.WGS84_COMPARABLE_LON_LAT]:J,[d.SPHERICAL_ECEF]:p,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:Ta,[d.PLATE_CARREE]:function(a,c,b,e){J(a,c,b,e);I(b,e,b,e)},[d.WGS84]:J,[d.WGS84_ECEF]:Ua},[d.SPHERICAL_MARS_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:ua,[d.GCSMOON2000]:null,[d.LON_LAT]:ua,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:p,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,
[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.SPHERICAL_MOON_PCPF]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:ta,[d.LON_LAT]:ta,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:p,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.UNKNOWN]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:null,[d.WGS84_COMPARABLE_LON_LAT]:null,[d.SPHERICAL_ECEF]:null,[d.SPHERICAL_MARS_PCPF]:null,
[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:p,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:null,[d.WGS84]:null,[d.WGS84_ECEF]:null},[d.LON_LAT]:{[d.CGCS2000]:p,[d.GCSMARS2000]:p,[d.GCSMOON2000]:p,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,[d.SPHERICAL_ECEF]:G,[d.SPHERICAL_MARS_PCPF]:sa,[d.SPHERICAL_MOON_PCPF]:ra,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:O,[d.PLATE_CARREE]:I,[d.WGS84]:p,[d.WGS84_ECEF]:H},[d.WGS84_COMPARABLE_LON_LAT]:{[d.CGCS2000]:null,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:p,[d.WGS84_COMPARABLE_LON_LAT]:p,
[d.SPHERICAL_ECEF]:G,[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:null,[d.PLATE_CARREE]:I,[d.WGS84]:p,[d.WGS84_ECEF]:H},[d.PLATE_CARREE]:{[d.CGCS2000]:P,[d.GCSMARS2000]:null,[d.GCSMOON2000]:null,[d.LON_LAT]:P,[d.WGS84_COMPARABLE_LON_LAT]:P,[d.SPHERICAL_ECEF]:function(a,c,b,e){P(a,c,b,e);G(b,e,b,e)},[d.SPHERICAL_MARS_PCPF]:null,[d.SPHERICAL_MOON_PCPF]:null,[d.UNKNOWN]:null,[d.WEB_MERCATOR]:function(a,c,b,e){P(a,c,b,e);O(b,e,b,e)},[d.PLATE_CARREE]:p,[d.WGS84]:P,
[d.WGS84_ECEF]:function(a,c,b,e){P(a,c,b,e);H(b,e,b,e)}}},Q={spatialReference:null,spatialReferenceId:d.UNKNOWN},Ya={spatialReference:null,spatialReferenceId:d.UNKNOWN},la=va(),kb=va(),B=W.deg2rad(1),R=W.rad2deg(1),q=S.create(),C=S.create(),L=S.create(),n=S.create(),da=S.create();m.canProjectToWGS84ComparableLonLat=function(a){if(k.isNone(a))return!1;a=D(a,Q);return!!y[a][d.WGS84_COMPARABLE_LON_LAT]};m.canProjectWithoutEngine=U;m.computeENUToSphericalPCPFLocalRotation=pa;m.computeSphericalPCPFToENULocalRotation=
Na;m.computeTranslationToOriginAndRotation=function(a,c,b,e){if(k.isNone(a)||k.isNone(e))return!1;var f=D(a,Q),g=D(e,Ya);if(f===g&&g!==d.SPHERICAL_ECEF&&g!==d.SPHERICAL_MARS_PCPF&&g!==d.SPHERICAL_MOON_PCPF&&(f!==d.UNKNOWN||w.equals(a,e)))return fa.fromTranslation(b,c),!0;if(g===d.SPHERICAL_ECEF||g===d.SPHERICAL_MARS_PCPF||g===d.SPHERICAL_MOON_PCPF){f=y[f][d.LON_LAT];g=y[d.LON_LAT][g];if(k.isNone(f)||k.isNone(g))return!1;f(c,0,C,0);g(C,0,L,0);pa(B*C[0],B*C[1],b);b[12]=L[0];b[13]=L[1];b[14]=L[2];return!0}if((g===
d.WEB_MERCATOR||g===d.PLATE_CARREE)&&(f===d.WGS84||f===d.CGCS2000&&g===d.PLATE_CARREE||f===d.SPHERICAL_ECEF||f===d.WEB_MERCATOR)){a=y[f][d.LON_LAT];g=y[d.LON_LAT][g];if(k.isNone(a)||k.isNone(g))return!1;a(c,0,C,0);g(C,0,L,0);f===d.SPHERICAL_ECEF?Na(B*C[0],B*C[1],b):fa.identity(b);b[12]=L[0];b[13]=L[1];b[14]=L[2];return!0}return!1};m.getProjectorName=function(a,c){switch(ka(a,c,la)){case p:return"copy3";case G:return"wgs84ToSphericalECEF";case O:return"wgs84ToWebMercator";case I:return"wgs84ToPlateCarree";
case H:return"wgs84ToWGS84ECEF";case N:return"webMercatorToWGS84";case Oa:return"webMercatorToSphericalECEF";case Pa:return"webMercatorToWGS84ECEF";case Sa:return"webMercatorToPlateCarree";case K:return"wgs84ECEFToWGS84";case Va:return"wgs84ECEFToSphericalECEF";case Wa:return"wgs84ECEFToWebMercator";case J:return"sphericalECEFToWGS84";case Ta:return"sphericalECEFToWebMercator";case ua:return"sphericalMarsPCPFToMars2000";case ta:return"sphericalMoonPCPFToMoon2000";case Ua:return"sphericalECEFToWGS84ECEF";
case sa:return"mars2000ToSphericalPCPF";case ra:return"moon2000ToSphericalPCPF";default:return null}};m.getTransformation=Ca;m.getTransformations=function(a,c,b=null){if(k.isNone(z)||k.isNone(F))throw new ba;a=z._getTransformationBySuitability(F,a,c,b,b?.spatialReference);if(null!==a){c=[];for(const e of a)c.push(Y.fromGE(e));return c}return[]};m.initializeProjection=function(a,c,b,e){return ma.apply(this,arguments)};m.isLoaded=ia;m.load=Z;m.localLinearScaleFactors=function(a,c,b,e){if(k.isNone(c)||
k.isNone(e))return!1;const f=D(c,Q);var g=D(e,Ya);if(f===g&&f!==d.UNKNOWN||w.equals(c,e))return b[0]=1,b[1]=1,b[2]=1,!0;if(f===d.SPHERICAL_ECEF){c=M.length(a);a=c/Math.sqrt(a[0]*a[0]+a[1]*a[1]);c/=v.earth.radius;if(g===d.WEB_MERCATOR)return b[0]=a*c,b[1]=a*c,b[2]=1,!0;if(g===d.WGS84||g===d.CGCS2000)return g=V,b[0]=g*a*c,b[1]=g*c,b[2]=1,!0}else if(f===d.PLATE_CARREE){if(g===d.WGS84||g===d.CGCS2000)return b[0]=V,b[1]=V,b[2]=1,!0;if(g===d.WEB_MERCATOR)return g=a[1]/v.earth.radius,b[0]=1,b[1]=1/Math.cos(g),
b[2]=1,!0}return!1};m.lonLatToSphericalPCPF=function(a,c,b,e){const f=Math.cos(b);a[0]=Math.cos(c)*f*e;a[1]=Math.sin(c)*f*e;a[2]=Math.sin(b)*e};m.lonLatToWebMercatorComparable=Qa;m.project=Aa;m.projectBoundingRect=function(a,c,b,e){if(null==a)return!1;if(w.equals(c,e))return gb.copy(b,a),!0;q[0]=a[0];q[1]=a[1];q[2]=0;if(!A(q,c,0,q,e,0,1))return!1;b[0]=q[0];b[1]=q[1];q[0]=a[2];q[1]=a[3];q[2]=0;if(!A(q,c,0,q,e,0,1))return!1;b[2]=q[0];b[3]=q[1];return!0};m.projectBoundingSphere=function(a,c,b,e){if(k.isNone(c)||
k.isNone(e))return!1;c=Xa(c,e,kb);if(c.projector===p)return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],!0;if(k.isNone(c.projector))return!1;const {source:f,dest:g}=c;if(g.spatialReferenceId===d.WEB_MERCATOR){c=y[f.spatialReferenceId][d.WGS84];if(k.isNone(c))return!1;c(a,0,C,0);O(C,0,b,0);b[3]=Ma(C[1],a[2],a[3],v.earth.radius);return!0}if(f.spatialReferenceId!==d.WGS84&&f.spatialReferenceId!==d.CGCS2000||g.spatialReferenceId!==d.PLATE_CARREE)c.projector(a,0,b,0),b[3]=a[3]*(f.metersPerUnit??1)/(g.metersPerUnit??
1);else{e=y[d.SPHERICAL_ECEF][d.PLATE_CARREE];let h=a[3];k.isSome(y[f.spatialReferenceId][d.SPHERICAL_ECEF])&&k.isSome(e)&&(h=Ma(a[1],a[2],a[3],v.earth.radius));c.projector(a,0,b,0);b[3]=h}return!0};m.projectBuffer=A;m.projectDirection=function(a,c,b,e,f){M.copy(n,a);M.add(da,a,c);oa(n,b,n,f);oa(da,b,da,f);M.subtract(e,da,n);M.normalize(e,e)};m.projectExtent=function(a,c,b=c.spatialReference,e=0){return k.isSome(a.spatialReference)&&k.isSome(b)&&k.isSome(Ga(a,a.spatialReference,c,b,e))};m.projectMany=
ja;m.projectMultipoint=function(a,c,b=c.spatialReference,e=0){return k.isSome(a.spatialReference)&&k.isSome(b)&&k.isSome(Ja(a,a.spatialReference,c,b,e))};m.projectOrLoad=function(a,c){a=Da([a],c);return k.isSome(a.pending)?{pending:a.pending,geometry:null}:k.isSome(a.geometries)?{pending:null,geometry:a.geometries[0]}:{pending:null,geometry:null}};m.projectOrLoadMany=Da;m.projectPoint=function(a,c,b=c.spatialReference,e=0){return k.isSome(b)&&k.isSome(a.spatialReference)&&k.isSome(Fa(a,a.spatialReference,
c,b,e))};m.projectPointToVector=function(a,c,b,e=0){n[0]=a.x;n[1]=a.y;const f=a.z;n[2]=void 0!==f?f:e;return A(n,a.spatialReference,0,c,b,0,1)};m.projectPointToWGS84ComparableLonLat=function(a,c){n[0]=a.x;n[1]=a.y;const b=a.z;n[2]=void 0!==b?b:0;return La(n,a.spatialReference,c)};m.projectPolygon=function(a,c,b=c.spatialReference,e=0){return k.isSome(a.spatialReference)&&k.isSome(b)&&k.isSome(Ha(a,a.spatialReference,c,b,e))};m.projectPolygonToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,
rings:b},e,f=0){c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];if(k.isNone(c))return!1;a=a?g=>g:g=>M.set(n,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const l=[0,0,f];c(a(h),0,l,0);b.push(l)}e.push(b)}return!0};m.projectPolyline=function(a,c,b=c.spatialReference,e=0){return k.isSome(a.spatialReference)&&k.isSome(b)&&k.isSome(Ia(a,a.spatialReference,c,b,e))};m.projectPolylineToWGS84ComparableLonLat=function({hasZ:a,spatialReference:c,paths:b},e,f=0){c=D(c,Q);c=y[c][d.WGS84_COMPARABLE_LON_LAT];
if(k.isNone(c))return!1;a=a?g=>g:g=>M.set(n,g[0],g[1],f);for(const g of b){b=[];for(const h of g){const l=[0,0,f];c(a(h),0,l,0);b.push(l)}e.push(b)}return!0};m.projectVectorToDehydratedPoint=function(a,c,b){return A(a,c,0,n,b.spatialReference,0,1)?(b.x=n[0],b.y=n[1],b.z=n[2],b):null};m.projectVectorToPoint=function(a,c,b){if(k.isNone(c)||k.isNone(b))return null;const e=new ya({spatialReference:b});return A(a,c,0,n,b,0,1)?(e.x=n[0],e.y=n[1],e.z=n[2],e):null};m.projectVectorToVector=oa;m.projectVectorToWGS84ComparableLonLat=
function(a,c,b){return La(a,c,b)};m.projectWithoutEngine=Ba;m.projectXYZToVector=na;m.sphericalPCPFtoLonLatElevation=ca;m.test={get loadPromise(){return T}};m.tryProjectWithZConversion=Ea;m.unload=function(){T=F=z=null;aa={}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});