// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../geometry/support/scaleUtils ../../renderers/visualVariables/SizeVariable ../statistics/spatialStatistics ../support/binningUtils ../support/adapters/support/layerUtils".split(" "),function(m,e,n,p,q,r,t,g){function u(a){return h.apply(this,arguments)}function h(){h=m._asyncToGenerator(function*(a){var {view:b}=a;if(!(a&&b&&a.layer))throw new e("outline:missing-parameters","'view' and 'layer' parameters are required");
a.forBinning&&t.verifyBinningParams(a,"outline");const {layer:d,...k}=a,c=a.forBinning?g.binningCapableLayerTypes:g.featureCapableLayerTypes;a=g.createLayerAdapter(d,c,a.forBinning);const f={layerAdapter:a,...k};if(!a)throw new e("outline:invalid-parameters","'layer' must be one of these types: "+g.getLayerTypeLabels(c).join(", "));yield b.when();b=n.isSome(f.signal)?{signal:f.signal}:null;yield a.load(b);if("polygon"!==a.geometryType)throw new e("outline:not-supported",`outline is not supported for geometryType: ${a.geometryType}`);
return f});return h.apply(this,arguments)}function v(a,b){const d=a.avgSize,k=p.getScaleForResolution(1,b.spatialReference);a=w.map(c=>({size:c.width,value:Math.round(d/c.size*k)}));a.sort((c,f)=>c.value-f.value);return{visualVariables:[new q({target:"outline",valueExpression:"$view.scale",stops:a})],opacity:.25}}function l(){l=m._asyncToGenerator(function*(a){const {layerAdapter:b,...d}=yield u(a);a=yield b.getSampleFeatures({sampleSize:-1,returnGeometry:!0,...d});if(!a?.length)throw new e("outline:insufficient-info",
"No features are available to calculate statistics");a=yield r({features:a,geometryType:b.geometryType});if(!("avgSize"in a&&a.avgSize))throw new e("outline:insufficient-info","average polygon size is invalid");return v(a,d.view)});return l.apply(this,arguments)}const w=[{size:10,width:0},{size:20,width:.5},{size:80,width:1},{size:250,width:2}];return function(a){return l.apply(this,arguments)}});