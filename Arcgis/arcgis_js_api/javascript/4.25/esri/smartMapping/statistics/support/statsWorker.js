// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry ../../../core/Error ../../../core/maybe ../../../core/screenUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(m,k,G,p,w,N,O,K,J,v,r,D,g,z){function t(){t=k._asyncToGenerator(function*(n,a){if(!a)return[];const {field:e,field2:l,field3:q,fieldDelimiter:H}=n,c=n.valueExpression,b=n.normalizationType,h=n.normalizationField,u=n.normalizationTotal,F=[],I=n.viewInfoParams;let L=null,P=null;if(c){if(!C){const {arcadeUtils:S}=yield g.loadArcade();C=S}L=C.createFunction(c);P=I&&C.getViewInfo({viewingMode:I.viewingMode,scale:I.scale,spatialReference:new O(I.spatialReference)})}n=n.fieldInfos;const Q=a[0]&&
"declaredClass"in a[0]&&"esri.Graphic"===a[0].declaredClass||!n?null:{fields:n};a.forEach(S=>{var T=S.attributes;if(c){var U=C.createExecContext(Q?{...S,layer:Q}:S,P);U=C.executeFunction(L,U)}else T&&(U=T[e],l&&(U=`${D.processNullValue(U)}${H}${D.processNullValue(T[l])}`,q&&(U=`${U}${H}${D.processNullValue(T[q])}`)));b&&"number"===typeof U&&isFinite(U)&&(T=T&&parseFloat(T[h]),U=D.getNormalizedValue(U,b,T,u));F.push(U)});return F});return t.apply(this,arguments)}function y(n,a){return new p(n,a)}function B(n,
a){n=w.isSome(n)?n:"";w.isSome(a)&&a&&(n=n?"("+n+") AND ("+a+")":a);return n}function E(n){const a=n.layer;return n.fields.filter(e=>!a.getField(e))}function A(n){const a=n.layer;return n.fields.filter(e=>{e=a.getFieldUsageInfo(e);return!e||!e.supportsStatistics})}let C=null;m.calculateHeatmapStats=function(n,a=18,e,l,q,H){const c=new Float64Array(q*H);a=Math.round(N.pt2px(a));let b=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;var u=0;let F=0,I=0,L=0;e=r.createValueFunction(l,e);for(const {geometry:Q,
attributes:S}of n){const {x:T,y:U}=Q;n=Math.max(0,T-a);u=Math.max(0,U-a);l=Math.min(H,U+a);const ea=Math.min(q,T+a),Y=+e(S);for(let V=u;V<l;V++)for(let W=n;W<ea;W++){u=V*q+W;const Z=r.evaluateDensityKernel(W-T,V-U,a);var P=c[u];u=c[u]+=Z*Y;P=u-P;F+=P;I+=P*P;u<b&&(b=u);u>h&&(h=u);L++}}return L?{mean:F/L,stdDev:Math.sqrt((I-F*F/L)/L),min:b,max:h,mid:(h-b)/2,count:L}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};m.createError=y;m.getDataValues=function(n,a){return t.apply(this,arguments)};m.getRangeExpr=
function(n,a,e){a=null!=a?n+" \x3e\x3d "+a:"";n=null!=e?n+" \x3c\x3d "+e:"";e="";return(e=a&&n?B(a,n):a||n)?"("+e+")":""};m.getSQLFilterForNormalization=function(n){const a=n.field,e=n.normalizationType;n=n.normalizationField;let l;if("field"===e)l="(NOT "+n+" \x3d 0)";else if("log"===e||"natural-log"===e||"square-root"===e)l=`(${a} > 0)`;return l};m.getSumOfAttributesExpr=function(n,a,e){const l=[],q=[],H=[],c=[],b=[];n.forEach((F,I)=>{const L=F.field?"field":"expression",P=F.field||F.valueExpression;
F.field?(b.push(P),q.push(`var ${L}${I} = Number($feature["${P}"]);`)):(l.push(`function getValueForExpr${I}() {\n  ${P} \n}`),q.push(`var ${L}${I} = Number(getValueForExpr${I}());`));e||H.push(`${L}${I} = IIf(${L}${I} < 0, 0, ${L}${I});`);c.push(`${L}${I}`)});n="return sum;";const h=l.length?null:b.reduce((F,I)=>`${F} + ${I}`);let u=null;a||e?a?e||(n="return IIf(sum \x3e\x3d 0, sum, null);",h&&(u=`(( ${h} ) >= 0)`)):(n="return IIf(sum !\x3d 0, sum, null);",h&&(u=`(( ${h} ) <> 0)`)):(n="return IIf(sum \x3e 0, sum, null);",
h&&(u=`(( ${h} ) > 0)`));return{valueExpression:[l.length?l.join("\n"):"",q.join("\n"),H.join("\n"),`var sum = ${c.join(" + ")};`,n].filter(Boolean).join("\n\n"),sqlExpression:h,sqlWhere:u}};m.mergeWhereClauses=B;m.quantizeFeatures=function(n,a,e,l){const q=J.isWrappable(e)?J.getInfo(e):null,H=q?Math.round((q.valid[1]-q.valid[0])/a.scale[0]):null;return n.map(c=>{const b=new z(w.unwrap(c.geometry));K.quantizePoint(a,b,b,b.hasZ,b.hasM);if(q){var h=l[0];0>b.x?b.x+=H:b.x>h&&(b.x-=H)}c.geometry=b;return c})};
m.verifyBasicFieldValidity=function(n,a,e){const l=E({layer:n,fields:a});if(l.length)return y(e,"Unknown fields: "+l.join(", ")+". You can only use fields defined in the layer schema");n=A({layer:n,fields:a});if(n.length)return y(e,"Unsupported fields: "+n.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};m.verifyFieldType=function(n,a,e,l){let q=null;a?a.name!==n.objectIdField&&l.includes(a.type)||(q=y(e,"'field' should be one of these types: "+
l.join(","))):q=y(e,"'field' is not defined in the layer schema");return q};m.verifyFilterValidty=function(n,a){if(n&&"intersects"!==n.spatialRelationship)return y(a,"Only 'intersects' spatialRelationship is supported for featureFilter")};m.verifyNumericField=function(n,a,e){let l;a?a.name!==n.objectIdField&&v.isNumericField(a)||(l=y(e,"'field' should be one of these numeric types: "+v.numericTypes.join(","))):l=y(e,"'field' is not defined in the layer schema");return l};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/screenUtils":function(){define(["exports"],function(m){function k(p){return p?72*p/96:0}const G=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;m.castRenderScreenPointArray=function(p){return p};m.castRenderScreenPointArray3=function(p){return p};m.castScreenPointArray=function(p){return p};m.createRenderScreenPoint=function(p=0,w=0){return{x:p,y:w}};m.createRenderScreenPointArray=function(p=0,w=0){return[p,w]};m.createRenderScreenPointArray3=
function(p=0,w=0,N=0){return[p,w,N]};m.createScreenPoint=function(p=0,w=0){return{x:p,y:w}};m.createScreenPointArray=function(p=0,w=0){return[p,w]};m.pt2px=function(p){return p?p/72*96:0};m.px2pt=k;m.screenPointArrayToObject=function(p,w){return w?(w.x=p[0],w.y=p[1],w):{x:p[0],y:p[1]}};m.screenPointObjectToArray=function(p,w){return w?(w[0]=p.x,w[1]=p.y,2<w.length&&(w[2]=0),w):[p.x,p.y]};m.toPt=function(p){if("string"===typeof p){var w=p.match(G);if(w){var N=Number(w[1]);w=w[3]&&w[3].toLowerCase();
p="-"===p.charAt(0);N="px"===w?k(N):N;return p?-N:N}console.warn("screenUtils.toPt: input not recognized!");return null}return p};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe","./jsonUtils"],function(m,k,G){function p({scale:c,translate:b},h){return Math.round((h-b[0])/c[0])}function w({scale:c,translate:b},h){return Math.round((b[1]-h)/c[1])}function N(c,b,h){const u=
[];let F,I,L,P;for(let Q=0;Q<h.length;Q++){const S=h[Q];if(0<Q){if(L=p(c,S[0]),P=w(c,S[1]),L!==F||P!==I)u.push(b(S,L-F,P-I)),F=L,I=P}else F=p(c,S[0]),I=w(c,S[1]),u.push(b(S,F,I))}return 0<u.length?u:null}function O(c,b,h,u){return N(c,h?u?H:q:u?q:l,b)}function K(c,b,h,u){const F=[];h=h?u?H:q:u?q:l;for(u=0;u<b.length;u++){const I=N(c,h,b[u]);I&&3<=I.length&&F.push(I)}return F.length?F:null}function J(c,b,h,u){const F=[];h=h?u?H:q:u?q:l;for(u=0;u<b.length;u++){const I=N(c,h,b[u]);I&&2<=I.length&&F.push(I)}return F.length?
F:null}function v({scale:c,translate:b},h){return h*c[0]+b[0]}function r({scale:c,translate:b},h){return b[1]-h*c[1]}function D(c,b,h){const u=Array(h.length);if(!h.length)return u;const [F,I]=c.scale;let L=v(c,h[0][0]);c=r(c,h[0][1]);u[0]=b(h[0],L,c);for(let P=1;P<h.length;P++){const Q=h[P];L+=Q[0]*F;c-=Q[1]*I;u[P]=b(Q,L,c)}return u}function g(c,b,h){const u=Array(h.length);for(let F=0;F<h.length;F++)u[F]=D(c,b,h[F]);return u}function z(c,b,h,u){return D(c,h?u?H:q:u?q:l,b)}function t(c,b,h,u){return g(c,
h?u?H:q:u?q:l,b)}function y(c,b,h,u){return g(c,h?u?H:q:u?q:l,b)}function B(c,b,h){let [u,F]=h[0],I=Math.min(u,b[0]),L=Math.min(F,b[1]),P=Math.max(u,b[2]);b=Math.max(F,b[3]);for(let Q=1;Q<h.length;Q++){const [S,T]=h[Q];u+=S;F+=T;0>S&&(I=Math.min(I,u));0<S&&(P=Math.max(P,u));0>T?L=Math.min(L,F):0<T&&(b=Math.max(b,F))}c[0]=I;c[1]=L;c[2]=P;c[3]=b;return c}function E(c,b){if(!b.length)return null;c[0]=c[1]=Number.POSITIVE_INFINITY;c[2]=c[3]=Number.NEGATIVE_INFINITY;for(let h=0;h<b.length;h++)B(c,c,b[h]);
return c}function A(c,b,h,u,F){b.xmin=p(c,h.xmin);b.ymin=w(c,h.ymin);b.xmax=p(c,h.xmax);b.ymax=w(c,h.ymax);b!==h&&(u&&(b.zmin=h.zmin,b.zmax=h.zmax),F&&(b.mmin=h.mmin,b.mmax=h.mmax));return b}function C(c,b,h,u,F){b.points=O(c,h.points,u,F)??[];return b}function n(c,b,h,u,F){b.x=p(c,h.x);b.y=w(c,h.y);b!==h&&(u&&(b.z=h.z),F&&(b.m=h.m));return b}function a(c,b,h,u,F){c=K(c,h.rings,u,F);if(!c)return null;b.rings=c;return b}function e(c,b,h,u,F){c=J(c,h.paths,u,F);if(!c)return null;b.paths=c;return b}
const l=(c,b,h)=>[b,h],q=(c,b,h)=>[b,h,c[2]],H=(c,b,h)=>[b,h,c[2],c[3]];m.equals=function(c,b){if(c===b||null==c&&null==b)return!0;if(null==c||null==b)return!1;let h,u,F,I;c&&"upperLeft"===c.originPosition?(h=c.translate[0],u=c.translate[1],c=c.scale[0]):(h=k.isSome(c.extent)?c.extent.xmin:0,u=k.isSome(c.extent)?c.extent.ymax:0,c=c.tolerance);b&&"upperLeft"===b.originPosition?(F=b.translate[0],I=b.translate[1],b=b.scale[0]):(F=k.isSome(b.extent)?b.extent.xmin:0,I=k.isSome(b.extent)?b.extent.ymax:
0,b=b.tolerance);return h===F&&u===I&&c===b};m.getQuantizedBoundsCoordsArray=B;m.getQuantizedBoundsCoordsArrayArray=E;m.getQuantizedBoundsPaths=function(c){return E([0,0,0,0],c)};m.getQuantizedBoundsPoints=function(c){const b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return B(b,b,c)};m.getQuantizedBoundsRings=function(c){return E([0,0,0,0],c)};m.quantizeBounds=function(c,b,h){b[0]=p(c,h[0]);b[3]=w(c,h[1]);b[2]=p(c,h[2]);b[1]=w(c,h[3]);return b};
m.quantizeExtent=A;m.quantizeGeometry=function(c,b){return c&&b?G.isPoint(b)?n(c,{},b,!1,!1):G.isPolyline(b)?e(c,{},b,!1,!1):G.isPolygon(b)?a(c,{},b,!1,!1):G.isMultipoint(b)?C(c,{},b,!1,!1):G.isExtent(b)?A(c,{},b,!1,!1):null:null};m.quantizeMultipoint=C;m.quantizePaths=J;m.quantizePoint=n;m.quantizePoints=O;m.quantizePolygon=a;m.quantizePolyline=e;m.quantizeRings=K;m.quantizeX=p;m.quantizeY=w;m.toQuantizationTransform=function(c){return c?{originPosition:"upper-left"===c.originPosition?"upperLeft":
"lower-left"===c.originPosition?"lowerLeft":c.originPosition,scale:c.tolerance?[c.tolerance,c.tolerance]:[1,1],translate:k.isSome(c.extent)?[c.extent.xmin,c.extent.ymax]:[0,0]}:null};m.unquantizeBounds=function(c,b,h){return h?(b[0]=v(c,h[0]),b[1]=r(c,h[3]),b[2]=v(c,h[2]),b[3]=r(c,h[1]),b):[v(c,b[0]),r(c,b[3]),v(c,b[2]),r(c,b[1])]};m.unquantizeCoordsArray=D;m.unquantizeCoordsArrayArray=g;m.unquantizeExtent=function(c,b,h,u,F){b.xmin=v(c,h.xmin);b.ymin=r(c,h.ymin);b.xmax=v(c,h.xmax);b.ymax=r(c,h.ymax);
b!==h&&(u&&(b.zmin=h.zmin,b.zmax=h.zmax),F&&(b.mmin=h.mmin,b.mmax=h.mmax));return b};m.unquantizeMultipoint=function(c,b,h,u,F){k.isSome(h)&&(b.points=z(c,h.points,u,F));return b};m.unquantizePaths=t;m.unquantizePoint=function(c,b,h,u,F){if(k.isNone(h))return b;b.x=v(c,h.x);b.y=r(c,h.y);b!==h&&(u&&(b.z=h.z),F&&(b.m=h.m));return b};m.unquantizePoints=z;m.unquantizePolygon=function(c,b,h,u,F){k.isSome(h)&&(b.rings=y(c,h.rings,u,F));return b};m.unquantizePolyline=function(c,b,h,u,F){k.isSome(h)&&(b.paths=
t(c,h.paths,u,F));return b};m.unquantizeRings=y;m.unquantizeX=v;m.unquantizeY=r;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(m,k,G,p,w,N,O,K){function J(d,f,x){if(d)for(const M of d)(d=(d=N.getDeepValue(M,f))&&"function"!==typeof d&&
x.get(d))&&N.setDeepValue(M,d.name,f)}function v(d,f){if(!d||!f)return[];fa.clear();r(fa,d,f);return Array.from(fa).sort()}function r(d,f,x){if(x)if(f?.fields?.length)if(x.includes("*"))for(const {name:M}of f.fields)d.add(M);else for(const M of x)D(d,f,M);else if(x.includes("*"))d.clear(),d.add("*");else for(const M of x)null!=M&&d.add(M)}function D(d,f,x){"string"===typeof x&&(f?(f=f.get(x))&&d.add(f.name):d.add(x))}function g(d,f,x){return z.apply(this,arguments)}function z(){z=G._asyncToGenerator(function*(d,
f,x){if(x){var {arcadeUtils:M}=yield K.loadArcade();x=M.extractFieldNames(x,f?.fields?.map(R=>R.name));for(const R of x)D(d,f,R)}});return z.apply(this,arguments)}function t(d,f,x){return y.apply(this,arguments)}function y(){y=G._asyncToGenerator(function*(d,f,x){if(x&&"1\x3d1"!==x){const M=(yield new Promise((R,X)=>m(["../../core/sql/WhereClause"],R,X))).WhereClause.create(x,f);if(!M.isStandardized)throw new p("fieldUtils:collectFilterFields","Where clause is not standardized",{where:x});r(d,f,M.fieldNames)}});
return y.apply(this,arguments)}function B(d,f){for(const x of d)if(x&&x.valueType&&x.valueType===f)return x.name;return null}function E(){E=G._asyncToGenerator(function*(d){if(!d)return[];const f=new Set;yield A(f,d);return Array.from(f).sort()});return E.apply(this,arguments)}function A(d,f){return C.apply(this,arguments)}function C(){C=G._asyncToGenerator(function*(d,f){if(f){var x=N.getDeepValue("elevationInfo.featureExpressionInfo",f);if(x)return x.collectRequiredFields(d,f.fieldsIndex)}});return C.apply(this,
arguments)}function n(){n=G._asyncToGenerator(function*(d,f,x){if(f&&x&&"fields"in x){var M=[];M.push(a(d,f,x.popupTemplate));x.fields&&M.push(...x.fields.map(function(){var R=G._asyncToGenerator(function*(X){X.onStatisticExpression?g(d,f.fieldsIndex,X.onStatisticExpression.expression):d.add(X.onStatisticField)});return function(X){return R.apply(this,arguments)}}()));yield Promise.all(M)}});return n.apply(this,arguments)}function a(d,f,x){return e.apply(this,arguments)}function e(){e=G._asyncToGenerator(function*(d,
f,x){const M=[];x?.expressionInfos&&M.push(...x.expressionInfos.map(R=>g(d,f.fieldsIndex,R.expression)));x=x?.content;if(Array.isArray(x))for(const R of x)"expression"===R.type&&R.expressionInfo&&M.push(g(d,f.fieldsIndex,R.expressionInfo.expression));yield Promise.all(M)});return e.apply(this,arguments)}function l(){l=G._asyncToGenerator(function*(d,f,x){f&&(f.timeInfo&&w.isSome(x)&&x.timeExtent&&r(d,f.fieldsIndex,[f.timeInfo.startField,f.timeInfo.endField]),f.floorInfo&&r(d,f.fieldsIndex,[f.floorInfo.floorField]),
w.isSome(x)&&w.isSome(x.where)&&(yield t(d,f.fieldsIndex,x.where)))});return l.apply(this,arguments)}function q(){q=G._asyncToGenerator(function*(d,f,x){f&&x&&(yield Promise.all(x.map(M=>H(d,f,M))))});return q.apply(this,arguments)}function H(d,f,x){return c.apply(this,arguments)}function c(){c=G._asyncToGenerator(function*(d,f,x){f&&x&&(x.valueExpression?yield g(d,f.fieldsIndex,x.valueExpression):x.field&&D(d,f.fieldsIndex,x.field))});return c.apply(this,arguments)}function b(){b=G._asyncToGenerator(function*(d){if(!d)return[];
const f="timeInfo"in d&&d.timeInfo;return f?v(d.fieldsIndex,[d.trackIdField,f.startField,f.endField]):[]});return b.apply(this,arguments)}function h(){h=G._asyncToGenerator(function*(d){if(!d)return[];const f=new Set;yield u(f,d);return Array.from(f).sort()});return h.apply(this,arguments)}function u(d,f){return F.apply(this,arguments)}function F(){F=G._asyncToGenerator(function*(d,f){const {labelingInfo:x,fieldsIndex:M}=f;x&&x.length&&(yield Promise.all(x.map(R=>I(d,M,R))))});return F.apply(this,
arguments)}function I(d,f,x){return L.apply(this,arguments)}function L(){L=G._asyncToGenerator(function*(d,f,x){if(x){var M=x.getLabelExpression();x=x.where;"arcade"===M.type?yield g(d,f,M.expression):(M=M.expression.match(/{[^}]*}/g))&&M.forEach(R=>{D(d,f,R.slice(1,-1))});yield t(d,f,x)}});return L.apply(this,arguments)}function P(d){return"number"===typeof d&&!isNaN(d)&&isFinite(d)}function Q(d){return null===d||P(d)}function S(d){return null===d||aa(d)}function T(d){return null!=d&&"string"===
typeof d}function U(d){return null===d||T(d)}function ea(){return!0}function Y(d,f){let x;switch(d.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":x=d.nullable?S:aa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":x=d.nullable?Q:P;break;case "string":case "esriFieldTypeString":x=d.nullable?U:T;break;default:x=ea}return 1===arguments.length?
x:x(f)}function V(d){return null!=d&&oa.has(d.type)}function W(d,f){return d.nullable&&null===f?null:V(d)&&!Z(d.type,Number(f))?k.NumericRangeValidationError.OUT_OF_RANGE:Y(d,f)?d.domain?O.validateDomainValue(d.domain,f):null:k.TypeValidationError.INVALID_TYPE}function Z(d,f){d="string"===typeof d?ha(d):d;if(!d)return!1;const x=d.min,M=d.max;return d.isInteger?aa(f)&&f>=x&&f<=M:f>=x&&f<=M}function ha(d){switch(d){case "esriFieldTypeSmallInteger":case "small-integer":return ba;case "esriFieldTypeInteger":case "integer":return ca;
case "esriFieldTypeSingle":case "single":return da;case "esriFieldTypeDouble":case "double":return ja}}function ka(d,f,x){if(!f||!f.attributes||!d){if(w.isSome(x))for(var M of d??[])x.add(M);return!0}f=f.attributes;M=!1;for(const R of d)if(!(R in f))if(M=!0,w.isSome(x))x.add(R);else break;return M}function ia(){ia=G._asyncToGenerator(function*(d,f){const x=new Set;for(const M of f)yield g(x,d.fieldsIndex,M);return Array.from(x).sort()});return ia.apply(this,arguments)}const pa=/^([0-9])/,qa=/[^A-Za-z0-9_\u0080-\uffff]/g,
ra=/_{2,}/g,sa=/^_/,ta=/_$/,la="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),ma=["field","normalizationField"],fa=new Set,aa=(()=>"isInteger"in Number?Number.isInteger:d=>"number"===typeof d&&isFinite(d)&&Math.floor(d)===d)(),na=["integer","small-integer","single","double"],oa=new Set([...na,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]);k.NumericRangeValidationError=void 0;(k.NumericRangeValidationError||(k.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";k.TypeValidationError=void 0;(k.TypeValidationError||(k.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ba={min:-32768,max:32767,isInteger:!0},ca={min:-2147483648,max:2147483647,isInteger:!0},da={min:-3.4E38,max:1.2E38,isInteger:!1},ja={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,
isInteger:!1};k.collectArcadeFieldNames=g;k.collectElevationFields=A;k.collectFeatureReductionFields=function(d,f,x){return n.apply(this,arguments)};k.collectField=D;k.collectFields=r;k.collectFilterFields=function(d,f,x){return l.apply(this,arguments)};k.collectLabelingFields=u;k.collectOrderByInfos=function(d,f,x){return q.apply(this,arguments)};k.collectPopupTemplateFields=a;k.doubleRange=ja;k.featureHasFields=function(d,f){return!ka(d,f,null)};k.fixFields=v;k.fixRendererFields=function(d,f){if(null!=
d&&null!=f)for(const x of Array.isArray(d)?d:[d])if(J(la,x,f),"visualVariables"in x&&x.visualVariables)for(const M of x.visualVariables)J(ma,M,f)};k.fixTimeInfoFields=function(d,f){if(null!=d&&f?.fields?.length)if("startField"in d){var x=f.get(d.startField);f=f.get(d.endField);d.startField=x?.name??null;d.endField=f?.name??null}else x=f.get(d.startTimeField),f=f.get(d.endTimeField),d.startTimeField=x?.name??null,d.endTimeField=f?.name??null};k.getDisplayFieldName=function({displayField:d,fields:f}){if(d)return d;
if(!f||!f.length)return null;if(!(d=B(f,"name-or-title")||B(f,"unique-identifier")||B(f,"type-or-category")))a:{for(const x of f)if(x&&x.name&&(f=x.name.toLowerCase(),f.includes("name")||f.includes("title"))){d=x.name;break a}d=null}return d};k.getElevationFields=function(d){return E.apply(this,arguments)};k.getExpressionFields=function(d,f){return ia.apply(this,arguments)};k.getFeatureEditFields=function(d){if(!d)return[];const f="editFieldsInfo"in d&&d.editFieldsInfo;return f?v(d.fieldsIndex,[f&&
f.creatorField,f&&f.creationDateField,f&&f.editorField,f&&f.editDateField]):[]};k.getFeatureGeometryFields=function(d){if(!d)return[];const f=d.geometryFieldsInfo;return f?v(d.fieldsIndex,[f.shapeAreaField,f.shapeLengthField]):[]};k.getFieldDefaultValue=function(d){const f=d.defaultValue;if(void 0!==f&&Y(d,f))return f;if(d.nullable)return null};k.getFieldRange=function(d){const f=O.getDomainRange(d.domain);if(f)return f;if(V(d))return ha(d.type)};k.getLabelingFields=function(d){return h.apply(this,
arguments)};k.getNumericTypeForValue=function(d){if(!P(d))return null;if(aa(d)){if(d>=ba.min&&d<=ba.max)return"esriFieldTypeSmallInteger";if(d>=ca.min&&d<=ca.max)return"esriFieldTypeInteger"}return d>=da.min&&d<=da.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};k.getTimeFields=function(d){return b.apply(this,arguments)};k.integerRange=ca;k.isDateField=function(d){return null!=d&&("date"===d.type||"esriFieldTypeDate"===d.type)};k.isNumberInRange=Z;k.isNumericField=V;k.isRasterPixelValueField=function(d){return["raster.itempixelvalue",
"raster.servicepixelvalue"].some(f=>d.toLowerCase().startsWith(f))};k.isStringField=function(d){return null!=d&&("string"===d.type||"esriFieldTypeString"===d.type)};k.isValidFieldValue=function(d,f){return null===W(d,f)};k.isValueMatchingFieldType=Y;k.normalizeFieldName=function(d){return d?d.trim().replace(qa,"_").replace(ra,"_").replace(sa,"").replace(ta,"").replace(pa,"F$1"):null};k.numericTypes=na;k.packFields=function(d,f,x=1){if(!f||!d)return[];if(f.includes("*"))return["*"];f=v(d,f);return f.length/
d.fields.length>=x?["*"]:f};k.populateMissingFields=ka;k.rendererFields=la;k.sanitizeNullFieldValue=function(d){return null==d||"number"===typeof d&&isNaN(d)?null:d};k.singleRange=da;k.smallIntegerRange=ba;k.unpackFieldNames=function(d,f){return w.isNone(f)||w.isNone(d)?[]:f.includes("*")?(d.fields??[]).map(x=>x.name):f};k.validateFieldValue=W;k.validationErrorToString=function(d,f,x){switch(d){case O.DomainValidationError.INVALID_CODED_VALUE:return`Value ${x} is not in the coded domain - field: ${f.name}, domain: ${JSON.stringify(f.domain)}`;
case O.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${x} is out of the range of valid values - field: ${f.name}, domain: ${JSON.stringify(f.domain)}`;case k.TypeValidationError.INVALID_TYPE:return`Value ${x} is not a valid value for the field type - field: ${f.name}, type: ${f.type}, nullable: ${f.nullable}`;case k.NumericRangeValidationError.OUT_OF_RANGE:const {min:M,max:R}=ha(f.type);return`Value ${x} is out of range for the number type - field: ${f.name}, type: ${f.type}, value range is ${M} to ${R}`}};
k.visualVariableFields=ma;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(m){m.DomainValidationError=void 0;(function(k){k.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";k.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(m.DomainValidationError||(m.DomainValidationError={}));m.getDomainRange=function(k){if(k&&"range"===k.type)return{min:"range"in
k?k.range[0]:k.minValue,max:"range"in k?k.range[1]:k.maxValue}};m.validateDomainValue=function(k,G){switch(k.type){case "range":const p="range"in k?k.range[0]:k.minValue;k="range"in k?k.range[1]:k.maxValue;if(null!=p&&+G<p||null!=k&&+G>k)return m.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==k.codedValues||k.codedValues.every(w=>null==w||w.code!==G))return m.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==k.codedValues||k.codedValues.every(w=>
null==w||w.code!==G))return m.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(m,k,G,p,w,N,O,K){function J(){r||(r=G._asyncToGenerator(function*(){const g=yield new Promise((z,t)=>m(["./arcadeUtils"],
z,t));return{arcade:g.arcade,arcadeUtils:g,Dictionary:g.Dictionary,Feature:g.arcadeFeature}})());return r}const v=N.getLogger("esri.support.arcadeOnDemand");let r;p=(g,z,t)=>D.create(g,z,t,null,["$feature","$view"]);let D=function(){function g(t,y,B,E,A,C,n,a){this.script=t;this.evaluate=A;this.fields=Array.isArray(n)?n:n.fields;this._syntaxTree=E;this._arcade=y;this._arcadeDictionary=B;this._arcadeFeature=C;this._spatialReference=a;this._referencesGeometry=y.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}g.create=function(){var t=G._asyncToGenerator(function*(y,B,E,A,C,n){const {arcade:a,Feature:e,Dictionary:l}=yield J(),q=K.fromJSON(B);B=null;try{B=a.parseScript(y,n)}catch(I){return v.error(new w("arcade-bad-expression","Failed to parse arcade script",{script:y,error:I})),null}n=C.reduce((I,L)=>({...I,[L]:null}),{});let H=null;O.isSome(A)&&(H=new l(A),H.immutable=!0,n.$config=null);var c=(A=a.scriptUsesGeometryEngine(B))&&
a.enableGeometrySupport();const b=a.scriptUsesFeatureSet(B)&&a.enableFeatureSetSupport(),h=(C=a.scriptIsAsync(B))&&a.enableAsyncSupport();n={vars:n,spatialReference:q,useAsync:!!h};yield Promise.all([c,b,h]);c=new Set;yield a.loadDependentModules(c,B,null,C,A);const u=new l;u.immutable=!1;u.setField("scale",0);const F=a.compileScript(B,n);return new g(y,a,l,B,I=>{"$view"in I&&I.$view&&(u.setField("scale",I.$view.scale),I.$view=u);H&&(I.$config=H);return F({vars:I,spatialReference:q})},new e,E,q)});
return function(y,B,E,A,C,n){return t.apply(this,arguments)}}();var z=g.prototype;z.repurposeFeature=function(t){t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields});return this._arcadeFeature};z.createDictionary=function(){return new this._arcadeDictionary};z.referencesMember=function(t){return this._arcade.referencesMember(this._syntaxTree,t)};z.referencesFunction=
function(t){return this._arcade.referencesFunction(this._syntaxTree,t)};z.referencesGeometry=function(){return this._referencesGeometry};z.referencesScale=function(){return this._referencesScale};z.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return g}();k.ArcadeExpression=D;k.createDictionaryExpression=(g,z,t,y)=>D.create(g,z,t,y,["$feature","$view"]);k.createLabelExpression=(g,z,t)=>D.create(g,z,t,null,["$feature"]);k.createRendererExpression=
p;k.createVVExpression=p;k.loadArcade=J;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec4","../../chunks/vec4f64"],function(m,k,G,p,w){function N(v,r,D,g){let {color:z,ratio:t}=r,{color:y,ratio:B}=D;B===t&&(1===B?t-=1E-6:B+=1E-6);r=k.clamp((g-t)/(B-t),0,1);p.lerp(v,z.toArray(),y.toArray(),r)}function O(v,r,D,g,z){v=new Uint32Array(v*
v);r="buffer"in r?r:new Float64Array(r);D="buffer"in D?new Uint32Array(D.buffer):new Uint32Array((new Uint8Array(D)).buffer);z=D.length/(z-g);for(let t=0;t<r.length;t++)v[t]=D[k.clamp(Math.floor((r[t]-g)*z),0,D.length-1)];return v.buffer}function K(v,r,D){v=Math.sqrt(v**2+r**2)/D;return 1<v?0:3/(Math.PI*D**2)*(1-v**2)**2}function J(v,r){return null!=v?"string"===typeof r?D=>-1*+D.readAttribute(v):D=>+D.readAttribute(v)+r:D=>1}m.MAGIC_KERNEL_DENSITY_RADIUS_INFLATION_FACTOR=2.4;m.calculateHeatmapIntensityInfoReaders=
function(v,r,D,g){const {radius:z,fieldOffset:t,field:y}=r;r=Math.round(G.pt2px(z));const B=new Float64Array(D*g);let E=Number.NEGATIVE_INFINITY;const A=J(y,t),C=new Set;for(const l of v)for(v=l.getCursor();v.next();){var n=v.getObjectId();if(C.has(n))continue;C.add(n);n=v.readLegacyPointGeometry();if(-128>n.x||n.x>=D+128||-128>n.y||n.y>g+128)continue;const q=+A(v),H=Math.max(0,Math.round(n.x)-r);var a=Math.max(0,Math.round(n.y)-r);const c=Math.min(g,Math.round(n.y)+r),b=Math.min(D,Math.round(n.x)+
r);for(;a<c;a++)for(let h=H;h<b;h++){var e=a*D+h;const u=K(n.x-h,n.y-a,r);e=B[e]+=u*q;e>E&&(E=e)}}return{matrix:B.buffer,max:E}};m.createHeatmapImageData=O;m.createValueFunction=function(v,r){return"function"===typeof v?v:v?"string"===typeof r?D=>-1*+D[v]:D=>+D[v]+r:()=>1};m.createValueFunctionCursor=J;m.drawHeatmap=function(v,r,D,g,z,t){v.canvas.width=v.canvas.height=r;v.clearRect(0,0,r,r);const y=v.getImageData(0,0,r,r);D&&g&&y.data.set(new Uint8ClampedArray(O(r,D,g,z,t)));v.putImageData(y,0,0)};
m.evaluateDensityKernel=K;m.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(v){return G.px2pt(2.4*v)};m.generateGradient=function(v){const r=new Uint8ClampedArray(2048);v=v.filter(({ratio:y})=>0<=y&&1>=y).sort((y,B)=>y.ratio-B.ratio).map(({color:y,ratio:B})=>({color:y,ratio:Math.max(B,.001)}));if(1>v.length)return r;let D=v[0],g=v[0],z=1;const t=w.create();for(let y=0;512>y;y++){const B=(y+.5)/512;for(;B>g.ratio&&z<v.length;)D=g,g=v[z++];N(t,D,g,B);r.set(t,4*y)}return r};m.kernelDensityRadiusPtToGaussianBlurRadiusPx=
function(v){return G.pt2px(v)/2.4};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec4f64":function(){define(["exports"],function(m){function k(){return[0,0,0,0]}function G(C){return[C[0],C[1],C[2],C[3]]}function p(C,n,a,e){return[C,n,a,e]}function w(C){const n=k(),a=Math.min(4,C.length);for(let e=0;e<a;++e)n[e]=C[e];return n}function N(C,n){return new Float64Array(C,n,4)}function O(){return k()}function K(){return[1,1,1,1]}function J(){return[1,
0,0,0]}function v(){return[0,1,0,0]}function r(){return[0,0,1,0]}function D(){return[0,0,0,1]}const g=k(),z=K(),t=J(),y=v(),B=r(),E=D(),A=Object.freeze(Object.defineProperty({__proto__:null,create:k,clone:G,fromValues:p,fromArray:w,createView:N,zeros:O,ones:K,unitX:J,unitY:v,unitZ:r,unitW:D,ZEROS:g,ONES:z,UNIT_X:t,UNIT_Y:y,UNIT_Z:B,UNIT_W:E},Symbol.toStringTag,{value:"Module"}));m.ONES=z;m.UNIT_W=E;m.UNIT_X=t;m.UNIT_Y=y;m.UNIT_Z=B;m.ZEROS=g;m.clone=G;m.create=k;m.createView=N;m.fromArray=w;m.fromValues=
p;m.ones=K;m.unitW=D;m.unitX=J;m.unitY=v;m.unitZ=r;m.vec4f64=A;m.zeros=O})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(m,k,G){function p(a){return null==a||"string"===typeof a&&!a?"\x3cNull\x3e":a}function w(a){const e=null!=a.minValue||null!=a.maxValue,l=!!a.sqlExpression&&a.supportsSQLExpression;return!(null!=a.normalizationField||null!=a.normalizationType)&&!e&&!l}function N(a){const {values:e,useSampleStdDev:l,
supportsNullCount:q}=a;var H=Number.POSITIVE_INFINITY;let c=Number.NEGATIVE_INFINITY,b=null,h=null;var u=null;let F=null,I=0;const L=null==a.minValue?-Infinity:a.minValue,P=null==a.maxValue?Infinity:a.maxValue;for(const Q of e)Number.isFinite(Q)?Q>=L&&Q<=P&&(b+=Q,H=Math.min(H,Q),c=Math.max(c,Q),I++):"string"===typeof Q&&I++;if(I&&null!=b){h=b/I;u=0;for(const Q of e)Number.isFinite(Q)&&Q>=L&&Q<=P&&(u+=(Q-h)**2);F=l?1<I?u/(I-1):0:0<I?u/I:0;u=Math.sqrt(F)}else c=H=null;H={avg:h,count:I,max:c,min:H,stddev:u,
sum:b,variance:F};q&&(H.nullcount=e.length-I);a.percentileParams&&(H.median=O(e,a.percentileParams));return H}function O(a,e){const {fieldType:l,value:q,orderBy:H,isDiscrete:c}=e,b=K(l,"desc"===H);a=[...a].filter(I=>null!=I).sort((I,L)=>b(I,L));if(0===a.length)return null;if(0>=q)return a[0];if(1<=q)return a[a.length-1];var h=(a.length-1)*q,u=Math.floor(h);e=u+1;h%=1;u=a[u];const F=a[e];return e>=a.length||c||"string"===typeof u||"string"===typeof F?u:u*(1-h)+F*h}function K(a,e){const l=e?1:-1,q=
v(e),H=J(e);if(!a||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...C].includes(a))return(c,b)=>"number"===typeof c&&"number"===typeof b?q(c,b):"string"===typeof c&&"string"===typeof b?H(c,b):l;if("esriFieldTypeDate"===a)return(c,b)=>{c=(new Date(c)).getTime();b=(new Date(b)).getTime();return isNaN(c)||isNaN(b)?l:q(c,b)};if(C.has(a))return(c,b)=>q(c,b);if("esriFieldTypeString"===a)return(c,b)=>H(c,b);if("esriFieldTypeGUID"===a||"esriFieldTypeGlobalID"===a){const c=
J(e);return(b,h)=>c(r(b),r(h))}return e?(c,b)=>1:(c,b)=>-1}function J(a){return a?(e,l)=>{e=e?.toUpperCase();l=l?.toUpperCase();return e>l?-1:e<l?1:0}:(e,l)=>{e=e?.toUpperCase();l=l?.toUpperCase();return e<l?-1:e>l?1:0}}function v(a){return a?(e,l)=>l-e:(e,l)=>e-l}function r(a){return a.substr(24,12)+a.substr(19,4)+a.substr(16,2)+a.substr(14,2)+a.substr(11,2)+a.substr(9,2)+a.substr(6,2)+a.substr(4,2)+a.substr(2,2)+a.substr(0,2)}function D(a){return"coded-value"!==a?.type?[]:a.codedValues.map(e=>e.code)}
function g(a,e){const l=t({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||5});a=z(a,e.minValue,e.maxValue);return G.createGenerateRendererClassBreaks({definition:l,values:a,normalizationTotal:e.normalizationTotal})}function z(a,e,l){e=null==e?-Infinity:e;l=null==l?Infinity:l;return a.filter(q=>Number.isFinite(q)&&q>=e&&q<=l)}function t(a){const e=
a.field,l=a.classificationMethod||"equal-interval",q=a.normalizationType,H=a.normalizationField,c=new k;c.classificationField=e;c.breakCount=a.breakCount;c.classificationMethod=l;c.standardDeviationInterval="standard-deviation"===l?a.standardDeviationInterval||1:void 0;c.normalizationType=q;c.normalizationField="field"===q?H:void 0;return c}function y(a,e){const {field:l,classificationMethod:q,standardDeviationInterval:H,normalizationType:c,normalizationField:b,normalizationTotal:h,minValue:u,maxValue:F}=
e,I=e.numBins||10;let L=e=null,P=null;q&&"equal-interval"!==q||c?({classBreaks:a}=g(a,{field:l,normalizationType:c,normalizationField:b,normalizationTotal:h,classificationMethod:q,standardDeviationInterval:H,minValue:u,maxValue:F,numClasses:I}),e=a[0].minValue,L=a[a.length-1].maxValue,P=a.map(Q=>[Q.minValue,Q.maxValue])):(null!=u&&null!=F?(e=u,L=F):(a=N({values:a,minValue:u,maxValue:F,useSampleStdDev:!c,supportsNullCount:w({normalizationType:c,normalizationField:b,minValue:u,maxValue:F})}),e=a.min,
L=a.max),P=E(e,L,I));return{min:e,max:L,intervals:P}}function B(a,e){let l=-1;for(let q=a.length-1;0<=q;q--)if(e>=a[q][0]){l=q;break}return l}function E(a,e,l){const q=(e-a)/l,H=[];let c;for(let b=1;b<=l;b++)c=a+q,c=Number(c.toFixed(16)),H.push([a,b===l?e:c]),a=c;return H}const A=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,C=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),n="min max avg stddev count sum variance nullcount median".split(" ");m.calculateClassBreaks=
g;m.calculateHistogram=function(a,e){const {min:l,max:q,intervals:H}=y(a,e),c=H.map((b,h)=>({minValue:H[h][0],maxValue:H[h][1],count:0}));for(const b of a)null!=b&&b>=l&&b<=q&&(a=B(H,b),-1<a&&c[a].count++);return{bins:c,minValue:l,maxValue:q,normalizationTotal:e.normalizationTotal}};m.calculatePercentile=O;m.calculateStatistics=N;m.calculateStringStatistics=function(a){const e=a.returnDistinct?[...(new Set(a.values))]:a.values,l=e.filter(H=>null!=H).length,q={count:l};a.supportsNullCount&&(q.nullcount=
e.length-l);a.percentileParams&&(q.median=O(e,a.percentileParams));return q};m.calculateUniqueValuesCount=function(a){const e={};for(let l of a){if(null==l||"string"===typeof l&&""===l.trim())l=null;null==e[l]?e[l]={count:1,data:l}:e[l].count++}return{count:e}};m.createClassBreaksDefinition=t;m.createUVResult=function(a,e,l,q){a=a.count;const H=[];if(l&&e){l=[];var c=D(e[0]);for(const b of c)if(e[1]){c=D(e[1]);for(const h of c)if(e[2]){c=D(e[2]);for(const u of c)l.push(`${p(b)}${q}${p(h)}${q}${p(u)}`)}else l.push(`${p(b)}${q}${p(h)}`)}else l.push(b);
for(const b of l)a.hasOwnProperty(b)||(a[b]={data:b,count:0})}for(const b in a)e=a[b],H.push({value:e.data,count:e.count,label:e.label});return{uniqueValueInfos:H}};m.getAttributeComparator=K;m.getEqualIntervalBins=E;m.getNormalizedValue=function(a,e,l,q){let H=null;switch(e){case "log":0!==a&&(H=Math.log(a)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(q)&&0!==q&&(H=a/q*100);break;case "field":Number.isFinite(l)&&0!==l&&(H=a/l);break;case "natural-log":0<a&&(H=Math.log(a));break;case "square-root":0<
a&&(H=a**.5)}return H};m.isNullCountSupported=w;m.processNullValue=p;m.processSummaryStatisticsResult=function(a,e){let l;for(l in a)n.includes(l)&&(Number.isFinite(a[l])||(a[l]=null));if(!e)return a;["avg","stddev","variance"].forEach(q=>{null!=a[q]&&(a[q]=Math.ceil(a[q]))});return a};m.resolveCBResult=function(a,e){let l=a.classBreaks;const q=l[0].minValue,H=l[l.length-1].maxValue,c="standard-deviation"===e;l=l.map(b=>{const h=b.label;b={minValue:b.minValue,maxValue:b.maxValue,label:h};if(c&&h){const u=
h.match(A).map(F=>+F.trim());2===u.length?(b.minStdDev=u[0],b.maxStdDev=u[1],0>u[0]&&0<u[1]&&(b.hasAvg=!0)):1===u.length&&(h.includes("\x3c")?(b.minStdDev=null,b.maxStdDev=u[0]):h.includes("\x3e")&&(b.minStdDev=u[0],b.maxStdDev=null))}return b});return{minValue:q,maxValue:H,classBreakInfos:l,normalizationTotal:a.normalizationTotal}};m.statisticTypes=n;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(m,k,G,p,w,N,O,K){w=new G.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});G=new G.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});K=function(J){function v(){var r=J.apply(this,arguments)||this;r.breakCount=null;r.classificationField=
null;r.classificationMethod=null;r.normalizationField=null;r.normalizationType=null;r.type="class-breaks-definition";return r}m._inheritsLoose(v,J);m._createClass(v,[{key:"standardDeviationInterval",set:function(r){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",r)}},{key:"definedInterval",set:function(r){"defined-interval"===this.classificationMethod&&this._set("definedInterval",r)}}]);return v}(K);k.__decorate([p.property({json:{write:!0}})],K.prototype,"breakCount",
void 0);k.__decorate([p.property({json:{write:!0}})],K.prototype,"classificationField",void 0);k.__decorate([p.property({type:String,json:{read:w.read,write:w.write}})],K.prototype,"classificationMethod",void 0);k.__decorate([p.property({json:{write:!0}})],K.prototype,"normalizationField",void 0);k.__decorate([p.property({json:{read:G.read,write:G.write}})],K.prototype,"normalizationType",void 0);k.__decorate([p.property({value:null,json:{write:!0}})],K.prototype,"standardDeviationInterval",null);
k.__decorate([p.property({value:null,json:{write:!0}})],K.prototype,"definedInterval",null);k.__decorate([p.property()],K.prototype,"type",void 0);return K=k.__decorate([O.subclass("esri.rest.support.ClassBreaksDefinition")],K)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(m,k,G,p,w,N,O,K,J,v){G=new G.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});p=function(r){function D(){var g=r.apply(this,arguments)||this;g.baseSymbol=null;g.colorRamp=null;g.type=null;return g}m._inheritsLoose(D,r);return D}(p.JSONSupport);k.__decorate([w.property({type:v,json:{write:!0}})],p.prototype,"baseSymbol",void 0);k.__decorate([w.property({types:J.types,json:{read:{reader:J.fromJSON},write:!0}})],p.prototype,"colorRamp",void 0);k.__decorate([w.property({json:{read:G.read,
write:G.write}})],p.prototype,"type",void 0);return p=k.__decorate([K.subclass("esri.rest.support.ClassificationDefinition")],p)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(m,k,G,p){G={key:"type",base:G,typeMap:{algorithmic:k,multipart:p}};m.fromJSON=function(w){return w&&w.type?"algorithmic"===w.type?k.fromJSON(w):"multipart"===w.type?p.fromJSON(w):null:null};m.types=G;Object.defineProperties(m,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(m,k,G,p,w,N,O,K,J){var v;J=v=function(r){function D(g){g=r.call(this,g)||this;g.algorithm=null;
g.fromColor=null;g.toColor=null;g.type="algorithmic";return g}m._inheritsLoose(D,r);D.prototype.clone=function(){return new v({fromColor:p.clone(this.fromColor),toColor:p.clone(this.toColor),algorithm:this.algorithm})};return D}(J);k.__decorate([O.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],J.prototype,"algorithm",void 0);k.__decorate([w.property({type:G,json:{type:[N.Integer],write:!0}})],J.prototype,"fromColor",void 0);k.__decorate([w.property({type:G,
json:{type:[N.Integer],write:!0}})],J.prototype,"toColor",void 0);k.__decorate([w.property({type:["algorithmic"]})],J.prototype,"type",void 0);return J=v=k.__decorate([K.subclass("esri.rest.support.AlgorithmicColorRamp")],J)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(m,k,G){m.enumeration=function(p,w={}){p=p instanceof k.JSONMap?p:new k.JSONMap(p,w);p={type:w?.ignoreUnknown??!0?p.apiValues:String,json:{type:p.jsonValues,
read:w?.readOnly?!1:{reader:p.read},write:{writer:p.write}}};void 0!==w?.readOnly&&(p.readOnly=!!w.readOnly);void 0!==w?.default&&(p.json.default=w.default);void 0!==w?.name&&(p.json.name=w.name);return G.property(p)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,k,G,p,w,N,O){G=function(K){function J(v){v=K.call(this,v)||this;v.type=null;return v}m._inheritsLoose(J,K);return J}(G.JSONSupport);k.__decorate([p.property({readOnly:!0,json:{read:!1,write:!0}})],G.prototype,"type",void 0);return G=k.__decorate([O.subclass("esri.rest.support.ColorRamp")],G)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(m,k,G,p,w,N,O,K){var J;w=J=function(v){function r(D){D=v.call(this,D)||this;D.colorRamps=null;D.type="multipart";return D}m._inheritsLoose(r,v);r.prototype.clone=function(){return new J({colorRamps:G.clone(this.colorRamps)})};return r}(K);k.__decorate([p.property({type:[O],json:{write:!0}})],w.prototype,"colorRamps",void 0);k.__decorate([p.property({type:["multipart"]})],w.prototype,"type",void 0);return w=J=k.__decorate([N.subclass("esri.rest.support.MultipartColorRamp")],w)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(m,k,G,p,w,N,O,K,J,v){p=new p.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let r=0;w=function(D){function g(t){t=D.call(this,t)||this;t.id=`sym${r++}`;t.type=null;t.color=new G([0,0,0,1]);return t}
m._inheritsLoose(g,D);var z=g.prototype;z.readColor=function(t){return t&&null!=t[0]?[t[0],t[1],t[2],t[3]/255]:t};z.collectRequiredFields=function(){var t=m._asyncToGenerator(function*(y,B){});return function(y,B){return t.apply(this,arguments)}}();z.hash=function(){return JSON.stringify(this.toJSON())};z.clone=function(){};return g}(w.JSONSupport);k.__decorate([N.property({type:p.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p.write}}})],w.prototype,"type",void 0);k.__decorate([N.property({type:G,
json:{write:{allowNull:!0}}})],w.prototype,"color",void 0);k.__decorate([J.reader("color")],w.prototype,"readColor",null);return w=k.__decorate([v.subclass("esri.symbols.Symbol")],w)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(m,k){function G(g){const {classificationMethod:z,breakCount:t,normalizationType:y,definedInterval:B}=g.definition,E=[];var A=g.values;if(0===A.length)return[];A=A.sort((q,H)=>q-H);var C=A[0],n=A[A.length-1];if("equal-interval"===
z)if(A.length>=t){A=(n-C)/t;g=C;for(var a=1;a<t;a++){var e=Number((C+a*A).toFixed(6));E.push({minValue:g,maxValue:e,label:p(g,e,y)});g=e}E.push({minValue:g,maxValue:n,label:p(g,n,y)})}else A.forEach(q=>{E.push({minValue:q,maxValue:q,label:p(q,q,y)})});else if("natural-breaks"===z){A=w(A);g=N(A.uniqueValues,g.valueFrequency||A.valueFrequency,t);for(a=1;a<t;a++)A.uniqueValues.length>a&&(e=Number(A.uniqueValues[g[a]].toFixed(6)),E.push({minValue:C,maxValue:e,label:p(C,e,y)}),C=e);E.push({minValue:C,
maxValue:n,label:p(C,n,y)})}else if("quantile"===z)if(A.length>=t&&C!==n){g=Math.ceil(A.length/t);a=0;for(e=1;e<t;e++){var l=g+a-1;l>A.length&&(l=A.length-1);0>l&&(l=0);E.push({minValue:C,maxValue:A[l],label:p(C,A[l],y)});C=A[l];a+=g;g=Math.ceil((A.length-a)/(t-e))}E.push({minValue:C,maxValue:n,label:p(C,n,y)})}else for(n=-1,C=0;C<A.length;C++)g=A[C],g!==n&&(n=g,E.push({minValue:n,maxValue:g,label:p(n,g,y)}),n=g);else if("standard-deviation"===z)if(g=J(A),a=v(A,g),0===a)E.push({minValue:A[0],maxValue:A[0],
label:p(A[0],A[0],y)});else{A=K(C,n,t,g,a)*a;a=0;for(e=t;1<=e;e--)l=Number((g-(e-.5)*A).toFixed(6)),E.push({minValue:C,maxValue:l,label:p(C,l,y)}),C=l,a++;e=Number((g+.5*A).toFixed(6));E.push({minValue:C,maxValue:e,label:p(C,e,y)});C=e;a++;for(l=1;l<=t;l++)e=a===2*t?n:Number((g+(l+.5)*A).toFixed(6)),E.push({minValue:C,maxValue:e,label:p(C,e,y)}),C=e,a++}else if("defined-interval"===z){if(!B)return E;n=A[0];A=A[A.length-1];C=Math.ceil((A-n)/B);g=n;for(a=1;a<C;a++)e=Number((n+a*B).toFixed(6)),E.push({minValue:g,
maxValue:e,label:p(g,e,y)}),g=e;E.push({minValue:g,maxValue:A,label:p(g,A,y)})}return E}function p(g,z,t){let y=null;return y=g===z?t&&"percent-of-total"===t?g+"%":g.toString():t&&"percent-of-total"===t?g+"% - "+z+"%":g+" - "+z}function w(g){const z=[],t=[];let y=Number.MIN_VALUE,B=1,E=-1;for(let A=0;A<g.length;A++){const C=g[A];C===y?(B++,t[E]=B):null!==C&&(z.push(C),y=C,B=1,t.push(B),E++)}return{uniqueValues:z,valueFrequency:t}}function N(g,z,t){var y=g.length;const B=[];t>y&&(t=y);for(var E=0;E<
t;E++)B.push(Math.round(E*y/t-1));B.push(y-1);E=O(B,g,z,t);y=E.mean;E=E.sdcm;var A=t,C=0,n=0;let a=0,e=0,l=!0;for(let H=0;2>H&&l;H++){0===H&&(l=!1);for(var q=0;q<A-1;q++)for(;B[q+1]+1!==B[q+2];)if(B[q+1]+=1,C=r(q,B,g,z),a=C.sbMean,C=C.sbSdcm,n=r(q+1,B,g,z),e=n.sbMean,n=n.sbSdcm,C+n<E[q]+E[q+1])E[q]=C,E[q+1]=n,y[q]=a,y[q+1]=e,l=!0;else{--B[q+1];break}for(q=A-1;0<q;q--)for(;B[q]!==B[q-1]+1;)if(--B[q],C=r(q-1,B,g,z),a=C.sbMean,C=C.sbSdcm,n=r(q,B,g,z),e=n.sbMean,n=n.sbSdcm,C+n<E[q-1]+E[q])E[q-1]=C,E[q]=
n,y[q-1]=a,y[q]=e,l=!0;else{B[q]+=1;break}}l&&(E=O(B,g,z,t));return B}function O(g,z,t,y){let B=[];var E=[],A=[];let C=0;const n=[],a=[];for(var e=0;e<y;e++){var l=r(e,g,z,t);n.push(l.sbMean);a.push(l.sbSdcm);C+=a[e]}l=C;for(e=!0;e||C<l;){e=!1;B=[];for(E=0;E<y;E++)B.push(g[E]);for(A=0;A<y;A++)for(l=g[A]+1;l<=g[A+1];l++)if(E=z[l],0<A&&l!==g[A+1]&&Math.abs(E-n[A])>Math.abs(E-n[A-1]))g[A]=l;else if(A<y-1&&g[A]!==l-1&&Math.abs(E-n[A])>Math.abs(E-n[A+1])){g[A+1]=l-1;break}l=C;C=0;E=[];A=[];for(let q=0;q<
y;q++){E.push(n[q]);A.push(a[q]);const H=r(q,g,z,t);n[q]=H.sbMean;a[q]=H.sbSdcm;C+=a[q]}}if(C>l){for(z=0;z<y;z++)g[z]=B[z],n[z]=E[z],a[z]=A[z];C=l}return{mean:n,sdcm:a}}function K(g,z,t,y,B){g=Math.max(y-g,z-y)/B/t;return 1<=g?1:.5<=g?.5:.25}function J(g){let z=0;for(let t=0;t<g.length;t++)z+=g[t];return z/=g.length}function v(g,z){let t=0;for(let y=0;y<g.length;y++){const B=g[y];t+=(B-z)*(B-z)}t/=g.length;return Math.sqrt(t)}function r(g,z,t,y){var B=0,E=0;for(var A=z[g]+1;A<=z[g+1];A++){const C=
y[A];B+=t[A]*C;E+=C}0>=E&&D.warn("Exception in Natural Breaks calculation");B/=E;E=0;for(A=z[g]+1;A<=z[g+1];A++)E+=y[A]*(t[A]-B)**2;return{sbMean:B,sbSdcm:E}}const D=k.getLogger("esri.rest.support.generateRendererUtils");m.createGenerateRendererClassBreaks=function(g){const {normalizationTotal:z}=g;return{classBreaks:G(g),normalizationTotal:z}};m.createGenerateRendererUniqueValues=function(g){g=w(g);const z=[],t=g.uniqueValues.length;for(let y=0;y<t;y++){const B=g.uniqueValues[y];z.push({value:B,
count:g.valueFrequency[y],label:B.toString()})}return{uniqueValues:z}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define(["exports","../../../chunks/_rollupPluginBabelHelpers","./utils","../../../statistics/utils"],function(m,k,G,p){function w(){w=k._asyncToGenerator(function*(v){const {attribute:r,features:D}=v,{normalizationType:g,normalizationField:z,minValue:t,maxValue:y,fieldType:B}=r;v=yield G.getDataValues({field:r.field,valueExpression:r.valueExpression,normalizationType:g,normalizationField:z,normalizationTotal:r.normalizationTotal,viewInfoParams:r.viewInfoParams,fieldInfos:r.fieldInfos},D);const E=
p.isNullCountSupported({normalizationType:g,normalizationField:z,minValue:t,maxValue:y}),A={value:.5,fieldType:B};v="esriFieldTypeString"===B?p.calculateStringStatistics({values:v,supportsNullCount:E,percentileParams:A}):p.calculateStatistics({values:v,minValue:t,maxValue:y,useSampleStdDev:!g,supportsNullCount:E,percentileParams:A});return p.processSummaryStatisticsResult(v,"esriFieldTypeDate"===B)});return w.apply(this,arguments)}function N(){N=k._asyncToGenerator(function*(v){const {attribute:r,
features:D}=v;v=yield G.getDataValues({field:r.field,field2:r.field2,field3:r.field3,fieldDelimiter:r.fieldDelimiter,valueExpression:r.valueExpression,viewInfoParams:r.viewInfoParams,fieldInfos:r.fieldInfos},D);v=p.calculateUniqueValuesCount(v);return p.createUVResult(v,r.domains,r.returnAllCodedValues,r.fieldDelimiter)});return N.apply(this,arguments)}function O(){O=k._asyncToGenerator(function*(v){const {attribute:r,features:D}=v,{field:g,normalizationType:z,normalizationField:t,normalizationTotal:y,
classificationMethod:B}=r;v=yield G.getDataValues({field:g,valueExpression:r.valueExpression,normalizationType:z,normalizationField:t,normalizationTotal:y,viewInfoParams:r.viewInfoParams,fieldInfos:r.fieldInfos},D);v=p.calculateClassBreaks(v,{field:g,normalizationType:z,normalizationField:t,normalizationTotal:y,classificationMethod:B,standardDeviationInterval:r.standardDeviationInterval,numClasses:r.numClasses,minValue:r.minValue,maxValue:r.maxValue});return p.resolveCBResult(v,B)});return O.apply(this,
arguments)}function K(){K=k._asyncToGenerator(function*(v){const {attribute:r,features:D}=v,{field:g,normalizationType:z,normalizationField:t,normalizationTotal:y,classificationMethod:B}=r;v=yield G.getDataValues({field:g,valueExpression:r.valueExpression,normalizationType:z,normalizationField:t,normalizationTotal:y,viewInfoParams:r.viewInfoParams,fieldInfos:r.fieldInfos},D);return p.calculateHistogram(v,{field:g,normalizationType:z,normalizationField:t,normalizationTotal:y,classificationMethod:B,
standardDeviationInterval:r.standardDeviationInterval,numBins:r.numBins,minValue:r.minValue,maxValue:r.maxValue})});return K.apply(this,arguments)}function J(){J=k._asyncToGenerator(function*(v){const {attribute:r,features:D}=v,{field:g,radius:z,fieldOffset:t,transform:y,spatialReference:B,size:E}=r;v=G.quantizeFeatures(D,y,B,E);const {count:A,min:C,max:n,mean:a,stdDev:e}=G.calculateHeatmapStats(v,z,t,g,E[0],E[1]);return{count:A,min:C,max:n,avg:a,stddev:e}});return J.apply(this,arguments)}m.classBreaks=
function(v){return O.apply(this,arguments)};m.heatmapStatistics=function(v){return J.apply(this,arguments)};m.histogram=function(v){return K.apply(this,arguments)};m.summaryStatistics=function(v){return w.apply(this,arguments)};m.uniqueValues=function(v){return N.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});