// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ./support/utils ../support/binningUtils ../support/utils ../support/adapters/support/layerUtils".split(" "),function(n,g,q,p,r,t,b){function u(a){return h.apply(this,arguments)}function h(){h=n._asyncToGenerator(function*(a){if(!(a&&a.layer&&a.attributes))throw new g("summary-statistics-for-attributes:missing-parameters","'layer' and 'attributes' parameters are required");if(a.attributes.some(v=>!!v.valueExpression)&&
!a.view)throw new g("summary-statistics-for-attributes:missing-parameters","View is required when 'valueExpression' is specified in attributes");a.forBinning&&r.verifyBinningParams(a,"summary-statistics-for-attributes");const {layer:k,...d}=a;var e=[b.LayerType.CSVLayer,b.LayerType.FeatureLayer,b.LayerType.OGCFeatureLayer,b.LayerType.GeoJSONLayer,b.LayerType.WFSLayer],c=a.forBinning?b.binningCapableLayerTypes:e;e=b.createLayerAdapter(k,c,a.forBinning);a={layerAdapter:e,...d};a.includeZeros=null==
a.includeZeros||a.includeZeros;a.includeNegatives=null==a.includeNegatives||a.includeNegatives;if(!e)throw new g("summary-statistics-for-attributes:invalid-parameters","'layer' must be one of these types: "+b.getLayerTypeLabels(c).join(", "));c=a.view;var l=q.isSome(a.signal)?{signal:a.signal}:null;yield Promise.all([c&&c.when(),e.load(l)]);c=[];for(var f of a.attributes)l=yield t.getFieldsList({field:f.field,valueExpression:f.valueExpression}),Array.prototype.push.apply(c,l);if(f=p.verifyBasicFieldValidity(e,
c,"summary-statistics-for-attributes:invalid-parameters"))throw f;return a});return h.apply(this,arguments)}function m(){m=n._asyncToGenerator(function*(a){const {layerAdapter:k,...d}=yield u(a);a=p.getSumOfAttributesExpr(d.attributes,d.includeZeros,d.includeNegatives);return k.summaryStatistics({valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,view:d.view,signal:d.signal})});return m.apply(this,arguments)}return function(a){return m.apply(this,arguments)}});