// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/AggregateGraphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./Graphic ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass".split(" "),function(g,m,h,n,B,z,y){h=function(k){function t(){var x=k.apply(this,arguments)||this;x.isAggregate=!0;return x}g._inheritsLoose(t,k);var q=t.prototype;q.getEffectivePopupTemplate=function(x){return this.popupTemplate?this.popupTemplate:
(x=this.sourceLayer&&this.sourceLayer.featureReduction)&&"popupTemplate"in x&&x.popupEnabled?x.popupTemplate:null};q.getObjectId=function(){return this.attributes.aggregateId};return t}(h);m.__decorate([n.property({type:Boolean})],h.prototype,"isAggregate",void 0);return h=m.__decorate([y.subclass("esri.AggregateGraphic")],h)})},"esri/layers/effects/FeatureEffectView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/has ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./EffectView".split(" "),
function(g,m,h,n,B,z,y,k,t,q){h=function(x){function l(c){var f=x.call(this,c)||this;f._filter=null;f.duration=n("mapview-transitions-duration");f._excludedEffectView=new q.EffectView(c);f._includedEffectView=new q.EffectView(c);return f}g._inheritsLoose(l,x);var d=l.prototype;d.transitionStep=function(c,f){this._set("scale",f);this.transitioning?(this._includedEffectView.transitionStep(c,f),this._excludedEffectView.transitionStep(c,f),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=
f,this._includedEffectView.scale=f)};d.endTransitions=function(){this._includedEffectView.endTransitions();this._excludedEffectView.endTransitions();this._filter=null};d._transitionTo=function(c){const f=this._get("featureEffect");c=B.unwrap(c);const p=B.unwrap(c?.includedEffect),C=B.unwrap(c?.excludedEffect),E=this._includedEffectView.canTransitionTo(p)&&this._excludedEffectView.canTransitionTo(C);this._includedEffectView.effect=p;this._excludedEffectView.effect=C;this._set("featureEffect",c);this._filter=
c?.filter||f?.filter||null;E||this.endTransitions()};g._createClass(l,[{key:"excludedEffects",get:function(){return this._excludedEffectView.effects}},{key:"featureEffect",set:function(c){this._get("featureEffect")!==c&&this._transitionTo(c)}},{key:"filter",get:function(){return this._filter||B.unwrap(this.featureEffect)?.filter||null}},{key:"hasEffects",get:function(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}},{key:"includedEffects",get:function(){return this._includedEffectView.effects}},
{key:"scale",set:function(c){this._set("scale",c);this._excludedEffectView.scale=c;this._includedEffectView.scale=c}},{key:"transitioning",get:function(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}}]);return l}(h);m.__decorate([z.property()],h.prototype,"_filter",void 0);m.__decorate([z.property()],h.prototype,"_excludedEffectView",void 0);m.__decorate([z.property()],h.prototype,"_includedEffectView",void 0);m.__decorate([z.property()],h.prototype,"duration",
void 0);m.__decorate([z.property()],h.prototype,"excludedEffects",null);m.__decorate([z.property()],h.prototype,"featureEffect",null);m.__decorate([z.property()],h.prototype,"filter",null);m.__decorate([z.property()],h.prototype,"hasEffects",null);m.__decorate([z.property()],h.prototype,"includedEffects",null);m.__decorate([z.property({value:0})],h.prototype,"scale",null);m.__decorate([z.property()],h.prototype,"transitioning",null);return h=m.__decorate([t.subclass("esri.layers.effects.FeatureEffectView")],
h)})},"esri/rest/support/AggregateFeatureSet":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../AggregateGraphic ../../geometry ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./FeatureSet ../../geometry/SpatialReference".split(" "),function(g,m,h,n,B,z,y,k,t,q,x,l){n=function(d){function c(){var f=
d.apply(this,arguments)||this;f.features=[];return f}g._inheritsLoose(c,d);c.prototype.readFeatures=function(f,p){p=l.fromJSON(p.spatialReference);const C=[];for(let H=0;H<f.length;H++){var E=f[H];const A=h.fromJSON(E);var J=E.geometry&&E.geometry.spatialReference;B.isSome(A.geometry)&&!J&&(A.geometry.spatialReference=p);E=E.aggregateGeometries;J=A.aggregateGeometries;if(E&&B.isSome(J))for(const F in J){const N=J[F],L=E[F]?.spatialReference;B.isSome(N)&&!L&&(N.spatialReference=p)}C.push(A)}return C};
return c}(x);m.__decorate([z.property({type:[h],json:{write:!0}})],n.prototype,"features",void 0);m.__decorate([t.reader("features")],n.prototype,"readFeatures",null);return n=m.__decorate([q.subclass("esri.rest.support.AggregateFeatureSet")],n)})},"esri/views/2d/layers/LayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../engine/Container ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(g,m,h,n,B,z,y,k,t,q,x,l,d,c,f){const p=n.ofType({key:"type",base:null,typeMap:{rect:d,path:f,geometry:c}});g.LayerView2DMixin=C=>{C=function(E){function J(){var A=E.apply(this,arguments)||this;A.attached=!1;A.clips=new p;A.lastUpdateId=-1;A.moving=!1;A.updateRequested=!1;A.visibleAtCurrentScale=!1;return A}m._inheritsLoose(J,E);var H=J.prototype;H.initialize=function(){const A=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&A&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new z("layerview:spatial-reference-incompatible",
"The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new l.Container),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([y.watch(()=>this.suspended,F=>{this.container&&(this.container.visible=!F);this.view&&!F&&this.updateRequested&&this.view.requestUpdate()},y.syncAndInitial),y.watch(()=>this.layer?.opacity??1,F=>{this.container&&(this.container.opacity=
F)},y.syncAndInitial),y.watch(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",F=>{this.container&&(this.container.blendMode=F)},y.syncAndInitial),y.watch(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,F=>{this.container&&(this.container.effect=F)},y.syncAndInitial),y.on(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},y.syncAndInitial),y.watch(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?
this.layer.effectiveScaleRange:null}),({scale:F})=>{F=F&&this.isVisibleAtScale(F);F!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",F)},y.syncAndInitial)]),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(F=>{F===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))};H.destroy=function(){this.processDetach();this.updateRequested=!1};H.processAttach=function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&
(this.attach(),this.attached=!0,this.requestUpdate())};H.processDetach=function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)};H.isVisibleAtScale=function(A){const F=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!F)return!0;const {minScale:N,maxScale:L}=F;return(0===N||A<=N)&&(0===L||A>=L)};H.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};H.processUpdate=
function(A){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",A),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(A)))};H.hitTest=function(A,F){return Promise.resolve(null)};H.supportsSpatialReference=function(A){return!0};H.canResume=function(){return this.spatialReferenceSupported?E.prototype.canResume.call(this)?this.visibleAtCurrentScale:!1:!1};H.getSuspendInfo=function(){const A=E.prototype.getSuspendInfo.call(this),F=!this.spatialReferenceSupported,
N=this.visibleAtCurrentScale;F&&(A.spatialReferenceNotSupported=F);N&&(A.outsideScaleRange=N);return A};m._createClass(J,[{key:"spatialReferenceSupported",get:function(){const A=this.view?.spatialReference;return null==A||this.supportsSpatialReference(A)}},{key:"updating",get:function(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this.updatingHandles?.updating)}}]);return J}(C);h.__decorate([k.property()],C.prototype,"attached",
void 0);h.__decorate([k.property({type:p,set(E){E=B.referenceSetter(E,this._get("clips"),p);this._set("clips",E)}})],C.prototype,"clips",void 0);h.__decorate([k.property()],C.prototype,"container",void 0);h.__decorate([k.property()],C.prototype,"moving",void 0);h.__decorate([k.property({readOnly:!0})],C.prototype,"spatialReferenceSupported",null);h.__decorate([k.property({readOnly:!0})],C.prototype,"updateParameters",void 0);h.__decorate([k.property()],C.prototype,"updateRequested",void 0);h.__decorate([k.property()],
C.prototype,"updating",null);h.__decorate([k.property()],C.prototype,"view",void 0);h.__decorate([k.property({readOnly:!0})],C.prototype,"visibleAtCurrentScale",void 0);return C=h.__decorate([x.subclass("esri.views.2d.layers.LayerView2D")],C)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/support/ClipRect":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),
function(g,m,h,n,B,z,y){var k;n=k=function(t){function q(l){l=t.call(this,l)||this;l.type="rect";l.left=null;l.right=null;l.top=null;l.bottom=null;return l}g._inheritsLoose(q,t);var x=q.prototype;x.clone=function(){return new k({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};x.commitVersionProperties=function(){this.commitProperty("left");this.commitProperty("right");this.commitProperty("top");this.commitProperty("bottom")};return q}(y);m.__decorate([h.property({type:[Number,String],
json:{write:!0}})],n.prototype,"left",void 0);m.__decorate([h.property({type:[Number,String],json:{write:!0}})],n.prototype,"right",void 0);m.__decorate([h.property({type:[Number,String],json:{write:!0}})],n.prototype,"top",void 0);m.__decorate([h.property({type:[Number,String],json:{write:!0}})],n.prototype,"bottom",void 0);return n=k=m.__decorate([z.subclass("esri.views.layers.support.ClipRect")],n)})},"esri/views/layers/support/ClipArea":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,m,h,n,B,z,y){h=function(k){function t(){return k.apply(this,arguments)||this}g._inheritsLoose(t,k);g._createClass(t,[{key:"version",get:function(){this.commitVersionProperties();return(this._get("version")||0)+1}}]);return t}(h.JSONSupport);m.__decorate([n.property({readOnly:!0})],h.prototype,"version",null);return h=m.__decorate([y.subclass("esri.views.layers.support.ClipArea")],h)})},"esri/views/layers/support/Geometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea ../../../geometry/Extent ../../../geometry/Polygon".split(" "),
function(g,m,h,n,B,z,y,k,t,q,x,l){var d;h={base:k,key:"type",typeMap:{extent:x,polygon:l}};q=d=function(c){function f(C){C=c.call(this,C)||this;C.type="geometry";C.geometry=null;return C}g._inheritsLoose(f,c);var p=f.prototype;p.clone=function(){return new d({geometry:this.geometry?.clone()??null})};p.commitVersionProperties=function(){this.commitProperty("geometry")};return f}(q);m.__decorate([n.property({types:h,json:{read:t.fromJSON,write:!0}})],q.prototype,"geometry",void 0);return q=d=m.__decorate([y.subclass("esri.views.layers.support.Geometry")],
q)})},"esri/views/layers/support/Path":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),function(g,m,h,n,B,z,y){n=function(k){function t(q){q=k.call(this,q)||this;q.type="path";q.path=[];return q}g._inheritsLoose(t,k);t.prototype.commitVersionProperties=function(){this.commitProperty("path")};
return t}(y);m.__decorate([h.property({type:[[[Number]]],json:{write:!0}})],n.prototype,"path",void 0);return n=m.__decorate([z.subclass("esri.views.layers.support.Path")],n)})},"esri/views/2d/layers/features/tileRenderers":function(){define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers"],function(g,m,h){function n(){n=h._asyncToGenerator(function*(z,y){if(!z)return null;switch(z.type){case "symbol":return new (yield new Promise((k,t)=>g(["./tileRenderers/SymbolTileRenderer"],
q=>k(B(q)),t))).default(y);case "heatmap":return new (yield new Promise((k,t)=>g(["./tileRenderers/HeatmapTileRenderer"],q=>k(B(q)),t))).default(y)}});return n.apply(this,arguments)}const B=z=>Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));m.createOrReuseTileRenderer=function(z,y){return n.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/support/FeatureCommandQueue":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../support/QueueProcessor".split(" "),
function(g,m,h,n,B,z,y,k){function t(d){return d.some(c=>c.globalId)}function q(d){return d.filter(c=>!c.error).map(c=>c.objectId??c.globalId)}function x(d,c){d=new Set(d);for(const f of c.values())d.add(f);return d}function l(d,c){d=new Set(d);for(const f of c.values())d.delete(f);return d}h=function(d){function c(p){p=d.call(this,p)||this;p._hasGlobalIds=!1;return p}g._inheritsLoose(c,d);var f=c.prototype;f.normalizeCtorArgs=function(p){this._queueProcessor=new k.QueueProcessor({concurrency:1,process:p.process});
return{}};f.destroy=function(){this.clear()};f.clear=function(){this._queueProcessor.clear()};f.push=function(p){const C=this._queueProcessor;var E=C.last();switch(p.type){case "update":case "refresh":if(E?.type===p.type)return;C.push(p).finally(()=>this.notifyChange("updating"));break;case "edit":(E="processed-edit"===E?.type?E:null)&&C.popLast();p=this._mergeEdits(E,p);for(const J of p)C.push(J).finally(()=>this.notifyChange("updating"))}this.notifyChange("updating")};f._mergeEdits=function(p,C){const {addedFeatures:E,
deletedFeatures:J,updatedFeatures:H}=C.edits;if(this._hasGlobalIds=this._hasGlobalIds||t(E)||t(H)||t(J))return C=[...E,...H],[p,{type:"processed-edit",edits:{addOrModified:C,removed:J}}];C=new Set(q(p?.edits.addOrModified??[]));p=new Set(q(p?.edits.removed??[]));const A=new Set([...q(E),...q(H)]),F=new Set(q(J));C=Array.from(x(l(C,F),A)).map(N=>({objectId:N}));p=Array.from(x(l(p,A),F)).map(N=>({objectId:N}));return[{type:"processed-edit",edits:{addOrModified:C,removed:p}}]};g._createClass(c,[{key:"updating",
get:function(){return 0<this._queueProcessor.length}}]);return c}(h);m.__decorate([n.property({readOnly:!0})],h.prototype,"updating",null);return h=m.__decorate([y.subclass("esri.views.2d.layers.support.FeatureCommandQueue")],h)})},"esri/views/2d/layers/support/FeatureLayerProxy":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/workers/workers ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(g,m,h,n,B,z,y,k,t){h=function(q){function x(d){d=q.call(this,d)||this;d._startupResolver=n.createResolver();d.isReady=!1;return d}g._inheritsLoose(x,q);var l=x.prototype;l.initialize=function(){this._controller=new AbortController;this.addResolvingPromise(this._startWorker(this._controller.signal))};l.destroy=function(){this._controller.abort();this._connection&&this._connection.close()};l.startup=function(){var d=g._asyncToGenerator(function*(c,f,p,C){yield this.when();var E=this._controller.signal;
E=Array.isArray(p.source)?{transferList:p.source,signal:E}:void 0;c=c.tileInfo.toJSON();yield this._connection.invoke("startup",{service:p,config:f,tileInfo:c,tiles:C},E);this._startupResolver.resolve();this._set("isReady",!0)});return function(c,f,p,C){return d.apply(this,arguments)}}();l.updateTiles=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return n.ignoreAbortErrors(this._connection.invoke("updateTiles",c))});return function(c){return d.apply(this,arguments)}}();
l.update=function(){var d=g._asyncToGenerator(function*(c){c={config:c};yield this._startupResolver.promise;return this._connection.invoke("update",c)});return function(c){return d.apply(this,arguments)}}();l.applyUpdate=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return this._connection.invoke("applyUpdate",c)});return function(c){return d.apply(this,arguments)}}();l.setHighlight=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;
return n.ignoreAbortErrors(this._connection.invoke("controller.setHighlight",c))});return function(c){return d.apply(this,arguments)}}();l.stop=function(){var d=g._asyncToGenerator(function*(){yield this._startupResolver.promise;if(!this.closed)return n.ignoreAbortErrors(this._connection.invoke("stop"))});return function(){return d.apply(this,arguments)}}();l.refresh=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return n.ignoreAbortErrors(this._connection.invoke("controller.refresh",
c))});return function(c){return d.apply(this,arguments)}}();l.querySummaryStatistics=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.querySummaryStatistics",{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryAggregateSummaryStatistics=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateSummaryStatistics",
{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryUniqueValues=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryUniqueValues",{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryAggregateUniqueValues=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateUniqueValues",
{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryClassBreaks=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryClassBreaks",{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryAggregateClassBreaks=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateClassBreaks",
{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryHistogram=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryHistogram",{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryAggregateHistogram=function(){var d=g._asyncToGenerator(function*(c,f,p){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateHistogram",
{query:c.toJSON(),params:f},p)});return function(c,f,p){return d.apply(this,arguments)}}();l.queryFeatures=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryFeatures",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryVisibleFeatures=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryVisibleFeatures",
c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryObjectIds=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryObjectIds",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryFeatureCount=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryFeatureCount",c.toJSON(),f)});return function(c,
f){return d.apply(this,arguments)}}();l.queryExtent=function(){var d=g._asyncToGenerator(function*(c,f){return this._connection.invoke("controller.queryExtent",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryLatestObservations=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryLatestObservations",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryStatistics=
function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return this._connection.invoke("controller.queryStatistics",c)});return function(c){return d.apply(this,arguments)}}();l.queryAggregates=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregates",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryAggregateCount=function(){var d=g._asyncToGenerator(function*(c,
f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateCount",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.queryAggregateIds=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;return this._connection.invoke("controller.queryAggregateIds",c.toJSON(),f)});return function(c,f){return d.apply(this,arguments)}}();l.getObjectId=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;
return this._connection.invoke("controller.getObjectId",c)});return function(c){return d.apply(this,arguments)}}();l.getDisplayId=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return this._connection.invoke("controller.getDisplayId",c)});return function(c){return d.apply(this,arguments)}}();l.getFeatures=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return this._connection.invoke("controller.getFeatures",c)});return function(c){return d.apply(this,
arguments)}}();l.getAggregates=function(){var d=g._asyncToGenerator(function*(){yield this._startupResolver.promise;return this._connection.invoke("controller.getAggregates")});return function(){return d.apply(this,arguments)}}();l.getAggregateValueRanges=function(){var d=g._asyncToGenerator(function*(){yield this._startupResolver.promise;return this._connection.invoke("controller.getAggregateValueRanges")});return function(){return d.apply(this,arguments)}}();l.mapValidDisplayIds=function(){var d=
g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return this._connection.invoke("controller.mapValidDisplayIds",c)});return function(c){return d.apply(this,arguments)}}();l.onEdits=function(){var d=g._asyncToGenerator(function*(c){yield this._startupResolver.promise;return n.ignoreAbortErrors(this._connection.invoke("controller.onEdits",c))});return function(c){return d.apply(this,arguments)}}();l.enableEvent=function(){var d=g._asyncToGenerator(function*(c,f){yield this._startupResolver.promise;
return n.ignoreAbortErrors(this._connection.invoke("controller.enableEvent",{name:c,value:f}))});return function(c,f){return d.apply(this,arguments)}}();l.pauseStream=function(){return n.ignoreAbortErrors(this._connection.invoke("controller.pauseStream"))};l.resumeStream=function(){return n.ignoreAbortErrors(this._connection.invoke("controller.resumeStream"))};l._startWorker=function(){var d=g._asyncToGenerator(function*(c){try{this._connection=yield B.open("Pipeline",{client:this.client,strategy:"dedicated",
signal:c})}catch(f){n.throwIfNotAbortError(f)}});return function(c){return d.apply(this,arguments)}}();g._createClass(x,[{key:"tileRenderer",set:function(d){this.client.tileRenderer=d}},{key:"closed",get:function(){return this._connection.closed}}]);return x}(h.EsriPromise);m.__decorate([z.property()],h.prototype,"isReady",void 0);m.__decorate([z.property({constructOnly:!0})],h.prototype,"client",void 0);m.__decorate([z.property()],h.prototype,"tileRenderer",null);return h=m.__decorate([t.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],
h)})},"esri/views/2d/tiling/TileManager":function(){define(["exports","../../../core/maybe","./TileCoverage","./TileKey"],function(g,m,h,n){let B=function(){function z(k){this._tiles=new Map;this.buffer=0;this.acquireTile=k.acquireTile;this.releaseTile=k.releaseTile;this.tileInfoView=k.tileInfoView;this.buffer=k.buffer}var y=z.prototype;y.destroy=function(){};y.clear=function(){this._tiles.forEach(k=>this._releaseTile(k))};y.tileKeys=function(){const k=[];this._tiles.forEach((t,q)=>k.push(q));return k};
y.update=function(k){k=this.tileInfoView.getTileCoverage(k.state,this.buffer,"closest");const {spans:t,lodInfo:q}=k,{level:x}=q,l=[],d=[],c=new Set,f=new Set;for(const {row:p,colFrom:C,colTo:E}of t)for(let J=C;J<=E;J++){const H=n.getId(x,p,q.normalizeCol(J),q.getWorldForColumn(J)),A=this._getOrAcquireTile(l,H);c.add(H);A.isReady?A.visible=!0:f.add(A.key)}f.forEach(p=>this._addPlaceholders(c,p));this._tiles.forEach(p=>{c.has(p.key.id)||(d.push(p.key.id),this._releaseTile(p))});h.pool.release(k);return{hasMissingTiles:0<
f.size,added:l,removed:d}};y._getOrAcquireTile=function(k,t){if(!this._tiles.has(t)){const q=this.acquireTile(new n(t));k.push(t);this._tiles.set(t,q);q.visible=!1}return this._tiles.get(t)};y._getTile=function(k){return this._tiles.get(k)};y._releaseTile=function(k){this._tiles.delete(k.key.id);this.releaseTile(k)};y._addPlaceholders=function(k,t){const q=this._addPlaceholderChildren(k,t);1E-6>Math.abs(1-q)||this._addPlaceholderParent(k,t)||(this._getTile(t.id).visible=!0)};y._addPlaceholderChildren=
function(k,t){let q=0;this._tiles.forEach(x=>{q+=this._addPlaceholderChild(k,x,t)});return q};y._addPlaceholderChild=function(k,t,q){if(t.key.level<=q.level||!t.hasData||!q.contains(t.key))return 0;t.visible=!0;k.add(t.key.id);return 1/(1<<2*(t.key.level-q.level))};y._addPlaceholderParent=function(k,t){t=t.getParentKey();var q=0;let x=null;for(;m.isSome(t);){if(k.has(t.id))return!0;const l=this._getTile(t.id);if(l?.isReady){for(const d of k)q=this._getTile(d),t.contains(q.key)&&(q.visible=!1);l.visible=
!0;k.add(l.key.id);return!0}l?.hasData&&l.patchCount>q&&(q=l.patchCount,x=l);t=t.getParentKey()}return x?(x.visible=!0,k.add(x.key.id),!0):!1};return z}();g.TileManager=B;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/FeatureLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/commonProperties ../../layers/support/FeatureEffect ../../layers/support/FeatureFilter ../../layers/support/fieldUtils ../../layers/support/floorFilterUtils ../../rest/support/Query ../../support/arcadeOnDemand ./support/popupUtils".split(" "),
function(g,m,h,n,B,z,y,k,t,q,x,l,d,c,f,p,C,E,J){const H=n.getLogger("esri.views.layers.FeatureLayerView");return A=>{A=function(F){function N(...r){r=F.call(this,...r)||this;r._updatingRequiredFieldsPromise=null;r.filter=null;r.timeExtent=null;r.layer=null;r.requiredFields=[];r.view=null;return r}g._inheritsLoose(N,F);var L=N.prototype;L.initialize=function(){this.handles.add([y.watch(()=>{const r=this.layer;return[r?.elevationInfo?.featureExpressionInfo,r&&"displayField"in r?r.displayField:null,
r?.timeInfo,r&&"renderer"in r&&r.renderer,r&&"labelingInfo"in r&&r.labelingInfo,r&&"floorInfo"in r&&r.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),y.syncAndInitial),y.on(()=>this.view?.floors,"change",()=>this._handleRequiredFieldsChange()),y.on(()=>{const r=this.layer;return r&&"sublayers"in r&&r.sublayers},"change",()=>this._handleRequiredFieldsChange())])};L.highlight=function(r){throw Error("missing implementation");};L.createQuery=function(){var r=
{outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};r=B.isSome(this.filter)?this.filter.createQuery(r):new C(r);if("feature"===this.layer.type){const D=p.getFloorFilterClause(this);B.isSome(D)&&(r.where=r.where?`(${r.where}) AND (${D})`:D)}B.isSome(this.timeExtent)&&(r.timeExtent=B.isSome(r.timeExtent)?r.timeExtent.intersection(this.timeExtent):this.timeExtent.clone());return r};L.createAggregateQuery=function(){return new C({outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})};
L.queryFeatures=function(r,D){throw Error("missing implementation");};L.queryObjectIds=function(r,D){throw Error("missing implementation");};L.queryFeatureCount=function(r,D){throw Error("missing implementation");};L.queryExtent=function(r,D){throw Error("missing implementation");};L.fetchPopupFeatures=function(){var r=g._asyncToGenerator(function*(D,v){if(D=this.validateFetchPopupFeatures(v))throw D;return this.fetchClientPopupFeatures(v)});return function(D,v){return r.apply(this,arguments)}}();
L._loadArcadeModules=function(r){if(r.get("expressionInfos.length")||Array.isArray(r.content)&&r.content.some(D=>"expression"===D.type))return E.loadArcade()};L._handleRequiredFieldsChange=function(){const r=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",r);r.then(()=>{this._updatingRequiredFieldsPromise===r&&this._set("_updatingRequiredFieldsPromise",null)})};L._updateRequiredFields=function(){var r=g._asyncToGenerator(function*(){if(this.layer&&this.view){var D="3d"===this.view.type,
{layer:v,layer:{fieldsIndex:M,objectIdField:Q}}=this,O="renderer"in v&&v.renderer,P="orderBy"in v&&v.orderBy,T="featureReduction"in v?v.featureReduction:null,K=new Set;O=yield z.eachAlways([O?O.collectRequiredFields(K,M):null,f.collectLabelingFields(K,v),D?f.collectElevationFields(K,v):null,B.isSome(this.filter)?f.collectFilterFields(K,v,this.filter):null,B.isSome(this.featureEffect)?f.collectFilterFields(K,v,this.featureEffect.filter):null,T?f.collectFeatureReductionFields(K,v,T):null,P?f.collectOrderByInfos(K,
v,P):null]);v.timeInfo&&this.timeExtent&&f.collectFields(K,v.fieldsIndex,[v.timeInfo.startField,v.timeInfo.endField]);"feature"===v.type&&(v.floorInfo&&f.collectFields(K,v.fieldsIndex,[v.floorInfo.floorField]),D&&B.isSome(v.infoFor3D)&&(null==v.globalIdField&&H.error("globalIdField missing on 3DObjectFeatureLayer"),f.collectFields(K,v.fieldsIndex,[v.globalIdField])));"subtype-group"===v.type&&(f.collectField(K,M,v.subtypeField),P=v.sublayers.map(U=>Promise.all([U.renderer?.collectRequiredFields(K,
M),f.collectLabelingFields(K,U)])),yield z.eachAlways(P));for(const U of O)U.error&&H.error(U.error);f.collectField(K,M,Q);D&&"displayField"in v&&v.displayField&&f.collectField(K,M,v.displayField);D=Array.from(K).sort();this._set("requiredFields",D)}});return function(){return r.apply(this,arguments)}}();L.validateFetchPopupFeatures=function(r){if(B.isNone(r))return null;for(const D of r.clientGraphics){const v=D.layer;if("popupEnabled"in v&&!v.popupEnabled)return new h("featurelayerview:fetchPopupFeatures",
"Popups are disabled",{layer:v});if(D.isAggregate){const M="featureReduction"in v?v.featureReduction:null;if(!(M&&"popupTemplate"in M&&M.popupEnabled&&M.popupTemplate))return new h("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:v})}else if("popupTemplate"in v&&!J.getFetchPopupTemplate(v,r))return new h("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:v})}};L.fetchClientPopupFeatures=function(){var r=g._asyncToGenerator(function*(D){const v=
B.isSome(D)?D.clientGraphics:null;if(!v||0===v.length)return[];const M=Array(v.length),Q=new Map,O=yield this.createPopupQuery(D);for(let T=0;T<v.length;T++){const K=v[T];if(K.isAggregate){M[T]=K;continue}var {layer:P}=K;if(!("popupEnabled"in P))continue;const U=f.unpackFieldNames(this.layer.fieldsIndex,O.outFields);P=J.getFetchPopupTemplate(P,D);if(B.isNone(P))continue;const ba=yield this._loadArcadeModules(P);ba&&ba.arcadeUtils.hasGeometryOperations(P)||!f.featureHasFields(U,K)?Q.set(K.getObjectId(),
T):M[T]=K}if("stream"===this.layer.type||0===Q.size)return M.filter(Boolean);O.objectIds=Array.from(Q.keys());try{const T=yield this.layer.queryFeatures(O);for(const K of T.features){const U=Q.get(K.getObjectId());M[U]=K}}catch{}return M.filter(Boolean)});return function(D){return r.apply(this,arguments)}}();L.createPopupQuery=function(){var r=g._asyncToGenerator(function*(D){const v=this.layer.createQuery(),M=new Set;var Q=!1,O=B.isSome(D)&&D.clientGraphics?D.clientGraphics.map(P=>P.layer):[this.layer];
for(const P of O)if("popupEnabled"in P&&(O=J.getFetchPopupTemplate(P,D),!B.isNone(O))){Q=(Q=yield this._loadArcadeModules(O))&&Q.arcadeUtils.hasGeometryOperations(O);Q=!("point"!==this.layer.geometryType&&!Q);O=yield J.getRequiredFields(this.layer,O);for(const T of O)M.add(T)}v.returnGeometry=Q;v.returnZ=Q;v.returnM=Q;v.outFields=Array.from(M);v.outSpatialReference=this.view.spatialReference;"feature"===this.layer.type&&(D=p.getFloorFilterClause(this),B.isSome(D)&&(v.where=v.where?`(${v.where}) AND (${D})`:
D));return v});return function(D){return r.apply(this,arguments)}}();L.canResume=function(){return!F.prototype.canResume.call(this)||B.isSome(this.timeExtent)&&this.timeExtent.isEmpty?!1:!0};g._createClass(N,[{key:"availableFields",get:function(){const {layer:r,layer:{fieldsIndex:D},requiredFields:v}=this;return"outFields"in r&&r.outFields?f.fixFields(D,[...f.unpackFieldNames(D,r.outFields),...v]):f.fixFields(D,v)}},{key:"featureEffect",get:function(){return this.layer&&"featureEffect"in this.layer?
this.layer.featureEffect:null},set:function(r){this._override("featureEffect",r)}},{key:"maximumNumberOfFeatures",get:function(){return 0},set:function(r){H.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")}},{key:"maximumNumberOfFeaturesExceeded",get:function(){return!1}}]);return N}(A);m.__decorate([k.property()],A.prototype,"_updatingRequiredFieldsPromise",void 0);m.__decorate([k.property({readOnly:!0})],A.prototype,"availableFields",null);m.__decorate([k.property({type:d})],
A.prototype,"featureEffect",null);m.__decorate([k.property({type:c})],A.prototype,"filter",void 0);m.__decorate([k.property(l.combinedViewLayerTimeExtentProperty)],A.prototype,"timeExtent",void 0);m.__decorate([k.property()],A.prototype,"layer",void 0);m.__decorate([k.property({type:Number})],A.prototype,"maximumNumberOfFeatures",null);m.__decorate([k.property({readOnly:!0,type:Boolean})],A.prototype,"maximumNumberOfFeaturesExceeded",null);m.__decorate([k.property({readOnly:!0})],A.prototype,"requiredFields",
void 0);m.__decorate([k.property()],A.prototype,"suspended",void 0);m.__decorate([k.property()],A.prototype,"view",void 0);return A=m.__decorate([x.subclass("esri.views.layers.FeatureLayerView")],A)}})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(g){function m(h,n){if(!h?.length)return null;h=h.filter(B=>""!==B).map(B=>`'${B}'`);h.push("''");return`${n} IN (${h.join(",")}) OR ${n} IS NULL`}g.getFloorFilterClause=function(h){const n=h.layer;return"floorInfo"in n&&
n.floorInfo?.floorField&&"floors"in h.view?m(h.view.floors,n.floorInfo.floorField):null};g.getLayerFloorFilterClause=function(h,n){return"floorInfo"in n&&n.floorInfo?.floorField?m(h,n.floorInfo.floorField):null};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/support/popupUtils":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","../../../layers/support/fieldUtils"],function(g,m,h,n){function B(){B=
m._asyncToGenerator(function*(z,y=z.popupTemplate){if(h.isNone(y))return[];const k=yield y.getRequiredFields(z.fieldsIndex);({lastEditInfoEnabled:y}=y);const {objectIdField:t,typeIdField:q,globalIdField:x,relationships:l}=z;if(k.includes("*"))return["*"];y=y?yield n.getFeatureEditFields(z):[];const d=n.fixFields(z.fieldsIndex,[...k,...y]);q&&d.push(q);d&&t&&z.fieldsIndex.has(t)&&!d.includes(t)&&d.push(t);d&&x&&z.fieldsIndex.has(x)&&!d.includes(x)&&d.push(x);l&&l.forEach(c=>{({keyField:c}=c);d&&c&&
z.fieldsIndex.has(c)&&!d.includes(c)&&d.push(c)});return d});return B.apply(this,arguments)}g.getFetchPopupTemplate=function(z,y){return z.popupTemplate?z.popupTemplate:h.isSome(y)&&y.defaultPopupTemplateEnabled&&h.isSome(z.defaultPopupTemplate)?z.defaultPopupTemplate:null};g.getRequiredFields=function(z){return B.apply(this,arguments)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/RefreshableLayerView":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(g,m,h,n,B,z,y,k,t){return q=>{q=function(x){function l(){return x.apply(this,arguments)||this}g._inheritsLoose(l,x);l.prototype.initialize=function(){this.handles.add(B.on(()=>this.layer,"refresh",d=>{this.doRefresh(d.dataChanged).catch(c=>{n.isAbortError(c)||h.getLogger(this.declaredClass).error(c)})}),"RefreshableLayerView")};return l}(q);m.__decorate([z.property()],q.prototype,"layer",void 0);return q=m.__decorate([t.subclass("esri.layers.mixins.RefreshableLayerView")],q)}})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../AggregateGraphic ../../../geometry ../../../Graphic ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../layers/effects/FeatureEffectView ../../../layers/support/FeatureFilter ../../../rest/support/AggregateFeatureSet ../../../rest/support/FeatureSet ../../../rest/support/Query ../engine/webgl/definitions ./LayerView2D ./features/schemaUtils ./features/tileRenderers ./features/support/rendererUtils ./support/clusterUtils ./support/FeatureCommandQueue ./support/FeatureLayerProxy ./support/util ../tiling/TileManager ../../layers/FeatureLayerView ../../layers/LayerView ../../layers/RefreshableLayerView ../../webgl/capabilities ../../../geometry/Extent".split(" "),
function(g,m,h,n,B,z,y,k,t,q,x,l,d,c,f,p,C,E,J,H,A,F,N,L,r,D,v,M,Q,O,P,T,K,U,ba,ja){function ia(Z){return Z&&"openPorts"in Z}n=function(Z){function ca(){var a=Z.apply(this,arguments)||this;a._pipelineIsUpdating=!0;a._commandsQueue=new M({process:b=>{switch(b.type){case "processed-edit":return a._doEdit(b);case "refresh":return a._doRefresh(b.dataChanged);case "update":return a._doUpdate()}}});a._visibilityOverrides=new Set;a._highlightIds=new Map;a._updateHighlight=l.debounce(g._asyncToGenerator(function*(){return a._proxy.setHighlight(Array.from(a._highlightIds.keys()))}));
a._uploadsLocked=!1;a._needsClusterSizeUpdate=!1;a.featureEffectView=new C;a._lastDefinitionExpression=null;return a}g._inheritsLoose(ca,Z);var w=ca.prototype;w.destroy=function(){x.applySome(this._updateClusterSizeTask,a=>a.remove());this._proxy?.destroy();this._commandsQueue.destroy()};w.initialize=function(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()]));this.handles.add([this.on("valueRangesChanged",a=>{this._set("_aggregateValueRanges",a.valueRanges)}),
d.watch(()=>this.featureEffect,a=>{this.featureEffectView.featureEffect=a},d.syncAndInitial)]);this.featureEffectView.endTransitions()};w._initProxy=function(){var a=g._asyncToGenerator(function*(){var b=this.layer;if("isTable"in b&&b.isTable)throw new y("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});const e="capabilities"in b&&b.capabilities.operations.supportsQuery;if(("feature"===b.type||"subtype-group"===b.type)&&!e)throw new y("featurelayerview:query-not-supported",
"layer view requires a layer with query capability",{layer:b});this._proxy&&this._proxy.destroy();b=this._createClientOptions();this._set("_proxy",new Q({client:b}));return this._proxy.when()});return function(){return a.apply(this,arguments)}}();w._initServiceOptions=function(){var a=g._asyncToGenerator(function*(){this._set("_serviceOptions",yield this._createServiceOptions());return this._serviceOptions});return function(){return a.apply(this,arguments)}}();w.highlight=function(a){let b;a instanceof
B?b=[a.getObjectId()]:"number"===typeof a||"string"===typeof a?b=[a]:z.isCollection(a)&&0<a.length?b=a.map(e=>e?.getObjectId()).toArray():Array.isArray(a)&&0<a.length&&(b="number"===typeof a[0]||"string"===typeof a[0]?a:a.map(e=>e?.getObjectId()));b=b?.filter(e=>null!=e);if(!b||!b.length)return{remove:()=>{}};this._addHighlight(b);return{remove:()=>this._removeHighlight(b)}};w.hasHighlight=function(){return!!this._highlightIds.size};w.hitTest=function(){var a=g._asyncToGenerator(function*(b,e){if(!this.tileRenderer)return null;
e=yield this.tileRenderer.hitTest(e);if(0===e.length)return null;const {features:u,aggregates:G}=yield this._proxy.getFeatures(e);return[...G.map(I=>this._createGraphicHit(b,h.fromJSON(I))),...u.map(I=>this._createGraphicHit(b,B.fromJSON(I)))]});return function(b,e){return a.apply(this,arguments)}}();w.queryStatistics=function(){return this._proxy.queryStatistics()};w.querySummaryStatistics=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(b),
e,u)});return function(b,e,u){return a.apply(this,arguments)}}();w.queryAggregateSummaryStatistics=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryAggregateSummaryStatistics(this._cleanUpAggregateQuery(b),e,u)});return function(b,e,u){return a.apply(this,arguments)}}();w.queryUniqueValues=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(b),e,u)});
return function(b,e,u){return a.apply(this,arguments)}}();w.queryAggregateUniqueValues=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryAggregateUniqueValues(this._cleanUpAggregateQuery(b),e,u)});return function(b,e,u){return a.apply(this,arguments)}}();w.queryClassBreaks=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(b),e,u)});return function(b,
e,u){return a.apply(this,arguments)}}();w.queryAggregateClassBreaks=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryAggregateClassBreaks(this._cleanUpAggregateQuery(b),e,u)});return function(b,e,u){return a.apply(this,arguments)}}();w.queryHistogram=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(b),e,u)});return function(b,e,u){return a.apply(this,
arguments)}}();w.queryAggregateHistogram=function(){var a=g._asyncToGenerator(function*(b,e,u){e={...e,scale:this.view.scale};return this._proxy.queryAggregateHistogram(this._cleanUpAggregateQuery(b),e,u)});return function(b,e,u){return a.apply(this,arguments)}}();w.queryFeatures=function(a,b){return this.queryFeaturesJSON(a,b).then(e=>{e=H.fromJSON(e);e.features.forEach(u=>this._setLayersForFeature(u));return e})};w.queryVisibleFeatures=function(a,b){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(a),
b).then(e=>{e=H.fromJSON(e);e.features.forEach(u=>this._setLayersForFeature(u));return e})};w.queryAggregates=function(){var a=g._asyncToGenerator(function*(b,e){b=yield this._proxy.queryAggregates(this._cleanUpAggregateQuery(b),e);b=J.fromJSON(b);b.features.forEach(u=>this._setLayersForFeature(u));return b});return function(b,e){return a.apply(this,arguments)}}();w.queryAggregateIds=function(a,b){return this._proxy.queryAggregateIds(this._cleanUpAggregateQuery(a),b)};w.queryAggregateCount=function(a,
b){return this._proxy.queryAggregateCount(this._cleanUpAggregateQuery(a),b)};w.queryAggregateJSON=function(a,b){return this._proxy.queryAggregates(this._cleanUpAggregateQuery(a),b)};w.queryFeaturesJSON=function(a,b){return this._proxy.queryFeatures(this._cleanUpQuery(a),b)};w.queryObjectIds=function(a,b){return this._proxy.queryObjectIds(this._cleanUpQuery(a),b)};w.queryFeatureCount=function(a,b){return this._proxy.queryFeatureCount(this._cleanUpQuery(a),b)};w.queryExtent=function(a,b){return this._proxy.queryExtent(this._cleanUpQuery(a),
b).then(e=>({count:e.count,extent:ja.fromJSON(e.extent)}))};w.setVisibility=function(a,b){b?this._visibilityOverrides.delete(a):this._visibilityOverrides.add(a);this._update()};w.update=function(a){if(this._tileStrategy&&this.tileRenderer){var {hasMissingTiles:b,added:e,removed:u}=this._tileStrategy.update(a);(e.length||u.length)&&this._proxy.updateTiles({added:e,removed:u});b&&this.requestUpdate();this.notifyChange("updating")}};w.attach=function(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`);
this._tileStrategy=new P.TileManager({acquireTile:a=>this._acquireTile(a),releaseTile:a=>this._releaseTile(a),tileInfoView:this.view.featuresTilingScheme,buffer:0});this.handles.add(d.watch(()=>this.renderingConfigHash,()=>this._update(),d.initial),"attach");"stream"!==this.layer.type&&this.handles.add(this.layer.on("edits",a=>this._edit(a)),"attach")};w.detach=function(){this._commandsQueue.clear();this._proxy?.stop();this.container.removeAllChildren();this.handles.remove("attach");this.tileRenderer&&
(this.tileRenderer.uninstall(this.container),this.tileRenderer=null);this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null);this._tileRendererHash=null};w.moveStart=function(){this.requestUpdate()};w.viewChange=function(){this.requestUpdate()};w.moveEnd=function(){this.requestUpdate()};w.isUpdating=function(){const a="renderer"in this.layer&&null!=this.layer.renderer,b=this._commandsQueue.updating,e=null!=this._updatingRequiredFieldsPromise,u=!this._proxy||!this._proxy.isReady,
G=this._pipelineIsUpdating,I=null==this.tileRenderer||this.tileRenderer?.updating,V=a&&(b||e||u||G||I);k("esri-2d-log-updating")&&console.log(`Updating FLV2D: ${V}\n  -> hasRenderer ${a}\n  -> hasPendingCommand ${b}\n  -> updatingRequiredFields ${e}\n  -> updatingProxy ${u}\n  -> updatingPipeline ${G}\n  -> updatingTileRenderer ${I}\n`);return V};w._createClientOptions=function(){return{setUpdating:a=>{this._set("_pipelineIsUpdating",a)},emitEvent:a=>{this.emit(a.name,a.event)}}};w._detectQueryMode=
function(){var a=g._asyncToGenerator(function*(b){const e="editingInfo"in this.layer&&this.layer.editingInfo?.lastEditDate,u=!!this.layer.refreshInterval;if("path"in b&&("feature"===this.layer.type||"subtype-group"===this.layer.type)&&"point"===this.layer.geometryType&&this.layer.capabilities.query.supportsPagination&&!this.layer.capabilities.operations.supportsEditing&&(e||!u)&&k("featurelayer-snapshot-enabled"))try{const I=yield this.layer.queryFeatureCount(),V=k("featurelayer-snapshot-point-min-threshold");
if(I<=V)return{mode:"snapshot",featureCount:I};const W=k("featurelayer-snapshot-point-max-threshold"),X=k("featurelayer-snapshot-point-coverage"),R=this.view.extent;var G=x.unwrap(this.layer.fullExtent);b=G?.clone().intersection(R);const S=x.isSome(b)?b.width*b.height:0;G=G?.width*G?.height;if(I<=W&&(0===G?0:S/G)>=X)return{mode:"snapshot",featureCount:I}}catch(I){q.getLogger(this.declaredClass).warn("mapview-feature-layer","Encountered an error when querying for featureCount",{error:I})}return{mode:"on-demand"}});
return function(b){return a.apply(this,arguments)}}();w._createServiceOptions=function(){var a=g._asyncToGenerator(function*(){var b=this.layer;if("stream"===b.type)return null;const {capabilities:e,objectIdField:u}=b,G=b.fields.map(Y=>Y.toJSON()),I=x.isSome(b.fullExtent)&&b.fullExtent.toJSON(),V=O.toJSONGeometryType(b.geometryType),W=b.timeInfo&&b.timeInfo.toJSON()||null,X=b.spatialReference?b.spatialReference.toJSON():null,R="feature"===b.type?b.globalIdField:null;let S;"ogc-feature"===b.type?S=
b.source.getSource():ia(b.source)?S=yield b.source.openPorts():b.parsedUrl&&(S=t.clone(b.parsedUrl),"dynamicDataSource"in b&&b.dynamicDataSource&&(S.query={layer:JSON.stringify({source:b.dynamicDataSource})}));b="datesInUnknownTimezone"in this.layer&&this.layer.datesInUnknownTimezone;const aa=("subtypeField"in this.layer&&this.layer.subtypeField)??null,{mode:fa,featureCount:ha}=yield this._detectQueryMode(S);let da=this.layer.objectIdField;if("feature"===this.layer.type&&x.isSome(this.layer.orderBy)&&
this.layer.orderBy.length){const Y=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;Y&&(da=Y)}return{type:fa,timeReferenceUnknownClient:b,subtypeField:aa,featureCount:ha,globalIdField:R,maxRecordCount:e.query.maxRecordCount,tileMaxRecordCount:e.query.tileMaxRecordCount,capabilities:e,fields:G,fullExtent:I,geometryType:V,objectIdField:u,source:S,timeInfo:W,spatialReference:X,orderByFields:da}});return function(){return a.apply(this,arguments)}}();w._createMemoryServiceOptions=function(){var a=
g._asyncToGenerator(function*(b){b=yield b.openPorts();return{...this._createServiceOptions(),type:"memory",source:b}});return function(b){return a.apply(this,arguments)}}();w._cleanUpQuery=function(a){a=A.from(a)||this.createQuery();a.outSpatialReference||(a.outSpatialReference=this.view.spatialReference);return a};w._cleanUpAggregateQuery=function(a){a=A.from(a)||this.createAggregateQuery();a.outSpatialReference||(a.outSpatialReference=this.view.spatialReference);return a};w._update=function(){var a=
g._asyncToGenerator(function*(){return this._commandsQueue.push({type:"update"})});return function(){return a.apply(this,arguments)}}();w._edit=function(){var a=g._asyncToGenerator(function*(b){if(this.suspended)this._clearTiles();else if(this._validateEdit(b))return this._commandsQueue.push({type:"edit",edits:b})});return function(b){return a.apply(this,arguments)}}();w.doRefresh=function(){var a=g._asyncToGenerator(function*(b){if(this.attached&&this._tileStrategy.tileKeys().length){if(!this.suspended||
!b)return this._commandsQueue.push({type:"refresh",dataChanged:b});this._clearTiles()}});return function(b){return a.apply(this,arguments)}}();w._clearTiles=function(){this._tileStrategy.tileKeys().length&&(this._proxy.updateTiles({added:[],removed:this._tileStrategy.tileKeys()}),this._tileStrategy.clear(),this.requestUpdate(),this._commandsQueue.clear(),this._update())};w._validateEdit=function(a){const b="globalIdField"in this.layer&&this.layer.globalIdField,e=a.deletedFeatures.some(G=>-1===G.objectId||
!G.objectId),u=b&&this.availableFields.includes(b);return e&&!u?(q.getLogger(this.declaredClass).error(new y("mapview-apply-edits",`Editing the specified service requires the layer's globalIdField, ${b} to be included the layer's outFields for updates to be reflected on the map`)),null):a};w._doUpdate=function(){var a=g._asyncToGenerator(function*(){try{if(!this.destroyed&&this._hasRequiredSupport(this.layer)&&this._tileStrategy){var {featureEffectView:b,filter:e}=this;yield this._updateRequiredFields();
var {renderer:u}=this._getEffectiveRenderer();this._set("_effectiveRenderer",u);var G=this._createSchemaConfig(),I=this._createConfiguration(G,e,b.filter),V=this._lastDefinitionExpression!==I.schema.source.definitionExpression;this._lastDefinitionExpression=I.schema.source.definitionExpression;var W=I.schema.tileRenderer,X=this._createTileRendererHash(W);"snapshot"===this._serviceOptions.type&&(I.schema.source.initialFeatureCount=this._serviceOptions.featureCount);if(X!==this._tileRendererHash){yield this._initTileRenderer(W,
u);const R=this.layer,S="stream"===R.type?yield this._initServiceOptions():this._serviceOptions;this.tileRenderer.onConfigUpdate(u);"stream"!==R.type&&ia(R.source)&&(S.source=yield R.source.openPorts());const aa={added:this._tileStrategy.tileKeys(),removed:[]};yield this._proxy.startup(this.view.featuresTilingScheme,I,S,aa);this.hasHighlight()&&(yield this._proxy.setHighlight(Array.from(this._highlightIds.keys())));yield this._onceTilesUpdated();this.tileRenderer.onConfigUpdate(u)}else{"snapshot"===
this._serviceOptions.type&&V&&(I.schema.source.changedFeatureCount=yield this.layer.queryFeatureCount());const R=yield this._proxy.update(I);(R.mesh||R.targets.aggregate)&&this._lockGPUUploads();try{yield this._proxy.applyUpdate(R)}catch(S){l.isAbortError(S)||q.getLogger(this.declaredClass).error(S)}(R.mesh||R.targets.aggregate)&&this._unlockGPUUploads();this.tileRenderer.onConfigUpdate(u);this._updateClusterSizeVariable();this._forceAttributeTextureUpload()}this._tileRendererHash=X;this.tileRenderer.invalidateLabels();
this.requestUpdate()}}catch(R){}});return function(){return a.apply(this,arguments)}}();w._doEdit=function(){var a=g._asyncToGenerator(function*(b){try{yield this._proxy.onEdits(b)}catch(e){l.isAbortError(e)}});return function(b){return a.apply(this,arguments)}}();w._doRefresh=function(){var a=g._asyncToGenerator(function*(b){this._lockGPUUploads();try{let e;b&&"snapshot"===this.queryMode&&"queryFeatureCount"in this.layer&&(e=yield this.layer.queryFeatureCount());yield this._proxy.refresh({dataChanged:b,
featureCount:e})}catch(e){l.isAbortError(e)}this._unlockGPUUploads();(b=this.layer)&&"featureReduction"in b&&b.featureReduction&&this._updateClusterSizeVariable()});return function(b){return a.apply(this,arguments)}}();w._updateClusterSizeVariable=function(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)};w._createUpdateClusterSizeTask=function(a,b){return d.watch(()=>this._aggregateValueRanges,e=>{this._updateClusterEffectiveRendererSizeVariable(a,
b,e);this._needsClusterSizeUpdate=!0;this._uploadsLocked||this._updateClusterSizeVariable()})};w._updateClusterEffectiveRendererSizeVariable=function(){var a=g._asyncToGenerator(function*(b,e,u){if(b.dynamicClusterSize&&"visualVariables"in b&&b.visualVariables){var G=v.findSizeVV(b.visualVariables);x.isSome(G)&&"cluster_count"===G.field&&(G=b.visualVariables.indexOf(G),b.visualVariables[G]=v.createClusterCountSizeVariable(e,u),b=b.clone(),b.dynamicClusterSize=!0,this._set("_effectiveRenderer",b))}});
return function(b,e,u){return a.apply(this,arguments)}}();w._getEffectiveRenderer=function(){var a=this.layer,b="renderer"in a?a.renderer:null;a="featureReduction"in a?a.featureReduction:null;x.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),this._updateClusterSizeTask=null);if(a&&"renderer"in a&&a.renderer&&!a.renderer.authoringInfo?.isAutoGenerated){b=a.fields;if("cluster"===a.type){const {renderer:e,didInject:u}=v.injectDynamicLevelDependentSizeVisualVariable(a.renderer,
a,this._aggregateValueRanges);u&&(x.applySome(this._updateClusterSizeTask,G=>G.remove()),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(e,a));return{renderer:e,aggregateFields:b,featureReduction:a}}return{renderer:a.renderer,aggregateFields:b,featureReduction:a}}if(a&&"cluster"===a.type&&v.isClusterCompatibleRenderer(b)){const e=[];b=v.createClusterRenderer(e,b,a,this._aggregateValueRanges,!0);x.applySome(this._updateClusterSizeTask,u=>u.remove());this._updateClusterSizeTask=this._createUpdateClusterSizeTask(b,
a);return{renderer:b,aggregateFields:e,featureReduction:a}}return{renderer:b,aggregateFields:[],featureReduction:null}};w._acquireTile=function(a){a=this.tileRenderer.acquireTile(a);a.once("attach",()=>{this.requestUpdate()});return a};w._releaseTile=function(a){this.tileRenderer.releaseTile(a)};w._initTileRenderer=function(){var a=g._asyncToGenerator(function*(b,e){b=yield r.createOrReuseTileRenderer(b,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});this.tileRenderer&&
(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null);if(this.destroyed)return null;this._proxy.tileRenderer=b;this._set("tileRenderer",b);this.tileRenderer.install(this.container);this.tileRenderer.onConfigUpdate(e);this.requestUpdate();return this.tileRenderer});return function(b,e){return a.apply(this,arguments)}}();w._createTileRendererHash=function(a){return`${a.type}`};w._injectOverrides=function(a){var b=x.isSome(a)?a.timeExtent:
null;b=x.isSome(this.timeExtent)&&x.isSome(b)?this.timeExtent.intersection(b):this.timeExtent||b;var e=null;const u="floorInfo"in this.layer&&this.layer.floorInfo;u&&(e=x.isSome(a)&&a.where,e=this._addFloorFilterClause(e));if(!this._visibilityOverrides.size&&!b&&!u)return x.isSome(a)?a.toJSON():null;a=x.isSome(a)&&a.clone()||new E;a.timeExtent=b;e&&(a.where=e);a=a.toJSON();a.hiddenIds=Array.from(this._visibilityOverrides);return a};w._addFloorFilterClause=function(a){var b=this.layer;a=a||"";if("floorInfo"in
b&&b.floorInfo){var e=this.view.floors;if(!e||!e.length)return a;b.floorInfo.viewAllLevelIds?.length&&(e=b.floorInfo.viewAllLevelIds);e=e.filter(u=>""!==u).map(u=>"'"+u+"'");e.push("''");b=b.floorInfo.floorField;e=("("+b+" IN ({ids}) OR "+b+" IS NULL)").replace("{ids}",e.join(", "));if(x.isSome(a)&&a.includes(b)){let u=new RegExp("AND \\("+b+".*NULL\\)","g");a=a.replace(u,"");u=new RegExp("\\("+b+".*NULL\\)","g");a=a.replace(u,"");a=a.replace(/\s+/g," ").trim()}a=""!==a?"("+a+") AND "+e:e}return""!==
a?a:null};w._createConfiguration=function(a,b,e){const u="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,G="feature"===this.layer.type?this.layer.gdbVersion:void 0,I=Array(F.MAX_FILTERS);b=this._injectOverrides(b);I[0]=b;I[1]=x.isSome(e)?e.toJSON():null;a=L.createSchema(a);if(x.isNone(a))return null;e=ba.getWebGLCapabilities("2d");return{availableFields:this.availableFields,gdbVersion:G,historicMoment:u,devicePixelRatio:window.devicePixelRatio||1,
filters:I,schema:a,supportsTextureFloat:e.supportsTextureFloat,maxTextureSize:e.maxTextureSize}};w._hasRequiredSupport=function(a){return"renderer"in a?D.isRendererSupported(a.renderer):!0};w._onceTilesUpdated=function(){this.requestUpdate();return d.whenOnce(()=>!this._pipelineIsUpdating)};w._lockGPUUploads=function(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())};w._unlockGPUUploads=function(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())};
w._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()};w._createSchemaConfig=function(){const a=this.layer;return{renderer:"renderer"in a?a.renderer:null,spatialReference:a.spatialReference,timeExtent:a.timeExtent,definitionExpression:a.definitionExpression,featureReduction:"featureReduction"in a?a.featureReduction:null,fields:a.fields,geometryType:a.geometryType,historicMoment:"historicMoment"in a?a.historicMoment:null,labelsVisible:"labelsVisible"in
a&&a.labelsVisible,labelingInfo:"labelingInfo"in a&&a.labelingInfo,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:"gdbVersion"in a?a.gdbVersion:null,pixelBuffer:0,orderBy:"orderBy"in a&&a.orderBy?a.orderBy:null,customParameters:{...("customParameters"in a?a.customParameters:void 0),token:"apiKey"in a?a.apiKey:void 0},subtypeCode:"subtypeCode"in a?a.subtypeCode:void 0,subtypeField:"subtypeField"in a?a.subtypeField:void 0}};w._addHighlight=function(a){for(const b of a)this._highlightIds.has(b)?
(a=this._highlightIds.get(b),this._highlightIds.set(b,a+1)):this._highlightIds.set(b,1);this._updateHighlight().catch(b=>{l.isAbortError(b)||q.getLogger(this.declaredClass).error(b)})};w._removeHighlight=function(a){for(const b of a)this._highlightIds.has(b)&&(a=this._highlightIds.get(b)-1,0===a?this._highlightIds.delete(b):this._highlightIds.set(b,a));this._updateHighlight().catch(b=>{l.isAbortError(b)||q.getLogger(this.declaredClass).error(b)})};w._setLayersForFeature=function(a){const b=this.layer;
a.layer=b;a.sourceLayer=b};w._createGraphicHit=function(a,b){this._setLayersForFeature(b);x.isSome(b.geometry)&&(b.geometry.spatialReference=this.view.spatialReference);return{type:"graphic",graphic:b,layer:this.layer,mapPoint:a}};g._createClass(ca,[{key:"orderByFields",get:function(){return"stream"!==this._serviceOptions.type&&this._serviceOptions.orderByFields}},{key:"labelsVisible",get:function(){const a="subtype-group"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&
a.some(b=>b.labelingInfo&&b.labelsVisible)}},{key:"queryMode",get:function(){return this._serviceOptions.type}},{key:"renderingConfigHash",get:function(){if(!this.layer)return null;const a=this.availableFields;var b=this.layer;const e=this.view.floors,{definitionExpression:u}=b,G="subtype-group"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,I="renderer"in b&&b.renderer,V="gdbVersion"in b?b.gdbVersion:void 0,W="historicMoment"in b?b.historicMoment?.getTime():void 0,{timeExtent:X}=
this,R="customParameters"in b?JSON.stringify(b.customParameters):void 0,S="apiKey"in b?b.apiKey:void 0,aa="stream"===b.type?`${JSON.stringify(b.geometryDefinition)}${b.definitionExpression}`:null,fa=JSON.stringify(this.clips);b="featureReduction"in b?b.featureReduction?.toJSON():null;const ha="orderBy"in this.layer&&JSON.stringify(this.layer.orderBy),da="sublayers"in this.layer&&this.layer.sublayers.items.reduce((Y,ea)=>Y+`${ea.visible?1:0}.${JSON.stringify(ea.renderer)}.${ea.labelsVisible}\n.${JSON.stringify(ea.labelingInfo)}`,
"");return JSON.stringify({orderBy:ha,sublayerHash:da,subtypeCode:"subtypeCode"in this.layer&&this.layer.subtypeCode,filterHash:x.isSome(this.filter)&&this.filter.toJSON(),effectHash:x.isSome(this.featureEffect)&&this.featureEffect.toJSON(),streamFilter:aa,gdbVersion:V,definitionExpression:u,historicMoment:W,availableFields:a,renderer:I,labelingInfo:G,timeExtent:X,floors:e,clipsHash:fa,featureReduction:b,customParameters:R,apiKey:S})}},{key:"hasFilter",get:function(){const a=!!("floorInfo"in this.layer&&
this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||a||!!this._visibilityOverrides.size||!!this.timeExtent}}]);return ca}(T(U(N.LayerView2DMixin(K))));m.__decorate([c.property()],n.prototype,"_serviceOptions",void 0);m.__decorate([c.property()],n.prototype,"_proxy",void 0);m.__decorate([c.property()],n.prototype,"_pipelineIsUpdating",void 0);m.__decorate([c.property()],n.prototype,"_effectiveRenderer",void 0);m.__decorate([c.property()],n.prototype,"_aggregateValueRanges",
void 0);m.__decorate([c.property()],n.prototype,"_commandsQueue",void 0);m.__decorate([c.property()],n.prototype,"featureEffectView",void 0);m.__decorate([c.property()],n.prototype,"labelsVisible",null);m.__decorate([c.property({readOnly:!0})],n.prototype,"queryMode",null);m.__decorate([c.property()],n.prototype,"renderingConfigHash",null);m.__decorate([c.property()],n.prototype,"tileRenderer",void 0);m.__decorate([c.property()],n.prototype,"updating",void 0);return n=m.__decorate([p.subclass("esri.views.2d.layers.FeatureLayerView2D")],
n)});