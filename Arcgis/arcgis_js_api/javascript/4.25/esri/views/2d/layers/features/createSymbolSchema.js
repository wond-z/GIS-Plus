// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../engine/webgl/enums","../../engine/webgl/materialKey/MaterialKey"],function(n,g,e){function h(a){switch(a.type){case "line-marker":return{type:"line-marker",color:a.color?.toJSON(),placement:a.placement,style:a.style};default:return a.constructor.fromJSON(a.toJSON()).toJSON()}}function p(a,c,d){var b=e.createMaterialKey(g.WGLGeometryType.FILL,c);b=d?e.hydrateMaterialKey(b):b;var f=a.clone();a=f.outline;const k=e.isOutlineFillSymbology(c.symbologyType);k||(f.outline=null);f=
{materialKey:b,hash:f.hash(),...h(f)};if(k)return f;b=[];b.push(f);a&&(c=e.createMaterialKey(g.WGLGeometryType.LINE,{...c,isOutline:!0}),d={materialKey:d?e.hydrateMaterialKey(c):c,hash:a.hash(),...h(a)},b.push(d));return{type:"composite-symbol",layers:b,hash:b.reduce((l,m)=>m.hash+l,"")}}function q(a,c,d){var b=e.isOutlineFillSymbology(c.symbologyType)?g.WGLSymbologyType.DEFAULT:c.symbologyType;b=e.createMaterialKey(g.WGLGeometryType.LINE,{...c,symbologyType:b});const f=d?e.hydrateMaterialKey(b):
b;a=a.clone();b=a.marker;a.marker=null;const k=[];k.push({materialKey:f,hash:a.hash(),...h(a)});b&&(c=e.createMaterialKey(g.WGLGeometryType.MARKER,c),d=d?e.hydrateMaterialKey(c):c,b.color=b.color??a.color,k.push({materialKey:d,hash:b.hash(),lineWidth:a.width,...h(b)}));return{type:"composite-symbol",layers:k,hash:k.reduce((l,m)=>m.hash+l,"")}}n.createSymbolSchema=function(a,c,d=!1){if(!a)return null;switch(a.type){case "simple-fill":case "picture-fill":return p(a,c,d);case "simple-marker":case "picture-marker":var b=
e.createMaterialKey(g.WGLGeometryType.MARKER,c);d=d?e.hydrateMaterialKey(b):b;b=h(a);return{materialKey:d,hash:a.hash(),...b,angle:a.angle,maxVVSize:c.maxVVSize};case "simple-line":return q(a,c,d);case "text":return b=e.createMaterialKey(g.WGLGeometryType.TEXT,c),d=d?e.hydrateMaterialKey(b):b,b=h(a),{materialKey:d,hash:a.hash(),...b,angle:a.angle,maxVVSize:c.maxVVSize};case "label":return b=a.toJSON(),c=e.createMaterialKey(g.WGLGeometryType.LABEL,{...c,placement:b.labelPlacement}),{materialKey:d?
e.hydrateMaterialKey(c):c,hash:a.hash(),...b,labelPlacement:b.labelPlacement};case "cim":return{type:"cim",rendererKey:c.vvFlags,data:a.data,maxVVSize:c.maxVVSize};case "CIMSymbolReference":return{type:"cim",rendererKey:c.vvFlags,data:a,maxVVSize:c.maxVVSize};case "web-style":return{...h(a),type:"web-style",hash:a.hash(),rendererKey:c.vvFlags,maxVVSize:c.maxVVSize};default:throw Error(`symbol not supported ${a.type}`);}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});