// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass".split(" "),function(l,g,d,h,t,y,w){d=function(p){function n(b){b=p.call(this,b)||this;b.tiles=new Map;
return b}l._inheritsLoose(n,p);var f=n.prototype;f.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.tiles=null};f.acquireTile=function(b){const m=this.createTile(b);m.once("isReady",()=>this.notifyChange("updating"));this.tiles.set(b.id,m);return m};f.forceAttributeTextureUpload=function(){};f.forEachTile=function(b){this.tiles.forEach(b)};f.releaseTile=function(b){this.tiles.delete(b.key.id);this.disposeTile(b)};f.isUpdating=function(){let b=!0;this.tiles.forEach(m=>
{b=b&&m.isReady});return!b};f.setHighlight=function(){};f.invalidateLabels=function(){};f.requestUpdate=function(){this.layerView.requestUpdate()};l._createClass(n,[{key:"updating",get:function(){return this.isUpdating()}}]);return n}(d.HandleOwner);g.__decorate([h.property()],d.prototype,"layer",void 0);g.__decorate([h.property()],d.prototype,"layerView",void 0);g.__decorate([h.property()],d.prototype,"tileInfoView",void 0);g.__decorate([h.property()],d.prototype,"updating",null);return d=g.__decorate([w.subclass("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],
d)})},"esri/views/2d/layers/features/tileRenderers/support/HeatmapSource":function(){define(["exports","../../../../../../renderers/support/heatmapUtils"],function(l,g){let d=function(){function h(){this.gradient=null;this.width=this.height=512}h.prototype.render=function(t){g.drawHeatmap(t,512,this.intensities,this.gradient,this.minDensity,this.maxDensity)};return h}();l.HeatmapSource=d;Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/Error ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../renderers/support/heatmapUtils ../../../engine/BitmapTileContainer ./BaseTileRenderer ./support/HeatmapSource".split(" "),function(l,g,d,h,t,y,w,p,n,f,b,m){d=function(x){function u(a){var c=
x.call(this,a)||this;c._intensityInfo={minDensity:0,maxDensity:0};c.type="heatmap";c.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}};c._container=new f.BitmapTileContainer(a.tileInfoView);return c}l._inheritsLoose(u,x);var e=u.prototype;e.createTile=function(a){const c=this._container.createTile(a);this.tileInfoView.getTileCoords(c.bitmap,a);c.bitmap.resolution=this.tileInfoView.getTileResolution(a);return c};e.onConfigUpdate=function(){const a=this.layer.renderer;
if("heatmap"===a.type){const {minDensity:c,maxDensity:q,colorStops:v}=a;this._intensityInfo.minDensity=c;this._intensityInfo.maxDensity=q;this._gradient=n.generateGradient(v);this.tiles.forEach(k=>{const r=k.bitmap.source;r&&(r.minDensity=c,r.maxDensity=q,r.gradient=this._gradient,k.bitmap.invalidateTexture())})}};e.hitTest=function(){return Promise.resolve([])};e.install=function(a){a.addChild(this._container)};e.uninstall=function(a){this._container.removeAllChildren();a.removeChild(this._container)};
e.disposeTile=function(a){this._container.removeChild(a);a.destroy()};e.supportsRenderer=function(a){return a&&"heatmap"===a.type};e.onTileData=function(a){const c=this.tiles.get(a.tileKey);if(c){a=a.intensityInfo;var {minDensity:q,maxDensity:v}=this._intensityInfo,k=c.bitmap.source||new m.HeatmapSource;k.intensities=a&&a.matrix||null;k.minDensity=q;k.maxDensity=v;k.gradient=this._gradient;c.bitmap.source=k;this._container.addChild(c);this._container.requestRender();this.requestUpdate()}};e.onTileError=
function(a){console.error(a)};e.lockGPUUploads=function(){};e.unlockGPUUploads=function(){};e.fetchResource=function(a,c){console.error(a);return Promise.reject()};return u}(b);return d=g.__decorate([p.subclass("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],d)});