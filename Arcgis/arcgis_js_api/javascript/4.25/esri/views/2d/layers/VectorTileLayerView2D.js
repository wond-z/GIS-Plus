// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),function(B,F,y,A,g,u,c,d,a){let b=function(){function h(q,n,f){this._layer=q;this._styleRepository=n;this.devicePixelRatio=f;this._connection=this._glyphMosaic=this._spriteMosaic=null}var m=h.prototype;
m.destroy=function(){this._connection&&(this._connection.close(),this._connection=null);this._layer=this._styleRepository=null;this._spriteMosaic&&(this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic=null)};m.start=function(){var q=F._asyncToGenerator(function*(n){this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,n);this._spriteSourcePromise.then(v=>{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(v)});const f=new c(this._layer.currentStyleInfo.glyphsUrl?
A.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new u(1024,1024,f);this._broadcastPromise=g.open("WorkerTileHandler",{client:this,schedule:n.schedule,signal:n.signal}).then(v=>{this._connection=v;this._layer&&!this._connection.closed&&(v=v.broadcast("setStyle",this._layer.currentStyleInfo.style,n),Promise.all(v).catch(t=>y.throwIfNotAbortError(t)))})});return function(n){return q.apply(this,arguments)}}();
m.updateStyle=function(){var q=F._asyncToGenerator(function*(n){yield this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",n))});return function(n){return q.apply(this,arguments)}}();m.setSpriteSource=function(q){const n=new d(1024,1024,250);n.setSpriteSource(q);this._spriteMosaic=n;this._spriteSourcePromise=Promise.resolve(q);return n};m.setStyle=function(){var q=F._asyncToGenerator(function*(n,f){yield this._broadcastPromise;this._styleRepository=
n;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(v=>{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(v)});n=new c(this._layer.currentStyleInfo.glyphsUrl?A.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new u(1024,1024,n);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",f))});return function(n,
f){return q.apply(this,arguments)}}();m.fetchTileData=function(q,n){return this._getRefKeys(q,n).then(f=>{const v=this._layer.sourceNameToSource,t=[];for(const k in v)t.push(k);return this._getSourcesData(t,f,n)})};m.parseTileData=function(q,n){const f=q&&q.data;if(!f)return Promise.resolve(null);const {sourceName2DataAndRefKey:v,transferList:t}=f;return 0===Object.keys(v).length?Promise.resolve(null):this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:q.key.id,sourceName2DataAndRefKey:v,
styleLayerUIDs:q.styleLayerUIDs},{...n,transferList:t}))};m.getSprites=function(){var q=F._asyncToGenerator(function*(n){yield this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(n)});return function(n){return q.apply(this,arguments)}}();m.getGlyphs=function(q){return this._glyphMosaic.getGlyphItems(q.font,q.codePoints)};m._getTilePayload=function(){var q=F._asyncToGenerator(function*(n,f,v){n=a.pool.acquire(n.id);const t=this._layer.sourceNameToSource[f],{level:k,row:r,col:C}=n;a.pool.release(n);
try{return{protobuff:yield t.requestTile(k,r,C,v),sourceName:f}}catch(G){if(y.isAbortError(G))throw G;return{protobuff:null,sourceName:f}}});return function(n,f,v){return q.apply(this,arguments)}}();m._getRefKeys=function(q,n){const f=this._layer.sourceNameToSource,v=[];for(const t in f){const k=f[t].getRefKey(q,n);v.push(k)}return y.eachAlways(v)};m._getSourcesData=function(q,n,f){const v=[];for(let t=0;t<n.length;t++)if(null==n[t].value||null==q[t])v.push(null);else{const k=this._getTilePayload(n[t].value,
q[t],f);v.push(k)}return y.eachAlways(v).then(t=>{const k={},r=[];for(let C=0;C<t.length;C++)t[C].value&&t[C].value&&t[C].value.protobuff&&0<t[C].value.protobuff.byteLength&&(k[t[C].value.sourceName]={refKey:n[C].value.id,protobuff:t[C].value.protobuff},r.push(t[C].value.protobuff));return{sourceName2DataAndRefKey:k,transferList:r}})};F._createClass(h,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);
return h}();B.TileHandler=b;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(B,F,y,A){return function(){function g(c,d,a){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=c;this.height=d;this._glyphSource=
a;this._binPack=new B(c-4,d-4);this._glyphData.push(new Uint8Array(c*d));this._dirties.push(!0);this._textures.push(void 0)}var u=g.prototype;u.getGlyphItems=function(c,d){const a=[],b=this._glyphSource,h=new Set,m=1/256;for(const n of d)h.add(Math.floor(n*m));const q=[];h.forEach(n=>{if(256>=n){const f=c+n;this._rangePromises.has(f)?q.push(this._rangePromises.get(f)):(n=b.getRange(c,n).then(()=>{this._rangePromises["delete"](f)},()=>{this._rangePromises["delete"](f)}),this._rangePromises.set(f,n),
q.push(n))}});return Promise.all(q).then(()=>{let n=this._glyphIndex[c];n||(n={},this._glyphIndex[c]=n);for(const r of d){var f=n[r];if(f){a[r]={sdf:!0,rect:f.rect,metrics:f.metrics,page:f.page,code:r};continue}var v=b.getGlyph(c,r);if(!v||!v.metrics)continue;f=v.metrics;let C;if(0===f.width)C=new F(0,0,0,0);else{const G=f.width+6,x=f.height+6;var t=G%4?4-G%4:4,k=x%4?4-x%4:4;1===t&&(t=5);1===k&&(k=5);C=this._binPack.allocate(G+t,x+k);C.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=
null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new B(this.width-4,this.height-4),C=this._binPack.allocate(G+t,x+k));t=this._glyphData[this._currentPage];v=v.bitmap;let w;if(v)for(let D=0;D<x;D++){k=G*D;w=this.width*(C.y+D+1)+C.x;for(let M=0;M<G;M++)t[w+M+1]=v[k+M]}}n[r]={rect:C,metrics:f,tileIDs:null,page:this._currentPage};a[r]={sdf:!0,rect:C,metrics:f,page:this._currentPage,
code:r};this._dirties[this._currentPage]=!0}return a})};u.removeGlyphs=function(c){for(const d in this._glyphIndex){const a=this._glyphIndex[d];if(!a)continue;let b;for(const h in a)if(b=a[h],b.tileIDs["delete"](c),0===b.tileIDs.size){const m=this._glyphData[b.page],q=b.rect;let n,f;for(let v=0;v<q.height;v++)for(n=this.width*(q.y+v)+q.x,f=0;f<q.width;f++)m[n+f]=0;delete a[h];this._dirties[b.page]=!0}}};u.bind=function(c,d,a,b=0){this._textures[a]||(this._textures[a]=new A.Texture(c,{pixelFormat:y.PixelFormat.ALPHA,
dataType:y.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const h=this._textures[a];h.setSamplingMode(d);this._dirties[a]&&h.setData(this._glyphData[a]);c.bindTexture(h,b);this._dirties[a]=!1};u.dispose=function(){this._binPack=null;for(const c of this._textures)c&&c.dispose();this._textures.length=0};return g}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../webgl/Rect"],
function(B,F){return function(){function y(g,u){this._height=this._width=0;this._free=[];this._width=g;this._height=u;this._free.push(new F(0,0,g,u))}var A=y.prototype;A.allocate=function(g,u){if(g>this._width||u>this._height)return new F;let c=null,d=-1;for(let a=0;a<this._free.length;++a){const b=this._free[a];g<=b.width&&u<=b.height&&(null===c||b.y<=c.y&&b.x<=c.x)&&(c=b,d=a)}if(null===c)return new F;this._free.splice(d,1);c.width<c.height?(c.width>g&&this._free.push(new F(c.x+g,c.y,c.width-g,u)),
c.height>u&&this._free.push(new F(c.x,c.y+u,c.width,c.height-u))):(c.width>g&&this._free.push(new F(c.x+g,c.y,c.width-g,c.height)),c.height>u&&this._free.push(new F(c.x,c.y+u,g,c.height-u)));return new F(c.x,c.y,g,u)};A.release=function(g){for(let u=0;u<this._free.length;++u){const c=this._free[u];if(c.y===g.y&&c.height===g.height&&c.x+c.width===g.x)c.width+=g.width;else if(c.x===g.x&&c.width===g.width&&c.y+c.height===g.y)c.height+=g.height;else if(g.y===c.y&&g.height===c.height&&g.x+g.width===c.x)c.x=
g.x,c.width+=g.width;else if(g.x===c.x&&g.width===c.width&&g.y+g.height===c.y)c.y=g.y,c.height+=g.height;else continue;this._free.splice(u,1);this.release(g)}this._free.push(g)};B._createClass(y,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);return y}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../request","../../../../core/pbf"],function(B,F){let y=function(){function g(c){this._metrics=[];this._bitmaps=
[];if(c)for(;c.next();)switch(c.tag()){case 1:const d=c.getMessage();for(;d.next();)switch(d.tag()){case 3:const a=d.getMessage();let b,h,m,q,n,f,v;for(;a.next();)switch(a.tag()){case 1:b=a.getUInt32();break;case 2:h=a.getBytes();break;case 3:m=a.getUInt32();break;case 4:q=a.getUInt32();break;case 5:n=a.getSInt32();break;case 6:f=a.getSInt32();break;case 7:v=a.getUInt32();break;default:a.skip()}a.release();b&&(this._metrics[b]={width:m,height:q,left:n,top:f,advance:v},this._bitmaps[b]=h);break;default:d.skip()}d.release();
break;default:c.skip()}}var u=g.prototype;u.getMetrics=function(c){return this._metrics[c]};u.getBitmap=function(c){return this._bitmaps[c]};return g}(),A=function(){function g(){this._ranges=[]}var u=g.prototype;u.getRange=function(c){return this._ranges[c]};u.addRange=function(c,d){this._ranges[c]=d};return g}();return function(){function g(c){this._glyphInfo={};this._baseURL=c}var u=g.prototype;u.getRange=function(c,d){const a=this._getFontStack(c);if(a.getRange(d))return Promise.resolve();const b=
256*d,h=b+255;if(this._baseURL)return c=this._baseURL.replace("{fontstack}",c).replace("{range}",b+"-"+h),B(c,{responseType:"array-buffer"}).then(m=>{a.addRange(d,new y(new F(new Uint8Array(m.data),new DataView(m.data))))}).catch(()=>{a.addRange(d,new y)});a.addRange(d,new y);return Promise.resolve()};u.getGlyph=function(c,d){if(c=this._getFontStack(c)){var a=Math.floor(d/256);if(!(256<a)&&(c=c.getRange(a)))return{metrics:c.getMetrics(d),bitmap:c.getBitmap(d)}}};u._getFontStack=function(c){let d=
this._glyphInfo[c];d||(d=this._glyphInfo[c]=new A);return d};return g}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define(["../../../../symbols/cim/rasterizingUtils","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(B,F,y,A,g){return function(){function u(d,a,b=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=
1;(0>=d||0>=a)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=d;this._pageHeight=a;0<b&&(this._maxItemSize=b);this._binPack=new F(d-4,a-4)}var c=u.prototype;c.dispose=function(){this._binPack=null;this._mosaicRects={};for(const d of this._textures)d&&d.dispose();this._textures.length=0};c.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};c.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};c.getPageSize=
function(d){return d>=this._size.length?null:this._size[d]};c.setSpriteSource=function(d){this.dispose();this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new F(this._pageWidth-4,this._pageHeight-4);const a=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=a;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=d};c.getSpriteItem=function(d,a=!1){var b=this._mosaicRects[d];
if(b)return b;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let h;d&&d.startsWith("dasharray-")?([b,h]=this._rasterizeDash(d),a=!0):b=this._sprites.getSpriteInfo(d);if(!b||!b.width||!b.height||0>b.width||0>b.height)return null;const m=b.width,q=b.height,[n,f,v]=this._allocateImage(m,q);if(0>=n.width)return null;this._copy(n,b,f,v,a,h);b={rect:n,width:m,height:q,sdf:b.sdf,simplePattern:!1,pixelRatio:b.pixelRatio,page:f};return this._mosaicRects[d]=b};c.getSpriteItems=function(d){const a=
{};for(const b of d)a[b.name]=this.getSpriteItem(b.name,b.repeat);return a};c.getMosaicItemPosition=function(d,a){a=(d=this.getSpriteItem(d,a))&&d.rect;if(!a)return null;a.width=d.width;a.height=d.height;return{tl:[a.x+2,a.y+2],br:[a.x+2+d.width,a.y+2+d.height],page:d.page}};c.bind=function(d,a,b=0,h=0){if(!(b>=this._size.length||b>=this._mosaicsData.length)){this._textures[b]||(this._textures[b]=new g.Texture(d,{pixelFormat:A.PixelFormat.RGBA,dataType:A.PixelType.UNSIGNED_BYTE,wrapMode:A.TextureWrapMode.CLAMP_TO_EDGE,
width:this._size[b][0],height:this._size[b][1]},new Uint8Array(this._mosaicsData[b].buffer)));var m=this._textures[b];m.setSamplingMode(a);this._dirties[b]&&m.setData(new Uint8Array(this._mosaicsData[b].buffer));d.bindTexture(m,h);this._dirties[b]=!1}};u._copyBits=function(d,a,b,h,m,q,n,f,v,t,k){let r=h*a+b;n=f*q+n;if(k)for(n-=q,k=-1;k<=t;k++,r=((k+t)%t+h)*a+b,n+=q)for(f=-1;f<=v;f++)m[n+f]=d[r+(f+v)%v];else for(b=0;b<t;b++){for(h=0;h<v;h++)m[n+h]=d[r+h];r+=a;n+=q}};c._copy=function(d,a,b,h,m,q){if(this._sprites&&
"loaded"===this._sprites.loadStatus&&!(b>=this._mosaicsData.length)){var n=new Uint32Array(q?q.buffer:this._sprites.image.buffer),f=this._mosaicsData[b];f&&n||console.error("Source or target images are uninitialized!");u._copyBits(n,q?a.width:this._sprites.width,a.x,a.y,f,h[0],d.x+2,d.y+2,a.width,a.height,m);this._dirties[b]=!0}};c._allocateImage=function(d,a){d+=2;a+=2;var b=Math.max(d,a);if(this._maxItemSize&&this._maxItemSize<b)return b=new y(0,0,d,a),this._mosaicsData.push(new Uint32Array(d*a)),
this._dirties.push(!0),this._size.push([d,a]),this._textures.push(void 0),[b,this._mosaicsData.length-1,[d,a]];b=d%4?4-d%4:4;let h=a%4?4-a%4:4;1===b&&(b=5);1===h&&(h=5);b=this._binPack.allocate(d+b,a+h);return 0>=b.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),
this._binPack=new F(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,a)):[b,this._currentPage,[this._pageWidth,this._pageHeight]]};c._rasterizeDash=function(d){var a=d.match(/\[(.*?)\]/);if(!a)return null;a=a[1].split(",").map(Number);d=d.slice(d.lastIndexOf("-")+1);const [b,h,m]=B.rasterizeDash(a,d);d=new Uint8Array(b.buffer);return[{x:0,y:0,width:h,height:m,sdf:!0,pixelRatio:1},d]};return u}()})},"esri/views/2d/engine/vectorTiles/TileManager":function(){define(["exports","../../../../core/LRUCache",
"../../../../core/maybe","../../tiling/TileCoverage","../../tiling/TileKey"],function(B,F,y,A,g){const u=(d,a)=>d+1/(1<<2*a);let c=function(){function d(b,h){this._tiles=new Map;this._tileCache=new F(40,m=>m.dispose());this._viewSize=[0,0];this._visibleTiles=new Map;this.acquireTile=b.acquireTile;this.releaseTile=b.releaseTile;this.tileInfoView=b.tileInfoView;this._container=h}var a=d.prototype;a.destroy=function(){for(const [,b]of this._tiles)b.dispose();this._tiles=null;this._tileCache.clear();
this._tileCache=null};a.update=function(b){this._updateCacheSize(b);const h=this.tileInfoView;b=h.getTileCoverage(b.state,0,"smallest");const {spans:m,lodInfo:q}=b,{level:n}=q,f=this._tiles,v=new Set,t=new Set;for(const {row:r,colFrom:C,colTo:G}of m)for(let x=C;x<=G;x++){const w=g.getId(n,r,q.normalizeCol(x),q.getWorldForColumn(x)),D=this._getOrAcquireTile(w);v.add(w);D.processed()?this._addToContainer(D):t.add(new g(w))}for(const [r,C]of f)C.isCoverage=v.has(r);for(var k of t)this._findPlaceholdersForMissingTiles(k,
v);k=!1;for(const [r,C]of f)C.neededForCoverage=v.has(r),C.neededForCoverage||C.isHoldingForFade&&h.intersects(b,C.key)&&v.add(r),C.isFading&&(k=!0);for(const [r]of this._tiles)v.has(r)||this._releaseTile(r);A.pool.release(b);return!k};a.clear=function(){this._tiles.clear();this._tileCache.clear();this._visibleTiles.clear()};a.clearCache=function(){this._tileCache.clear()};a._findPlaceholdersForMissingTiles=function(b,h){var m=[];for(const [,q]of this._tiles)this._addPlaceholderChild(m,q,b,h);m=m.reduce(u,
0);1E-6>Math.abs(1-m)||this._addPlaceholderParent(b.id,h)};a._addPlaceholderChild=function(b,h,m,q){if(!(h.key.level<=m.level)&&h.hasData()){var n=h.key,f=n.level-m.level;m.row===n.row>>f&&m.col===n.col>>f&&m.world===n.world&&(this._addToContainer(h),q.add(h.id),b.push(h.key.level-m.level))}};a._addPlaceholderParent=function(b,h){const m=this._tiles;for(;;){{const [n,f,v,t]=b.split("/");b=parseInt(n,10);b=0===b?null:`${b-1}/${parseInt(f,10)>>1}/${parseInt(v,10)>>1}/${parseInt(t,10)}`}if(!b||h.has(b))break;
const q=m.get(b);if(q&&q.hasData()){this._addToContainer(q);h.add(q.id);break}}};a._getOrAcquireTile=function(b){let h=this._tiles.get(b);if(h)return h;(h=this._tileCache.pop(b))||(h=this.acquireTile(new g(b)));this._tiles.set(b,h);return h};a._releaseTile=function(b){const h=this._tiles.get(b);this.releaseTile(h);this._removeFromContainer(h);this._tiles.delete(b);h.hasData()?this._tileCache.put(b,h,1):h.dispose()};a._addToContainer=function(b){let h;const m=[],q=this._container;if(!q.contains(b)){var n=
this._visibleTiles;for(const [,f]of n)this._canConnectDirectly(b,f)&&m.push(f),y.isNone(h)&&this._canConnectDirectly(f,b)&&(h=f);if(y.isSome(h)){for(const f of m)h.childrenTiles.delete(f),b.childrenTiles.add(f),f.parentTile=b;h.childrenTiles.add(b);b.parentTile=h}else for(const f of m)b.childrenTiles.add(f),f.parentTile=b;n.set(b.id,b);q.addChild(b)}};a._removeFromContainer=function(b){this._visibleTiles.delete(b.id);this._container.removeChild(b);if(y.isSome(b.parentTile)){b.parentTile.childrenTiles.delete(b);
for(const h of b.childrenTiles)y.isSome(b.parentTile)&&b.parentTile.childrenTiles.add(h)}for(const h of b.childrenTiles)h.parentTile=b.parentTile;b.parentTile=null;b.childrenTiles.clear()};a._canConnectDirectly=function(b,h){b=b.key;let {level:m,row:q,col:n,world:f}=h.key;for(h=this._visibleTiles;0<m;){m--;q>>=1;n>>=1;if(b.level===m&&b.row===q&&b.col===n&&b.world===f)return!0;if(h.has(`${m}/${q}/${n}/${f}`))break}return!1};a._updateCacheSize=function(b){b=b.state.size;if(b[0]!==this._viewSize[0]||
b[1]!==this._viewSize[1]){var h=Math.ceil(b[0]/512)+1,m=Math.ceil(b[1]/512)+1;this._viewSize[0]=b[0];this._viewSize[1]=b[1];this._tileCache.maxSize=5*h*m}};return d}();B.TileManager=c;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/VectorTile":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat3 ../../../../chunks/mat3f32 ./enums ./RenderBucket ./decluttering/config ../webgl/TiledDisplayObject".split(" "),
function(B,F,y,A,g,u,c,d,a){a=function(h){function m(n,f,v,t,k,r,C,G=null){f=h.call(this,n,f,v,t,k,r,4096,4096)||this;f._memCache=G;f.type="vector-tile";f._referenced=0;f._hasSymbolBuckets=!1;f._memoryUsedByLayerData=0;f.layerData=new Map;f.layerCount=0;f.status="loading";f.allSymbolsFadingOut=!1;f.lastOpacityUpdate=0;f.symbols=new Map;f.isCoverage=!1;f.neededForCoverage=!1;f.decluttered=!1;f.invalidating=!1;f.parentTile=null;f.childrenTiles=new Set;f._processed=!1;f._referenced=1;f.styleRepository=
C;f.id=n.id;return f}F._inheritsLoose(m,h);var q=m.prototype;q.setData=function(n){this.changeDataImpl(n);this.requestRender();this.ready();this.invalidating=!1;this._processed=!0};q.deleteLayerData=function(n){let f=!1;for(const v of n)this.layerData.has(v)&&(n=this.layerData.get(v),this._memoryUsedByLayerData-=n.memoryUsed,n.type===u.BucketType.SYMBOL&&this.symbols.has(v)&&(this.symbols.delete(v),f=!0),n.destroy(),this.layerData.delete(v),this.layerCount--);y.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,
this,this._memoryUsedByLayerData);f&&this.emit("symbols-changed");this.requestRender()};q.processed=function(){return this._processed};q.hasData=function(){return 0<this.layerCount};q.dispose=function(){"unloaded"!==this.status&&(b.delete(this),m._destroyRenderBuckets(this.layerData),this.layerData=null,this._memoryUsedByLayerData=this.layerCount=0,this.destroy(),this.status="unloaded")};q.release=function(){return 0===--this._referenced?(this.dispose(),this.stage=null,!0):!1};q.retain=function(){++this._referenced};
q.changeDataImpl=function(n){let f=!1;if(n){const {bucketsWithData:v,emptyBuckets:t}=n;n=this._createRenderBuckets(v);if(t&&0<t.byteLength){const k=new Uint32Array(t);for(const r of k)this._deleteLayerData(r)}for(const [k,r]of n)this._deleteLayerData(k),r.type===u.BucketType.SYMBOL&&(this.symbols.set(k,r.symbols),f=!0),this._memoryUsedByLayerData+=r.memoryUsed,this.layerData.set(k,r),this.layerCount++;y.isSome(this._memCache)&&this._memCache.updateSize(this.key.id,this,this._memoryUsedByLayerData)}this._hasSymbolBuckets=
!1;for(const [,v]of this.layerData)v.type===u.BucketType.SYMBOL&&(this._hasSymbolBuckets=!0);f&&this.emit("symbols-changed")};q.attachWithContext=function(n){this.stage={context:n,trashDisplayObject(f){f.processDetach()},untrashDisplayObject(){return!1}}};q.setTransform=function(n){h.prototype.setTransform.call(this,n);var f=this.resolution/(n.resolution*n.pixelRatio);const v=this.width/this.rangeX*f;f*=this.height/this.rangeY;const t=[0,0];n.toScreen(t,[this.x,this.y]);const k=this.transforms.tileUnitsToPixels;
A.identity(k);A.translate(k,k,t);A.rotate(k,k,Math.PI*n.rotation/180);A.scale(k,k,[v,f,1])};q._createTransforms=function(){return{dvs:g.create(),tileMat3:g.create(),tileUnitsToPixels:g.create()}};m._destroyRenderBuckets=function(n){if(n){var f=new Set;n.forEach(v=>{f.has(v)||(v.destroy(),f.add(v))});n.clear()}};q._createRenderBuckets=function(n){const f=new Map,v=new Map;for(const t of n){n=this._deserializeBucket(t,v);for(const k of n.layerUIDs)f.set(k,n)}return f};q._deserializeBucket=function(n,
f){let v=f.get(n);if(v)return v;switch((new Uint32Array(n))[0]){case u.BucketType.FILL:v=new c.FillRenderBucket(n,this.styleRepository);break;case u.BucketType.LINE:v=new c.LineRenderBucket(n,this.styleRepository);break;case u.BucketType.SYMBOL:v=new c.SymbolRenderBucket(n,this.styleRepository,this);break;case u.BucketType.CIRCLE:v=new c.CircleRenderBucket(n,this.styleRepository)}f.set(n,v);return v};q._deleteLayerData=function(n){if(this.layerData.has(n)){var f=this.layerData.get(n);this._memoryUsedByLayerData-=
f.memoryUsed;f.destroy();this.layerData.delete(n);this.layerCount--}};F._createClass(m,[{key:"hasSymbolBuckets",get:function(){return this._hasSymbolBuckets}},{key:"isFading",get:function(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<d.FADE_DURATION}},{key:"isHoldingForFade",get:function(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<d.FADE_DURATION)}},{key:"wasRequested",get:function(){return"errored"===this.status||
"loaded"===this.status||"reloading"===this.status}},{key:"referenced",get:function(){return this._referenced}},{key:"memoryUsage",get:function(){return(this._memoryUsedByLayerData+256)/(this._referenced||1)}}]);return m}(a.TiledDisplayObject);const b=new Map;B.VectorTile=a;B.printAllocations=function(){b.forEach((h,m)=>{console.log(`\n${m.key}:`);h[0].forEach(q=>console.log(q));console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");h[1].forEach(q=>console.log(q))})};Object.defineProperties(B,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/RenderBucket":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./enums ./decluttering/util ../../../webgl/BufferObject ../../../webgl/enums ../../../webgl/VertexArrayObject".split(" "),function(B,F,y,A,g,u,c,d){let a=function(){function n(v,t){this.layerUIDs=[];this.isDestroyed=!1;this._data=v;this.memoryUsed=v.byteLength;let k=1;v=new Uint32Array(v);this.layerUIDs=[];const r=
v[k++];for(let C=0;C<r;C++)this.layerUIDs[C]=v[k++];this.bufferDataOffset=k;t&&(this.layer=t.getStyleLayerByUID(this.layerUIDs[0]))}var f=n.prototype;f.destroy=function(){this.isDestroyed||(this.doDestroy(),this.isDestroyed=!0)};f.prepareForRendering=function(v){y.isNone(this._data)||(this.doPrepareForRendering(v,this._data,this.bufferDataOffset),this._data=null)};F._createClass(n,[{key:"isPreparedForRendering",get:function(){return y.isNone(this._data)}},{key:"offset",get:function(){return this.bufferDataOffset}}]);
return n}(),b=function(n){function f(t,k){k=n.call(this,t,k)||this;k.type=A.BucketType.LINE;k.lineIndexStart=0;k.lineIndexCount=0;t=new Uint32Array(t);let r=k.bufferDataOffset;k.lineIndexStart=t[r++];k.lineIndexCount=t[r++];const C=t[r++];if(0<C){const G=new Map;for(let x=0;x<C;x++){const w=t[r++],D=t[r++],M=t[r++];G.set(w,[D,M])}k.patternMap=G}k.bufferDataOffset=r;return k}F._inheritsLoose(f,n);var v=f.prototype;v.hasData=function(){return 0<this.lineIndexCount};v.triangleCount=function(){return this.lineIndexCount/
3};v.doDestroy=function(){y.isSome(this.lineVertexArrayObject)&&this.lineVertexArrayObject.dispose();y.isSome(this.lineVertexBuffer)&&this.lineVertexBuffer.dispose();y.isSome(this.lineIndexBuffer)&&this.lineIndexBuffer.dispose();this.lineIndexBuffer=this.lineVertexBuffer=this.lineVertexArrayObject=null;this.memoryUsed=0};v.doPrepareForRendering=function(t,k,r){k=new Uint32Array(k);var C=new Int32Array(k.buffer);const G=k[r++];this.lineVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,
new Int32Array(C.buffer,4*r,G));r+=G;C=k[r++];this.lineIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,C));r+=C;r=this.layer.lineMaterial;this.lineVertexArrayObject=new d.VertexArrayObject(t,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.lineVertexBuffer},this.lineIndexBuffer)};return f}(a),h=function(n){function f(t,k){k=n.call(this,t,k)||this;k.type=A.BucketType.FILL;k.fillIndexStart=0;k.fillIndexCount=0;k.outlineIndexStart=0;k.outlineIndexCount=
0;t=new Uint32Array(t);let r=k.bufferDataOffset;k.fillIndexStart=t[r++];k.fillIndexCount=t[r++];k.outlineIndexStart=t[r++];k.outlineIndexCount=t[r++];const C=t[r++];if(0<C){const G=new Map;for(let x=0;x<C;x++){const w=t[r++],D=t[r++],M=t[r++];G.set(w,[D,M])}k.patternMap=G}k.bufferDataOffset=r;return k}F._inheritsLoose(f,n);var v=f.prototype;v.hasData=function(){return 0<this.fillIndexCount||0<this.outlineIndexCount};v.triangleCount=function(){return(this.fillIndexCount+this.outlineIndexCount)/3};
v.doDestroy=function(){y.isSome(this.fillVertexArrayObject)&&this.fillVertexArrayObject.dispose();y.isSome(this.fillVertexBuffer)&&this.fillVertexBuffer.dispose();y.isSome(this.fillIndexBuffer)&&this.fillIndexBuffer.dispose();this.fillIndexBuffer=this.fillVertexBuffer=this.fillVertexArrayObject=null;y.isSome(this.outlineVertexArrayObject)&&this.outlineVertexArrayObject.dispose();y.isSome(this.outlineVertexBuffer)&&this.outlineVertexBuffer.dispose();y.isSome(this.outlineIndexBuffer)&&this.outlineIndexBuffer.dispose();
this.outlineIndexBuffer=this.outlineVertexBuffer=this.outlineVertexArrayObject=null;this.memoryUsed=0};v.doPrepareForRendering=function(t,k,r){k=new Uint32Array(k);var C=new Int32Array(k.buffer),G=k[r++];this.fillVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,new Int32Array(C.buffer,4*r,G));r+=G;G=k[r++];this.fillIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,G));r+=G;G=k[r++];this.outlineVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,
new Int32Array(C.buffer,4*r,G));r+=G;C=k[r++];this.outlineIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,C));r+=C;k=this.layer;r=k.fillMaterial;k=k.outlineMaterial;this.fillVertexArrayObject=new d.VertexArrayObject(t,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.fillVertexBuffer},this.fillIndexBuffer);this.outlineVertexArrayObject=new d.VertexArrayObject(t,k.getAttributeLocations(),k.getLayoutInfo(),{geometry:this.outlineVertexBuffer},this.outlineIndexBuffer)};
return f}(a),m=function(n){function f(t,k,r){k=n.call(this,t,k)||this;k.type=A.BucketType.SYMBOL;k.iconPerPageElementsMap=new Map;k.glyphPerPageElementsMap=new Map;k.symbolInstances=[];k.isIconSDF=!1;k.opacityChanged=!1;k.lastOpacityUpdate=0;k.symbols=[];const C=new Uint32Array(t),G=new Int32Array(t);t=new Float32Array(t);let x=k.bufferDataOffset;k.isIconSDF=!!C[x++];var w=C[x++];for(var D=0;D<w;D++){var M=C[x++],O=C[x++],W=C[x++];k.iconPerPageElementsMap.set(M,[O,W])}w=C[x++];for(D=0;D<w;D++)M=C[x++],
O=C[x++],W=C[x++],k.glyphPerPageElementsMap.set(M,[O,W]);w=C[x++];D=C[x++];k.iconOpacity=new Int32Array(w);k.textOpacity=new Int32Array(D);x=g.deserializeSymbols(C,G,t,x,k.symbols,r);k.bufferDataOffset=x;return k}F._inheritsLoose(f,n);var v=f.prototype;v.hasData=function(){return 0<this.iconPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};v.triangleCount=function(){let t=0;for(const [,k]of this.iconPerPageElementsMap)t+=k[1];for(const [,k]of this.glyphPerPageElementsMap)t+=k[1];return t/
3};v.doDestroy=function(){y.isSome(this.iconVertexArrayObject)&&this.iconVertexArrayObject.dispose();y.isSome(this.iconVertexBuffer)&&this.iconVertexBuffer.dispose();y.isSome(this.iconOpacityBuffer)&&this.iconOpacityBuffer.dispose();y.isSome(this.iconIndexBuffer)&&this.iconIndexBuffer.dispose();this.iconIndexBuffer=this.iconOpacityBuffer=this.iconVertexBuffer=this.iconVertexArrayObject=null;y.isSome(this.textVertexArrayObject)&&this.textVertexArrayObject.dispose();y.isSome(this.textVertexBuffer)&&
this.textVertexBuffer.dispose();y.isSome(this.textOpacityBuffer)&&this.textOpacityBuffer.dispose();y.isSome(this.textIndexBuffer)&&this.textIndexBuffer.dispose();this.textIndexBuffer=this.textOpacityBuffer=this.textVertexBuffer=this.textVertexArrayObject=null;this.memoryUsed=0};v.updateOpacityInfo=function(){if(this.opacityChanged){this.opacityChanged=!1;var t=y.unwrap(this.iconOpacity),k=y.unwrap(this.iconOpacityBuffer);0<t.length&&t.byteLength===k.size&&k.setSubData(t,0,0,t.length);t=y.unwrap(this.textOpacity);
k=y.unwrap(this.textOpacityBuffer);0<t.length&&t.byteLength===k.size&&k.setSubData(t,0,0,t.length)}};v.doPrepareForRendering=function(t,k,r){k=new Uint32Array(k);var C=new Int32Array(k.buffer),G=k[r++];this.iconVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,new Int32Array(C.buffer,4*r,G));r+=G;G=k[r++];this.iconIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,G));r+=G;G=k[r++];this.textVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,
new Int32Array(C.buffer,4*r,G));r+=G;C=k[r++];this.textIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,C));r+=C;this.iconOpacityBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,y.unwrap(this.iconOpacity).buffer);this.textOpacityBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,y.unwrap(this.textOpacity).buffer);k=this.layer;r=k.iconMaterial;k=k.textMaterial;this.iconVertexArrayObject=new d.VertexArrayObject(t,r.getAttributeLocations(),r.getLayoutInfo(),
{geometry:this.iconVertexBuffer,opacity:this.iconOpacityBuffer},this.iconIndexBuffer);this.textVertexArrayObject=new d.VertexArrayObject(t,k.getAttributeLocations(),k.getLayoutInfo(),{geometry:this.textVertexBuffer,opacity:this.textOpacityBuffer},this.textIndexBuffer)};return f}(a),q=function(n){function f(t,k){k=n.call(this,t,k)||this;k.type=A.BucketType.CIRCLE;k.circleIndexStart=0;k.circleIndexCount=0;t=new Uint32Array(t);let r=k.bufferDataOffset;k.circleIndexStart=t[r++];k.circleIndexCount=t[r++];
k.bufferDataOffset=r;return k}F._inheritsLoose(f,n);var v=f.prototype;v.hasData=function(){return 0<this.circleIndexCount};v.triangleCount=function(){return this.circleIndexCount/3};v.doDestroy=function(){y.isSome(this.circleVertexArrayObject)&&this.circleVertexArrayObject.dispose();y.isSome(this.circleVertexBuffer)&&this.circleVertexBuffer.dispose();y.isSome(this.circleIndexBuffer)&&this.circleIndexBuffer.dispose();this.circleIndexBuffer=this.circleVertexBuffer=this.circleVertexArrayObject=null;
this.memoryUsed=0};v.doPrepareForRendering=function(t,k,r){k=new Uint32Array(k);var C=new Int32Array(k.buffer);const G=k[r++];this.circleVertexBuffer=u.BufferObject.createVertex(t,c.Usage.STATIC_DRAW,new Int32Array(C.buffer,4*r,G));r+=G;C=k[r++];this.circleIndexBuffer=u.BufferObject.createIndex(t,c.Usage.STATIC_DRAW,new Uint32Array(k.buffer,4*r,C));r+=C;r=this.layer.circleMaterial;this.circleVertexArrayObject=new d.VertexArrayObject(t,r.getAttributeLocations(),r.getLayoutInfo(),{geometry:this.circleVertexBuffer},
this.circleIndexBuffer)};return f}(a);B.CircleRenderBucket=q;B.FillRenderBucket=h;B.LineRenderBucket=b;B.RenderBucketBase=a;B.SymbolRenderBucket=m;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/util":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../enums","./core"],function(B,F,y,A,g){let u=function(a){this.tile=a;this.parent=null;this.children=
new Set},c=function(){function a(){this.nodes=new Map;this.roots=new Set}var b=a.prototype;b.create=function(h){const m=new u(h);let q;const n=[];this.nodes.forEach(f=>{this._canConnectDirectly(m,f)&&n.push(f);!q&&this._canConnectDirectly(f,m)&&(q=f)});if(q){for(const f of n)q.children.delete(f),m.children.add(f),f.parent=m;q.children.add(m);m.parent=q}else{this.roots.add(m);for(const f of n)m.children.add(f),f.parent=m,this.roots.delete(f)}this.nodes.set(h.key.id,m);return m};b.destroy=function(h){y.isSome(h.parent)?
(h.parent.children.delete(h),h.children.forEach(m=>{y.isSome(h.parent)&&h.parent.children.add(m)})):this.roots.delete(h);h.children.forEach(m=>{(m.parent=h.parent)||this.roots.add(m)});this.nodes.delete(h.tile.key.id)};b.clear=function(){this.roots.clear();this.nodes.clear()};b._canConnectDirectly=function(h,m){let {level:q,row:n,col:f}=m.tile.key;for({world:m}=m.tile.key;0<q;){q--;n>>=1;f>>=1;if(h.tile.key.level===q&&h.tile.key.row===n&&h.tile.key.col===f&&h.tile.key.world===m)return!0;if(this.nodes.has(`${q}/${n}/${f}/${m}`))break}return!1};
return a}(),d=function(){function a(h,m,q){this._rows=Math.ceil(m/q);this._columns=Math.ceil(h/q);this._cellSize=q;this.cells=Array(this._rows);for(h=0;h<this._rows;h++)for(this.cells[h]=Array(this._columns),m=0;m<this._columns;m++)this.cells[h][m]=[]}var b=a.prototype;b.getCell=function(h,m){m=Math.min(Math.max(Math.floor(m/this._cellSize),0),this._rows-1);h=Math.min(Math.max(Math.floor(h/this._cellSize),0),this._columns-1);return this.cells[m]&&this.cells[m][h]||null};b.getCellSpan=function(h,m,
q,n){return[Math.min(Math.max(Math.floor(h/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(m/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(q/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(n/this._cellSize),0),this.rows-1)]};F._createClass(a,[{key:"cellSize",get:function(){return this._cellSize}},{key:"columns",get:function(){return this._columns}},{key:"rows",get:function(){return this._rows}}]);return a}();B.GridIndex=d;B.TileGraph=c;B.TileNode=u;B.deserializeSymbols=
function(a,b,h,m,q,n){const f=b[m++];for(let k=0;k<f;k++){const r=new g.VTLSymbol(n);r.xTile=b[m++];r.yTile=b[m++];r.hash=b[m++];r.priority=b[m++];var v=b[m++];for(var t=0;t<v;t++){const C=b[m++],G=b[m++],x=b[m++],w=b[m++],D=!!b[m++],M=b[m++],O=h[m++],W=h[m++],Q=b[m++],U=b[m++];r.colliders.push({xTile:C,yTile:G,dxPixels:x,dyPixels:w,hard:D,partIndex:M,width:Q,height:U,minLod:O,maxLod:W})}v=a[m++];for(t=0;t<v;t++)r.textVertexRanges.push([a[m++],a[m++]]);v=a[m++];for(t=0;t<v;t++)r.iconVertexRanges.push([a[m++],
a[m++]]);q.push(r)}return m};B.tileCoordChange=function(a,b,h,m,q,n){h-=q;if(0<=h)return(b>>h)+(m-(n<<h))*(a>>h);h=-h;return b-(n-(m<<h))*(a>>h)<<h};B.writeOpacityToBuffers=function(a,b,h){for(const [k,r]of a.symbols){{var m=a,q=b,n=h,f=r;const C=m.layerData.get(k);if(C.type===A.BucketType.SYMBOL){for(const G of f){f=G.unique;var v=void 0;if(G.selectedForRendering){var t=f.parts[0];v=t.startOpacity;t=t.targetOpacity;m.allSymbolsFadingOut=m.allSymbolsFadingOut&&0===t;v=n?Math.floor(127*v)|t<<7:t?255:
0;v|=v<<24|v<<16|v<<8}else v=0;for(const [x,w]of G.iconVertexRanges)for(t=x;t<x+w;t+=4)C.iconOpacity[t/4]=v;G.selectedForRendering?(v=f.parts[1],f=v.startOpacity,v=v.targetOpacity,m.allSymbolsFadingOut=m.allSymbolsFadingOut&&0===v,f=n?Math.floor(127*f)|v<<7:v?255:0,v=f<<24|f<<16|f<<8|f):v=0;for(const [x,w]of G.textVertexRanges)for(f=x;f<x+w;f+=4)C.textOpacity[f/4]=v}C.lastOpacityUpdate=q;C.opacityChanged=!0}}}};Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/decluttering/core":function(){define(["exports"],function(B){B.VTLSymbol=function(F){this.hash=this.yTile=this.xTile=0;this.priority=1;this.colliders=[];this.textVertexRanges=[];this.iconVertexRanges=[];this.tile=F};B.VTLUniqueSymbol=function(){this.tileSymbols=[];this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}];this.show=!1};Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/VectorTileContainer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/promiseUtils ../../../../geometry/support/aaBoundingRect ./decluttering/SymbolFader ./style/StyleDefinition ../webgl/enums ../webgl/RenderableTile ../webgl/TileContainer ../../tiling/TileCoverage ../../tiling/TileKey ../../../webgl/enums".split(" "),function(B,F,y,A,g,u,c,d,a,b,h,m,q){function n(f,v){if(f){const t=f.getLayoutProperty("visibility");
if(!t||t.getValue()!==c.Visibility.NONE&&(void 0===f.minzoom||f.minzoom<v+1E-6)&&(void 0===f.maxzoom||f.maxzoom>=v-1E-6))return!0}return!1}b=function(f){function v(k){k=f.call(this,k)||this;k._backgroundTiles=[];k._pointToCallbacks=new Map;return k}F._inheritsLoose(v,f);var t=v.prototype;t.destroy=function(){this.removeAllChildren();this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null);y.isSome(this._symbolFader)&&
(this._symbolFader.clear(),this._symbolFader=null);this._styleRepository=null;this._backgroundTiles=[];this._pointToCallbacks.clear()};t.setStyleResources=function(k,r,C){this._spriteMosaic=k;this._glyphMosaic=r;this._styleRepository=C;y.isNone(this._symbolFader)&&(k=new u.SymbolFader(this._styleRepository,this.children),k.on("fade-start",()=>{this.emit("fade-start");this.requestRender()}),k.on("fade-complete",()=>{this.emit("fade-complete");this.requestRender()}),this._symbolFader=k);y.unwrap(this._symbolFader).styleRepository=
C};t.setSpriteMosaic=function(k){this._spriteMosaic.dispose();this._spriteMosaic=k};t.deleteStyleLayers=function(k){y.isSome(this._symbolFader)&&this._symbolFader.deleteStyleLayers(k)};t.hitTest=function(){var k=F._asyncToGenerator(function*(r){const C=A.createResolver();this._pointToCallbacks.set(r,C);this.requestRender();return C.promise});return function(r){return k.apply(this,arguments)}}();t.enterTileInvalidation=function(){for(const k of this.children)k.invalidating=!0};t.createRenderParams=
function(k){return{...f.prototype.createRenderParams.call(this,k),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}};t.doRender=function(k){!this.visible||k.drawPhase!==d.WGLDrawPhase.MAP&&k.drawPhase!==d.WGLDrawPhase.DEBUG||void 0===this._spriteMosaic||f.prototype.doRender.call(this,k)};t.addChild=function(k){f.prototype.addChild.call(this,k);y.isSome(this._symbolFader)?this._symbolFader.addTile(k):k.decluttered=
!0;this.requestRender();return k};t.removeChild=function(k){y.isSome(this._symbolFader)&&this._symbolFader.removeTile(k);this.requestRender();return f.prototype.removeChild.call(this,k)};t.renderChildren=function(k){const {drawPhase:r}=k;if(r===d.WGLDrawPhase.DEBUG)f.prototype.renderChildren.call(this,k);else if(this._doRender(k),0<this._pointToCallbacks.size){k.drawPhase=d.WGLDrawPhase.HITTEST;const C=k.painter.effects.hittestVTL;C.bind(k);this._doRender(k);C.draw(k,this._pointToCallbacks);C.unbind(k);
k.drawPhase=r}};t.removeAllChildren=function(){for(let k=0;k<this.children.length;k++){const r=this.children[k];y.isSome(this._symbolFader)&&this._symbolFader.removeTile(r);r.dispose()}f.prototype.removeAllChildren.call(this)};t.getStencilTarget=function(){return this.children.filter(k=>k.neededForCoverage&&k.hasData())};t.restartDeclutter=function(){y.isSome(this._symbolFader)&&this._symbolFader.restartDeclutter()};t._doRender=function(k){const {context:r}=k;var C=this._styleRepository;if(C){var G=
C.layers,x=!0;k.drawPhase===d.WGLDrawPhase.HITTEST&&(x=!1);0<C.backgroundBucketIds.length&&(k.renderPass="background",this._renderBackgroundLayers(k,C.backgroundBucketIds));f.prototype.renderChildren.call(this,k);k.drawPhase===d.WGLDrawPhase.MAP&&this._fade(k.displayLevel,k.state);if((C=this.children.filter(D=>D.visible&&D.hasData()))&&0!==C.length){for(var w of C)w.triangleCount=0;r.setStencilWriteMask(0);r.setColorMask(!0,!0,!0,!0);r.setStencilOp(q.StencilOperation.KEEP,q.StencilOperation.KEEP,
q.StencilOperation.REPLACE);r.setStencilTestEnabled(!0);r.setBlendingEnabled(!1);r.setDepthTestEnabled(!0);r.setDepthWriteEnabled(!0);r.setDepthFunction(q.CompareFunction.LEQUAL);r.setClearDepth(1);r.clear(r.gl.DEPTH_BUFFER_BIT);k.renderPass="opaque";for(w=G.length-1;0<=w;w--)this._renderStyleLayer(G[w],k,C);r.setDepthWriteEnabled(!1);r.setBlendingEnabled(x);r.setBlendFunctionSeparate(q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA,q.BlendFactor.ONE,q.BlendFactor.ONE_MINUS_SRC_ALPHA);k.renderPass=
"translucent";for(x=0;x<G.length;x++)this._renderStyleLayer(G[x],k,C)}r.bindVAO();r.setStencilTestEnabled(!0);r.setBlendingEnabled(!0)}};t._fade=function(k,r){y.isSome(this._symbolFader)&&(this._symbolFader.update(k,r)||this.requestRender())};t._renderStyleLayer=function(k,r,C){const {painter:G,renderPass:x}=r;if(void 0!==k){var w=k.getLayoutProperty("visibility");if(!w||w.getValue()!==c.Visibility.NONE){switch(k.type){case c.StyleLayerType.BACKGROUND:return;case c.StyleLayerType.FILL:if("opaque"!==
x&&"translucent"!==r.renderPass)return;var D="vtlFill";break;case c.StyleLayerType.LINE:if("translucent"!==x)return;D="vtlLine";break;case c.StyleLayerType.CIRCLE:if("translucent"!==x)return;D="vtlCircle";break;case c.StyleLayerType.SYMBOL:if("translucent"!==x)return;D="vtlSymbol"}C=k.type===c.StyleLayerType.SYMBOL?C.filter(M=>M.decluttered):C.filter(M=>M.neededForCoverage);if("vtlSymbol"!==D&&(w=r.displayLevel,0===C.length||void 0!==k.minzoom&&k.minzoom>=w+1E-6||void 0!==k.maxzoom&&k.maxzoom<w-1E-6))return;
w=k.uid;r.styleLayerUID=w;r.styleLayer=k;for(const M of C)if(M.layerData.has(w)){G.renderObjects(r,C,D);break}}}};t._renderBackgroundLayers=function(k,r){const {context:C,displayLevel:G,painter:x,state:w}=k,D=this._styleRepository;var M=!1;for(var O of r)if(D.getLayerById(O).type===c.StyleLayerType.BACKGROUND&&n(D.getLayerById(O),G)){M=!0;break}if(M){M=this._tileInfoView.getTileCoverage(k.state,0,"smallest");var {spans:W,lodInfo:Q}=M,{level:U}=Q,P=g.create();O=[];if(this._renderPasses){var L=this._renderPasses[0];
y.isSome(this._clippingInfos)&&(L.brushes[0].prepareState(k),L.brushes[0].drawMany(k,this._clippingInfos))}L=this._backgroundTiles;var K=0;for(const {row:J,colFrom:S,colTo:R}of W)for(let ba=S;ba<=R;ba++){if(K<L.length){var H=L[K];H.key.set(U,J,Q.normalizeCol(ba),Q.getWorldForColumn(ba));this._tileInfoView.getTileBounds(P,H.key,!1);H.x=P[0];H.y=P[3];H.resolution=this._tileInfoView.getTileResolution(U)}else{H=new m(U,J,Q.normalizeCol(ba),Q.getWorldForColumn(ba));const Z=this._tileInfoView.getTileBounds(g.create(),
H),Y=this._tileInfoView.getTileResolution(U);H=new a.RenderableTile(H,Y,Z[0],Z[3],512,512,4096,4096);L.push(H)}H.setTransform(w);O.push(H);K++}C.setStencilWriteMask(0);C.setColorMask(!0,!0,!0,!0);C.setStencilOp(q.StencilOperation.KEEP,q.StencilOperation.KEEP,q.StencilOperation.REPLACE);C.setStencilFunction(q.CompareFunction.EQUAL,0,255);U=!0;k.drawPhase===d.WGLDrawPhase.HITTEST&&(U=!1);C.setStencilTestEnabled(U);for(const J of r)r=D.getLayerById(J),r.type===c.StyleLayerType.BACKGROUND&&n(r,G)&&(k.styleLayerUID=
r.uid,k.styleLayer=r,x.renderObjects(k,O,"vtlBackground"));h.pool.release(M)}};return v}(b);B.VectorTileContainer=b;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolFader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/maybe ./config ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),
function(B,F,y,A,g,u,c,d,a,b,h){y=function(m){function q(f,v){var t=m.call(this)||this;t.styleRepository=f;t._tileToHandle=new Map;t._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]};t._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]};t._completed=!1;t._symbolRepository=new a.SymbolRepository(4096,v,()=>new u.VTLUniqueSymbol);t._symbolDeclutterer=new d.SymbolDeclutterer(v,t._symbolRepository,(k,r,C)=>new c.CollisionJob(k,r,C,t.styleRepository,t._zoom,t._viewState.rotation),(k,
r)=>{k.allSymbolsFadingOut=!0;k.lastOpacityUpdate=r;b.writeOpacityToBuffers(k,r,!0);k.decluttered=!0;k.requestRender()},(k,r)=>t.styleRepository.getStyleLayerByUID(k.styleLayerUID).z-t.styleRepository.getStyleLayerByUID(r.styleLayerUID).z,k=>{k=t.styleRepository.getStyleLayerByUID(k);return t._zoom+1E-6<k.minzoom||t._zoom-1E-6>=k.maxzoom?!1:(k=k.getLayoutProperty("visibility"))&&k.getValue()===h.Visibility.NONE?!1:!0});return t}F._inheritsLoose(q,m);var n=q.prototype;n.addTile=function(f){f.decluttered=
!1;this._tileToHandle.set(f,f.on("symbols-changed",()=>{this._symbolRepository.add(f);this.restartDeclutter()}));this._symbolRepository.add(f);this.restartDeclutter()};n.removeTile=function(f){const v=this._tileToHandle.get(f);v&&(this._symbolRepository.removeTile(f),this.restartDeclutter(),v.remove(),this._tileToHandle.delete(f))};n.update=function(f,v){this._zoom=f;this._viewState={scale:v.scale,rotation:v.rotation,center:[v.center[0],v.center[1]],size:[v.size[0],v.size[1]]};this._continueDeclutter();
return this._completed};n.restartDeclutter=function(){this._completed=!1;this._symbolDeclutterer.restart();this._notifyUnstable()};n.clear=function(){this._completed=!1;this._symbolRepository=null;this._symbolDeclutterer.restart();this._tileToHandle.forEach(f=>f.remove());this._tileToHandle.clear()};n.deleteStyleLayers=function(f){this._symbolRepository.deleteStyleLayers(f)};n._continueDeclutter=function(){if(!this._completed||this.stale)this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,
this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),(this._completed=this._symbolDeclutterer.continue(g.DECLUTTER_BUDGET))&&
this._scheduleNotifyStable()};n._scheduleNotifyStable=function(){A.isSome(this._stableNotificationHandle)&&clearTimeout(this._stableNotificationHandle);this._stableNotificationHandle=setTimeout(()=>{this._stableNotificationHandle=null;this.emit("fade-complete")},1.5*g.FADE_DURATION)};n._notifyUnstable=function(){A.isSome(this._stableNotificationHandle)&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null);this.emit("fade-start")};F._createClass(q,[{key:"stale",get:function(){return this._zoom!==
this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}}]);return q}(y);B.SymbolFader=y;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define(["exports","../../../../../chunks/mat3f32","./config",
"./util","../style/StyleDefinition"],function(B,F,y,A,g){let u=function(){function c(a,b,h,m,q,n){this._symbols=a;this._styleRepository=m;this._zoom=q;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new A.GridIndex(b,h,y.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*n/180);this._co=Math.cos(Math.PI*n/180);for(const f of a)for(const v of f.symbols)this._allNeededMatrices.has(v.tile)||this._allNeededMatrices.set(v.tile,
F.clone(v.tile.transforms.tileUnitsToPixels))}var d=c.prototype;d.work=function(a){const b=this._gridIndex,h=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const x=this._symbols[this._currentLayerCursor],w=this._getProperties(x.styleLayerUID);for(;this._currentSymbolCursor<x.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-h>a)return!1;var m=x.symbols[this._currentSymbolCursor];
if(!m.unique.show)continue;var q=m,n=this._si,f=this._co,v=this._allNeededMatrices.get(m.tile),t=this._zoom;const {iconRotationAlignment:D,textRotationAlignment:M,iconTranslate:O,iconTranslateAnchor:W,textTranslate:Q,textTranslateAnchor:U}=w;var k=0;for(const J of q.colliders){const [S,R]=0===J.partIndex?O:Q;var r=0===J.partIndex?W:U,C=J.minLod<=t&&t<=J.maxLod;k+=C?0:1;J.enabled=C;J.xScreen=J.xTile*v[0]+J.yTile*v[3]+v[6];J.yScreen=J.xTile*v[1]+J.yTile*v[4]+v[7];r===g.TranslateAnchor.MAP?(J.xScreen+=
f*S-n*R,J.yScreen+=n*S+f*R):(J.xScreen+=S,J.yScreen+=R);g.RotationAlignment.VIEWPORT===(0===J.partIndex?D:M)?(J.dxScreen=J.dxPixels,J.dyScreen=J.dyPixels):(J.dxScreen=f*(J.dxPixels+J.width/2)-n*(J.dyPixels+J.height/2)-J.width/2,J.dyScreen=n*(J.dxPixels+J.width/2)+f*(J.dyPixels+J.height/2)-J.height/2)}0<q.colliders.length&&k===q.colliders.length&&(q.unique.show=!1);q=m.unique;if(!q.show)continue;const {iconAllowOverlap:P,iconIgnorePlacement:L,textAllowOverlap:K,textIgnorePlacement:H}=w;for(const J of m.colliders)if(J.enabled&&
(n=q.parts[J.partIndex],n.show)){if(f=!(J.partIndex?K:P))a:{f=J.xScreen+J.dxScreen;v=J.yScreen+J.dyScreen;t=f+J.width;k=v+J.height;const [S,R,ba,Z]=b.getCellSpan(f,v,t,k);for(r=R;r<=Z;r++)for(C=S;C<=ba;C++){var G=b.cells[r][C];for(const Y of G){G=Y.xScreen+Y.dxScreen;const ea=Y.yScreen+Y.dyScreen,V=G+Y.width,aa=ea+Y.height;if(!(t<G||f>V||k<ea||v>aa)){f=!0;break a}}}f=!1}f&&(J.hard?q.show=!1:n.show=!1)}if(q.show)for(const J of m.colliders){if(!J.enabled)continue;if(J.partIndex?H:L)continue;if(!q.parts[J.partIndex].show)continue;
m=J.xScreen+J.dxScreen;n=J.yScreen+J.dyScreen;const [S,R,ba,Z]=this._gridIndex.getCellSpan(m,n,m+J.width,n+J.height);for(m=R;m<=Z;m++)for(n=S;n<=ba;n++)this._gridIndex.cells[m][n].push(J)}}}return!0};d._getProperties=function(a){var b=this._styleProps.get(a);if(b)return b;b=this._zoom;const h=this._styleRepository.getStyleLayerByUID(a);var m=h.getLayoutValue("symbol-placement",b)!==g.SymbolPlacement.POINT;let q=h.getLayoutValue("icon-rotation-alignment",b);q===g.RotationAlignment.AUTO&&(q=m?g.RotationAlignment.MAP:
g.RotationAlignment.VIEWPORT);let n=h.getLayoutValue("text-rotation-alignment",b);n===g.RotationAlignment.AUTO&&(n=m?g.RotationAlignment.MAP:g.RotationAlignment.VIEWPORT);m=h.getPaintValue("icon-translate",b);const f=h.getPaintValue("icon-translate-anchor",b),v=h.getPaintValue("text-translate",b),t=h.getPaintValue("text-translate-anchor",b);b={iconAllowOverlap:h.getLayoutValue("icon-allow-overlap",b),iconIgnorePlacement:h.getLayoutValue("icon-ignore-placement",b),textAllowOverlap:h.getLayoutValue("text-allow-overlap",
b),textIgnorePlacement:h.getLayoutValue("text-ignore-placement",b),iconRotationAlignment:q,textRotationAlignment:n,iconTranslateAnchor:f,iconTranslate:m,textTranslateAnchor:t,textTranslate:v};this._styleProps.set(a,b);return b};return c}();B.CollisionJob=u;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"./config"],function(B,F,y,A){function g(c,d){if(c.priority-d.priority)return c.priority-d.priority;const a=c.tile.key,b=d.tile.key;return a.world-b.world?a.world-b.world:a.level-b.level?a.level-b.level:a.row-b.row?a.row-b.row:a.col-b.col?a.col-b.col:c.xTile-d.xTile?c.xTile-d.xTile:c.yTile-d.yTile}let u=function(){function c(a,b,h,m,q,n){this._visibleTiles=a;this._symbolRepository=b;this._createCollisionJob=h;this._assignTileSymbolsOpacity=m;this._symbolLayerSorter=q;this._isLayerVisible=n;this._selectionJob=
null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var d=c.prototype;d.setScreenSize=function(a,b){this._screenWidth===a&&this._screenHeight===b||this.restart();this._screenWidth=a;this._screenHeight=b};d.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=
!0};d.continue=function(a){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var b=performance.now();if(!this._selectionJob.work(a))return!1;this._selectionJobCompleted=!0;a=Math.max(0,a-(performance.now()-b));if(0===a)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){b=performance.now();if(!this._collisionJob.work(a))return!1;
this._collisionJobCompleted=!0;a=Math.max(0,a-(performance.now()-b));if(0===a)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){b=performance.now();if(!this._opacityJob.work(a))return!1;this._opacityJobCompleted=!0;a=Math.max(0,a-(performance.now()-b));if(0===a)return!1}this._running=!1;return!0};d._createSelectionJob=function(){const a=this._symbolRepository.uniqueSymbols;for(let f=0;f<a.length;f++){const v=a[f];for(let t=0;t<v.uniqueSymbols.length;t++){const k=
v.uniqueSymbols[t];for(const r of k.tileSymbols)r.selectedForRendering=!1}}const b=[];let h=0,m=0;const q=this._isLayerVisible,n=this._symbolLayerSorter;return{work:function(f){const v=performance.now();for(;m<a.length;m++,h=0){const k=a[m];var t=k.styleLayerUID;if(!q(t)){b[m]||(b[m]={styleLayerUID:t,symbols:[]});continue}b[m]=b[m]||{styleLayerUID:t,symbols:[]};const r=b[m];for(;h<k.uniqueSymbols.length;h++){t=k.uniqueSymbols[h];if(99===h%100&&performance.now()-v>f)return!1;let C=null,G=!1,x=!1;for(const w of t.tileSymbols)if(!x||
!G){const D=w.tile;if(!C||D.isCoverage||D.neededForCoverage&&!G){C=w;if(D.neededForCoverage||D.isCoverage)x=!0;D.isCoverage&&(G=!0)}}C.selectedForRendering=!0;if(x){r.symbols.push(C);t.show=!0;for(const w of t.parts)w.show=!0}else t.show=!1}}for(const k of b)k.symbols.sort(g);return!0},get sortedSymbols(){return b.sort(n)}}};d._createOpacityJob=function(){function a(q,n){var f=q.symbols;for(const [,t]of f){var v=t;f=n;for(const k of v){v=k.unique;for(const r of v.parts)r.startOpacity+=(f-r.startTime)/
A.FADE_DURATION*(.5<r.targetOpacity?1:-1),r.startOpacity=Math.min(Math.max(r.startOpacity,0),1),r.startTime=f,r.targetOpacity=v.show&&r.show?1:0}}b(q,n);for(const t of q.childrenTiles)a(t,n)}const b=this._assignTileSymbolsOpacity,h=this._visibleTiles;let m=0;return{work(q){const n=performance.now();for(;m<h.length;m++){if(performance.now()-n>q)return!1;const f=h[m];if(y.isSome(f.parentTile))continue;const v=performance.now();a(f,v)}return!0}}};F._createClass(c,[{key:"running",get:function(){return this._running}}]);
return c}();B.SymbolDeclutterer=u;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(B,F,y,A){let g=function(){function u(d,a,b){this.tileCoordRange=d;this._visibleTiles=a;this._createUnique=b;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var c=u.prototype;
c.add=function(d,a){this._uniqueSymbolLayerArray=null;let b=this._tiles.get(d.id);b||(b={symbols:new Map},this._tiles.set(d.id,b));var h=new Map;if(a)for(var m of a)b.symbols.has(m)&&(h.set(m,b.symbols.get(m)),b.symbols.delete(m));else for(var [q]of d.layerData)b.symbols.has(q)&&(h.set(q,b.symbols.get(q)),b.symbols.delete(q));this._removeSymbols(h);a=d.symbols;h=new Map;for(const [n,f]of a)if(m=f.length,32<=m){q=this.tileCoordRange;do q/=2,m/=4;while(8<m&&64<q);m=new A.GridIndex(this.tileCoordRange,
this.tileCoordRange,q);h.set(n,{flat:f,index:m});b.symbols.set(n,{flat:f,index:m});for(const v of f)m.getCell(v.xTile,v.yTile).push(v)}else h.set(n,{flat:f}),b.symbols.set(n,{flat:f});this._addSymbols(d.key,a)};c.deleteStyleLayers=function(d){this._uniqueSymbolLayerArray=null;for(const [a,b]of this._tiles){const h=new Map;for(const m of d)b.symbols.has(m)&&(h.set(m,b.symbols.get(m)),b.symbols.delete(m));this._removeSymbols(h);0===b.symbols.size&&this._tiles.delete(a)}};c.removeTile=function(d){this._uniqueSymbolLayerArray=
null;const a=this._tiles.get(d.id);if(a){var b=new Map;for(const [h]of d.symbols)a.symbols.has(h)&&(b.set(h,a.symbols.get(h)),a.symbols.delete(h));this._removeSymbols(b);0===a.symbols.size&&this._tiles.delete(d.id)}};c._removeSymbols=function(d){for(const [b,{flat:h}]of d)for(const m of h){d=m.unique;var a=d.tileSymbols;const q=a.length-1;for(let n=0;n<q;n++)if(a[n]===m){a[n]=a[q];break}a.length=q;0===q&&(a=this._uniqueSymbolsReferences.get(b),a.delete(d),0===a.size&&this._uniqueSymbolsReferences.delete(b));
m.unique=null}};c._addSymbols=function(d,a){if(0!==a.size){var b=this._visibleTiles;for(const h of b)h.parentTile||h.key.world!==d.world||h.key.level===d.level&&!h.key.equals(d)||this._matchSymbols(h,d,a);for(const [h,m]of a)for(const q of m)y.isNone(q.unique)&&(d=this._createUnique(),q.unique=d,d.tileSymbols.push(q),a=this._uniqueSymbolsReferences.get(h),a||(a=new Set,this._uniqueSymbolsReferences.set(h,a)),a.add(d))}};c._matchSymbols=function(d,a,b){if(d.key.level>a.level){var h=d.key.level-a.level;
if(d.key.row>>h!==a.row||d.key.col>>h!==a.col)return}if(a.level>d.key.level&&(h=a.level-d.key.level,a.row>>h!==d.key.row||a.col>>h!==d.key.col))return;if(a.equals(d.key))for(var m of d.childrenTiles)this._matchSymbols(m,a,b);else{m=new Map;for(const [f,v]of b){var q=[];for(const k of v)b=A.tileCoordChange(this.tileCoordRange,k.xTile,a.level,a.col,d.key.level,d.key.col),h=A.tileCoordChange(this.tileCoordRange,k.yTile,a.level,a.row,d.key.level,d.key.row),0<=b&&b<this.tileCoordRange&&0<=h&&h<this.tileCoordRange&&
q.push({symbol:k,xTransformed:b,yTransformed:h});b=[];h=d.key.level<a.level?1:1<<d.key.level-a.level;const t=this._tiles.get(d.id).symbols.get(f);if(t){const k=t.flat;for(const r of q){var n=!1;let C;const G=r.xTransformed,x=r.yTransformed;C=y.isSome(t.index)?t.index.getCell(G,x):k;q=r.symbol;const w=q.hash;for(const D of C)if(w===D.hash&&Math.abs(G-D.xTile)<=h&&Math.abs(x-D.yTile)<=h){n=D.unique;q.unique=n;n.tileSymbols.push(q);n=!0;break}n||b.push(q)}}0<b.length&&m.set(f,b)}for(const f of d.childrenTiles)this._matchSymbols(f,
a,m)}};c._createUniqueSymbolLayerArray=function(){var d=this._uniqueSymbolsReferences;const a=Array(d.size);let b=0;for(const [h,m]of d){const q=Array(m.size);d=0;for(const n of m)q[d++]=n;a[b]={styleLayerUID:h,uniqueSymbols:q};b++}return a};F._createClass(u,[{key:"uniqueSymbols",get:function(){y.isNone(this._uniqueSymbolLayerArray)&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return u}();B.SymbolRepository=g;Object.defineProperties(B,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/RenderableTile":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat3f32","./TiledDisplayObject"],function(B,F,y,A){A=function(g){function u(){return g.apply(this,arguments)||this}F._inheritsLoose(u,g);u.prototype._createTransforms=function(){return{dvs:y.create(),tileMat3:y.create()}};return u}(A.TiledDisplayObject);B.RenderableTile=A;Object.defineProperties(B,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(B,F){return function(){function y(g){this._style=g;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;g.layers||(g.layers=[]);this.version=parseFloat(g.version);if(this.layers=g.layers.map((u,c,d)=>this._create(u,c,d)).filter(u=>!!u))for(let u=0;u<this.layers.length;u++)g=
this.layers[u],this._layerByName[g.id]=g,this._uidToLayer.set(g.uid,g),g.type===B.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(g.id);this._identifyRefLayers()}var A=y.prototype;A.isPainterDataDriven=function(g){return(g=this._layerByName[g])?g.isPainterDataDriven():!1};A.getStyleLayerId=function(g){return g>=this.layers.length?null:this.layers[g].id};A.getStyleLayerByUID=function(g){return this._uidToLayer.get(g)??null};A.getStyleLayerIndex=function(g){return(g=this._layerByName[g])?this.layers.indexOf(g):
-1};A.setStyleLayer=function(g,u){if(g&&g.id){var c=this._style;null!=u&&u>=this.layers.length&&(u=this.layers.length-1);var d=!0,a;if(a=this._layerByName[g.id]){const b=this.layers.indexOf(a);u||(u=b);u===b?(d=!1,a=y._recreateLayer(g,a),this.layers[u]=a,c.layers[u]=g):(this.layers.splice(b,1),c.layers.splice(b,1),a=this._create(g,u,this.layers),this.layers.splice(u,0,a),c.layers.splice(u,0,g))}else a=this._create(g,u,this.layers),!u||u>=this.layers.length?(this.layers.push(a),c.layers.push(g)):(this.layers.splice(u,
0,a),c.layers.splice(u,0,g));this._layerByName[g.id]=a;this._uidToLayer.set(a.uid,a);d&&this._recomputeZValues();this._identifyRefLayers()}};A.getStyleLayer=function(g){return(g=this._layerByName[g])?{type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:g.layout,paint:g.paint}:null};A.deleteStyleLayer=function(g){const u=this._layerByName[g];u&&(delete this._layerByName[g],this._uidToLayer.delete(u.uid),g=this.layers.indexOf(u),
this.layers.splice(g,1),this._style.layers.splice(g,1),this._recomputeZValues(),this._identifyRefLayers())};A.getLayerById=function(g){return this._layerByName[g]};A.getLayoutProperties=function(g){return(g=this._layerByName[g])?g.layout:null};A.getPaintProperties=function(g){return(g=this._layerByName[g])?g.paint:null};A.setPaintProperties=function(g,u){if(g=this._layerByName[g]){var c=y._recreateLayer({type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,
filter:g.filter,layout:g.layout,paint:u},g),d=this.layers.indexOf(g);this.layers[d]=c;this._style.layers[d].paint=u;this._layerByName[g.id]=c;this._uidToLayer.set(g.uid,c)}};A.setLayoutProperties=function(g,u){if(g=this._layerByName[g]){var c=y._recreateLayer({type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:u,paint:g.paint},g),d=this.layers.indexOf(g);this.layers[d]=c;this._style.layers[d].layout=u;this._layerByName[g.id]=
c;this._uidToLayer.set(g.uid,c)}};A.setStyleLayerVisibility=function(g,u){if(g=this._layerByName[g]){var c=g.layout||{};c.visibility=u;u=y._recreateLayer({type:g.typeName,id:g.id,source:g.source,"source-layer":g.sourceLayer,minzoom:g.minzoom,maxzoom:g.maxzoom,filter:g.filter,layout:c,paint:g.paint},g);var d=this.layers.indexOf(g);this.layers[d]=u;this._style.layers[d].layout=c;this._layerByName[g.id]=u;this._uidToLayer.set(g.uid,u)}};A.getStyleLayerVisibility=function(g){return(g=this._layerByName[g])?
g.layout?.visibility??"visible":"none"};A._recomputeZValues=function(){const g=this.layers,u=1/(g.length+1);for(let c=0;c<g.length;c++)g[c].z=1-(1+c)*u};A._identifyRefLayers=function(){const g=[],u=[];let c=0;for(const b of this.layers){const h=b.layout;if(b.type===B.StyleLayerType.FILL){var d=b,a=b.source+"|"+b.sourceLayer;a+="|"+(h?.visibility??"");a+="|"+b.minzoom;a+="|"+b.maxzoom;a+="|"+JSON.stringify(b.filter);if(d.hasDataDrivenFill||d.hasDataDrivenOutline)a+="|"+c;g.push({key:a,layer:b})}else if(b.type===
B.StyleLayerType.LINE){d=b;a=b.paint;a=null!=a&&(null!=a["line-pattern"]||null!=a["line-dasharray"]);let m=b.source+"|"+b.sourceLayer;m+="|"+(h?.visibility??"");m+="|"+b.minzoom;m+="|"+b.maxzoom;m+="|"+JSON.stringify(b.filter);m+="|"+(void 0!==h?h["line-cap"]:"");m+="|"+(void 0!==h?h["line-join"]:"");if(d.hasDataDrivenLine||a)m+="|"+c;u.push({key:m,layer:b})}++c}this._assignRefLayers(g);this._assignRefLayers(u)};A._assignRefLayers=function(g){g.sort((h,m)=>h.key<m.key?-1:h.key>m.key?1:0);let u,c;
const d=g.length;for(let h=0;h<d;h++){const m=g[h];if(m.key===u)m.layer.refLayerId=c;else if(u=m.key,c=m.layer.id,m.layer.type===B.StyleLayerType.FILL){if(!m.layer.getPaintProperty("fill-outline-color"))for(var a=h+1;a<d;a++){var b=g[a];if(b.key===u){if(b.layer.getPaintProperty("fill-outline-color")){g[h]=b;g[a]=m;c=b.layer.id;break}}else break}}else if(m.layer.type===B.StyleLayerType.LINE)for(a=m.layer,b=h+1;b<d;b++){const q=g[b];if(q.key!==u)break;const n=q.layer;if(a.canUseThinTessellation&&!n.canUseThinTessellation||
!a.canUseThinTessellation&&(n.getPaintProperty("line-pattern")||n.getPaintProperty("line-dasharray")))a=n,g[h]=q,g[b]=m,c=q.layer.id}}};A._create=function(g,u,c){u=1-1/(c.length+1)*(1+u);c=this._runningId++;switch(g.type){case "background":return new F.BackgroundStyleLayer(B.StyleLayerType.BACKGROUND,g,u,c);case "fill":return new F.FillStyleLayer(B.StyleLayerType.FILL,g,u,c);case "line":return new F.LineStyleLayer(B.StyleLayerType.LINE,g,u,c);case "symbol":return new F.SymbolStyleLayer(B.StyleLayerType.SYMBOL,
g,u,c);case "raster":console.warn(`Unsupported vector tile raster layer ${g.id}`);case "circle":return new F.CircleStyleLayer(B.StyleLayerType.CIRCLE,g,u,c)}};y._recreateLayer=function(g,u){switch(g.type){case "background":return new F.BackgroundStyleLayer(B.StyleLayerType.BACKGROUND,g,u.z,u.uid);case "fill":return new F.FillStyleLayer(B.StyleLayerType.FILL,g,u.z,u.uid);case "line":return new F.LineStyleLayer(B.StyleLayerType.LINE,g,u.z,u.uid);case "symbol":return new F.SymbolStyleLayer(B.StyleLayerType.SYMBOL,
g,u.z,u.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${g.id}`);case "circle":return new F.CircleStyleLayer(B.StyleLayerType.CIRCLE,g,u.z,u.uid)}};return y}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(B,F,y,A,g,u,c,d,a,b,h,m){B.CapType=void 0;(function(G){G[G.BUTT=0]="BUTT";G[G.ROUND=1]="ROUND";G[G.SQUARE=2]="SQUARE";G[G.UNKNOWN=4]="UNKNOWN"})(B.CapType||(B.CapType={}));let q=function(){function G(w,D,M,O){this.type=w;this.typeName=D.type;this.id=D.id;this.source=D.source;this.sourceLayer=D["source-layer"];this.minzoom=D.minzoom;this.maxzoom=D.maxzoom;this.filter=D.filter;this.layout=D.layout;this.paint=D.paint;this.z=M;this.uid=O;switch(w){case b.StyleLayerType.BACKGROUND:this._layoutDefinition=
b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case b.StyleLayerType.FILL:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case b.StyleLayerType.LINE:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case b.StyleLayerType.SYMBOL:this._layoutDefinition=b.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case b.StyleLayerType.CIRCLE:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var x=G.prototype;x.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=a.createFilter(this.filter)};x.getLayoutProperty=
function(w){return this._layoutProperties[w]};x.getPaintProperty=function(w){return this._paintProperties[w]};x.getLayoutValue=function(w,D,M){let O;const W=this._layoutProperties[w];W&&(O=W.getValue(D,M));void 0===O&&(O=this._layoutDefinition[w]["default"]);return O};x.getPaintValue=function(w,D,M){let O;const W=this._paintProperties[w];W&&(O=W.getValue(D,M));void 0===O&&(O=this._paintDefinition[w]["default"]);return O};x.isPainterDataDriven=function(){const w=this._paintProperties;if(w)for(const D in w)if(w[D].isDataDriven)return!0;
return!1};x._parseLayout=function(w){const D={};for(const M in w){const O=this._layoutDefinition[M];O&&(D[M]=new h(O,w[M]))}return D};x._parsePaint=function(w){const D={};for(const M in w){const O=this._paintDefinition[M];O&&(D[M]=new h(O,w[M]))}return D};x.computeAttributesKey=function(w,D,M,O){let W=0,Q=0;for(const U of D){D=3;if(!U||U!==O){const {isLayout:P,isOptional:L}=M[U];D=P?this.getLayoutProperty(U):this.getPaintProperty(U);D=D?.interpolator?2:D?.isDataDriven?1:L&&!D?3:0}Q|=D<<W;W+=2}return Q<<
3|w};return G}(),n=function(G){function x(w,D,M,O){w=G.call(this,w,D,M,O)||this;w.backgroundMaterial=new A.VTLBackgroundMaterial(w.computeAttributesKey(y.ShaderProgramType.BACKGROUND,A.VTLBackgroundMaterial.ATTRIBUTES,A.VTLBackgroundMaterial.ATTRIBUTES_INFO));return w}F._inheritsLoose(x,G);return x}(q),f=function(G){function x(w,D,M,O){w=G.call(this,w,D,M,O)||this;D=w.getPaintProperty("fill-color");M=w.getPaintProperty("fill-opacity");O=w.getPaintProperty("fill-pattern");w.hasDataDrivenColor=D?.isDataDriven;
w.hasDataDrivenOpacity=M?.isDataDriven;w.hasDataDrivenFill=w.hasDataDrivenColor||w.hasDataDrivenOpacity||O?.isDataDriven;M=w.getPaintProperty("fill-outline-color");w.outlineUsesFillColor=!M;w.hasDataDrivenOutlineColor=M?.isDataDriven;w.hasDataDrivenOutline=M?M.isDataDriven:D?D.isDataDriven:!1;w.hasDataDrivenOutline=(M?w.hasDataDrivenOutlineColor:w.hasDataDrivenColor)||w.hasDataDrivenOpacity;w.fillMaterial=new u.VTLFillMaterial(w.computeAttributesKey(y.ShaderProgramType.FILL,u.VTLFillMaterial.ATTRIBUTES,
u.VTLFillMaterial.ATTRIBUTES_INFO));w.outlineMaterial=new u.VTLOutlineMaterial(w.computeAttributesKey(y.ShaderProgramType.OUTLINE,w.outlineUsesFillColor?u.VTLOutlineMaterial.ATTRIBUTES_FILL:u.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,w.outlineUsesFillColor?u.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:u.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),w.outlineUsesFillColor);return w}F._inheritsLoose(x,G);return x}(q),v=function(G){function x(w,D,M,O){w=G.call(this,w,D,M,O)||this;D=w.getPaintProperty("line-pattern");
w.lineMaterial=new c.VTLLineMaterial(w.computeAttributesKey(y.ShaderProgramType.LINE,c.VTLLineMaterial.ATTRIBUTES,c.VTLLineMaterial.ATTRIBUTES_INFO,D?"line-dasharray":""));w.hasDataDrivenLine=w.getPaintProperty("line-blur")?.isDataDriven||w.getPaintProperty("line-color")?.isDataDriven||w.getPaintProperty("line-gap-width")?.isDataDriven||w.getPaintProperty("line-offset")?.isDataDriven||w.getPaintProperty("line-opacity")?.isDataDriven||w.getPaintProperty("line-pattern")?.isDataDriven||w.getPaintProperty("line-dasharray")?.isDataDriven||
w.getLayoutProperty("line-cap")?.isDataDriven||w.getPaintProperty("line-width")?.isDataDriven;w.canUseThinTessellation=!1;!w.hasDataDrivenLine&&(D=w.getPaintProperty("line-width"),!D||"number"===typeof D&&.5*D<m.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(D=w.getPaintProperty("line-offset"),!D||"number"===typeof D&&0===D)&&(w.canUseThinTessellation=!0);return w}F._inheritsLoose(x,G);x.prototype.getDashKey=function(w,D){switch(D){case B.CapType.BUTT:D="Butt";break;case B.CapType.ROUND:D="Round";break;case B.CapType.SQUARE:D=
"Square";break;default:D="Butt"}return`dasharray-[${w.toString()}]-${D}`};return x}(q),t=function(G){function x(w,D,M,O){w=G.call(this,w,D,M,O)||this;w.iconMaterial=new d.VTLIconMaterial(w.computeAttributesKey(y.ShaderProgramType.ICON,d.VTLIconMaterial.ATTRIBUTES,d.VTLIconMaterial.ATTRIBUTES_INFO));w.textMaterial=new d.VTLTextMaterial(w.computeAttributesKey(y.ShaderProgramType.TEXT,d.VTLTextMaterial.ATTRIBUTES,d.VTLTextMaterial.ATTRIBUTES_INFO));w.hasDataDrivenIcon=w.getPaintProperty("icon-color")?.isDataDriven||
w.getPaintProperty("icon-halo-blur")?.isDataDriven||w.getPaintProperty("icon-halo-color")?.isDataDriven||w.getPaintProperty("icon-halo-width")?.isDataDriven||w.getPaintProperty("icon-opacity")?.isDataDriven||w.getLayoutProperty("icon-size")?.isDataDriven;w.hasDataDrivenText=w.getPaintProperty("text-color")?.isDataDriven||w.getPaintProperty("text-halo-blur")?.isDataDriven||w.getPaintProperty("text-halo-color")?.isDataDriven||w.getPaintProperty("text-halo-width")?.isDataDriven||w.getPaintProperty("text-opacity")?.isDataDriven||
w.getLayoutProperty("text-size")?.isDataDriven;return w}F._inheritsLoose(x,G);return x}(q),k=function(G){function x(w,D,M,O){w=G.call(this,w,D,M,O)||this;w.circleMaterial=new g.VTLCircleMaterial(w.computeAttributesKey(y.ShaderProgramType.CIRCLE,g.VTLCircleMaterial.ATTRIBUTES,g.VTLCircleMaterial.ATTRIBUTES_INFO));return w}F._inheritsLoose(x,G);return x}(q),r=function(){function G(x,w,D){this.allowOverlap=x.getLayoutValue("icon-allow-overlap",w);this.ignorePlacement=x.getLayoutValue("icon-ignore-placement",
w);this.keepUpright=x.getLayoutValue("icon-keep-upright",w);this.optional=x.getLayoutValue("icon-optional",w);this.rotationAlignment=x.getLayoutValue("icon-rotation-alignment",w);this.rotationAlignment===b.RotationAlignment.AUTO&&(this.rotationAlignment=D?b.RotationAlignment.MAP:b.RotationAlignment.VIEWPORT);D=x.getLayoutProperty("icon-anchor");D?.isDataDriven?this._anchorProp=D:this.anchor=x.getLayoutValue("icon-anchor",w);D=x.getLayoutProperty("icon-offset");D?.isDataDriven?this._offsetProp=D:this.offset=
x.getLayoutValue("icon-offset",w);D=x.getLayoutProperty("icon-padding");D?.isDataDriven?this._paddingProp=D:this.padding=x.getLayoutValue("icon-padding",w);D=x.getLayoutProperty("icon-rotate");D?.isDataDriven?this._rotateProp=D:this.rotate=x.getLayoutValue("icon-rotate",w);D=x.getLayoutProperty("icon-size");D?.isDataDriven?this._sizeProp=D:this.size=x.getLayoutValue("icon-size",w)}G.prototype.update=function(x,w){this._anchorProp&&(this.anchor=this._anchorProp.getValue(x,w));this._offsetProp&&(this.offset=
this._offsetProp.getValue(x,w));this._paddingProp&&(this.padding=this._paddingProp.getValue(x,w));this._rotateProp&&(this.rotate=this._rotateProp.getValue(x,w));this._sizeProp&&(this.size=this._sizeProp.getValue(x,w))};return G}(),C=function(){function G(x,w,D){this.allowOverlap=x.getLayoutValue("text-allow-overlap",w);this.ignorePlacement=x.getLayoutValue("text-ignore-placement",w);this.keepUpright=x.getLayoutValue("text-keep-upright",w);this.optional=x.getLayoutValue("text-optional",w);this.rotationAlignment=
x.getLayoutValue("text-rotation-alignment",w);this.rotationAlignment===b.RotationAlignment.AUTO&&(this.rotationAlignment=D?b.RotationAlignment.MAP:b.RotationAlignment.VIEWPORT);D=x.getLayoutProperty("text-anchor");D?.isDataDriven?this._anchorProp=D:this.anchor=x.getLayoutValue("text-anchor",w);D=x.getLayoutProperty("text-justify");D?.isDataDriven?this._justifyProp=D:this.justify=x.getLayoutValue("text-justify",w);D=x.getLayoutProperty("text-letter-spacing");D?.isDataDriven?this._letterSpacingProp=
D:this.letterSpacing=x.getLayoutValue("text-letter-spacing",w);D=x.getLayoutProperty("text-line-height");D?.isDataDriven?this._lineHeightProp=D:this.lineHeight=x.getLayoutValue("text-line-height",w);D=x.getLayoutProperty("text-max-angle");D?.isDataDriven?this._maxAngleProp=D:this.maxAngle=x.getLayoutValue("text-max-angle",w);D=x.getLayoutProperty("text-max-width");D?.isDataDriven?this._maxWidthProp=D:this.maxWidth=x.getLayoutValue("text-max-width",w);D=x.getLayoutProperty("text-offset");D?.isDataDriven?
this._offsetProp=D:this.offset=x.getLayoutValue("text-offset",w);D=x.getLayoutProperty("text-padding");D?.isDataDriven?this._paddingProp=D:this.padding=x.getLayoutValue("text-padding",w);D=x.getLayoutProperty("text-rotate");D?.isDataDriven?this._rotateProp=D:this.rotate=x.getLayoutValue("text-rotate",w);D=x.getLayoutProperty("text-size");D?.isDataDriven?this._sizeProp=D:this.size=x.getLayoutValue("text-size",w);D=x.getLayoutProperty("text-writing-mode");D?.isDataDriven?this._writingModeProp=D:this.writingMode=
x.getLayoutValue("text-writing-mode",w)}G.prototype.update=function(x,w){this._anchorProp&&(this.anchor=this._anchorProp.getValue(x,w));this._justifyProp&&(this.justify=this._justifyProp.getValue(x,w));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(x,w));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(x,w));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(x,w));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(x,w));this._offsetProp&&
(this.offset=this._offsetProp.getValue(x,w));this._paddingProp&&(this.padding=this._paddingProp.getValue(x,w));this._rotateProp&&(this.rotate=this._rotateProp.getValue(x,w));this._sizeProp&&(this.size=this._sizeProp.getValue(x,w));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(x,w))};return G}();B.BackgroundStyleLayer=n;B.CircleStyleLayer=k;B.FillStyleLayer=f;B.IconLayout=r;B.LineStyleLayer=v;B.StyleLayer=q;B.SymbolStyleLayer=t;B.TextLayout=C;Object.defineProperties(B,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(B,F,y,A,g){y=function(u){function c(a){return u.call(this,a)||this}F._inheritsLoose(c,u);var d=c.prototype;d.geometryInfo=function(){return c.GEOMETRY_LAYOUT};d.opacityInfo=function(){return null};d.attributes=function(){return c.ATTRIBUTES};
d.attributesInfo=function(){return c.ATTRIBUTES_INFO};return c}(y.VTLMaterial);y.ATTRIBUTES=[];y.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,A.DataType.BYTE,0,2)];y.ATTRIBUTES_INFO={};B.VTLBackgroundMaterial=y;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(B,F,y,A,g,u,c){let d=function(){function h(q){this._locations=new Map;this._key=q}var m=h.prototype;m.defines=function(){return[]};m.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};m.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};m.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};m.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};m.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};m.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};m.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};m.setDataUniforms=function(q,n,f,v,t){var k=this.getUniforms();for(const r of k){const {name:C,type:G,getValue:x}=r;k=x(f,n,v,t);if(null!==k)switch(G){case "float":q.setUniform1f(C,
k);break;case "vec2":q.setUniform2fv(C,k);break;case "vec4":q.setUniform4fv(C,k)}}};m.encodeAttributes=function(q,n,f,v){const t=this.attributesInfo(),k=this.getEncodingInfos(),r=[];let C=0,G=0;for(const w of Object.keys(k)){var x=k[w];const {type:D,precisionFactor:M,isLayout:O}=t[w],W=O?f.getLayoutProperty(w):f.getPaintProperty(w),Q=W.interpolator?.getInterpolationRange(n);let U=0;for(const P of x){const {offset:L,bufferElementsToAdd:K}=P;if(0<K){for(x=0;x<K;x++)r.push(0);C+=G;G=P.bufferElementsToAdd}x=
v??W.getValue(Q?Q[U]:n,q);switch(D){case g.EncodingType.R8_SIGNED:case g.EncodingType.R8_UNSIGNED:r[C]|=this._encodeByte(x*(M||1),8*L);break;case g.EncodingType.R16_SIGNED:case g.EncodingType.R16_UNSIGNED:r[C]|=this._encodeShort(x*(M||1),8*L);break;case g.EncodingType.R8G8_SIGNED:case g.EncodingType.R8G8_UNSIGNED:r[C]|=this._encodeByte(x*(M||1),8*L);r[C]|=this._encodeByte(x*(M||1),8*L+8);break;case g.EncodingType.R16G16_SIGNED:case g.EncodingType.R16G16_UNSIGNED:r[C]|=this._encodeShort(x*(M||1),8*
L);r[C]|=this._encodeShort(x*(M||1),8*L+16);break;case g.EncodingType.R8G8B8A8_SIGNED:case g.EncodingType.R8G8B8A8_UNSIGNED:r[C]|=this._encodeByte(x*(M||1),8*L);r[C]|=this._encodeByte(x*(M||1),8*L+8);r[C]|=this._encodeByte(x*(M||1),8*L+16);r[C]|=this._encodeByte(x*(M||1),8*L+24);break;case g.EncodingType.R8G8B8A8_COLOR:r[C]=this._encodeColor(x);break;case g.EncodingType.R16G16B16A16_DASHARRAY:case g.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(C,r,x);break;default:throw Error("Unsupported encoding type");
}U++}}return r};m.getAtributeState=function(q){const n=3+2*q;q=0|this._bit(n);return q|=this._bit(n+1)<<1};m._buildAttributesInfo=function(){const q=[],n={};var f={},v=-1;const t=this.attributesInfo();var k=this.attributes();let r=-1;for(const w of k){r++;k=this.getAtributeState(r);if(k===g.AttributeStatus.UNIFORM||k===g.AttributeStatus.UNUSED)continue;var C=t[w];const D=[];n[w]=D;C=C.type;for(let M=0;M<k;M++){const {dataType:O,bytesPerElement:W,count:Q,normalized:U}=h._encodingInfo[C],P=W*Q;var G=
`${O}-${!0===U}`;let L=f[G],K=0;!L||4<L.count+Q?(v++,L={dataIndex:v,count:0,offset:0},4!==Q&&(f[G]=L),q.push({location:-1,name:"a_data_"+v,count:Q,type:O,normalized:U}),K=Math.ceil(Math.max(P/4,1))):(G=q[L.dataIndex],G.count+=Q,K=Math.ceil(Math.max(G.count*W/4,1))-Math.ceil(Math.max(L.offset/4,1)));D.push({dataIndex:L.dataIndex,offset:L.offset,bufferElementsToAdd:K});L.offset+=P;L.count+=Q}}for(const w of q)switch(w.type){case u.DataType.BYTE:case u.DataType.UNSIGNED_BYTE:w.count=4;break;case u.DataType.SHORT:case u.DataType.UNSIGNED_SHORT:w.count+=
w.count%2}this._buildVertexBufferLayout(q);f=0;v=this._layoutInfo.geometry;for(var x of v)this._locations.set(x.name,f++);if(x=this._layoutInfo.opacity)for(const w of x)this._locations.set(w.name,f++);this._buildShaderInfo(q,n);this._propertyEncodingInfo=n};m._buildVertexBufferLayout=function(q){const n={},f=this.geometryInfo();let v=f[0].stride;if(0===q.length)n.geometry=f;else{const t=[];let k=v;for(const r of q)v+=a(r.type)*r.count;for(const r of f)t.push(new c.VertexElementDescriptor(r.name,r.count,
r.type,r.offset,v,r.normalized));for(const r of q)t.push(new c.VertexElementDescriptor(r.name,r.count,r.type,k,v,r.normalized)),k+=a(r.type)*r.count;n.geometry=t}this.opacityInfo()&&(n.opacity=this.opacityInfo());this._layoutInfo=n;this._stride=v};m._buildShaderInfo=function(q,n){let f="\n",v="\n";const t=[];for(var k of q)f+=`attribute ${this._getType(k.count)} ${k.name};\n`;var r=this.attributes();q=this.attributesInfo();k=-1;for(const x of r){k++;const {name:w,type:D,precisionFactor:M,isLayout:O}=
q[x];r=M&&1!==M?` * ${1/M}`:"";const {bytesPerElement:W,count:Q}=h._encodingInfo[D];var C=U=>`a_data_${U.dataIndex}${b(Q,U.offset,W)}`;switch(this.getAtributeState(k)){case g.AttributeStatus.UNIFORM:r=this._getType(Q);var G=`u_${w}`;t.push({name:G,type:r,getValue:(P,L,K,H)=>{K=O?P.getLayoutValue(x,L):P.getPaintValue(x,L);if(D===g.EncodingType.R16G16B16A16_DASHARRAY){P=P.getDashKey(K,P.getLayoutValue("line-cap",L));H=H.getMosaicItemPosition(P,!1);if(y.isNone(H))return null;const {tl:J,br:S}=H;return[J[0],
S[1],S[0],J[1]]}if(D===g.EncodingType.R16G16B16A16_PATTERN){H=H.getMosaicItemPosition(K,!x.includes("line-"));if(y.isNone(H))return null;const {tl:J,br:S}=H;return[J[0],S[1],S[0],J[1]]}return D===g.EncodingType.R8G8B8A8_COLOR?(H=K[3],[H*K[0],H*K[1],H*K[2],H]):K}});f+=`uniform ${r} ${G};\n`;v+=`${r} ${w} = ${G};\n`;break;case g.AttributeStatus.DATA_DRIVEN:G=C(n[x][0]);v+=`${this._getType(Q)} ${w} = ${G}${r};\n`;break;case g.AttributeStatus.INTERPOLATED_DATA_DRIVEN:G=`u_t_${w}`;t.push({name:G,type:"float",
getValue:(P,L,K,H)=>(O?P.getLayoutProperty(x):P.getPaintProperty(x)).interpolator.interpolationUniformValue(K,L)});f+=`uniform float ${G};\n`;const U=C(n[x][0]);C=C(n[x][1]);v+=`${this._getType(Q)} ${w} = mix(${U}${r}, ${C}${r}, ${G});\n`}}this._shaderHeader=f;this._shaderMain=v;this._uniforms=t};m._bit=function(q){return(this._key&1<<q)>>q};m._getType=function(q){switch(q){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};m._encodeColor=
function(q){const n=255*q[3];return A.i8888to32(q[0]*n,q[1]*n,q[2]*n,n)};m._encodePattern=function(q,n,f){if(f&&f.rect){var v=f.rect,t=f.width;f=f.height;n[q]=this._encodeShort(v.x+2,0);n[q]|=this._encodeShort(v.y+2+f,16);n[q+1]=this._encodeShort(v.x+2+t,0);n[q+1]|=this._encodeShort(v.y+2,16)}};m._encodeByte=function(q,n){return(q&255)<<n};m._encodeShort=function(q,n){return(q&65535)<<n};F._createClass(h,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return h}();d._encodingInfo={[g.EncodingType.R8_SIGNED]:{dataType:u.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[g.EncodingType.R8_UNSIGNED]:{dataType:u.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[g.EncodingType.R16_SIGNED]:{dataType:u.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[g.EncodingType.R16_UNSIGNED]:{dataType:u.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[g.EncodingType.R8G8_SIGNED]:{dataType:u.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[g.EncodingType.R8G8_UNSIGNED]:{dataType:u.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[g.EncodingType.R16G16_SIGNED]:{dataType:u.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[g.EncodingType.R16G16_UNSIGNED]:{dataType:u.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[g.EncodingType.R8G8B8A8_SIGNED]:{dataType:u.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[g.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:u.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[g.EncodingType.R8G8B8A8_COLOR]:{dataType:u.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[g.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:u.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[g.EncodingType.R16G16B16A16_PATTERN]:{dataType:u.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const a=h=>{switch(h){case u.DataType.FLOAT:return 4;case u.DataType.INT:return 4;case u.DataType.UNSIGNED_INT:return 4;
case u.DataType.SHORT:return 2;case u.DataType.UNSIGNED_SHORT:return 2;case u.DataType.BYTE:return 1;case u.DataType.UNSIGNED_BYTE:return 1}},b=(h,m,q)=>{m/=q;if(1===h)switch(m){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===h)switch(m){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===h)switch(m){case 0:return".xyz";case 1:return".yzw"}return""};B.VTLMaterial=d;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(B){return function(){function F(A){this._array=[];0>=A&&console.error("strideInBytes must be positive!");this._stride=A}var y=F.prototype;y.reset=function(){this.array.length=0};y.toBuffer=function(){return(new Uint32Array(this._array)).buffer};F.i1616to32=function(A,g){return 65535&A|g<<16};F.i8888to32=function(A,g,u,c){return A&255|(g&255)<<8|(u&255)<<16|c<<24};F.i8816to32=
function(A,g,u){return A&255|(g&255)<<8|u<<16};B._createClass(F,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return F}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(B){B.EncodingType=void 0;(function(F){F[F.R8_SIGNED=0]="R8_SIGNED";F[F.R8_UNSIGNED=1]="R8_UNSIGNED";
F[F.R16_SIGNED=2]="R16_SIGNED";F[F.R16_UNSIGNED=3]="R16_UNSIGNED";F[F.R8G8_SIGNED=4]="R8G8_SIGNED";F[F.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";F[F.R16G16_SIGNED=6]="R16G16_SIGNED";F[F.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";F[F.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";F[F.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";F[F.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";F[F.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";F[F.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(B.EncodingType||(B.EncodingType={}));B.AttributeStatus=
void 0;(function(F){F[F.UNIFORM=0]="UNIFORM";F[F.DATA_DRIVEN=1]="DATA_DRIVEN";F[F.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";F[F.UNUSED=3]="UNUSED"})(B.AttributeStatus||(B.AttributeStatus={}));Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(B,F,y,A,g,u){A=function(c){function d(b){return c.call(this,b)||this}F._inheritsLoose(d,c);var a=d.prototype;a.geometryInfo=function(){return d.GEOMETRY_LAYOUT};a.opacityInfo=function(){return null};a.attributes=function(){return d.ATTRIBUTES};a.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(A.VTLMaterial);A.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");A.GEOMETRY_LAYOUT=[new u.VertexElementDescriptor("a_pos",
2,g.DataType.SHORT,0,4)];A.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:y.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:y.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:y.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:y.EncodingType.R8_UNSIGNED,
precisionFactor:100},"circle-blur":{name:"blur",type:y.EncodingType.R8_UNSIGNED,precisionFactor:32}};B.VTLCircleMaterial=A;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(B,F,y,A,g,u){let c=function(d){function a(h){return d.call(this,
h)||this}F._inheritsLoose(a,d);var b=a.prototype;b.geometryInfo=function(){return a.GEOMETRY_LAYOUT};b.opacityInfo=function(){return null};b.attributes=function(){return a.ATTRIBUTES};b.attributesInfo=function(){return a.ATTRIBUTES_INFO};return a}(A.VTLMaterial);c.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];c.GEOMETRY_LAYOUT=[new u.VertexElementDescriptor("a_pos",2,g.DataType.SHORT,0,4)];c.ATTRIBUTES_INFO={"fill-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",
type:y.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:y.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};A=function(d){function a(h,m){h=d.call(this,h)||this;h._usefillColor=m;return h}F._inheritsLoose(a,d);var b=a.prototype;b.geometryInfo=function(){return a.GEOMETRY_LAYOUT};b.opacityInfo=function(){return null};b.attributes=function(){return this._usefillColor?a.ATTRIBUTES_FILL:a.ATTRIBUTES_OUTLINE};b.attributesInfo=function(){return this._usefillColor?a.ATTRIBUTES_INFO_FILL:
a.ATTRIBUTES_INFO_OUTLINE};return a}(A.VTLMaterial);A.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];A.ATTRIBUTES_FILL=["fill-color","fill-opacity"];A.GEOMETRY_LAYOUT=[new u.VertexElementDescriptor("a_pos",2,g.DataType.SHORT,0,8),new u.VertexElementDescriptor("a_offset",2,g.DataType.BYTE,4,8),new u.VertexElementDescriptor("a_xnormal",2,g.DataType.BYTE,6,8)];A.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:y.EncodingType.R8_UNSIGNED,
precisionFactor:100}};A.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:y.EncodingType.R8_UNSIGNED,precisionFactor:100}};B.VTLFillMaterial=c;B.VTLOutlineMaterial=A;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(B,F,y,A,g,u){A=function(c){function d(b){return c.call(this,b)||this}F._inheritsLoose(d,c);var a=d.prototype;a.geometryInfo=function(){return d.GEOMETRY_LAYOUT};a.opacityInfo=function(){return null};a.attributes=function(){return d.ATTRIBUTES};a.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(A.VTLMaterial);A.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");A.GEOMETRY_LAYOUT=[new u.VertexElementDescriptor("a_pos",
2,g.DataType.SHORT,0,16),new u.VertexElementDescriptor("a_extrude_offset",4,g.DataType.BYTE,4,16),new u.VertexElementDescriptor("a_dir_normal",4,g.DataType.BYTE,8,16),new u.VertexElementDescriptor("a_accumulatedDistance",2,g.DataType.UNSIGNED_SHORT,12,16)];A.ATTRIBUTES_INFO={"line-width":{name:"width",type:y.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:y.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:y.EncodingType.R8_SIGNED,precisionFactor:2},
"line-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:y.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:y.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:y.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};B.VTLLineMaterial=A;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(B,F,y,A,g,u){const c=[new u.VertexElementDescriptor("a_pos",2,g.DataType.SHORT,0,16),new u.VertexElementDescriptor("a_vertexOffset",2,g.DataType.SHORT,4,16),new u.VertexElementDescriptor("a_texAngleRange",4,g.DataType.UNSIGNED_BYTE,8,16),new u.VertexElementDescriptor("a_levelInfo",
4,g.DataType.UNSIGNED_BYTE,12,16)],d=[new u.VertexElementDescriptor("a_opacityInfo",1,g.DataType.UNSIGNED_BYTE,0,1)];g=function(a){function b(m){return a.call(this,m)||this}F._inheritsLoose(b,a);var h=b.prototype;h.geometryInfo=function(){return c};h.opacityInfo=function(){return d};h.attributes=function(){return b.ATTRIBUTES};h.attributesInfo=function(){return b.ATTRIBUTES_INFO};return b}(A.VTLMaterial);g.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");
g.ATTRIBUTES_INFO={"icon-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:y.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:y.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:y.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};
A=function(a){function b(m){return a.call(this,m)||this}F._inheritsLoose(b,a);var h=b.prototype;h.geometryInfo=function(){return c};h.opacityInfo=function(){return d};h.attributes=function(){return b.ATTRIBUTES};h.attributesInfo=function(){return b.ATTRIBUTES_INFO};return b}(A.VTLMaterial);A.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");A.ATTRIBUTES_INFO={"text-color":{name:"color",type:y.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",
type:y.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:y.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:y.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:y.EncodingType.R8_UNSIGNED,isLayout:!0}};B.VTLIconMaterial=g;B.VTLTextMaterial=A;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(B,F){return function(){function y(A){this._expression=A}y.prototype.filter=function(A,g){if(!this._expression)return!0;try{return this._expression.evaluate(A,g)}catch(u){return console.log(u.message),!0}};y.createFilter=function(A){if(!A)return null;this.isLegacyFilter(A)&&(A=this.convertLegacyFilter(A));try{const g=B.createExpression(A,null,F.BooleanType);return new y(g)}catch(g){return console.log(g.message),
null}};y.isLegacyFilter=function(A){if(!Array.isArray(A)||0===A.length)return!0;switch(A[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===A.length&&"string"===typeof A[1]&&!Array.isArray(A[2]);case "in":return 3<=A.length&&"string"===typeof A[1]&&!Array.isArray(A[2]);case "!in":return!0;case "any":case "all":for(let g=1;g<A.length;g++)if(this.isLegacyFilter(A[g]))return!0;return!1;case "none":return!0;case "has":return 2===A.length&&("$id"===A[1]||
"$type"===A[1]);case "!has":return!0;default:return!1}};y.convertLegacyFilter=function(A){if(!Array.isArray(A)||0===A.length)return!0;const g=A[0];if(1===A.length)return"any"!==g;switch(g){case "\x3d\x3d":return y.convertComparison("\x3d\x3d",A[1],A[2]);case "!\x3d":return y.negate(y.convertComparison("\x3d\x3d",A[1],A[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return y.convertComparison(g,A[1],A[2]);case "in":return y.convertIn(A[1],A.slice(2));case "!in":return y.negate(y.convertIn(A[1],
A.slice(2)));case "any":case "all":case "none":return y.convertCombining(g,A.slice(1));case "has":return y.convertHas(A[1]);case "!has":return y.negate(y.convertHas(A[1]));default:throw Error("Unexpected legacy filter.");}};y.convertComparison=function(A,g,u){switch(g){case "$type":return[A,["geometry-type"],u];case "$id":return[A,["id"],u];default:return[A,["get",g],u]}};y.convertIn=function(A,g){switch(A){case "$type":return["in",["geometry-type"],["literal",g]];case "$id":return["in",["id"],["literal",
g]];default:return["in",["get",A],["literal",g]]}};y.convertHas=function(A){switch(A){case "$type":return!0;case "$id":return["has-id"];default:return["has",A]}};y.convertCombining=function(A,g){return[A].concat(g.map(this.convertLegacyFilter))};y.negate=function(A){return["!",A]};return y}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../unitBezier ../GeometryUtils ./types ../../webgl/Geometry".split(" "),
function(B,F,y,A,g,u,c,d){function a(p,e,l){var z=typeof p;if("string"===z||"boolean"===z||"number"===z||null===p){if(l)switch(l.kind){case "string":"string"!==z&&(p=ia.toString(p));break;case "number":"number"!==z&&(p=ia.toNumber(p));break;case "color":p=ia.toColor(p)}p=["literal",p]}if(!Array.isArray(p)||0===p.length)throw Error("Expression must be a non empty array");z=p[0];if("string"!==typeof z)throw Error("First element of expression must be a string");const E=na[z];if(void 0===E)throw Error(`Invalid expression operator "${z}"`);
if(!E)throw Error(`Unimplemented expression operator "${z}"`);return E.parse(p,e,l)}let b=function(){function p(l){this._parent=l;this._vars={}}var e=p.prototype;e.add=function(l,z){this._vars[l]=z};e.get=function(l){return this._vars[l]?this._vars[l]:this._parent?this._parent.get(l):null};return p}(),h=function(){function p(){this.type=c.ValueType}p.parse=function(e){if(1<e.length)throw Error('"id" does not expect arguments');return new p};p.prototype.evaluate=function(e,l){return e?.id};return p}(),
m=function(){function p(){this.type=c.StringType}p.parse=function(e){if(1<e.length)throw Error('"geometry-type" does not expect arguments');return new p};p.prototype.evaluate=function(e,l){if(!e)return null;switch(e.type){case d.GeometryType.Point:return"Point";case d.GeometryType.LineString:return"LineString";case d.GeometryType.Polygon:return"Polygon";default:return null}};return p}(),q=function(){function p(){this.type=c.ObjectType}p.parse=function(e){if(1<e.length)throw Error('"properties" does not expect arguments');
return new p};p.prototype.evaluate=function(e,l){return e?.values};return p}(),n=function(){function p(){this.type=c.NumberType}p.parse=function(e){if(1<e.length)throw Error('"zoom" does not expect arguments');return new p};p.prototype.evaluate=function(e,l){return l};return p}(),f=function(){function p(e,l,z){this._lhs=e;this._rhs=l;this._compare=z;this.type=c.BooleanType}p.parse=function(e,l,z){if(3!==e.length&&4!==e.length)throw Error(`"${e[0]}" expects 2 or 3 arguments`);if(4===e.length)throw Error(`"${e[0]}" collator not supported`);
return new p(a(e[1],l),a(e[2],l),z)};p.prototype.evaluate=function(e,l){return this._compare(this._lhs.evaluate(e,l),this._rhs.evaluate(e,l))};return p}(),v=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return f.parse(l,z,(E,I)=>E===I)};return e}(f),t=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return f.parse(l,z,(E,I)=>E!==I)};return e}(f),k=function(p){function e(){return p.apply(this,
arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return f.parse(l,z,(E,I)=>E<I)};return e}(f),r=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return f.parse(l,z,(E,I)=>E<=I)};return e}(f),C=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return f.parse(l,z,(E,I)=>E>I)};return e}(f),G=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=
function(l,z){return f.parse(l,z,(E,I)=>E>=I)};return e}(f),x=function(){function p(e){this._arg=e;this.type=c.BooleanType}p.parse=function(e,l){if(2!==e.length)throw Error('"!" expects 1 argument');return new p(a(e[1],l))};p.prototype.evaluate=function(e,l){return!this._arg.evaluate(e,l)};return p}(),w=function(){function p(e){this._args=e;this.type=c.BooleanType}p.parse=function(e,l){const z=[];for(let E=1;E<e.length;E++)z.push(a(e[E],l));return new p(z)};p.prototype.evaluate=function(e,l){for(const z of this._args)if(!z.evaluate(e,
l))return!1;return!0};return p}(),D=function(){function p(e){this._args=e;this.type=c.BooleanType}p.parse=function(e,l){const z=[];for(let E=1;E<e.length;E++)z.push(a(e[E],l));return new p(z)};p.prototype.evaluate=function(e,l){for(const z of this._args)if(z.evaluate(e,l))return!0;return!1};return p}(),M=function(){function p(e){this._args=e;this.type=c.BooleanType}p.parse=function(e,l){const z=[];for(let E=1;E<e.length;E++)z.push(a(e[E],l));return new p(z)};p.prototype.evaluate=function(e,l){for(const z of this._args)if(z.evaluate(e,
l))return!1;return!0};return p}(),O=function(){function p(e,l,z){this.type=e;this._args=l;this._fallback=z}p.parse=function(e,l,z){if(4>e.length)throw Error('"case" expects at least 3 arguments');if(1===e.length%2)throw Error('"case" expects an odd number of arguments');let E;const I=[];for(let N=1;N<e.length-1;N+=2){const X=a(e[N],l),T=a(e[N+1],l,z);E||(E=T.type);I.push({condition:X,output:T})}e=a(e[e.length-1],l,z);E||(E=e.type);return new p(E,I,e)};p.prototype.evaluate=function(e,l){for(const z of this._args)if(z.condition.evaluate(e,
l))return z.output.evaluate(e,l);return this._fallback.evaluate(e,l)};return p}(),W=function(){function p(e,l){this.type=e;this._args=l}p.parse=function(e,l){if(2>e.length)throw Error('"coalesce" expects at least 1 argument');let z;const E=[];for(let I=1;I<e.length;I++){const N=a(e[I],l);z||(z=N.type);E.push(N)}return new p(z,E)};p.prototype.evaluate=function(e,l){for(const z of this._args){const E=z.evaluate(e,l);if(null!==E)return E}return null};return p}(),Q=function(){function p(e,l,z,E,I){this.type=
e;this._input=l;this._labels=z;this._outputs=E;this._fallback=I}p.parse=function(e,l){if(3>e.length)throw Error('"match" expects at least 3 arguments');if(0===e.length%2)throw Error('"case" expects an even number of arguments');let z;const E=a(e[1],l),I=[],N={};let X;for(let da=2;da<e.length-1;da+=2){var T=e[da];Array.isArray(T)||(T=[T]);for(const ja of T){T=typeof ja;if("string"!==T&&"number"!==T)throw Error('"match" requires string or number literal as labels');if(!X)X=T;else if(T!==X)throw Error('"match" requires labels to have the same type');
N[ja]=I.length}T=a(e[da+1],l);z||(z=T.type);I.push(T)}return new p(z,E,N,I,a(e[e.length-1],l))};p.prototype.evaluate=function(e,l){const z=this._input.evaluate(e,l);return(this._outputs[this._labels[z]]||this._fallback).evaluate(e,l)};return p}(),U=function(){function p(l,z,E,I,N){this._operator=l;this.type=z;this.interpolation=E;this.input=I;this._stops=N}p.parse=function(l,z,E){const I=l[0];if(5>l.length)throw Error(`"${I}" expects at least 4 arguments`);const N=l[1];if(!Array.isArray(N)||0===N.length)throw Error(`"${N}" is not a valid interpolation`);
switch(N[0]){case "linear":if(1!==N.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==N.length||"number"!==typeof N[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==N.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var X=1;5>X;X++){var T=N[X];if("number"!==typeof T||0>T||1<T)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");
}break;default:throw Error(`"${l[0]}" unknown interpolation type "${N[0]}"`);}if(1!==l.length%2)throw Error(`"${I}" expects an even number of arguments`);X=a(l[2],z,c.NumberType);let da;"interpolate-hcl"===I||"interpolate-lab"===I?da=c.ColorType:E&&"value"!==E.kind&&(da=E);E=[];for(T=3;T<l.length;T+=2){const ja=l[T];if("number"!==typeof ja)throw Error(`"${I}" requires stop inputs as literal numbers`);if(E.length&&E[E.length-1][0]>=ja)throw Error(`"${I}" requires strictly ascending stop inputs`);const oa=
a(l[T+1],z,da);da||(da=oa.type);E.push([ja,oa])}if(da&&da!==c.ColorType&&da!==c.NumberType&&("array"!==da.kind||da.itemType!==c.NumberType))throw Error(`"${I}" cannot interpolate type ${c.typeToString(da)}`);return new p(I,da,N,X,E)};var e=p.prototype;e.evaluate=function(l,z){var E=this._stops;if(1===E.length)return E[0][1].evaluate(l,z);var I=this.input.evaluate(l,z);if(I<=E[0][0])return E[0][1].evaluate(l,z);if(I>=E[E.length-1][0])return E[E.length-1][1].evaluate(l,z);let N=0;for(;++N<E.length&&
!(I<E[N][0]););const X=p.interpolationRatio(this.interpolation,I,E[N-1][0],E[N][0]);I=E[N-1][1].evaluate(l,z);const T=E[N][1].evaluate(l,z);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(I)&&Array.isArray(T))return I.map((da,ja)=>u.interpolate(da,T[ja],X));if("color"===this.type.kind&&I instanceof y&&T instanceof y)return I=new y(I),l=new y(T),new y([u.interpolate(I.r,l.r,X),u.interpolate(I.g,l.g,X),u.interpolate(I.b,l.b,X),u.interpolate(I.a,l.a,X)]);if("number"===this.type.kind&&
"number"===typeof I&&"number"===typeof T)return u.interpolate(I,T,X);throw Error(`"${this._operator}" cannot interpolate type ${c.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return l=A.toLCH(I),z=A.toLCH(T),E=z.h-l.h,l=A.toRGB({h:l.h+X*(180<E||-180>E?E-360*Math.round(E/360):E),c:u.interpolate(l.c,z.c,X),l:u.interpolate(l.l,z.l,X)}),new y({a:u.interpolate(I.a,T.a,X),...l});if("interpolate-lab"===this._operator)return l=A.toLAB(I),z=A.toLAB(T),l=A.toRGB({l:u.interpolate(l.l,z.l,
X),a:u.interpolate(l.a,z.a,X),b:u.interpolate(l.b,z.b,X)}),new y({a:u.interpolate(I.a,T.a,X),...l});throw Error(`Unexpected operator "${this._operator}"`);};e.interpolationUniformValue=function(l,z){const E=this._stops;if(1===E.length||l>=E[E.length-1][0])return 0;let I=0;for(;++I<E.length&&!(l<E[I][0]););return p.interpolationRatio(this.interpolation,z,E[I-1][0],E[I][0])};e.getInterpolationRange=function(l){const z=this._stops;if(1===z.length)return l=z[0][0],[l,l];var E=z[z.length-1][0];if(l>=E)return[E,
E];for(E=0;++E<z.length&&!(l<z[E][0]););return[z[E-1][0],z[E][0]]};p.interpolationRatio=function(l,z,E,I){let N=0;"linear"===l[0]?N=p._exponentialInterpolationRatio(z,1,E,I):"exponential"===l[0]?N=p._exponentialInterpolationRatio(z,l[1],E,I):"cubic-bezier"===l[0]&&(N=g.unitBezier(l[1],l[2],l[3],l[4])(p._exponentialInterpolationRatio(z,1,E,I),1E-5));0>N?N=0:1<N&&(N=1);return N};p._exponentialInterpolationRatio=function(l,z,E,I){I-=E;if(0===I)return 0;l-=E;return 1===z?l/I:(z**l-1)/(z**I-1)};return p}(),
P=function(){function p(e,l,z){this.type=e;this._input=l;this._stops=z}p.parse=function(e,l){if(5>e.length)throw Error('"step" expects at least 4 arguments');if(1!==e.length%2)throw Error('"step" expects an even number of arguments');const z=a(e[1],l,c.NumberType);let E;const I=[];I.push([-Infinity,a(e[2],l)]);for(let N=3;N<e.length;N+=2){const X=e[N];if("number"!==typeof X)throw Error('"step" requires stop inputs as literal numbers');if(I.length&&I[I.length-1][0]>=X)throw Error('"step" requires strictly ascending stop inputs');
const T=a(e[N+1],l);E||(E=T.type);I.push([X,T])}return new p(E,z,I)};p.prototype.evaluate=function(e,l){const z=this._stops;if(1===z.length)return z[0][1].evaluate(e,l);const E=this._input.evaluate(e,l);let I=0;for(;++I<z.length&&!(E<z[I][0]););return this._stops[I-1][1].evaluate(e,l)};return p}(),L=function(){function p(e,l){this.type=e;this._output=l}p.parse=function(e,l,z){if(4>e.length)throw Error('"let" expects at least 3 arguments');if(1===e.length%2)throw Error('"let" expects an odd number of arguments');
const E=new b(l);for(let I=1;I<e.length-1;I+=2){const N=e[I];if("string"!==typeof N)throw Error(`"let" requires a string to define variable names - found ${N}`);E.add(N,a(e[I+1],l))}e=a(e[e.length-1],E,z);return new p(e.type,e)};p.prototype.evaluate=function(e,l){return this._output.evaluate(e,l)};return p}(),K=function(){function p(e,l){this.type=e;this.output=l}p.parse=function(e,l,z){if(2!==e.length||"string"!==typeof e[1])throw Error('"var" requires just one literal string argument');l=l.get(e[1]);
if(!l)throw Error(`${e[1]} must be defined before being used in a "var" expression`);return new p(z||c.ValueType,l)};p.prototype.evaluate=function(e,l){return this.output.evaluate(e,l)};return p}(),H=function(){function p(e,l,z){this.type=e;this._index=l;this._array=z}p.parse=function(e,l){if(3!==e.length)throw Error('"at" expects 2 arguments');const z=a(e[1],l,c.NumberType);e=a(e[2],l);return new p(e.type.itemType,z,e)};p.prototype.evaluate=function(e,l){const z=this._index.evaluate(e,l);e=this._array.evaluate(e,
l);if(0>z||z>=e.length)throw Error('"at" index out of bounds');if(z!==Math.floor(z))throw Error('"at" index must be an integer');return e[z]};return p}(),J=function(){function p(e,l){this._key=e;this._obj=l;this.type=c.ValueType}p.parse=function(e,l){let z;switch(e.length){case 2:return z=a(e[1],l),new p(z);case 3:return z=a(e[1],l),e=a(e[2],l),new p(z,e);default:throw Error('"get" expects 1 or 2 arguments');}};p.prototype.evaluate=function(e,l){const z=this._key.evaluate(e,l);return this._obj?this._obj.evaluate(e,
l)[z]:e?.values[z]};return p}(),S=function(){function p(e,l){this._key=e;this._obj=l;this.type=c.BooleanType}p.parse=function(e,l){let z;switch(e.length){case 2:return z=a(e[1],l),new p(z);case 3:return z=a(e[1],l),e=a(e[2],l),new p(z,e);default:throw Error('"has" expects 1 or 2 arguments');}};p.prototype.evaluate=function(e,l){const z=this._key.evaluate(e,l);return this._obj?(e=this._obj.evaluate(e,l),z in e):!!e?.values[z]};return p}(),R=function(){function p(e,l){this._key=e;this._vals=l;this.type=
c.BooleanType}p.parse=function(e,l){if(3!==e.length)throw Error('"in" expects 2 arguments');return new p(a(e[1],l),a(e[2],l))};p.prototype.evaluate=function(e,l){const z=this._key.evaluate(e,l);return this._vals.evaluate(e,l).includes(z)};return p}(),ba=function(){function p(e,l,z){this._item=e;this._array=l;this._from=z;this.type=c.NumberType}p.parse=function(e,l){if(3>e.length||4<e.length)throw Error('"index-of" expects 3 or 4 arguments');const z=a(e[1],l),E=a(e[2],l);return 4===e.length?(e=a(e[3],
l,c.NumberType),new p(z,E,e)):new p(z,E)};p.prototype.evaluate=function(e,l){const z=this._item.evaluate(e,l),E=this._array.evaluate(e,l);if(this._from){e=this._from.evaluate(e,l);if(e!==Math.floor(e))throw Error('"index-of" index must be an integer');return E.indexOf(z,e)}return E.indexOf(z)};return p}(),Z=function(){function p(e){this._arg=e;this.type=c.NumberType}p.parse=function(e,l){if(2!==e.length)throw Error('"length" expects 2 arguments');e=a(e[1],l);return new p(e)};p.prototype.evaluate=
function(e,l){e=this._arg.evaluate(e,l);if("string"===typeof e||Array.isArray(e))return e.length;throw Error('"length" expects string or array');};return p}(),Y=function(){function p(e,l,z,E){this.type=e;this._array=l;this._from=z;this._to=E}p.parse=function(e,l){if(3>e.length||4<e.length)throw Error('"slice" expects 2 or 3 arguments');const z=a(e[1],l),E=a(e[2],l,c.NumberType);if(E.type!==c.NumberType)throw Error('"slice" index must return a number');if(4===e.length){e=a(e[3],l,c.NumberType);if(e.type!==
c.NumberType)throw Error('"slice" index must return a number');return new p(z.type,z,E,e)}return new p(z.type,z,E)};p.prototype.evaluate=function(e,l){const z=this._array.evaluate(e,l);if(!Array.isArray(z)&&"string"!==typeof z)throw Error('"slice" input must be an array or a string');const E=this._from.evaluate(e,l);if(0>E||E>=z.length)throw Error('"slice" index out of bounds');if(E!==Math.floor(E))throw Error('"slice" index must be an integer');if(this._to){e=this._to.evaluate(e,l);if(0>e||e>=z.length)throw Error('"slice" index out of bounds');
if(e!==Math.floor(e))throw Error('"slice" index must be an integer');return z.slice(E,e)}return z.slice(E)};return p}(),ea=function(){function p(){this.type=c.BooleanType}p.parse=function(e){if(1!==e.length)throw Error('"has-id" expects no arguments');return new p};p.prototype.evaluate=function(e,l){return e&&void 0!==e.id};return p}(),V=function(){function p(e,l){this._args=e;this._calculate=l;this.type=c.NumberType}p.parse=function(e,l,z){e=e.slice(1).map(E=>a(E,l));return new p(e,z)};p.prototype.evaluate=
function(e,l){let z;this._args&&(z=this._args.map(E=>E.evaluate(e,l)));return this._calculate(z)};return p}(),aa=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){switch(l.length){case 2:return V.parse(l,z,E=>-E[0]);case 3:return V.parse(l,z,E=>E[0]-E[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return e}(V),fa=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return V.parse(l,
z,E=>{let I=1;for(const N of E)I*=N;return I})};return e}(V),ha=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){if(3===l.length)return V.parse(l,z,E=>E[0]/E[1]);throw Error('"/" expects 2 arguments');};return e}(V),ka=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){if(3===l.length)return V.parse(l,z,E=>E[0]%E[1]);throw Error('"%" expects 2 arguments');};return e}(V),pa=function(p){function e(){return p.apply(this,
arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){if(3===l.length)return V.parse(l,z,E=>E[0]**E[1]);throw Error('"^" expects 1 or 2 arguments');};return e}(V),qa=function(p){function e(){return p.apply(this,arguments)||this}F._inheritsLoose(e,p);e.parse=function(l,z){return V.parse(l,z,E=>{let I=0;for(const N of E)I+=N;return I})};return e}(V),ca=function(){function p(e,l){this._args=e;this._calculate=l;this.type=c.NumberType}p.parse=function(e,l){const z=e.slice(1).map(E=>a(E,l));return new p(z,
p.ops[e[0]])};p.prototype.evaluate=function(e,l){let z;this._args&&(z=this._args.map(E=>E.evaluate(e,l)));return this._calculate(z)};return p}();ca.ops={abs:p=>Math.abs(p[0]),acos:p=>Math.acos(p[0]),asin:p=>Math.asin(p[0]),atan:p=>Math.atan(p[0]),ceil:p=>Math.ceil(p[0]),cos:p=>Math.cos(p[0]),e:()=>Math.E,floor:p=>Math.floor(p[0]),ln:p=>Math.log(p[0]),ln2:()=>Math.LN2,log10:p=>Math.log(p[0])/Math.LN10,log2:p=>Math.log(p[0])/Math.LN2,max:p=>Math.max(...p),min:p=>Math.min(...p),pi:()=>Math.PI,round:p=>
Math.round(p[0]),sin:p=>Math.sin(p[0]),sqrt:p=>Math.sqrt(p[0]),tan:p=>Math.tan(p[0])};let ra=function(){function p(e){this._args=e;this.type=c.StringType}p.parse=function(e,l){return new p(e.slice(1).map(z=>a(z,l)))};p.prototype.evaluate=function(e,l){return this._args.map(z=>z.evaluate(e,l)).join("")};return p}(),ma=function(){function p(e,l){this._arg=e;this._calculate=l;this.type=c.StringType}p.parse=function(e,l){if(2!==e.length)throw Error(`${e[0]} expects 1 argument`);l=a(e[1],l);return new p(l,
p.ops[e[0]])};p.prototype.evaluate=function(e,l){return this._calculate(this._arg.evaluate(e,l))};return p}();ma.ops={downcase:p=>p.toLowerCase(),upcase:p=>p.toUpperCase()};let sa=function(){function p(l){this._args=l;this.type=c.ColorType}p.parse=function(l,z){if(4!==l.length)throw Error('"rgb" expects 3 arguments');l=l.slice(1).map(E=>a(E,z));return new p(l)};var e=p.prototype;e.evaluate=function(l,z){const E=this._validate(this._args[0].evaluate(l,z)),I=this._validate(this._args[1].evaluate(l,
z));l=this._validate(this._args[2].evaluate(l,z));return new y({r:E,g:I,b:l})};e._validate=function(l){if("number"!==typeof l||0>l||255<l)throw Error(`${l}: invalid color component`);return Math.round(l)};return p}(),ta=function(){function p(l){this._args=l;this.type=c.ColorType}p.parse=function(l,z){if(5!==l.length)throw Error('"rgba" expects 4 arguments');l=l.slice(1).map(E=>a(E,z));return new p(l)};var e=p.prototype;e.evaluate=function(l,z){const E=this._validate(this._args[0].evaluate(l,z)),I=
this._validate(this._args[1].evaluate(l,z)),N=this._validate(this._args[2].evaluate(l,z));l=this._validateAlpha(this._args[3].evaluate(l,z));return new y({r:E,g:I,b:N,a:l})};e._validate=function(l){if("number"!==typeof l||0>l||255<l)throw Error(`${l}: invalid color component`);return Math.round(l)};e._validateAlpha=function(l){if("number"!==typeof l||0>l||1<l)throw Error(`${l}: invalid alpha color component`);return l};return p}(),ua=function(){function p(e){this._color=e;this.type=c.arrayType(c.NumberType,
4)}p.parse=function(e,l){if(2!==e.length)throw Error('"to-rgba" expects 1 argument');e=a(e[1],l);return new p(e)};p.prototype.evaluate=function(e,l){return(new y(this._color.evaluate(e,l))).toRgba()};return p}(),la=function(){function p(e,l){this.type=e;this._args=l}p.parse=function(e,l){var z=e[0];if(2>e.length)throw Error(`${z} expects at least one argument`);let E=1,I;if("array"===z){if(2<e.length){switch(e[1]){case "string":I=c.StringType;break;case "number":I=c.NumberType;break;case "boolean":I=
c.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}E++}else I=c.ValueType;if(3<e.length){var N=e[2];if(null!==N&&("number"!==typeof N||0>N||N!==Math.floor(N)))throw Error('"array" length argument must be a positive integer literal');E++}I=c.arrayType(I,N)}else switch(z){case "string":I=c.StringType;break;case "number":I=c.NumberType;break;case "boolean":I=c.BooleanType;break;case "object":I=c.ObjectType}for(z=[];E<e.length;E++)N=a(e[E],l),z.push(N);
return new p(I,z)};p.prototype.evaluate=function(e,l){let z;for(const E of this._args){const I=E.evaluate(e,l);z=c.getType(I);if(c.matchType(z,this.type))return I}throw Error(`Expected ${c.typeToString(this.type)} but got ${c.typeToString(z)}`);};return p}(),ia=function(){function p(e,l){this.type=e;this._args=l}p.parse=function(e,l){var z=e[0];const E=p.types[z];if(E===c.BooleanType||E===c.StringType){if(2!==e.length)throw Error(`${z} expects one argument`);}else if(2>e.length)throw Error(`${z} expects at least one argument`);
z=[];for(let I=1;I<e.length;I++){const N=a(e[I],l);z.push(N)}return new p(E,z)};p.prototype.evaluate=function(e,l){if(this.type===c.BooleanType)return!!this._args[0].evaluate(e,l);if(this.type===c.StringType)return c.valueToString(this._args[0].evaluate(e,l));if(this.type===c.NumberType){for(const E of this._args){var z=Number(E.evaluate(e,l));if(!isNaN(z))return z}return null}if(this.type===c.ColorType){for(z of this._args)try{const E=p.toColor(z.evaluate(e,l));if(E instanceof y)return E}catch{}return null}};
p.toBoolean=function(e){return!!e};p.toString=function(e){return c.valueToString(e)};p.toNumber=function(e){const l=Number(e);if(isNaN(l))throw Error(`"${e}" is not a number`);return l};p.toColor=function(e){if(e instanceof y)return e;if("string"===typeof e){const l=y.fromString(e);if(l)return l;throw Error(`"${e}" is not a color`);}if(Array.isArray(e))return y.fromArray(e);throw Error(`"${e}" is not a color`);};return p}();ia.types={"to-boolean":c.BooleanType,"to-color":c.ColorType,"to-number":c.NumberType,
"to-string":c.StringType};let va=function(){function p(e){this._val=e;this.type=c.getType(e)}p.parse=function(e){if(2!==e.length)throw Error('"literal" expects 1 argument');return new p(e[1])};p.prototype.evaluate=function(e,l){return this._val};return p}(),wa=function(){function p(e){this._arg=e;this.type=c.StringType}p.parse=function(e,l){if(2!==e.length)throw Error('"typeof" expects 1 argument');return new p(a(e[1],l))};p.prototype.evaluate=function(e,l){return c.typeToString(c.getType(this._arg.evaluate(e,
l)))};return p}();const na={array:la,boolean:la,collator:null,format:null,image:null,literal:va,number:la,"number-format":null,object:la,string:la,"to-boolean":ia,"to-color":ia,"to-number":ia,"to-string":ia,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":m,id:h,"line-progress":null,properties:q,at:H,get:J,has:S,in:R,"index-of":ba,length:Z,slice:Y,"!":x,"!\x3d":t,"\x3c":k,"\x3c\x3d":r,"\x3d\x3d":v,"\x3e":C,"\x3e\x3d":G,all:w,any:D,case:O,coalesce:W,match:Q,within:null,interpolate:U,
"interpolate-hcl":U,"interpolate-lab":U,step:P,let:L,var:K,concat:ra,downcase:ma,"is-supported-script":null,"resolved-locale":null,upcase:ma,rgb:sa,rgba:ta,"to-rgba":ua,"-":aa,"*":fa,"/":ha,"%":ka,"^":pa,"+":qa,abs:ca,acos:ca,asin:ca,atan:ca,ceil:ca,cos:ca,e:ca,floor:ca,ln:ca,ln2:ca,log10:ca,log2:ca,max:ca,min:ca,pi:ca,round:ca,sin:ca,sqrt:ca,tan:ca,zoom:n,"heatmap-density":null,"has-id":ea,none:M};B.ALL=w;B.ANY=D;B.Add=qa;B.Assert=la;B.At=H;B.Calculate=ca;B.Case=O;B.Coalesce=W;B.Coerce=ia;B.Concat=
ra;B.Div=ha;B.EQ=v;B.GE=G;B.GT=C;B.GeomType=m;B.Get=J;B.Has=S;B.HasID=ea;B.ID=h;B.In=R;B.IndexOf=ba;B.Interpolate=U;B.LE=r;B.LT=k;B.Length=Z;B.Let=L;B.Literal=va;B.Match=Q;B.Mod=ka;B.Mul=fa;B.NE=t;B.NONE=M;B.NOT=x;B.Pow=pa;B.Properties=q;B.Rgb=sa;B.Rgba=ta;B.Slice=Y;B.Step=P;B.String=ma;B.Sub=aa;B.ToRgba=ua;B.TypeOf=wa;B.Var=K;B.Zoom=n;B.createExpression=a;B.ops=na;Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports",
"../../../../../Color"],function(B,F){function y(f,v){return{kind:"array",itemType:f,n:v}}function A(f){if("array"===f.kind){const v=A(f.itemType);return"number"===typeof f.n?`array<${v}, ${f.n}>`:"value"===f.itemType.kind?"array":`array<${v}>`}return f.kind}function g(f){if(null===f)return c;if("string"===typeof f)return a;if("boolean"===typeof f)return b;if("number"===typeof f)return d;if(f instanceof F)return h;if(Array.isArray(f)){let v;for(const t of f){const k=g(t);if(!v)v=k;else if(v!==k){v=
q;break}}return y(v||q,f.length)}return"object"===typeof f?m:q}function u(f,v){if("array"===v.kind)return"array"===f.kind&&(0===f.n&&"value"===f.itemType.kind||u(f.itemType,v.itemType))&&("number"!==typeof v.n||v.n===f.n);if("value"===v.kind)for(const t of n)if(u(f,t))return!0;return v.kind===f.kind}const c={kind:"null"},d={kind:"number"},a={kind:"string"},b={kind:"boolean"},h={kind:"color"},m={kind:"object"},q={kind:"value"},n=[c,d,a,b,h,m,y(q)];B.BooleanType=b;B.ColorType=h;B.NullType=c;B.NumberType=
d;B.ObjectType=m;B.StringType=a;B.ValueType=q;B.arrayType=y;B.getType=g;B.matchType=u;B.typeToString=A;B.valueToString=function(f){if(null===f)return"";const v=typeof f;return"string"===v?f:"number"===v||"boolean"===v?String(f):f instanceof F?f.toString():JSON.stringify(f)};Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression",
"../expression/types"],function(B,F,y,A){return function(){function g(c,d){this.isDataDriven=!1;this.interpolator=null;switch(c.type){case "number":var a=!0;break;case "color":a=!0;break;case "array":a="number"===c.value;break;default:a=!1}null==d&&(d=c.default);if(Array.isArray(d)&&0<d.length&&y.ops[d[0]]){a={number:A.NumberType,color:A.ColorType,string:A.StringType,boolean:A.BooleanType,enum:A.StringType};try{var b="array"===c.type?A.arrayType(a[c.value]||A.ValueType,c.length):a[c.type];const h=
y.createExpression(d,null,b);this.getValue=this._buildExpression(h,c);this.isDataDriven=!0;h instanceof y.Interpolate&&h.input instanceof y.Zoom&&(this.interpolator=h)}catch(h){console.log(h.message),this.getValue=this._buildSimple(c.default)}}else{a&&"interval"===d.type&&(a=!1);if(b=d&&d.stops&&0<d.stops.length)for(const h of d.stops)h[1]=this._validate(h[1],c);if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,c)),b)switch(d.type){case "identity":this.getValue=
this._buildIdentity(d,c);break;case "categorical":this.getValue=this._buildCategorical(d,c);break;default:this.getValue=a?this._buildInterpolate(d,c):this._buildInterval(d,c)}else this.getValue=this._buildIdentity(d,c);else b?this.getValue=a?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,c),this.getValue=this._buildSimple(d))}}var u=g.prototype;u._validate=function(c,d){if("number"===d.type){if(c<d.minimum)return d.minimum;if(c>d.maximum)return d.maximum}else"color"===
d.type?c=g._parseColor(c):"enum"===d.type?"string"===typeof c&&(c=d.values.indexOf(c)):"array"===d.type&&"enum"===d.value?c=c.map(a=>"string"===typeof a?d.values.indexOf(a):a):"string"===d.type&&(c=A.valueToString(c));return c};u._buildSimple=function(c){return()=>c};u._buildExpression=function(c,d){return(a,b)=>{try{const h=c.evaluate(b,a);return void 0===h?d.default:this._validate(h,d)}catch(h){return console.log(h.message),d.default}}};u._buildIdentity=function(c,d){return(a,b)=>{let h;b&&(h=b.values[c.property]);
void 0!==h&&(h=this._validate(h,d));return null!=h?h:void 0!==c.default?c.default:d.default}};u._buildCategorical=function(c,d){return(a,b)=>{let h;b&&(h=b.values[c.property]);h=this._categorical(h,c.stops);return void 0!==h?h:void 0!==c.default?c.default:d.default}};u._buildInterval=function(c,d){return(a,b)=>{let h;b&&(h=b.values[c.property]);return"number"===typeof h?this._interval(h,c.stops):void 0!==c.default?c.default:d.default}};u._buildInterpolate=function(c,d){return(a,b)=>{let h;b&&(h=b.values[c.property]);
return"number"===typeof h?this._interpolate(h,c.stops,c.base||1):void 0!==c.default?c.default:d.default}};u._buildZoomInterpolate=function(c){return d=>this._interpolate(d,c.stops,c.base||1)};u._buildZoomInterval=function(c){return d=>this._interval(d,c.stops)};u._categorical=function(c,d){const a=d.length;for(let b=0;b<a;b++)if(d[b][0]===c)return d[b][1]};u._interval=function(c,d){const a=d.length;let b=0;for(let h=0;h<a;h++)if(d[h][0]<=c)b=h;else break;return d[b][1]};u._interpolate=function(c,
d,a){const b=d.length;for(let q=0;q<b;q++){const n=d[q];if(n[0]<=c)var h=n;else{var m=n;break}}if(h&&m){d=m[0]-h[0];c-=h[0];a=1===a?c/d:(a**c-1)/(a**d-1);if(Array.isArray(h[1])){h=h[1];m=m[1];c=[];for(d=0;d<h.length;d++)c.push(F.interpolate(h[d],m[d],a));return c}return F.interpolate(h[1],m[1],a)}if(h)return h[1];if(m)return m[1]};g._isEmpty=function(c){for(const d in c)if(c.hasOwnProperty(d))return!1;return!0};g._parseColor=function(c){if(Array.isArray(c))return c;"string"===typeof c&&(c=new B(c));
if(c instanceof B&&!this._isEmpty(c))return B.toUnitRGBA(c)};return g}()})},"esri/views/2d/layers/LayerView2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/collectionUtils ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../engine/Container ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),
function(B,F,y,A,g,u,c,d,a,b,h,m,q,n,f){const v=A.ofType({key:"type",base:null,typeMap:{rect:q,path:f,geometry:n}});B.LayerView2DMixin=t=>{t=function(k){function r(){var G=k.apply(this,arguments)||this;G.attached=!1;G.clips=new v;G.lastUpdateId=-1;G.moving=!1;G.updateRequested=!1;G.visibleAtCurrentScale=!1;return G}F._inheritsLoose(r,k);var C=r.prototype;C.initialize=function(){const G=this.view?.spatialReferenceLocked??!0;this.view?.spatialReference&&G&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new u("layerview:spatial-reference-incompatible",
"The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new m.Container),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.handles.add([c.watch(()=>this.suspended,x=>{this.container&&(this.container.visible=!x);this.view&&!x&&this.updateRequested&&this.view.requestUpdate()},c.syncAndInitial),c.watch(()=>this.layer?.opacity??1,x=>{this.container&&(this.container.opacity=
x)},c.syncAndInitial),c.watch(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",x=>{this.container&&(this.container.blendMode=x)},c.syncAndInitial),c.watch(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,x=>{this.container&&(this.container.effect=x)},c.syncAndInitial),c.on(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)},c.syncAndInitial),c.watch(()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?
this.layer.effectiveScaleRange:null}),({scale:x})=>{x=x&&this.isVisibleAtScale(x);x!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",x)},c.syncAndInitial)]),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then(x=>{x===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))};C.destroy=function(){this.processDetach();this.updateRequested=!1};C.processAttach=function(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&
(this.attach(),this.attached=!0,this.requestUpdate())};C.processDetach=function(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)};C.isVisibleAtScale=function(G){const x=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!x)return!0;const {minScale:w,maxScale:D}=x;return(0===w||G<=w)&&(0===D||G>=D)};C.requestUpdate=function(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())};C.processUpdate=
function(G){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",G),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(G)))};C.hitTest=function(G,x){return Promise.resolve(null)};C.supportsSpatialReference=function(G){return!0};C.canResume=function(){return this.spatialReferenceSupported?k.prototype.canResume.call(this)?this.visibleAtCurrentScale:!1:!1};C.getSuspendInfo=function(){const G=k.prototype.getSuspendInfo.call(this),x=!this.spatialReferenceSupported,
w=this.visibleAtCurrentScale;x&&(G.spatialReferenceNotSupported=x);w&&(G.outsideScaleRange=w);return G};F._createClass(r,[{key:"spatialReferenceSupported",get:function(){const G=this.view?.spatialReference;return null==G||this.supportsSpatialReference(G)}},{key:"updating",get:function(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this.updatingHandles?.updating)}}]);return r}(t);y.__decorate([d.property()],t.prototype,"attached",
void 0);y.__decorate([d.property({type:v,set(k){k=g.referenceSetter(k,this._get("clips"),v);this._set("clips",k)}})],t.prototype,"clips",void 0);y.__decorate([d.property()],t.prototype,"container",void 0);y.__decorate([d.property()],t.prototype,"moving",void 0);y.__decorate([d.property({readOnly:!0})],t.prototype,"spatialReferenceSupported",null);y.__decorate([d.property({readOnly:!0})],t.prototype,"updateParameters",void 0);y.__decorate([d.property()],t.prototype,"updateRequested",void 0);y.__decorate([d.property()],
t.prototype,"updating",null);y.__decorate([d.property()],t.prototype,"view",void 0);y.__decorate([d.property({readOnly:!0})],t.prototype,"visibleAtCurrentScale",void 0);return t=y.__decorate([h.subclass("esri.views.2d.layers.LayerView2D")],t)};Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/layers/support/ClipRect":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),
function(B,F,y,A,g,u,c){var d;A=d=function(a){function b(m){m=a.call(this,m)||this;m.type="rect";m.left=null;m.right=null;m.top=null;m.bottom=null;return m}B._inheritsLoose(b,a);var h=b.prototype;h.clone=function(){return new d({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};h.commitVersionProperties=function(){this.commitProperty("left");this.commitProperty("right");this.commitProperty("top");this.commitProperty("bottom")};return b}(c);F.__decorate([y.property({type:[Number,String],
json:{write:!0}})],A.prototype,"left",void 0);F.__decorate([y.property({type:[Number,String],json:{write:!0}})],A.prototype,"right",void 0);F.__decorate([y.property({type:[Number,String],json:{write:!0}})],A.prototype,"top",void 0);F.__decorate([y.property({type:[Number,String],json:{write:!0}})],A.prototype,"bottom",void 0);return A=d=F.__decorate([u.subclass("esri.views.layers.support.ClipRect")],A)})},"esri/views/layers/support/ClipArea":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(B,F,y,A,g,u,c){y=function(d){function a(){return d.apply(this,arguments)||this}B._inheritsLoose(a,d);B._createClass(a,[{key:"version",get:function(){this.commitVersionProperties();return(this._get("version")||0)+1}}]);return a}(y.JSONSupport);F.__decorate([A.property({readOnly:!0})],y.prototype,"version",null);return y=F.__decorate([c.subclass("esri.views.layers.support.ClipArea")],y)})},"esri/views/layers/support/Geometry":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea ../../../geometry/Extent ../../../geometry/Polygon".split(" "),
function(B,F,y,A,g,u,c,d,a,b,h,m){var q;y={base:d,key:"type",typeMap:{extent:h,polygon:m}};b=q=function(n){function f(t){t=n.call(this,t)||this;t.type="geometry";t.geometry=null;return t}B._inheritsLoose(f,n);var v=f.prototype;v.clone=function(){return new q({geometry:this.geometry?.clone()??null})};v.commitVersionProperties=function(){this.commitProperty("geometry")};return f}(b);F.__decorate([A.property({types:y,json:{read:a.fromJSON,write:!0}})],b.prototype,"geometry",void 0);return b=q=F.__decorate([c.subclass("esri.views.layers.support.Geometry")],
b)})},"esri/views/layers/support/Path":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./ClipArea".split(" "),function(B,F,y,A,g,u,c){A=function(d){function a(b){b=d.call(this,b)||this;b.type="path";b.path=[];return b}B._inheritsLoose(a,d);a.prototype.commitVersionProperties=function(){this.commitProperty("path")};
return a}(c);F.__decorate([y.property({type:[[[Number]]],json:{write:!0}})],A.prototype,"path",void 0);return A=F.__decorate([u.subclass("esri.views.layers.support.Path")],A)})},"esri/views/2d/layers/support/DebugOverlay":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/mat3 ../../../../chunks/mat3f32 ../../../webgl/BufferObject ../../../webgl/FramebufferObject ../../../../core/arrayUtils ../../../../core/has ../../../webgl/checkWebGLError ../../../webgl/context-util ../../../webgl/enums ../../../../chunks/builtins ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../engine/DisplayObject ../../../webgl/VertexElementDescriptor".split(" "),
function(B,F,y,A,g,u,c,d,a,b,h,m,q,n,f){const v={geometry:[new f.VertexElementDescriptor("a_PositionAndFlags",3,b.DataType.SHORT,0,6)]},t=new Map;t.set("a_PositionAndFlags",0);const k={vsPath:"debug/overlay",fsPath:"debug/overlay",attributes:t};return function(r){function C(x){var w=r.call(this)||this;w._conf=x;return w}B._inheritsLoose(C,r);C.makeFlags=function(x,w){return x|w<<2};var G=C.prototype;G._createTransforms=function(){return{dvs:y.create()}};G.doRender=function(x){this._updateTransforms(x);
this._ensureResources(x);const {context:w}=x;w.useProgram(this._program);this._program.setUniformMatrix3fv("u_dvsMat3",this.transforms.dvs);this._program.setUniform4fv("u_colors",this._conf.getColors(x));this._program.setUniform1fv("u_opacities",this._conf.getOpacities(x));const {vertexData:D,indexData:M}=this._conf.getMesh(x);this._vertexBuffer.setData(D);this._indexBuffer.setData(M);w.bindVAO(this._vertexArray);w.setBlendingEnabled(!0);w.setBlendFunction(b.BlendFactor.ONE,b.BlendFactor.ONE_MINUS_SRC_ALPHA);
w.setDepthTestEnabled(!1);w.setStencilTestEnabled(!1);w.setColorMask(!0,!0,!0,!0);w.drawElements(b.PrimitiveType.TRIANGLES,M.length,b.DataType.UNSIGNED_INT,0)};G.onDetach=function(){this._vertexArray&&(this._vertexArray.dispose(),this._vertexArray=null)};G._updateTransforms=function(x){F.identity(this.transforms.dvs);F.translate(this.transforms.dvs,this.transforms.dvs,[-1,1]);F.scale(this.transforms.dvs,this.transforms.dvs,[2/x.state.size[0],-2/x.state.size[1],1])};G._ensureResources=function(x){const {context:w}=
x;this._program||(this._program=x.painter.materialManager.getProgram(k));this._vertexBuffer||(this._vertexBuffer=A.BufferObject.createVertex(w,b.Usage.STREAM_DRAW));this._indexBuffer||(this._indexBuffer=A.BufferObject.createIndex(w,b.Usage.STREAM_DRAW));this._vertexArray||(this._vertexArray=new q.VertexArrayObject(w,t,v,{geometry:this._vertexBuffer},this._indexBuffer))};return C}(n.DisplayObject)})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers",
"../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(B,F,y,A){return function(g){function u(){var d=g.apply(this,arguments)||this;d._fullCacheLodInfos=null;d._levelByScale={};return d}B._inheritsLoose(u,g);var c=u.prototype;c.getTileParentId=function(d){d=A.pool.acquire(d);const a=0===d.level?null:A.getId(d.level-1,d.row>>1,d.col>>1,d.world);A.pool.release(d);return a};c.getTileCoverage=function(d,a,b){d=g.prototype.getTileCoverage.call(this,d,a,b);if(!d)return d;const h=1<<d.lodInfo.level;
d.spans=d.spans.filter(m=>0<=m.row&&m.row<h);return d};c.scaleToLevel=function(d){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[d])return this._levelByScale[d];var a=this._fullCacheLodInfos;if(d>a[0].scale)return a[0].level;let b;for(let h=0;h<a.length-1;h++)if(b=a[h+1],d>b.scale)return a=a[h],a.level+(a.scale-d)/(a.scale-b.scale);return a[a.length-1].level};c._initializeFullCacheLODs=function(d){d=0===d[0].level?d.map(a=>({level:a.level,resolution:a.resolution,
scale:a.scale})):F.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(a=>({level:a.level,resolution:a.resolution,scale:a.scale}));for(let a=0;a<d.length;a++)this._levelByScale[d[a].scale]=d[a].level;this._fullCacheLodInfos=d};return u}(y)})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/lang ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/diffUtils ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ../engine/vectorTiles/enums ../engine/vectorTiles/TileHandler ../engine/vectorTiles/TileManager ../engine/vectorTiles/VectorTile ../engine/vectorTiles/VectorTileContainer ../engine/vectorTiles/style/StyleDefinition ../engine/vectorTiles/style/StyleRepository ./LayerView2D ./support/DebugOverlay ../tiling/TileInfoViewPOT ../tiling/TileQueue ../../layers/LayerView".split(" "),function(B,
F,y,A,g,u,c,d,a,b,h,m,q,n,f,v,t,k,r,C,G,x,w,D,M,O){function W(Q){if(u.isNone(Q))return 0;switch(Q.type){case "partial":return Object.keys(Q.diff).length;case "complete":return Math.max(Object.keys(Q.oldValue).length,Object.keys(Q.newValue).length);case "collection":return Object.keys(Q.added).length+Object.keys(Q.changed).length+Object.keys(Q.removed).length}}b=function(Q){function U(){var L=Q.apply(this,arguments)||this;L._styleChanges=[];L._fetchQueue=null;L._parseQueue=null;L._isTileHandlerReady=
!1;L.fading=!1;L._getCollidersMesh=K=>{({pixelRatio:K}=K.state);let H=0;const J=[],S=[];for(const ba of L._vectorTileContainer.children)if(ba.symbols)for(const [,Z]of ba.symbols)for(const Y of Z)for(const ea of Y.colliders){const V=(ea.xScreen+ea.dxScreen)*K,aa=(ea.yScreen+ea.dyScreen)*K,fa=ea.width*K,ha=ea.height*K;var R=.5<Y.unique.parts[ea.partIndex].targetOpacity;if(!R&&"all"!==L.layer.showCollisionBoxes)continue;const ka=w.makeFlags(R?2:0,R?3:0);J.push(V,aa,ka,V+fa,aa,ka,V,aa+ha,ka,V+fa,aa+ha,
ka);S.push(H+0,H+1,H+2,H+1,H+3,H+2);H+=4;R=w.makeFlags(R?3:1,R?3:0);J.push(V,aa,R,V+fa,aa,R,V,aa+1,R,V+fa,aa+1,R);S.push(H+0,H+1,H+2,H+1,H+3,H+2);H+=4;J.push(V,aa+ha-1,R,V+fa,aa+ha-1,R,V,aa+ha,R,V+fa,aa+ha,R);S.push(H+0,H+1,H+2,H+1,H+3,H+2);H+=4;J.push(V,aa,R,V+1,aa,R,V,aa+ha,R,V+1,aa+ha,R);S.push(H+0,H+1,H+2,H+1,H+3,H+2);H+=4;J.push(V+fa-1,aa,R,V+fa,aa,R,V+fa-1,aa+ha,R,V+fa,aa+ha,R);S.push(H+0,H+1,H+2,H+1,H+3,H+2);H+=4}return{vertexData:new Int16Array(J),indexData:new Uint32Array(S)}};L._getCollidersColors=
()=>[1,.5,0,1,1,0,0,1,0,1,.5,1,0,.5,0,1];L._getCollidersOpacities=()=>[.05,.01,.15,.2];return L}B._inheritsLoose(U,Q);var P=U.prototype;P.hitTest=function(){var L=B._asyncToGenerator(function*(K,H){if(!this._tileHandlerPromise)return null;yield this._tileHandlerPromise;H=yield this._vectorTileContainer.hitTest(H);if(!H||0===H.length)return null;H=H[0]-1;var J=this._styleRepository;const S=J.getStyleLayerByUID(H);if(!S)return null;J=J.getStyleLayerIndex(S.id);return[{type:"graphic",mapPoint:K,layer:this.layer,
graphic:new y({attributes:{layerId:J,layerName:S.id,layerUID:H},layer:this.layer,sourceLayer:this.layer})}]});return function(K,H){return L.apply(this,arguments)}}();P.update=function(L){this._tileHandlerPromise&&this._isTileHandlerReady&&(L.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),this._tileHandler.devicePixelRatio=L.pixelRatio):0<this._styleChanges.length?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=
L.state,this._parseQueue.state=L.state,this._tileManager.update(L)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))};P.attach=function(){const {style:L}=this.layer.currentStyleInfo;this._styleRepository=new G(L);this._tileInfoView=new D(this.layer.tileInfo,this.layer.fullExtent);this._vectorTileContainer=new r.VectorTileContainer(this._tileInfoView);this._tileHandler=new v.TileHandler(this.layer,this._styleRepository,window.devicePixelRatio||1);this.container.addChild(this._vectorTileContainer);
this._start();this.handles.add([this._vectorTileContainer.on("fade-start",()=>{this.fading=!0;this.notifyChange("updating");this.requestUpdate()}),this._vectorTileContainer.on("fade-complete",()=>{this._collisionOverlay?.requestRender();this.fading=!1;this.notifyChange("updating");this.requestUpdate()}),d.watch(()=>this.layer.showCollisionBoxes,K=>{"none"!==K?this._collisionOverlay||(this._collisionOverlay=new w({getMesh:this._getCollidersMesh,getColors:this._getCollidersColors,getOpacities:this._getCollidersOpacities}),
this.container.addChild(this._collisionOverlay)):(this.container.removeChild(this._collisionOverlay),this._collisionOverlay=null);this.container.requestRender()},d.initial),this.layer.on("paint-change",K=>{if(K.isDataDriven)this._styleChanges.push({type:f.StyleUpdateType.PAINTER_CHANGED,data:K}),this.notifyChange("updating"),this.requestUpdate();else{const J=this._styleRepository;var H=J.getLayerById(K.layer);H&&(H=H.type===C.StyleLayerType.SYMBOL,J.setPaintProperties(K.layer,K.paint),H&&this._vectorTileContainer.restartDeclutter(),
this._vectorTileContainer.requestRender())}}),this.layer.on("layout-change",K=>{const H=this._styleRepository,J=H.getLayerById(K.layer);if(J){var S=m.diff(J.layout,K.layout);u.isNone(S)||(m.hasDiff(S,"visibility")&&1===W(S)?(H.setLayoutProperties(K.layer,K.layout),J.type===C.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender()):(this._styleChanges.push({type:f.StyleUpdateType.LAYOUT_CHANGED,data:K}),this.notifyChange("updating"),this.requestUpdate()))}}),
this.layer.on("style-layer-visibility-change",K=>{const H=this._styleRepository,J=H.getLayerById(K.layer);J&&(H.setStyleLayerVisibility(K.layer,K.visibility),J.type===C.StyleLayerType.SYMBOL&&this._vectorTileContainer.restartDeclutter(),this._vectorTileContainer.requestRender())}),this.layer.on("style-layer-change",K=>{this._styleChanges.push({type:f.StyleUpdateType.LAYER_CHANGED,data:K});this.notifyChange("updating");this.requestUpdate()}),this.layer.on("delete-style-layer",K=>{this._styleChanges.push({type:f.StyleUpdateType.LAYER_REMOVED,
data:K});this.notifyChange("updating");this.requestUpdate()}),this.layer.on("load-style",()=>this._loadStyle()),this.layer.on("spriteSource-change",K=>{this._newSpriteSource=K.spriteSource;this._styleChanges.push({type:f.StyleUpdateType.SPRITES_CHANGED,data:null});K=this._styleRepository.layers;for(const H of K)switch(H.type){case C.StyleLayerType.SYMBOL:H.getLayoutProperty("icon-image")&&this._styleChanges.push({type:f.StyleUpdateType.LAYOUT_CHANGED,data:{layer:H.id,layout:H.layout}});break;case C.StyleLayerType.LINE:H.getPaintProperty("line-pattern")&&
this._styleChanges.push({type:f.StyleUpdateType.PAINTER_CHANGED,data:{layer:H.id,paint:H.paint,isDataDriven:H.isPainterDataDriven()}});break;case C.StyleLayerType.FILL:H.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:f.StyleUpdateType.PAINTER_CHANGED,data:{layer:H.id,paint:H.paint,isDataDriven:H.isPainterDataDriven()}})}this.notifyChange("updating");this.requestUpdate()})],this.declaredClass)};P.detach=function(){this._stop();this.container.removeAllChildren();this._vectorTileContainer?.destroy();
this._vectorTileContainer=null;this._tileHandler?.destroy();this._tileHandler=null;this.handles.remove(this.declaredClass)};P.moveStart=function(){this.requestUpdate()};P.viewChange=function(){this.requestUpdate()};P.moveEnd=function(){this._collisionOverlay&&this._vectorTileContainer.restartDeclutter();this.requestUpdate()};P.supportsSpatialReference=function(L){return n.equals(this.layer.tileInfo?.spatialReference,L)};P.canResume=function(){let L=Q.prototype.canResume.call(this);const {currentStyleInfo:K}=
this.layer;if(L&&K?.layerDefinition){const H=this.view.scale,{minScale:J,maxScale:S}=K.layerDefinition;K&&K.layerDefinition&&(J&&J<H&&(L=!1),S&&S>H&&(L=!1))}return L};P.isUpdating=function(){const L=this._vectorTileContainer.children;return!this._isTileHandlerReady||!this._fetchQueue||!this._parseQueue||this._fetchQueue.updating||this._parseQueue.updating||0<L.length&&L.some(K=>K.invalidating)||this.fading};P.acquireTile=function(L){const K=this._createVectorTile(L);this._tileHandlerPromise.then(()=>
{this._fetchQueue.push(K.key).then(H=>this._parseQueue.push({key:K.key,data:H})).then(H=>{K.once("attach",()=>this.requestUpdate());K.setData(H);this.requestUpdate();this.notifyChange("updating")}).catch(H=>{this.notifyChange("updating");c.isAbortError(H)||g.getLogger(this.declaredClass).error(H)})});return K};P.releaseTile=function(L){L=L.key.id;this._fetchQueue.abort(L);this._parseQueue.abort(L);this.requestUpdate()};P._start=function(){this._stop();this._tileManager=new t.TileManager({acquireTile:H=>
this.acquireTile(H),releaseTile:H=>this.releaseTile(H),tileInfoView:this._tileInfoView},this._vectorTileContainer);if(this.layer.currentStyleInfo){var L=new AbortController,K=this._tileHandler.start({signal:L.signal}).then(()=>{this._fetchQueue=new M({tileInfoView:this._tileInfoView,process:(H,J)=>this._getTileData(H,J),concurrency:15});this._parseQueue=new M({tileInfoView:this._tileInfoView,process:(H,J)=>this._parseTileData(H,J),concurrency:8});this.requestUpdate();this._isTileHandlerReady=!0});
this._tileHandler.spriteMosaic.then(H=>{this._vectorTileContainer.setStyleResources(H,this._tileHandler.glyphMosaic,this._styleRepository);this.requestUpdate()});this._tileHandlerAbortController=L;this._tileHandlerPromise=K}};P._stop=function(){if(this._tileHandlerAbortController&&this._vectorTileContainer){var L=this._tileHandlerAbortController;L&&L.abort();this._tileHandlerPromise=null;this._isTileHandlerReady=!1;this._fetchQueue&&(this._fetchQueue.destroy(),this._fetchQueue=null);this._parseQueue&&
(this._parseQueue.destroy(),this._parseQueue=null);this._tileManager&&(this._tileManager.destroy(),this._tileManager=null);this._vectorTileContainer.removeAllChildren()}};P._getTileData=function(){var L=B._asyncToGenerator(function*(K,H){K=yield this._tileHandler.fetchTileData(K,H);this.notifyChange("updating");return K});return function(K,H){return L.apply(this,arguments)}}();P._parseTileData=function(){var L=B._asyncToGenerator(function*(K,H){return this._tileHandler.parseTileData(K,H)});return function(K,
H){return L.apply(this,arguments)}}();P._applyStyleChanges=function(){var L=B._asyncToGenerator(function*(){this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();this._fetchQueue.clear();this._parseQueue.clear();this._tileManager.clearCache();var K=this._styleChanges;try{yield this._tileHandler.updateStyle(K)}catch(Z){g.getLogger(this.declaredClass).error("error applying vector-tiles style update",Z.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=
!0}const H=this._styleRepository,J=[];K.forEach(Z=>{Z.type===f.StyleUpdateType.LAYER_REMOVED&&(Z=H.getLayerById(Z.data.layer))&&J.push(Z.uid)});const S=[];let R;K.forEach(Z=>{const Y=Z.data;switch(Z.type){case f.StyleUpdateType.PAINTER_CHANGED:H.setPaintProperties(Y.layer,Y.paint);R=Y.layer;break;case f.StyleUpdateType.LAYOUT_CHANGED:H.setLayoutProperties(Y.layer,Y.layout);R=Y.layer;break;case f.StyleUpdateType.LAYER_REMOVED:H.deleteStyleLayer(Y.layer);return;case f.StyleUpdateType.LAYER_CHANGED:H.setStyleLayer(Y.layer,
Y.index);R=Y.layer.id;break;case f.StyleUpdateType.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(this._newSpriteSource)),R=this._newSpriteSource=null}(Z=H.getLayerById(R))&&S.push(Z.uid)});K=this._vectorTileContainer.children;if(0<J.length){this._vectorTileContainer.deleteStyleLayers(J);for(var ba of K)ba.deleteLayerData(J)}this._fetchQueue.resume();this._parseQueue.resume();if(0<S.length){ba=[];for(const Z of K)K=this._fetchQueue.push(Z.key).then(Y=>
this._parseQueue.push({key:Z.key,data:Y,styleLayerUIDs:S})).then(Y=>Z.setData(Y)),ba.push(K);yield Promise.all(ba)}this._styleChanges=[];this._isTileHandlerReady=!0;this.notifyChange("updating");this.requestUpdate()});return function(){return L.apply(this,arguments)}}();P._loadStyle=function(){var L=B._asyncToGenerator(function*(){var {style:K}=this.layer.currentStyleInfo;K=A.clone(K);this._isTileHandlerReady=!1;this._fetchQueue.pause();this._parseQueue.pause();this._fetchQueue.clear();this._parseQueue.clear();
this.notifyChange("updating");this._styleRepository=new G(K);this._vectorTileContainer.destroy();this._tileManager.clear();this._tileHandlerAbortController.abort();this._tileHandlerAbortController=new AbortController;const {signal:H}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,K),yield this._tileHandlerPromise}catch(J){if(!c.isAbortError(J))throw J;}H.aborted||(K=yield this._tileHandler.spriteMosaic,this._vectorTileContainer.setStyleResources(K,
this._tileHandler.glyphMosaic,this._styleRepository));this._fetchQueue.resume();this._parseQueue.resume();this._isTileHandlerReady=!0;this.notifyChange("updating");this.requestUpdate()});return function(){return L.apply(this,arguments)}}();P._createVectorTile=function(L){const K=this._tileInfoView.getTileBounds(q.create(),L),H=this._tileInfoView.getTileResolution(L.level);return new k.VectorTile(L,H,K[0],K[3],512,512,this._styleRepository)};return U}(x.LayerView2DMixin(O));F.__decorate([a.property()],
b.prototype,"_fetchQueue",void 0);F.__decorate([a.property()],b.prototype,"_parseQueue",void 0);F.__decorate([a.property()],b.prototype,"_isTileHandlerReady",void 0);F.__decorate([a.property()],b.prototype,"fading",void 0);return b=F.__decorate([h.subclass("esri.views.2d.layers.VectorTileLayerView2D")],b)});