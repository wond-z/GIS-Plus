// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["../webgl/Geometry"],function(n){var k;(function(d){d[d.moveTo=1]="moveTo";d[d.lineTo=2]="lineTo";d[d.close=7]="close"})(k||(k={}));return function(){function d(a,c){this.values={};this._geometry=void 0;this._pbfGeometry=null;const f=c.keys;c=c.values;for(a=a.asUnsafe();a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:const b=a.getMessage().asUnsafe(),l=this.values;for(;!b.empty();){const g=b.getUInt32(),e=b.getUInt32();l[f[g]]=c[e]}b.release();break;case 3:this.type=a.getUInt32();
break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}d.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const c=this._pbfGeometry.asUnsafe();this._pbfGeometry=null;let f,b;a?a.reset(this.type):f=[];let l=k.moveTo;var g=0;let e=0,h=0;for(;!c.empty();)switch(0===g&&(g=c.getUInt32(),l=g&7,g>>=3),g--,l){case k.moveTo:e+=c.getSInt32();h+=c.getSInt32();a?a.moveTo(e,h):f&&(b&&f.push(b),b=[],b.push(new n.Point(e,h)));break;
case k.lineTo:e+=c.getSInt32();h+=c.getSInt32();a?a.lineTo(e,h):b&&b.push(new n.Point(e,h));break;case k.close:a?a.close():b&&!b[0].equals(e,h)&&b.push(b[0].clone());break;default:throw c.release(),Error("Invalid path operation");}let m;a?m=a.result():f&&(b&&f.push(b),m=f);c.release();return this._geometry=m};return d}()});