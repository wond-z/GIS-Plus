// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions"],function(h,k,l,m){let g=function(){function c(a){this._cursor=this._head=a}c.from=function(a,b=0,e=a.byteLength/f.BYTES_PER_RECORD-b){a=new f(new Int32Array(a,b*f.BYTES_PER_RECORD,e*f.ELEMENTS_PER_RECORD));return new c(a)};var d=c.prototype;d.size=function(){let a=this._cursor,b=0;for(;a;)b+=a.size(),a=a._link;return b};d.seekIndex=function(a){for(this._cursor=this._head;this._cursor;){const b=
this._cursor.size();if(a<b)return this._cursor._index=a,!0;a-=b;this._cursor=this._cursor._link}return!1};d.forEach=function(a){const b=this.getCursor();for(;b.next();)a(b)};d.link=function(a){if(this._head){for(var b=this._head;b._link;)b=b._link;b._link=a._head;b._link._indexStart=b._indexStart+b.size()}else this._head=a._head};d.getCursor=function(){return this.copy()};d.lookup=function(a){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(a);){if(!this._cursor._link)return!1;this._cursor=
this._cursor._link}return!!this._cursor};d.copy=function(){const a=new c(this._head?.copy());if(!a._head)return a;let b=a._head,e=a._head._link;for(;e;)b._link=e.copy(),b=e,e=b._link;return a};d.next=function(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link;return this.next()}return!0};d.peekId=function(){return this._cursor.peekId()??this._cursor._link.peekId()};d.delete=function(a){let b=this._head,e=null;for(;b;){if(b.delete(a))return b.isEmpty()&&
(l.isSome(e)&&(e._link=b._link),b===this._head&&(this._head=b._link),b===this._cursor&&(this._cursor=b._link)),!0;e=b;b=b._link}return!1};k._createClass(c,[{key:"id",get:function(){return this._cursor.id},set:function(a){this._cursor.id=a}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(a){this._cursor.materialKey=a}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},set:function(a){this._cursor.indexFrom=
a}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(a){this._cursor.indexCount=a}},{key:"vertexFrom",get:function(){return this._cursor.vertexFrom},set:function(a){this._cursor.vertexFrom=a}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(a){this._cursor.vertexCount=a}},{key:"sortKey",get:function(){return this._cursor.sortKey},set:function(a){this._cursor.sortKey=a}},{key:"index",get:function(){return this._cursor._indexStart+this._cursor._index}}]);
return c}();g.ELEMENTS_PER_RECORD=m.DISPLAY_RECORD_INT_PER_ELEMENT;g.BYTES_PER_RECORD=g.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;let f=function(){function c(a){this._link=null;this._index=-1;this._indexStart=0;this._packedRecordsF32=null;this._deletedCount=0;this._offsets={instance:null};this._packedRecords=a}c.from=function(a,b=0,e=a.byteLength/this.BYTES_PER_RECORD-b){return new c(new Int32Array(a,b*this.BYTES_PER_RECORD,e*this.ELEMENTS_PER_RECORD))};var d=c.prototype;d.delete=function(a){const b=
this._index,e=this.lookup(a);if(e)for(this.id=2147483647,++this._deletedCount;this.next()&&this.id===a;)this.id=2147483647,++this._deletedCount;this._index=b;return e};d.isEmpty=function(){return this._deletedCount===this.size()};d.link=function(a){this._link?this._link.link(a):this._link=a};d.lookup=function(a){if(l.isNone(this._offsets.instance)){this._offsets.instance=new Map;var b=this.copy();b._index=-1;let e=0;for(;b.next();)b.id!==e&&(this._offsets.instance.set(b.id,b._index),e=b.id)}if(!this._offsets.instance.has(a))return!1;
b=this._index;this._index=this._offsets.instance.get(a);return 2147483647===this.id?(this._index=b,!1):!0};d.size=function(){return this._packedRecords.length/c.ELEMENTS_PER_RECORD};d.next=function(){for(;++this._index<this.size()&&2147483647===this.id;);return this._index<this.size()};d.peekId=function(){const a=(this._index+1)*c.ELEMENTS_PER_RECORD;return a>=this._packedRecords.length?0:this._packedRecords[a]};d.getCursor=function(){return this.copy()};d.copy=function(){const a=new c(this._packedRecords);
a._indexStart=this._indexStart;a._link=this._link;a._index=this._index;a._offsets=this._offsets;a._deletedCount=this._deletedCount;return a};k._createClass(c,[{key:"id",get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD]=a}},{key:"materialKey",get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+1]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+1]=a}},{key:"insertAfter",
get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+3]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+3]=a}},{key:"indexCount",get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+4]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+4]=a}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*
c.ELEMENTS_PER_RECORD+5]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+5]=a}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+6]},set:function(a){this._packedRecords[this._index*c.ELEMENTS_PER_RECORD+6]=a}},{key:"sortKey",get:function(){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));return this._packedRecordsF32[this._index*c.ELEMENTS_PER_RECORD+7]},set:function(a){this._packedRecordsF32||
(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer));this._packedRecordsF32[this._index*c.ELEMENTS_PER_RECORD+7]=a}},{key:"index",get:function(){return this._index}}]);return c}();f.ELEMENTS_PER_RECORD=m.DISPLAY_RECORD_INT_PER_ELEMENT;f.BYTES_PER_RECORD=f.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;h.DisplayRecordReader=g;Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});