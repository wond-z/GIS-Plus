// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../enums ../Utils ./WGLGeometryBrush ../materialKey/MaterialKey ../techniques/utils ../../../../webgl/enums".split(" "),function(A,m,n,B,C,D,E,b){return function(v){function r(){return v.apply(this,arguments)||this}A._inheritsLoose(r,v);var l=r.prototype;l.dispose=function(){};l.getGeometryType=function(){return n.WGLGeometryType.FILL};l.supportsSymbology=function(d){return d!==n.WGLSymbologyType.DOT_DENSITY};l.drawGeometry=
function(d,f,e,a){const {context:k,painter:p,rendererInfo:w,requiredLevel:F,passOptions:x,requestRender:y,allowDelayedRender:G}=d;var c=D.FillMaterialKey.load(e.materialKey),g=E.getTechniqueFromMaterialKey(c.data);const t=m.isSome(x)&&"hittest"===x.type;var h=p.materialManager,q=m.unwrapOr;g=g.programSpec;const u={geometry:[{location:0,name:"a_pos",count:2,type:b.DataType.SHORT},{location:1,name:"a_id",count:3,type:b.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:b.DataType.UNSIGNED_BYTE},
{location:3,name:"a_color",count:4,type:b.DataType.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_aux1",count:4,type:b.DataType.UNSIGNED_SHORT},{location:5,name:"a_aux2",count:4,type:b.DataType.SHORT},{location:6,name:"a_aux3",count:4,type:b.DataType.UNSIGNED_BYTE},{location:7,name:"a_zoomRange",count:2,type:b.DataType.UNSIGNED_SHORT}]};switch(c.symbologyType){case n.WGLSymbologyType.SIMPLE:case n.WGLSymbologyType.OUTLINE_FILL_SIMPLE:u.geometry.splice(7,1),u.geometry.splice(4,1)}const {shader:H,
vertexLayout:I,hittestAttributes:J}=q.call(m,g,{shader:"materials/fill",vertexLayout:u});q=b.PrimitiveType.TRIANGLES;g=B.createProgramDescriptor(c.data,I);t&&(g=this._getTriangleDesc(e.materialKey,g,J),q=b.PrimitiveType.POINTS);const {attributes:z,bufferLayouts:K}=g;a=h.getMaterialProgram(d,c,H,z,a);G&&m.isSome(y)&&!a.isCompiled?y():(k.useProgram(a),this._setSharedUniforms(a,d,f),a.setUniform2f("u_tileOffset",512*f.key.col,512*f.key.row),c.textureBinding&&(p.textureManager.bindTextures(k,a,c),a.setUniform1f("u_zoomFactor",
1/2**(F-f.key.level))),h=1/d.pixelRatio,a.setUniform1f("u_blur",h),a.setUniform1f("u_antialiasing",h),this._setSizeVVUniforms(c,a,w,f),this._setColorAndOpacityVVUniforms(c,a,w),c=e.target.getVAO(k,K,z,t),h=e.indexCount,e=e.indexFrom*Uint32Array.BYTES_PER_ELEMENT,t&&(h/=3,e/=3),k.bindVAO(c),this._drawFills(d,f,a,q,h,e))};l._drawFills=function(d,f,e,a,k,p){d.context.drawElements(a,k,b.DataType.UNSIGNED_INT,p)};return r}(C)});