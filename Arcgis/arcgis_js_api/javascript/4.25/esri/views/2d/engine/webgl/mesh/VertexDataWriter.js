// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(q,t,r,u,l){let A=function(){function m(a,d,c){this._start={index:0,vertex:0};c=u.getMeshSizeHint(a,d,c);d/=4;this.geometryType=a;this._records=new l(Int32Array,c.recordBytes);this._indices=new l(Uint32Array,c.indexBytes);this._vertices=new l(Uint32Array,c.vertexBytes);this._metrics=new l(Float32Array,0);this._strideInt=d}var e=m.prototype;e.serialize=function(a){const d=this._records.buffer(),
c=this._indices.buffer(),b=this._vertices.buffer(),f=this._metrics.length?this._metrics.buffer():null,g=4*this._strideInt;a.push(d,c,b);return{stride:g,records:d,indices:c,vertices:b,metrics:f}};e.vertexEnsureSize=function(a){this._vertices.ensureSize(a)};e.indexEnsureSize=function(a){this._indices.ensureSize(a)};e.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};e.recordEnd=function(a,d,c,b,f,g,n,p){this._records.push(a);this._records.push(d);
this._records.push(c);this._records.push(b);this._records.push(f);this._records.push(g);this._records.push(n);this._records.writeF32(p)};e.writeIndex=function(a){this._indices.push(a)};e.writeVertex=function(a){this._vertices.push(a)};e.writeVertexF32=function(a){this._vertices.writeF32(a)};e.copyLastFrom=function(a,d,c){var b=a._records.length-r.DISPLAY_RECORD_INT_PER_ELEMENT;const f=a._records.getValue(b),g=a._records.getValue(b+1),n=a._records.getValue(b+2),p=a._records.getValue(b+4),v=a._records.getValue(b+
6);b=a._records.getValue(b+7);const w=this._vertices.length;var h=(a._start.vertex-this._vertices.length)/this._strideInt;const x=this._indices.length,y=this.vertexCount;for(var k=a._start.index;k!==a._indices.length;k++){const z=a._indices.getValue(k);this._indices.push(z-h)}for(h=a._start.vertex;h!==a._vertices.length;h++)k=a._vertices.getValue(h),this._vertices.push(k);for(a=w;a<=this._vertices.length;a+=this._strideInt)this._vertices.i1616Add(a,d,c);this._records.push(f);this._records.push(g);
this._records.push(n);this._records.push(x);this._records.push(p);this._records.push(y);this._records.push(v);this._records.push(b)};t._createClass(m,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/r.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},
{key:"vertexWriter",get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return m}();q.VertexDataWriter=A;Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});