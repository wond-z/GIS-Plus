// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../Graphic ../../../core/asyncUtils ../../../core/Collection ../../../core/Error ../../../core/Evented ../../../core/Handles ../../../core/Logger ../../../core/maybe ../../../core/quantityUtils ../../../core/reactiveUtils ../../../core/screenUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/coordsUtils ../../../layers/GraphicsLayer ../../../symbols/SimpleMarkerSymbol ../../ViewingMode ../../2d/interactive/SnappingVisualizer2D ./drawUtils ./GraphicMover ./HighlightHelper ./layerUtils ./settings ../../input/InputManager ../../interactive/keybindings ../../interactive/editGeometry/EditGeometryOperations ../../interactive/sketch/SketchTooltipOptions ../../interactive/snapping/SnappingContext ../../interactive/tooltip/Tooltip ../../interactive/tooltip/TranslateTooltipInfos ../../support/automaticAreaMeasurementUtils ../../support/automaticLengthMeasurementUtils ../../../geometry/Polyline ../../../geometry/Point".split(" "),
function(E,u,x,B,O,I,P,p,J,Q,n,K,C,L,v,ta,ua,R,z,S,D,T,U,V,W,X,Y,Z,aa,ba,ca,M,da,ea,N,fa,F,ha,A){let ia=function(q,t,e){this.graphic=q;this.mover=t;this.selected=e;this.type="reshape-start"},ja=function(q,t,e){this.graphic=q;this.mover=t;this.selected=e;this.type="reshape"},ka=function(q,t,e){this.graphic=q;this.mover=t;this.selected=e;this.type="reshape-stop"},la=function(q,t,e){this.mover=q;this.dx=t;this.dy=e;this.type="move-start"},ma=function(q,t,e){this.mover=q;this.dx=t;this.dy=e;this.type=
"move"},na=function(q,t,e){this.mover=q;this.dx=t;this.dy=e;this.type="move-stop"},oa=function(q){this.added=q;this.type="vertex-select"},pa=function(q){this.removed=q;this.type="vertex-deselect"},qa=function(q,t,e,a){this.added=q;this.graphic=t;this.oldGraphic=e;this.vertices=a;this.type="vertex-add"},ra=function(q,t,e,a){this.removed=q;this.graphic=t;this.oldGraphic=e;this.vertices=a;this.type="vertex-remove"};x=Z.settings.reshapeGraphics;const G={vertices:{default:new D({style:"circle",size:x.vertex.size,
color:x.vertex.color,outline:{color:x.vertex.outlineColor,width:1}}),hover:new D({style:"circle",size:x.vertex.hoverSize,color:x.vertex.hoverColor,outline:{color:x.vertex.hoverOutlineColor,width:1}}),selected:new D({style:"circle",size:x.selected.size,color:x.selected.color,outline:{color:x.selected.outlineColor,width:1}})},midpoints:{default:new D({style:"circle",size:x.midpoint.size,color:x.midpoint.color,outline:{color:x.midpoint.outlineColor,width:1}}),hover:new D({style:"circle",size:x.midpoint.size,
color:x.midpoint.color,outline:{color:x.midpoint.outlineColor,width:1}})}};p=function(q){function t(a){a=q.call(this,a)||this;a._activeOperationInfo=null;a._editGeometryOperations=null;a._handles=new J;a._graphicAttributes={esriSketchTool:"box"};a._mover=null;a._snappingTask=null;a._stagedVertex=null;a._tooltip=null;a._viewHandles=new J;a.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}};a.enableMidpoints=!0;a.enableMovement=
!0;a.enableVertices=!0;a.graphic=null;a.layer=null;a.midpointGraphics=new I;a.midpointSymbol=new D({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}});a.selectedVertices=[];a.snappingManager=null;a.tooltipOptions=new M;a.type="reshape";a.vertexGraphics=new I;a.view=null;return a}E._inheritsLoose(t,q);var e=t.prototype;e.initialize=function(){const a=this.view;this._highlightHelper=new X({view:a});this._setup();this._handles.add([C.when(()=>a?.ready,()=>{const {layer:b,
view:c}=this;Y.addUniqueLayer(c,b);this._viewHandles.add(c.on("key-down",d=>this._keyDownHandler(d),aa.ViewEventPriorities.TOOL))},{once:!0,initial:!0}),C.pausable(()=>this.graphic,()=>this.refresh()),C.pausable(()=>this.layer,(b,c)=>{c&&(this._clearSelection(),this._resetGraphics(c));this.refresh()}),C.pausable(()=>this.enableMidpoints,()=>this.refresh()),C.watch(()=>this.tooltipOptions.enabled,b=>{this._tooltip=b?new ea.Tooltip({view:this.view}):n.destroyMaybe(this._tooltip)},C.syncAndInitial)])};
e.destroy=function(){this._reset();this._mover?.destroy();this._mover=null;this._tooltip=n.destroyMaybe(this._tooltip);this._handles=n.destroyMaybe(this._handles);this._viewHandles=n.destroyMaybe(this._viewHandles)};e.isUIGraphic=function(a){const b=[];this.graphic&&b.push(this.graphic);b.concat(this.vertexGraphics.items,this.midpointGraphics.items);return b.length&&b.includes(a)};e.refresh=function(){this._reset();this._setup()};e.reset=function(){this.graphic=null};e.clearSelection=function(){this._clearSelection()};
e.removeSelectedVertices=function(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)};e._setup=function(){const {graphic:a,layer:b}=this;if(b&&a&&!n.isNone(a.geometry)){var c=a.geometry;"mesh"===c.type||"extent"===c.type?this._logGeometryTypeError():("polygon"===c.type&&z.closeRingsAndFixWinding(c),this._setUpHighlights(),this._setupGraphics(),this._setupMover())}};e._setUpHighlights=function(){this.highlightsEnabled&&this.graphic&&this._highlightHelper.add(this.graphic)};
e._setUpGeometryHelper=function(){var a=this.graphic.geometry;n.isNone(a)||"mesh"===a.type||"extent"===a.type?this._logGeometryTypeError():(a="multipoint"===a.type?new ha({paths:a.points,spatialReference:a.spatialReference}):a,this._editGeometryOperations=ca.EditGeometryOperations.fromGeometry(a,T.ViewingMode.Local))};e._saveSnappingContextForHandle=function(a,b){this._snappingGraphicsLayer=new S({listMode:"hide",internal:!0,title:"Reshape snapping layer"});this.view.map.layers.add(this._snappingGraphicsLayer);
this._snappingContext=new da.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:b.viewEvent?.pointerType||"mouse",excludeFeature:this.graphic,visualizer:new U.SnappingVisualizer2D(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(a)})};e._reset=function(){this._clearSelection();this._highlightHelper.removeAll();this._updateTooltip();this._resetGraphics();this._resetSnappingStateVars();this._activeOperationInfo=
null;this._mover&&this._mover.destroy();this._mover=null;this.view.cursor="default"};e._resetSnappingStateVars=function(){n.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();n.isSome(this._snappingGraphicsLayer)&&(this.view?.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy());this._editGeometryOperations=n.destroyMaybe(this._editGeometryOperations);this._snappingTask=n.abortMaybe(this._snappingTask);this._stagedVertex=this._snappingContext=
this._snappingTask=null};e._resetGraphics=function(a){this._removeMidpointGraphics(a);this._removeVertexGraphics(a);this._set("selectedVertices",[])};e._removeMidpointGraphics=function(a){(a=a||this.layer)&&a.removeMany(this.midpointGraphics.items);this.midpointGraphics.items.forEach(b=>b.destroy());this.midpointGraphics.removeAll()};e._removeVertexGraphics=function(a){(a=a||this.layer)&&a.removeMany(this.vertexGraphics.items);this.vertexGraphics.items.forEach(b=>b.destroy());this.vertexGraphics.removeAll()};
e._getCoordinatesForUI=function(a){const b=z.geometryToCoordinates(a.clone());if("polygon"===a.type)for(const c of b)a=c[c.length-1],c[0][0]===a[0]&&c[0][1]===a[1]&&2<c.length&&c.pop();return b};e._setupGraphics=function(){var a=this.graphic.geometry;!n.isSome(a)||"polyline"!==a.type&&"polygon"!==a.type||(a=this._getCoordinatesForUI(a),this.enableMidpoints&&this._setUpMidpointGraphics(a),this.enableVertices&&this._setUpVertexGraphics(a))};e._setUpMidpointGraphics=function(a){this._removeMidpointGraphics();
a=this._createMidpointGraphics(a);this.midpointGraphics.addMany(a);this.layer.addMany(a)};e._setUpVertexGraphics=function(a){this._removeVertexGraphics();a=this._createVertexGraphics(a);this.vertexGraphics.addMany(a);this._storeRelatedVertexIndices();this.layer.addMany(a)};e._createVertexGraphics=function(a){const {_graphicAttributes:b,symbols:c,view:{spatialReference:d}}=this,g=[];a?.forEach((f,h)=>{f.forEach((k,m)=>{const [r,l]=k;g.push(new B({geometry:new A({x:r,y:l,spatialReference:d}),symbol:c?.vertices?.default,
attributes:{...b,pathIndex:h,pointIndex:m}}))})});return g};e._createMidpointGraphics=function(a){const {_graphicAttributes:b,symbols:c,view:{spatialReference:d}}=this,g=[];a?.forEach((f,h)=>{f.forEach((k,m)=>{const [r,l]=k;k=f[m+1]?m+1:0;if("polygon"===n.get(this.graphic.geometry,"type")||0!==k){const [w,y]=f[k],[H,sa]=z.getMidpoint([r,l],[w,y]);g.push(new B({geometry:new A({x:H,y:sa,spatialReference:d}),symbol:c.midpoints.default,attributes:{...b,pathIndex:h,pointIndexStart:m,pointIndexEnd:k}}))}})});
return g};e._storeRelatedVertexIndices=function(){const a=this.vertexGraphics.items;if(a){var b=a.map(({geometry:c})=>({x:c.x,y:c.y}));for(let c=0;c<b.length;c++){const d=[];for(let g=0;g<b.length;g++){if(c===g)continue;const f=b[c],h=b[g];f.x===h.x&&f.y===h.y&&d.push(g)}a[c].attributes.relatedGraphicIndices=d}}};e._setupMover=function(){const {enableMovement:a,graphic:b,midpointGraphics:c,vertexGraphics:d,view:g}=this,f=d.concat(c).items;a&&f.push(b);this._mover=new W({enableMoveAllGraphics:!1,highlightsEnabled:!1,
indicatorsEnabled:!1,graphics:f,view:g,callbacks:{onGraphicClick:h=>this._onGraphicClickCallback(h),onGraphicMoveStart:h=>this._onGraphicMoveStartCallback(h),onGraphicMove:h=>this._onGraphicMoveCallback(h),onGraphicMoveStop:h=>this._onGraphicMoveStopCallback(h),onGraphicPointerOver:h=>this._onGraphicPointerOverCallback(h),onGraphicPointerOut:h=>this._onGraphicPointerOutCallback(h)}})};e._onGraphicClickCallback=function(a){a.viewEvent.stopPropagation();const b=a.graphic;if(b===this.graphic){if(this.clearSelection(),
this.emit("graphic-click",a),this.callbacks.onGraphicClick)this.callbacks.onGraphicClick(a)}else if(this._isMidpoint(b)){if(2!==a.viewEvent.button){a=this.graphic.clone();var c=this._createVertexFromMidpoint(b);this.refresh();this._emitVertexAddEvent([b],a,c)}}else this._isVertex(b)&&(a.viewEvent.stopPropagation(),2===a.viewEvent.button?this._removeVertices(b):(a.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(b)?this._removeFromSelection(b,!0):this._addToSelection(b)))};
e._setUpOperation=function(a){const {graphic:b,dx:c,dy:d}=a,g=b===this.graphic;this._resetSnappingStateVars();this._setUpGeometryHelper();this._saveSnappingContextForHandle(b,a);this._activeOperationInfo={target:this.graphic,mover:b,operationType:g?"move":"reshape",totalDx:c,totalDy:d}};e._onGraphicMoveStartCallback=function(a){const {dx:b,dy:c,graphic:d}=a;if(d===this.graphic){var {geometry:g}=d;this._setUpOperation(a);this._emitMoveStartEvent(b,c);n.isSome(g)&&"point"===g.type&&this._onHandleMove(d,
b,c,a,()=>{this._updateTooltip(this.graphic,a.viewEvent);this._emitMoveEvent(b,c)})}else{if(!this.selectedVertices.includes(d)){this._clearSelection();if(this._isMidpoint(d)){g=this.graphic.clone();const f=this._createVertexFromMidpoint(d);this._emitVertexAddEvent([d],g,f)}this._addToSelection(d)}this._setUpOperation(a);this._emitReshapeStartEvent(d);this._onHandleMove(d,b,c,a,()=>{this._updateTooltip(d,a.viewEvent);this._emitReshapeEvent(d)})}};e._onGraphicMoveCallback=function(a){const {dx:b,dy:c,
graphic:d}=a;this._activeOperationInfo.totalDx+=b;this._activeOperationInfo.totalDy+=c;var {operationType:g}=this._activeOperationInfo;const {geometry:f}=d;if(!n.isNone(f))if("move"===g)if("point"===f.type)this._onHandleMove(d,b,c,a,()=>{this._updateTooltip(this.graphic,a.viewEvent);this._emitMoveEvent(b,c)});else{if("polyline"===f.type||"polygon"===f.type)g=this._getCoordinatesForUI(f),this._updateVertexGraphicLocations(g),this._updateTooltip(this.graphic,a.viewEvent),this._emitMoveEvent(b,c)}else this._onHandleMove(d,
b,c,a,()=>{this._updateTooltip(d,a.viewEvent);this._emitReshapeEvent(d)})};e._onGraphicMoveStopCallback=function(a){const {dx:b,dy:c,graphic:d}=a,{operationType:g}=this._activeOperationInfo;this._activeOperationInfo.totalDx+=b;this._activeOperationInfo.totalDy+=c;this._onHandleMove(d,b,c,a,()=>"move"===g?this._emitMoveStopEvent():this._emitReshapeStopEvent(d));this._isMidpoint(d)?this.refresh():(this._updateTooltip(this._isVertex(d)?d:null),this._resetSnappingStateVars(),this._activeOperationInfo=
null)};e._updateVertexGraphicLocations=function(a){const b=this.view.spatialReference;for(const c of this.vertexGraphics){const {pathIndex:d,pointIndex:g}=c.attributes,[f,h]=a[d][g];c.geometry=new A({x:f,y:h,spatialReference:b})}this._updateMidpointGraphicLocations(a)};e._updateMidpointGraphicLocations=function(a){for(const b of this.midpointGraphics){const {pathIndex:c,pointIndexStart:d,pointIndexEnd:g}=b.attributes,[f,h]=a[c][d],[k,m]=a[c][g],[r,l]=z.getMidpoint([f,h],[k,m]);b.geometry=new A({x:r,
y:l,spatialReference:this.view.spatialReference})}};e._getIndicesForVertexGraphic=function({attributes:a}){return[a?.pathIndex||0,a?.pointIndex||0]};e._getVertexFromEditGeometry=function(a){const [b,c]=this._getIndicesForVertexGraphic(a);return this._editGeometryOperations.data.components[b].vertices[c]};e._onHandleMove=function(a,b,c,d,g){var f=this;n.abortMaybe(this._snappingTask);if(this._snappingContext){var h=a.geometry,k="graphic-move-stop"===d.type;if(n.isSome(this.snappingManager)&&2>this.selectedVertices.length&&
!k){const m=this.snappingManager;this._stagedVertex=m.update({point:h,context:this._snappingContext});this._syncGeometryAfterVertexMove(a,new A(this._stagedVertex),b,c,k);g();this._snappingTask=O.createTask(function(){var r=E._asyncToGenerator(function*(l){l=yield m.snap({point:h,context:f._snappingContext,signal:l});l.valid&&(f._stagedVertex=l.apply(),f._syncGeometryAfterVertexMove(a,new A(f._stagedVertex),b,c,k),g())});return function(l){return r.apply(this,arguments)}}())}else d=n.isSome(this._stagedVertex)?
new A(this._stagedVertex):h,this._syncGeometryAfterVertexMove(a,d,b,c,k),g()}};e._syncGeometryAfterVertexMove=function(){var a=E._asyncToGenerator(function*(b,c,d,g,f=!1){const h=this._editGeometryOperations.data.geometry;if("point"===h.type)b.geometry=c;else{const {x:k,y:m}=c,[r,l]=this._getIndicesForVertexGraphic(b);let w=z.geometryToCoordinates(h);const y=w[r].length-1;w[r][l]=[k,m];"polygon"===h.type&&(0===l?w[r][y]=[k,m]:l===y&&(w[r][0]=[k,m]));this._isVertex(b)&&(w=this._moveRelatedCoordinates(w,
b,k,m),w=this._moveSelectedHandleCoordinates(w,b,d,g,"polygon"===h.type),this._updateMidpointGraphicLocations(w));this.graphic.geometry=h.clone();d=this._getVertexFromEditGeometry(b);this._editGeometryOperations.moveVertices([d],k-d.pos[0],m-d.pos[1],0);f&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(b),c):b.geometry=c)}});return function(b,c,d,g){return a.apply(this,arguments)}}();e._moveRelatedCoordinates=function(a,b,c,d){var {relatedGraphicIndices:g}=b.attributes;for(const f of g){g=
this.vertexGraphics.getItemAt(f);const {pathIndex:h,pointIndex:k}=g.attributes;a[h][k]=[c,d];g.geometry=b.geometry}return a};e._moveSelectedHandleCoordinates=function(a,b,c,d,g){for(const h of this.selectedVertices)if(h!==b){const {pathIndex:k,pointIndex:m,relatedGraphicIndices:r}=h.attributes,l=V.cloneMove(h.geometry,c,d,this.view);var f=a[k].length-1;a[k][m]=[l.x,l.y];h.geometry=l;g&&(0===m?a[k][f]=[l.x,l.y]:m===f&&(a[k][0]=[l.x,l.y]));for(const w of r){f=this.vertexGraphics.getItemAt(w);const {pathIndex:y,
pointIndex:H}=f.attributes;a[y][H]=[l.x,l.y];f.geometry=l}}return a};e._onGraphicPointerOverCallback=function(a){a=a.graphic;const b=this._isVertex(a);b&&!this._isSelected(a)&&(a.symbol=this.symbols.vertices.hover);this._updateTooltip(b?a:null);this._updateHoverCursor(a)};e._onGraphicPointerOutCallback=function(a){a=a.graphic;this._isVertex(a)&&!this._isSelected(a)&&(a.symbol=this.symbols.vertices.default);this.view.cursor="default";this._updateTooltip()};e._createVertexFromMidpoint=function(a){const {_graphicAttributes:b,
graphic:c}=this;var d=c.geometry;if(n.isNone(d)||"polygon"!==d.type&&"polyline"!==d.type)return[];d=d.clone();const g=[],{pathIndex:f,pointIndexStart:h,pointIndexEnd:k}=a.attributes,{x:m,y:r}=a.geometry,l=0===k?h+1:k,w=z.geometryToCoordinates(d);w[f].splice(l,0,[m,r]);a.attributes={...b,pathIndex:f,pointIndex:l,relatedGraphicIndices:[]};g.push({coordinates:w[f][l],componentIndex:f,vertexIndex:l});this.graphic.geometry=d;return g};e._addToSelection=function(a){a instanceof B&&(a=[a]);for(const b of a)b.symbol=
this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(a));this._emitSelectEvent(a)};e._removeFromSelection=function(a,b){const {vertices:c}=this.symbols;b=b?c.hover:c.default;a instanceof B&&(a=[a]);for(const d of a)this.selectedVertices.splice(this.selectedVertices.indexOf(d),1),this._set("selectedVertices",this.selectedVertices),d.set("symbol",b);this._emitDeselectEvent(a)};e._clearSelection=function(){if(this.selectedVertices.length){const a=this.selectedVertices;
for(const b of this.selectedVertices)b.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]);this._emitDeselectEvent(a)}};e._keyDownHandler=function(a){ba.SKETCH_KEYS.delete.includes(a.key)&&!a.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)};e._removeVertices=function(a){var b=this.graphic.geometry;if(!(n.isNone(b)||"polygon"!==b.type&&"polyline"!==b.type||"polygon"===b.type&&4>this.vertexGraphics.length||3>this.vertexGraphics.length)){a instanceof
B&&(a=[a]);var c=this.graphic.clone();b=b.clone();var d=z.geometryToCoordinates(b),g=[];a instanceof B&&(a=[a]);for(const f of a){const {x:h,y:k}=f.geometry;for(let m=0;m<d.length;m++){const r=d[m];for(let l=0;l<r.length;l++){const [w,y]=r[l];h===w&&k===y&&(g.push({coordinates:d[m][l],componentIndex:m,vertexIndex:l}),d[m].splice(Number(l),1))}}}if("polygon"===b.type)d=d.filter(f=>{if(2>f.length)return!1;const [h,k]=f[0],[m,r]=f[f.length-1];if(2===f.length&&h===m&&k===r)return!1;h===m&&k===r||f.push(f[0]);
return!0}),b.rings=d;else{for(const f of d)1===f.length&&d.splice(d.indexOf(f),1);b.paths=d}this.graphic.geometry=b;this.refresh();this._emitVertexRemoveEvent(a,c,g)}};e._isVertex=function(a){return this.vertexGraphics.includes(a)};e._isSelected=function(a){return this._isVertex(a)&&this.selectedVertices.includes(a)};e._isMidpoint=function(a){return this.midpointGraphics.includes(a)};e._updateHoverCursor=function(a){this.view.cursor=this._isMidpoint(a)?"copy":"move"};e._updateTooltip=function(a,b){n.isNone(this._tooltip)||
(a?a===this.graphic?this._updateMoveGraphicTooltip(b):this._updateMoveVertexTooltip(b):this._tooltip.clear())};e._updateMoveGraphicTooltip=function(a){const {_tooltip:b,tooltipOptions:c,view:d}=this;if(!n.isNone(b)){var g=new N.TranslateGraphicTooltipInfo({tooltipOptions:c});if(a){const {x:f,y:h}=a.origin;a=d.toMap(a);const k=d.toMap(L.createScreenPoint(f,h));a=F.autoDistanceBetweenPoints2D(k,a);g.distance=n.isSome(a)?a:K.zeroMeters}b.info=g}};e._updateMoveVertexTooltip=function(a){const {_tooltip:b,
graphic:{geometry:c},tooltipOptions:d,view:g}=this;if(!n.isNone(b)){var f=new N.TranslateVertexTooltipInfo({tooltipOptions:d});n.isSome(c)&&("polygon"===c.type?f.area=fa.autoArea2D(c):"polyline"===c.type&&(f.totalLength=F.autoLength2D(c)));if(a){const {x:h,y:k}=a.origin;a=g.toMap(a);const m=g.toMap(L.createScreenPoint(h,k));a=F.autoDistanceBetweenPoints2D(m,a);f.distance=n.isSome(a)?a:K.zeroMeters}b.info=f}};e._emitMoveStartEvent=function(a,b){a=new la(this.graphic,a,b);this.emit("move-start",a);
if(this.callbacks.onMoveStart)this.callbacks.onMoveStart(a)};e._emitMoveEvent=function(a,b){a=new ma(this.graphic,a,b);this.emit("move",a);if(this.callbacks.onMove)this.callbacks.onMove(a)};e._emitMoveStopEvent=function(){const {totalDx:a,totalDy:b}=this._activeOperationInfo,c=new na(this.graphic,a,b);this.emit("move-stop",c);if(this.callbacks.onMoveStop)this.callbacks.onMoveStop(c)};e._emitReshapeStartEvent=function(a){a=new ia(this.graphic,a,this.selectedVertices);this.emit("reshape-start",a);if(this.callbacks.onReshapeStart)this.callbacks.onReshapeStart(a)};
e._emitReshapeEvent=function(a){a=new ja(this.graphic,a,this.selectedVertices);this.emit("reshape",a);if(this.callbacks.onReshape)this.callbacks.onReshape(a)};e._emitReshapeStopEvent=function(a){a=new ka(this.graphic,a,this.selectedVertices);this.emit("reshape-stop",a);if(this.callbacks.onReshapeStop)this.callbacks.onReshapeStop(a)};e._emitSelectEvent=function(a){a=new oa(a);this.emit("select",a);if(this.callbacks.onVertexSelect)this.callbacks.onVertexSelect(a)};e._emitDeselectEvent=function(a){a=
new pa(a);this.emit("deselect",a);if(this.callbacks.onVertexDeselect)this.callbacks.onVertexDeselect(a)};e._emitVertexAddEvent=function(a,b,c){a=new qa(a,this.graphic,b,c);this.emit("vertex-add",a);if(this.callbacks.onVertexAdd)this.callbacks.onVertexAdd(a)};e._emitVertexRemoveEvent=function(a,b,c){a=new ra(a,this.graphic,b,c);this.emit("vertex-remove",a);if(this.callbacks.onVertexRemove)this.callbacks.onVertexRemove(a)};e._logGeometryTypeError=function(){Q.getLogger(this.declaredClass).error(new P("reshape:invalid-geometry",
"Reshape operation not supported for the provided graphic. The geometry type is not supported."))};E._createClass(t,[{key:"highlightsEnabled",set:function(a){this._highlightHelper?.removeAll();this._set("highlightsEnabled",a);this._setUpHighlights()}},{key:"state",get:function(){const a=!!this.get("view.ready"),b=!(!this.get("graphic")||!this.get("layer"));return a&&b?"active":a?"ready":"disabled"}},{key:"symbols",set:function(a){const {midpoints:b=G.midpoints,vertices:c=G.vertices}=a||{};this._set("symbols",
{midpoints:b,vertices:c})}}]);return t}(p.EventedAccessor);u.__decorate([v.property()],p.prototype,"_tooltip",void 0);u.__decorate([v.property()],p.prototype,"callbacks",void 0);u.__decorate([v.property()],p.prototype,"enableMidpoints",void 0);u.__decorate([v.property()],p.prototype,"enableMovement",void 0);u.__decorate([v.property()],p.prototype,"enableVertices",void 0);u.__decorate([v.property()],p.prototype,"graphic",void 0);u.__decorate([v.property({value:!0})],p.prototype,"highlightsEnabled",
null);u.__decorate([v.property()],p.prototype,"layer",void 0);u.__decorate([v.property({readOnly:!0})],p.prototype,"midpointGraphics",void 0);u.__decorate([v.property()],p.prototype,"midpointSymbol",void 0);u.__decorate([v.property({readOnly:!0})],p.prototype,"selectedVertices",void 0);u.__decorate([v.property()],p.prototype,"snappingManager",void 0);u.__decorate([v.property({readOnly:!0})],p.prototype,"state",null);u.__decorate([v.property({value:G})],p.prototype,"symbols",null);u.__decorate([v.property({type:M})],
p.prototype,"tooltipOptions",void 0);u.__decorate([v.property({readOnly:!0})],p.prototype,"type",void 0);u.__decorate([v.property({readOnly:!0})],p.prototype,"vertexGraphics",void 0);u.__decorate([v.property()],p.prototype,"view",void 0);return p=u.__decorate([R.subclass("esri.views.draw.support.Reshape")],p)});