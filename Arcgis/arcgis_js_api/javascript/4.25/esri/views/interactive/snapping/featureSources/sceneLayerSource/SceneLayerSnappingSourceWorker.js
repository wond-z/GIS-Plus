// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(a,b,T,x,p,l){function h(B){return B?{origin:p.clone(B.origin),vector:p.clone(B.vector)}:{origin:p.create(),vector:p.create()}}function c(B,r){const A=q.get();A.origin=B;A.vector=r;return A}function g(B,r,A=h()){x.copy(A.origin,B);x.copy(A.vector,r);return A}function m(B,r){r=x.subtract(l.sv3d.get(),r,B.origin);
var A=x.dot(B.vector,r);const H=x.dot(B.vector,B.vector);A=b.clamp(A/H,0,1);B=x.subtract(l.sv3d.get(),x.scale(l.sv3d.get(),B.vector,A),r);return x.dot(B,B)}function E(B,r,A,H,O){const {vector:Q,origin:S}=B;r=x.subtract(l.sv3d.get(),r,S);r=x.dot(Q,r)/x.squaredLength(Q);x.scale(O,Q,b.clamp(r,A,H));return x.add(O,O,B.origin)}function N(B,r,A,H){const O=B.origin;var Q=x.add(l.sv3d.get(),O,B.vector);B=r.origin;var S=x.add(l.sv3d.get(),B,r.vector),n=l.sv3d.get();r=l.sv3d.get();n[0]=O[0]-B[0];n[1]=O[1]-
B[1];n[2]=O[2]-B[2];r[0]=S[0]-B[0];r[1]=S[1]-B[1];r[2]=S[2]-B[2];if(1E-6>Math.abs(r[0])&&1E-6>Math.abs(r[1])&&1E-6>Math.abs(r[2]))return!1;S=l.sv3d.get();S[0]=Q[0]-O[0];S[1]=Q[1]-O[1];S[2]=Q[2]-O[2];if(1E-6>Math.abs(S[0])&&1E-6>Math.abs(S[1])&&1E-6>Math.abs(S[2]))return!1;Q=n[0]*r[0]+n[1]*r[1]+n[2]*r[2];var u=r[0]*S[0]+r[1]*S[1]+r[2]*S[2];const F=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],U=(S[0]*S[0]+S[1]*S[1]+S[2]*S[2])*F-u*u;if(1E-6>Math.abs(U))return!1;n=(Q*u-(n[0]*S[0]+n[1]*S[1]+n[2]*S[2])*F)/U;Q=(Q+u*n)/
F;A&&(n=b.clamp(n,0,1),Q=b.clamp(Q,0,1));A=l.sv3d.get();u=l.sv3d.get();A[0]=O[0]+n*S[0];A[1]=O[1]+n*S[1];A[2]=O[2]+n*S[2];u[0]=B[0]+Q*r[0];u[1]=B[1]+Q*r[1];u[2]=B[2]+Q*r[2];H.tA=n;H.tB=Q;H.pA=A;H.pB=u;H.distance2=x.squaredDistance(A,u);return!0}const J={tA:0,tB:0,pA:p.create(),pB:p.create(),distance2:0},q=new T.ObjectStack(()=>h());a.closestLineSegmentDistance2=function(B,r){return N(B,r,!0,J)?J.distance2:null};a.closestLineSegmentPoint=function(B,r,A){return N(B,r,!0,J)?(x.copy(A,J.pA),!0):!1};a.closestRayDistance2=
function(B,r){if(N(B,c(r.origin,r.direction),!1,J)){const {tA:A,pB:H,distance2:O}=J;if(0<=A&&1>=A)return O;if(0>A)return x.squaredDistance(B.origin,H);if(1<A)return x.squaredDistance(x.add(l.sv3d.get(),B.origin,B.vector),H)}return null};a.copy=function(B,r=h()){return g(B.origin,B.vector,r)};a.create=h;a.distance=function(B,r){return Math.sqrt(m(B,r))};a.distance2=m;a.fromPoints=function(B,r,A=h()){x.copy(A.origin,B);x.subtract(A.vector,r,B);return A};a.fromValues=g;a.pointAt=function(B,r,A){return x.add(A,
B.origin,x.scale(A,B.vector,r))};a.projectPoint=function(B,r,A){return E(B,r,0,1,A)};a.projectPointClamp=E;a.wrap=c;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(a,b){let T=function(){function x(l){this._allocator=l;this._items=[];this._itemsPtr=0;this._grow()}var p=x.prototype;p.get=function(){0===this._itemsPtr&&b.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&
this._grow();return this._items[this._itemsPtr++]};p._reset=function(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0};p._grow=function(){for(let l=0;l<Math.max(8,Math.min(this._items.length,1024));l++)this._items.push(this._allocator())};return x}();a.ObjectStack=T;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/vectorStacks":function(){define(["exports",
"../../core/VectorStack"],function(a,b){const T=b.VectorStack.createVec2f64(),x=b.VectorStack.createVec3f64(),p=b.VectorStack.createVec4f64(),l=b.VectorStack.createMat3f64(),h=b.VectorStack.createMat4f64();b=b.VectorStack.createQuatf64();a.sm3d=l;a.sm4d=h;a.sq4d=b;a.sv2d=T;a.sv3d=x;a.sv4d=p;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./byteSizeEstimations ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(a,b,T,x,p,l,h,c,g,m){let E=function(){function J(B,r,A){this._itemByteSize=B;this._itemCreate=r;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(A/this._itemByteSize)}var q=J.prototype;q.get=function(){0===this._itemsPtr&&x.nextTick(()=>this._reset());const B=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=B;){const r=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let A=0;A<this._itemsPerBuffer;++A)this._items.push(this._itemCreate(r,
A*this._itemByteSize));this._buffers.push(r)}return this._items[this._itemsPtr++]};q._reset=function(){const B=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>B;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0};J.createVec2f64=function(B=N){return new J(16,c.createView,B)};J.createVec3f64=function(B=N){return new J(24,g.createView,B)};J.createVec4f64=function(B=N){return new J(32,m.createView,B)};J.createMat3f64=function(B=
N){return new J(72,p.createView,B)};J.createMat4f64=function(B=N){return new J(128,l.createView,B)};J.createQuatf64=function(B=N){return new J(32,h.createView,B)};b._createClass(J,[{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}]);return J}();const N=4*T.ByteSizeUnit.KILOBYTES;a.VectorStack=E;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],
function(a){function b(p){return 32+p.length}function T(p){if(!p)return 0;if(Array.isArray(p)){var l=p.length;if(0===l||"number"===typeof p[0])p=32+8*l;else{var h=32;for(let c=0;c<l;c++)h+=x(p[c]);p=h}return p}h=32;for(l in p)p.hasOwnProperty(l)&&(h+=x(p[l]));return h}function x(p){switch(typeof p){case "object":return T(p);case "string":return b(p);case "number":return 16;case "boolean":return 4;default:return 8}}a.ByteSizeUnit=void 0;(function(p){p[p.KILOBYTES=1024]="KILOBYTES";p[p.MEGABYTES=1048576]=
"MEGABYTES";p[p.GIGABYTES=1073741824]="GIGABYTES"})(a.ByteSizeUnit||(a.ByteSizeUnit={}));a.estimateAttributesObjectSize=function(p){if(!p)return 0;let l=32;for(const h in p)if(p.hasOwnProperty(h)){const c=p[h];switch(typeof c){case "string":l+=b(c);break;case "number":l+=16;break;case "boolean":l+=4}}return l};a.estimateFixedArraySize=function(p,l){return 32+p.length*l};a.estimateNestedObjectSize=T;a.estimateNumberByteSize=function(p){return 16};a.estimateStringByteSize=b;Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function b(){return[1,0,0,0,1,0,0,0,1]}function T(h){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]]}function x(h,c,g,m,E,N,J,q,B){return[h,c,g,m,E,N,J,q,B]}function p(h,c){return new Float64Array(h,c,9)}const l=Object.freeze(Object.defineProperty({__proto__:null,create:b,clone:T,fromValues:x,createView:p},Symbol.toStringTag,{value:"Module"}));a.clone=T;a.create=b;
a.createView=p;a.fromValues=x;a.mat3f64=l})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function b(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function T(c){return[c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]]}function x(c,g,m,E,N,J,q,B,r,A,H,O,Q,S,n,u){return[c,g,m,E,N,J,q,B,r,A,H,O,Q,S,n,u]}function p(c,g){return new Float64Array(c,g,16)}const l=b(),h=Object.freeze(Object.defineProperty({__proto__:null,create:b,clone:T,fromValues:x,createView:p,
IDENTITY:l},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=l;a.clone=T;a.create=b;a.createView=p;a.fromValues=x;a.mat4f64=h})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function b(){return[0,0,0,1]}function T(c){return[c[0],c[1],c[2],c[3]]}function x(c,g,m,E){return[c,g,m,E]}function p(c,g){return new Float64Array(c,g,4)}const l=b(),h=Object.freeze(Object.defineProperty({__proto__:null,create:b,clone:T,fromValues:x,createView:p,IDENTITY:l},Symbol.toStringTag,{value:"Module"}));
a.IDENTITY=l;a.clone=T;a.create=b;a.createView=p;a.fromValues=x;a.quatf64=h})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function b(){return[0,0]}function T(r){return[r[0],r[1]]}function x(r,A){return[r,A]}function p(r){const A=[0,0],H=Math.min(2,r.length);for(let O=0;O<H;++O)A[O]=r[O];return A}function l(r,A){return new Float64Array(r,A,2)}function h(){return[0,0]}function c(){return[1,1]}function g(){return[1,0]}function m(){return[0,1]}const E=[0,0],N=[1,1],J=[1,0],q=[0,1],
B=Object.freeze(Object.defineProperty({__proto__:null,create:b,clone:T,fromValues:x,fromArray:p,createView:l,zeros:h,ones:c,unitX:g,unitY:m,ZEROS:E,ONES:N,UNIT_X:J,UNIT_Y:q},Symbol.toStringTag,{value:"Module"}));a.ONES=N;a.UNIT_X=J;a.UNIT_Y=q;a.ZEROS=E;a.clone=T;a.create=b;a.createView=l;a.fromArray=p;a.fromValues=x;a.ones=c;a.unitX=g;a.unitY=m;a.vec2f64=B;a.zeros=h})},"esri/chunks/vec4f64":function(){define(["exports"],function(a){function b(){return[0,0,0,0]}function T(Q){return[Q[0],Q[1],Q[2],
Q[3]]}function x(Q,S,n,u){return[Q,S,n,u]}function p(Q){const S=b(),n=Math.min(4,Q.length);for(let u=0;u<n;++u)S[u]=Q[u];return S}function l(Q,S){return new Float64Array(Q,S,4)}function h(){return b()}function c(){return[1,1,1,1]}function g(){return[1,0,0,0]}function m(){return[0,1,0,0]}function E(){return[0,0,1,0]}function N(){return[0,0,0,1]}const J=b(),q=c(),B=g(),r=m(),A=E(),H=N(),O=Object.freeze(Object.defineProperty({__proto__:null,create:b,clone:T,fromValues:x,fromArray:p,createView:l,zeros:h,
ones:c,unitX:g,unitY:m,unitZ:E,unitW:N,ZEROS:J,ONES:q,UNIT_X:B,UNIT_Y:r,UNIT_Z:A,UNIT_W:H},Symbol.toStringTag,{value:"Module"}));a.ONES=q;a.UNIT_W=H;a.UNIT_X=B;a.UNIT_Y=r;a.UNIT_Z=A;a.ZEROS=J;a.clone=T;a.create=b;a.createView=l;a.fromArray=p;a.fromValues=x;a.ones=c;a.unitW=N;a.unitX=g;a.unitY=m;a.unitZ=E;a.vec4f64=O;a.zeros=h})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/maybe ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(a,b,T,x,p,l,h,c,g,m,E,N,J,q){function B(){return m.create()}function r(f,R=B()){return g.copy(R,f)}function A(f,R){return m.fromValues(f[0],f[1],f[2],R)}function H(f){return f}function O(f){f[0]=f[1]=f[2]=f[3]=0}function Q(f,R){f[0]=f[1]=f[2]=0;f[3]=R;return f}function S(f){return f[3]}function n(f){return f}function u(f,R,ua,ya){return m.fromValues(f,R,ua,ya)}function F(f,R,ua){f!==ua&&h.copy(ua,f);ua[3]=f[3]+R;return ua}function U(f,R,ua){T.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return f===ua?ua:r(f,ua)}function la(f,R,ua){if(p.isNone(R))return!1;const {origin:ya,direction:La}=R;var Ka=v;Ka[0]=ya[0]-f[0];Ka[1]=ya[1]-f[1];Ka[2]=ya[2]-f[2];R=La[0]*La[0]+La[1]*La[1]+La[2]*La[2];if(0===R)return!1;const Ra=2*(La[0]*Ka[0]+La[1]*Ka[1]+La[2]*Ka[2]);f=Ra*Ra-4*R*(Ka[0]*Ka[0]+Ka[1]*Ka[1]+Ka[2]*Ka[2]-f[3]*f[3]);if(0>f)return!1;Ka=Math.sqrt(f);f=(-Ra-Ka)/(2*R);R=(-Ra+Ka)/(2*R);if(0>f||R<f&&0<R)f=R;if(0>f)return!1;ua&&(ua[0]=ya[0]+La[0]*f,ua[1]=ya[1]+La[1]*f,ua[2]=ya[2]+La[2]*f);return!0}
function V(f,R){return la(f,R,null)}function C(f,R,ua){if(la(f,R,ua))return ua;f=K(f,R,q.sv3d.get());h.add(ua,R.origin,h.scale(q.sv3d.get(),R.direction,h.distance(R.origin,f)/h.length(R.direction)));return ua}function K(f,R,ua){const ya=q.sv3d.get(),La=q.sm4d.get();h.cross(ya,R.origin,R.direction);const Ka=f[3];h.cross(ua,ya,R.origin);h.scale(ua,ua,1/h.length(ua)*Ka);f=I(f,R.origin);R=J.angle(R.origin,ua);l.fromRotation(La,R+f,ya);h.transformMat4(ua,ua,La);return ua}function M(f,R,ua){if(la(f,R,ua))return ua;
N.closestPoint(R,f,ua);return P(f,ua,ua)}function P(f,R,ua){R=h.subtract(q.sv3d.get(),R,f);R=h.scale(q.sv3d.get(),R,f[3]/h.length(R));return h.add(ua,R,f)}function X(f,R){R=h.subtract(q.sv3d.get(),R,f);R=h.squaredLength(R);return Math.sqrt(Math.abs(R-f[3]*f[3]))}function I(f,R){R=h.subtract(q.sv3d.get(),R,f);R=h.length(R);f=f[3];return x.acosClamped(f/(f+Math.abs(f-R)))}function ha(f,R,ua,ya){f=h.subtract(D,R,f);switch(ua){case E.Axis.X:return ua=x.cartesianToSpherical(f,D)[2],h.set(ya,-Math.sin(ua),
Math.cos(ua),0);case E.Axis.Y:return f=x.cartesianToSpherical(f,D),ua=f[1],f=f[2],R=Math.sin(ua),h.set(ya,-R*Math.cos(f),-R*Math.sin(f),Math.cos(ua));case E.Axis.Z:return h.normalize(ya,f)}}function na(f,R){R=h.subtract(y,R,f);return h.length(R)-f[3]}function ta(f,R,ua,ya){const La=na(f,R);f=ha(f,R,E.Axis.Z,y);ua=h.scale(y,f,ua-La);return h.add(ya,R,ua)}function da(f,R){R=h.squaredDistance(f,R);f=f[3];return R<=f*f}const v=c.create(),D=c.create(),y=c.create();b=B();c=Object.freeze(Object.defineProperty({__proto__:null,
create:B,copy:r,fromCenterAndRadius:A,wrap:H,clear:O,fromRadius:Q,getRadius:S,getCenter:n,fromValues:u,elevate:F,setExtent:U,intersectRay:la,intersectsRay:V,intersectRayClosestSilhouette:C,closestPointOnSilhouette:K,closestPoint:M,projectPoint:P,distanceToSilhouette:X,angleToSilhouette:I,axisAt:ha,altitudeAt:na,setAltitudeAt:ta,containsPoint:da,tmpSphere:b},Symbol.toStringTag,{value:"Module"}));a.altitudeAt=na;a.angleToSilhouette=I;a.axisAt=ha;a.clear=O;a.closestPoint=M;a.closestPointOnSilhouette=
K;a.containsPoint=da;a.copy=r;a.create=B;a.distanceToSilhouette=X;a.elevate=F;a.fromCenterAndRadius=A;a.fromRadius=Q;a.fromValues=u;a.getCenter=n;a.getRadius=S;a.intersectRay=la;a.intersectRayClosestSilhouette=C;a.intersectsRay=V;a.projectPoint=P;a.setAltitudeAt=ta;a.setExtent=U;a.sphere=c;a.tmpSphere=b;a.wrap=H})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(a,b,T){function x(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=t[6];e[7]=t[7];
e[8]=t[8];e[9]=t[9];e[10]=t[10];e[11]=t[11];e[12]=t[12];e[13]=t[13];e[14]=t[14];e[15]=t[15];return e}function p(e,t,ia,ja,qa,z,L,aa,Z,ka,ma,ra,va,wa,ca,fa,pa){e[0]=t;e[1]=ia;e[2]=ja;e[3]=qa;e[4]=z;e[5]=L;e[6]=aa;e[7]=Z;e[8]=ka;e[9]=ma;e[10]=ra;e[11]=va;e[12]=wa;e[13]=ca;e[14]=fa;e[15]=pa;return e}function l(e){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function h(e,t){if(e===t){const ia=t[1],ja=t[2],qa=t[3],z=t[6],
L=t[7],aa=t[11];e[1]=t[4];e[2]=t[8];e[3]=t[12];e[4]=ia;e[6]=t[9];e[7]=t[13];e[8]=ja;e[9]=z;e[11]=t[14];e[12]=qa;e[13]=L;e[14]=aa}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function c(e,t){const ia=t[0],ja=t[1],qa=t[2],z=t[3],L=t[4],aa=t[5],Z=t[6],ka=t[7],ma=t[8],ra=t[9],va=t[10],wa=t[11],ca=t[12],fa=t[13],pa=t[14];t=t[15];const Ba=ia*aa-ja*L,Ea=ia*Z-qa*L,Ha=
ia*ka-z*L,Ia=ja*Z-qa*aa,Ga=ja*ka-z*aa,Ma=qa*ka-z*Z,xa=ma*fa-ra*ca,Wa=ma*pa-va*ca,bb=ma*t-wa*ca,ab=ra*pa-va*fa,d=ra*t-wa*fa,cb=va*t-wa*pa;let Ta=Ba*cb-Ea*d+Ha*ab+Ia*bb-Ga*Wa+Ma*xa;if(!Ta)return null;Ta=1/Ta;e[0]=(aa*cb-Z*d+ka*ab)*Ta;e[1]=(qa*d-ja*cb-z*ab)*Ta;e[2]=(fa*Ma-pa*Ga+t*Ia)*Ta;e[3]=(va*Ga-ra*Ma-wa*Ia)*Ta;e[4]=(Z*bb-L*cb-ka*Wa)*Ta;e[5]=(ia*cb-qa*bb+z*Wa)*Ta;e[6]=(pa*Ha-ca*Ma-t*Ea)*Ta;e[7]=(ma*Ma-va*Ha+wa*Ea)*Ta;e[8]=(L*d-aa*bb+ka*xa)*Ta;e[9]=(ja*bb-ia*d-z*xa)*Ta;e[10]=(ca*Ga-fa*Ha+t*Ba)*Ta;
e[11]=(ra*Ha-ma*Ga-wa*Ba)*Ta;e[12]=(aa*Wa-L*ab-Z*xa)*Ta;e[13]=(ia*ab-ja*Wa+qa*xa)*Ta;e[14]=(fa*Ea-ca*Ia-pa*Ba)*Ta;e[15]=(ma*Ia-ra*Ea+va*Ba)*Ta;return e}function g(e,t){const ia=t[0],ja=t[1],qa=t[2],z=t[3],L=t[4],aa=t[5],Z=t[6],ka=t[7],ma=t[8],ra=t[9],va=t[10],wa=t[11],ca=t[12],fa=t[13],pa=t[14];t=t[15];e[0]=aa*(va*t-wa*pa)-ra*(Z*t-ka*pa)+fa*(Z*wa-ka*va);e[1]=-(ja*(va*t-wa*pa)-ra*(qa*t-z*pa)+fa*(qa*wa-z*va));e[2]=ja*(Z*t-ka*pa)-aa*(qa*t-z*pa)+fa*(qa*ka-z*Z);e[3]=-(ja*(Z*wa-ka*va)-aa*(qa*wa-z*va)+ra*
(qa*ka-z*Z));e[4]=-(L*(va*t-wa*pa)-ma*(Z*t-ka*pa)+ca*(Z*wa-ka*va));e[5]=ia*(va*t-wa*pa)-ma*(qa*t-z*pa)+ca*(qa*wa-z*va);e[6]=-(ia*(Z*t-ka*pa)-L*(qa*t-z*pa)+ca*(qa*ka-z*Z));e[7]=ia*(Z*wa-ka*va)-L*(qa*wa-z*va)+ma*(qa*ka-z*Z);e[8]=L*(ra*t-wa*fa)-ma*(aa*t-ka*fa)+ca*(aa*wa-ka*ra);e[9]=-(ia*(ra*t-wa*fa)-ma*(ja*t-z*fa)+ca*(ja*wa-z*ra));e[10]=ia*(aa*t-ka*fa)-L*(ja*t-z*fa)+ca*(ja*ka-z*aa);e[11]=-(ia*(aa*wa-ka*ra)-L*(ja*wa-z*ra)+ma*(ja*ka-z*aa));e[12]=-(L*(ra*pa-va*fa)-ma*(aa*pa-Z*fa)+ca*(aa*va-Z*ra));e[13]=
ia*(ra*pa-va*fa)-ma*(ja*pa-qa*fa)+ca*(ja*va-qa*ra);e[14]=-(ia*(aa*pa-Z*fa)-L*(ja*pa-qa*fa)+ca*(ja*Z-qa*aa));e[15]=ia*(aa*va-Z*ra)-L*(ja*va-qa*ra)+ma*(ja*Z-qa*aa);return e}function m(e){const t=e[0],ia=e[1],ja=e[2],qa=e[3],z=e[4],L=e[5],aa=e[6],Z=e[7],ka=e[8],ma=e[9],ra=e[10],va=e[11],wa=e[12],ca=e[13],fa=e[14];e=e[15];return(t*L-ia*z)*(ra*e-va*fa)-(t*aa-ja*z)*(ma*e-va*ca)+(t*Z-qa*z)*(ma*fa-ra*ca)+(ia*aa-ja*L)*(ka*e-va*wa)-(ia*Z-qa*L)*(ka*fa-ra*wa)+(ja*Z-qa*aa)*(ka*ca-ma*wa)}function E(e,t,ia){const ja=
t[0],qa=t[1],z=t[2],L=t[3],aa=t[4],Z=t[5],ka=t[6],ma=t[7],ra=t[8],va=t[9],wa=t[10],ca=t[11],fa=t[12],pa=t[13],Ba=t[14];t=t[15];let Ea=ia[0],Ha=ia[1],Ia=ia[2],Ga=ia[3];e[0]=Ea*ja+Ha*aa+Ia*ra+Ga*fa;e[1]=Ea*qa+Ha*Z+Ia*va+Ga*pa;e[2]=Ea*z+Ha*ka+Ia*wa+Ga*Ba;e[3]=Ea*L+Ha*ma+Ia*ca+Ga*t;Ea=ia[4];Ha=ia[5];Ia=ia[6];Ga=ia[7];e[4]=Ea*ja+Ha*aa+Ia*ra+Ga*fa;e[5]=Ea*qa+Ha*Z+Ia*va+Ga*pa;e[6]=Ea*z+Ha*ka+Ia*wa+Ga*Ba;e[7]=Ea*L+Ha*ma+Ia*ca+Ga*t;Ea=ia[8];Ha=ia[9];Ia=ia[10];Ga=ia[11];e[8]=Ea*ja+Ha*aa+Ia*ra+Ga*fa;e[9]=Ea*
qa+Ha*Z+Ia*va+Ga*pa;e[10]=Ea*z+Ha*ka+Ia*wa+Ga*Ba;e[11]=Ea*L+Ha*ma+Ia*ca+Ga*t;Ea=ia[12];Ha=ia[13];Ia=ia[14];Ga=ia[15];e[12]=Ea*ja+Ha*aa+Ia*ra+Ga*fa;e[13]=Ea*qa+Ha*Z+Ia*va+Ga*pa;e[14]=Ea*z+Ha*ka+Ia*wa+Ga*Ba;e[15]=Ea*L+Ha*ma+Ia*ca+Ga*t;return e}function N(e,t,ia){const ja=ia[0],qa=ia[1];ia=ia[2];if(t===e)e[12]=t[0]*ja+t[4]*qa+t[8]*ia+t[12],e[13]=t[1]*ja+t[5]*qa+t[9]*ia+t[13],e[14]=t[2]*ja+t[6]*qa+t[10]*ia+t[14],e[15]=t[3]*ja+t[7]*qa+t[11]*ia+t[15];else{const z=t[0],L=t[1],aa=t[2],Z=t[3],ka=t[4],ma=t[5],
ra=t[6],va=t[7],wa=t[8],ca=t[9],fa=t[10],pa=t[11];e[0]=z;e[1]=L;e[2]=aa;e[3]=Z;e[4]=ka;e[5]=ma;e[6]=ra;e[7]=va;e[8]=wa;e[9]=ca;e[10]=fa;e[11]=pa;e[12]=z*ja+ka*qa+wa*ia+t[12];e[13]=L*ja+ma*qa+ca*ia+t[13];e[14]=aa*ja+ra*qa+fa*ia+t[14];e[15]=Z*ja+va*qa+pa*ia+t[15]}return e}function J(e,t,ia){const ja=ia[0],qa=ia[1];ia=ia[2];e[0]=t[0]*ja;e[1]=t[1]*ja;e[2]=t[2]*ja;e[3]=t[3]*ja;e[4]=t[4]*qa;e[5]=t[5]*qa;e[6]=t[6]*qa;e[7]=t[7]*qa;e[8]=t[8]*ia;e[9]=t[9]*ia;e[10]=t[10]*ia;e[11]=t[11]*ia;e[12]=t[12];e[13]=
t[13];e[14]=t[14];e[15]=t[15];return e}function q(e,t,ia,ja){let qa=ja[0],z=ja[1];ja=ja[2];let L=Math.sqrt(qa*qa+z*z+ja*ja);var aa=void 0,Z=void 0;let ka=void 0,ma=void 0,ra=void 0,va=void 0,wa=void 0,ca=void 0,fa=void 0,pa=void 0,Ba=void 0,Ea=void 0,Ha=void 0,Ia=void 0,Ga=void 0,Ma=void 0,xa=void 0,Wa=void 0,bb=void 0,ab=void 0,d=void 0,cb=void 0;Z=aa=void 0;if(L<T.getEpsilon())return null;L=1/L;qa*=L;z*=L;ja*=L;aa=Math.sin(ia);Z=Math.cos(ia);ka=1-Z;ma=t[0];ra=t[1];va=t[2];wa=t[3];ca=t[4];fa=t[5];
pa=t[6];Ba=t[7];Ea=t[8];Ha=t[9];Ia=t[10];Ga=t[11];Ma=qa*qa*ka+Z;xa=z*qa*ka+ja*aa;Wa=ja*qa*ka-z*aa;bb=qa*z*ka-ja*aa;ab=z*z*ka+Z;d=ja*z*ka+qa*aa;cb=qa*ja*ka+z*aa;aa=z*ja*ka-qa*aa;Z=ja*ja*ka+Z;e[0]=ma*Ma+ca*xa+Ea*Wa;e[1]=ra*Ma+fa*xa+Ha*Wa;e[2]=va*Ma+pa*xa+Ia*Wa;e[3]=wa*Ma+Ba*xa+Ga*Wa;e[4]=ma*bb+ca*ab+Ea*d;e[5]=ra*bb+fa*ab+Ha*d;e[6]=va*bb+pa*ab+Ia*d;e[7]=wa*bb+Ba*ab+Ga*d;e[8]=ma*cb+ca*aa+Ea*Z;e[9]=ra*cb+fa*aa+Ha*Z;e[10]=va*cb+pa*aa+Ia*Z;e[11]=wa*cb+Ba*aa+Ga*Z;t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],
e[15]=t[15]);return e}function B(e,t,ia){const ja=Math.sin(ia);ia=Math.cos(ia);const qa=t[4],z=t[5],L=t[6],aa=t[7],Z=t[8],ka=t[9],ma=t[10],ra=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);e[4]=qa*ia+Z*ja;e[5]=z*ia+ka*ja;e[6]=L*ia+ma*ja;e[7]=aa*ia+ra*ja;e[8]=Z*ia-qa*ja;e[9]=ka*ia-z*ja;e[10]=ma*ia-L*ja;e[11]=ra*ia-aa*ja;return e}function r(e,t,ia){const ja=Math.sin(ia);ia=Math.cos(ia);const qa=t[0],z=t[1],L=t[2],aa=t[3],Z=t[8],ka=t[9],ma=t[10],
ra=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);e[0]=qa*ia-Z*ja;e[1]=z*ia-ka*ja;e[2]=L*ia-ma*ja;e[3]=aa*ia-ra*ja;e[8]=qa*ja+Z*ia;e[9]=z*ja+ka*ia;e[10]=L*ja+ma*ia;e[11]=aa*ja+ra*ia;return e}function A(e,t,ia){const ja=Math.sin(ia);ia=Math.cos(ia);const qa=t[0],z=t[1],L=t[2],aa=t[3],Z=t[4],ka=t[5],ma=t[6],ra=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);e[0]=qa*ia+Z*ja;e[1]=z*ia+ka*
ja;e[2]=L*ia+ma*ja;e[3]=aa*ia+ra*ja;e[4]=Z*ia-qa*ja;e[5]=ka*ia-z*ja;e[6]=ma*ia-L*ja;e[7]=ra*ia-aa*ja;return e}function H(e,t){e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=t[0];e[13]=t[1];e[14]=t[2];e[15]=1;return e}function O(e,t){e[0]=t[0];e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t[1];e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=t[2];e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function Q(e,t,ia){if(0===t)return l(e);let ja=ia[0],qa=ia[1];ia=ia[2];let z=Math.sqrt(ja*
ja+qa*qa+ia*ia),L=void 0,aa=void 0,Z=void 0;if(z<T.getEpsilon())return null;z=1/z;ja*=z;qa*=z;ia*=z;L=Math.sin(t);aa=Math.cos(t);Z=1-aa;e[0]=ja*ja*Z+aa;e[1]=qa*ja*Z+ia*L;e[2]=ia*ja*Z-qa*L;e[3]=0;e[4]=ja*qa*Z-ia*L;e[5]=qa*qa*Z+aa;e[6]=ia*qa*Z+ja*L;e[7]=0;e[8]=ja*ia*Z+qa*L;e[9]=qa*ia*Z-ja*L;e[10]=ia*ia*Z+aa;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function S(e,t){const ia=Math.sin(t);t=Math.cos(t);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t;e[6]=ia;e[7]=0;e[8]=0;e[9]=-ia;e[10]=t;e[11]=0;e[12]=
0;e[13]=0;e[14]=0;e[15]=1;return e}function n(e,t){const ia=Math.sin(t);t=Math.cos(t);e[0]=t;e[1]=0;e[2]=-ia;e[3]=0;e[4]=0;e[5]=1;e[6]=0;e[7]=0;e[8]=ia;e[9]=0;e[10]=t;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function u(e,t){const ia=Math.sin(t);t=Math.cos(t);e[0]=t;e[1]=ia;e[2]=0;e[3]=0;e[4]=-ia;e[5]=t;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=1;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function F(e,t,ia){var ja=t[0],qa=t[1],z=t[2],L=t[3],aa=ja+ja,Z=qa+qa;const ka=z+z;t=ja*aa;const ma=ja*Z;
ja*=ka;const ra=qa*Z;qa*=ka;z*=ka;aa*=L;Z*=L;L*=ka;e[0]=1-(ra+z);e[1]=ma+L;e[2]=ja-Z;e[3]=0;e[4]=ma-L;e[5]=1-(t+z);e[6]=qa+aa;e[7]=0;e[8]=ja+Z;e[9]=qa-aa;e[10]=1-(t+ra);e[11]=0;e[12]=ia[0];e[13]=ia[1];e[14]=ia[2];e[15]=1;return e}function U(e,t){const ia=Ra,ja=-t[0],qa=-t[1],z=-t[2],L=t[3],aa=t[4],Z=t[5],ka=t[6],ma=t[7],ra=ja*ja+qa*qa+z*z+L*L;0<ra?(ia[0]=2*(aa*L+ma*ja+Z*z-ka*qa)/ra,ia[1]=2*(Z*L+ma*qa+ka*ja-aa*z)/ra,ia[2]=2*(ka*L+ma*z+aa*qa-Z*ja)/ra):(ia[0]=2*(aa*L+ma*ja+Z*z-ka*qa),ia[1]=2*(Z*L+ma*
qa+ka*ja-aa*z),ia[2]=2*(ka*L+ma*z+aa*qa-Z*ja));F(e,t,ia);return e}function la(e,t){e[0]=t[12];e[1]=t[13];e[2]=t[14];return e}function V(e,t){const ia=t[0],ja=t[1],qa=t[2],z=t[4],L=t[5],aa=t[6],Z=t[8],ka=t[9];t=t[10];e[0]=Math.sqrt(ia*ia+ja*ja+qa*qa);e[1]=Math.sqrt(z*z+L*L+aa*aa);e[2]=Math.sqrt(Z*Z+ka*ka+t*t);return e}function C(e,t){const ia=t[0]+t[5]+t[10];let ja=0;0<ia?(ja=2*Math.sqrt(ia+1),e[3]=.25*ja,e[0]=(t[6]-t[9])/ja,e[1]=(t[8]-t[2])/ja,e[2]=(t[1]-t[4])/ja):t[0]>t[5]&&t[0]>t[10]?(ja=2*Math.sqrt(1+
t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/ja,e[0]=.25*ja,e[1]=(t[1]+t[4])/ja,e[2]=(t[8]+t[2])/ja):t[5]>t[10]?(ja=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/ja,e[0]=(t[1]+t[4])/ja,e[1]=.25*ja,e[2]=(t[6]+t[9])/ja):(ja=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/ja,e[0]=(t[8]+t[2])/ja,e[1]=(t[6]+t[9])/ja,e[2]=.25*ja);return e}function K(e,t,ia,ja){var qa=t[0],z=t[1],L=t[2],aa=t[3],Z=qa+qa,ka=z+z,ma=L+L;t=qa*Z;const ra=qa*ka;qa*=ma;const va=z*ka;z*=ma;L*=ma;Z*=aa;ka*=aa;aa*=ma;ma=ja[0];const wa=ja[1];
ja=ja[2];e[0]=(1-(va+L))*ma;e[1]=(ra+aa)*ma;e[2]=(qa-ka)*ma;e[3]=0;e[4]=(ra-aa)*wa;e[5]=(1-(t+L))*wa;e[6]=(z+Z)*wa;e[7]=0;e[8]=(qa+ka)*ja;e[9]=(z-Z)*ja;e[10]=(1-(t+va))*ja;e[11]=0;e[12]=ia[0];e[13]=ia[1];e[14]=ia[2];e[15]=1;return e}function M(e,t,ia,ja,qa){var z=t[0],L=t[1],aa=t[2],Z=t[3],ka=z+z,ma=L+L,ra=aa+aa;t=z*ka;var va=z*ma,wa=z*ra;z=L*ma;L*=ra;var ca=aa*ra;aa=Z*ka;ma*=Z;const fa=Z*ra;var pa=ja[0],Ba=ja[1];ra=ja[2];ja=qa[0];Z=qa[1];qa=qa[2];ka=(1-(z+ca))*pa;const Ea=(va+fa)*pa;pa*=wa-ma;va=
(va-fa)*Ba;ca=(1-(t+ca))*Ba;Ba*=L+aa;wa=(wa+ma)*ra;L=(L-aa)*ra;t=(1-(t+z))*ra;e[0]=ka;e[1]=Ea;e[2]=pa;e[3]=0;e[4]=va;e[5]=ca;e[6]=Ba;e[7]=0;e[8]=wa;e[9]=L;e[10]=t;e[11]=0;e[12]=ia[0]+ja-(ka*ja+va*Z+wa*qa);e[13]=ia[1]+Z-(Ea*ja+ca*Z+L*qa);e[14]=ia[2]+qa-(pa*ja+Ba*Z+t*qa);e[15]=1;return e}function P(e,t){var ia=t[0],ja=t[1],qa=t[2];t=t[3];var z=ia+ia,L=ja+ja;const aa=qa+qa;ia*=z;const Z=ja*z;ja*=L;const ka=qa*z,ma=qa*L;qa*=aa;z*=t;L*=t;t*=aa;e[0]=1-ja-qa;e[1]=Z+t;e[2]=ka-L;e[3]=0;e[4]=Z-t;e[5]=1-ia-
qa;e[6]=ma+z;e[7]=0;e[8]=ka+L;e[9]=ma-z;e[10]=1-ia-ja;e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e}function X(e,t,ia,ja,qa,z,L){const aa=1/(ia-t),Z=1/(qa-ja),ka=1/(z-L);e[0]=2*z*aa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=2*z*Z;e[6]=0;e[7]=0;e[8]=(ia+t)*aa;e[9]=(qa+ja)*Z;e[10]=(L+z)*ka;e[11]=-1;e[12]=0;e[13]=0;e[14]=L*z*2*ka;e[15]=0;return e}function I(e,t,ia,ja,qa){t=1/Math.tan(t/2);let z=void 0;e[0]=t/ia;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=t;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[11]=-1;e[12]=0;e[13]=0;e[15]=0;
null!=qa&&Infinity!==qa?(z=1/(ja-qa),e[10]=(qa+ja)*z,e[14]=2*qa*ja*z):(e[10]=-1,e[14]=-2*ja);return e}function ha(e,t,ia,ja){const qa=Math.tan(t.upDegrees*Math.PI/180),z=Math.tan(t.downDegrees*Math.PI/180),L=Math.tan(t.leftDegrees*Math.PI/180);t=Math.tan(t.rightDegrees*Math.PI/180);const aa=2/(L+t),Z=2/(qa+z);e[0]=aa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=Z;e[6]=0;e[7]=0;e[8]=-((L-t)*aa*.5);e[9]=(qa-z)*Z*.5;e[10]=ja/(ia-ja);e[11]=-1;e[12]=0;e[13]=0;e[14]=ja*ia/(ia-ja);e[15]=0;return e}function na(e,t,ia,
ja,qa,z,L){const aa=1/(t-ia),Z=1/(ja-qa),ka=1/(z-L);e[0]=-2*aa;e[1]=0;e[2]=0;e[3]=0;e[4]=0;e[5]=-2*Z;e[6]=0;e[7]=0;e[8]=0;e[9]=0;e[10]=2*ka;e[11]=0;e[12]=(t+ia)*aa;e[13]=(qa+ja)*Z;e[14]=(L+z)*ka;e[15]=1;return e}function ta(e,t,ia,ja){var qa=void 0;let z=void 0;var L=void 0,aa=void 0;let Z=void 0,ka=void 0;var ma=void 0,ra=void 0;let va=void 0,wa=void 0;const ca=t[0],fa=t[1];t=t[2];L=ja[0];aa=ja[1];ja=ja[2];ma=ia[0];ra=ia[1];ia=ia[2];qa=T.getEpsilon();if(Math.abs(ca-ma)<qa&&Math.abs(fa-ra)<qa&&Math.abs(t-
ia)<qa)return l(e);ma=ca-ma;ra=fa-ra;va=t-ia;wa=1/Math.sqrt(ma*ma+ra*ra+va*va);ma*=wa;ra*=wa;va*=wa;qa=aa*va-ja*ra;z=ja*ma-L*va;L=L*ra-aa*ma;(wa=Math.sqrt(qa*qa+z*z+L*L))?(wa=1/wa,qa*=wa,z*=wa,L*=wa):L=z=qa=0;aa=ra*L-va*z;Z=va*qa-ma*L;ka=ma*z-ra*qa;(wa=Math.sqrt(aa*aa+Z*Z+ka*ka))?(wa=1/wa,aa*=wa,Z*=wa,ka*=wa):ka=Z=aa=0;e[0]=qa;e[1]=aa;e[2]=ma;e[3]=0;e[4]=z;e[5]=Z;e[6]=ra;e[7]=0;e[8]=L;e[9]=ka;e[10]=va;e[11]=0;e[12]=-(qa*ca+z*fa+L*t);e[13]=-(aa*ca+Z*fa+ka*t);e[14]=-(ma*ca+ra*fa+va*t);e[15]=1;return e}
function da(e,t,ia,ja){const qa=t[0],z=t[1];t=t[2];var L=ja[0];const aa=ja[1];var Z=ja[2];ja=qa-ia[0];let ka=z-ia[1];ia=t-ia[2];let ma=ja*ja+ka*ka+ia*ia;0<ma&&(ma=1/Math.sqrt(ma),ja*=ma,ka*=ma,ia*=ma);let ra=aa*ia-Z*ka;Z=Z*ja-L*ia;L=L*ka-aa*ja;ma=ra*ra+Z*Z+L*L;0<ma&&(ma=1/Math.sqrt(ma),ra*=ma,Z*=ma,L*=ma);e[0]=ra;e[1]=Z;e[2]=L;e[3]=0;e[4]=ka*L-ia*Z;e[5]=ia*ra-ja*L;e[6]=ja*Z-ka*ra;e[7]=0;e[8]=ja;e[9]=ka;e[10]=ia;e[11]=0;e[12]=qa;e[13]=z;e[14]=t;e[15]=1;return e}function v(e){return"mat4("+e[0]+", "+
e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function D(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function y(e,t,ia){e[0]=t[0]+ia[0];e[1]=t[1]+ia[1];e[2]=t[2]+ia[2];e[3]=t[3]+ia[3];e[4]=t[4]+ia[4];e[5]=t[5]+ia[5];e[6]=t[6]+ia[6];e[7]=t[7]+ia[7];e[8]=t[8]+ia[8];e[9]=t[9]+ia[9];e[10]=
t[10]+ia[10];e[11]=t[11]+ia[11];e[12]=t[12]+ia[12];e[13]=t[13]+ia[13];e[14]=t[14]+ia[14];e[15]=t[15]+ia[15];return e}function f(e,t,ia){e[0]=t[0]-ia[0];e[1]=t[1]-ia[1];e[2]=t[2]-ia[2];e[3]=t[3]-ia[3];e[4]=t[4]-ia[4];e[5]=t[5]-ia[5];e[6]=t[6]-ia[6];e[7]=t[7]-ia[7];e[8]=t[8]-ia[8];e[9]=t[9]-ia[9];e[10]=t[10]-ia[10];e[11]=t[11]-ia[11];e[12]=t[12]-ia[12];e[13]=t[13]-ia[13];e[14]=t[14]-ia[14];e[15]=t[15]-ia[15];return e}function R(e,t,ia){e[0]=t[0]*ia;e[1]=t[1]*ia;e[2]=t[2]*ia;e[3]=t[3]*ia;e[4]=t[4]*ia;
e[5]=t[5]*ia;e[6]=t[6]*ia;e[7]=t[7]*ia;e[8]=t[8]*ia;e[9]=t[9]*ia;e[10]=t[10]*ia;e[11]=t[11]*ia;e[12]=t[12]*ia;e[13]=t[13]*ia;e[14]=t[14]*ia;e[15]=t[15]*ia;return e}function ua(e,t,ia,ja){e[0]=t[0]+ia[0]*ja;e[1]=t[1]+ia[1]*ja;e[2]=t[2]+ia[2]*ja;e[3]=t[3]+ia[3]*ja;e[4]=t[4]+ia[4]*ja;e[5]=t[5]+ia[5]*ja;e[6]=t[6]+ia[6]*ja;e[7]=t[7]+ia[7]*ja;e[8]=t[8]+ia[8]*ja;e[9]=t[9]+ia[9]*ja;e[10]=t[10]+ia[10]*ja;e[11]=t[11]+ia[11]*ja;e[12]=t[12]+ia[12]*ja;e[13]=t[13]+ia[13]*ja;e[14]=t[14]+ia[14]*ja;e[15]=t[15]+ia[15]*
ja;return e}function ya(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function La(e,t){if(e===t)return!0;const ia=e[0],ja=e[1],qa=e[2],z=e[3],L=e[4],aa=e[5],Z=e[6],ka=e[7],ma=e[8],ra=e[9],va=e[10],wa=e[11],ca=e[12],fa=e[13],pa=e[14];e=e[15];const Ba=t[0],Ea=t[1],Ha=t[2],Ia=t[3],Ga=t[4],Ma=t[5],xa=t[6],Wa=t[7],bb=t[8],
ab=t[9],d=t[10],cb=t[11],Ta=t[12],gb=t[13],nb=t[14];t=t[15];const Za=T.getEpsilon();return Math.abs(ia-Ba)<=Za*Math.max(1,Math.abs(ia),Math.abs(Ba))&&Math.abs(ja-Ea)<=Za*Math.max(1,Math.abs(ja),Math.abs(Ea))&&Math.abs(qa-Ha)<=Za*Math.max(1,Math.abs(qa),Math.abs(Ha))&&Math.abs(z-Ia)<=Za*Math.max(1,Math.abs(z),Math.abs(Ia))&&Math.abs(L-Ga)<=Za*Math.max(1,Math.abs(L),Math.abs(Ga))&&Math.abs(aa-Ma)<=Za*Math.max(1,Math.abs(aa),Math.abs(Ma))&&Math.abs(Z-xa)<=Za*Math.max(1,Math.abs(Z),Math.abs(xa))&&Math.abs(ka-
Wa)<=Za*Math.max(1,Math.abs(ka),Math.abs(Wa))&&Math.abs(ma-bb)<=Za*Math.max(1,Math.abs(ma),Math.abs(bb))&&Math.abs(ra-ab)<=Za*Math.max(1,Math.abs(ra),Math.abs(ab))&&Math.abs(va-d)<=Za*Math.max(1,Math.abs(va),Math.abs(d))&&Math.abs(wa-cb)<=Za*Math.max(1,Math.abs(wa),Math.abs(cb))&&Math.abs(ca-Ta)<=Za*Math.max(1,Math.abs(ca),Math.abs(Ta))&&Math.abs(fa-gb)<=Za*Math.max(1,Math.abs(fa),Math.abs(gb))&&Math.abs(pa-nb)<=Za*Math.max(1,Math.abs(pa),Math.abs(nb))&&Math.abs(e-t)<=Za*Math.max(1,Math.abs(e),Math.abs(t))}
function Ka(e){const t=T.getEpsilon(),ia=e[0],ja=e[1],qa=e[2],z=e[4],L=e[5],aa=e[6],Z=e[8],ka=e[9];e=e[10];return Math.abs(1-(ia*ia+z*z+Z*Z))<=t&&Math.abs(1-(ja*ja+L*L+ka*ka))<=t&&Math.abs(1-(qa*qa+aa*aa+e*e))<=t}const Ra=b.create();b=Object.freeze(Object.defineProperty({__proto__:null,copy:x,set:p,identity:l,transpose:h,invert:c,adjoint:g,determinant:m,multiply:E,translate:N,scale:J,rotate:q,rotateX:B,rotateY:r,rotateZ:A,fromTranslation:H,fromScaling:O,fromRotation:Q,fromXRotation:S,fromYRotation:n,
fromZRotation:u,fromRotationTranslation:F,fromQuat2:U,getTranslation:la,getScaling:V,getRotation:C,fromRotationTranslationScale:K,fromRotationTranslationScaleOrigin:M,fromQuat:P,frustum:X,perspective:I,perspectiveFromFieldOfView:ha,ortho:na,lookAt:ta,targetTo:da,str:v,frob:D,add:y,subtract:f,multiplyScalar:R,multiplyScalarAndAdd:ua,exactEquals:ya,equals:La,isOrthoNormal:Ka,mul:E,sub:f},Symbol.toStringTag,{value:"Module"}));a.add=y;a.adjoint=g;a.copy=x;a.determinant=m;a.equals=La;a.exactEquals=ya;
a.frob=D;a.fromQuat=P;a.fromQuat2=U;a.fromRotation=Q;a.fromRotationTranslation=F;a.fromRotationTranslationScale=K;a.fromRotationTranslationScaleOrigin=M;a.fromScaling=O;a.fromTranslation=H;a.fromXRotation=S;a.fromYRotation=n;a.fromZRotation=u;a.frustum=X;a.getRotation=C;a.getScaling=V;a.getTranslation=la;a.identity=l;a.invert=c;a.isOrthoNormal=Ka;a.lookAt=ta;a.mat4=b;a.mul=E;a.multiply=E;a.multiplyScalar=R;a.multiplyScalarAndAdd=ua;a.ortho=na;a.perspective=I;a.perspectiveFromFieldOfView=ha;a.rotate=
q;a.rotateX=B;a.rotateY=r;a.rotateZ=A;a.scale=J;a.set=p;a.str=v;a.sub=f;a.subtract=f;a.targetTo=da;a.translate=N;a.transpose=h})},"esri/geometry/support/Axis":function(){define(["exports"],function(a){a.Axis=void 0;var b=a.Axis||(a.Axis={});b[b.X=0]="X";b[b.Y=1]="Y";b[b.Z=2]="Z";Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),
function(a,b,T,x,p,l){function h(N){return N?c(p.clone(N.origin),p.clone(N.direction)):c(p.create(),p.create())}function c(N,J){return{origin:N,direction:J}}function g(N,J,q=h()){x.copy(q.origin,N);x.copy(q.direction,J);return q}function m(N,J){N=x.cross(l.sv3d.get(),x.normalize(l.sv3d.get(),N.direction),x.subtract(l.sv3d.get(),J,N.origin));return x.dot(N,N)}const E=new T.ObjectStack(()=>h());a.closestPoint=function(N,J,q){J=x.dot(N.direction,x.subtract(q,J,N.origin));x.add(q,N.origin,x.scale(q,N.direction,
J));return q};a.copy=function(N,J=h()){return g(N.origin,N.direction,J)};a.create=h;a.distance=function(N,J){return Math.sqrt(m(N,J))};a.distance2=m;a.equals=function(N,J){return b.equals(N.origin,J.origin)&&b.equals(N.direction,J.direction)};a.fromPoints=function(N,J,q=h()){x.copy(q.origin,N);x.subtract(q.direction,J,N);return q};a.fromValues=g;a.wrap=function(N,J){const q=E.get();q.origin=N;q.direction=J;return q};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(a,b,T,x){const p=x.create(),l=x.create();a.angle=function(h,c){h=T.dot(h,c)/(T.length(h)*T.length(c));return-b.acosClamped(h)};a.angleAroundAxis=function(h,c,g){T.normalize(p,h);T.normalize(l,c);h=T.dot(p,l);h=b.acosClamped(h);c=T.cross(p,p,l);return 0>T.dot(c,g)?2*Math.PI-h:h};a.projectPoint=function(h,c,g){c=T.dot(h,c)/T.dot(h,h);return T.scale(g,h,c)};a.projectPointSignedLength=
function(h,c){return T.dot(h,c)/T.length(h)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(a,b,T,x,p,l,h,c,g,m,E,N,J,q,B){function r(Q,S,n,u){const F=u.x-n.x;u=u.y-n.y;S=Math.min(1,Math.max(0,((S.x-n.x)*F+(S.y-n.y)*u)/(F*F+u*u)));Q.x=n.x+F*S;Q.y=n.y+u*S}function A(Q,S){return Q?S?4:3:S?3:2}let H=function(){function Q(n,u,F){this.items=n;this.query=u;this.geometryType=F.geometryType;this.hasM=F.hasM;this.hasZ=F.hasZ;this.fieldsIndex=F.fieldsIndex;this.objectIdField=F.objectIdField;this.spatialReference=F.spatialReference;this.featureAdapter=F.featureAdapter}var S=Q.prototype;S.createQueryResponseForCount=
function(){const n=new g(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:u,having:F,outStatistics:U}=this.query;if(!u?.length)return 1;const la=new Map,V=new Map,C=new Set;for(const P of U){var {statisticType:K}=P;K="exceedslimit"!==K?P.onStatisticField:void 0;if(!V.has(K)){var M=[];for(const X of u){const I=this._getAttributeValues(n,X,la);M.push(I)}V.set(K,this._calculateUniqueValues(M,n.returnDistinctValues))}K=
V.get(K);for(const X in K){const {data:I,items:ha}=K[X];M=I.join(",");F&&!n.validateItems(ha,F)||C.add(M)}}return C.size};S.createQueryResponse=function(){var n=T._asyncToGenerator(function*(){let u;u=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(c.isValid(this.query.outSR)&&
!c.equals(this.query.geometry.spatialReference,this.query.outSR)?u.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...m.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):u.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return u});return function(){return n.apply(this,arguments)}}();S.createSnappingResponse=function(n,u){const F=this.featureAdapter,U=A(this.hasZ,this.hasM),{point:la}=
n,V="number"===typeof n.distance?n.distance:n.distance.x,C="number"===typeof n.distance?n.distance:n.distance.y,K={candidates:[]},M="esriGeometryPolygon"===this.geometryType;u=this._getPointCreator(la,null!=la.z,null!=la.m,this.spatialReference,u);const P=new O(null,0),X=new O(null,0),I={x:0,y:0,z:0};for(const y of this.items){var ha=F.getGeometry(y);if(x.isNone(ha))continue;const {coords:f,lengths:R}=ha;P.coords=f;X.coords=f;if(n.types&b.SnappingTypes.EDGE){ha=0;for(var na=0;na<R.length;na++){var ta=
R[na];for(var da=0;da<ta;da++,ha+=U){var v=P;v.coordsIndex=ha;if(da!==ta-1){const ua=X;ua.coordsIndex=ha+U;const ya=I;r(I,la,v,ua);var D=(la.x-ya.x)/V;const La=(la.y-ya.y)/C;D=D*D+La*La;1>=D&&K.candidates.push(E.makeEdgeCandidate(F.getObjectId(y),u(ya),Math.sqrt(D),u(v),u(ua)))}}}}if(n.types&b.SnappingTypes.VERTEX)for(ha=M?f.length-U:f.length,na=0;na<ha;na+=U)ta=P,ta.coordsIndex=na,da=(la.x-ta.x)/V,v=(la.y-ta.y)/C,da=da*da+v*v,1>=da&&K.candidates.push(E.makeVertexCandidate(F.getObjectId(y),u(ta),
Math.sqrt(da)))}K.candidates.sort((y,f)=>y.distance-f.distance);return K};S._getPointCreator=function(n,u,F,U,la){const V=x.isSome(la)&&!c.equals(U,la)?M=>m.project(M,U,la):M=>M,{hasZ:C}=this,K=n.m;return u&&F?C?({x:M,y:P,z:X})=>V({x:M,y:P,z:X,m:K}):({x:M,y:P})=>V({x:M,y:P,z:0,m:K}):u?C?({x:M,y:P,z:X})=>V({x:M,y:P,z:X}):({x:M,y:P})=>V({x:M,y:P,z:0}):F?({x:M,y:P})=>V({x:M,y:P,m:K}):({x:M,y:P})=>V({x:M,y:P})};S.createSummaryStatisticsResponse=function(){var n=T._asyncToGenerator(function*(u){const {field:F,
valueExpression:U,normalizationField:la,normalizationType:V,normalizationTotal:C,minValue:K,maxValue:M,scale:P}=u;u=this.fieldsIndex.isDateField(F);var X=yield this._getDataValues({field:F,valueExpression:U,normalizationField:la,normalizationType:V,normalizationTotal:C,scale:P});const I=q.isNullCountSupported({normalizationType:V,normalizationField:la,minValue:K,maxValue:M}),ha=this.fieldsIndex.get(F),na={value:.5,fieldType:ha?.type};X=J.isStringField(ha)?q.calculateStringStatistics({values:X,supportsNullCount:I,
percentileParams:na}):q.calculateStatistics({values:X,minValue:K,maxValue:M,useSampleStdDev:!V,supportsNullCount:I,percentileParams:na});return q.processSummaryStatisticsResult(X,u)});return function(u){return n.apply(this,arguments)}}();S.createUniqueValuesResponse=function(){var n=T._asyncToGenerator(function*(u){const {field:F,valueExpression:U,domains:la,returnAllCodedValues:V,scale:C}=u;var K=yield this._getDataValues({field:F,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,valueExpression:U,
scale:C});K=q.calculateUniqueValuesCount(K);return q.createUVResult(K,la,V,u.fieldDelimiter)});return function(u){return n.apply(this,arguments)}}();S.createClassBreaksResponse=function(){var n=T._asyncToGenerator(function*(u){const {field:F,valueExpression:U,normalizationField:la,normalizationType:V,normalizationTotal:C,classificationMethod:K,standardDeviationInterval:M,minValue:P,maxValue:X,numClasses:I,scale:ha}=u;u=yield this._getDataValues({field:F,valueExpression:U,normalizationField:la,normalizationType:V,
normalizationTotal:C,scale:ha});u=q.calculateClassBreaks(u,{field:F,normalizationField:la,normalizationType:V,normalizationTotal:C,classificationMethod:K,standardDeviationInterval:M,minValue:P,maxValue:X,numClasses:I});return q.resolveCBResult(u,K)});return function(u){return n.apply(this,arguments)}}();S.createHistogramResponse=function(){var n=T._asyncToGenerator(function*(u){const {field:F,valueExpression:U,normalizationField:la,normalizationType:V,normalizationTotal:C,classificationMethod:K,standardDeviationInterval:M,
minValue:P,maxValue:X,numBins:I,scale:ha}=u;u=yield this._getDataValues({field:F,valueExpression:U,normalizationField:la,normalizationType:V,normalizationTotal:C,scale:ha});return q.calculateHistogram(u,{field:F,normalizationField:la,normalizationType:V,normalizationTotal:C,classificationMethod:K,standardDeviationInterval:M,minValue:P,maxValue:X,numBins:I})});return function(u){return n.apply(this,arguments)}}();S._sortFeatures=function(n,u,F){if(1<n.length&&u&&u.length)for(const U of u.reverse()){u=
U.split(" ");const la=u[0],V=this.fieldsIndex.get(la);u=u[1]&&"desc"===u[1].toLowerCase();const C=q.getAttributeComparator(V?.type,u);n.sort((K,M)=>{K=F(K,la,V);M=F(M,la,V);return C(K,M)})}};S._createFeatureQueryResponse=function(n){const u=this.items,{geometryType:F,hasM:U,hasZ:la,objectIdField:V,spatialReference:C}=this,{outFields:K,outSR:M,quantizationParameters:P,resultRecordCount:X,resultOffset:I,returnZ:ha,returnM:na}=n,ta=null!=X?u.length>(I||0)+X:!1,da=K&&(K.includes("*")?[...this.fieldsIndex.fields]:
K.map(v=>this.fieldsIndex.get(v)));return{exceededTransferLimit:ta,features:this._createFeatures(n,u),fields:da,geometryType:F,hasM:U&&na,hasZ:la&&ha,objectIdFieldName:V,spatialReference:N.cleanFromGeometryEngine(M?M:C),transform:P&&h.toQuantizationTransform(P)||null}};S._createFeatures=function(n,u){const F=new g(n,this.featureAdapter,this.fieldsIndex),{hasM:U,hasZ:la}=this,{orderByFields:V,quantizationParameters:C,returnGeometry:K,returnCentroid:M,maxAllowableOffset:P,resultOffset:X,resultRecordCount:I,
returnZ:ha=!1,returnM:na=!1}=n,ta=la&&ha,da=U&&na;n=[];var v=0;u=[...u];this._sortFeatures(u,V,(f,R,ua)=>F.getFieldValue(f,R,ua));if(K||M){var D=h.toQuantizationTransform(C);if(K&&!M)for(var y of u)n[v++]={attributes:F.getAttributes(y),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(y),P,D,ta,da)};else if(!K&&M)for(const f of u)n[v++]={attributes:F.getAttributes(f),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(f,this),D)};else for(const f of u)n[v++]=
{attributes:F.getAttributes(f),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(f,this),D),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(f),P,D,ta,da)}}else for(D of u)(y=F.getAttributes(D))&&(n[v++]={attributes:y});v=X||0;null!=I&&(n=n.slice(v,Math.min(n.length,v+I)));return n};S._createExceedsLimitQueryResponse=function(n){var u=!1;let F=Number.POSITIVE_INFINITY,U=Number.POSITIVE_INFINITY;u=Number.POSITIVE_INFINITY;for(const la of n.outStatistics)if("exceedslimit"===
la.statisticType){F=null!=la.maxPointCount?la.maxPointCount:Number.POSITIVE_INFINITY;U=null!=la.maxRecordCount?la.maxRecordCount:Number.POSITIVE_INFINITY;u=null!=la.maxVertexCount?la.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)u=this.items.length>F;else if(this.items.length>U)u=!0;else{n=A(this.hasZ,this.hasM);const la=this.featureAdapter;u=this.items.reduce((V,C)=>{C=la.getGeometry(C);return V+(x.isSome(C)&&C.coords.length||0)},0)/n>u}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(u)}}]}};S._createStatisticsQueryResponse=function(){var n=T._asyncToGenerator(function*(u){var F={attributes:{}};const U=[],la=new Map,V=new Map,C=new Map,K=new Map,M=new g(u,this.featureAdapter,this.fieldsIndex);var P=u.outStatistics;const {groupByFieldsForStatistics:X,having:I,orderByFields:ha}=u;u=X&&X.length;const na=!!u,ta=na&&X[0],da=na&&!this.fieldsIndex.get(ta);
for(const R of P){const {outStatisticFieldName:ua,statisticType:ya}=R;P=R;var v="exceedslimit"!==ya?R.onStatisticField:void 0;const La="percentile_disc"===ya||"percentile_cont"===ya,Ka="EnvelopeAggregate"===ya||"CentroidAggregate"===ya||"ConvexHullAggregate"===ya,Ra=na&&1===u&&(v===ta||da)&&"count"===ya;if(na){if(!C.has(v)){var D=[];for(const e of X){var y=this._getAttributeValues(M,e,la);D.push(y)}C.set(v,this._calculateUniqueValues(D,Ka?!1:M.returnDistinctValues))}D=C.get(v);for(const e in D){const {count:t,
data:ia,items:ja,itemPositions:qa}=D[e];y=ia.join(",");if(!I||M.validateItems(ja,I)){const z=K.get(y)||{attributes:{}};if(Ka){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:aa,outStatisticFieldName:Z}=yield this._getAggregateGeometry(P,ja);z.aggregateGeometries[Z]=aa}else{var f=null;if(Ra)f=t;else{const aa=this._getAttributeValues(M,v,la);f=qa.map(Z=>aa[Z]);f=La&&"statisticParameters"in P?this._getPercentileValue(P,f):this._getStatisticValue(P,f,null,M.returnDistinctValues)}z.attributes[ua]=
f}let L=0;X.forEach((aa,Z)=>z.attributes[this.fieldsIndex.get(aa)?aa:`EXPR_${++L}`]=ia[Z]);K.set(y,z)}}}else if(Ka){F.aggregateGeometries||(F.aggregateGeometries={});const {aggregateGeometries:e,outStatisticFieldName:t}=yield this._getAggregateGeometry(P,this.items);F.aggregateGeometries[t]=e}else v=this._getAttributeValues(M,v,la),F.attributes[ua]=La&&"statisticParameters"in P?this._getPercentileValue(P,v):this._getStatisticValue(P,v,V,M.returnDistinctValues);U.push({name:ua,alias:ua,type:"esriFieldTypeDouble"})}F=
na?Array.from(K.values()):[F];this._sortFeatures(F,ha,(R,ua)=>R.attributes[ua]);return{fields:U,features:F}});return function(u){return n.apply(this,arguments)}}();S._getAggregateGeometry=function(){var n=T._asyncToGenerator(function*(u,F){var U=yield new Promise((ha,na)=>a(["../../../geometry/geometryEngineJSON"],ha,na));const {statisticType:la,outStatisticFieldName:V}=u,{featureAdapter:C,spatialReference:K,geometryType:M,hasZ:P,hasM:X}=this;F=F.map(ha=>N.getGeometry(M,P,X,C.getGeometry(ha)));const I=
U.convexHull(K,F,!0)[0];u={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===la?(U=I?l.getPolygonExtent(I):l.getGeometryExtent(U.union(K,F)),u.aggregateGeometries={...U,spatialReference:K},u.outStatisticFieldName=V||"extent"):"CentroidAggregate"===la?(U=I?p.polygonCentroid(I):p.extentCentroid(l.getGeometryExtent(U.union(K,F))),u.aggregateGeometries={x:U[0],y:U[1],spatialReference:K},u.outStatisticFieldName=V||"centroid"):"ConvexHullAggregate"===la&&(u.aggregateGeometries=
I,u.outStatisticFieldName=V||"convexHull");return u});return function(u,F){return n.apply(this,arguments)}}();S._getStatisticValue=function(n,u,F,U){const {onStatisticField:la,statisticType:V}=n;n=null;n=F?.has(la)?F.get(la):J.isStringField(this.fieldsIndex.get(la))?q.calculateStringStatistics({values:u,returnDistinct:U}):q.calculateStatistics({values:u,minValue:null,maxValue:null,useSampleStdDev:!0});F&&F.set(la,n);return n["var"===V?"variance":V]};S._getPercentileValue=function(n,u){const {onStatisticField:F,
statisticParameters:U,statisticType:la}=n,{value:V,orderBy:C}=U;n=this.fieldsIndex.get(F);return q.calculatePercentile(u,{value:V,orderBy:C,fieldType:n?.type,isDiscrete:"percentile_disc"===la})};S._getAttributeValues=function(n,u,F){if(F.has(u))return F.get(u);const U=this.fieldsIndex.get(u),la=this.items.map(V=>n.getFieldValue(V,u,U));F.set(u,la);return la};S._getAttributeDataValues=function(n,u){return this.items.map(F=>n.getDataValue(F,{field:u.field,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,
normalizationField:u.normalizationField,normalizationType:u.normalizationType,normalizationTotal:u.normalizationTotal}))};S._getAttributeExpressionValues=function(){var n=T._asyncToGenerator(function*(u,F,U){const {arcadeUtils:la}=yield B.loadArcade();F=la.createFunction(F);U=U&&la.getViewInfo(U);return u.getExpressionValues(this.items,F,U,la)});return function(u,F,U){return n.apply(this,arguments)}}();S._calculateUniqueValues=function(n,u){const F={},U=this.items,la=U.length;for(let V=0;V<la;V++){const C=
U[V],K=[];for(const P of n)K.push(P[V]);const M=K.join(",");u?null==F[M]&&(F[M]={count:1,data:K,items:[C],itemPositions:[V]}):null==F[M]?F[M]={count:1,data:K,items:[C],itemPositions:[V]}:(F[M].count++,F[M].items.push(C),F[M].itemPositions.push(V))}return F};S._getDataValues=function(){var n=T._asyncToGenerator(function*(u){const F=new g(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:U,field:la,normalizationField:V,normalizationType:C,normalizationTotal:K,scale:M}=u,P=U?{viewingMode:"map",
scale:M,spatialReference:this.query.outSR||this.spatialReference}:null;return U?this._getAttributeExpressionValues(F,U,P):this._getAttributeDataValues(F,{field:la,field2:u.field2,field3:u.field3,fieldDelimiter:u.fieldDelimiter,normalizationField:V,normalizationType:C,normalizationTotal:K})});return function(u){return n.apply(this,arguments)}}();T._createClass(Q,[{key:"size",get:function(){return this.items.length}}]);return Q}();b.SnappingTypes=void 0;(function(Q){Q[Q.NONE=0]="NONE";Q[Q.EDGE=1]="EDGE";
Q[Q.VERTEX=2]="VERTEX"})(b.SnappingTypes||(b.SnappingTypes={}));let O=function(){function Q(S,n){this.coords=S;this.coordsIndex=n}T._createClass(Q,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return Q}();b.QueryEngineResult=H;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports",
"../../core/maybe","./jsonUtils"],function(a,b,T){function x({scale:V,translate:C},K){return Math.round((K-C[0])/V[0])}function p({scale:V,translate:C},K){return Math.round((C[1]-K)/V[1])}function l(V,C,K){const M=[];let P,X,I,ha;for(let na=0;na<K.length;na++){const ta=K[na];if(0<na){if(I=x(V,ta[0]),ha=p(V,ta[1]),I!==P||ha!==X)M.push(C(ta,I-P,ha-X)),P=I,X=ha}else P=x(V,ta[0]),X=p(V,ta[1]),M.push(C(ta,P,X))}return 0<M.length?M:null}function h(V,C,K,M){return l(V,K?M?la:U:M?U:F,C)}function c(V,C,K,
M){const P=[];K=K?M?la:U:M?U:F;for(M=0;M<C.length;M++){const X=l(V,K,C[M]);X&&3<=X.length&&P.push(X)}return P.length?P:null}function g(V,C,K,M){const P=[];K=K?M?la:U:M?U:F;for(M=0;M<C.length;M++){const X=l(V,K,C[M]);X&&2<=X.length&&P.push(X)}return P.length?P:null}function m({scale:V,translate:C},K){return K*V[0]+C[0]}function E({scale:V,translate:C},K){return C[1]-K*V[1]}function N(V,C,K){const M=Array(K.length);if(!K.length)return M;const [P,X]=V.scale;let I=m(V,K[0][0]);V=E(V,K[0][1]);M[0]=C(K[0],
I,V);for(let ha=1;ha<K.length;ha++){const na=K[ha];I+=na[0]*P;V-=na[1]*X;M[ha]=C(na,I,V)}return M}function J(V,C,K){const M=Array(K.length);for(let P=0;P<K.length;P++)M[P]=N(V,C,K[P]);return M}function q(V,C,K,M){return N(V,K?M?la:U:M?U:F,C)}function B(V,C,K,M){return J(V,K?M?la:U:M?U:F,C)}function r(V,C,K,M){return J(V,K?M?la:U:M?U:F,C)}function A(V,C,K){let [M,P]=K[0],X=Math.min(M,C[0]),I=Math.min(P,C[1]),ha=Math.max(M,C[2]);C=Math.max(P,C[3]);for(let na=1;na<K.length;na++){const [ta,da]=K[na];
M+=ta;P+=da;0>ta&&(X=Math.min(X,M));0<ta&&(ha=Math.max(ha,M));0>da?I=Math.min(I,P):0<da&&(C=Math.max(C,P))}V[0]=X;V[1]=I;V[2]=ha;V[3]=C;return V}function H(V,C){if(!C.length)return null;V[0]=V[1]=Number.POSITIVE_INFINITY;V[2]=V[3]=Number.NEGATIVE_INFINITY;for(let K=0;K<C.length;K++)A(V,V,C[K]);return V}function O(V,C,K,M,P){C.xmin=x(V,K.xmin);C.ymin=p(V,K.ymin);C.xmax=x(V,K.xmax);C.ymax=p(V,K.ymax);C!==K&&(M&&(C.zmin=K.zmin,C.zmax=K.zmax),P&&(C.mmin=K.mmin,C.mmax=K.mmax));return C}function Q(V,C,
K,M,P){C.points=h(V,K.points,M,P)??[];return C}function S(V,C,K,M,P){C.x=x(V,K.x);C.y=p(V,K.y);C!==K&&(M&&(C.z=K.z),P&&(C.m=K.m));return C}function n(V,C,K,M,P){V=c(V,K.rings,M,P);if(!V)return null;C.rings=V;return C}function u(V,C,K,M,P){V=g(V,K.paths,M,P);if(!V)return null;C.paths=V;return C}const F=(V,C,K)=>[C,K],U=(V,C,K)=>[C,K,V[2]],la=(V,C,K)=>[C,K,V[2],V[3]];a.equals=function(V,C){if(V===C||null==V&&null==C)return!0;if(null==V||null==C)return!1;let K,M,P,X;V&&"upperLeft"===V.originPosition?
(K=V.translate[0],M=V.translate[1],V=V.scale[0]):(K=b.isSome(V.extent)?V.extent.xmin:0,M=b.isSome(V.extent)?V.extent.ymax:0,V=V.tolerance);C&&"upperLeft"===C.originPosition?(P=C.translate[0],X=C.translate[1],C=C.scale[0]):(P=b.isSome(C.extent)?C.extent.xmin:0,X=b.isSome(C.extent)?C.extent.ymax:0,C=C.tolerance);return K===P&&M===X&&V===C};a.getQuantizedBoundsCoordsArray=A;a.getQuantizedBoundsCoordsArrayArray=H;a.getQuantizedBoundsPaths=function(V){return H([0,0,0,0],V)};a.getQuantizedBoundsPoints=
function(V){const C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return A(C,C,V)};a.getQuantizedBoundsRings=function(V){return H([0,0,0,0],V)};a.quantizeBounds=function(V,C,K){C[0]=x(V,K[0]);C[3]=p(V,K[1]);C[2]=x(V,K[2]);C[1]=p(V,K[3]);return C};a.quantizeExtent=O;a.quantizeGeometry=function(V,C){return V&&C?T.isPoint(C)?S(V,{},C,!1,!1):T.isPolyline(C)?u(V,{},C,!1,!1):T.isPolygon(C)?n(V,{},C,!1,!1):T.isMultipoint(C)?Q(V,{},C,!1,!1):T.isExtent(C)?
O(V,{},C,!1,!1):null:null};a.quantizeMultipoint=Q;a.quantizePaths=g;a.quantizePoint=S;a.quantizePoints=h;a.quantizePolygon=n;a.quantizePolyline=u;a.quantizeRings=c;a.quantizeX=x;a.quantizeY=p;a.toQuantizationTransform=function(V){return V?{originPosition:"upper-left"===V.originPosition?"upperLeft":"lower-left"===V.originPosition?"lowerLeft":V.originPosition,scale:V.tolerance?[V.tolerance,V.tolerance]:[1,1],translate:b.isSome(V.extent)?[V.extent.xmin,V.extent.ymax]:[0,0]}:null};a.unquantizeBounds=
function(V,C,K){return K?(C[0]=m(V,K[0]),C[1]=E(V,K[3]),C[2]=m(V,K[2]),C[3]=E(V,K[1]),C):[m(V,C[0]),E(V,C[3]),m(V,C[2]),E(V,C[1])]};a.unquantizeCoordsArray=N;a.unquantizeCoordsArrayArray=J;a.unquantizeExtent=function(V,C,K,M,P){C.xmin=m(V,K.xmin);C.ymin=E(V,K.ymin);C.xmax=m(V,K.xmax);C.ymax=E(V,K.ymax);C!==K&&(M&&(C.zmin=K.zmin,C.zmax=K.zmax),P&&(C.mmin=K.mmin,C.mmax=K.mmax));return C};a.unquantizeMultipoint=function(V,C,K,M,P){b.isSome(K)&&(C.points=q(V,K.points,M,P));return C};a.unquantizePaths=
B;a.unquantizePoint=function(V,C,K,M,P){if(b.isNone(K))return C;C.x=m(V,K.x);C.y=E(V,K.y);C!==K&&(M&&(C.z=K.z),P&&(C.m=K.m));return C};a.unquantizePoints=q;a.unquantizePolygon=function(V,C,K,M,P){b.isSome(K)&&(C.rings=r(V,K.rings,M,P));return C};a.unquantizePolyline=function(V,C,K,M,P){b.isSome(K)&&(C.paths=B(V,K.paths,M,P));return C};a.unquantizeRings=r;a.unquantizeX=m;a.unquantizeY=E;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport","../../../statistics/utils"],function(a,b,T){return function(){function x(l,h,c){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=l.returnDistinctValues??!1;this.fieldsIndex=c;this.featureAdapter=h;if((h=l.outFields)&&!h.includes("*")){this.outFields=h;l=0;for(const m of h){var g=b.getExpressionFromFieldName(m);g=(h=this.fieldsIndex.get(g))?null:b.getWhereClause(g,c);h=h?h.name:b.getAliasFromFieldName(m)||`FIELD_EXP_${l++}`;this._fieldDataCache.set(m,
{alias:h,clause:g})}}}var p=x.prototype;p.countDistinctValues=function(l){if(!this.returnDistinctValues)return l.length;l.forEach(h=>this.getAttributes(h));return this._returnDistinctMap.size};p.getAttributes=function(l){l=this._processAttributesForOutFields(l);return this._processAttributesForDistinctValues(l)};p.getFieldValue=function(l,h,c){const g=c?c.name:h;let m=null;this._fieldDataCache.has(g)?m=this._fieldDataCache.get(g).clause:c||(m=b.getWhereClause(h,this.fieldsIndex),this._fieldDataCache.set(g,
{alias:g,clause:m}));return c?this.featureAdapter.getAttribute(l,g):m.calculateValue(l,this.featureAdapter)};p.getDataValue=function(l,h){const c=h.normalizationType,g=h.normalizationTotal;let m=this.getFieldValue(l,h.field,this.fieldsIndex.get(h.field));h.field2&&(m=`${T.processNullValue(m)}${h.fieldDelimiter}${T.processNullValue(this.getFieldValue(l,h.field2,this.fieldsIndex.get(h.field2)))}`,h.field3&&(m=`${m}${h.fieldDelimiter}${T.processNullValue(this.getFieldValue(l,h.field3,this.fieldsIndex.get(h.field3)))}`));
c&&Number.isFinite(m)&&(l="field"===c&&h.normalizationField?this.getFieldValue(l,h.normalizationField,this.fieldsIndex.get(h.normalizationField)):null,m=T.getNormalizedValue(m,c,l,g));return m};p.getExpressionValue=function(l,h,c,g){l={attributes:this.featureAdapter.getAttributes(l),layer:{fields:this.fieldsIndex.fields}};c=g.createExecContext(l,c);return g.executeFunction(h,c)};p.getExpressionValues=function(l,h,c,g){const m={fields:this.fieldsIndex.fields};return l.map(E=>{E={attributes:this.featureAdapter.getAttributes(E),
layer:m};E=g.createExecContext(E,c);return g.executeFunction(h,E)})};p.validateItem=function(l,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:b.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testFeature(l,this.featureAdapter)};p.validateItems=function(l,h){this._fieldDataCache.has(h)||this._fieldDataCache.set(h,{alias:h,clause:b.getWhereClause(h,this.fieldsIndex)});return this._fieldDataCache.get(h).clause.testSet(l,this.featureAdapter)};
p._processAttributesForOutFields=function(l){const h=this.outFields;if(!h||!h.length)return this.featureAdapter.getAttributes(l);const c={};for(const g of h){const {alias:m,clause:E}=this._fieldDataCache.get(g);c[m]=E?E.calculateValue(l,this.featureAdapter):this.featureAdapter.getAttribute(l,m)}return c};p._processAttributesForDistinctValues=function(l){if(a.isNone(l)||!this.returnDistinctValues)return l;var h=this.outFields,c=[];if(h)for(const m of h){var {alias:g}=this._fieldDataCache.get(m);c.push(l[g])}else for(g in l)c.push(l[g]);
h=`${(h||["*"]).join(",")}=${c.join(",")}`;c=this._returnDistinctMap.get(h)||0;this._returnDistinctMap.set(h,++c);return 1<c?null:l};return x}()})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(a,b,T){function x(g,m){return g?h.get(g,m):null}function p(g,m,E,N=!0){const J=[];for(const q of m)if("*"!==q&&!g.has(q))if(N){m=l(q);try{const B=x(m,g);if(!B)throw new b("feature-store:unsupported-query","invalid SQL expression",
{where:m});if(!B.isStandardized)throw new b("feature-store:unsupported-query","expression is not standard",{clause:B});p(g,B.fieldNames,"expression contains missing fields")}catch(B){if((m=B&&B.details)&&(m.clause||m.where))throw B;m&&m.missingFields?J.push(...m.missingFields):J.push(q)}}else J.push(q);if(J.length)throw new b("feature-store:unsupported-query",E,{missingFields:J});}function l(g){return g.split(" as ")[0]}const h=new T.WhereClauseCache(50,500),c=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
a.getAliasFromFieldName=function(g){return g.split(" as ")[1]};a.getExpressionFromFieldName=l;a.getWhereClause=x;a.hasInvalidFieldType=function(g,m){return(g=m.get(g))?!c.has(g.type):!1};a.validateFields=p;a.validateHaving=function(g,m,E){if(!m)return!0;const N=h.get(m,g);if(!N)throw new b("feature-store:unsupported-query","invalid SQL expression",{having:m});if(!N.isAggregate)throw new b("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:m});p(g,N.fieldNames,
"having contains missing fields");if(!N.getExpressions().every(J=>{const {aggregateType:q,field:B}=J,r=g.has(B)&&g.get(B).name;return E.some(A=>{const {onStatisticField:H,statisticType:O}=A;return(g.has(H)&&g.get(H).name)===r&&O.toLowerCase().trim()===q})}))throw new b("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:m});return!0};a.validateWhere=function(g,m){if(!m)return!0;const E=h.get(m,g);if(!E)throw new b("feature-store:unsupported-query",
"invalid SQL expression",{where:m});if(!E.isStandardized)throw new b("feature-store:unsupported-query","where clause is not standard",{where:m});p(g,E.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(a,b,T){let x=function(){function p(l,h){this._cache=new b(l);this._invalidCache=new b(h)}p.prototype.get=
function(l,h){const c=`${h.uid}:${l}`,g=this._cache.get(c);if(g)return g;if(void 0!==this._invalidCache.get(c))return null;try{const m=T.WhereClause.create(l,h);this._cache.put(c,m);return m}catch{return this._invalidCache.put(c,null),null}};return p}();a.WhereClauseCache=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(a){return function(){function b(x,p){this._storage=new a.MemCacheStorage;
this._storage.maxSize=x;p&&this._storage.registerRemoveFunc("",p)}var T=b.prototype;T.put=function(x,p){this._storage.put(x,p,1,1)};T.pop=function(x){return this._storage.pop(x)};T.get=function(x){return this._storage.get(x)};T.clear=function(){this._storage.clearAll()};T.destroy=function(){this._storage.destroy()};return b}()})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(a,b,T,x){a.RemoveMode=void 0;(function(h){h[h.ALL=
0]="ALL";h[h.SOME=1]="SOME"})(a.RemoveMode||(a.RemoveMode={}));let p=function(){function h(g,m,E){this._namespace=g;this._storage=m;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";E&&(this._storage.registerRemoveFunc(this._namespace,E),this._removeFunc=!0)}var c=h.prototype;c.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};c.resetHitRate=
function(){this._hit=this._miss=0};c.put=function(g,m,E,N=0){this._storage.put(this._namespace+g,m,E,N)};c.get=function(g){g=this._storage.get(this._namespace+g);void 0===g?++this._miss:++this._hit;return g};c.pop=function(g){g=this._storage.pop(this._namespace+g);void 0===g?++this._miss:++this._hit;return g};c.updateSize=function(g,m,E){this._storage.updateSize(this._namespace+g,m,E)};c.clear=function(){this._storage.clear(this._namespace)};c.clearAll=function(){this._storage.clearAll()};c.getStats=
function(){return this._storage.getStats()};c.resetStats=function(){this._storage.resetStats()};b._createClass(h,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return h}(),l=function(){function h(g=10485760){this._maxSize=g;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=
new x;this._users=new x}var c=h.prototype;c.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};c.register=function(g){this._users.push(g)};c.deregister=function(g){this._users.removeUnordered(g)};c.registerRemoveFunc=function(g,m){this._removeFuncs.push([g,m])};c.deregisterRemoveFunc=function(g){this._removeFuncs.filterInPlace(m=>m[0]!==g)};c.put=function(g,m,E,N){const J=this._db.get(g);J&&(this._size-=J.size,this._db.delete(g),J.entry!==m&&this._notifyRemove(g,
J.entry,a.RemoveMode.ALL));E>this._maxSize?this._notifyRemove(g,m,a.RemoveMode.ALL):void 0===m?console.warn("Refusing to cache undefined entry "):!E||0>E?console.warn("Refusing to cache entry with invalid size "+E):(N=1+Math.max(N,-3)- -3,this._db.set(g,{entry:m,size:E,lifetime:N,lives:N}),this._size+=E,this._checkSizeLimit())};c.updateSize=function(g,m,E){const N=this._db.get(g);if(N&&N.entry===m){for(this._size-=N.size;E>this._maxSize;)if(E=this._notifyRemove(g,m,a.RemoveMode.SOME),!(T.isSome(E)&&
0<E)){this._db.delete(g);return}N.size=E;this._size+=E;this._checkSizeLimit()}};c.pop=function(g){const m=this._db.get(g);if(m)return this._size-=m.size,this._db.delete(g),++this._hit,m.entry;++this._miss};c.get=function(g){const m=this._db.get(g);if(void 0===m)++this._miss;else return this._db.delete(g),m.lives=m.lifetime,this._db.set(g,m),++this._hit,m.entry};c.getStats=function(){const g={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},m={},E=[];this._db.forEach((q,B)=>{const r=q.lifetime;E[r]=(E[r]||0)+q.size;this._users.forAll(A=>{A=A.namespace;B.startsWith(A)&&(m[A]=(m[A]||0)+q.size)})});const N={};this._users.forAll(q=>{const B=q.namespace;!isNaN(q.hitRate)&&0<q.hitRate?(m[B]=m[B]||0,N[B]=Math.round(100*q.hitRate)+"%"):N[B]="0%"});var J=Object.keys(m);J.sort((q,B)=>m[B]-m[q]);J.forEach(q=>g[q]=Math.round(m[q]/2**20)+"MB / "+N[q]);for(J=E.length-1;0<=J;--J){const q=E[J];q&&(g["Priority "+
(J+-3-1)]=Math.round(q/this.size*100)+"%")}return g};c.resetStats=function(){this._hit=this._miss=0;this._users.forAll(g=>g.resetHitRate())};c.clear=function(g){this._db.forEach((m,E)=>{E.startsWith(g)&&(this._size-=m.size,this._db.delete(E),this._notifyRemove(E,m.entry,a.RemoveMode.ALL))})};c.clearAll=function(){this._db.forEach((g,m)=>this._notifyRemove(m,g.entry,a.RemoveMode.ALL));this._size=0;this._db.clear()};c._getHitRate=function(){return this._hit/(this._hit+this._miss)};c._notifyRemove=function(g,
m,E){let N;this._removeFuncs.some(J=>g.startsWith(J[0])?(J=J[1](m,E),"number"===typeof J&&(N=J),!0):!1);return N};c._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [g,m]of this._db){this._db.delete(g);if(1>=m.lives){this._size-=m.size;const E=this._notifyRemove(g,m.entry,a.RemoveMode.SOME);T.isSome(E)&&0<E&&(this._size+=E,m.lives=m.lifetime,m.size=E,this._db.set(g,m))}else--m.lives,this._db.set(g,m);if(this._size<=.9*this.maxSize)break}};b._createClass(h,[{key:"size",get:function(){return this._size}},
{key:"maxSize",get:function(){return this._maxSize},set:function(g){this._maxSize=Math.max(g,0);this._checkSizeLimit()}}]);return h}();a.MIN_PRIORITY=-3;a.MemCache=p;a.MemCacheStorage=l;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(a,b,T,x,p,l){function h(P,X){P+="";return P.length>=
X?P:Array(X-P.length+1).join("0")+P}function c(P,X,I="0",ha="0",na="0",ta="0",da="",v="0",D="0"){return"+"===da||"-"===da?(P=`${h(parseInt(P,10),4)}-${h(parseInt(X,10),2)}-${h(parseInt(I,10),2)}`,X="",10>parseFloat(ta)&&(X="0"),ha=`${h(parseInt(ha,10),2)}:${h(parseInt(na,10),2)}:${X+parseFloat(ta).toString()}`,da=`${da}${h(parseInt(v,10),2)}:${h(parseInt(D,10),2)}`,new Date(P+"T"+ha+da)):new Date(parseInt(P,10),parseInt(X,10)-1,parseInt(I,10),parseInt(ha,10),parseInt(na,10),parseFloat(ta))}function g(P){let X=
n.exec(P);if(null!==X){const [,I,ha,na,ta,da,v]=X;return c(I,ha,na,ta,da,v)}X=u.exec(P);if(null!==X){const [,I,ha,na,ta,da,v,D,y,f]=X;return c(I,ha,na,ta,da,v,D,y,f)}X=F.exec(P);if(null!==X){const [,I,ha,na,ta,da,v,D,y]=X;return c(I,ha,na,ta,da,"0",v,D,y)}X=U.exec(P);if(null!==X){const [,I,ha,na,ta,da]=X;return c(I,ha,na,ta,da)}X=S.exec(P);if(null!==X){const [,I,ha,na]=X;return c(I,ha,na)}throw Error("SQL Invalid Timestamp");}function m(P){const X=S.exec(P);if(null===X)try{return g(P)}catch{throw Error("SQL Invalid Date");
}const [,I,ha,na]=X;return new Date(parseInt(I,10),parseInt(ha,10)-1,parseInt(na,10))}function E(P){return Array.isArray(P)?P:[P]}function N(P){return null!==P?!0!==P:null}function J(P,X){return null!=P&&null!=X?!0===P&&!0===X:!1===P||!1===X?!1:null}function q(P,X){return null!=P&&null!=X?!0===P||!0===X:!0===P||!0===X?!0:null}function B(P,X){if(null==P)return null;let I=!1;for(const ha of X)if(null==ha)I=null;else if(P===ha){I=!0;break}return I}function r(P,X,I){if(null==P)return null;let ha="",na=
K.Normal;for(let ta=0;ta<X.length;ta++){const da=X.charAt(ta);switch(na){case K.Normal:da===I?na=K.Escaped:ha="-[]/{}()*+?.\\^$|".includes(da)?ha+("\\"+da):"%"===da?ha+".*":"_"===da?ha+".":ha+da;break;case K.Escaped:ha="-[]/{}()*+?.\\^$|".includes(da)?ha+("\\"+da):ha+da,na=K.Normal}}return(new RegExp("^"+ha+"$","m")).test(P)}function A(P){return P instanceof Date?P.valueOf():P}function H(P,X,I){if(null==X||null==I)return null;X=A(X);I=A(I);switch(P){case "\x3c\x3e":return X!==I;case "\x3d":return X===
I;case "\x3e":return X>I;case "\x3c":return X<I;case "\x3e\x3d":return X>=I;case "\x3c\x3d":return X<=I}}function O(P,X,I){if(X instanceof p.SqlInterval)if(I instanceof Date)switch(P){case "+":return new Date(X.valueInMilliseconds()+I.getTime());case "-":return X.valueInMilliseconds()-I.getTime();case "*":return X.valueInMilliseconds()*I.getTime();case "/":return X.valueInMilliseconds()/I.getTime()}else if(I instanceof p.SqlInterval)switch(P){case "+":return p.SqlInterval.createFromMilliseconds(X.valueInMilliseconds()+
I.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(X.valueInMilliseconds()-I.valueInMilliseconds());case "*":return X.valueInMilliseconds()*I.valueInMilliseconds();case "/":return X.valueInMilliseconds()/I.valueInMilliseconds()}else X=X.valueInMilliseconds();else if(I instanceof p.SqlInterval)if(X instanceof Date)switch(P){case "+":return new Date(I.valueInMilliseconds()+X.getTime());case "-":return new Date(X.getTime()-I.valueInMilliseconds());case "*":return X.getTime()*
I.valueInMilliseconds();case "/":return X.getTime()/I.valueInMilliseconds()}else I=I.valueInMilliseconds();else if(X instanceof Date&&"number"===typeof I)switch(I*=864E5,X=X.getTime(),P){case "+":return new Date(X+I);case "-":return new Date(X-I);case "*":return new Date(X*I);case "/":return new Date(X/I)}else if(I instanceof Date&&"number"===typeof X)switch(X*=864E5,I=I.getTime(),P){case "+":return new Date(X+I);case "-":return new Date(X-I);case "*":return new Date(X*I);case "/":return new Date(X/
I)}switch(P){case "+":return X+I;case "-":return X-I;case "*":return X*I;case "/":return X/I}}function Q(P,X,I,ha){P=ha.getAttribute(P,X);return null!=P&&1===I[X]?new Date(P):P}const S=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,n=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,u=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,
la=new Set(["current_timestamp","current_date","current_time"]);let V=function(){function P(){}P.makeBool=function(X){return!0===X};P.featureValue=function(X,I,ha,na){return Q(X,I,ha,na)};P.equalsNull=function(X){return null===X};P.applyLike=function(X,I,ha){return r(X,I,ha)};P.ensureArray=function(X){return E(X)};P.applyIn=function(X,I){return B(X,I)};P.currentDate=function(){const X=new Date;X.setHours(0,0,0,0);return X};P.makeSqlInterval=function(X,I,ha){return p.SqlInterval.createFromValueAndQualifer(X,
I,ha)};P.convertInterval=function(X){return X instanceof p.SqlInterval?X.valueInMilliseconds():X};P.currentTimestamp=function(){return new Date};P.compare=function(X,I,ha){return H(X,I,ha)};P.calculate=function(X,I,ha){return O(X,I,ha)};P.makeComparable=function(X){return A(X)};P.evaluateFunction=function(X,I){return p.evaluateFunction(X,I)};P.lookup=function(X,I){X=I[X];return void 0===X?null:X};P.between=function(X,I){return null==X||null==I[0]||null==I[1]?null:X>=I[0]&&X<=I[1]};P.notbetween=function(X,
I){return null==X||null==I[0]||null==I[1]?null:X<I[0]||X>I[1]};P.ternaryNot=function(X){return N(X)};P.ternaryAnd=function(X,I){return J(X,I)};P.ternaryOr=function(X,I){return q(X,I)};return P}(),C=function(){function P(I,ha){this.fieldsIndex=ha;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=l.WhereGrammar.parse(I);const {isStandardized:na,isAggregate:ta,referencedFieldNames:da}=this._extractExpressionInfo(ha);this._referencedFieldNames=da;this.isStandardized=
na;this.isAggregate=ta}P.create=function(I,ha){return new P(I,ha)};var X=P.prototype;X.testSet=function(I,ha=M){const na={};for(const ta of this.fieldNames)na[ta]=I.map(da=>ha.getAttribute(da,ta));return!!this._evaluateNode(this.parseTree,{attributes:na},M)};X.calculateValue=function(I,ha=M){I=this._evaluateNode(this.parseTree,I,ha);return I instanceof p.SqlInterval?I.valueInMilliseconds()/864E5:I};X.calculateValueCompiled=function(I,ha=M){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(I,
this.parameters,ha,this._datefields);if(T("esri-csp-restrictions"))return this.calculateValue(I,ha);this._compileMe();return this.parseTree._compiledVersion(I,this.parameters,ha,this._datefields)};X.testFeature=function(I,ha=M){return!!this._evaluateNode(this.parseTree,I,ha)};X.testFeatureCompiled=function(I,ha=M){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(I,this.parameters,ha,this._datefields);if(T("esri-csp-restrictions"))return this.testFeature(I,ha);this._compileMe();
return!!this.parseTree._compiledVersion(I,this.parameters,ha,this._datefields)};X.getFunctions=function(){const I=new Set;this._visitAll(this.parseTree,ha=>{"function"===ha.type&&I.add(ha.name.toLowerCase())});return Array.from(I)};X.getExpressions=function(){const I=new Map;this._visitAll(this.parseTree,ha=>{if("function"===ha.type){const na=ha.name.toLowerCase();ha=ha.args.value[0];if("column-reference"===ha.type){ha=ha.column;const ta=`${na}-${ha}`;I.has(ta)||I.set(ta,{aggregateType:na,field:ha})}}});
return[...I.values()]};X.getVariables=function(){const I=new Set;this._visitAll(this.parseTree,ha=>{"parameter"===ha.type&&I.add(ha.value.toLowerCase())});return Array.from(I)};X._compileMe=function(){const I="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",I)).bind(V)};X._extractExpressionInfo=function(I){const ha=[],na=new Set;let ta=!0,da=!0;this._visitAll(this.parseTree,
v=>{switch(v.type){case "column-reference":const D=I?.get(v.column);let y,f;D?y=f=D.name??"":(f=v.column,y=f.toLowerCase());D&&D.name&&("date"===D.type||"esriFieldTypeDate"===D.type)&&(this._datefields[D.name]=1);na.has(y)||(na.add(y),ha.push(f));v.column=f;break;case "function":const {name:R,args:ua}=v;v=ua.value.length;ta&&(ta=p.isStandardized(R,v));da&&(da=x.isAggregate(R,v))}});return{referencedFieldNames:Array.from(ha),isStandardized:ta,isAggregate:da}};X._visitAll=function(I,ha){if(null!=I)switch(ha(I),
I.type){case "when-clause":this._visitAll(I.operand,ha);this._visitAll(I.value,ha);break;case "case-expression":for(const na of I.clauses)this._visitAll(na,ha);"simple"===I.format&&this._visitAll(I.operand,ha);null!==I.else&&this._visitAll(I.else,ha);break;case "expression-list":for(const na of I.value)this._visitAll(na,ha);break;case "unary-expression":this._visitAll(I.expr,ha);break;case "binary-expression":this._visitAll(I.left,ha);this._visitAll(I.right,ha);break;case "function":this._visitAll(I.args,
ha)}};X.evaluateNodeToJavaScript=function(I){switch(I.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(I.value)+", "+JSON.stringify(I.qualifier)+","+JSON.stringify(I.op)+")";case "case-expression":var ha="";if("simple"===I.format){var na="this.makeComparable("+this.evaluateNodeToJavaScript(I.operand)+")";ha="( ";for(let ta=0;ta<I.clauses.length;ta++)ha+=" ("+na+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(I.clauses[ta].operand)+")) ? ("+this.evaluateNodeToJavaScript(I.clauses[ta].value)+
") : "}else for(ha="( ",na=0;na<I.clauses.length;na++)ha+=" this.makeBool("+this.evaluateNodeToJavaScript(I.clauses[na].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(I.clauses[na].value)+") : ";ha=null!==I.else?ha+this.evaluateNodeToJavaScript(I.else):ha+"null";return ha+" )";case "parameter":return"this.lookup("+JSON.stringify(I.value.toLowerCase())+",lookups)";case "expression-list":ha="[";for(na of I.value)"["!==ha&&(ha+=","),ha+=this.evaluateNodeToJavaScript(na);return ha+"]";
case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(I.expr)+")";case "binary-expression":switch(I.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+" )";case "IS":if("null"!==I.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(I.left)+
")";case "ISNOT":if("null"!==I.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(I.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(I.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(I.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(I.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(I.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(I.left)+
","+this.evaluateNodeToJavaScript(I.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+","+JSON.stringify(I.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+","+JSON.stringify(I.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(I.operator)+","+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(I.operator)+","+this.evaluateNodeToJavaScript(I.left)+","+this.evaluateNodeToJavaScript(I.right)+")"}throw Error("Not Supported Operator "+I.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(I.value);case "date":return"(new Date("+m(I.value).getTime().toString()+"))";case "timestamp":return"(new Date("+
g(I.value).getTime().toString()+"))";case "current-time":return"date"===I.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(I.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(I.name)+","+this.evaluateNodeToJavaScript(I.args)+")"}throw Error("Unsupported sql syntax "+I.type);};X._evaluateNode=function(I,ha,na){switch(I.type){case "interval":return ha=this._evaluateNode(I.value,
ha,na),p.SqlInterval.createFromValueAndQualifer(ha,I.qualifier,I.op);case "case-expression":if("simple"===I.format){var ta=A(this._evaluateNode(I.operand,ha,na));for(var da=0;da<I.clauses.length;da++)if(ta===A(this._evaluateNode(I.clauses[da].operand,ha,na)))return this._evaluateNode(I.clauses[da].value,ha,na)}else for(ta=0;ta<I.clauses.length;ta++)if(!0===this._evaluateNode(I.clauses[ta].operand,ha,na))return this._evaluateNode(I.clauses[ta].value,ha,na);return null!==I.else?this._evaluateNode(I.else,
ha,na):null;case "parameter":return this.parameters[I.value.toLowerCase()];case "expression-list":ta=[];for(da of I.value)ta.push(this._evaluateNode(da,ha,na));return ta;case "unary-expression":return N(this._evaluateNode(I.expr,ha,na));case "binary-expression":switch(I.operator){case "AND":return J(this._evaluateNode(I.left,ha,na),this._evaluateNode(I.right,ha,na));case "OR":return q(this._evaluateNode(I.left,ha,na),this._evaluateNode(I.right,ha,na));case "IS":if("null"!==I.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(I.left,ha,na);case "ISNOT":if("null"!==I.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(I.left,ha,na);case "IN":return ta=E(this._evaluateNode(I.right,ha,na)),B(this._evaluateNode(I.left,ha,na),ta);case "NOT IN":return ta=E(this._evaluateNode(I.right,ha,na)),N(B(this._evaluateNode(I.left,ha,na),ta));case "BETWEEN":return ta=this._evaluateNode(I.left,ha,na),I=this._evaluateNode(I.right,ha,na),null==ta||null==I[0]||null==I[1]?null:
ta>=A(I[0])&&ta<=A(I[1]);case "NOTBETWEEN":return ta=this._evaluateNode(I.left,ha,na),I=this._evaluateNode(I.right,ha,na),null==ta||null==I[0]||null==I[1]?null:ta<A(I[0])||ta>A(I[1]);case "LIKE":return r(this._evaluateNode(I.left,ha,na),this._evaluateNode(I.right,ha,na),I.escape);case "NOT LIKE":return N(r(this._evaluateNode(I.left,ha,na),this._evaluateNode(I.right,ha,na),I.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return H(I.operator,this._evaluateNode(I.left,
ha,na),this._evaluateNode(I.right,ha,na));case "-":case "+":case "*":case "/":return O(I.operator,this._evaluateNode(I.left,ha,na),this._evaluateNode(I.right,ha,na))}case "null":case "boolean":case "string":case "number":return I.value;case "date":return m(I.value);case "timestamp":return g(I.value);case "current-time":return ha=new Date,"date"===I.mode&&ha.setHours(0,0,0,0),ha;case "column-reference":return Q(ha,I.column,this._datefields,na);case "function":return ha=this._evaluateNode(I.args,ha,
na),this.isAggregate?x.aggregateFunction(I.name,ha):p.evaluateFunction(I.name,ha)}throw Error("Unsupported sql syntax "+I.type);};b._createClass(P,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,I=>{"current-time"===I.type?this._hasDateFunctions=!0:"function"===I.type&&(this._hasDateFunctions=this._hasDateFunctions||la.has(I.name.toLowerCase()))});
return this._hasDateFunctions}}]);return P}();var K;(function(P){P[P.Normal=0]="Normal";P[P.Escaped=1]="Escaped"})(K||(K={}));const M={getAttribute(P,X){return(P&&"object"===typeof P.attributes?P.attributes:P)[X]}};a.WhereClause=C;a.defaultAttributeAdapter=M;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(a){function b(p){let l=0;for(let h=0;h<p.length;h++)l+=p[h];return l/p.length}
function T(p){const l=b(p),h=p.length;let c=0;for(const g of p)c+=(g-l)**2;return 1<h?c/(h-1):0}const x={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:b(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{p=p[0];let l=0;for(let h=0;h<p.length;h++)l+=p[h];p=l}return p}},stddev:{minParams:1,maxParams:1,
evaluate:p=>null==p[0]?null:Math.sqrt(T(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:T(p[0])}};a.aggregateFunction=function(p,l){const h=x[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(l.length<h.minParams||l.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return h.evaluate(l)};a.isAggregate=function(p,l){p=x[p.toLowerCase()];return null!=p&&
l>=p.minParams&&l<=p.maxParams};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(a,b){let T=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p._fixDefaults=function(l){if(null!==l.precision||null!==l.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=function(l){const h=
new p;h.second=l/1E3;return h};p.createFromValueAndQualifer=function(l,h,c){let g=null;const m=new p;m.op="-"===c?"-":"+";if("interval-period"===h.type){p._fixDefaults(h);c=RegExp("^[0-9]{1,}$");if("year"===h.period||"month"===h.period)throw Error("Year-Month Intervals not supported");if(c.test(l))m[h.period]=parseFloat(l);else throw Error("Illegal Interval");}else{p._fixDefaults(h.start);p._fixDefaults(h.end);if("year"===h.start.period||"month"===h.start.period)throw Error("Year-Month Intervals not supported");
if("year"===h.end.period||"month"===h.end.period)throw Error("Year-Month Intervals not supported");switch(h.start.period){case "day":switch(h.end.period){case "hour":g=RegExp("^[0-9]{1,} [0-9]{1,}$");if(g.test(l))m[h.start.period]=parseFloat(l.split(" ")[0]),m[h.end.period]=parseFloat(l.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(g.test(l))m[h.start.period]=parseFloat(l.split(" ")[0]),l=l.split(" ")[1].split(":"),m.hour=parseFloat(l[0]),
m.minute=parseFloat(l[1]);else throw Error("Illegal Interval");break;case "second":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(l))m[h.start.period]=parseFloat(l.split(" ")[0]),l=l.split(" ")[1].split(":"),m.hour=parseFloat(l[0]),m.minute=parseFloat(l[1]),m.second=parseFloat(l[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(h.end.period){case "minute":g=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(g.test(l))m.hour=
parseFloat(l.split(":")[0]),m.minute=parseFloat(l.split(":")[1]);else throw Error("Illegal Interval");break;case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(l))l=l.split(":"),m.hour=parseFloat(l[0]),m.minute=parseFloat(l[1]),m.second=parseFloat(l[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(h.end.period){case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(l))l=
l.split(":"),m.minute=parseFloat(l[0]),m.second=parseFloat(l[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return m};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const x={extract:{minParams:2,maxParams:2,evaluate:([p,l])=>{if(null==l)return null;if(l instanceof Date)switch(p.toUpperCase()){case "SECOND":return l.getSeconds();
case "MINUTE":return l.getMinutes();case "HOUR":return l.getHours();case "DAY":return l.getDate();case "MONTH":return l.getMonth()+1;case "YEAR":return l.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [l,h]=p;return null==l||null==h?null:l.toString().substring(h-1)}if(3===p.length){const [l,h,c]=p;return null==l||null==h||null==c?null:0>=c?"":l.toString().substring(h-1,h+c-1)}}},position:{minParams:2,maxParams:2,
evaluate:([p,l])=>null==p||null==l?null:l.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var l=3===p.length,h=l?p[1]:" ";l=l?p[2]:p[1];if(null==h||null==l)return null;h=`(${b.escapeRegExpString(h)})`;switch(p[0]){case "BOTH":return l.replace(new RegExp(`^${h}*|${h}*$`,"g"),"");case "LEADING":return l.replace(new RegExp(`^${h}*`,"g"),"");case "TRAILING":return l.replace(new RegExp(`${h}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.abs(p[0])},ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==
p[1]?null:p[0]%p[1]},round:{minParams:1,maxParams:2,evaluate:p=>{const l=p[0];p=2===p.length?10**p[1]:1;return null==l?null:Math.round(l*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let l="";for(let h=0;h<p.length;h++){if(null==p[h])return null;
l+=p[h].toString()}return l}},lower:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};a.SqlInterval=T;a.evaluateFunction=function(p,l){const h=x[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(l.length<h.minParams||l.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return h.evaluate(l)};a.isStandardized=function(p,
l){p=x[p.toLowerCase()];return null!=p&&l>=p.minParams&&l<=p.maxParams};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(a,b){var T={exports:{}};(function(p){(function(l,h){p.exports&&(p.exports=h())})(b.commonjsGlobal,function(){function l(c,g,m,E){c=Error.call(this,c);Object.setPrototypeOf&&Object.setPrototypeOf(c,l.prototype);c.expected=g;c.found=m;c.location=
E;c.name="SyntaxError";return c}function h(c,g,m){m=m||" ";if(c.length>g)return c;g-=c.length;m+=m.repeat(g);return c+m.slice(0,g)}(function(c,g){function m(){this.constructor=c}m.prototype=g.prototype;c.prototype=new m})(l,Error);l.prototype.format=function(c){var g="Error: "+this.message;if(this.location){var m=null,E;for(E=0;E<c.length;E++)if(c[E].source===this.location.source){m=c[E].text.split(/\r\n|\n|\r/g);break}c=this.location.start;E=this.location.source+":"+c.line+":"+c.column;if(m){var N=
this.location.end,J=h("",c.line.toString().length," ");m=m[c.line-1];N=(c.line===N.line?N.column:m.length+1)-c.column||1;g+="\n --\x3e "+E+"\n"+J+" |\n"+c.line+" | "+m+"\n"+J+" | "+h("",c.column-1," ")+h("",N,"^")}else g+="\n at "+E}return g};l.buildMessage=function(c,g){function m(B){return B.charCodeAt(0).toString(16).toUpperCase()}function E(B){return B.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,
function(r){return"\\x0"+m(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+m(r)})}function N(B){return B.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+m(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+m(r)})}function J(B){return q[B.type](B)}var q={literal:function(B){return'"'+E(B.text)+'"'},class:function(B){var r=
B.parts.map(function(A){return Array.isArray(A)?N(A[0])+"-"+N(A[1]):N(A)});return"["+(B.inverted?"^":"")+r.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(B){return B.description}};return"Expected "+function(B){B=B.map(J);var r,A;B.sort();if(0<B.length){for(A=r=1;r<B.length;r++)B[r-1]!==B[r]&&(B[A]=B[r],A++);B.length=A}switch(B.length){case 1:return B[0];case 2:return B[0]+" or "+B[1];default:return B.slice(0,-1).join(", ")+", or "+B[B.length-
1]}}(c)+" but "+(g?'"'+E(g)+'"':"end of input")+" found."};return{SyntaxError:l,parse:function(c,g){function m(w,G){return{type:"literal",text:w,ignoreCase:G}}function E(w,G,ba){return{type:"class",parts:w,inverted:G,ignoreCase:ba}}function N(w){var G=dc[w],ba;if(!G){for(ba=w-1;!dc[ba];)ba--;G=dc[ba];for(G={line:G.line,column:G.column};ba<w;)10===c.charCodeAt(ba)?(G.line++,G.column=1):G.column++,ba++;dc[w]=G}return G}function J(w,G){var ba=N(w),za=N(G);return{source:cb,start:{offset:w,line:ba.line,
column:ba.column},end:{offset:G,line:za.line,column:za.column}}}function q(w){k<sb||(k>sb&&(sb=k,zc=[]),zc.push(w))}function B(){var w=k;xa();var G=A();G!==d?(xa(),w=G):(k=w,w=d);return w}function r(){var w=k;var G=A();if(G!==d){w=[];var ba=k;var za=xa();var Fa=Ia();if(Fa!==d){var Oa=xa();var Pa=A();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)w.push(ba),ba=k,za=xa(),Fa=Ia(),Fa!==d?(Oa=xa(),Pa=A(),Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=ba,ba=d);ba={type:"expression-list"};
G=[G];for(za=0;za<w.length;za++)G.push(w[za][3]);ba.value=G;w=ba}else k=w,w=d;return w}function A(){var w=k;var G=H();if(G!==d){w=[];var ba=k;var za=xa();var Fa=z();if(Fa!==d){var Oa=xa();var Pa=H();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)w.push(ba),ba=k,za=xa(),Fa=z(),Fa!==d?(Oa=xa(),Pa=H(),Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=ba,ba=d);w=ab(G,w)}else k=w,w=d;return w}function H(){var w=k;var G=O();if(G!==d){w=[];var ba=k;var za=xa();var Fa=qa();if(Fa!==d){var Oa=
xa();var Pa=O();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)w.push(ba),ba=k,za=xa(),Fa=qa(),Fa!==d?(Oa=xa(),Pa=O(),Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=ba,ba=d);w=ab(G,w)}else k=w,w=d;return w}function O(){var w=k;var G=ja();if(G===d){G=k;if(33===c.charCodeAt(k)){var ba=nb;k++}else ba=d,0===Aa&&q(qd);if(ba!==d){var za=k;Aa++;if(61===c.charCodeAt(k)){var Fa=Za;k++}else Fa=d,0===Aa&&q(Qc);Aa--;Fa===d?za=void 0:(k=za,za=d);za!==d?G=ba=[ba,za]:(k=G,G=d)}else k=G,G=d}G!==d?
(ba=xa(),za=O(),za!==d?w={type:"unary-expression",operator:"NOT",expr:za}:(k=w,w=d)):(k=w,w=d);if(w===d){G=k;w=u();if(w!==d){xa();G=[];ba=k;za=xa();Fa=Q();if(Fa!==d){var Oa=xa();var Pa=u();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;if(ba!==d)for(;ba!==d;)G.push(ba),ba=k,za=xa(),Fa=Q(),Fa!==d?(Oa=xa(),Pa=u(),Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=ba,ba=d);else G=d;G!==d&&(G={type:"arithmetic",tail:G});G===d&&(G=k,ba=n(),ba!==d?(xa(),za=Ga(),za!==d?(xa(),za=r(),za!==d?(xa(),Fa=Ma(),Fa!==
d?G={op:ba,right:za}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d)):(k=G,G=d),G===d&&(G=k,ba=n(),ba!==d?(xa(),za=Ga(),za!==d?(xa(),za=Ma(),za!==d?G={op:ba,right:{type:"expression-list",value:[]}}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d),G===d&&(G=k,ba=n(),ba!==d?(xa(),za=X(),za!==d?G={op:ba,right:za}:(k=G,G=d)):(k=G,G=d))),G===d&&(G=k,Fa=ja(),Fa!==d?(xa(),ba=L(),ba!==d?(xa(),za=u(),za!==d?(xa(),Oa=qa(),Oa!==d?(xa(),Fa=u(),Fa!==d?G={op:"NOT"+ba,right:{type:"expression-list",value:[za,Fa]}}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d)):
(k=G,G=d)):(k=G,G=d),G===d&&(G=k,Fa=L(),Fa!==d?(xa(),ba=u(),ba!==d?(xa(),za=qa(),za!==d?(xa(),Oa=u(),Oa!==d?G={op:Fa,right:{type:"expression-list",value:[ba,Oa]}}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d)):(k=G,G=d)),G===d&&(G=k,ba=t(),ba!==d?(xa(),za=ja(),za!==d?(xa(),za=u(),za!==d?G={op:ba+"NOT",right:za}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d),G===d&&(G=k,ba=t(),ba!==d?(xa(),za=u(),za!==d?G={op:ba,right:za}:(k=G,G=d)):(k=G,G=d)),G===d&&(G=k,ba=S(),ba!==d?(xa(),za=v(),za!==d?(xa(),Fa=k,c.substr(k,6).toLowerCase()===
sa?(Oa=c.substr(k,6),k+=6):(Oa=d,0===Aa&&q(rd)),Oa!==d?(Oa=k,Aa++,Pa=M(),Aa--,Pa===d?Oa=void 0:(k=Oa,Oa=d),Oa!==d?Fa="ESCAPE":(k=Fa,Fa=d)):(k=Fa,Fa=d),Fa!==d?(xa(),Fa=D(),Fa!==d?G={op:ba,right:za,escape:Fa.value}:(k=G,G=d)):(k=G,G=d)):(k=G,G=d)):(k=G,G=d),G===d&&(G=k,ba=S(),ba!==d?(xa(),za=v(),za!==d?G={op:ba,right:za,escape:""}:(k=G,G=d)):(k=G,G=d))))));G===d&&(G=null);""==G||void 0==G||null==G?G=w:(ba=null,G=ba="arithmetic"==G.type?ab(w,G.tail):bb(G.op,w,G.right,G.escape))}else k=G,G=d;w=G}return w}
function Q(){if(c.substr(k,2)===Eb){var w=Eb;k+=2}else w=d,0===Aa&&q(sd);w===d&&(62===c.charCodeAt(k)?(w=ec,k++):(w=d,0===Aa&&q(td)),w===d&&(c.substr(k,2)===Fb?(w=Fb,k+=2):(w=d,0===Aa&&q(ud)),w===d&&(c.substr(k,2)===oa?(w=oa,k+=2):(w=d,0===Aa&&q(vd)),w===d&&(60===c.charCodeAt(k)?(w=fc,k++):(w=d,0===Aa&&q(wd)),w===d&&(61===c.charCodeAt(k)?(w=Za,k++):(w=d,0===Aa&&q(Qc)),w===d&&(c.substr(k,2)===Cb?(w=Cb,k+=2):(w=d,0===Aa&&q(xd))))))));return w}function S(){var w=w=k;var G=ja();if(G!==d){var ba=xa();
var za=ia();za!==d?w=G=[G,ba,za]:(k=w,w=d)}else k=w,w=d;w!==d&&(w=w[0]+" "+w[2]);w===d&&(w=ia());return w}function n(){var w=w=k;var G=ja();if(G!==d){var ba=xa();var za=e();za!==d?w=G=[G,ba,za]:(k=w,w=d)}else k=w,w=d;w!==d&&(w=w[0]+" "+w[2]);w===d&&(w=e());return w}function u(){var w=k;var G=U();if(G!==d){w=[];var ba=k;var za=xa();var Fa=F();if(Fa!==d){var Oa=xa();var Pa=U();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)w.push(ba),ba=k,za=xa(),Fa=F(),Fa!==d?(Oa=xa(),Pa=U(),Pa!==
d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=ba,ba=d);w=ab(G,w)}else k=w,w=d;return w}function F(){if(43===c.charCodeAt(k)){var w=hb;k++}else w=d,0===Aa&&q(Ac);w===d&&(45===c.charCodeAt(k)?(w=tb,k++):(w=d,0===Aa&&q(Bc)));return w}function U(){var w=k;var G=V();if(G!==d){w=[];var ba=k;var za=xa();var Fa=la();if(Fa!==d){var Oa=xa();var Pa=V();Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)}else k=ba,ba=d;for(;ba!==d;)w.push(ba),ba=k,za=xa(),Fa=la(),Fa!==d?(Oa=xa(),Pa=V(),Pa!==d?ba=za=[za,Fa,Oa,Pa]:(k=ba,ba=d)):(k=
ba,ba=d);w=ab(G,w)}else k=w,w=d;return w}function la(){if(42===c.charCodeAt(k)){var w=gc;k++}else w=d,0===Aa&&q(yd);w===d&&(47===c.charCodeAt(k)?(w=Tb,k++):(w=d,0===Aa&&q(zd)));return w}function V(){var w=D();if(w===d){var G=k;var ba=k;var za=ua();if(za!==d){var Fa=ya();if(Fa!==d){var Oa=La();Oa!==d?ba=parseFloat(za+Fa+Oa):(k=ba,ba=d)}else k=ba,ba=d}else k=ba,ba=d;ba===d&&(ba=k,za=ua(),za!==d?(Fa=ya(),Fa!==d?ba=parseFloat(za+Fa):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,za=ua(),za!==d?(Fa=La(),Fa!==
d?ba=parseFloat(za+Fa):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,za=ua(),za!==d&&(za=parseFloat(za)),ba=za)));var Pa=ba;if(Pa!==d){var hc=k;Aa++;var Ad=K();Aa--;Ad===d?hc=void 0:(k=hc,hc=d);hc!==d?G={type:"number",value:Pa}:(k=G,G=d)}else k=G,G=d;w=G;if(w===d){var Ub=k;var Hb=k;if(c.substr(k,4).toLowerCase()===Qa){var ic=c.substr(k,4);k+=4}else ic=d,0===Aa&&q(Bd);if(ic!==d){var Vb=k;Aa++;var Cd=M();Aa--;Cd===d?Vb=void 0:(k=Vb,Vb=d);Vb!==d?Hb=ic=[ic,Vb]:(k=Hb,Hb=d)}else k=Hb,Hb=d;var Gb=Hb;Gb!==d&&(Gb=
{type:"boolean",value:!0});Ub=Gb;if(Ub===d){Ub=k;var Ib=k;if(c.substr(k,5).toLowerCase()===Jb){var jc=c.substr(k,5);k+=5}else jc=d,0===Aa&&q(Dd);if(jc!==d){var Wb=k;Aa++;var Ed=M();Aa--;Ed===d?Wb=void 0:(k=Wb,Wb=d);Wb!==d?Ib=jc=[jc,Wb]:(k=Ib,Ib=d)}else k=Ib,Ib=d;Gb=Ib;Gb!==d&&(Gb={type:"boolean",value:!1});Ub=Gb}w=Ub;if(w===d){var Kb=k;if(c.substr(k,4).toLowerCase()===ub){var kc=c.substr(k,4);k+=4}else kc=d,0===Aa&&q(Fd);if(kc!==d){var Xb=k;Aa++;var Gd=M();Aa--;Gd===d?Xb=void 0:(k=Xb,Xb=d);Xb!==d?
Kb=kc=[kc,Xb]:(k=Kb,Kb=d)}else k=Kb,Kb=d;var Cc=Kb;Cc!==d&&(Cc={type:"null",value:null});w=Cc;if(w===d){var Lb=k;var Mb=k;if(c.substr(k,4).toLowerCase()===Hd){var Rc=c.substr(k,4);k+=4}else Rc=d,0===Aa&&q(Id);if(Rc!==d){var lc=k;Aa++;var Jd=M();Aa--;Jd===d?lc=void 0:(k=lc,lc=d);lc!==d?Mb="DATE":(k=Mb,Mb=d)}else k=Mb,Mb=d;if(Mb!==d){xa();var Sc=v();Sc!==d?Lb={type:"date",value:Sc.value}:(k=Lb,Lb=d)}else k=Lb,Lb=d;w=Lb;if(w===d){var Nb=k;var Ob=k;if(c.substr(k,9).toLowerCase()===Kd){var Tc=c.substr(k,
9);k+=9}else Tc=d,0===Aa&&q(Ld);if(Tc!==d){var mc=k;Aa++;var Md=M();Aa--;Md===d?mc=void 0:(k=mc,mc=d);mc!==d?Ob="TIMESTAMP":(k=Ob,Ob=d)}else k=Ob,Ob=d;if(Ob!==d){xa();var Uc=v();Uc!==d?Nb={type:"timestamp",value:Uc.value}:(k=Nb,Nb=d)}else k=Nb,Nb=d;w=Nb;if(w===d){var db=k;var Dc=ka();if(Dc!==d){xa();if(45===c.charCodeAt(k)){var xb=tb;k++}else xb=d,0===Aa&&q(Bc);xb===d&&(43===c.charCodeAt(k)?(xb=hb,k++):(xb=d,0===Aa&&q(Ac)));if(xb!==d){xa();var Yb=v();if(Yb!==d){xa();var Vc=ha();Vc!==d?db={type:"interval",
value:Yb,qualifier:Vc,op:xb}:(k=db,db=d)}else k=db,db=d}else k=db,db=d}else k=db,db=d;db===d&&(db=k,Dc=ka(),Dc!==d?(xa(),xb=v(),xb!==d?(xa(),Yb=ha(),Yb!==d?db={type:"interval",value:xb,qualifier:Yb,op:""}:(k=db,db=d)):(k=db,db=d)):(k=db,db=d));w=db}}}}}}var Xa=w;if(Xa===d){var jb=k;var Pb=k;if(c.substr(k,7).toLowerCase()===eb){var Wc=c.substr(k,7);k+=7}else Wc=d,0===Aa&&q(Nd);if(Wc!==d){var nc=k;Aa++;var Od=M();Aa--;Od===d?nc=void 0:(k=nc,nc=d);nc!==d?Pb="EXTRACT":(k=Pb,Pb=d)}else k=Pb,Pb=d;if(Pb!==
d){xa();var Pd=Ga();if(Pd!==d){xa();var qb=ma();qb===d&&(qb=ra(),qb===d&&(qb=va(),qb===d&&(qb=wa(),qb===d&&(qb=ca(),qb===d&&(qb=fa())))));var Xc=qb;if(Xc!==d){xa();var Qd=aa();if(Qd!==d){xa();var Yc=A();if(Yc!==d){xa();var Rd=Ma();Rd!==d?jb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Xc},Yc]}}:(k=jb,jb=d)}else k=jb,jb=d}else k=jb,jb=d}else k=jb,jb=d}else k=jb,jb=d}else k=jb,jb=d;Xa=jb;if(Xa===d){var kb=k;var Qb=k;if(c.substr(k,9).toLowerCase()===Ua){var Zc=
c.substr(k,9);k+=9}else Zc=d,0===Aa&&q(Sd);if(Zc!==d){var oc=k;Aa++;var Td=M();Aa--;Td===d?oc=void 0:(k=oc,oc=d);oc!==d?Qb="SUBSTRING":(k=Qb,Qb=d)}else k=Qb,Qb=d;if(Qb!==d){xa();var Ud=Ga();if(Ud!==d){xa();var Ec=A();if(Ec!==d){xa();var Vd=aa();if(Vd!==d){xa();var Fc=A();if(Fc!==d){xa();var yb=k;var Rb=k;if(c.substr(k,3).toLowerCase()===Va){var $c=c.substr(k,3);k+=3}else $c=d,0===Aa&&q(Wd);if($c!==d){var pc=k;Aa++;var Xd=M();Aa--;Xd===d?pc=void 0:(k=pc,pc=d);pc!==d?Rb="FOR":(k=Rb,Rb=d)}else k=Rb,
Rb=d;var Zb=Rb;if(Zb!==d){var Yd=xa();var ad=A();if(ad!==d){var Zd=xa();yb=Zb=[Zb,Yd,ad,Zd]}else k=yb,yb=d}else k=yb,yb=d;yb===d&&(yb=null);Zb=Ma();Zb!==d?kb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(k=kb,kb=d)}else k=kb,kb=d}else k=kb,kb=d}else k=kb,kb=d}else k=kb,kb=d}else k=kb,kb=d;Xa=kb;if(Xa===d){var $a=k;var Gc=Z();if(Gc!==d){xa();var Hc=Ga();if(Hc!==d){xa();var zb=I();zb===d&&(zb=null);xa();var $b=A();if($b!==d){xa();var Ic=aa();if(Ic!==
d){xa();var bd=A();if(bd!==d){xa();var $d=Ma();$d!==d?$a={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},$b,bd]}}:(k=$a,$a=d)}else k=$a,$a=d}else k=$a,$a=d}else k=$a,$a=d}else k=$a,$a=d}else k=$a,$a=d;$a===d&&($a=k,Gc=Z(),Gc!==d?(xa(),Hc=Ga(),Hc!==d?(xa(),zb=I(),zb===d&&(zb=null),xa(),$b=A(),$b!==d?(xa(),Ic=Ma(),Ic!==d?$a={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},$b]}}:(k=$a,$a=
d)):(k=$a,$a=d)):(k=$a,$a=d)):(k=$a,$a=d));Xa=$a;if(Xa===d){var lb=k;var Sb=k;if(c.substr(k,8).toLowerCase()===ae){var cd=c.substr(k,8);k+=8}else cd=d,0===Aa&&q(be);if(cd!==d){var qc=k;Aa++;var ce=M();Aa--;ce===d?qc=void 0:(k=qc,qc=d);qc!==d?Sb="POSITION":(k=Sb,Sb=d)}else k=Sb,Sb=d;if(Sb!==d){xa();var de=Ga();if(de!==d){xa();var dd=A();if(dd!==d){xa();var ee=e();if(ee!==d){xa();var ed=A();if(ed!==d){xa();var fe=Ma();fe!==d?lb={type:"function",name:"position",args:{type:"expression-list",value:[dd,
ed]}}:(k=lb,lb=d)}else k=lb,lb=d}else k=lb,lb=d}else k=lb,lb=d}else k=lb,lb=d}else k=lb,lb=d;Xa=lb;if(Xa===d){var Db=k;var rc;var rb=k;rb=rc=C();if(rb===d)if(rb=k,96===c.charCodeAt(k)?(rc=fd,k++):(rc=d,0===Aa&&q(gd)),rc!==d){var sc=[];if(hd.test(c.charAt(k))){var Ab=c.charAt(k);k++}else Ab=d,0===Aa&&q(id);if(Ab!==d)for(;Ab!==d;)sc.push(Ab),hd.test(c.charAt(k))?(Ab=c.charAt(k),k++):(Ab=d,0===Aa&&q(id));else sc=d;sc!==d?(96===c.charCodeAt(k)?(Ab=fd,k++):(Ab=d,0===Aa&&q(gd)),Ab!==d?rb=sc.join(""):(k=
rb,rb=d)):(k=rb,rb=d)}else k=rb,rb=d;var jd=rb;if(jd!==d){xa();var ge=Ga();if(ge!==d){xa();var tc=r();tc===d&&(tc=null);xa();var he=Ma();he!==d?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(k=Db,Db=d)}else k=Db,Db=d}else k=Db,Db=d;Xa=Db;if(Xa===d){var vb;var fb=k;var Jc=pa();if(Jc!==d){xa();var ac=A();if(ac!==d){xa();var bc=[];for(vb=f();vb!==d;)bc.push(vb),vb=f();vb=xa();var uc=Ba();uc!==d?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(k=
fb,fb=d)}else k=fb,fb=d}else k=fb,fb=d;if(fb===d)if(fb=k,Jc=pa(),Jc!==d)if(xa(),ac=A(),ac!==d){xa();bc=[];for(vb=f();vb!==d;)bc.push(vb),vb=f();vb=xa();uc=R();if(uc!==d){xa();var ie=Ba();ie!==d?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:(k=fb,fb=d)}else k=fb,fb=d}else k=fb,fb=d;else k=fb,fb=d;var Kc=fb;if(Kc===d){var wb;var ib=k;var Lc=pa();if(Lc!==d){xa();var cc=[];for(wb=y();wb!==d;)cc.push(wb),wb=y();wb=xa();var vc=Ba();vc!==d?ib={type:"case-expression",format:"searched",
clauses:cc,else:null}:(k=ib,ib=d)}else k=ib,ib=d;if(ib===d)if(ib=k,Lc=pa(),Lc!==d){xa();cc=[];for(wb=y();wb!==d;)cc.push(wb),wb=y();wb=xa();vc=R();if(vc!==d){xa();var je=Ba();je!==d?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(k=ib,ib=d)}else k=ib,ib=d}else k=ib,ib=d;Kc=ib}Xa=Kc;if(Xa===d){var wc;var xc=k;var kd=K();if(kd!==d){var ld=[];for(wc=P();wc!==d;)ld.push(wc),wc=P();xc=kd+ld.join("")}else k=xc,xc=d;var yc=xc;if(yc!==d){var Mc=yc;yc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",
mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Xa=yc;if(Xa===d&&(Xa=X(),Xa===d)){Xa=k;var ke=Ga();if(ke!==d){xa();var Nc=A();if(Nc!==d){xa();var le=Ma();le!==d?(Nc.paren=!0,Xa=Nc):(k=Xa,Xa=d)}else k=Xa,Xa=d}else k=Xa,Xa=d}}}}}}}}return Xa}function C(){var w;var G=k;var ba=K();if(ba!==d){G=[];for(w=M();w!==d;)G.push(w),w=M();G=ba+G.join("")}else k=G,G=d;return G}function K(){if(me.test(c.charAt(k))){var w=c.charAt(k);
k++}else w=d,0===Aa&&q(ne);return w}function M(){if(oe.test(c.charAt(k))){var w=c.charAt(k);k++}else w=d,0===Aa&&q(pe);return w}function P(){if(qe.test(c.charAt(k))){var w=c.charAt(k);k++}else w=d,0===Aa&&q(re);return w}function X(){var w=k;if(64===c.charCodeAt(k)){var G=Oc;k++}else G=d,0===Aa&&q(se);if(G!==d){var ba=C();ba!==d?w=G=[G,ba]:(k=w,w=d)}else k=w,w=d;w!==d&&(w={type:"parameter",value:w[1]});return w}function I(){var w=k;if(c.substr(k,7).toLowerCase()===te){var G=c.substr(k,7);k+=7}else G=
d,0===Aa&&q(ue);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="LEADING":(k=w,w=d)}else k=w,w=d;w===d&&(w=k,c.substr(k,8).toLowerCase()===ve?(G=c.substr(k,8),k+=8):(G=d,0===Aa&&q(we)),G!==d?(G=k,Aa++,ba=M(),Aa--,ba===d?G=void 0:(k=G,G=d),G!==d?w="TRAILING":(k=w,w=d)):(k=w,w=d),w===d&&(w=k,c.substr(k,4).toLowerCase()===xe?(G=c.substr(k,4),k+=4):(G=d,0===Aa&&q(ye)),G!==d?(G=k,Aa++,ba=M(),Aa--,ba===d?G=void 0:(k=G,G=d),G!==d?w="BOTH":(k=w,w=d)):(k=w,w=d)));return w}function ha(){var w=
k;var G=k;var ba=na();if(ba!==d){xa();var za=Ga();if(za!==d)if(xa(),za=da(),za!==d){xa();var Fa=Ma();Fa!==d?G={type:"interval-period",period:ba.value,precision:za,secondary:null}:(k=G,G=d)}else k=G,G=d;else k=G,G=d}else k=G,G=d;G===d&&(G=k,ba=na(),ba!==d&&(ba={type:"interval-period",period:ba.value,precision:null,secondary:null}),G=ba);if(G!==d)if(xa(),ba=k,c.substr(k,2).toLowerCase()===ze?(za=c.substr(k,2),k+=2):(za=d,0===Aa&&q(Ae)),za!==d?(za=k,Aa++,Fa=M(),Aa--,Fa===d?za=void 0:(k=za,za=d),za!==
d?ba="TO":(k=ba,ba=d)):(k=ba,ba=d),ba!==d){xa();ba=k;za=na();za!==d&&(za={type:"interval-period",period:za.value,precision:null,secondary:null});ba=za;if(ba===d){ba=k;za=fa();if(za!==d)if(xa(),za=Ga(),za!==d)if(xa(),za=da(),za!==d)if(xa(),Fa=Ia(),Fa!==d)if(xa(),Fa=ta(),Fa!==d){xa();var Oa=Ma();Oa!==d?ba={type:"interval-period",period:"second",precision:za,secondary:Fa}:(k=ba,ba=d)}else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;else k=ba,ba=d;ba===d&&(ba=k,za=fa(),za!==d?(xa(),za=Ga(),
za!==d?(xa(),za=da(),za!==d?(xa(),Fa=Ma(),Fa!==d?ba={type:"interval-period",period:"second",precision:za,secondary:null}:(k=ba,ba=d)):(k=ba,ba=d)):(k=ba,ba=d)):(k=ba,ba=d),ba===d&&(ba=k,za=fa(),za!==d&&(za={type:"interval-period",period:"second",precision:null,secondary:null}),ba=za))}ba!==d?w={type:"interval-qualifier",start:G,end:ba}:(k=w,w=d)}else k=w,w=d;else k=w,w=d;w===d&&(w=k,ba=na(),ba!==d?(xa(),G=Ga(),G!==d?(xa(),G=ta(),G!==d?(xa(),za=Ma(),za!==d?w={type:"interval-period",period:ba.value,
precision:G,secondary:null}:(k=w,w=d)):(k=w,w=d)):(k=w,w=d)):(k=w,w=d),w===d&&(w=k,ba=na(),ba!==d&&(ba={type:"interval-period",period:ba.value,precision:null,secondary:null}),w=ba,w===d&&(w=k,ba=fa(),ba!==d?(xa(),G=Ga(),G!==d?(xa(),G=da(),G!==d?(xa(),za=Ia(),za!==d?(xa(),ba=ta(),ba!==d?(xa(),za=Ma(),za!==d?w={type:"interval-period",period:"second",precision:G,secondary:ba}:(k=w,w=d)):(k=w,w=d)):(k=w,w=d)):(k=w,w=d)):(k=w,w=d)):(k=w,w=d),w===d&&(w=k,ba=fa(),ba!==d?(xa(),G=Ga(),G!==d?(xa(),G=ta(),G!==
d?(xa(),za=Ma(),za!==d?w={type:"interval-period",period:"second",precision:G,secondary:null}:(k=w,w=d)):(k=w,w=d)):(k=w,w=d)):(k=w,w=d),w===d&&(w=k,ba=fa(),ba!==d&&(ba={type:"interval-period",period:"second",precision:null,secondary:null}),w=ba)))));return w}function na(){var w=k;w=va();w!==d&&(w={type:"string",value:"day"});w===d&&(w=k,w=wa(),w!==d&&(w={type:"string",value:"hour"}),w===d&&(w=k,w=ca(),w!==d&&(w={type:"string",value:"minute"}),w===d&&(w=k,w=ra(),w!==d&&(w={type:"string",value:"month"}),
w===d&&(w=k,w=ma(),w!==d&&(w={type:"string",value:"year"})))));return w}function ta(){var w=Ka();w!==d&&(w=parseFloat(w));return w}function da(){var w=Ka();w!==d&&(w=parseFloat(w));return w}function v(){var w=D();w===d&&(w=X());return w}function D(){var w=k;if(39===c.charCodeAt(k)){var G=mb;k++}else G=d,0===Aa&&q(md);G===d&&(c.substr(k,2)===Bb?(G=Bb,k+=2):(G=d,0===Aa&&q(Be)));if(G!==d){G=[];var ba=k;c.substr(k,2)===Sa?(ba=Sa,k+=2):(ba=d,0===Aa&&q(nd));ba!==d&&(ba="'");ba===d&&(od.test(c.charAt(k))?
(ba=c.charAt(k),k++):(ba=d,0===Aa&&q(pd)));for(;ba!==d;)G.push(ba),ba=k,c.substr(k,2)===Sa?(ba=Sa,k+=2):(ba=d,0===Aa&&q(nd)),ba!==d&&(ba="'"),ba===d&&(od.test(c.charAt(k))?(ba=c.charAt(k),k++):(ba=d,0===Aa&&q(pd)));39===c.charCodeAt(k)?(ba=mb,k++):(ba=d,0===Aa&&q(md));ba!==d?w={type:"string",value:G.join("")}:(k=w,w=d)}else k=w,w=d;return w}function y(){var w=k;if(Ea()!==d){xa();var G=A();if(G!==d){xa();var ba=Ha();ba!==d?(xa(),ba=A(),ba!==d?w={type:"when-clause",operand:G,value:ba}:(k=w,w=d)):(k=
w,w=d)}else k=w,w=d}else k=w,w=d;return w}function f(){var w=k;if(Ea()!==d){xa();var G=A();if(G!==d){xa();var ba=Ha();ba!==d?(xa(),ba=A(),ba!==d?w={type:"when-clause",operand:G,value:ba}:(k=w,w=d)):(k=w,w=d)}else k=w,w=d}else k=w,w=d;return w}function R(){var w=k;var G=k;if(c.substr(k,4).toLowerCase()===Ce){var ba=c.substr(k,4);k+=4}else ba=d,0===Aa&&q(De);if(ba!==d){ba=k;Aa++;var za=M();Aa--;za===d?ba=void 0:(k=ba,ba=d);ba!==d?G="ELSE":(k=G,G=d)}else k=G,G=d;G!==d?(xa(),G=A(),G!==d?w={type:"else-clause",
value:G}:(k=w,w=d)):(k=w,w=d);return w}function ua(){var w=Ka();if(w===d){w=k;if(45===c.charCodeAt(k)){var G=tb;k++}else G=d,0===Aa&&q(Bc);G===d&&(43===c.charCodeAt(k)?(G=hb,k++):(G=d,0===Aa&&q(Ac)));if(G!==d){var ba=Ka();ba!==d?w=G[0]+ba:(k=w,w=d)}else k=w,w=d}return w}function ya(){var w=k;if(46===c.charCodeAt(k)){var G=ob;k++}else G=d,0===Aa&&q(Ee);G!==d?(w=Ka(),w===d&&(w=null),w="."+(null!=w?w:"")):(k=w,w=d);return w}function La(){var w;var G=w=k;if(Fe.test(c.charAt(k))){var ba=c.charAt(k);k++}else ba=
d,0===Aa&&q(Ge);ba!==d?(He.test(c.charAt(k))?(G=c.charAt(k),k++):(G=d,0===Aa&&q(Ie)),G===d&&(G=null),G="e"+(null===G?"":G)):(k=G,G=d);G!==d?(ba=Ka(),ba!==d?w=G+ba:(k=w,w=d)):(k=w,w=d);return w}function Ka(){var w=[];var G=Ra();if(G!==d)for(;G!==d;)w.push(G),G=Ra();else w=d;w!==d&&(w=w.join(""));return w}function Ra(){if(Je.test(c.charAt(k))){var w=c.charAt(k);k++}else w=d,0===Aa&&q(Ke);return w}function e(){var w=k;if(c.substr(k,2).toLowerCase()===W){var G=c.substr(k,2);k+=2}else G=d,0===Aa&&q(Le);
if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="IN":(k=w,w=d)}else k=w,w=d;return w}function t(){var w=k;if(c.substr(k,2).toLowerCase()===ea){var G=c.substr(k,2);k+=2}else G=d,0===Aa&&q(Me);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="IS":(k=w,w=d)}else k=w,w=d;return w}function ia(){var w=k;if(c.substr(k,4).toLowerCase()===Y){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(Ne);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="LIKE":(k=
w,w=d)}else k=w,w=d;return w}function ja(){var w=k;if(c.substr(k,3).toLowerCase()===Ca){var G=c.substr(k,3);k+=3}else G=d,0===Aa&&q(Oe);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="NOT":(k=w,w=d)}else k=w,w=d;return w}function qa(){var w=k;if(c.substr(k,3).toLowerCase()===Da){var G=c.substr(k,3);k+=3}else G=d,0===Aa&&q(Pe);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="AND":(k=w,w=d)}else k=w,w=d;return w}function z(){var w=k;if(c.substr(k,2).toLowerCase()===
Ja){var G=c.substr(k,2);k+=2}else G=d,0===Aa&&q(Qe);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="OR":(k=w,w=d)}else k=w,w=d;return w}function L(){var w=k;if(c.substr(k,7).toLowerCase()===Na){var G=c.substr(k,7);k+=7}else G=d,0===Aa&&q(Re);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="BETWEEN":(k=w,w=d)}else k=w,w=d;return w}function aa(){var w=k;if(c.substr(k,4).toLowerCase()===Ya){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(Se);if(G!==d){G=k;Aa++;
var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="FROM":(k=w,w=d)}else k=w,w=d;return w}function Z(){var w=k;if(c.substr(k,4).toLowerCase()===pb){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(Te);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="TRIM":(k=w,w=d)}else k=w,w=d;return w}function ka(){var w=k;if(c.substr(k,8).toLowerCase()===Ue){var G=c.substr(k,8);k+=8}else G=d,0===Aa&&q(Ve);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="INTERVAL":(k=w,w=d)}else k=
w,w=d;return w}function ma(){var w=k;if(c.substr(k,4).toLowerCase()===We){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(Xe);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="YEAR":(k=w,w=d)}else k=w,w=d;return w}function ra(){var w=k;if(c.substr(k,5).toLowerCase()===Ye){var G=c.substr(k,5);k+=5}else G=d,0===Aa&&q(Ze);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="MONTH":(k=w,w=d)}else k=w,w=d;return w}function va(){var w=k;if(c.substr(k,3).toLowerCase()===
$e){var G=c.substr(k,3);k+=3}else G=d,0===Aa&&q(af);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="DAY":(k=w,w=d)}else k=w,w=d;return w}function wa(){var w=k;if(c.substr(k,4).toLowerCase()===bf){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(cf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="HOUR":(k=w,w=d)}else k=w,w=d;return w}function ca(){var w=k;if(c.substr(k,6).toLowerCase()===df){var G=c.substr(k,6);k+=6}else G=d,0===Aa&&q(ef);if(G!==d){G=k;Aa++;var ba=
M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="MINUTE":(k=w,w=d)}else k=w,w=d;return w}function fa(){var w=k;if(c.substr(k,6).toLowerCase()===ff){var G=c.substr(k,6);k+=6}else G=d,0===Aa&&q(gf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="SECOND":(k=w,w=d)}else k=w,w=d;return w}function pa(){var w=k;if(c.substr(k,4).toLowerCase()===hf){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(jf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="CASE":(k=w,w=d)}else k=
w,w=d;return w}function Ba(){var w=k;if(c.substr(k,3).toLowerCase()===kf){var G=c.substr(k,3);k+=3}else G=d,0===Aa&&q(lf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="END":(k=w,w=d)}else k=w,w=d;return w}function Ea(){var w=k;if(c.substr(k,4).toLowerCase()===mf){var G=c.substr(k,4);k+=4}else G=d,0===Aa&&q(nf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="WHEN":(k=w,w=d)}else k=w,w=d;return w}function Ha(){var w=k;if(c.substr(k,4).toLowerCase()===of){var G=
c.substr(k,4);k+=4}else G=d,0===Aa&&q(pf);if(G!==d){G=k;Aa++;var ba=M();Aa--;ba===d?G=void 0:(k=G,G=d);G!==d?w="THEN":(k=w,w=d)}else k=w,w=d;return w}function Ia(){if(44===c.charCodeAt(k)){var w=qf;k++}else w=d,0===Aa&&q(rf);return w}function Ga(){if(40===c.charCodeAt(k)){var w=sf;k++}else w=d,0===Aa&&q(tf);return w}function Ma(){if(41===c.charCodeAt(k)){var w=uf;k++}else w=d,0===Aa&&q(vf);return w}function xa(){var w;var G=[];for(w=Wa();w!==d;)G.push(w),w=Wa();return G}function Wa(){if(wf.test(c.charAt(k))){var w=
c.charAt(k);k++}else w=d,0===Aa&&q(xf);return w}function bb(w,G,ba,za){w={type:"binary-expression",operator:w,left:G,right:ba};void 0!==za&&(w.escape=za);return w}function ab(w,G){for(var ba=0;ba<G.length;ba++)w=bb(G[ba][1],w,G[ba][3]);return w}g=void 0!==g?g:{};var d={},cb=g.grammarSource,Ta={start:B},gb=B,nb="!",Za="\x3d",Eb="\x3e\x3d",ec="\x3e",Fb="\x3c\x3d",oa="\x3c\x3e",fc="\x3c",Cb="!\x3d",hb="+",tb="-",gc="*",Tb="/",Oc="@",mb="'",Bb="N'",Sa="''",ob=".",ub="null",Qa="true",Jb="false",W="in",
ea="is",Y="like",sa="escape",Ca="not",Da="and",Ja="or",Na="between",Ya="from",Va="for",Ua="substring",eb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te="leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf="case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,
hd=/^[^`]/,qd=m("!",!1),Qc=m("\x3d",!1),sd=m("\x3e\x3d",!1),td=m("\x3e",!1),ud=m("\x3c\x3d",!1),vd=m("\x3c\x3e",!1),wd=m("\x3c",!1),xd=m("!\x3d",!1),Ac=m("+",!1),Bc=m("-",!1),yd=m("*",!1),zd=m("/",!1),ne=E([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=E([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),re=E([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=m("@",!1),md=m("'",!1),Be=m("N'",!1),nd=m("''",!1),pd=E(["'"],!0,!1),Ee=m(".",!1),Ke=E([["0","9"]],!1,!1),Ge=E(["e","E"],
!1,!1),Ie=E(["+","-"],!1,!1),Fd=m("NULL",!0),Bd=m("TRUE",!0),Dd=m("FALSE",!0),Le=m("IN",!0),Me=m("IS",!0),Ne=m("LIKE",!0),rd=m("ESCAPE",!0),Oe=m("NOT",!0),Pe=m("AND",!0),Qe=m("OR",!0),Re=m("BETWEEN",!0),Se=m("FROM",!0),Wd=m("FOR",!0),Sd=m("SUBSTRING",!0),Nd=m("EXTRACT",!0),Te=m("TRIM",!0),be=m("POSITION",!0),Ld=m("TIMESTAMP",!0),Id=m("DATE",!0),ue=m("LEADING",!0),we=m("TRAILING",!0),ye=m("BOTH",!0),Ae=m("TO",!0),Ve=m("INTERVAL",!0),Xe=m("YEAR",!0),Ze=m("MONTH",!0),af=m("DAY",!0),cf=m("HOUR",!0),ef=
m("MINUTE",!0),gf=m("SECOND",!0),jf=m("CASE",!0),lf=m("END",!0),nf=m("WHEN",!0),pf=m("THEN",!0),De=m("ELSE",!0),rf=m(",",!1),tf=m("(",!1),vf=m(")",!1),xf=E([" ","\t","\n","\r"],!1,!1),gd=m("`",!1),id=E(["`"],!0,!1),k=0,dc=[{line:1,column:1}],sb=0,zc=[],Aa=0;if("startRule"in g){if(!(g.startRule in Ta))throw Error("Can't start parsing from rule \""+g.startRule+'".');gb=Ta[g.startRule]}var Pc=gb();if(Pc!==d&&k===c.length)return Pc;Pc!==d&&k<c.length&&q({type:"end"});throw function(w,G,ba){return new l(l.buildMessage(w,
G),w,G,ba)}(zc,sb<c.length?c.charAt(sb):null,sb<c.length?J(sb,sb+1):J(sb,sb));}}})})(T);let x=function(){function p(){}p.parse=function(l){return T.exports.parse(l)};return p}();a.WhereGrammar=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(a){a.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==
typeof self?self:{};a.commonjsRequire=function(b){throw Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};a.getDefaultExportFromCjs=function(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b["default"]:b}})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],
function(a,b,T){function x(n){return null==n||"string"===typeof n&&!n?"\x3cNull\x3e":n}function p(n){const u=null!=n.minValue||null!=n.maxValue,F=!!n.sqlExpression&&n.supportsSQLExpression;return!(null!=n.normalizationField||null!=n.normalizationType)&&!u&&!F}function l(n){const {values:u,useSampleStdDev:F,supportsNullCount:U}=n;var la=Number.POSITIVE_INFINITY;let V=Number.NEGATIVE_INFINITY,C=null,K=null;var M=null;let P=null,X=0;const I=null==n.minValue?-Infinity:n.minValue,ha=null==n.maxValue?Infinity:
n.maxValue;for(const na of u)Number.isFinite(na)?na>=I&&na<=ha&&(C+=na,la=Math.min(la,na),V=Math.max(V,na),X++):"string"===typeof na&&X++;if(X&&null!=C){K=C/X;M=0;for(const na of u)Number.isFinite(na)&&na>=I&&na<=ha&&(M+=(na-K)**2);P=F?1<X?M/(X-1):0:0<X?M/X:0;M=Math.sqrt(P)}else V=la=null;la={avg:K,count:X,max:V,min:la,stddev:M,sum:C,variance:P};U&&(la.nullcount=u.length-X);n.percentileParams&&(la.median=h(u,n.percentileParams));return la}function h(n,u){const {fieldType:F,value:U,orderBy:la,isDiscrete:V}=
u,C=c(F,"desc"===la);n=[...n].filter(X=>null!=X).sort((X,I)=>C(X,I));if(0===n.length)return null;if(0>=U)return n[0];if(1<=U)return n[n.length-1];var K=(n.length-1)*U,M=Math.floor(K);u=M+1;K%=1;M=n[M];const P=n[u];return u>=n.length||V||"string"===typeof M||"string"===typeof P?M:M*(1-K)+P*K}function c(n,u){const F=u?1:-1,U=m(u),la=g(u);if(!n||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...Q].includes(n))return(V,C)=>"number"===typeof V&&"number"===typeof C?
U(V,C):"string"===typeof V&&"string"===typeof C?la(V,C):F;if("esriFieldTypeDate"===n)return(V,C)=>{V=(new Date(V)).getTime();C=(new Date(C)).getTime();return isNaN(V)||isNaN(C)?F:U(V,C)};if(Q.has(n))return(V,C)=>U(V,C);if("esriFieldTypeString"===n)return(V,C)=>la(V,C);if("esriFieldTypeGUID"===n||"esriFieldTypeGlobalID"===n){const V=g(u);return(C,K)=>V(E(C),E(K))}return u?(V,C)=>1:(V,C)=>-1}function g(n){return n?(u,F)=>{u=u?.toUpperCase();F=F?.toUpperCase();return u>F?-1:u<F?1:0}:(u,F)=>{u=u?.toUpperCase();
F=F?.toUpperCase();return u<F?-1:u>F?1:0}}function m(n){return n?(u,F)=>F-u:(u,F)=>u-F}function E(n){return n.substr(24,12)+n.substr(19,4)+n.substr(16,2)+n.substr(14,2)+n.substr(11,2)+n.substr(9,2)+n.substr(6,2)+n.substr(4,2)+n.substr(2,2)+n.substr(0,2)}function N(n){return"coded-value"!==n?.type?[]:n.codedValues.map(u=>u.code)}function J(n,u){const F=B({field:u.field,normalizationType:u.normalizationType,normalizationField:u.normalizationField,classificationMethod:u.classificationMethod,standardDeviationInterval:u.standardDeviationInterval,
breakCount:u.numClasses||5});n=q(n,u.minValue,u.maxValue);return T.createGenerateRendererClassBreaks({definition:F,values:n,normalizationTotal:u.normalizationTotal})}function q(n,u,F){u=null==u?-Infinity:u;F=null==F?Infinity:F;return n.filter(U=>Number.isFinite(U)&&U>=u&&U<=F)}function B(n){const u=n.field,F=n.classificationMethod||"equal-interval",U=n.normalizationType,la=n.normalizationField,V=new b;V.classificationField=u;V.breakCount=n.breakCount;V.classificationMethod=F;V.standardDeviationInterval=
"standard-deviation"===F?n.standardDeviationInterval||1:void 0;V.normalizationType=U;V.normalizationField="field"===U?la:void 0;return V}function r(n,u){const {field:F,classificationMethod:U,standardDeviationInterval:la,normalizationType:V,normalizationField:C,normalizationTotal:K,minValue:M,maxValue:P}=u,X=u.numBins||10;let I=u=null,ha=null;U&&"equal-interval"!==U||V?({classBreaks:n}=J(n,{field:F,normalizationType:V,normalizationField:C,normalizationTotal:K,classificationMethod:U,standardDeviationInterval:la,
minValue:M,maxValue:P,numClasses:X}),u=n[0].minValue,I=n[n.length-1].maxValue,ha=n.map(na=>[na.minValue,na.maxValue])):(null!=M&&null!=P?(u=M,I=P):(n=l({values:n,minValue:M,maxValue:P,useSampleStdDev:!V,supportsNullCount:p({normalizationType:V,normalizationField:C,minValue:M,maxValue:P})}),u=n.min,I=n.max),ha=H(u,I,X));return{min:u,max:I,intervals:ha}}function A(n,u){let F=-1;for(let U=n.length-1;0<=U;U--)if(u>=n[U][0]){F=U;break}return F}function H(n,u,F){const U=(u-n)/F,la=[];let V;for(let C=1;C<=
F;C++)V=n+U,V=Number(V.toFixed(16)),la.push([n,C===F?u:V]),n=V;return la}const O=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,Q=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),S="min max avg stddev count sum variance nullcount median".split(" ");a.calculateClassBreaks=J;a.calculateHistogram=function(n,u){const {min:F,max:U,intervals:la}=r(n,u),V=la.map((C,K)=>({minValue:la[K][0],maxValue:la[K][1],count:0}));for(const C of n)null!=C&&C>=F&&C<=U&&
(n=A(la,C),-1<n&&V[n].count++);return{bins:V,minValue:F,maxValue:U,normalizationTotal:u.normalizationTotal}};a.calculatePercentile=h;a.calculateStatistics=l;a.calculateStringStatistics=function(n){const u=n.returnDistinct?[...(new Set(n.values))]:n.values,F=u.filter(la=>null!=la).length,U={count:F};n.supportsNullCount&&(U.nullcount=u.length-F);n.percentileParams&&(U.median=h(u,n.percentileParams));return U};a.calculateUniqueValuesCount=function(n){const u={};for(let F of n){if(null==F||"string"===
typeof F&&""===F.trim())F=null;null==u[F]?u[F]={count:1,data:F}:u[F].count++}return{count:u}};a.createClassBreaksDefinition=B;a.createUVResult=function(n,u,F,U){n=n.count;const la=[];if(F&&u){F=[];var V=N(u[0]);for(const C of V)if(u[1]){V=N(u[1]);for(const K of V)if(u[2]){V=N(u[2]);for(const M of V)F.push(`${x(C)}${U}${x(K)}${U}${x(M)}`)}else F.push(`${x(C)}${U}${x(K)}`)}else F.push(C);for(const C of F)n.hasOwnProperty(C)||(n[C]={data:C,count:0})}for(const C in n)u=n[C],la.push({value:u.data,count:u.count,
label:u.label});return{uniqueValueInfos:la}};a.getAttributeComparator=c;a.getEqualIntervalBins=H;a.getNormalizedValue=function(n,u,F,U){let la=null;switch(u){case "log":0!==n&&(la=Math.log(n)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(U)&&0!==U&&(la=n/U*100);break;case "field":Number.isFinite(F)&&0!==F&&(la=n/F);break;case "natural-log":0<n&&(la=Math.log(n));break;case "square-root":0<n&&(la=n**.5)}return la};a.isNullCountSupported=p;a.processNullValue=x;a.processSummaryStatisticsResult=
function(n,u){let F;for(F in n)S.includes(F)&&(Number.isFinite(n[F])||(n[F]=null));if(!u)return n;["avg","stddev","variance"].forEach(U=>{null!=n[U]&&(n[U]=Math.ceil(n[U]))});return n};a.resolveCBResult=function(n,u){let F=n.classBreaks;const U=F[0].minValue,la=F[F.length-1].maxValue,V="standard-deviation"===u;F=F.map(C=>{const K=C.label;C={minValue:C.minValue,maxValue:C.maxValue,label:K};if(V&&K){const M=K.match(O).map(P=>+P.trim());2===M.length?(C.minStdDev=M[0],C.maxStdDev=M[1],0>M[0]&&0<M[1]&&
(C.hasAvg=!0)):1===M.length&&(K.includes("\x3c")?(C.minStdDev=null,C.maxStdDev=M[0]):K.includes("\x3e")&&(C.minStdDev=M[0],C.maxStdDev=null))}return C});return{minValue:U,maxValue:la,classBreakInfos:F,normalizationTotal:n.normalizationTotal}};a.statisticTypes=S;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),
function(a,b,T,x,p,l,h,c){p=new T.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});T=new T.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});c=function(g){function m(){var E=g.apply(this,arguments)||this;E.breakCount=null;E.classificationField=
null;E.classificationMethod=null;E.normalizationField=null;E.normalizationType=null;E.type="class-breaks-definition";return E}a._inheritsLoose(m,g);a._createClass(m,[{key:"standardDeviationInterval",set:function(E){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",E)}},{key:"definedInterval",set:function(E){"defined-interval"===this.classificationMethod&&this._set("definedInterval",E)}}]);return m}(c);b.__decorate([x.property({json:{write:!0}})],c.prototype,"breakCount",
void 0);b.__decorate([x.property({json:{write:!0}})],c.prototype,"classificationField",void 0);b.__decorate([x.property({type:String,json:{read:p.read,write:p.write}})],c.prototype,"classificationMethod",void 0);b.__decorate([x.property({json:{write:!0}})],c.prototype,"normalizationField",void 0);b.__decorate([x.property({json:{read:T.read,write:T.write}})],c.prototype,"normalizationType",void 0);b.__decorate([x.property({value:null,json:{write:!0}})],c.prototype,"standardDeviationInterval",null);
b.__decorate([x.property({value:null,json:{write:!0}})],c.prototype,"definedInterval",null);b.__decorate([x.property()],c.prototype,"type",void 0);return c=b.__decorate([h.subclass("esri.rest.support.ClassBreaksDefinition")],c)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(a,b,T,x,p,l,h,c,g,m){T=new T.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});x=function(E){function N(){var J=E.apply(this,arguments)||this;J.baseSymbol=null;J.colorRamp=null;J.type=null;return J}a._inheritsLoose(N,E);return N}(x.JSONSupport);b.__decorate([p.property({type:m,json:{write:!0}})],x.prototype,"baseSymbol",void 0);b.__decorate([p.property({types:g.types,json:{read:{reader:g.fromJSON},write:!0}})],x.prototype,"colorRamp",void 0);b.__decorate([p.property({json:{read:T.read,
write:T.write}})],x.prototype,"type",void 0);return x=b.__decorate([c.subclass("esri.rest.support.ClassificationDefinition")],x)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(a,b,T,x){T={key:"type",base:T,typeMap:{algorithmic:b,multipart:x}};a.fromJSON=function(p){return p&&p.type?"algorithmic"===p.type?b.fromJSON(p):"multipart"===p.type?x.fromJSON(p):null:null};a.types=T;Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(a,b,T,x,p,l,h,c,g){var m;g=m=function(E){function N(J){J=E.call(this,J)||this;J.algorithm=null;
J.fromColor=null;J.toColor=null;J.type="algorithmic";return J}a._inheritsLoose(N,E);N.prototype.clone=function(){return new m({fromColor:x.clone(this.fromColor),toColor:x.clone(this.toColor),algorithm:this.algorithm})};return N}(g);b.__decorate([h.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],g.prototype,"algorithm",void 0);b.__decorate([p.property({type:T,json:{type:[l.Integer],write:!0}})],g.prototype,"fromColor",void 0);b.__decorate([p.property({type:T,
json:{type:[l.Integer],write:!0}})],g.prototype,"toColor",void 0);b.__decorate([p.property({type:["algorithmic"]})],g.prototype,"type",void 0);return g=m=b.__decorate([c.subclass("esri.rest.support.AlgorithmicColorRamp")],g)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(a,b,T){a.enumeration=function(x,p={}){x=x instanceof b.JSONMap?x:new b.JSONMap(x,p);x={type:p?.ignoreUnknown??!0?x.apiValues:String,json:{type:x.jsonValues,
read:p?.readOnly?!1:{reader:x.read},write:{writer:x.write}}};void 0!==p?.readOnly&&(x.readOnly=!!p.readOnly);void 0!==p?.default&&(x.json.default=p.default);void 0!==p?.name&&(x.json.name=p.name);return T.property(x)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,T,x,p,l,h){T=function(c){function g(m){m=c.call(this,m)||this;m.type=null;return m}a._inheritsLoose(g,c);return g}(T.JSONSupport);b.__decorate([x.property({readOnly:!0,json:{read:!1,write:!0}})],T.prototype,"type",void 0);return T=b.__decorate([h.subclass("esri.rest.support.ColorRamp")],T)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(a,b,T,x,p,l,h,c){var g;p=g=function(m){function E(N){N=m.call(this,N)||this;N.colorRamps=null;N.type="multipart";return N}a._inheritsLoose(E,m);E.prototype.clone=function(){return new g({colorRamps:T.clone(this.colorRamps)})};return E}(c);b.__decorate([x.property({type:[h],json:{write:!0}})],p.prototype,"colorRamps",void 0);b.__decorate([x.property({type:["multipart"]})],p.prototype,"type",void 0);return p=g=b.__decorate([l.subclass("esri.rest.support.MultipartColorRamp")],p)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(a,b,T,x,p,l,h,c,g,m){x=new x.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let E=0;p=function(N){function J(B){B=N.call(this,B)||this;B.id=`sym${E++}`;B.type=null;B.color=new T([0,0,0,1]);return B}
a._inheritsLoose(J,N);var q=J.prototype;q.readColor=function(B){return B&&null!=B[0]?[B[0],B[1],B[2],B[3]/255]:B};q.collectRequiredFields=function(){var B=a._asyncToGenerator(function*(r,A){});return function(r,A){return B.apply(this,arguments)}}();q.hash=function(){return JSON.stringify(this.toJSON())};q.clone=function(){};return J}(p.JSONSupport);b.__decorate([l.property({type:x.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:x.write}}})],p.prototype,"type",void 0);b.__decorate([l.property({type:T,
json:{write:{allowNull:!0}}})],p.prototype,"color",void 0);b.__decorate([g.reader("color")],p.prototype,"readColor",null);return p=b.__decorate([m.subclass("esri.symbols.Symbol")],p)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(a,b){function T(J){const {classificationMethod:q,breakCount:B,normalizationType:r,definedInterval:A}=J.definition,H=[];var O=J.values;if(0===O.length)return[];O=O.sort((U,la)=>U-la);var Q=O[0],S=O[O.length-1];if("equal-interval"===
q)if(O.length>=B){O=(S-Q)/B;J=Q;for(var n=1;n<B;n++){var u=Number((Q+n*O).toFixed(6));H.push({minValue:J,maxValue:u,label:x(J,u,r)});J=u}H.push({minValue:J,maxValue:S,label:x(J,S,r)})}else O.forEach(U=>{H.push({minValue:U,maxValue:U,label:x(U,U,r)})});else if("natural-breaks"===q){O=p(O);J=l(O.uniqueValues,J.valueFrequency||O.valueFrequency,B);for(n=1;n<B;n++)O.uniqueValues.length>n&&(u=Number(O.uniqueValues[J[n]].toFixed(6)),H.push({minValue:Q,maxValue:u,label:x(Q,u,r)}),Q=u);H.push({minValue:Q,
maxValue:S,label:x(Q,S,r)})}else if("quantile"===q)if(O.length>=B&&Q!==S){J=Math.ceil(O.length/B);n=0;for(u=1;u<B;u++){var F=J+n-1;F>O.length&&(F=O.length-1);0>F&&(F=0);H.push({minValue:Q,maxValue:O[F],label:x(Q,O[F],r)});Q=O[F];n+=J;J=Math.ceil((O.length-n)/(B-u))}H.push({minValue:Q,maxValue:S,label:x(Q,S,r)})}else for(S=-1,Q=0;Q<O.length;Q++)J=O[Q],J!==S&&(S=J,H.push({minValue:S,maxValue:J,label:x(S,J,r)}),S=J);else if("standard-deviation"===q)if(J=g(O),n=m(O,J),0===n)H.push({minValue:O[0],maxValue:O[0],
label:x(O[0],O[0],r)});else{O=c(Q,S,B,J,n)*n;n=0;for(u=B;1<=u;u--)F=Number((J-(u-.5)*O).toFixed(6)),H.push({minValue:Q,maxValue:F,label:x(Q,F,r)}),Q=F,n++;u=Number((J+.5*O).toFixed(6));H.push({minValue:Q,maxValue:u,label:x(Q,u,r)});Q=u;n++;for(F=1;F<=B;F++)u=n===2*B?S:Number((J+(F+.5)*O).toFixed(6)),H.push({minValue:Q,maxValue:u,label:x(Q,u,r)}),Q=u,n++}else if("defined-interval"===q){if(!A)return H;S=O[0];O=O[O.length-1];Q=Math.ceil((O-S)/A);J=S;for(n=1;n<Q;n++)u=Number((S+n*A).toFixed(6)),H.push({minValue:J,
maxValue:u,label:x(J,u,r)}),J=u;H.push({minValue:J,maxValue:O,label:x(J,O,r)})}return H}function x(J,q,B){let r=null;return r=J===q?B&&"percent-of-total"===B?J+"%":J.toString():B&&"percent-of-total"===B?J+"% - "+q+"%":J+" - "+q}function p(J){const q=[],B=[];let r=Number.MIN_VALUE,A=1,H=-1;for(let O=0;O<J.length;O++){const Q=J[O];Q===r?(A++,B[H]=A):null!==Q&&(q.push(Q),r=Q,A=1,B.push(A),H++)}return{uniqueValues:q,valueFrequency:B}}function l(J,q,B){var r=J.length;const A=[];B>r&&(B=r);for(var H=0;H<
B;H++)A.push(Math.round(H*r/B-1));A.push(r-1);H=h(A,J,q,B);r=H.mean;H=H.sdcm;var O=B,Q=0,S=0;let n=0,u=0,F=!0;for(let la=0;2>la&&F;la++){0===la&&(F=!1);for(var U=0;U<O-1;U++)for(;A[U+1]+1!==A[U+2];)if(A[U+1]+=1,Q=E(U,A,J,q),n=Q.sbMean,Q=Q.sbSdcm,S=E(U+1,A,J,q),u=S.sbMean,S=S.sbSdcm,Q+S<H[U]+H[U+1])H[U]=Q,H[U+1]=S,r[U]=n,r[U+1]=u,F=!0;else{--A[U+1];break}for(U=O-1;0<U;U--)for(;A[U]!==A[U-1]+1;)if(--A[U],Q=E(U-1,A,J,q),n=Q.sbMean,Q=Q.sbSdcm,S=E(U,A,J,q),u=S.sbMean,S=S.sbSdcm,Q+S<H[U-1]+H[U])H[U-1]=
Q,H[U]=S,r[U-1]=n,r[U]=u,F=!0;else{A[U]+=1;break}}F&&(H=h(A,J,q,B));return A}function h(J,q,B,r){let A=[];var H=[],O=[];let Q=0;const S=[],n=[];for(var u=0;u<r;u++){var F=E(u,J,q,B);S.push(F.sbMean);n.push(F.sbSdcm);Q+=n[u]}F=Q;for(u=!0;u||Q<F;){u=!1;A=[];for(H=0;H<r;H++)A.push(J[H]);for(O=0;O<r;O++)for(F=J[O]+1;F<=J[O+1];F++)if(H=q[F],0<O&&F!==J[O+1]&&Math.abs(H-S[O])>Math.abs(H-S[O-1]))J[O]=F;else if(O<r-1&&J[O]!==F-1&&Math.abs(H-S[O])>Math.abs(H-S[O+1])){J[O+1]=F-1;break}F=Q;Q=0;H=[];O=[];for(let U=
0;U<r;U++){H.push(S[U]);O.push(n[U]);const la=E(U,J,q,B);S[U]=la.sbMean;n[U]=la.sbSdcm;Q+=n[U]}}if(Q>F){for(q=0;q<r;q++)J[q]=A[q],S[q]=H[q],n[q]=O[q];Q=F}return{mean:S,sdcm:n}}function c(J,q,B,r,A){J=Math.max(r-J,q-r)/A/B;return 1<=J?1:.5<=J?.5:.25}function g(J){let q=0;for(let B=0;B<J.length;B++)q+=J[B];return q/=J.length}function m(J,q){let B=0;for(let r=0;r<J.length;r++){const A=J[r];B+=(A-q)*(A-q)}B/=J.length;return Math.sqrt(B)}function E(J,q,B,r){var A=0,H=0;for(var O=q[J]+1;O<=q[J+1];O++){const Q=
r[O];A+=B[O]*Q;H+=Q}0>=H&&N.warn("Exception in Natural Breaks calculation");A/=H;H=0;for(O=q[J]+1;O<=q[J+1];O++)H+=r[O]*(B[O]-A)**2;return{sbMean:A,sbSdcm:H}}const N=b.getLogger("esri.rest.support.generateRendererUtils");a.createGenerateRendererClassBreaks=function(J){const {normalizationTotal:q}=J;return{classBreaks:T(J),normalizationTotal:q}};a.createGenerateRendererUniqueValues=function(J){J=p(J);const q=[],B=J.uniqueValues.length;for(let r=0;r<B;r++){const A=J.uniqueValues[r];q.push({value:A,
count:J.valueFrequency[r],label:A.toString()})}return{uniqueValues:q}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(a,b,T,x,p,l,h){function c(r,
A){if(!A)return null;if("x"in A){var H={x:0,y:0};[H.x,H.y]=r(A.x,A.y,N);null!=A.z&&(H.z=A.z);null!=A.m&&(H.m=A.m);return H}return"xmin"in A?(H={xmin:0,ymin:0,xmax:0,ymax:0},[H.xmin,H.ymin]=r(A.xmin,A.ymin,N),[H.xmax,H.ymax]=r(A.xmax,A.ymax,N),A.hasZ&&(H.zmin=A.zmin,H.zmax=A.zmax,H.hasZ=!0),A.hasM&&(H.mmin=A.mmin,H.mmax=A.mmax,H.hasM=!0),H):"rings"in A?{rings:g(A.rings,r),hasM:A.hasM,hasZ:A.hasZ}:"paths"in A?{paths:g(A.paths,r),hasM:A.hasM,hasZ:A.hasZ}:"points"in A?{points:m(A.points,r),hasM:A.hasM,
hasZ:A.hasZ}:null}function g(r,A){const H=[];for(const O of r)H.push(m(O,A));return H}function m(r,A){const H=[];for(const O of r)r=A(O[0],O[1],[0,0]),H.push(r),2<O.length&&r.push(O[2]),3<O.length&&r.push(O[3]);return H}function E(){E=b._asyncToGenerator(function*(r,A){r&&A&&(r=Array.isArray(r)?r.map(H=>T.isSome(H.geometry)?H.geometry.spatialReference:null).filter(T.isSome):[r],yield x.initializeProjection(r.map(H=>({source:H,dest:A}))))});return E.apply(this,arguments)}const N=[0,0],J=c.bind(null,
h.lngLatToXY),q=c.bind(null,h.xyToLngLat),B=new (function(){function r(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var A=r.prototype;A.push=function(){var H=b._asyncToGenerator(function*(O,Q,S){if(!(O&&O.length&&Q&&S)||l.equals(Q,S))return O;const n={geometries:O,inSpatialReference:Q,outSpatialReference:S,resolve:null};this._jobs.push(n);return new Promise(u=>{n.resolve=u;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(O,Q,S){return H.apply(this,
arguments)}}();A._process=function(){this._timer=null;const H=this._jobs.shift();if(H){var {geometries:O,inSpatialReference:Q,outSpatialReference:S,resolve:n}=H;h.canProject(Q,S)?l.isWebMercator(S)?n(O.map(J)):n(O.map(q)):n(x.projectMany(p.jsonAdapter,O,Q,S,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return r}());a.checkProjectionSupport=function(r,A){return E.apply(this,arguments)};a.project=function(r,A,H,O){if(!r)return r;H||(H=A,A=r.spatialReference);return l.isValid(A)&&
l.isValid(H)&&!l.equals(A,H)?h.canProject(A,H)?(r=l.isWebMercator(H)?J(r):q(r),r.spatialReference=H,r):x.projectMany(p.jsonAdapter,[r],A,H,null,O)[0]:r};a.projectMany=function(r,A,H){return B.push(r,A,H)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(a,b,T,x,p,l,h,c,g,m,E,N,J,q,B,r,A,H,O,Q,S,n,u,F,U,la,V){function C(){return!!gb&&r.isLoaded()}function K(W){l.isNone(Za)&&(Za=Promise.all([r.load(),(new Promise((ea,Y)=>a(["../chunks/geometryEngineBase"],ea,Y))).then(ea=>ea.geometryEngineBase),new Promise((ea,Y)=>a(["./geometryAdapters/hydrated"],ea,Y))]));return Za.then(([,ea,{hydratedAdapter:Y}])=>{h.throwIfAborted(W);nb=Y;gb=ea.default;gb._enableProjection(r.pe);ec.notify()})}function M(W,ea,Y=null,sa=null){return Array.isArray(W)?0===
W.length?[]:P(nb,W,W[0].spatialReference,ea,Y,sa):P(nb,[W],W.spatialReference,ea,Y,sa)[0]}function P(W,ea,Y,sa,Ca=null,Da=null){if(l.isNone(Y)||l.isNone(sa))return ea;if(na(Y,sa,Ca))return ea.map(Ja=>l.unwrap(da(Ja,Y,sa)));if(l.isNone(Ca)){const Ja=F.cacheKey(Y,sa);void 0!==Eb[Ja]?Ca=Eb[Ja]:(Ca=I(Y,sa,void 0),l.isNone(Ca)&&(Ca=new F),Eb[Ja]=Ca)}if(l.isNone(gb)||l.isNone(W))throw new Fb;return l.isSome(Da)?gb._project(W,ea,Y,sa,Ca,Da):gb._project(W,ea,Y,sa,Ca)}function X(W,ea){if(!C())for(const Y of W)if(l.isSome(Y)&&
!U.equals(Y.spatialReference,ea)&&U.isValid(Y.spatialReference)&&U.isValid(ea)&&!na(Y.spatialReference,ea))return g.trackAccess(ec),{pending:K(),geometries:null};return{pending:null,geometries:W.map(Y=>l.isNone(Y)?null:U.equals(Y.spatialReference,ea)?Y:U.isValid(Y.spatialReference)&&U.isValid(ea)?ha(Y,ea):null)}}function I(W,ea,Y=null){if(l.isNone(W)||l.isNone(ea))return null;if(l.isNone(gb)||l.isNone(nb))throw new Fb;W=gb._getTransformation(nb,W,ea,Y,Y?.spatialReference);return null!==W?F.fromGE(W):
null}function ha(W,ea){try{const Y=M(W,ea);if(null==Y)return null;"xmin"in W&&"xmin"in Y&&(Y.zmin=W.zmin,Y.zmax=W.zmax);const sa=V.getGeometryZScaler(Y.type,W.spatialReference,ea);l.isSome(sa)&&sa(Y);return Y}catch(Y){if(!(Y instanceof Fb))throw Y;return null}}function na(W,ea,Y){return Y?!1:U.equals(W,ea)?!0:U.isValid(W)&&U.isValid(ea)&&!!d(W,ea,Tb)}function ta(){ta=T._asyncToGenerator(function*(W,ea,Y,sa){if(C())return h.waitTick(sa);if(Array.isArray(W))for(const {source:Ca,dest:Da,geographicTransformation:Ja}of W){if(!na(Ca,
Da,Ja))return K(sa)}else if(!na(W,ea,Y))return K(sa);return h.waitTick(sa)});return ta.apply(this,arguments)}function da(W,ea,Y){return W?"x"in W?v(W,ea,new A,Y,0):"xmin"in W?R(W,ea,new q,Y,0):"rings"in W?f(W,ea,new H,Y,0):"paths"in W?y(W,ea,new O,Y,0):"points"in W?D(W,ea,new B,Y,0):null:null}function v(W,ea,Y,sa,Ca){Qa[0]=W.x;Qa[1]=W.y;const Da=W.z;Qa[2]=void 0!==Da?Da:Ca;if(!Ka(Qa,ea,0,Qa,sa,0,1))return null;Y.x=Qa[0];Y.y=Qa[1];Y.spatialReference=sa;void 0===Da?(Y.z=void 0,Y.hasZ=!1):(Y.z=Qa[2],
Y.hasZ=!0);void 0===W.m?(Y.m=void 0,Y.hasM=!1):(Y.m=W.m,Y.hasM=!0);return Y}function D(W,ea,Y,sa,Ca){const {points:Da,hasZ:Ja,hasM:Na}=W;W=[];const Ya=Da.length,Va=[];for(var Ua of Da)Va.push(Ua[0],Ua[1],Ja?Ua[2]:Ca);if(!Ka(Va,ea,0,Va,sa,0,Ya))return null;for(ea=0;ea<Ya;++ea){Ca=3*ea;Ua=Va[Ca];const eb=Va[Ca+1];Ja&&Na?W.push([Ua,eb,Va[Ca+2],Da[ea][3]]):Ja?W.push([Ua,eb,Va[Ca+2]]):Na?W.push([Ua,eb,Da[ea][2]]):W.push([Ua,eb])}Y.points=W;Y.spatialReference=sa;Y.hasZ=Ja;Y.hasM=Na;return Y}function y(W,
ea,Y,sa,Ca){const {paths:Da,hasZ:Ja,hasM:Na}=W;W=[];if(!Ra(Da,Ja??!1,Na??!1,ea,W,sa,Ca))return null;Y.paths=W;Y.spatialReference=sa;Y.hasZ=Ja;Y.hasM=Na;return Y}function f(W,ea,Y,sa,Ca){const {rings:Da,hasZ:Ja,hasM:Na}=W;W=[];if(!Ra(Da,Ja??!1,Na??!1,ea,W,sa,Ca))return null;Y.rings=W;Y.spatialReference=sa;Y.hasZ=Ja;Y.hasM=Na;return Y}function R(W,ea,Y,sa,Ca){const {xmin:Da,ymin:Ja,xmax:Na,ymax:Ya,hasZ:Va,hasM:Ua}=W;if(!ua(Da,Ja,Va?W.zmin:Ca,ea,Qa,sa))return null;Y.xmin=Qa[0];Y.ymin=Qa[1];Va&&(Y.zmin=
Qa[2]);if(!ua(Na,Ya,Va?W.zmax:Ca,ea,Qa,sa))return null;Y.xmax=Qa[0];Y.ymax=Qa[1];Va&&(Y.zmax=Qa[2]);Ua&&(Y.mmin=W.mmin,Y.mmax=W.mmax);Y.spatialReference=sa;return Y}function ua(W,ea,Y,sa,Ca,Da){Sa[0]=W;Sa[1]=ea;Sa[2]=Y;return Ka(Sa,sa,0,Ca,Da,0,1)}function ya(W,ea,Y,sa){if(l.isNone(ea)||l.isNone(sa)||2>W.length)return!1;2===W.length&&(Sa[0]=W[0],Sa[1]=W[1],Sa[2]=0,W=Sa);return Ka(W,ea,0,Y,sa,0,1)}function La(W,ea,Y){if(l.isNone(ea))return!1;ea=ja(ea,tb);ea=hb[ea][oa.WGS84_COMPARABLE_LON_LAT];if(l.isNone(ea))return!1;
ea(W,0,Sa,0);Y!==Sa&&(Y[0]=Sa[0],Y[1]=Sa[1],2<Y.length&&(Y[2]=Sa[2]));return!0}function Ka(W,ea,Y,sa,Ca,Da,Ja=1){ea=d(ea,Ca,Tb);if(l.isNone(ea))return!1;if(ea===qa){if(W===sa&&Y===Da)return!0;Ja=Y+3*Ja;for(let Na=Y,Ya=Da;Na<Ja;Na++,Ya++)sa[Ya]=W[Na];return!0}Ja=Y+3*Ja;for(let Na=Y,Ya=Da;Na<Ja;Na+=3,Ya+=3)ea(W,Na,sa,Ya);return!0}function Ra(W,ea,Y,sa,Ca,Da,Ja=0){const Na=[];for(const Ya of W)for(const Va of Ya)Na.push(Va[0],Va[1],ea?Va[2]:Ja);if(!Ka(Na,sa,0,Na,Da,0,Na.length/3))return!1;sa=0;Ca.length=
0;for(const Ya of W){W=[];for(const Va of Ya)ea&&Y?W.push([Na[sa++],Na[sa++],Na[sa++],Va[3]]):ea?W.push([Na[sa++],Na[sa++],Na[sa++]]):(Y?W.push([Na[sa++],Na[sa++],Va[2]]):W.push([Na[sa++],Na[sa++]]),sa++);Ca.push(W)}return!0}function e(W,ea,Y,sa){ea=sa+ea;if(ea<sa/2||Y>ea)return Number.MAX_VALUE;W=Math.abs(mb*W)+Math.asin(Y/ea);return W>=Math.PI/2?Number.MAX_VALUE:Y/Math.cos(W)}function t(W,ea,Y){const sa=Math.sin(W);W=Math.cos(W);const Ca=Math.sin(ea);ea=Math.cos(ea);Y[0]=-sa;Y[4]=-Ca*W;Y[8]=ea*
W;Y[12]=0;Y[1]=W;Y[5]=-Ca*sa;Y[9]=ea*sa;Y[13]=0;Y[2]=0;Y[6]=ea;Y[10]=Ca;Y[14]=0;Y[3]=0;Y[7]=0;Y[11]=0;Y[15]=1;return Y}function ia(W,ea,Y){t(W,ea,Y);E.transpose(Y,Y);return Y}function ja(W,ea){if(!W)return oa.UNKNOWN;if(ea.spatialReference===W)return ea.spatialReferenceId;ea.spatialReference=W;"metersPerUnit"in ea&&(ea.metersPerUnit=c.getMetersPerUnitForSR(W,1));return W.wkt===Q.SphericalECEFSpatialReference.wkt?ea.spatialReferenceId=oa.SPHERICAL_ECEF:U.isWGS84(W)?ea.spatialReferenceId=oa.WGS84:U.isWebMercator(W)?
ea.spatialReferenceId=oa.WEB_MERCATOR:U.isPlateCarree(W)?ea.spatialReferenceId=oa.PLATE_CARREE:W.wkt===Q.WGS84ECEFSpatialReference.wkt?ea.spatialReferenceId=oa.WGS84_ECEF:W.wkid===la.SupportedGCSWkids.CGCS2000?ea.spatialReferenceId=oa.CGCS2000:W.wkt===Q.SphericalPCPFMars.wkt?ea.spatialReferenceId=oa.SPHERICAL_MARS_PCPF:W.wkt===Q.SphericalPCPFMoon.wkt?ea.spatialReferenceId=oa.SPHERICAL_MOON_PCPF:U.isMars(W)?ea.spatialReferenceId=oa.GCSMARS2000:U.isMoon(W)?ea.spatialReferenceId=oa.GCSMOON2000:ea.spatialReferenceId=
oa.UNKNOWN}function qa(W,ea,Y,sa){W!==Y&&(Y[sa++]=W[ea++],Y[sa++]=W[ea++],Y[sa]=W[ea])}function z(W,ea,Y,sa){Y[sa++]=Bb*(W[ea++]/n.earth.radius);Y[sa++]=Bb*(Math.PI/2-2*Math.atan(Math.exp(-W[ea++]/n.earth.radius)));Y[sa]=W[ea]}function L(W,ea,Y,sa){z(W,ea,Y,sa);pa(Y,sa,Y,sa)}function aa(W,ea,Y,sa){z(W,ea,Y,sa);xa(Y,sa,Y,sa)}function Z(W,ea,Y,sa,Ca){var Da=.4999999*Math.PI;Da=p.clamp(mb*W[ea+1],-Da,Da);Da=Math.sin(Da);Y[sa++]=mb*W[ea]*Ca.radius;Y[sa++]=Ca.halfSemiMajorAxis*Math.log((1+Da)/(1-Da));
Y[sa]=W[ea+2]}function ka(W,ea,Y,sa){Z(W,ea,Y,sa,n.earth)}function ma(W,ea,Y,sa){Y[sa]=W[ea]*fc;Y[sa+1]=W[ea+1]*fc;Y[sa+2]=W[ea+2]}function ra(W,ea,Y,sa){Y[sa]=W[ea]*Cb;Y[sa+1]=W[ea+1]*Cb;Y[sa+2]=W[ea+2]}function va(W,ea,Y,sa){z(W,ea,Y,sa);ma(Y,sa,Y,sa)}function wa(W,ea,Y,sa,Ca){Ca+=W[ea+2];const Da=mb*W[ea+1];W=mb*W[ea];ea=Math.cos(Da);Y[sa++]=Math.cos(W)*ea*Ca;Y[sa++]=Math.sin(W)*ea*Ca;Y[sa]=Math.sin(Da)*Ca}function ca(W,ea,Y,sa){wa(W,ea,Y,sa,n.moon.radius)}function fa(W,ea,Y,sa){wa(W,ea,Y,sa,n.mars.radius)}
function pa(W,ea,Y,sa){wa(W,ea,Y,sa,n.earth.radius)}function Ba(W,ea,Y,sa,Ca){var Da=W[ea];const Ja=W[ea+1];ea=W[ea+2];W=Math.sqrt(Da*Da+Ja*Ja+ea*ea);ea=p.asinClamped(ea/(0===W?1:W));Da=Math.atan2(Ja,Da);Y[sa++]=Bb*Da;Y[sa++]=Bb*ea;Y[sa]=W-Ca}function Ea(W,ea,Y,sa){Ba(W,ea,Y,sa,n.moon.radius)}function Ha(W,ea,Y,sa){Ba(W,ea,Y,sa,n.mars.radius)}function Ia(W,ea,Y,sa){Ba(W,ea,Y,sa,n.earth.radius)}function Ga(W,ea,Y,sa){Ia(W,ea,Y,sa);ka(Y,sa,Y,sa)}function Ma(W,ea,Y,sa){Ia(W,ea,Y,sa);xa(Y,sa,Y,sa)}function xa(W,
ea,Y,sa){var Ca=n.earth;const Da=mb*W[ea];var Ja=mb*W[ea+1];W=W[ea+2];ea=Math.sin(Ja);Ja=Math.cos(Ja);const Na=Ca.radius/Math.sqrt(1-Ca.eccentricitySquared*ea*ea);Y[sa++]=(Na+W)*Ja*Math.cos(Da);Y[sa++]=(Na+W)*Ja*Math.sin(Da);Y[sa++]=(Na*(1-Ca.eccentricitySquared)+W)*ea}function Wa(W,ea,Y,sa){var Ca=u.earthEllipsoidConstants,Da=W[ea],Ja=W[ea+1];W=W[ea+2];let Na;ea=Math.abs(W);var Ya=Da*Da+Ja*Ja;var Va=Math.sqrt(Ya);var Ua=Ya+W*W;var eb=Math.sqrt(Ua);Da=Math.atan2(Ja,Da);var pb=W*W/Ua;Ua=Ya/Ua;Ja=Ca.a2/
eb;Ya=Ca.a3-Ca.a4/eb;.3<Ua?(pb=ea/eb*(1+Ua*(Ca.a1+Ja+pb*Ya)/eb),eb=Math.asin(pb),Ja=pb*pb,Ua=Math.sqrt(1-Ja)):(Ua=Va/eb*(1-pb*(Ca.a5-Ja-Ua*Ya)/eb),eb=Math.acos(Ua),Ja=1-Ua*Ua,pb=Math.sqrt(Ja));Na=1-n.earth.eccentricitySquared*Ja;Ja=n.earth.radius/Math.sqrt(Na);Ca=Ca.a6*Ja;Ja=Va-Ja*Ua;Ya=ea-Ca*pb;ea=Ua*Ja+pb*Ya;Va=Ua*Ya-pb*Ja;Ca=Va/(Ca/Na+ea);eb+=Ca;0>W&&(eb=-eb);Y[sa++]=Bb*Da;Y[sa++]=Bb*eb;Y[sa]=ea+Va*Ca/2}function bb(W,ea,Y,sa){Wa(W,ea,Y,sa);pa(Y,sa,Y,sa)}function ab(W,ea,Y,sa){Wa(W,ea,Y,sa);ka(Y,
sa,Y,sa)}function d(W,ea,Y=Ta()){return l.isNone(W)||l.isNone(ea)?null:cb(W,ea,Y).projector}function cb(W,ea,Y){if(l.isNone(W)||l.isNone(ea)||Y.source.spatialReference===W&&Y.dest.spatialReference===ea)return Y;const sa=ja(W,Y.source),Ca=ja(ea,Y.dest);sa===oa.UNKNOWN&&Ca===oa.UNKNOWN?U.equals(W,ea)?Y.projector=qa:Y.projector=null:Y.projector=hb[sa][Ca];return Y}function Ta(){return{source:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oa.UNKNOWN,
metersPerUnit:1},projector:qa}}let gb=null,nb=null,Za=null,Eb={};const ec=new m.SimpleObservable;let Fb=function(W){function ea(){return W.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}T._inheritsLoose(ea,W);return ea}(x);var oa;(function(W){W[W.UNKNOWN=0]="UNKNOWN";W[W.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";W[W.WGS84=2]="WGS84";W[W.WEB_MERCATOR=3]="WEB_MERCATOR";W[W.WGS84_ECEF=4]="WGS84_ECEF";W[W.CGCS2000=5]="CGCS2000";W[W.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";W[W.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";W[W.GCSMARS2000=8]="GCSMARS2000";W[W.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";W[W.GCSMOON2000=10]="GCSMOON2000";W[W.LON_LAT=11]="LON_LAT";W[W.PLATE_CARREE=12]="PLATE_CARREE"})(oa||(oa={}));const fc=n.earth.radius*Math.PI/180,Cb=180/(n.earth.radius*Math.PI),hb={[oa.WGS84]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:qa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,
[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ka,[oa.PLATE_CARREE]:ma,[oa.WGS84]:qa,[oa.WGS84_ECEF]:xa},[oa.CGCS2000]:{[oa.CGCS2000]:qa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:qa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:ma,[oa.WGS84]:null,[oa.WGS84_ECEF]:xa},[oa.GCSMARS2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:qa,[oa.GCSMOON2000]:null,
[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:fa,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.GCSMOON2000]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:qa,[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:ca,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,
[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.WEB_MERCATOR]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:z,[oa.WGS84_COMPARABLE_LON_LAT]:z,[oa.SPHERICAL_ECEF]:L,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:qa,[oa.PLATE_CARREE]:va,[oa.WGS84]:z,[oa.WGS84_ECEF]:aa},[oa.WGS84_ECEF]:{[oa.CGCS2000]:Wa,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Wa,[oa.WGS84_COMPARABLE_LON_LAT]:Wa,[oa.SPHERICAL_ECEF]:bb,[oa.SPHERICAL_MARS_PCPF]:null,
[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ab,[oa.PLATE_CARREE]:function(W,ea,Y,sa){Wa(W,ea,Y,sa);ma(Y,sa,Y,sa)},[oa.WGS84]:Wa,[oa.WGS84_ECEF]:qa},[oa.SPHERICAL_ECEF]:{[oa.CGCS2000]:Ia,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ia,[oa.WGS84_COMPARABLE_LON_LAT]:Ia,[oa.SPHERICAL_ECEF]:qa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:Ga,[oa.PLATE_CARREE]:function(W,ea,Y,sa){Ia(W,ea,Y,sa);ma(Y,sa,Y,sa)},[oa.WGS84]:Ia,
[oa.WGS84_ECEF]:Ma},[oa.SPHERICAL_MARS_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:Ha,[oa.GCSMOON2000]:null,[oa.LON_LAT]:Ha,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:qa,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.SPHERICAL_MOON_PCPF]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:Ea,[oa.LON_LAT]:Ea,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,
[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:qa,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.UNKNOWN]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:null,[oa.WGS84_COMPARABLE_LON_LAT]:null,[oa.SPHERICAL_ECEF]:null,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:qa,[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:null,[oa.WGS84]:null,[oa.WGS84_ECEF]:null},[oa.LON_LAT]:{[oa.CGCS2000]:qa,
[oa.GCSMARS2000]:qa,[oa.GCSMOON2000]:qa,[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:qa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:fa,[oa.SPHERICAL_MOON_PCPF]:ca,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:ka,[oa.PLATE_CARREE]:ma,[oa.WGS84]:qa,[oa.WGS84_ECEF]:xa},[oa.WGS84_COMPARABLE_LON_LAT]:{[oa.CGCS2000]:null,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:qa,[oa.WGS84_COMPARABLE_LON_LAT]:qa,[oa.SPHERICAL_ECEF]:pa,[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,
[oa.WEB_MERCATOR]:null,[oa.PLATE_CARREE]:ma,[oa.WGS84]:qa,[oa.WGS84_ECEF]:xa},[oa.PLATE_CARREE]:{[oa.CGCS2000]:ra,[oa.GCSMARS2000]:null,[oa.GCSMOON2000]:null,[oa.LON_LAT]:ra,[oa.WGS84_COMPARABLE_LON_LAT]:ra,[oa.SPHERICAL_ECEF]:function(W,ea,Y,sa){ra(W,ea,Y,sa);pa(Y,sa,Y,sa)},[oa.SPHERICAL_MARS_PCPF]:null,[oa.SPHERICAL_MOON_PCPF]:null,[oa.UNKNOWN]:null,[oa.WEB_MERCATOR]:function(W,ea,Y,sa){ra(W,ea,Y,sa);ka(Y,sa,Y,sa)},[oa.PLATE_CARREE]:qa,[oa.WGS84]:ra,[oa.WGS84_ECEF]:function(W,ea,Y,sa){ra(W,ea,Y,
sa);xa(Y,sa,Y,sa)}}},tb={spatialReference:null,spatialReferenceId:oa.UNKNOWN},gc={spatialReference:null,spatialReferenceId:oa.UNKNOWN},Tb=Ta(),Oc=Ta(),mb=p.deg2rad(1),Bb=p.rad2deg(1),Sa=J.create(),ob=J.create(),ub=J.create(),Qa=J.create(),Jb=J.create();b.canProjectToWGS84ComparableLonLat=function(W){if(l.isNone(W))return!1;W=ja(W,tb);return!!hb[W][oa.WGS84_COMPARABLE_LON_LAT]};b.canProjectWithoutEngine=na;b.computeENUToSphericalPCPFLocalRotation=t;b.computeSphericalPCPFToENULocalRotation=ia;b.computeTranslationToOriginAndRotation=
function(W,ea,Y,sa){if(l.isNone(W)||l.isNone(sa))return!1;var Ca=ja(W,tb),Da=ja(sa,gc);if(Ca===Da&&Da!==oa.SPHERICAL_ECEF&&Da!==oa.SPHERICAL_MARS_PCPF&&Da!==oa.SPHERICAL_MOON_PCPF&&(Ca!==oa.UNKNOWN||U.equals(W,sa)))return E.fromTranslation(Y,ea),!0;if(Da===oa.SPHERICAL_ECEF||Da===oa.SPHERICAL_MARS_PCPF||Da===oa.SPHERICAL_MOON_PCPF){Ca=hb[Ca][oa.LON_LAT];Da=hb[oa.LON_LAT][Da];if(l.isNone(Ca)||l.isNone(Da))return!1;Ca(ea,0,ob,0);Da(ob,0,ub,0);t(mb*ob[0],mb*ob[1],Y);Y[12]=ub[0];Y[13]=ub[1];Y[14]=ub[2];
return!0}if((Da===oa.WEB_MERCATOR||Da===oa.PLATE_CARREE)&&(Ca===oa.WGS84||Ca===oa.CGCS2000&&Da===oa.PLATE_CARREE||Ca===oa.SPHERICAL_ECEF||Ca===oa.WEB_MERCATOR)){W=hb[Ca][oa.LON_LAT];Da=hb[oa.LON_LAT][Da];if(l.isNone(W)||l.isNone(Da))return!1;W(ea,0,ob,0);Da(ob,0,ub,0);Ca===oa.SPHERICAL_ECEF?ia(mb*ob[0],mb*ob[1],Y):E.identity(Y);Y[12]=ub[0];Y[13]=ub[1];Y[14]=ub[2];return!0}return!1};b.getProjectorName=function(W,ea){switch(d(W,ea,Tb)){case qa:return"copy3";case pa:return"wgs84ToSphericalECEF";case ka:return"wgs84ToWebMercator";
case ma:return"wgs84ToPlateCarree";case xa:return"wgs84ToWGS84ECEF";case z:return"webMercatorToWGS84";case L:return"webMercatorToSphericalECEF";case aa:return"webMercatorToWGS84ECEF";case va:return"webMercatorToPlateCarree";case Wa:return"wgs84ECEFToWGS84";case bb:return"wgs84ECEFToSphericalECEF";case ab:return"wgs84ECEFToWebMercator";case Ia:return"sphericalECEFToWGS84";case Ga:return"sphericalECEFToWebMercator";case Ha:return"sphericalMarsPCPFToMars2000";case Ea:return"sphericalMoonPCPFToMoon2000";
case Ma:return"sphericalECEFToWGS84ECEF";case fa:return"mars2000ToSphericalPCPF";case ca:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=I;b.getTransformations=function(W,ea,Y=null){if(l.isNone(gb)||l.isNone(nb))throw new Fb;W=gb._getTransformationBySuitability(nb,W,ea,Y,Y?.spatialReference);if(null!==W){ea=[];for(const sa of W)ea.push(F.fromGE(sa));return ea}return[]};b.initializeProjection=function(W,ea,Y,sa){return ta.apply(this,arguments)};b.isLoaded=C;b.load=K;b.localLinearScaleFactors=
function(W,ea,Y,sa){if(l.isNone(ea)||l.isNone(sa))return!1;const Ca=ja(ea,tb);var Da=ja(sa,gc);if(Ca===Da&&Ca!==oa.UNKNOWN||U.equals(ea,sa))return Y[0]=1,Y[1]=1,Y[2]=1,!0;if(Ca===oa.SPHERICAL_ECEF){ea=N.length(W);W=ea/Math.sqrt(W[0]*W[0]+W[1]*W[1]);ea/=n.earth.radius;if(Da===oa.WEB_MERCATOR)return Y[0]=W*ea,Y[1]=W*ea,Y[2]=1,!0;if(Da===oa.WGS84||Da===oa.CGCS2000)return Da=Cb,Y[0]=Da*W*ea,Y[1]=Da*ea,Y[2]=1,!0}else if(Ca===oa.PLATE_CARREE){if(Da===oa.WGS84||Da===oa.CGCS2000)return Y[0]=Cb,Y[1]=Cb,Y[2]=
1,!0;if(Da===oa.WEB_MERCATOR)return Da=W[1]/n.earth.radius,Y[0]=1,Y[1]=1/Math.cos(Da),Y[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(W,ea,Y,sa){const Ca=Math.cos(Y);W[0]=Math.cos(ea)*Ca*sa;W[1]=Math.sin(ea)*Ca*sa;W[2]=Math.sin(Y)*sa};b.lonLatToWebMercatorComparable=Z;b.project=M;b.projectBoundingRect=function(W,ea,Y,sa){if(null==W)return!1;if(U.equals(ea,sa))return S.copy(Y,W),!0;Sa[0]=W[0];Sa[1]=W[1];Sa[2]=0;if(!Ka(Sa,ea,0,Sa,sa,0,1))return!1;Y[0]=Sa[0];Y[1]=Sa[1];Sa[0]=W[2];Sa[1]=W[3];Sa[2]=
0;if(!Ka(Sa,ea,0,Sa,sa,0,1))return!1;Y[2]=Sa[0];Y[3]=Sa[1];return!0};b.projectBoundingSphere=function(W,ea,Y,sa){if(l.isNone(ea)||l.isNone(sa))return!1;ea=cb(ea,sa,Oc);if(ea.projector===qa)return Y[0]=W[0],Y[1]=W[1],Y[2]=W[2],Y[3]=W[3],!0;if(l.isNone(ea.projector))return!1;const {source:Ca,dest:Da}=ea;if(Da.spatialReferenceId===oa.WEB_MERCATOR){ea=hb[Ca.spatialReferenceId][oa.WGS84];if(l.isNone(ea))return!1;ea(W,0,ob,0);ka(ob,0,Y,0);Y[3]=e(ob[1],W[2],W[3],n.earth.radius);return!0}if(Ca.spatialReferenceId!==
oa.WGS84&&Ca.spatialReferenceId!==oa.CGCS2000||Da.spatialReferenceId!==oa.PLATE_CARREE)ea.projector(W,0,Y,0),Y[3]=W[3]*(Ca.metersPerUnit??1)/(Da.metersPerUnit??1);else{sa=hb[oa.SPHERICAL_ECEF][oa.PLATE_CARREE];let Ja=W[3];l.isSome(hb[Ca.spatialReferenceId][oa.SPHERICAL_ECEF])&&l.isSome(sa)&&(Ja=e(W[1],W[2],W[3],n.earth.radius));ea.projector(W,0,Y,0);Y[3]=Ja}return!0};b.projectBuffer=Ka;b.projectDirection=function(W,ea,Y,sa,Ca){N.copy(Qa,W);N.add(Jb,W,ea);ya(Qa,Y,Qa,Ca);ya(Jb,Y,Jb,Ca);N.subtract(sa,
Jb,Qa);N.normalize(sa,sa)};b.projectExtent=function(W,ea,Y=ea.spatialReference,sa=0){return l.isSome(W.spatialReference)&&l.isSome(Y)&&l.isSome(R(W,W.spatialReference,ea,Y,sa))};b.projectMany=P;b.projectMultipoint=function(W,ea,Y=ea.spatialReference,sa=0){return l.isSome(W.spatialReference)&&l.isSome(Y)&&l.isSome(D(W,W.spatialReference,ea,Y,sa))};b.projectOrLoad=function(W,ea){W=X([W],ea);return l.isSome(W.pending)?{pending:W.pending,geometry:null}:l.isSome(W.geometries)?{pending:null,geometry:W.geometries[0]}:
{pending:null,geometry:null}};b.projectOrLoadMany=X;b.projectPoint=function(W,ea,Y=ea.spatialReference,sa=0){return l.isSome(Y)&&l.isSome(W.spatialReference)&&l.isSome(v(W,W.spatialReference,ea,Y,sa))};b.projectPointToVector=function(W,ea,Y,sa=0){Qa[0]=W.x;Qa[1]=W.y;const Ca=W.z;Qa[2]=void 0!==Ca?Ca:sa;return Ka(Qa,W.spatialReference,0,ea,Y,0,1)};b.projectPointToWGS84ComparableLonLat=function(W,ea){Qa[0]=W.x;Qa[1]=W.y;const Y=W.z;Qa[2]=void 0!==Y?Y:0;return La(Qa,W.spatialReference,ea)};b.projectPolygon=
function(W,ea,Y=ea.spatialReference,sa=0){return l.isSome(W.spatialReference)&&l.isSome(Y)&&l.isSome(f(W,W.spatialReference,ea,Y,sa))};b.projectPolygonToWGS84ComparableLonLat=function({hasZ:W,spatialReference:ea,rings:Y},sa,Ca=0){ea=ja(ea,tb);ea=hb[ea][oa.WGS84_COMPARABLE_LON_LAT];if(l.isNone(ea))return!1;W=W?Da=>Da:Da=>N.set(Qa,Da[0],Da[1],Ca);for(const Da of Y){Y=[];for(const Ja of Da){const Na=[0,0,Ca];ea(W(Ja),0,Na,0);Y.push(Na)}sa.push(Y)}return!0};b.projectPolyline=function(W,ea,Y=ea.spatialReference,
sa=0){return l.isSome(W.spatialReference)&&l.isSome(Y)&&l.isSome(y(W,W.spatialReference,ea,Y,sa))};b.projectPolylineToWGS84ComparableLonLat=function({hasZ:W,spatialReference:ea,paths:Y},sa,Ca=0){ea=ja(ea,tb);ea=hb[ea][oa.WGS84_COMPARABLE_LON_LAT];if(l.isNone(ea))return!1;W=W?Da=>Da:Da=>N.set(Qa,Da[0],Da[1],Ca);for(const Da of Y){Y=[];for(const Ja of Da){const Na=[0,0,Ca];ea(W(Ja),0,Na,0);Y.push(Na)}sa.push(Y)}return!0};b.projectVectorToDehydratedPoint=function(W,ea,Y){return Ka(W,ea,0,Qa,Y.spatialReference,
0,1)?(Y.x=Qa[0],Y.y=Qa[1],Y.z=Qa[2],Y):null};b.projectVectorToPoint=function(W,ea,Y){if(l.isNone(ea)||l.isNone(Y))return null;const sa=new A({spatialReference:Y});return Ka(W,ea,0,Qa,Y,0,1)?(sa.x=Qa[0],sa.y=Qa[1],sa.z=Qa[2],sa):null};b.projectVectorToVector=ya;b.projectVectorToWGS84ComparableLonLat=function(W,ea,Y){return La(W,ea,Y)};b.projectWithoutEngine=da;b.projectXYZToVector=ua;b.sphericalPCPFtoLonLatElevation=Ba;b.test={get loadPromise(){return Za}};b.tryProjectWithZConversion=ha;b.unload=function(){Za=
nb=gb=null;Eb={}};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),function(a,b,T,x,p,l,h,c){function g(v){v=I[v];if(!v)throw Error("unknown type");return v}function m(v){return X[v].baseUnit}function E(v,D=null){D=D||g(v);return X[D].baseUnit===
v}function N(v,D,y){if(D===y)return v;const f=g(D);if(f!==g(y))throw Error("incompatible units");v=E(D,f)?v:v*X[f].units[D].inBaseUnits;return E(y,f)?v:v/X[f].units[y].inBaseUnits}function J(v,D){v=N(v,D,"meters");return 3E3>Math.abs(v)?"meters":"kilometers"}function q(v,D){v=N(v,D,"meters");return 1E5>Math.abs(v)?"meters":"kilometers"}function B(v,D){v=N(v,D,"feet");return 1E3>Math.abs(v)?"feet":"miles"}function r(v,D){v=N(v,D,"feet");return 1E5>Math.abs(v)?"feet":"miles"}function A(v,D){v=N(v,D,
"square-meters");return 3E6>Math.abs(v)?"square-meters":"square-kilometers"}function H(v,D){v=N(v,D,"square-feet");return 1E6>Math.abs(v)?"square-feet":"square-miles"}function O(v){return P.fromJSON(v.toLowerCase())||null}function Q(v){const D=S(v),y=p.getReferenceEllipsoid(v).metersPerDegree;return D>=y?"meters":F(v)}function S(v,D=l.earth.metersPerDegree){return x.unwrapOr(n(v,!0),D)}function n(v,D=!1){const y=x.isSome(v)?v.wkid:null;v=x.isSome(v)?v.wkt:null;let f=null;if(y){if(h.isWKIDFromMars(y))return l.mars.metersPerDegree;
if(h.isWKIDFromMoon(y))return l.moon.metersPerDegree;f=C.values[C[y]];!f&&D&&M.has(y)&&(f=la)}else v&&(/^PROJCS/i.test(v)?f=u(V.exec(v),f):/^GEOCCS/i.test(v)&&(f=u(K.exec(v),f)));return f}function u(v,D){return v&&v[1]?parseFloat(v[1].split(",")[1]):D}function F(v){var D=x.isSome(v)?v.wkid:null,y=x.isSome(v)?v.wkt:null;v=null;if(D)v=C.units[C[D]];else if(y&&(D=/^PROJCS/i.test(y)?V:/^GEOCCS/i.test(y)?K:null)&&(D=D.exec(y))&&D[1]&&(D=D[1],v=(v=/[\\"\\']{1}([^\\"\\']+)/.exec(D))&&v[1],!v||!C.units.includes(v))){D=
parseFloat(D.split(",")[1]);v=null;y=C.values;for(let f=0;f<y.length;++f)if(1E-7>Math.abs(D-y[f])){v=C.units[f];break}}return x.isSome(v)?O(v):null}function U(v){v=F(v);if(x.isNone(v))return null;switch(v){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}
const la=l.earth.radius*Math.PI/200,V=/UNIT\[([^\]]+)\]\]$/i,C=c,K=/UNIT\[([^\]]+)\]/i,M=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),P=T.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",
chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});b={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};c={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},
"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(v=>v*v)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const X={length:{baseUnit:"meters",units:b},area:{baseUnit:"square-meters",units:c},volume:{baseUnit:"liters",
units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},I=(()=>{const v=
{};for(const D in X)for(const y in X[D].units)v[y]=D;return v})(),ha="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),na=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),ta={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",
esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},da={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};b=T.strict()(ta);c=T.strict()(da);T=T.strict()({...ta,...da});a.areaUnitFromSpatialReference=
function(v){v=F(v);return x.isNone(v)?null:na.get(v)};a.areaUnitsJSONMap=b;a.baseUnitForUnit=function(v){return m(g(v))};a.baseUnitForUnitType=m;a.convertUnit=N;a.getDefaultUnitForView=function(v){if(x.isNone(v))return"metric";var D=v.map;if(D=D&&"portalItem"in D?D.portalItem?.portal:null)switch(D?.user?.units??D.units){case "metric":return"metric";case "english":return"imperial"}return x.unwrapOr(U(v.spatialReference),"metric")};a.getDefaultUnitSystem=U;a.getMetersPerUnit=n;a.getMetersPerUnitForSR=
S;a.getMetersPerVerticalUnitForSR=function(v){if(x.isSome(v)&&!h.isEarth(v))return 1;v=S(v);return 1E5<v?1:v};a.getUnitString=F;a.getVerticalUnitStringForSR=Q;a.inchesPerMeter=39.37;a.isBaseUnit=E;a.isMeasurementSystem=function(v){return"imperial"===v||"metric"===v};a.lengthToDegrees=function(v,D,y){return N(v,D,"meters")/(y*Math.PI/180)};a.lengthUnitFromSpatialReference=function(v){v=F(v);return x.isNone(v)||!ha.includes(v)?null:v};a.lengthUnitsJSONMap=c;a.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");
a.measurementLengthUnits=ha;a.preferredAreaUnit=function(v,D,y){switch(y){case "metric":return A(v,D);case "imperial":return H(v,D);default:return y}};a.preferredImperialAreaUnit=H;a.preferredImperialLengthUnit=B;a.preferredImperialVerticalLengthUnit=r;a.preferredLengthUnit=function(v,D,y){switch(y){case "metric":return J(v,D);case "imperial":return B(v,D);default:return y}};a.preferredMetricAreaUnit=A;a.preferredMetricLengthUnit=J;a.preferredMetricVerticalLengthUnit=q;a.preferredVerticalLengthUnit=
function(v,D,y){switch(y){case "metric":return q(v,D);case "imperial":return r(v,D);default:return y}};a.unitFromRESTJSON=O;a.unitToRESTJSON=function(v){return P.toJSON(v)||null};a.unitType=g;a.unitsJSONMap=T;a.verticalLengthUnitFromSpatialReference=function(v){v=Q(v);return x.isNone(v)||!ha.includes(v)?null:v};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe","./SpatialReference",
"./support/Ellipsoid","./support/spatialReferenceUtils"],function(a,b,T,x,p){function l(E){return new T({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${E.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const h=l(x.earth),c=l(x.mars),g=l(x.moon),m=new T({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${x.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});
a.SphericalECEFSpatialReference=h;a.SphericalPCPFMars=c;a.SphericalPCPFMoon=g;a.WGS84ECEFSpatialReference=m;a.createSphericalPCPF=l;a.getReferenceEllipsoid=function(E){return b.isSome(E)&&(p.isMars(E)||E===c)?x.mars:b.isSome(E)&&(p.isMoon(E)||E===g)?x.moon:x.earth};a.getReferenceEllipsoidFromWKID=function(E){return p.isWKIDFromMars(E)?x.mars:p.isWKIDFromMoon(E)?x.moon:x.earth};a.getSphericalPCPF=function(E){return E&&(p.isMars(E)||E===c)?c:E&&(p.isMoon(E)||E===g)?g:h};a.getSphericalPCPFForEllipsoid=
function(E){return E&&E===x.mars?c:E&&E===x.moon?g:h};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(a,b){let T=function(){function x(){this._observers=[]}var p=x.prototype;p.observe=function(l){this._observers.includes(l)||this._observers.push(l);return new b.ObservationHandle(this._observers,l)};p.notify=function(){const l=this._observers.slice();
for(let h=0;h<l.length;++h){const c=l[h];c.onInvalidated();c.onCommitted()}};return x}();a.SimpleObservable=T;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(a,b,T,x,p){function l(){return!!b._pe}function h(){return!!p("esri-wasm")}function c(){return q?q:q=(new Promise((r,A)=>a(["./pe-wasm"],r,A))).then(r=>r.peWasm).then(({default:r})=>
r({locateFile:A=>x.getAssetUrl(`esri/geometry/support/${A}`)})).then(r=>{g(r)})}function g(r){function A(Q,S,n){Q[S]=n(Q[S])}b._pe=r;b.PeDefs.init();b.PeGTlistExtended.init();b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=function(Q){function S(){return Q.apply(this,arguments)||this}T._inheritsLoose(S,Q);S.prototype.destroy=function(){b._pe.destroy(this)};return S}(b._pe.PeGCSExtent);r=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,
b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var H of r)A(H.prototype,"getName",Q=>function(){return Q.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const Q of[b._pe.PeGeogtran,b._pe.PeProjcs])A(Q.prototype,"getParameters",S=>function(){const n=Array(b.PeDefs.PE_PARM_MAX);let u=S.call(this);for(let F=0;F<n.length;F++){const U=b._pe.getValue(u,"*");n[F]=U?b._pe.wrapPointer(U,b._pe.PeParameter):null;u+=Int32Array.BYTES_PER_ELEMENT}return n});A(b._pe.PeHorizon.prototype,"getCoord",
Q=>function(){const S=this.getSize();if(!S)return null;const n=[],u=Q.call(this);J(n,S,u);return n});A(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",Q=>{const S=b._pe._pe_getPeGTlistExtendedGTsSize();return function(){let n=null;var u=Q.call(this);if(!b._pe.compare(u,b._pe.NULL)){n=[u];const F=this.getSteps();if(1<F){u=b._pe.getPointer(u);for(let U=1;U<F;U++)n.push(b._pe.wrapPointer(u+S*U,b._pe.PeGTlistExtendedGTs))}}return n}});const O=b._pe._pe_getPeHorizonSize();H=Q=>function(){let S=this._cache;
S||(this._cache=S=new Map);if(S.has(Q))return S.get(Q);let n=null;var u=Q.call(this);if(!b._pe.compare(u,b._pe.NULL)){n=[u];const F=u.getNump();if(1<F){u=b._pe.getPointer(u);for(let U=1;U<F;U++)n.push(b._pe.wrapPointer(u+O*U,b._pe.PeHorizon))}}S.set(Q,n);return n};A(b._pe.PeProjcs.prototype,"horizonGcsGenerate",H);A(b._pe.PeProjcs.prototype,"horizonPcsGenerate",H);b._pe.PeObject.prototype.toString=function(Q=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();const S=b._pe.getPointer(this),n=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));
return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(S,Q,n))}}function m(r){if(r){var A=b._pe.getClass(r);A&&(A=b._pe.getCache(A))&&(r=b._pe.getPointer(r))&&delete A[r]}}function E(r,A){const H=[];A=Array(A);for(let O=0;O<r;O++)H.push(b._pe.ensureInt8(A));return H}function N(r){let A;Array.isArray(r[0])?(A=[],r.forEach(H=>{A.push(H[0],H[1])})):A=r;return A}function J(r,A,H,O=!1){if(O)for(O=0;O<2*A;O++)r[O]=b._pe.getValue(H+O*Float64Array.BYTES_PER_ELEMENT,"double");else{O=0===r.length;for(let Q=
0;Q<A;Q++)O&&(r[Q]=Array(2)),r[Q][0]=b._pe.getValue(H,"double"),r[Q][1]=b._pe.getValue(H+Float64Array.BYTES_PER_ELEMENT,"double"),H+=2*Float64Array.BYTES_PER_ELEMENT}}let q;b._pe=null;b.PeCSTransformations=void 0;(function(r){function A(Q,S,n){b._pe.ensureCache.prepare();var u=N(n);const F=n===u;u=b._pe.ensureFloat64(u);(Q=b._pe._pe_geog_to_proj(b._pe.getPointer(Q),S,u))&&J(n,S,u,F);return Q}function H(Q,S,n){return O(Q,S,n,0)}function O(Q,S,n,u){b._pe.ensureCache.prepare();var F=N(n);const U=n===
F;F=b._pe.ensureFloat64(F);(Q=b._pe._pe_proj_to_geog_center(b._pe.getPointer(Q),S,F,u))&&J(n,S,F,U);return Q}r.geogToProj=A;r.projGeog=function(Q,S,n,u){switch(u){case b.PeDefs.PE_TRANSFORM_P_TO_G:return H(Q,S,n);case b.PeDefs.PE_TRANSFORM_G_TO_P:return A(Q,S,n)}return 0};r.projToGeog=H;r.projToGeogCenter=O})(b.PeCSTransformations||(b.PeCSTransformations={}));b.PeDefs=void 0;(function(r){r.init=function(){r.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;r.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;
r.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;r.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;r.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;r.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;r.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;r.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;r.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;r.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;r.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;r.PE_TYPE_PROJCS=b._pe.PeDefs.prototype.PE_TYPE_PROJCS;r.PE_TYPE_GEOGTRAN=
b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;r.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;r.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;r.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;r.PE_STR_OPTS_NONE=b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;r.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;r.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;r.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;r.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;r.PE_PARM_ND=
b._pe.PeDefs.prototype.PE_PARM_ND;r.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;r.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;r.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;r.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;r.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;r.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;r.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;r.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||
(b.PeDefs={}));b.PeFactory=void 0;(function(r){function A(S,n){let u=null,F=H[S];F||(F={},H[S]=F);F.hasOwnProperty(String(n))?u=F[n]:(S=b._pe.PeFactory.prototype.factoryByType(S,n),b._pe.compare(S,b._pe.NULL)||(u=S,F[n]=u));return u=Q(u)}const H={},O={},Q=S=>{if(S){const n=S.getType();switch(n){case b.PeDefs.PE_TYPE_GEOGCS:S=b._pe.castObject(S,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:S=b._pe.castObject(S,b._pe.PeProjcs);break;case b.PeDefs.PE_TYPE_GEOGTRAN:S=b._pe.castObject(S,b._pe.PeGeogtran);
break;default:n&b.PeDefs.PE_TYPE_UNIT&&(S=b._pe.castObject(S,b._pe.PeUnit))}}return S};r.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};r.coordsys=function(S){return A(b.PeDefs.PE_TYPE_COORDSYS,S)};r.factoryByType=A;r.fromString=function(S,n){let u=null,F=O[S];F||(F={},O[S]=F);F.hasOwnProperty(n)?u=F[n]:(S=b._pe.PeFactory.prototype.fromString(S,n),b._pe.compare(S,b._pe.NULL)||(u=S,F[n]=u));return u=Q(u)};r.geogcs=function(S){return A(b.PeDefs.PE_TYPE_GEOGCS,S)};r.geogtran=function(S){return A(b.PeDefs.PE_TYPE_GEOGTRAN,
S)};r.getCode=function(S){return b._pe.PeFactory.prototype.getCode(S)};r.projcs=function(S){return A(b.PeDefs.PE_TYPE_PROJCS,S)};r.unit=function(S){return A(b.PeDefs.PE_TYPE_UNIT,S)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;b.PeGTlistExtended=void 0;(function(r){let A;r.init=function(){r.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;A=b._pe._pe_getPeGTlistExtendedEntrySize()};r.getGTlist=function(H,O,Q,S,n,u){let F=null;const U=new b._pe.PeInteger(u);try{const la=
b._pe.PeGTlistExtended.prototype.getGTlist(H,O,Q,S,n,U);if(u=U.val)if(F=[la],1<u){const V=b._pe.getPointer(la);for(H=1;H<u;H++)F.push(b._pe.wrapPointer(V+A*H,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(U)}return F}})(b.PeGTlistExtended||(b.PeGTlistExtended={}));b.PeGTlistExtendedEntry=void 0;(function(r){r.destroy=function(A){if(A&&A.length){for(const H of A)m(H),H.getEntries().forEach(O=>{m(O);O=O.getGeogtran();m(O);O.getParameters().forEach(m);[O.getGeogcs1(),O.getGeogcs2()].forEach(Q=>
{m(Q);const S=Q.getDatum();m(S);m(S.getSpheroid());m(Q.getPrimem());m(Q.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(A[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));b.PeGTTransformations=void 0;(function(r){r.geogToGeog=function(A,H,O,Q,S){b._pe.ensureCache.prepare();var n=N(O);const u=O===n;n=b._pe.ensureFloat64(n);let F=0;Q&&(F=b._pe.ensureFloat64(Q));(A=b._pe._pe_geog_to_geog(b._pe.getPointer(A),H,n,F,S))&&J(O,H,n,u);return A}})(b.PeGTTransformations||(b.PeGTTransformations=
{}));b.PeNotationDms=void 0;(function(r){const A=(O,Q,S,n,u,F)=>{b._pe.ensureCache.prepare();switch(O){case "dd":var U=b._pe._pe_geog_to_dd;var la=b.PeDefs.PE_DD_MAX;break;case "ddm":U=b._pe._pe_geog_to_ddm;la=b.PeDefs.PE_DDM_MAX;break;case "dms":U=b._pe._pe_geog_to_dms,la=b.PeDefs.PE_DMS_MAX}O=0;Q&&(O=b._pe.getPointer(Q));Q=N(n);Q=b._pe.ensureFloat64(Q);la=E(S,la);n=b._pe.ensureInt32(la);if(u=U(O,S,Q,u,n))for(U=0;U<S;U++)F[U]=b._pe.UTF8ToString(la[U]);return u},H=(O,Q,S,n,u)=>{b._pe.ensureCache.prepare();
switch(O){case "dd":var F=b._pe._pe_dd_to_geog;break;case "ddm":F=b._pe._pe_ddm_to_geog;break;case "dms":F=b._pe._pe_dms_to_geog}O=0;Q&&(O=b._pe.getPointer(Q));Q=n.map(U=>b._pe.ensureString(U));n=b._pe.ensureInt32(Q);Q=b._pe.ensureFloat64(Array(2*S));(F=F(O,S,n,Q))&&J(u,S,Q);return F};r.geogToDms=function(O,Q,S,n,u){return A("dms",O,Q,S,n,u)};r.dmsToGeog=function(O,Q,S,n){return H("dms",O,Q,S,n)};r.geogToDdm=function(O,Q,S,n,u){return A("ddm",O,Q,S,n,u)};r.ddmToGeog=function(O,Q,S,n){return H("ddm",
O,Q,S,n)};r.geogToDd=function(O,Q,S,n,u){return A("dd",O,Q,S,n,u)};r.ddToGeog=function(O,Q,S,n){return H("dd",O,Q,S,n)}})(b.PeNotationDms||(b.PeNotationDms={}));b.PeNotationMgrs=void 0;(function(r){r.init=function(){r.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;r.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;r.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;r.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
r.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};r.geogToMgrsExtended=function(A,H,O,Q,S,n,u){b._pe.ensureCache.prepare();let F=0;A&&(F=b._pe.getPointer(A));A=N(O);O=b._pe.ensureFloat64(A);A=E(H,b.PeDefs.PE_MGRS_MAX);const U=b._pe.ensureInt32(A);if(Q=b._pe._pe_geog_to_mgrs_extended(F,H,O,Q,S,n,U))for(S=0;S<H;S++)u[S]=b._pe.UTF8ToString(A[S]);return Q};r.mgrsToGeogExtended=function(A,H,O,Q,S){b._pe.ensureCache.prepare();let n=0;A&&(n=b._pe.getPointer(A));A=O.map(u=>b._pe.ensureString(u));
O=b._pe.ensureInt32(A);A=b._pe.ensureFloat64(Array(2*H));(Q=b._pe._pe_mgrs_to_geog_extended(n,H,O,Q,A))&&J(S,H,A);return Q}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));b.PeNotationUsng=void 0;(function(r){r.geogToUsng=function(A,H,O,Q,S,n,u){b._pe.ensureCache.prepare();let F=0;A&&(F=b._pe.getPointer(A));A=N(O);O=b._pe.ensureFloat64(A);A=E(H,b.PeDefs.PE_MGRS_MAX);const U=b._pe.ensureInt32(A);if(Q=b._pe._pe_geog_to_usng(F,H,O,Q,S,n,U))for(S=0;S<H;S++)u[S]=b._pe.UTF8ToString(A[S]);return Q};r.usngToGeog=
function(A,H,O,Q){b._pe.ensureCache.prepare();var S=0;A&&(S=b._pe.getPointer(A));A=O.map(n=>b._pe.ensureString(n));O=b._pe.ensureInt32(A);A=b._pe.ensureFloat64(Array(2*H));(S=b._pe._pe_usng_to_geog(S,H,O,A))&&J(Q,H,A);return S}})(b.PeNotationUsng||(b.PeNotationUsng={}));b.PeNotationUtm=void 0;(function(r){r.init=function(){r.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;r.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;r.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};
r.geogToUtm=function(A,H,O,Q,S){b._pe.ensureCache.prepare();var n=0;A&&(n=b._pe.getPointer(A));A=N(O);O=b._pe.ensureFloat64(A);A=E(H,b.PeDefs.PE_UTM_MAX);const u=b._pe.ensureInt32(A);if(Q=b._pe._pe_geog_to_utm(n,H,O,Q,u))for(n=0;n<H;n++)S[n]=b._pe.UTF8ToString(A[n]);return Q};r.utmToGeog=function(A,H,O,Q,S){b._pe.ensureCache.prepare();let n=0;A&&(n=b._pe.getPointer(A));A=O.map(u=>b._pe.ensureString(u));O=b._pe.ensureInt32(A);A=b._pe.ensureFloat64(Array(2*H));(Q=b._pe._pe_utm_to_geog(n,H,O,Q,A))&&
J(S,H,A);return Q}})(b.PeNotationUtm||(b.PeNotationUtm={}));b.PePCSInfo=void 0;(function(r){const A=new Map;r.init=function(){r.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;r.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;r.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;r.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};r.generate=function(H,O=r.PE_PCSINFO_OPTION_DOMAIN){let Q=null,S=null;A.has(H)&&(S=A.get(H),
S[O]&&(Q=S[O]));Q||(Q=b._pe.PePCSInfo.prototype.generate(H,O),S||(S=[],A.set(H,S)),S[O]=Q);return Q}})(b.PePCSInfo||(b.PePCSInfo={}));b.PeVersion=void 0;(function(r){r.versionString=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));const B=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return b._pe},isLoaded:l,isSupported:h,load:c,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},get PeFactory(){return b.PeFactory},
get PeGCSExtent(){return b.PeGCSExtent},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeGTTransformations(){return b.PeGTTransformations},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:g},Symbol.toStringTag,{value:"Module"}));
b._init=g;b.isLoaded=l;b.isSupported=h;b.load=c;b.pe=B})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(a,b,T,x,p){function l(q=J){return[q[0],q[1],q[2],q[3]]}function h(q,B){q!==B&&(q[0]=B[0],q[1]=B[1],q[2]=B[2],q[3]=B[3]);return q}function c(q){return x.isNone(q)||q[0]>=q[2]?0:q[2]-q[0]}function g(q){return q[1]>=q[3]?0:q[3]-q[1]}function m(q,B,r){return B>=q[0]&&r>=q[1]&&B<=q[2]&&r<=q[3]}function E(q){return null!=
q&&4===q.length}const N=[Infinity,Infinity,-Infinity,-Infinity],J=[0,0,0,0];a.NEGATIVE_INFINITY=N;a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.UNIT=[0,0,1,1];a.ZERO=J;a.allFinite=function(q){for(let B=0;4>B;B++)if(!isFinite(q[B]))return!1;return!0};a.area=function(q){return c(q)*g(q)};a.center=function(q,B=[0,0]){B[0]=(q[0]+q[2])/2;B[1]=(q[1]+q[3])/2;return B};a.clone=function(q){return[q[0],q[1],q[2],q[3]]};a.contains=function(q,B){return B[0]>=q[0]&&B[2]<=q[2]&&B[1]>=q[1]&&B[3]<=
q[3]};a.containsPoint=function(q,B){return m(q,B[0],B[1])};a.containsPointObject=function(q,B){return m(q,B.x,B.y)};a.containsPointWithMargin=function(q,B,r){return B[0]>=q[0]-r&&B[1]>=q[1]-r&&B[0]<=q[2]+r&&B[1]<=q[3]+r};a.containsXY=m;a.containsXYWithMargin=function(q,B,r,A){return B>=q[0]-A&&r>=q[1]-A&&B<=q[2]+A&&r<=q[3]+A};a.copy=h;a.create=l;a.distance=function(q,B){const r=(q[1]+q[3])/2,A=Math.max(Math.abs(B[0]-(q[0]+q[2])/2)-c(q)/2,0);q=Math.max(Math.abs(B[1]-r)-g(q)/2,0);return Math.sqrt(A*
A+q*q)};a.empty=function(q){return q?h(q,N):l(N)};a.equals=function(q,B){return E(q)&&E(B)?q[0]===B[0]&&q[1]===B[1]&&q[2]===B[2]&&q[3]===B[3]:q===B};a.expand=function(q,B,r){if(x.isNone(B))h(r,q);else if("length"in B)if(E(B))r[0]=Math.min(q[0],B[0]),r[1]=Math.min(q[1],B[1]),r[2]=Math.max(q[2],B[2]),r[3]=Math.max(q[3],B[3]);else{if(2===B.length||3===B.length)r[0]=Math.min(q[0],B[0]),r[1]=Math.min(q[1],B[1]),r[2]=Math.max(q[2],B[0]),r[3]=Math.max(q[3],B[1])}else switch(B.type){case "extent":r[0]=Math.min(q[0],
B.xmin);r[1]=Math.min(q[1],B.ymin);r[2]=Math.max(q[2],B.xmax);r[3]=Math.max(q[3],B.ymax);break;case "point":r[0]=Math.min(q[0],B.x),r[1]=Math.min(q[1],B.y),r[2]=Math.max(q[2],B.x),r[3]=Math.max(q[3],B.y)}};a.expandPointInPlace=function(q,B){B[0]<q[0]&&(q[0]=B[0]);B[0]>q[2]&&(q[2]=B[0]);B[1]<q[1]&&(q[1]=B[1]);B[1]>q[3]&&(q[3]=B[1])};a.expandWithNestedArray=function(q,B,r=q){const A=B.length;let H=q[0],O=q[1],Q=q[2];q=q[3];for(let S=0;S<A;S++){const n=B[S];H=Math.min(H,n[0]);O=Math.min(O,n[1]);Q=Math.max(Q,
n[0]);q=Math.max(q,n[1])}r[0]=H;r[1]=O;r[2]=Q;r[3]=q;return r};a.fromExtent=function(q,B=l()){B[0]=q.xmin;B[1]=q.ymin;B[2]=q.xmax;B[3]=q.ymax;return B};a.fromValues=function(q,B,r,A,H=l()){H[0]=q;H[1]=B;H[2]=r;H[3]=A;return H};a.height=g;a.intersection=function(q,B,r){if(x.isNone(B))return h(r,q);const A=B[0],H=B[1],O=B[2];B=B[3];r[0]=T.clamp(q[0],A,O);r[1]=T.clamp(q[1],H,B);r[2]=T.clamp(q[2],A,O);r[3]=T.clamp(q[3],H,B);return r};a.intersects=function(q,B){return Math.max(B[0],q[0])<=Math.min(B[2],
q[2])&&Math.max(B[1],q[1])<=Math.min(B[3],q[3])};a.intersectsSegment=function(q,B,r){const A=q[0],H=q[1],O=q[2];q=q[3];const {x:Q,y:S}=B,{x:n,y:u}=r;var F=(la,V)=>0>(u-S)*la+(Q-n)*V+(n*S-Q*u);B=F(A,q);r=F(O,q);const U=F(O,H);F=F(A,H);return B===r&&r===U&&U===F&&F===B||Q<A&&n<A||Q>O&&n>O||S>q&&u>q||S<H&&u<H?!1:!0};a.intersectsSphere=function(q,B){const r=B[3];var A=Math.abs(B[0]-.5*(q[0]+q[2]));const H=.5*(q[2]-q[0]);if(A>r+H)return!1;var O=.5*(q[3]-q[1]);q=Math.abs(B[1]-.5*(q[1]+q[3]));if(q>r+O)return!1;
if(A<H||q<O)return!0;A-=H;O=q-O;return A*A+O*O<=r*r};a.is=E;a.isPoint=function(q){return(0===c(q)||!isFinite(q[0]))&&(0===g(q)||!isFinite(q[1]))};a.offset=function(q,B,r,A=q){A[0]=q[0]+B;A[1]=q[1]+r;A[2]=q[2]+B;A[3]=q[3]+r;return A};a.pad=function(q,B,r=q){r[0]=q[0]-B;r[1]=q[1]-B;r[2]=q[2]+B;r[3]=q[3]+B;return r};a.setMax=function(q,B,r=q){r[2]=B[0];r[3]=B[1];r!==q&&(r[0]=q[0],r[1]=q[1]);return q};a.setMin=function(q,B,r=q){r[0]=B[0];r[1]=B[1];r!==q&&(r[2]=q[2],r[3]=q[3]);return r};a.size=function(q,
B){B[0]=q[2]-q[0];B[1]=q[3]-q[1]};a.toExtent=function(q,B){return new p({xmin:q[0],ymin:q[1],xmax:q[2],ymax:q[3],spatialReference:B})};a.width=c;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(a,b){const T=Math.PI/180;var x=b.earth.radius;const p=b.earth.eccentricitySquared;x={a1:x*p,a2:x*p*x*p,a3:x*p*p/2,a4:x*p*x*p*2.5,a5:x*p+x*p*p/2,a6:1-p};b={4267:{a:6378206.4,
f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,
f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,
f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},
104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};a.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;a.earthEllipsoidConstants=x;a.spheroids=b;a.toRadians=T;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(a){return function(){function b(x){this.steps=[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(x&&x.steps)for(const p of x.steps)p instanceof a?this.steps.push(p):this.steps.push(new a({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}b.cacheKey=function(x,p){return[void 0!==x.wkid&&null!==x.wkid?x.wkid.toString():"-1",void 0!==x.wkt&&null!==x.wkt?x.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};
b.fromGE=function(x){const p=new b;let l="";for(const h of x.steps)x=a.fromGE(h),p.steps.push(x),l+=x.uid.toString()+",";p._cachedProjection={};p._gtlistentry=null;p._chain=l;return p};var T=b.prototype;T.getInverse=function(){const x=new b;x.steps=[];for(let p=this.steps.length-1;0<=p;p--)x.steps.push(this.steps[p].getInverse());return x};T.getGTListEntry=function(){let x="";for(const p of this.steps)x+=p.uid.toString()+",";x!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=
x);return this._gtlistentry};T.assignCachedGe=function(x,p,l){this._cachedProjection[b.cacheKey(x,p)]=l};T.getCachedGeTransformation=function(x,p){let l="";for(const h of this.steps)l+=h.uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=l);x=this._cachedProjection[b.cacheKey(x,p)];return void 0===x?null:x};return b}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(a){let b=
0;return function(){function T(x){this.uid=b++;x?(this._wkt=null!=x.wkt?x.wkt:null,this._wkid=null!=x.wkid?x.wkid:-1,this._isInverse=null!=x.isInverse?!0===x.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}T.fromGE=function(x){const p=new T;p._wkt=x.wkt;p._wkid=x.wkid;p._isInverse=x.isInverse;return p};T.prototype.getInverse=function(){const x=new T;x._wkt=this.wkt;x._wkid=this._wkid;x._isInverse=!this.isInverse;return x};a._createClass(T,[{key:"wkt",get:function(){return this._wkt},
set:function(x){this._wkt=x;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},set:function(x){this._wkid=x;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},set:function(x){this._isInverse=x;this.uid=b++}}]);return T}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(a,b,T,x){a.getGeometryZScaler=function(p,l,h){if(b.isNone(l)||b.isNone(h)||h.vcsWkid||x.equals(l,h))return null;
l=T.getMetersPerVerticalUnitForSR(l);h=T.getMetersPerVerticalUnitForSR(h);const c=l/h;if(1===c)return null;switch(p){case "point":case "esriGeometryPoint":return g=>{g&&null!=g.z&&(g.z*=c)};case "polyline":case "esriGeometryPolyline":return g=>{if(g)for(const m of g.paths)for(const E of m)2<E.length&&(E[2]*=c)};case "polygon":case "esriGeometryPolygon":return g=>{if(g)for(const m of g.rings)for(const E of m)2<E.length&&(E[2]*=c)};case "multipoint":case "esriGeometryMultipoint":return g=>{if(g)for(const m of g.points)2<
m.length&&(m[2]*=c)};case "extent":case "esriGeometryExtent":return g=>{g&&null!=g.zmin&&null!=g.zmax&&(g.zmin*=c,g.zmax*=c)};default:return null}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(a){let b=function(h,c,g){this.x=h;this.y=c;this.spatialReference=g;this.m=this.z=void 0},T=function(h,c,g,m){this.rings=h;this.spatialReference=c;this.hasM=this.hasZ=void 0;g&&(this.hasZ=
g);m&&(this.hasM=m)},x=function(h,c,g,m){this.paths=h;this.spatialReference=c;this.hasM=this.hasZ=void 0;g&&(this.hasZ=g);m&&(this.hasM=m)},p=function(h,c,g,m){this.points=h;this.spatialReference=c;this.hasM=this.hasZ=void 0;g&&(this.hasZ=g);m&&(this.hasM=m)},l=function(h,c,g,m,E){this.xmin=h;this.ymin=c;this.xmax=g;this.ymax=m;this.spatialReference=E;this.mmax=this.mmin=this.zmax=this.zmin=void 0};a.jsonAdapter={convertToGEGeometry:function(h,c){return null==c?null:h.convertJSONToGeometry(c)},exportPoint:function(h,
c,g){g=new b(h.getPointX(c),h.getPointY(c),g);const m=h.hasZ(c),E=h.hasM(c);m&&(g.z=h.getPointZ(c));E&&(g.m=h.getPointM(c));return g},exportPolygon:function(h,c,g){return new T(h.exportPaths(c),g,h.hasZ(c),h.hasM(c))},exportPolyline:function(h,c,g){return new x(h.exportPaths(c),g,h.hasZ(c),h.hasM(c))},exportMultipoint:function(h,c,g){return new p(h.exportPoints(c),g,h.hasZ(c),h.hasM(c))},exportExtent:function(h,c,g){var m=h.hasZ(c);const E=h.hasM(c);g=new l(h.getXMin(c),h.getYMin(c),h.getXMax(c),
h.getYMax(c),g);m&&(m=h.getZExtent(c),g.zmin=m.vmin,g.zmax=m.vmax);E&&(h=h.getMExtent(c),g.mmin=h.vmin,g.mmax=h.vmax);return g}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(a){a.makeEdgeCandidate=function(b,T,x,p,l,h=!1){return{objectId:b,target:T,distance:x,type:"edge",start:p,end:l,draped:h}};a.makeVertexCandidate=function(b,T,x){return{objectId:b,target:T,distance:x,
type:"vertex"}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),
function(a,b,T,x,p,l,h,c,g,m,E,N,J,q){function B(){B=T._asyncToGenerator(function*(M,P,X){const {outFields:I,orderByFields:ha,groupByFieldsForStatistics:na,outStatistics:ta}=M;if(I)for(var da=0;da<I.length;da++)I[da]=I[da].trim();if(ha)for(da=0;da<ha.length;da++)ha[da]=ha[da].trim();if(na)for(da=0;da<na.length;da++)na[da]=na[da].trim();if(ta)for(da=0;da<ta.length;da++)ta[da].onStatisticField&&(ta[da].onStatisticField=ta[da].onStatisticField.trim());M.geometry&&!M.outSR&&(M.outSR=M.geometry.spatialReference);
return r(M,P,X)});return B.apply(this,arguments)}function r(M,P,X){return A.apply(this,arguments)}function A(){A=T._asyncToGenerator(function*(M,P,X){if(!M)return null;var {where:I}=M;M.where=I=I&&I.trim();if(!I||/^1 *= *1$/.test(I)||P&&P===I)M.where=null;if(!M.geometry)return M;P=yield O(M);M.distance=0;M.units=null;"esriSpatialRelEnvelopeIntersects"===M.spatialRel&&({spatialReference:I}=M.geometry,P=c.getGeometryExtent(P),P.spatialReference=I);if(P){yield q.checkProjectionSupport(P.spatialReference,
X);I=P.spatialReference;P=H(P,X)&&g.isExtent(P)?{spatialReference:I,rings:[[[P.xmin,P.ymin],[P.xmin,P.ymax],[P.xmax,P.ymax],[P.xmax,P.ymin],[P.xmin,P.ymin]]]}:P;I=(yield m.normalizeCentralMeridian(g.fromJSON(P)))[0];if(p.isNone(I))throw F;const ha="quantizationParameters"in M&&M.quantizationParameters?.tolerance||"maxAllowableOffset"in M&&M.maxAllowableOffset||0;P=ha&&H(P,X)?{densificationStep:8*ha}:void 0;I=I.toJSON();P=yield q.project(I,I.spatialReference,X,P);if(!P)throw F;P.spatialReference=X;
M.geometry=P}return M});return A.apply(this,arguments)}function H(M,P){if(!M)return!1;const X=M.spatialReference;return(g.isExtent(M)||g.isPolygon(M)||g.isPolyline(M))&&!E.equals(X,P)&&!h.canProjectWithoutEngine(X,P)}function O(M){return Q.apply(this,arguments)}function Q(){Q=T._asyncToGenerator(function*(M){const {distance:P,units:X}=M,I=M.geometry;if(null==P||"vertexAttributes"in I)return I;var ha=I.spatialReference;M=X?u.fromJSON(X):l.getUnitString(ha);ha=ha&&(E.isGeographic(ha)||E.isWebMercator(ha))?
I:yield q.checkProjectionSupport(ha,E.WGS84).then(()=>q.project(I,E.WGS84));return(yield S())(ha.spatialReference,ha,P,M)});return Q.apply(this,arguments)}function S(){return n.apply(this,arguments)}function n(){n=T._asyncToGenerator(function*(){return(yield new Promise((M,P)=>a(["../../../geometry/geometryEngineJSON"],M,P))).geodesicBuffer});return n.apply(this,arguments)}const u=new x.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),F=Object.freeze({}),U=new J,la=new J,V=new J,C={esriGeometryPoint:N.convertToPoint,esriGeometryPolyline:N.convertToPolyline,esriGeometryPolygon:N.convertToPolygon,esriGeometryMultipoint:N.convertToMultipoint},K=(M,P)=>"_geVersion"!==M?P:void 0;b.QUERY_ENGINE_EMPTY_RESULT=F;b.cleanFromGeometryEngine=function(M){return M&&"_geVersion"in M?JSON.parse(JSON.stringify(M,K)):M};b.getGeometry=function(M,P,X,I,ha,na,ta=
P,da=X){const v=P&&ta,D=X&&da;I=p.isSome(I)?"coords"in I?I:I.geometry:null;if(p.isNone(I))return null;if(ha)return P=N.generalizeOptimizedGeometry(la,I,P,X,M,ha,ta,da),na&&(P=N.quantizeOptimizedGeometry(V,P,v,D,M,na)),C[M]?.(P,v,D)??null;if(na)return na=N.quantizeOptimizedGeometry(V,I,P,X,M,na,ta,da),C[M]?.(na,v,D)??null;N.removeZMValues(U,I,P,X,ta,da);return C[M]?.(U,v,D)??null};b.normalizeQuery=function(M,P,X){return B.apply(this,arguments)};b.normalizeQueryLike=r;b.transformCentroid=function(M,
P,X,I=M.hasZ,ha=M.hasM){if(p.isNone(P))return null;const na=M.hasZ&&I,ta=M.hasM&&ha;return X?(M=N.quantizeOptimizedGeometry(V,P,M.hasZ,M.hasM,"esriGeometryPoint",X,I,ha),N.convertToPoint(M,na,ta)):N.convertToPoint(P,na,ta)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),
function(a,b,T,x,p,l,h,c,g,m,E,N,J){function q(n){const u=[];let F=0,U=0;for(let la=0;la<n.length;la++){const V=n[la];let C=null;for(let K=0;K<V.length;K++)C=V[K],u.push(C),0===K?U=F=C[0]:(F=Math.min(F,C[0]),U=Math.max(U,C[0]));C&&u.push([(F+U)/2,0])}return u}function B(n,u){if(!(n instanceof c||n instanceof h))throw S.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new x("straightLineDensify: the input geometry is neither polyline nor polygon");var F=g.getGeometryParts(n);
const U=[];for(const V of F){F=[];U.push(F);F.push([V[0][0],V[0][1]]);for(let C=0;C<V.length-1;C++){const K=V[C][0],M=V[C][1],P=V[C+1][0],X=V[C+1][1];var la=Math.sqrt((P-K)*(P-K)+(X-M)*(X-M));const I=(X-M)/la,ha=(P-K)/la,na=la/u;if(1<na){for(let ta=1;ta<=na-1;ta++){const da=ta*u;F.push([ha*da+K,I*da+M])}la=(la+Math.floor(na-1)*u)/2;F.push([ha*la+K,I*la+M])}F.push([P,X])}}return"polygon"===n.type?new h({rings:U,spatialReference:n.spatialReference}):new c({paths:U,spatialReference:n.spatialReference})}
function r(n,u,F){u&&(n=B(n,1E6),n=E.webMercatorToGeographic(n,!0));F&&(n=g.updatePolyGeometry(n,F));return n}function A(n,u,F){if(Array.isArray(n)){var U=n[0];U>u?(F=g.offsetMagnitude(U,u),n[0]=U+-2*F*u):U<F&&(u=g.offsetMagnitude(U,F),n[0]=U+-2*u*F)}else U=n.x,U>u?(F=g.offsetMagnitude(U,u),n=n.clone().offset(-2*F*u,0)):U<F&&(u=g.offsetMagnitude(U,F),n=n.clone().offset(-2*u*F,0));return n}function H(n,u){let F=-1;for(let U=0;U<u.cutIndexes.length;U++){const la=u.cutIndexes[U],V=u.geometries[U],C=
g.getGeometryParts(V);for(let K=0;K<C.length;K++){const M=C[K];M.some(P=>{if(180>P[0])return!0;P=0;for(var X=0;X<M.length;X++){var I=M[X][0];P=I>P?I:P}P=Number(P.toFixed(9));P=-360*g.offsetMagnitude(P,180);for(X=0;X<M.length;X++)I=V.getPoint(K,X),V.setPoint(K,X,I.clone().offset(P,0));return!0})}if(la===F)if("polygon"===n[0].type)for(const K of g.getGeometryParts(V))n[la]=n[la].addRing(K);else{if("polyline"===n[0].type)for(const K of g.getGeometryParts(V))n[la]=n[la].addPath(K)}else F=la,n[la]=V}return n}
function O(n,u,F){return Q.apply(this,arguments)}function Q(){Q=b._asyncToGenerator(function*(n,u,F){if(!Array.isArray(n))return O([n],u);u&&"string"!==typeof u&&S.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var U="string"===typeof u?u:u?.url??T.geometryServiceUrl;let la,V,C;let K=0;var M=[];u=[];for(var P of n)if(l.isNone(P))u.push(P);else{if(!X){var X=P.spatialReference;var I=m.getInfo(X);var ha=(la=X.isWebMercator)?102100:4326;V=g.cutParams[ha].maxX;
C=g.cutParams[ha].minX;var na=g.cutParams[ha].plus180Line;ha=g.cutParams[ha].minus180Line}if(I)if("mesh"===P.type)u.push(P);else if("point"===P.type)u.push(A(P.clone(),V,C));else if("multipoint"===P.type){var ta=P.clone();ta.points=ta.points.map(da=>A(da,V,C));u.push(ta)}else if("extent"===P.type)ta=P.clone()._normalize(!1,!1,I),u.push(ta.rings?new h(ta):ta);else if(P.extent){ta=P.extent;const da=2*g.offsetMagnitude(ta.xmin,C)*V;let v=0===da?P.clone():g.updatePolyGeometry(P.clone(),da);ta.offset(da,
0);ta.intersects(na)&&ta.xmax!==V?(K=ta.xmax>K?ta.xmax:K,v=r(v,la),M.push(v),u.push("cut")):ta.intersects(ha)&&ta.xmin!==C?(K=2*ta.xmax*V>K?2*ta.xmax*V:K,v=r(v,la,360),M.push(v),u.push("cut")):u.push(v)}else u.push(P.clone());else u.push(P)}X=g.offsetMagnitude(K,V);I=-90;na=X;for(P=new c;0<X;)ha=-180+360*X,P.addPath([[ha,I],[ha,-1*I]]),I*=-1,X--;if(0<M.length&&0<na){X=yield N.cut(U,M,P,F);X=H(M,X);I=[];M=[];for(na=0;na<u.length;na++)P=u[na],"cut"!==P?M.push(P):(P=X.shift(),ha=n[na],l.isSome(ha)&&
"polygon"===ha.type&&ha.rings&&1<ha.rings.length&&P.rings.length>=ha.rings.length?(I.push(P),M.push("simplify")):M.push(la?E.geographicToWebMercator(P):P));if(!I.length)return M;u=yield J.simplify(U,I,F);n=[];for(F=0;F<M.length;F++)U=M[F],"simplify"!==U?n.push(U):n.push(la?E.geographicToWebMercator(u.shift()):u.shift());return n}n=[];for(F=0;F<u.length;F++)U=u[F],"cut"!==U?n.push(U):(U=M.shift(),n.push(!0===la?E.geographicToWebMercator(U):U));return n});return Q.apply(this,arguments)}const S=p.getLogger("esri.geometry.support.normalizeUtils");
a.getDenormalizedExtent=function(n){if(!n)return null;const u=n.extent;if(!u)return null;var F=n.spatialReference&&m.getInfo(n.spatialReference);if(!F)return u;const [U,la]=F.valid;({width:F}=u);let {xmin:V,xmax:C}=u;[V,C]=[C,V];if("extent"===n.type||0===F||F<=la||F>2*la||V<U||C>la)return u;let K;switch(n.type){case "polygon":if(1<n.rings.length)K=q(n.rings);else return u;break;case "polyline":if(1<n.paths.length)K=q(n.paths);else return u;break;case "multipoint":K=n.points}n=u.clone();for(let M=
0;M<K.length;M++){let P=K[M][0];0>P?(P+=la,C=Math.max(P,C)):(P-=la,V=Math.min(P,V))}n.xmin=V;n.xmax=C;return n.width<F?(n.xmin-=la,n.xmax-=la,n):u};a.normalizeCentralMeridian=O;a.normalizeMapX=function(n,u){if(u=m.getInfo(u)){const [F,U]=u.valid;u=U-F;if(n<F)for(;n<F;)n+=u;if(n>U)for(;n>U;)n-=u}return n};a.straightLineDensify=B;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline",
"../SpatialReference","./jsonUtils"],function(a,b,T,x){function p(l){return x.isPolygon(l)?l.rings:l.paths}b={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new b({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:T.WebMercator}),minus180Line:new b({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:T.WebMercator})},4326:{maxX:180,minX:-180,
plus180Line:new b({paths:[[[180,-180],[180,180]]],spatialReference:T.WGS84}),minus180Line:new b({paths:[[[-180,-180],[-180,180]]],spatialReference:T.WGS84})}};a.cutParams=b;a.getGeometryParts=p;a.offsetMagnitude=function(l,h){return Math.ceil((l-h)/(2*h))};a.updatePolyGeometry=function(l,h){const c=p(l);for(const g of c)for(const m of g)m[0]+=h;return l};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(a,b,T,x,p,l){function h(){h=b._asyncToGenerator(function*(c,g,m,E){c=l.parseUrl(c);const N=g[0].spatialReference;g={...E,query:{...c.query,f:"json",sr:JSON.stringify(N),target:JSON.stringify({geometryType:p.getJsonType(g[0]),geometries:g}),cutter:JSON.stringify(m)}};g=yield x(c.path+"/cut",g);const {cutIndexes:J,geometries:q=[]}=g.data;return{cutIndexes:J,geometries:q.map(B=>{B=p.fromJSON(B);B.spatialReference=N;return B})}});return h.apply(this,arguments)}a.cut=function(c,g,m,E){return h.apply(this,
arguments)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(a,b,T,x,p,l){function h(c,g,m){const E={};for(const J in c)if("declaredClass"!==J){var N=c[J];if(null!=N&&"function"!==typeof N)if(Array.isArray(N)){E[J]=[];for(let q=0;q<N.length;q++)E[J][q]=h(N[q])}else"object"===typeof N?N.toJSON?(N=N.toJSON(m&&m[J]),E[J]=
g?N:JSON.stringify(N)):E[J]=g?N:JSON.stringify(N):E[J]=N}return E}a.asValidOptions=function(c,g){return g?{...g,query:{...c,...g.query}}:{query:c}};a.encode=h;a.getToken=function(c,g){return l.supportsApiKey(c)&&(g||b.apiKey)?g||b.apiKey:T.id?.findCredential(c)?.token};a.parseUrl=function(c){return"string"===typeof c?p.urlToObject(c):x.clone(c)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(a,b,T,x,p,l){function h(){h=b._asyncToGenerator(function*(c,g,m){const E="string"===typeof c?x.urlToObject(c):c;c=g[0].spatialReference;const N=p.getJsonType(g[0]);g={...m,query:{...E.query,f:"json",sr:c.wkid?c.wkid:JSON.stringify(c),geometries:JSON.stringify(l.encodeGeometries(g))}};({data:g}=yield T(E.path+"/simplify",g));return l.decodeGeometries(g.geometries,N,c)});return h.apply(this,arguments)}a.simplify=function(c,g,m){return h.apply(this,arguments)};Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(a,b){a.decodeGeometries=function(T,x,p){const l=b.getGeometryType(x);return T.map(h=>{h=l.fromJSON(h);h.spatialReference=p;return h})};a.encodeGeometries=function(T){return{geometryType:b.getJsonType(T[0]),geometries:T.map(x=>x.toJSON())}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(a,b,T,x,p,l,h,c){function g(z,L){return z?L?4:3:L?3:2}function m(z,L,aa,Z){if(z){if(aa)return L&&Z?t:Ra;if(L&&Z)return e}else if(L&&Z)return Ra;return Ka}function E({scale:z,translate:L},aa){return Math.round((aa-L[0])/z[0])}function N({scale:z,translate:L},aa){return Math.round((L[1]-aa)/z[1])}function J({scale:z,translate:L},aa,Z){return aa*z[Z]+L[Z]}function q(z){z=z.coords;return{x:z[0],y:z[1]}}function B(z,L){z.coords[0]=L.x;z.coords[1]=L.y;return z}function r(z){z=z.coords;return{x:z[0],
y:z[1],z:z[2]}}function A(z,L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.z;return z}function H(z){z=z.coords;return{x:z[0],y:z[1],m:z[2]}}function O(z,L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.m;return z}function Q(z){z=z.coords;return{x:z[0],y:z[1],z:z[2],m:z[3]}}function S(z,L){z.coords[0]=L.x;z.coords[1]=L.y;z.coords[2]=L.z;z.coords[3]=L.m;return z}function n(z,L){return z&&L?S:z?A:L?O:B}function u(z,L,aa,Z,ka){aa=n(aa,Z);for(const {geometry:ma,attributes:ra}of L)L=x.isSome(ma)?aa(new c,
ma):null,z.push(new l.OptimizedFeature(L,ra,null,ka?ra[ka]:void 0));return z}function F(z,L,aa,Z){for(const {geometry:ka,attributes:ma}of L)z.push({attributes:ma,geometry:x.isSome(ka)?U(ka,aa,Z):null});return z}function U(z,L,aa){if(x.isNone(z))return null;const Z=g(L,aa),ka=[];for(let ma=0;ma<z.coords.length;ma+=Z){const ra=[];for(let va=0;va<Z;va++)ra.push(z.coords[ma+va]);ka.push(ra)}return L?aa?{points:ka,hasZ:L,hasM:aa}:{points:ka,hasZ:L}:aa?{points:ka,hasM:aa}:{points:ka}}function la(z,L,aa,
Z,ka){aa=g(aa,Z);for(const {geometry:ma,attributes:ra}of L)L=x.isSome(ma)?V(new c,ma,aa):null,z.push(new l.OptimizedFeature(L,ra,null,ka?ra[ka]:void 0));return z}function V(z,L,aa=g(L.hasZ,L.hasM)){z.lengths[0]=L.points.length;const Z=z.coords;let ka=0;for(const ma of L.points)for(L=0;L<aa;L++)Z[ka++]=ma[L];return z}function C(z,L,aa){if(!z)return null;const Z=g(L,aa),{coords:ka,lengths:ma}=z;z=[];let ra=0;for(const va of ma){const wa=[];for(let ca=0;ca<va;ca++){const fa=[];for(let pa=0;pa<Z;pa++)fa.push(ka[ra++]);
wa.push(fa)}z.push(wa)}return L?aa?{paths:z,hasZ:L,hasM:aa}:{paths:z,hasZ:L}:aa?{paths:z,hasM:aa}:{paths:z}}function K(z,L,aa,Z,ka){aa=g(aa,Z);for(const {geometry:ma,attributes:ra}of L)L=x.isSome(ma)?M(new c,ma,aa):null,z.push(new l.OptimizedFeature(L,ra,null,ka?ra[ka]:void 0));return z}function M(z,L,aa=g(L.hasZ,L.hasM)){const {lengths:Z,coords:ka}=z;let ma=0;for(const ra of L.paths){for(const va of ra)for(L=0;L<aa;L++)ka[ma++]=va[L];Z.push(ra.length)}return z}function P(z,L,aa){if(!z)return null;
const Z=g(L,aa),{coords:ka,lengths:ma}=z;z=[];let ra=0;for(const va of ma){const wa=[];for(let ca=0;ca<va;ca++){const fa=[];for(let pa=0;pa<Z;pa++)fa.push(ka[ra++]);wa.push(fa)}z.push(wa)}return L?aa?{rings:z,hasZ:L,hasM:aa}:{rings:z,hasZ:L}:aa?{rings:z,hasM:aa}:{rings:z}}function X(z,L,aa,Z,ka){for(const {geometry:ma,centroid:ra,attributes:va}of L){L=x.isSome(ma)?I(new c,ma,aa,Z):null;const wa=ka?va[ka]:void 0;x.isSome(ra)?z.push(new l.OptimizedFeature(L,va,B(new c,ra),wa)):z.push(new l.OptimizedFeature(L,
va,null,wa))}return z}function I(z,L,aa=L.hasZ,Z=L.hasM){ha(z,L.rings,aa,Z);return z}function ha(z,L,aa,Z){aa=g(aa,Z);const {lengths:ka,coords:ma}=z;Z=0;R(z);for(const ra of L){for(const va of ra)for(L=0;L<aa;L++)ma[Z++]=va[L];ka.push(ra.length)}return z}function na(z,L,aa,Z,ka,ma){ua(z);if(!aa){for(const ra of L)z.push(new l.OptimizedFeature(null,ra.attributes,null,ma?ra.attributes[ma]:void 0));return z}switch(aa){case "esriGeometryPoint":return u(z,L,Z,ka,ma);case "esriGeometryMultipoint":return la(z,
L,Z,ka,ma);case "esriGeometryPolyline":return K(z,L,Z,ka,ma);case "esriGeometryPolygon":return X(z,L,Z,ka,ma);default:ya.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${aa}'`)),ua(z)}return z}function ta(z,L,aa,Z){z=z&&("coords"in z?z:z.geometry);if(x.isNone(z))return null;switch(L){case "esriGeometryPoint":return L=q,aa&&Z?L=Q:aa?L=r:Z&&(L=H),L(z);case "esriGeometryMultipoint":return U(z,aa,Z);case "esriGeometryPolyline":return C(z,aa,Z);case "esriGeometryPolygon":return P(z,
aa,Z);default:return ya.error("convertToGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${L}'`)),null}}function da(z,L,aa,Z,ka){ua(z);if(x.isNone(aa)){for(const ra of L)z.push({attributes:ra.attributes});return z}switch(aa){case "esriGeometryPoint":aa=q;Z&&ka?aa=Q:Z?aa=r:ka&&(aa=H);for(var ma of L){const {geometry:ra,attributes:va}=ma;Z=x.isSome(ra)?aa(ra):null;z.push({attributes:va,geometry:Z})}break;case "esriGeometryMultipoint":return F(z,L,Z,ka);case "esriGeometryPolyline":for(const {geometry:ra,
attributes:va}of L)z.push({attributes:va,geometry:x.isSome(ra)?C(ra,Z,ka):null});break;case "esriGeometryPolygon":for(const {geometry:ra,attributes:va,centroid:wa}of L)ma=x.isSome(ra)?P(ra,Z,ka):null,x.isSome(wa)?(L=q(wa),z.push({attributes:va,centroid:L,geometry:ma})):z.push({attributes:va,geometry:ma});break;default:ya.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${aa}'`))}return z}function v(z,L,aa,Z,ka,ma,ra=aa,va=Z){R(z);if(x.isNone(L)||!L.coords.length)return null;
ka=La[ka];const {coords:wa,lengths:ca}=L;L=g(aa,Z);const fa=g(aa&&ra,Z&&va);aa=m(aa,Z,ra,va);if(!ca.length)return aa(z.coords,wa,0,0,E(ma,wa[0]),N(ma,wa[1])),R(z,L,0),z;let pa,Ba=0,Ea,Ha=0;for(const Ia of ca){if(Ia<ka)continue;let Ga=0;Ea=Ha;va=Z=E(ma,wa[Ba]);pa=ra=N(ma,wa[Ba+1]);aa(z.coords,wa,Ea,Ba,va,pa);Ga++;Ba+=L;Ea+=fa;for(let Ma=1;Ma<Ia;Ma++,Ba+=L)if(va=E(ma,wa[Ba]),pa=N(ma,wa[Ba+1]),va!==Z||pa!==ra)aa(z.coords,wa,Ea,Ba,va-Z,pa-ra),Ea+=fa,Ga++,Z=va,ra=pa;Ga>=ka&&(z.lengths.push(Ga),Ha=Ea)}ua(z.coords,
Ha);return z.coords.length?z:null}function D(z,L,aa,Z,ka,ma,ra){let va=Z,wa=0;for(let fa=ma+aa;fa<ra;fa+=aa){var ca=L[fa];const pa=L[fa+1],Ba=L[ra],Ea=L[ra+1];let Ha=L[ma],Ia=L[ma+1],Ga=Ba-Ha,Ma=Ea-Ia;if(0!==Ga||0!==Ma){const xa=((ca-Ha)*Ga+(pa-Ia)*Ma)/(Ga*Ga+Ma*Ma);1<xa?(Ha=Ba,Ia=Ea):0<xa&&(Ha+=Ga*xa,Ia+=Ma*xa)}Ga=ca-Ha;Ma=pa-Ia;ca=Ga*Ga+Ma*Ma;ca>va&&(wa=fa,va=ca)}va>Z&&(wa-ma>aa&&D(z,L,aa,Z,ka,ma,wa),ka(z,L,z.length,wa,L[wa],L[wa+1]),ra-wa>aa&&D(z,L,aa,Z,ka,wa,ra))}function y(z,L,aa,Z,ka){const {coords:ma,
lengths:ra}=L;aa=g(aa,Z);if(!ma.length)return z!==L&&R(z),z;x.assertIsSome(ka);const {originPosition:va,scale:wa,translate:ca}=ka;ka=qa;ka.originPosition=va;Z=ka.scale;Z[0]=wa[0]??1;Z[1]=-(wa[1]??1);Z[2]=wa[2]??1;Z[3]=wa[3]??1;var fa=ka.translate;fa[0]=ca[0]??0;fa[1]=ca[1]??0;fa[2]=ca[2]??0;fa[3]=ca[3]??0;if(!ra.length){for(Z=0;Z<aa;++Z)z.coords[Z]=J(ka,ma[Z],Z);z!==L&&R(z,aa,0);return z}fa=0;for(let Ba=0;Ba<ra.length;Ba++){const Ea=ra[Ba];z.lengths[Ba]=Ea;for(var pa=0;pa<aa;++pa)z.coords[fa+pa]=
J(ka,ma[fa+pa],pa);pa=z.coords[fa];let Ha=z.coords[fa+1];fa+=aa;for(let Ia=1;Ia<Ea;Ia++,fa+=aa){pa+=ma[fa]*Z[0];Ha+=ma[fa+1]*Z[1];z.coords[fa]=pa;z.coords[fa+1]=Ha;for(let Ga=2;Ga<aa;++Ga)z.coords[fa+Ga]=J(ka,ma[fa+Ga],Ga)}}z!==L&&R(z,ma.length,ra.length);return z}function f(z,L,aa,Z){let ka=0,ma=z[Z*L],ra=z[Z*(L+1)];for(let va=1;va<aa;va++){const wa=ma+z[Z*(L+va)],ca=ra+z[Z*(L+va)+1],fa=(wa-ma)*(ca+ra);ma=wa;ra=ca;ka+=fa}return.5*ka}function R(z,L=0,aa=0){ua(z.lengths,aa);ua(z.coords,L)}function ua(z,
L=0){z.length!==L&&(z.length=L)}const ya=T.getLogger("esri.layers.graphics.featureConversionUtils"),La={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Ka=(z,L,aa,Z,ka,ma)=>{z[aa]=ka;z[aa+1]=ma},Ra=(z,L,aa,Z,ka,ma)=>{z[aa]=ka;z[aa+1]=ma;z[aa+2]=L[Z+2]},e=(z,L,aa,Z,ka,ma)=>{z[aa]=ka;z[aa+1]=ma;z[aa+2]=L[Z+3]},t=(z,L,aa,Z,ka,ma)=>{z[aa]=ka;z[aa+1]=ma;z[aa+2]=L[Z+2];z[aa+3]=L[Z+3]},ia=[],ja=[],qa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,
0]};a.convertFromFeature=function(z,L,aa,Z,ka){ia[0]=z;[z]=na(ja,ia,L,aa,Z,ka);ua(ia);ua(ja);return z};a.convertFromFeatureSet=function(z,L){const aa=new h,{hasM:Z,hasZ:ka,features:ma,objectIdFieldName:ra,spatialReference:va,geometryType:wa,exceededTransferLimit:ca,transform:fa,fields:pa}=z;pa&&(aa.fields=pa);aa.geometryType=wa??null;aa.objectIdFieldName=ra??L??null;aa.spatialReference=va??null;if(!aa.objectIdFieldName)return ya.error(new b("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),
aa;ma&&na(aa.features,ma,wa,ka,Z,aa.objectIdFieldName);ca&&(aa.exceededTransferLimit=ca);Z&&(aa.hasM=Z);ka&&(aa.hasZ=ka);fa&&(aa.transform=fa);return aa};a.convertFromFeatures=na;a.convertFromGeometry=function(z,L,aa){if(x.isNone(z))return null;const Z=new c;"hasZ"in z&&null==L&&(L=z.hasZ);"hasM"in z&&null==aa&&(aa=z.hasM);if(p.isPoint(z))return n(null!=L?L:null!=z.z,null!=aa?aa:null!=z.m)(Z,z);if(p.isPolygon(z))return I(Z,z,L,aa);if(p.isPolyline(z))return M(Z,z,g(L,aa));if(p.isMultipoint(z))return V(Z,
z,g(L,aa));ya.error("convertFromGeometry:unknown-geometry",new b(`Unable to parse unknown geometry type '${z}'`))};a.convertFromGraphics=function(z,L,aa,Z,ka,ma){const ra=z.length;switch(aa){case "esriGeometryPoint":u(z,L,Z,ka,ma);break;case "esriGeometryMultipoint":la(z,L,Z,ka,ma);break;case "esriGeometryPolyline":K(z,L,Z,ka,ma);break;case "esriGeometryPolygon":X(z,L,Z,ka,ma);break;default:ya.error("convertToFeatureSet:unknown-geometry",new b(`Unable to parse unknown geometry type '${aa}'`))}for(Z=
0;Z<L.length;Z++)z[Z+ra].geometryType=aa,z[Z+ra].insertAfter=L[Z].insertAfter,z[Z+ra].groupId=L[Z].groupId;return z};a.convertFromMultipoint=V;a.convertFromMultipointFeatures=la;a.convertFromNestedArray=ha;a.convertFromPoint=function(z,L,aa=n(null!=L.z,null!=L.m)){return aa(z,L)};a.convertFromPointFeatures=u;a.convertFromPolygon=I;a.convertFromPolyline=M;a.convertFromPolylineFeatures=K;a.convertToFeature=function(z,L,aa,Z){ja[0]=z;da(ia,ja,L,aa,Z);z=ia[0];ua(ia);ua(ja);return z};a.convertToFeatureSet=
function(z){const {objectIdFieldName:L,spatialReference:aa,transform:Z,fields:ka,hasM:ma,hasZ:ra,features:va,geometryType:wa,exceededTransferLimit:ca,uniqueIdField:fa,queryGeometry:pa,queryGeometryType:Ba}=z;z=da([],va,wa,ra,ma);const Ea=ta(pa,Ba,!1,!1);z={features:z,fields:ka,geometryType:wa,objectIdFieldName:L,spatialReference:aa,uniqueIdField:fa,queryGeometry:Ea};Z&&(z.transform=Z);ca&&(z.exceededTransferLimit=ca);ma&&(z.hasM=ma);ra&&(z.hasZ=ra);return z};a.convertToFeatures=da;a.convertToGeometry=
ta;a.convertToMultipoint=U;a.convertToMultipointFeatures=F;a.convertToPoint=function(z,L,aa){return z?L?aa?Q(z):r(z):aa?H(z):q(z):null};a.convertToPolygon=P;a.convertToPolyline=C;a.deltaDecodeGeometry=function(z,L){if(x.isNone(z))return null;const aa=z.clone(),Z=z.coords;z=z.lengths;let ka=0;for(let va=0;va<z.length;va++){const wa=z[va];var ma=Z[L*ka],ra=Z[L*ka+1];for(let ca=1;ca<wa;ca++)ma+=Z[L*(ka+ca)],ra+=Z[L*(ka+ca)+1],aa.coords[L*(ka+ca)]=ma,aa.coords[L*(ka+ca)+1]=ra;ka+=wa}return aa};a.deltaEncodeGeometry=
function(z,L){const aa=z.clone(),Z=z.coords;z=z.lengths;let ka=0;for(let ra=0;ra<z.length;ra++){const va=z[ra];let wa=Z[L*ka];var ma=Z[L*ka+1];for(let ca=1;ca<va;ca++){const fa=Z[L*(ka+ca)],pa=Z[L*(ka+ca)+1];ma=pa-ma;aa.coords[L*(ka+ca)]=fa-wa;aa.coords[L*(ka+ca)+1]=ma;wa=fa;ma=pa}ka+=va}return aa};a.generalizeOptimizedGeometry=function(z,L,aa,Z,ka,ma,ra=aa,va=Z){R(z);if(!L||!L.coords.length)return null;ka=La[ka];const {coords:wa,lengths:ca}=L;L=g(aa,Z);const fa=g(aa&&ra,Z&&va);aa=m(aa,Z,ra,va);if(!ca.length)return aa(z.coords,
wa,0,0,wa[0],wa[1]),R(z,L,0),z;Z=0;ma*=ma;for(const pa of ca){if(pa<ka){Z+=pa*L;continue}ra=z.coords.length/fa;va=Z;const Ba=Z+(pa-1)*L;aa(z.coords,wa,z.coords.length,va,wa[va],wa[va+1]);D(z.coords,wa,L,ma,aa,va,Ba);aa(z.coords,wa,z.coords.length,Ba,wa[Ba],wa[Ba+1]);va=z.coords.length/fa-ra;va>=ka?z.lengths.push(va):ua(z.coords,ra*fa);Z+=pa*L}return z.coords.length?z:null};a.getBoundsOptimizedGeometry=function(z,L,aa,Z){if(x.isNone(L)||!L.coords||!L.coords.length)return null;aa=g(aa,Z);let ka=Z=Number.POSITIVE_INFINITY,
ma=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY;if(L&&L.coords){L=L.coords;for(let va=0;va<L.length;va+=aa){const wa=L[va],ca=L[va+1];Z=Math.min(Z,wa);ma=Math.max(ma,wa);ka=Math.min(ka,ca);ra=Math.max(ra,ca)}}z[0]=Z;z[1]=ka;z[2]=ma;z[3]=ra;return z};a.getQuantizedArea=function(z,L){const {coords:aa,lengths:Z}=z;let ka=z=0;for(let ma=0;ma<Z.length;ma++){const ra=Z[ma];ka+=f(aa,z,ra,L);z+=ra}return Math.abs(ka)};a.getQuantizedBoundsOptimizedGeometry=function(z,L,aa,Z){aa=g(aa,Z);const {lengths:ka,
coords:ma}=L;Z=L=Number.POSITIVE_INFINITY;let ra=Number.NEGATIVE_INFINITY,va=Number.NEGATIVE_INFINITY,wa=0;for(const ca of ka){let fa=ma[wa],pa=ma[wa+1];L=Math.min(fa,L);Z=Math.min(pa,Z);ra=Math.max(fa,ra);va=Math.max(pa,va);wa+=aa;for(let Ba=1;Ba<ca;Ba++,wa+=aa){const Ea=ma[wa],Ha=ma[wa+1];fa+=Ea;pa+=Ha;0>Ea&&(L=Math.min(L,fa));0<Ea&&(ra=Math.max(ra,fa));0>Ha?Z=Math.min(Z,pa):0<Ha&&(va=Math.max(va,pa))}}z[0]=L;z[1]=Z;z[2]=ra;z[3]=va;return z};a.getSignedQuantizedRingArea=f;a.quantizeOptimizedFeatureSet=
function(z,L){const {geometryType:aa,features:Z,hasM:ka,hasZ:ma}=L;if(!z)return L;for(let ra=0;ra<Z.length;ra++){const va=Z[ra],wa=va.weakClone();wa.geometry=new c;v(wa.geometry,va.geometry,ka,ma,aa,z);va.centroid&&(wa.centroid=new c,v(wa.centroid,va.centroid,ka,ma,"esriGeometryPoint",z));Z[ra]=wa}L.transform=z;return L};a.quantizeOptimizedGeometry=v;a.quantizeX=E;a.quantizeY=N;a.removeCollinearVectices=function(z,L,aa,Z,ka){if(!L||!L.coords||!L.coords.length)return null;aa=La[aa];const {coords:ma,
lengths:ra}=L;L=m(Z,ka,Z,ka);Z=g(Z,ka);let va=ka=0,wa=0,ca=0;for(const Ba of ra){va=ca;L(z.coords,ma,va,ka,ma[ka],ma[ka+1]);ka+=Z;var fa=ma[ka];let Ea=ma[ka+1],Ha=fa,Ia=Ea;var pa=Ea/fa;va+=Z;L(z.coords,ma,va,ka,Ha,Ia);ka+=Z;for(let Ga=2;Ga<Ba;Ga++){fa=ma[ka];Ea=ma[ka+1];const Ma=Ea/fa,xa=pa===Ma||!isFinite(pa)&&!isFinite(Ma);pa=xa&&isFinite(Ma)?0<=pa&&0<=Ma||0>=pa&&0>=Ma:0<=Ia&&0<=Ea||0>=Ia&&0>=Ea;xa&&pa?(Ha+=fa,Ia+=Ea):(Ha=fa,Ia=Ea,va+=Z);L(z.coords,ma,va,ka,Ha,Ia);ka+=Z;pa=Ma}va+=Z;fa=(va-ca)/Z;
fa>=aa&&(z.lengths[wa]=fa,ca=va,wa++)}z.coords.length>ca&&(z.coords.length=ca);z.lengths.length>wa&&(z.lengths.length=wa);return z.coords.length&&z.lengths.length?z:null};a.removeZMValues=function(z,L,aa,Z,ka,ma){R(z);z.lengths.push(...L.lengths);if(aa===ka&&Z===ma)for(var ra=0;ra<L.coords.length;ra++)z.coords.push(L.coords[ra]);else for(ra=g(aa,Z),aa=m(aa,Z,ka,ma),L=L.coords,Z=0;Z<L.length;Z+=ra)aa(z.coords,L,z.coords.length,Z,L[Z],L[Z+1]);return z};a.unquantizeOptimizedFeatureSet=function(z){const {transform:L,
features:aa,hasM:Z,hasZ:ka}=z;if(!L)return z;for(const ma of aa)x.isSome(ma.geometry)&&y(ma.geometry,ma.geometry,Z,ka,L),x.isSome(ma.centroid)&&y(ma.centroid,ma.centroid,Z,ka,L);z.transform=null;return z};a.unquantizeOptimizedGeometry=y;a.unquantizeValue=J;a.unquantizeX=function(z,L){return J(z,L,0)};a.unquantizeY=function(z,L){return J(z,-L,1)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(a,b,T){let x=function(){function l(h=null,c={},g,m){this.geometry=h;this.attributes=c;this.centroid=g;this.objectId=m;this.geohashY=this.geohashX=this.displayId=0}l.prototype.weakClone=function(){const h=new l(this.geometry,this.attributes,this.centroid,this.objectId);h.displayId=this.displayId;h.geohashX=this.geohashX;h.geohashY=this.geohashY;return h};return l}(),p=function(l){function h(){return l.apply(this,arguments)||this}
b._inheritsLoose(h,l);return h}(x);a.OptimizedFeature=x;a.OptimizedFeatureWithGeometry=p;a.hasGeometry=function(l){return!(T.isNone(l.geometry)||!l.geometry.coords||!l.geometry.coords.length)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function a(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=
null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}a.prototype.weakClone=function(){const b=new a;b.objectIdFieldName=this.objectIdFieldName;b.globalIdFieldName=this.globalIdFieldName;b.geohashFieldName=this.geohashFieldName;b.geometryProperties=this.geometryProperties;b.geometryType=this.geometryType;b.spatialReference=this.spatialReference;b.hasZ=this.hasZ;b.hasM=this.hasM;
b.features=this.features;b.fields=this.fields;b.transform=this.transform;b.exceededTransferLimit=this.exceededTransferLimit;b.uniqueIdField=this.uniqueIdField;b.queryGeometry=this.queryGeometry;b.queryGeometryType=this.queryGeometryType;return b};return a}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(a){return function(){function b(x=[],p=[],l=!1){this.lengths=x??[];this.coords=p??[];this.hasIndeterminateRingOrder=l}b.fromRect=
function(x){const [p,l,h,c]=x;x=h-p;const g=c-l;return new b([5],[p,l,x,0,0,g,-x,0,0,-g])};var T=b.prototype;T.forEachVertex=function(x){let p=0;this.lengths.length||x(this.coords[0],this.coords[1]);for(let l=0;l<this.lengths.length;l++){const h=this.lengths[l];for(let c=0;c<h;c++)x(this.coords[2*(c+p)],this.coords[2*(c+p)+1]);p+=h}};T.clone=function(x){return x?(x.set(this.coords),new b(this.lengths.slice(),x,this.hasIndeterminateRingOrder)):new b(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};
a._createClass(b,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},{key:"size",get:function(){return this.lengths.reduce((x,p)=>x+p)}}]);return b}()})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(a,b,T,x,p,l,h,c){function g(ca,fa,pa){if(ca)for(const Ba of ca)(ca=
(ca=l.getDeepValue(Ba,fa))&&"function"!==typeof ca&&pa.get(ca))&&l.setDeepValue(Ba,ca.name,fa)}function m(ca,fa){if(!ca||!fa)return[];L.clear();E(L,ca,fa);return Array.from(L).sort()}function E(ca,fa,pa){if(pa)if(fa?.fields?.length)if(pa.includes("*"))for(const {name:Ba}of fa.fields)ca.add(Ba);else for(const Ba of pa)N(ca,fa,Ba);else if(pa.includes("*"))ca.clear(),ca.add("*");else for(const Ba of pa)null!=Ba&&ca.add(Ba)}function N(ca,fa,pa){"string"===typeof pa&&(fa?(fa=fa.get(pa))&&ca.add(fa.name):
ca.add(pa))}function J(ca,fa,pa){return q.apply(this,arguments)}function q(){q=T._asyncToGenerator(function*(ca,fa,pa){if(pa){var {arcadeUtils:Ba}=yield c.loadArcade();pa=Ba.extractFieldNames(pa,fa?.fields?.map(Ea=>Ea.name));for(const Ea of pa)N(ca,fa,Ea)}});return q.apply(this,arguments)}function B(ca,fa,pa){return r.apply(this,arguments)}function r(){r=T._asyncToGenerator(function*(ca,fa,pa){if(pa&&"1\x3d1"!==pa){const Ba=(yield new Promise((Ea,Ha)=>a(["../../core/sql/WhereClause"],Ea,Ha))).WhereClause.create(pa,
fa);if(!Ba.isStandardized)throw new x("fieldUtils:collectFilterFields","Where clause is not standardized",{where:pa});E(ca,fa,Ba.fieldNames)}});return r.apply(this,arguments)}function A(ca,fa){for(const pa of ca)if(pa&&pa.valueType&&pa.valueType===fa)return pa.name;return null}function H(){H=T._asyncToGenerator(function*(ca){if(!ca)return[];const fa=new Set;yield O(fa,ca);return Array.from(fa).sort()});return H.apply(this,arguments)}function O(ca,fa){return Q.apply(this,arguments)}function Q(){Q=
T._asyncToGenerator(function*(ca,fa){if(fa){var pa=l.getDeepValue("elevationInfo.featureExpressionInfo",fa);if(pa)return pa.collectRequiredFields(ca,fa.fieldsIndex)}});return Q.apply(this,arguments)}function S(){S=T._asyncToGenerator(function*(ca,fa,pa){if(fa&&pa&&"fields"in pa){var Ba=[];Ba.push(n(ca,fa,pa.popupTemplate));pa.fields&&Ba.push(...pa.fields.map(function(){var Ea=T._asyncToGenerator(function*(Ha){Ha.onStatisticExpression?J(ca,fa.fieldsIndex,Ha.onStatisticExpression.expression):ca.add(Ha.onStatisticField)});
return function(Ha){return Ea.apply(this,arguments)}}()));yield Promise.all(Ba)}});return S.apply(this,arguments)}function n(ca,fa,pa){return u.apply(this,arguments)}function u(){u=T._asyncToGenerator(function*(ca,fa,pa){const Ba=[];pa?.expressionInfos&&Ba.push(...pa.expressionInfos.map(Ea=>J(ca,fa.fieldsIndex,Ea.expression)));pa=pa?.content;if(Array.isArray(pa))for(const Ea of pa)"expression"===Ea.type&&Ea.expressionInfo&&Ba.push(J(ca,fa.fieldsIndex,Ea.expressionInfo.expression));yield Promise.all(Ba)});
return u.apply(this,arguments)}function F(){F=T._asyncToGenerator(function*(ca,fa,pa){fa&&(fa.timeInfo&&p.isSome(pa)&&pa.timeExtent&&E(ca,fa.fieldsIndex,[fa.timeInfo.startField,fa.timeInfo.endField]),fa.floorInfo&&E(ca,fa.fieldsIndex,[fa.floorInfo.floorField]),p.isSome(pa)&&p.isSome(pa.where)&&(yield B(ca,fa.fieldsIndex,pa.where)))});return F.apply(this,arguments)}function U(){U=T._asyncToGenerator(function*(ca,fa,pa){fa&&pa&&(yield Promise.all(pa.map(Ba=>la(ca,fa,Ba))))});return U.apply(this,arguments)}
function la(ca,fa,pa){return V.apply(this,arguments)}function V(){V=T._asyncToGenerator(function*(ca,fa,pa){fa&&pa&&(pa.valueExpression?yield J(ca,fa.fieldsIndex,pa.valueExpression):pa.field&&N(ca,fa.fieldsIndex,pa.field))});return V.apply(this,arguments)}function C(){C=T._asyncToGenerator(function*(ca){if(!ca)return[];const fa="timeInfo"in ca&&ca.timeInfo;return fa?m(ca.fieldsIndex,[ca.trackIdField,fa.startField,fa.endField]):[]});return C.apply(this,arguments)}function K(){K=T._asyncToGenerator(function*(ca){if(!ca)return[];
const fa=new Set;yield M(fa,ca);return Array.from(fa).sort()});return K.apply(this,arguments)}function M(ca,fa){return P.apply(this,arguments)}function P(){P=T._asyncToGenerator(function*(ca,fa){const {labelingInfo:pa,fieldsIndex:Ba}=fa;pa&&pa.length&&(yield Promise.all(pa.map(Ea=>X(ca,Ba,Ea))))});return P.apply(this,arguments)}function X(ca,fa,pa){return I.apply(this,arguments)}function I(){I=T._asyncToGenerator(function*(ca,fa,pa){if(pa){var Ba=pa.getLabelExpression();pa=pa.where;"arcade"===Ba.type?
yield J(ca,fa,Ba.expression):(Ba=Ba.expression.match(/{[^}]*}/g))&&Ba.forEach(Ea=>{N(ca,fa,Ea.slice(1,-1))});yield B(ca,fa,pa)}});return I.apply(this,arguments)}function ha(ca){return"number"===typeof ca&&!isNaN(ca)&&isFinite(ca)}function na(ca){return null===ca||ha(ca)}function ta(ca){return null===ca||aa(ca)}function da(ca){return null!=ca&&"string"===typeof ca}function v(ca){return null===ca||da(ca)}function D(){return!0}function y(ca,fa){let pa;switch(ca.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":pa=
ca.nullable?ta:aa;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":pa=ca.nullable?na:ha;break;case "string":case "esriFieldTypeString":pa=ca.nullable?v:da;break;default:pa=D}return 1===arguments.length?pa:pa(fa)}function f(ca){return null!=ca&&ka.has(ca.type)}function R(ca,fa){return ca.nullable&&null===fa?null:f(ca)&&!ua(ca.type,Number(fa))?b.NumericRangeValidationError.OUT_OF_RANGE:y(ca,fa)?ca.domain?h.validateDomainValue(ca.domain,fa):null:b.TypeValidationError.INVALID_TYPE}
function ua(ca,fa){ca="string"===typeof ca?ya(ca):ca;if(!ca)return!1;const pa=ca.min,Ba=ca.max;return ca.isInteger?aa(fa)&&fa>=pa&&fa<=Ba:fa>=pa&&fa<=Ba}function ya(ca){switch(ca){case "esriFieldTypeSmallInteger":case "small-integer":return ma;case "esriFieldTypeInteger":case "integer":return ra;case "esriFieldTypeSingle":case "single":return va;case "esriFieldTypeDouble":case "double":return wa}}function La(ca,fa,pa){if(!fa||!fa.attributes||!ca){if(p.isSome(pa))for(var Ba of ca??[])pa.add(Ba);return!0}fa=
fa.attributes;Ba=!1;for(const Ea of ca)if(!(Ea in fa))if(Ba=!0,p.isSome(pa))pa.add(Ea);else break;return Ba}function Ka(){Ka=T._asyncToGenerator(function*(ca,fa){const pa=new Set;for(const Ba of fa)yield J(pa,ca.fieldsIndex,Ba);return Array.from(pa).sort()});return Ka.apply(this,arguments)}const Ra=/^([0-9])/,e=/[^A-Za-z0-9_\u0080-\uffff]/g,t=/_{2,}/g,ia=/^_/,ja=/_$/,qa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
z=["field","normalizationField"],L=new Set,aa=(()=>"isInteger"in Number?Number.isInteger:ca=>"number"===typeof ca&&isFinite(ca)&&Math.floor(ca)===ca)(),Z=["integer","small-integer","single","double"],ka=new Set([...Z,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);b.NumericRangeValidationError=void 0;(b.NumericRangeValidationError||(b.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";b.TypeValidationError=
void 0;(b.TypeValidationError||(b.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ma={min:-32768,max:32767,isInteger:!0},ra={min:-2147483648,max:2147483647,isInteger:!0},va={min:-3.4E38,max:1.2E38,isInteger:!1},wa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};b.collectArcadeFieldNames=J;b.collectElevationFields=O;b.collectFeatureReductionFields=function(ca,fa,pa){return S.apply(this,arguments)};b.collectField=N;b.collectFields=E;b.collectFilterFields=
function(ca,fa,pa){return F.apply(this,arguments)};b.collectLabelingFields=M;b.collectOrderByInfos=function(ca,fa,pa){return U.apply(this,arguments)};b.collectPopupTemplateFields=n;b.doubleRange=wa;b.featureHasFields=function(ca,fa){return!La(ca,fa,null)};b.fixFields=m;b.fixRendererFields=function(ca,fa){if(null!=ca&&null!=fa)for(const pa of Array.isArray(ca)?ca:[ca])if(g(qa,pa,fa),"visualVariables"in pa&&pa.visualVariables)for(const Ba of pa.visualVariables)g(z,Ba,fa)};b.fixTimeInfoFields=function(ca,
fa){if(null!=ca&&fa?.fields?.length)if("startField"in ca){var pa=fa.get(ca.startField);fa=fa.get(ca.endField);ca.startField=pa?.name??null;ca.endField=fa?.name??null}else pa=fa.get(ca.startTimeField),fa=fa.get(ca.endTimeField),ca.startTimeField=pa?.name??null,ca.endTimeField=fa?.name??null};b.getDisplayFieldName=function({displayField:ca,fields:fa}){if(ca)return ca;if(!fa||!fa.length)return null;if(!(ca=A(fa,"name-or-title")||A(fa,"unique-identifier")||A(fa,"type-or-category")))a:{for(const pa of fa)if(pa&&
pa.name&&(fa=pa.name.toLowerCase(),fa.includes("name")||fa.includes("title"))){ca=pa.name;break a}ca=null}return ca};b.getElevationFields=function(ca){return H.apply(this,arguments)};b.getExpressionFields=function(ca,fa){return Ka.apply(this,arguments)};b.getFeatureEditFields=function(ca){if(!ca)return[];const fa="editFieldsInfo"in ca&&ca.editFieldsInfo;return fa?m(ca.fieldsIndex,[fa&&fa.creatorField,fa&&fa.creationDateField,fa&&fa.editorField,fa&&fa.editDateField]):[]};b.getFeatureGeometryFields=
function(ca){if(!ca)return[];const fa=ca.geometryFieldsInfo;return fa?m(ca.fieldsIndex,[fa.shapeAreaField,fa.shapeLengthField]):[]};b.getFieldDefaultValue=function(ca){const fa=ca.defaultValue;if(void 0!==fa&&y(ca,fa))return fa;if(ca.nullable)return null};b.getFieldRange=function(ca){const fa=h.getDomainRange(ca.domain);if(fa)return fa;if(f(ca))return ya(ca.type)};b.getLabelingFields=function(ca){return K.apply(this,arguments)};b.getNumericTypeForValue=function(ca){if(!ha(ca))return null;if(aa(ca)){if(ca>=
ma.min&&ca<=ma.max)return"esriFieldTypeSmallInteger";if(ca>=ra.min&&ca<=ra.max)return"esriFieldTypeInteger"}return ca>=va.min&&ca<=va.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};b.getTimeFields=function(ca){return C.apply(this,arguments)};b.integerRange=ra;b.isDateField=function(ca){return null!=ca&&("date"===ca.type||"esriFieldTypeDate"===ca.type)};b.isNumberInRange=ua;b.isNumericField=f;b.isRasterPixelValueField=function(ca){return["raster.itempixelvalue","raster.servicepixelvalue"].some(fa=>
ca.toLowerCase().startsWith(fa))};b.isStringField=function(ca){return null!=ca&&("string"===ca.type||"esriFieldTypeString"===ca.type)};b.isValidFieldValue=function(ca,fa){return null===R(ca,fa)};b.isValueMatchingFieldType=y;b.normalizeFieldName=function(ca){return ca?ca.trim().replace(e,"_").replace(t,"_").replace(ia,"").replace(ja,"").replace(Ra,"F$1"):null};b.numericTypes=Z;b.packFields=function(ca,fa,pa=1){if(!fa||!ca)return[];if(fa.includes("*"))return["*"];fa=m(ca,fa);return fa.length/ca.fields.length>=
pa?["*"]:fa};b.populateMissingFields=La;b.rendererFields=qa;b.sanitizeNullFieldValue=function(ca){return null==ca||"number"===typeof ca&&isNaN(ca)?null:ca};b.singleRange=va;b.smallIntegerRange=ma;b.unpackFieldNames=function(ca,fa){return p.isNone(fa)||p.isNone(ca)?[]:fa.includes("*")?(ca.fields??[]).map(pa=>pa.name):fa};b.validateFieldValue=R;b.validationErrorToString=function(ca,fa,pa){switch(ca){case h.DomainValidationError.INVALID_CODED_VALUE:return`Value ${pa} is not in the coded domain - field: ${fa.name}, domain: ${JSON.stringify(fa.domain)}`;
case h.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${pa} is out of the range of valid values - field: ${fa.name}, domain: ${JSON.stringify(fa.domain)}`;case b.TypeValidationError.INVALID_TYPE:return`Value ${pa} is not a valid value for the field type - field: ${fa.name}, type: ${fa.type}, nullable: ${fa.nullable}`;case b.NumericRangeValidationError.OUT_OF_RANGE:const {min:Ba,max:Ea}=ya(fa.type);return`Value ${pa} is out of range for the number type - field: ${fa.name}, type: ${fa.type}, value range is ${Ba} to ${Ea}`}};
b.visualVariableFields=z;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(a){a.DomainValidationError=void 0;(function(b){b.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";b.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(a.DomainValidationError||(a.DomainValidationError={}));a.getDomainRange=function(b){if(b&&"range"===b.type)return{min:"range"in
b?b.range[0]:b.minValue,max:"range"in b?b.range[1]:b.maxValue}};a.validateDomainValue=function(b,T){switch(b.type){case "range":const x="range"in b?b.range[0]:b.minValue;b="range"in b?b.range[1]:b.maxValue;if(null!=x&&+T<x||null!=b&&+T>b)return a.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==b.codedValues||b.codedValues.every(p=>null==p||p.code!==T))return a.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==b.codedValues||b.codedValues.every(p=>
null==p||p.code!==T))return a.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(a,b,T,x,p,l,h,c){function g(){E||(E=T._asyncToGenerator(function*(){const J=yield new Promise((q,B)=>a(["./arcadeUtils"],
q,B));return{arcade:J.arcade,arcadeUtils:J,Dictionary:J.Dictionary,Feature:J.arcadeFeature}})());return E}const m=l.getLogger("esri.support.arcadeOnDemand");let E;x=(J,q,B)=>N.create(J,q,B,null,["$feature","$view"]);let N=function(){function J(B,r,A,H,O,Q,S,n){this.script=B;this.evaluate=O;this.fields=Array.isArray(S)?S:S.fields;this._syntaxTree=H;this._arcade=r;this._arcadeDictionary=A;this._arcadeFeature=Q;this._spatialReference=n;this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}J.create=function(){var B=T._asyncToGenerator(function*(r,A,H,O,Q,S){const {arcade:n,Feature:u,Dictionary:F}=yield g(),U=c.fromJSON(A);A=null;try{A=n.parseScript(r,S)}catch(X){return m.error(new p("arcade-bad-expression","Failed to parse arcade script",{script:r,error:X})),null}S=Q.reduce((X,I)=>({...X,[I]:null}),{});let la=null;h.isSome(O)&&(la=new F(O),la.immutable=!0,S.$config=null);var V=(O=n.scriptUsesGeometryEngine(A))&&
n.enableGeometrySupport();const C=n.scriptUsesFeatureSet(A)&&n.enableFeatureSetSupport(),K=(Q=n.scriptIsAsync(A))&&n.enableAsyncSupport();S={vars:S,spatialReference:U,useAsync:!!K};yield Promise.all([V,C,K]);V=new Set;yield n.loadDependentModules(V,A,null,Q,O);const M=new F;M.immutable=!1;M.setField("scale",0);const P=n.compileScript(A,S);return new J(r,n,F,A,X=>{"$view"in X&&X.$view&&(M.setField("scale",X.$view.scale),X.$view=M);la&&(X.$config=la);return P({vars:X,spatialReference:U})},new u,H,U)});
return function(r,A,H,O,Q,S){return B.apply(this,arguments)}}();var q=J.prototype;q.repurposeFeature=function(B){B.geometry&&!B.geometry.spatialReference&&(B.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(B.geometry,B.attributes,{fields:this.fields});return this._arcadeFeature};q.createDictionary=function(){return new this._arcadeDictionary};q.referencesMember=function(B){return this._arcade.referencesMember(this._syntaxTree,B)};q.referencesFunction=
function(B){return this._arcade.referencesFunction(this._syntaxTree,B)};q.referencesGeometry=function(){return this._referencesGeometry};q.referencesScale=function(){return this._referencesScale};q.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return J}();b.ArcadeExpression=N;b.createDictionaryExpression=(J,q,B,r)=>N.create(J,q,B,r,["$feature","$view"]);b.createLabelExpression=(J,q,B)=>N.create(J,q,B,null,["$feature"]);b.createRendererExpression=
x;b.createVVExpression=x;b.loadArcade=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),function(a,b,T,x,p,
l,h,c,g,m){function E(na,ta,da){da[0]=na[0]+ta;da[1]=na[1]+ta;da[2]=na[2]+ta}function N(na,ta,da,v){if(1===ta)na=da(na[0]),g.copy(na,v);else{U[0]=Infinity;U[1]=Infinity;U[2]=Infinity;la[0]=-Infinity;la[1]=-Infinity;la[2]=-Infinity;for(let R=0;R<ta;R++){var D=da(na[R]);if(r(D[3])){var y=U,f=D;y[0]=Math.min(y[0],f[0]-f[3]);y[1]=Math.min(y[1],f[1]-f[3]);y[2]=Math.min(y[2],f[2]-f[3]);y=la;y[0]=Math.max(y[0],D[0]+D[3]);y[1]=Math.max(y[1],D[1]+D[3]);y[2]=Math.max(y[2],D[2]+D[3])}}p.lerp(v,U,la,.5);v[3]=
Math.max(la[0]-U[0],la[1]-U[1],la[2]-U[2])/2}}function J(na,ta,da){if(!I.length)for(var v=0;8>v;++v)I.push({index:0,distance:0});for(v=0;8>v;++v){const D=O[v];I.data[v].index=v;I.data[v].distance=B(na,ta,D)}I.sort((D,y)=>D.distance-y.distance);for(na=0;8>na;++na)da[na]=I.data[na].index}function q(na,ta){let da=Infinity,v;for(let D=0;8>D;++D){const y=B(na,ta,Q[D]);y<da&&(da=y,v=Q[D])}return v}function B(na,ta,da){return ta*(na[0]*da[0]+na[1]*da[1]+na[2]*da[2])}function r(na){return!isNaN(na)&&-Infinity!==
na&&Infinity!==na&&0<na}let A=function(){function na(da,v){this._objectToBoundingSphere=da;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new H;this._objectCount=0;v&&(void 0!==v.maximumObjectsPerNode&&(this._maximumObjectsPerNode=v.maximumObjectsPerNode),void 0!==v.maximumDepth&&(this._maximumDepth=v.maximumDepth))}var ta=na.prototype;ta.destroy=function(){this._degenerateObjects.clear();H.clearPool();n[0]=null;V.prune();I.prune()};ta.add=function(da,
v=da.length){this._objectCount+=v;this._grow(da,v);const D=H.acquire();for(let y=0;y<v;y++){const f=da[y];this._isDegenerate(f)?this._degenerateObjects.add(f):(D.init(this._root),this._add(f,D))}H.release(D)};ta.remove=function(da,v=null){this._objectCount-=da.length;const D=H.acquire();for(const y of da)da=b.isSome(v)?v:g.copy(this._objectToBoundingSphere(y),C),r(da[3])?(D.init(this._root),this._remove(y,da,D)):this._degenerateObjects.delete(y);H.release(D);this._shrink()};ta.update=function(da,
v){if(r(v[3])||!this._isDegenerate(da))n[0]=da,da=n,this.remove(da,v),this.add(da)};ta.forEachAlongRay=function(da,v,D){const y=c.wrap(da,v);this._forEachNode(this._root,f=>{if(!this._intersectsNode(y,f))return!1;f=f.node;f.terminals.forAll(R=>{this._intersectsObject(y,R)&&D(R)});null!==f.residents&&f.residents.forAll(R=>{this._intersectsObject(y,R)&&D(R)});return!0})};ta.forEachAlongRayWithVerticalOffset=function(da,v,D,y){const f=c.wrap(da,v);this._forEachNode(this._root,R=>{if(!this._intersectsNodeWithOffset(f,
R,y))return!1;R=R.node;R.terminals.forAll(ua=>{this._intersectsObjectWithOffset(f,ua,y)&&D(ua)});null!==R.residents&&R.residents.forAll(ua=>{this._intersectsObjectWithOffset(f,ua,y)&&D(ua)});return!0})};ta.forEach=function(da){this._forEachNode(this._root,v=>{v=v.node;v.terminals.forAll(da);null!==v.residents&&v.residents.forAll(da);return!0});this._degenerateObjects.forEach(da)};ta.forEachDegenerateObject=function(da){this._degenerateObjects.forEach(da)};ta.findClosest=function(da,v,D,y=()=>!0,f=
Infinity){let R=Infinity,ua=Infinity,ya=null;const La=q(da,v),Ka=Ra=>{--f;if(y(Ra)){var e=this._objectToBoundingSphere(Ra);if(h.intersectsSphere(D,e)){var t=B(da,v,g.getCenter(e)),ia=t-e[3];e=t+e[3];ia<R&&(R=ia,ua=e,ya=Ra)}}};this._forEachNodeDepthOrdered(this._root,Ra=>{if(0>=f||!h.intersectsSphere(D,Ra.bounds))return!1;p.scale(F,La,Ra.halfSize);p.add(F,F,Ra.bounds);if(B(da,v,F)>ua)return!1;Ra=Ra.node;Ra.terminals.forAll(e=>Ka(e));null!==Ra.residents&&Ra.residents.forAll(e=>Ka(e));return!0},da,v);
return ya};ta.forEachInDepthRange=function(da,v,D,y,f,R,ua){let ya=-Infinity,La=Infinity;const Ka={setRange:ja=>{D===na.DepthOrder.FRONT_TO_BACK?(ya=Math.max(ya,ja.near),La=Math.min(La,ja.far)):(ya=Math.max(ya,-ja.far),La=Math.min(La,-ja.near))}};Ka.setRange(y);const Ra=B(v,D,da),e=q(v,D),t=q(v,-D),ia=ja=>{if(ua(ja)){var qa=this._objectToBoundingSphere(ja),z=g.getCenter(qa);z=B(v,D,z)-Ra;var L=z+qa[3];z-qa[3]>La||L<ya||!h.intersectsSphere(R,qa)||f(ja,Ka)}};this._forEachNodeDepthOrdered(this._root,
ja=>{if(!h.intersectsSphere(R,ja.bounds))return!1;p.scale(F,e,ja.halfSize);p.add(F,F,ja.bounds);if(B(v,D,F)-Ra>La)return!1;p.scale(F,t,ja.halfSize);p.add(F,F,ja.bounds);if(B(v,D,F)-Ra<ya)return!1;ja=ja.node;ja.terminals.forAll(qa=>ia(qa));null!==ja.residents&&ja.residents.forAll(qa=>ia(qa));return!0},v,D)};ta.forEachNode=function(da){this._forEachNode(this._root,v=>da(v.node,v.bounds,v.halfSize))};ta.forEachNeighbor=function(da,v){const D=g.getRadius(v),y=g.getCenter(v),f=ya=>{const La=this._objectToBoundingSphere(ya);
var Ka=g.getRadius(La);Ka=D+Ka;return 0>=p.squaredDistance(g.getCenter(La),y)-Ka*Ka?da(ya):!0};let R=!0;const ua=ya=>{R&&(R=f(ya))};this._forEachNode(this._root,ya=>{var La=g.getRadius(ya.bounds);La=D+La;if(0<p.squaredDistance(g.getCenter(ya.bounds),y)-La*La)return!1;ya=ya.node;ya.terminals.forAll(ua);R&&null!==ya.residents&&ya.residents.forAll(ua);return R});R&&this.forEachDegenerateObject(ua)};ta._intersectsNode=function(da,v){E(v.bounds,2*-v.halfSize,U);E(v.bounds,2*v.halfSize,la);return m.rayBoxTest(da.origin,
da.direction,U,la)};ta._intersectsNodeWithOffset=function(da,v,D){E(v.bounds,2*-v.halfSize,U);E(v.bounds,2*v.halfSize,la);D.applyToMinMax(U,la);return m.rayBoxTest(da.origin,da.direction,U,la)};ta._intersectsObject=function(da,v){v=this._objectToBoundingSphere(v);return 0<v[3]?g.intersectsRay(v,da):!0};ta._intersectsObjectWithOffset=function(da,v,D){v=this._objectToBoundingSphere(v);return 0<v[3]?g.intersectsRay(D.applyToBoundingSphere(v),da):!0};ta._forEachNode=function(da,v){da=H.acquire().init(da);
const D=[da];for(;0!==D.length;){da=D.pop();if(v(da)&&!da.isLeaf())for(let y=0;y<da.node.children.length;y++)da.node.children[y]&&D.push(H.acquire().init(da).advance(y));H.release(da)}};ta._forEachNodeDepthOrdered=function(da,v,D,y=na.DepthOrder.FRONT_TO_BACK){da=H.acquire().init(da);const f=[da];for(J(D,y,ha);0!==f.length;){da=f.pop();if(v(da)&&!da.isLeaf())for(D=7;0<=D;--D)y=ha[D],da.node.children[y]&&f.push(H.acquire().init(da).advance(y));H.release(da)}};ta._remove=function(da,v,D){V.clear();
v=D.advanceTo(v,(y,f)=>{V.push(y.node);V.push(f)})?D.node.terminals:D.node.residents;v.removeUnordered(da);if(0===v.length)for(da=V.length-2;0<=da&&this._purge(V.data[da],V.data[da+1]);da-=2);};ta._nodeIsEmpty=function(da){if(0!==da.terminals.length)return!1;if(null!==da.residents)return 0===da.residents.length;for(let v=0;v<da.children.length;v++)if(da.children[v])return!1;return!0};ta._purge=function(da,v){0<=v&&(da.children[v]=null);return this._nodeIsEmpty(da)?(null===da.residents&&(da.residents=
new x({shrink:!0})),!0):!1};ta._add=function(da,v){v.advanceTo(this._objectToBoundingSphere(da))?v.node.terminals.push(da):(v.node.residents.push(da),v.node.residents.length>this._maximumObjectsPerNode&&v.depth<this._maximumDepth&&this._split(v))};ta._split=function(da){const v=da.node.residents;da.node.residents=null;for(let D=0;D<v.length;D++){const y=H.acquire().init(da);this._add(v.getItemAt(D),y);H.release(y)}};ta._grow=function(da,v){0!==v&&(N(da,v,D=>this._objectToBoundingSphere(D),K),r(K[3])&&
!this._fitsInsideTree(K)&&(this._nodeIsEmpty(this._root.node)?(g.copy(K,this._root.bounds),this._root.halfSize=1.25*K[3]):(da=this._rootBoundsForRootAsSubNode(K),this._placingRootViolatesMaxDepth(da)?this._rebuildTree(K,da):this._growRootAsSubNode(da),H.release(da))))};ta._rebuildTree=function(da,v){p.copy(M,v.bounds);M[3]=v.halfSize;N([da,M],2,D=>D,P);da=H.acquire().init(this._root);this._root.initFrom(null,P,1.25*P[3]);this._forEachNode(da,D=>{this.add(D.node.terminals.data,D.node.terminals.length);
null!==D.node.residents&&this.add(D.node.residents.data,D.node.residents.length);return!0});H.release(da)};ta._placingRootViolatesMaxDepth=function(da){const v=Math.log(da.halfSize/this._root.halfSize)*Math.LOG2E;let D=0;this._forEachNode(this._root,y=>{D=Math.max(D,y.depth);return D+v<=this._maximumDepth});return D+v>this._maximumDepth};ta._rootBoundsForRootAsSubNode=function(da){var v=da[3];let D=-Infinity;const y=this._root.bounds,f=this._root.halfSize;for(var R=0;3>R;R++){var ua=Math.max(0,Math.ceil((y[R]-
f-(da[R]-v))/(2*f)));const ya=Math.max(0,Math.ceil((da[R]+v-(y[R]+f))/(2*f)))+1;D=Math.max(D,2**Math.ceil(Math.log(ua+ya)*Math.LOG2E));X[R].min=ua;X[R].max=ya}for(da=0;3>da;da++)v=X[da].min,R=X[da].max,ua=(D-(v+R))/2,v+=Math.ceil(ua),R+=Math.floor(ua),u[da]=y[da]-f-v*f*2+(R+v)*f;u[3]=D*f*S;return H.acquire().initFrom(null,u,D*f,0)};ta._growRootAsSubNode=function(da){const v=this._root.node;p.copy(K,this._root.bounds);K[3]=this._root.halfSize;this._root.init(da);da.advanceTo(K,null,!0);da.node.children=
v.children;da.node.residents=v.residents;da.node.terminals=v.terminals};ta._shrink=function(){for(;;){const da=this._findShrinkIndex();if(-1===da)break;this._root.advance(da);this._root.depth=0}};ta._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let da=null;const v=this._root.node.children;let D=0,y=0;for(;y<v.length&&null==da;)D=y++,da=v[D];for(;y<v.length;)if(v[y++])return-1;return D};ta._isDegenerate=function(da){da=this._objectToBoundingSphere(da)[3];
return!r(da)};ta._fitsInsideTree=function(da){const v=this._root.bounds,D=this._root.halfSize;return da[3]<=D&&da[0]>=v[0]-D&&da[0]<=v[0]+D&&da[1]>=v[1]-D&&da[1]<=v[1]+D&&da[2]>=v[2]-D&&da[2]<=v[2]+D};a._createClass(na,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},
{key:"objectCount",get:function(){return this._objectCount}}]);return na}(),H=function(){function na(){this.bounds=g.create();this.halfSize=0;this.initFrom(null,null,0,0)}var ta=na.prototype;ta.init=function(da){return this.initFrom(da.node,da.bounds,da.halfSize,da.depth)};ta.initFrom=function(da,v,D,y=this.depth){this.node=b.isSome(da)?da:na.createEmptyNode();b.isSome(v)&&g.copy(v,this.bounds);this.halfSize=D;this.depth=y;return this};ta.advance=function(da){let v=this.node.children[da];v||(v=na.createEmptyNode(),
this.node.children[da]=v);this.node=v;this.halfSize/=2;this.depth++;da=O[da];this.bounds[0]+=da[0]*this.halfSize;this.bounds[1]+=da[1]*this.halfSize;this.bounds[2]+=da[2]*this.halfSize;this.bounds[3]=this.halfSize*S;return this};ta.advanceTo=function(da,v,D=!1){for(;;){if(this.isTerminalFor(da))return v&&v(this,-1),!0;if(this.isLeaf()){if(!D)return v&&v(this,-1),!1;this.node.residents=null}const y=this._childIndex(da);v&&v(this,y);this.advance(y)}};ta.isLeaf=function(){return null!=this.node.residents};
ta.isTerminalFor=function(da){return da[3]>this.halfSize/2};ta._childIndex=function(da){const v=this.bounds;return(v[0]<da[0]?1:0)+(v[1]<da[1]?2:0)+(v[2]<da[2]?4:0)};na.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new x({shrink:!0}),residents:new x({shrink:!0})}};na.acquire=function(){return na._pool.acquire()};na.release=function(da){na._pool.release(da)};na.clearPool=function(){na._pool.prune()};return na}();H._pool=new T(H);(function(na){na=na.DepthOrder||
(na.DepthOrder={});na[na.FRONT_TO_BACK=1]="FRONT_TO_BACK";na[na.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(A||(A={}));const O=[l.fromValues(-1,-1,-1),l.fromValues(1,-1,-1),l.fromValues(-1,1,-1),l.fromValues(1,1,-1),l.fromValues(-1,-1,1),l.fromValues(1,-1,1),l.fromValues(-1,1,1),l.fromValues(1,1,1)],Q=[l.fromValues(-1,-1,-1),l.fromValues(-1,-1,1),l.fromValues(-1,1,-1),l.fromValues(-1,1,1),l.fromValues(1,-1,-1),l.fromValues(1,-1,1),l.fromValues(1,1,-1),l.fromValues(1,1,1)],S=Math.sqrt(3),n=[null],u=g.create(),
F=l.create(),U=l.create(),la=l.create(),V=new x,C=g.create(),K=g.create(),M=g.create(),P=g.create(),X=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],I=new x,ha=[0,0,0,0,0,0,0,0];return A})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(a,b,T,x,p,l,h,c,g,m){function E(){return[p.create(),p.create(),p.create(),p.create(),
p.create(),p.create(),p.create(),p.create()]}function N(H,O){g.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_TOP_LEFT],H[a.PlaneIndex.LEFT]);g.fromPoints(O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],H[a.PlaneIndex.RIGHT]);g.fromPoints(O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],H[a.PlaneIndex.BOTTOM]);g.fromPoints(O[a.PointIndex.NEAR_TOP_LEFT],
O[a.PointIndex.NEAR_TOP_RIGHT],O[a.PointIndex.FAR_TOP_RIGHT],H[a.PlaneIndex.TOP]);g.fromPoints(O[a.PointIndex.NEAR_BOTTOM_LEFT],O[a.PointIndex.NEAR_BOTTOM_RIGHT],O[a.PointIndex.NEAR_TOP_RIGHT],H[a.PlaneIndex.NEAR]);g.fromPoints(O[a.PointIndex.FAR_BOTTOM_RIGHT],O[a.PointIndex.FAR_BOTTOM_LEFT],O[a.PointIndex.FAR_TOP_LEFT],H[a.PlaneIndex.FAR])}function J(H,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(!g.clip(H[Q],O))return!1;return!0}a.PlaneIndex=void 0;(function(H){H[H.LEFT=0]="LEFT";H[H.RIGHT=1]="RIGHT";
H[H.BOTTOM=2]="BOTTOM";H[H.TOP=3]="TOP";H[H.NEAR=4]="NEAR";H[H.FAR=5]="FAR"})(a.PlaneIndex||(a.PlaneIndex={}));a.PointIndex=void 0;(function(H){H[H.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";H[H.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";H[H.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";H[H.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";H[H.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";H[H.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";H[H.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";H[H.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(a.PointIndex||(a.PointIndex={}));const q=
{bottom:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.FAR_BOTTOM_LEFT],near:[a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_LEFT],far:[a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_LEFT,a.PointIndex.FAR_TOP_LEFT,a.PointIndex.FAR_TOP_RIGHT],right:[a.PointIndex.NEAR_BOTTOM_RIGHT,a.PointIndex.FAR_BOTTOM_RIGHT,a.PointIndex.FAR_TOP_RIGHT,a.PointIndex.NEAR_TOP_RIGHT],left:[a.PointIndex.FAR_BOTTOM_LEFT,
a.PointIndex.NEAR_BOTTOM_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.FAR_TOP_LEFT],top:[a.PointIndex.FAR_TOP_LEFT,a.PointIndex.NEAR_TOP_LEFT,a.PointIndex.NEAR_TOP_RIGHT,a.PointIndex.FAR_TOP_RIGHT]};a.NumPlanes=void 0;(function(H){H[H.NUM=6]="NUM"})(a.NumPlanes||(a.NumPlanes={}));a.NumPoints=void 0;(function(H){H[H.NUM=8]="NUM"})(a.NumPoints||(a.NumPoints={}));const B=[h.fromValues(-1,-1,-1,1),h.fromValues(1,-1,-1,1),h.fromValues(1,1,-1,1),h.fromValues(-1,1,-1,1),h.fromValues(-1,-1,1,1),h.fromValues(1,
-1,1,1),h.fromValues(1,1,1,1),h.fromValues(-1,1,1,1)],r=new b.ObjectStack(c.create),A=E();a.computePlanes=N;a.copy=function(H,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)g.copy(H[Q],O[Q])};a.create=function(H){return H?[g.create(H[0]),g.create(H[1]),g.create(H[2]),g.create(H[3]),g.create(H[4]),g.create(H[5])]:[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]};a.createPoints=E;a.fromMatrix=function(H,O,Q,S=A){H=T.multiply(m.sm4d.get(),O,H);T.invert(H,H);for(O=0;O<a.NumPoints.NUM;++O){const n=
l.transformMat4(m.sv4d.get(),B[O],H);x.set(S[O],n[0]/n[3],n[1]/n[3],n[2]/n[3])}N(Q,S)};a.intersectClipRay=function(H,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(!g.clipInfinite(H[Q],O))return!1;return!0};a.intersectsLineSegment=function(H,O,Q){return J(H,c.fromLineSegmentAndDirection(O,Q,r.get()))};a.intersectsPoint=function(H,O){for(let Q=0;Q<a.NumPlanes.NUM;Q++)if(0<g.signedDistance(H[Q],O))return!1;return!0};a.intersectsRay=function(H,O){return J(H,c.fromRay(O,r.get()))};a.intersectsSphere=function(H,
O){for(let Q=0;Q<a.NumPlanes.NUM;Q++){const S=H[Q];if(S[0]*O[0]+S[1]*O[1]+S[2]*O[2]+S[3]>=O[3])return!1}return!0};a.planePointIndices=q;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/clipRay":function(){define(["exports","../../core/ObjectStack","../../chunks/vec3","./ray","./vectorStacks"],function(a,b,T,x,p){function l(E){return E?{ray:x.create(E.ray),c0:E.c0,c1:E.c1}:{ray:x.create(),c0:0,c1:Number.MAX_VALUE}}function h(E,N,J,q=
l()){x.copy(E,q.ray);q.c0=N;q.c1=J;return q}function c(E,N,J=l()){const q=T.length(E.vector);x.fromValues(E.origin,N,J.ray);J.c0=0;J.c1=q;return J}function g(E,N,J){return T.add(J,E.ray.origin,T.scale(J,E.ray.direction,N))}const m=new b.ObjectStack(()=>l());a.copy=function(E,N=l()){return h(E.ray,E.c0,E.c1,N)};a.create=l;a.fromLineSegment=function(E,N=l()){const J=T.normalize(p.sv3d.get(),E.vector);return c(E,J,N)};a.fromLineSegmentAndDirection=c;a.fromRay=function(E,N=l()){x.copy(E,N.ray);N.c0=0;
N.c1=Number.MAX_VALUE;return N};a.fromValues=h;a.getAt=g;a.getEnd=function(E,N){return g(E,E.c1,N)};a.getStart=function(E,N){return g(E,E.c0,N)};a.wrap=function(E,N,J){const q=m.get();q.ray=E;q.c0=N;q.c1=J;return q};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../core/maybe ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(a,b,T,x,p,l,h,c,g){function m(C=F){return[C[0],C[1],C[2],C[3]]}function E(C,K){return N(K[0],K[1],K[2],K[3],C)}function N(C,K,M,P,X=m()){X[0]=C;X[1]=K;X[2]=M;X[3]=P;return X}function J(C,K,M){var P=K[0]*K[0]+K[1]*K[1]+K[2]*K[2];P=1E-5<Math.abs(P-1)&&1E-12<P?1/Math.sqrt(P):1;M[0]=K[0]*P;M[1]=K[1]*P;M[2]=K[2]*P;M[3]=-(M[0]*C[0]+M[1]*C[1]+M[2]*C[2]);return M}function q(C,K,M,P=m()){var X=M[0]-K[0],I=M[1]-K[1],ha=M[2]-K[2];M=C[0]-K[0];const na=C[1]-K[1],ta=C[2]-K[2];K=I*ta-ha*na;ha=ha*M-X*ta;
X=X*na-I*M;I=K*K+ha*ha+X*X;I=1E-5<Math.abs(I-1)&&1E-12<I?1/Math.sqrt(I):1;P[0]=K*I;P[1]=ha*I;P[2]=X*I;P[3]=-(P[0]*C[0]+P[1]*C[1]+P[2]*C[2]);return P}function B(C,K,M,P,X){if(3>C.count)return!1;C.getVec(M,O);let I=P,ha=!1;for(;I<C.count-1&&!ha;)C.getVec(I,Q),I++,ha=!x.exactEquals(O,Q);if(!ha)return!1;I=Math.max(I,X);for(ha=!1;I<C.count&&!ha;)C.getVec(I,S),I++,x.subtract(n,O,Q),x.normalize(n,n),x.subtract(u,Q,S),x.normalize(u,u),ha=!x.exactEquals(O,S)&&!x.exactEquals(Q,S)&&.99619469809>Math.abs(x.dot(n,
u));if(!ha)return 0===M&&1===P&&2===X?!1:B(C,K,0,1,2);q(O,Q,S,K);return!0}function r(C,K,M){C=x.scale(c.sv3d.get(),C,x.dot(C,K));x.subtract(M,K,C);return M}function A(C,K){return x.dot(C,K)+C[3]}function H(C,K,M,P,X){const I=x.dot(C,M);if(0===I)return!1;C=-(x.dot(C,K)+C[3])/I;P&U.CLAMP&&(C=b.clamp(C,0,1));if(!(P&U.INFINITE_MIN)&&0>C||!(P&U.INFINITE_MAX)&&1<C)return!1;x.add(X,K,x.scale(X,M,C));return!0}const O=p.create(),Q=p.create(),S=p.create(),n=p.create(),u=p.create(),F=[0,0,1,0];var U;(function(C){C[C.NONE=
0]="NONE";C[C.CLAMP=1]="CLAMP";C[C.INFINITE_MIN=4]="INFINITE_MIN";C[C.INFINITE_MAX=8]="INFINITE_MAX"})(U||(U={}));const la=U.INFINITE_MIN|U.INFINITE_MAX,V=U.INFINITE_MAX;a.UP=F;a.clip=function(C,K){const M=x.dot(C,K.ray.direction);C=-A(C,K.ray.origin);if(0>C&&0<=M)return!1;if(-1E-6<M&&1E-6>M)return 0<C;if((0>C||0>M)&&!(0>C&&0>M))return!0;C/=M;0<M?C<K.c1&&(K.c1=C):C>K.c0&&(K.c0=C);return K.c0<=K.c1};a.clipInfinite=function(C,K){const M=x.dot(C,K.ray.direction);C=-A(C,K.ray.origin);if(-1E-6<M&&1E-6>
M)return 0<C;C/=M;0<M?C<K.c1&&(K.c1=C):C>K.c0&&(K.c0=C);return K.c0<=K.c1};a.copy=E;a.create=m;a.distance=function(C,K){return Math.abs(A(C,K))};a.fromManyPoints=function(C,K){return B(C,K,0,1,2)};a.fromManyPointsSampleAt=B;a.fromNormalAndOffset=function(C,K,M){x.copy(M,C);M[3]=K;return M};a.fromPoints=q;a.fromPositionAndNormal=J;a.fromValues=N;a.fromVectorsAndPoint=function(C,K,M,P){x.cross(S,K,C);return J(M,S,P)};a.intersectLine=function(C,K,M,P){M=x.subtract(c.sv3d.get(),M,K);return H(C,K,M,la,
P)};a.intersectLineSegment=function(C,K,M){return H(C,K.origin,K.vector,U.NONE,M)};a.intersectLineSegmentClamp=function(C,K,M){return H(C,K.origin,K.vector,U.CLAMP,M)};a.intersectRay=function(C,K,M){return T.isSome(K)?H(C,K.origin,K.direction,V,M):!1};a.isPointInside=function(C,K){return 0<=A(C,K)};a.isPointOutside=function(C,K){return 0>A(C,K)};a.isSphereFullyInside=function(C,K){return 0<=A(C,l.getCenter(K))-K[3]};a.isSphereFullyOutside=function(C,K){return 0>A(C,l.getCenter(K))+K[3]};a.negate=
function(C,K){K[0]=-C[0];K[1]=-C[1];K[2]=-C[2];K[3]=-C[3];return K};a.normal=function(C){return C};a.projectPoint=function(C,K,M){const P=x.scale(c.sv3d.get(),C,-C[3]);K=x.subtract(c.sv3d.get(),K,P);C=r(C,K,c.sv3d.get());x.add(M,C,P);return M};a.projectPointLocal=function(C,K,M,P){var X=c.sv3d.get(),I=c.sv3d.get();g.tangentFrame(C,X,I);K=x.subtract(c.sv3d.get(),M,K);X=h.projectPointSignedLength(X,K);I=h.projectPointSignedLength(I,K);C=h.projectPointSignedLength(C,K);return x.set(P,X,I,C)};a.projectVector=
r;a.setOffsetFromPoint=function(C,K,M){K!==C&&E(C,K);C[3]=-x.dot(C,M);return C};a.signedDistance=A;a.wrap=function(C=F[0],K=F[1],M=F[2],P=F[3]){return N(C,K,M,P,c.sv4d.get())};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(a,b,T,x){const p=x.create(),l=x.create(),h=x.create(),c=x.create(),g=x.create();a.angle=
function(m,E,N){m=T.normalize(c,m);E=T.normalize(g,E);const J=b.acosClamped(T.dot(m,E));return N&&(m=T.cross(h,m,E),0>T.dot(m,N))?-J:J};a.bilerp=function(m,E,N,J,q,B){m+=(E-m)*q;return m+(N+(J-N)*q-m)*B};a.cosCapped=function(m,E){return m>E?Math.cos(E):Math.cos(m)};a.fovx2fovy=function(m,E,N){return 2*Math.atan(N*Math.tan(.5*m)/E)};a.fovy2fovx=function(m,E,N){return 2*Math.atan(E*Math.tan(.5*m)/N)};a.makeOrthonormal=function(m,E,N){N=N||m;const J=T.dot(m,E);T.set(N,m[0]-J*E[0],m[1]-J*E[1],m[2]-J*
E[2]);T.normalize(N,N)};a.makePiecewiseLinearFunction=function(m){const E=m.length;return N=>{if(N<=m[0][0])return m[0][1];if(N>=m[E-1][0])return m[E-1][1];let J=1;for(;N>m[J][0];)J++;const q=m[J][0];N=(q-N)/(q-m[J-1][0]);return N*m[J-1][1]+(1-N)*m[J][1]}};a.maxScale=function(m){return Math.sqrt(Math.max(m[0]*m[0]+m[4]*m[4]+m[8]*m[8],m[1]*m[1]+m[5]*m[5]+m[9]*m[9],m[2]*m[2]+m[6]*m[6]+m[10]*m[10]))};a.moduloPositive=function(m,E){return(m%E+E)%E};a.planeFromPoints=function(m,E,N,J){T.subtract(p,E,m);
T.subtract(l,N,m);T.cross(J,p,l);T.normalize(J,J);J[3]=-T.dot(m,J)};a.scaleFromMatrix=function(m,E){T.set(m,Math.sqrt(E[0]*E[0]+E[4]*E[4]+E[8]*E[8]),Math.sqrt(E[1]*E[1]+E[5]*E[5]+E[9]*E[9]),Math.sqrt(E[2]*E[2]+E[6]*E[6]+E[10]*E[10]));return m};a.slerp=function(m,E,N,J=x.create()){const q=T.length(m);var B=T.length(E),r=T.dot(m,E)/(q*B);if(.9999999999999999>r){r=Math.acos(r);const A=((1-N)*q+N*B)/Math.sin(r);B=A/B*Math.sin(N*r);T.scale(c,m,A/q*Math.sin((1-N)*r));T.scale(g,E,B);return T.add(J,c,g)}return T.lerp(J,
m,E,N)};a.slerpTangent=function(m,E,N,J=x.create(),q=x.create()){const B=T.length(m),r=T.length(E);var A=T.dot(m,E)/(B*r);if(.9999999999999999>A){A=Math.acos(A);const H=Math.sin(A),O=Math.sin(N*A),Q=Math.sin((1-N)*A),S=(1-N)*B+N*r,n=S/H,u=n/r*O;T.scale(c,m,n/B*Q);T.scale(g,E,u);T.add(J,c,g);T.scale(c,m,1/B*(-Math.cos((1-N)*A)*A*S+Q*(-B+r)));T.scale(g,E,1/r*(Math.cos(N*A)*A*S+O*(-B+r)));T.add(q,c,g);T.scale(q,q,1/H);return q}T.lerp(J,m,E,N);T.subtract(q,E,m);T.normalize(q,q);return q};a.tangentFrame=
function(m,E,N){Math.abs(m[0])>Math.abs(m[1])?T.set(E,0,1,0):T.set(E,1,0,0);T.cross(N,m,E);T.normalize(E,E);T.cross(E,N,m);T.normalize(N,N)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(a,b,T,x){function p(c,g){if(!c)throw g=g||"assert",console.log(Error(g).stack),new h(g);}const l=x.create();
let h=function(){function c(g){this.message=g}c.prototype.toString=function(){return`AssertException: ${this.message}`};return c}();a.assert=p;a.fovd2fovx=function(c,g,m){return 2*Math.atan(g*Math.tan(.5*c)/Math.sqrt(g*g+m*m))};a.fovd2fovy=function(c,g,m){return 2*Math.atan(m*Math.tan(.5*c)/Math.sqrt(g*g+m*m))};a.fovx2fovd=function(c,g,m){return 2*Math.atan(Math.sqrt(g*g+m*m)*Math.tan(.5*c)/g)};a.fovy2fovd=function(c,g,m){return 2*Math.atan(Math.sqrt(g*g+m*m)*Math.tan(.5*c)/m)};a.isTranslationMatrix=
function(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[3]&&0===c[4]&&1===c[5]&&0===c[6]&&0===c[7]&&0===c[8]&&0===c[9]&&1===c[10]&&0===c[11]&&1===c[15]};a.logWithBase=function(c,g){return Math.log(c)/Math.log(g)};a.project=function(c,g,m,E,N){N||(N=c);l[0]=c[0];l[1]=c[1];l[2]=c[2];l[3]=1;T.transformMat4(l,l,g);2<N.length&&(N[2]=-l[2]);T.transformMat4(l,l,m);p(0!==l[3]);N[0]=l[0]/l[3];N[1]=l[1]/l[3];N[2]=l[2]/l[3];N[0]=(.5*N[0]+.5)*E[2]+E[0];N[1]=(.5*N[1]+.5)*E[3]+E[1]};a.rayBoxTest=function(c,g,m,
E){let N,J=(m[0]-c[0])/g[0],q=(E[0]-c[0])/g[0];J>q&&(N=J,J=q,q=N);let B=(m[1]-c[1])/g[1],r=(E[1]-c[1])/g[1];B>r&&(N=B,B=r,r=N);if(J>r||B>q)return!1;B>J&&(J=B);r<q&&(q=r);m=(m[2]-c[2])/g[2];c=(E[2]-c[2])/g[2];m>c&&(N=m,m=c,c=N);if(J>c||m>q)return!1;c<q&&(q=c);return 0>q?!1:!0};a.rayRay2D=function(c,g,m,E,N,J=b.create()){const q=(E[N]-m[N])*(g[0]-c[0])-(E[0]-m[0])*(g[N]-c[N]);if(0===q)return!1;m=((E[0]-m[0])*(c[N]-m[N])-(E[N]-m[N])*(c[0]-m[0]))/q;J[0]=c[0]+m*(g[0]-c[0]);J[1]=c[N]+m*(g[N]-c[N]);return!0};
a.setMatrixTranslation3=function(c,g,m,E){c[12]=g;c[13]=m;c[14]=E};a.verify=function(c,g){c||console.warn("Verify failed: "+(g||"")+"\n"+Error("verify").stack)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeProcessing":function(){define("exports ../../../../../geometry/support/meshUtils/deduplicate ../../../support/meshProcessing ../../../support/buffer/InterleavedLayout ../VertexAttribute ./bufferLayouts ./edgeBufferWriters ./edgePreprocessing".split(" "),
function(a,b,T,x,p,l,h,c){function g(J,q,B,r){if(q)return q=T.computeNeighbors(B,r,J.count),new m(B,r,q,J);J=b.deduplicate(J.buffer,J.stride/4,{originalIndices:B,originalIndicesLength:r});r=T.computeNeighbors(J.indices,r,J.uniqueCount);return{faces:J.indices,facesLength:J.indices.length,neighbors:r,vertices:l.EdgeInputBufferLayout.createView(J.buffer)}}let m=function(J,q,B,r){this.faces=J;this.facesLength=q;this.neighbors=B;this.vertices=r};const E=new h.RegularEdgeBufferWriter,N=new h.SilhouetteEdgeBufferWriter;
h=x.newLayout().vec3f(p.VertexAttribute.POSITION0).vec3f(p.VertexAttribute.POSITION1);x=x.newLayout().vec3f(p.VertexAttribute.POSITION0).vec3f(p.VertexAttribute.POSITION1).u16(p.VertexAttribute.COMPONENTINDEX).u16(p.VertexAttribute.U16PADDING,{glPadding:!0});a.extract=function(J){const q=g(J.data,J.skipDeduplicate,J.indices,J.indicesLength);E.updateSettings(J.writerSettings);N.updateSettings(J.writerSettings);return c.extractEdges(q,E,N)};a.extractComponentsEdgeLocationsLayout=x;a.extractEdgeInformation=
g;a.extractEdgeLocationsLayout=h;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/meshUtils/deduplicate":function(){define(["exports","../../../core/mathUtils"],function(a,b){let T=null;a.deduplicate=function(x,p,l){var h=x.byteLength/(4*p),c=new Uint32Array(x,0,h*p);x=new Uint32Array(h);var g=l?.minReduction??0;const m=l?.originalIndices||null,E=m?m.length:0;var N=l?.componentOffsets||null;l=0;if(N)for(var J=0;J<N.length-1;J++){var q=
N[J+1]-N[J];q>l&&(l=q)}else l=h;var B=Math.floor(1.1*l)+1;if(null==T||T.length<2*B)T=new Uint32Array(b.nextHighestPowerOfTwo(2*B));for(l=0;l<2*B;l++)T[l]=0;l=0;q=(J=!!N&&!!m)?E:h;var r=J?new Uint32Array(E):null,A=0!==g?Math.ceil(7.84*1.96/(g*g)*g*(1-g)):q,H=1,O=N?N[1]:q;for(var Q=0;Q<q;Q++){if(Q===A){var S=1-l/Q;if(S+1.96*Math.sqrt(S*(1-S)/Q)<g)return null;A*=2}if(Q===O){for(O=0;O<2*B;O++)T[O]=0;if(m)for(O=N[H-1];O<N[H];O++)r[O]=x[m[O]];O=N[++H]}S=J?m[Q]:Q;const U=S*p;var n=0;for(var u=0;u<p;u++)n=
c[U+u]+n|0,n=n+(n<<11)+(n>>>2)|0;n>>>=0;u=n%B;let la=l;for(;0!==T[2*u+1];){if(T[2*u]===n){const V=T[2*u+1]-1;var F=V*p;a:{for(let C=0;C<p;C++)if(c[U+C]!==c[F+C]){F=!1;break a}F=!0}if(F){la=x[V];break}}u++;u>=B&&(u-=B)}la===l&&(T[2*u]=n,T[2*u+1]=S+1,l++);x[S]=la}if(0!==g&&1-l/h<g)return null;if(J){for(h=N[H-1];h<r.length;h++)r[h]=x[m[h]];x=r}h=new Uint32Array(p*l);l=0;for(H=0;H<q;H++)if(x[H]===l){g=c;N=(J?m[H]:H)*p;B=h;r=l*p;A=p;for(Q=0;Q<A;Q++)B[r+Q]=g[N+Q];l++}if(m&&!J){p=new Uint32Array(E);for(c=
0;c<p.length;c++)p[c]=x[m[c]];x=p}return{buffer:h.buffer,indices:x,uniqueCount:l}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/meshProcessing":function(){define(["exports"],function(a){a.computeNeighbors=function(b,T,x){T/=3;const p=new Uint32Array(x+1),l=new Uint32Array(x+1);var h=(r,A)=>{r<A?p[r+1]++:l[A+1]++};for(var c=0;c<T;c++){var g=b[3*c],m=b[3*c+1],E=b[3*c+2];h(g,m);h(m,E);h(E,g)}c=h=0;for(g=0;g<x;g++)m=p[g+1],E=l[g+1],
p[g+1]=h,l[g+1]=c,h+=m,c+=E;const N=new Uint32Array(6*T),J=p[x];h=(r,A,H)=>{r<A?(r=p[r+1]++,N[2*r]=A,N[2*r+1]=H):(A=l[A+1]++,N[2*J+2*A]=r,N[2*J+2*A+1]=H)};for(c=0;c<T;c++)g=b[3*c],m=b[3*c+1],E=b[3*c+2],h(g,m,c),h(m,E,c),h(E,g,c);h=(r,A)=>{const H=2*r;r=A-r;for(A=1;A<r;A++){const O=N[H+2*A],Q=N[H+2*A+1];let S=A-1;for(S;0<=S&&N[H+2*S]>O;S--)N[H+2*S+2]=N[H+2*S],N[H+2*S+3]=N[H+2*S+1];N[H+2*S+2]=O;N[H+2*S+3]=Q}};for(c=0;c<x;c++)h(p[c],p[c+1]),h(J+l[c],J+l[c+1]);const q=new Int32Array(3*T),B=(r,A)=>r===
b[3*A]?0:r===b[3*A+1]?1:r===b[3*A+2]?2:-1;T=(r,A)=>{r=B(r,A);q[3*A+r]=-1};h=(r,A,H,O)=>{r=B(r,A);q[3*A+r]=O;H=B(H,O);q[3*O+H]=A};for(c=0;c<x;c++){g=p[c];m=p[c+1];E=l[c];const r=l[c+1];for(;g<m&&E<r;){const A=N[2*g],H=N[2*J+2*E];A===H?(h(c,N[2*g+1],H,N[2*J+2*E+1]),g++,E++):A<H?(T(c,N[2*g+1]),g++):(T(H,N[2*J+2*E+1]),E++)}for(;g<m;)T(c,N[2*g+1]),g++;for(;E<r;)T(N[2*J+2*E],N[2*J+2*E+1]),E++}return q};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types"],function(a,b,T,x){let p=function(){function h(g,m){this.layout=g;this.buffer="number"===typeof m?new ArrayBuffer(m*g.stride):m;for(const E of g.fieldNames)m=g.fields.get(E),this[E]=new m.constructor(this.buffer,m.offset,this.stride)}var c=h.prototype;c.getField=function(g,m){return(g=this[g])&&g.elementCount===m.ElementCount&&g.elementType===m.ElementType?g:
null};c.slice=function(g,m){return new h(this.layout,this.buffer.slice(g*this.stride,m*this.stride))};c.copyFrom=function(g,m,E,N){const J=this.stride;0===J%4?(g=new Uint32Array(g.buffer,m*J,N*J/4),(new Uint32Array(this.buffer,E*J,N*J/4)).set(g)):(g=new Uint8Array(g.buffer,m*J,N*J),(new Uint8Array(this.buffer,E*J,N*J)).set(g))};b._createClass(h,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);
return h}(),l=function(){function h(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var c=h.prototype;c.vec2f=function(g,m){this._appendField(g,T.BufferViewVec2f,m);return this};c.vec2f64=function(g,m){this._appendField(g,T.BufferViewVec2f64,m);return this};c.vec3f=function(g,m){this._appendField(g,T.BufferViewVec3f,m);return this};c.vec3f64=function(g,m){this._appendField(g,T.BufferViewVec3f64,m);return this};c.vec4f=function(g,m){this._appendField(g,T.BufferViewVec4f,m);return this};c.vec4f64=
function(g,m){this._appendField(g,T.BufferViewVec4f64,m);return this};c.mat3f=function(g,m){this._appendField(g,T.BufferViewMat3f,m);return this};c.mat3f64=function(g,m){this._appendField(g,T.BufferViewMat3f64,m);return this};c.mat4f=function(g,m){this._appendField(g,T.BufferViewMat4f,m);return this};c.mat4f64=function(g,m){this._appendField(g,T.BufferViewMat4f64,m);return this};c.vec4u8=function(g,m){this._appendField(g,T.BufferViewVec4u8,m);return this};c.f32=function(g,m){this._appendField(g,T.BufferViewFloat,
m);return this};c.f64=function(g,m){this._appendField(g,T.BufferViewFloat64,m);return this};c.u8=function(g,m){this._appendField(g,T.BufferViewUint8,m);return this};c.u16=function(g,m){this._appendField(g,T.BufferViewUint16,m);return this};c.i8=function(g,m){this._appendField(g,T.BufferViewInt8,m);return this};c.vec2i8=function(g,m){this._appendField(g,T.BufferViewVec2i8,m);return this};c.vec2i16=function(g,m){this._appendField(g,T.BufferViewVec2i16,m);return this};c.vec2u8=function(g,m){this._appendField(g,
T.BufferViewVec2u8,m);return this};c.vec4u16=function(g,m){this._appendField(g,T.BufferViewVec4u16,m);return this};c.u32=function(g,m){this._appendField(g,T.BufferViewUint32,m);return this};c._appendField=function(g,m,E){const N=m.ElementCount*x.elementTypeSize(m.ElementType);this.fields.set(g,{size:N,constructor:m,offset:this.stride,optional:E});this.stride+=N;this.fieldNames.push(g)};c.alignTo=function(g){this.stride=Math.floor((this.stride+g-1)/g)*g;return this};c.hasField=function(g){return this.fieldNames.includes(g)};
c.createBuffer=function(g){return new p(this,g)};c.createView=function(g){return new p(this,g)};c.clone=function(){const g=new h;g.stride=this.stride;g.fields=new Map;this.fields.forEach((m,E)=>g.fields.set(E,m));g.fieldNames=this.fieldNames.slice();g.BufferType=this.BufferType;return g};return h}();a.InterleavedBuffer=p;a.InterleavedLayout=l;a.newLayout=function(){return new l};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),
function(a,b,T,x,p,l,h,c){let g=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);g.ElementType="f32";let m=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,
f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);m.ElementType="f32";let E=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);E.ElementType="f32";
let N=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);N.ElementType="f32";let J=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.prototype.slice=
function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(T.BufferViewMat3Impl);J.ElementType="f32";T=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType="f64";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(T.BufferViewMat3Impl);
T.ElementType="f64";let q=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float32Array,f,R,ua,ya)||this;f.elementType="f32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(x.BufferViewMat4Impl);q.ElementType="f32";x=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType="f64";return f}b._inheritsLoose(y,D);
y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(x.BufferViewMat4Impl);x.ElementType="f64";let B=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType="f64";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};
return y}(p.BufferViewScalarImpl);B.ElementType="f64";let r=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType="f64";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);r.ElementType="f64";let A=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType=
"f64";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);A.ElementType="f64";let H=function(D){function y(f,R=0,ua,ya){f=D.call(this,Float64Array,f,R,ua,ya)||this;f.elementType="f64";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,
f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);H.ElementType="f64";let O=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint8Array,f,R,ua,ya)||this;f.elementType="u8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);O.ElementType="u8";let Q=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint8Array,
f,R,ua,ya)||this;f.elementType="u8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);Q.ElementType="u8";let S=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint8Array,f,R,ua,ya)||this;f.elementType="u8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,
R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);S.ElementType="u8";let n=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint8Array,f,R,ua,ya)||this;f.elementType="u8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);n.ElementType="u8";let u=function(D){function y(f,R=0,ua,
ya){f=D.call(this,Uint16Array,f,R,ua,ya)||this;f.elementType="u16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);u.ElementType="u16";let F=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint16Array,f,R,ua,ya)||this;f.elementType="u16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,
f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);F.ElementType="u16";let U=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint16Array,f,R,ua,ya)||this;f.elementType="u16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);U.ElementType="u16";
let la=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint16Array,f,R,ua,ya)||this;f.elementType="u16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);la.ElementType="u16";let V=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint32Array,f,R,ua,ya)||this;f.elementType="u32";return f}b._inheritsLoose(y,D);y.prototype.slice=
function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);V.ElementType="u32";let C=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint32Array,f,R,ua,ya)||this;f.elementType="u32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);
C.ElementType="u32";let K=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint32Array,f,R,ua,ya)||this;f.elementType="u32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);K.ElementType="u32";let M=function(D){function y(f,R=0,ua,ya){f=D.call(this,Uint32Array,f,R,ua,ya)||this;f.elementType="u32";return f}b._inheritsLoose(y,
D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);M.ElementType="u32";let P=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int8Array,f,R,ua,ya)||this;f.elementType="i8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};
return y}(p.BufferViewScalarImpl);P.ElementType="i8";let X=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int8Array,f,R,ua,ya)||this;f.elementType="i8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);X.ElementType="i8";let I=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int8Array,f,R,ua,ya)||this;f.elementType="i8";return f}
b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);I.ElementType="i8";let ha=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int8Array,f,R,ua,ya)||this;f.elementType="i8";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+
f.byteLength)};return y}(c.BufferViewVec4Impl);ha.ElementType="i8";let na=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int16Array,f,R,ua,ya)||this;f.elementType="i16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);na.ElementType="i16";let ta=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int16Array,f,R,ua,ya)||this;
f.elementType="i16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);ta.ElementType="i16";let da=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int16Array,f,R,ua,ya)||this;f.elementType="i16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,
f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);da.ElementType="i16";let v=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int16Array,f,R,ua,ya)||this;f.elementType="i16";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);v.ElementType="i16";p=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int32Array,
f,R,ua,ya)||this;f.elementType="i32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(p.BufferViewScalarImpl);p.ElementType="i32";l=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int32Array,f,R,ua,ya)||this;f.elementType="i32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,
R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(l.BufferViewVec2Impl);l.ElementType="i32";h=function(D){function y(f,R=0,ua,ya){f=D.call(this,Int32Array,f,R,ua,ya)||this;f.elementType="i32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(h.BufferViewVec3Impl);h.ElementType="i32";c=function(D){function y(f,R=0,ua,ya){f=
D.call(this,Int32Array,f,R,ua,ya)||this;f.elementType="i32";return f}b._inheritsLoose(y,D);y.prototype.slice=function(f,R){return this.sliceBuffer(y,f,R)};y.fromTypedArray=function(f,R){return new y(f.buffer,f.byteOffset,R,f.byteOffset+f.byteLength)};return y}(c.BufferViewVec4Impl);c.ElementType="i32";a.BufferViewFloat=g;a.BufferViewFloat64=B;a.BufferViewInt16=na;a.BufferViewInt32=p;a.BufferViewInt8=P;a.BufferViewMat3f=J;a.BufferViewMat3f64=T;a.BufferViewMat4f=q;a.BufferViewMat4f64=x;a.BufferViewUint16=
u;a.BufferViewUint32=V;a.BufferViewUint8=O;a.BufferViewVec2f=m;a.BufferViewVec2f64=r;a.BufferViewVec2i16=ta;a.BufferViewVec2i32=l;a.BufferViewVec2i8=X;a.BufferViewVec2u16=F;a.BufferViewVec2u32=C;a.BufferViewVec2u8=Q;a.BufferViewVec3f=E;a.BufferViewVec3f64=A;a.BufferViewVec3i16=da;a.BufferViewVec3i32=h;a.BufferViewVec3i8=I;a.BufferViewVec3u16=U;a.BufferViewVec3u32=K;a.BufferViewVec3u8=S;a.BufferViewVec4f=N;a.BufferViewVec4f64=H;a.BufferViewVec4i16=v;a.BufferViewVec4i32=c;a.BufferViewVec4i8=ha;a.BufferViewVec4u16=
la;a.BufferViewVec4u32=M;a.BufferViewVec4u8=n;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,b){let T=function(){function x(l,h,c=0,g,m){this.TypedArrayConstructor=l;this.elementCount=9;l=this.TypedArrayConstructor;void 0===g&&(g=9*l.BYTES_PER_ELEMENT);const E=0===h.byteLength?0:c;this.typedBuffer=null==m?new l(h,E):new l(h,
E,(m-c)/l.BYTES_PER_ELEMENT);this.typedBufferStride=g/l.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var p=x.prototype;p.sliceBuffer=function(l,h,c=this.count-h){h=this.typedBuffer.byteOffset+h*this.stride;return new l(this.buffer,h,this.stride,h+c*this.stride)};p.getMat=function(l,h){l*=this.typedBufferStride;for(let c=0;9>c;c++)h[c]=this.typedBuffer[l++];return h};p.setMat=function(l,
h){l*=this.typedBufferStride;for(let c=0;9>c;c++)this.typedBuffer[l++]=h[c]};p.get=function(l,h){return this.typedBuffer[l*this.typedBufferStride+h]};p.set=function(l,h,c){this.typedBuffer[l*this.typedBufferStride+h]=c};p.copyFrom=function(l,h,c){const g=this.typedBuffer,m=h.typedBuffer;l*=this.typedBufferStride;h=c*h.typedBufferStride;for(c=0;9>c;++c)g[l++]=m[h++]};b._createClass(x,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return x}();T.ElementCount=9;a.BufferViewMat3Impl=
T;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,b){let T=function(){function x(l,h,c=0,g,m){this.TypedArrayConstructor=l;this.elementCount=16;l=this.TypedArrayConstructor;void 0===g&&(g=16*l.BYTES_PER_ELEMENT);const E=0===h.byteLength?0:c;this.typedBuffer=null==m?new l(h,E):new l(h,E,(m-c)/l.BYTES_PER_ELEMENT);this.typedBufferStride=
g/l.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var p=x.prototype;p.sliceBuffer=function(l,h,c=this.count-h){h=this.typedBuffer.byteOffset+h*this.stride;return new l(this.buffer,h,this.stride,h+c*this.stride)};p.getMat=function(l,h){l*=this.typedBufferStride;for(let c=0;16>c;c++)h[c]=this.typedBuffer[l++];return h};p.setMat=function(l,h){l*=this.typedBufferStride;for(let c=0;16>
c;c++)this.typedBuffer[l++]=h[c]};p.get=function(l,h){return this.typedBuffer[l*this.typedBufferStride+h]};p.set=function(l,h,c){this.typedBuffer[l*this.typedBufferStride+h]=c};p.copyFrom=function(l,h,c){const g=this.typedBuffer,m=h.typedBuffer;l*=this.typedBufferStride;h=c*h.typedBufferStride;for(c=0;16>c;++c)g[l++]=m[h++]};b._createClass(x,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return x}();T.ElementCount=16;a.BufferViewMat4Impl=T;Object.defineProperties(a,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,b){let T=function(){function x(l,h,c=0,g,m){this.TypedArrayConstructor=l;this.elementCount=1;l=this.TypedArrayConstructor;void 0===g&&(g=l.BYTES_PER_ELEMENT);const E=0===h.byteLength?0:c;this.typedBuffer=null==m?new l(h,E):new l(h,E,(m-c)/l.BYTES_PER_ELEMENT);this.stride=g;this.typedBufferStride=g/l.BYTES_PER_ELEMENT;this.count=
Math.ceil(this.typedBuffer.length/this.typedBufferStride)}var p=x.prototype;p.sliceBuffer=function(l,h,c=this.count-h){h=this.typedBuffer.byteOffset+h*this.stride;return new l(this.buffer,h,this.stride,h+c*this.stride)};p.get=function(l){return this.typedBuffer[l*this.typedBufferStride]};p.set=function(l,h){this.typedBuffer[l*this.typedBufferStride]=h};b._createClass(x,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return x}();T.ElementCount=1;a.BufferViewScalarImpl=T;Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec2"],function(a,b,T){let x=function(){function p(h,c,g=0,m,E){this.TypedArrayConstructor=h;this.elementCount=2;h=this.TypedArrayConstructor;void 0===m&&(m=2*h.BYTES_PER_ELEMENT);const N=0===c.byteLength?0:g;this.typedBuffer=null==E?new h(c,N):new h(c,N,(E-g)/h.BYTES_PER_ELEMENT);this.typedBufferStride=
m/h.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=p.prototype;l.sliceBuffer=function(h,c,g=this.count-c){c=this.typedBuffer.byteOffset+c*this.stride;return new h(this.buffer,c,this.stride,c+g*this.stride)};l.getVec=function(h,c){h*=this.typedBufferStride;return T.set(c,this.typedBuffer[h],this.typedBuffer[h+1])};l.setVec=function(h,c){h*=this.typedBufferStride;this.typedBuffer[h++]=
c[0];this.typedBuffer[h]=c[1]};l.get=function(h,c){return this.typedBuffer[h*this.typedBufferStride+c]};l.set=function(h,c,g){this.typedBuffer[h*this.typedBufferStride+c]=g};l.setValues=function(h,c,g){h*=this.typedBufferStride;this.typedBuffer[h++]=c;this.typedBuffer[h]=g};l.copyFrom=function(h,c,g){const m=this.typedBuffer,E=c.typedBuffer;h*=this.typedBufferStride;c=g*c.typedBufferStride;m[h++]=E[c++];m[h]=E[c]};b._createClass(p,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return p}();
x.ElementCount=2;a.BufferViewVec2Impl=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(a,b){function T(v,D){v[0]=D[0];v[1]=D[1];return v}function x(v,D,y){v[0]=D;v[1]=y;return v}function p(v,D,y){v[0]=D[0]+y[0];v[1]=D[1]+y[1];return v}function l(v,D,y){v[0]=D[0]-y[0];v[1]=D[1]-y[1];return v}function h(v,D,y){v[0]=D[0]*y[0];v[1]=D[1]*y[1];return v}function c(v,D,y){v[0]=D[0]/y[0];v[1]=
D[1]/y[1];return v}function g(v,D){v[0]=Math.ceil(D[0]);v[1]=Math.ceil(D[1]);return v}function m(v,D){v[0]=Math.floor(D[0]);v[1]=Math.floor(D[1]);return v}function E(v,D,y){v[0]=Math.min(D[0],y[0]);v[1]=Math.min(D[1],y[1]);return v}function N(v,D,y){v[0]=Math.max(D[0],y[0]);v[1]=Math.max(D[1],y[1]);return v}function J(v,D){v[0]=Math.round(D[0]);v[1]=Math.round(D[1]);return v}function q(v,D,y){v[0]=D[0]*y;v[1]=D[1]*y;return v}function B(v,D,y,f){v[0]=D[0]+y[0]*f;v[1]=D[1]+y[1]*f;return v}function r(v,
D){const y=D[0]-v[0];v=D[1]-v[1];return Math.sqrt(y*y+v*v)}function A(v,D){const y=D[0]-v[0];v=D[1]-v[1];return y*y+v*v}function H(v){const D=v[0];v=v[1];return Math.sqrt(D*D+v*v)}function O(v){const D=v[0];v=v[1];return D*D+v*v}function Q(v,D){v[0]=-D[0];v[1]=-D[1];return v}function S(v,D){v[0]=1/D[0];v[1]=1/D[1];return v}function n(v,D){var y=D[0];const f=D[1];y=y*y+f*f;0<y&&(y=1/Math.sqrt(y),v[0]=D[0]*y,v[1]=D[1]*y);return v}function u(v,D){return v[0]*D[0]+v[1]*D[1]}function F(v,D,y){D=D[0]*y[1]-
D[1]*y[0];v[0]=v[1]=0;v[2]=D;return v}function U(v,D,y,f){const R=D[0];D=D[1];v[0]=R+f*(y[0]-R);v[1]=D+f*(y[1]-D);return v}function la(v,D){D=D||1;const y=2*b.RANDOM()*Math.PI;v[0]=Math.cos(y)*D;v[1]=Math.sin(y)*D;return v}function V(v,D,y){const f=D[0];D=D[1];v[0]=y[0]*f+y[2]*D;v[1]=y[1]*f+y[3]*D;return v}function C(v,D,y){const f=D[0];D=D[1];v[0]=y[0]*f+y[2]*D+y[4];v[1]=y[1]*f+y[3]*D+y[5];return v}function K(v,D,y){const f=D[0];D=D[1];v[0]=y[0]*f+y[3]*D+y[6];v[1]=y[1]*f+y[4]*D+y[7];return v}function M(v,
D,y){const f=D[0];D=D[1];v[0]=y[0]*f+y[4]*D+y[12];v[1]=y[1]*f+y[5]*D+y[13];return v}function P(v,D,y,f){const R=D[0]-y[0];D=D[1]-y[1];const ua=Math.sin(f);f=Math.cos(f);v[0]=R*f-D*ua+y[0];v[1]=R*ua+D*f+y[1];return v}function X(v,D){var y=v[0];v=v[1];const f=D[0];D=D[1];let R=y*y+v*v;0<R&&(R=1/Math.sqrt(R));let ua=f*f+D*D;0<ua&&(ua=1/Math.sqrt(ua));y=(y*f+v*D)*R*ua;return 1<y?0:-1>y?Math.PI:Math.acos(y)}function I(v){return"vec2("+v[0]+", "+v[1]+")"}function ha(v,D){return v[0]===D[0]&&v[1]===D[1]}
function na(v,D){const y=v[0];v=v[1];const f=D[0];D=D[1];const R=b.getEpsilon();return Math.abs(y-f)<=R*Math.max(1,Math.abs(y),Math.abs(f))&&Math.abs(v-D)<=R*Math.max(1,Math.abs(v),Math.abs(D))}function ta(v,D,y,f,R){let ua=D[0]-y[0];y=D[1]-y[1];R=(f[0]*ua+f[1]*y)*(R-1);ua=f[0]*R;y=f[1]*R;v[0]=D[0]+ua;v[1]=D[1]+y;return v}const da=Object.freeze(Object.defineProperty({__proto__:null,copy:T,set:x,add:p,subtract:l,multiply:h,divide:c,ceil:g,floor:m,min:E,max:N,round:J,scale:q,scaleAndAdd:B,distance:r,
squaredDistance:A,length:H,squaredLength:O,negate:Q,inverse:S,normalize:n,dot:u,cross:F,lerp:U,random:la,transformMat2:V,transformMat2d:C,transformMat3:K,transformMat4:M,rotate:P,angle:X,str:I,exactEquals:ha,equals:na,projectAndScale:ta,len:H,sub:l,mul:h,div:c,dist:r,sqrDist:A,sqrLen:O},Symbol.toStringTag,{value:"Module"}));a.add=p;a.angle=X;a.ceil=g;a.copy=T;a.cross=F;a.dist=r;a.distance=r;a.div=c;a.divide=c;a.dot=u;a.equals=na;a.exactEquals=ha;a.floor=m;a.inverse=S;a.len=H;a.length=H;a.lerp=U;a.max=
N;a.min=E;a.mul=h;a.multiply=h;a.negate=Q;a.normalize=n;a.projectAndScale=ta;a.random=la;a.rotate=P;a.round=J;a.scale=q;a.scaleAndAdd=B;a.set=x;a.sqrDist=A;a.sqrLen=O;a.squaredDistance=A;a.squaredLength=O;a.str=I;a.sub=l;a.subtract=l;a.transformMat2=V;a.transformMat2d=C;a.transformMat3=K;a.transformMat4=M;a.vec2=da})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec3"],function(a,b,T){let x=function(){function p(h,
c,g=0,m,E){this.TypedArrayConstructor=h;this.elementCount=3;h=this.TypedArrayConstructor;void 0===m&&(m=3*h.BYTES_PER_ELEMENT);const N=0===c.byteLength?0:g;this.typedBuffer=null==E?new h(c,N):new h(c,N,(E-g)/h.BYTES_PER_ELEMENT);this.typedBufferStride=m/h.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=p.prototype;l.sliceBuffer=function(h,c,g=this.count-c){c=this.typedBuffer.byteOffset+
c*this.stride;return new h(this.buffer,c,this.stride,c+g*this.stride)};l.getVec=function(h,c){h*=this.typedBufferStride;return T.set(c,this.typedBuffer[h],this.typedBuffer[h+1],this.typedBuffer[h+2])};l.setVec=function(h,c){h*=this.typedBufferStride;this.typedBuffer[h++]=c[0];this.typedBuffer[h++]=c[1];this.typedBuffer[h]=c[2]};l.get=function(h,c){return this.typedBuffer[h*this.typedBufferStride+c]};l.set=function(h,c,g){this.typedBuffer[h*this.typedBufferStride+c]=g};l.setValues=function(h,c,g,m){h*=
this.typedBufferStride;this.typedBuffer[h++]=c;this.typedBuffer[h++]=g;this.typedBuffer[h]=m};l.copyFrom=function(h,c,g){const m=this.typedBuffer,E=c.typedBuffer;h*=this.typedBufferStride;c=g*c.typedBufferStride;m[h++]=E[c++];m[h++]=E[c++];m[h]=E[c]};b._createClass(p,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return p}();x.ElementCount=3;a.BufferViewVec3Impl=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec4"],function(a,b,T){let x=function(){function p(h,c,g=0,m,E){this.TypedArrayConstructor=h;this.start=g;this.elementCount=4;h=this.TypedArrayConstructor;void 0===m&&(m=4*h.BYTES_PER_ELEMENT);const N=0===c.byteLength?0:g;this.typedBuffer=null==E?new h(c,N):new h(c,N,(E-g)/h.BYTES_PER_ELEMENT);this.typedBufferStride=m/h.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*
this.TypedArrayConstructor.BYTES_PER_ELEMENT}var l=p.prototype;l.sliceBuffer=function(h,c,g=this.count-c){c=this.typedBuffer.byteOffset+c*this.stride;return new h(this.buffer,c,this.stride,c+g*this.stride)};l.getVec=function(h,c){h*=this.typedBufferStride;return T.set(c,this.typedBuffer[h++],this.typedBuffer[h++],this.typedBuffer[h++],this.typedBuffer[h])};l.setVec=function(h,c){h*=this.typedBufferStride;this.typedBuffer[h++]=c[0];this.typedBuffer[h++]=c[1];this.typedBuffer[h++]=c[2];this.typedBuffer[h]=
c[3]};l.get=function(h,c){return this.typedBuffer[h*this.typedBufferStride+c]};l.set=function(h,c,g){this.typedBuffer[h*this.typedBufferStride+c]=g};l.setValues=function(h,c,g,m,E){h*=this.typedBufferStride;this.typedBuffer[h++]=c;this.typedBuffer[h++]=g;this.typedBuffer[h++]=m;this.typedBuffer[h]=E};l.copyFrom=function(h,c,g){const m=this.typedBuffer,E=c.typedBuffer;h*=this.typedBufferStride;c=g*c.typedBufferStride;m[h++]=E[c++];m[h++]=E[c++];m[h++]=E[c++];m[h]=E[c]};b._createClass(p,[{key:"buffer",
get:function(){return this.typedBuffer.buffer}}]);return p}();x.ElementCount=4;a.BufferViewVec4Impl=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/buffer/types":function(){define(["exports"],function(a){a.elementTypeSize=function(b){switch(b){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};a.isInteger=function(b){switch(b){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;
case "f32":case "f64":return!1}};a.isSigned=function(b){switch(b){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};a.maximumValue=function(b){switch(b){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(a){a.VertexAttribute=void 0;var b=a.VertexAttribute||(a.VertexAttribute={});b.POSITION="position";b.NORMAL="normal";b.UV0="uv0";b.AUXPOS1="auxpos1";b.AUXPOS2="auxpos2";b.MAPPOS="mapPos";b.COLOR="color";b.SYMBOLCOLOR="symbolColor";b.SIZE="size";b.TANGENT="tangent";b.OFFSET="offset";b.SUBDIVISIONFACTOR="subdivisionFactor";b.COLORFEATUREATTRIBUTE="colorFeatureAttribute";b.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";
b.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";b.DISTANCETOSTART="distanceToStart";b.UVMAPSPACE="uvMapSpace";b.BOUNDINGRECT="boundingRect";b.UVREGION="uvRegion";b.NORMALCOMPRESSED="normalCompressed";b.PROFILERIGHT="profileRight";b.PROFILEUP="profileUp";b.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";b.FEATUREVALUE="featureValue";b.MODELORIGINHI="modelOriginHi";b.MODELORIGINLO="modelOriginLo";b.MODEL="model";b.MODELNORMAL="modelNormal";b.INSTANCECOLOR="instanceColor";b.INSTANCEFEATUREATTRIBUTE=
"instanceFeatureAttribute";b.LOCALTRANSFORM="localTransform";b.GLOBALTRANSFORM="globalTransform";b.BOUNDINGSPHERE="boundingSphere";b.MODELORIGIN="modelOrigin";b.MODELSCALEFACTORS="modelScaleFactors";b.FEATUREATTRIBUTE="featureAttribute";b.STATE="state";b.LODLEVEL="lodLevel";b.POSITION0="position0";b.POSITION1="position1";b.NORMALA="normalA";b.NORMALB="normalB";b.COMPONENTINDEX="componentIndex";b.VARIANTOFFSET="variantOffset";b.VARIANTSTROKE="variantStroke";b.VARIANTEXTENSION="variantExtension";b.U8PADDING=
"u8padding";b.U16PADDING="u16padding";b.SIDENESS="sideness";b.START="start";b.END="end";b.UP="up";b.EXTRUDE="extrude";b.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";b.OBJECTANDLAYERIDCOLOR_INSTANCED="objectAndLayerIdColor_instanced";Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts":function(){define(["exports","../../../support/buffer/glUtil","../../../support/buffer/InterleavedLayout","../VertexAttribute"],
function(a,b,T,x){const p=T.newLayout().vec3f(x.VertexAttribute.POSITION).u16(x.VertexAttribute.COMPONENTINDEX).u16(x.VertexAttribute.U16PADDING),l=T.newLayout().vec2u8(x.VertexAttribute.SIDENESS);b=b.glLayout(l);T=T.newLayout().vec3f(x.VertexAttribute.POSITION0).vec3f(x.VertexAttribute.POSITION1).u16(x.VertexAttribute.COMPONENTINDEX).u8(x.VertexAttribute.VARIANTOFFSET,{glNormalized:!0}).u8(x.VertexAttribute.VARIANTSTROKE).u8(x.VertexAttribute.VARIANTEXTENSION,{glNormalized:!0}).u8(x.VertexAttribute.U8PADDING,
{glPadding:!0}).u16(x.VertexAttribute.U16PADDING,{glPadding:!0});const h=T.clone().vec3f(x.VertexAttribute.NORMAL),c=T.clone().vec3f(x.VertexAttribute.NORMALA).vec3f(x.VertexAttribute.NORMALB);x=new Map([[x.VertexAttribute.POSITION0,0],[x.VertexAttribute.POSITION1,1],[x.VertexAttribute.COMPONENTINDEX,2],[x.VertexAttribute.VARIANTOFFSET,3],[x.VertexAttribute.VARIANTSTROKE,4],[x.VertexAttribute.VARIANTEXTENSION,5],[x.VertexAttribute.NORMAL,6],[x.VertexAttribute.NORMALA,6],[x.VertexAttribute.NORMALB,
7],[x.VertexAttribute.SIDENESS,8]]);a.CommonInstancesLayout=T;a.EdgeInputBufferLayout=p;a.EdgeShaderAttributeLocations=x;a.RegularEdgeInstancesLayout=h;a.SilhouetteEdgeInstancesLayout=c;a.VertexLayout=l;a.glVertexLayout=b;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports","../../../webgl/enums","../../../webgl/VertexElementDescriptor"],function(a,b,T){const x={u8:b.DataType.UNSIGNED_BYTE,u16:b.DataType.UNSIGNED_SHORT,
u32:b.DataType.UNSIGNED_INT,i8:b.DataType.BYTE,i16:b.DataType.SHORT,i32:b.DataType.INT,f32:b.DataType.FLOAT};a.glLayout=function(p,l=0){const h=p.stride;return p.fieldNames.filter(c=>{c=p.fields.get(c).optional;return!(c&&c.glPadding)}).map(c=>{const g=p.fields.get(c),m=g.constructor.ElementCount;var E=x[g.constructor.ElementType];if(!E)throw Error("BufferType not supported in WebGL");return new T.VertexElementDescriptor(c,m,E,g.offset,h,!(!g.optional||!g.optional.glNormalized),l)})};Object.defineProperties(a,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters":function(){define("exports ../../../../../core/RandomLCG ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(a,b,T,x,p,l){function h(H){const O=E;O[0]=H.position0[0];O[1]=H.position0[1];O[2]=H.position0[2];O[3]=H.position1[0];O[4]=H.position1[1];O[5]=H.position1[2];J[0]=5381;for(H=0;H<N.length;H++)J[0]=
31*J[0]+N[H];return J[0]}function c(H){const O=E;O[0]=g(H.position0[0]);O[1]=g(H.position0[1]);O[2]=g(H.position0[2]);O[3]=g(H.position1[0]);O[4]=g(H.position1[1]);O[5]=g(H.position1[2]);J[0]=5381;for(H=0;H<N.length;H++)J[0]=31*J[0]+N[H];return J[0]}function g(H){return Math.round(1E4*H)/1E4}let m=function(){function H(){}var O=H.prototype;O.updateSettings=function(Q){this.settings=Q;this._edgeHashFunction=Q.reducedPrecision?c:h};O.write=function(Q,S,n){var u=this._edgeHashFunction(n);A.seed=u;u=
A.getIntRange(0,255);const F=A.getIntRange(0,this.settings.variants-1);var U=A.getFloat();U=-(1-Math.min(U/.7,1))+Math.max(0,U-.7)/(1-.7);U=255*(Math.abs(U)**1.2*(0>U?-1:1)*.5+.5);Q.position0.setVec(S,n.position0);Q.position1.setVec(S,n.position1);Q.componentIndex.set(S,n.componentIndex);Q.variantOffset.set(S,u);Q.variantStroke.set(S,F);Q.variantExtension.set(S,U)};O.trim=function(Q,S){return Q.slice(0,S)};return H}();const E=new Float32Array(6),N=new Uint32Array(E.buffer),J=new Uint32Array(1);let q=
function(){function H(){this._commonWriter=new m}var O=H.prototype;O.updateSettings=function(Q){this._commonWriter.updateSettings(Q)};O.allocate=function(Q){return l.RegularEdgeInstancesLayout.createBuffer(Q)};O.write=function(Q,S,n){this._commonWriter.write(Q,S,n);T.add(r,n.faceNormal0,n.faceNormal1);T.normalize(r,r);Q.normal.setVec(S,r)};O.trim=function(Q,S){return this._commonWriter.trim(Q,S)};return H}();q.Layout=l.RegularEdgeInstancesLayout;q.glLayout=p.glLayout(l.RegularEdgeInstancesLayout,
1);let B=function(){function H(){this._commonWriter=new m}var O=H.prototype;O.updateSettings=function(Q){this._commonWriter.updateSettings(Q)};O.allocate=function(Q){return l.SilhouetteEdgeInstancesLayout.createBuffer(Q)};O.write=function(Q,S,n){this._commonWriter.write(Q,S,n);Q.normalA.setVec(S,n.faceNormal0);Q.normalB.setVec(S,n.faceNormal1)};O.trim=function(Q,S){return this._commonWriter.trim(Q,S)};return H}();B.Layout=l.SilhouetteEdgeInstancesLayout;B.glLayout=p.glLayout(l.SilhouetteEdgeInstancesLayout,
1);const r=x.create(),A=new b;a.CommonBufferWriter=m;a.RegularEdgeBufferWriter=q;a.SilhouetteEdgeBufferWriter=B;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing":function(){define("exports ../../../../../core/arrayUtils ../../../../../core/mathUtils ../../../../../core/typedArrayUtil ../../../../../chunks/vec3 ../../../../../chunks/vec3f64".split(" "),function(a,b,T,x,p,l){function h(J,q){const B=
T.acosClamped(J.cosAngle),r=m.fwd,A=m.ortho;p.direction(r,J.position1,J.position0);J=0<p.dot(p.cross(A,J.faceNormal0,J.faceNormal1),r)?-1:1;return B*J>q}function c(J){const q=J.faces.length/3,B=J.faces;J=J.neighbors;var r=0;for(var A=0;A<q;A++){var H=J[3*A+1],O=J[3*A+2],Q=B[3*A],S=B[3*A+1],n=B[3*A+2];r+=-1===J[3*A]||Q<S?1:0;r+=-1===H||S<n?1:0;r+=-1===O||n<Q?1:0}r=new Int32Array(4*r);A=0;for(H=0;H<q;H++){O=J[3*H];Q=J[3*H+1];S=J[3*H+2];n=B[3*H];const u=B[3*H+1],F=B[3*H+2];if(-1===O||n<u)r[A++]=n,r[A++]=
u,r[A++]=H,r[A++]=O;if(-1===Q||u<F)r[A++]=u,r[A++]=F,r[A++]=H,r[A++]=Q;if(-1===S||F<n)r[A++]=F,r[A++]=n,r[A++]=H,r[A++]=S}return r}function g(J){const q=J.faces.length/3,B=J.vertices.position;J=J.faces;const r=E.v0,A=E.v1,H=E.v2,O=new Float32Array(3*q);for(let Q=0;Q<q;Q++){const S=J[3*Q+1],n=J[3*Q+2];B.getVec(J[3*Q],r);B.getVec(S,A);B.getVec(n,H);p.subtract(A,A,r);p.subtract(H,H,r);p.cross(r,A,H);p.normalize(r,r);O[3*Q]=r[0];O[3*Q+1]=r[1];O[3*Q+2]=r[2]}return O}a.EdgeType=void 0;(function(J){J[J.SOLID=
0]="SOLID";J[J.SKETCH=1]="SKETCH"})(a.EdgeType||(a.EdgeType={}));const m={edge:{position0:l.create(),position1:l.create(),faceNormal0:l.create(),faceNormal1:l.create(),componentIndex:0,cosAngle:0},ortho:l.create(),fwd:l.create()},E={v0:l.create(),v1:l.create(),v2:l.create()},N={anglePlanar:4,angleSignificantEdge:35};a.extractEdges=function(J,q,B,r=N){const A=J.vertices.position;var H=J.vertices.componentIndex,O=T.deg2rad(r.anglePlanar);r=T.deg2rad(r.angleSignificantEdge);const Q=Math.cos(r),S=Math.cos(O),
n=m.edge,u=n.position0,F=n.position1,U=n.faceNormal0,la=n.faceNormal1,V=g(J),C=c(J),K=C.length/4;J=q.allocate(K);r=0;const M=B.allocate(K);let P=0,X=0,I=0;const ha=b.range(0,K),na=new Float32Array(K);x.forEach(na,(D,y,f)=>{A.getVec(C[4*y],u);A.getVec(C[4*y+1],F);f[y]=p.distance(u,F)});ha.sort((D,y)=>na[y]-na[D]);const ta=[],da=[];for(let D=0;D<K;D++){var v=ha[D];const y=na[v],f=C[4*v],R=C[4*v+1],ua=C[4*v+2];v=C[4*v+3];const ya=-1===v;A.getVec(f,u);A.getVec(R,F);if(ya)p.set(U,V[3*ua],V[3*ua+1],V[3*
ua+2]),p.copy(la,U),n.componentIndex=H.get(f),n.cosAngle=p.dot(U,la);else{p.set(U,V[3*ua],V[3*ua+1],V[3*ua+2]);p.set(la,V[3*v],V[3*v+1],V[3*v+2]);n.componentIndex=H.get(f);n.cosAngle=p.dot(U,la);if(n.cosAngle>S)continue;-.9999>n.cosAngle&&p.copy(la,U)}X+=y;I++;ya||n.cosAngle<Q?(q.write(J,r++,n),ta.push(y)):h(n,O)&&(B.write(M,P++,n),da.push(y))}H=new Float32Array(ta.reverse());O=new Float32Array(da.reverse());return{regular:{instancesData:q.trim(J,r),lodInfo:{lengths:H}},silhouette:{instancesData:B.trim(M,
P),lodInfo:{lengths:O}},averageEdgeLength:X/I}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils":function(){define(["exports","../../../../../chunks/vec3","../../../../../chunks/sphere"],function(a,b,T){a.MAX_CANDIDATE_COUNT=1E3;a.boundsFromEdge=function(x,p,l){const h=T.create(),c=T.getCenter(h);b.scaleAndAdd(c,c,x,.5);b.scaleAndAdd(c,c,p,.5);h[3]=b.distance(c,x);b.add(c,
c,l);return h};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/arrayUtils ../../../../../core/Error ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/lineSegment ../../../../../chunks/sphere ../../../../../layers/graphics/data/QueryEngineResult ../../../../3d/webgl-engine/lib/Octree ../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing ./sceneLayerSnappingUtils".split(" "),function(a,
b,T,x,p,l,h,c,g,m,E,N,J,q,B,r,A,H){p=function(){function S(){this._idToComponent=new Map;this._components=new r(u=>u.bounds);this._edges=new r(u=>u.bounds);this._tmpLineSegment=J.create();this._tmpP1=N.create();this._tmpP2=N.create();this._tmpP3=N.create();this.remoteClient=null}var n=S.prototype;n.fetchCandidates=function(){var u=a._asyncToGenerator(function*(F,U){yield Promise.resolve();x.throwIfAborted(U);yield this._ensureEdgeLocations(F,U);const la=[];this._edges.forEachNeighbor(V=>{this._addCandidates(F,
V,la);return la.length<H.MAX_CANDIDATE_COUNT},F.bounds);return{result:{candidates:la}}});return function(F,U){return u.apply(this,arguments)}}();n._ensureEdgeLocations=function(){var u=a._asyncToGenerator(function*(F,U){const la=[];this._components.forEachNeighbor(V=>{if(T.isNone(V.info)){const {id:C,uid:K}=V;la.push({id:C,uid:K})}return!0},F.bounds);if(la.length){F=yield this.remoteClient.invoke("fetchAllEdgeLocations",{components:la},T.unwrapOr(U,{}));for(const V of F.components)this._setFetchEdgeLocations(V)}});
return function(F,U){return u.apply(this,arguments)}}();n.add=function(){var u=a._asyncToGenerator(function*(F){F=new O(F.id,F.bounds);this._idToComponent.set(F.id,F);this._components.add([F]);return{result:{}}});return function(F){return u.apply(this,arguments)}}();n.remove=function(){var u=a._asyncToGenerator(function*(F){const U=this._idToComponent.get(F.id);if(U){const la=[];this._edges.forEachNeighbor(V=>{V.component===U&&la.push(V);return!0},U.bounds);this._edges.remove(la);this._components.remove([U]);
this._idToComponent.delete(U.id)}return{result:{}}});return function(F){return u.apply(this,arguments)}}();n._setFetchEdgeLocations=function(u){const F=this._idToComponent.get(u.id);if(!T.isNone(F)&&u.uid===F.uid){var U=A.extractComponentsEdgeLocationsLayout.createView(u.locations),la=Array(U.count),V=N.create(),C=N.create();for(let X=0;X<U.count;X++){U.position0.getVec(X,V);U.position1.getVec(X,C);var K=H.boundsFromEdge(V,C,u.origin);K=new Q(F,X,K);la[X]=K}this._edges.add(la);var {objectIds:M,origin:P}=
u;F.info={locations:U,objectIds:M,origin:P}}};n._addCandidates=function(u,F,U){const {locations:la,origin:V,objectIds:C}=F.component.info,K=la.position0.getVec(F.index,this._tmpP1),M=la.position1.getVec(F.index,this._tmpP2);E.add(K,K,V);E.add(M,M,V);F=C[la.componentIndex.get(F.index)];this._addEdgeCandidate(u,F,K,M,U);this._addVertexCandidate(u,F,K,U);this._addVertexCandidate(u,F,M,U)};n._addEdgeCandidate=function(u,F,U,la,V){if(u.types&B.SnappingTypes.EDGE){var C=q.getCenter(u.bounds),K=J.fromPoints(U,
la,this._tmpLineSegment);K=J.projectPoint(K,C,this._tmpP3);if(!q.containsPoint(u.bounds,K))return null;V.push({type:"edge",objectId:F,target:N.clone(K),distance:E.distance(C,K),start:N.clone(U),end:N.clone(la)})}};n._addVertexCandidate=function(u,F,U,la){if(u.types&B.SnappingTypes.VERTEX){var V=q.getCenter(u.bounds);if(!q.containsPoint(u.bounds,U))return null;la.push({type:"vertex",objectId:F,target:N.clone(U),distance:E.distance(V,U)})}};return S}();p=b.__decorate([m.subclass("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],
p);let O=function F(n,u){this.id=n;this.bounds=u;this.info=null;this.uid=++F.uid};O.uid=0;let Q=function(n,u,F){this.component=n;this.index=u;this.bounds=F};return p});