// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../support/elevationInfoUtils ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),function(p,v,w,q,r,k,l,h,x,t,y){l=function(u){function m(){return u.apply(this,arguments)||this}v._inheritsLoose(m,u);var n=m.prototype;n.snapNewVertex=function(f,b){var c=b.editGeometryOperations.data.components[0];
const a=[];var d=c.vertices.length;if("polygon"!==b.editGeometryOperations.data.type||2>d)return a;var {view:e}=this;d=c.vertices[d-1];c=h.convertPointElevation(c.vertices[0].pos,e,b);e=h.convertPointElevation(d.pos,e,b);this._processCandidateProposal(c,e,f,b,a);return a};n.snapExistingVertex=function(f,b){const c=[];var a=w.unwrap(b.vertexHandle),d=a.component;if(2>d.edges.length||"polyline"===b.editGeometryOperations.data.type&&(0===a.index||a.index===d.vertices.length-1))return c;const {view:e}=
this;d=h.convertPointElevation(a.leftEdge.leftVertex.pos,e,b);a=h.convertPointElevation(a.rightEdge.rightVertex.pos,e,b);this._processCandidateProposal(d,a,f,b,c);return c};n._processCandidateProposal=function(f,b,c,a,d){if(this.exceedsShortLineThreshold(f,b,a)){var e=q.lerp(z,f,b,.5),A=.5*q.distance(f,b);e=y.projectPointToCircle(B,c,e,A);var {coordinateHelper:g,pointer:C}=a;a=g.fromXYZ(e,g.getZ(c,0));c=t.anyMapPointToScreenPoint(c,g,k.absoluteHeightElevationInfo,this.view);h.squaredScreenDistance(c,
t.anyMapPointToScreenPoint(a,g,k.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(C)&&d.push(new x.RightAngleTriangleSnappingCandidate({coordinateHelper:g,targetPoint:a,point1:f,point2:b,elevationInfo:g.hasZ()?k.absoluteHeightElevationInfo:null}))}};return m}(l.SnappingAlgorithm);const z=r.create(),B=r.create();p.RightAngleTriangleSnapper=l;Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});