// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ./I3SSnappingSource".split(" "),function(c,g,h,p,q,r,k,v,w,t,m){c.SceneLayerSnappingSource=function(n){function l(a){a=n.call(this,a)||this;a.availability=
1;a._i3sSources=[];return a}g._inheritsLoose(l,n);var e=l.prototype;e.destroy=function(){this._i3sSources.forEach(a=>a.destroy());this._i3sSources.length=0};e.initialize=function(){const {view:a}=this,b=this.layerSource.layer;this._i3sSources="building-scene"===b.type?this._getBuildingSceneI3SSources(a,b):[this._getSceneLayerI3SSource(a,b)]};e.fetchCandidates=function(){var a=g._asyncToGenerator(function*(b,d){const f=yield Promise.all(this._i3sSources.map(u=>u.fetchCandidates(b,d)));r.throwIfAborted(d);
return f.flat()});return function(b,d){return a.apply(this,arguments)}}();e.refresh=function(){this._i3sSources.forEach(a=>a.refresh())};e._getBuildingSceneI3SSources=function(a,b){return b.allSublayers.toArray().map(d=>"building-component"===d.type?new m.I3SSnappingSource({getLayerView:function(){var f=g._asyncToGenerator(function*(){return(yield a.whenLayerView(b)).whenSublayerView(d)});return function(){return f.apply(this,arguments)}}(),view:a}):null).filter(q.isSome)};e._getSceneLayerI3SSource=
function(a,b){return new m.I3SSnappingSource({getLayerView:function(){var d=g._asyncToGenerator(function*(){const f=yield a.whenLayerView(b);return"scene-layer-graphics-3d"===f.type?void 0:f});return function(){return d.apply(this,arguments)}}(),view:a})};g._createClass(l,[{key:"updating",get:function(){return this._i3sSources.some(a=>a.updating)}}]);return l}(p);h.__decorate([k.property({constructOnly:!0})],c.SceneLayerSnappingSource.prototype,"layerSource",void 0);h.__decorate([k.property({constructOnly:!0})],
c.SceneLayerSnappingSource.prototype,"view",void 0);h.__decorate([k.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"updating",null);h.__decorate([k.property({readOnly:!0})],c.SceneLayerSnappingSource.prototype,"availability",void 0);c.SceneLayerSnappingSource=h.__decorate([t.subclass("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],c.SceneLayerSnappingSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});