// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],function(c,a,I,C,k){let f=function(){function t(){this._emitter=new t.EventEmitter(this)}var r=t.prototype;r.emit=function(p,q){return this._emitter.emit(p,q)};r.on=function(p,q){return this._emitter.on(p,q)};r.once=function(p,q){return this._emitter.once(p,q)};r.hasEventListener=function(p){return this._emitter.hasEventListener(p)};
return t}();(function(t){let r=function(){function q(N=null){this._target=N;this._listenersMap=null}var B=q.prototype;B.clear=function(){this._listenersMap&&this._listenersMap.clear();this._listenersMap=null};B.emit=function(N,w){N=this._listenersMap&&this._listenersMap.get(N);if(!N)return!1;const h=this._target||this;[...N].forEach(D=>{D.call(h,w)});return 0<N.length};B.on=function(N,w){if(Array.isArray(N)){var h=N.map(D=>this.on(D,w));return C.handlesGroup(h)}if(N.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);h=this._listenersMap.get(N)||[];h.push(w);this._listenersMap.set(N,h);return{remove:()=>{const D=this._listenersMap&&this._listenersMap.get(N)||[],d=D.indexOf(w);0<=d&&D.splice(d,1)}}};B.once=function(N,w){const h=this.on(N,D=>{h.remove();w.call(null,D)});return h};B.hasEventListener=function(N){N=this._listenersMap&&this._listenersMap.get(N);return null!=N&&0<N.length};return q}();t.EventEmitter=r;t.EventedMixin=q=>{q=function(B){function N(){var h=
B.apply(this,arguments)||this;h._emitter=new r;return h}c._inheritsLoose(N,B);var w=N.prototype;w.destroy=function(){this._emitter.clear()};w.emit=function(h,D){return this._emitter.emit(h,D)};w.on=function(h,D){return this._emitter.on(h,D)};w.once=function(h,D){return this._emitter.once(h,D)};w.hasEventListener=function(h){return this._emitter.hasEventListener(h)};return N}(q);return q=a.__decorate([k.subclass("esri.core.Evented")],q)};let p=function(q){function B(){var w=q.apply(this,arguments)||
this;w._emitter=new f.EventEmitter(c._assertThisInitialized(w));return w}c._inheritsLoose(B,q);var N=B.prototype;N.destroy=function(){this._emitter.clear()};N.emit=function(w,h){return this._emitter.emit(w,h)};N.on=function(w,h){return this._emitter.on(w,h)};N.once=function(w,h){return this._emitter.once(w,h)};N.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return B}(I);p=a.__decorate([k.subclass("esri.core.Evented")],p);t.EventedAccessor=p})(f||(f={}));return f})},"esri/core/reactiveUtils":function(){define("exports ./events ./handleUtils ./maybe ./promiseUtils ./accessorSupport/watch ./accessorSupport/trackingUtils".split(" "),
function(c,a,I,C,k,f,t){function r(w,h,D={}){return p(w,h,D,B)}function p(w,h,D={},d){let l=null;const x=D.once?(G,J)=>{d(G)&&(C.removeMaybe(l),h(G,J))}:(G,J)=>{d(G)&&h(G,J)};l=f.watchTracked(w,x,D.sync,D.equals);D.initial&&(w=w(),x(w,w));return l}function q(w,h,D){if(k.isAborted(D))return Promise.reject(k.createAbortError());const d=w();if(h?.(d))return Promise.resolve(d);let l=null;return new Promise((x,G)=>{l=I.handlesGroup([k.onAbort(D,()=>{l=C.removeMaybe(l);G(k.createAbortError())}),p(w,J=>
{l=C.removeMaybe(l);x(J)},{sync:!1,once:!0},h??B)])})}function B(w){return!0}function N(w){return!!w}c.autorun=t.autorun;c.initial={initial:!0};c.on=function(w,h,D,d={}){function l(){G&&J&&(J.remove(),d.onListenerRemove?.(G),J=G=null)}function x(E){d.once&&d.once&&C.removeMaybe(R);D(E)}let G=null,J=null,R=null;const v=r(w,(E,z)=>{l();a.isEventTarget(E)&&(G=E,J=a.on(E,h,x),d.onListenerAdd?.(E))},{sync:d.sync,initial:!0});return R=I.makeHandle(()=>{v.remove();l()})};c.once=function(w,h){return q(w,
null,h)};c.pausable=function(w,h,D={}){let d=!1;const l=r(w,(x,G)=>{d||h(x,G)},D);return{remove(){l.remove()},pause(){d=!0},resume(){d=!1}}};c.sync={sync:!0};c.syncAndInitial={sync:!0,initial:!0};c.watch=r;c.when=function(w,h,D={}){return p(w,h,D,N)};c.whenOnce=function(w,h){return q(w,N,h)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../Accessor ../Handles ../maybe ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r,p,q){c.WatchUpdatingTracking=function(B){function N(){var h=B.apply(this,arguments)||this;h.updating=!1;h._handleId=0;h._handles=new k;h._scheduleHandleId=0;h._pendingPromises=new Set;return h}a._inheritsLoose(N,B);var w=N.prototype;w.destroy=function(){this.removeAll();this._handles.destroy()};w.add=function(h,D,d={}){return this._installWatch(h,D,d,t.watch)};w.addWhen=function(h,D,d={}){return this._installWatch(h,D,d,t.when)};w.addOnCollectionChange=function(h,D,{initial:d=
!1,final:l=!1}={}){const x=++this._handleId;this._handles.add([t.on(h,"after-changes",this._createSyncUpdatingCallback(),t.sync),t.on(h,"change",D,{onListenerAdd:d?G=>D({added:G.toArray(),removed:[]}):void 0,onListenerRemove:l?G=>D({added:[],removed:G.toArray()}):void 0})],x);return{remove:()=>this._handles.remove(x)}};w.addPromise=function(h){if(f.isNone(h))return h;const D=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(h)&&(0!==this._pendingPromises.size||this._handles.has(-42)||
this._set("updating",!1))}},D);this._pendingPromises.add(h);this._set("updating",!0);const d=()=>this._handles.remove(D);h.then(d,d);return h};w.removeAll=function(){this._pendingPromises.clear();this._handles.removeAll();this._set("updating",!1)};w._installWatch=function(h,D,d={},l){const x=++this._handleId;d.sync||this._installSyncUpdatingWatch(h,x);h=l(h,D,d);this._handles.add(h,x);return{remove:()=>this._handles.remove(x)}};w._installSyncUpdatingWatch=function(h,D){const d=this._createSyncUpdatingCallback();
h=t.watch(h,d,{sync:!0,equals:()=>!1});this._handles.add(h,D);return h};w._createSyncUpdatingCallback=function(){return()=>{this._handles.remove(-42);++this._scheduleHandleId;const h=this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this._handles.add(r.schedule(()=>{h===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this._handles.remove(-42))}),-42)}};return N}(C);I.__decorate([p.property({readOnly:!0})],c.WatchUpdatingTracking.prototype,"updating",
void 0);c.WatchUpdatingTracking=I.__decorate([q.subclass("esri.core.support.WatchUpdatingTracking")],c.WatchUpdatingTracking);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../core/maybe ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(c,a,I,C,k,f,t,r,p,q){return function(){function B(w){this.geometryInfo=w;this._boundsStore=new p.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new I;this.featureAdapter=q.optimizedFeatureQueryEngineAdapter}var N=B.prototype;N.add=function(w){this._add(w);this._emitChanged()};N.addMany=function(w){for(const h of w)this._add(h);this._emitChanged()};N.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};N.removeById=function(w){w=
this._featuresById.get(w);if(!w)return null;this._remove(w);this._emitChanged();return w};N.removeManyById=function(w){this._boundsStore.invalidateIndex();for(const h of w)(w=this._featuresById.get(h))&&this._remove(w);this._emitChanged()};N.forEachBounds=function(w,h,D){for(const d of w)(w=this._boundsStore.get(d.objectId))&&h(f.fromRect(D,w))};N.getFeature=function(w){return this._featuresById.get(w)};N.has=function(w){return this._featuresById.has(w)};N.toArray=function(){return Array.from(this._featuresById.values())};
N.forEach=function(w){this._featuresById.forEach(h=>w(h))};N.forEachInBounds=function(w,h){this._boundsStore.forEachInBounds(w,D=>{h(this._featuresById.get(D))})};N.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};N.sweep=function(){let w=!1;this._featuresById.forEach((h,D)=>{this._markedIds.has(D)||(w=!0,this._remove(h))});this._markedIds.clear();w&&this._emitChanged()};N._emitChanged=function(){this.events.emit("changed",void 0)};N._add=function(w){if(w){var h=
w.objectId;if(null==h)C.getLogger("esri.layers.graphics.data.FeatureStore").error(new a("featurestore:invalid-feature","feature id is missing",{feature:w}));else{var D=this._featuresById.get(h);this._markedIds.add(h);if(D){w.displayId=D.displayId;var d=this._boundsStore.get(h);this._boundsStore.delete(h)}else if(k.isSome(this.onFeatureAdd))this.onFeatureAdd(w);!k.isNone(w.geometry)&&w.geometry.coords&&w.geometry.coords.length?(d=r.getBoundsOptimizedGeometry(k.isSome(d)?d:t.create(),w.geometry,this.geometryInfo.hasZ,
this.geometryInfo.hasM),k.isSome(d)&&this._boundsStore.set(h,d)):this._boundsStore.set(h,null);this._featuresById.set(h,w)}}};N._remove=function(w){if(k.isSome(this.onFeatureRemove))this.onFeatureRemove(w);this._markedIds.delete(w.objectId);this._boundsStore.delete(w.objectId);this._featuresById.delete(w.objectId);return w};c._createClass(B,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},
{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){return this._boundsStore.fullBounds}},{key:"storeStatistics",get:function(){let w=0;this._featuresById.forEach(h=>{k.isSome(h.geometry)&&h.geometry.coords&&(w+=h.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:w/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return B}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent",
"./aaBoundingRect"],function(c,a,I,C){function k(d=h){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function f(d,l,x,G,J,R,v=k()){v[0]=d;v[1]=l;v[2]=x;v[3]=G;v[4]=J;v[5]=R;return v}function t(d){return d[0]>=d[3]?0:d[3]-d[0]}function r(d){return d[1]>=d[4]?0:d[4]-d[1]}function p(d){return d[2]>=d[5]?0:d[5]-d[2]}function q(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function B(d,l){d[0]=l[0];d[1]=l[1];d[2]=l[2];d[3]=
l[3];d[4]=l[4];d[5]=l[5];return d}function N(d){return 6===d.length}const w=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],h=[0,0,0,0,0,0],D=k();c.NEGATIVE_INFINITY=w;c.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.ZERO=h;c.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};c.center=function(d,l=[0,0,0]){l[0]=d[0]+t(d)/2;l[1]=d[1]+r(d)/2;l[2]=d[2]+p(d)/2;return l};c.contains=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=
d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};c.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};c.containsPointWithMargin=function(d,l,x){return l[0]>=d[0]-x&&l[1]>=d[1]-x&&l[2]>=d[2]-x&&l[0]<=d[3]+x&&l[1]<=d[4]+x&&l[2]<=d[5]+x};c.create=k;c.depth=r;c.diameter=function(d){const l=t(d),x=p(d);d=r(d);return Math.sqrt(l*l+x*x+d*d)};c.empty=function(d){return d?B(d,w):k(w)};c.equals=function(d,l,x){if(a.isNone(d)||a.isNone(l))return d===l;if(!N(d)||
!N(l))return!1;if(x)for(let G=0;G<d.length;G++){if(!x(d[G],l[G]))return!1}else for(x=0;x<d.length;x++)if(d[x]!==l[x])return!1;return!0};c.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};c.expandWithBuffer=function(d,l,x=0,G=l.length/3){let J=d[0],R=d[1],v=d[2],E=d[3],z=d[4],m=d[5];for(let L=0;L<G;L++)J=Math.min(J,l[x+3*L]),R=Math.min(R,l[x+3*L+1]),v=Math.min(v,l[x+3*
L+2]),E=Math.max(E,l[x+3*L]),z=Math.max(z,l[x+3*L+1]),m=Math.max(m,l[x+3*L+2]);d[0]=J;d[1]=R;d[2]=v;d[3]=E;d[4]=z;d[5]=m};c.expandWithNestedArray=function(d,l,x){const G=l.length;let J=d[0],R=d[1],v=d[2],E=d[3],z=d[4],m=d[5];if(x)for(x=0;x<G;x++){var L=l[x];J=Math.min(J,L[0]);R=Math.min(R,L[1]);v=Math.min(v,L[2]);E=Math.max(E,L[0]);z=Math.max(z,L[1]);m=Math.max(m,L[2])}else for(x=0;x<G;x++)L=l[x],J=Math.min(J,L[0]),R=Math.min(R,L[1]),E=Math.max(E,L[0]),z=Math.max(z,L[1]);d[0]=J;d[1]=R;d[2]=v;d[3]=
E;d[4]=z;d[5]=m};c.expandWithOffset=function(d,l,x,G){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+x);d[4]=Math.max(d[4],d[4]+x);d[2]=Math.min(d[2],d[2]+G);d[5]=Math.max(d[5],d[5]+G)};c.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};c.expandWithVec3=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],l[1]);
d[5]=Math.max(d[5],l[2])};c.fromExtent=function(d,l=k()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.hasZ?d.zmin:-Infinity;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.hasZ?d.zmax:Infinity;return l};c.fromMinMax=function(d,l,x=k()){x[0]=d[0];x[1]=d[1];x[2]=d[2];x[3]=l[0];x[4]=l[1];x[5]=l[2];return x};c.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;return d};c.fromValues=f;c.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};c.getMin=function(d,
l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};c.height=p;c.intersects=q;c.intersectsClippingArea=function(d,l){return a.isNone(l)?!0:q(d,l)};c.is=N;c.isPoint=function(d){return 0===t(d)&&0===r(d)&&0===p(d)};c.maximumDimension=function(d){return Math.max(t(d),p(d),r(d))};c.offset=function(d,l,x,G,J=d){J[0]=d[0]+l;J[1]=d[1]+x;J[2]=d[2]+G;J[3]=d[3]+l;J[4]=d[4]+x;J[5]=d[5]+G;return J};c.scale=function(d,l,x=d){const G=d[0]+t(d)/2,J=d[1]+r(d)/2,R=d[2]+p(d)/2;x[0]=G+(d[0]-G)*l;x[1]=J+(d[1]-J)*l;x[2]=R+(d[2]-
R)*l;x[3]=G+(d[3]-G)*l;x[4]=J+(d[4]-J)*l;x[5]=R+(d[5]-R)*l;return x};c.set=B;c.setMax=function(d,l,x=d){x[3]=l[0];x[4]=l[1];x[5]=l[2];x!==d&&(x[0]=d[0],x[1]=d[1],x[2]=d[2]);return d};c.setMin=function(d,l,x=d){x[0]=l[0];x[1]=l[1];x[2]=l[2];x!==d&&(x[3]=d[3],x[4]=d[4],x[5]=d[5]);return x};c.size=function(d,l=[0,0,0]){l[0]=t(d);l[1]=r(d);l[2]=p(d);return l};c.toExtent=function(d,l){return isFinite(d[2])||isFinite(d[5])?new I({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):
new I({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};c.toRect=function(d,l){l||(l=C.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};c.width=t;c.wrap=function(d,l,x,G,J,R){return f(d,l,x,G,J,R,D)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../Extent"],function(c,a,I,C,k){function f(h=w){return[h[0],
h[1],h[2],h[3]]}function t(h,D){h!==D&&(h[0]=D[0],h[1]=D[1],h[2]=D[2],h[3]=D[3]);return h}function r(h){return C.isNone(h)||h[0]>=h[2]?0:h[2]-h[0]}function p(h){return h[1]>=h[3]?0:h[3]-h[1]}function q(h,D,d){return D>=h[0]&&d>=h[1]&&D<=h[2]&&d<=h[3]}function B(h){return null!=h&&4===h.length}const N=[Infinity,Infinity,-Infinity,-Infinity],w=[0,0,0,0];c.NEGATIVE_INFINITY=N;c.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];c.UNIT=[0,0,1,1];c.ZERO=w;c.allFinite=function(h){for(let D=0;4>D;D++)if(!isFinite(h[D]))return!1;
return!0};c.area=function(h){return r(h)*p(h)};c.center=function(h,D=[0,0]){D[0]=(h[0]+h[2])/2;D[1]=(h[1]+h[3])/2;return D};c.clone=function(h){return[h[0],h[1],h[2],h[3]]};c.contains=function(h,D){return D[0]>=h[0]&&D[2]<=h[2]&&D[1]>=h[1]&&D[3]<=h[3]};c.containsPoint=function(h,D){return q(h,D[0],D[1])};c.containsPointObject=function(h,D){return q(h,D.x,D.y)};c.containsPointWithMargin=function(h,D,d){return D[0]>=h[0]-d&&D[1]>=h[1]-d&&D[0]<=h[2]+d&&D[1]<=h[3]+d};c.containsXY=q;c.containsXYWithMargin=
function(h,D,d,l){return D>=h[0]-l&&d>=h[1]-l&&D<=h[2]+l&&d<=h[3]+l};c.copy=t;c.create=f;c.distance=function(h,D){const d=(h[1]+h[3])/2,l=Math.max(Math.abs(D[0]-(h[0]+h[2])/2)-r(h)/2,0);h=Math.max(Math.abs(D[1]-d)-p(h)/2,0);return Math.sqrt(l*l+h*h)};c.empty=function(h){return h?t(h,N):f(N)};c.equals=function(h,D){return B(h)&&B(D)?h[0]===D[0]&&h[1]===D[1]&&h[2]===D[2]&&h[3]===D[3]:h===D};c.expand=function(h,D,d){if(C.isNone(D))t(d,h);else if("length"in D)if(B(D))d[0]=Math.min(h[0],D[0]),d[1]=Math.min(h[1],
D[1]),d[2]=Math.max(h[2],D[2]),d[3]=Math.max(h[3],D[3]);else{if(2===D.length||3===D.length)d[0]=Math.min(h[0],D[0]),d[1]=Math.min(h[1],D[1]),d[2]=Math.max(h[2],D[0]),d[3]=Math.max(h[3],D[1])}else switch(D.type){case "extent":d[0]=Math.min(h[0],D.xmin);d[1]=Math.min(h[1],D.ymin);d[2]=Math.max(h[2],D.xmax);d[3]=Math.max(h[3],D.ymax);break;case "point":d[0]=Math.min(h[0],D.x),d[1]=Math.min(h[1],D.y),d[2]=Math.max(h[2],D.x),d[3]=Math.max(h[3],D.y)}};c.expandPointInPlace=function(h,D){D[0]<h[0]&&(h[0]=
D[0]);D[0]>h[2]&&(h[2]=D[0]);D[1]<h[1]&&(h[1]=D[1]);D[1]>h[3]&&(h[3]=D[1])};c.expandWithNestedArray=function(h,D,d=h){const l=D.length;let x=h[0],G=h[1],J=h[2];h=h[3];for(let R=0;R<l;R++){const v=D[R];x=Math.min(x,v[0]);G=Math.min(G,v[1]);J=Math.max(J,v[0]);h=Math.max(h,v[1])}d[0]=x;d[1]=G;d[2]=J;d[3]=h;return d};c.fromExtent=function(h,D=f()){D[0]=h.xmin;D[1]=h.ymin;D[2]=h.xmax;D[3]=h.ymax;return D};c.fromValues=function(h,D,d,l,x=f()){x[0]=h;x[1]=D;x[2]=d;x[3]=l;return x};c.height=p;c.intersection=
function(h,D,d){if(C.isNone(D))return t(d,h);const l=D[0],x=D[1],G=D[2];D=D[3];d[0]=I.clamp(h[0],l,G);d[1]=I.clamp(h[1],x,D);d[2]=I.clamp(h[2],l,G);d[3]=I.clamp(h[3],x,D);return d};c.intersects=function(h,D){return Math.max(D[0],h[0])<=Math.min(D[2],h[2])&&Math.max(D[1],h[1])<=Math.min(D[3],h[3])};c.intersectsSegment=function(h,D,d){const l=h[0],x=h[1],G=h[2];h=h[3];const {x:J,y:R}=D,{x:v,y:E}=d;var z=(L,b)=>0>(E-R)*L+(J-v)*b+(v*R-J*E);D=z(l,h);d=z(G,h);const m=z(G,x);z=z(l,x);return D===d&&d===m&&
m===z&&z===D||J<l&&v<l||J>G&&v>G||R>h&&E>h||R<x&&E<x?!1:!0};c.intersectsSphere=function(h,D){const d=D[3];var l=Math.abs(D[0]-.5*(h[0]+h[2]));const x=.5*(h[2]-h[0]);if(l>d+x)return!1;var G=.5*(h[3]-h[1]);h=Math.abs(D[1]-.5*(h[1]+h[3]));if(h>d+G)return!1;if(l<x||h<G)return!0;l-=x;G=h-G;return l*l+G*G<=d*d};c.is=B;c.isPoint=function(h){return(0===r(h)||!isFinite(h[0]))&&(0===p(h)||!isFinite(h[1]))};c.offset=function(h,D,d,l=h){l[0]=h[0]+D;l[1]=h[1]+d;l[2]=h[2]+D;l[3]=h[3]+d;return l};c.pad=function(h,
D,d=h){d[0]=h[0]-D;d[1]=h[1]-D;d[2]=h[2]+D;d[3]=h[3]+D;return d};c.setMax=function(h,D,d=h){d[2]=D[0];d[3]=D[1];d!==h&&(d[0]=h[0],d[1]=h[1]);return h};c.setMin=function(h,D,d=h){d[0]=D[0];d[1]=D[1];d!==h&&(d[2]=h[2],d[3]=h[3]);return d};c.size=function(h,D){D[0]=h[2]-h[0];D[1]=h[3]-h[1]};c.toExtent=function(h,D){return new k({xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:D})};c.width=r;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(c,a,I,C,k,f,t,r){function p(O,S){return O?S?4:3:S?3:2}function q(O,S,W,Y){if(O){if(W)return S&&Y?F:bb;if(S&&Y)return g}else if(S&&Y)return bb;return Na}function B({scale:O,translate:S},W){return Math.round((W-S[0])/O[0])}function N({scale:O,translate:S},W){return Math.round((S[1]-W)/O[1])}function w({scale:O,translate:S},W,Y){return W*O[Y]+S[Y]}function h(O){O=O.coords;return{x:O[0],y:O[1]}}function D(O,S){O.coords[0]=S.x;O.coords[1]=S.y;return O}function d(O){O=O.coords;return{x:O[0],y:O[1],
z:O[2]}}function l(O,S){O.coords[0]=S.x;O.coords[1]=S.y;O.coords[2]=S.z;return O}function x(O){O=O.coords;return{x:O[0],y:O[1],m:O[2]}}function G(O,S){O.coords[0]=S.x;O.coords[1]=S.y;O.coords[2]=S.m;return O}function J(O){O=O.coords;return{x:O[0],y:O[1],z:O[2],m:O[3]}}function R(O,S){O.coords[0]=S.x;O.coords[1]=S.y;O.coords[2]=S.z;O.coords[3]=S.m;return O}function v(O,S){return O&&S?R:O?l:S?G:D}function E(O,S,W,Y,ha){W=v(W,Y);for(const {geometry:ja,attributes:na}of S)S=C.isSome(ja)?W(new r,ja):null,
O.push(new f.OptimizedFeature(S,na,null,ha?na[ha]:void 0));return O}function z(O,S,W,Y){for(const {geometry:ha,attributes:ja}of S)O.push({attributes:ja,geometry:C.isSome(ha)?m(ha,W,Y):null});return O}function m(O,S,W){if(C.isNone(O))return null;const Y=p(S,W),ha=[];for(let ja=0;ja<O.coords.length;ja+=Y){const na=[];for(let ra=0;ra<Y;ra++)na.push(O.coords[ja+ra]);ha.push(na)}return S?W?{points:ha,hasZ:S,hasM:W}:{points:ha,hasZ:S}:W?{points:ha,hasM:W}:{points:ha}}function L(O,S,W,Y,ha){W=p(W,Y);for(const {geometry:ja,
attributes:na}of S)S=C.isSome(ja)?b(new r,ja,W):null,O.push(new f.OptimizedFeature(S,na,null,ha?na[ha]:void 0));return O}function b(O,S,W=p(S.hasZ,S.hasM)){O.lengths[0]=S.points.length;const Y=O.coords;let ha=0;for(const ja of S.points)for(S=0;S<W;S++)Y[ha++]=ja[S];return O}function n(O,S,W){if(!O)return null;const Y=p(S,W),{coords:ha,lengths:ja}=O;O=[];let na=0;for(const ra of ja){const sa=[];for(let ba=0;ba<ra;ba++){const ea=[];for(let ma=0;ma<Y;ma++)ea.push(ha[na++]);sa.push(ea)}O.push(sa)}return S?
W?{paths:O,hasZ:S,hasM:W}:{paths:O,hasZ:S}:W?{paths:O,hasM:W}:{paths:O}}function H(O,S,W,Y,ha){W=p(W,Y);for(const {geometry:ja,attributes:na}of S)S=C.isSome(ja)?A(new r,ja,W):null,O.push(new f.OptimizedFeature(S,na,null,ha?na[ha]:void 0));return O}function A(O,S,W=p(S.hasZ,S.hasM)){const {lengths:Y,coords:ha}=O;let ja=0;for(const na of S.paths){for(const ra of na)for(S=0;S<W;S++)ha[ja++]=ra[S];Y.push(na.length)}return O}function y(O,S,W){if(!O)return null;const Y=p(S,W),{coords:ha,lengths:ja}=O;O=
[];let na=0;for(const ra of ja){const sa=[];for(let ba=0;ba<ra;ba++){const ea=[];for(let ma=0;ma<Y;ma++)ea.push(ha[na++]);sa.push(ea)}O.push(sa)}return S?W?{rings:O,hasZ:S,hasM:W}:{rings:O,hasZ:S}:W?{rings:O,hasM:W}:{rings:O}}function P(O,S,W,Y,ha){for(const {geometry:ja,centroid:na,attributes:ra}of S){S=C.isSome(ja)?K(new r,ja,W,Y):null;const sa=ha?ra[ha]:void 0;C.isSome(na)?O.push(new f.OptimizedFeature(S,ra,D(new r,na),sa)):O.push(new f.OptimizedFeature(S,ra,null,sa))}return O}function K(O,S,W=
S.hasZ,Y=S.hasM){U(O,S.rings,W,Y);return O}function U(O,S,W,Y){W=p(W,Y);const {lengths:ha,coords:ja}=O;Y=0;Ba(O);for(const na of S){for(const ra of na)for(S=0;S<W;S++)ja[Y++]=ra[S];ha.push(na.length)}return O}function Z(O,S,W,Y,ha,ja){Ca(O);if(!W){for(const na of S)O.push(new f.OptimizedFeature(null,na.attributes,null,ja?na.attributes[ja]:void 0));return O}switch(W){case "esriGeometryPoint":return E(O,S,Y,ha,ja);case "esriGeometryMultipoint":return L(O,S,Y,ha,ja);case "esriGeometryPolyline":return H(O,
S,Y,ha,ja);case "esriGeometryPolygon":return P(O,S,Y,ha,ja);default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`)),Ca(O)}return O}function V(O,S,W,Y){O=O&&("coords"in O?O:O.geometry);if(C.isNone(O))return null;switch(S){case "esriGeometryPoint":return S=h,W&&Y?S=J:W?S=d:Y&&(S=x),S(O);case "esriGeometryMultipoint":return m(O,W,Y);case "esriGeometryPolyline":return n(O,W,Y);case "esriGeometryPolygon":return y(O,W,Y);default:return Ja.error("convertToGeometry:unknown-geometry",
new a(`Unable to parse unknown geometry type '${S}'`)),null}}function ka(O,S,W,Y,ha){Ca(O);if(C.isNone(W)){for(const na of S)O.push({attributes:na.attributes});return O}switch(W){case "esriGeometryPoint":W=h;Y&&ha?W=J:Y?W=d:ha&&(W=x);for(var ja of S){const {geometry:na,attributes:ra}=ja;Y=C.isSome(na)?W(na):null;O.push({attributes:ra,geometry:Y})}break;case "esriGeometryMultipoint":return z(O,S,Y,ha);case "esriGeometryPolyline":for(const {geometry:na,attributes:ra}of S)O.push({attributes:ra,geometry:C.isSome(na)?
n(na,Y,ha):null});break;case "esriGeometryPolygon":for(const {geometry:na,attributes:ra,centroid:sa}of S)ja=C.isSome(na)?y(na,Y,ha):null,C.isSome(sa)?(S=h(sa),O.push({attributes:ra,centroid:S,geometry:ja})):O.push({attributes:ra,geometry:ja});break;default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`))}return O}function ca(O,S,W,Y,ha,ja,na=W,ra=Y){Ba(O);if(C.isNone(S)||!S.coords.length)return null;ha=La[ha];const {coords:sa,lengths:ba}=S;S=p(W,
Y);const ea=p(W&&na,Y&&ra);W=q(W,Y,na,ra);if(!ba.length)return W(O.coords,sa,0,0,B(ja,sa[0]),N(ja,sa[1])),Ba(O,S,0),O;let ma,ya=0,Da,Ga=0;for(const Ha of ba){if(Ha<ha)continue;let Fa=0;Da=Ga;ra=Y=B(ja,sa[ya]);ma=na=N(ja,sa[ya+1]);W(O.coords,sa,Da,ya,ra,ma);Fa++;ya+=S;Da+=ea;for(let Ka=1;Ka<Ha;Ka++,ya+=S)if(ra=B(ja,sa[ya]),ma=N(ja,sa[ya+1]),ra!==Y||ma!==na)W(O.coords,sa,Da,ya,ra-Y,ma-na),Da+=ea,Fa++,Y=ra,na=ma;Fa>=ha&&(O.lengths.push(Fa),Ga=Da)}Ca(O.coords,Ga);return O.coords.length?O:null}function qa(O,
S,W,Y,ha,ja,na){let ra=Y,sa=0;for(let ea=ja+W;ea<na;ea+=W){var ba=S[ea];const ma=S[ea+1],ya=S[na],Da=S[na+1];let Ga=S[ja],Ha=S[ja+1],Fa=ya-Ga,Ka=Da-Ha;if(0!==Fa||0!==Ka){const ta=((ba-Ga)*Fa+(ma-Ha)*Ka)/(Fa*Fa+Ka*Ka);1<ta?(Ga=ya,Ha=Da):0<ta&&(Ga+=Fa*ta,Ha+=Ka*ta)}Fa=ba-Ga;Ka=ma-Ha;ba=Fa*Fa+Ka*Ka;ba>ra&&(sa=ea,ra=ba)}ra>Y&&(sa-ja>W&&qa(O,S,W,Y,ha,ja,sa),ha(O,S,O.length,sa,S[sa],S[sa+1]),na-sa>W&&qa(O,S,W,Y,ha,sa,na))}function wa(O,S,W,Y,ha){const {coords:ja,lengths:na}=S;W=p(W,Y);if(!ja.length)return O!==
S&&Ba(O),O;C.assertIsSome(ha);const {originPosition:ra,scale:sa,translate:ba}=ha;ha=oa;ha.originPosition=ra;Y=ha.scale;Y[0]=sa[0]??1;Y[1]=-(sa[1]??1);Y[2]=sa[2]??1;Y[3]=sa[3]??1;var ea=ha.translate;ea[0]=ba[0]??0;ea[1]=ba[1]??0;ea[2]=ba[2]??0;ea[3]=ba[3]??0;if(!na.length){for(Y=0;Y<W;++Y)O.coords[Y]=w(ha,ja[Y],Y);O!==S&&Ba(O,W,0);return O}ea=0;for(let ya=0;ya<na.length;ya++){const Da=na[ya];O.lengths[ya]=Da;for(var ma=0;ma<W;++ma)O.coords[ea+ma]=w(ha,ja[ea+ma],ma);ma=O.coords[ea];let Ga=O.coords[ea+
1];ea+=W;for(let Ha=1;Ha<Da;Ha++,ea+=W){ma+=ja[ea]*Y[0];Ga+=ja[ea+1]*Y[1];O.coords[ea]=ma;O.coords[ea+1]=Ga;for(let Fa=2;Fa<W;++Fa)O.coords[ea+Fa]=w(ha,ja[ea+Fa],Fa)}}O!==S&&Ba(O,ja.length,na.length);return O}function xa(O,S,W,Y){let ha=0,ja=O[Y*S],na=O[Y*(S+1)];for(let ra=1;ra<W;ra++){const sa=ja+O[Y*(S+ra)],ba=na+O[Y*(S+ra)+1],ea=(sa-ja)*(ba+na);ja=sa;na=ba;ha+=ea}return.5*ha}function Ba(O,S=0,W=0){Ca(O.lengths,W);Ca(O.coords,S)}function Ca(O,S=0){O.length!==S&&(O.length=S)}const Ja=I.getLogger("esri.layers.graphics.featureConversionUtils"),
La={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Na=(O,S,W,Y,ha,ja)=>{O[W]=ha;O[W+1]=ja},bb=(O,S,W,Y,ha,ja)=>{O[W]=ha;O[W+1]=ja;O[W+2]=S[Y+2]},g=(O,S,W,Y,ha,ja)=>{O[W]=ha;O[W+1]=ja;O[W+2]=S[Y+3]},F=(O,S,W,Y,ha,ja)=>{O[W]=ha;O[W+1]=ja;O[W+2]=S[Y+2];O[W+3]=S[Y+3]},fa=[],ia=[],oa={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(O,S,W,Y,ha){fa[0]=O;[O]=Z(ia,fa,S,W,Y,ha);Ca(fa);Ca(ia);return O};c.convertFromFeatureSet=
function(O,S){const W=new t,{hasM:Y,hasZ:ha,features:ja,objectIdFieldName:na,spatialReference:ra,geometryType:sa,exceededTransferLimit:ba,transform:ea,fields:ma}=O;ma&&(W.fields=ma);W.geometryType=sa??null;W.objectIdFieldName=na??S??null;W.spatialReference=ra??null;if(!W.objectIdFieldName)return Ja.error(new a("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),W;ja&&Z(W.features,ja,sa,ha,Y,W.objectIdFieldName);ba&&(W.exceededTransferLimit=ba);Y&&(W.hasM=Y);ha&&(W.hasZ=
ha);ea&&(W.transform=ea);return W};c.convertFromFeatures=Z;c.convertFromGeometry=function(O,S,W){if(C.isNone(O))return null;const Y=new r;"hasZ"in O&&null==S&&(S=O.hasZ);"hasM"in O&&null==W&&(W=O.hasM);if(k.isPoint(O))return v(null!=S?S:null!=O.z,null!=W?W:null!=O.m)(Y,O);if(k.isPolygon(O))return K(Y,O,S,W);if(k.isPolyline(O))return A(Y,O,p(S,W));if(k.isMultipoint(O))return b(Y,O,p(S,W));Ja.error("convertFromGeometry:unknown-geometry",new a(`Unable to parse unknown geometry type '${O}'`))};c.convertFromGraphics=
function(O,S,W,Y,ha,ja){const na=O.length;switch(W){case "esriGeometryPoint":E(O,S,Y,ha,ja);break;case "esriGeometryMultipoint":L(O,S,Y,ha,ja);break;case "esriGeometryPolyline":H(O,S,Y,ha,ja);break;case "esriGeometryPolygon":P(O,S,Y,ha,ja);break;default:Ja.error("convertToFeatureSet:unknown-geometry",new a(`Unable to parse unknown geometry type '${W}'`))}for(Y=0;Y<S.length;Y++)O[Y+na].geometryType=W,O[Y+na].insertAfter=S[Y].insertAfter,O[Y+na].groupId=S[Y].groupId;return O};c.convertFromMultipoint=
b;c.convertFromMultipointFeatures=L;c.convertFromNestedArray=U;c.convertFromPoint=function(O,S,W=v(null!=S.z,null!=S.m)){return W(O,S)};c.convertFromPointFeatures=E;c.convertFromPolygon=K;c.convertFromPolyline=A;c.convertFromPolylineFeatures=H;c.convertToFeature=function(O,S,W,Y){ia[0]=O;ka(fa,ia,S,W,Y);O=fa[0];Ca(fa);Ca(ia);return O};c.convertToFeatureSet=function(O){const {objectIdFieldName:S,spatialReference:W,transform:Y,fields:ha,hasM:ja,hasZ:na,features:ra,geometryType:sa,exceededTransferLimit:ba,
uniqueIdField:ea,queryGeometry:ma,queryGeometryType:ya}=O;O=ka([],ra,sa,na,ja);const Da=V(ma,ya,!1,!1);O={features:O,fields:ha,geometryType:sa,objectIdFieldName:S,spatialReference:W,uniqueIdField:ea,queryGeometry:Da};Y&&(O.transform=Y);ba&&(O.exceededTransferLimit=ba);ja&&(O.hasM=ja);na&&(O.hasZ=na);return O};c.convertToFeatures=ka;c.convertToGeometry=V;c.convertToMultipoint=m;c.convertToMultipointFeatures=z;c.convertToPoint=function(O,S,W){return O?S?W?J(O):d(O):W?x(O):h(O):null};c.convertToPolygon=
y;c.convertToPolyline=n;c.deltaDecodeGeometry=function(O,S){if(C.isNone(O))return null;const W=O.clone(),Y=O.coords;O=O.lengths;let ha=0;for(let ra=0;ra<O.length;ra++){const sa=O[ra];var ja=Y[S*ha],na=Y[S*ha+1];for(let ba=1;ba<sa;ba++)ja+=Y[S*(ha+ba)],na+=Y[S*(ha+ba)+1],W.coords[S*(ha+ba)]=ja,W.coords[S*(ha+ba)+1]=na;ha+=sa}return W};c.deltaEncodeGeometry=function(O,S){const W=O.clone(),Y=O.coords;O=O.lengths;let ha=0;for(let na=0;na<O.length;na++){const ra=O[na];let sa=Y[S*ha];var ja=Y[S*ha+1];for(let ba=
1;ba<ra;ba++){const ea=Y[S*(ha+ba)],ma=Y[S*(ha+ba)+1];ja=ma-ja;W.coords[S*(ha+ba)]=ea-sa;W.coords[S*(ha+ba)+1]=ja;sa=ea;ja=ma}ha+=ra}return W};c.generalizeOptimizedGeometry=function(O,S,W,Y,ha,ja,na=W,ra=Y){Ba(O);if(!S||!S.coords.length)return null;ha=La[ha];const {coords:sa,lengths:ba}=S;S=p(W,Y);const ea=p(W&&na,Y&&ra);W=q(W,Y,na,ra);if(!ba.length)return W(O.coords,sa,0,0,sa[0],sa[1]),Ba(O,S,0),O;Y=0;ja*=ja;for(const ma of ba){if(ma<ha){Y+=ma*S;continue}na=O.coords.length/ea;ra=Y;const ya=Y+(ma-
1)*S;W(O.coords,sa,O.coords.length,ra,sa[ra],sa[ra+1]);qa(O.coords,sa,S,ja,W,ra,ya);W(O.coords,sa,O.coords.length,ya,sa[ya],sa[ya+1]);ra=O.coords.length/ea-na;ra>=ha?O.lengths.push(ra):Ca(O.coords,na*ea);Y+=ma*S}return O.coords.length?O:null};c.getBoundsOptimizedGeometry=function(O,S,W,Y){if(C.isNone(S)||!S.coords||!S.coords.length)return null;W=p(W,Y);let ha=Y=Number.POSITIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,na=Number.NEGATIVE_INFINITY;if(S&&S.coords){S=S.coords;for(let ra=0;ra<S.length;ra+=
W){const sa=S[ra],ba=S[ra+1];Y=Math.min(Y,sa);ja=Math.max(ja,sa);ha=Math.min(ha,ba);na=Math.max(na,ba)}}O[0]=Y;O[1]=ha;O[2]=ja;O[3]=na;return O};c.getQuantizedArea=function(O,S){const {coords:W,lengths:Y}=O;let ha=O=0;for(let ja=0;ja<Y.length;ja++){const na=Y[ja];ha+=xa(W,O,na,S);O+=na}return Math.abs(ha)};c.getQuantizedBoundsOptimizedGeometry=function(O,S,W,Y){W=p(W,Y);const {lengths:ha,coords:ja}=S;Y=S=Number.POSITIVE_INFINITY;let na=Number.NEGATIVE_INFINITY,ra=Number.NEGATIVE_INFINITY,sa=0;for(const ba of ha){let ea=
ja[sa],ma=ja[sa+1];S=Math.min(ea,S);Y=Math.min(ma,Y);na=Math.max(ea,na);ra=Math.max(ma,ra);sa+=W;for(let ya=1;ya<ba;ya++,sa+=W){const Da=ja[sa],Ga=ja[sa+1];ea+=Da;ma+=Ga;0>Da&&(S=Math.min(S,ea));0<Da&&(na=Math.max(na,ea));0>Ga?Y=Math.min(Y,ma):0<Ga&&(ra=Math.max(ra,ma))}}O[0]=S;O[1]=Y;O[2]=na;O[3]=ra;return O};c.getSignedQuantizedRingArea=xa;c.quantizeOptimizedFeatureSet=function(O,S){const {geometryType:W,features:Y,hasM:ha,hasZ:ja}=S;if(!O)return S;for(let na=0;na<Y.length;na++){const ra=Y[na],
sa=ra.weakClone();sa.geometry=new r;ca(sa.geometry,ra.geometry,ha,ja,W,O);ra.centroid&&(sa.centroid=new r,ca(sa.centroid,ra.centroid,ha,ja,"esriGeometryPoint",O));Y[na]=sa}S.transform=O;return S};c.quantizeOptimizedGeometry=ca;c.quantizeX=B;c.quantizeY=N;c.removeCollinearVectices=function(O,S,W,Y,ha){if(!S||!S.coords||!S.coords.length)return null;W=La[W];const {coords:ja,lengths:na}=S;S=q(Y,ha,Y,ha);Y=p(Y,ha);let ra=ha=0,sa=0,ba=0;for(const ya of na){ra=ba;S(O.coords,ja,ra,ha,ja[ha],ja[ha+1]);ha+=
Y;var ea=ja[ha];let Da=ja[ha+1],Ga=ea,Ha=Da;var ma=Da/ea;ra+=Y;S(O.coords,ja,ra,ha,Ga,Ha);ha+=Y;for(let Fa=2;Fa<ya;Fa++){ea=ja[ha];Da=ja[ha+1];const Ka=Da/ea,ta=ma===Ka||!isFinite(ma)&&!isFinite(Ka);ma=ta&&isFinite(Ka)?0<=ma&&0<=Ka||0>=ma&&0>=Ka:0<=Ha&&0<=Da||0>=Ha&&0>=Da;ta&&ma?(Ga+=ea,Ha+=Da):(Ga=ea,Ha=Da,ra+=Y);S(O.coords,ja,ra,ha,Ga,Ha);ha+=Y;ma=Ka}ra+=Y;ea=(ra-ba)/Y;ea>=W&&(O.lengths[sa]=ea,ba=ra,sa++)}O.coords.length>ba&&(O.coords.length=ba);O.lengths.length>sa&&(O.lengths.length=sa);return O.coords.length&&
O.lengths.length?O:null};c.removeZMValues=function(O,S,W,Y,ha,ja){Ba(O);O.lengths.push(...S.lengths);if(W===ha&&Y===ja)for(var na=0;na<S.coords.length;na++)O.coords.push(S.coords[na]);else for(na=p(W,Y),W=q(W,Y,ha,ja),S=S.coords,Y=0;Y<S.length;Y+=na)W(O.coords,S,O.coords.length,Y,S[Y],S[Y+1]);return O};c.unquantizeOptimizedFeatureSet=function(O){const {transform:S,features:W,hasM:Y,hasZ:ha}=O;if(!S)return O;for(const ja of W)C.isSome(ja.geometry)&&wa(ja.geometry,ja.geometry,Y,ha,S),C.isSome(ja.centroid)&&
wa(ja.centroid,ja.centroid,Y,ha,S);O.transform=null;return O};c.unquantizeOptimizedGeometry=wa;c.unquantizeValue=w;c.unquantizeX=function(O,S){return w(O,S,0)};c.unquantizeY=function(O,S){return w(O,-S,1)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe"],function(c,a,I){let C=function(){function f(t=null,r={},p,q){this.geometry=
t;this.attributes=r;this.centroid=p;this.objectId=q;this.geohashY=this.geohashX=this.displayId=0}f.prototype.weakClone=function(){const t=new f(this.geometry,this.attributes,this.centroid,this.objectId);t.displayId=this.displayId;t.geohashX=this.geohashX;t.geohashY=this.geohashY;return t};return f}(),k=function(f){function t(){return f.apply(this,arguments)||this}a._inheritsLoose(t,f);return t}(C);c.OptimizedFeature=C;c.OptimizedFeatureWithGeometry=k;c.hasGeometry=function(f){return!(I.isNone(f.geometry)||
!f.geometry.coords||!f.geometry.coords.length)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function c(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=
this.queryGeometryType=this.uniqueIdField=null}c.prototype.weakClone=function(){const a=new c;a.objectIdFieldName=this.objectIdFieldName;a.globalIdFieldName=this.globalIdFieldName;a.geohashFieldName=this.geohashFieldName;a.geometryProperties=this.geometryProperties;a.geometryType=this.geometryType;a.spatialReference=this.spatialReference;a.hasZ=this.hasZ;a.hasM=this.hasM;a.features=this.features;a.fields=this.fields;a.transform=this.transform;a.exceededTransferLimit=this.exceededTransferLimit;a.uniqueIdField=
this.uniqueIdField;a.queryGeometry=this.queryGeometry;a.queryGeometryType=this.queryGeometryType;return a};return c}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){return function(){function a(C=[],k=[],f=!1){this.lengths=C??[];this.coords=k??[];this.hasIndeterminateRingOrder=f}a.fromRect=function(C){const [k,f,t,r]=C;C=t-k;const p=r-f;return new a([5],[k,f,C,0,0,p,-C,0,0,-p])};var I=a.prototype;I.forEachVertex=function(C){let k=
0;this.lengths.length||C(this.coords[0],this.coords[1]);for(let f=0;f<this.lengths.length;f++){const t=this.lengths[f];for(let r=0;r<t;r++)C(this.coords[2*(r+k)],this.coords[2*(r+k)+1]);k+=t}};I.clone=function(C){return C?(C.set(this.coords),new a(this.lengths.slice(),C,this.hasIndeterminateRingOrder)):new a(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};c._createClass(a,[{key:"isPoint",get:function(){return 0===this.lengths.length}},{key:"maxLength",get:function(){return Math.max(...this.lengths)}},
{key:"size",get:function(){return this.lengths.reduce((C,k)=>C+k)}}]);return a}()})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,a,I,C,k){function f(p,q,B){t.minX=q[0];t.minY=q[1];t.maxX=q[2];t.maxY=q[3];p.search(t,B)}const t={minX:0,minY:0,maxX:0,maxY:0};let r=function(){function p(){this._indexInvalid=!1;this._boundsToLoad=
[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new C.PooledRBush(9,I("esri-csp-restrictions")?B=>({minX:B[0],minY:B[1],maxX:B[2],maxY:B[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const B=Array(this._idByBounds.size);let N=0;this._idByBounds.forEach((w,h)=>{B[N++]=h});this._indexInvalid=!1;this._index.clear();this._index.load(B)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(B=>this._idByBounds.has(B))),this._boundsToLoad.length=
0)}}var q=p.prototype;q.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};q.delete=function(B){const N=this._boundsById.get(B);this._boundsById.delete(B);N&&(this._idByBounds.delete(N),this._indexInvalid||this._index.remove(N))};q.forEachInBounds=function(B,N){this._loadIndex();f(this._index,B,w=>N(this._idByBounds.get(w)))};q.get=function(B){return this._boundsById.get(B)};q.has=function(B){return this._boundsById.has(B)};
q.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};q.set=function(B,N){if(!this._indexInvalid){const w=this._boundsById.get(B);w&&(this._index.remove(w),this._idByBounds.delete(w))}this._boundsById.set(B,N);N&&(this._idByBounds.set(N,B),this._indexInvalid||(this._boundsToLoad.push(N),5E4<this._boundsToLoad.length&&this._loadIndex()))};a._createClass(p,[{key:"fullBounds",get:function(){if(!this._boundsById.size)return null;const B=k.empty();for(const N of this._boundsById.values())N&&
(B[0]=Math.min(N[0],B[0]),B[1]=Math.min(N[1],B[1]),B[2]=Math.max(N[2],B[2]),B[3]=Math.max(N[3],B[3]));return B}},{key:"valid",get:function(){return!this._indexInvalid}}]);return p}();c.BoundsStore=r;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../arrayUtils ../../maybe ../../PooledArray ../../../chunks/quickselect".split(" "),function(c,a,I,C,k,
f){function t(m,L){r(m,0,m.children.length,L,m)}function r(m,L,b,n,H){H||(H=new E([]));H.minX=Infinity;H.minY=Infinity;H.maxX=-Infinity;H.maxY=-Infinity;for(let A=L,y;A<b;A++)y=m.children[A],p(H,m.leaf?n(y):y);return H}function p(m,L){m.minX=Math.min(m.minX,L.minX);m.minY=Math.min(m.minY,L.minY);m.maxX=Math.max(m.maxX,L.maxX);m.maxY=Math.max(m.maxY,L.maxY)}function q(m,L){return m.minX-L.minX}function B(m,L){return m.minY-L.minY}function N(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function w(m){return m.maxX-
m.minX+(m.maxY-m.minY)}function h(m,L){return m.minX<=L.minX&&m.minY<=L.minY&&L.maxX<=m.maxX&&L.maxY<=m.maxY}function D(m,L){return L.minX<=m.maxX&&L.minY<=m.maxY&&L.maxX>=m.minX&&L.maxY>=m.minY}function d(m,L,b,n,H){for(L=[L,b];L.length;){b=C.assumeNonNull(L.pop());const A=C.assumeNonNull(L.pop());if(b-A<=n)continue;const y=A+Math.ceil((b-A)/n/2)*n;f.quickselect(m,y,A,b,H);L.push(A,y,y,b)}}let l=function(){function m(b=9,n){this._compareMinX=q;this._compareMinY=B;this._toBBox=H=>H;this._maxEntries=
Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));n&&("function"===typeof n?this._toBBox=n:this._initFormat(n));this.clear()}var L=m.prototype;L.destroy=function(){this.clear();x.prune();G.prune();J.prune();R.prune()};L.all=function(b){this._all(this._data,b)};L.search=function(b,n){let H=this._data;const A=this._toBBox;if(D(b,H))for(x.clear();H;){for(let y=0,P=H.children.length;y<P;y++){const K=H.children[y],U=H.leaf?A(K):K;D(b,U)&&(H.leaf?n(K):h(b,U)?this._all(K,n):x.push(K))}H=
x.pop()}};L.collides=function(b){let n=this._data;const H=this._toBBox;if(!D(b,n))return!1;for(x.clear();n;){for(let A=0,y=n.children.length;A<y;A++){const P=n.children[A],K=n.leaf?H(P):P;if(D(b,K)){if(n.leaf||h(b,K))return!0;x.push(P)}}n=x.pop()}return!1};L.load=function(b){if(!b.length)return this;if(b.length<this._minEntries){for(let n=0,H=b.length;n<H;n++)this.insert(b[n]);return this}b=this._build(b.slice(0,b.length),0,b.length-1,0);if(this._data.children.length)if(this._data.height===b.height)this._splitRoot(this._data,
b);else{if(this._data.height<b.height){const n=this._data;this._data=b;b=n}this._insert(b,this._data.height-b.height-1,!0)}else this._data=b;return this};L.insert=function(b){b&&this._insert(b,this._data.height-1);return this};L.clear=function(){this._data=new E([]);return this};L.remove=function(b){if(!b)return this;let n=this._data,H=null,A=0,y=!1,P;const K=this._toBBox(b);J.clear();for(R.clear();n||0<J.length;){n||(n=C.assumeNonNull(J.pop()),H=J.data[J.length-1],A=R.pop()??0,y=!0);if(n.leaf&&(P=
I.indexOf(n.children,b,n.children.length,n.indexHint),-1!==P)){n.children.splice(P,1);J.push(n);this._condense(J);break}y||n.leaf||!h(n,K)?H?(A++,n=H.children[A],y=!1):n=null:(J.push(n),R.push(A),A=0,H=n,n=n.children[0])}return this};L.toJSON=function(){return this._data};L.fromJSON=function(b){this._data=b;return this};L._all=function(b,n){for(G.clear();b;){if(!0===b.leaf)for(const H of b.children)n(H);else G.pushArray(b.children);b=G.pop()??null}};L._build=function(b,n,H,A){var y=H-n+1,P=this._maxEntries;
if(y<=P)return b=new E(b.slice(n,H+1)),t(b,this._toBBox),b;A||(A=Math.ceil(Math.log(y)/Math.log(P)),P=Math.ceil(y/P**(A-1)));const K=new z([]);K.height=A;y=Math.ceil(y/P);P=y*Math.ceil(Math.sqrt(P));for(d(b,n,H,P,this._compareMinX);n<=H;n+=P){const U=Math.min(n+P-1,H);d(b,n,U,y,this._compareMinY);for(let Z=n;Z<=U;Z+=y)K.children.push(this._build(b,Z,Math.min(Z+y-1,U),A-1))}t(K,this._toBBox);return K};L._chooseSubtree=function(b,n,H,A){for(;;){A.push(n);if(!0===n.leaf||A.length-1===H)break;let y=Infinity,
P=Infinity,K=void 0;for(let U=0,Z=n.children.length;U<Z;U++){const V=n.children[U],ka=N(V),ca=(Math.max(V.maxX,b.maxX)-Math.min(V.minX,b.minX))*(Math.max(V.maxY,b.maxY)-Math.min(V.minY,b.minY))-ka;ca<P?(P=ca,y=ka<y?ka:y,K=V):ca===P&&ka<y&&(y=ka,K=V)}n=K||n.children[0]}return n};L._insert=function(b,n,H){var A=this._toBBox;H=H?b:A(b);J.clear();A=this._chooseSubtree(H,this._data,n,J);A.children.push(b);for(p(A,H);0<=n;)if(J.data[n].children.length>this._maxEntries)this._split(J,n),n--;else break;this._adjustParentBBoxes(H,
J,n)};L._split=function(b,n){const H=b.data[n];var A=H.children.length;const y=this._minEntries;this._chooseSplitAxis(H,y,A);(A=this._chooseSplitIndex(H,y,A))?(A=H.children.splice(A,H.children.length-A),A=H.leaf?new E(A):new z(A),A.height=H.height,t(H,this._toBBox),t(A,this._toBBox),n?b.data[n-1].children.push(A):this._splitRoot(H,A)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};L._splitRoot=function(b,n){this._data=new z([b,n]);this._data.height=b.height+
1;t(this._data,this._toBBox)};L._chooseSplitIndex=function(b,n,H){let A,y,P=void 0;A=y=Infinity;for(let U=n;U<=H-n;U++){var K=r(b,0,U,this._toBBox);const Z=r(b,U,H,this._toBBox),V=Math.max(0,Math.min(K.maxX,Z.maxX)-Math.max(K.minX,Z.minX))*Math.max(0,Math.min(K.maxY,Z.maxY)-Math.max(K.minY,Z.minY));K=N(K)+N(Z);V<A?(A=V,P=U,y=K<y?K:y):V===A&&K<y&&(y=K,P=U)}return P};L._chooseSplitAxis=function(b,n,H){const A=b.leaf?this._compareMinX:q,y=b.leaf?this._compareMinY:B,P=this._allDistMargin(b,n,H,A);n=this._allDistMargin(b,
n,H,y);P<n&&b.children.sort(A)};L._allDistMargin=function(b,n,H,A){b.children.sort(A);A=this._toBBox;var y=r(b,0,n,A);const P=r(b,H-n,H,A);let K=w(y)+w(P);for(let U=n;U<H-n;U++){const Z=b.children[U];p(y,b.leaf?A(Z):Z);K+=w(y)}for(H=H-n-1;H>=n;H--)y=b.children[H],p(P,b.leaf?A(y):y),K+=w(P);return K};L._adjustParentBBoxes=function(b,n,H){for(;0<=H;H--)p(n.data[H],b)};L._condense=function(b){for(let n=b.length-1;0<=n;n--){const H=b.data[n];if(0===H.children.length)if(0<n){const A=b.data[n-1],y=A.children;
y.splice(I.indexOf(y,H,y.length,A.indexHint),1)}else this.clear();else t(H,this._toBBox)}};L._initFormat=function(b){const n=["return a"," - b",";"];this._compareMinX=new Function("a","b",n.join(b[0]));this._compareMinY=new Function("a","b",n.join(b[1]));this._toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")};return m}();const x=new k,G=new k,J=new k,R=new k({deallocator:void 0});k=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};
let v=function(m){function L(){var b=m.apply(this,arguments)||this;b.height=1;b.indexHint=new I.PositionHint;return b}a._inheritsLoose(L,m);return L}(k),E=function(m){function L(b){var n=m.call(this)||this;n.children=b;n.leaf=!0;return n}a._inheritsLoose(L,m);return L}(v),z=function(m){function L(b){var n=m.call(this)||this;n.children=b;n.leaf=!1;return n}a._inheritsLoose(L,m);return L}(v);c.BBox=k;c.PooledRBush=l;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/quickselect":function(){define(["exports"],function(c){var a={exports:{}};(function(I){(function(C){C=C();void 0!==C&&(I.exports=C)})(function(){function C(t,r,p,q,B){for(;q>p;){if(600<q-p){var N=q-p+1,w=r-p+1,h=Math.log(N),D=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*D*(N-D)/N)*(0>w-N/2?-1:1);C(t,r,Math.max(p,Math.floor(r-w*D/N+h)),Math.min(q,Math.floor(r+(N-w)*D/N+h)),B)}N=t[r];w=p;D=q;k(t,p,r);for(0<B(t[q],N)&&k(t,p,q);w<D;){k(t,w,D);w++;for(D--;0>B(t[w],N);)w++;for(;0<B(t[D],N);)D--}0===
B(t[p],N)?k(t,p,D):(D++,k(t,D,q));D<=r&&(p=D+1);r<=D&&(q=D-1)}}function k(t,r,p){var q=t[r];t[r]=t[p];t[p]=q}function f(t,r){return t<r?-1:t>r?1:0}return function(t,r,p,q,B){C(t,r,p||0,q||t.length-1,B||f)}})})(a);c.quickselect=a.exports})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../../../core/maybe","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,a,I,C,k){c.optimizedFeatureQueryEngineAdapter={getObjectId(f){return f.objectId},
getAttributes(f){return f.attributes},getAttribute(f,t){return f.attributes[t]},cloneWithGeometry(f,t){return new C.OptimizedFeature(t,f.attributes,null,f.objectId)},getGeometry(f){return f.geometry},getCentroid(f,t){a.isNone(f.centroid)&&(f.centroid=I.getCentroidOptimizedGeometry(new k,f.geometry,t.hasZ,t.hasM));return f.centroid}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/centroid":function(){define(["exports","../../core/maybe"],
function(c,a){function I(k,f,t,r,p,q,B=1){q=p?q?4:3:q?3:2;let N=t,w=t+q,h=0,D=0,d=t=0,l=0;for(let x=0,G=r-1;x<G;x++,N+=q,w+=q){r=f[N];const J=f[N+1],R=f[N+2],v=f[w],E=f[w+1],z=f[w+2];let m=r*E-v*J;d+=m;h+=(r+v)*m;D+=(J+E)*m;p&&(m=r*z-v*R,t+=(R+z)*m,l+=m);r<k[0]&&(k[0]=r);r>k[1]&&(k[1]=r);J<k[2]&&(k[2]=J);J>k[3]&&(k[3]=J);p&&(R<k[4]&&(k[4]=R),R>k[5]&&(k[5]=R))}0<d*B&&(d*=-1);0<l*B&&(l*=-1);if(!d)return null;k=[h,D,.5*d];p&&(k[3]=t,k[4]=.5*l);return k}function C(k,f,t,r,p){p=r?p?4:3:p?3:2;let q=f,B=
f+p,N=0,w=0,h=0,D=0;for(let G=0,J=t-1;G<J;G++,q+=p,B+=p){var d=k[q];const R=k[q+1],v=k[q+2],E=k[B],z=k[B+1],m=k[B+2];if(r){var l=E-d;var x=z-R;const L=m-v;l=Math.sqrt(l*l+x*x+L*L)}else l=E-d,x=z-R,l=Math.sqrt(l*l+x*x);l&&(N+=l,r?(d=[d+.5*(E-d),R+.5*(z-R),v+.5*(m-v)],w+=l*d[0],h+=l*d[1],D+=l*d[2]):(d=[d+.5*(E-d),R+.5*(z-R)],w+=l*d[0],h+=l*d[1]))}return 0<N?r?[w/N,h/N,D/N]:[w/N,h/N]:0<t?r?[k[f],k[f+1],k[f+2]]:[k[f],k[f+1]]:null}c.getCentroidOptimizedGeometry=function(k,f,t,r,p){if(a.isNone(f)||!f.lengths.length)return null;
const q="upperLeft"===p?.originPosition?-1:1;k.lengths.length&&(k.lengths.length=0);k.coords.length&&(k.coords.length=0);p=k.coords;const B=[],N=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:w,coords:h}=f,D=t?r?4:3:r?3:2;let d=0;for(var l of w){const x=I(N,h,d,l,t,r,q);x&&B.push(x);
d+=l*D}B.sort((x,G)=>{let J=q*x[2]-q*G[2];0===J&&t&&(J=x[4]-G[4]);return J});B.length&&(l=6*B[0][2],p[0]=B[0][0]/l,p[1]=B[0][1]/l,t&&(l=6*B[0][4],p[2]=0!==l?B[0][3]/l:0),p[0]<N[0]||p[0]>N[1]||p[1]<N[2]||p[1]>N[3]||t&&(p[2]<N[4]||p[2]>N[5]))&&(p.length=0);if(!p.length)if(f=f.lengths[0]?C(h,0,w[0],t,r):null)p[0]=f[0],p[1]=f[1],t&&2<f.length&&(p[2]=f[2]);else return null;return k};c.lineCentroid=C;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/arrayUtils ../../../core/Error ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/unitUtils ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./spatialQuerySupport ./timeSupport ./utils ../../support/FieldsIndex ../../../support/arcadeOnDemand ../../../views/support/Scheduler".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G,J,R,v,E,z,m){function L(K){return K.every(U=>"exceedslimit"!==U.statisticType)}const b=new t.MemCacheStorage(2E6);let n=0,H=function(){function K(Z){this.capabilities={query:x.queryCapabilities};this.geometryType=Z.geometryType;this.hasM=Z.hasM;this.hasZ=Z.hasZ;this.objectIdField=Z.objectIdField;this.spatialReference=Z.spatialReference;this.definitionExpression=Z.definitionExpression;this.featureStore=Z.featureStore;this.aggregateAdapter=Z.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=Z.timeInfo;Z.cacheSpatialQueries&&(this._geometryQueryCache=new t.MemCache(n++ +"$$",b));this.fieldsIndex=new E(Z.fields);Z.scheduler&&Z.priority&&(this._frameTask=Z.scheduler.registerTask(Z.priority))}var U=K.prototype;U.destroy=function(){this._frameTask=f.removeMaybe(this._frameTask);this.clearCache();f.destroyMaybe(this._geometryQueryCache);this._changeHandle=f.removeMaybe(this._changeHandle);f.destroyMaybe(this.fieldsIndex)};
U.clearCache=function(){this._geometryQueryCache?.clear();this._timeExtent=this._allItems=null};U.executeQuery=function(){var Z=a._asyncToGenerator(function*(V,ka){try{return(yield this._executeQuery(V,{},ka)).createQueryResponse()}catch(ca){if(ca!==v.QUERY_ENGINE_EMPTY_RESULT)throw ca;return(new G.QueryEngineResult([],V,this)).createQueryResponse()}});return function(V,ka){return Z.apply(this,arguments)}}();U.executeQueryForCount=function(){var Z=a._asyncToGenerator(function*(V={},ka){try{return(yield this._executeQuery(V,
{returnGeometry:!1,returnCentroid:!1,outSR:null},ka)).createQueryResponseForCount()}catch(ca){if(ca!==v.QUERY_ENGINE_EMPTY_RESULT)throw ca;return 0}});return function(){return Z.apply(this,arguments)}}();U.executeQueryForExtent=function(){var Z=a._asyncToGenerator(function*(V,ka){const ca=V.outSR;try{const qa=yield this._executeQuery(V,{returnGeometry:!0,returnCentroid:!1,outSR:null},ka),wa=qa.size;if(!wa)return{count:0,extent:null};p.set(y,p.NEGATIVE_INFINITY);this.featureStore.forEachBounds(qa.items,
Ca=>p.expandWithAABB(y,Ca),A);const xa={xmin:y[0],ymin:y[1],xmax:y[3],ymax:y[4],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(y[2])&&isFinite(y[5])&&(xa.zmin=y[2],xa.zmax=y[5]);const Ba=l.project(xa,qa.spatialReference,ca);Ba.spatialReference=v.cleanFromGeometryEngine(ca||this.spatialReference);if(0===Ba.xmax-Ba.xmin){const Ca=r.getMetersPerUnitForSR(Ba.spatialReference);Ba.xmin-=Ca;Ba.xmax+=Ca}if(0===Ba.ymax-Ba.ymin){const Ca=r.getMetersPerUnitForSR(Ba.spatialReference);
Ba.ymin-=Ca;Ba.ymax+=Ca}if(this.hasZ&&null!=Ba.zmin&&null!=Ba.zmax&&0===Ba.zmax-Ba.zmin){const Ca=r.getMetersPerUnitForSR(Ba.spatialReference);Ba.zmin-=Ca;Ba.zmax+=Ca}return{count:wa,extent:Ba}}catch(qa){if(qa===v.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw qa;}});return function(V,ka){return Z.apply(this,arguments)}}();U.executeQueryForIds=function(){var Z=a._asyncToGenerator(function*(V,ka){return this.executeQueryForIdSet(V,ka).then(ca=>Array.from(ca))});return function(V,ka){return Z.apply(this,
arguments)}}();U.executeQueryForIdSet=function(){var Z=a._asyncToGenerator(function*(V,ka){try{const ca=yield this._executeQuery(V,{returnGeometry:!0,returnCentroid:!1,outSR:null},ka),qa=ca.items,wa=new Set;yield this._reschedule(()=>{for(const xa of qa)wa.add(ca.featureAdapter.getObjectId(xa))},ka);return wa}catch(ca){if(ca===v.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ca;}});return function(V,ka){return Z.apply(this,arguments)}}();U.executeQueryForSnapping=function(){var Z=a._asyncToGenerator(function*(V,
ka){const {point:ca,distance:qa,types:wa}=V;if(wa===G.SnappingTypes.NONE)return{candidates:[]};const xa=yield this._reschedule(()=>this._checkQuerySupport(V.query),ka),Ba=!h.equals(ca.spatialReference,this.spatialReference);Ba&&(yield l.checkProjectionSupport(ca.spatialReference,this.spatialReference));var Ca="number"===typeof qa?qa:qa.x,Ja="number"===typeof qa?qa:qa.y;Ca={xmin:ca.x-Ca,xmax:ca.x+Ca,ymin:ca.y-Ja,ymax:ca.y+Ja,spatialReference:ca.spatialReference};Ca=Ba?l.project(Ca,this.spatialReference):
Ca;if(!Ca)return{candidates:[]};Ja=(yield w.normalizeCentralMeridian(N.fromJSON(ca),null,{signal:ka}))[0];const La=(yield w.normalizeCentralMeridian(N.fromJSON(Ca),null,{signal:ka}))[0];if(f.isNone(Ja)||f.isNone(La))return{candidates:[]};const Na=new G.QueryEngineResult(this._searchFeatures(this._getQueryBBoxes(La.toJSON())),xa,this);yield this._reschedule(()=>this._executeObjectIdsQuery(Na),ka);yield this._reschedule(()=>this._executeTimeQuery(Na),ka);yield this._reschedule(()=>this._executeAttributesQuery(Na),
ka);ka=Ja.toJSON();ka=Ba?l.project(ka,this.spatialReference):ka;return Na.createSnappingResponse({...V,point:ka,distance:Ba?Math.max(Ca.xmax-Ca.xmin,Ca.ymax-Ca.ymin)/2:qa},ca.spatialReference)});return function(V,ka){return Z.apply(this,arguments)}}();U.executeQueryForLatestObservations=function(){var Z=a._asyncToGenerator(function*(V,ka){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new C("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:V,timeInfo:this.timeInfo});
try{const ca=yield this._executeQuery(V,{},ka);yield this._reschedule(()=>this._filterLatest(ca),ka);return ca.createQueryResponse()}catch(ca){if(ca!==v.QUERY_ENGINE_EMPTY_RESULT)throw ca;return(new G.QueryEngineResult([],V,this)).createQueryResponse()}});return function(V,ka){return Z.apply(this,arguments)}}();U.executeQueryForSummaryStatistics=function(){var Z=a._asyncToGenerator(function*(V={},ka,ca){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(V,
{field:qa,normalizationField:wa,valueExpression:xa},ca)).createSummaryStatisticsResponse(ka)});return function(){return Z.apply(this,arguments)}}();U.executeQueryForUniqueValues=function(){var Z=a._asyncToGenerator(function*(V={},ka,ca){const {field:qa,field2:wa,field3:xa,valueExpression:Ba}=ka;return(yield this._getQueryEngineResultForStats(V,{field:qa,field2:wa,field3:xa,valueExpression:Ba},ca)).createUniqueValuesResponse(ka)});return function(){return Z.apply(this,arguments)}}();U.executeQueryForClassBreaks=
function(){var Z=a._asyncToGenerator(function*(V={},ka,ca){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(V,{field:qa,normalizationField:wa,valueExpression:xa},ca)).createClassBreaksResponse(ka)});return function(){return Z.apply(this,arguments)}}();U.executeQueryForHistogram=function(){var Z=a._asyncToGenerator(function*(V={},ka,ca){const {field:qa,normalizationField:wa,valueExpression:xa}=ka;return(yield this._getQueryEngineResultForStats(V,
{field:qa,normalizationField:wa,valueExpression:xa},ca)).createHistogramResponse(ka)});return function(){return Z.apply(this,arguments)}}();U._schedule=function(){var Z=a._asyncToGenerator(function*(V,ka){return f.isSome(this._frameTask)?this._frameTask.schedule(V,ka):V(m.noBudget)});return function(V,ka){return Z.apply(this,arguments)}}();U._reschedule=function(){var Z=a._asyncToGenerator(function*(V,ka){return f.isSome(this._frameTask)?this._frameTask.reschedule(V,ka):V(m.noBudget)});return function(V,
ka){return Z.apply(this,arguments)}}();U._getAll=function(Z){f.isNone(this._allItems)&&(this._allItems=this.featureStore.toArray());return new G.QueryEngineResult(this._allItems,Z,this)};U._executeQuery=function(){var Z=a._asyncToGenerator(function*(V,ka,ca){V=k.clone(V);V=yield this._schedule(()=>v.normalizeQuery(V,this.definitionExpression,this.spatialReference),ca);V=yield this._reschedule(()=>this._checkQuerySupport(V),ca);V={...V,...ka};const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(V,
ca),ca),wa=yield this._reschedule(()=>this._executeGeometryQuery(V,qa,ca),ca);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ca);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ca);yield this._reschedule(()=>this._executeTimeQuery(wa),ca);yield this._reschedule(()=>this._executeAttributesQuery(wa),ca);return wa});return function(V,ka,ca){return Z.apply(this,arguments)}}();U._executeSceneFilterQuery=function(){var Z=a._asyncToGenerator(function*(V,ka){var ca=this;if(f.isNone(V.sceneFilter))return null;
const {outSR:qa,returnGeometry:wa,returnCentroid:xa}=V;var Ba=this.featureStore.featureSpatialReference,Ca=V.sceneFilter.geometry;const Ja=f.isNone(Ba)||h.equals(Ba,Ca.spatialReference)?Ca:l.project(Ca,Ba);if(!Ja)return null;Ba=wa||xa;Ba=h.isValid(qa)&&!h.equals(this.spatialReference,qa)&&Ba?function(){var g=a._asyncToGenerator(function*(F){return ca._project(F,qa)});return function(F){return g.apply(this,arguments)}}():g=>g;const La=this.featureAdapter;Ca=this._searchFeatures(this._getQueryBBoxes(Ja));
if("disjoint"===V.sceneFilter.spatialRelationship){if(!Ca.length)return null;const g=new Set;for(var Na of Ca)g.add(La.getObjectId(Na));const F=yield this._reschedule(()=>this.featureStore.toArray(),ka);Na=yield this._reschedule(a._asyncToGenerator(function*(){const fa=yield J.getSpatialQueryOperator("esriSpatialRelDisjoint",Ja,ca.geometryType,ca.hasZ,ca.hasM),ia=yield ca._runSpatialFilter(F,oa=>!g.has(La.getObjectId(oa))||fa(La.getGeometry(oa)),ka);return new G.QueryEngineResult(ia,V,ca)}),ka);return Ba(Na)}if(!Ca.length)return new G.QueryEngineResult([],
V,this);if(this._canExecuteSinglePass(Ja,V))return Ba(new G.QueryEngineResult(Ca,V,this));const bb=yield J.getSpatialQueryOperator("esriSpatialRelContains",Ja,this.geometryType,this.hasZ,this.hasM);Na=yield this._runSpatialFilter(Ca,g=>bb(La.getGeometry(g)),ka);return Ba(new G.QueryEngineResult(Na,V,this))});return function(V,ka){return Z.apply(this,arguments)}}();U._executeGeometryQuery=function(){var Z=a._asyncToGenerator(function*(V,ka,ca){var qa=this;if(f.isSome(ka)&&0===ka.items.length)return ka;
V=f.isSome(ka)?ka.query:V;const {geometry:wa,outSR:xa,spatialRel:Ba,returnGeometry:Ca,returnCentroid:Ja}=V;var La=this.featureStore.featureSpatialReference;const Na=!wa||f.isNone(La)||h.equals(La,wa.spatialReference)?wa:l.project(wa,La),bb=Ca||Ja,g=h.isValid(xa)&&!h.equals(this.spatialReference,xa),F=this._geometryQueryCache&&f.isNone(ka)?g&&bb?JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba,outSpatialReference:xa}):JSON.stringify({originalFilterGeometry:wa,spatialRelationship:Ba}):
null;La=F?this._geometryQueryCache.get(F):null;if(f.isSome(La))return new G.QueryEngineResult(La,V,this);La=function(){var S=a._asyncToGenerator(function*(W){g&&bb&&(yield qa._project(W,xa));F&&qa._geometryQueryCache.put(F,W.items,W.items.length+1);return W});return function(W){return S.apply(this,arguments)}}();if(!Na)return La(f.isSome(ka)?ka:this._getAll(V));const fa=this.featureAdapter;let ia=this._searchFeatures(this._getQueryBBoxes(wa));if("esriSpatialRelDisjoint"===Ba){if(!ia.length)return La(f.isSome(ka)?
ka:this._getAll(V));const S=new Set;for(var oa of ia)S.add(fa.getObjectId(oa));const W=f.isSome(ka)?ka.items:yield this._reschedule(()=>this.featureStore.toArray(),ca);oa=yield this._reschedule(a._asyncToGenerator(function*(){const Y=yield J.getSpatialQueryOperator(Ba,Na,qa.geometryType,qa.hasZ,qa.hasM),ha=yield qa._runSpatialFilter(W,ja=>!S.has(fa.getObjectId(ja))||Y(fa.getGeometry(ja)),ca);return new G.QueryEngineResult(ha,V,qa)}),ca);return La(oa)}if(f.isSome(ka)){const S=new I.PositionHint;ia=
ia.filter(W=>0<=I.indexOf(ka.items,W,ka.items.length,S))}if(!ia.length)return La=new G.QueryEngineResult([],V,this),F&&this._geometryQueryCache.put(F,La.items,1),La;if(this._canExecuteSinglePass(Na,V))return La(new G.QueryEngineResult(ia,V,this));const O=yield J.getSpatialQueryOperator(Ba,Na,this.geometryType,this.hasZ,this.hasM);oa=yield this._runSpatialFilter(ia,S=>O(fa.getGeometry(S)),ca);return La(new G.QueryEngineResult(oa,V,this))});return function(V,ka,ca){return Z.apply(this,arguments)}}();
U._executeAggregateIdsQuery=function(Z){if(0!==Z.items.length&&Z.query.aggregateIds&&Z.query.aggregateIds.length&&!f.isNone(this.aggregateAdapter)){var V=new Set;for(const ca of Z.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ca).forEach(qa=>V.add(qa));var ka=this.featureAdapter.getObjectId;Z.items=Z.items.filter(ca=>V.has(ka(ca)))}};U._executeObjectIdsQuery=function(Z){if(0!==Z.items.length&&Z.query.objectIds&&Z.query.objectIds.length){var V=new Set(Z.query.objectIds),ka=this.featureAdapter.getObjectId;
Z.items=Z.items.filter(ca=>V.has(ka(ca)))}};U._executeTimeQuery=function(Z){if(0!==Z.items.length){var V=R.getTimeOperator(this.timeInfo,Z.query.timeExtent,this.featureAdapter);f.isNone(V)||(Z.items=Z.items.filter(V))}};U._executeAttributesQuery=function(Z){if(0!==Z.items.length){var V=d.getWhereClause(Z.query.where,this.fieldsIndex);if(V){if(!V.isStandardized)throw new TypeError("Where clause is not standardized");Z.items=Z.items.filter(ka=>V.testFeature(ka,this.featureAdapter))}}};U._runSpatialFilter=
function(){var Z=a._asyncToGenerator(function*(V,ka,ca){var qa=this;if(!ka)return V;if(f.isNone(this._frameTask))return V.filter(Ca=>ka(Ca));let wa=0;const xa=[],Ba=function(){var Ca=a._asyncToGenerator(function*(Ja){for(;wa<V.length;){const La=V[wa++];ka(La)&&(xa.push(La),Ja.madeProgress());Ja.done&&(yield qa._reschedule(Na=>Ba(Na),ca))}});return function(Ja){return Ca.apply(this,arguments)}}();return this._reschedule(Ca=>Ba(Ca),ca).then(()=>xa)});return function(V,ka,ca){return Z.apply(this,arguments)}}();
U._filterLatest=function(Z){const {trackIdField:V,startTimeField:ka,endTimeField:ca}=this.timeInfo,qa=ca||ka,wa=new Map,xa=this.featureAdapter.getAttribute;for(const Ba of Z.items){const Ca=xa(Ba,V),Ja=xa(Ba,qa),La=wa.get(Ca);(!La||Ja>xa(La,qa))&&wa.set(Ca,Ba)}Z.items=Array.from(wa.values())};U._canExecuteSinglePass=function(Z,V){({spatialRel:V}=V);return J.canQueryWithRBush(Z)&&("esriSpatialRelEnvelopeIntersects"===V||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===V||"esriSpatialRelContains"===
V||"esriSpatialRelWithin"===V))};U._project=function(){var Z=a._asyncToGenerator(function*(V,ka){if(!ka||h.equals(this.spatialReference,ka))return V;const ca=this.featureAdapter;ka=yield l.projectMany(V.items.map(qa=>v.getGeometry(this.geometryType,this.hasZ,this.hasM,ca.getGeometry(qa))),this.spatialReference,ka);V.items=ka.map((qa,wa)=>ca.cloneWithGeometry(V.items[wa],D.convertFromGeometry(qa,this.hasZ,this.hasM)));return V});return function(V,ka){return Z.apply(this,arguments)}}();U._getQueryBBoxes=
function(Z){if(J.canQueryWithRBush(Z)){if(N.isExtent(Z))return[q.fromValues(Z.xmin,Z.ymin,Z.xmax,Z.ymax)];if(N.isPolygon(Z))return Z.rings.map(V=>q.fromValues(Math.min(V[0][0],V[2][0]),Math.min(V[0][1],V[2][1]),Math.max(V[0][0],V[2][0]),Math.max(V[0][1],V[2][1])))}return[B.getBoundsXY(q.create(),Z)]};U._searchFeatures=function(Z){for(const V of Z)this.featureStore.forEachInBounds(V,ka=>P.add(ka));Z=Array.from(P.values());P.clear();return Z};U._checkStatisticsSupport=function(){var Z=a._asyncToGenerator(function*(V,
ka){if(0>V.distance||null!=V.geometryPrecision||V.multipatchOption||V.pixelSize||V.relationParam||V.text||V.outStatistics||V.groupByFieldsForStatistics||V.having||V.orderByFields)throw new C("feature-store:unsupported-query","Unsupported query options",{query:V});this._checkAttributesQuerySupport(V);return Promise.all([this._checkStatisticsParamsSupport(ka),J.checkSpatialQuerySupport(V,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,V.outSR)]).then(()=>V)});
return function(V,ka){return Z.apply(this,arguments)}}();U._checkStatisticsParamsSupport=function(){var Z=a._asyncToGenerator(function*(V){var ka=[];V.valueExpression&&({arcadeUtils:ka}=yield z.loadArcade(),ka=ka.extractFieldNames(V.valueExpression));V.field&&ka.push(V.field);V.field2&&ka.push(V.field2);V.field3&&ka.push(V.field3);V.normalizationField&&ka.push(V.normalizationField);if(!ka.length)throw new C("feature-store:unsupported-query","params should have at least a field or valueExpression",
{params:V});d.validateFields(this.fieldsIndex,ka,"params contains missing fields")});return function(V){return Z.apply(this,arguments)}}();U._checkQuerySupport=function(){var Z=a._asyncToGenerator(function*(V){if(0>V.distance||null!=V.geometryPrecision||V.multipatchOption||V.pixelSize||V.relationParam||V.text)throw new C("feature-store:unsupported-query","Unsupported query options",{query:V});this._checkAttributesQuerySupport(V);this._checkStatisticsQuerySupport(V);return Promise.all([J.checkSpatialQuerySupport(V,
this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,V.outSR)]).then(()=>V)});return function(V){return Z.apply(this,arguments)}}();U._checkAttributesQuerySupport=function(Z){const {outFields:V,orderByFields:ka,returnDistinctValues:ca,outStatistics:qa}=Z,wa=qa?qa.map(xa=>xa.outStatisticFieldName&&xa.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(ka&&0<ka.length){const xa=ka.map(Ba=>{const Ca=Ba.toLowerCase();return Ca.includes(" asc")?Ca.split(" asc")[0]:
Ca.includes(" desc")?Ca.split(" desc")[0]:Ba}).filter(Ba=>!wa.includes(Ba));d.validateFields(this.fieldsIndex,xa,"orderByFields contains missing fields")}if(V&&0<V.length)d.validateFields(this.fieldsIndex,V,"outFields contains missing fields");else if(ca)throw new C("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:Z});d.validateWhere(this.fieldsIndex,Z.where)};U._checkStatisticsQuerySupport=function(Z){const {outStatistics:V,groupByFieldsForStatistics:ka,
having:ca}=Z;var qa=ka&&ka.length,wa=V&&V.length;if(ca){if(!qa||!wa)throw new C("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:Z});d.validateHaving(this.fieldsIndex,ca,V)}if(wa&&L(V)){wa=V.map(xa=>xa.onStatisticField).filter(Boolean);d.validateFields(this.fieldsIndex,wa,"onStatisticFields contains missing fields");qa&&d.validateFields(this.fieldsIndex,ka,"groupByFieldsForStatistics contains missing fields");for(const xa of V){const {onStatisticField:Ba,
statisticType:Ca}=xa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in xa){if({statisticParameters:qa}=xa,!qa)throw new C("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:xa,query:Z});}else if("count"!==Ca&&Ba&&d.hasInvalidFieldType(Ba,this.fieldsIndex))throw new C("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:xa,query:Z});}}};U._getQueryEngineResultForStats=function(){var Z=
a._asyncToGenerator(function*(V,ka,ca){V=k.clone(V);try{V=yield this._schedule(()=>v.normalizeQuery(V,this.definitionExpression,this.spatialReference),ca);V=yield this._reschedule(()=>this._checkStatisticsSupport(V,ka),ca);const qa=yield this._reschedule(()=>this._executeSceneFilterQuery(V,ca),ca),wa=yield this._reschedule(()=>this._executeGeometryQuery(V,qa,ca),ca);yield this._reschedule(()=>this._executeAggregateIdsQuery(wa),ca);yield this._reschedule(()=>this._executeObjectIdsQuery(wa),ca);yield this._reschedule(()=>
this._executeTimeQuery(wa),ca);yield this._reschedule(()=>this._executeAttributesQuery(wa),ca);return wa}catch(qa){if(qa!==v.QUERY_ENGINE_EMPTY_RESULT)throw qa;return new G.QueryEngineResult([],V,this)}});return function(V,ka,ca){return Z.apply(this,arguments)}}();a._createClass(K,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const Z=this.featureStore.fullBounds;return f.isNone(Z)?null:{xmin:Z[0],ymin:Z[1],xmax:Z[2],ymax:Z[3],spatialReference:v.cleanFromGeometryEngine(this.spatialReference)}}},
{key:"timeExtent",get:function(){if(!this.timeInfo)return null;this._timeExtent||(this._timeExtent=R.getTimeExtent(this.timeInfo,this.featureStore));return this._timeExtent}}]);return K}();const A=p.create(),y=p.create(),P=new Set;c.Feature=function(K,U=null,Z,V,ka){this.attributes=K;this.geometry=Z;this.centroid=V;this.filterFlags=ka;this.groupId=-1;this.displayId=U};c.QueryEngine=H;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/MemCache":function(){define(["exports",
"../chunks/_rollupPluginBabelHelpers","./maybe","./PooledArray"],function(c,a,I,C){c.RemoveMode=void 0;(function(t){t[t.ALL=0]="ALL";t[t.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));let k=function(){function t(p,q,B){this._namespace=p;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";B&&(this._storage.registerRemoveFunc(this._namespace,B),this._removeFunc=!0)}var r=t.prototype;r.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};r.resetHitRate=function(){this._hit=this._miss=0};r.put=function(p,q,B,N=0){this._storage.put(this._namespace+p,q,B,N)};r.get=function(p){p=this._storage.get(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};r.pop=function(p){p=this._storage.pop(this._namespace+p);void 0===p?++this._miss:++this._hit;return p};r.updateSize=function(p,q,B){this._storage.updateSize(this._namespace+
p,q,B)};r.clear=function(){this._storage.clear(this._namespace)};r.clearAll=function(){this._storage.clearAll()};r.getStats=function(){return this._storage.getStats()};r.resetStats=function(){this._storage.resetStats()};a._createClass(t,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return t}(),
f=function(){function t(p=10485760){this._maxSize=p;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new C;this._users=new C}var r=t.prototype;r.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};r.register=function(p){this._users.push(p)};r.deregister=function(p){this._users.removeUnordered(p)};r.registerRemoveFunc=function(p,q){this._removeFuncs.push([p,q])};r.deregisterRemoveFunc=function(p){this._removeFuncs.filterInPlace(q=>q[0]!==
p)};r.put=function(p,q,B,N){const w=this._db.get(p);w&&(this._size-=w.size,this._db.delete(p),w.entry!==q&&this._notifyRemove(p,w.entry,c.RemoveMode.ALL));B>this._maxSize?this._notifyRemove(p,q,c.RemoveMode.ALL):void 0===q?console.warn("Refusing to cache undefined entry "):!B||0>B?console.warn("Refusing to cache entry with invalid size "+B):(N=1+Math.max(N,-3)- -3,this._db.set(p,{entry:q,size:B,lifetime:N,lives:N}),this._size+=B,this._checkSizeLimit())};r.updateSize=function(p,q,B){const N=this._db.get(p);
if(N&&N.entry===q){for(this._size-=N.size;B>this._maxSize;)if(B=this._notifyRemove(p,q,c.RemoveMode.SOME),!(I.isSome(B)&&0<B)){this._db.delete(p);return}N.size=B;this._size+=B;this._checkSizeLimit()}};r.pop=function(p){const q=this._db.get(p);if(q)return this._size-=q.size,this._db.delete(p),++this._hit,q.entry;++this._miss};r.get=function(p){const q=this._db.get(p);if(void 0===q)++this._miss;else return this._db.delete(p),q.lives=q.lifetime,this._db.set(p,q),++this._hit,q.entry};r.getStats=function(){const p=
{Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},B=[];this._db.forEach((h,D)=>{const d=h.lifetime;B[d]=(B[d]||0)+h.size;this._users.forAll(l=>{l=l.namespace;D.startsWith(l)&&(q[l]=(q[l]||0)+h.size)})});const N={};this._users.forAll(h=>{const D=h.namespace;!isNaN(h.hitRate)&&0<h.hitRate?(q[D]=q[D]||0,N[D]=Math.round(100*h.hitRate)+"%"):N[D]="0%"});var w=Object.keys(q);w.sort((h,D)=>
q[D]-q[h]);w.forEach(h=>p[h]=Math.round(q[h]/2**20)+"MB / "+N[h]);for(w=B.length-1;0<=w;--w){const h=B[w];h&&(p["Priority "+(w+-3-1)]=Math.round(h/this.size*100)+"%")}return p};r.resetStats=function(){this._hit=this._miss=0;this._users.forAll(p=>p.resetHitRate())};r.clear=function(p){this._db.forEach((q,B)=>{B.startsWith(p)&&(this._size-=q.size,this._db.delete(B),this._notifyRemove(B,q.entry,c.RemoveMode.ALL))})};r.clearAll=function(){this._db.forEach((p,q)=>this._notifyRemove(q,p.entry,c.RemoveMode.ALL));
this._size=0;this._db.clear()};r._getHitRate=function(){return this._hit/(this._hit+this._miss)};r._notifyRemove=function(p,q,B){let N;this._removeFuncs.some(w=>p.startsWith(w[0])?(w=w[1](q,B),"number"===typeof w&&(N=w),!0):!1);return N};r._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [p,q]of this._db){this._db.delete(p);if(1>=q.lives){this._size-=q.size;const B=this._notifyRemove(p,q.entry,c.RemoveMode.SOME);I.isSome(B)&&0<B&&(this._size+=B,q.lives=q.lifetime,q.size=B,this._db.set(p,
q))}else--q.lives,this._db.set(p,q);if(this._size<=.9*this.maxSize)break}};a._createClass(t,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(p){this._maxSize=Math.max(p,0);this._checkSizeLimit()}}]);return t}();c.MIN_PRIORITY=-3;c.MemCache=k;c.MemCacheStorage=f;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ./maybe ../geometry/projectionEllipsoid ../geometry/support/Ellipsoid ../geometry/support/spatialReferenceUtils ../geometry/support/WKIDUnitConversion".split(" "),
function(c,a,I,C,k,f,t,r){function p(ca){ca=K[ca];if(!ca)throw Error("unknown type");return ca}function q(ca){return P[ca].baseUnit}function B(ca,qa=null){qa=qa||p(ca);return P[qa].baseUnit===ca}function N(ca,qa,wa){if(qa===wa)return ca;const xa=p(qa);if(xa!==p(wa))throw Error("incompatible units");ca=B(qa,xa)?ca:ca*P[xa].units[qa].inBaseUnits;return B(wa,xa)?ca:ca/P[xa].units[wa].inBaseUnits}function w(ca,qa){ca=N(ca,qa,"meters");return 3E3>Math.abs(ca)?"meters":"kilometers"}function h(ca,qa){ca=
N(ca,qa,"meters");return 1E5>Math.abs(ca)?"meters":"kilometers"}function D(ca,qa){ca=N(ca,qa,"feet");return 1E3>Math.abs(ca)?"feet":"miles"}function d(ca,qa){ca=N(ca,qa,"feet");return 1E5>Math.abs(ca)?"feet":"miles"}function l(ca,qa){ca=N(ca,qa,"square-meters");return 3E6>Math.abs(ca)?"square-meters":"square-kilometers"}function x(ca,qa){ca=N(ca,qa,"square-feet");return 1E6>Math.abs(ca)?"square-feet":"square-miles"}function G(ca){return y.fromJSON(ca.toLowerCase())||null}function J(ca){const qa=R(ca),
wa=k.getReferenceEllipsoid(ca).metersPerDegree;return qa>=wa?"meters":z(ca)}function R(ca,qa=f.earth.metersPerDegree){return C.unwrapOr(v(ca,!0),qa)}function v(ca,qa=!1){const wa=C.isSome(ca)?ca.wkid:null;ca=C.isSome(ca)?ca.wkt:null;let xa=null;if(wa){if(t.isWKIDFromMars(wa))return f.mars.metersPerDegree;if(t.isWKIDFromMoon(wa))return f.moon.metersPerDegree;xa=n.values[n[wa]];!xa&&qa&&A.has(wa)&&(xa=L)}else ca&&(/^PROJCS/i.test(ca)?xa=E(b.exec(ca),xa):/^GEOCCS/i.test(ca)&&(xa=E(H.exec(ca),xa)));return xa}
function E(ca,qa){return ca&&ca[1]?parseFloat(ca[1].split(",")[1]):qa}function z(ca){var qa=C.isSome(ca)?ca.wkid:null,wa=C.isSome(ca)?ca.wkt:null;ca=null;if(qa)ca=n.units[n[qa]];else if(wa&&(qa=/^PROJCS/i.test(wa)?b:/^GEOCCS/i.test(wa)?H:null)&&(qa=qa.exec(wa))&&qa[1]&&(qa=qa[1],ca=(ca=/[\\"\\']{1}([^\\"\\']+)/.exec(qa))&&ca[1],!ca||!n.units.includes(ca))){qa=parseFloat(qa.split(",")[1]);ca=null;wa=n.values;for(let xa=0;xa<wa.length;++xa)if(1E-7>Math.abs(qa-wa[xa])){ca=n.units[xa];break}}return C.isSome(ca)?
G(ca):null}function m(ca){ca=z(ca);if(C.isNone(ca))return null;switch(ca){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null}const L=f.earth.radius*Math.PI/200,b=/UNIT\[([^\]]+)\]\]$/i,
n=r,H=/UNIT\[([^\]]+)\]/i,A=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),y=I.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",
"50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});a={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};r={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*
.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(ca=>ca*ca)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const P={length:{baseUnit:"meters",units:a},area:{baseUnit:"square-meters",units:r},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},
"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},K=(()=>{const ca={};for(const qa in P)for(const wa in P[qa].units)ca[wa]=
qa;return ca})(),U="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),Z=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]),V={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",
esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},ka={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};a=I.strict()(V);r=I.strict()(ka);I=I.strict()({...V,...ka});c.areaUnitFromSpatialReference=function(ca){ca=z(ca);return C.isNone(ca)?null:Z.get(ca)};
c.areaUnitsJSONMap=a;c.baseUnitForUnit=function(ca){return q(p(ca))};c.baseUnitForUnitType=q;c.convertUnit=N;c.getDefaultUnitForView=function(ca){if(C.isNone(ca))return"metric";var qa=ca.map;if(qa=qa&&"portalItem"in qa?qa.portalItem?.portal:null)switch(qa?.user?.units??qa.units){case "metric":return"metric";case "english":return"imperial"}return C.unwrapOr(m(ca.spatialReference),"metric")};c.getDefaultUnitSystem=m;c.getMetersPerUnit=v;c.getMetersPerUnitForSR=R;c.getMetersPerVerticalUnitForSR=function(ca){if(C.isSome(ca)&&
!t.isEarth(ca))return 1;ca=R(ca);return 1E5<ca?1:ca};c.getUnitString=z;c.getVerticalUnitStringForSR=J;c.inchesPerMeter=39.37;c.isBaseUnit=B;c.isMeasurementSystem=function(ca){return"imperial"===ca||"metric"===ca};c.lengthToDegrees=function(ca,qa,wa){return N(ca,qa,"meters")/(wa*Math.PI/180)};c.lengthUnitFromSpatialReference=function(ca){ca=z(ca);return C.isNone(ca)||!U.includes(ca)?null:ca};c.lengthUnitsJSONMap=r;c.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");
c.measurementLengthUnits=U;c.preferredAreaUnit=function(ca,qa,wa){switch(wa){case "metric":return l(ca,qa);case "imperial":return x(ca,qa);default:return wa}};c.preferredImperialAreaUnit=x;c.preferredImperialLengthUnit=D;c.preferredImperialVerticalLengthUnit=d;c.preferredLengthUnit=function(ca,qa,wa){switch(wa){case "metric":return w(ca,qa);case "imperial":return D(ca,qa);default:return wa}};c.preferredMetricAreaUnit=l;c.preferredMetricLengthUnit=w;c.preferredMetricVerticalLengthUnit=h;c.preferredVerticalLengthUnit=
function(ca,qa,wa){switch(wa){case "metric":return h(ca,qa);case "imperial":return d(ca,qa);default:return wa}};c.unitFromRESTJSON=G;c.unitToRESTJSON=function(ca){return y.toJSON(ca)||null};c.unitType=p;c.unitsJSONMap=I;c.verticalLengthUnitFromSpatialReference=function(ca){ca=J(ca);return C.isNone(ca)||!U.includes(ca)?null:ca};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","../core/maybe",
"./SpatialReference","./support/Ellipsoid","./support/spatialReferenceUtils"],function(c,a,I,C,k){function f(B){return new I({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${B.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const t=f(C.earth),r=f(C.mars),p=f(C.moon),q=new I({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${C.earth.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});
c.SphericalECEFSpatialReference=t;c.SphericalPCPFMars=r;c.SphericalPCPFMoon=p;c.WGS84ECEFSpatialReference=q;c.createSphericalPCPF=f;c.getReferenceEllipsoid=function(B){return a.isSome(B)&&(k.isMars(B)||B===r)?C.mars:a.isSome(B)&&(k.isMoon(B)||B===p)?C.moon:C.earth};c.getReferenceEllipsoidFromWKID=function(B){return k.isWKIDFromMars(B)?C.mars:k.isWKIDFromMoon(B)?C.moon:C.earth};c.getSphericalPCPF=function(B){return B&&(k.isMars(B)||B===r)?r:B&&(k.isMoon(B)||B===p)?p:t};c.getSphericalPCPFForEllipsoid=
function(B){return B&&B===C.mars?r:B&&B===C.moon?p:t};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../config ../../core/Error ../../core/Logger ../../core/maybe ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,a,I,C,
k,f,t,r,p,q,B,N,w){function h(v){const E=[];let z=0,m=0;for(let L=0;L<v.length;L++){const b=v[L];let n=null;for(let H=0;H<b.length;H++)n=b[H],E.push(n),0===H?m=z=n[0]:(z=Math.min(z,n[0]),m=Math.max(m,n[0]));n&&E.push([(z+m)/2,0])}return E}function D(v,E){if(!(v instanceof r||v instanceof t))throw R.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new C("straightLineDensify: the input geometry is neither polyline nor polygon");var z=p.getGeometryParts(v);const m=[];
for(const b of z){z=[];m.push(z);z.push([b[0][0],b[0][1]]);for(let n=0;n<b.length-1;n++){const H=b[n][0],A=b[n][1],y=b[n+1][0],P=b[n+1][1];var L=Math.sqrt((y-H)*(y-H)+(P-A)*(P-A));const K=(P-A)/L,U=(y-H)/L,Z=L/E;if(1<Z){for(let V=1;V<=Z-1;V++){const ka=V*E;z.push([U*ka+H,K*ka+A])}L=(L+Math.floor(Z-1)*E)/2;z.push([U*L+H,K*L+A])}z.push([y,P])}}return"polygon"===v.type?new t({rings:m,spatialReference:v.spatialReference}):new r({paths:m,spatialReference:v.spatialReference})}function d(v,E,z){E&&(v=D(v,
1E6),v=B.webMercatorToGeographic(v,!0));z&&(v=p.updatePolyGeometry(v,z));return v}function l(v,E,z){if(Array.isArray(v)){var m=v[0];m>E?(z=p.offsetMagnitude(m,E),v[0]=m+-2*z*E):m<z&&(E=p.offsetMagnitude(m,z),v[0]=m+-2*E*z)}else m=v.x,m>E?(z=p.offsetMagnitude(m,E),v=v.clone().offset(-2*z*E,0)):m<z&&(E=p.offsetMagnitude(m,z),v=v.clone().offset(-2*E*z,0));return v}function x(v,E){let z=-1;for(let m=0;m<E.cutIndexes.length;m++){const L=E.cutIndexes[m],b=E.geometries[m],n=p.getGeometryParts(b);for(let H=
0;H<n.length;H++){const A=n[H];A.some(y=>{if(180>y[0])return!0;y=0;for(var P=0;P<A.length;P++){var K=A[P][0];y=K>y?K:y}y=Number(y.toFixed(9));y=-360*p.offsetMagnitude(y,180);for(P=0;P<A.length;P++)K=b.getPoint(H,P),b.setPoint(H,P,K.clone().offset(y,0));return!0})}if(L===z)if("polygon"===v[0].type)for(const H of p.getGeometryParts(b))v[L]=v[L].addRing(H);else{if("polyline"===v[0].type)for(const H of p.getGeometryParts(b))v[L]=v[L].addPath(H)}else z=L,v[L]=b}return v}function G(v,E,z){return J.apply(this,
arguments)}function J(){J=a._asyncToGenerator(function*(v,E,z){if(!Array.isArray(v))return G([v],E);E&&"string"!==typeof E&&R.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");var m="string"===typeof E?E:E?.url??I.geometryServiceUrl;let L,b,n;let H=0;var A=[];E=[];for(var y of v)if(f.isNone(y))E.push(y);else{if(!P){var P=y.spatialReference;var K=q.getInfo(P);var U=(L=P.isWebMercator)?102100:4326;b=p.cutParams[U].maxX;n=p.cutParams[U].minX;var Z=p.cutParams[U].plus180Line;
U=p.cutParams[U].minus180Line}if(K)if("mesh"===y.type)E.push(y);else if("point"===y.type)E.push(l(y.clone(),b,n));else if("multipoint"===y.type){var V=y.clone();V.points=V.points.map(ka=>l(ka,b,n));E.push(V)}else if("extent"===y.type)V=y.clone()._normalize(!1,!1,K),E.push(V.rings?new t(V):V);else if(y.extent){V=y.extent;const ka=2*p.offsetMagnitude(V.xmin,n)*b;let ca=0===ka?y.clone():p.updatePolyGeometry(y.clone(),ka);V.offset(ka,0);V.intersects(Z)&&V.xmax!==b?(H=V.xmax>H?V.xmax:H,ca=d(ca,L),A.push(ca),
E.push("cut")):V.intersects(U)&&V.xmin!==n?(H=2*V.xmax*b>H?2*V.xmax*b:H,ca=d(ca,L,360),A.push(ca),E.push("cut")):E.push(ca)}else E.push(y.clone());else E.push(y)}P=p.offsetMagnitude(H,b);K=-90;Z=P;for(y=new r;0<P;)U=-180+360*P,y.addPath([[U,K],[U,-1*K]]),K*=-1,P--;if(0<A.length&&0<Z){P=yield N.cut(m,A,y,z);P=x(A,P);K=[];A=[];for(Z=0;Z<E.length;Z++)y=E[Z],"cut"!==y?A.push(y):(y=P.shift(),U=v[Z],f.isSome(U)&&"polygon"===U.type&&U.rings&&1<U.rings.length&&y.rings.length>=U.rings.length?(K.push(y),A.push("simplify")):
A.push(L?B.geographicToWebMercator(y):y));if(!K.length)return A;E=yield w.simplify(m,K,z);v=[];for(z=0;z<A.length;z++)m=A[z],"simplify"!==m?v.push(m):v.push(L?B.geographicToWebMercator(E.shift()):E.shift());return v}v=[];for(z=0;z<E.length;z++)m=E[z],"cut"!==m?v.push(m):(m=A.shift(),v.push(!0===L?B.geographicToWebMercator(m):m));return v});return J.apply(this,arguments)}const R=k.getLogger("esri.geometry.support.normalizeUtils");c.getDenormalizedExtent=function(v){if(!v)return null;const E=v.extent;
if(!E)return null;var z=v.spatialReference&&q.getInfo(v.spatialReference);if(!z)return E;const [m,L]=z.valid;({width:z}=E);let {xmin:b,xmax:n}=E;[b,n]=[n,b];if("extent"===v.type||0===z||z<=L||z>2*L||b<m||n>L)return E;let H;switch(v.type){case "polygon":if(1<v.rings.length)H=h(v.rings);else return E;break;case "polyline":if(1<v.paths.length)H=h(v.paths);else return E;break;case "multipoint":H=v.points}v=E.clone();for(let A=0;A<H.length;A++){let y=H[A][0];0>y?(y+=L,n=Math.max(y,n)):(y-=L,b=Math.min(y,
b))}v.xmin=b;v.xmax=n;return v.width<z?(v.xmin-=L,v.xmax-=L,v):E};c.normalizeCentralMeridian=G;c.normalizeMapX=function(v,E){if(E=q.getInfo(E)){const [z,m]=E.valid;E=m-z;if(v<z)for(;v<z;)v+=E;if(v>m)for(;v>m;)v-=E}return v};c.straightLineDensify=D;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,a,I,C){function k(f){return C.isPolygon(f)?
f.rings:f.paths}a={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new a({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:I.WebMercator}),minus180Line:new a({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:I.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new a({paths:[[[180,-180],[180,180]]],spatialReference:I.WGS84}),minus180Line:new a({paths:[[[-180,
-180],[-180,180]]],spatialReference:I.WGS84})}};c.cutParams=a;c.getGeometryParts=k;c.offsetMagnitude=function(f,t){return Math.ceil((f-t)/(2*t))};c.updatePolyGeometry=function(f,t){const r=k(f);for(const p of r)for(const q of p)q[0]+=t;return f};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/cut":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../geometry ../../request ../../geometry/support/jsonUtils ../utils".split(" "),
function(c,a,I,C,k,f){function t(){t=a._asyncToGenerator(function*(r,p,q,B){r=f.parseUrl(r);const N=p[0].spatialReference;p={...B,query:{...r.query,f:"json",sr:JSON.stringify(N),target:JSON.stringify({geometryType:k.getJsonType(p[0]),geometries:p}),cutter:JSON.stringify(q)}};p=yield C(r.path+"/cut",p);const {cutIndexes:w,geometries:h=[]}=p.data;return{cutIndexes:w,geometries:h.map(D=>{D=k.fromJSON(D);D.spatialReference=N;return D})}});return t.apply(this,arguments)}c.cut=function(r,p,q,B){return t.apply(this,
arguments)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),function(c,a,I,C,k,f){function t(r,p,q){const B={};for(const w in r)if("declaredClass"!==w){var N=r[w];if(null!=N&&"function"!==typeof N)if(Array.isArray(N)){B[w]=[];for(let h=0;h<N.length;h++)B[w][h]=t(N[h])}else"object"===typeof N?N.toJSON?(N=N.toJSON(q&&q[w]),B[w]=
p?N:JSON.stringify(N)):B[w]=p?N:JSON.stringify(N):B[w]=N}return B}c.asValidOptions=function(r,p){return p?{...p,query:{...r,...p.query}}:{query:r}};c.encode=t;c.getToken=function(r,p){return f.supportsApiKey(r)&&(p||a.apiKey)?p||a.apiKey:I.id?.findCredential(r)?.token};c.parseUrl=function(r){return"string"===typeof r?k.urlToObject(r):C.clone(r)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/simplify":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ./utils".split(" "),
function(c,a,I,C,k,f){function t(){t=a._asyncToGenerator(function*(r,p,q){const B="string"===typeof r?C.urlToObject(r):r;r=p[0].spatialReference;const N=k.getJsonType(p[0]);p={...q,query:{...B.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),geometries:JSON.stringify(f.encodeGeometries(p))}};({data:p}=yield I(B.path+"/simplify",p));return f.decodeGeometries(p.geometries,N,r)});return t.apply(this,arguments)}c.simplify=function(r,p,q){return t.apply(this,arguments)};Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,a){c.decodeGeometries=function(I,C,k){const f=a.getGeometryType(C);return I.map(t=>{t=f.fromJSON(t);t.spatialReference=k;return t})};c.encodeGeometries=function(I){return{geometryType:a.getJsonType(I[0]),geometries:I.map(C=>C.toJSON())}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(c,a,I){function C(p,q){return p?t.get(p,q):null}function k(p,q,B,N=!0){const w=[];for(const h of q)if("*"!==h&&!p.has(h))if(N){q=f(h);try{const D=C(q,p);if(!D)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!D.isStandardized)throw new a("feature-store:unsupported-query","expression is not standard",{clause:D});k(p,D.fieldNames,"expression contains missing fields")}catch(D){if((q=D&&D.details)&&
(q.clause||q.where))throw D;q&&q.missingFields?w.push(...q.missingFields):w.push(h)}}else w.push(h);if(w.length)throw new a("feature-store:unsupported-query",B,{missingFields:w});}function f(p){return p.split(" as ")[0]}const t=new I.WhereClauseCache(50,500),r=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));c.getAliasFromFieldName=function(p){return p.split(" as ")[1]};c.getExpressionFromFieldName=
f;c.getWhereClause=C;c.hasInvalidFieldType=function(p,q){return(p=q.get(p))?!r.has(p.type):!1};c.validateFields=k;c.validateHaving=function(p,q,B){if(!q)return!0;const N=t.get(q,p);if(!N)throw new a("feature-store:unsupported-query","invalid SQL expression",{having:q});if(!N.isAggregate)throw new a("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:q});k(p,N.fieldNames,"having contains missing fields");if(!N.getExpressions().every(w=>{const {aggregateType:h,
field:D}=w,d=p.has(D)&&p.get(D).name;return B.some(l=>{const {onStatisticField:x,statisticType:G}=l;return(p.has(x)&&p.get(x).name)===d&&G.toLowerCase().trim()===h})}))throw new a("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:q});return!0};c.validateWhere=function(p,q){if(!q)return!0;const B=t.get(q,p);if(!B)throw new a("feature-store:unsupported-query","invalid SQL expression",{where:q});if(!B.isStandardized)throw new a("feature-store:unsupported-query",
"where clause is not standard",{where:q});k(p,B.fieldNames,"where clause contains missing fields");return!0};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(c,a,I){let C=function(){function k(f,t){this._cache=new a(f);this._invalidCache=new a(t)}k.prototype.get=function(f,t){const r=`${t.uid}:${f}`,p=this._cache.get(r);if(p)return p;if(void 0!==this._invalidCache.get(r))return null;
try{const q=I.WhereClause.create(f,t);this._cache.put(r,q);return q}catch{return this._invalidCache.put(r,null),null}};return k}();c.WhereClauseCache=C;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(c){return function(){function a(C,k){this._storage=new c.MemCacheStorage;this._storage.maxSize=C;k&&this._storage.registerRemoveFunc("",k)}var I=a.prototype;I.put=function(C,k){this._storage.put(C,
k,1,1)};I.pop=function(C){return this._storage.pop(C)};I.get=function(C){return this._storage.get(C)};I.clear=function(){this._storage.clearAll()};I.destroy=function(){this._storage.destroy()};return a}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(c,a,I,C,k,f){function t(y,P){y+="";return y.length>=P?y:Array(P-y.length+1).join("0")+y}function r(y,P,K="0",U=
"0",Z="0",V="0",ka="",ca="0",qa="0"){return"+"===ka||"-"===ka?(y=`${t(parseInt(y,10),4)}-${t(parseInt(P,10),2)}-${t(parseInt(K,10),2)}`,P="",10>parseFloat(V)&&(P="0"),U=`${t(parseInt(U,10),2)}:${t(parseInt(Z,10),2)}:${P+parseFloat(V).toString()}`,ka=`${ka}${t(parseInt(ca,10),2)}:${t(parseInt(qa,10),2)}`,new Date(y+"T"+U+ka)):new Date(parseInt(y,10),parseInt(P,10)-1,parseInt(K,10),parseInt(U,10),parseInt(Z,10),parseFloat(V))}function p(y){let P=v.exec(y);if(null!==P){const [,K,U,Z,V,ka,ca]=P;return r(K,
U,Z,V,ka,ca)}P=E.exec(y);if(null!==P){const [,K,U,Z,V,ka,ca,qa,wa,xa]=P;return r(K,U,Z,V,ka,ca,qa,wa,xa)}P=z.exec(y);if(null!==P){const [,K,U,Z,V,ka,ca,qa,wa]=P;return r(K,U,Z,V,ka,"0",ca,qa,wa)}P=m.exec(y);if(null!==P){const [,K,U,Z,V,ka]=P;return r(K,U,Z,V,ka)}P=R.exec(y);if(null!==P){const [,K,U,Z]=P;return r(K,U,Z)}throw Error("SQL Invalid Timestamp");}function q(y){const P=R.exec(y);if(null===P)try{return p(y)}catch{throw Error("SQL Invalid Date");}const [,K,U,Z]=P;return new Date(parseInt(K,
10),parseInt(U,10)-1,parseInt(Z,10))}function B(y){return Array.isArray(y)?y:[y]}function N(y){return null!==y?!0!==y:null}function w(y,P){return null!=y&&null!=P?!0===y&&!0===P:!1===y||!1===P?!1:null}function h(y,P){return null!=y&&null!=P?!0===y||!0===P:!0===y||!0===P?!0:null}function D(y,P){if(null==y)return null;let K=!1;for(const U of P)if(null==U)K=null;else if(y===U){K=!0;break}return K}function d(y,P,K){if(null==y)return null;let U="",Z=H.Normal;for(let V=0;V<P.length;V++){const ka=P.charAt(V);
switch(Z){case H.Normal:ka===K?Z=H.Escaped:U="-[]/{}()*+?.\\^$|".includes(ka)?U+("\\"+ka):"%"===ka?U+".*":"_"===ka?U+".":U+ka;break;case H.Escaped:U="-[]/{}()*+?.\\^$|".includes(ka)?U+("\\"+ka):U+ka,Z=H.Normal}}return(new RegExp("^"+U+"$","m")).test(y)}function l(y){return y instanceof Date?y.valueOf():y}function x(y,P,K){if(null==P||null==K)return null;P=l(P);K=l(K);switch(y){case "\x3c\x3e":return P!==K;case "\x3d":return P===K;case "\x3e":return P>K;case "\x3c":return P<K;case "\x3e\x3d":return P>=
K;case "\x3c\x3d":return P<=K}}function G(y,P,K){if(P instanceof k.SqlInterval)if(K instanceof Date)switch(y){case "+":return new Date(P.valueInMilliseconds()+K.getTime());case "-":return P.valueInMilliseconds()-K.getTime();case "*":return P.valueInMilliseconds()*K.getTime();case "/":return P.valueInMilliseconds()/K.getTime()}else if(K instanceof k.SqlInterval)switch(y){case "+":return k.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()+K.valueInMilliseconds());case "-":return k.SqlInterval.createFromMilliseconds(P.valueInMilliseconds()-
K.valueInMilliseconds());case "*":return P.valueInMilliseconds()*K.valueInMilliseconds();case "/":return P.valueInMilliseconds()/K.valueInMilliseconds()}else P=P.valueInMilliseconds();else if(K instanceof k.SqlInterval)if(P instanceof Date)switch(y){case "+":return new Date(K.valueInMilliseconds()+P.getTime());case "-":return new Date(P.getTime()-K.valueInMilliseconds());case "*":return P.getTime()*K.valueInMilliseconds();case "/":return P.getTime()/K.valueInMilliseconds()}else K=K.valueInMilliseconds();
else if(P instanceof Date&&"number"===typeof K)switch(K*=864E5,P=P.getTime(),y){case "+":return new Date(P+K);case "-":return new Date(P-K);case "*":return new Date(P*K);case "/":return new Date(P/K)}else if(K instanceof Date&&"number"===typeof P)switch(P*=864E5,K=K.getTime(),y){case "+":return new Date(P+K);case "-":return new Date(P-K);case "*":return new Date(P*K);case "/":return new Date(P/K)}switch(y){case "+":return P+K;case "-":return P-K;case "*":return P*K;case "/":return P/K}}function J(y,
P,K,U){y=U.getAttribute(y,P);return null!=y&&1===K[P]?new Date(y):y}const R=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,v=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,E=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,L=new Set(["current_timestamp","current_date","current_time"]);let b=function(){function y(){}
y.makeBool=function(P){return!0===P};y.featureValue=function(P,K,U,Z){return J(P,K,U,Z)};y.equalsNull=function(P){return null===P};y.applyLike=function(P,K,U){return d(P,K,U)};y.ensureArray=function(P){return B(P)};y.applyIn=function(P,K){return D(P,K)};y.currentDate=function(){const P=new Date;P.setHours(0,0,0,0);return P};y.makeSqlInterval=function(P,K,U){return k.SqlInterval.createFromValueAndQualifer(P,K,U)};y.convertInterval=function(P){return P instanceof k.SqlInterval?P.valueInMilliseconds():
P};y.currentTimestamp=function(){return new Date};y.compare=function(P,K,U){return x(P,K,U)};y.calculate=function(P,K,U){return G(P,K,U)};y.makeComparable=function(P){return l(P)};y.evaluateFunction=function(P,K){return k.evaluateFunction(P,K)};y.lookup=function(P,K){P=K[P];return void 0===P?null:P};y.between=function(P,K){return null==P||null==K[0]||null==K[1]?null:P>=K[0]&&P<=K[1]};y.notbetween=function(P,K){return null==P||null==K[0]||null==K[1]?null:P<K[0]||P>K[1]};y.ternaryNot=function(P){return N(P)};
y.ternaryAnd=function(P,K){return w(P,K)};y.ternaryOr=function(P,K){return h(P,K)};return y}(),n=function(){function y(K,U){this.fieldsIndex=U;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=f.WhereGrammar.parse(K);const {isStandardized:Z,isAggregate:V,referencedFieldNames:ka}=this._extractExpressionInfo(U);this._referencedFieldNames=ka;this.isStandardized=Z;this.isAggregate=V}y.create=function(K,U){return new y(K,U)};var P=y.prototype;P.testSet=function(K,U=A){const Z=
{};for(const V of this.fieldNames)Z[V]=K.map(ka=>U.getAttribute(ka,V));return!!this._evaluateNode(this.parseTree,{attributes:Z},A)};P.calculateValue=function(K,U=A){K=this._evaluateNode(this.parseTree,K,U);return K instanceof k.SqlInterval?K.valueInMilliseconds()/864E5:K};P.calculateValueCompiled=function(K,U=A){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(K,this.parameters,U,this._datefields);if(I("esri-csp-restrictions"))return this.calculateValue(K,U);this._compileMe();
return this.parseTree._compiledVersion(K,this.parameters,U,this._datefields)};P.testFeature=function(K,U=A){return!!this._evaluateNode(this.parseTree,K,U)};P.testFeatureCompiled=function(K,U=A){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(K,this.parameters,U,this._datefields);if(I("esri-csp-restrictions"))return this.testFeature(K,U);this._compileMe();return!!this.parseTree._compiledVersion(K,this.parameters,U,this._datefields)};P.getFunctions=function(){const K=
new Set;this._visitAll(this.parseTree,U=>{"function"===U.type&&K.add(U.name.toLowerCase())});return Array.from(K)};P.getExpressions=function(){const K=new Map;this._visitAll(this.parseTree,U=>{if("function"===U.type){const Z=U.name.toLowerCase();U=U.args.value[0];if("column-reference"===U.type){U=U.column;const V=`${Z}-${U}`;K.has(V)||K.set(V,{aggregateType:Z,field:U})}}});return[...K.values()]};P.getVariables=function(){const K=new Set;this._visitAll(this.parseTree,U=>{"parameter"===U.type&&K.add(U.value.toLowerCase())});
return Array.from(K)};P._compileMe=function(){const K="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",K)).bind(b)};P._extractExpressionInfo=function(K){const U=[],Z=new Set;let V=!0,ka=!0;this._visitAll(this.parseTree,ca=>{switch(ca.type){case "column-reference":const qa=K?.get(ca.column);let wa,xa;qa?wa=xa=qa.name??"":(xa=ca.column,wa=xa.toLowerCase());qa&&qa.name&&("date"===
qa.type||"esriFieldTypeDate"===qa.type)&&(this._datefields[qa.name]=1);Z.has(wa)||(Z.add(wa),U.push(xa));ca.column=xa;break;case "function":const {name:Ba,args:Ca}=ca;ca=Ca.value.length;V&&(V=k.isStandardized(Ba,ca));ka&&(ka=C.isAggregate(Ba,ca))}});return{referencedFieldNames:Array.from(U),isStandardized:V,isAggregate:ka}};P._visitAll=function(K,U){if(null!=K)switch(U(K),K.type){case "when-clause":this._visitAll(K.operand,U);this._visitAll(K.value,U);break;case "case-expression":for(const Z of K.clauses)this._visitAll(Z,
U);"simple"===K.format&&this._visitAll(K.operand,U);null!==K.else&&this._visitAll(K.else,U);break;case "expression-list":for(const Z of K.value)this._visitAll(Z,U);break;case "unary-expression":this._visitAll(K.expr,U);break;case "binary-expression":this._visitAll(K.left,U);this._visitAll(K.right,U);break;case "function":this._visitAll(K.args,U)}};P.evaluateNodeToJavaScript=function(K){switch(K.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(K.value)+", "+JSON.stringify(K.qualifier)+
","+JSON.stringify(K.op)+")";case "case-expression":var U="";if("simple"===K.format){var Z="this.makeComparable("+this.evaluateNodeToJavaScript(K.operand)+")";U="( ";for(let V=0;V<K.clauses.length;V++)U+=" ("+Z+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(K.clauses[V].operand)+")) ? ("+this.evaluateNodeToJavaScript(K.clauses[V].value)+") : "}else for(U="( ",Z=0;Z<K.clauses.length;Z++)U+=" this.makeBool("+this.evaluateNodeToJavaScript(K.clauses[Z].operand)+")\x3d\x3d\x3dtrue ? ("+
this.evaluateNodeToJavaScript(K.clauses[Z].value)+") : ";U=null!==K.else?U+this.evaluateNodeToJavaScript(K.else):U+"null";return U+" )";case "parameter":return"this.lookup("+JSON.stringify(K.value.toLowerCase())+",lookups)";case "expression-list":U="[";for(Z of K.value)"["!==U&&(U+=","),U+=this.evaluateNodeToJavaScript(Z);return U+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(K.expr)+")";case "binary-expression":switch(K.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+" )";case "IS":if("null"!==K.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(K.left)+")";case "ISNOT":if("null"!==K.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(K.left)+")))";case "IN":return"this.applyIn("+
this.evaluateNodeToJavaScript(K.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(K.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(K.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(K.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+
")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+","+JSON.stringify(K.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+","+JSON.stringify(K.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(K.operator)+","+this.evaluateNodeToJavaScript(K.left)+","+
this.evaluateNodeToJavaScript(K.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(K.operator)+","+this.evaluateNodeToJavaScript(K.left)+","+this.evaluateNodeToJavaScript(K.right)+")"}throw Error("Not Supported Operator "+K.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(K.value);case "date":return"(new Date("+q(K.value).getTime().toString()+"))";case "timestamp":return"(new Date("+p(K.value).getTime().toString()+"))";case "current-time":return"date"===
K.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(K.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(K.name)+","+this.evaluateNodeToJavaScript(K.args)+")"}throw Error("Unsupported sql syntax "+K.type);};P._evaluateNode=function(K,U,Z){switch(K.type){case "interval":return U=this._evaluateNode(K.value,U,Z),k.SqlInterval.createFromValueAndQualifer(U,K.qualifier,K.op);case "case-expression":if("simple"===
K.format){var V=l(this._evaluateNode(K.operand,U,Z));for(var ka=0;ka<K.clauses.length;ka++)if(V===l(this._evaluateNode(K.clauses[ka].operand,U,Z)))return this._evaluateNode(K.clauses[ka].value,U,Z)}else for(V=0;V<K.clauses.length;V++)if(!0===this._evaluateNode(K.clauses[V].operand,U,Z))return this._evaluateNode(K.clauses[V].value,U,Z);return null!==K.else?this._evaluateNode(K.else,U,Z):null;case "parameter":return this.parameters[K.value.toLowerCase()];case "expression-list":V=[];for(ka of K.value)V.push(this._evaluateNode(ka,
U,Z));return V;case "unary-expression":return N(this._evaluateNode(K.expr,U,Z));case "binary-expression":switch(K.operator){case "AND":return w(this._evaluateNode(K.left,U,Z),this._evaluateNode(K.right,U,Z));case "OR":return h(this._evaluateNode(K.left,U,Z),this._evaluateNode(K.right,U,Z));case "IS":if("null"!==K.right.type)throw Error("Unsupported RHS for IS");return null===this._evaluateNode(K.left,U,Z);case "ISNOT":if("null"!==K.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(K.left,
U,Z);case "IN":return V=B(this._evaluateNode(K.right,U,Z)),D(this._evaluateNode(K.left,U,Z),V);case "NOT IN":return V=B(this._evaluateNode(K.right,U,Z)),N(D(this._evaluateNode(K.left,U,Z),V));case "BETWEEN":return V=this._evaluateNode(K.left,U,Z),K=this._evaluateNode(K.right,U,Z),null==V||null==K[0]||null==K[1]?null:V>=l(K[0])&&V<=l(K[1]);case "NOTBETWEEN":return V=this._evaluateNode(K.left,U,Z),K=this._evaluateNode(K.right,U,Z),null==V||null==K[0]||null==K[1]?null:V<l(K[0])||V>l(K[1]);case "LIKE":return d(this._evaluateNode(K.left,
U,Z),this._evaluateNode(K.right,U,Z),K.escape);case "NOT LIKE":return N(d(this._evaluateNode(K.left,U,Z),this._evaluateNode(K.right,U,Z),K.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return x(K.operator,this._evaluateNode(K.left,U,Z),this._evaluateNode(K.right,U,Z));case "-":case "+":case "*":case "/":return G(K.operator,this._evaluateNode(K.left,U,Z),this._evaluateNode(K.right,U,Z))}case "null":case "boolean":case "string":case "number":return K.value;
case "date":return q(K.value);case "timestamp":return p(K.value);case "current-time":return U=new Date,"date"===K.mode&&U.setHours(0,0,0,0),U;case "column-reference":return J(U,K.column,this._datefields,Z);case "function":return U=this._evaluateNode(K.args,U,Z),this.isAggregate?C.aggregateFunction(K.name,U):k.evaluateFunction(K.name,U)}throw Error("Unsupported sql syntax "+K.type);};a._createClass(y,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=
this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,K=>{"current-time"===K.type?this._hasDateFunctions=!0:"function"===K.type&&(this._hasDateFunctions=this._hasDateFunctions||L.has(K.name.toLowerCase()))});return this._hasDateFunctions}}]);return y}();var H;(function(y){y[y.Normal=0]="Normal";y[y.Escaped=1]="Escaped"})(H||(H={}));const A={getAttribute(y,P){return(y&&"object"===typeof y.attributes?y.attributes:y)[P]}};c.WhereClause=n;c.defaultAttributeAdapter=
A;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(c){function a(k){let f=0;for(let t=0;t<k.length;t++)f+=k[t];return f/k.length}function I(k){const f=a(k),t=k.length;let r=0;for(const p of k)r+=(p-f)**2;return 1<t?r/(t-1):0}const C={min:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.min.apply(Math,k[0])},max:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.max.apply(Math,
k[0])},avg:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:a(k[0])},sum:{minParams:1,maxParams:1,evaluate:k=>{if(null==k[0])k=null;else{k=k[0];let f=0;for(let t=0;t<k.length;t++)f+=k[t];k=f}return k}},stddev:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sqrt(I(k[0]))},count:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].length},var:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:I(k[0])}};c.aggregateFunction=function(k,f){const t=C[k.toLowerCase()];if(null==t)throw Error("Function Not Recognised");
if(f.length<t.minParams||f.length>t.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return t.evaluate(f)};c.isAggregate=function(k,f){k=C[k.toLowerCase()];return null!=k&&f>=k.minParams&&f<=k.maxParams};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(c,a){let I=function(){function k(){this.op="+";this.minute=this.year=this.month=this.hour=
this.second=this.day=0}k._fixDefaults=function(f){if(null!==f.precision||null!==f.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k.createFromMilliseconds=function(f){const t=new k;t.second=f/1E3;return t};k.createFromValueAndQualifer=function(f,t,r){let p=null;const q=new k;q.op="-"===r?"-":"+";if("interval-period"===t.type){k._fixDefaults(t);r=RegExp("^[0-9]{1,}$");if("year"===t.period||"month"===t.period)throw Error("Year-Month Intervals not supported");if(r.test(f))q[t.period]=
parseFloat(f);else throw Error("Illegal Interval");}else{k._fixDefaults(t.start);k._fixDefaults(t.end);if("year"===t.start.period||"month"===t.start.period)throw Error("Year-Month Intervals not supported");if("year"===t.end.period||"month"===t.end.period)throw Error("Year-Month Intervals not supported");switch(t.start.period){case "day":switch(t.end.period){case "hour":p=RegExp("^[0-9]{1,} [0-9]{1,}$");if(p.test(f))q[t.start.period]=parseFloat(f.split(" ")[0]),q[t.end.period]=parseFloat(f.split(" ")[1]);
else throw Error("Illegal Interval");break;case "minute":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(p.test(f))q[t.start.period]=parseFloat(f.split(" ")[0]),f=f.split(" ")[1].split(":"),q.hour=parseFloat(f[0]),q.minute=parseFloat(f[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(f))q[t.start.period]=parseFloat(f.split(" ")[0]),f=f.split(" ")[1].split(":"),q.hour=parseFloat(f[0]),q.minute=parseFloat(f[1]),
q.second=parseFloat(f[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(t.end.period){case "minute":p=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(p.test(f))q.hour=parseFloat(f.split(":")[0]),q.minute=parseFloat(f.split(":")[1]);else throw Error("Illegal Interval");break;case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(f))f=f.split(":"),q.hour=parseFloat(f[0]),q.minute=parseFloat(f[1]),q.second=parseFloat(f[2]);
else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(t.end.period){case "second":p=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(p.test(f))f=f.split(":"),q.minute=parseFloat(f[0]),q.second=parseFloat(f[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return q};k.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+
6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const C={extract:{minParams:2,maxParams:2,evaluate:([k,f])=>{if(null==f)return null;if(f instanceof Date)switch(k.toUpperCase()){case "SECOND":return f.getSeconds();case "MINUTE":return f.getMinutes();case "HOUR":return f.getHours();case "DAY":return f.getDate();case "MONTH":return f.getMonth()+1;case "YEAR":return f.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,
maxParams:3,evaluate:k=>{if(2===k.length){const [f,t]=k;return null==f||null==t?null:f.toString().substring(t-1)}if(3===k.length){const [f,t,r]=k;return null==f||null==t||null==r?null:0>=r?"":f.toString().substring(t-1,t+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,f])=>null==k||null==f?null:f.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var f=3===k.length,t=f?k[1]:" ";f=f?k[2]:k[1];if(null==t||null==f)return null;t=`(${a.escapeRegExpString(t)})`;switch(k[0]){case "BOTH":return f.replace(new RegExp(`^${t}*|${t}*$`,
"g"),"");case "LEADING":return f.replace(new RegExp(`^${t}*`,"g"),"");case "TRAILING":return f.replace(new RegExp(`${t}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},
sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const f=k[0];k=2===k.length?10**k[1]:1;return null==f?null:Math.round(f*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},
char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let f="";for(let t=0;t<k.length;t++){if(null==k[t])return null;f+=k[t].toString()}return f}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()}};c.SqlInterval=I;c.evaluateFunction=function(k,f){const t=C[k.toLowerCase()];
if(null==t)throw Error("Function Not Recognised");if(f.length<t.minParams||f.length>t.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return t.evaluate(f)};c.isStandardized=function(k,f){k=C[k.toLowerCase()];return null!=k&&f>=k.minParams&&f<=k.maxParams};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,a){var I={exports:{}};
(function(k){(function(f,t){k.exports&&(k.exports=t())})(a.commonjsGlobal,function(){function f(r,p,q,B){r=Error.call(this,r);Object.setPrototypeOf&&Object.setPrototypeOf(r,f.prototype);r.expected=p;r.found=q;r.location=B;r.name="SyntaxError";return r}function t(r,p,q){q=q||" ";if(r.length>p)return r;p-=r.length;q+=q.repeat(p);return r+q.slice(0,p)}(function(r,p){function q(){this.constructor=r}q.prototype=p.prototype;r.prototype=new q})(f,Error);f.prototype.format=function(r){var p="Error: "+this.message;
if(this.location){var q=null,B;for(B=0;B<r.length;B++)if(r[B].source===this.location.source){q=r[B].text.split(/\r\n|\n|\r/g);break}r=this.location.start;B=this.location.source+":"+r.line+":"+r.column;if(q){var N=this.location.end,w=t("",r.line.toString().length," ");q=q[r.line-1];N=(r.line===N.line?N.column:q.length+1)-r.column||1;p+="\n --\x3e "+B+"\n"+w+" |\n"+r.line+" | "+q+"\n"+w+" | "+t("",r.column-1," ")+t("",N,"^")}else p+="\n at "+B}return p};f.buildMessage=function(r,p){function q(D){return D.charCodeAt(0).toString(16).toUpperCase()}
function B(D){return D.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+q(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+q(d)})}function N(D){return D.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+
q(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+q(d)})}function w(D){return h[D.type](D)}var h={literal:function(D){return'"'+B(D.text)+'"'},class:function(D){var d=D.parts.map(function(l){return Array.isArray(l)?N(l[0])+"-"+N(l[1]):N(l)});return"["+(D.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(D){return D.description}};return"Expected "+function(D){D=D.map(w);var d,l;D.sort();if(0<D.length){for(l=d=1;d<
D.length;d++)D[d-1]!==D[d]&&(D[l]=D[d],l++);D.length=l}switch(D.length){case 1:return D[0];case 2:return D[0]+" or "+D[1];default:return D.slice(0,-1).join(", ")+", or "+D[D.length-1]}}(r)+" but "+(p?'"'+B(p)+'"':"end of input")+" found."};return{SyntaxError:f,parse:function(r,p){function q(M,Q){return{type:"literal",text:M,ignoreCase:Q}}function B(M,Q,aa){return{type:"class",parts:M,inverted:Q,ignoreCase:aa}}function N(M){var Q=dc[M],aa;if(!Q){for(aa=M-1;!dc[aa];)aa--;Q=dc[aa];for(Q={line:Q.line,
column:Q.column};aa<M;)10===r.charCodeAt(aa)?(Q.line++,Q.column=1):Q.column++,aa++;dc[M]=Q}return Q}function w(M,Q){var aa=N(M),ua=N(Q);return{source:cb,start:{offset:M,line:aa.line,column:aa.column},end:{offset:Q,line:ua.line,column:ua.column}}}function h(M){u<sb||(u>sb&&(sb=u,zc=[]),zc.push(M))}function D(){var M=u;ta();var Q=l();Q!==e?(ta(),M=Q):(u=M,M=e);return M}function d(){var M=u;var Q=l();if(Q!==e){M=[];var aa=u;var ua=ta();var Ea=Ha();if(Ea!==e){var Oa=ta();var Pa=l();Pa!==e?aa=ua=[ua,Ea,
Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;for(;aa!==e;)M.push(aa),aa=u,ua=ta(),Ea=Ha(),Ea!==e?(Oa=ta(),Pa=l(),Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);aa={type:"expression-list"};Q=[Q];for(ua=0;ua<M.length;ua++)Q.push(M[ua][3]);aa.value=Q;M=aa}else u=M,M=e;return M}function l(){var M=u;var Q=x();if(Q!==e){M=[];var aa=u;var ua=ta();var Ea=O();if(Ea!==e){var Oa=ta();var Pa=x();Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;for(;aa!==e;)M.push(aa),aa=u,ua=ta(),Ea=O(),Ea!==e?(Oa=ta(),Pa=x(),
Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);M=$a(Q,M)}else u=M,M=e;return M}function x(){var M=u;var Q=G();if(Q!==e){M=[];var aa=u;var ua=ta();var Ea=oa();if(Ea!==e){var Oa=ta();var Pa=G();Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;for(;aa!==e;)M.push(aa),aa=u,ua=ta(),Ea=oa(),Ea!==e?(Oa=ta(),Pa=G(),Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);M=$a(Q,M)}else u=M,M=e;return M}function G(){var M=u;var Q=ia();if(Q===e){Q=u;if(33===r.charCodeAt(u)){var aa=nb;u++}else aa=e,0===
va&&h(qd);if(aa!==e){var ua=u;va++;if(61===r.charCodeAt(u)){var Ea=Ya;u++}else Ea=e,0===va&&h(Qc);va--;Ea===e?ua=void 0:(u=ua,ua=e);ua!==e?Q=aa=[aa,ua]:(u=Q,Q=e)}else u=Q,Q=e}Q!==e?(aa=ta(),ua=G(),ua!==e?M={type:"unary-expression",operator:"NOT",expr:ua}:(u=M,M=e)):(u=M,M=e);if(M===e){Q=u;M=E();if(M!==e){ta();Q=[];aa=u;ua=ta();Ea=J();if(Ea!==e){var Oa=ta();var Pa=E();Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;if(aa!==e)for(;aa!==e;)Q.push(aa),aa=u,ua=ta(),Ea=J(),Ea!==e?(Oa=ta(),Pa=E(),
Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);else Q=e;Q!==e&&(Q={type:"arithmetic",tail:Q});Q===e&&(Q=u,aa=v(),aa!==e?(ta(),ua=Fa(),ua!==e?(ta(),ua=d(),ua!==e?(ta(),Ea=Ka(),Ea!==e?Q={op:aa,right:ua}:(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e),Q===e&&(Q=u,aa=v(),aa!==e?(ta(),ua=Fa(),ua!==e?(ta(),ua=Ka(),ua!==e?Q={op:aa,right:{type:"expression-list",value:[]}}:(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e),Q===e&&(Q=u,aa=v(),aa!==e?(ta(),ua=P(),ua!==e?Q={op:aa,right:ua}:(u=Q,Q=e)):(u=Q,Q=e))),Q===e&&(Q=u,Ea=
ia(),Ea!==e?(ta(),aa=S(),aa!==e?(ta(),ua=E(),ua!==e?(ta(),Oa=oa(),Oa!==e?(ta(),Ea=E(),Ea!==e?Q={op:"NOT"+aa,right:{type:"expression-list",value:[ua,Ea]}}:(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e),Q===e&&(Q=u,Ea=S(),Ea!==e?(ta(),aa=E(),aa!==e?(ta(),ua=oa(),ua!==e?(ta(),Oa=E(),Oa!==e?Q={op:Ea,right:{type:"expression-list",value:[aa,Oa]}}:(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)),Q===e&&(Q=u,aa=F(),aa!==e?(ta(),ua=ia(),ua!==e?(ta(),ua=E(),ua!==e?Q={op:aa+"NOT",right:ua}:(u=Q,Q=e)):(u=Q,
Q=e)):(u=Q,Q=e),Q===e&&(Q=u,aa=F(),aa!==e?(ta(),ua=E(),ua!==e?Q={op:aa,right:ua}:(u=Q,Q=e)):(u=Q,Q=e)),Q===e&&(Q=u,aa=R(),aa!==e?(ta(),ua=ca(),ua!==e?(ta(),Ea=u,r.substr(u,6).toLowerCase()===pa?(Oa=r.substr(u,6),u+=6):(Oa=e,0===va&&h(rd)),Oa!==e?(Oa=u,va++,Pa=A(),va--,Pa===e?Oa=void 0:(u=Oa,Oa=e),Oa!==e?Ea="ESCAPE":(u=Ea,Ea=e)):(u=Ea,Ea=e),Ea!==e?(ta(),Ea=qa(),Ea!==e?Q={op:aa,right:ua,escape:Ea.value}:(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e)):(u=Q,Q=e),Q===e&&(Q=u,aa=R(),aa!==e?(ta(),ua=ca(),ua!==e?Q={op:aa,
right:ua,escape:""}:(u=Q,Q=e)):(u=Q,Q=e))))));Q===e&&(Q=null);""==Q||void 0==Q||null==Q?Q=M:(aa=null,Q=aa="arithmetic"==Q.type?$a(M,Q.tail):ab(Q.op,M,Q.right,Q.escape))}else u=Q,Q=e;M=Q}return M}function J(){if(r.substr(u,2)===Eb){var M=Eb;u+=2}else M=e,0===va&&h(sd);M===e&&(62===r.charCodeAt(u)?(M=ec,u++):(M=e,0===va&&h(td)),M===e&&(r.substr(u,2)===Fb?(M=Fb,u+=2):(M=e,0===va&&h(ud)),M===e&&(r.substr(u,2)===la?(M=la,u+=2):(M=e,0===va&&h(vd)),M===e&&(60===r.charCodeAt(u)?(M=fc,u++):(M=e,0===va&&h(wd)),
M===e&&(61===r.charCodeAt(u)?(M=Ya,u++):(M=e,0===va&&h(Qc)),M===e&&(r.substr(u,2)===Cb?(M=Cb,u+=2):(M=e,0===va&&h(xd))))))));return M}function R(){var M=M=u;var Q=ia();if(Q!==e){var aa=ta();var ua=fa();ua!==e?M=Q=[Q,aa,ua]:(u=M,M=e)}else u=M,M=e;M!==e&&(M=M[0]+" "+M[2]);M===e&&(M=fa());return M}function v(){var M=M=u;var Q=ia();if(Q!==e){var aa=ta();var ua=g();ua!==e?M=Q=[Q,aa,ua]:(u=M,M=e)}else u=M,M=e;M!==e&&(M=M[0]+" "+M[2]);M===e&&(M=g());return M}function E(){var M=u;var Q=m();if(Q!==e){M=[];
var aa=u;var ua=ta();var Ea=z();if(Ea!==e){var Oa=ta();var Pa=m();Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;for(;aa!==e;)M.push(aa),aa=u,ua=ta(),Ea=z(),Ea!==e?(Oa=ta(),Pa=m(),Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);M=$a(Q,M)}else u=M,M=e;return M}function z(){if(43===r.charCodeAt(u)){var M=hb;u++}else M=e,0===va&&h(Ac);M===e&&(45===r.charCodeAt(u)?(M=tb,u++):(M=e,0===va&&h(Bc)));return M}function m(){var M=u;var Q=b();if(Q!==e){M=[];var aa=u;var ua=ta();var Ea=L();if(Ea!==
e){var Oa=ta();var Pa=b();Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)}else u=aa,aa=e;for(;aa!==e;)M.push(aa),aa=u,ua=ta(),Ea=L(),Ea!==e?(Oa=ta(),Pa=b(),Pa!==e?aa=ua=[ua,Ea,Oa,Pa]:(u=aa,aa=e)):(u=aa,aa=e);M=$a(Q,M)}else u=M,M=e;return M}function L(){if(42===r.charCodeAt(u)){var M=gc;u++}else M=e,0===va&&h(yd);M===e&&(47===r.charCodeAt(u)?(M=Tb,u++):(M=e,0===va&&h(zd)));return M}function b(){var M=qa();if(M===e){var Q=u;var aa=u;var ua=Ca();if(ua!==e){var Ea=Ja();if(Ea!==e){var Oa=La();Oa!==e?aa=parseFloat(ua+
Ea+Oa):(u=aa,aa=e)}else u=aa,aa=e}else u=aa,aa=e;aa===e&&(aa=u,ua=Ca(),ua!==e?(Ea=Ja(),Ea!==e?aa=parseFloat(ua+Ea):(u=aa,aa=e)):(u=aa,aa=e),aa===e&&(aa=u,ua=Ca(),ua!==e?(Ea=La(),Ea!==e?aa=parseFloat(ua+Ea):(u=aa,aa=e)):(u=aa,aa=e),aa===e&&(aa=u,ua=Ca(),ua!==e&&(ua=parseFloat(ua)),aa=ua)));var Pa=aa;if(Pa!==e){var hc=u;va++;var Ad=H();va--;Ad===e?hc=void 0:(u=hc,hc=e);hc!==e?Q={type:"number",value:Pa}:(u=Q,Q=e)}else u=Q,Q=e;M=Q;if(M===e){var Ub=u;var Hb=u;if(r.substr(u,4).toLowerCase()===Qa){var ic=
r.substr(u,4);u+=4}else ic=e,0===va&&h(Bd);if(ic!==e){var Vb=u;va++;var Cd=A();va--;Cd===e?Vb=void 0:(u=Vb,Vb=e);Vb!==e?Hb=ic=[ic,Vb]:(u=Hb,Hb=e)}else u=Hb,Hb=e;var Gb=Hb;Gb!==e&&(Gb={type:"boolean",value:!0});Ub=Gb;if(Ub===e){Ub=u;var Ib=u;if(r.substr(u,5).toLowerCase()===Jb){var jc=r.substr(u,5);u+=5}else jc=e,0===va&&h(Dd);if(jc!==e){var Wb=u;va++;var Ed=A();va--;Ed===e?Wb=void 0:(u=Wb,Wb=e);Wb!==e?Ib=jc=[jc,Wb]:(u=Ib,Ib=e)}else u=Ib,Ib=e;Gb=Ib;Gb!==e&&(Gb={type:"boolean",value:!1});Ub=Gb}M=Ub;
if(M===e){var Kb=u;if(r.substr(u,4).toLowerCase()===ub){var kc=r.substr(u,4);u+=4}else kc=e,0===va&&h(Fd);if(kc!==e){var Xb=u;va++;var Gd=A();va--;Gd===e?Xb=void 0:(u=Xb,Xb=e);Xb!==e?Kb=kc=[kc,Xb]:(u=Kb,Kb=e)}else u=Kb,Kb=e;var Cc=Kb;Cc!==e&&(Cc={type:"null",value:null});M=Cc;if(M===e){var Lb=u;var Mb=u;if(r.substr(u,4).toLowerCase()===Hd){var Rc=r.substr(u,4);u+=4}else Rc=e,0===va&&h(Id);if(Rc!==e){var lc=u;va++;var Jd=A();va--;Jd===e?lc=void 0:(u=lc,lc=e);lc!==e?Mb="DATE":(u=Mb,Mb=e)}else u=Mb,
Mb=e;if(Mb!==e){ta();var Sc=ca();Sc!==e?Lb={type:"date",value:Sc.value}:(u=Lb,Lb=e)}else u=Lb,Lb=e;M=Lb;if(M===e){var Nb=u;var Ob=u;if(r.substr(u,9).toLowerCase()===Kd){var Tc=r.substr(u,9);u+=9}else Tc=e,0===va&&h(Ld);if(Tc!==e){var mc=u;va++;var Md=A();va--;Md===e?mc=void 0:(u=mc,mc=e);mc!==e?Ob="TIMESTAMP":(u=Ob,Ob=e)}else u=Ob,Ob=e;if(Ob!==e){ta();var Uc=ca();Uc!==e?Nb={type:"timestamp",value:Uc.value}:(u=Nb,Nb=e)}else u=Nb,Nb=e;M=Nb;if(M===e){var db=u;var Dc=ha();if(Dc!==e){ta();if(45===r.charCodeAt(u)){var xb=
tb;u++}else xb=e,0===va&&h(Bc);xb===e&&(43===r.charCodeAt(u)?(xb=hb,u++):(xb=e,0===va&&h(Ac)));if(xb!==e){ta();var Yb=ca();if(Yb!==e){ta();var Vc=U();Vc!==e?db={type:"interval",value:Yb,qualifier:Vc,op:xb}:(u=db,db=e)}else u=db,db=e}else u=db,db=e}else u=db,db=e;db===e&&(db=u,Dc=ha(),Dc!==e?(ta(),xb=ca(),xb!==e?(ta(),Yb=U(),Yb!==e?db={type:"interval",value:xb,qualifier:Yb,op:""}:(u=db,db=e)):(u=db,db=e)):(u=db,db=e));M=db}}}}}}var Va=M;if(Va===e){var jb=u;var Pb=u;if(r.substr(u,7).toLowerCase()===
eb){var Wc=r.substr(u,7);u+=7}else Wc=e,0===va&&h(Nd);if(Wc!==e){var nc=u;va++;var Od=A();va--;Od===e?nc=void 0:(u=nc,nc=e);nc!==e?Pb="EXTRACT":(u=Pb,Pb=e)}else u=Pb,Pb=e;if(Pb!==e){ta();var Pd=Fa();if(Pd!==e){ta();var qb=ja();qb===e&&(qb=na(),qb===e&&(qb=ra(),qb===e&&(qb=sa(),qb===e&&(qb=ba(),qb===e&&(qb=ea())))));var Xc=qb;if(Xc!==e){ta();var Qd=W();if(Qd!==e){ta();var Yc=l();if(Yc!==e){ta();var Rd=Ka();Rd!==e?jb={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",
value:Xc},Yc]}}:(u=jb,jb=e)}else u=jb,jb=e}else u=jb,jb=e}else u=jb,jb=e}else u=jb,jb=e}else u=jb,jb=e;Va=jb;if(Va===e){var kb=u;var Qb=u;if(r.substr(u,9).toLowerCase()===Ta){var Zc=r.substr(u,9);u+=9}else Zc=e,0===va&&h(Sd);if(Zc!==e){var oc=u;va++;var Td=A();va--;Td===e?oc=void 0:(u=oc,oc=e);oc!==e?Qb="SUBSTRING":(u=Qb,Qb=e)}else u=Qb,Qb=e;if(Qb!==e){ta();var Ud=Fa();if(Ud!==e){ta();var Ec=l();if(Ec!==e){ta();var Vd=W();if(Vd!==e){ta();var Fc=l();if(Fc!==e){ta();var yb=u;var Rb=u;if(r.substr(u,
3).toLowerCase()===Ua){var $c=r.substr(u,3);u+=3}else $c=e,0===va&&h(Wd);if($c!==e){var pc=u;va++;var Xd=A();va--;Xd===e?pc=void 0:(u=pc,pc=e);pc!==e?Rb="FOR":(u=Rb,Rb=e)}else u=Rb,Rb=e;var Zb=Rb;if(Zb!==e){var Yd=ta();var ad=l();if(ad!==e){var Zd=ta();yb=Zb=[Zb,Yd,ad,Zd]}else u=yb,yb=e}else u=yb,yb=e;yb===e&&(yb=null);Zb=Ka();Zb!==e?kb={type:"function",name:"substring",args:{type:"expression-list",value:yb?[Ec,Fc,yb[2]]:[Ec,Fc]}}:(u=kb,kb=e)}else u=kb,kb=e}else u=kb,kb=e}else u=kb,kb=e}else u=kb,
kb=e}else u=kb,kb=e;Va=kb;if(Va===e){var Za=u;var Gc=Y();if(Gc!==e){ta();var Hc=Fa();if(Hc!==e){ta();var zb=K();zb===e&&(zb=null);ta();var $b=l();if($b!==e){ta();var Ic=W();if(Ic!==e){ta();var bd=l();if(bd!==e){ta();var $d=Ka();$d!==e?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},$b,bd]}}:(u=Za,Za=e)}else u=Za,Za=e}else u=Za,Za=e}else u=Za,Za=e}else u=Za,Za=e}else u=Za,Za=e;Za===e&&(Za=u,Gc=Y(),Gc!==e?(ta(),Hc=Fa(),Hc!==e?(ta(),zb=K(),
zb===e&&(zb=null),ta(),$b=l(),$b!==e?(ta(),Ic=Ka(),Ic!==e?Za={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==zb?"BOTH":zb},$b]}}:(u=Za,Za=e)):(u=Za,Za=e)):(u=Za,Za=e)):(u=Za,Za=e));Va=Za;if(Va===e){var lb=u;var Sb=u;if(r.substr(u,8).toLowerCase()===ae){var cd=r.substr(u,8);u+=8}else cd=e,0===va&&h(be);if(cd!==e){var qc=u;va++;var ce=A();va--;ce===e?qc=void 0:(u=qc,qc=e);qc!==e?Sb="POSITION":(u=Sb,Sb=e)}else u=Sb,Sb=e;if(Sb!==e){ta();var de=Fa();if(de!==
e){ta();var dd=l();if(dd!==e){ta();var ee=g();if(ee!==e){ta();var ed=l();if(ed!==e){ta();var fe=Ka();fe!==e?lb={type:"function",name:"position",args:{type:"expression-list",value:[dd,ed]}}:(u=lb,lb=e)}else u=lb,lb=e}else u=lb,lb=e}else u=lb,lb=e}else u=lb,lb=e}else u=lb,lb=e;Va=lb;if(Va===e){var Db=u;var rc;var rb=u;rb=rc=n();if(rb===e)if(rb=u,96===r.charCodeAt(u)?(rc=fd,u++):(rc=e,0===va&&h(gd)),rc!==e){var sc=[];if(hd.test(r.charAt(u))){var Ab=r.charAt(u);u++}else Ab=e,0===va&&h(id);if(Ab!==e)for(;Ab!==
e;)sc.push(Ab),hd.test(r.charAt(u))?(Ab=r.charAt(u),u++):(Ab=e,0===va&&h(id));else sc=e;sc!==e?(96===r.charCodeAt(u)?(Ab=fd,u++):(Ab=e,0===va&&h(gd)),Ab!==e?rb=sc.join(""):(u=rb,rb=e)):(u=rb,rb=e)}else u=rb,rb=e;var jd=rb;if(jd!==e){ta();var ge=Fa();if(ge!==e){ta();var tc=d();tc===e&&(tc=null);ta();var he=Ka();he!==e?Db={type:"function",name:jd,args:tc?tc:{type:"expression-list",value:[]}}:(u=Db,Db=e)}else u=Db,Db=e}else u=Db,Db=e;Va=Db;if(Va===e){var vb;var fb=u;var Jc=ma();if(Jc!==e){ta();var ac=
l();if(ac!==e){ta();var bc=[];for(vb=xa();vb!==e;)bc.push(vb),vb=xa();vb=ta();var uc=ya();uc!==e?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:null}:(u=fb,fb=e)}else u=fb,fb=e}else u=fb,fb=e;if(fb===e)if(fb=u,Jc=ma(),Jc!==e)if(ta(),ac=l(),ac!==e){ta();bc=[];for(vb=xa();vb!==e;)bc.push(vb),vb=xa();vb=ta();uc=Ba();if(uc!==e){ta();var ie=ya();ie!==e?fb={type:"case-expression",format:"simple",operand:ac,clauses:bc,else:uc.value}:(u=fb,fb=e)}else u=fb,fb=e}else u=fb,fb=e;else u=
fb,fb=e;var Kc=fb;if(Kc===e){var wb;var ib=u;var Lc=ma();if(Lc!==e){ta();var cc=[];for(wb=wa();wb!==e;)cc.push(wb),wb=wa();wb=ta();var vc=ya();vc!==e?ib={type:"case-expression",format:"searched",clauses:cc,else:null}:(u=ib,ib=e)}else u=ib,ib=e;if(ib===e)if(ib=u,Lc=ma(),Lc!==e){ta();cc=[];for(wb=wa();wb!==e;)cc.push(wb),wb=wa();wb=ta();vc=Ba();if(vc!==e){ta();var je=ya();je!==e?ib={type:"case-expression",format:"searched",clauses:cc,else:vc.value}:(u=ib,ib=e)}else u=ib,ib=e}else u=ib,ib=e;Kc=ib}Va=
Kc;if(Va===e){var wc;var xc=u;var kd=H();if(kd!==e){var ld=[];for(wc=y();wc!==e;)ld.push(wc),wc=y();xc=kd+ld.join("")}else u=xc,xc=e;var yc=xc;if(yc!==e){var Mc=yc;yc=/^CURRENT_DATE$/i.test(Mc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Mc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Mc}}Va=yc;if(Va===e&&(Va=P(),Va===e)){Va=u;var ke=Fa();if(ke!==e){ta();var Nc=l();if(Nc!==e){ta();var le=Ka();le!==e?(Nc.paren=!0,Va=Nc):(u=Va,Va=e)}else u=Va,Va=
e}else u=Va,Va=e}}}}}}}}return Va}function n(){var M;var Q=u;var aa=H();if(aa!==e){Q=[];for(M=A();M!==e;)Q.push(M),M=A();Q=aa+Q.join("")}else u=Q,Q=e;return Q}function H(){if(me.test(r.charAt(u))){var M=r.charAt(u);u++}else M=e,0===va&&h(ne);return M}function A(){if(oe.test(r.charAt(u))){var M=r.charAt(u);u++}else M=e,0===va&&h(pe);return M}function y(){if(qe.test(r.charAt(u))){var M=r.charAt(u);u++}else M=e,0===va&&h(re);return M}function P(){var M=u;if(64===r.charCodeAt(u)){var Q=Oc;u++}else Q=
e,0===va&&h(se);if(Q!==e){var aa=n();aa!==e?M=Q=[Q,aa]:(u=M,M=e)}else u=M,M=e;M!==e&&(M={type:"parameter",value:M[1]});return M}function K(){var M=u;if(r.substr(u,7).toLowerCase()===te){var Q=r.substr(u,7);u+=7}else Q=e,0===va&&h(ue);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="LEADING":(u=M,M=e)}else u=M,M=e;M===e&&(M=u,r.substr(u,8).toLowerCase()===ve?(Q=r.substr(u,8),u+=8):(Q=e,0===va&&h(we)),Q!==e?(Q=u,va++,aa=A(),va--,aa===e?Q=void 0:(u=Q,Q=e),Q!==e?M="TRAILING":(u=M,
M=e)):(u=M,M=e),M===e&&(M=u,r.substr(u,4).toLowerCase()===xe?(Q=r.substr(u,4),u+=4):(Q=e,0===va&&h(ye)),Q!==e?(Q=u,va++,aa=A(),va--,aa===e?Q=void 0:(u=Q,Q=e),Q!==e?M="BOTH":(u=M,M=e)):(u=M,M=e)));return M}function U(){var M=u;var Q=u;var aa=Z();if(aa!==e){ta();var ua=Fa();if(ua!==e)if(ta(),ua=ka(),ua!==e){ta();var Ea=Ka();Ea!==e?Q={type:"interval-period",period:aa.value,precision:ua,secondary:null}:(u=Q,Q=e)}else u=Q,Q=e;else u=Q,Q=e}else u=Q,Q=e;Q===e&&(Q=u,aa=Z(),aa!==e&&(aa={type:"interval-period",
period:aa.value,precision:null,secondary:null}),Q=aa);if(Q!==e)if(ta(),aa=u,r.substr(u,2).toLowerCase()===ze?(ua=r.substr(u,2),u+=2):(ua=e,0===va&&h(Ae)),ua!==e?(ua=u,va++,Ea=A(),va--,Ea===e?ua=void 0:(u=ua,ua=e),ua!==e?aa="TO":(u=aa,aa=e)):(u=aa,aa=e),aa!==e){ta();aa=u;ua=Z();ua!==e&&(ua={type:"interval-period",period:ua.value,precision:null,secondary:null});aa=ua;if(aa===e){aa=u;ua=ea();if(ua!==e)if(ta(),ua=Fa(),ua!==e)if(ta(),ua=ka(),ua!==e)if(ta(),Ea=Ha(),Ea!==e)if(ta(),Ea=V(),Ea!==e){ta();var Oa=
Ka();Oa!==e?aa={type:"interval-period",period:"second",precision:ua,secondary:Ea}:(u=aa,aa=e)}else u=aa,aa=e;else u=aa,aa=e;else u=aa,aa=e;else u=aa,aa=e;else u=aa,aa=e;aa===e&&(aa=u,ua=ea(),ua!==e?(ta(),ua=Fa(),ua!==e?(ta(),ua=ka(),ua!==e?(ta(),Ea=Ka(),Ea!==e?aa={type:"interval-period",period:"second",precision:ua,secondary:null}:(u=aa,aa=e)):(u=aa,aa=e)):(u=aa,aa=e)):(u=aa,aa=e),aa===e&&(aa=u,ua=ea(),ua!==e&&(ua={type:"interval-period",period:"second",precision:null,secondary:null}),aa=ua))}aa!==
e?M={type:"interval-qualifier",start:Q,end:aa}:(u=M,M=e)}else u=M,M=e;else u=M,M=e;M===e&&(M=u,aa=Z(),aa!==e?(ta(),Q=Fa(),Q!==e?(ta(),Q=V(),Q!==e?(ta(),ua=Ka(),ua!==e?M={type:"interval-period",period:aa.value,precision:Q,secondary:null}:(u=M,M=e)):(u=M,M=e)):(u=M,M=e)):(u=M,M=e),M===e&&(M=u,aa=Z(),aa!==e&&(aa={type:"interval-period",period:aa.value,precision:null,secondary:null}),M=aa,M===e&&(M=u,aa=ea(),aa!==e?(ta(),Q=Fa(),Q!==e?(ta(),Q=ka(),Q!==e?(ta(),ua=Ha(),ua!==e?(ta(),aa=V(),aa!==e?(ta(),ua=
Ka(),ua!==e?M={type:"interval-period",period:"second",precision:Q,secondary:aa}:(u=M,M=e)):(u=M,M=e)):(u=M,M=e)):(u=M,M=e)):(u=M,M=e)):(u=M,M=e),M===e&&(M=u,aa=ea(),aa!==e?(ta(),Q=Fa(),Q!==e?(ta(),Q=V(),Q!==e?(ta(),ua=Ka(),ua!==e?M={type:"interval-period",period:"second",precision:Q,secondary:null}:(u=M,M=e)):(u=M,M=e)):(u=M,M=e)):(u=M,M=e),M===e&&(M=u,aa=ea(),aa!==e&&(aa={type:"interval-period",period:"second",precision:null,secondary:null}),M=aa)))));return M}function Z(){var M=u;M=ra();M!==e&&
(M={type:"string",value:"day"});M===e&&(M=u,M=sa(),M!==e&&(M={type:"string",value:"hour"}),M===e&&(M=u,M=ba(),M!==e&&(M={type:"string",value:"minute"}),M===e&&(M=u,M=na(),M!==e&&(M={type:"string",value:"month"}),M===e&&(M=u,M=ja(),M!==e&&(M={type:"string",value:"year"})))));return M}function V(){var M=Na();M!==e&&(M=parseFloat(M));return M}function ka(){var M=Na();M!==e&&(M=parseFloat(M));return M}function ca(){var M=qa();M===e&&(M=P());return M}function qa(){var M=u;if(39===r.charCodeAt(u)){var Q=
mb;u++}else Q=e,0===va&&h(md);Q===e&&(r.substr(u,2)===Bb?(Q=Bb,u+=2):(Q=e,0===va&&h(Be)));if(Q!==e){Q=[];var aa=u;r.substr(u,2)===Ra?(aa=Ra,u+=2):(aa=e,0===va&&h(nd));aa!==e&&(aa="'");aa===e&&(od.test(r.charAt(u))?(aa=r.charAt(u),u++):(aa=e,0===va&&h(pd)));for(;aa!==e;)Q.push(aa),aa=u,r.substr(u,2)===Ra?(aa=Ra,u+=2):(aa=e,0===va&&h(nd)),aa!==e&&(aa="'"),aa===e&&(od.test(r.charAt(u))?(aa=r.charAt(u),u++):(aa=e,0===va&&h(pd)));39===r.charCodeAt(u)?(aa=mb,u++):(aa=e,0===va&&h(md));aa!==e?M={type:"string",
value:Q.join("")}:(u=M,M=e)}else u=M,M=e;return M}function wa(){var M=u;if(Da()!==e){ta();var Q=l();if(Q!==e){ta();var aa=Ga();aa!==e?(ta(),aa=l(),aa!==e?M={type:"when-clause",operand:Q,value:aa}:(u=M,M=e)):(u=M,M=e)}else u=M,M=e}else u=M,M=e;return M}function xa(){var M=u;if(Da()!==e){ta();var Q=l();if(Q!==e){ta();var aa=Ga();aa!==e?(ta(),aa=l(),aa!==e?M={type:"when-clause",operand:Q,value:aa}:(u=M,M=e)):(u=M,M=e)}else u=M,M=e}else u=M,M=e;return M}function Ba(){var M=u;var Q=u;if(r.substr(u,4).toLowerCase()===
Ce){var aa=r.substr(u,4);u+=4}else aa=e,0===va&&h(De);if(aa!==e){aa=u;va++;var ua=A();va--;ua===e?aa=void 0:(u=aa,aa=e);aa!==e?Q="ELSE":(u=Q,Q=e)}else u=Q,Q=e;Q!==e?(ta(),Q=l(),Q!==e?M={type:"else-clause",value:Q}:(u=M,M=e)):(u=M,M=e);return M}function Ca(){var M=Na();if(M===e){M=u;if(45===r.charCodeAt(u)){var Q=tb;u++}else Q=e,0===va&&h(Bc);Q===e&&(43===r.charCodeAt(u)?(Q=hb,u++):(Q=e,0===va&&h(Ac)));if(Q!==e){var aa=Na();aa!==e?M=Q[0]+aa:(u=M,M=e)}else u=M,M=e}return M}function Ja(){var M=u;if(46===
r.charCodeAt(u)){var Q=ob;u++}else Q=e,0===va&&h(Ee);Q!==e?(M=Na(),M===e&&(M=null),M="."+(null!=M?M:"")):(u=M,M=e);return M}function La(){var M;var Q=M=u;if(Fe.test(r.charAt(u))){var aa=r.charAt(u);u++}else aa=e,0===va&&h(Ge);aa!==e?(He.test(r.charAt(u))?(Q=r.charAt(u),u++):(Q=e,0===va&&h(Ie)),Q===e&&(Q=null),Q="e"+(null===Q?"":Q)):(u=Q,Q=e);Q!==e?(aa=Na(),aa!==e?M=Q+aa:(u=M,M=e)):(u=M,M=e);return M}function Na(){var M=[];var Q=bb();if(Q!==e)for(;Q!==e;)M.push(Q),Q=bb();else M=e;M!==e&&(M=M.join(""));
return M}function bb(){if(Je.test(r.charAt(u))){var M=r.charAt(u);u++}else M=e,0===va&&h(Ke);return M}function g(){var M=u;if(r.substr(u,2).toLowerCase()===T){var Q=r.substr(u,2);u+=2}else Q=e,0===va&&h(Le);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="IN":(u=M,M=e)}else u=M,M=e;return M}function F(){var M=u;if(r.substr(u,2).toLowerCase()===da){var Q=r.substr(u,2);u+=2}else Q=e,0===va&&h(Me);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="IS":(u=M,M=e)}else u=
M,M=e;return M}function fa(){var M=u;if(r.substr(u,4).toLowerCase()===X){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(Ne);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="LIKE":(u=M,M=e)}else u=M,M=e;return M}function ia(){var M=u;if(r.substr(u,3).toLowerCase()===za){var Q=r.substr(u,3);u+=3}else Q=e,0===va&&h(Oe);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="NOT":(u=M,M=e)}else u=M,M=e;return M}function oa(){var M=u;if(r.substr(u,3).toLowerCase()===Aa){var Q=
r.substr(u,3);u+=3}else Q=e,0===va&&h(Pe);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="AND":(u=M,M=e)}else u=M,M=e;return M}function O(){var M=u;if(r.substr(u,2).toLowerCase()===Ia){var Q=r.substr(u,2);u+=2}else Q=e,0===va&&h(Qe);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="OR":(u=M,M=e)}else u=M,M=e;return M}function S(){var M=u;if(r.substr(u,7).toLowerCase()===Ma){var Q=r.substr(u,7);u+=7}else Q=e,0===va&&h(Re);if(Q!==e){Q=u;va++;var aa=A();va--;
aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="BETWEEN":(u=M,M=e)}else u=M,M=e;return M}function W(){var M=u;if(r.substr(u,4).toLowerCase()===Wa){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(Se);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="FROM":(u=M,M=e)}else u=M,M=e;return M}function Y(){var M=u;if(r.substr(u,4).toLowerCase()===pb){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(Te);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="TRIM":(u=M,M=e)}else u=M,M=e;return M}
function ha(){var M=u;if(r.substr(u,8).toLowerCase()===Ue){var Q=r.substr(u,8);u+=8}else Q=e,0===va&&h(Ve);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="INTERVAL":(u=M,M=e)}else u=M,M=e;return M}function ja(){var M=u;if(r.substr(u,4).toLowerCase()===We){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(Xe);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="YEAR":(u=M,M=e)}else u=M,M=e;return M}function na(){var M=u;if(r.substr(u,5).toLowerCase()===Ye){var Q=r.substr(u,
5);u+=5}else Q=e,0===va&&h(Ze);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="MONTH":(u=M,M=e)}else u=M,M=e;return M}function ra(){var M=u;if(r.substr(u,3).toLowerCase()===$e){var Q=r.substr(u,3);u+=3}else Q=e,0===va&&h(af);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="DAY":(u=M,M=e)}else u=M,M=e;return M}function sa(){var M=u;if(r.substr(u,4).toLowerCase()===bf){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(cf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===
e?Q=void 0:(u=Q,Q=e);Q!==e?M="HOUR":(u=M,M=e)}else u=M,M=e;return M}function ba(){var M=u;if(r.substr(u,6).toLowerCase()===df){var Q=r.substr(u,6);u+=6}else Q=e,0===va&&h(ef);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="MINUTE":(u=M,M=e)}else u=M,M=e;return M}function ea(){var M=u;if(r.substr(u,6).toLowerCase()===ff){var Q=r.substr(u,6);u+=6}else Q=e,0===va&&h(gf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="SECOND":(u=M,M=e)}else u=M,M=e;return M}
function ma(){var M=u;if(r.substr(u,4).toLowerCase()===hf){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(jf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="CASE":(u=M,M=e)}else u=M,M=e;return M}function ya(){var M=u;if(r.substr(u,3).toLowerCase()===kf){var Q=r.substr(u,3);u+=3}else Q=e,0===va&&h(lf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="END":(u=M,M=e)}else u=M,M=e;return M}function Da(){var M=u;if(r.substr(u,4).toLowerCase()===mf){var Q=r.substr(u,
4);u+=4}else Q=e,0===va&&h(nf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="WHEN":(u=M,M=e)}else u=M,M=e;return M}function Ga(){var M=u;if(r.substr(u,4).toLowerCase()===of){var Q=r.substr(u,4);u+=4}else Q=e,0===va&&h(pf);if(Q!==e){Q=u;va++;var aa=A();va--;aa===e?Q=void 0:(u=Q,Q=e);Q!==e?M="THEN":(u=M,M=e)}else u=M,M=e;return M}function Ha(){if(44===r.charCodeAt(u)){var M=qf;u++}else M=e,0===va&&h(rf);return M}function Fa(){if(40===r.charCodeAt(u)){var M=sf;u++}else M=e,0===
va&&h(tf);return M}function Ka(){if(41===r.charCodeAt(u)){var M=uf;u++}else M=e,0===va&&h(vf);return M}function ta(){var M;var Q=[];for(M=Xa();M!==e;)Q.push(M),M=Xa();return Q}function Xa(){if(wf.test(r.charAt(u))){var M=r.charAt(u);u++}else M=e,0===va&&h(xf);return M}function ab(M,Q,aa,ua){M={type:"binary-expression",operator:M,left:Q,right:aa};void 0!==ua&&(M.escape=ua);return M}function $a(M,Q){for(var aa=0;aa<Q.length;aa++)M=ab(Q[aa][1],M,Q[aa][3]);return M}p=void 0!==p?p:{};var e={},cb=p.grammarSource,
Sa={start:D},gb=D,nb="!",Ya="\x3d",Eb="\x3e\x3d",ec="\x3e",Fb="\x3c\x3d",la="\x3c\x3e",fc="\x3c",Cb="!\x3d",hb="+",tb="-",gc="*",Tb="/",Oc="@",mb="'",Bb="N'",Ra="''",ob=".",ub="null",Qa="true",Jb="false",T="in",da="is",X="like",pa="escape",za="not",Aa="and",Ia="or",Ma="between",Wa="from",Ua="for",Ta="substring",eb="extract",pb="trim",ae="position",Kd="timestamp",Hd="date",te="leading",ve="trailing",xe="both",ze="to",Ue="interval",We="year",Ye="month",$e="day",bf="hour",df="minute",ff="second",hf=
"case",kf="end",mf="when",of="then",Ce="else",qf=",",sf="(",uf=")",fd="`",me=/^[A-Za-z_\x80-\uFFFF]/,oe=/^[A-Za-z0-9_]/,qe=/^[A-Za-z0-9_.\x80-\uFFFF]/,od=/^[^']/,Je=/^[0-9]/,Fe=/^[eE]/,He=/^[+\-]/,wf=/^[ \t\n\r]/,hd=/^[^`]/,qd=q("!",!1),Qc=q("\x3d",!1),sd=q("\x3e\x3d",!1),td=q("\x3e",!1),ud=q("\x3c\x3d",!1),vd=q("\x3c\x3e",!1),wd=q("\x3c",!1),xd=q("!\x3d",!1),Ac=q("+",!1),Bc=q("-",!1),yd=q("*",!1),zd=q("/",!1),ne=B([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),pe=B([["A","Z"],["a","z"],["0",
"9"],"_"],!1,!1),re=B([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),se=q("@",!1),md=q("'",!1),Be=q("N'",!1),nd=q("''",!1),pd=B(["'"],!0,!1),Ee=q(".",!1),Ke=B([["0","9"]],!1,!1),Ge=B(["e","E"],!1,!1),Ie=B(["+","-"],!1,!1),Fd=q("NULL",!0),Bd=q("TRUE",!0),Dd=q("FALSE",!0),Le=q("IN",!0),Me=q("IS",!0),Ne=q("LIKE",!0),rd=q("ESCAPE",!0),Oe=q("NOT",!0),Pe=q("AND",!0),Qe=q("OR",!0),Re=q("BETWEEN",!0),Se=q("FROM",!0),Wd=q("FOR",!0),Sd=q("SUBSTRING",!0),Nd=q("EXTRACT",!0),Te=q("TRIM",!0),
be=q("POSITION",!0),Ld=q("TIMESTAMP",!0),Id=q("DATE",!0),ue=q("LEADING",!0),we=q("TRAILING",!0),ye=q("BOTH",!0),Ae=q("TO",!0),Ve=q("INTERVAL",!0),Xe=q("YEAR",!0),Ze=q("MONTH",!0),af=q("DAY",!0),cf=q("HOUR",!0),ef=q("MINUTE",!0),gf=q("SECOND",!0),jf=q("CASE",!0),lf=q("END",!0),nf=q("WHEN",!0),pf=q("THEN",!0),De=q("ELSE",!0),rf=q(",",!1),tf=q("(",!1),vf=q(")",!1),xf=B([" ","\t","\n","\r"],!1,!1),gd=q("`",!1),id=B(["`"],!0,!1),u=0,dc=[{line:1,column:1}],sb=0,zc=[],va=0;if("startRule"in p){if(!(p.startRule in
Sa))throw Error("Can't start parsing from rule \""+p.startRule+'".');gb=Sa[p.startRule]}var Pc=gb();if(Pc!==e&&u===r.length)return Pc;Pc!==e&&u<r.length&&h({type:"end"});throw function(M,Q,aa){return new f(f.buildMessage(M,Q),M,Q,aa)}(zc,sb<r.length?r.charAt(sb):null,sb<r.length?w(sb,sb+1):w(sb,sb));}}})})(I);let C=function(){function k(){}k.parse=function(f){return I.exports.parse(f)};return k}();c.WhereGrammar=C;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(c){c.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};c.commonjsRequire=function(a){throw Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');};c.getDefaultExportFromCjs=function(a){return a&&
a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,a,I,C,k,f,t){function r(d,l){if(!l)return null;if("x"in l){var x={x:0,y:0};[x.x,x.y]=d(l.x,l.y,N);null!=
l.z&&(x.z=l.z);null!=l.m&&(x.m=l.m);return x}return"xmin"in l?(x={xmin:0,ymin:0,xmax:0,ymax:0},[x.xmin,x.ymin]=d(l.xmin,l.ymin,N),[x.xmax,x.ymax]=d(l.xmax,l.ymax,N),l.hasZ&&(x.zmin=l.zmin,x.zmax=l.zmax,x.hasZ=!0),l.hasM&&(x.mmin=l.mmin,x.mmax=l.mmax,x.hasM=!0),x):"rings"in l?{rings:p(l.rings,d),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:p(l.paths,d),hasM:l.hasM,hasZ:l.hasZ}:"points"in l?{points:q(l.points,d),hasM:l.hasM,hasZ:l.hasZ}:null}function p(d,l){const x=[];for(const G of d)x.push(q(G,l));
return x}function q(d,l){const x=[];for(const G of d)d=l(G[0],G[1],[0,0]),x.push(d),2<G.length&&d.push(G[2]),3<G.length&&d.push(G[3]);return x}function B(){B=a._asyncToGenerator(function*(d,l){d&&l&&(d=Array.isArray(d)?d.map(x=>I.isSome(x.geometry)?x.geometry.spatialReference:null).filter(I.isSome):[d],yield C.initializeProjection(d.map(x=>({source:x,dest:l}))))});return B.apply(this,arguments)}const N=[0,0],w=r.bind(null,t.lngLatToXY),h=r.bind(null,t.xyToLngLat),D=new (function(){function d(){this._jobs=
[];this._timer=null;this._process=this._process.bind(this)}var l=d.prototype;l.push=function(){var x=a._asyncToGenerator(function*(G,J,R){if(!(G&&G.length&&J&&R)||f.equals(J,R))return G;const v={geometries:G,inSpatialReference:J,outSpatialReference:R,resolve:null};this._jobs.push(v);return new Promise(E=>{v.resolve=E;null===this._timer&&(this._timer=setTimeout(this._process,10))})});return function(G,J,R){return x.apply(this,arguments)}}();l._process=function(){this._timer=null;const x=this._jobs.shift();
if(x){var {geometries:G,inSpatialReference:J,outSpatialReference:R,resolve:v}=x;t.canProject(J,R)?f.isWebMercator(R)?v(G.map(w)):v(G.map(h)):v(C.projectMany(k.jsonAdapter,G,J,R,null,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return d}());c.checkProjectionSupport=function(d,l){return B.apply(this,arguments)};c.project=function(d,l,x,G){if(!d)return d;x||(x=l,l=d.spatialReference);return f.isValid(l)&&f.isValid(x)&&!f.equals(l,x)?t.canProject(l,x)?(d=f.isWebMercator(x)?
w(d):h(d),d.spatialReference=x,d):C.projectMany(k.jsonAdapter,[d],l,x,null,G)[0]:d};c.projectMany=function(d,l,x){return D.push(d,l,x)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/Error ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/unitUtils ../core/accessorSupport/tracking ../core/accessorSupport/tracking/SimpleObservable ../chunks/mat4 ../chunks/vec3 ../chunks/vec3f64 ./Extent ./Multipoint ../chunks/pe ./Point ./Polygon ./Polyline ./projectionEllipsoid ./support/aaBoundingRect ./support/Ellipsoid ./support/geodesicConstants ./support/GeographicTransformation ./support/spatialReferenceUtils ./support/SupportedGCSWkids ./support/zscale".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G,J,R,v,E,z,m,L,b){function n(){return!!gb&&d.isLoaded()}function H(T){f.isNone(Ya)&&(Ya=Promise.all([d.load(),(new Promise((da,X)=>c(["../chunks/geometryEngineBase"],da,X))).then(da=>da.geometryEngineBase),new Promise((da,X)=>c(["./geometryAdapters/hydrated"],da,X))]));return Ya.then(([,da,{hydratedAdapter:X}])=>{t.throwIfAborted(T);nb=X;gb=da.default;gb._enableProjection(d.pe);ec.notify()})}function A(T,da,X=null,pa=null){return Array.isArray(T)?0===
T.length?[]:y(nb,T,T[0].spatialReference,da,X,pa):y(nb,[T],T.spatialReference,da,X,pa)[0]}function y(T,da,X,pa,za=null,Aa=null){if(f.isNone(X)||f.isNone(pa))return da;if(Z(X,pa,za))return da.map(Ia=>f.unwrap(ka(Ia,X,pa)));if(f.isNone(za)){const Ia=z.cacheKey(X,pa);void 0!==Eb[Ia]?za=Eb[Ia]:(za=K(X,pa,void 0),f.isNone(za)&&(za=new z),Eb[Ia]=za)}if(f.isNone(gb)||f.isNone(T))throw new Fb;return f.isSome(Aa)?gb._project(T,da,X,pa,za,Aa):gb._project(T,da,X,pa,za)}function P(T,da){if(!n())for(const X of T)if(f.isSome(X)&&
!m.equals(X.spatialReference,da)&&m.isValid(X.spatialReference)&&m.isValid(da)&&!Z(X.spatialReference,da))return p.trackAccess(ec),{pending:H(),geometries:null};return{pending:null,geometries:T.map(X=>f.isNone(X)?null:m.equals(X.spatialReference,da)?X:m.isValid(X.spatialReference)&&m.isValid(da)?U(X,da):null)}}function K(T,da,X=null){if(f.isNone(T)||f.isNone(da))return null;if(f.isNone(gb)||f.isNone(nb))throw new Fb;T=gb._getTransformation(nb,T,da,X,X?.spatialReference);return null!==T?z.fromGE(T):
null}function U(T,da){try{const X=A(T,da);if(null==X)return null;"xmin"in T&&"xmin"in X&&(X.zmin=T.zmin,X.zmax=T.zmax);const pa=b.getGeometryZScaler(X.type,T.spatialReference,da);f.isSome(pa)&&pa(X);return X}catch(X){if(!(X instanceof Fb))throw X;return null}}function Z(T,da,X){return X?!1:m.equals(T,da)?!0:m.isValid(T)&&m.isValid(da)&&!!e(T,da,Tb)}function V(){V=I._asyncToGenerator(function*(T,da,X,pa){if(n())return t.waitTick(pa);if(Array.isArray(T))for(const {source:za,dest:Aa,geographicTransformation:Ia}of T){if(!Z(za,
Aa,Ia))return H(pa)}else if(!Z(T,da,X))return H(pa);return t.waitTick(pa)});return V.apply(this,arguments)}function ka(T,da,X){return T?"x"in T?ca(T,da,new l,X,0):"xmin"in T?Ba(T,da,new h,X,0):"rings"in T?xa(T,da,new x,X,0):"paths"in T?wa(T,da,new G,X,0):"points"in T?qa(T,da,new D,X,0):null:null}function ca(T,da,X,pa,za){Qa[0]=T.x;Qa[1]=T.y;const Aa=T.z;Qa[2]=void 0!==Aa?Aa:za;if(!Na(Qa,da,0,Qa,pa,0,1))return null;X.x=Qa[0];X.y=Qa[1];X.spatialReference=pa;void 0===Aa?(X.z=void 0,X.hasZ=!1):(X.z=Qa[2],
X.hasZ=!0);void 0===T.m?(X.m=void 0,X.hasM=!1):(X.m=T.m,X.hasM=!0);return X}function qa(T,da,X,pa,za){const {points:Aa,hasZ:Ia,hasM:Ma}=T;T=[];const Wa=Aa.length,Ua=[];for(var Ta of Aa)Ua.push(Ta[0],Ta[1],Ia?Ta[2]:za);if(!Na(Ua,da,0,Ua,pa,0,Wa))return null;for(da=0;da<Wa;++da){za=3*da;Ta=Ua[za];const eb=Ua[za+1];Ia&&Ma?T.push([Ta,eb,Ua[za+2],Aa[da][3]]):Ia?T.push([Ta,eb,Ua[za+2]]):Ma?T.push([Ta,eb,Aa[da][2]]):T.push([Ta,eb])}X.points=T;X.spatialReference=pa;X.hasZ=Ia;X.hasM=Ma;return X}function wa(T,
da,X,pa,za){const {paths:Aa,hasZ:Ia,hasM:Ma}=T;T=[];if(!bb(Aa,Ia??!1,Ma??!1,da,T,pa,za))return null;X.paths=T;X.spatialReference=pa;X.hasZ=Ia;X.hasM=Ma;return X}function xa(T,da,X,pa,za){const {rings:Aa,hasZ:Ia,hasM:Ma}=T;T=[];if(!bb(Aa,Ia??!1,Ma??!1,da,T,pa,za))return null;X.rings=T;X.spatialReference=pa;X.hasZ=Ia;X.hasM=Ma;return X}function Ba(T,da,X,pa,za){const {xmin:Aa,ymin:Ia,xmax:Ma,ymax:Wa,hasZ:Ua,hasM:Ta}=T;if(!Ca(Aa,Ia,Ua?T.zmin:za,da,Qa,pa))return null;X.xmin=Qa[0];X.ymin=Qa[1];Ua&&(X.zmin=
Qa[2]);if(!Ca(Ma,Wa,Ua?T.zmax:za,da,Qa,pa))return null;X.xmax=Qa[0];X.ymax=Qa[1];Ua&&(X.zmax=Qa[2]);Ta&&(X.mmin=T.mmin,X.mmax=T.mmax);X.spatialReference=pa;return X}function Ca(T,da,X,pa,za,Aa){Ra[0]=T;Ra[1]=da;Ra[2]=X;return Na(Ra,pa,0,za,Aa,0,1)}function Ja(T,da,X,pa){if(f.isNone(da)||f.isNone(pa)||2>T.length)return!1;2===T.length&&(Ra[0]=T[0],Ra[1]=T[1],Ra[2]=0,T=Ra);return Na(T,da,0,X,pa,0,1)}function La(T,da,X){if(f.isNone(da))return!1;da=ia(da,tb);da=hb[da][la.WGS84_COMPARABLE_LON_LAT];if(f.isNone(da))return!1;
da(T,0,Ra,0);X!==Ra&&(X[0]=Ra[0],X[1]=Ra[1],2<X.length&&(X[2]=Ra[2]));return!0}function Na(T,da,X,pa,za,Aa,Ia=1){da=e(da,za,Tb);if(f.isNone(da))return!1;if(da===oa){if(T===pa&&X===Aa)return!0;Ia=X+3*Ia;for(let Ma=X,Wa=Aa;Ma<Ia;Ma++,Wa++)pa[Wa]=T[Ma];return!0}Ia=X+3*Ia;for(let Ma=X,Wa=Aa;Ma<Ia;Ma+=3,Wa+=3)da(T,Ma,pa,Wa);return!0}function bb(T,da,X,pa,za,Aa,Ia=0){const Ma=[];for(const Wa of T)for(const Ua of Wa)Ma.push(Ua[0],Ua[1],da?Ua[2]:Ia);if(!Na(Ma,pa,0,Ma,Aa,0,Ma.length/3))return!1;pa=0;za.length=
0;for(const Wa of T){T=[];for(const Ua of Wa)da&&X?T.push([Ma[pa++],Ma[pa++],Ma[pa++],Ua[3]]):da?T.push([Ma[pa++],Ma[pa++],Ma[pa++]]):(X?T.push([Ma[pa++],Ma[pa++],Ua[2]]):T.push([Ma[pa++],Ma[pa++]]),pa++);za.push(T)}return!0}function g(T,da,X,pa){da=pa+da;if(da<pa/2||X>da)return Number.MAX_VALUE;T=Math.abs(mb*T)+Math.asin(X/da);return T>=Math.PI/2?Number.MAX_VALUE:X/Math.cos(T)}function F(T,da,X){const pa=Math.sin(T);T=Math.cos(T);const za=Math.sin(da);da=Math.cos(da);X[0]=-pa;X[4]=-za*T;X[8]=da*
T;X[12]=0;X[1]=T;X[5]=-za*pa;X[9]=da*pa;X[13]=0;X[2]=0;X[6]=da;X[10]=za;X[14]=0;X[3]=0;X[7]=0;X[11]=0;X[15]=1;return X}function fa(T,da,X){F(T,da,X);B.transpose(X,X);return X}function ia(T,da){if(!T)return la.UNKNOWN;if(da.spatialReference===T)return da.spatialReferenceId;da.spatialReference=T;"metersPerUnit"in da&&(da.metersPerUnit=r.getMetersPerUnitForSR(T,1));return T.wkt===J.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=la.SPHERICAL_ECEF:m.isWGS84(T)?da.spatialReferenceId=la.WGS84:m.isWebMercator(T)?
da.spatialReferenceId=la.WEB_MERCATOR:m.isPlateCarree(T)?da.spatialReferenceId=la.PLATE_CARREE:T.wkt===J.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=la.WGS84_ECEF:T.wkid===L.SupportedGCSWkids.CGCS2000?da.spatialReferenceId=la.CGCS2000:T.wkt===J.SphericalPCPFMars.wkt?da.spatialReferenceId=la.SPHERICAL_MARS_PCPF:T.wkt===J.SphericalPCPFMoon.wkt?da.spatialReferenceId=la.SPHERICAL_MOON_PCPF:m.isMars(T)?da.spatialReferenceId=la.GCSMARS2000:m.isMoon(T)?da.spatialReferenceId=la.GCSMOON2000:da.spatialReferenceId=
la.UNKNOWN}function oa(T,da,X,pa){T!==X&&(X[pa++]=T[da++],X[pa++]=T[da++],X[pa]=T[da])}function O(T,da,X,pa){X[pa++]=Bb*(T[da++]/v.earth.radius);X[pa++]=Bb*(Math.PI/2-2*Math.atan(Math.exp(-T[da++]/v.earth.radius)));X[pa]=T[da]}function S(T,da,X,pa){O(T,da,X,pa);ma(X,pa,X,pa)}function W(T,da,X,pa){O(T,da,X,pa);ta(X,pa,X,pa)}function Y(T,da,X,pa,za){var Aa=.4999999*Math.PI;Aa=k.clamp(mb*T[da+1],-Aa,Aa);Aa=Math.sin(Aa);X[pa++]=mb*T[da]*za.radius;X[pa++]=za.halfSemiMajorAxis*Math.log((1+Aa)/(1-Aa));X[pa]=
T[da+2]}function ha(T,da,X,pa){Y(T,da,X,pa,v.earth)}function ja(T,da,X,pa){X[pa]=T[da]*fc;X[pa+1]=T[da+1]*fc;X[pa+2]=T[da+2]}function na(T,da,X,pa){X[pa]=T[da]*Cb;X[pa+1]=T[da+1]*Cb;X[pa+2]=T[da+2]}function ra(T,da,X,pa){O(T,da,X,pa);ja(X,pa,X,pa)}function sa(T,da,X,pa,za){za+=T[da+2];const Aa=mb*T[da+1];T=mb*T[da];da=Math.cos(Aa);X[pa++]=Math.cos(T)*da*za;X[pa++]=Math.sin(T)*da*za;X[pa]=Math.sin(Aa)*za}function ba(T,da,X,pa){sa(T,da,X,pa,v.moon.radius)}function ea(T,da,X,pa){sa(T,da,X,pa,v.mars.radius)}
function ma(T,da,X,pa){sa(T,da,X,pa,v.earth.radius)}function ya(T,da,X,pa,za){var Aa=T[da];const Ia=T[da+1];da=T[da+2];T=Math.sqrt(Aa*Aa+Ia*Ia+da*da);da=k.asinClamped(da/(0===T?1:T));Aa=Math.atan2(Ia,Aa);X[pa++]=Bb*Aa;X[pa++]=Bb*da;X[pa]=T-za}function Da(T,da,X,pa){ya(T,da,X,pa,v.moon.radius)}function Ga(T,da,X,pa){ya(T,da,X,pa,v.mars.radius)}function Ha(T,da,X,pa){ya(T,da,X,pa,v.earth.radius)}function Fa(T,da,X,pa){Ha(T,da,X,pa);ha(X,pa,X,pa)}function Ka(T,da,X,pa){Ha(T,da,X,pa);ta(X,pa,X,pa)}function ta(T,
da,X,pa){var za=v.earth;const Aa=mb*T[da];var Ia=mb*T[da+1];T=T[da+2];da=Math.sin(Ia);Ia=Math.cos(Ia);const Ma=za.radius/Math.sqrt(1-za.eccentricitySquared*da*da);X[pa++]=(Ma+T)*Ia*Math.cos(Aa);X[pa++]=(Ma+T)*Ia*Math.sin(Aa);X[pa++]=(Ma*(1-za.eccentricitySquared)+T)*da}function Xa(T,da,X,pa){var za=E.earthEllipsoidConstants,Aa=T[da],Ia=T[da+1];T=T[da+2];let Ma;da=Math.abs(T);var Wa=Aa*Aa+Ia*Ia;var Ua=Math.sqrt(Wa);var Ta=Wa+T*T;var eb=Math.sqrt(Ta);Aa=Math.atan2(Ia,Aa);var pb=T*T/Ta;Ta=Wa/Ta;Ia=za.a2/
eb;Wa=za.a3-za.a4/eb;.3<Ta?(pb=da/eb*(1+Ta*(za.a1+Ia+pb*Wa)/eb),eb=Math.asin(pb),Ia=pb*pb,Ta=Math.sqrt(1-Ia)):(Ta=Ua/eb*(1-pb*(za.a5-Ia-Ta*Wa)/eb),eb=Math.acos(Ta),Ia=1-Ta*Ta,pb=Math.sqrt(Ia));Ma=1-v.earth.eccentricitySquared*Ia;Ia=v.earth.radius/Math.sqrt(Ma);za=za.a6*Ia;Ia=Ua-Ia*Ta;Wa=da-za*pb;da=Ta*Ia+pb*Wa;Ua=Ta*Wa-pb*Ia;za=Ua/(za/Ma+da);eb+=za;0>T&&(eb=-eb);X[pa++]=Bb*Aa;X[pa++]=Bb*eb;X[pa]=da+Ua*za/2}function ab(T,da,X,pa){Xa(T,da,X,pa);ma(X,pa,X,pa)}function $a(T,da,X,pa){Xa(T,da,X,pa);ha(X,
pa,X,pa)}function e(T,da,X=Sa()){return f.isNone(T)||f.isNone(da)?null:cb(T,da,X).projector}function cb(T,da,X){if(f.isNone(T)||f.isNone(da)||X.source.spatialReference===T&&X.dest.spatialReference===da)return X;const pa=ia(T,X.source),za=ia(da,X.dest);pa===la.UNKNOWN&&za===la.UNKNOWN?m.equals(T,da)?X.projector=oa:X.projector=null:X.projector=hb[pa][za];return X}function Sa(){return{source:{spatialReference:null,spatialReferenceId:la.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:la.UNKNOWN,
metersPerUnit:1},projector:oa}}let gb=null,nb=null,Ya=null,Eb={};const ec=new q.SimpleObservable;let Fb=function(T){function da(){return T.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}I._inheritsLoose(da,T);return da}(C);var la;(function(T){T[T.UNKNOWN=0]="UNKNOWN";T[T.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";T[T.WGS84=2]="WGS84";T[T.WEB_MERCATOR=3]="WEB_MERCATOR";T[T.WGS84_ECEF=4]="WGS84_ECEF";T[T.CGCS2000=5]="CGCS2000";T[T.WGS84_COMPARABLE_LON_LAT=
6]="WGS84_COMPARABLE_LON_LAT";T[T.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF";T[T.GCSMARS2000=8]="GCSMARS2000";T[T.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF";T[T.GCSMOON2000=10]="GCSMOON2000";T[T.LON_LAT=11]="LON_LAT";T[T.PLATE_CARREE=12]="PLATE_CARREE"})(la||(la={}));const fc=v.earth.radius*Math.PI/180,Cb=180/(v.earth.radius*Math.PI),hb={[la.WGS84]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ha,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.CGCS2000]:{[la.CGCS2000]:oa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ja,[la.WGS84]:null,[la.WGS84_ECEF]:ta},[la.GCSMARS2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:oa,[la.GCSMOON2000]:null,
[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:ea,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.GCSMOON2000]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:ba,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,
[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.WEB_MERCATOR]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:O,[la.WGS84_COMPARABLE_LON_LAT]:O,[la.SPHERICAL_ECEF]:S,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:oa,[la.PLATE_CARREE]:ra,[la.WGS84]:O,[la.WGS84_ECEF]:W},[la.WGS84_ECEF]:{[la.CGCS2000]:Xa,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Xa,[la.WGS84_COMPARABLE_LON_LAT]:Xa,[la.SPHERICAL_ECEF]:ab,[la.SPHERICAL_MARS_PCPF]:null,
[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:$a,[la.PLATE_CARREE]:function(T,da,X,pa){Xa(T,da,X,pa);ja(X,pa,X,pa)},[la.WGS84]:Xa,[la.WGS84_ECEF]:oa},[la.SPHERICAL_ECEF]:{[la.CGCS2000]:Ha,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:Ha,[la.WGS84_COMPARABLE_LON_LAT]:Ha,[la.SPHERICAL_ECEF]:oa,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:Fa,[la.PLATE_CARREE]:function(T,da,X,pa){Ha(T,da,X,pa);ja(X,pa,X,pa)},[la.WGS84]:Ha,
[la.WGS84_ECEF]:Ka},[la.SPHERICAL_MARS_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:Ga,[la.GCSMOON2000]:null,[la.LON_LAT]:Ga,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:oa,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.SPHERICAL_MOON_PCPF]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:Da,[la.LON_LAT]:Da,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,
[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:oa,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.UNKNOWN]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:null,[la.WGS84_COMPARABLE_LON_LAT]:null,[la.SPHERICAL_ECEF]:null,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:oa,[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:null,[la.WGS84]:null,[la.WGS84_ECEF]:null},[la.LON_LAT]:{[la.CGCS2000]:oa,
[la.GCSMARS2000]:oa,[la.GCSMOON2000]:oa,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:ea,[la.SPHERICAL_MOON_PCPF]:ba,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:ha,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.WGS84_COMPARABLE_LON_LAT]:{[la.CGCS2000]:null,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:oa,[la.WGS84_COMPARABLE_LON_LAT]:oa,[la.SPHERICAL_ECEF]:ma,[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,
[la.WEB_MERCATOR]:null,[la.PLATE_CARREE]:ja,[la.WGS84]:oa,[la.WGS84_ECEF]:ta},[la.PLATE_CARREE]:{[la.CGCS2000]:na,[la.GCSMARS2000]:null,[la.GCSMOON2000]:null,[la.LON_LAT]:na,[la.WGS84_COMPARABLE_LON_LAT]:na,[la.SPHERICAL_ECEF]:function(T,da,X,pa){na(T,da,X,pa);ma(X,pa,X,pa)},[la.SPHERICAL_MARS_PCPF]:null,[la.SPHERICAL_MOON_PCPF]:null,[la.UNKNOWN]:null,[la.WEB_MERCATOR]:function(T,da,X,pa){na(T,da,X,pa);ha(X,pa,X,pa)},[la.PLATE_CARREE]:oa,[la.WGS84]:na,[la.WGS84_ECEF]:function(T,da,X,pa){na(T,da,X,
pa);ta(X,pa,X,pa)}}},tb={spatialReference:null,spatialReferenceId:la.UNKNOWN},gc={spatialReference:null,spatialReferenceId:la.UNKNOWN},Tb=Sa(),Oc=Sa(),mb=k.deg2rad(1),Bb=k.rad2deg(1),Ra=w.create(),ob=w.create(),ub=w.create(),Qa=w.create(),Jb=w.create();a.canProjectToWGS84ComparableLonLat=function(T){if(f.isNone(T))return!1;T=ia(T,tb);return!!hb[T][la.WGS84_COMPARABLE_LON_LAT]};a.canProjectWithoutEngine=Z;a.computeENUToSphericalPCPFLocalRotation=F;a.computeSphericalPCPFToENULocalRotation=fa;a.computeTranslationToOriginAndRotation=
function(T,da,X,pa){if(f.isNone(T)||f.isNone(pa))return!1;var za=ia(T,tb),Aa=ia(pa,gc);if(za===Aa&&Aa!==la.SPHERICAL_ECEF&&Aa!==la.SPHERICAL_MARS_PCPF&&Aa!==la.SPHERICAL_MOON_PCPF&&(za!==la.UNKNOWN||m.equals(T,pa)))return B.fromTranslation(X,da),!0;if(Aa===la.SPHERICAL_ECEF||Aa===la.SPHERICAL_MARS_PCPF||Aa===la.SPHERICAL_MOON_PCPF){za=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(f.isNone(za)||f.isNone(Aa))return!1;za(da,0,ob,0);Aa(ob,0,ub,0);F(mb*ob[0],mb*ob[1],X);X[12]=ub[0];X[13]=ub[1];X[14]=ub[2];
return!0}if((Aa===la.WEB_MERCATOR||Aa===la.PLATE_CARREE)&&(za===la.WGS84||za===la.CGCS2000&&Aa===la.PLATE_CARREE||za===la.SPHERICAL_ECEF||za===la.WEB_MERCATOR)){T=hb[za][la.LON_LAT];Aa=hb[la.LON_LAT][Aa];if(f.isNone(T)||f.isNone(Aa))return!1;T(da,0,ob,0);Aa(ob,0,ub,0);za===la.SPHERICAL_ECEF?fa(mb*ob[0],mb*ob[1],X):B.identity(X);X[12]=ub[0];X[13]=ub[1];X[14]=ub[2];return!0}return!1};a.getProjectorName=function(T,da){switch(e(T,da,Tb)){case oa:return"copy3";case ma:return"wgs84ToSphericalECEF";case ha:return"wgs84ToWebMercator";
case ja:return"wgs84ToPlateCarree";case ta:return"wgs84ToWGS84ECEF";case O:return"webMercatorToWGS84";case S:return"webMercatorToSphericalECEF";case W:return"webMercatorToWGS84ECEF";case ra:return"webMercatorToPlateCarree";case Xa:return"wgs84ECEFToWGS84";case ab:return"wgs84ECEFToSphericalECEF";case $a:return"wgs84ECEFToWebMercator";case Ha:return"sphericalECEFToWGS84";case Fa:return"sphericalECEFToWebMercator";case Ga:return"sphericalMarsPCPFToMars2000";case Da:return"sphericalMoonPCPFToMoon2000";
case Ka:return"sphericalECEFToWGS84ECEF";case ea:return"mars2000ToSphericalPCPF";case ba:return"moon2000ToSphericalPCPF";default:return null}};a.getTransformation=K;a.getTransformations=function(T,da,X=null){if(f.isNone(gb)||f.isNone(nb))throw new Fb;T=gb._getTransformationBySuitability(nb,T,da,X,X?.spatialReference);if(null!==T){da=[];for(const pa of T)da.push(z.fromGE(pa));return da}return[]};a.initializeProjection=function(T,da,X,pa){return V.apply(this,arguments)};a.isLoaded=n;a.load=H;a.localLinearScaleFactors=
function(T,da,X,pa){if(f.isNone(da)||f.isNone(pa))return!1;const za=ia(da,tb);var Aa=ia(pa,gc);if(za===Aa&&za!==la.UNKNOWN||m.equals(da,pa))return X[0]=1,X[1]=1,X[2]=1,!0;if(za===la.SPHERICAL_ECEF){da=N.length(T);T=da/Math.sqrt(T[0]*T[0]+T[1]*T[1]);da/=v.earth.radius;if(Aa===la.WEB_MERCATOR)return X[0]=T*da,X[1]=T*da,X[2]=1,!0;if(Aa===la.WGS84||Aa===la.CGCS2000)return Aa=Cb,X[0]=Aa*T*da,X[1]=Aa*da,X[2]=1,!0}else if(za===la.PLATE_CARREE){if(Aa===la.WGS84||Aa===la.CGCS2000)return X[0]=Cb,X[1]=Cb,X[2]=
1,!0;if(Aa===la.WEB_MERCATOR)return Aa=T[1]/v.earth.radius,X[0]=1,X[1]=1/Math.cos(Aa),X[2]=1,!0}return!1};a.lonLatToSphericalPCPF=function(T,da,X,pa){const za=Math.cos(X);T[0]=Math.cos(da)*za*pa;T[1]=Math.sin(da)*za*pa;T[2]=Math.sin(X)*pa};a.lonLatToWebMercatorComparable=Y;a.project=A;a.projectBoundingRect=function(T,da,X,pa){if(null==T)return!1;if(m.equals(da,pa))return R.copy(X,T),!0;Ra[0]=T[0];Ra[1]=T[1];Ra[2]=0;if(!Na(Ra,da,0,Ra,pa,0,1))return!1;X[0]=Ra[0];X[1]=Ra[1];Ra[0]=T[2];Ra[1]=T[3];Ra[2]=
0;if(!Na(Ra,da,0,Ra,pa,0,1))return!1;X[2]=Ra[0];X[3]=Ra[1];return!0};a.projectBoundingSphere=function(T,da,X,pa){if(f.isNone(da)||f.isNone(pa))return!1;da=cb(da,pa,Oc);if(da.projector===oa)return X[0]=T[0],X[1]=T[1],X[2]=T[2],X[3]=T[3],!0;if(f.isNone(da.projector))return!1;const {source:za,dest:Aa}=da;if(Aa.spatialReferenceId===la.WEB_MERCATOR){da=hb[za.spatialReferenceId][la.WGS84];if(f.isNone(da))return!1;da(T,0,ob,0);ha(ob,0,X,0);X[3]=g(ob[1],T[2],T[3],v.earth.radius);return!0}if(za.spatialReferenceId!==
la.WGS84&&za.spatialReferenceId!==la.CGCS2000||Aa.spatialReferenceId!==la.PLATE_CARREE)da.projector(T,0,X,0),X[3]=T[3]*(za.metersPerUnit??1)/(Aa.metersPerUnit??1);else{pa=hb[la.SPHERICAL_ECEF][la.PLATE_CARREE];let Ia=T[3];f.isSome(hb[za.spatialReferenceId][la.SPHERICAL_ECEF])&&f.isSome(pa)&&(Ia=g(T[1],T[2],T[3],v.earth.radius));da.projector(T,0,X,0);X[3]=Ia}return!0};a.projectBuffer=Na;a.projectDirection=function(T,da,X,pa,za){N.copy(Qa,T);N.add(Jb,T,da);Ja(Qa,X,Qa,za);Ja(Jb,X,Jb,za);N.subtract(pa,
Jb,Qa);N.normalize(pa,pa)};a.projectExtent=function(T,da,X=da.spatialReference,pa=0){return f.isSome(T.spatialReference)&&f.isSome(X)&&f.isSome(Ba(T,T.spatialReference,da,X,pa))};a.projectMany=y;a.projectMultipoint=function(T,da,X=da.spatialReference,pa=0){return f.isSome(T.spatialReference)&&f.isSome(X)&&f.isSome(qa(T,T.spatialReference,da,X,pa))};a.projectOrLoad=function(T,da){T=P([T],da);return f.isSome(T.pending)?{pending:T.pending,geometry:null}:f.isSome(T.geometries)?{pending:null,geometry:T.geometries[0]}:
{pending:null,geometry:null}};a.projectOrLoadMany=P;a.projectPoint=function(T,da,X=da.spatialReference,pa=0){return f.isSome(X)&&f.isSome(T.spatialReference)&&f.isSome(ca(T,T.spatialReference,da,X,pa))};a.projectPointToVector=function(T,da,X,pa=0){Qa[0]=T.x;Qa[1]=T.y;const za=T.z;Qa[2]=void 0!==za?za:pa;return Na(Qa,T.spatialReference,0,da,X,0,1)};a.projectPointToWGS84ComparableLonLat=function(T,da){Qa[0]=T.x;Qa[1]=T.y;const X=T.z;Qa[2]=void 0!==X?X:0;return La(Qa,T.spatialReference,da)};a.projectPolygon=
function(T,da,X=da.spatialReference,pa=0){return f.isSome(T.spatialReference)&&f.isSome(X)&&f.isSome(xa(T,T.spatialReference,da,X,pa))};a.projectPolygonToWGS84ComparableLonLat=function({hasZ:T,spatialReference:da,rings:X},pa,za=0){da=ia(da,tb);da=hb[da][la.WGS84_COMPARABLE_LON_LAT];if(f.isNone(da))return!1;T=T?Aa=>Aa:Aa=>N.set(Qa,Aa[0],Aa[1],za);for(const Aa of X){X=[];for(const Ia of Aa){const Ma=[0,0,za];da(T(Ia),0,Ma,0);X.push(Ma)}pa.push(X)}return!0};a.projectPolyline=function(T,da,X=da.spatialReference,
pa=0){return f.isSome(T.spatialReference)&&f.isSome(X)&&f.isSome(wa(T,T.spatialReference,da,X,pa))};a.projectPolylineToWGS84ComparableLonLat=function({hasZ:T,spatialReference:da,paths:X},pa,za=0){da=ia(da,tb);da=hb[da][la.WGS84_COMPARABLE_LON_LAT];if(f.isNone(da))return!1;T=T?Aa=>Aa:Aa=>N.set(Qa,Aa[0],Aa[1],za);for(const Aa of X){X=[];for(const Ia of Aa){const Ma=[0,0,za];da(T(Ia),0,Ma,0);X.push(Ma)}pa.push(X)}return!0};a.projectVectorToDehydratedPoint=function(T,da,X){return Na(T,da,0,Qa,X.spatialReference,
0,1)?(X.x=Qa[0],X.y=Qa[1],X.z=Qa[2],X):null};a.projectVectorToPoint=function(T,da,X){if(f.isNone(da)||f.isNone(X))return null;const pa=new l({spatialReference:X});return Na(T,da,0,Qa,X,0,1)?(pa.x=Qa[0],pa.y=Qa[1],pa.z=Qa[2],pa):null};a.projectVectorToVector=Ja;a.projectVectorToWGS84ComparableLonLat=function(T,da,X){return La(T,da,X)};a.projectWithoutEngine=ka;a.projectXYZToVector=Ca;a.sphericalPCPFtoLonLatElevation=ya;a.test={get loadPromise(){return Ya}};a.tryProjectWithZConversion=U;a.unload=function(){Ya=
nb=gb=null;Eb={}};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(c,a){let I=function(){function C(){this._observers=[]}var k=C.prototype;k.observe=function(f){this._observers.includes(f)||this._observers.push(f);return new a.ObservationHandle(this._observers,f)};k.notify=function(){const f=this._observers.slice();for(let t=0;t<f.length;++t){const r=
f[t];r.onInvalidated();r.onCommitted()}};return C}();c.SimpleObservable=I;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(c,a,I){function C(g,F){g[0]=F[0];g[1]=F[1];g[2]=F[2];g[3]=F[3];g[4]=F[4];g[5]=F[5];g[6]=F[6];g[7]=F[7];g[8]=F[8];g[9]=F[9];g[10]=F[10];g[11]=F[11];g[12]=F[12];g[13]=F[13];g[14]=F[14];g[15]=F[15];return g}function k(g,F,fa,ia,oa,O,S,W,Y,ha,ja,na,ra,sa,ba,
ea,ma){g[0]=F;g[1]=fa;g[2]=ia;g[3]=oa;g[4]=O;g[5]=S;g[6]=W;g[7]=Y;g[8]=ha;g[9]=ja;g[10]=na;g[11]=ra;g[12]=sa;g[13]=ba;g[14]=ea;g[15]=ma;return g}function f(g){g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function t(g,F){if(g===F){const fa=F[1],ia=F[2],oa=F[3],O=F[6],S=F[7],W=F[11];g[1]=F[4];g[2]=F[8];g[3]=F[12];g[4]=fa;g[6]=F[9];g[7]=F[13];g[8]=ia;g[9]=O;g[11]=F[14];g[12]=oa;g[13]=S;g[14]=W}else g[0]=F[0],g[1]=F[4],
g[2]=F[8],g[3]=F[12],g[4]=F[1],g[5]=F[5],g[6]=F[9],g[7]=F[13],g[8]=F[2],g[9]=F[6],g[10]=F[10],g[11]=F[14],g[12]=F[3],g[13]=F[7],g[14]=F[11],g[15]=F[15];return g}function r(g,F){const fa=F[0],ia=F[1],oa=F[2],O=F[3],S=F[4],W=F[5],Y=F[6],ha=F[7],ja=F[8],na=F[9],ra=F[10],sa=F[11],ba=F[12],ea=F[13],ma=F[14];F=F[15];const ya=fa*W-ia*S,Da=fa*Y-oa*S,Ga=fa*ha-O*S,Ha=ia*Y-oa*W,Fa=ia*ha-O*W,Ka=oa*ha-O*Y,ta=ja*ea-na*ba,Xa=ja*ma-ra*ba,ab=ja*F-sa*ba,$a=na*ma-ra*ea,e=na*F-sa*ea,cb=ra*F-sa*ma;let Sa=ya*cb-Da*e+Ga*
$a+Ha*ab-Fa*Xa+Ka*ta;if(!Sa)return null;Sa=1/Sa;g[0]=(W*cb-Y*e+ha*$a)*Sa;g[1]=(oa*e-ia*cb-O*$a)*Sa;g[2]=(ea*Ka-ma*Fa+F*Ha)*Sa;g[3]=(ra*Fa-na*Ka-sa*Ha)*Sa;g[4]=(Y*ab-S*cb-ha*Xa)*Sa;g[5]=(fa*cb-oa*ab+O*Xa)*Sa;g[6]=(ma*Ga-ba*Ka-F*Da)*Sa;g[7]=(ja*Ka-ra*Ga+sa*Da)*Sa;g[8]=(S*e-W*ab+ha*ta)*Sa;g[9]=(ia*ab-fa*e-O*ta)*Sa;g[10]=(ba*Fa-ea*Ga+F*ya)*Sa;g[11]=(na*Ga-ja*Fa-sa*ya)*Sa;g[12]=(W*Xa-S*$a-Y*ta)*Sa;g[13]=(fa*$a-ia*Xa+oa*ta)*Sa;g[14]=(ea*Da-ba*Ha-ma*ya)*Sa;g[15]=(ja*Ha-na*Da+ra*ya)*Sa;return g}function p(g,
F){const fa=F[0],ia=F[1],oa=F[2],O=F[3],S=F[4],W=F[5],Y=F[6],ha=F[7],ja=F[8],na=F[9],ra=F[10],sa=F[11],ba=F[12],ea=F[13],ma=F[14];F=F[15];g[0]=W*(ra*F-sa*ma)-na*(Y*F-ha*ma)+ea*(Y*sa-ha*ra);g[1]=-(ia*(ra*F-sa*ma)-na*(oa*F-O*ma)+ea*(oa*sa-O*ra));g[2]=ia*(Y*F-ha*ma)-W*(oa*F-O*ma)+ea*(oa*ha-O*Y);g[3]=-(ia*(Y*sa-ha*ra)-W*(oa*sa-O*ra)+na*(oa*ha-O*Y));g[4]=-(S*(ra*F-sa*ma)-ja*(Y*F-ha*ma)+ba*(Y*sa-ha*ra));g[5]=fa*(ra*F-sa*ma)-ja*(oa*F-O*ma)+ba*(oa*sa-O*ra);g[6]=-(fa*(Y*F-ha*ma)-S*(oa*F-O*ma)+ba*(oa*ha-O*
Y));g[7]=fa*(Y*sa-ha*ra)-S*(oa*sa-O*ra)+ja*(oa*ha-O*Y);g[8]=S*(na*F-sa*ea)-ja*(W*F-ha*ea)+ba*(W*sa-ha*na);g[9]=-(fa*(na*F-sa*ea)-ja*(ia*F-O*ea)+ba*(ia*sa-O*na));g[10]=fa*(W*F-ha*ea)-S*(ia*F-O*ea)+ba*(ia*ha-O*W);g[11]=-(fa*(W*sa-ha*na)-S*(ia*sa-O*na)+ja*(ia*ha-O*W));g[12]=-(S*(na*ma-ra*ea)-ja*(W*ma-Y*ea)+ba*(W*ra-Y*na));g[13]=fa*(na*ma-ra*ea)-ja*(ia*ma-oa*ea)+ba*(ia*ra-oa*na);g[14]=-(fa*(W*ma-Y*ea)-S*(ia*ma-oa*ea)+ba*(ia*Y-oa*W));g[15]=fa*(W*ra-Y*na)-S*(ia*ra-oa*na)+ja*(ia*Y-oa*W);return g}function q(g){const F=
g[0],fa=g[1],ia=g[2],oa=g[3],O=g[4],S=g[5],W=g[6],Y=g[7],ha=g[8],ja=g[9],na=g[10],ra=g[11],sa=g[12],ba=g[13],ea=g[14];g=g[15];return(F*S-fa*O)*(na*g-ra*ea)-(F*W-ia*O)*(ja*g-ra*ba)+(F*Y-oa*O)*(ja*ea-na*ba)+(fa*W-ia*S)*(ha*g-ra*sa)-(fa*Y-oa*S)*(ha*ea-na*sa)+(ia*Y-oa*W)*(ha*ba-ja*sa)}function B(g,F,fa){const ia=F[0],oa=F[1],O=F[2],S=F[3],W=F[4],Y=F[5],ha=F[6],ja=F[7],na=F[8],ra=F[9],sa=F[10],ba=F[11],ea=F[12],ma=F[13],ya=F[14];F=F[15];let Da=fa[0],Ga=fa[1],Ha=fa[2],Fa=fa[3];g[0]=Da*ia+Ga*W+Ha*na+Fa*
ea;g[1]=Da*oa+Ga*Y+Ha*ra+Fa*ma;g[2]=Da*O+Ga*ha+Ha*sa+Fa*ya;g[3]=Da*S+Ga*ja+Ha*ba+Fa*F;Da=fa[4];Ga=fa[5];Ha=fa[6];Fa=fa[7];g[4]=Da*ia+Ga*W+Ha*na+Fa*ea;g[5]=Da*oa+Ga*Y+Ha*ra+Fa*ma;g[6]=Da*O+Ga*ha+Ha*sa+Fa*ya;g[7]=Da*S+Ga*ja+Ha*ba+Fa*F;Da=fa[8];Ga=fa[9];Ha=fa[10];Fa=fa[11];g[8]=Da*ia+Ga*W+Ha*na+Fa*ea;g[9]=Da*oa+Ga*Y+Ha*ra+Fa*ma;g[10]=Da*O+Ga*ha+Ha*sa+Fa*ya;g[11]=Da*S+Ga*ja+Ha*ba+Fa*F;Da=fa[12];Ga=fa[13];Ha=fa[14];Fa=fa[15];g[12]=Da*ia+Ga*W+Ha*na+Fa*ea;g[13]=Da*oa+Ga*Y+Ha*ra+Fa*ma;g[14]=Da*O+Ga*ha+Ha*
sa+Fa*ya;g[15]=Da*S+Ga*ja+Ha*ba+Fa*F;return g}function N(g,F,fa){const ia=fa[0],oa=fa[1];fa=fa[2];if(F===g)g[12]=F[0]*ia+F[4]*oa+F[8]*fa+F[12],g[13]=F[1]*ia+F[5]*oa+F[9]*fa+F[13],g[14]=F[2]*ia+F[6]*oa+F[10]*fa+F[14],g[15]=F[3]*ia+F[7]*oa+F[11]*fa+F[15];else{const O=F[0],S=F[1],W=F[2],Y=F[3],ha=F[4],ja=F[5],na=F[6],ra=F[7],sa=F[8],ba=F[9],ea=F[10],ma=F[11];g[0]=O;g[1]=S;g[2]=W;g[3]=Y;g[4]=ha;g[5]=ja;g[6]=na;g[7]=ra;g[8]=sa;g[9]=ba;g[10]=ea;g[11]=ma;g[12]=O*ia+ha*oa+sa*fa+F[12];g[13]=S*ia+ja*oa+ba*
fa+F[13];g[14]=W*ia+na*oa+ea*fa+F[14];g[15]=Y*ia+ra*oa+ma*fa+F[15]}return g}function w(g,F,fa){const ia=fa[0],oa=fa[1];fa=fa[2];g[0]=F[0]*ia;g[1]=F[1]*ia;g[2]=F[2]*ia;g[3]=F[3]*ia;g[4]=F[4]*oa;g[5]=F[5]*oa;g[6]=F[6]*oa;g[7]=F[7]*oa;g[8]=F[8]*fa;g[9]=F[9]*fa;g[10]=F[10]*fa;g[11]=F[11]*fa;g[12]=F[12];g[13]=F[13];g[14]=F[14];g[15]=F[15];return g}function h(g,F,fa,ia){let oa=ia[0],O=ia[1];ia=ia[2];let S=Math.sqrt(oa*oa+O*O+ia*ia);var W=void 0,Y=void 0;let ha=void 0,ja=void 0,na=void 0,ra=void 0,sa=void 0,
ba=void 0,ea=void 0,ma=void 0,ya=void 0,Da=void 0,Ga=void 0,Ha=void 0,Fa=void 0,Ka=void 0,ta=void 0,Xa=void 0,ab=void 0,$a=void 0,e=void 0,cb=void 0;Y=W=void 0;if(S<I.getEpsilon())return null;S=1/S;oa*=S;O*=S;ia*=S;W=Math.sin(fa);Y=Math.cos(fa);ha=1-Y;ja=F[0];na=F[1];ra=F[2];sa=F[3];ba=F[4];ea=F[5];ma=F[6];ya=F[7];Da=F[8];Ga=F[9];Ha=F[10];Fa=F[11];Ka=oa*oa*ha+Y;ta=O*oa*ha+ia*W;Xa=ia*oa*ha-O*W;ab=oa*O*ha-ia*W;$a=O*O*ha+Y;e=ia*O*ha+oa*W;cb=oa*ia*ha+O*W;W=O*ia*ha-oa*W;Y=ia*ia*ha+Y;g[0]=ja*Ka+ba*ta+Da*
Xa;g[1]=na*Ka+ea*ta+Ga*Xa;g[2]=ra*Ka+ma*ta+Ha*Xa;g[3]=sa*Ka+ya*ta+Fa*Xa;g[4]=ja*ab+ba*$a+Da*e;g[5]=na*ab+ea*$a+Ga*e;g[6]=ra*ab+ma*$a+Ha*e;g[7]=sa*ab+ya*$a+Fa*e;g[8]=ja*cb+ba*W+Da*Y;g[9]=na*cb+ea*W+Ga*Y;g[10]=ra*cb+ma*W+Ha*Y;g[11]=sa*cb+ya*W+Fa*Y;F!==g&&(g[12]=F[12],g[13]=F[13],g[14]=F[14],g[15]=F[15]);return g}function D(g,F,fa){const ia=Math.sin(fa);fa=Math.cos(fa);const oa=F[4],O=F[5],S=F[6],W=F[7],Y=F[8],ha=F[9],ja=F[10],na=F[11];F!==g&&(g[0]=F[0],g[1]=F[1],g[2]=F[2],g[3]=F[3],g[12]=F[12],g[13]=
F[13],g[14]=F[14],g[15]=F[15]);g[4]=oa*fa+Y*ia;g[5]=O*fa+ha*ia;g[6]=S*fa+ja*ia;g[7]=W*fa+na*ia;g[8]=Y*fa-oa*ia;g[9]=ha*fa-O*ia;g[10]=ja*fa-S*ia;g[11]=na*fa-W*ia;return g}function d(g,F,fa){const ia=Math.sin(fa);fa=Math.cos(fa);const oa=F[0],O=F[1],S=F[2],W=F[3],Y=F[8],ha=F[9],ja=F[10],na=F[11];F!==g&&(g[4]=F[4],g[5]=F[5],g[6]=F[6],g[7]=F[7],g[12]=F[12],g[13]=F[13],g[14]=F[14],g[15]=F[15]);g[0]=oa*fa-Y*ia;g[1]=O*fa-ha*ia;g[2]=S*fa-ja*ia;g[3]=W*fa-na*ia;g[8]=oa*ia+Y*fa;g[9]=O*ia+ha*fa;g[10]=S*ia+ja*
fa;g[11]=W*ia+na*fa;return g}function l(g,F,fa){const ia=Math.sin(fa);fa=Math.cos(fa);const oa=F[0],O=F[1],S=F[2],W=F[3],Y=F[4],ha=F[5],ja=F[6],na=F[7];F!==g&&(g[8]=F[8],g[9]=F[9],g[10]=F[10],g[11]=F[11],g[12]=F[12],g[13]=F[13],g[14]=F[14],g[15]=F[15]);g[0]=oa*fa+Y*ia;g[1]=O*fa+ha*ia;g[2]=S*fa+ja*ia;g[3]=W*fa+na*ia;g[4]=Y*fa-oa*ia;g[5]=ha*fa-O*ia;g[6]=ja*fa-S*ia;g[7]=na*fa-W*ia;return g}function x(g,F){g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=F[0];
g[13]=F[1];g[14]=F[2];g[15]=1;return g}function G(g,F){g[0]=F[0];g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=F[1];g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=F[2];g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function J(g,F,fa){if(0===F)return f(g);let ia=fa[0],oa=fa[1];fa=fa[2];let O=Math.sqrt(ia*ia+oa*oa+fa*fa),S=void 0,W=void 0,Y=void 0;if(O<I.getEpsilon())return null;O=1/O;ia*=O;oa*=O;fa*=O;S=Math.sin(F);W=Math.cos(F);Y=1-W;g[0]=ia*ia*Y+W;g[1]=oa*ia*Y+fa*S;g[2]=fa*ia*Y-oa*S;g[3]=0;g[4]=ia*oa*Y-fa*S;g[5]=oa*oa*
Y+W;g[6]=fa*oa*Y+ia*S;g[7]=0;g[8]=ia*fa*Y+oa*S;g[9]=oa*fa*Y-ia*S;g[10]=fa*fa*Y+W;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function R(g,F){const fa=Math.sin(F);F=Math.cos(F);g[0]=1;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=F;g[6]=fa;g[7]=0;g[8]=0;g[9]=-fa;g[10]=F;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function v(g,F){const fa=Math.sin(F);F=Math.cos(F);g[0]=F;g[1]=0;g[2]=-fa;g[3]=0;g[4]=0;g[5]=1;g[6]=0;g[7]=0;g[8]=fa;g[9]=0;g[10]=F;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function E(g,
F){const fa=Math.sin(F);F=Math.cos(F);g[0]=F;g[1]=fa;g[2]=0;g[3]=0;g[4]=-fa;g[5]=F;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=1;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function z(g,F,fa){var ia=F[0],oa=F[1],O=F[2],S=F[3],W=ia+ia,Y=oa+oa;const ha=O+O;F=ia*W;const ja=ia*Y;ia*=ha;const na=oa*Y;oa*=ha;O*=ha;W*=S;Y*=S;S*=ha;g[0]=1-(na+O);g[1]=ja+S;g[2]=ia-Y;g[3]=0;g[4]=ja-S;g[5]=1-(F+O);g[6]=oa+W;g[7]=0;g[8]=ia+Y;g[9]=oa-W;g[10]=1-(F+na);g[11]=0;g[12]=fa[0];g[13]=fa[1];g[14]=fa[2];g[15]=1;return g}function m(g,
F){const fa=bb,ia=-F[0],oa=-F[1],O=-F[2],S=F[3],W=F[4],Y=F[5],ha=F[6],ja=F[7],na=ia*ia+oa*oa+O*O+S*S;0<na?(fa[0]=2*(W*S+ja*ia+Y*O-ha*oa)/na,fa[1]=2*(Y*S+ja*oa+ha*ia-W*O)/na,fa[2]=2*(ha*S+ja*O+W*oa-Y*ia)/na):(fa[0]=2*(W*S+ja*ia+Y*O-ha*oa),fa[1]=2*(Y*S+ja*oa+ha*ia-W*O),fa[2]=2*(ha*S+ja*O+W*oa-Y*ia));z(g,F,fa);return g}function L(g,F){g[0]=F[12];g[1]=F[13];g[2]=F[14];return g}function b(g,F){const fa=F[0],ia=F[1],oa=F[2],O=F[4],S=F[5],W=F[6],Y=F[8],ha=F[9];F=F[10];g[0]=Math.sqrt(fa*fa+ia*ia+oa*oa);g[1]=
Math.sqrt(O*O+S*S+W*W);g[2]=Math.sqrt(Y*Y+ha*ha+F*F);return g}function n(g,F){const fa=F[0]+F[5]+F[10];let ia=0;0<fa?(ia=2*Math.sqrt(fa+1),g[3]=.25*ia,g[0]=(F[6]-F[9])/ia,g[1]=(F[8]-F[2])/ia,g[2]=(F[1]-F[4])/ia):F[0]>F[5]&&F[0]>F[10]?(ia=2*Math.sqrt(1+F[0]-F[5]-F[10]),g[3]=(F[6]-F[9])/ia,g[0]=.25*ia,g[1]=(F[1]+F[4])/ia,g[2]=(F[8]+F[2])/ia):F[5]>F[10]?(ia=2*Math.sqrt(1+F[5]-F[0]-F[10]),g[3]=(F[8]-F[2])/ia,g[0]=(F[1]+F[4])/ia,g[1]=.25*ia,g[2]=(F[6]+F[9])/ia):(ia=2*Math.sqrt(1+F[10]-F[0]-F[5]),g[3]=
(F[1]-F[4])/ia,g[0]=(F[8]+F[2])/ia,g[1]=(F[6]+F[9])/ia,g[2]=.25*ia);return g}function H(g,F,fa,ia){var oa=F[0],O=F[1],S=F[2],W=F[3],Y=oa+oa,ha=O+O,ja=S+S;F=oa*Y;const na=oa*ha;oa*=ja;const ra=O*ha;O*=ja;S*=ja;Y*=W;ha*=W;W*=ja;ja=ia[0];const sa=ia[1];ia=ia[2];g[0]=(1-(ra+S))*ja;g[1]=(na+W)*ja;g[2]=(oa-ha)*ja;g[3]=0;g[4]=(na-W)*sa;g[5]=(1-(F+S))*sa;g[6]=(O+Y)*sa;g[7]=0;g[8]=(oa+ha)*ia;g[9]=(O-Y)*ia;g[10]=(1-(F+ra))*ia;g[11]=0;g[12]=fa[0];g[13]=fa[1];g[14]=fa[2];g[15]=1;return g}function A(g,F,fa,ia,
oa){var O=F[0],S=F[1],W=F[2],Y=F[3],ha=O+O,ja=S+S,na=W+W;F=O*ha;var ra=O*ja,sa=O*na;O=S*ja;S*=na;var ba=W*na;W=Y*ha;ja*=Y;const ea=Y*na;var ma=ia[0],ya=ia[1];na=ia[2];ia=oa[0];Y=oa[1];oa=oa[2];ha=(1-(O+ba))*ma;const Da=(ra+ea)*ma;ma*=sa-ja;ra=(ra-ea)*ya;ba=(1-(F+ba))*ya;ya*=S+W;sa=(sa+ja)*na;S=(S-W)*na;F=(1-(F+O))*na;g[0]=ha;g[1]=Da;g[2]=ma;g[3]=0;g[4]=ra;g[5]=ba;g[6]=ya;g[7]=0;g[8]=sa;g[9]=S;g[10]=F;g[11]=0;g[12]=fa[0]+ia-(ha*ia+ra*Y+sa*oa);g[13]=fa[1]+Y-(Da*ia+ba*Y+S*oa);g[14]=fa[2]+oa-(ma*ia+ya*
Y+F*oa);g[15]=1;return g}function y(g,F){var fa=F[0],ia=F[1],oa=F[2];F=F[3];var O=fa+fa,S=ia+ia;const W=oa+oa;fa*=O;const Y=ia*O;ia*=S;const ha=oa*O,ja=oa*S;oa*=W;O*=F;S*=F;F*=W;g[0]=1-ia-oa;g[1]=Y+F;g[2]=ha-S;g[3]=0;g[4]=Y-F;g[5]=1-fa-oa;g[6]=ja+O;g[7]=0;g[8]=ha+S;g[9]=ja-O;g[10]=1-fa-ia;g[11]=0;g[12]=0;g[13]=0;g[14]=0;g[15]=1;return g}function P(g,F,fa,ia,oa,O,S){const W=1/(fa-F),Y=1/(oa-ia),ha=1/(O-S);g[0]=2*O*W;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*O*Y;g[6]=0;g[7]=0;g[8]=(fa+F)*W;g[9]=(oa+ia)*Y;
g[10]=(S+O)*ha;g[11]=-1;g[12]=0;g[13]=0;g[14]=S*O*2*ha;g[15]=0;return g}function K(g,F,fa,ia,oa){F=1/Math.tan(F/2);let O=void 0;g[0]=F/fa;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=F;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[11]=-1;g[12]=0;g[13]=0;g[15]=0;null!=oa&&Infinity!==oa?(O=1/(ia-oa),g[10]=(oa+ia)*O,g[14]=2*oa*ia*O):(g[10]=-1,g[14]=-2*ia);return g}function U(g,F,fa,ia){const oa=Math.tan(F.upDegrees*Math.PI/180),O=Math.tan(F.downDegrees*Math.PI/180),S=Math.tan(F.leftDegrees*Math.PI/180);F=Math.tan(F.rightDegrees*
Math.PI/180);const W=2/(S+F),Y=2/(oa+O);g[0]=W;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=Y;g[6]=0;g[7]=0;g[8]=-((S-F)*W*.5);g[9]=(oa-O)*Y*.5;g[10]=ia/(fa-ia);g[11]=-1;g[12]=0;g[13]=0;g[14]=ia*fa/(fa-ia);g[15]=0;return g}function Z(g,F,fa,ia,oa,O,S){const W=1/(F-fa),Y=1/(ia-oa),ha=1/(O-S);g[0]=-2*W;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=-2*Y;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=2*ha;g[11]=0;g[12]=(F+fa)*W;g[13]=(oa+ia)*Y;g[14]=(S+O)*ha;g[15]=1;return g}function V(g,F,fa,ia){var oa=void 0;let O=void 0;var S=void 0,W=
void 0;let Y=void 0,ha=void 0;var ja=void 0,na=void 0;let ra=void 0,sa=void 0;const ba=F[0],ea=F[1];F=F[2];S=ia[0];W=ia[1];ia=ia[2];ja=fa[0];na=fa[1];fa=fa[2];oa=I.getEpsilon();if(Math.abs(ba-ja)<oa&&Math.abs(ea-na)<oa&&Math.abs(F-fa)<oa)return f(g);ja=ba-ja;na=ea-na;ra=F-fa;sa=1/Math.sqrt(ja*ja+na*na+ra*ra);ja*=sa;na*=sa;ra*=sa;oa=W*ra-ia*na;O=ia*ja-S*ra;S=S*na-W*ja;(sa=Math.sqrt(oa*oa+O*O+S*S))?(sa=1/sa,oa*=sa,O*=sa,S*=sa):S=O=oa=0;W=na*S-ra*O;Y=ra*oa-ja*S;ha=ja*O-na*oa;(sa=Math.sqrt(W*W+Y*Y+ha*
ha))?(sa=1/sa,W*=sa,Y*=sa,ha*=sa):ha=Y=W=0;g[0]=oa;g[1]=W;g[2]=ja;g[3]=0;g[4]=O;g[5]=Y;g[6]=na;g[7]=0;g[8]=S;g[9]=ha;g[10]=ra;g[11]=0;g[12]=-(oa*ba+O*ea+S*F);g[13]=-(W*ba+Y*ea+ha*F);g[14]=-(ja*ba+na*ea+ra*F);g[15]=1;return g}function ka(g,F,fa,ia){const oa=F[0],O=F[1];F=F[2];var S=ia[0];const W=ia[1];var Y=ia[2];ia=oa-fa[0];let ha=O-fa[1];fa=F-fa[2];let ja=ia*ia+ha*ha+fa*fa;0<ja&&(ja=1/Math.sqrt(ja),ia*=ja,ha*=ja,fa*=ja);let na=W*fa-Y*ha;Y=Y*ia-S*fa;S=S*ha-W*ia;ja=na*na+Y*Y+S*S;0<ja&&(ja=1/Math.sqrt(ja),
na*=ja,Y*=ja,S*=ja);g[0]=na;g[1]=Y;g[2]=S;g[3]=0;g[4]=ha*S-fa*Y;g[5]=fa*na-ia*S;g[6]=ia*Y-ha*na;g[7]=0;g[8]=ia;g[9]=ha;g[10]=fa;g[11]=0;g[12]=oa;g[13]=O;g[14]=F;g[15]=1;return g}function ca(g){return"mat4("+g[0]+", "+g[1]+", "+g[2]+", "+g[3]+", "+g[4]+", "+g[5]+", "+g[6]+", "+g[7]+", "+g[8]+", "+g[9]+", "+g[10]+", "+g[11]+", "+g[12]+", "+g[13]+", "+g[14]+", "+g[15]+")"}function qa(g){return Math.sqrt(g[0]**2+g[1]**2+g[2]**2+g[3]**2+g[4]**2+g[5]**2+g[6]**2+g[7]**2+g[8]**2+g[9]**2+g[10]**2+g[11]**2+
g[12]**2+g[13]**2+g[14]**2+g[15]**2)}function wa(g,F,fa){g[0]=F[0]+fa[0];g[1]=F[1]+fa[1];g[2]=F[2]+fa[2];g[3]=F[3]+fa[3];g[4]=F[4]+fa[4];g[5]=F[5]+fa[5];g[6]=F[6]+fa[6];g[7]=F[7]+fa[7];g[8]=F[8]+fa[8];g[9]=F[9]+fa[9];g[10]=F[10]+fa[10];g[11]=F[11]+fa[11];g[12]=F[12]+fa[12];g[13]=F[13]+fa[13];g[14]=F[14]+fa[14];g[15]=F[15]+fa[15];return g}function xa(g,F,fa){g[0]=F[0]-fa[0];g[1]=F[1]-fa[1];g[2]=F[2]-fa[2];g[3]=F[3]-fa[3];g[4]=F[4]-fa[4];g[5]=F[5]-fa[5];g[6]=F[6]-fa[6];g[7]=F[7]-fa[7];g[8]=F[8]-fa[8];
g[9]=F[9]-fa[9];g[10]=F[10]-fa[10];g[11]=F[11]-fa[11];g[12]=F[12]-fa[12];g[13]=F[13]-fa[13];g[14]=F[14]-fa[14];g[15]=F[15]-fa[15];return g}function Ba(g,F,fa){g[0]=F[0]*fa;g[1]=F[1]*fa;g[2]=F[2]*fa;g[3]=F[3]*fa;g[4]=F[4]*fa;g[5]=F[5]*fa;g[6]=F[6]*fa;g[7]=F[7]*fa;g[8]=F[8]*fa;g[9]=F[9]*fa;g[10]=F[10]*fa;g[11]=F[11]*fa;g[12]=F[12]*fa;g[13]=F[13]*fa;g[14]=F[14]*fa;g[15]=F[15]*fa;return g}function Ca(g,F,fa,ia){g[0]=F[0]+fa[0]*ia;g[1]=F[1]+fa[1]*ia;g[2]=F[2]+fa[2]*ia;g[3]=F[3]+fa[3]*ia;g[4]=F[4]+fa[4]*
ia;g[5]=F[5]+fa[5]*ia;g[6]=F[6]+fa[6]*ia;g[7]=F[7]+fa[7]*ia;g[8]=F[8]+fa[8]*ia;g[9]=F[9]+fa[9]*ia;g[10]=F[10]+fa[10]*ia;g[11]=F[11]+fa[11]*ia;g[12]=F[12]+fa[12]*ia;g[13]=F[13]+fa[13]*ia;g[14]=F[14]+fa[14]*ia;g[15]=F[15]+fa[15]*ia;return g}function Ja(g,F){return g[0]===F[0]&&g[1]===F[1]&&g[2]===F[2]&&g[3]===F[3]&&g[4]===F[4]&&g[5]===F[5]&&g[6]===F[6]&&g[7]===F[7]&&g[8]===F[8]&&g[9]===F[9]&&g[10]===F[10]&&g[11]===F[11]&&g[12]===F[12]&&g[13]===F[13]&&g[14]===F[14]&&g[15]===F[15]}function La(g,F){if(g===
F)return!0;const fa=g[0],ia=g[1],oa=g[2],O=g[3],S=g[4],W=g[5],Y=g[6],ha=g[7],ja=g[8],na=g[9],ra=g[10],sa=g[11],ba=g[12],ea=g[13],ma=g[14];g=g[15];const ya=F[0],Da=F[1],Ga=F[2],Ha=F[3],Fa=F[4],Ka=F[5],ta=F[6],Xa=F[7],ab=F[8],$a=F[9],e=F[10],cb=F[11],Sa=F[12],gb=F[13],nb=F[14];F=F[15];const Ya=I.getEpsilon();return Math.abs(fa-ya)<=Ya*Math.max(1,Math.abs(fa),Math.abs(ya))&&Math.abs(ia-Da)<=Ya*Math.max(1,Math.abs(ia),Math.abs(Da))&&Math.abs(oa-Ga)<=Ya*Math.max(1,Math.abs(oa),Math.abs(Ga))&&Math.abs(O-
Ha)<=Ya*Math.max(1,Math.abs(O),Math.abs(Ha))&&Math.abs(S-Fa)<=Ya*Math.max(1,Math.abs(S),Math.abs(Fa))&&Math.abs(W-Ka)<=Ya*Math.max(1,Math.abs(W),Math.abs(Ka))&&Math.abs(Y-ta)<=Ya*Math.max(1,Math.abs(Y),Math.abs(ta))&&Math.abs(ha-Xa)<=Ya*Math.max(1,Math.abs(ha),Math.abs(Xa))&&Math.abs(ja-ab)<=Ya*Math.max(1,Math.abs(ja),Math.abs(ab))&&Math.abs(na-$a)<=Ya*Math.max(1,Math.abs(na),Math.abs($a))&&Math.abs(ra-e)<=Ya*Math.max(1,Math.abs(ra),Math.abs(e))&&Math.abs(sa-cb)<=Ya*Math.max(1,Math.abs(sa),Math.abs(cb))&&
Math.abs(ba-Sa)<=Ya*Math.max(1,Math.abs(ba),Math.abs(Sa))&&Math.abs(ea-gb)<=Ya*Math.max(1,Math.abs(ea),Math.abs(gb))&&Math.abs(ma-nb)<=Ya*Math.max(1,Math.abs(ma),Math.abs(nb))&&Math.abs(g-F)<=Ya*Math.max(1,Math.abs(g),Math.abs(F))}function Na(g){const F=I.getEpsilon(),fa=g[0],ia=g[1],oa=g[2],O=g[4],S=g[5],W=g[6],Y=g[8],ha=g[9];g=g[10];return Math.abs(1-(fa*fa+O*O+Y*Y))<=F&&Math.abs(1-(ia*ia+S*S+ha*ha))<=F&&Math.abs(1-(oa*oa+W*W+g*g))<=F}const bb=a.create();a=Object.freeze(Object.defineProperty({__proto__:null,
copy:C,set:k,identity:f,transpose:t,invert:r,adjoint:p,determinant:q,multiply:B,translate:N,scale:w,rotate:h,rotateX:D,rotateY:d,rotateZ:l,fromTranslation:x,fromScaling:G,fromRotation:J,fromXRotation:R,fromYRotation:v,fromZRotation:E,fromRotationTranslation:z,fromQuat2:m,getTranslation:L,getScaling:b,getRotation:n,fromRotationTranslationScale:H,fromRotationTranslationScaleOrigin:A,fromQuat:y,frustum:P,perspective:K,perspectiveFromFieldOfView:U,ortho:Z,lookAt:V,targetTo:ka,str:ca,frob:qa,add:wa,subtract:xa,
multiplyScalar:Ba,multiplyScalarAndAdd:Ca,exactEquals:Ja,equals:La,isOrthoNormal:Na,mul:B,sub:xa},Symbol.toStringTag,{value:"Module"}));c.add=wa;c.adjoint=p;c.copy=C;c.determinant=q;c.equals=La;c.exactEquals=Ja;c.frob=qa;c.fromQuat=y;c.fromQuat2=m;c.fromRotation=J;c.fromRotationTranslation=z;c.fromRotationTranslationScale=H;c.fromRotationTranslationScaleOrigin=A;c.fromScaling=G;c.fromTranslation=x;c.fromXRotation=R;c.fromYRotation=v;c.fromZRotation=E;c.frustum=P;c.getRotation=n;c.getScaling=b;c.getTranslation=
L;c.identity=f;c.invert=r;c.isOrthoNormal=Na;c.lookAt=V;c.mat4=a;c.mul=B;c.multiply=B;c.multiplyScalar=Ba;c.multiplyScalarAndAdd=Ca;c.ortho=Z;c.perspective=K;c.perspectiveFromFieldOfView=U;c.rotate=h;c.rotateX=D;c.rotateY=d;c.rotateZ=l;c.scale=w;c.set=k;c.str=ca;c.sub=xa;c.subtract=xa;c.targetTo=ka;c.translate=N;c.transpose=t})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../assets","../core/has"],function(c,a,I,C,k){function f(){return!!a._pe}function t(){return!!k("esri-wasm")}
function r(){return h?h:h=(new Promise((d,l)=>c(["./pe-wasm"],d,l))).then(d=>d.peWasm).then(({default:d})=>d({locateFile:l=>C.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{p(d)})}function p(d){function l(J,R,v){J[R]=v(J[R])}a._pe=d;a.PeDefs.init();a.PeGTlistExtended.init();a.PeNotationMgrs.init();a.PeNotationUtm.init();a.PePCSInfo.init();a.PeGCSExtent=function(J){function R(){return J.apply(this,arguments)||this}I._inheritsLoose(R,J);R.prototype.destroy=function(){a._pe.destroy(this)};return R}(a._pe.PeGCSExtent);
d=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];for(var x of d)l(x.prototype,"getName",J=>function(){return J.call(this,Array(a.PeDefs.PE_NAME_MAX))});for(const J of[a._pe.PeGeogtran,a._pe.PeProjcs])l(J.prototype,"getParameters",R=>function(){const v=Array(a.PeDefs.PE_PARM_MAX);let E=R.call(this);for(let z=0;z<v.length;z++){const m=a._pe.getValue(E,"*");v[z]=m?a._pe.wrapPointer(m,a._pe.PeParameter):null;
E+=Int32Array.BYTES_PER_ELEMENT}return v});l(a._pe.PeHorizon.prototype,"getCoord",J=>function(){const R=this.getSize();if(!R)return null;const v=[],E=J.call(this);w(v,R,E);return v});l(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",J=>{const R=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){let v=null;var E=J.call(this);if(!a._pe.compare(E,a._pe.NULL)){v=[E];const z=this.getSteps();if(1<z){E=a._pe.getPointer(E);for(let m=1;m<z;m++)v.push(a._pe.wrapPointer(E+R*m,a._pe.PeGTlistExtendedGTs))}}return v}});
const G=a._pe._pe_getPeHorizonSize();x=J=>function(){let R=this._cache;R||(this._cache=R=new Map);if(R.has(J))return R.get(J);let v=null;var E=J.call(this);if(!a._pe.compare(E,a._pe.NULL)){v=[E];const z=E.getNump();if(1<z){E=a._pe.getPointer(E);for(let m=1;m<z;m++)v.push(a._pe.wrapPointer(E+G*m,a._pe.PeHorizon))}}R.set(J,v);return v};l(a._pe.PeProjcs.prototype,"horizonGcsGenerate",x);l(a._pe.PeProjcs.prototype,"horizonPcsGenerate",x);a._pe.PeObject.prototype.toString=function(J=a.PeDefs.PE_STR_OPTS_NONE){a._pe.ensureCache.prepare();
const R=a._pe.getPointer(this),v=a._pe.ensureInt8(Array(a.PeDefs.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(R,J,v))}}function q(d){if(d){var l=a._pe.getClass(d);l&&(l=a._pe.getCache(l))&&(d=a._pe.getPointer(d))&&delete l[d]}}function B(d,l){const x=[];l=Array(l);for(let G=0;G<d;G++)x.push(a._pe.ensureInt8(l));return x}function N(d){let l;Array.isArray(d[0])?(l=[],d.forEach(x=>{l.push(x[0],x[1])})):l=d;return l}function w(d,l,x,G=!1){if(G)for(G=0;G<2*l;G++)d[G]=a._pe.getValue(x+
G*Float64Array.BYTES_PER_ELEMENT,"double");else{G=0===d.length;for(let J=0;J<l;J++)G&&(d[J]=Array(2)),d[J][0]=a._pe.getValue(x,"double"),d[J][1]=a._pe.getValue(x+Float64Array.BYTES_PER_ELEMENT,"double"),x+=2*Float64Array.BYTES_PER_ELEMENT}}let h;a._pe=null;a.PeCSTransformations=void 0;(function(d){function l(J,R,v){a._pe.ensureCache.prepare();var E=N(v);const z=v===E;E=a._pe.ensureFloat64(E);(J=a._pe._pe_geog_to_proj(a._pe.getPointer(J),R,E))&&w(v,R,E,z);return J}function x(J,R,v){return G(J,R,v,
0)}function G(J,R,v,E){a._pe.ensureCache.prepare();var z=N(v);const m=v===z;z=a._pe.ensureFloat64(z);(J=a._pe._pe_proj_to_geog_center(a._pe.getPointer(J),R,z,E))&&w(v,R,z,m);return J}d.geogToProj=l;d.projGeog=function(J,R,v,E){switch(E){case a.PeDefs.PE_TRANSFORM_P_TO_G:return x(J,R,v);case a.PeDefs.PE_TRANSFORM_G_TO_P:return l(J,R,v)}return 0};d.projToGeog=x;d.projToGeogCenter=G})(a.PeCSTransformations||(a.PeCSTransformations={}));a.PeDefs=void 0;(function(d){d.init=function(){d.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;
d.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;d.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=
a._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=a._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=
a._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;
d.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(a.PeDefs||(a.PeDefs={}));a.PeFactory=void 0;(function(d){function l(R,v){let E=null,z=x[R];z||(z={},x[R]=z);z.hasOwnProperty(String(v))?E=z[v]:(R=a._pe.PeFactory.prototype.factoryByType(R,v),a._pe.compare(R,a._pe.NULL)||(E=R,z[v]=E));return E=J(E)}const x={},G={},J=R=>{if(R){const v=R.getType();switch(v){case a.PeDefs.PE_TYPE_GEOGCS:R=a._pe.castObject(R,a._pe.PeGeogcs);break;case a.PeDefs.PE_TYPE_PROJCS:R=a._pe.castObject(R,a._pe.PeProjcs);
break;case a.PeDefs.PE_TYPE_GEOGTRAN:R=a._pe.castObject(R,a._pe.PeGeogtran);break;default:v&a.PeDefs.PE_TYPE_UNIT&&(R=a._pe.castObject(R,a._pe.PeUnit))}}return R};d.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(R){return l(a.PeDefs.PE_TYPE_COORDSYS,R)};d.factoryByType=l;d.fromString=function(R,v){let E=null,z=G[R];z||(z={},G[R]=z);z.hasOwnProperty(v)?E=z[v]:(R=a._pe.PeFactory.prototype.fromString(R,v),a._pe.compare(R,a._pe.NULL)||(E=R,z[v]=E));return E=J(E)};
d.geogcs=function(R){return l(a.PeDefs.PE_TYPE_GEOGCS,R)};d.geogtran=function(R){return l(a.PeDefs.PE_TYPE_GEOGTRAN,R)};d.getCode=function(R){return a._pe.PeFactory.prototype.getCode(R)};d.projcs=function(R){return l(a.PeDefs.PE_TYPE_PROJCS,R)};d.unit=function(R){return l(a.PeDefs.PE_TYPE_UNIT,R)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;a.PeGTlistExtended=void 0;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=a._pe._pe_getPeGTlistExtendedEntrySize()};
d.getGTlist=function(x,G,J,R,v,E){let z=null;const m=new a._pe.PeInteger(E);try{const L=a._pe.PeGTlistExtended.prototype.getGTlist(x,G,J,R,v,m);if(E=m.val)if(z=[L],1<E){const b=a._pe.getPointer(L);for(x=1;x<E;x++)z.push(a._pe.wrapPointer(b+l*x,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(m)}return z}})(a.PeGTlistExtended||(a.PeGTlistExtended={}));a.PeGTlistExtendedEntry=void 0;(function(d){d.destroy=function(l){if(l&&l.length){for(const x of l)q(x),x.getEntries().forEach(G=>{q(G);G=G.getGeogtran();
q(G);G.getParameters().forEach(q);[G.getGeogcs1(),G.getGeogcs2()].forEach(J=>{q(J);const R=J.getDatum();q(R);q(R.getSpheroid());q(J.getPrimem());q(J.getUnit())})});a._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));a.PeGTTransformations=void 0;(function(d){d.geogToGeog=function(l,x,G,J,R){a._pe.ensureCache.prepare();var v=N(G);const E=G===v;v=a._pe.ensureFloat64(v);let z=0;J&&(z=a._pe.ensureFloat64(J));(l=a._pe._pe_geog_to_geog(a._pe.getPointer(l),
x,v,z,R))&&w(G,x,v,E);return l}})(a.PeGTTransformations||(a.PeGTTransformations={}));a.PeNotationDms=void 0;(function(d){const l=(G,J,R,v,E,z)=>{a._pe.ensureCache.prepare();switch(G){case "dd":var m=a._pe._pe_geog_to_dd;var L=a.PeDefs.PE_DD_MAX;break;case "ddm":m=a._pe._pe_geog_to_ddm;L=a.PeDefs.PE_DDM_MAX;break;case "dms":m=a._pe._pe_geog_to_dms,L=a.PeDefs.PE_DMS_MAX}G=0;J&&(G=a._pe.getPointer(J));J=N(v);J=a._pe.ensureFloat64(J);L=B(R,L);v=a._pe.ensureInt32(L);if(E=m(G,R,J,E,v))for(m=0;m<R;m++)z[m]=
a._pe.UTF8ToString(L[m]);return E},x=(G,J,R,v,E)=>{a._pe.ensureCache.prepare();switch(G){case "dd":var z=a._pe._pe_dd_to_geog;break;case "ddm":z=a._pe._pe_ddm_to_geog;break;case "dms":z=a._pe._pe_dms_to_geog}G=0;J&&(G=a._pe.getPointer(J));J=v.map(m=>a._pe.ensureString(m));v=a._pe.ensureInt32(J);J=a._pe.ensureFloat64(Array(2*R));(z=z(G,R,v,J))&&w(E,R,J);return z};d.geogToDms=function(G,J,R,v,E){return l("dms",G,J,R,v,E)};d.dmsToGeog=function(G,J,R,v){return x("dms",G,J,R,v)};d.geogToDdm=function(G,
J,R,v,E){return l("ddm",G,J,R,v,E)};d.ddmToGeog=function(G,J,R,v){return x("ddm",G,J,R,v)};d.geogToDd=function(G,J,R,v,E){return l("dd",G,J,R,v,E)};d.ddToGeog=function(G,J,R,v){return x("dd",G,J,R,v)}})(a.PeNotationDms||(a.PeNotationDms={}));a.PeNotationMgrs=void 0;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;
d.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geogToMgrsExtended=function(l,x,G,J,R,v,E){a._pe.ensureCache.prepare();let z=0;l&&(z=a._pe.getPointer(l));l=N(G);G=a._pe.ensureFloat64(l);l=B(x,a.PeDefs.PE_MGRS_MAX);const m=a._pe.ensureInt32(l);if(J=a._pe._pe_geog_to_mgrs_extended(z,x,G,J,R,v,m))for(R=0;R<x;R++)E[R]=a._pe.UTF8ToString(l[R]);return J};d.mgrsToGeogExtended=function(l,x,G,J,R){a._pe.ensureCache.prepare();
let v=0;l&&(v=a._pe.getPointer(l));l=G.map(E=>a._pe.ensureString(E));G=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*x));(J=a._pe._pe_mgrs_to_geog_extended(v,x,G,J,l))&&w(R,x,l);return J}})(a.PeNotationMgrs||(a.PeNotationMgrs={}));a.PeNotationUsng=void 0;(function(d){d.geogToUsng=function(l,x,G,J,R,v,E){a._pe.ensureCache.prepare();let z=0;l&&(z=a._pe.getPointer(l));l=N(G);G=a._pe.ensureFloat64(l);l=B(x,a.PeDefs.PE_MGRS_MAX);const m=a._pe.ensureInt32(l);if(J=a._pe._pe_geog_to_usng(z,x,G,J,R,v,
m))for(R=0;R<x;R++)E[R]=a._pe.UTF8ToString(l[R]);return J};d.usngToGeog=function(l,x,G,J){a._pe.ensureCache.prepare();var R=0;l&&(R=a._pe.getPointer(l));l=G.map(v=>a._pe.ensureString(v));G=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*x));(R=a._pe._pe_usng_to_geog(R,x,G,l))&&w(J,x,l);return R}})(a.PeNotationUsng||(a.PeNotationUsng={}));a.PeNotationUtm=void 0;(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;
d.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geogToUtm=function(l,x,G,J,R){a._pe.ensureCache.prepare();var v=0;l&&(v=a._pe.getPointer(l));l=N(G);G=a._pe.ensureFloat64(l);l=B(x,a.PeDefs.PE_UTM_MAX);const E=a._pe.ensureInt32(l);if(J=a._pe._pe_geog_to_utm(v,x,G,J,E))for(v=0;v<x;v++)R[v]=a._pe.UTF8ToString(l[v]);return J};d.utmToGeog=function(l,x,G,J,R){a._pe.ensureCache.prepare();let v=0;l&&(v=a._pe.getPointer(l));l=G.map(E=>a._pe.ensureString(E));G=a._pe.ensureInt32(l);l=a._pe.ensureFloat64(Array(2*
x));(J=a._pe._pe_utm_to_geog(v,x,G,J,l))&&w(R,x,l);return J}})(a.PeNotationUtm||(a.PeNotationUtm={}));a.PePCSInfo=void 0;(function(d){const l=new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(x,G=d.PE_PCSINFO_OPTION_DOMAIN){let J=
null,R=null;l.has(x)&&(R=l.get(x),R[G]&&(J=R[G]));J||(J=a._pe.PePCSInfo.prototype.generate(x,G),R||(R=[],l.set(x,R)),R[G]=J);return J}})(a.PePCSInfo||(a.PePCSInfo={}));a.PeVersion=void 0;(function(d){d.versionString=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));const D=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return a._pe},isLoaded:f,isSupported:t,load:r,get PeCSTransformations(){return a.PeCSTransformations},get PeDefs(){return a.PeDefs},
get PeFactory(){return a.PeFactory},get PeGCSExtent(){return a.PeGCSExtent},get PeGTlistExtended(){return a.PeGTlistExtended},get PeGTlistExtendedEntry(){return a.PeGTlistExtendedEntry},get PeGTTransformations(){return a.PeGTTransformations},get PeNotationDms(){return a.PeNotationDms},get PeNotationMgrs(){return a.PeNotationMgrs},get PeNotationUsng(){return a.PeNotationUsng},get PeNotationUtm(){return a.PeNotationUtm},get PePCSInfo(){return a.PePCSInfo},get PeVersion(){return a.PeVersion},_init:p},
Symbol.toStringTag,{value:"Module"}));a._init=p;a.isLoaded=f;a.isSupported=t;a.load=r;a.pe=D})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(c,a){const I=Math.PI/180;var C=a.earth.radius;const k=a.earth.eccentricitySquared;C={a1:C*k,a2:C*k*C*k,a3:C*k*k/2,a4:C*k*C*k*2.5,a5:C*k+C*k*k/2,a6:1-k};a={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:a.earth.radius,f:a.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,
f:0},104902:{a:6051800,f:0},104903:{a:a.moon.radius,f:a.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:a.mars.radius,f:a.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,
f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:a.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};c.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;c.earthEllipsoidConstants=C;c.spheroids=a;c.toRadians=I;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(c){return function(){function a(C){this.steps=
[];this._cachedProjection={};this._chain="";this._gtlistentry=null;if(C&&C.steps)for(const k of C.steps)k instanceof c?this.steps.push(k):this.steps.push(new c({wkid:k.wkid,wkt:k.wkt,isInverse:k.isInverse}))}a.cacheKey=function(C,k){return[void 0!==C.wkid&&null!==C.wkid?C.wkid.toString():"-1",void 0!==C.wkt&&null!==C.wkt?C.wkt.toString():"",void 0!==k.wkid&&null!==k.wkid?k.wkid.toString():"-1",void 0!==k.wkt&&null!==k.wkt?k.wkt.toString():""].join()};a.fromGE=function(C){const k=new a;let f="";for(const t of C.steps)C=
c.fromGE(t),k.steps.push(C),f+=C.uid.toString()+",";k._cachedProjection={};k._gtlistentry=null;k._chain=f;return k};var I=a.prototype;I.getInverse=function(){const C=new a;C.steps=[];for(let k=this.steps.length-1;0<=k;k--)C.steps.push(this.steps[k].getInverse());return C};I.getGTListEntry=function(){let C="";for(const k of this.steps)C+=k.uid.toString()+",";C!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=C);return this._gtlistentry};I.assignCachedGe=function(C,k,f){this._cachedProjection[a.cacheKey(C,
k)]=f};I.getCachedGeTransformation=function(C,k){let f="";for(const t of this.steps)f+=t.uid.toString()+",";f!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=f);C=this._cachedProjection[a.cacheKey(C,k)];return void 0===C?null:C};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(c){let a=0;return function(){function I(C){this.uid=a++;C?(this._wkt=null!=C.wkt?C.wkt:null,this._wkid=null!=
C.wkid?C.wkid:-1,this._isInverse=null!=C.isInverse?!0===C.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}I.fromGE=function(C){const k=new I;k._wkt=C.wkt;k._wkid=C.wkid;k._isInverse=C.isInverse;return k};I.prototype.getInverse=function(){const C=new I;C._wkt=this.wkt;C._wkid=this._wkid;C._isInverse=!this.isInverse;return C};c._createClass(I,[{key:"wkt",get:function(){return this._wkt},set:function(C){this._wkt=C;this.uid=a++}},{key:"wkid",get:function(){return this._wkid},set:function(C){this._wkid=
C;this.uid=a++}},{key:"isInverse",get:function(){return this._isInverse},set:function(C){this._isInverse=C;this.uid=a++}}]);return I}()})},"esri/geometry/support/zscale":function(){define(["exports","../../core/maybe","../../core/unitUtils","./spatialReferenceUtils"],function(c,a,I,C){c.getGeometryZScaler=function(k,f,t){if(a.isNone(f)||a.isNone(t)||t.vcsWkid||C.equals(f,t))return null;f=I.getMetersPerVerticalUnitForSR(f);t=I.getMetersPerVerticalUnitForSR(t);const r=f/t;if(1===r)return null;switch(k){case "point":case "esriGeometryPoint":return p=>
{p&&null!=p.z&&(p.z*=r)};case "polyline":case "esriGeometryPolyline":return p=>{if(p)for(const q of p.paths)for(const B of q)2<B.length&&(B[2]*=r)};case "polygon":case "esriGeometryPolygon":return p=>{if(p)for(const q of p.rings)for(const B of q)2<B.length&&(B[2]*=r)};case "multipoint":case "esriGeometryMultipoint":return p=>{if(p)for(const q of p.points)2<q.length&&(q[2]*=r)};case "extent":case "esriGeometryExtent":return p=>{p&&null!=p.zmin&&null!=p.zmax&&(p.zmin*=r,p.zmax*=r)};default:return null}};
Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){let a=function(t,r,p){this.x=t;this.y=r;this.spatialReference=p;this.m=this.z=void 0},I=function(t,r,p,q){this.rings=t;this.spatialReference=r;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},C=function(t,r,p,q){this.paths=t;this.spatialReference=r;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},k=function(t,
r,p,q){this.points=t;this.spatialReference=r;this.hasM=this.hasZ=void 0;p&&(this.hasZ=p);q&&(this.hasM=q)},f=function(t,r,p,q,B){this.xmin=t;this.ymin=r;this.xmax=p;this.ymax=q;this.spatialReference=B;this.mmax=this.mmin=this.zmax=this.zmin=void 0};c.jsonAdapter={convertToGEGeometry:function(t,r){return null==r?null:t.convertJSONToGeometry(r)},exportPoint:function(t,r,p){p=new a(t.getPointX(r),t.getPointY(r),p);const q=t.hasZ(r),B=t.hasM(r);q&&(p.z=t.getPointZ(r));B&&(p.m=t.getPointM(r));return p},
exportPolygon:function(t,r,p){return new I(t.exportPaths(r),p,t.hasZ(r),t.hasM(r))},exportPolyline:function(t,r,p){return new C(t.exportPaths(r),p,t.hasZ(r),t.hasM(r))},exportMultipoint:function(t,r,p){return new k(t.exportPoints(r),p,t.hasZ(r),t.hasM(r))},exportExtent:function(t,r,p){var q=t.hasZ(r);const B=t.hasM(r);p=new f(t.getXMin(r),t.getYMin(r),t.getXMax(r),t.getYMax(r),p);q&&(q=t.getZExtent(r),p.zmin=q.vmin,p.zmax=q.vmax);B&&(t=t.getMExtent(r),p.mmin=t.vmin,p.mmax=t.vmax);return p}};Object.defineProperties(c,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,
standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./projectionSupport ./SnappingCandidate ./utils ../../support/fieldUtils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D){function d(J,R,v,E){const z=E.x-v.x;E=E.y-v.y;R=Math.min(1,Math.max(0,((R.x-v.x)*z+(R.y-v.y)*E)/(z*z+E*E)));J.x=v.x+z*R;J.y=v.y+E*R}function l(J,R){return J?R?4:3:R?3:2}let x=function(){function J(v,E,z){this.items=v;this.query=E;this.geometryType=z.geometryType;this.hasM=z.hasM;this.hasZ=z.hasZ;this.fieldsIndex=z.fieldsIndex;this.objectIdField=z.objectIdField;this.spatialReference=z.spatialReference;this.featureAdapter=z.featureAdapter}var R=J.prototype;R.createQueryResponseForCount=
function(){const v=new p(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return v.countDistinctValues(this.items);const {groupByFieldsForStatistics:E,having:z,outStatistics:m}=this.query;if(!E?.length)return 1;const L=new Map,b=new Map,n=new Set;for(const y of m){var {statisticType:H}=y;H="exceedslimit"!==H?y.onStatisticField:void 0;if(!b.has(H)){var A=[];for(const P of E){const K=this._getAttributeValues(v,P,L);A.push(K)}b.set(H,this._calculateUniqueValues(A,v.returnDistinctValues))}H=
b.get(H);for(const P in H){const {data:K,items:U}=H[P];A=K.join(",");z&&!v.validateItems(U,z)||n.add(A)}}return n.size};R.createQueryResponse=function(){var v=I._asyncToGenerator(function*(){let E;E=this.query.outStatistics?this.query.outStatistics.some(z=>"exceedslimit"===z.statisticType)?this._createExceedsLimitQueryResponse(this.query):yield this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);this.query.returnQueryGeometry&&(r.isValid(this.query.outSR)&&
!r.equals(this.query.geometry.spatialReference,this.query.outSR)?E.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...q.project(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):E.queryGeometry=N.cleanFromGeometryEngine({spatialReference:this.query.outSR,...this.query.geometry}));return E});return function(){return v.apply(this,arguments)}}();R.createSnappingResponse=function(v,E){const z=this.featureAdapter,m=l(this.hasZ,this.hasM),{point:L}=
v,b="number"===typeof v.distance?v.distance:v.distance.x,n="number"===typeof v.distance?v.distance:v.distance.y,H={candidates:[]},A="esriGeometryPolygon"===this.geometryType;E=this._getPointCreator(L,null!=L.z,null!=L.m,this.spatialReference,E);const y=new G(null,0),P=new G(null,0),K={x:0,y:0,z:0};for(const wa of this.items){var U=z.getGeometry(wa);if(C.isNone(U))continue;const {coords:xa,lengths:Ba}=U;y.coords=xa;P.coords=xa;if(v.types&a.SnappingTypes.EDGE){U=0;for(var Z=0;Z<Ba.length;Z++){var V=
Ba[Z];for(var ka=0;ka<V;ka++,U+=m){var ca=y;ca.coordsIndex=U;if(ka!==V-1){const Ca=P;Ca.coordsIndex=U+m;const Ja=K;d(K,L,ca,Ca);var qa=(L.x-Ja.x)/b;const La=(L.y-Ja.y)/n;qa=qa*qa+La*La;1>=qa&&H.candidates.push(B.makeEdgeCandidate(z.getObjectId(wa),E(Ja),Math.sqrt(qa),E(ca),E(Ca)))}}}}if(v.types&a.SnappingTypes.VERTEX)for(U=A?xa.length-m:xa.length,Z=0;Z<U;Z+=m)V=y,V.coordsIndex=Z,ka=(L.x-V.x)/b,ca=(L.y-V.y)/n,ka=ka*ka+ca*ca,1>=ka&&H.candidates.push(B.makeVertexCandidate(z.getObjectId(wa),E(V),Math.sqrt(ka)))}H.candidates.sort((wa,
xa)=>wa.distance-xa.distance);return H};R._getPointCreator=function(v,E,z,m,L){const b=C.isSome(L)&&!r.equals(m,L)?A=>q.project(A,m,L):A=>A,{hasZ:n}=this,H=v.m;return E&&z?n?({x:A,y,z:P})=>b({x:A,y,z:P,m:H}):({x:A,y})=>b({x:A,y,z:0,m:H}):E?n?({x:A,y,z:P})=>b({x:A,y,z:P}):({x:A,y})=>b({x:A,y,z:0}):z?({x:A,y})=>b({x:A,y,m:H}):({x:A,y})=>b({x:A,y})};R.createSummaryStatisticsResponse=function(){var v=I._asyncToGenerator(function*(E){const {field:z,valueExpression:m,normalizationField:L,normalizationType:b,
normalizationTotal:n,minValue:H,maxValue:A,scale:y}=E;E=this.fieldsIndex.isDateField(z);var P=yield this._getDataValues({field:z,valueExpression:m,normalizationField:L,normalizationType:b,normalizationTotal:n,scale:y});const K=h.isNullCountSupported({normalizationType:b,normalizationField:L,minValue:H,maxValue:A}),U=this.fieldsIndex.get(z),Z={value:.5,fieldType:U?.type};P=w.isStringField(U)?h.calculateStringStatistics({values:P,supportsNullCount:K,percentileParams:Z}):h.calculateStatistics({values:P,
minValue:H,maxValue:A,useSampleStdDev:!b,supportsNullCount:K,percentileParams:Z});return h.processSummaryStatisticsResult(P,E)});return function(E){return v.apply(this,arguments)}}();R.createUniqueValuesResponse=function(){var v=I._asyncToGenerator(function*(E){const {field:z,valueExpression:m,domains:L,returnAllCodedValues:b,scale:n}=E;var H=yield this._getDataValues({field:z,field2:E.field2,field3:E.field3,fieldDelimiter:E.fieldDelimiter,valueExpression:m,scale:n});H=h.calculateUniqueValuesCount(H);
return h.createUVResult(H,L,b,E.fieldDelimiter)});return function(E){return v.apply(this,arguments)}}();R.createClassBreaksResponse=function(){var v=I._asyncToGenerator(function*(E){const {field:z,valueExpression:m,normalizationField:L,normalizationType:b,normalizationTotal:n,classificationMethod:H,standardDeviationInterval:A,minValue:y,maxValue:P,numClasses:K,scale:U}=E;E=yield this._getDataValues({field:z,valueExpression:m,normalizationField:L,normalizationType:b,normalizationTotal:n,scale:U});
E=h.calculateClassBreaks(E,{field:z,normalizationField:L,normalizationType:b,normalizationTotal:n,classificationMethod:H,standardDeviationInterval:A,minValue:y,maxValue:P,numClasses:K});return h.resolveCBResult(E,H)});return function(E){return v.apply(this,arguments)}}();R.createHistogramResponse=function(){var v=I._asyncToGenerator(function*(E){const {field:z,valueExpression:m,normalizationField:L,normalizationType:b,normalizationTotal:n,classificationMethod:H,standardDeviationInterval:A,minValue:y,
maxValue:P,numBins:K,scale:U}=E;E=yield this._getDataValues({field:z,valueExpression:m,normalizationField:L,normalizationType:b,normalizationTotal:n,scale:U});return h.calculateHistogram(E,{field:z,normalizationField:L,normalizationType:b,normalizationTotal:n,classificationMethod:H,standardDeviationInterval:A,minValue:y,maxValue:P,numBins:K})});return function(E){return v.apply(this,arguments)}}();R._sortFeatures=function(v,E,z){if(1<v.length&&E&&E.length)for(const m of E.reverse()){E=m.split(" ");
const L=E[0],b=this.fieldsIndex.get(L);E=E[1]&&"desc"===E[1].toLowerCase();const n=h.getAttributeComparator(b?.type,E);v.sort((H,A)=>{H=z(H,L,b);A=z(A,L,b);return n(H,A)})}};R._createFeatureQueryResponse=function(v){const E=this.items,{geometryType:z,hasM:m,hasZ:L,objectIdField:b,spatialReference:n}=this,{outFields:H,outSR:A,quantizationParameters:y,resultRecordCount:P,resultOffset:K,returnZ:U,returnM:Z}=v,V=null!=P?E.length>(K||0)+P:!1,ka=H&&(H.includes("*")?[...this.fieldsIndex.fields]:H.map(ca=>
this.fieldsIndex.get(ca)));return{exceededTransferLimit:V,features:this._createFeatures(v,E),fields:ka,geometryType:z,hasM:m&&Z,hasZ:L&&U,objectIdFieldName:b,spatialReference:N.cleanFromGeometryEngine(A?A:n),transform:y&&t.toQuantizationTransform(y)||null}};R._createFeatures=function(v,E){const z=new p(v,this.featureAdapter,this.fieldsIndex),{hasM:m,hasZ:L}=this,{orderByFields:b,quantizationParameters:n,returnGeometry:H,returnCentroid:A,maxAllowableOffset:y,resultOffset:P,resultRecordCount:K,returnZ:U=
!1,returnM:Z=!1}=v,V=L&&U,ka=m&&Z;v=[];var ca=0;E=[...E];this._sortFeatures(E,b,(xa,Ba,Ca)=>z.getFieldValue(xa,Ba,Ca));if(H||A){var qa=t.toQuantizationTransform(n);if(H&&!A)for(var wa of E)v[ca++]={attributes:z.getAttributes(wa),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(wa),y,qa,V,ka)};else if(!H&&A)for(const xa of E)v[ca++]={attributes:z.getAttributes(xa),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa)};else for(const xa of E)v[ca++]=
{attributes:z.getAttributes(xa),centroid:N.transformCentroid(this,this.featureAdapter.getCentroid(xa,this),qa),geometry:N.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(xa),y,qa,V,ka)}}else for(qa of E)(wa=z.getAttributes(qa))&&(v[ca++]={attributes:wa});ca=P||0;null!=K&&(v=v.slice(ca,Math.min(v.length,ca+K)));return v};R._createExceedsLimitQueryResponse=function(v){var E=!1;let z=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY;E=Number.POSITIVE_INFINITY;for(const L of v.outStatistics)if("exceedslimit"===
L.statisticType){z=null!=L.maxPointCount?L.maxPointCount:Number.POSITIVE_INFINITY;m=null!=L.maxRecordCount?L.maxRecordCount:Number.POSITIVE_INFINITY;E=null!=L.maxVertexCount?L.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)E=this.items.length>z;else if(this.items.length>m)E=!0;else{v=l(this.hasZ,this.hasM);const L=this.featureAdapter;E=this.items.reduce((b,n)=>{n=L.getGeometry(n);return b+(C.isSome(n)&&n.coords.length||0)},0)/v>E}return{fields:[{name:"exceedslimit",
type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(E)}}]}};R._createStatisticsQueryResponse=function(){var v=I._asyncToGenerator(function*(E){var z={attributes:{}};const m=[],L=new Map,b=new Map,n=new Map,H=new Map,A=new p(E,this.featureAdapter,this.fieldsIndex);var y=E.outStatistics;const {groupByFieldsForStatistics:P,having:K,orderByFields:U}=E;E=P&&P.length;const Z=!!E,V=Z&&P[0],ka=Z&&!this.fieldsIndex.get(V);
for(const Ba of y){const {outStatisticFieldName:Ca,statisticType:Ja}=Ba;y=Ba;var ca="exceedslimit"!==Ja?Ba.onStatisticField:void 0;const La="percentile_disc"===Ja||"percentile_cont"===Ja,Na="EnvelopeAggregate"===Ja||"CentroidAggregate"===Ja||"ConvexHullAggregate"===Ja,bb=Z&&1===E&&(ca===V||ka)&&"count"===Ja;if(Z){if(!n.has(ca)){var qa=[];for(const g of P){var wa=this._getAttributeValues(A,g,L);qa.push(wa)}n.set(ca,this._calculateUniqueValues(qa,Na?!1:A.returnDistinctValues))}qa=n.get(ca);for(const g in qa){const {count:F,
data:fa,items:ia,itemPositions:oa}=qa[g];wa=fa.join(",");if(!K||A.validateItems(ia,K)){const O=H.get(wa)||{attributes:{}};if(Na){O.aggregateGeometries||(O.aggregateGeometries={});const {aggregateGeometries:W,outStatisticFieldName:Y}=yield this._getAggregateGeometry(y,ia);O.aggregateGeometries[Y]=W}else{var xa=null;if(bb)xa=F;else{const W=this._getAttributeValues(A,ca,L);xa=oa.map(Y=>W[Y]);xa=La&&"statisticParameters"in y?this._getPercentileValue(y,xa):this._getStatisticValue(y,xa,null,A.returnDistinctValues)}O.attributes[Ca]=
xa}let S=0;P.forEach((W,Y)=>O.attributes[this.fieldsIndex.get(W)?W:`EXPR_${++S}`]=fa[Y]);H.set(wa,O)}}}else if(Na){z.aggregateGeometries||(z.aggregateGeometries={});const {aggregateGeometries:g,outStatisticFieldName:F}=yield this._getAggregateGeometry(y,this.items);z.aggregateGeometries[F]=g}else ca=this._getAttributeValues(A,ca,L),z.attributes[Ca]=La&&"statisticParameters"in y?this._getPercentileValue(y,ca):this._getStatisticValue(y,ca,b,A.returnDistinctValues);m.push({name:Ca,alias:Ca,type:"esriFieldTypeDouble"})}z=
Z?Array.from(H.values()):[z];this._sortFeatures(z,U,(Ba,Ca)=>Ba.attributes[Ca]);return{fields:m,features:z}});return function(E){return v.apply(this,arguments)}}();R._getAggregateGeometry=function(){var v=I._asyncToGenerator(function*(E,z){var m=yield new Promise((U,Z)=>c(["../../../geometry/geometryEngineJSON"],U,Z));const {statisticType:L,outStatisticFieldName:b}=E,{featureAdapter:n,spatialReference:H,geometryType:A,hasZ:y,hasM:P}=this;z=z.map(U=>N.getGeometry(A,y,P,n.getGeometry(U)));const K=m.convexHull(H,
z,!0)[0];E={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===L?(m=K?f.getPolygonExtent(K):f.getGeometryExtent(m.union(H,z)),E.aggregateGeometries={...m,spatialReference:H},E.outStatisticFieldName=b||"extent"):"CentroidAggregate"===L?(m=K?k.polygonCentroid(K):k.extentCentroid(f.getGeometryExtent(m.union(H,z))),E.aggregateGeometries={x:m[0],y:m[1],spatialReference:H},E.outStatisticFieldName=b||"centroid"):"ConvexHullAggregate"===L&&(E.aggregateGeometries=K,E.outStatisticFieldName=
b||"convexHull");return E});return function(E,z){return v.apply(this,arguments)}}();R._getStatisticValue=function(v,E,z,m){const {onStatisticField:L,statisticType:b}=v;v=null;v=z?.has(L)?z.get(L):w.isStringField(this.fieldsIndex.get(L))?h.calculateStringStatistics({values:E,returnDistinct:m}):h.calculateStatistics({values:E,minValue:null,maxValue:null,useSampleStdDev:!0});z&&z.set(L,v);return v["var"===b?"variance":b]};R._getPercentileValue=function(v,E){const {onStatisticField:z,statisticParameters:m,
statisticType:L}=v,{value:b,orderBy:n}=m;v=this.fieldsIndex.get(z);return h.calculatePercentile(E,{value:b,orderBy:n,fieldType:v?.type,isDiscrete:"percentile_disc"===L})};R._getAttributeValues=function(v,E,z){if(z.has(E))return z.get(E);const m=this.fieldsIndex.get(E),L=this.items.map(b=>v.getFieldValue(b,E,m));z.set(E,L);return L};R._getAttributeDataValues=function(v,E){return this.items.map(z=>v.getDataValue(z,{field:E.field,field2:E.field2,field3:E.field3,fieldDelimiter:E.fieldDelimiter,normalizationField:E.normalizationField,
normalizationType:E.normalizationType,normalizationTotal:E.normalizationTotal}))};R._getAttributeExpressionValues=function(){var v=I._asyncToGenerator(function*(E,z,m){const {arcadeUtils:L}=yield D.loadArcade();z=L.createFunction(z);m=m&&L.getViewInfo(m);return E.getExpressionValues(this.items,z,m,L)});return function(E,z,m){return v.apply(this,arguments)}}();R._calculateUniqueValues=function(v,E){const z={},m=this.items,L=m.length;for(let b=0;b<L;b++){const n=m[b],H=[];for(const y of v)H.push(y[b]);
const A=H.join(",");E?null==z[A]&&(z[A]={count:1,data:H,items:[n],itemPositions:[b]}):null==z[A]?z[A]={count:1,data:H,items:[n],itemPositions:[b]}:(z[A].count++,z[A].items.push(n),z[A].itemPositions.push(b))}return z};R._getDataValues=function(){var v=I._asyncToGenerator(function*(E){const z=new p(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:m,field:L,normalizationField:b,normalizationType:n,normalizationTotal:H,scale:A}=E,y=m?{viewingMode:"map",scale:A,spatialReference:this.query.outSR||
this.spatialReference}:null;return m?this._getAttributeExpressionValues(z,m,y):this._getAttributeDataValues(z,{field:L,field2:E.field2,field3:E.field3,fieldDelimiter:E.fieldDelimiter,normalizationField:b,normalizationType:n,normalizationTotal:H})});return function(E){return v.apply(this,arguments)}}();I._createClass(J,[{key:"size",get:function(){return this.items.length}}]);return J}();a.SnappingTypes=void 0;(function(J){J[J.NONE=0]="NONE";J[J.EDGE=1]="EDGE";J[J.VERTEX=2]="VERTEX"})(a.SnappingTypes||
(a.SnappingTypes={}));let G=function(){function J(R,v){this.coords=R;this.coordsIndex=v}I._createClass(J,[{key:"x",get:function(){return this.coords[this.coordsIndex]}},{key:"y",get:function(){return this.coords[this.coordsIndex+1]}},{key:"z",get:function(){return this.coords[this.coordsIndex+2]}}]);return J}();a.QueryEngineResult=x;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","../../core/maybe",
"./jsonUtils"],function(c,a,I){function C({scale:b,translate:n},H){return Math.round((H-n[0])/b[0])}function k({scale:b,translate:n},H){return Math.round((n[1]-H)/b[1])}function f(b,n,H){const A=[];let y,P,K,U;for(let Z=0;Z<H.length;Z++){const V=H[Z];if(0<Z){if(K=C(b,V[0]),U=k(b,V[1]),K!==y||U!==P)A.push(n(V,K-y,U-P)),y=K,P=U}else y=C(b,V[0]),P=k(b,V[1]),A.push(n(V,y,P))}return 0<A.length?A:null}function t(b,n,H,A){return f(b,H?A?L:m:A?m:z,n)}function r(b,n,H,A){const y=[];H=H?A?L:m:A?m:z;for(A=0;A<
n.length;A++){const P=f(b,H,n[A]);P&&3<=P.length&&y.push(P)}return y.length?y:null}function p(b,n,H,A){const y=[];H=H?A?L:m:A?m:z;for(A=0;A<n.length;A++){const P=f(b,H,n[A]);P&&2<=P.length&&y.push(P)}return y.length?y:null}function q({scale:b,translate:n},H){return H*b[0]+n[0]}function B({scale:b,translate:n},H){return n[1]-H*b[1]}function N(b,n,H){const A=Array(H.length);if(!H.length)return A;const [y,P]=b.scale;let K=q(b,H[0][0]);b=B(b,H[0][1]);A[0]=n(H[0],K,b);for(let U=1;U<H.length;U++){const Z=
H[U];K+=Z[0]*y;b-=Z[1]*P;A[U]=n(Z,K,b)}return A}function w(b,n,H){const A=Array(H.length);for(let y=0;y<H.length;y++)A[y]=N(b,n,H[y]);return A}function h(b,n,H,A){return N(b,H?A?L:m:A?m:z,n)}function D(b,n,H,A){return w(b,H?A?L:m:A?m:z,n)}function d(b,n,H,A){return w(b,H?A?L:m:A?m:z,n)}function l(b,n,H){let [A,y]=H[0],P=Math.min(A,n[0]),K=Math.min(y,n[1]),U=Math.max(A,n[2]);n=Math.max(y,n[3]);for(let Z=1;Z<H.length;Z++){const [V,ka]=H[Z];A+=V;y+=ka;0>V&&(P=Math.min(P,A));0<V&&(U=Math.max(U,A));0>
ka?K=Math.min(K,y):0<ka&&(n=Math.max(n,y))}b[0]=P;b[1]=K;b[2]=U;b[3]=n;return b}function x(b,n){if(!n.length)return null;b[0]=b[1]=Number.POSITIVE_INFINITY;b[2]=b[3]=Number.NEGATIVE_INFINITY;for(let H=0;H<n.length;H++)l(b,b,n[H]);return b}function G(b,n,H,A,y){n.xmin=C(b,H.xmin);n.ymin=k(b,H.ymin);n.xmax=C(b,H.xmax);n.ymax=k(b,H.ymax);n!==H&&(A&&(n.zmin=H.zmin,n.zmax=H.zmax),y&&(n.mmin=H.mmin,n.mmax=H.mmax));return n}function J(b,n,H,A,y){n.points=t(b,H.points,A,y)??[];return n}function R(b,n,H,A,
y){n.x=C(b,H.x);n.y=k(b,H.y);n!==H&&(A&&(n.z=H.z),y&&(n.m=H.m));return n}function v(b,n,H,A,y){b=r(b,H.rings,A,y);if(!b)return null;n.rings=b;return n}function E(b,n,H,A,y){b=p(b,H.paths,A,y);if(!b)return null;n.paths=b;return n}const z=(b,n,H)=>[n,H],m=(b,n,H)=>[n,H,b[2]],L=(b,n,H)=>[n,H,b[2],b[3]];c.equals=function(b,n){if(b===n||null==b&&null==n)return!0;if(null==b||null==n)return!1;let H,A,y,P;b&&"upperLeft"===b.originPosition?(H=b.translate[0],A=b.translate[1],b=b.scale[0]):(H=a.isSome(b.extent)?
b.extent.xmin:0,A=a.isSome(b.extent)?b.extent.ymax:0,b=b.tolerance);n&&"upperLeft"===n.originPosition?(y=n.translate[0],P=n.translate[1],n=n.scale[0]):(y=a.isSome(n.extent)?n.extent.xmin:0,P=a.isSome(n.extent)?n.extent.ymax:0,n=n.tolerance);return H===y&&A===P&&b===n};c.getQuantizedBoundsCoordsArray=l;c.getQuantizedBoundsCoordsArrayArray=x;c.getQuantizedBoundsPaths=function(b){return x([0,0,0,0],b)};c.getQuantizedBoundsPoints=function(b){const n=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return l(n,n,b)};c.getQuantizedBoundsRings=function(b){return x([0,0,0,0],b)};c.quantizeBounds=function(b,n,H){n[0]=C(b,H[0]);n[3]=k(b,H[1]);n[2]=C(b,H[2]);n[1]=k(b,H[3]);return n};c.quantizeExtent=G;c.quantizeGeometry=function(b,n){return b&&n?I.isPoint(n)?R(b,{},n,!1,!1):I.isPolyline(n)?E(b,{},n,!1,!1):I.isPolygon(n)?v(b,{},n,!1,!1):I.isMultipoint(n)?J(b,{},n,!1,!1):I.isExtent(n)?G(b,{},n,!1,!1):null:null};c.quantizeMultipoint=J;c.quantizePaths=
p;c.quantizePoint=R;c.quantizePoints=t;c.quantizePolygon=v;c.quantizePolyline=E;c.quantizeRings=r;c.quantizeX=C;c.quantizeY=k;c.toQuantizationTransform=function(b){return b?{originPosition:"upper-left"===b.originPosition?"upperLeft":"lower-left"===b.originPosition?"lowerLeft":b.originPosition,scale:b.tolerance?[b.tolerance,b.tolerance]:[1,1],translate:a.isSome(b.extent)?[b.extent.xmin,b.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(b,n,H){return H?(n[0]=q(b,H[0]),n[1]=B(b,H[3]),n[2]=q(b,H[2]),
n[3]=B(b,H[1]),n):[q(b,n[0]),B(b,n[3]),q(b,n[2]),B(b,n[1])]};c.unquantizeCoordsArray=N;c.unquantizeCoordsArrayArray=w;c.unquantizeExtent=function(b,n,H,A,y){n.xmin=q(b,H.xmin);n.ymin=B(b,H.ymin);n.xmax=q(b,H.xmax);n.ymax=B(b,H.ymax);n!==H&&(A&&(n.zmin=H.zmin,n.zmax=H.zmax),y&&(n.mmin=H.mmin,n.mmax=H.mmax));return n};c.unquantizeMultipoint=function(b,n,H,A,y){a.isSome(H)&&(n.points=h(b,H.points,A,y));return n};c.unquantizePaths=D;c.unquantizePoint=function(b,n,H,A,y){if(a.isNone(H))return n;n.x=q(b,
H.x);n.y=B(b,H.y);n!==H&&(A&&(n.z=H.z),y&&(n.m=H.m));return n};c.unquantizePoints=h;c.unquantizePolygon=function(b,n,H,A,y){a.isSome(H)&&(n.rings=d(b,H.rings,A,y));return n};c.unquantizePolyline=function(b,n,H,A,y){a.isSome(H)&&(n.paths=D(b,H.paths,A,y));return n};c.unquantizeRings=d;c.unquantizeX=q;c.unquantizeY=B;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport",
"../../../statistics/utils"],function(c,a,I){return function(){function C(f,t,r){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=f.returnDistinctValues??!1;this.fieldsIndex=r;this.featureAdapter=t;if((t=f.outFields)&&!t.includes("*")){this.outFields=t;f=0;for(const q of t){var p=a.getExpressionFromFieldName(q);p=(t=this.fieldsIndex.get(p))?null:a.getWhereClause(p,r);t=t?t.name:a.getAliasFromFieldName(q)||`FIELD_EXP_${f++}`;this._fieldDataCache.set(q,{alias:t,
clause:p})}}}var k=C.prototype;k.countDistinctValues=function(f){if(!this.returnDistinctValues)return f.length;f.forEach(t=>this.getAttributes(t));return this._returnDistinctMap.size};k.getAttributes=function(f){f=this._processAttributesForOutFields(f);return this._processAttributesForDistinctValues(f)};k.getFieldValue=function(f,t,r){const p=r?r.name:t;let q=null;this._fieldDataCache.has(p)?q=this._fieldDataCache.get(p).clause:r||(q=a.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(p,
{alias:p,clause:q}));return r?this.featureAdapter.getAttribute(f,p):q.calculateValue(f,this.featureAdapter)};k.getDataValue=function(f,t){const r=t.normalizationType,p=t.normalizationTotal;let q=this.getFieldValue(f,t.field,this.fieldsIndex.get(t.field));t.field2&&(q=`${I.processNullValue(q)}${t.fieldDelimiter}${I.processNullValue(this.getFieldValue(f,t.field2,this.fieldsIndex.get(t.field2)))}`,t.field3&&(q=`${q}${t.fieldDelimiter}${I.processNullValue(this.getFieldValue(f,t.field3,this.fieldsIndex.get(t.field3)))}`));
r&&Number.isFinite(q)&&(f="field"===r&&t.normalizationField?this.getFieldValue(f,t.normalizationField,this.fieldsIndex.get(t.normalizationField)):null,q=I.getNormalizedValue(q,r,f,p));return q};k.getExpressionValue=function(f,t,r,p){f={attributes:this.featureAdapter.getAttributes(f),layer:{fields:this.fieldsIndex.fields}};r=p.createExecContext(f,r);return p.executeFunction(t,r)};k.getExpressionValues=function(f,t,r,p){const q={fields:this.fieldsIndex.fields};return f.map(B=>{B={attributes:this.featureAdapter.getAttributes(B),
layer:q};B=p.createExecContext(B,r);return p.executeFunction(t,B)})};k.validateItem=function(f,t){this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:a.getWhereClause(t,this.fieldsIndex)});return this._fieldDataCache.get(t).clause.testFeature(f,this.featureAdapter)};k.validateItems=function(f,t){this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:a.getWhereClause(t,this.fieldsIndex)});return this._fieldDataCache.get(t).clause.testSet(f,this.featureAdapter)};
k._processAttributesForOutFields=function(f){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(f);const r={};for(const p of t){const {alias:q,clause:B}=this._fieldDataCache.get(p);r[q]=B?B.calculateValue(f,this.featureAdapter):this.featureAdapter.getAttribute(f,q)}return r};k._processAttributesForDistinctValues=function(f){if(c.isNone(f)||!this.returnDistinctValues)return f;var t=this.outFields,r=[];if(t)for(const q of t){var {alias:p}=this._fieldDataCache.get(q);r.push(f[p])}else for(p in f)r.push(f[p]);
t=`${(t||["*"]).join(",")}=${r.join(",")}`;r=this._returnDistinctMap.get(t)||0;this._returnDistinctMap.set(t,++r);return 1<r?null:f};return C}()})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,a,I){function C(v){return null==v||"string"===typeof v&&!v?"\x3cNull\x3e":v}function k(v){const E=null!=v.minValue||null!=v.maxValue,z=!!v.sqlExpression&&v.supportsSQLExpression;return!(null!=v.normalizationField||
null!=v.normalizationType)&&!E&&!z}function f(v){const {values:E,useSampleStdDev:z,supportsNullCount:m}=v;var L=Number.POSITIVE_INFINITY;let b=Number.NEGATIVE_INFINITY,n=null,H=null;var A=null;let y=null,P=0;const K=null==v.minValue?-Infinity:v.minValue,U=null==v.maxValue?Infinity:v.maxValue;for(const Z of E)Number.isFinite(Z)?Z>=K&&Z<=U&&(n+=Z,L=Math.min(L,Z),b=Math.max(b,Z),P++):"string"===typeof Z&&P++;if(P&&null!=n){H=n/P;A=0;for(const Z of E)Number.isFinite(Z)&&Z>=K&&Z<=U&&(A+=(Z-H)**2);y=z?
1<P?A/(P-1):0:0<P?A/P:0;A=Math.sqrt(y)}else b=L=null;L={avg:H,count:P,max:b,min:L,stddev:A,sum:n,variance:y};m&&(L.nullcount=E.length-P);v.percentileParams&&(L.median=t(E,v.percentileParams));return L}function t(v,E){const {fieldType:z,value:m,orderBy:L,isDiscrete:b}=E,n=r(z,"desc"===L);v=[...v].filter(P=>null!=P).sort((P,K)=>n(P,K));if(0===v.length)return null;if(0>=m)return v[0];if(1<=m)return v[v.length-1];var H=(v.length-1)*m,A=Math.floor(H);E=A+1;H%=1;A=v[A];const y=v[E];return E>=v.length||
b||"string"===typeof A||"string"===typeof y?A:A*(1-H)+y*H}function r(v,E){const z=E?1:-1,m=q(E),L=p(E);if(!v||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...J].includes(v))return(b,n)=>"number"===typeof b&&"number"===typeof n?m(b,n):"string"===typeof b&&"string"===typeof n?L(b,n):z;if("esriFieldTypeDate"===v)return(b,n)=>{b=(new Date(b)).getTime();n=(new Date(n)).getTime();return isNaN(b)||isNaN(n)?z:m(b,n)};if(J.has(v))return(b,n)=>m(b,n);if("esriFieldTypeString"===
v)return(b,n)=>L(b,n);if("esriFieldTypeGUID"===v||"esriFieldTypeGlobalID"===v){const b=p(E);return(n,H)=>b(B(n),B(H))}return E?(b,n)=>1:(b,n)=>-1}function p(v){return v?(E,z)=>{E=E?.toUpperCase();z=z?.toUpperCase();return E>z?-1:E<z?1:0}:(E,z)=>{E=E?.toUpperCase();z=z?.toUpperCase();return E<z?-1:E>z?1:0}}function q(v){return v?(E,z)=>z-E:(E,z)=>E-z}function B(v){return v.substr(24,12)+v.substr(19,4)+v.substr(16,2)+v.substr(14,2)+v.substr(11,2)+v.substr(9,2)+v.substr(6,2)+v.substr(4,2)+v.substr(2,
2)+v.substr(0,2)}function N(v){return"coded-value"!==v?.type?[]:v.codedValues.map(E=>E.code)}function w(v,E){const z=D({field:E.field,normalizationType:E.normalizationType,normalizationField:E.normalizationField,classificationMethod:E.classificationMethod,standardDeviationInterval:E.standardDeviationInterval,breakCount:E.numClasses||5});v=h(v,E.minValue,E.maxValue);return I.createGenerateRendererClassBreaks({definition:z,values:v,normalizationTotal:E.normalizationTotal})}function h(v,E,z){E=null==
E?-Infinity:E;z=null==z?Infinity:z;return v.filter(m=>Number.isFinite(m)&&m>=E&&m<=z)}function D(v){const E=v.field,z=v.classificationMethod||"equal-interval",m=v.normalizationType,L=v.normalizationField,b=new a;b.classificationField=E;b.breakCount=v.breakCount;b.classificationMethod=z;b.standardDeviationInterval="standard-deviation"===z?v.standardDeviationInterval||1:void 0;b.normalizationType=m;b.normalizationField="field"===m?L:void 0;return b}function d(v,E){const {field:z,classificationMethod:m,
standardDeviationInterval:L,normalizationType:b,normalizationField:n,normalizationTotal:H,minValue:A,maxValue:y}=E,P=E.numBins||10;let K=E=null,U=null;m&&"equal-interval"!==m||b?({classBreaks:v}=w(v,{field:z,normalizationType:b,normalizationField:n,normalizationTotal:H,classificationMethod:m,standardDeviationInterval:L,minValue:A,maxValue:y,numClasses:P}),E=v[0].minValue,K=v[v.length-1].maxValue,U=v.map(Z=>[Z.minValue,Z.maxValue])):(null!=A&&null!=y?(E=A,K=y):(v=f({values:v,minValue:A,maxValue:y,
useSampleStdDev:!b,supportsNullCount:k({normalizationType:b,normalizationField:n,minValue:A,maxValue:y})}),E=v.min,K=v.max),U=x(E,K,P));return{min:E,max:K,intervals:U}}function l(v,E){let z=-1;for(let m=v.length-1;0<=m;m--)if(E>=v[m][0]){z=m;break}return z}function x(v,E,z){const m=(E-v)/z,L=[];let b;for(let n=1;n<=z;n++)b=v+m,b=Number(b.toFixed(16)),L.push([v,n===z?E:b]),v=b;return L}const G=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,J=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"]),R="min max avg stddev count sum variance nullcount median".split(" ");c.calculateClassBreaks=w;c.calculateHistogram=function(v,E){const {min:z,max:m,intervals:L}=d(v,E),b=L.map((n,H)=>({minValue:L[H][0],maxValue:L[H][1],count:0}));for(const n of v)null!=n&&n>=z&&n<=m&&(v=l(L,n),-1<v&&b[v].count++);return{bins:b,minValue:z,maxValue:m,normalizationTotal:E.normalizationTotal}};c.calculatePercentile=t;c.calculateStatistics=f;c.calculateStringStatistics=function(v){const E=v.returnDistinct?
[...(new Set(v.values))]:v.values,z=E.filter(L=>null!=L).length,m={count:z};v.supportsNullCount&&(m.nullcount=E.length-z);v.percentileParams&&(m.median=t(E,v.percentileParams));return m};c.calculateUniqueValuesCount=function(v){const E={};for(let z of v){if(null==z||"string"===typeof z&&""===z.trim())z=null;null==E[z]?E[z]={count:1,data:z}:E[z].count++}return{count:E}};c.createClassBreaksDefinition=D;c.createUVResult=function(v,E,z,m){v=v.count;const L=[];if(z&&E){z=[];var b=N(E[0]);for(const n of b)if(E[1]){b=
N(E[1]);for(const H of b)if(E[2]){b=N(E[2]);for(const A of b)z.push(`${C(n)}${m}${C(H)}${m}${C(A)}`)}else z.push(`${C(n)}${m}${C(H)}`)}else z.push(n);for(const n of z)v.hasOwnProperty(n)||(v[n]={data:n,count:0})}for(const n in v)E=v[n],L.push({value:E.data,count:E.count,label:E.label});return{uniqueValueInfos:L}};c.getAttributeComparator=r;c.getEqualIntervalBins=x;c.getNormalizedValue=function(v,E,z,m){let L=null;switch(E){case "log":0!==v&&(L=Math.log(v)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(m)&&
0!==m&&(L=v/m*100);break;case "field":Number.isFinite(z)&&0!==z&&(L=v/z);break;case "natural-log":0<v&&(L=Math.log(v));break;case "square-root":0<v&&(L=v**.5)}return L};c.isNullCountSupported=k;c.processNullValue=C;c.processSummaryStatisticsResult=function(v,E){let z;for(z in v)R.includes(z)&&(Number.isFinite(v[z])||(v[z]=null));if(!E)return v;["avg","stddev","variance"].forEach(m=>{null!=v[m]&&(v[m]=Math.ceil(v[m]))});return v};c.resolveCBResult=function(v,E){let z=v.classBreaks;const m=z[0].minValue,
L=z[z.length-1].maxValue,b="standard-deviation"===E;z=z.map(n=>{const H=n.label;n={minValue:n.minValue,maxValue:n.maxValue,label:H};if(b&&H){const A=H.match(G).map(y=>+y.trim());2===A.length?(n.minStdDev=A[0],n.maxStdDev=A[1],0>A[0]&&0<A[1]&&(n.hasAvg=!0)):1===A.length&&(H.includes("\x3c")?(n.minStdDev=null,n.maxStdDev=A[0]):H.includes("\x3e")&&(n.minStdDev=A[0],n.maxStdDev=null))}return n});return{minValue:m,maxValue:L,classBreakInfos:z,normalizationTotal:v.normalizationTotal}};c.statisticTypes=
R;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ClassificationDefinition".split(" "),function(c,a,I,C,k,f,t,r){k=new I.JSONMap({esriClassifyEqualInterval:"equal-interval",
esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});I=new I.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});r=function(p){function q(){var B=p.apply(this,arguments)||this;B.breakCount=null;B.classificationField=null;B.classificationMethod=null;B.normalizationField=null;B.normalizationType=
null;B.type="class-breaks-definition";return B}c._inheritsLoose(q,p);c._createClass(q,[{key:"standardDeviationInterval",set:function(B){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",B)}},{key:"definedInterval",set:function(B){"defined-interval"===this.classificationMethod&&this._set("definedInterval",B)}}]);return q}(r);a.__decorate([C.property({json:{write:!0}})],r.prototype,"breakCount",void 0);a.__decorate([C.property({json:{write:!0}})],r.prototype,"classificationField",
void 0);a.__decorate([C.property({type:String,json:{read:k.read,write:k.write}})],r.prototype,"classificationMethod",void 0);a.__decorate([C.property({json:{write:!0}})],r.prototype,"normalizationField",void 0);a.__decorate([C.property({json:{read:I.read,write:I.write}})],r.prototype,"normalizationType",void 0);a.__decorate([C.property({value:null,json:{write:!0}})],r.prototype,"standardDeviationInterval",null);a.__decorate([C.property({value:null,json:{write:!0}})],r.prototype,"definedInterval",
null);a.__decorate([C.property()],r.prototype,"type",void 0);return r=a.__decorate([t.subclass("esri.rest.support.ClassBreaksDefinition")],r)})},"esri/rest/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./colorRamps ../../symbols/Symbol".split(" "),
function(c,a,I,C,k,f,t,r,p,q){I=new I.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});C=function(B){function N(){var w=B.apply(this,arguments)||this;w.baseSymbol=null;w.colorRamp=null;w.type=null;return w}c._inheritsLoose(N,B);return N}(C.JSONSupport);a.__decorate([k.property({type:q,json:{write:!0}})],C.prototype,"baseSymbol",void 0);a.__decorate([k.property({types:p.types,json:{read:{reader:p.fromJSON},write:!0}})],C.prototype,"colorRamp",void 0);a.__decorate([k.property({json:{read:I.read,
write:I.write}})],C.prototype,"type",void 0);return C=a.__decorate([r.subclass("esri.rest.support.ClassificationDefinition")],C)})},"esri/rest/support/colorRamps":function(){define(["exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(c,a,I,C){I={key:"type",base:I,typeMap:{algorithmic:a,multipart:C}};c.fromJSON=function(k){return k&&k.type?"algorithmic"===k.type?a.fromJSON(k):"multipart"===k.type?C.fromJSON(k):null:null};c.types=I;Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./ColorRamp".split(" "),function(c,a,I,C,k,f,t,r,p){var q;p=q=function(B){function N(w){w=B.call(this,w)||this;w.algorithm=null;
w.fromColor=null;w.toColor=null;w.type="algorithmic";return w}c._inheritsLoose(N,B);N.prototype.clone=function(){return new q({fromColor:C.clone(this.fromColor),toColor:C.clone(this.toColor),algorithm:this.algorithm})};return N}(p);a.__decorate([t.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],p.prototype,"algorithm",void 0);a.__decorate([k.property({type:I,json:{type:[f.Integer],write:!0}})],p.prototype,"fromColor",void 0);a.__decorate([k.property({type:I,
json:{type:[f.Integer],write:!0}})],p.prototype,"toColor",void 0);a.__decorate([k.property({type:["algorithmic"]})],p.prototype,"type",void 0);return p=q=a.__decorate([r.subclass("esri.rest.support.AlgorithmicColorRamp")],p)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,a,I){c.enumeration=function(C,k={}){C=C instanceof a.JSONMap?C:new a.JSONMap(C,k);C={type:k?.ignoreUnknown??!0?C.apiValues:String,json:{type:C.jsonValues,
read:k?.readOnly?!1:{reader:C.read},write:{writer:C.write}}};void 0!==k?.readOnly&&(C.readOnly=!!k.readOnly);void 0!==k?.default&&(C.json.default=k.default);void 0!==k?.name&&(C.json.name=k.name);return I.property(C)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t){I=function(r){function p(q){q=r.call(this,q)||this;q.type=null;return q}c._inheritsLoose(p,r);return p}(I.JSONSupport);a.__decorate([C.property({readOnly:!0,json:{read:!1,write:!0}})],I.prototype,"type",void 0);return I=a.__decorate([t.subclass("esri.rest.support.ColorRamp")],I)})},"esri/rest/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./AlgorithmicColorRamp ./ColorRamp".split(" "),
function(c,a,I,C,k,f,t,r){var p;k=p=function(q){function B(N){N=q.call(this,N)||this;N.colorRamps=null;N.type="multipart";return N}c._inheritsLoose(B,q);B.prototype.clone=function(){return new p({colorRamps:I.clone(this.colorRamps)})};return B}(r);a.__decorate([C.property({type:[t],json:{write:!0}})],k.prototype,"colorRamps",void 0);a.__decorate([C.property({type:["multipart"]})],k.prototype,"type",void 0);return k=p=a.__decorate([f.subclass("esri.rest.support.MultipartColorRamp")],k)})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r,p,q){C=new C.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let B=0;k=function(N){function w(D){D=N.call(this,D)||this;D.id=`sym${B++}`;D.type=null;D.color=new I([0,0,0,1]);return D}
c._inheritsLoose(w,N);var h=w.prototype;h.readColor=function(D){return D&&null!=D[0]?[D[0],D[1],D[2],D[3]/255]:D};h.collectRequiredFields=function(){var D=c._asyncToGenerator(function*(d,l){});return function(d,l){return D.apply(this,arguments)}}();h.hash=function(){return JSON.stringify(this.toJSON())};h.clone=function(){};return w}(k.JSONSupport);a.__decorate([f.property({type:C.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:C.write}}})],k.prototype,"type",void 0);a.__decorate([f.property({type:I,
json:{write:{allowNull:!0}}})],k.prototype,"color",void 0);a.__decorate([p.reader("color")],k.prototype,"readColor",null);return k=a.__decorate([q.subclass("esri.symbols.Symbol")],k)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,a){function I(w){const {classificationMethod:h,breakCount:D,normalizationType:d,definedInterval:l}=w.definition,x=[];var G=w.values;if(0===G.length)return[];G=G.sort((m,L)=>m-L);var J=G[0],R=G[G.length-1];if("equal-interval"===
h)if(G.length>=D){G=(R-J)/D;w=J;for(var v=1;v<D;v++){var E=Number((J+v*G).toFixed(6));x.push({minValue:w,maxValue:E,label:C(w,E,d)});w=E}x.push({minValue:w,maxValue:R,label:C(w,R,d)})}else G.forEach(m=>{x.push({minValue:m,maxValue:m,label:C(m,m,d)})});else if("natural-breaks"===h){G=k(G);w=f(G.uniqueValues,w.valueFrequency||G.valueFrequency,D);for(v=1;v<D;v++)G.uniqueValues.length>v&&(E=Number(G.uniqueValues[w[v]].toFixed(6)),x.push({minValue:J,maxValue:E,label:C(J,E,d)}),J=E);x.push({minValue:J,
maxValue:R,label:C(J,R,d)})}else if("quantile"===h)if(G.length>=D&&J!==R){w=Math.ceil(G.length/D);v=0;for(E=1;E<D;E++){var z=w+v-1;z>G.length&&(z=G.length-1);0>z&&(z=0);x.push({minValue:J,maxValue:G[z],label:C(J,G[z],d)});J=G[z];v+=w;w=Math.ceil((G.length-v)/(D-E))}x.push({minValue:J,maxValue:R,label:C(J,R,d)})}else for(R=-1,J=0;J<G.length;J++)w=G[J],w!==R&&(R=w,x.push({minValue:R,maxValue:w,label:C(R,w,d)}),R=w);else if("standard-deviation"===h)if(w=p(G),v=q(G,w),0===v)x.push({minValue:G[0],maxValue:G[0],
label:C(G[0],G[0],d)});else{G=r(J,R,D,w,v)*v;v=0;for(E=D;1<=E;E--)z=Number((w-(E-.5)*G).toFixed(6)),x.push({minValue:J,maxValue:z,label:C(J,z,d)}),J=z,v++;E=Number((w+.5*G).toFixed(6));x.push({minValue:J,maxValue:E,label:C(J,E,d)});J=E;v++;for(z=1;z<=D;z++)E=v===2*D?R:Number((w+(z+.5)*G).toFixed(6)),x.push({minValue:J,maxValue:E,label:C(J,E,d)}),J=E,v++}else if("defined-interval"===h){if(!l)return x;R=G[0];G=G[G.length-1];J=Math.ceil((G-R)/l);w=R;for(v=1;v<J;v++)E=Number((R+v*l).toFixed(6)),x.push({minValue:w,
maxValue:E,label:C(w,E,d)}),w=E;x.push({minValue:w,maxValue:G,label:C(w,G,d)})}return x}function C(w,h,D){let d=null;return d=w===h?D&&"percent-of-total"===D?w+"%":w.toString():D&&"percent-of-total"===D?w+"% - "+h+"%":w+" - "+h}function k(w){const h=[],D=[];let d=Number.MIN_VALUE,l=1,x=-1;for(let G=0;G<w.length;G++){const J=w[G];J===d?(l++,D[x]=l):null!==J&&(h.push(J),d=J,l=1,D.push(l),x++)}return{uniqueValues:h,valueFrequency:D}}function f(w,h,D){var d=w.length;const l=[];D>d&&(D=d);for(var x=0;x<
D;x++)l.push(Math.round(x*d/D-1));l.push(d-1);x=t(l,w,h,D);d=x.mean;x=x.sdcm;var G=D,J=0,R=0;let v=0,E=0,z=!0;for(let L=0;2>L&&z;L++){0===L&&(z=!1);for(var m=0;m<G-1;m++)for(;l[m+1]+1!==l[m+2];)if(l[m+1]+=1,J=B(m,l,w,h),v=J.sbMean,J=J.sbSdcm,R=B(m+1,l,w,h),E=R.sbMean,R=R.sbSdcm,J+R<x[m]+x[m+1])x[m]=J,x[m+1]=R,d[m]=v,d[m+1]=E,z=!0;else{--l[m+1];break}for(m=G-1;0<m;m--)for(;l[m]!==l[m-1]+1;)if(--l[m],J=B(m-1,l,w,h),v=J.sbMean,J=J.sbSdcm,R=B(m,l,w,h),E=R.sbMean,R=R.sbSdcm,J+R<x[m-1]+x[m])x[m-1]=J,x[m]=
R,d[m-1]=v,d[m]=E,z=!0;else{l[m]+=1;break}}z&&(x=t(l,w,h,D));return l}function t(w,h,D,d){let l=[];var x=[],G=[];let J=0;const R=[],v=[];for(var E=0;E<d;E++){var z=B(E,w,h,D);R.push(z.sbMean);v.push(z.sbSdcm);J+=v[E]}z=J;for(E=!0;E||J<z;){E=!1;l=[];for(x=0;x<d;x++)l.push(w[x]);for(G=0;G<d;G++)for(z=w[G]+1;z<=w[G+1];z++)if(x=h[z],0<G&&z!==w[G+1]&&Math.abs(x-R[G])>Math.abs(x-R[G-1]))w[G]=z;else if(G<d-1&&w[G]!==z-1&&Math.abs(x-R[G])>Math.abs(x-R[G+1])){w[G+1]=z-1;break}z=J;J=0;x=[];G=[];for(let m=0;m<
d;m++){x.push(R[m]);G.push(v[m]);const L=B(m,w,h,D);R[m]=L.sbMean;v[m]=L.sbSdcm;J+=v[m]}}if(J>z){for(h=0;h<d;h++)w[h]=l[h],R[h]=x[h],v[h]=G[h];J=z}return{mean:R,sdcm:v}}function r(w,h,D,d,l){w=Math.max(d-w,h-d)/l/D;return 1<=w?1:.5<=w?.5:.25}function p(w){let h=0;for(let D=0;D<w.length;D++)h+=w[D];return h/=w.length}function q(w,h){let D=0;for(let d=0;d<w.length;d++){const l=w[d];D+=(l-h)*(l-h)}D/=w.length;return Math.sqrt(D)}function B(w,h,D,d){var l=0,x=0;for(var G=h[w]+1;G<=h[w+1];G++){const J=
d[G];l+=D[G]*J;x+=J}0>=x&&N.warn("Exception in Natural Breaks calculation");l/=x;x=0;for(G=h[w]+1;G<=h[w+1];G++)x+=d[G]*(D[G]-l)**2;return{sbMean:l,sbSdcm:x}}const N=a.getLogger("esri.rest.support.generateRendererUtils");c.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:h}=w;return{classBreaks:I(w),normalizationTotal:h}};c.createGenerateRendererUniqueValues=function(w){w=k(w);const h=[],D=w.uniqueValues.length;for(let d=0;d<D;d++){const l=w.uniqueValues[d];h.push({value:l,
count:w.valueFrequency[d],label:l.toString()})}return{uniqueValues:h}};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(a,I,C,k,f,t=!1){return{objectId:a,target:I,distance:C,type:"edge",start:k,end:f,draped:t}};c.makeVertexCandidate=function(a,I,C){return{objectId:a,target:I,distance:C,type:"vertex"}};Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/jsonMap ../../../core/maybe ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../OptimizedGeometry ./projectionSupport".split(" "),function(c,
a,I,C,k,f,t,r,p,q,B,N,w,h){function D(){D=I._asyncToGenerator(function*(A,y,P){const {outFields:K,orderByFields:U,groupByFieldsForStatistics:Z,outStatistics:V}=A;if(K)for(var ka=0;ka<K.length;ka++)K[ka]=K[ka].trim();if(U)for(ka=0;ka<U.length;ka++)U[ka]=U[ka].trim();if(Z)for(ka=0;ka<Z.length;ka++)Z[ka]=Z[ka].trim();if(V)for(ka=0;ka<V.length;ka++)V[ka].onStatisticField&&(V[ka].onStatisticField=V[ka].onStatisticField.trim());A.geometry&&!A.outSR&&(A.outSR=A.geometry.spatialReference);return d(A,y,P)});
return D.apply(this,arguments)}function d(A,y,P){return l.apply(this,arguments)}function l(){l=I._asyncToGenerator(function*(A,y,P){if(!A)return null;var {where:K}=A;A.where=K=K&&K.trim();if(!K||/^1 *= *1$/.test(K)||y&&y===K)A.where=null;if(!A.geometry)return A;y=yield G(A);A.distance=0;A.units=null;"esriSpatialRelEnvelopeIntersects"===A.spatialRel&&({spatialReference:K}=A.geometry,y=r.getGeometryExtent(y),y.spatialReference=K);if(y){yield h.checkProjectionSupport(y.spatialReference,P);K=y.spatialReference;
y=x(y,P)&&p.isExtent(y)?{spatialReference:K,rings:[[[y.xmin,y.ymin],[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]]}:y;K=(yield q.normalizeCentralMeridian(p.fromJSON(y)))[0];if(k.isNone(K))throw z;const U="quantizationParameters"in A&&A.quantizationParameters?.tolerance||"maxAllowableOffset"in A&&A.maxAllowableOffset||0;y=U&&x(y,P)?{densificationStep:8*U}:void 0;K=K.toJSON();y=yield h.project(K,K.spatialReference,P,y);if(!y)throw z;y.spatialReference=P;A.geometry=y}return A});return l.apply(this,
arguments)}function x(A,y){if(!A)return!1;const P=A.spatialReference;return(p.isExtent(A)||p.isPolygon(A)||p.isPolyline(A))&&!B.equals(P,y)&&!t.canProjectWithoutEngine(P,y)}function G(A){return J.apply(this,arguments)}function J(){J=I._asyncToGenerator(function*(A){const {distance:y,units:P}=A,K=A.geometry;if(null==y||"vertexAttributes"in K)return K;var U=K.spatialReference;A=P?E.fromJSON(P):f.getUnitString(U);U=U&&(B.isGeographic(U)||B.isWebMercator(U))?K:yield h.checkProjectionSupport(U,B.WGS84).then(()=>
h.project(K,B.WGS84));return(yield R())(U.spatialReference,U,y,A)});return J.apply(this,arguments)}function R(){return v.apply(this,arguments)}function v(){v=I._asyncToGenerator(function*(){return(yield new Promise((A,y)=>c(["../../../geometry/geometryEngineJSON"],A,y))).geodesicBuffer});return v.apply(this,arguments)}const E=new C.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),
z=Object.freeze({}),m=new w,L=new w,b=new w,n={esriGeometryPoint:N.convertToPoint,esriGeometryPolyline:N.convertToPolyline,esriGeometryPolygon:N.convertToPolygon,esriGeometryMultipoint:N.convertToMultipoint},H=(A,y)=>"_geVersion"!==A?y:void 0;a.QUERY_ENGINE_EMPTY_RESULT=z;a.cleanFromGeometryEngine=function(A){return A&&"_geVersion"in A?JSON.parse(JSON.stringify(A,H)):A};a.getGeometry=function(A,y,P,K,U,Z,V=y,ka=P){const ca=y&&V,qa=P&&ka;K=k.isSome(K)?"coords"in K?K:K.geometry:null;if(k.isNone(K))return null;
if(U)return y=N.generalizeOptimizedGeometry(L,K,y,P,A,U,V,ka),Z&&(y=N.quantizeOptimizedGeometry(b,y,ca,qa,A,Z)),n[A]?.(y,ca,qa)??null;if(Z)return Z=N.quantizeOptimizedGeometry(b,K,y,P,A,Z,V,ka),n[A]?.(Z,ca,qa)??null;N.removeZMValues(m,K,y,P,V,ka);return n[A]?.(m,ca,qa)??null};a.normalizeQuery=function(A,y,P){return D.apply(this,arguments)};a.normalizeQueryLike=d;a.transformCentroid=function(A,y,P,K=A.hasZ,U=A.hasM){if(k.isNone(y))return null;const Z=A.hasZ&&K,V=A.hasM&&U;return P?(A=N.quantizeOptimizedGeometry(b,
y,A.hasZ,A.hasM,"esriGeometryPoint",P,K,U),N.convertToPoint(A,Z,V)):N.convertToPoint(y,Z,V)};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/fieldUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/maybe ../../core/object ./domainUtils ../../support/arcadeOnDemand".split(" "),function(c,a,I,C,k,f,t,r){function p(ba,ea,ma){if(ba)for(const ya of ba)(ba=(ba=f.getDeepValue(ya,ea))&&
"function"!==typeof ba&&ma.get(ba))&&f.setDeepValue(ya,ba.name,ea)}function q(ba,ea){if(!ba||!ea)return[];S.clear();B(S,ba,ea);return Array.from(S).sort()}function B(ba,ea,ma){if(ma)if(ea?.fields?.length)if(ma.includes("*"))for(const {name:ya}of ea.fields)ba.add(ya);else for(const ya of ma)N(ba,ea,ya);else if(ma.includes("*"))ba.clear(),ba.add("*");else for(const ya of ma)null!=ya&&ba.add(ya)}function N(ba,ea,ma){"string"===typeof ma&&(ea?(ea=ea.get(ma))&&ba.add(ea.name):ba.add(ma))}function w(ba,
ea,ma){return h.apply(this,arguments)}function h(){h=I._asyncToGenerator(function*(ba,ea,ma){if(ma){var {arcadeUtils:ya}=yield r.loadArcade();ma=ya.extractFieldNames(ma,ea?.fields?.map(Da=>Da.name));for(const Da of ma)N(ba,ea,Da)}});return h.apply(this,arguments)}function D(ba,ea,ma){return d.apply(this,arguments)}function d(){d=I._asyncToGenerator(function*(ba,ea,ma){if(ma&&"1\x3d1"!==ma){const ya=(yield new Promise((Da,Ga)=>c(["../../core/sql/WhereClause"],Da,Ga))).WhereClause.create(ma,ea);if(!ya.isStandardized)throw new C("fieldUtils:collectFilterFields",
"Where clause is not standardized",{where:ma});B(ba,ea,ya.fieldNames)}});return d.apply(this,arguments)}function l(ba,ea){for(const ma of ba)if(ma&&ma.valueType&&ma.valueType===ea)return ma.name;return null}function x(){x=I._asyncToGenerator(function*(ba){if(!ba)return[];const ea=new Set;yield G(ea,ba);return Array.from(ea).sort()});return x.apply(this,arguments)}function G(ba,ea){return J.apply(this,arguments)}function J(){J=I._asyncToGenerator(function*(ba,ea){if(ea){var ma=f.getDeepValue("elevationInfo.featureExpressionInfo",
ea);if(ma)return ma.collectRequiredFields(ba,ea.fieldsIndex)}});return J.apply(this,arguments)}function R(){R=I._asyncToGenerator(function*(ba,ea,ma){if(ea&&ma&&"fields"in ma){var ya=[];ya.push(v(ba,ea,ma.popupTemplate));ma.fields&&ya.push(...ma.fields.map(function(){var Da=I._asyncToGenerator(function*(Ga){Ga.onStatisticExpression?w(ba,ea.fieldsIndex,Ga.onStatisticExpression.expression):ba.add(Ga.onStatisticField)});return function(Ga){return Da.apply(this,arguments)}}()));yield Promise.all(ya)}});
return R.apply(this,arguments)}function v(ba,ea,ma){return E.apply(this,arguments)}function E(){E=I._asyncToGenerator(function*(ba,ea,ma){const ya=[];ma?.expressionInfos&&ya.push(...ma.expressionInfos.map(Da=>w(ba,ea.fieldsIndex,Da.expression)));ma=ma?.content;if(Array.isArray(ma))for(const Da of ma)"expression"===Da.type&&Da.expressionInfo&&ya.push(w(ba,ea.fieldsIndex,Da.expressionInfo.expression));yield Promise.all(ya)});return E.apply(this,arguments)}function z(){z=I._asyncToGenerator(function*(ba,
ea,ma){ea&&(ea.timeInfo&&k.isSome(ma)&&ma.timeExtent&&B(ba,ea.fieldsIndex,[ea.timeInfo.startField,ea.timeInfo.endField]),ea.floorInfo&&B(ba,ea.fieldsIndex,[ea.floorInfo.floorField]),k.isSome(ma)&&k.isSome(ma.where)&&(yield D(ba,ea.fieldsIndex,ma.where)))});return z.apply(this,arguments)}function m(){m=I._asyncToGenerator(function*(ba,ea,ma){ea&&ma&&(yield Promise.all(ma.map(ya=>L(ba,ea,ya))))});return m.apply(this,arguments)}function L(ba,ea,ma){return b.apply(this,arguments)}function b(){b=I._asyncToGenerator(function*(ba,
ea,ma){ea&&ma&&(ma.valueExpression?yield w(ba,ea.fieldsIndex,ma.valueExpression):ma.field&&N(ba,ea.fieldsIndex,ma.field))});return b.apply(this,arguments)}function n(){n=I._asyncToGenerator(function*(ba){if(!ba)return[];const ea="timeInfo"in ba&&ba.timeInfo;return ea?q(ba.fieldsIndex,[ba.trackIdField,ea.startField,ea.endField]):[]});return n.apply(this,arguments)}function H(){H=I._asyncToGenerator(function*(ba){if(!ba)return[];const ea=new Set;yield A(ea,ba);return Array.from(ea).sort()});return H.apply(this,
arguments)}function A(ba,ea){return y.apply(this,arguments)}function y(){y=I._asyncToGenerator(function*(ba,ea){const {labelingInfo:ma,fieldsIndex:ya}=ea;ma&&ma.length&&(yield Promise.all(ma.map(Da=>P(ba,ya,Da))))});return y.apply(this,arguments)}function P(ba,ea,ma){return K.apply(this,arguments)}function K(){K=I._asyncToGenerator(function*(ba,ea,ma){if(ma){var ya=ma.getLabelExpression();ma=ma.where;"arcade"===ya.type?yield w(ba,ea,ya.expression):(ya=ya.expression.match(/{[^}]*}/g))&&ya.forEach(Da=>
{N(ba,ea,Da.slice(1,-1))});yield D(ba,ea,ma)}});return K.apply(this,arguments)}function U(ba){return"number"===typeof ba&&!isNaN(ba)&&isFinite(ba)}function Z(ba){return null===ba||U(ba)}function V(ba){return null===ba||W(ba)}function ka(ba){return null!=ba&&"string"===typeof ba}function ca(ba){return null===ba||ka(ba)}function qa(){return!0}function wa(ba,ea){let ma;switch(ba.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ma=
ba.nullable?V:W;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ma=ba.nullable?Z:U;break;case "string":case "esriFieldTypeString":ma=ba.nullable?ca:ka;break;default:ma=qa}return 1===arguments.length?ma:ma(ea)}function xa(ba){return null!=ba&&ha.has(ba.type)}function Ba(ba,ea){return ba.nullable&&null===ea?null:xa(ba)&&!Ca(ba.type,Number(ea))?a.NumericRangeValidationError.OUT_OF_RANGE:wa(ba,ea)?ba.domain?t.validateDomainValue(ba.domain,ea):null:a.TypeValidationError.INVALID_TYPE}
function Ca(ba,ea){ba="string"===typeof ba?Ja(ba):ba;if(!ba)return!1;const ma=ba.min,ya=ba.max;return ba.isInteger?W(ea)&&ea>=ma&&ea<=ya:ea>=ma&&ea<=ya}function Ja(ba){switch(ba){case "esriFieldTypeSmallInteger":case "small-integer":return ja;case "esriFieldTypeInteger":case "integer":return na;case "esriFieldTypeSingle":case "single":return ra;case "esriFieldTypeDouble":case "double":return sa}}function La(ba,ea,ma){if(!ea||!ea.attributes||!ba){if(k.isSome(ma))for(var ya of ba??[])ma.add(ya);return!0}ea=
ea.attributes;ya=!1;for(const Da of ba)if(!(Da in ea))if(ya=!0,k.isSome(ma))ma.add(Da);else break;return ya}function Na(){Na=I._asyncToGenerator(function*(ba,ea){const ma=new Set;for(const ya of ea)yield w(ma,ba.fieldsIndex,ya);return Array.from(ma).sort()});return Na.apply(this,arguments)}const bb=/^([0-9])/,g=/[^A-Za-z0-9_\u0080-\uffff]/g,F=/_{2,}/g,fa=/^_/,ia=/_$/,oa="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
O=["field","normalizationField"],S=new Set,W=(()=>"isInteger"in Number?Number.isInteger:ba=>"number"===typeof ba&&isFinite(ba)&&Math.floor(ba)===ba)(),Y=["integer","small-integer","single","double"],ha=new Set([...Y,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);a.NumericRangeValidationError=void 0;(a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";a.TypeValidationError=void 0;
(a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const ja={min:-32768,max:32767,isInteger:!0},na={min:-2147483648,max:2147483647,isInteger:!0},ra={min:-3.4E38,max:1.2E38,isInteger:!1},sa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.collectArcadeFieldNames=w;a.collectElevationFields=G;a.collectFeatureReductionFields=function(ba,ea,ma){return R.apply(this,arguments)};a.collectField=N;a.collectFields=B;a.collectFilterFields=function(ba,
ea,ma){return z.apply(this,arguments)};a.collectLabelingFields=A;a.collectOrderByInfos=function(ba,ea,ma){return m.apply(this,arguments)};a.collectPopupTemplateFields=v;a.doubleRange=sa;a.featureHasFields=function(ba,ea){return!La(ba,ea,null)};a.fixFields=q;a.fixRendererFields=function(ba,ea){if(null!=ba&&null!=ea)for(const ma of Array.isArray(ba)?ba:[ba])if(p(oa,ma,ea),"visualVariables"in ma&&ma.visualVariables)for(const ya of ma.visualVariables)p(O,ya,ea)};a.fixTimeInfoFields=function(ba,ea){if(null!=
ba&&ea?.fields?.length)if("startField"in ba){var ma=ea.get(ba.startField);ea=ea.get(ba.endField);ba.startField=ma?.name??null;ba.endField=ea?.name??null}else ma=ea.get(ba.startTimeField),ea=ea.get(ba.endTimeField),ba.startTimeField=ma?.name??null,ba.endTimeField=ea?.name??null};a.getDisplayFieldName=function({displayField:ba,fields:ea}){if(ba)return ba;if(!ea||!ea.length)return null;if(!(ba=l(ea,"name-or-title")||l(ea,"unique-identifier")||l(ea,"type-or-category")))a:{for(const ma of ea)if(ma&&ma.name&&
(ea=ma.name.toLowerCase(),ea.includes("name")||ea.includes("title"))){ba=ma.name;break a}ba=null}return ba};a.getElevationFields=function(ba){return x.apply(this,arguments)};a.getExpressionFields=function(ba,ea){return Na.apply(this,arguments)};a.getFeatureEditFields=function(ba){if(!ba)return[];const ea="editFieldsInfo"in ba&&ba.editFieldsInfo;return ea?q(ba.fieldsIndex,[ea&&ea.creatorField,ea&&ea.creationDateField,ea&&ea.editorField,ea&&ea.editDateField]):[]};a.getFeatureGeometryFields=function(ba){if(!ba)return[];
const ea=ba.geometryFieldsInfo;return ea?q(ba.fieldsIndex,[ea.shapeAreaField,ea.shapeLengthField]):[]};a.getFieldDefaultValue=function(ba){const ea=ba.defaultValue;if(void 0!==ea&&wa(ba,ea))return ea;if(ba.nullable)return null};a.getFieldRange=function(ba){const ea=t.getDomainRange(ba.domain);if(ea)return ea;if(xa(ba))return Ja(ba.type)};a.getLabelingFields=function(ba){return H.apply(this,arguments)};a.getNumericTypeForValue=function(ba){if(!U(ba))return null;if(W(ba)){if(ba>=ja.min&&ba<=ja.max)return"esriFieldTypeSmallInteger";
if(ba>=na.min&&ba<=na.max)return"esriFieldTypeInteger"}return ba>=ra.min&&ba<=ra.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.getTimeFields=function(ba){return n.apply(this,arguments)};a.integerRange=na;a.isDateField=function(ba){return null!=ba&&("date"===ba.type||"esriFieldTypeDate"===ba.type)};a.isNumberInRange=Ca;a.isNumericField=xa;a.isRasterPixelValueField=function(ba){return["raster.itempixelvalue","raster.servicepixelvalue"].some(ea=>ba.toLowerCase().startsWith(ea))};a.isStringField=
function(ba){return null!=ba&&("string"===ba.type||"esriFieldTypeString"===ba.type)};a.isValidFieldValue=function(ba,ea){return null===Ba(ba,ea)};a.isValueMatchingFieldType=wa;a.normalizeFieldName=function(ba){return ba?ba.trim().replace(g,"_").replace(F,"_").replace(fa,"").replace(ia,"").replace(bb,"F$1"):null};a.numericTypes=Y;a.packFields=function(ba,ea,ma=1){if(!ea||!ba)return[];if(ea.includes("*"))return["*"];ea=q(ba,ea);return ea.length/ba.fields.length>=ma?["*"]:ea};a.populateMissingFields=
La;a.rendererFields=oa;a.sanitizeNullFieldValue=function(ba){return null==ba||"number"===typeof ba&&isNaN(ba)?null:ba};a.singleRange=ra;a.smallIntegerRange=ja;a.unpackFieldNames=function(ba,ea){return k.isNone(ea)||k.isNone(ba)?[]:ea.includes("*")?(ba.fields??[]).map(ma=>ma.name):ea};a.validateFieldValue=Ba;a.validationErrorToString=function(ba,ea,ma){switch(ba){case t.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ma} is not in the coded domain - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;
case t.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ma} is out of the range of valid values - field: ${ea.name}, domain: ${JSON.stringify(ea.domain)}`;case a.TypeValidationError.INVALID_TYPE:return`Value ${ma} is not a valid value for the field type - field: ${ea.name}, type: ${ea.type}, nullable: ${ea.nullable}`;case a.NumericRangeValidationError.OUT_OF_RANGE:const {min:ya,max:Da}=Ja(ea.type);return`Value ${ma} is out of range for the number type - field: ${ea.name}, type: ${ea.type}, value range is ${ya} to ${Da}`}};
a.visualVariableFields=O;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/domainUtils":function(){define(["exports"],function(c){c.DomainValidationError=void 0;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(c.DomainValidationError||(c.DomainValidationError={}));c.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in
a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};c.validateDomainValue=function(a,I){switch(a.type){case "range":const C="range"in a?a.range[0]:a.minValue;a="range"in a?a.range[1]:a.maxValue;if(null!=C&&+I<C||null!=a&&+I>a)return c.DomainValidationError.VALUE_OUT_OF_RANGE;break;case "coded-value":if(null==a.codedValues||a.codedValues.every(k=>null==k||k.code!==I))return c.DomainValidationError.INVALID_CODED_VALUE;break;case "codedValue":if(null==a.codedValues||a.codedValues.every(k=>
null==k||k.code!==I))return c.DomainValidationError.INVALID_CODED_VALUE}return null};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/support/arcadeOnDemand":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../geometry ../core/Error ../core/Logger ../core/maybe ../geometry/SpatialReference".split(" "),function(c,a,I,C,k,f,t,r){function p(){B||(B=I._asyncToGenerator(function*(){const w=yield new Promise((h,D)=>c(["./arcadeUtils"],
h,D));return{arcade:w.arcade,arcadeUtils:w,Dictionary:w.Dictionary,Feature:w.arcadeFeature}})());return B}const q=f.getLogger("esri.support.arcadeOnDemand");let B;C=(w,h,D)=>N.create(w,h,D,null,["$feature","$view"]);let N=function(){function w(D,d,l,x,G,J,R,v){this.script=D;this.evaluate=G;this.fields=Array.isArray(R)?R:R.fields;this._syntaxTree=x;this._arcade=d;this._arcadeDictionary=l;this._arcadeFeature=J;this._spatialReference=v;this._referencesGeometry=d.scriptTouchesGeometry(this._syntaxTree);
this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}w.create=function(){var D=I._asyncToGenerator(function*(d,l,x,G,J,R){const {arcade:v,Feature:E,Dictionary:z}=yield p(),m=r.fromJSON(l);l=null;try{l=v.parseScript(d,R)}catch(P){return q.error(new k("arcade-bad-expression","Failed to parse arcade script",{script:d,error:P})),null}R=J.reduce((P,K)=>({...P,[K]:null}),{});let L=null;t.isSome(G)&&(L=new z(G),L.immutable=!0,R.$config=null);var b=(G=v.scriptUsesGeometryEngine(l))&&
v.enableGeometrySupport();const n=v.scriptUsesFeatureSet(l)&&v.enableFeatureSetSupport(),H=(J=v.scriptIsAsync(l))&&v.enableAsyncSupport();R={vars:R,spatialReference:m,useAsync:!!H};yield Promise.all([b,n,H]);b=new Set;yield v.loadDependentModules(b,l,null,J,G);const A=new z;A.immutable=!1;A.setField("scale",0);const y=v.compileScript(l,R);return new w(d,v,z,l,P=>{"$view"in P&&P.$view&&(A.setField("scale",P.$view.scale),P.$view=A);L&&(P.$config=L);return y({vars:P,spatialReference:m})},new E,x,m)});
return function(d,l,x,G,J,R){return D.apply(this,arguments)}}();var h=w.prototype;h.repurposeFeature=function(D){D.geometry&&!D.geometry.spatialReference&&(D.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(D.geometry,D.attributes,{fields:this.fields});return this._arcadeFeature};h.createDictionary=function(){return new this._arcadeDictionary};h.referencesMember=function(D){return this._arcade.referencesMember(this._syntaxTree,D)};h.referencesFunction=
function(D){return this._arcade.referencesFunction(this._syntaxTree,D)};h.referencesGeometry=function(){return this._referencesGeometry};h.referencesScale=function(){return this._referencesScale};h.extractFieldLiterals=function(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)};return w}();a.ArcadeExpression=N;a.createDictionaryExpression=(w,h,D,d)=>N.create(w,h,D,d,["$feature","$view"]);a.createLabelExpression=(w,h,D)=>N.create(w,h,D,null,["$feature"]);a.createRendererExpression=
C;a.createVVExpression=C;a.loadArcade=p;Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./projectionSupport ./utils".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w){function h(){return new Promise((x,G)=>c(["../../../geometry/geometryEngineJSON"],x,G))}function D(){D=I._asyncToGenerator(function*(x,G,J){const {spatialRel:R,geometry:v}=x;if(v){if(null==R||!0!==l.spatialRelationship[R])throw new C("feature-store:unsupported-query","Unsupported query spatial relationship",{query:x});if(r.isValid(v.spatialReference)&&r.isValid(J)){if(null==v||!0!==l.queryGeometry[t.getJsonType(v)])throw new C("feature-store:unsupported-query",
"Unsupported query geometry type",{query:x});if(null==G||!0!==l.layerGeometry[G])throw new C("feature-store:unsupported-query","Unsupported layer geometry type",{query:x});if(x.outSR)return N.checkProjectionSupport(x.geometry&&x.geometry.spatialReference,x.outSR)}}});return D.apply(this,arguments)}const d={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,
esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},l={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,
esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};a.canQueryWithRBush=function(x){if(t.isExtent(x))return!0;if(t.isPolygon(x)){for(const G of x.rings)if(5!==G.length||G[0][0]!==G[1][0]||G[0][0]!==G[4][0]||G[2][0]!==G[3][0]||G[0][1]!==G[3][1]||G[0][1]!==G[4][1]||G[1][1]!==G[2][1])return!1;return!0}return!1};a.checkSpatialQuerySupport=function(x,G,J){return D.apply(this,
arguments)};a.getSpatialQueryOperator=function(x,G,J,R,v){if(t.isPolygon(G)&&"esriGeometryPoint"===J&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x)){const E=q.convertFromPolygon(new B,G,!1,!1);return Promise.resolve(z=>p.polygonContainsPoint(E,!1,!1,z))}if(t.isPolygon(G)&&"esriGeometryMultipoint"===J){const E=q.convertFromPolygon(new B,G,!1,!1);if("esriSpatialRelContains"===x)return Promise.resolve(z=>p.polygonContainsMultipoint(E,!1,!1,z,R,v))}if(t.isExtent(G)&&"esriGeometryPoint"===
J&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x))return Promise.resolve(E=>k.extentContainsPoint(G,w.getGeometry(J,R,v,E)));if(t.isExtent(G)&&"esriGeometryMultipoint"===J&&"esriSpatialRelContains"===x)return Promise.resolve(E=>k.extentContainsMultipoint(G,w.getGeometry(J,R,v,E)));if(t.isExtent(G)&&"esriSpatialRelIntersects"===x){const E=f.getExtentIntersector(J);return Promise.resolve(z=>E(G,w.getGeometry(J,R,v,z)))}return h().then(E=>{const z=E[d[x]].bind(null,G.spatialReference,
G);return m=>z(w.getGeometry(J,R,v,m))})};Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,a){c.extentIntersectsExtent=a.extentIntersectsExtent;c.extentIntersectsMultipoint=a.extentIntersectsMultipoint;c.extentIntersectsPoint=a.extentIntersectsPoint;c.extentIntersectsPolygon=a.extentIntersectsPolygon;c.extentIntersectsPolyline=a.extentIntersectsPolyline;c.extentIntersectsRings=
a.extentIntersectsRings;c.getFeatureExtentIntersector=a.getFeatureExtentIntersector;c.isSelfIntersecting=a.isSelfIntersecting;c.segmentIntersects=a.segmentIntersects;c.getExtentIntersector=function(I){return"mesh"===I?a.extentIntersectsExtent:a.getFeatureExtentIntersector(I)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function a(I,C,k,f,t){if(!I)return!1;C=C?k?4:3:k?3:2;const {coords:r,
lengths:p}=I;k=!1;I=0;for(const B of p){var q=I;for(let N=I,w=I+B*C;N<w;N+=C){q=N+C;q===w&&(q=I);const h=r[N],D=r[N+1],d=r[q];q=r[q+1];(D<t&&q>=t||q<t&&D>=t)&&h+(t-D)/(q-D)*(d-h)<f&&(k=!k)}I+=B*C}return k}c.polygonContainsCoords=a;c.polygonContainsMultipoint=function(I,C,k,f,t,r){t=t?r?4:3:r?3:2;const {coords:p,lengths:q}=f;if(!q)return!1;for(let B=0,N=0;B<q.length;B++,N+=t)if(!a(I,C,k,p[N],p[N+1]))return!1;return!0};c.polygonContainsPoint=function(I,C,k,f){return a(I,C,k,f.coords[0],f.coords[1])};
Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function a(k,f,t,r,p){if(null!=r&&null!=p)return q=>{const B=k.getAttribute(q,f);q=k.getAttribute(q,t);return(null==B||B<=p)&&(null==q||q>=r)};if(null!=r)return q=>{q=k.getAttribute(q,t);return null==q||q>=r};if(null!=p)return q=>{q=k.getAttribute(q,f);return null==q||q<=p}}function I(k,f,t,r){if(null!=t&&null!=r&&t===r)return p=>
k.getAttribute(p,f)===t;if(null!=t&&null!=r)return p=>{p=k.getAttribute(p,f);return p>=t&&p<=r};if(null!=t)return p=>k.getAttribute(p,f)>=t;if(null!=r)return p=>k.getAttribute(p,f)<=r}function C(){return()=>!1}c.getTimeExtent=function(k,f){if(!k)return null;const t=f.featureAdapter,{startTimeField:r,endTimeField:p}=k;let q=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;if(r&&p)f.forEach(N=>{const w=t.getAttribute(N,r);N=t.getAttribute(N,p);null==w||isNaN(w)||(q=Math.min(q,w));null==N||isNaN(N)||
(B=Math.max(B,N))});else{const N=r||p;f.forEach(w=>{w=t.getAttribute(w,N);null==w||isNaN(w)||(q=Math.min(q,w),B=Math.max(B,w))})}return{start:q,end:B}};c.getTimeOperator=function(k,f,t){if(!f||!k)return null;const {startTimeField:r,endTimeField:p}=k;if(!r&&!p)return null;const {start:q,end:B}=f;return null===q&&null===B?null:void 0===q&&void 0===B?C():r&&p?a(t,r,p,q,B):I(t,r||p,q,B)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/FieldsIndex":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"./fieldUtils"],function(c,a){function I(k){return"oid"===k.type||"esriFieldTypeOID"===k.type}function C(k){return"global-id"===k.type||"esriFieldTypeGlobalID"===k.type}return function(){function k(t=[]){this.fields=[];this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this.dateFields=[];this.numericFields=[];this._requiredFields=null;if(t){this.fields=t;var r=[];for(const p of t)if(t=p&&p.name){const q=t.trim().toLowerCase(),B=a.normalizeFieldName(t).toLowerCase();
this._fieldsMap.set(t,p);this._fieldsMap.set(q,p);this._normalizedFieldsMap.set(B,p);r.push(q);"date"===p.type||"esriFieldTypeDate"===p.type?(this.dateFields.push(p),this._dateFieldsSet.add(p)):a.isNumericField(p)&&(this._numericFieldsSet.add(p),this.numericFields.push(p));I(p)||C(p)||(p.editable=null==p.editable?!0:!!p.editable,p.nullable=null==p.nullable?!0:!!p.nullable)}r.sort();this.uid=r.join(",")}}var f=k.prototype;f.destroy=function(){this._fieldsMap.clear()};f.has=function(t){return null!=
this.get(t)};f.get=function(t){if(t){var r=this._fieldsMap.get(t);if(r)return r;(r=this._fieldsMap.get(t.trim().toLowerCase())??this._normalizedFieldsMap.get(a.normalizeFieldName(t).toLowerCase()))&&this._fieldsMap.set(t,r);return r}};f.isDateField=function(t){return this._dateFieldsSet.has(this.get(t))};f.isNumericField=function(t){return this._numericFieldsSet.has(this.get(t))};f.normalizeFieldName=function(t){if(t=this.get(t))return t.name??void 0};c._createClass(k,[{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=
[];for(const t of this.fields)I(t)||C(t)||t.nullable||void 0!==a.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}}]);return k}()})},"esri/views/support/Scheduler":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Handles ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/time ../../core/accessorSupport/tracking/ObservableValue ../../layers/support/PromiseQueue ./debugFlags ./RenderState".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h){function D(m){return d.has(m)?d.get(m):"number"===typeof m?m:1}c.TaskPriority=void 0;(function(m){m.RESOURCE_CONTROLLER="schedule";m.SLIDE="slide";m.STREAM_DATA_LOADER="stream loader";m.ELEVATION_QUERY="elevation query";m.TERRAIN_SURFACE="terrain";m.SURFACE_GEOMETRY_UPDATES="surface geometry updates";m.GRAPHICS_CORE="Graphics3D";m.I3S_CONTROLLER="I3S";m.POINT_CLOUD_LAYER="point cloud";m.FEATURE_TILE_FETCHER="feature fetcher";m.OVERLAY="overlay";m.STAGE="stage";
m.GRAPHICS_DECONFLICTOR="graphics deconflictor";m.FILTER_VISIBILITY="Graphics3D filter visibility";m.SCALE_VISIBILITY="Graphics3D scale visibility";m.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";m.POINT_OF_INTEREST_FREQUENT="POI frequent";m.POINT_OF_INTEREST_INFREQUENT="POI infrequent";m.LABELER="labeler";m.FEATURE_QUERY_ENGINE="feature query";m.FEATURE_TILE_TREE="feature tile tree";m.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";m.ELEVATION_ALIGNMENT="elevation alignment";m.TEXT_TEXTURE_ATLAS=
"text texture atlas";m.TEXTURE_UNLOAD="texture unload";m.LINE_OF_SIGHT_TOOL="line of sight tool";m.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";m.ELEVATION_PROFILE="elevation profile";m.SNAPPING="snapping";m.SHADOW_ACCUMULATOR="shadow accumulator";m.CLOUDS_GENERATOR="cloud generator";m[m.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority={}));const d=new Map([[c.TaskPriority.RESOURCE_CONTROLLER,0],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,
0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,
6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),l=q.Milliseconds(6.5),x=q.Milliseconds(1),
G=q.Milliseconds(30),J=q.Milliseconds(1E3/30),R=q.Milliseconds(100);var v;(function(m){let L=function(){function H(){this._updating=new B.ObservableValue(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new f("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new n;this._state=h.RenderState.INTERACTING;this._tasks=new t;this._runQueue=new t;this._load=0;this._idleStateCallbacks=new t;this._idleUpdatesStartFired=!1;this._maxReschedule=32;this._debug=this._forceTask=
!1;this._debugHandle=p.watch(()=>w.SCHEDULER_LOG_SLOW_TASKS,P=>this._debug=P,p.initial);for(const P of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[P],new f(c.TaskPriority[P]));const y=this;this._test={FRAME_SAFETY_BUDGET:l,INTERACTING_BUDGET:J,IDLE_BUDGET:R,get availableBudget(){return y._budget.budget},usedBudget:0,getBudget:()=>y._budget,setBudget:P=>y._budget=P,updateTask:P=>this._updateTask(P),getState:P=>this._getState(P),getRuntime:P=>this._getRuntime(P),frameTaskTimes:this._frameTaskTimes,
resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}var A=H.prototype;A.destroy=function(){this._tasks.toArray().forEach(y=>y.remove());this._tasks.clear();k.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updating.set(!1)};A.activate=function(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=32,this._schedule(),this.frame()))}))};A.registerTask=
function(y,P){const K=D(y);P=new b(this,y,P,K);this._tasks.push(P);this.performanceInfo.tasks.has(y)||this.performanceInfo.tasks.set(y,new f(y));return P};A.registerIdleStateCallbacks=function(y,P){const K={idleBegin:y,idleEnd:P};this._idleStateCallbacks.push(K);this.state===h.RenderState.IDLE&&this._idleUpdatesStartFired&&K.idleBegin();const U=this;return{remove:()=>this._removeIdleStateCallbacks(K),set idleBegin(Z){U._idleUpdatesStartFired&&(K.idleEnd(),U._state===h.RenderState.IDLE&&Z());K.idleBegin=
Z},set idleEnd(Z){K.idleEnd=Z}}};A.updateBudget=function(y){this._test.usedBudget=0;++this._frameNumber;let P=l,K=y.frameDuration,U=x;switch(this.state){case h.RenderState.IDLE:P=q.Milliseconds(0);K=q.Milliseconds(Math.max(R,y.frameDuration));U=G;break;case h.RenderState.INTERACTING:K=q.Milliseconds(Math.max(J,y.frameDuration))}K=q.Milliseconds(K-y.elapsedFrameTime-P);if(this.state!==h.RenderState.IDLE&&K<x&&!this._forceTask)return this._forceTask=!0,!1;K=q.Milliseconds(Math.max(K,U));this._budget.reset(K,
this.state);this._maxReschedule=32;this._updateLoad();return this._schedule()};A.frame=function(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case h.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(y=>y.idleBegin()));this._runIdle();break;case h.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};A.stopFrame=function(){this._budget.reset(q.Milliseconds(0),
this._state);this._budget.madeProgress()};A._removeIdleStateCallbacks=function(y){this._idleUpdatesStartFired&&y.idleEnd();this._idleStateCallbacks.removeUnordered(y)};A.removeTask=function(y){this._tasks.removeUnordered(y);this._runQueue.removeUnordered(y)};A._updateTask=function(y){this._tasks.forAll(P=>{P.name===y&&P.setPriority(y)})};A._getState=function(y){if(this._runQueue.some(K=>K.name===y))return c.TaskState.SCHEDULED;let P=c.TaskState.IDLE;this._tasks.forAll(K=>{K.name===y&&K.needsUpdate&&
(1>=K.schedulePriority?P=c.TaskState.READY:P!==c.TaskState.READY&&(P=c.TaskState.WAITING))});return P};A._getRuntime=function(y){let P=0;this._tasks.forAll(K=>{K.name===y&&(P+=K.runtime)});return P};A._resetRuntimes=function(){this._tasks.forAll(y=>y.runtime=0)};A._getRunning=function(){const y=new Map;this._tasks.forAll(K=>{K.needsUpdate&&y.set(K.name,(y.get(K.name)||0)+1)});if(0===y.size)return null;let P="";y.forEach((K,U)=>{P=1<K?P+` ${K}x ${U}`:P+` ${U}`});return P};A._runIdle=function(){this._run()};
A._runInteracting=function(){this._run()};A._runAnimating=function(){this._run()};A._updateLoad=function(){const y=this._tasks.reduce((P,K)=>K.needsUpdate?++P:P,0);this._load=.9*this._load+y*(1-.9)};A._schedule=function(){if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(y=>{if(y.needsUpdate)return!0;y.schedulePriority=y.basePriority;return!1});for(this._tasks.forAll(y=>{0===y.basePriority&&y.needsUpdate&&!this._runQueue.includes(y)&&this._runQueue.unshift(y)});0===this._runQueue.length;){let y=
!1;this._tasks.forAll(P=>{if(P.needsUpdate&&0!==P.schedulePriority&&0!==P.basePriority&&(!P.task.runOncePerFrame||P.lastFrameRun!==this._frameNumber))switch(y=!0,P.schedulePriority){case 1:P.schedulePriority=0;this._runQueue.push(P);break;default:--P.schedulePriority}});if(!y)return this._updating.set(!1),!1;--this._maxReschedule}this._updating.set(!0);return!0};A._run=function(){const y=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var P=this._budget.now();const K=
this._runQueue.pop();this._budget.resetProgress();try{K.task.runTask(this._budget)}catch(U){C.getLogger("esri.views.support.Scheduler").error(`Exception in task "${K.name}"`,U)}K.schedulePriority=K.basePriority;K.lastFrameRun=this._frameNumber;P=this._budget.now()-P;K.runtime+=P;this._frameTaskTimes.set(K.priority,this._frameTaskTimes.get(K.priority)+P);this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",K.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");
if(0>=this._budget.remaining){this._updating.set(this._tasks.some(U=>U.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-y);return}}while(this._schedule());this._updating.set(this._tasks.some(K=>K.needsUpdate));this._recordFrameTaskTimes(this._budget.now()-y)};A._startFrameTaskTimes=function(){for(const y of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[y],0)};A._recordFrameTaskTimes=function(y){this._frameTaskTimes.forEach((P,K)=>this.performanceInfo.tasks.get(K).record(P));
this.performanceInfo.total.record(y)};a._createClass(H,[{key:"updating",get:function(){return this._updating.get()},set:function(y){this._updating.set(y)}},{key:"load",get:function(){return this._load}},{key:"state",get:function(){return this._state},set:function(y){this._state!==y&&(this._state=y,this.state!==h.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(P=>P.idleEnd())))}},{key:"test",get:function(){return this._test}}]);return H}();
m.Scheduler=L;let b=function(){function H(y,P,K,U){this._scheduler=y;this.name=P;this._basePriority=U;this.runtime=this.lastFrameRun=0;this._queue=new N.PromiseQueue;this._handles=new I;this.schedulePriority=this._basePriority;this._task=new B.ObservableValue(k.isSome(K)?K:this._queue);this._handles.add(p.when(()=>this.task.running,()=>y.activate()))}var A=H.prototype;A.remove=function(){this.processQueue(E);this._scheduler.removeTask(this);this.schedule=z.schedule;this.reschedule=z.reschedule;this._handles.destroy()};
A.setPriority=function(y){this.name=y;y=D(y);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=y;this._basePriority=y};A.schedule=function(y,P,K){return this._queue.push(y,P,K)};A.reschedule=function(y,P,K){return this._queue.unshift(y,P,K)};A.processQueue=function(y){this._queue.runTask(y)};a._createClass(H,[{key:"task",get:function(){return this._task.get()}},{key:"updating",get:function(){return this._queue.running}},{key:"basePriority",get:function(){return this._basePriority}},
{key:"priority",get:function(){return this.name},set:function(y){this.setPriority(y)}},{key:"needsUpdate",get:function(){return this.updating||this.task.running}}]);return H}(),n=function(){function H(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=h.RenderState.IDLE;this._done=!1;this._enabled=!0}var A=H.prototype;A.run=function(y){if(this.done)return!1;!0===y()&&this.madeProgress();return!0};A.madeProgress=function(){this._done=this.elapsed>=this._budget&&
this._enabled};A.reset=function(y,P){this._begin=this.now();this._budget=y;this._state=P;this._done=!1};A.now=function(){return performance.now()};A.resetProgress=function(){this._done=!1};a._createClass(H,[{key:"done",get:function(){return this._done}},{key:"budget",get:function(){return this._budget}},{key:"state",get:function(){return this._state}},{key:"enabled",get:function(){return this._enabled},set:function(y){this._enabled=y}},{key:"remaining",get:function(){return Math.max(this._budget-
this.elapsed,0)}},{key:"elapsed",get:function(){return performance.now()-this._begin}},{key:"hasProgressed",get:function(){return this._done}}]);return H}();m.Budget=n})(v||(v={}));c.TaskState=void 0;(function(m){m.SCHEDULED="s";m.READY="r";m.WAITING="w";m.IDLE="i"})(c.TaskState||(c.TaskState={}));const E=(()=>{const m=new v.Budget;m.enabled=!1;return m})(),z=new (function(){function m(){}var L=m.prototype;L.remove=function(){};L.processQueue=function(){};L.schedule=function(b,n,H){try{if(r.isAborted(n)){const A=
r.createAbortError();return H?Promise.resolve(H(A)):Promise.reject(A)}return r.when(b(E))}catch(A){return Promise.reject(A)}};L.reschedule=function(b,n,H){return this.schedule(b,n,H)};return m}());c.ImmediateTask=z;c.getTaskPriority=D;c.newScheduler=function(){return new v.Scheduler};c.noBudget=E;c.taskPriorities=d;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/accessorSupport/tracking/ObservableValue":function(){define(["exports","../tracking",
"./SimpleObservable"],function(c,a,I){let C=function(){function k(t){this._observable=new I.SimpleObservable;this._value=t}var f=k.prototype;f.get=function(){a.trackAccess(this._observable);return this._value};f.set=function(t){t!==this._value&&(this._value=t,this._observable.notify())};return k}();c.ObservableValue=C;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/promiseUtils","../../core/accessorSupport/tracking/ObservableValue"],function(c,a,I,C){let k=function(){function t(){this._tasks=[];this._running=new C.ObservableValue(!1)}var r=t.prototype;r.destroy=function(){this.cancelAll()};r.runTask=function(p){for(;!p.done&&this._process(p);)p.madeProgress()};r.push=function(p,q,B){this._running.set(!0);return new Promise((N,w)=>this._tasks.push(new f(N,w,p,q,B)))};r.unshift=function(p,q,B){this._running.set(!0);return new Promise((N,w)=>this._tasks.unshift(new f(N,
w,p,q,B)))};r._process=function(p){if(0===this._tasks.length)return!1;const q=this._tasks.shift();try{const B=I.isAborted(q.signal);if(B&&!q.abortCallback)q.reject(I.createAbortError());else{const N=B?q.abortCallback?.(I.createAbortError()):q.callback(p);I.isPromiseLike(N)?N.then(q.resolve,q.reject):q.resolve(N)}}catch(B){q.reject(B)}this._running.set(0<this._tasks.length);return!0};r.cancelAll=function(){const p=I.createAbortError();for(const q of this._tasks)if(q.abortCallback){const B=q.abortCallback(p);
q.resolve(B)}else q.reject(p);this._tasks.length=0;this._running.set(!1)};a._createClass(t,[{key:"length",get:function(){return this._tasks.length}},{key:"running",get:function(){return this._running.get()}}]);return t}(),f=function(t,r,p,q,B){this.resolve=t;this.reject=r;this.callback=p;this.signal=q;this.abortCallback=B};c.PromiseQueue=k;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/debugFlags":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t){I=function(r){function p(){var q=r.apply(this,arguments)||this;q.SCHEDULER_LOG_SLOW_TASKS=!1;q.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1;return q}c._inheritsLoose(p,r);return p}(I);a.__decorate([C.property()],I.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([C.property()],I.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);I=a.__decorate([t.subclass("esri.views.support.DebugFlags")],I);return new I})},"esri/views/support/RenderState":function(){define(["exports"],
function(c){c.RenderState=void 0;var a=c.RenderState||(c.RenderState={});a[a.ANIMATING=0]="ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]="IDLE";Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G){var J;I=new I.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});C=J=function(R){function v(z){z=R.call(this,z)||this;z.dpi=96;z.format=null;z.origin=null;z.minScale=0;z.maxScale=0;z.size=null;z.spatialReference=null;return z}c._inheritsLoose(v,R);v.create=function(z=
{}){const {resolutionFactor:m=1,scales:L,size:b=256,spatialReference:n=h.WebMercator,numLODs:H=24}=z;if(!d.isValid(n)){z=[];if(L)for(var A=0;A<L.length;A++){var y=L[A];z.push({level:A,scale:y,resolution:y})}else for(A=5E-4,y=H-1;0<=y;y--)z.unshift({level:y,scale:A,resolution:A}),A*=2;return new J({dpi:96,lods:z,origin:new w(0,0,n),size:[b,b],spatialReference:n})}A=d.getInfo(n);z=z.origin?new w({x:z.origin.x,y:z.origin.y,spatialReference:n}):A?new w({x:A.origin[0],y:A.origin[1],spatialReference:n}):
new w({x:0,y:0,spatialReference:n});A=1/(39.37*f.getMetersPerUnitForSR(n)*96);y=[];if(L)for(var P=0;P<L.length;P++){var K=L[P];y.push({level:P,scale:K,resolution:K*A})}else{var U=d.isGeographic(n)?512/b*5.916575275917094E8:256/b*5.91657527591555E8;P=Math.ceil(H/m);y.push({level:0,scale:U,resolution:U*A});for(K=1;K<P;K++)U/=2**m,y.push({level:K,scale:U,resolution:U*A})}return new J({dpi:96,lods:y,origin:z,size:[b,b],spatialReference:n})};var E=v.prototype;E.readOrigin=function(z,m){return w.fromJSON({spatialReference:m.spatialReference,
...z})};E.readSize=function(z,m){return[m.cols,m.rows]};E.writeSize=function(z,m){m.cols=z[0];m.rows=z[1]};E.zoomToScale=function(z){const m=this.scales;if(0>=z)return m[0];if(z>=m.length-1)return m[m.length-1];const L=Math.floor(z);return m[L]/(m[L]/m[L+1])**(z-L)};E.scaleToZoom=function(z){const m=this.scales,L=m.length-1;let b=0;for(;b<L;b++){const n=m[b],H=m[b+1];if(n<=z)break;if(H===z)return b+1;if(n>z&&H<z)return b+Math.log(n/z)/Math.log(n/H)}return b};E.snapScale=function(z,m=.95){z=this.scaleToZoom(z);
return z%Math.floor(z)>=m?this.zoomToScale(Math.ceil(z)):this.zoomToScale(Math.floor(z))};E.tileAt=function(z,m,L,b){var n=this.lodAt(z);if(!n)return null;let H;if("number"===typeof m)H=m,m=L;else{if(d.equals(m.spatialReference,this.spatialReference))H=m.x,m=m.y;else{b=l.project(m,this.spatialReference);if(k.isNone(b))return null;H=b.x;m=b.y}b=L}L=n.resolution*this.size[0];n=n.resolution*this.size[1];b||(b=new G.TileKey(null,0,0,0,D.create()));b.level=z;b.row=Math.floor((this.origin.y-m)/n+.001);
b.col=Math.floor((H-this.origin.x)/L+.001);this.updateTileInfo(b);return b};E.updateTileInfo=function(z,m=J.ExtrapolateOptions.NONE){var L=this.lodAt(z.level);L||m!==J.ExtrapolateOptions.POWER_OF_TWO||(m=this.lods[this.lods.length-1],m.level<z.level&&(L=m));if(L){var b=z.level-L.level;m=L.resolution*this.size[0]/2**b;L=L.resolution*this.size[1]/2**b;z.id=`${z.level}/${z.row}/${z.col}`;z.extent||(z.extent=D.create());z.extent[0]=this.origin.x+z.col*m;z.extent[1]=this.origin.y-(z.row+1)*L;z.extent[2]=
z.extent[0]+m;z.extent[3]=z.extent[1]+L}};E.upsampleTile=function(z){const m=this._upsampleLevels[z.level];if(!m||-1===m.parentLevel)return!1;z.level=m.parentLevel;z.row=Math.floor(z.row/m.factor+.001);z.col=Math.floor(z.col/m.factor+.001);this.updateTileInfo(z);return!0};E.getTileBounds=function(z,m){var L=this.lodAt(m.level);if(null==L)return null;var {resolution:b}=L;L=b*this.size[0];b*=this.size[1];z[0]=this.origin.x+m.col*L;z[1]=this.origin.y-(m.row+1)*b;z[2]=z[0]+L;z[3]=z[1]+b;return z};E.lodAt=
function(z){return this._levelToLOD?.[z]??null};E.clone=function(){return J.fromJSON(this.write({}))};E.getOrCreateCompatible=function(z,m){if(256===this.size[0]&&256===this.size[1])return 256===z?this:null;const L=[],b=this.lods.length;for(let n=0;n<b;n++){const H=this.lods[n];L.push(new x({level:H.level,scale:H.scale,resolution:H.resolution*m}))}return new J({size:[z,z],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,
lods:L})};E._initializeUpsampleLevels=function(){const z=this.lods;this._upsampleLevels=[];let m=null;for(let L=0;L<z.length;L++){const b=z[L];this._upsampleLevels[b.level]={parentLevel:m?m.level:-1,factor:m?m.resolution/b.resolution:0};m=b}};c._createClass(v,[{key:"isWrappable",get:function(){const {spatialReference:z,origin:m}=this;if(z&&m){const L=d.getInfo(z);return z.isWrappable&&!!L&&Math.abs(L.origin[0]-m.x)<=L.dx}return!1}},{key:"lods",set:function(z){let m=0,L=0;const b=[],n=this._levelToLOD=
{};z&&(m=-Infinity,L=Infinity,z.forEach(H=>{b.push(H.scale);m=H.scale>m?H.scale:m;L=H.scale<L?H.scale:L;n[H.level]=H}));this._set("scales",b);this._set("minScale",m);this._set("maxScale",L);this._set("lods",z);this._initializeUpsampleLevels()}}]);return v}(C.JSONSupport);a.__decorate([t.property({type:Number,json:{write:!0}})],C.prototype,"compressionQuality",void 0);a.__decorate([t.property({type:Number,json:{write:!0}})],C.prototype,"dpi",void 0);a.__decorate([t.property({type:String,json:{read:I.read,
write:I.write,origins:{"web-scene":{read:!1,write:!1}}}})],C.prototype,"format",void 0);a.__decorate([t.property({readOnly:!0})],C.prototype,"isWrappable",null);a.__decorate([t.property({type:w,json:{write:!0}})],C.prototype,"origin",void 0);a.__decorate([q.reader("origin")],C.prototype,"readOrigin",null);a.__decorate([t.property({type:[x],value:null,json:{write:!0}})],C.prototype,"lods",null);a.__decorate([t.property({readOnly:!0})],C.prototype,"minScale",void 0);a.__decorate([t.property({readOnly:!0})],
C.prototype,"maxScale",void 0);a.__decorate([t.property({readOnly:!0})],C.prototype,"scales",void 0);a.__decorate([t.property({cast:R=>Array.isArray(R)?R:"number"===typeof R?[R,R]:[256,256]})],C.prototype,"size",void 0);a.__decorate([q.reader("size",["rows","cols"])],C.prototype,"readSize",null);a.__decorate([N.writer("size",{cols:{type:p.Integer},rows:{type:p.Integer}})],C.prototype,"writeSize",null);a.__decorate([t.property({type:h,json:{write:!0}})],C.prototype,"spatialReference",void 0);C=J=a.__decorate([B.subclass("esri.layers.support.TileInfo")],
C);(function(R){R=R.ExtrapolateOptions||(R.ExtrapolateOptions={});R[R.NONE=0]="NONE";R[R.POWER_OF_TWO=1]="POWER_OF_TWO"})(C||(C={}));return C})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f,t){var r;I=r=function(p){function q(B){B=
p.call(this,B)||this;B.cols=null;B.level=0;B.levelValue=null;B.origin=null;B.resolution=0;B.rows=null;B.scale=0;return B}c._inheritsLoose(q,p);q.prototype.clone=function(){return new r({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return q}(I.JSONSupport);a.__decorate([C.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"cols",void 0);a.__decorate([C.property({type:f.Integer,
json:{write:!0}})],I.prototype,"level",void 0);a.__decorate([C.property({type:String,json:{write:!0}})],I.prototype,"levelValue",void 0);a.__decorate([C.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,"origin",void 0);a.__decorate([C.property({type:Number,json:{write:!0}})],I.prototype,"resolution",void 0);a.__decorate([C.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],I.prototype,
"rows",void 0);a.__decorate([C.property({type:Number,json:{write:!0}})],I.prototype,"scale",void 0);return I=r=a.__decorate([t.subclass("esri.layers.support.LOD")],I)})},"esri/layers/support/TileKey":function(){define(["exports"],function(c){c.TileKey=function(a,I,C,k,f){this.id=a;this.level=I;this.row=C;this.col=k;this.extent=f};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./TimeReference ../../portal/timeUnitKebabDictionary".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h){var D;k=D=function(d){function l(G){G=d.call(this,G)||this;G.cumulative=!1;G.endField=null;G.fullTimeExtent=null;G.hasLiveData=!1;G.interval=null;G.startField=null;G.timeReference=null;G.trackIdField=null;G.useTime=!0;return G}c._inheritsLoose(l,d);var x=l.prototype;x.readFullTimeExtent=function(G,J){return J.timeExtent&&Array.isArray(J.timeExtent)&&2===J.timeExtent.length?new I({start:new Date(J.timeExtent[0]),end:new Date(J.timeExtent[1])}):null};x.writeFullTimeExtent=
function(G,J){G&&t.isSome(G.start)&&t.isSome(G.end)?J.timeExtent=[G.start.getTime(),G.end.getTime()]:J.timeExtent=null};x.readInterval=function(G,J){return J.timeInterval&&J.timeIntervalUnits?new C({value:J.timeInterval,unit:h.timeUnitKebabDictionary.fromJSON(J.timeIntervalUnits)}):J.defaultTimeInterval&&J.defaultTimeIntervalUnits?new C({value:J.defaultTimeInterval,unit:h.timeUnitKebabDictionary.fromJSON(J.defaultTimeIntervalUnits)}):null};x.writeInterval=function(G,J){G?(G=G.toJSON(),J.timeInterval=
G.value,J.timeIntervalUnits=G.unit):(J.timeInterval=null,J.timeIntervalUnits=null)};x.clone=function(){const {cumulative:G,endField:J,hasLiveData:R,interval:v,startField:E,timeReference:z,fullTimeExtent:m,trackIdField:L,useTime:b}=this;return new D({cumulative:G,endField:J,hasLiveData:R,interval:v,startField:E,timeReference:f.clone(z),fullTimeExtent:f.clone(m),trackIdField:L,useTime:b})};return l}(k.JSONSupport);a.__decorate([r.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],k.prototype,"cumulative",void 0);a.__decorate([r.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],k.prototype,"endField",void 0);a.__decorate([r.property({type:I,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"fullTimeExtent",void 0);a.__decorate([q.reader("fullTimeExtent",["timeExtent"])],k.prototype,"readFullTimeExtent",null);a.__decorate([N.writer("fullTimeExtent")],k.prototype,"writeFullTimeExtent",
null);a.__decorate([r.property({type:Boolean,json:{write:!0}})],k.prototype,"hasLiveData",void 0);a.__decorate([r.property({type:C,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"interval",void 0);a.__decorate([q.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],k.prototype,"readInterval",null);a.__decorate([N.writer("interval")],k.prototype,"writeInterval",null);a.__decorate([r.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],k.prototype,"startField",void 0);a.__decorate([r.property({type:w,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"timeReference",void 0);a.__decorate([r.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],k.prototype,"trackIdField",void 0);a.__decorate([r.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],k.prototype,"useTime",void 0);return k=D=a.__decorate([B.subclass("esri.layers.support.TimeInfo")],
k)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/maybe ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer".split(" "),function(c,a,I,C,k,f,t,r,p,q,B){var N;I=N=function(D){function d(x){x=D.call(this,x)||this;x.end=null;x.start=null;return x}
c._inheritsLoose(d,D);var l=d.prototype;l.readEnd=function(x,G){return null!=G.end?new Date(G.end):null};l.writeEnd=function(x,G){G.end=x?x.getTime():null};l.readStart=function(x,G){return null!=G.start?new Date(G.start):null};l.writeStart=function(x,G){G.start=x?x.getTime():null};l.clone=function(){return new N({end:this.end,start:this.start})};l.equals=function(x){if(!x)return!1;const G=C.isSome(this.start)?this.start.getTime():this.start,J=C.isSome(this.end)?this.end.getTime():this.end,R=C.isSome(x.start)?
x.start.getTime():x.start;x=C.isSome(x.end)?x.end.getTime():x.end;return G===R&&J===x};l.expandTo=function(x){if(this.isEmpty||this.isAllTime)return this.clone();const G=C.applySome(this.start,R=>k.truncateDate(R,x)),J=C.applySome(this.end,R=>{const v=k.truncateDate(R,x);return R.getTime()===v.getTime()?v:k.offsetDate(v,1,x)});return new N({start:G,end:J})};l.intersection=function(x){if(!x)return this.clone();if(this.isEmpty||x.isEmpty)return N.empty;if(this.isAllTime)return x.clone();if(x.isAllTime)return this.clone();
var G=C.mapOr(this.start,-Infinity,z=>z.getTime());const J=C.mapOr(this.end,Infinity,z=>z.getTime()),R=C.mapOr(x.start,-Infinity,z=>z.getTime());x=C.mapOr(x.end,Infinity,z=>z.getTime());let v,E;R>=G&&R<=J?v=R:G>=R&&G<=x&&(v=G);J>=R&&J<=x?E=J:x>=G&&x<=J&&(E=x);return null==v||null==E||isNaN(v)||isNaN(E)?N.empty:(G=new N,G.start=-Infinity===v?null:new Date(v),G.end=Infinity===E?null:new Date(E),G)};l.offset=function(x,G){if(this.isEmpty||this.isAllTime)return this.clone();const J=new N,{start:R,end:v}=
this;C.isSome(R)&&(J.start=k.offsetDate(R,x,G));C.isSome(v)&&(J.end=k.offsetDate(v,x,G));return J};l.union=function(x){if(!x||x.isEmpty)return this.clone();if(this.isEmpty)return x.clone();if(this.isAllTime||x.isAllTime)return w.clone();const G=C.isSome(this.start)&&C.isSome(x.start)?new Date(Math.min(this.start.getTime(),x.start.getTime())):null;x=C.isSome(this.end)&&C.isSome(x.end)?new Date(Math.max(this.end.getTime(),x.end.getTime())):null;return new N({start:G,end:x})};c._createClass(d,[{key:"isAllTime",
get:function(){return this.equals(N.allTime)}},{key:"isEmpty",get:function(){return this.equals(N.empty)}}],[{key:"allTime",get:function(){return w}},{key:"empty",get:function(){return h}}]);return d}(I.JSONSupport);a.__decorate([f.property({type:Date,json:{write:{allowNull:!0}}})],I.prototype,"end",void 0);a.__decorate([p.reader("end")],I.prototype,"readEnd",null);a.__decorate([B.writer("end")],I.prototype,"writeEnd",null);a.__decorate([f.property({readOnly:!0,json:{read:!1}})],I.prototype,"isAllTime",
null);a.__decorate([f.property({readOnly:!0,json:{read:!1}})],I.prototype,"isEmpty",null);a.__decorate([f.property({type:Date,json:{write:{allowNull:!0}}})],I.prototype,"start",void 0);a.__decorate([p.reader("start")],I.prototype,"readStart",null);a.__decorate([B.writer("start")],I.prototype,"writeStart",null);I=N=a.__decorate([q.subclass("esri.TimeExtent")],I);const w=new I,h=new I({start:void 0,end:void 0});return I})},"esri/core/timeUtils":function(){define(["exports","./has"],function(c,a){function I(f,
t,r){return 0===f?0:f*C[t]/C[r]}const C={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8},k={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",
setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};c.convertTime=I;c.makeUTCTime=function(f,t,r="milliseconds"){t=new Date(I(t,r,"milliseconds"));t.setUTCFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return t};c.offsetDate=function(f,t,r){f=new Date(f.getTime());
if(t&&r){const {getter:q,setter:B,multiplier:N}=k[r];if("months"===r){r=f.getFullYear();var p=f.getMonth()+t;r=new Date(r,p+1,1);r.setDate(0);r=r.getDate();f.getDate()>r&&f.setDate(r)}f[B](f[q]()+t*N)}return f};c.offsetDateUTC=function(f,t,r="milliseconds"){f=f.getTime();t=I(t,r,"milliseconds");return new Date(f+t)};c.resetUTCDate=function(f,t){f=new Date(f.getTime());f.setUTCFullYear(t.getFullYear(),t.getMonth(),t.getDate());return f};c.timeSinceUTCMidnight=function(f,t="milliseconds"){const r=I(f.getUTCHours(),
"hours","milliseconds"),p=I(f.getUTCMinutes(),"minutes","milliseconds"),q=I(f.getUTCSeconds(),"seconds","milliseconds");f=f.getUTCMilliseconds();return I(r+p+q+f,"milliseconds",t)};c.truncateDate=function(f,t){switch(t){case "milliseconds":return new Date(f.getTime());case "seconds":return new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds());case "minutes":return new Date(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes());case "hours":return new Date(f.getFullYear(),
f.getMonth(),f.getDate(),f.getHours());case "days":return new Date(f.getFullYear(),f.getMonth(),f.getDate());case "weeks":return new Date(f.getFullYear(),f.getMonth(),f.getDate()-f.getDay());case "months":return new Date(f.getFullYear(),f.getMonth(),1);case "years":return new Date(f.getFullYear(),0,1);case "decades":return new Date(f.getFullYear()-f.getFullYear()%10,0,1);case "centuries":return new Date(f.getFullYear()-f.getFullYear()%100,0,1);default:return new Date}};c.truncateLocalTime=function(f){const t=
new Date(0);t.setHours(0);t.setMinutes(0);t.setSeconds(0);t.setMilliseconds(0);t.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate());return t};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/arrayUtils ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/subclass ./portal/timeUnitKebabDictionary".split(" "),
function(c,a,I,C,k,f,t,r,p){var q;I=q=function(B){function N(h){h=B.call(this,h)||this;h.value=0;h.unit="milliseconds";return h}c._inheritsLoose(N,B);var w=N.prototype;w.toMilliseconds=function(){return C.convertTime(this.value,this.unit,"milliseconds")};w.clone=function(){return new q({value:this.value,unit:this.unit})};return N}(I.JSONSupport);a.__decorate([k.property({type:Number,json:{write:!0},nonNullable:!0})],I.prototype,"value",void 0);a.__decorate([k.property({type:p.timeUnitKebabDictionary.apiValues,
json:{type:p.timeUnitKebabDictionary.jsonValues,read:p.timeUnitKebabDictionary.read,write:p.timeUnitKebabDictionary.write},nonNullable:!0})],I.prototype,"unit",void 0);return I=q=a.__decorate([r.subclass("esri.TimeInterval")],I)})},"esri/portal/timeUnitKebabDictionary":function(){define(["exports","../core/jsonMap"],function(c,a){a=a.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",
esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});c.timeUnitKebabDictionary=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r){var p;I=p=function(q){function B(w){w=q.call(this,w)||this;w.respectsDaylightSaving=!1;w.timezone=null;return w}c._inheritsLoose(B,q);var N=B.prototype;N.readRespectsDaylightSaving=function(w,h){return void 0!==h.respectsDaylightSaving?h.respectsDaylightSaving:void 0!==h.respectDaylightSaving?h.respectDaylightSaving:!1};N.clone=function(){const {respectsDaylightSaving:w,timezone:h}=this;return new p({respectsDaylightSaving:w,timezone:h})};return B}(I.JSONSupport);a.__decorate([C.property({type:Boolean,
json:{write:!0}})],I.prototype,"respectsDaylightSaving",void 0);a.__decorate([t.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],I.prototype,"readRespectsDaylightSaving",null);a.__decorate([C.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],I.prototype,"timezone",void 0);return I=p=a.__decorate([r.subclass("esri.layers.support.TimeReference")],I)})},"esri/rest/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G,J,R){var v;const E=new k.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});k=new k.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});f=v=function(z){function m(b){b=z.call(this,b)||this;b.aggregateIds=null;b.cacheHint=void 0;b.compactGeometryEnabled=!1;b.datumTransformation=null;b.defaultSpatialReferenceEnabled=!1;b.distance=void 0;b.dynamicDataSource=void 0;b.formatOf3DObjects=null;b.fullText=null;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=
null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnCentroid=!1;b.returnDistinctValues=!1;b.returnExceededLimitFeatures=!0;b.returnGeometry=!1;b.returnQueryGeometry=!1;b.returnM=void 0;
b.returnZ=void 0;b.sourceSpatialReference=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.timeReferenceUnknownClient=!1;b.units=null;b.where=null;return b}c._inheritsLoose(m,z);m.from=function(b){return h.ensureClass(v,b)};var L=m.prototype;L.castDatumTransformation=function(b){return"number"===typeof b||"object"===typeof b?b:null};L.writeHistoricMoment=function(b,n){n.historicMoment=b&&b.getTime()};L.writeParameterValues=function(b,n){if(b){const H=
{};for(const A in b){const y=b[A];Array.isArray(y)?H[A]=y.map(P=>P instanceof Date?P.getTime():P):H[A]=y instanceof Date?y.getTime():y}n.parameterValues=H}};L.writeStart=function(b,n){n.resultOffset=this.start;n.resultRecordCount=this.num||10;n.where="1\x3d1"};L.writeWhere=function(b,n){n.where=b||"1\x3d1"};L.clone=function(){return new v(t.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:r.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))};return m}(f.JSONSupport);f.MAX_MAX_RECORD_COUNT_FACTOR=
5;a.__decorate([p.property({json:{write:!0}})],f.prototype,"aggregateIds",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],f.prototype,"cacheHint",void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"compactGeometryEnabled",void 0);a.__decorate([p.property({json:{write:!0}})],f.prototype,"datumTransformation",void 0);a.__decorate([q.cast("datumTransformation")],f.prototype,"castDatumTransformation",null);a.__decorate([p.property({type:Boolean,
json:{default:!1,write:!0}})],f.prototype,"defaultSpatialReferenceEnabled",void 0);a.__decorate([p.property({type:Number,json:{write:{overridePolicy(z){return{enabled:0<z}}}}})],f.prototype,"distance",void 0);a.__decorate([p.property({type:d.DataLayerSource,json:{write:!0}})],f.prototype,"dynamicDataSource",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],f.prototype,"formatOf3DObjects",void 0);a.__decorate([p.property({type:[l],json:{write:{enabled:!0,overridePolicy(){return{enabled:r.isSome(this.fullText)&&
0<this.fullText.length}}}}})],f.prototype,"fullText",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],f.prototype,"gdbVersion",void 0);a.__decorate([p.property({types:I.geometryTypes,json:{read:D.fromJSON,write:!0}})],f.prototype,"geometry",void 0);a.__decorate([p.property({type:Number,json:{write:!0}})],f.prototype,"geometryPrecision",void 0);a.__decorate([p.property({type:[String],json:{write:!0}})],f.prototype,"groupByFieldsForStatistics",void 0);a.__decorate([p.property({type:String,
json:{write:!0}})],f.prototype,"having",void 0);a.__decorate([p.property({type:Date})],f.prototype,"historicMoment",void 0);a.__decorate([w.writer("historicMoment")],f.prototype,"writeHistoricMoment",null);a.__decorate([p.property({type:Number,json:{write:!0}})],f.prototype,"maxAllowableOffset",void 0);a.__decorate([p.property({type:Number,cast(z){return 1>z?1:z>v.MAX_MAX_RECORD_COUNT_FACTOR?v.MAX_MAX_RECORD_COUNT_FACTOR:z},json:{write:{overridePolicy(z){return{enabled:1<z}}}}})],f.prototype,"maxRecordCountFactor",
void 0);a.__decorate([p.property({type:["xyFootprint"],json:{write:!0}})],f.prototype,"multipatchOption",void 0);a.__decorate([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],f.prototype,"num",void 0);a.__decorate([p.property({json:{write:!0}})],f.prototype,"objectIds",void 0);a.__decorate([p.property({type:[String],json:{write:!0}})],f.prototype,"orderByFields",void 0);a.__decorate([p.property({type:[String],json:{write:!0}})],f.prototype,"outFields",void 0);a.__decorate([p.property({type:J,
json:{name:"outSR",write:!0}})],f.prototype,"outSpatialReference",void 0);a.__decorate([p.property({type:[G],json:{write:{enabled:!0,overridePolicy(){return{enabled:r.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],f.prototype,"outStatistics",void 0);a.__decorate([p.property({json:{write:!0}})],f.prototype,"parameterValues",void 0);a.__decorate([w.writer("parameterValues")],f.prototype,"writeParameterValues",null);a.__decorate([p.property({type:R,json:{write:!0}})],f.prototype,"pixelSize",
void 0);a.__decorate([p.property({type:x,json:{write:!0}})],f.prototype,"quantizationParameters",void 0);a.__decorate([p.property({type:[Object],json:{write:!0}})],f.prototype,"rangeValues",void 0);a.__decorate([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],f.prototype,"relationParameter",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],f.prototype,"resultType",
void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnCentroid",void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnDistinctValues",void 0);a.__decorate([p.property({type:Boolean,json:{default:!0,write:!0}})],f.prototype,"returnExceededLimitFeatures",void 0);a.__decorate([p.property({type:Boolean,json:{write:!0}})],f.prototype,"returnGeometry",void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],
f.prototype,"returnQueryGeometry",void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"returnM",void 0);a.__decorate([p.property({type:Boolean,json:{write:{overridePolicy(z){return{enabled:z}}}}})],f.prototype,"returnZ",void 0);a.__decorate([p.property({type:J,json:{write:!0}})],f.prototype,"sourceSpatialReference",void 0);a.__decorate([B.enumeration(E,{ignoreUnknown:!1,name:"spatialRel"})],f.prototype,"spatialRelationship",void 0);a.__decorate([p.property({type:Number,
json:{read:{source:"resultOffset"}}})],f.prototype,"start",void 0);a.__decorate([w.writer("start"),w.writer("num")],f.prototype,"writeStart",null);a.__decorate([p.property({type:String,json:{write:!0}})],f.prototype,"sqlFormat",void 0);a.__decorate([p.property({type:String,json:{write:!0}})],f.prototype,"text",void 0);a.__decorate([p.property({type:C,json:{write:!0}})],f.prototype,"timeExtent",void 0);a.__decorate([p.property({type:Boolean,json:{default:!1,write:!0}})],f.prototype,"timeReferenceUnknownClient",
void 0);a.__decorate([B.enumeration(k,{ignoreUnknown:!1}),p.property({json:{write:{overridePolicy(z){return{enabled:!!z&&null!=this.distance&&0<this.distance}}}}})],f.prototype,"units",void 0);a.__decorate([p.property({type:String,json:{write:{overridePolicy(z){return{enabled:null!=z||null!=this.start&&0<this.start}}}}})],f.prototype,"where",void 0);a.__decorate([w.writer("where")],f.prototype,"writeWhere",null);return f=v=a.__decorate([N.subclass("esri.rest.support.Query")],f)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x){function G(){E||(E=w.createTypeReader({types:J()}));return E}function J(){z||(z={key:"type",base:null,typeMap:{"data-layer":c.DataLayerSource,"map-layer":D.MapLayerSource}});return z}var R,v;C=C.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});c.JoinTableDataSource=R=function(m){function L(n){n=m.call(this,n)||this;n.type="join-table";return n}a._inheritsLoose(L,m);var b=L.prototype;b.readLeftTableSource=function(n,H,
A){return G()(n,H,A)};b.castLeftTableSource=function(n){return N.ensureOneOfType(J(),n)};b.readRightTableSource=function(n,H,A){return G()(n,H,A)};b.castRightTableSource=function(n){return N.ensureOneOfType(J(),n)};b.clone=function(){const {leftTableKey:n,rightTableKey:H,leftTableSource:A,rightTableSource:y,joinType:P}=this,K={leftTableKey:n,rightTableKey:H,leftTableSource:A?.clone()??void 0,rightTableSource:y?.clone()??void 0,joinType:P};return new R(K)};return L}(k.JSONSupport);I.__decorate([p.enumeration({joinTable:"join-table"})],
c.JoinTableDataSource.prototype,"type",void 0);I.__decorate([f.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableKey",void 0);I.__decorate([f.property({type:String,json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableKey",void 0);I.__decorate([f.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"leftTableSource",void 0);I.__decorate([q.reader("leftTableSource")],c.JoinTableDataSource.prototype,"readLeftTableSource",null);I.__decorate([r.cast("leftTableSource")],
c.JoinTableDataSource.prototype,"castLeftTableSource",null);I.__decorate([f.property({json:{write:!0}})],c.JoinTableDataSource.prototype,"rightTableSource",void 0);I.__decorate([q.reader("rightTableSource")],c.JoinTableDataSource.prototype,"readRightTableSource",null);I.__decorate([r.cast("rightTableSource")],c.JoinTableDataSource.prototype,"castRightTableSource",null);I.__decorate([p.enumeration(C)],c.JoinTableDataSource.prototype,"joinType",void 0);c.JoinTableDataSource=R=I.__decorate([B.subclass("esri.layers.support.source.JoinTableDataSource")],
c.JoinTableDataSource);let E=null,z=null;r={key:"type",base:null,typeMap:{"join-table":c.JoinTableDataSource,"query-table":d.QueryTableDataSource,raster:l.RasterDataSource,table:x.TableDataSource}};c.DataLayerSource=v=function(m){function L(b){b=m.call(this,b)||this;b.type="data-layer";return b}a._inheritsLoose(L,m);L.prototype.clone=function(){const {fields:b,dataSource:n}=this;return new v({fields:b,dataSource:n})};return L}(k.JSONSupport);I.__decorate([p.enumeration({dataLayer:"data-layer"})],
c.DataLayerSource.prototype,"type",void 0);I.__decorate([f.property({type:[h],json:{write:!0}})],c.DataLayerSource.prototype,"fields",void 0);I.__decorate([f.property({types:r,json:{write:!0}})],c.DataLayerSource.prototype,"dataSource",void 0);c.DataLayerSource=v=I.__decorate([B.subclass("esri.layers.support.source.DataLayerSource")],c.DataLayerSource);c.DataLayerSource.from=N.ensureType(c.DataLayerSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),function(c,a,I,C,k,f,t,r,p,q,B,N){var w;const h=new I.JSONMap({binary:"binary",
coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});I=w=function(D){function d(x){x=D.call(this,x)||this;x.alias=null;x.defaultValue=void 0;x.description=null;x.domain=null;x.editable=
!0;x.length=-1;x.name=null;x.nullable=!0;x.type=null;x.valueType=null;x.visible=!0;return x}c._inheritsLoose(d,D);var l=d.prototype;l.readDescription=function(x,{description:G}){x=null;try{x=G?JSON.parse(G):null}catch(J){}return x?.value??null};l.readValueType=function(x,{description:G}){x=null;try{x=G?JSON.parse(G):null}catch(J){}return x?h.fromJSON(x.fieldValueType):null};l.clone=function(){return new w({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&
this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})};return d}(C.JSONSupport);a.__decorate([k.property({type:String,json:{write:!0}})],I.prototype,"alias",void 0);a.__decorate([k.property({type:[String,Number],json:{write:{allowNull:!0}}})],I.prototype,"defaultValue",void 0);a.__decorate([k.property()],I.prototype,"description",void 0);a.__decorate([p.reader("description")],I.prototype,
"readDescription",null);a.__decorate([k.property({types:B.types,json:{read:{reader:B.fromJSON},write:!0}})],I.prototype,"domain",void 0);a.__decorate([k.property({type:Boolean,json:{write:!0}})],I.prototype,"editable",void 0);a.__decorate([k.property({type:t.Integer,json:{write:!0}})],I.prototype,"length",void 0);a.__decorate([k.property({type:String,json:{write:!0}})],I.prototype,"name",void 0);a.__decorate([k.property({type:Boolean,json:{write:!0}})],I.prototype,"nullable",void 0);a.__decorate([r.enumeration(N.kebabDict)],
I.prototype,"type",void 0);a.__decorate([k.property()],I.prototype,"valueType",void 0);a.__decorate([p.reader("valueType",["description"])],I.prototype,"readValueType",null);a.__decorate([k.property({type:Boolean,json:{read:!1}})],I.prototype,"visible",void 0);return I=w=a.__decorate([q.subclass("esri.layers.support.Field")],I)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(c,a,I,C,k,f){a=
{key:"type",base:C,typeMap:{range:f,"coded-value":I,inherited:k}};c.CodedValueDomain=I;c.DomainBase=C;c.InheritedDomain=k;c.RangeDomain=f;c.fromJSON=function(t){if(!t||!t.type)return null;switch(t.type){case "range":return f.fromJSON(t);case "codedValue":return I.fromJSON(t);case "inherited":return k.fromJSON(t)}return null};c.types=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(c,a,I,C,k,f,t,r,p){var q;k=q=function(B){function N(h){h=B.call(this,h)||this;h.codedValues=null;h.type="coded-value";return h}c._inheritsLoose(N,B);var w=N.prototype;w.getName=function(h){let D=null;if(this.codedValues){const d=String(h);this.codedValues.some(l=>{String(l.code)===d&&(D=l.name);return!!D})}return D};w.clone=function(){return new q({codedValues:I.clone(this.codedValues),name:this.name})};return N}(p);a.__decorate([C.property({type:[r.CodedValue],json:{write:!0}})],k.prototype,
"codedValues",void 0);a.__decorate([f.enumeration({codedValue:"coded-value"})],k.prototype,"type",void 0);return k=q=a.__decorate([t.subclass("esri.layers.support.CodedValueDomain")],k)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(c,
a,I,C,k,f,t,r){var p;c.CodedValue=p=function(q){function B(N){N=q.call(this,N)||this;N.name=null;N.code=null;return N}a._inheritsLoose(B,q);B.prototype.clone=function(){return new p({name:this.name,code:this.code})};return B}(C.JSONSupport);I.__decorate([k.property({type:String,json:{write:!0}})],c.CodedValue.prototype,"name",void 0);I.__decorate([k.property({type:[String,Number],json:{write:!0}})],c.CodedValue.prototype,"code",void 0);c.CodedValue=p=I.__decorate([r.subclass("esri.layers.support.CodedValue")],
c.CodedValue);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f,t,r,p){I=
new I.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});C=function(q){function B(N){N=q.call(this,N)||this;N.name=null;N.type=null;return N}c._inheritsLoose(B,q);return B}(C.JSONSupport);a.__decorate([k.property({type:String,json:{write:!0}})],C.prototype,"name",void 0);a.__decorate([r.enumeration(I)],C.prototype,"type",void 0);return C=a.__decorate([p.subclass("esri.layers.support.Domain")],C)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Logger ../../core/accessorSupport/ensureType ../../core/arrayUtils ../../core/Error ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,a,I,C,k,f,t,r,p,q){var B;I=B=function(N){function w(h){h=N.call(this,h)||this;h.type="inherited";return h}c._inheritsLoose(w,N);w.prototype.clone=function(){return new B};return w}(q);a.__decorate([r.enumeration({inherited:"inherited"})],I.prototype,"type",void 0);return I=B=a.__decorate([p.subclass("esri.layers.support.InheritedDomain")],I)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(c,a,I,C,k,f,t,r){var p;C=p=function(q){function B(N){N=q.call(this,N)||this;N.maxValue=null;N.minValue=null;N.type="range";return N}c._inheritsLoose(B,q);B.prototype.clone=function(){return new p({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return B}(r);a.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,B){return B.range&&B.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",
writer(q,B,N){B[N]=[this.minValue||0,q]}}}})],C.prototype,"maxValue",void 0);a.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(q,B){return B.range&&B.range[0]}},write:{target:"range",writer(q,B,N){B[N]=[q,this.maxValue||0]}}}})],C.prototype,"minValue",void 0);a.__decorate([f.enumeration({range:"range"})],C.prototype,"type",void 0);return C=p=a.__decorate([t.subclass("esri.layers.support.RangeDomain")],C)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(c,a){a=new a.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});c.kebabDict=a;Object.defineProperties(c,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f,t,r,p){var q;c.MapLayerSource=q=function(B){function N(w){w=
B.call(this,w)||this;w.type="map-layer";return w}a._inheritsLoose(N,B);N.prototype.clone=function(){const {mapLayerId:w,gdbVersion:h}=this;return new q({mapLayerId:w,gdbVersion:h})};return N}(C.JSONSupport);I.__decorate([r.enumeration({mapLayer:"map-layer"})],c.MapLayerSource.prototype,"type",void 0);I.__decorate([k.property({type:t.Integer,json:{write:!0}})],c.MapLayerSource.prototype,"mapLayerId",void 0);I.__decorate([k.property({type:String,json:{write:!0}})],c.MapLayerSource.prototype,"gdbVersion",
void 0);c.MapLayerSource=q=I.__decorate([p.subclass("esri.layers.support.source.MapLayerSource")],c.MapLayerSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N){var w;c.QueryTableDataSource=w=function(h){function D(d){d=h.call(this,d)||this;d.type="query-table";return d}a._inheritsLoose(D,h);D.prototype.clone=function(){const {workspaceId:d,query:l,oidFields:x,spatialReference:G,geometryType:J}=this,R={workspaceId:d,query:l,oidFields:x,spatialReference:G?.clone()??void 0,geometryType:J};return new w(R)};return D}(k.JSONSupport);I.__decorate([p.enumeration({queryTable:"query-table"})],c.QueryTableDataSource.prototype,"type",
void 0);I.__decorate([f.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"workspaceId",void 0);I.__decorate([f.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"query",void 0);I.__decorate([f.property({type:String,json:{write:!0}})],c.QueryTableDataSource.prototype,"oidFields",void 0);I.__decorate([f.property({type:B,json:{write:!0}})],c.QueryTableDataSource.prototype,"spatialReference",void 0);I.__decorate([p.enumeration(N.featureGeometryTypeKebabDictionary)],
c.QueryTableDataSource.prototype,"geometryType",void 0);c.QueryTableDataSource=w=I.__decorate([q.subclass("esri.layers.support.source.QueryTableDataSource")],c.QueryTableDataSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r,p){var q;c.RasterDataSource=q=function(B){function N(w){w=B.call(this,w)||this;w.type="raster";return w}a._inheritsLoose(N,B);N.prototype.clone=function(){const {workspaceId:w,dataSourceName:h}=this;return new q({workspaceId:w,dataSourceName:h})};return N}(C.JSONSupport);I.__decorate([r.enumeration({raster:"raster"})],c.RasterDataSource.prototype,"type",void 0);I.__decorate([k.property({type:String,json:{write:!0}})],c.RasterDataSource.prototype,"dataSourceName",void 0);I.__decorate([k.property({type:String,
json:{write:!0}})],c.RasterDataSource.prototype,"workspaceId",void 0);c.RasterDataSource=q=I.__decorate([p.subclass("esri.layers.support.source.RasterDataSource")],c.RasterDataSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r,p){var q;c.TableDataSource=q=function(B){function N(w){w=B.call(this,w)||this;w.type="table";return w}a._inheritsLoose(N,B);N.prototype.clone=function(){const {workspaceId:w,gdbVersion:h,dataSourceName:D}=this;return new q({workspaceId:w,gdbVersion:h,dataSourceName:D})};return N}(C.JSONSupport);I.__decorate([r.enumeration({table:"table"})],c.TableDataSource.prototype,"type",void 0);I.__decorate([k.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"workspaceId",
void 0);I.__decorate([k.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"gdbVersion",void 0);I.__decorate([k.property({type:String,json:{write:!0}})],c.TableDataSource.prototype,"dataSourceName",void 0);c.TableDataSource=q=I.__decorate([p.subclass("esri.layers.support.source.TableDataSource")],c.TableDataSource);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,a,I,C,k,f,t,r,p){I=function(q){function B(N){N=q.call(this,N)||this;N.onFields=null;N.operator=null;N.searchTerm=null;N.searchType=null;return N}c._inheritsLoose(B,q);return B}(I.ClonableMixin(C.JSONSupport));a.__decorate([f.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:k.isSome(this.onFields)&&0<this.onFields.length}}}}})],I.prototype,"onFields",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],I.prototype,"operator",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],I.prototype,"searchTerm",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],I.prototype,"searchType",void 0);return I=a.__decorate([p.subclass("esri.rest.support.FullTextSearch")],I)})},"esri/core/Clonable":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f,t,r,p,q,B){k=
N=>{N=function(w){function h(){return w.apply(this,arguments)||this}a._inheritsLoose(h,w);h.prototype.clone=function(){var D=r.unwrapOrThrow(q.getProperties(this),"unable to clone instance of non-accessor class"),d=D.metadatas;const l=D.store,x={};D=new Map;for(var G in d){var J=d[G];const R=l?.originOf(G),v=J.clonable;if(J.readOnly||!1===v||R!==p.OriginId.USER&&R!==p.OriginId.DEFAULTS&&R!==p.OriginId.WEB_MAP&&R!==p.OriginId.WEB_SCENE)continue;J=this[G];let E=null;E="function"===typeof v?v(J):"reference"===
v?J:f.tryClone(J);if(null==J||null!=E)R===p.OriginId.DEFAULTS?D.set(G,E):x[G]=E}d=new (Object.getPrototypeOf(this).constructor)(x);if(D.size&&(G=q.getProperties(d)?.store))for(const [R,v]of D)G.set(R,v,p.OriginId.DEFAULTS);return d};return h}(N);return N=I.__decorate([B.subclass("esri.core.Clonable")],N)};c.Clonable=function(N){function w(){return N.apply(this,arguments)||this}a._inheritsLoose(w,N);return w}(k(C));c.Clonable=I.__decorate([B.subclass("esri.core.Clonable")],c.Clonable);c.ClonableMixin=
k;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),function(c,a,I,C,k,f,t,r,p,q){var B;I=new C.JSONMap({upperLeft:"upper-left",
lowerLeft:"lower-left"});k=B=function(N){function w(h){h=N.call(this,h)||this;h.extent=null;h.mode="view";h.originPosition="upper-left";h.tolerance=1;return h}c._inheritsLoose(w,N);w.prototype.clone=function(){return new B(f.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return w}(k.JSONSupport);a.__decorate([t.property({type:q,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],k.prototype,"extent",void 0);a.__decorate([t.property({type:["view",
"edit"],json:{write:!0}})],k.prototype,"mode",void 0);a.__decorate([t.property({type:String,json:{read:I.read,write:I.write}})],k.prototype,"originPosition",void 0);a.__decorate([t.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],k.prototype,"tolerance",void 0);return k=B=a.__decorate([p.subclass("esri.rest.support.QuantizationParameters")],k)})},"esri/rest/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),
function(c,a,I,C,k,f,t,r,p){var q;I=new I.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});C=q=function(B){function N(h){h=B.call(this,h)||this;h.maxPointCount=void 0;h.maxRecordCount=void 0;h.maxVertexCount=void 0;h.onStatisticField=
null;h.outStatisticFieldName=null;h.statisticType=null;h.statisticParameters=null;return h}c._inheritsLoose(N,B);var w=N.prototype;w.writeStatisticParameters=function(h,D){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)D.statisticParameters=k.clone(h)};w.clone=function(){return new q({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,
statisticType:this.statisticType,statisticParameters:k.clone(this.statisticParameters)})};return N}(C.JSONSupport);a.__decorate([f.property({type:Number,json:{write:!0}})],C.prototype,"maxPointCount",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],C.prototype,"maxRecordCount",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],C.prototype,"maxVertexCount",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],C.prototype,"onStatisticField",void 0);a.__decorate([f.property({type:String,
json:{write:!0}})],C.prototype,"outStatisticFieldName",void 0);a.__decorate([f.property({type:String,json:{read:{source:"statisticType",reader:I.read},write:{target:"statisticType",writer:I.write}}})],C.prototype,"statisticType",void 0);a.__decorate([f.property({type:Object})],C.prototype,"statisticParameters",void 0);a.__decorate([p.writer("statisticParameters")],C.prototype,"writeStatisticParameters",null);return C=q=a.__decorate([r.subclass("esri.rest.support.StatisticDefinition")],C)})},"esri/symbols/support/ElevationInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./FeatureExpressionInfo ./unitConversionUtils".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w){var h;t=I.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});I=new I.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});C=h=function(D){function d(x){x=D.call(this,x)||this;x.offset=null;return x}c._inheritsLoose(d,D);var l=d.prototype;l.readFeatureExpressionInfo=function(x,G){if(null!=x)return x;if(G.featureExpression&&
0===G.featureExpression.value)return{expression:"0"}};l.writeFeatureExpressionInfo=function(x,G,J,R){G[J]=x.write({},R);"0"===x.expression&&(G.featureExpression={value:0})};l.write=function(x,G){return this.offset||this.mode||this.featureExpressionInfo||this.unit?D.prototype.write.call(this,x,G):null};l.clone=function(){return new h({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};l.equals=function(x){return this.mode===
x.mode&&this.offset===x.offset&&this.unit===x.unit&&k.equalsMaybe(this.featureExpressionInfo,x.featureExpressionInfo)};c._createClass(d,[{key:"mode",get:function(){const {offset:x,featureExpressionInfo:G}=this;return this._isOverridden("mode")?this._get("mode"):k.isSome(x)||G?"relative-to-ground":"on-the-ground"},set:function(x){this._override("mode",x)}},{key:"unit",set:function(x){this._set("unit",x)}}]);return d}(C.JSONSupport);a.__decorate([f.property({type:N,json:{write:!0}})],C.prototype,"featureExpressionInfo",
void 0);a.__decorate([p.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],C.prototype,"readFeatureExpressionInfo",null);a.__decorate([B.writer("featureExpressionInfo",{featureExpressionInfo:{type:N},"featureExpression.value":{type:[0]}})],C.prototype,"writeFeatureExpressionInfo",null);a.__decorate([f.property({type:t.apiValues,nonNullable:!0,json:{type:t.jsonValues,read:t.read,write:{writer:t.write,isRequired:!0}}})],C.prototype,"mode",null);a.__decorate([f.property({type:Number,
json:{write:!0}})],C.prototype,"offset",void 0);a.__decorate([f.property({type:w.supportedUnits,json:{type:String,read:I.read,write:I.write}})],C.prototype,"unit",null);return C=h=a.__decorate([q.subclass("esri.layers.support.ElevationInfo")],C)})},"esri/symbols/support/FeatureExpressionInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldUtils".split(" "),
function(c,a,I,C,k,f,t,r){var p;I=p=function(q){function B(w){return q.call(this,w)||this}c._inheritsLoose(B,q);var N=B.prototype;N.collectRequiredFields=function(){var w=c._asyncToGenerator(function*(h,D){return r.collectArcadeFieldNames(h,D,this.expression)});return function(h,D){return w.apply(this,arguments)}}();N.clone=function(){return new p({expression:this.expression,title:this.title})};N.equals=function(w){return this.expression===w.expression&&this.title===w.title};return B}(I.JSONSupport);
a.__decorate([C.property({type:String,json:{write:!0}})],I.prototype,"expression",void 0);a.__decorate([C.property({type:String,json:{write:!0}})],I.prototype,"title",void 0);return I=p=a.__decorate([t.subclass("esri.layers.support.FeatureExpressionInfo")],I)})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../renderers/support/lengthUtils"],function(c,a){const I=function(){const C=Object.keys(a.meterIn);C.sort();return C}();c.getMetersPerUnit=function(C){return 1/(a.meterIn[C]||
1)};c.supportedUnits=I;c.supportsUnit=function(C){return null!=a.meterIn[C]};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(c,a,I){a={inches:a.convertUnit(1,"meters","inches"),feet:a.convertUnit(1,"meters","feet"),"us-feet":a.convertUnit(1,"meters","us-feet"),yards:a.convertUnit(1,"meters","yards"),miles:a.convertUnit(1,
"meters","miles"),"nautical-miles":a.convertUnit(1,"meters","nautical-miles"),millimeters:a.convertUnit(1,"meters","millimeters"),centimeters:a.convertUnit(1,"meters","centimeters"),decimeters:a.convertUnit(1,"meters","decimeters"),meters:a.convertUnit(1,"meters","meters"),kilometers:a.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/a.lengthToDegrees(1,"meters",I.earth.radius)};c.meterIn=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/LRUCache ../../../../core/MapUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/unitUtils ../../../../symbols/support/unitConversionUtils".split(" "),
function(c,a,I,C,k,f,t,r,p){function q(D,{x:d,y:l,z:x}){return`${D}-${d}-${l}-${x??0}}`}function B(){return[]}let N=function(){function D(){}var d=D.prototype;d.alignCandidates=function(){var l=a._asyncToGenerator(function*(x,G){return x});return function(x,G){return l.apply(this,arguments)}}();d.notifyElevationSourceChange=function(){};return D}(),w=function(){function D(l,x,G){this._elevationInfo=l;this._alignPointsInFeatures=x;this.spatialReference=G;this._alignmentsCache=new C(1024);this._cacheVersion=
0;this._metersPerVerticalUnit=r.getMetersPerVerticalUnitForSR(G)}var d=D.prototype;d.alignCandidates=function(){var l=a._asyncToGenerator(function*(x,G){const J=this._elevationInfo;return f.isSome(J)&&"absolute-height"===J.mode&&!J.featureExpressionInfo?(this._alignAbsoluteElevationCandidates(x,J),x):this._alignComputedElevationCandidates(x,G)});return function(x,G){return l.apply(this,arguments)}}();d.notifyElevationSourceChange=function(){this._alignmentsCache.clear();this._cacheVersion++};d._alignAbsoluteElevationCandidates=
function(l,x){const {offset:G,unit:J}=x;if(!f.isNone(G)){x=p.getMetersPerUnit(J??"meters")/this._metersPerVerticalUnit;x*=G;for(const R of l)switch(R.type){case "edge":R.start.z+=x;R.end.z+=x;continue;case "vertex":R.target.z+=x}}};d._alignComputedElevationCandidates=function(){var l=a._asyncToGenerator(function*(x,G){var J=new Map;for(const L of x)k.getOrCreateMapValue(J,L.objectId,B).push(L);const [R,v,E]=this._prepareQuery(J);J=yield this._alignPointsInFeatures(R,G);t.throwIfAborted(G);if(E!==
this._cacheVersion)return this._alignComputedElevationCandidates(x,G);this._applyCacheAndResponse(R,J,v);const {drapedObjectIds:z,failedObjectIds:m}=J;G=[];for(const L of x)({objectId:x}=L),z.has(x)&&"edge"===L.type&&(L.draped=!0),m.has(x)||G.push(L);return G});return function(x,G){return l.apply(this,arguments)}}();d._prepareQuery=function(l){const x=[],G=[];for(const [J,R]of l){l=[];for(const v of R)this._addToQueriesOrCachedResult(J,v.target,l,G),"edge"===v.type&&(this._addToQueriesOrCachedResult(J,
v.start,l,G),this._addToQueriesOrCachedResult(J,v.end,l,G));0!==l.length&&x.push({objectId:J,points:l})}return[x,G,this._cacheVersion]};d._addToQueriesOrCachedResult=function(l,x,G,J){l=q(l,x);l=this._alignmentsCache.get(l);f.isSome(l)?J.push(new h(x,l)):G.push(x)};d._applyCacheAndResponse=function(l,{elevations:x,drapedObjectIds:G,failedObjectIds:J},R){for(var v of R)v.apply();R=0;v=this._alignmentsCache;for(const {objectId:E,points:z}of l)if(J.has(E))R+=z.length;else{l=!G.has(E);for(const m of z){const L=
q(E,m),b=x[R++];m.z=b;l&&v.put(L,b,1)}}};return D}(),h=function(){function D(d,l){this.point=d;this.z=l}D.prototype.apply=function(){this.point.z=this.z};return D}();c.getSnappingCandidateElevationAligner=function(D=!1,d){if(D){const {elevationInfo:l,alignPointsInFeatures:x,spatialReference:G}=d;return new w(l,x,G)}return new N};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers",
"./MemCache"],function(c,a){return function(){function I(k,f){this._storage=new a.MemCacheStorage;this._storage.maxSize=k;f&&this._storage.registerRemoveFunc("",f)}var C=I.prototype;C.put=function(k,f,t){this._storage.put(k,f,t,1)};C.pop=function(k){return this._storage.pop(k)};C.get=function(k){return this._storage.get(k)};C.clear=function(){this._storage.clearAll()};C.destroy=function(){this._storage.destroy()};c._createClass(I,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(k){this._storage.maxSize=
k}}]);return I}()})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationFilter":function(){define(["exports","../../../../core/has"],function(c,a){function I(p){return 1>=p.distance}function C(p,q,{x:B,y:N,z:w}){const {start:h,end:D,target:d}=p;if(!p.draped){const G=D.x-h.x;var l=D.y-h.y,x=D.z-h.z;const J=Math.min(1,Math.max(0,((q.x-h.x)*G+(q.y-h.y)*l+x*(q.z-h.z))/(G*G+l*l+x*x)));l=h.y+l*J;x=h.z+x*J;d.x=h.x+G*J;d.y=l;d.z=x}B=(q.x-d.x)/B;N=(q.y-d.y)/N;q=(q.z-d.z)/w;p.distance=
Math.sqrt(B*B+N*N+q*q)}function k(p,q,{x:B,y:N,z:w}){const {target:h}=p;B=(q.x-h.x)/B;N=(q.y-h.y)/N;q=(q.z-h.z)/w;p.distance=Math.sqrt(B*B+N*N+q*q)}function f(p,q){return p.distance-q.distance}let t=function(){function p(){}var q=p.prototype;q.filter=function(B,N){return N};q.notifyElevationSourceChange=function(){};return p}(),r=function(){function p(){}var q=p.prototype;q.filter=function(B,N){const {point:w,distance:h}=B;({z:B}=w);if(null==B||0===N.length)return N;B="number"===typeof h?{x:h,y:h,
z:h}:h;N=this._updateCandidatesTo3D(N,w,B).filter(I);N.sort(f);return N};q._updateCandidatesTo3D=function(B,N,w){for(const h of B)switch(h.type){case "edge":C(h,N,w);continue;case "vertex":k(h,N,w)}return B};return p}();c.getSnappingCandidateElevationFilter=function(p=!1){return p?new r:new t};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/symbologySnappingCandidates":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/lang ../../../../core/LRUCache ../../../../core/promiseUtils ../../../../core/string".split(" "),
function(c,a,I,C,k,f,t){function r(B){switch(B.type){case "vertex":const {objectId:N,target:w}=B;return t.numericHash(`${N}-vertex-${w.x}-${w.y}-${w.z??0}`).toString();case "edge":const {objectId:h,start:D,end:d}=B;return t.numericHash(`${h}-edge-${D.x}-${D.y}-${D.z??0}-to-${d.x}-${d.y}-${d.z??0}`).toString();default:return""}}let p=function(){function B(){}var N=B.prototype;N.fetch=function(){var w=a._asyncToGenerator(function*(){return[]});return function(){return w.apply(this,arguments)}}();N.notifySymbologyChange=
function(){};return B}(),q=function(){function B(w){this._getSymbologyCandidates=w;this._candidatesCache=new k(1024);this._cacheVersion=0}var N=B.prototype;N.fetch=function(){var w=a._asyncToGenerator(function*(h,D){if(0===h.length)return[];const d=[],l=[],x=this._candidatesCache;for(var G of h){var J=r(G),R=x.get(J);if(R)for(var v of R)l.push(C.clone(v));else d.push(G),x.put(J,[],1)}if(0===d.length)return l;G=this._cacheVersion;const {candidates:E,sourceCandidateIndices:z}=yield this._getSymbologyCandidates(d,
D);f.throwIfAborted(D);if(G!==this._cacheVersion)return this.fetch(h,D);h=[];({length:D}=E);for(G=0;G<D;++G)J=E[G],R=r(d[z[G]]),v=x.get(R),v.push(J),x.put(R,v,v.length),h.push(C.clone(J));return l.concat(h)});return function(h,D){return w.apply(this,arguments)}}();N.notifySymbologyChange=function(){this._candidatesCache.clear();this._cacheVersion++};return B}();c.getSymbologySnappingCandidatesFetcher=function(B=!1,N){return B?new q(N):new p};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/asyncUtils ../../../../../core/HandleOwner ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G,J,R,v,E){c.FeatureServiceTiledFetcher=function(z){function m(b){b=z.call(this,b)||this;b.tilesOfInterest=[];b.availability=0;b._pendingTiles=new Map;b._pendingEdits=new k.AsyncSequence;b._pendingEditsAbortController=new AbortController;return b}a._inheritsLoose(m,z);var L=m.prototype;L.initialize=function(){this._initializeFetchExtent();this.updatingHandles.add(()=>this._configuration,()=>this.refresh());this.updatingHandles.add(()=>this.tilesOfInterest,
(b,n)=>{C.equals(b,n,({id:H},{id:A})=>H===A)||this._process()},N.sync)};L.destroy=function(){this._pendingTiles.forEach(b=>this._deletePendingTile(b));this._pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this._pendingEditsAbortController.abort();this._pendingEditsAbortController=null};L.refresh=function(){this.store.refresh();this._pendingTiles.forEach(b=>this._deletePendingTile(b));this._process()};L.applyEdits=function(b){var n=this;this._pendingEdits.push(b,function(){var H=
a._asyncToGenerator(function*(A){if(0!==A.addedFeatures.length||0!==A.updatedFeatures.length||0!==A.deletedFeatures.length){for(const [,y]of n._pendingTiles)y.reset();A={...A,deletedFeatures:A.deletedFeatures.map(({objectId:y,globalId:P})=>y&&-1!==y?y:n._lookupObjectIdByGlobalId(P))};yield n.updatingHandles.addPromise(n.store.processEdits(A,(y,P)=>n._queryFeaturesById(y,P),n._pendingEditsAbortController.signal));n._processPendingTiles()}});return function(A){return H.apply(this,arguments)}}())};L._initializeFetchExtent=
function(){var b=this;if(this.capabilities.query.supportsExtent&&G.isHostedAgolService(this.url)){var n=f.createTask(function(){var H=a._asyncToGenerator(function*(A){try{const y=yield R.executeQueryForExtent(b.url,new v({where:"1\x3d1",outSpatialReference:b.spatialReference,cacheHint:b.capabilities.query.supportsCacheHint?!0:void 0}),{query:b._configuration.customParameters,signal:A});b.store.extent=d.fromJSON(y.data?.extent)}catch(y){B.throwIfAbortError(y),p.getLogger(b.declaredClass).warn("Failed to fetch data extent",
y)}});return function(A){return H.apply(this,arguments)}}());this.updatingHandles.addPromise(n.promise.then(()=>this._process()));this.handles.add(r.makeHandle(()=>n.abort()))}};L._process=function(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()};L._markTilesNotAlive=function(){for(const [,b]of this._pendingTiles)b.alive=!1};L._createPendingTiles=function(){var b=this._collectMissingTilesInfo();this._setAvailability(q.isNone(b)?1:b.coveredArea/
b.fullArea);if(!q.isNone(b))for(const {data:n,resolution:H}of b.missingTiles)(b=this._pendingTiles.get(n.id))?(b.resolution=H,b.alive=!0):this._createPendingTile(n,H)};L._collectMissingTilesInfo=function(){let b=null;for(let n=this.tilesOfInterest.length-1;0<=n;n--){const H=this.store.process(this.tilesOfInterest[n],(A,y)=>this._verifyTileComplexity(A,y));q.isNone(b)?b=H:b.prepend(H)}return b};L._deletePendingTiles=function(){for(const [,b]of this._pendingTiles)b.alive||this._deletePendingTile(b)};
L._processPendingTiles=function(){const b={fetchCount:(n,H)=>this._fetchCount(n,H),fetchFeatures:(n,H,A)=>this._fetchFeatures(n,H,A),finish:(n,H)=>this._finishPendingTile(n,H),resume:()=>this._processPendingTiles()};if(this._ensureFetchAllCounts(b))for(const [,n]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(n.data),n.resolution)&&this.updatingHandles.addPromise(n.process(b))};L._verifyTileComplexity=function(b,n){return this._verifyVertexComplexity(b)&&this._verifyFeatureDensity(b,
n)};L._verifyVertexComplexity=function(b){return 1E6>b*this._minimumVerticesPerFeature};L._verifyFeatureDensity=function(b,n){if(q.isNone(this.tileInfo))return!1;n*=this.tileSize;return 1>25/(n*n)*b};L._ensureFetchAllCounts=function(b){let n=!0;for(const [,H]of this._pendingTiles)H.state.type<E.StateType.FETCHED_COUNT&&this.updatingHandles.addPromise(H.process(b)),H.state.type<=E.StateType.FETCH_COUNT&&(n=!1);return n};L._finishPendingTile=function(b,n){this.store.add(b.data,n);this._deletePendingTile(b);
this._updateAvailability()};L._updateAvailability=function(){const b=this._collectMissingTilesInfo();this._setAvailability(q.isNone(b)?1:b.coveredArea/b.fullArea)};L._setAvailability=function(b){this._set("availability",b)};L._createPendingTile=function(b,n){n=new E.PendingFeatureTile(b,n);this._pendingTiles.set(b.id,n);return n};L._deletePendingTile=function(b){b.reset();this._pendingTiles.delete(b.data.id)};L._fetchCount=function(){var b=a._asyncToGenerator(function*(n,H){return this.store.fetchCount(n.data,
this.url,this._createCountQuery(n),{query:this.customParameters,timeout:6E5,signal:H})});return function(n,H){return b.apply(this,arguments)}}();L._fetchFeatures=function(){var b=a._asyncToGenerator(function*(n,H,A){let y=0,P,K=0,U=H;for(;;){const Z=this._createFeaturesQuery(n),V=this._setPagingParameters(Z,y,U),{features:ka,exceededTransferLimit:ca}=yield this._queryFeatures(Z,A);V&&(y+=q.unwrap(Z.num));K+=ka.length;P=P?P.concat(ka):ka;U=H-K;if(!V||!ca||0>=U)return P}});return function(n,H,A){return b.apply(this,
arguments)}}();L._filterProperties=function(b){return q.isNone(b)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:b.where||"1\x3d1",timeExtent:b.timeExtent,gdbVersion:b.gdbVersion}};L._lookupObjectIdByGlobalId=function(b){const n=this.globalIdField,H=this.objectIdField;if(q.isNone(n))throw Error("Expected globalIdField to be defined");let A=null;this.store.featureStore.forEach(y=>{b===y.attributes[n]&&(A=y.objectId??y.attributes[H])});if(q.isNone(A))throw Error(`Expected to find a feature with globalId ${b}`);
return A};L._queryFeaturesById=function(b,n){const H=this._createFeaturesQuery();H.objectIds=b;return this._queryFeatures(H,n)};L._queryFeatures=function(b,n){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(b,n):this._queryFeaturesJSON(b,n)};L._queryFeaturesPBF=function(){var b=a._asyncToGenerator(function*(n,H){const {sourceSpatialReference:A}=this;({data:n}=yield R.executeQueryPBF(this.url,n,new J.OptimizedFeatureSetParserContext({sourceSpatialReference:A}),{query:this._configuration.customParameters,
timeout:6E5,signal:H}));return x.unquantizeOptimizedFeatureSet(n)});return function(n,H){return b.apply(this,arguments)}}();L._queryFeaturesJSON=function(){var b=a._asyncToGenerator(function*(n,H){const {sourceSpatialReference:A}=this;({data:n}=yield R.executeQuery(this.url,n,A,{query:this._configuration.customParameters,timeout:6E5,signal:H}));return x.convertFromFeatureSet(n,this.objectIdField)});return function(n,H){return b.apply(this,arguments)}}();L._createCountQuery=function(b){b=this._createBaseQuery(b);
this.capabilities.query.supportsCacheHint&&(b.cacheHint=!0);return b};L._createFeaturesQuery=function(b=null){const n=this._createBaseQuery(b);n.outFields=this.globalIdField?[this.globalIdField,this.objectIdField]:[this.objectIdField];n.returnGeometry=!0;q.isSome(b)&&(this.capabilities.query.supportsResultType?n.resultType="tile":this.capabilities.query.supportsCacheHint&&(n.cacheHint=!0));return n};L._createBaseQuery=function(b){b=new v({returnZ:this.hasZ,returnM:!1,geometry:q.isSome(this.tileInfo)&&
q.isSome(b)?l.toExtent(b.data.extent,this.tileInfo.spatialReference):void 0});const n=this._configuration.filter;q.isSome(n)&&(b.where=n.where,b.gdbVersion=n.gdbVersion,b.timeExtent=n.timeExtent);b.outSpatialReference=this.spatialReference;return b};L._setPagingParameters=function(b,n,H){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:A,supportsCacheHint:y,tileMaxRecordCount:P,maxRecordCount:K,supportsResultType:U}=this.capabilities.query,Z=A?v.MAX_MAX_RECORD_COUNT_FACTOR:
1,V=Z*((U||y)&&P?P:K?K:2E3);b.start=n;A?(b.maxRecordCountFactor=Math.min(Z,Math.ceil(H/V)),b.num=Math.min(H,b.maxRecordCountFactor*V)):b.num=Math.min(H,V);return!0};a._createClass(m,[{key:"_minimumVerticesPerFeature",get:function(){switch(this.store?.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},{key:"filter",set:function(b){const n=this._get("filter");b=this._filterProperties(b);
JSON.stringify(n)!==JSON.stringify(b)&&this._set("filter",b)}},{key:"customParameters",set:function(b){const n=this._get("customParameters");JSON.stringify(n)!==JSON.stringify(b)&&this._set("customParameters",b)}},{key:"_configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(b){const n=this._get("tileInfo");n===b||q.isSome(b)&&q.isSome(n)&&JSON.stringify(b)===JSON.stringify(n)||(this._set("tileInfo",
b),this.store.tileInfo=b)}},{key:"tileSize",set:function(b){this._get("tileSize")!==b&&this._set("tileSize",b)}},{key:"updating",get:function(){return this.updatingExcludingEdits||this._pendingEdits.updating}},{key:"updatingExcludingEdits",get:function(){return this.updatingHandles.updating}},{key:"hasZ",get:function(){return this.store.featureStore.hasZ}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map(b=>
b.debugInfo),storedTiles:this.store.debugInfo}}}]);return m}(t.HandleOwner);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"url",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);
I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);I.__decorate([w.property({constructOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"store",void 0);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_minimumVerticesPerFeature",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,
"filter",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"customParameters",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"_configuration",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tileInfo",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tileSize",null);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);I.__decorate([w.property({readOnly:!0})],
c.FeatureServiceTiledFetcher.prototype,"updating",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"updatingExcludingEdits",null);I.__decorate([w.property({readOnly:!0})],c.FeatureServiceTiledFetcher.prototype,"availability",void 0);I.__decorate([w.property()],c.FeatureServiceTiledFetcher.prototype,"hasZ",null);c.FeatureServiceTiledFetcher=I.__decorate([D.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],
c.FeatureServiceTiledFetcher);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f){c.AsyncSequence=function(t){function r(){var q=t.apply(this,arguments)||this;q.updating=!1;q._pending=[];return q}a._inheritsLoose(r,t);var p=r.prototype;
p.push=function(q,B){this._pending.push({promise:q,callback:B});1===this._pending.length&&this._process()};p._process=function(){if(this._pending.length){this.updating=!0;var q=this._pending[0];q.promise.then(B=>q.callback(B)).catch(()=>{}).then(()=>{this._pending.shift();this._process()})}else this.updating=!1};return r}(C);I.__decorate([k.property()],c.AsyncSequence.prototype,"updating",void 0);c.AsyncSequence=I.__decorate([f.subclass("esri.core.AsyncSequence")],c.AsyncSequence);Object.defineProperties(c,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/asyncUtils":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./arrayUtils ./accessorSupport/ensureType ./accessorSupport/decorators/subclass".split(" "),function(c,a,I,C,k,f,t,r,p,q){function B(){B=a._asyncToGenerator(function*(G,J,R){return(yield f.eachAlways(G.map((v,E)=>J.apply(R,[v,E])))).map(v=>v.value)});return B.apply(this,
arguments)}function N(G){return{ok:!0,value:G}}function w(G){return{ok:!1,error:G}}function h(G){return k.isSome(G)&&!0===G.ok?G.value:null}function D(G){return k.isSome(G)&&!1===G.ok?G.error:null}function d(){d=a._asyncToGenerator(function*(G){if(k.isNone(G))return{ok:!1,error:Error("no promise provided")};try{return N(yield G)}catch(J){return w(J)}});return d.apply(this,arguments)}function l(){l=a._asyncToGenerator(function*(G){try{return N(yield G)}catch(J){return f.throwIfAbortError(J),w(J)}});
return l.apply(this,arguments)}let x=function(G){function J(v,E){var z=G.call(this,{})||this;z._result=null;z._abortHandle=null;z.abort=()=>{z._abortController=k.abortMaybe(z._abortController)};z.remove=z.abort;z._abortController=new AbortController;const {signal:m}=z._abortController;z.promise=v(m);z.promise.then(L=>{z._result=N(L);z._cleanup()},L=>{z._result=w(L);z._cleanup()});z._abortHandle=f.onAbort(E,z.abort);return z}a._inheritsLoose(J,G);var R=J.prototype;R.normalizeCtorArgs=function(){return{}};
R.destroy=function(){this.abort()};R._cleanup=function(){this._abortHandle=k.removeMaybe(this._abortHandle);this._abortController=null};a._createClass(J,[{key:"value",get:function(){return h(this._result)}},{key:"error",get:function(){return D(this._result)}},{key:"finished",get:function(){return k.isSome(this._result)}}]);return J}(C);I.__decorate([t.property()],x.prototype,"value",null);I.__decorate([t.property()],x.prototype,"error",null);I.__decorate([t.property()],x.prototype,"finished",null);
I.__decorate([t.property()],x.prototype,"promise",void 0);I.__decorate([t.property()],x.prototype,"_result",void 0);x=I.__decorate([q.subclass("esri.core.asyncUtils.ReactiveTask")],x);c.assertResult=function(G){if(!0===G.ok)return G.value;throw G.error;};c.createTask=function(G,J){return new x(G,J)};c.forEach=function(G,J,R){return f.eachAlways(G.map((v,E)=>J.apply(R,[v,E])))};c.makeResultError=w;c.makeResultOk=N;c.map=function(G,J,R){return B.apply(this,arguments)};c.result=function(G){return d.apply(this,
arguments)};c.resultError=D;c.resultOrAbort=function(G){return l.apply(this,arguments)};c.resultValue=h;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./Accessor ./Handles ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./support/WatchUpdatingTracking".split(" "),function(c,a,I,C,k,f,t,r){const p=q=>{q=function(B){function N(){return B.apply(this,
arguments)||this}a._inheritsLoose(N,B);N.prototype.destroy=function(){this.destroyed||(this._get("handles")?.destroy(),this._get("updatingHandles")?.destroy())};a._createClass(N,[{key:"handles",get:function(){return this._get("handles")||new k}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new r.WatchUpdatingTracking}}]);return N}(q);I.__decorate([f.property({readOnly:!0})],q.prototype,"handles",null);I.__decorate([f.property({readOnly:!0})],q.prototype,"updatingHandles",
null);return q=I.__decorate([t.subclass("esri.core.HandleOwner")],q)};c.HandleOwner=function(q){function B(){return q.apply(this,arguments)||this}a._inheritsLoose(B,q);return B}(p(C));c.HandleOwner=I.__decorate([t.subclass("esri.core.HandleOwner")],c.HandleOwner);c.HandleOwnerMixin=p;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],
function(c,a,I,C){function k(w){if(a.isNone(w))return null;w=I.urlToObject(w);w=w.path.match(q)||w.path.match(B);if(!w)return null;const [,h,D,d,l]=w;w=D.indexOf("/");return{title:t(-1!==w?D.slice(w+1):D),serverType:r[d.toLowerCase()],sublayer:null!=l&&""!==l?parseInt(l,10):null,url:{path:h}}}function f(w){return(w=I.urlToObject(w).path.match(N))?{serviceUrl:w[1],sublayerId:Number(w[2])}:null}function t(w){w=w.replace(/\s*[/_]+\s*/g," ");return w[0].toUpperCase()+w.slice(1)}const r={mapserver:"MapServer",
imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},p=Object.values(r),q=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${p.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),B=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${p.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),N=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;c.cleanTitle=t;c.isAGOLUrl=function(w){if(!w)return!1;w=(new I.Url(I.makeAbsolute(w))).authority?.toLowerCase();
return null!=w&&w.includes("arcgis.com")};c.isArcGISUrl=function(w){return!!q.test(w)};c.isHostedAgolService=function(w){if(!w)return!1;w=w.toLowerCase();const h=w.includes(".arcgis.com/");w=w.includes("//services")||w.includes("//tiles")||w.includes("//features");return h&&w};c.isHostedSecuredProxyService=function(w,h){return null!=h&&null!=w&&w.toLowerCase().includes(h.toLowerCase())};c.isServerOrServicesAGOLUrl=function(w){if(!w)return!1;w=(new I.Url(I.makeAbsolute(w))).authority?.toLowerCase();
return"server.arcgisonline.com"===w||"services.arcgisonline.com"===w};c.isWmsServer=function(w){if(!w)return!1;var h=w.toLowerCase();w=h.includes("/services/");const D=h.includes("/mapserver/wmsserver"),d=h.includes("/imageserver/wmsserver");h=h.includes("/wmsserver");return w&&(D||d||h)};c.parse=k;c.parseNonStandardSublayerUrl=f;c.sanitizeUrl=function(w,h){return w?I.removeTrailingSlash(I.removeQueryParameters(w,h)):w};c.sanitizeUrlWithLayerId=function(w){let {url:h}=w;if(!h)return{url:h};h=I.removeQueryParameters(h,
w.logger);const D=I.urlToObject(h),d=k(D.path);let l=void 0;a.isSome(d)?(null!=d.sublayer&&null==w.layer.layerId&&(l=d.sublayer),h=d.url.path):w.nonStandardUrlAllowed&&(w=f(D.path),a.isSome(w)&&(h=w.serviceUrl,l=w.sublayerId));return{url:I.removeTrailingSlash(h),layerId:l}};c.serverTypes=p;c.titleFromUrlAndName=function(w,h){const D=[];w&&(w=k(w),a.isSome(w)&&w.title&&D.push(w.title));h&&(h=t(h),D.push(h));if(2===D.length){if(D[0].toLowerCase().includes(D[1].toLowerCase()))return D[0];if(D[1].toLowerCase().includes(D[0].toLowerCase()))return D[1]}return D.join(" - ")};
c.writeUrlWithLayerId=function(w,h,D,d,l){C.write(h,d,"url",l);d.url&&null!=w.layerId&&(d.url=I.join(d.url,D,w.layerId.toString()))};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(c,a,I){function C(D,d){var l=d&&d.url&&d.url.path;D&&l&&(D=I.makeAbsolute(D,l,{preserveProtocolRelative:!0}),d.portalItem&&d.readResourcePaths&&(l=I.makeRelative(D,d.portalItem.itemUrl),
null!=l&&w.test(l)&&d.readResourcePaths.push(d.portalItem.resourceFromPath(l).path)));return B(D,d&&d.portal)}function k(D,d,l=c.MarkKeep.YES){if(null==D)return D;!I.isAbsolute(D)&&d&&d.blockedRelativeUrls&&d.blockedRelativeUrls.push(D);let x=I.makeAbsolute(D);if(d){var G=d.verifyItemRelativeUrls&&d.verifyItemRelativeUrls.rootPath||d.url&&d.url.path;G&&(G=B(G,d.portal),x=I.makeRelative(B(x,d.portal),G,G),null!=x&&x!==D&&d.verifyItemRelativeUrls&&d.verifyItemRelativeUrls.writtenUrls.push(x))}x=q(x,
d?.portal);I.isAbsolute(x)&&(x=I.normalize(x));d?.resources&&d?.portalItem&&!I.isAbsolute(x)&&!I.isDataProtocol(x)&&l===c.MarkKeep.YES&&d.resources.toKeep.push({resource:d.portalItem.resourceFromPath(x),compress:!1});return x}function f(D,d,l){return C(D,l)}function t(D,d,l,x){D=k(D,x);void 0!==D&&(d[l]=D)}function r(D){return(D?.match(N)??null)?.[1]??null}function p(D){D=D?.match(N)??null;if(null==D)return null;D=D[2];const d=D.lastIndexOf("/");if(-1===d){const {path:G,extension:J}=I.splitPathExtension(D);
return{prefix:null,filename:G,extension:a.unwrap(J)}}const {path:l,extension:x}=I.splitPathExtension(D.slice(d+1));return{prefix:D.slice(0,d),filename:l,extension:a.unwrap(x)}}function q(D,d){return d&&!d.isPortal&&d.urlKey&&d.customBaseUrl?I.changeDomain(D,`${d.urlKey}.${d.customBaseUrl}`,d.portalHostname):D}function B(D,d){if(!d||d.isPortal||!d.urlKey||!d.customBaseUrl)return D;const l=`${d.urlKey}.${d.customBaseUrl}`,x=I.getAppUrl();return I.hasSameOrigin(x,`${x.scheme}://${l}`)?I.changeDomain(D,
d.portalHostname,l):I.changeDomain(D,l,d.portalHostname)}const N=/\/items\/([^\/]+)\/resources\/(.*)/,w=/^\.\/resources\//;c.MarkKeep=void 0;(function(D){D[D.YES=0]="YES";D[D.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const h=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:C,toJSON:k,read:f,write:t,itemIdFromResourceUrl:r,prefixAndFilenameFromResourceUrl:p,ensureMainOnlineDomain:q,get MarkKeep(){return c.MarkKeep}},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=q;c.fromJSON=
C;c.itemIdFromResourceUrl=r;c.persistableUrlUtils=h;c.prefixAndFilenameFromResourceUrl=p;c.read=f;c.toJSON=k;c.write=t})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(c,a,I,C,k,f){const t=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline",
"esriGeometryPolygon"];let r=function(){function p(B){this._options=B;this.geometryTypes=t;this._vertexDimension=this._coordinatePtr=0}var q=p.prototype;q.createFeatureResult=function(){return new k};q.prepareFeatures=function(B){this._vertexDimension=2;B.hasZ&&this._vertexDimension++;B.hasM&&this._vertexDimension++};q.finishFeatureResult=function(B){if(B&&B.features&&B.hasZ&&this._options.sourceSpatialReference&&B.spatialReference&&!I.equals(B.spatialReference,this._options.sourceSpatialReference)&&
!B.spatialReference.vcsWkid){var N=a.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),w=a.getMetersPerVerticalUnitForSR(B.spatialReference);N/=w;if(1!==N)for(const h of B.features)if(C.hasGeometry(h))for(B=h.geometry.coords,w=2;w<B.length;w+=3)B[w]*=N}};q.addFeature=function(B,N){B.features.push(N)};q.createFeature=function(){return new C.OptimizedFeature};q.createSpatialReference=function(){return{wkid:0}};q.createGeometry=function(){return new f};q.addField=function(B,N){B.fields.push(N)};
q.allocateCoordinates=function(B){B.coords.length=B.lengths.reduce((N,w)=>N+w,0)*this._vertexDimension;this._coordinatePtr=0};q.addCoordinate=function(B,N){B.coords[this._coordinatePtr++]=N};q.addCoordinatePoint=function(B,N){B.coords.push(N)};q.addLength=function(B,N){B.lengths.push(N)};q.addQueryGeometry=function(B,N){B.queryGeometry=N.queryGeometry;B.queryGeometryType=N.queryGeometryType};q.createPointGeometry=function(){return new f};return p}();c.OPTIMIZED_GEOMETRY_TYPES=t;c.OptimizedFeatureSetParserContext=
r;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/query":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),function(c,a,I,C,k,f,t,r,p,q){function B(l,x){if(x&&"extent"===l.type)return`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`;
if(x&&"point"===l.type)return`${l.x},${l.y}`;l=l.toJSON();delete l.spatialReference;return JSON.stringify(l)}function N(l,x){const G=l.geometry,J=l.toJSON();delete J.compactGeometryEnabled;delete J.defaultSpatialReferenceEnabled;let R,v,E;C.isSome(G)&&(v=G.spatialReference,E=G.spatialReference.wkid||JSON.stringify(G.spatialReference),J.geometryType=f.getJsonType(G),J.geometry=B(G,l.compactGeometryEnabled),J.inSR=E);J.groupByFieldsForStatistics&&(J.groupByFieldsForStatistics=J.groupByFieldsForStatistics.join(","));
J.objectIds&&(J.objectIds=J.objectIds.join(","));J.orderByFields&&(J.orderByFields=J.orderByFields.join(","));!J.outFields||!J.returnDistinctValues&&(x?.returnCountOnly||x?.returnExtentOnly||x?.returnIdsOnly)?delete J.outFields:J.outFields.includes("*")?J.outFields="*":J.outFields=J.outFields.join(",");J.outSR?(J.outSR=J.outSR.wkid||JSON.stringify(J.outSR),R=l.outSpatialReference):G&&(J.returnGeometry||J.returnCentroid)&&(J.outSR=J.inSR,R=v);J.returnGeometry&&delete J.returnGeometry;J.outStatistics&&
(J.outStatistics=JSON.stringify(J.outStatistics));J.fullText&&(J.fullText=JSON.stringify(J.fullText));J.pixelSize&&(J.pixelSize=JSON.stringify(J.pixelSize));J.quantizationParameters&&(l.defaultSpatialReferenceEnabled&&C.isSome(v)&&C.isSome(l.quantizationParameters)&&C.isSome(l.quantizationParameters.extent)&&v.equals(l.quantizationParameters.extent.spatialReference)&&delete J.quantizationParameters.extent.spatialReference,J.quantizationParameters=JSON.stringify(J.quantizationParameters));J.parameterValues&&
(J.parameterValues=JSON.stringify(J.parameterValues));J.rangeValues&&(J.rangeValues=JSON.stringify(J.rangeValues));J.dynamicDataSource&&(J.layer=JSON.stringify({source:J.dynamicDataSource}),delete J.dynamicDataSource);if(J.timeExtent){const {start:z,end:m}=J.timeExtent;if(null!=z||null!=m)J.time=z===m?z:`${null==z?"null":z},${null==m?"null":m}`;delete J.timeExtent}l.defaultSpatialReferenceEnabled&&C.isSome(v)&&C.isSome(R)&&v.equals(R)&&(J.defaultSR=J.inSR,delete J.inSR,delete J.outSR);return J}function w(){w=
a._asyncToGenerator(function*(l,x,G,J){l=C.isSome(x.timeExtent)&&x.timeExtent.isEmpty?{data:{features:[]}}:yield d(l,x,"json",J);q.applyFeatureSetZUnitScaling(x,G,l.data);return l});return w.apply(this,arguments)}function h(){h=a._asyncToGenerator(function*(l,x,G,J){if(C.isSome(x.timeExtent)&&x.timeExtent.isEmpty)return{data:G.createFeatureResult()};l=yield D(l,x,J);l.data=p.parsePBFFeatureQuery(l.data,G);return l});return h.apply(this,arguments)}function D(l,x,G){return d(l,x,"pbf",G)}function d(l,
x,G,J={},R={}){const v="string"===typeof l?k.urlToObject(l):l;l=x.geometry?[x.geometry]:[];J.responseType="pbf"===G?"array-buffer":"json";return t.normalizeCentralMeridian(l,null,J).then(E=>{E=E&&E[0];C.isSome(E)&&(x=x.clone(),x.geometry=E);E=r.mapParameters({...v.query,f:G,...R,...N(x,R)});return I(k.join(v.path,"query"),{...J,query:{...E,...J.query}})})}c.encodeGeometry=B;c.executeQuery=function(l,x,G,J){return w.apply(this,arguments)};c.executeQueryForCount=function(l,x,G){return C.isSome(x.timeExtent)&&
x.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):d(l,x,"json",G,{returnIdsOnly:!0,returnCountOnly:!0})};c.executeQueryForExtent=function(l,x,G){return C.isSome(x.timeExtent)&&x.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):d(l,x,"json",G,{returnExtentOnly:!0,returnCountOnly:!0}).then(J=>{const R=J.data;if(R.hasOwnProperty("extent"))return J;if(R.features)throw Error("Layer does not support extent calculation.");if(R.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");
return J})};c.executeQueryForIds=function(l,x,G){return C.isSome(x.timeExtent)&&x.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):d(l,x,"json",G,{returnIdsOnly:!0})};c.executeQueryPBF=function(l,x,G,J){return h.apply(this,arguments)};c.executeQueryPBFBuffer=D;c.queryToQueryStringParameters=N;c.runQuery=d;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(c){function a(I){const C=
{};for(const k in I){if("declaredClass"===k)continue;const f=I[k];if(null!=f&&"function"!==typeof f)if(Array.isArray(f)){C[k]=[];for(let t=0;t<f.length;t++)C[k][t]=a(f[t])}else"object"===typeof f?f.toJSON&&(C[k]=JSON.stringify(f)):C[k]=f}return C}c.mapParameters=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(c,a){c.parsePBFFeatureQuery=function(I,
C){var k=a.parseFeatureQuery(I,C);I=k.queryResult.featureResult;C=k.queryResult.queryGeometry;k=k.queryResult.queryGeometryType;if(I&&I.features&&I.features.length&&I.objectIdFieldName){const f=I.objectIdFieldName;for(const t of I.features)t.attributes&&(t.objectId=t.attributes[f])}I&&(I.queryGeometry=C,I.queryGeometryType=k);return I};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/Error ../../../core/maybe ../../../core/pbf ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet".split(" "),
function(c,a,I,C,k,f){function t(m){return m>=v.length?null:v[m]}function r(m,L,b){m=m.asUnsafe();for(b=L.createPointGeometry(b);m.next();)switch(m.tag()){case 3:var n=m.getUInt32();n=m.pos()+n;let H=0;for(;m.pos()<n;)L.addCoordinatePoint(b,m.getSInt64(),H++);break;default:m.skip()}return b}function p(m,L,b){m=m.asUnsafe();const n=L.createGeometry(b);for(b=2+(b.hasZ?1:0)+(b.hasM?1:0);m.next();)switch(m.tag()){case 2:var H=m.getUInt32();H=m.pos()+H;for(var A=0;m.pos()<H;)L.addLength(n,m.getUInt32(),
A++);break;case 3:H=m.getUInt32();H=m.pos()+H;A=0;for(L.allocateCoordinates(n);m.pos()<H;)L.addCoordinate(n,m.getSInt64(),A),A++,A===b&&(A=0);break;default:m.skip()}return n}function q(m){m=m.asUnsafe();const L=new k;let b="esriGeometryPoint";for(;m.next();)switch(m.tag()){case 2:var n=m.getUInt32();for(n=m.pos()+n;m.pos()<n;)L.lengths.push(m.getUInt32());break;case 3:n=m.getUInt32();for(n=m.pos()+n;m.pos()<n;)L.coords.push(m.getSInt64());break;case 1:b=f.OPTIMIZED_GEOMETRY_TYPES[m.getEnum()];break;
default:m.skip()}return{queryGeometry:L,queryGeometryType:b}}function B(m){for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:return m.getString();case 2:return m.getFloat();case 3:return m.getDouble();case 4:return m.getSInt32();case 5:return m.getUInt32();case 6:return m.getInt64();case 7:return m.getUInt64();case 8:return m.getSInt64();case 9:return m.getBool();default:return m.skip(),null}return null}function N(m){m=m.asUnsafe();const L={type:t(0)};for(;m.next();)switch(m.tag()){case 1:L.name=
m.getString();break;case 2:L.type=t(m.getEnum());break;case 3:L.alias=m.getString();break;case 4:var b=m.getEnum();b=b>=E.length?null:E[b];L.sqlType=b;break;case 5:m.skip();break;case 6:L.defaultValue=m.getString();break;default:m.skip()}return L}function w(m){const L={};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:L.name=m.getString();break;case 2:L.isSystemMaintained=m.getBool();break;default:m.skip()}return L}function h(m,L,b,n){const H=L.createFeature(b);let A=0;for(;m.next();)switch(m.tag()){case 1:const y=
n[A++].name;H.attributes[y]=m.processMessage(B);break;case 2:H.geometry=m.processMessageWithArgs(p,L,b);break;case 4:H.centroid=m.processMessageWithArgs(r,L,b);break;default:m.skip()}return H}function D(m){const L=[1,1,1,1];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:L[0]=m.getDouble();break;case 2:L[1]=m.getDouble();break;case 4:L[2]=m.getDouble();break;case 3:L[3]=m.getDouble();break;default:m.skip()}return L}function d(m){const L=[0,0,0,0];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:L[0]=
m.getDouble();break;case 2:L[1]=m.getDouble();break;case 4:L[2]=m.getDouble();break;case 3:L[3]=m.getDouble();break;default:m.skip()}return L}function l(m){const L={originPosition:0>=z.length?null:z[0]};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:var b=m.getEnum();L.originPosition=b>=z.length?null:z[b];break;case 2:L.scale=m.processMessage(D);break;case 3:L.translate=m.processMessage(d);break;default:m.skip()}return L}function x(m){const L={};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:L.shapeAreaFieldName=
m.getString();break;case 2:L.shapeLengthFieldName=m.getString();break;case 3:L.units=m.getString();break;default:m.skip()}return L}function G(m,L){for(L=L.createSpatialReference();m.next();)switch(m.tag()){case 1:L.wkid=m.getUInt32();break;case 5:L.wkt=m.getString();break;case 2:L.latestWkid=m.getUInt32();break;case 3:L.vcsWkid=m.getUInt32();break;case 4:L.latestVcsWkid=m.getUInt32();break;default:m.skip()}return L}function J(m,L){const b=L.createFeatureResult();m=m.asUnsafe();b.geometryType=0>=L.geometryTypes.length?
null:L.geometryTypes[0];let n=!1;for(;m.next();)switch(m.tag()){case 1:b.objectIdFieldName=m.getString();break;case 3:b.globalIdFieldName=m.getString();break;case 4:b.geohashFieldName=m.getString();break;case 5:b.geometryProperties=m.processMessage(x);break;case 7:var H=m.getEnum();b.geometryType=H>=L.geometryTypes.length?null:L.geometryTypes[H];break;case 8:b.spatialReference=m.processMessageWithArgs(G,L);break;case 10:b.hasZ=m.getBool();break;case 11:b.hasM=m.getBool();break;case 12:b.transform=
m.processMessage(l);break;case 9:H=m.getBool();b.exceededTransferLimit=H;break;case 13:L.addField(b,m.processMessage(N));break;case 15:n||(L.prepareFeatures(b),n=!0);L.addFeature(b,m.processMessageWithArgs(h,L,b,b.fields));break;case 2:b.uniqueIdField=m.processMessage(w);break;default:m.skip()}L.finishFeatureResult(b);return b}function R(m,L){const b={};let n=null;for(;m.next();)switch(m.tag()){case 4:n=m.processMessageWithArgs(q);break;case 1:b.featureResult=m.processMessageWithArgs(J,L);break;default:m.skip()}I.isSome(n)&&
b.featureResult&&L.addQueryGeometry(b,n);return b}const v="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),E="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
z=["upperLeft","lowerLeft"];c.parseFeatureQuery=function(m,L){try{const b=new C(new Uint8Array(m),new DataView(m));for(m={};b.next();)switch(b.tag()){case 2:m.queryResult=b.processMessageWithArgs(R,L);break;default:b.skip()}return m}catch(b){throw new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:b});}};c.parseFieldType=t;c.parseTransform=l;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/rest/query/operations/queryZScale":function(){define(["exports",
"../../../core/maybe","../../../geometry/support/zscale"],function(c,a,I){c.applyFeatureSetZUnitScaling=function(C,k,f){if(f&&f.features&&f.hasZ&&(C=I.getGeometryZScaler(f.geometryType,k,C.outSpatialReference),!a.isNone(C)))for(const t of f.features)C(t.geometry)};Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers",
"../../../../../core/asyncUtils","../../../../../core/maybe","../../../../../geometry/support/aaBoundingRect"],function(c,a,I,C,k){let f=function(){function r(q,B){this.data=q;this.resolution=B;this.state={type:c.StateType.CREATED};this.alive=!0}var p=r.prototype;p.process=function(q){switch(this.state.type){case c.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,q),this.state.task.promise.then(q.resume,q.resume);case c.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,
q),this.state.task.promise.then(q.resume,q.resume);case c.StateType.FETCHED_FEATURES:this.state=this._goToDone(this.state,q)}return null};p._gotoFetchCount=function(q,B){var N=this;return{type:c.StateType.FETCH_COUNT,previous:q,task:I.createTask(function(){var w=a._asyncToGenerator(function*(h){h=yield I.resultOrAbort(B.fetchCount(N,h));N.state.type===c.StateType.FETCH_COUNT&&(N.state=N._gotoFetchedCount(N.state,h.ok?h.value:Infinity))});return function(h){return w.apply(this,arguments)}}())}};p._gotoFetchedCount=
function(q,B){return{type:c.StateType.FETCHED_COUNT,featureCount:B,previous:q}};p._gotoFetchFeatures=function(q,B){var N=this;return{type:c.StateType.FETCH_FEATURES,previous:q,task:I.createTask(function(){var w=a._asyncToGenerator(function*(h){h=yield I.resultOrAbort(B.fetchFeatures(N,q.featureCount,h));N.state.type===c.StateType.FETCH_FEATURES&&(N.state=N._gotoFetchedFeatures(N.state,h.ok?h.value:[]))});return function(h){return w.apply(this,arguments)}}())}};p._gotoFetchedFeatures=function(q,B){return{type:c.StateType.FETCHED_FEATURES,
previous:q,features:B}};p._goToDone=function(q,B){B.finish(this,q.features);return{type:c.StateType.DONE,previous:q}};p.reset=function(){const q=this.state;this.state={type:c.StateType.CREATED};switch(q.type){case c.StateType.FETCH_COUNT:case c.StateType.FETCH_FEATURES:q.task.abort()}};p.intersects=function(q){if(C.isNone(q)||!this.data.extent)return!0;k.fromExtent(q,t);return k.intersects(this.data.extent,t)};a._createClass(r,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this._featureCount,
state:this._stateToString}}},{key:"_featureCount",get:function(){switch(this.state.type){case c.StateType.CREATED:case c.StateType.FETCH_COUNT:return 0;case c.StateType.FETCHED_COUNT:return this.state.featureCount;case c.StateType.FETCH_FEATURES:return this.state.previous.featureCount;case c.StateType.FETCHED_FEATURES:return this.state.features.length;case c.StateType.DONE:return this.state.previous.features.length}}},{key:"_stateToString",get:function(){switch(this.state.type){case c.StateType.CREATED:return"created";
case c.StateType.FETCH_COUNT:return"fetch-count";case c.StateType.FETCHED_COUNT:return"fetched-count";case c.StateType.FETCH_FEATURES:return"fetch-features";case c.StateType.FETCHED_FEATURES:return"fetched-features";case c.StateType.DONE:return"done"}}}]);return r}();c.StateType=void 0;(function(r){r[r.CREATED=0]="CREATED";r[r.FETCH_COUNT=1]="FETCH_COUNT";r[r.FETCHED_COUNT=2]="FETCHED_COUNT";r[r.FETCH_FEATURES=3]="FETCH_FEATURES";r[r.FETCHED_FEATURES=4]="FETCHED_FEATURES";r[r.DONE=5]="DONE"})(c.StateType||
(c.StateType={}));const t=k.create();c.PendingFeatureTile=f;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../layers/support/TileKey ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(c,a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l){function x(z){return z.reduce((m,L)=>{var b=L.geometry;if(f.isNone(b))b=0;else{var n=k.estimateFixedArraySize(b.lengths,4);b=32+k.estimateFixedArraySize(b.coords,8)+n}L=32+b+k.estimateAttributesObjectSize(L.attributes);return m+L},0)}c.FeatureServiceTileStore=function(z){function m(b){b=z.call(this,b)||this;b.tileInfo=null;b.extent=null;b.maximumByteSize=10*k.ByteSizeUnit.MEGABYTES;b._tileBounds=new w.BoundsStore;b._tiles=new l.FeatureServiceTileCache;b._refCounts=
new Map;b._tileFeatureCounts=new Map;b._tmpBoundingRect=B.create();return b}a._inheritsLoose(m,z);var L=m.prototype;L.add=function(b,n){const H=[];for(const A of n)this._referenceFeature(A.objectId)===E.ADDED&&H.push(A);this._addTileStorage(b,new Set(n.map(({objectId:A})=>A)),x(n));this.featureStore.addMany(H);this._tiles.applyByteSizeLimit(this.maximumByteSize,A=>this._removeTileStorage(A))};L.destroy=function(){this.clear();this._tileFeatureCounts.clear()};L.clear=function(){this.featureStore.clear();
this._tileBounds.clear();this._tiles.clear();this._refCounts.clear()};L.refresh=function(){this.clear();this._tileFeatureCounts.clear()};L.processEdits=function(b,n,H){this._processEditsDelete(b.deletedFeatures.concat(b.updatedFeatures));return this._processEditsRefetch(b.addedFeatures.concat(b.updatedFeatures),n,H)};L._addTileStorage=function(b,n,H){this._tiles.set(b.id,new G(b,n,H));this._tileBounds.set(b.id,b.extent);this._tileFeatureCounts.set(b.id,n.size)};L._remove=function({id:b}){(b=this._tiles.get(b))&&
this._removeTileStorage(b)};L._removeTileStorage=function(b){const n=[];for(const H of b.objectIds)this._unreferenceFeature(H)===E.REMOVED&&n.push(H);this.featureStore.removeManyById(n);b=b.data.id;this._tiles.delete(b);this._tileBounds.delete(b)};L._processEditsDelete=function(b){this.featureStore.removeManyById(b);for(const [,n]of this._tiles){for(const H of b)n.objectIds.delete(H);this._tileFeatureCounts.set(n.data.id,n.objectIds.size)}for(const n of b)this._refCounts.delete(n)};L._processEditsRefetch=
function(){var b=a._asyncToGenerator(function*(n,H,A){n=(yield H(n,A)).features;const {hasZ:y,hasM:P}=this.featureStore;for(const K of n)n=N.getBoundsOptimizedGeometry(this._tmpBoundingRect,K.geometry,y,P),f.isNone(n)||this._tileBounds.forEachInBounds(n,U=>{U=this._tiles.get(U);this.featureStore.add(K);U.objectIds.has(K.objectId)||(U.objectIds.add(K.objectId),this._referenceFeature(K.objectId),this._tileFeatureCounts.set(U.data.id,U.objectIds.size))})});return function(n,H,A){return b.apply(this,
arguments)}}();L.process=function(b,n=()=>!0){if(f.isNone(this.tileInfo)||!b.extent||f.isSome(this.extent)&&!B.intersects(B.fromExtent(this.extent,this._tmpBoundingRect),b.extent)||this._tiles.has(b.id))return new R(b);const H=this._createTileTree(b,this.tileInfo);this._simplify(H,n,null,0,1);return this._collectMissingTiles(b,H,this.tileInfo)};L.getFeatureCount=function(b){return this._tileFeatureCounts.get(b.id)??0};L.fetchCount=function(){var b=a._asyncToGenerator(function*(n,H,A,y){const P=this._tileFeatureCounts.get(n.id);
if(null!=P)return P;H=yield d.executeQueryForCount(H,A,y);this._tileFeatureCounts.set(n.id,H.data.count);return H.data.count});return function(n,H,A,y){return b.apply(this,arguments)}}();L._createTileTree=function(b,n){const H=new J(b.level,b.row,b.col);n.updateTileInfo(H,h.ExtrapolateOptions.POWER_OF_TWO);this._tileBounds.forEachInBounds(b.extent,A=>{A=this._tiles.get(A).data;this._tilesAreRelated(b,A)&&this._populateChildren(H,A,n,this._tileFeatureCounts.get(A.id)||0)});return H};L._tilesAreRelated=
function(b,n){if(!b||!n)return!1;if(b.level===n.level)return b.row===n.row&&b.col===n.col;const H=b.level<n.level,A=H?b:n;b=H?n:b;n=1<<b.level-A.level;return Math.floor(b.row/n)===A.row&&Math.floor(b.col/n)===A.col};L._populateChildren=function(b,n,H,A){var y=n.level-b.level-1;if(0>y)b.isLeaf=!0;else{var P=n.row>>y,K=n.col>>y;y=(P-(b.row<<1)<<1)+(K-(b.col<<1));var U=b.children[y];f.isSome(U)?this._populateChildren(U,n,H,A):(P=new J(b.level+1,P,K),H.updateTileInfo(P,h.ExtrapolateOptions.POWER_OF_TWO),
b.children[y]=P,this._populateChildren(P,n,H,A))}};L._simplify=function(b,n,H,A,y){const P=y*y;if(b.isLeaf)return n(this.getFeatureCount(b),y)?0:(this._remove(b),f.isSome(H)&&(H.children[A]=null),P);y/=2;const K=y*y;let U=0;for(let Z=0;Z<b.children.length;Z++){const V=b.children[Z];U+=f.isSome(V)?this._simplify(V,n,b,Z,y):K}0===U?this._mergeChildren(b):.18751>1-U/P&&(this._purge(b),f.isSome(H)&&(H.children[A]=null),U=P);return U};L._mergeChildren=function(b){const n=new Set;let H=0;this._forEachLeaf(b,
A=>{const y=this._tiles.get(A.id);if(y){H+=y.byteSize;for(const P of y.objectIds)n.has(P)||(n.add(P),this._referenceFeature(P));this._remove(A)}});this._addTileStorage(b,n,H);b.isLeaf=!0;b.children[0]=b.children[1]=b.children[2]=b.children[3]=null;this._tileFeatureCounts.set(b.id,n.size)};L._forEachLeaf=function(b,n){for(const H of b.children)f.isNone(H)||(H.isLeaf?n(H):this._forEachLeaf(H,n))};L._purge=function(b){if(!f.isNone(b))if(b.isLeaf)this._remove(b);else for(let n=0;n<b.children.length;n++)this._purge(b.children[n]),
b.children[n]=null};L._collectMissingTiles=function(b,n,H){b=new v(H,b,this.extent);this._collectMissingTilesRecurse(n,b,1);return b.info};L._collectMissingTilesRecurse=function(b,n,H){if(!b.isLeaf)if(b.hasChildren){H/=2;for(let A=0;A<b.children.length;A++){const y=b.children[A];f.isNone(y)?n.addMissing(b.level+1,(b.row<<1)+((A&2)>>1),(b.col<<1)+(A&1),H):this._collectMissingTilesRecurse(y,n,H)}}else n.addMissing(b.level,b.row,b.col,H)};L._referenceFeature=function(b){const n=(this._refCounts.get(b)||
0)+1;this._refCounts.set(b,n);return 1===n?E.ADDED:E.UNCHANGED};L._unreferenceFeature=function(b){const n=(this._refCounts.get(b)||0)-1;if(0===n)return this._refCounts.delete(b),E.REMOVED;0<n&&this._refCounts.set(b,n);return E.UNCHANGED};a._createClass(m,[{key:"debugInfo",get:function(){return Array.from(this._tiles.values()).map(({data:b})=>({data:b,featureCount:this._tileFeatureCounts.get(b.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this._tiles.values()).map(b=>`${b.data.id}:[${Array.from(b.objectIds)}]`),
featureReferences:Array.from(this._refCounts.keys()).map(b=>`${b}:${this._refCounts.get(b)}`)}}}]);return m}(C);I.__decorate([t.property({constructOnly:!0})],c.FeatureServiceTileStore.prototype,"featureStore",void 0);I.__decorate([t.property()],c.FeatureServiceTileStore.prototype,"tileInfo",void 0);I.__decorate([t.property()],c.FeatureServiceTileStore.prototype,"extent",void 0);I.__decorate([t.property()],c.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);c.FeatureServiceTileStore=I.__decorate([q.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],
c.FeatureServiceTileStore);let G=function(z,m,L){this.data=z;this.objectIds=m;this.byteSize=L},J=function(){function z(m,L,b){this.level=m;this.row=L;this.col=b;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}a._createClass(z,[{key:"hasChildren",get:function(){return!this.isLeaf&&(f.isSome(this.children[0])||f.isSome(this.children[1])||f.isSome(this.children[2])||f.isSome(this.children[3]))}}]);return z}(),R=function(){function z(m,L=[]){this.missingTiles=L;this.coveredArea=this.fullArea=
0;this.coveredArea=this.fullArea=B.area(m.extent)}z.prototype.prepend=function(m){this.missingTiles=m.missingTiles.concat(this.missingTiles);this.coveredArea+=m.coveredArea;this.fullArea+=m.fullArea};return z}(),v=function(){function z(m,L,b){this._tileInfo=m;this._extent=null;this.info=new R(L);f.isSome(b)&&(this._extent=B.fromExtent(b))}z.prototype.addMissing=function(m,L,b,n){m=new D.TileKey(null,m,L,b);this._tileInfo.updateTileInfo(m,h.ExtrapolateOptions.POWER_OF_TWO);f.isNone(m.extent)||f.isSome(this._extent)&&
!B.intersects(this._extent,m.extent)||(this.info.missingTiles.push({data:m,resolution:n}),this.info.coveredArea-=B.area(m.extent))};return z}();var E;(function(z){z[z.ADDED=0]="ADDED";z[z.REMOVED=1]="REMOVED";z[z.UNCHANGED=2]="UNCHANGED"})(E||(E={}));c.ProcessResult=R;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(c){function a(k){return 32+k.length}function I(k){if(!k)return 0;if(Array.isArray(k)){var f=
k.length;if(0===f||"number"===typeof k[0])k=32+8*f;else{var t=32;for(let r=0;r<f;r++)t+=C(k[r]);k=t}return k}t=32;for(f in k)k.hasOwnProperty(f)&&(t+=C(k[f]));return t}function C(k){switch(typeof k){case "object":return I(k);case "string":return a(k);case "number":return 16;case "boolean":return 4;default:return 8}}c.ByteSizeUnit=void 0;(function(k){k[k.KILOBYTES=1024]="KILOBYTES";k[k.MEGABYTES=1048576]="MEGABYTES";k[k.GIGABYTES=1073741824]="GIGABYTES"})(c.ByteSizeUnit||(c.ByteSizeUnit={}));c.estimateAttributesObjectSize=
function(k){if(!k)return 0;let f=32;for(const t in k)if(k.hasOwnProperty(t)){const r=k[t];switch(typeof r){case "string":f+=a(r);break;case "number":f+=16;break;case "boolean":f+=4}}return f};c.estimateFixedArraySize=function(k,f){return 32+k.length*f};c.estimateNestedObjectSize=I;c.estimateNumberByteSize=function(k){return 16};c.estimateStringByteSize=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],
function(c){let a=function(I){function C(){this._store=new Map;this._byteSize=0}var k=C.prototype;k.set=function(f,t){this.delete(f);this._store.set(f,t);this._byteSize+=t.byteSize};k.delete=function(f){const t=this._store.get(f);return this._store.delete(f)?(null!=t&&(this._byteSize-=t.byteSize),!0):!1};k.get=function(f){this._used(f);return this._store.get(f)};k.has=function(f){this._used(f);return this._store.has(f)};k.clear=function(){this._store.clear()};k.applyByteSizeLimit=function(f,t){for(const [r,
p]of this._store){if(this._byteSize<=f)break;this.delete(r);t(p)}};k.values=function(){return this._store.values()};k[I]=function(){return this._store[Symbol.iterator]()};k._used=function(f){const t=this._store.get(f);t&&(this._store.delete(f),this._store.set(f,t))};return C}(Symbol.iterator);c.FeatureServiceTileCache=a;Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"*noref":1}});
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/WatchUpdatingTracking ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../layers/support/TimeInfo ../../../../../rest/support/Query ../../../../../symbols/support/ElevationInfo ../snappingCandidateElevationAlignment ../snappingCandidateElevationFilter ../symbologySnappingCandidates ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(c,
a,I,C,k,f,t,r,p,q,B,N,w,h,D,d,l,x,G,J,R,v,E,z){I=function(L){function b(){var H=L.apply(this,arguments)||this;H._isInitializing=!0;H.remoteClient=null;H._whenSetup=f.createDeferred();H._elevationAligner=J.getSnappingCandidateElevationAligner();H._elevationFilter=R.getSnappingCandidateElevationFilter();H._symbologyCandidatesFetcher=v.getSymbologySnappingCandidatesFetcher();H._handles=new C;H._updatingHandles=new N.WatchUpdatingTracking;H._editsUpdatingHandles=new N.WatchUpdatingTracking;H._pendingApplyEdits=
new Map;H._alignPointsInFeatures=function(){var A=c._asyncToGenerator(function*(y,P){y=yield H.remoteClient.invoke("alignElevation",{points:y},{signal:P});f.throwIfAborted(P);return y});return function(y,P){return A.apply(this,arguments)}}();H._getSymbologyCandidates=function(){var A=c._asyncToGenerator(function*(y,P){y={candidates:y,spatialReference:H._spatialReference.toJSON()};y=yield H.remoteClient.invoke("getSymbologyCandidates",y,{signal:P});f.throwIfAborted(P);return y});return function(y,
P){return A.apply(this,arguments)}}();return H}c._inheritsLoose(b,L);var n=b.prototype;n.destroy=function(){this._featureFetcher.destroy();this._queryEngine.destroy();this._featureStore.clear();this._handles.destroy()};n.setup=function(){var H=c._asyncToGenerator(function*(A){const {geometryType:y,objectIdField:P,timeInfo:K,fields:U}=A.serviceInfo;var {hasZ:Z}=A;const V=w.fromJSON(A.spatialReference);this._spatialReference=V;this._featureStore=new h({...A.serviceInfo,hasZ:Z,hasM:!1});this._queryEngine=
new D.QueryEngine({spatialReference:A.spatialReference,featureStore:this._featureStore,geometryType:y,fields:U,hasZ:Z,hasM:!1,objectIdField:P,timeInfo:K?l.fromJSON(K):null});this._featureFetcher=new E.FeatureServiceTiledFetcher({store:new z.FeatureServiceTileStore({featureStore:this._featureStore}),url:A.serviceInfo.url,objectIdField:A.serviceInfo.objectIdField,globalIdField:A.serviceInfo.globalIdField,capabilities:A.serviceInfo.capabilities,spatialReference:V,sourceSpatialReference:w.fromJSON(A.serviceInfo.spatialReference)});
Z="3d"===A.configuration.viewType;this._elevationAligner=J.getSnappingCandidateElevationAligner(Z,{elevationInfo:k.isSome(A.elevationInfo)?G.fromJSON(A.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures,spatialReference:V});this._elevationFilter=R.getSnappingCandidateElevationFilter(Z);this._handles.add([t.watch(()=>this._featureFetcher.availability,ka=>this.emit("notify-availability",{availability:ka}),t.sync),t.watch(()=>this.updating,()=>this._notifyUpdating())]);this._whenSetup.resolve();
this._isInitializing=!1;return this.configure(A.configuration)});return function(A){return H.apply(this,arguments)}}();n.configure=function(){var H=c._asyncToGenerator(function*(A){yield this._updatingHandles.addPromise(this._whenSetup.promise);this._updateFeatureFetcherConfiguration(A);return{result:{}}});return function(A){return H.apply(this,arguments)}}();n.fetchCandidates=function(){var H=c._asyncToGenerator(function*(A,y){yield this._whenSetup.promise;f.throwIfAborted(y);A={point:A.point,distance:A.distance,
types:A.types,query:k.isSome(A.filter)?A.filter:{where:"1\x3d1"}};y=k.isSome(y)?y.signal:null;var P=yield this._queryEngine.executeQueryForSnapping(A,y);f.throwIfAborted(y);P=yield this._elevationAligner.alignCandidates(P.candidates,y);f.throwIfAborted(y);const K=yield this._symbologyCandidatesFetcher.fetch(P,y);f.throwIfAborted(y);y=0===K.length?P:P.concat(K);return{result:{candidates:this._elevationFilter.filter(A,y)}}});return function(A,y){return H.apply(this,arguments)}}();n.updateTiles=function(){var H=
c._asyncToGenerator(function*(A,y){yield this._updatingHandles.addPromise(this._whenSetup.promise);f.throwIfAborted(y);this._featureFetcher.tileSize=A.tileSize;this._featureFetcher.tilesOfInterest=A.tiles;this._featureFetcher.tileInfo=k.isSome(A.tileInfo)?d.fromJSON(A.tileInfo):null;return m});return function(A,y){return H.apply(this,arguments)}}();n.refresh=function(){var H=c._asyncToGenerator(function*(A,y){yield this._updatingHandles.addPromise(this._whenSetup.promise);f.throwIfAborted(y);this._featureFetcher.refresh();
return m});return function(A,y){return H.apply(this,arguments)}}();n.whenNotUpdating=function(){var H=c._asyncToGenerator(function*(A,y){yield this._updatingHandles.addPromise(this._whenSetup.promise);f.throwIfAborted(y);yield t.whenOnce(()=>!this.updatingExcludingEdits,y);f.throwIfAborted(y);return m});return function(A,y){return H.apply(this,arguments)}}();n.getDebugInfo=function(){var H=c._asyncToGenerator(function*(A,y){f.throwIfAborted(y);return{result:this._featureFetcher.debugInfo}});return function(A,
y){return H.apply(this,arguments)}}();n.beginApplyEdits=function(){var H=c._asyncToGenerator(function*(A,y){this._updatingHandles.addPromise(this._whenSetup.promise);f.throwIfAborted(y);y=f.createDeferred();this._pendingApplyEdits.set(A.id,y);this._featureFetcher.applyEdits(y.promise);this._editsUpdatingHandles.addPromise(y.promise);return m});return function(A,y){return H.apply(this,arguments)}}();n.endApplyEdits=function(){var H=c._asyncToGenerator(function*(A,y){const P=this._pendingApplyEdits.get(A.id);
P&&P.resolve(A.edits);f.throwIfAborted(y);return m});return function(A,y){return H.apply(this,arguments)}}();n.notifyElevationSourceChange=function(){var H=c._asyncToGenerator(function*(A,y){this._elevationAligner.notifyElevationSourceChange();return m});return function(A,y){return H.apply(this,arguments)}}();n.notifySymbologyChange=function(){var H=c._asyncToGenerator(function*(A,y){return m});return function(A,y){return H.apply(this,arguments)}}();n.setSymbologySnappingSupported=function(){var H=
c._asyncToGenerator(function*(A){this._symbologyCandidatesFetcher=v.getSymbologySnappingCandidatesFetcher(A,this._getSymbologyCandidates);return m});return function(A){return H.apply(this,arguments)}}();n._updateFeatureFetcherConfiguration=function(H){this._featureFetcher.filter=k.isSome(H.filter)?x.fromJSON(H.filter):null;this._featureFetcher.customParameters=H.customParameters};n._notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};c._createClass(b,[{key:"updating",
get:function(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}},{key:"updatingExcludingEdits",get:function(){return this._featureFetcher.updatingExcludingEdits||this._isInitializing||this._updatingHandles.updating}}]);return b}(I.EventedAccessor);a.__decorate([r.property({readOnly:!0})],I.prototype,"updating",null);a.__decorate([r.property({readOnly:!0})],I.prototype,"updatingExcludingEdits",null);a.__decorate([r.property()],I.prototype,"_isInitializing",
void 0);I=a.__decorate([B.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],I);const m={result:{}};return I});