// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2 ../../../chunks/vec2f64 ../../../chunks/vec3 ../../../chunks/vec3f64 ./Settings ./snappingUtils ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),function(k,l,A,B,F,C,D,y,q,g,M){function G(c,b){const e=g.projectPointToVerticalPlane(b,c.planeLike);c=c.getZ(b[0],b[1],b[2]);A.isSome(c)&&(e[2]=c);return e}function N(c,b){let e=[];if(v(c)){var {pointXYZ:a}=c;r(b)?e=g.intersectLineAndPoint(b.lineLike,
a):w(b)?e=g.intersectCircleAndPoint(b.centerXYZ,b.radius,a):t(b)?e=g.intersectVerticalPlaneAndPoint(b.planeLike,a):u(b)&&(e=x(b,c))}else if(r(c))({lineLike:a}=c),v(b)?e=g.intersectLineAndPoint(a,b.pointXYZ):r(b)?e=g.intersectLineLike(a,b.lineLike):w(b)?e=g.intersectLineLikeAndCircle(a,b.centerXYZ,b.radius):t(b)?e=g.intersectVerticalPlaneAndLineLike(b.planeLike,a):u(b)&&(e=x(b,c));else if(w(c)){const {centerXYZ:d,radius:f}=c;r(b)?e=g.intersectLineLikeAndCircle(b.lineLike,d,f):v(b)?e=g.intersectCircleAndPoint(d,
f,b.pointXYZ):t(b)?e=g.intersectVerticalPlaneAndCircle(b.planeLike,d,f):u(b)&&(e=x(b,c))}else if(t(c)){const {planeLike:d,coordinateHelper:f}=c;if(t(b))return g.intersectVerticalPlane(d,b.planeLike).map(h=>new H(f,f.fromXYZ(h),c,b));v(b)?e=g.intersectVerticalPlaneAndPoint(d,b.pointXYZ):r(b)?e=g.intersectVerticalPlaneAndLineLike(d,b.lineLike):w(b)?e=g.intersectVerticalPlaneAndCircle(d,b.centerXYZ,b.radius):u(b)&&(e=x(b,c))}else u(c)&&(e=x(c,b));return O(e,c,b)}function x(c,b){const {planeLike:e,getZ:a}=
c,d=[];if(v(b))c.addIfOnTheGround(d,g.intersectVerticalPlaneAndPoint(e,b.pointXYZ));else if(r(b))c.addIfOnTheGround(d,g.intersectVerticalPlaneAndLineLike(e,b.lineLike));else if(w(b))c.addIfOnTheGround(d,g.intersectVerticalPlaneAndCircle(e,b.centerXYZ,b.radius));else if(t(b)||u(b))for(const [f,h]of g.intersectVerticalPlane(e,b.planeLike))c=a(f,h,0),A.isSome(c)&&d.push(D.fromValues(f,h,c));return d}function O(c,b,e){const a=b.coordinateHelper;return c.map(d=>new I(a,a.fromXYZ(d),b,e))}function v(c){return c instanceof
J}function r(c){return c instanceof E}function w(c){return c instanceof K}function t(c){return c instanceof z}function u(c){return c instanceof L}let p=function(){function c(b){this.coordinateHelper=b}c.prototype.intersect=function(b){return N(this,b)};return c}(),J=function(c){function b(a,d){var f=c.call(this,a)||this;f.point=d;f.pointXYZ=a.toXYZ(d);return f}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return v(a)&&q.objectEqual(this.point,a.point)};e.check=function(a){a=this.coordinateHelper.toXYZ(a,
n);return C.squaredDistance(a,this.pointXYZ)<y.defaults.pointThreshold};e.closestTo=function(){return this.coordinateHelper.clone(this.point)};return b}(p),E=function(c){function b(a,d,f,h){var m=c.call(this,a)||this;m.start=d;m.end=f;m.type=h;m.startXYZ=a.toXYZ(d);m.endXYZ=a.toXYZ(f);m.lineLike={start:m.startXYZ,end:m.endXYZ,type:m.type};return m}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return r(a)&&this.type===a.type&&q.objectEqual(this.start,a.start)&&q.objectEqual(this.end,
a.end)};e.check=function(a){a=this.coordinateHelper.toXYZ(a,n);return g.pointToLineLikeDistance(this.lineLike,a)<y.defaults.pointOnLineThreshold};e.closestTo=function(a){const d=this.coordinateHelper;a=d.toXYZ(a,n);a=g.projectPointToLineLike(a,this.lineLike);return d.fromXYZ(a)};return b}(p),P=function(c){function b(e,a,d){return c.call(this,e,a,d,M.LineType.LINE)||this}l._inheritsLoose(b,c);return b}(E),I=function(c){function b(a,d,f,h){a=c.call(this,a)||this;a.intersection=d;a.first=f;a.second=
h;return a}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return a instanceof b&&this.first.equals(a.first)&&this.second.equals(a.second)};e.check=function(){return!1};e.closestTo=function(){return this.coordinateHelper.clone(this.intersection)};return b}(p),H=function(c){function b(a,d,f,h){a=c.call(this,a)||this;a.basePoint=d;a.first=f;a.second=h;return a}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return a instanceof b&&this.first.equals(a.first)&&this.second.equals(a.second)};
e.check=function(){return!1};e.closestTo=function(a){var d=this.basePoint;const f=this.coordinateHelper;a=f.toXYZ(a,n);d=C.set(Q,d[0],d[1],a[2]);return f.fromXYZ(d)};return b}(p),K=function(c){function b(a,d,f){var h=c.call(this,a)||this;h.center=d;h.radius=f;h.centerXYZ=a.toXYZ(d);return h}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return w(a)&&this.center[0]===a.center[0]&&this.center[1]===a.center[1]&&this.radius===a.radius};e.check=function(){return!1};e.closestTo=function(a){const d=
this.coordinateHelper;var f=d.toXYZ(a,n);f=g.projectPointToCircle(f,this.centerXYZ,this.radius);f[2]=d.getZ(a,this.centerXYZ[2]);return d.fromXYZ(f)};return b}(p),z=function(c){function b(a,d,f,h){a=c.call(this,a)||this;a.start=d;a.end=f;a.type=h;a.planeLike={start:d,end:f,type:h};return a}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return t(a)&&this.type===a.type&&q.objectEqual(this.start,a.start)&&q.objectEqual(this.end,a.end)};e.check=function(a){a=this.coordinateHelper.toXYZ(a,
n);return g.pointToVerticalPlaneDistance(a,this.planeLike)<y.defaults.pointOnLineThreshold};e.closestTo=function(a){const d=this.coordinateHelper;a=d.toXYZ(a,n);a=g.projectPointToVerticalPlane(a,this.planeLike);return d.fromXYZ(a)};e.closestEndTo=function(a){const {start:d,end:f}=this;return 0<Math.sign(B.dot(B.subtract(R,f,d),B.subtract(S,a,d)))?f:d};return b}(p),T=function(c){function b(e,a,d){return c.call(this,e,a,d,g.VerticalPlaneType.HALF_PLANE)||this}l._inheritsLoose(b,c);return b}(z),U=function(c){function b(e,
a,d){return c.call(this,e,a,d,g.VerticalPlaneType.PLANE)||this}l._inheritsLoose(b,c);return b}(z),L=function(c){function b(a,d,f,h){a=c.call(this,a)||this;a.start=d;a.end=f;a.getZ=h;a.planeLike={start:d,end:f,type:g.VerticalPlaneType.HALF_PLANE};return a}l._inheritsLoose(b,c);var e=b.prototype;e.equals=function(a){return u(a)&&q.objectEqual(this.start,a.start)&&q.objectEqual(this.end,a.end)&&this.getZ===a.getZ};e.check=function(a){a=this.coordinateHelper.toXYZ(a,n);const d=G(this,a);return C.squaredDistance(a,
d)<y.defaults.pointThreshold};e.closestTo=function(a){const d=this.coordinateHelper;a=G(this,d.toXYZ(a,n));return d.fromXYZ(a)};e.addIfOnTheGround=function(a,d){for(const f of d)d=this.getZ(f[0],f[1],f[2]),A.isSome(d)&&Math.abs(f[2]-d)<g.epsilon&&(f[2]=d,a.push(f))};return b}(p);const n=D.create(),Q=D.create(),R=F.create(),S=F.create();k.DrapedLineConstraint=L;k.IntersectionConstraint=I;k.LineConstraint=P;k.LineLikeConstraint=E;k.PlanarCircleConstraint=K;k.PointConstraint=J;k.SnappingConstraint=p;
k.VerticalHalfPlaneConstraint=T;k.VerticalLineIntersectionConstraint=H;k.VerticalPlaneConstraint=U;k.VerticalPlaneLikeConstraint=z;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});