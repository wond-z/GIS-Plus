// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/maybe","../EditGeometry"],function(g,a,e){let k=function(){function h(d,b,c){this._editGeometry=d;this._component=b;this._pos=c;this._right=this._left=this._originalEdge=this._addedVertex=null}var f=h.prototype;f.apply=function(){let d="redo";a.isNone(this._addedVertex)&&(d="apply",this._addedVertex=new e.Vertex(this._component));const b=this._component.getLastVertex();if(a.isNone(b))this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,
this._addedVertex.index=0;else{let c=null;b.rightEdge&&(this._originalEdge=b.rightEdge,c=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1));this._component.vertices.push(this._addedVertex);this._addedVertex.pos=this._pos;a.isNone(this._left)&&(this._left=new e.Edge(this._component,b,this._addedVertex));this._component.edges.push(this._left);b.rightEdge=this._left;a.isSome(this._originalEdge)&&a.isSome(c)&&(a.isNone(this._right)&&(this._right=
new e.Edge(this._component,this._addedVertex,c)),this._component.edges.push(this._right),c.leftEdge=this._right);this._component.updateVertexIndex(this._addedVertex,b.index+1)}this._editGeometry.notifyChanges({operation:d,addedVertices:[this._addedVertex]})};f.undo=function(){a.isNone(this._addedVertex)||(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),a.isSome(this._left)&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=
null),a.isSome(this._right)&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),a.isSome(this._originalEdge)&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),a.isSome(this._left)?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),
this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))};f.accumulate=function(){return!1};return h}();g.AppendVertex=k;Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});