// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Error","../../core/maybe","./enums"],function(l,f,t,a){l.loadHeatmapTextureConfiguration=function(b,m){const {textureFloat:d,colorBufferFloat:e}=b.capabilities,n=d?.textureFloat,h=d?.textureFloatLinear;var g=d?.textureHalfFloat;const k=d?.textureHalfFloatLinear,u=d?.HALF_FLOAT,p=e?.textureFloat;var c=e?.textureHalfFloat;const q=e?.floatBlend;({floatBufferBlendWorking:b}=t.unwrapOrThrow(b.driverTest));if(!n&&!g)throw new f("heatmap:missing-texture-float","HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.");
if(!p&&!c)throw new f("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(q&&b||c))throw new f("heatmap:missing-float-blend",`HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float.${b?"":" This device claims support for EXT_float_blend, but does not actually support it."}`);g=g&&c;c=!!e?.R32F;const r=!!e?.R16F;if(n&&p&&q&&b&&(h||!k))return h||
m.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),{dataType:a.PixelType.FLOAT,samplingMode:h?a.TextureSamplingMode.LINEAR:a.TextureSamplingMode.NEAREST,pixelFormat:c?a.PixelFormat.RED:a.PixelFormat.RGBA,internalFormat:c?a.SizedPixelFormat.R32F:a.PixelFormat.RGBA};if(g)return k||m.warnOnce("Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced."),{dataType:u,samplingMode:k?a.TextureSamplingMode.LINEAR:a.TextureSamplingMode.NEAREST,
pixelFormat:r?a.PixelFormat.RED:a.PixelFormat.RGBA,internalFormat:r?a.SizedPixelFormat.R16F:a.PixelFormat.RGBA};throw new f("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.");};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});