// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../chunks/vec2f64","./context-util","./enums","./Texture"],function(h,t,u,b,q){h.createColormapTexture=function(a,d){return new q.Texture(a,{width:d.length/4,height:1,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:b.PixelFormat.RGBA,dataType:b.PixelType.UNSIGNED_BYTE,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1},d)};h.createRasterTexture=function(a,d,g="nearest",c=!1){const f=(c=!(c&&"u8"===d.pixelType))?
b.PixelType.FLOAT:b.PixelType.UNSIGNED_BYTE,e=null==d.pixels||0===d.pixels.length?null:c?d.getAsRGBAFloat():d.getAsRGBA();return new q.Texture(a,{width:d.width,height:d.height,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:a.type===u.ContextType.WEBGL2&&c?b.SizedPixelFormat.RGBA32F:b.PixelFormat.RGBA,samplingMode:!a.capabilities.textureFloat?.textureFloatLinear||"bilinear"!==g&&"cubic"!==g?b.TextureSamplingMode.NEAREST:b.TextureSamplingMode.LINEAR,dataType:f,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,
flipped:!1},e)};h.createTransformTexture=function(a,d){const {spacing:g,offsets:c,coefficients:f,size:[e,p]}=d;var l=1<g[0];d={width:l?4*e:e,height:p,target:b.TextureType.TEXTURE_2D,pixelFormat:b.PixelFormat.RGBA,internalFormat:a.type===u.ContextType.WEBGL2?b.SizedPixelFormat.RGBA32F:b.PixelFormat.RGBA,dataType:b.PixelType.FLOAT,samplingMode:b.TextureSamplingMode.NEAREST,wrapMode:b.TextureWrapMode.CLAMP_TO_EDGE,flipped:!1};const m=new Float32Array(l?e*p*16:2*c.length);if(l)for(let k=0,n=0;k<f.length;k++)m[n++]=
f[k],2===k%3&&(m[n++]=1);else for(l=0;l<p;l++)for(let k=0;k<e;k++){const n=4*(l*e+k),r=2*(k*p+l);m[n]=c[r];m[n+1]=c[r+1];m[n+3]=-1===c[r]?0:1}return new q.Texture(a,d,m)};h.getBasicGridUniforms=function(a,d){return{u_scale:a,u_offset:d}};h.getColormapUniforms=function(a,d){return{u_colormapOffset:d||0,u_colormapMaxIndex:a?a.length/4-1:0}};h.getCommonUniforms=function(a,d,g,c=1,f=!0){return{u_flipY:f,u_applyTransform:a?!0:!1,u_opacity:c,u_transformSpacing:a?a.spacing:t.ZEROS,u_transformGridSize:a?
a.size:t.ZEROS,u_targetImageSize:d,u_srcImageSize:g}};h.getShadedReliefUniforms=function(a){return{u_hillshadeType:a.hillshadeType,u_sinZcosAs:a.sinZcosAs,u_sinZsinAs:a.sinZsinAs,u_cosZs:a.cosZs,u_weights:a.weights,u_factor:a.factor,u_minValue:a.minValue,u_maxValue:a.maxValue}};h.getStretchUniforms=function(a){return{u_bandCount:a.bandCount,u_minOutput:a.outMin,u_maxOutput:a.outMax,u_minCutOff:a.minCutOff,u_maxCutOff:a.maxCutOff,u_factor:a.factor,u_useGamma:a.useGamma,u_gamma:a.gamma,u_gammaCorrection:a.gammaCorrection}};
h.getUniformLocationInfos=function(a,d){a=a.gl;d=d.glName;const g=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),c=new Map;let f;for(let e=0;e<g;e++)(f=a.getActiveUniform(d,e))&&c.set(f.name,{location:a.getUniformLocation(d,f.name),info:f});return c};h.setTextures=function(a,d,g,c){g.length===c.length&&(c.some(f=>null==f)||g.some(f=>null==f)||g.forEach((f,e)=>{d.setUniform1i(f,e);a.bindTexture(c[e],e)}))};h.setUniforms=function(a,d,g){Object.keys(g).forEach(c=>{var f=d.get(c)||d.get(c+"[0]");if(f){var e=
g[c];if(null!==f&&null!=e)switch({info:f}=f,f.type){case b.UniformType.FLOAT:1<f.size?a.setUniform1fv(c,e):a.setUniform1f(c,e);break;case b.UniformType.FLOAT_VEC2:a.setUniform2fv(c,e);break;case b.UniformType.FLOAT_VEC3:a.setUniform3fv(c,e);break;case b.UniformType.FLOAT_VEC4:a.setUniform4fv(c,e);break;case b.UniformType.FLOAT_MAT3:a.setUniformMatrix3fv(c,e);break;case b.UniformType.FLOAT_MAT4:a.setUniformMatrix4fv(c,e);break;case b.UniformType.INT:1<f.size?a.setUniform1iv(c,e):a.setUniform1i(c,e);
break;case b.UniformType.BOOL:a.setUniform1i(c,e?1:0);break;case b.UniformType.INT_VEC2:case b.UniformType.BOOL_VEC2:a.setUniform2iv(c,e);break;case b.UniformType.INT_VEC3:case b.UniformType.BOOL_VEC3:a.setUniform3iv(c,e);break;case b.UniformType.INT_VEC4:case b.UniformType.BOOL_VEC4:a.setUniform4iv(c,e)}}})};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});