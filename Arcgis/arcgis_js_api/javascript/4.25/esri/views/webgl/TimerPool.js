// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../core/maybe","./capabilities/DisjointTimerQuery"],function(g,b,h){let m=function(){function c(a,d){this._timer=a;this._queryPool=[];this._queryResults=new Map;this._currentQuery=null;d.forEach(f=>{const k=this._timer.createQuery(),l=this._timer.createQuery();this._queryPool.push(k,l);this._queryResults.set(f,null)})}var e=c.prototype;e.start=function(){h.hasRunningElapsedTimer||(this._currentQuery=this._queryPool.pop(),b.isNone(this._currentQuery)||(this._timer.disjoint(),
this._timer.beginTimeElapsed(this._currentQuery)))};e.stop=function(a){if(this._timer.disjoint()||b.isNone(this._currentQuery)||!this._queryResults.has(a))return this.abort(),null;this._timer.endTimeElapsed();const d=this._queryResults.get(a);if(b.isNone(d))return this._queryResults.set(a,this._currentQuery),this._currentQuery=null;if(!this._timer.resultAvailable(d))return this._queryPool.unshift(this._currentQuery),this._currentQuery=null;const f=this._timer.getResult(d)/1E6;this._queryPool.unshift(d);
this._queryResults.set(a,this._currentQuery);this._currentQuery=null;return f};e.abort=function(){b.isSome(this._currentQuery)&&(this._timer.deleteQuery(this._currentQuery),this._queryPool.unshift(this._timer.createQuery()),this._currentQuery=null)};e.dispose=function(){b.isSome(this._currentQuery)&&this._timer.deleteQuery(this._currentQuery);this._queryPool.forEach(a=>{this._timer.deleteQuery(a)});this._queryResults.forEach(a=>{b.isNone(a)||this._timer.deleteQuery(a)})};return c}();g.createElapsedTimerPool=
function(c,e){c=c.capabilities.disjointTimerQuery;return b.isNone(c)?null:new m(c,e)};Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});