// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(q,k,r,l,g,h){l=function(m){function n(a=g.DefaultParameters.maximumDoubleClickDelay,c=g.DefaultParameters.maximumDoubleClickDistance,d=g.DefaultParameters.maximumDoubleTouchDelay,e=g.DefaultParameters.maximumDoubleTouchDistance,p=r.clock){var b=m.call(this,!1)||this;b._maximumDoubleClickDelay=a;b._maximumDoubleClickDistance=c;b._maximumDoubleTouchDelay=
d;b._maximumDoubleTouchDistance=e;b._clock=p;b._pointerState=new Map;b._immediateDoubleClick=b.registerOutgoing("immediate-double-click");b.registerIncoming("pointer-down",b._handlePointerDown.bind(k._assertThisInitialized(b)));b.registerIncoming("pointer-up",b._handlePointerUp.bind(k._assertThisInitialized(b)));return b}k._inheritsLoose(n,m);var f=n.prototype;f.onUninstall=function(){this._pointerState.forEach(a=>{a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});m.prototype.onUninstall.call(this)};
f._handlePointerDown=function(a){a=a.data;const c=h.getPointerId(a);this._pointerState.has(c)||(this._pointerState.set(c,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};f._handlePointerUp=function(a){const c=a.data;var d=h.getPointerId(c);if((d=this._pointerState.get(d))&&d.downButton===c.native.button){const e=d.immediateDoubleClick;if(e){e.timeoutHandle.remove();const p="touch"===a.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;
h.manhattanDistance(e,a.data)>p?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,e.modifiers),this._removeState(c))}else this._startImmediateDoubleClick(a,d)}};f._startImmediateDoubleClick=function(a,c){c.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(a.data),"touch"===a.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};f._removeState=function(a){const c=
h.getPointerId(a);this._pointerState.delete(c);this.stopCapturingPointer(a.native);this.refreshHasPendingInputs()};return n}(l.InputHandler);q.ImmediateDoubleClick=l;Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});