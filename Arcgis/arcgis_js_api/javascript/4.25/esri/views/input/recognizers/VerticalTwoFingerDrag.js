// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../DragEventSeparator","../InputHandler"],function(t,u,w,m){m=function(v){function l(c=20,a=40){var b=v.call(this,!1)||this;b._threshold=c;b._maxDelta=a;b._state="ready";b._emittedArtificalEnd2=!1;b._vertical=b.registerOutgoing("vertical-two-finger-drag");b._artificalDrag=b.registerOutgoing("drag");b._dragEventSeparator=new w.DragEventSeparator({start:(e,d)=>b._observeStart(e,d),update:(e,d,f)=>b._observeUpdate(e,d,f),end:(e,d)=>b._observeEnd(d)});
b.registerIncoming("drag",e=>b._dragEventSeparator.handle(e));return b}u._inheritsLoose(l,v);var g=l.prototype;g._observeStart=function(c,a){1===c&&this._emittedArtificalEnd2&&(this._emittedArtificalEnd2=!1,this._artificalDrag.emit({action:"start",button:a.data.button,buttons:a.data.buttons,pointerType:a.data.pointerType,timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),a.stopPropagation());this._state=2===c?"ready":
"failed"};g._observeUpdate=function(c,a,b){"failed"!==this._state&&2===c&&("active"===this._state?(this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"update"}),a.stopPropagation()):this._checkMovementWithinLimits(a.data,b.data)?this._checkVerticalThresholdReached(a.data,b.data)&&(this._state="active",this._emittedArtificalEnd2=!0,this._thresholdReachedCenter=a.data.center,this._artificalDrag.emit({action:"end",button:a.data.button,buttons:a.data.buttons,pointerType:a.data.pointerType,
timestamp:a.data.timestamp,pointers:a.data.pointers,pointer:a.data.pointer,angle:a.data.angle,radius:a.data.radius,center:a.data.center}),this._vertical.emit({delta:a.data.center.y-this._thresholdReachedCenter.y,action:"begin"}),a.stopPropagation()):this._state="failed")};g._observeEnd=function(c){"active"===this._state&&(this._vertical.emit({delta:c.data.center.y-this._thresholdReachedCenter.y,action:"end"}),this._state="ready",c.stopPropagation())};g._checkMovementWithinLimits=function(c,a){let b=
-Infinity,e=Infinity,d=-Infinity,f=Infinity;for(const {x:h,y:k}of a.pointers.values())b=Math.max(b,h),e=Math.min(e,h),d=Math.max(d,k),f=Math.min(f,k);let n=-Infinity,p=Infinity,q=-Infinity,r=Infinity;for(const {x:h,y:k}of c.pointers.values())n=Math.max(n,h),p=Math.min(p,h),q=Math.max(q,k),r=Math.min(r,k);return Math.abs(c.center.x-a.center.x)<this._threshold&&Math.abs(n-p-(b-e))<=this._maxDelta&&Math.abs(q-r-(d-f))<=this._maxDelta};g._checkVerticalThresholdReached=function(c,a){let b=Math.abs(c.center.y-
a.center.y);c.pointers.forEach((e,d)=>{d=a.pointers.get(d);b=Math.min(b,Math.abs(e.y-d.y))});return b>=this._threshold};u._createClass(l,[{key:"failed",get:function(){return"failed"===this._state}}]);return l}(m.InputHandler);t.VerticalTwoFingerDrag=m;Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});