// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/vec3 ../../chunks/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),function(k,p,l,q,e,m){let n=function(f){function c(a,b,d,g,h){a=f.call(this,a,b,d)||this;a._sceneVelocity=g;a.direction=h;return a}p._inheritsLoose(c,f);c.prototype.value=function(a){return f.prototype.valueFromInitialVelocity.call(this,this._sceneVelocity,a)};return c}(m.Momentum);m=function(){function f(a=300,b=12,d=.84){this._minimumInitialVelocity=a;this._stopVelocity=
b;this._friction=d;this.enabled=!0;this._time=new e.FilteredFiniteDifference(.6);this._screen=[new e.FilteredFiniteDifference(.4),new e.FilteredFiniteDifference(.4)];this._scene=[new e.FilteredFiniteDifference(.6),new e.FilteredFiniteDifference(.6),new e.FilteredFiniteDifference(.6)];this._tmpDirection=q.create()}var c=f.prototype;c.add=function(a,b,d){!this.enabled||this._time.hasLastValue()&&.015>this._time.computeDelta(d)||(this._screen[0].update(a[0]),this._screen[1].update(a[1]),this._scene[0].update(b[0]),
this._scene[1].update(b[1]),this._scene[2].update(b[2]),this._time.update(d))};c.reset=function(){this._screen[0].reset();this._screen[1].reset();this._scene[0].reset();this._scene[1].reset();this._scene[2].reset();this._time.reset()};c.evaluateMomentum=function(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;var a=this._screen[0].filteredDelta,b=this._screen[1].filteredDelta;a=null==a||null==b?0:Math.sqrt(a*a+b*b);b=this._time.filteredDelta;a=null==
b||null==a?0:a/b;return Math.abs(a)<this._minimumInitialVelocity?null:this.createMomentum(a,this._stopVelocity,this._friction)};c.createMomentum=function(a,b,d){l.set(this._tmpDirection,this._scene[0].filteredDelta??0,this._scene[1].filteredDelta??0,this._scene[2].filteredDelta??0);const g=l.length(this._tmpDirection);0<g&&l.scale(this._tmpDirection,this._tmpDirection,1/g);const h=this._time.filteredDelta;return new n(a,b,d,null==h?0:g/h,this._tmpDirection)};return f}();k.PanPlanarMomentum=n;k.PanPlanarMomentumEstimator=
m;Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});