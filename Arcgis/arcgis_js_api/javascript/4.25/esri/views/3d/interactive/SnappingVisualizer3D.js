// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../Color ../../../core/has ../../../core/handleUtils ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Point ./visualElements/ExtendedLineVisualElement ./visualElements/ParallelLineVisualElement ./visualElements/PointVisualElement ./visualElements/RightAngleQuadVisualElement ../webgl-engine/lib/Material ../../interactive/snapping/Settings ../../interactive/snapping/SnappingDomain ../../interactive/snapping/snappingUtils ../../interactive/snapping/SnappingVisualizer ../../interactive/support/viewUtils".split(" "),
function(u,C,k,v,n,l,D,w,E,x,F,y,G,p,e,H,q,I,m){v=function(z){function r(){return z.apply(this,arguments)||this}C._inheritsLoose(r,z);var h=r.prototype;h.visualizeIntersectionPoint=function(a,b){const {coordinateHelper:c,view:f}=b;return n.destroyHandle(new y.PointVisualElement({view:f,primitive:"circle",geometry:c.vectorToPoint(a.intersectionPoint),elevationInfo:l.unwrapOr(a.elevationInfo,b.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:k.toUnitRGBA(e.defaults.orange),pixelSnappingEnabled:!1}))};
h.visualizePoint=function(a,b){const {view:c,coordinateHelper:f}=b,d=this._alignPoint(a.point,a.domain,b);return n.destroyHandle(new y.PointVisualElement({view:c,primitive:"circle",geometry:f.vectorToPoint(d),elevationInfo:this._hintElevationInfo(a,b),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:k.toUnitRGBA(e.defaults.orange),pixelSnappingEnabled:!1}))};h.visualizeLine=function(a,b){const {view:c,coordinateHelper:f}=b,d=this._alignPoint(a.lineStart,a.domain,b),g=this._alignPoint(a.lineEnd,
a.domain,b);return n.destroyHandle(this._createLineSegmentHintFromMap(a.type,d,g,f,this._hintElevationInfo(a,b),c,a.fadeLeft,a.fadeRight))};h.visualizeParallelSign=function(a,b){const {view:c,coordinateHelper:f}=b;var d=this._hintElevationInfo(a,b),g=this._alignPoint(a.lineStart,a.domain,b);a=this._alignPoint(a.lineEnd,a.domain,b);g=m.anyMapPointToRender(g,f,d,c);d=m.anyMapPointToRender(a,f,d,c);d=D.lerp(d,g,d,.5);a=new F.ParallelLineVisualElement({view:c,attached:!1,offset:e.defaults.parallelLineHintOffset,
length:e.defaults.parallelLineHintLength,width:e.defaults.parallelLineHintWidth,color:k.toUnitRGBA(e.defaults.orange),location:d,renderOccluded:p.RenderOccludedFlag.Opaque});a.setDirectionFromPoints(g,d);a.attached=!0;return n.destroyHandle(a)};h.visualizeRightAngleQuad=function(a,b){const {view:c,coordinateHelper:f}=b,d=this._hintElevationInfo(a,b),g=this._alignPoint(a.previousVertex,a.domain,b),t=this._alignPoint(a.centerVertex,a.domain,b);a=this._alignPoint(a.nextVertex,a.domain,b);return n.destroyHandle(new G.RightAngleQuadVisualElement({view:c,
attached:!0,color:k.toUnitRGBA(e.defaults.orange),renderOccluded:p.RenderOccludedFlag.Transparent,outlineRenderOccluded:p.RenderOccludedFlag.Opaque,outlineColor:k.toUnitRGBA(e.defaults.orange),outlineSize:e.defaults.rightAngleHintOutlineSize,size:e.defaults.rightAngleHintSize,geometry:{previous:m.anyMapPointToRender(g,f,d,c),center:m.anyMapPointToRender(t,f,d,c),next:m.anyMapPointToRender(a,f,d,c)}}))};h._createLineSegmentHintFromMap=function(a,b,c,f,d,g,t=!0,J=!0){const A=w.create(),B=w.create();
m.anyMapPointsToRenderWithEqualRelativeZ(b,c,f,d,g,A,B);return this._createLineSegmentHint(a,g,A,B,t,J)};h._createLineSegmentHint=function(a,b,c,f,d=!0,g=!0){b=new x.ExtendedLineVisualElement({view:b,extensionType:x.ExtensionType.FADED,start:c,end:f,color:k.toUnitRGBA(e.defaults.orange),renderOccluded:p.RenderOccludedFlag.Opaque});switch(a){case q.LineSegmentHintType.TARGET:b.width=e.defaults.lineHintWidthTarget;b.fadedExtensions={start:0,end:e.defaults.lineHintFadedExtensions};break;case q.LineSegmentHintType.REFERENCE_EXTENSION:b.width=
e.defaults.lineHintWidthReference;b.fadedExtensions={start:0,end:0};break;case q.LineSegmentHintType.REFERENCE:b.width=e.defaults.lineHintWidthReference,b.fadedExtensions={start:d?e.defaults.lineHintFadedExtensions:0,end:g?e.defaults.lineHintFadedExtensions:0}}b.attached=!0;return b};h._alignPoint=function(a,b,c){b=this._getSelfSnappingZ(b,c);if(l.isNone(b))return a;c=c.coordinateHelper;a=c.vectorToPoint(a,K);a.z=b;return c.pointToVector(a)};h._hintElevationInfo=function(a,b){return l.isSome(this._getSelfSnappingZ(a.domain,
b))?l.unwrap(b.selfSnappingZ).elevationInfo:l.unwrapOr(a.elevationInfo,b.elevationInfo)};h._getSelfSnappingZ=function(a,{selfSnappingZ:b}){return a===H.SnappingDomain.SELF&&l.isSome(b)?b.value:null};return r}(I.SnappingVisualizer);const K=new E;u.SnappingVisualizer3D=v;Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});