// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/maybe ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../isSupportedGraphicUtils ./isSupportedGraphic ./ReshapeOperation ../../../../interactive/InteractiveToolBase ../../../../interactive/sketch/SketchLabelOptions ../../../../interactive/sketch/SketchTooltipOptions".split(" "),
function(b,l,c,r,t,g,h,d,y,z,u,v,m,w,x,n,p){b.GraphicReshapeTool=function(q){function k(a){a=q.call(this,a)||this;a._handles=new t;a._internalGeometryUpdate=!1;a.enableZShape=!0;a.enableZVertex=!0;a.enableMoveGraphic=!0;a.enableMidpoints=!0;a.enableEdgeOffset=!1;a.type="reshape-3d";a.labelOptions=new n;a.tooltipOptions=new p;a.snappingManager=null;a.automaticManipulatorSelection=!1;return a}l._inheritsLoose(k,q);var f=k.prototype;f.initialize=function(){const a=this._reshapeOperation=new w.ReshapeOperation({tool:this});
this.addHandles([a.on("reshape",e=>{"reshape"===e.type&&this._onReshapeGeometryChanged();this.emit("reshape",e)}),a.on("move",e=>{"move"===e.type&&this._onReshapeGeometryChanged();this.emit("move",e)}),a.on("vertex-add",e=>{this._onReshapeGeometryChanged();this.emit("vertex-add",e)}),a.on("vertex-remove",e=>{this._onReshapeGeometryChanged();this.emit("vertex-remove",e)}),a.on("immediate-click",e=>this.emit("immediate-click",e)),this.view.on("pointer-down",["Shift"],e=>{e.stopPropagation()}),h.watch(()=>
this.graphic,()=>this._updateGraphic(),h.syncAndInitial)]);this.finishToolCreation()};f.destroy=function(){this._handles=g.destroyMaybe(this._handles);this._reshapeOperation=g.destroyMaybe(this._reshapeOperation)};f._updateGeometry=function(){const a=m.geometryOfSupportedGraphic(this.graphic);this._reshapeOperation.inputGeometry=g.isSome(a)?a.clone():null};f._updateGraphic=function(){this._handles.remove("onGraphicGeometryChange");this._updateGeometry();if(m.isSupportedGraphic(this.graphic)===v.SupportedGraphicResult.SUPPORTED){var a=
h.watch(()=>this.graphic?.geometry,()=>{!1===this._internalGeometryUpdate&&this._updateGeometry()},h.sync);this._handles.add(a,"onGraphicGeometryChange")}};f.onManipulatorSelectionChanged=function(){if(this._reshapeOperation)this._reshapeOperation.onManipulatorSelectionChanged()};f._updateGeometryInternally=function(a){this._internalGeometryUpdate=!0;this.graphic.geometry=a;this._internalGeometryUpdate=!1};f._onReshapeGeometryChanged=function(){g.isNone(this.graphic)||this._updateGeometryInternally(this._reshapeOperation.outputGeometry.clone())};
f.undo=function(){g.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();g.isSome(this._reshapeOperation.undo())&&this._updateGeometryInternally(this._reshapeOperation.outputGeometry.clone())};f.redo=function(){g.isSome(this.snappingManager)&&this.snappingManager.doneSnapping();g.isSome(this._reshapeOperation.redo())&&this._updateGeometryInternally(this._reshapeOperation.outputGeometry.clone())};f.onInputEvent=function(a){"key-down"!==a.type||"Delete"!==a.key&&"Backspace"!==a.key||this._reshapeOperation.removeSelectedVertices()};
f.reset=function(){};l._createClass(k,[{key:"updating",get:function(){return this._reshapeOperation?.updating??!1}},{key:"canUndo",get:function(){return this._reshapeOperation.canUndo??!1}},{key:"canRedo",get:function(){return this._reshapeOperation.canRedo??!1}},{key:"test",get:function(){return{snappingManager:this.snappingManager,reshapeOperation:this._reshapeOperation}}}]);return k}(r.EventedMixin(x.InteractiveToolBase));c.__decorate([d.property()],b.GraphicReshapeTool.prototype,"_reshapeOperation",
void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"view",void 0);c.__decorate([d.property({constructOnly:!0})],b.GraphicReshapeTool.prototype,"graphic",void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableZShape",void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableZVertex",void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],
b.GraphicReshapeTool.prototype,"enableMoveGraphic",void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableMidpoints",void 0);c.__decorate([d.property({constructOnly:!0,nonNullable:!0})],b.GraphicReshapeTool.prototype,"enableEdgeOffset",void 0);c.__decorate([d.property()],b.GraphicReshapeTool.prototype,"type",void 0);c.__decorate([d.property({constructOnly:!0,type:n})],b.GraphicReshapeTool.prototype,"labelOptions",void 0);c.__decorate([d.property({constructOnly:!0,
type:p})],b.GraphicReshapeTool.prototype,"tooltipOptions",void 0);c.__decorate([d.property({constructOnly:!0})],b.GraphicReshapeTool.prototype,"snappingManager",void 0);c.__decorate([d.property()],b.GraphicReshapeTool.prototype,"updating",null);c.__decorate([d.property()],b.GraphicReshapeTool.prototype,"automaticManipulatorSelection",void 0);b.GraphicReshapeTool=c.__decorate([u.subclass("esri.views.3d.interactive.editingTools.graphicReshape3D.GraphicReshapeTool")],b.GraphicReshapeTool);Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});