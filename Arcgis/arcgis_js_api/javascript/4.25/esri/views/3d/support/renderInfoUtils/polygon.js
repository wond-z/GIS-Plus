// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry/projection ../../../../geometry/support/triangulationUtils ../../layers/graphics/elevationAlignmentUtils ../../terrain/OverlayRenderer".split(" "),function(h,r,t,k,u,v){function l(b,c,a){return b.filter(({count:f})=>1<f).map(({index:f,count:d})=>{const e=3*f,g=e+3*d;return a?new w(f,d,c.subarray(e,g),a.subarray(e,g)):new m(f,d,c.subarray(e,g))})}function n(b,c,a){const f=[];for(const {index:d,count:e,holeIndices:g,pathLengths:x}of b){if(1>=
e)continue;b=3*d;const p=b+3*e,z=g.map(y=>y-d);f.push({index:d,count:e,holeIndices:z,pathLengths:x,position:c.subarray(b,p),mapPosition:a?a.subarray(b,p):void 0})}return f}let m=function(b,c,a){this.index=b;this.count=c;this.position=a},w=function(b){function c(a,f,d,e){a=b.call(this,a,f,d)||this;a.mapPosition=e;return a}r._inheritsLoose(c,b);return c}(m),q=function(b,c,a,f,d,e){this.position=b;this.mapPosition=c;this.polygons=a;this.outlines=f;this.projectionSuccess=d;this.sampledElevation=e};h.PolygonRenderInfo=
q;h.geometryToRenderInfo=function(b,c,a,f){const d=k.pathsToTriangulationInfo(b.rings,b.hasZ,k.CounterClockwiseMode.CCW_IS_HOLE),e=new Float64Array(d.position.length);b=u.applyPerVertexElevationAlignment(d.position,b.spatialReference,0,e,0,d.position,0,d.position.length/3,c,a,f);c=null!=b;return new q(d.position,e,n(d.polygons,d.position,e),l(d.outlines,d.position,e),c,b)};h.geometryToRenderInfoDraped=function(b,c){const a=k.pathsToTriangulationInfo(b.rings,!1,k.CounterClockwiseMode.CCW_IS_HOLE);
b=t.projectBuffer(a.position,b.spatialReference,0,a.position,c,0,a.position.length/3);for(c=2;c<a.position.length;c+=3)a.position[c]=v.DRAPED_Z;return{position:a.position,polygons:n(a.polygons,a.position),outlines:l(a.outlines,a.position),projectionSuccess:b}};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});