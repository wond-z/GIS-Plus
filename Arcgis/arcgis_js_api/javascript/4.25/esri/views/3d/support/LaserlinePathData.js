// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3 ../../../chunks/vec3f64 ./buffer/glUtil ./buffer/InterleavedLayout ../webgl-engine/lib/VertexArrayObject ../webgl-engine/lib/VertexAttribute ../webgl-engine/shaders/LaserlinePathTechnique ../../webgl/BufferObject ../../webgl/enums".split(" "),function(t,y,l,m,p,z,A,B,n,C,D,u){let F=function(){function q(b){this._renderCoordsHelper=b;this._buffers=null;this._origin=p.create();this._dirty=!1;this._count=
0;this._vao=null}var f=q.prototype;f.draw=function(b){const a=this._ensureVAO(b);l.isSome(a)&&(b.bindVAO(a),b.drawArrays(u.PrimitiveType.TRIANGLES,0,this._count))};f.dispose=function(){l.isSome(this._vao)&&this._vao.dispose()};f._ensureVAO=function(b){if(l.isNone(this._buffers))return null;l.isNone(this._vao)&&(this._vao=this._createVAO(b,this._buffers));this._ensureVertexData(this._vao,this._buffers);return this._vao};f._createVAO=function(b,a){a=this._createDataBuffer(a);this._dirty=!1;return new B.VertexArrayObject(b,
C.attributeLocations,{data:z.glLayout(v)},{data:D.BufferObject.createVertex(b,u.Usage.STATIC_DRAW,a)})};f._ensureVertexData=function(b,a){this._dirty&&(a=this._createDataBuffer(a),b.vertexBuffers.data.setData(a),this._dirty=!1)};f._numberOfRenderVertices=function(b){return 6*(b.length/3-1)};f._createDataBuffer=function(b){var a=b.reduce((e,c)=>e+this._numberOfRenderVertices(c),0);this._count=a;a=v.createBuffer(a);const k=this._origin;let h=0,w=0;for(const e of b){for(b=0;b<e.length;b+=3){var g=m.set(x,
e[b+0],e[b+1],e[b+2]);0===b?w=this._renderCoordsHelper.getAltitude(g):this._renderCoordsHelper.setAltitude(g,w);var d=this._renderCoordsHelper.worldUpAtPosition(g,E);const c=h+2*b;g=m.subtract(x,g,k);if(b<e.length-3){a.up.setVec(c,d);a.up.setVec(c+3,d);a.up.setVec(c+5,d);for(let r=0;6>r;r++)a.start.setVec(c+r,g);a.extrude.setValues(c+0,0,-1);a.extrude.setValues(c+1,1,-1);a.extrude.setValues(c+2,1,1);a.extrude.setValues(c+3,0,-1);a.extrude.setValues(c+4,1,1);a.extrude.setValues(c+5,0,1)}if(0<b)for(a.up.setVec(c-
2,d),a.up.setVec(c-4,d),a.up.setVec(c-5,d),d=-6;0>d;d++)a.end.setVec(c+d,g)}h+=this._numberOfRenderVertices(e)}return a.buffer};y._createClass(q,[{key:"vertices",set:function(b){const a=new Float64Array(3*b.length);let k=0;for(const h of b)a[k++]=h[0],a[k++]=h[1],a[k++]=h[2];this.buffers=[a]}},{key:"buffers",set:function(b){this._buffers=b;if(0<this._buffers.length){b=this._buffers[0];const a=3*Math.floor(b.length/3/2);m.set(this._origin,b[a+0],b[a+1],b[a+2])}else m.set(this._origin,0,0,0);this._dirty=
!0}},{key:"origin",get:function(){return this._origin}}]);return q}();const E=p.create(),x=p.create(),v=A.newLayout().vec3f(n.VertexAttribute.START).vec3f(n.VertexAttribute.END).vec3f(n.VertexAttribute.UP).vec2f(n.VertexAttribute.EXTRUDE);t.LaserlinePathData=F;Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});