// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../core/mathUtils ../../../core/maybe ../../../core/unitUtils ../../../chunks/vec3 ../../../chunks/vec3f64 ../../../geometry/Extent ../../../geometry/projectionEllipsoid ../../ViewingMode".split(" "),function(q,p,v,w,n,r,x,t,y){function u(e,b,c,a){c=2/c;e/b>c?(a.far=e,a.near=a.far/b):(a.near=c,a.far=a.near*b);return a}let z=function(){function e(b,c){this._elevationProvider=b;this._referenceEllipsoid=t.getReferenceEllipsoid(c);this._unitInMeters=w.getMetersPerUnitForSR(c,this._referenceEllipsoid.metersPerDegree)}
e.prototype.compute=function(b,c,a,f,g){g||(g={near:0,far:0});var d=b[2]*this._unitInMeters,k=d;f=d-f;var l=this._elevationProvider?.visibleElevationBounds;l&&(d=0<=f?k-this._unitInMeters*l.min:this._unitInMeters*l.max-k);a=v.isSome(a)?a:new x({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0});k=Math.max(a.xmax-a.xmin,a.ymax-a.ymin,4*Math.max(a.xmax-a.xmin,a.ymax-a.ymin));n.subtract(h,c,b);m[0]=0<h[0]?a.xmax:a.xmin;m[1]=0<h[1]?a.ymax:a.ymin;m[2]=0<h[2]?k/2:-k/2;n.subtract(m,m,b);n.normalize(h,h);b=1.1*
n.dot(m,h)*this._unitInMeters;c=Math.sqrt(d*(d+2*this._referenceEllipsoid.radius));a=Math.max(a.xmax-a.xmin,a.ymax-a.ymin);l=1E-4*a*this._unitInMeters;d=p.clamp((d-l)/(.001*a*this._unitInMeters-l),0,1);d=Math.min(p.lerp(c,b,d*d*d),c);d*=Math.max(Math.log(Math.abs(f)),1);d=Math.min(d,Math.max(34064E4,k));d/=this._unitInMeters;return u(d,2E4,this._unitInMeters,g)};return e}(),A=function(){function e(b){this._referenceEllipsoid=t.getReferenceEllipsoid(b)}e.prototype.compute=function(b,c,a,f,g){g||(g=
{near:0,far:0});b=n.length(b)-this._referenceEllipsoid.radius;b=Math.max(Math.abs(b-f),Math.abs(b));f=Math.sqrt(b*(b+2*(this._referenceEllipsoid.radius+Math.min(0,f))));b=p.clamp(2E4-(Math.log(b)-7.983)/9.011*19E3,1E3,2E4);return u(1.2*f,b,1,g)};return e}();const m=r.create(),h=r.create();q.createNearFarHeuristic=function(e,b,c){return e===y.ViewingMode.Global?new A(c):new z(b,c)};Object.defineProperties(q,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});