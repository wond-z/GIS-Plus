// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["exports"],function(b){let a=function(){function v(c,l){this._lockedSchemaPixelSize=c;this._isGCS=l}var g=v.prototype;g.getLevelRowColumn=function(c){return this._isGCS?[c[0],c[1]>>1,c[2]>>1]:256===this._lockedSchemaPixelSize&&0<c[0]?[c[0]-1,c[1]>>1,c[2]>>1]:c};g.adjustLevel=function(c){return this._isGCS?c:256===this._lockedSchemaPixelSize?0<c?c-1:0:c};g.getShift=function(c,l){let f=0,d=0;if(256===this._lockedSchemaPixelSize||
this._isGCS)c[2]%2&&(f=l),c[1]%2&&(d=l);return[f,d]};g.getScale=function(c){if(this._isGCS){if(512===this._lockedSchemaPixelSize)return 4}else if(256===this._lockedSchemaPixelSize&&0===c)return 1;return 2};return v}();b.SchemaHelper=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/TileHandler3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/MemCache ../../../../core/promiseUtils ../../../../chunks/mat3f32 ../../../../geometry/support/aaBoundingRect ./TileHandler ./VectorTile ./decluttering/jobsUtil ../../tiling/TileInfoViewPOT ../../tiling/TileKey".split(" "),
function(b,a,v,g,c,l,f,d,e,h,r){return function(m){function n(t,w,A,E,B){w=m.call(this,t,w,A)||this;w._memCache=E;w._loader=B;w._ongoingTileRequests=new Map;w._ongoingRequestToController=new Map;w._tileInfoView=new h(t.tileInfo,t.fullExtent);return w}b._inheritsLoose(n,m);var q=n.prototype;q.destroy=function(){m.prototype.destroy.call(this);this._ongoingRequestToController.forEach(t=>t.abort());this._ongoingRequestToController.clear();this._ongoingTileRequests.clear()};q.getVectorTile=function(){var t=
b._asyncToGenerator(function*(w,A,E,B){A=new r(w,A,E,0);let C=this._memCache.get(A.id);if(a.isSome(C))return C.retain(),C;E=yield this._getVectorTileData(A);g.throwIfAborted(B);if(!this._layer)return null;C=this._memCache.get(A.id);if(a.isSome(C))return C.retain(),C;B=this._layer.tileInfo.getTileBounds(l.create(),A);w=this._tileInfoView.getTileResolution(w);C=new d.VectorTile(A,w,B[0],B[3],512,512,this._styleRepository,this._memCache);a.isSome(E)?(C.setData(E),C.retain(),this._memCache.put(A.id,C,
C.memoryUsage*C.referenced,v.MIN_PRIORITY)):C.setData(null);C.neededForCoverage=!0;C.transforms.tileUnitsToPixels=c.fromValues(.125,0,0,0,.125,0,0,0,1);e.declutterSingleTile(C,this._styleRepository);return C});return function(w,A,E,B){return t.apply(this,arguments)}}();q._getVectorTileData=function(t){const w=t.id;if(this._ongoingTileRequests.has(w))return this._ongoingTileRequests.get(w);const A=new AbortController;t=this._getParsedVectorTileData(t,{signal:A.signal}).then(E=>{this._ongoingTileRequests.delete(w);
this._ongoingRequestToController.delete(w);return E}).catch(()=>{this._ongoingTileRequests.delete(w);this._ongoingRequestToController.delete(w);return null});this._ongoingTileRequests.set(w,t);this._ongoingRequestToController.set(w,A);return t};q._getParsedVectorTileData=function(t,w){return this.fetchTileData(t,w).then(A=>this.parseTileData({key:t,data:A},w))};q.request=function(t,w){return this._loader.request(t,"binary",w)};return n}(f.TileHandler)})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),
function(b,a,v,g,c,l,f,d,e){let h=function(){function r(n,q,t){this._layer=n;this._styleRepository=q;this.devicePixelRatio=t;this._connection=this._glyphMosaic=this._spriteMosaic=null}var m=r.prototype;m.destroy=function(){this._connection&&(this._connection.close(),this._connection=null);this._layer=this._styleRepository=null;this._spriteMosaic&&(this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic=null)};m.start=function(){var n=a._asyncToGenerator(function*(q){this._spriteSourcePromise=
this._layer.loadSpriteSource(this.devicePixelRatio,q);this._spriteSourcePromise.then(w=>{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(w)});const t=new f(this._layer.currentStyleInfo.glyphsUrl?g.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new l(1024,1024,t);this._broadcastPromise=c.open("WorkerTileHandler",{client:this,schedule:q.schedule,signal:q.signal}).then(w=>{this._connection=
w;this._layer&&!this._connection.closed&&(w=w.broadcast("setStyle",this._layer.currentStyleInfo.style,q),Promise.all(w).catch(A=>v.throwIfNotAbortError(A)))})});return function(q){return n.apply(this,arguments)}}();m.updateStyle=function(){var n=a._asyncToGenerator(function*(q){yield this._broadcastPromise;return this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",q))});return function(q){return n.apply(this,arguments)}}();m.setSpriteSource=function(n){const q=new d(1024,1024,
250);q.setSpriteSource(n);this._spriteMosaic=q;this._spriteSourcePromise=Promise.resolve(n);return q};m.setStyle=function(){var n=a._asyncToGenerator(function*(q,t){yield this._broadcastPromise;this._styleRepository=q;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,null);this._spriteSourcePromise.then(w=>{this._spriteMosaic=new d(1024,1024,250);this._spriteMosaic.setSpriteSource(w)});q=new f(this._layer.currentStyleInfo.glyphsUrl?g.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,
{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new l(1024,1024,q);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",t))});return function(q,t){return n.apply(this,arguments)}}();m.fetchTileData=function(n,q){return this._getRefKeys(n,q).then(t=>{const w=this._layer.sourceNameToSource,A=[];for(const E in w)A.push(E);return this._getSourcesData(A,t,q)})};m.parseTileData=function(n,q){const t=n&&n.data;if(!t)return Promise.resolve(null);
const {sourceName2DataAndRefKey:w,transferList:A}=t;return 0===Object.keys(w).length?Promise.resolve(null):this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:n.key.id,sourceName2DataAndRefKey:w,styleLayerUIDs:n.styleLayerUIDs},{...q,transferList:A}))};m.getSprites=function(){var n=a._asyncToGenerator(function*(q){yield this._spriteSourcePromise;return this._spriteMosaic.getSpriteItems(q)});return function(q){return n.apply(this,arguments)}}();m.getGlyphs=function(n){return this._glyphMosaic.getGlyphItems(n.font,
n.codePoints)};m._getTilePayload=function(){var n=a._asyncToGenerator(function*(q,t,w){q=e.pool.acquire(q.id);const A=this._layer.sourceNameToSource[t],{level:E,row:B,col:C}=q;e.pool.release(q);try{return{protobuff:yield A.requestTile(E,B,C,w),sourceName:t}}catch(G){if(v.isAbortError(G))throw G;return{protobuff:null,sourceName:t}}});return function(q,t,w){return n.apply(this,arguments)}}();m._getRefKeys=function(n,q){const t=this._layer.sourceNameToSource,w=[];for(const A in t){const E=t[A].getRefKey(n,
q);w.push(E)}return v.eachAlways(w)};m._getSourcesData=function(n,q,t){const w=[];for(let A=0;A<q.length;A++)if(null==q[A].value||null==n[A])w.push(null);else{const E=this._getTilePayload(q[A].value,n[A],t);w.push(E)}return v.eachAlways(w).then(A=>{const E={},B=[];for(let C=0;C<A.length;C++)A[C].value&&A[C].value&&A[C].value.protobuff&&0<A[C].value.protobuff.byteLength&&(E[A[C].value.sourceName]={refKey:q[C].value.id,protobuff:A[C].value.protobuff},B.push(A[C].value.protobuff));return{sourceName2DataAndRefKey:E,
transferList:B}})};a._createClass(r,[{key:"spriteMosaic",get:function(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}},{key:"glyphMosaic",get:function(){return this._glyphMosaic}}]);return r}();b.TileHandler=h;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(b,a,v,g){return function(){function c(f,
d,e){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=f;this.height=d;this._glyphSource=e;this._binPack=new b(f-4,d-4);this._glyphData.push(new Uint8Array(f*d));this._dirties.push(!0);this._textures.push(void 0)}var l=c.prototype;l.getGlyphItems=function(f,d){const e=[],h=this._glyphSource,r=new Set,m=1/256;for(const q of d)r.add(Math.floor(q*m));const n=[];r.forEach(q=>{if(256>=q){const t=
f+q;this._rangePromises.has(t)?n.push(this._rangePromises.get(t)):(q=h.getRange(f,q).then(()=>{this._rangePromises["delete"](t)},()=>{this._rangePromises["delete"](t)}),this._rangePromises.set(t,q),n.push(q))}});return Promise.all(n).then(()=>{let q=this._glyphIndex[f];q||(q={},this._glyphIndex[f]=q);for(const B of d){var t=q[B];if(t){e[B]={sdf:!0,rect:t.rect,metrics:t.metrics,page:t.page,code:B};continue}var w=h.getGlyph(f,B);if(!w||!w.metrics)continue;t=w.metrics;let C;if(0===t.width)C=new a(0,
0,0,0);else{const G=t.width+6,y=t.height+6;var A=G%4?4-G%4:4,E=y%4?4-y%4:4;1===A&&(A=5);1===E&&(E=5);C=this._binPack.allocate(G+A,y+E);C.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new b(this.width-4,this.height-4),C=this._binPack.allocate(G+A,y+E));A=this._glyphData[this._currentPage];w=w.bitmap;
let x;if(w)for(let D=0;D<y;D++){E=G*D;x=this.width*(C.y+D+1)+C.x;for(let J=0;J<G;J++)A[x+J+1]=w[E+J]}}q[B]={rect:C,metrics:t,tileIDs:null,page:this._currentPage};e[B]={sdf:!0,rect:C,metrics:t,page:this._currentPage,code:B};this._dirties[this._currentPage]=!0}return e})};l.removeGlyphs=function(f){for(const d in this._glyphIndex){const e=this._glyphIndex[d];if(!e)continue;let h;for(const r in e)if(h=e[r],h.tileIDs["delete"](f),0===h.tileIDs.size){const m=this._glyphData[h.page],n=h.rect;let q,t;for(let w=
0;w<n.height;w++)for(q=this.width*(n.y+w)+n.x,t=0;t<n.width;t++)m[q+t]=0;delete e[r];this._dirties[h.page]=!0}}};l.bind=function(f,d,e,h=0){this._textures[e]||(this._textures[e]=new g.Texture(f,{pixelFormat:v.PixelFormat.ALPHA,dataType:v.PixelType.UNSIGNED_BYTE,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));const r=this._textures[e];r.setSamplingMode(d);this._dirties[e]&&r.setData(this._glyphData[e]);f.bindTexture(r,h);this._dirties[e]=!1};l.dispose=function(){this._binPack=
null;for(const f of this._textures)f&&f.dispose();this._textures.length=0};return c}()})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../webgl/Rect"],function(b,a){return function(){function v(c,l){this._height=this._width=0;this._free=[];this._width=c;this._height=l;this._free.push(new a(0,0,c,l))}var g=v.prototype;g.allocate=function(c,l){if(c>this._width||l>this._height)return new a;let f=null,d=-1;for(let e=0;e<this._free.length;++e){const h=
this._free[e];c<=h.width&&l<=h.height&&(null===f||h.y<=f.y&&h.x<=f.x)&&(f=h,d=e)}if(null===f)return new a;this._free.splice(d,1);f.width<f.height?(f.width>c&&this._free.push(new a(f.x+c,f.y,f.width-c,l)),f.height>l&&this._free.push(new a(f.x,f.y+l,f.width,f.height-l))):(f.width>c&&this._free.push(new a(f.x+c,f.y,f.width-c,f.height)),f.height>l&&this._free.push(new a(f.x,f.y+l,c,f.height-l)));return new a(f.x,f.y,c,l)};g.release=function(c){for(let l=0;l<this._free.length;++l){const f=this._free[l];
if(f.y===c.y&&f.height===c.height&&f.x+f.width===c.x)f.width+=c.width;else if(f.x===c.x&&f.width===c.width&&f.y+f.height===c.y)f.height+=c.height;else if(c.y===f.y&&c.height===f.height&&c.x+c.width===f.x)f.x=c.x,f.width+=c.width;else if(c.x===f.x&&c.width===f.width&&c.y+c.height===f.y)f.y=c.y,f.height+=c.height;else continue;this._free.splice(l,1);this.release(c)}this._free.push(c)};b._createClass(v,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);
return v}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(b){return function(){function a(v=0,g=0,c=0,l=0){this.x=v;this.y=g;this.width=c;this.height=l}a.prototype.union=function(v){this.x=Math.min(this.x,v.x);this.y=Math.min(this.y,v.y);this.width=Math.max(this.width,v.width);this.height=Math.max(this.height,v.height)};b._createClass(a,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return a}()})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../request",
"../../../../core/pbf"],function(b,a){let v=function(){function c(f){this._metrics=[];this._bitmaps=[];if(f)for(;f.next();)switch(f.tag()){case 1:const d=f.getMessage();for(;d.next();)switch(d.tag()){case 3:const e=d.getMessage();let h,r,m,n,q,t,w;for(;e.next();)switch(e.tag()){case 1:h=e.getUInt32();break;case 2:r=e.getBytes();break;case 3:m=e.getUInt32();break;case 4:n=e.getUInt32();break;case 5:q=e.getSInt32();break;case 6:t=e.getSInt32();break;case 7:w=e.getUInt32();break;default:e.skip()}e.release();
h&&(this._metrics[h]={width:m,height:n,left:q,top:t,advance:w},this._bitmaps[h]=r);break;default:d.skip()}d.release();break;default:f.skip()}}var l=c.prototype;l.getMetrics=function(f){return this._metrics[f]};l.getBitmap=function(f){return this._bitmaps[f]};return c}(),g=function(){function c(){this._ranges=[]}var l=c.prototype;l.getRange=function(f){return this._ranges[f]};l.addRange=function(f,d){this._ranges[f]=d};return c}();return function(){function c(f){this._glyphInfo={};this._baseURL=f}
var l=c.prototype;l.getRange=function(f,d){const e=this._getFontStack(f);if(e.getRange(d))return Promise.resolve();const h=256*d,r=h+255;if(this._baseURL)return f=this._baseURL.replace("{fontstack}",f).replace("{range}",h+"-"+r),b(f,{responseType:"array-buffer"}).then(m=>{e.addRange(d,new v(new a(new Uint8Array(m.data),new DataView(m.data))))}).catch(()=>{e.addRange(d,new v)});e.addRange(d,new v);return Promise.resolve()};l.getGlyph=function(f,d){if(f=this._getFontStack(f)){var e=Math.floor(d/256);
if(!(256<e)&&(f=f.getRange(e)))return{metrics:f.getMetrics(d),bitmap:f.getBitmap(d)}}};l._getFontStack=function(f){let d=this._glyphInfo[f];d||(d=this._glyphInfo[f]=new g);return d};return c}()})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define(["../../../../symbols/cim/rasterizingUtils","./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture"],function(b,a,v,g,c){return function(){function l(d,e,h=0){this._size=[];this._mosaicsData=[];this._textures=
[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;(0>=d||0>=e)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=d;this._pageHeight=e;0<h&&(this._maxItemSize=h);this._binPack=new a(d-4,e-4)}var f=l.prototype;f.dispose=function(){this._binPack=null;this._mosaicRects={};for(const d of this._textures)d&&d.dispose();this._textures.length=0};f.getWidth=function(d){return d>=
this._size.length?-1:this._size[d][0]};f.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};f.getPageSize=function(d){return d>=this._size.length?null:this._size[d]};f.setSpriteSource=function(d){this.dispose();this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new a(this._pageWidth-4,this._pageHeight-4);const e=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=e;this._dirties.push(!0);this._size.push([this._pageWidth,
this._pageHeight]);this._textures.push(void 0)}this._sprites=d};f.getSpriteItem=function(d,e=!1){var h=this._mosaicRects[d];if(h)return h;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;let r;d&&d.startsWith("dasharray-")?([h,r]=this._rasterizeDash(d),e=!0):h=this._sprites.getSpriteInfo(d);if(!h||!h.width||!h.height||0>h.width||0>h.height)return null;const m=h.width,n=h.height,[q,t,w]=this._allocateImage(m,n);if(0>=q.width)return null;this._copy(q,h,t,w,e,r);h={rect:q,width:m,height:n,
sdf:h.sdf,simplePattern:!1,pixelRatio:h.pixelRatio,page:t};return this._mosaicRects[d]=h};f.getSpriteItems=function(d){const e={};for(const h of d)e[h.name]=this.getSpriteItem(h.name,h.repeat);return e};f.getMosaicItemPosition=function(d,e){e=(d=this.getSpriteItem(d,e))&&d.rect;if(!e)return null;e.width=d.width;e.height=d.height;return{tl:[e.x+2,e.y+2],br:[e.x+2+d.width,e.y+2+d.height],page:d.page}};f.bind=function(d,e,h=0,r=0){if(!(h>=this._size.length||h>=this._mosaicsData.length)){this._textures[h]||
(this._textures[h]=new c.Texture(d,{pixelFormat:g.PixelFormat.RGBA,dataType:g.PixelType.UNSIGNED_BYTE,wrapMode:g.TextureWrapMode.CLAMP_TO_EDGE,width:this._size[h][0],height:this._size[h][1]},new Uint8Array(this._mosaicsData[h].buffer)));var m=this._textures[h];m.setSamplingMode(e);this._dirties[h]&&m.setData(new Uint8Array(this._mosaicsData[h].buffer));d.bindTexture(m,r);this._dirties[h]=!1}};l._copyBits=function(d,e,h,r,m,n,q,t,w,A,E){let B=r*e+h;q=t*n+q;if(E)for(q-=n,E=-1;E<=A;E++,B=((E+A)%A+r)*
e+h,q+=n)for(t=-1;t<=w;t++)m[q+t]=d[B+(t+w)%w];else for(h=0;h<A;h++){for(r=0;r<w;r++)m[q+r]=d[B+r];B+=e;q+=n}};f._copy=function(d,e,h,r,m,n){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(h>=this._mosaicsData.length)){var q=new Uint32Array(n?n.buffer:this._sprites.image.buffer),t=this._mosaicsData[h];t&&q||console.error("Source or target images are uninitialized!");l._copyBits(q,n?e.width:this._sprites.width,e.x,e.y,t,r[0],d.x+2,d.y+2,e.width,e.height,m);this._dirties[h]=!0}};f._allocateImage=
function(d,e){d+=2;e+=2;var h=Math.max(d,e);if(this._maxItemSize&&this._maxItemSize<h)return h=new v(0,0,d,e),this._mosaicsData.push(new Uint32Array(d*e)),this._dirties.push(!0),this._size.push([d,e]),this._textures.push(void 0),[h,this._mosaicsData.length-1,[d,e]];h=d%4?4-d%4:4;let r=e%4?4-e%4:4;1===h&&(h=5);1===r&&(r=5);h=this._binPack.allocate(d+h,e+r);return 0>=h.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*
this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new a(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,e)):[h,this._currentPage,[this._pageWidth,this._pageHeight]]};f._rasterizeDash=function(d){var e=d.match(/\[(.*?)\]/);if(!e)return null;e=e[1].split(",").map(Number);d=d.slice(d.lastIndexOf("-")+1);const [h,r,m]=b.rasterizeDash(e,d);d=new Uint8Array(h.buffer);return[{x:0,y:0,width:r,height:m,sdf:!0,
pixelRatio:1},d]};return l}()})},"esri/symbols/cim/rasterizingUtils":function(){define(["exports","../../core/floatRGBA","../../core/mathUtils"],function(b,a,v){b.rasterizeDash=function(g,c){var l="Butt"===c,f="Square"===c;c=!l&&!f;1===g.length%2&&(g=[...g,...g]);var d=0;for(var e of g)d+=e;e=Math.round(15.5*d);d=new Float32Array(31*e);let h=0,r=0,m=.5,n=!0;for(var q of g){h=r;for(r+=15.5*q;m<=r;){for(g=.5;31>g;){const t=c?(g-15.5)*(g-15.5):Math.abs(g-15.5);d[(g-.5)*e+m-.5]=n?l?Math.max(Math.max(h+
7.75-m,t),Math.max(m-r+7.75,t)):t:c?Math.min((m-h)*(m-h)+t,(m-r)*(m-r)+t):f?Math.min(Math.max(m-h,t),Math.max(r-m,t)):Math.min(Math.max(m-h+7.75,t),Math.max(r+7.75-m,t));g++}m++}n=!n}l=d.length;q=new Uint8Array(4*l);for(f=0;f<l;++f)a.packFloatRGBA((c?Math.sqrt(d[f]):d[f])/15.5,q,4*f);return[q,e,31]};b.rasterizeSimpleFill=function(g,c,l){l=v.nextPowerOfTwo(Math.ceil(l));var f="vertical"===c||"horizontal"===c||"cross"===c||"esriSFSCross"===c||"esriSFSVertical"===c||"esriSFSHorizontal"===c?8*l:16*l;
const d=2*l;g.width=f;g.height=f;const e=g.getContext("2d");e.strokeStyle="#FFFFFF";e.lineWidth=l;e.beginPath();if("vertical"===c||"cross"===c||"esriSFSCross"===c||"esriSFSVertical"===c)e.moveTo(f/2,-d),e.lineTo(f/2,f+d);if("horizontal"===c||"cross"===c||"esriSFSCross"===c||"esriSFSHorizontal"===c)e.moveTo(-d,f/2),e.lineTo(f+d,f/2);if("forward-diagonal"===c||"diagonal-cross"===c||"esriSFSDiagonalCross"===c||"esriSFSForwardDiagonal"===c)e.moveTo(-d,-d),e.lineTo(f+d,f+d),e.moveTo(f-d,-d),e.lineTo(f+
d,d),e.moveTo(-d,f-d),e.lineTo(d,f+d);if("backward-diagonal"===c||"diagonal-cross"===c||"esriSFSBackwardDiagonal"===c||"esriSFSDiagonalCross"===c)e.moveTo(f+d,-d),e.lineTo(-d,f+d),e.moveTo(d,-d),e.lineTo(-d,d),e.moveTo(f+d,f-d),e.lineTo(f-d,f+d);e.stroke();c=e.getImageData(0,0,g.width,g.height);c=new Uint8Array(c.data);for(f=0;f<c.length;f+=4)l=c[f+3]/255,c[f]*=l,c[f+1]*=l,c[f+2]*=l;return[c,g.width,g.height]};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/decluttering/jobsUtil":function(){define("exports ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),function(b,a,v,g,c,l,f){b.declutterSingleTile=function(d,e){const h=[],r=new c.SymbolRepository(4096,h,()=>{const n=new a.VTLUniqueSymbol;n.show=!1;n.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});n.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});return n}),m=new g.SymbolDeclutterer(h,
r,(n,q,t)=>new v.CollisionJob(n,q,t,d.styleRepository,d.key.level,0),(n,q)=>{l.writeOpacityToBuffers(n,q,!1)},()=>0,n=>(n=e.getStyleLayerByUID(n).getLayoutProperty("visibility"))&&n.getValue()===f.Visibility.NONE?!1:!0);h.push(d);r.add(d);m.setScreenSize(512,512);m.continue(Infinity)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define(["exports","../../../../../chunks/mat3f32","./config",
"./util","../style/StyleDefinition"],function(b,a,v,g,c){let l=function(){function f(e,h,r,m,n,q){this._symbols=e;this._styleRepository=m;this._zoom=n;this._currentSymbolCursor=this._currentLayerCursor=0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new g.GridIndex(h,r,v.COLLISION_GRID_CELL_SIZE);this._si=Math.sin(Math.PI*q/180);this._co=Math.cos(Math.PI*q/180);for(const t of e)for(const w of t.symbols)this._allNeededMatrices.has(w.tile)||this._allNeededMatrices.set(w.tile,
a.clone(w.tile.transforms.tileUnitsToPixels))}var d=f.prototype;d.work=function(e){const h=this._gridIndex,r=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const y=this._symbols[this._currentLayerCursor],x=this._getProperties(y.styleLayerUID);for(;this._currentSymbolCursor<y.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-r>e)return!1;var m=y.symbols[this._currentSymbolCursor];
if(!m.unique.show)continue;var n=m,q=this._si,t=this._co,w=this._allNeededMatrices.get(m.tile),A=this._zoom;const {iconRotationAlignment:D,textRotationAlignment:J,iconTranslate:K,iconTranslateAnchor:R,textTranslate:L,textTranslateAnchor:S}=x;var E=0;for(const H of n.colliders){const [P,W]=0===H.partIndex?K:L;var B=0===H.partIndex?R:S,C=H.minLod<=A&&A<=H.maxLod;E+=C?0:1;H.enabled=C;H.xScreen=H.xTile*w[0]+H.yTile*w[3]+w[6];H.yScreen=H.xTile*w[1]+H.yTile*w[4]+w[7];B===c.TranslateAnchor.MAP?(H.xScreen+=
t*P-q*W,H.yScreen+=q*P+t*W):(H.xScreen+=P,H.yScreen+=W);c.RotationAlignment.VIEWPORT===(0===H.partIndex?D:J)?(H.dxScreen=H.dxPixels,H.dyScreen=H.dyPixels):(H.dxScreen=t*(H.dxPixels+H.width/2)-q*(H.dyPixels+H.height/2)-H.width/2,H.dyScreen=q*(H.dxPixels+H.width/2)+t*(H.dyPixels+H.height/2)-H.height/2)}0<n.colliders.length&&E===n.colliders.length&&(n.unique.show=!1);n=m.unique;if(!n.show)continue;const {iconAllowOverlap:N,iconIgnorePlacement:O,textAllowOverlap:T,textIgnorePlacement:M}=x;for(const H of m.colliders)if(H.enabled&&
(q=n.parts[H.partIndex],q.show)){if(t=!(H.partIndex?T:N))a:{t=H.xScreen+H.dxScreen;w=H.yScreen+H.dyScreen;A=t+H.width;E=w+H.height;const [P,W,U,Y]=h.getCellSpan(t,w,A,E);for(B=W;B<=Y;B++)for(C=P;C<=U;C++){var G=h.cells[B][C];for(const X of G){G=X.xScreen+X.dxScreen;const ea=X.yScreen+X.dyScreen,ca=G+X.width,aa=ea+X.height;if(!(A<G||t>ca||E<ea||w>aa)){t=!0;break a}}}t=!1}t&&(H.hard?n.show=!1:q.show=!1)}if(n.show)for(const H of m.colliders){if(!H.enabled)continue;if(H.partIndex?M:O)continue;if(!n.parts[H.partIndex].show)continue;
m=H.xScreen+H.dxScreen;q=H.yScreen+H.dyScreen;const [P,W,U,Y]=this._gridIndex.getCellSpan(m,q,m+H.width,q+H.height);for(m=W;m<=Y;m++)for(q=P;q<=U;q++)this._gridIndex.cells[m][q].push(H)}}}return!0};d._getProperties=function(e){var h=this._styleProps.get(e);if(h)return h;h=this._zoom;const r=this._styleRepository.getStyleLayerByUID(e);var m=r.getLayoutValue("symbol-placement",h)!==c.SymbolPlacement.POINT;let n=r.getLayoutValue("icon-rotation-alignment",h);n===c.RotationAlignment.AUTO&&(n=m?c.RotationAlignment.MAP:
c.RotationAlignment.VIEWPORT);let q=r.getLayoutValue("text-rotation-alignment",h);q===c.RotationAlignment.AUTO&&(q=m?c.RotationAlignment.MAP:c.RotationAlignment.VIEWPORT);m=r.getPaintValue("icon-translate",h);const t=r.getPaintValue("icon-translate-anchor",h),w=r.getPaintValue("text-translate",h),A=r.getPaintValue("text-translate-anchor",h);h={iconAllowOverlap:r.getLayoutValue("icon-allow-overlap",h),iconIgnorePlacement:r.getLayoutValue("icon-ignore-placement",h),textAllowOverlap:r.getLayoutValue("text-allow-overlap",
h),textIgnorePlacement:r.getLayoutValue("text-ignore-placement",h),iconRotationAlignment:n,textRotationAlignment:q,iconTranslateAnchor:t,iconTranslate:m,textTranslateAnchor:A,textTranslate:w};this._styleProps.set(e,h);return h};return f}();b.CollisionJob=l;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../symbols/cim/enums"],function(b,a){b.StyleLayerType=
void 0;(function(g){g[g.BACKGROUND=0]="BACKGROUND";g[g.FILL=1]="FILL";g[g.LINE=2]="LINE";g[g.SYMBOL=3]="SYMBOL";g[g.CIRCLE=4]="CIRCLE"})(b.StyleLayerType||(b.StyleLayerType={}));b.Visibility=void 0;(function(g){g[g.VISIBLE=0]="VISIBLE";g[g.NONE=1]="NONE"})(b.Visibility||(b.Visibility={}));b.SymbolPlacement=void 0;(function(g){g[g.POINT=0]="POINT";g[g.LINE=1]="LINE";g[g.LINE_CENTER=2]="LINE_CENTER"})(b.SymbolPlacement||(b.SymbolPlacement={}));b.RotationAlignment=void 0;(function(g){g[g.MAP=0]="MAP";
g[g.VIEWPORT=1]="VIEWPORT";g[g.AUTO=2]="AUTO"})(b.RotationAlignment||(b.RotationAlignment={}));b.TextJustification=void 0;(function(g){g[g.AUTO=0]="AUTO";g[g.LEFT=1]="LEFT";g[g.CENTER=2]="CENTER";g[g.RIGHT=3]="RIGHT"})(b.TextJustification||(b.TextJustification={}));b.SymbolAnchor=void 0;(function(g){g[g.CENTER=0]="CENTER";g[g.LEFT=1]="LEFT";g[g.RIGHT=2]="RIGHT";g[g.TOP=3]="TOP";g[g.BOTTOM=4]="BOTTOM";g[g.TOP_LEFT=5]="TOP_LEFT";g[g.TOP_RIGHT=6]="TOP_RIGHT";g[g.BOTTOM_LEFT=7]="BOTTOM_LEFT";g[g.BOTTOM_RIGHT=
8]="BOTTOM_RIGHT"})(b.SymbolAnchor||(b.SymbolAnchor={}));b.TextTransform=void 0;(function(g){g[g.NONE=0]="NONE";g[g.UPPERCASE=1]="UPPERCASE";g[g.LOWERCASE=2]="LOWERCASE"})(b.TextTransform||(b.TextTransform={}));b.TranslateAnchor=void 0;(function(g){g[g.MAP=0]="MAP";g[g.VIEWPORT=1]="VIEWPORT"})(b.TranslateAnchor||(b.TranslateAnchor={}));b.TextWritingMode=void 0;(function(g){g[g.HORIZONTAL=0]="HORIZONTAL";g[g.VERTICAL=1]="VERTICAL"})(b.TextWritingMode||(b.TextWritingMode={}));let v=function(){};v.backgroundLayoutDefinition=
{visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};v.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};v.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:a.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:a.JoinType.MITER},"line-miter-limit":{type:"number",default:2},
"line-round-limit":{type:"number",default:1.05}};v.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:b.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),
default:b.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,
default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:b.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:b.TextJustification.CENTER},"text-keep-upright":{type:"boolean",
default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:b.RotationAlignment.AUTO},
"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:b.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[b.TextWritingMode.HORIZONTAL]}};v.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:b.Visibility.VISIBLE}};v.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,
maximum:1,default:1},"background-pattern":{type:"string"}};v.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};v.linePaintDefinition=
{"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},
"line-width":{type:"number",minimum:0,default:1}};v.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP},
"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};v.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,
default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};v.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,
0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:b.TranslateAnchor.MAP}};b.StyleDefinition=v;Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/cim/enums":function(){define(["exports"],function(b){b.CapType=void 0;(function(a){a[a.BUTT=0]="BUTT";a[a.ROUND=1]="ROUND";a[a.SQUARE=2]="SQUARE";a[a.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));b.JoinType=void 0;(function(a){a[a.BEVEL=0]="BEVEL";a[a.ROUND=1]="ROUND";a[a.MITER=2]="MITER";a[a.UNKNOWN=4]="UNKNOWN"})(b.JoinType||(b.JoinType={}));b.Alignment=void 0;(function(a){a[a.SCREEN=0]="SCREEN";a[a.MAP=1]="MAP"})(b.Alignment||
(b.Alignment={}));b.ExternalColorMixMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Ignore=1]="Ignore";a[a.Multiply=99]="Multiply"})(b.ExternalColorMixMode||(b.ExternalColorMixMode={}));b.ExtremityPlacement=void 0;(function(a){a.Both="Both";a.JustBegin="JustBegin";a.JustEnd="JustEnd";a.None="None"})(b.ExtremityPlacement||(b.ExtremityPlacement={}));b.FillMode=void 0;(function(a){a[a.Mosaic=0]="Mosaic";a[a.Centered=1]="Centered"})(b.FillMode||(b.FillMode={}));b.FontEffects=void 0;(function(a){a[a.Normal=
0]="Normal";a[a.Superscript=1]="Superscript";a[a.Subscript=2]="Subscript"})(b.FontEffects||(b.FontEffects={}));b.FontEncoding=void 0;(function(a){a[a.MSSymbol=0]="MSSymbol";a[a.Unicode=1]="Unicode"})(b.FontEncoding||(b.FontEncoding={}));b.FontType=void 0;(function(a){a[a.Unspecified=0]="Unspecified";a[a.TrueType=1]="TrueType";a[a.PSOpenType=2]="PSOpenType";a[a.TTOpenType=3]="TTOpenType";a[a.Type1=4]="Type1"})(b.FontType||(b.FontType={}));b.AngleAlignment=void 0;(function(a){a[a.Display=0]="Display";
a[a.Map=1]="Map"})(b.AngleAlignment||(b.AngleAlignment={}));b.AnimatedSymbolRepeatType=void 0;(function(a){a.None="None";a.Loop="Loop";a.Oscillate="Oscillate"})(b.AnimatedSymbolRepeatType||(b.AnimatedSymbolRepeatType={}));b.DominantSizeAxis=void 0;(function(a){a[a.Z=0]="Z";a[a.X=1]="X";a[a.Y=2]="Y"})(b.DominantSizeAxis||(b.DominantSizeAxis={}));b.RotationOrder=void 0;(function(a){a[a.XYZ=0]="XYZ";a[a.ZXY=1]="ZXY";a[a.YXZ=2]="YXZ"})(b.RotationOrder||(b.RotationOrder={}));b.BalloonCalloutStyle=void 0;
(function(a){a[a.Rectangle=0]="Rectangle";a[a.RoundedRectangle=1]="RoundedRectangle";a[a.Oval=2]="Oval"})(b.BalloonCalloutStyle||(b.BalloonCalloutStyle={}));b.BlendingMode=void 0;(function(a){a[a.None=0]="None";a[a.Alpha=1]="Alpha";a[a.Screen=2]="Screen";a[a.Multiply=3]="Multiply";a[a.Add=4]="Add"})(b.BlendingMode||(b.BlendingMode={}));b.BlockProgression=void 0;(function(a){a[a.TTB=0]="TTB";a[a.RTL=1]="RTL";a[a.BTT=2]="BTT"})(b.BlockProgression||(b.BlockProgression={}));b.BillBoardMode=void 0;(function(a){a[a.None=
0]="None";a[a.SignPost=1]="SignPost";a[a.FaceNearPlane=2]="FaceNearPlane"})(b.BillBoardMode||(b.BillBoardMode={}));b.CGAAttributeType=void 0;(function(a){a[a.Float=0]="Float";a[a.String=1]="String";a[a.Boolean=2]="Boolean"})(b.CGAAttributeType||(b.CGAAttributeType={}));b.ClippingType=void 0;(function(a){a[a.Intersect=0]="Intersect";a[a.Subtract=1]="Subtract"})(b.ClippingType||(b.ClippingType={}));b.GeometricEffectArrowType=void 0;(function(a){a.OpenEnded="OpenEnded";a.Block="Block";a.Crossed="Crossed"})(b.GeometricEffectArrowType||
(b.GeometricEffectArrowType={}));b.GeometricEffectControlMeasureLineRule=void 0;(function(a){a.FullGeometry="FullGeometry";a.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment";a.ReversedFirstSegment="ReversedFirstSegment";a.PerpendicularToSecondSegment="PerpendicularToSecondSegment";a.SecondSegmentWithTicks="SecondSegmentWithTicks";a.DoublePerpendicular="DoublePerpendicular";a.OppositeToFirstSegment="OppositeToFirstSegment";a.TriplePerpendicular="TriplePerpendicular";a.HalfCircleFirstSegment=
"HalfCircleFirstSegment";a.HalfCircleSecondSegment="HalfCircleSecondSegment";a.HalfCircleExtended="HalfCircleExtended";a.OpenCircle="OpenCircle";a.CoverageEdgesWithTicks="CoverageEdgesWithTicks";a.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks";a.GapExtentMidline="GapExtentMidline";a.Chevron="Chevron";a.PerpendicularWithArc="PerpendicularWithArc";a.ClosedHalfCircle="ClosedHalfCircle";a.TripleParallelExtended="TripleParallelExtended";a.ParallelWithTicks="ParallelWithTicks";a.Parallel="Parallel";
a.PerpendicularToFirstSegment="PerpendicularToFirstSegment";a.ParallelOffset="ParallelOffset";a.OffsetOpposite="OffsetOpposite";a.OffsetSame="OffsetSame";a.CircleWithArc="CircleWithArc";a.DoubleJog="DoubleJog";a.PerpendicularOffset="PerpendicularOffset";a.LineExcludingLastSegment="LineExcludingLastSegment";a.MultivertexArrow="MultivertexArrow";a.CrossedArrow="CrossedArrow";a.ChevronArrow="ChevronArrow";a.ChevronArrowOffset="ChevronArrowOffset";a.PartialFirstSegment="PartialFirstSegment";a.Arch="Arch";
a.CurvedParallelTicks="CurvedParallelTicks";a.Arc90Degrees="Arc90Degrees"})(b.GeometricEffectControlMeasureLineRule||(b.GeometricEffectControlMeasureLineRule={}));b.GeometricEffectDonutMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square";a.TrueBuffer="TrueBuffer"})(b.GeometricEffectDonutMethod||(b.GeometricEffectDonutMethod={}));b.GeometricEffectEnclosingPolygonMethod=void 0;(function(a){a.ClosePath="ClosePath";a.ConvexHull="ConvexHull";a.RectangularBox=
"RectangularBox"})(b.GeometricEffectEnclosingPolygonMethod||(b.GeometricEffectEnclosingPolygonMethod={}));b.GeometricEffectExtensionOrigin=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectExtensionOrigin||(b.GeometricEffectExtensionOrigin={}));b.GeometricEffectOffsetMethod=void 0;(function(a){a.Mitered="Mitered";a.Bevelled="Bevelled";a.Rounded="Rounded";a.Square="Square"})(b.GeometricEffectOffsetMethod||(b.GeometricEffectOffsetMethod={}));b.GeometricEffectOffsetOption=
void 0;(function(a){a.Fast="Fast";a.Accurate="Accurate"})(b.GeometricEffectOffsetOption||(b.GeometricEffectOffsetOption={}));b.GeometricEffectOffsetTangentMethod=void 0;(function(a){a.BeginningOfLine="BeginningOfLine";a.EndOfLine="EndOfLine"})(b.GeometricEffectOffsetTangentMethod||(b.GeometricEffectOffsetTangentMethod={}));b.GeometricEffectWaveform=void 0;(function(a){a.Sinus="Sinus";a.Square="Square";a.Triangle="Triangle";a.Random="Random"})(b.GeometricEffectWaveform||(b.GeometricEffectWaveform=
{}));b.GlyphHinting=void 0;(function(a){a[a.None=0]="None";a[a.Default=1]="Default";a[a.Force=2]="Force"})(b.GlyphHinting||(b.GlyphHinting={}));b.GradientAlignment=void 0;(function(a){a[a.Buffered=0]="Buffered";a[a.Left=1]="Left";a[a.Right=2]="Right";a[a.AlongLine=3]="AlongLine"})(b.GradientAlignment||(b.GradientAlignment={}));b.GradientFillMethod=void 0;(function(a){a[a.Linear=0]="Linear";a[a.Rectangular=1]="Rectangular";a[a.Circular=2]="Circular";a[a.Buffered=3]="Buffered"})(b.GradientFillMethod||
(b.GradientFillMethod={}));b.GradientStrokeType=void 0;(function(a){a[a.Discrete=0]="Discrete";a[a.Continuous=1]="Continuous"})(b.GradientStrokeType||(b.GradientStrokeType={}));b.GradientStrokeMethod=void 0;(function(a){a[a.AcrossLine=0]="AcrossLine";a[a.AloneLine=1]="AloneLine"})(b.GradientStrokeMethod||(b.GradientStrokeMethod={}));b.HorizontalAlignment=void 0;(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Center=2]="Center";a[a.Justify=3]="Justify"})(b.HorizontalAlignment||(b.HorizontalAlignment=
{}));b.LeaderLineStyle=void 0;(function(a){a[a.Base=0]="Base";a[a.MidPoint=1]="MidPoint";a[a.ThreePoint=2]="ThreePoint";a[a.FourPoint=3]="FourPoint";a[a.Underline=4]="Underline";a[a.CircularCW=5]="CircularCW";a[a.CircularCCW=6]="CircularCCW"})(b.LeaderLineStyle||(b.LeaderLineStyle={}));b.LineCapStyle=void 0;(function(a){a.Butt="Butt";a.Round="Round";a.Square="Square"})(b.LineCapStyle||(b.LineCapStyle={}));b.LineDashEnding=void 0;(function(a){a.NoConstraint="NoConstraint";a.HalfPattern="HalfPattern";
a.HalfGap="HalfGap";a.FullPattern="FullPattern";a.FullGap="FullGap";a.Custom="Custom"})(b.LineDashEnding||(b.LineDashEnding={}));b.LineDecorationStyle=void 0;(function(a){a[a.None=-1]="None";a[a.Custom=0]="Custom";a[a.Circle=1]="Circle";a[a.OpenArrow=2]="OpenArrow";a[a.ClosedArrow=3]="ClosedArrow";a[a.Diamond=4]="Diamond"})(b.LineDecorationStyle||(b.LineDecorationStyle={}));b.LineGapType=void 0;(function(a){a[a.ExtraLeading=0]="ExtraLeading";a[a.Multiple=1]="Multiple";a[a.Exact=2]="Exact"})(b.LineGapType||
(b.LineGapType={}));b.LineJoinStyle=void 0;(function(a){a.Bevel="Bevel";a.Round="Round";a.Miter="Miter"})(b.LineJoinStyle||(b.LineJoinStyle={}));b.ExpressionReturnType=void 0;(function(a){a[a.Default=0]="Default";a[a.String=1]="String";a[a.Numeric=2]="Numeric"})(b.ExpressionReturnType||(b.ExpressionReturnType={}));b.MarkerPlacementType=void 0;(function(a){a[a.InsidePolygon=0]="InsidePolygon";a[a.PolygonCenter=1]="PolygonCenter";a[a.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"})(b.MarkerPlacementType||
(b.MarkerPlacementType={}));b.MaterialMode=void 0;(function(a){a[a.Tint=0]="Tint";a[a.Replace=1]="Replace";a[a.Multiply=2]="Multiply"})(b.MaterialMode||(b.MaterialMode={}));b.PlacementClip=void 0;(function(a){a[a.ClipAtBoundary=0]="ClipAtBoundary";a[a.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary";a[a.DoNotTouchBoundary=2]="DoNotTouchBoundary";a[a.DoNotClip=3]="DoNotClip"})(b.PlacementClip||(b.PlacementClip={}));b.PlacementEndings=void 0;(function(a){a.NoConstraint="NoConstraint";
a.WithMarkers="WithMarkers";a.WithFullGap="WithFullGap";a.WithHalfGap="WithHalfGap";a.Custom="Custom"})(b.PlacementEndings||(b.PlacementEndings={}));b.PlacementGridType=void 0;(function(a){a.Fixed="Fixed";a.Random="Random";a.RandomFixedQuantity="RandomFixedQuantity"})(b.PlacementGridType||(b.PlacementGridType={}));b.PlacementOnLineRelativeTo=void 0;(function(a){a.LineMiddle="LineMiddle";a.LineBeginning="LineBeginning";a.LineEnd="LineEnd";a.SegmentMidpoint="SegmentMidpoint"})(b.PlacementOnLineRelativeTo||
(b.PlacementOnLineRelativeTo={}));b.PlacementPolygonCenterMethod=void 0;(function(a){a.OnPolygon="OnPolygon";a.CenterOfMass="CenterOfMass";a.BoundingBoxCenter="BoundingBoxCenter"})(b.PlacementPolygonCenterMethod||(b.PlacementPolygonCenterMethod={}));b.PlacementRandomlyAlongLineRandomization=void 0;(function(a){a[a.Low=0]="Low";a[a.Medium=1]="Medium";a[a.High=2]="High"})(b.PlacementRandomlyAlongLineRandomization||(b.PlacementRandomlyAlongLineRandomization={}));b.PlacementStepPosition=void 0;(function(a){a[a.MarkerCenter=
0]="MarkerCenter";a[a.MarkerBounds=1]="MarkerBounds"})(b.PlacementStepPosition||(b.PlacementStepPosition={}));b.PointSymbolCalloutScale=void 0;(function(a){a[a.None=0]="None";a[a.PropUniform=1]="PropUniform";a[a.PropNonuniform=2]="PropNonuniform";a[a.DifUniform=3]="DifUniform";a[a.DifNonuniform=4]="DifNonuniform"})(b.PointSymbolCalloutScale||(b.PointSymbolCalloutScale={}));b.Simple3DLineStyle=void 0;(function(a){a.Tube="Tube";a.Strip="Strip";a.Wall="Wall"})(b.Simple3DLineStyle||(b.Simple3DLineStyle=
{}));b.SizeVariationMethod=void 0;(function(a){a[a.Random=0]="Random";a[a.Increasing=1]="Increasing";a[a.Decreasing=2]="Decreasing";a[a.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"})(b.SizeVariationMethod||(b.SizeVariationMethod={}));b.SymbolUnits=void 0;(function(a){a[a.Relative=0]="Relative";a[a.Absolute=1]="Absolute"})(b.SymbolUnits||(b.SymbolUnits={}));b.TextCase=void 0;(function(a){a[a.Normal=0]="Normal";a[a.LowerCase=1]="LowerCase";a[a.Allcaps=2]="Allcaps"})(b.TextCase||(b.TextCase=
{}));b.TextReadingDirection=void 0;(function(a){a[a.LTR=0]="LTR";a[a.RTL=1]="RTL"})(b.TextReadingDirection||(b.TextReadingDirection={}));b.TextureFilter=void 0;(function(a){a.Draft="Draft";a.Picture="Picture";a.Text="Text"})(b.TextureFilter||(b.TextureFilter={}));b.VerticalAlignment=void 0;(function(a){a[a.Top=0]="Top";a[a.Center=1]="Center";a[a.Baseline=2]="Baseline";a[a.Bottom=3]="Bottom"})(b.VerticalAlignment||(b.VerticalAlignment={}));b.VerticalGlyphOrientation=void 0;(function(a){a[a.Right=0]=
"Right";a[a.Upright=1]="Upright"})(b.VerticalGlyphOrientation||(b.VerticalGlyphOrientation={}));b.WaterbodySize=void 0;(function(a){a[a.Small=0]="Small";a[a.Medium=1]="Medium";a[a.Large=2]="Large"})(b.WaterbodySize||(b.WaterbodySize={}));b.WaveStrength=void 0;(function(a){a[a.Calm=0]="Calm";a[a.Rippled=1]="Rippled";a[a.Slight=2]="Slight";a[a.Moderate=3]="Moderate"})(b.WaveStrength||(b.WaveStrength={}));Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./config"],function(b,a,v,g){function c(f,d){if(f.priority-d.priority)return f.priority-d.priority;const e=f.tile.key,h=d.tile.key;return e.world-h.world?e.world-h.world:e.level-h.level?e.level-h.level:e.row-h.row?e.row-h.row:e.col-h.col?e.col-h.col:f.xTile-d.xTile?f.xTile-d.xTile:f.yTile-d.yTile}let l=function(){function f(e,h,r,m,n,q){this._visibleTiles=e;this._symbolRepository=h;this._createCollisionJob=r;this._assignTileSymbolsOpacity=
m;this._symbolLayerSorter=n;this._isLayerVisible=q;this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}var d=f.prototype;d.setScreenSize=function(e,h){this._screenWidth===e&&this._screenHeight===h||this.restart();this._screenWidth=e;this._screenHeight=h};d.restart=function(){this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=
!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0};d.continue=function(e){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var h=performance.now();if(!this._selectionJob.work(e))return!1;this._selectionJobCompleted=!0;e=Math.max(0,e-(performance.now()-h));if(0===e)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight));if(!this._collisionJobCompleted){h=
performance.now();if(!this._collisionJob.work(e))return!1;this._collisionJobCompleted=!0;e=Math.max(0,e-(performance.now()-h));if(0===e)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){h=performance.now();if(!this._opacityJob.work(e))return!1;this._opacityJobCompleted=!0;e=Math.max(0,e-(performance.now()-h));if(0===e)return!1}this._running=!1;return!0};d._createSelectionJob=function(){const e=this._symbolRepository.uniqueSymbols;for(let t=0;t<e.length;t++){const w=
e[t];for(let A=0;A<w.uniqueSymbols.length;A++){const E=w.uniqueSymbols[A];for(const B of E.tileSymbols)B.selectedForRendering=!1}}const h=[];let r=0,m=0;const n=this._isLayerVisible,q=this._symbolLayerSorter;return{work:function(t){const w=performance.now();for(;m<e.length;m++,r=0){const E=e[m];var A=E.styleLayerUID;if(!n(A)){h[m]||(h[m]={styleLayerUID:A,symbols:[]});continue}h[m]=h[m]||{styleLayerUID:A,symbols:[]};const B=h[m];for(;r<E.uniqueSymbols.length;r++){A=E.uniqueSymbols[r];if(99===r%100&&
performance.now()-w>t)return!1;let C=null,G=!1,y=!1;for(const x of A.tileSymbols)if(!y||!G){const D=x.tile;if(!C||D.isCoverage||D.neededForCoverage&&!G){C=x;if(D.neededForCoverage||D.isCoverage)y=!0;D.isCoverage&&(G=!0)}}C.selectedForRendering=!0;if(y){B.symbols.push(C);A.show=!0;for(const x of A.parts)x.show=!0}else A.show=!1}}for(const E of h)E.symbols.sort(c);return!0},get sortedSymbols(){return h.sort(q)}}};d._createOpacityJob=function(){function e(n,q){var t=n.symbols;for(const [,A]of t){var w=
A;t=q;for(const E of w){w=E.unique;for(const B of w.parts)B.startOpacity+=(t-B.startTime)/g.FADE_DURATION*(.5<B.targetOpacity?1:-1),B.startOpacity=Math.min(Math.max(B.startOpacity,0),1),B.startTime=t,B.targetOpacity=w.show&&B.show?1:0}}h(n,q);for(const A of n.childrenTiles)e(A,q)}const h=this._assignTileSymbolsOpacity,r=this._visibleTiles;let m=0;return{work(n){const q=performance.now();for(;m<r.length;m++){if(performance.now()-q>n)return!1;const t=r[m];if(v.isSome(t.parentTile))continue;const w=
performance.now();e(t,w)}return!0}}};a._createClass(f,[{key:"running",get:function(){return this._running}}]);return f}();b.SymbolDeclutterer=l;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","./util"],function(b,a,v,g){let c=function(){function l(d,e,h){this.tileCoordRange=d;this._visibleTiles=
e;this._createUnique=h;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}var f=l.prototype;f.add=function(d,e){this._uniqueSymbolLayerArray=null;let h=this._tiles.get(d.id);h||(h={symbols:new Map},this._tiles.set(d.id,h));var r=new Map;if(e)for(var m of e)h.symbols.has(m)&&(r.set(m,h.symbols.get(m)),h.symbols.delete(m));else for(var [n]of d.layerData)h.symbols.has(n)&&(r.set(n,h.symbols.get(n)),h.symbols.delete(n));this._removeSymbols(r);e=d.symbols;r=new Map;for(const [q,t]of e)if(m=t.length,
32<=m){n=this.tileCoordRange;do n/=2,m/=4;while(8<m&&64<n);m=new g.GridIndex(this.tileCoordRange,this.tileCoordRange,n);r.set(q,{flat:t,index:m});h.symbols.set(q,{flat:t,index:m});for(const w of t)m.getCell(w.xTile,w.yTile).push(w)}else r.set(q,{flat:t}),h.symbols.set(q,{flat:t});this._addSymbols(d.key,e)};f.deleteStyleLayers=function(d){this._uniqueSymbolLayerArray=null;for(const [e,h]of this._tiles){const r=new Map;for(const m of d)h.symbols.has(m)&&(r.set(m,h.symbols.get(m)),h.symbols.delete(m));
this._removeSymbols(r);0===h.symbols.size&&this._tiles.delete(e)}};f.removeTile=function(d){this._uniqueSymbolLayerArray=null;const e=this._tiles.get(d.id);if(e){var h=new Map;for(const [r]of d.symbols)e.symbols.has(r)&&(h.set(r,e.symbols.get(r)),e.symbols.delete(r));this._removeSymbols(h);0===e.symbols.size&&this._tiles.delete(d.id)}};f._removeSymbols=function(d){for(const [h,{flat:r}]of d)for(const m of r){d=m.unique;var e=d.tileSymbols;const n=e.length-1;for(let q=0;q<n;q++)if(e[q]===m){e[q]=e[n];
break}e.length=n;0===n&&(e=this._uniqueSymbolsReferences.get(h),e.delete(d),0===e.size&&this._uniqueSymbolsReferences.delete(h));m.unique=null}};f._addSymbols=function(d,e){if(0!==e.size){var h=this._visibleTiles;for(const r of h)r.parentTile||r.key.world!==d.world||r.key.level===d.level&&!r.key.equals(d)||this._matchSymbols(r,d,e);for(const [r,m]of e)for(const n of m)v.isNone(n.unique)&&(d=this._createUnique(),n.unique=d,d.tileSymbols.push(n),e=this._uniqueSymbolsReferences.get(r),e||(e=new Set,
this._uniqueSymbolsReferences.set(r,e)),e.add(d))}};f._matchSymbols=function(d,e,h){if(d.key.level>e.level){var r=d.key.level-e.level;if(d.key.row>>r!==e.row||d.key.col>>r!==e.col)return}if(e.level>d.key.level&&(r=e.level-d.key.level,e.row>>r!==d.key.row||e.col>>r!==d.key.col))return;if(e.equals(d.key))for(var m of d.childrenTiles)this._matchSymbols(m,e,h);else{m=new Map;for(const [t,w]of h){var n=[];for(const E of w)h=g.tileCoordChange(this.tileCoordRange,E.xTile,e.level,e.col,d.key.level,d.key.col),
r=g.tileCoordChange(this.tileCoordRange,E.yTile,e.level,e.row,d.key.level,d.key.row),0<=h&&h<this.tileCoordRange&&0<=r&&r<this.tileCoordRange&&n.push({symbol:E,xTransformed:h,yTransformed:r});h=[];r=d.key.level<e.level?1:1<<d.key.level-e.level;const A=this._tiles.get(d.id).symbols.get(t);if(A){const E=A.flat;for(const B of n){var q=!1;let C;const G=B.xTransformed,y=B.yTransformed;C=v.isSome(A.index)?A.index.getCell(G,y):E;n=B.symbol;const x=n.hash;for(const D of C)if(x===D.hash&&Math.abs(G-D.xTile)<=
r&&Math.abs(y-D.yTile)<=r){q=D.unique;n.unique=q;q.tileSymbols.push(n);q=!0;break}q||h.push(n)}}0<h.length&&m.set(t,h)}for(const t of d.childrenTiles)this._matchSymbols(t,e,m)}};f._createUniqueSymbolLayerArray=function(){var d=this._uniqueSymbolsReferences;const e=Array(d.size);let h=0;for(const [r,m]of d){const n=Array(m.size);d=0;for(const q of m)n[d++]=q;e[h]={styleLayerUID:r,uniqueSymbols:n};h++}return e};a._createClass(l,[{key:"uniqueSymbols",get:function(){v.isNone(this._uniqueSymbolLayerArray)&&
(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());return this._uniqueSymbolLayerArray}}]);return l}();b.SymbolRepository=c;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(b,a,v,g){return function(c){function l(){var d=c.apply(this,arguments)||this;d._fullCacheLodInfos=
null;d._levelByScale={};return d}b._inheritsLoose(l,c);var f=l.prototype;f.getTileParentId=function(d){d=g.pool.acquire(d);const e=0===d.level?null:g.getId(d.level-1,d.row>>1,d.col>>1,d.world);g.pool.release(d);return e};f.getTileCoverage=function(d,e,h){d=c.prototype.getTileCoverage.call(this,d,e,h);if(!d)return d;const r=1<<d.lodInfo.level;d.spans=d.spans.filter(m=>0<=m.row&&m.row<r);return d};f.scaleToLevel=function(d){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[d])return this._levelByScale[d];
var e=this._fullCacheLodInfos;if(d>e[0].scale)return e[0].level;let h;for(let r=0;r<e.length-1;r++)if(h=e[r+1],d>h.scale)return e=e[r],e.level+(e.scale-d)/(e.scale-h.scale);return e[e.length-1].level};f._initializeFullCacheLODs=function(d){d=0===d[0].level?d.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale})):a.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(e=>({level:e.level,resolution:e.resolution,scale:e.scale}));for(let e=0;e<d.length;e++)this._levelByScale[d[e].scale]=
d[e].level;this._fullCacheLodInfos=d};return l}(v)})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(b,a,v,g,c,l){const f=new c("0/0/0/0");let d=function(){function h(m,n,q,t,w,A,E,B){this.x=m;this.ymin=n;this.ymax=q;this.invM=t;this.leftAdjust=w;this.rightAdjust=A;this.leftBound=E;this.rightBound=B}h.create=function(m,n){m[1]>n[1]&&([m,
n]=[n,m]);const [q,t]=m,[w,A]=n;m=w-q;n=A-t;n=0!==n?m/n:0;const E=(Math.ceil(t)-t)*n,B=(Math.floor(t)-t)*n;return new h(q,Math.floor(t),Math.ceil(A),n,0>m?E:B,0>m?B:E,0>m?w:q,0>m?q:w)};var r=h.prototype;r.incrRow=function(){this.x+=this.invM};r.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};r.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return h}();const e=[[0,0],[0,0],[0,0],[0,0]];return function(){function h(m,n=null){this.tileInfo=
m;this.fullExtent=n;this.scales=[];this._infoByScale={};this._infoByLevel={};const q=m.lods.slice();q.sort((w,A)=>A.scale-w.scale);const t=this._lodInfos=q.map(w=>v.create(m,w,n));q.forEach((w,A)=>{this._infoByLevel[w.level]=t[A];this._infoByScale[w.scale]=t[A];this.scales[A]=w.scale},this);this._wrap=m.isWrappable}var r=h.prototype;r.getLODInfoAt=function(m){return this._infoByLevel["number"===typeof m?m:m.level]};r.getTileBounds=function(m,n,q=!1){f.set(n);return(n=this._infoByLevel[f.level])?n.getTileBounds(m,
f,q):m};r.getTileCoords=function(m,n,q=!1){f.set(n);return(n=this._infoByLevel[f.level])?n.getTileCoords(m,f,q):m};r.getTileCoverage=function(m,n=192,q="closest"){q="closest"===q?this.getClosestInfoForScale(m.scale):this.getSmallestInfoForScale(m.scale);const t=g.pool.acquire(q),w=this._wrap;var A=Infinity;let E=-Infinity;const B=t.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-n;e[1][0]=e[2][0]=m.size[0]+n;e[2][1]=e[3][1]=m.size[1]+n;for(C of e)m.toMap(C,C),C[0]=q.getColumnForX(C[0]),C[1]=q.getRowForY(C[1]);
m=[];var C=3;for(n=0;4>n;n++)e[n][1]===e[C][1]?C=n:(C=d.create(e[n],e[C]),A=Math.min(C.ymin,A),E=Math.max(C.ymax,E),void 0===m[C.ymin]&&(m[C.ymin]=[]),m[C.ymin].push(C),C=n);if(null==A||null==E||100<E-A)return null;for(n=[];A<E;){null!=m[A]&&(n=n.concat(m[A]));C=Infinity;var G=-Infinity;for(var y=n.length-1;0<=y;y--){var x=n[y];C=Math.min(C,x.getLeftCol());G=Math.max(G,x.getRightCol())}C=Math.floor(C);G=Math.floor(G);if(A>=q.first[1]&&A<=q.last[1])if(w)if(q.size[0]<q.worldSize[0])for(y=Math.floor(G/
q.worldSize[0]),x=Math.floor(C/q.worldSize[0]);x<=y;x++)B.push(new l(A,Math.max(q.getFirstColumnForWorld(x),C),Math.min(q.getLastColumnForWorld(x),G)));else B.push(new l(A,C,G));else C>q.last[0]||G<q.first[0]||(C=Math.max(C,q.first[0]),G=Math.min(G,q.last[0]),B.push(new l(A,C,G)));A+=1;for(C=n.length-1;0<=C;C--)G=n[C],G.ymax>=A?G.incrRow():n.splice(C,1)}return t};r.getTileParentId=function(m){f.set(m);m=this._lodInfos.indexOf(this._infoByLevel[f.level])-1;if(0>m)return null;this._getTileIdAtLOD(f,
this._lodInfos[m],f);return f.id};r.getTileResolution=function(m){return(m=this._infoByLevel["object"===typeof m?m.level:m])?m.resolution:-1};r.getTileScale=function(m){return(m=this._infoByLevel[m.level])?m.scale:-1};r.intersects=function(m,n){f.set(n);n=this._infoByLevel[f.level];const q=m.lodInfo;if(q.resolution>n.resolution){this._getTileIdAtLOD(f,q,f);var t=q.denormalizeCol(f.col,f.world);for(var w of m.spans)if(w.row===f.row&&w.colFrom<=t&&w.colTo>=t)return!0}if(q.resolution<n.resolution){const [E,
B,C,G]=m.spans.reduce((y,x)=>{y[0]=Math.min(y[0],x.row);y[1]=Math.max(y[1],x.row);y[2]=Math.min(y[2],x.colFrom);y[3]=Math.max(y[3],x.colTo);return y},[Infinity,-Infinity,Infinity,-Infinity]);t=n.denormalizeCol(f.col,f.world);m=q.getColumnForX(n.getXForColumn(t));w=q.getRowForY(n.getYForRow(f.row));t=q.getColumnForX(n.getXForColumn(t+1))-1;n=q.getRowForY(n.getYForRow(f.row+1))-1;return!(m>G||t<C||w>B||n<E)}const A=q.denormalizeCol(f.col,f.world);return m.spans.some(E=>E.row===f.row&&E.colFrom<=A&&
E.colTo>=A)};r.normalizeBounds=function(m,n,q){m[0]=n[0];m[1]=n[1];m[2]=n[2];m[3]=n[3];this._wrap&&(n=a.getInfo(this.tileInfo.spatialReference),q=-q*(n.valid[1]-n.valid[0]),m[0]+=q,m[2]+=q);return m};r.getSmallestInfoForScale=function(m){const n=this.scales;if(this._infoByScale[m])return this._infoByScale[m];if(m>n[0])return this._infoByScale[n[0]];for(let q=1;q<n.length-1;q++)if(m>n[q]+1E-6)return this._infoByScale[n[q-1]];return this._infoByScale[n[n.length-1]]};r.getClosestInfoForScale=function(m){const n=
this.scales;if(this._infoByScale[m])return this._infoByScale[m];m=n.reduce((q,t)=>Math.abs(t-m)<Math.abs(q-m)?t:q,n[0]);return this._infoByScale[m]};r.scaleToLevel=function(m){const n=this.scales;if(this._infoByScale[m])return this._infoByScale[m].level;for(let q=n.length-1;0<=q;q--)if(m<n[q])return q===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[q]].level+(n[q]-m)/(n[q]-n[q+1]);return this._infoByScale[n[0]].level};r.scaleToZoom=function(m){return this.tileInfo.scaleToZoom(m)};
r._getTileIdAtLOD=function(m,n,q){const t=this._infoByLevel[q.level];m.set(q);if(n.resolution<t.resolution)return null;if(n.resolution===t.resolution)return m;m.level=n.level;m.col=Math.floor(q.col*t.resolution/n.resolution+.01);m.row=Math.floor(q.row*t.resolution/n.resolution+.01);return m};b._createClass(h,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return h}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(b,a,v){function g(l,f,d){l[0]=f;l[1]=d;return l}const c=new v("0/0/0/0");return function(){function l(d,e,h,r,m,n,q,t,w,A,E,B){this.level=d;this.resolution=e;this.scale=h;this.origin=r;this.first=m;this.last=n;this.size=q;this.norm=t;this.worldStart=w;this.worldEnd=A;this.worldSize=E;this.wrap=B}l.create=function(d,e,h=null){var r=a.getInfo(d.spatialReference);const m=e.origin||[d.origin.x,d.origin.y],n=[d.size[0]*e.resolution,d.size[1]*e.resolution],q=[-Infinity,-Infinity],
t=[Infinity,Infinity],w=[Infinity,Infinity];b.isSome(h)&&(g(q,Math.max(0,Math.floor((h.xmin-m[0])/n[0])),Math.max(0,Math.floor((m[1]-h.ymax)/n[1]))),g(t,Math.max(0,Math.floor((h.xmax-m[0])/n[0])),Math.max(0,Math.floor((m[1]-h.ymin)/n[1]))),g(w,t[0]-q[0]+1,t[1]-q[1]+1));const {cols:A,rows:E}=e;!h&&A&&E&&(g(q,A[0],E[0]),g(t,A[1],E[1]),g(w,A[1]-A[0]+1,E[1]-E[0]+1));let B;d.isWrappable?(d=[Math.ceil(Math.round((r.valid[1]-r.valid[0])/e.resolution)/d.size[0]),w[1]],r=[Math.floor((r.origin[0]-m[0])/n[0]),
q[1]],h=[d[0]+r[0]-1,t[1]],B=!0):(r=q,h=t,d=w,B=!1);return new l(e.level,e.resolution,e.scale,m,q,t,w,n,r,h,d,B)};var f=l.prototype;f.normalizeCol=function(d){if(!this.wrap)return d;const e=this.worldSize[0];return 0>d?e-1-Math.abs((d+1)%e):d%e};f.denormalizeCol=function(d,e){return this.wrap?this.worldSize[0]*e+d:d};f.getWorldForColumn=function(d){return this.wrap?Math.floor(d/this.worldSize[0]):0};f.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]};f.getLastColumnForWorld=
function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};f.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};f.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};f.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};f.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};f.getTileBounds=function(d,e,h=!1){c.set(e);var r=h?c.col:this.denormalizeCol(c.col,c.world),m=c.row;e=this.getXForColumn(r);h=this.getYForRow(m+1);r=this.getXForColumn(r+1);
m=this.getYForRow(m);d[0]=e;d[1]=h;d[2]=r;d[3]=m;return d};f.getTileCoords=function(d,e,h=!1){c.set(e);e=h?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(d)?g(d,this.getXForColumn(e),this.getYForRow(c.row)):(d.x=this.getXForColumn(e),d.y=this.getYForRow(c.row));return d};return l}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(b){let a=function(){function v(){this.spans=[]}var g=v.prototype;g.acquire=function(c){this.lodInfo=c};g.release=function(){this.lodInfo=
null;this.spans.length=0};g.forEach=function(c,l){const {spans:f,lodInfo:d}=this,{level:e}=d;if(0!==f.length)for(const {row:h,colFrom:r,colTo:m}of f)for(let n=r;n<=m;n++)c.call(l,e,h,d.normalizeCol(n),d.getWorldForColumn(n))};return v}();a.pool=new b(a);return a})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(b,a,v){this.row=b;this.colFrom=a;this.colTo=v}})},"esri/views/2d/engine/vectorTiles/VTLPainter3D":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../vtlBrushes ./shaders/VTLMaterialManager ./style/StyleDefinition ../../../webgl/enums".split(" "),
function(b,a,v,g,c,l){return function(){function f(e,h){this.spriteMosaic=e;this.glyphMosaic=h;this._brushCache=new Map;this._vtlMaterialManager=new g}var d=f.prototype;d.dispose=function(){this._brushCache&&(this._brushCache.forEach(e=>e.dispose()),this._brushCache=null);this._vtlMaterialManager=a.disposeMaybe(this._vtlMaterialManager);this.spriteMosaic.dispose();this.glyphMosaic.dispose()};d.drawTile=function(e,h,r){const {context:m}=e,n=r.layers;0<r.backgroundBucketIds.length&&(e.renderPass="background",
r.backgroundBucketIds.forEach(t=>this._renderStyleLayer(r.getLayerById(t),e,h,!0)));m.setBlendingEnabled(!1);m.setDepthTestEnabled(!0);m.setDepthWriteEnabled(!0);m.setDepthFunction(l.CompareFunction.LEQUAL);e.renderPass="opaque";for(var q=n.length-1;0<=q;q--)this._renderStyleLayer(n[q],e,h,!1);m.setDepthWriteEnabled(!1);m.setBlendingEnabled(!0);m.setBlendFunctionSeparate(l.BlendFactor.ONE,l.BlendFactor.ONE_MINUS_SRC_ALPHA,l.BlendFactor.ONE,l.BlendFactor.ONE_MINUS_SRC_ALPHA);e.renderPass="translucent";
for(q=0;q<n.length;q++)this._renderStyleLayer(n[q],e,h,!1);m.setDepthTestEnabled(!1);m.bindVAO()};d._renderStyleLayer=function(e,h,r,m=!1){if(m||e&&r.layerData.has(e.uid))if(m=e.getLayoutProperty("visibility"),!m||m.getValue()!==c.Visibility.NONE){({renderPass:m}=h);switch(e.type){case c.StyleLayerType.BACKGROUND:if("background"!==m)return;var n="vtlBackground";break;case c.StyleLayerType.FILL:if("opaque"!==m&&"translucent"!==h.renderPass)return;n="vtlFill";break;case c.StyleLayerType.LINE:if("translucent"!==
m)return;n="vtlLine";break;case c.StyleLayerType.CIRCLE:if("translucent"!==m)return;n="vtlCircle";break;case c.StyleLayerType.SYMBOL:if("translucent"!==m)return;n="vtlSymbol"}m=h.displayLevel;void 0!==e.minzoom&&e.minzoom>m+1E-6||void 0!==e.maxzoom&&e.maxzoom<=m-1E-6||(h.styleLayerUID=e.uid,h.styleLayer=e,this._drawWithBrush(h,r,n))}};d._drawWithBrush=function(e,h,r){this._brushCache.has(r)||this._brushCache.set(r,new v.vtlBrushes[r]);this._brushCache.get(r).drawMany(e,[h])};b._createClass(f,[{key:"vectorTilesMaterialManager",
get:function(){return this._vtlMaterialManager}}]);return f}()})},"esri/views/2d/engine/vtlBrushes":function(){define("exports ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol".split(" "),function(b,a,v,g,c,l){b.vtlBrushes={vtlBackground:a.WGLBrushVTLBackground,vtlFill:g.WGLBrushVTLFill,vtlLine:c.WGLBrushVTLLine,vtlCircle:v.WGLBrushVTLCircle,vtlSymbol:l.WGLBrushVTLSymbol};Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../chunks/mat3f32 ../../../../../chunks/vec4f32 ../definitions ../enums ../number ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),function(b,a,v,g,c,l,f,d,e,h,r,m,n){h=
function(q){function t(){var A=q.apply(this,arguments)||this;A._color=l.fromValues(1,0,0,1);A._patternMatrix=c.create();A._programOptions={id:!1,pattern:!1};return A}a._inheritsLoose(t,q);var w=t.prototype;w.dispose=function(){this._vao&&(this._vao.dispose(),this._vao=null)};w.drawMany=function(A,E){const {context:B,painter:C,styleLayerUID:G,requestRender:y,allowDelayedRender:x}=A;this._loadWGLResources(A);const D=A.displayLevel;var J=A.styleLayer,K=J.backgroundMaterial;const R=C.vectorTilesMaterialManager;
var L=J.getPaintValue("background-color",D);const S=J.getPaintValue("background-opacity",D),N=J.getPaintValue("background-pattern",D),O=void 0!==N,T=L[3]*S,M=A.spriteMosaic;let H,P;const W=(window.devicePixelRatio|1)>f.VTL_HIGH_RES_CUTOFF?2:1;A=A.drawPhase===d.WGLDrawPhase.HITTEST;const U=this._programOptions;U.id=A;U.pattern=O;K=R.getMaterialProgram(B,K,U);if(x&&g.isSome(y)&&!K.isCompiled)y();else{B.bindVAO(this._vao);B.useProgram(K);if(O){L=M.getMosaicItemPosition(N,!0);if(g.isSome(L)){const {tl:Y,
br:X,page:ea}=L;H=X[0]-Y[0];P=X[1]-Y[1];L=M.getPageSize(ea);g.isSome(L)&&(M.bind(B,m.TextureSamplingMode.LINEAR,ea,f.VTL_TEXTURE_BINDING_UNIT_SPRITES),K.setUniform4f("u_tlbr",Y[0],Y[1],X[0],X[1]),K.setUniform2fv("u_mosaicSize",L),K.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES))}K.setUniform1f("u_opacity",S)}else this._color[0]=T*L[0],this._color[1]=T*L[1],this._color[2]=T*L[2],this._color[3]=T,K.setUniform4fv("u_color",this._color);K.setUniform1f("u_depth",J.z||0);A&&(J=e.u32to4Xu8(G+
1),K.setUniform4fv("u_id",J));for(const Y of E)K.setUniform1f("u_coord_range",Y.rangeX),K.setUniformMatrix3fv("u_dvsMat3",Y.transforms.dvs),O&&(J=W*Y.width*Math.max(2**(Math.round(D)-Y.key.level),1),E=J/v.nextPowerOfTwo(H),J/=v.nextPowerOfTwo(P),this._patternMatrix[0]=E,this._patternMatrix[4]=J,K.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),B.setStencilFunction(m.CompareFunction.EQUAL,0,255),B.drawArrays(m.PrimitiveType.TRIANGLE_STRIP,0,4)}};w._loadWGLResources=function(A){if(!this._vao){var {context:E,
styleLayer:B}=A;A=B.backgroundMaterial;var C=new Int8Array([0,0,1,0,0,1,1,1]);C=r.BufferObject.createVertex(E,m.Usage.STATIC_DRAW,C);this._vao=new n.VertexArrayObject(E,A.getAttributeLocations(),A.getLayoutInfo(),{geometry:C})}};return t}(h);b.WGLBrushVTLBackground=h;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(b){b.ANGLE_FACTOR_256=256/360;b.ATTRIBUTE_DATA_ANIMATION=1;b.ATTRIBUTE_DATA_DD0=
3;b.ATTRIBUTE_DATA_DD1=4;b.ATTRIBUTE_DATA_FILTER_FLAGS=0;b.ATTRIBUTE_DATA_GPGPU=2;b.ATTRIBUTE_DATA_VV=3;b.ATTRIBUTE_STORE_TEXTURE_SIZE=1024;b.AVERAGE_GLYPH_MOSAIC_ITEM={metrics:{width:15,height:17,left:0,top:-7,advance:14}};b.BITSET_FILL_RANDOM_PATTERN_OFFSET=4;b.BITSET_GENERIC_CONSIDER_ALPHA_ONLY=16;b.BITSET_GENERIC_LOCK_COLOR=2;b.BITSET_LINE_SCALE_DASH=4;b.BITSET_MARKER_ALIGNMENT_MAP=1;b.BITSET_MARKER_ALIGNMENT_SCREEN=0;b.BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE=4;b.BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY=
8;b.BITSET_TYPE_FILL_OUTLINE=1;b.BUFFER_DATA_MINIMUM_SIZE=128;b.BUFFER_DATA_POOL_SIZE=4;b.CHART_MAX_FIELDS=10;b.COLLISION_BOX_PADDING=16;b.COLLISION_BUCKET_SIZE=128;b.COLLISION_EARLY_REJECT_BUCKET_SIZE=16;b.COLLISION_MAX_ZOOM_DELTA=1;b.COLLISION_PLACEMENT_PADDING=8;b.COLLISION_TILE_BOX_SIZE=4;b.DEBUG_LABELS=!1;b.DISPLAY_RECORD_INT_PER_ELEMENT=8;b.DOT_DENSITY_MAX_FIELDS=8;b.EFFECT_FLAG_0=4;b.ENABLE_EARLY_LABEL_DISCARD=!1;b.EXTRUDE_SCALE=64;b.FILTER_FLAG_0=2;b.GLYPH_SIZE=24;b.HEURISTIC_GLYPHS_PER_FEATURE=
10;b.HEURISTIC_GLYPHS_PER_LINE=50;b.HIGHLIGHT_FLAG=1;b.HITTEST_RADIUS=3;b.MAGIC_LABEL_LINE_HEIGHT=29;b.MAX_FILTERS=2;b.MAX_GPU_UPLOADS_PER_FRAME=2;b.MIN_MAX_ZOOM_PRECISION_FACTOR=10;b.NAN_MAGIC_NUMBER=1E-30;b.PATCH_PIXEL_BUFFER_ALLOC_SIZE=500;b.PATTERN_FILL_RASTERIZATION_SCALE=2;b.PICTURE_FILL_COLOR=4294967295;b.RANDOM_INSIDE_POLYGON_TEXTURE_SIZE=1024;b.RASTER_TILE_SIZE=256;b.SPRITE_PADDING=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_0=1;b.TEXTURE_BINDING_ATTRIBUTE_DATA_1=2;b.TEXTURE_BINDING_ATTRIBUTE_DATA_2=
3;b.TEXTURE_BINDING_ATTRIBUTE_DATA_3=4;b.TEXTURE_BINDING_ATTRIBUTE_DATA_4=5;b.TEXTURE_BINDING_ATTRIBUTE_DATA_5=6;b.TEXTURE_BINDING_BITMAP=0;b.TEXTURE_BINDING_GLYPH_ATLAS=0;b.TEXTURE_BINDING_GPGPU=12;b.TEXTURE_BINDING_HIGHLIGHT_0=5;b.TEXTURE_BINDING_HIGHLIGHT_1=6;b.TEXTURE_BINDING_RENDERER_0=5;b.TEXTURE_BINDING_RENDERER_1=6;b.TEXTURE_BINDING_SPRITE_ATLAS=0;b.TEXTURE_UPLOAD_MANAGER_BUDGET=4;b.TEXTURE_UPLOAD_MANAGER_CHUNK_SIZE=128;b.TEXT_PLACEMENT_PADDING=8;b.THIN_LINE_HALF_WIDTH_THRESHOLD=1.05;b.TILE_SIZE=
512;b.VTL_HIGH_RES_CUTOFF=1.15;b.VTL_TEXTURE_BINDING_UNIT_GLYPHS=6;b.VTL_TEXTURE_BINDING_UNIT_SPRITES=5;b.WEBGL_MAX_INNER_STOPS=6;b.WEBGL_MAX_STOPS=8;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(b){b.WGLGeometryType=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(b.WGLGeometryType||(b.WGLGeometryType={}));
b.WGLGeometryTransactionStatus=void 0;(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(b.WGLGeometryTransactionStatus||(b.WGLGeometryTransactionStatus={}));b.WGLDrawPhase=void 0;(function(a){a[a.NONE=0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(b.WGLDrawPhase||(b.WGLDrawPhase={}));
b.VVType=void 0;(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(b.VVType||(b.VVType={}));b.WGLVVFlag=void 0;(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(b.WGLVVFlag||(b.WGLVVFlag={}));b.WGLVVTarget=void 0;
(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(b.WGLVVTarget||(b.WGLVVTarget={}));b.MosaicType=void 0;(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(b.MosaicType||(b.MosaicType={}));b.WGLSymbologyType=void 0;(function(a){a[a.DEFAULT=0]="DEFAULT";a[a.SIMPLE=1]="SIMPLE";a[a.DOT_DENSITY=2]="DOT_DENSITY";
a[a.OUTLINE_FILL=3]="OUTLINE_FILL";a[a.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";a[a.HEATMAP=5]="HEATMAP";a[a.PIE_CHART=6]="PIE_CHART"})(b.WGLSymbologyType||(b.WGLSymbologyType={}));Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(b){function a(c,l,f){return Math.round(Math.max(Math.min(c,f),l))}const v=new Float32Array(1),g=new Uint32Array(v.buffer);b.i16=function(c){return a(c,
-32768,32767)};b.i1616to32=function(c,l){return 65535&c|l<<16};b.i32=function(c){return a(c,-2147483648,2147483647)};b.i8=function(c){return a(c,-128,127)};b.i8816to32=function(c,l,f){return c&255|(l&255)<<8|f<<16};b.i8888to32=function(c,l,f,d){return c&255|(l&255)<<8|(f&255)<<16|d<<24};b.numTo32=function(c){return c|0};b.toFloat32=function(c){g[0]=c;return v[0]};b.toUint32=function(c){v[0]=c;return g[0]};b.u16=function(c){return a(c,0,65535)};b.u32=function(c){return a(c,0,4294967295)};b.u32to4Xu8=
function(c){return[c&255,(c&65280)>>>8,(c&16711680)>>>16,(c&4278190080)>>>24]};b.u4u4to8=function(c,l){return 15&c|(15&l)<<4};b.u8=function(c){return a(c,0,255)};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(function(){return function(){function b(){this.name=this.constructor.name||"UnnamedBrush";this.brushEffect=null}var a=b.prototype;a.prepareState=function(v,g){};a.draw=function(v,g,c){};
a.drawMany=function(v,g,c){for(const l of g)l.visible&&this.draw(v,l,c)};return b}()})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,v,g,c,l,f,d){f=function(e){function h(){var m=e.apply(this,arguments)||this;m._programOptions={id:!1};return m}a._inheritsLoose(h,e);var r=
h.prototype;r.dispose=function(){};r.drawMany=function(m,n){const {context:q,displayLevel:t,requiredLevel:w,state:A,drawPhase:E,painter:B,spriteMosaic:C,styleLayerUID:G,requestRender:y,allowDelayedRender:x}=m;if(n.some(N=>N.layerData.get(G)?.circleIndexCount??!1)){m=m.styleLayer;var D=m.circleMaterial,J=B.vectorTilesMaterialManager,K=m.getPaintValue("circle-translate",t),R=m.getPaintValue("circle-translate-anchor",t),L=E===c.WGLDrawPhase.HITTEST,S=this._programOptions;S.id=L;J=J.getMaterialProgram(q,
D,S);if(x&&v.isSome(y)&&!J.isCompiled)y();else{q.useProgram(J);J.setUniformMatrix3fv("u_displayMat3",R===g.TranslateAnchor.VIEWPORT?A.displayMat3:A.displayViewMat3);J.setUniform2fv("u_circleTranslation",K);J.setUniform1f("u_depth",m.z);J.setUniform1f("u_antialiasingWidth",1.2);K=-1;L&&(L=l.u32to4Xu8(G+1),J.setUniform4fv("u_id",L));for(const N of n)N.layerData.has(G)&&(N.key.level!==K&&(K=N.key.level,D.setDataUniforms(J,t,m,K,C)),n=N.layerData.get(G),n.circleIndexCount&&(n.prepareForRendering(q),L=
n.circleVertexArrayObject,v.isNone(L)||(q.bindVAO(L),J.setUniformMatrix3fv("u_dvsMat3",N.transforms.dvs),w!==N.key.level?q.setStencilFunction(d.CompareFunction.EQUAL,N.stencilRef,255):q.setStencilFunction(d.CompareFunction.GREATER,255,255),q.drawElements(d.PrimitiveType.TRIANGLES,n.circleIndexCount,d.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n.circleIndexStart),N.triangleCount+=n.circleIndexCount/3)))}}};return h}(f);b.WGLBrushVTLCircle=f;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,v,g,c,l,f,d,e){const h=1/65536;d=function(r){function m(){var q=r.apply(this,arguments)||this;q._fillProgramOptions={id:!1,pattern:!1};q._outlineProgramOptions={id:!1};return q}
a._inheritsLoose(m,r);var n=m.prototype;n.dispose=function(){};n.drawMany=function(q,t){const {displayLevel:w,drawPhase:A,renderPass:E,spriteMosaic:B,styleLayerUID:C}=q;var G=!1;for(var y of t)if(y.layerData.has(C)){var x=y.layerData.get(C);if(0<x.fillIndexCount||0<x.outlineIndexCount){G=!0;break}}if(G){G=q.styleLayer;var D=G.getPaintProperty("fill-pattern");x=(y=void 0!==D)&&D.isDataDriven;if(y&&!x){var J=D.getValue(w);J=B.getMosaicItemPosition(J,!0)}D=!y&&G.getPaintValue("fill-antialias",w);var K=
!0,R=1;if(!y){var L=G.getPaintProperty("fill-color"),S=G.getPaintProperty("fill-opacity");L?.isDataDriven||S?.isDataDriven||(R=G.getPaintValue("fill-color",w),R=G.getPaintValue("fill-opacity",w)*R[3],1<=R&&(K=!1))}if(!K||"opaque"!==E){var N;A===l.WGLDrawPhase.HITTEST&&(N=f.u32to4Xu8(C+1));L=G.getPaintValue("fill-translate",w);S=G.getPaintValue("fill-translate-anchor",w);(K||"translucent"!==E)&&this._drawFill(q,C,G,t,L,S,y,J,x,N);J=!G.hasDataDrivenOutlineColor&&G.outlineUsesFillColor&&1>R;D&&"opaque"!==
E&&!J&&this._drawOutline(q,C,G,t,L,S,N)}}};n._drawFill=function(q,t,w,A,E,B,C,G,y,x){if(!C||y||!v.isNone(G)){var {context:D,displayLevel:J,state:K,drawPhase:R,painter:L,pixelRatio:S,spriteMosaic:N,requestRender:O,allowDelayedRender:T}=q;q=w.fillMaterial;var M=L.vectorTilesMaterialManager,H=S>c.VTL_HIGH_RES_CUTOFF?2:1,P=R===l.WGLDrawPhase.HITTEST,W=this._fillProgramOptions;W.id=P;W.pattern=C;M=M.getMaterialProgram(D,q,W);if(T&&v.isSome(O)&&!M.isCompiled)O();else{D.useProgram(M);v.isSome(G)&&({page:G}=
G,W=N.getPageSize(G),v.isSome(W)&&(N.bind(D,e.TextureSamplingMode.LINEAR,G,c.VTL_TEXTURE_BINDING_UNIT_SPRITES),M.setUniform2fv("u_mosaicSize",W),M.setUniform1i("u_texture",c.VTL_TEXTURE_BINDING_UNIT_SPRITES)));M.setUniformMatrix3fv("u_displayMat3",B===g.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);M.setUniform2fv("u_fillTranslation",E);M.setUniform1f("u_depth",w.z+h);P&&M.setUniform4fv("u_id",x);E=-1;for(const U of A)if(U.layerData.has(t)&&(U.key.level!==E&&(E=U.key.level,q.setDataUniforms(M,
J,w,E,N)),A=U.layerData.get(t),A.fillIndexCount&&(A.prepareForRendering(D),B=A.fillVertexArrayObject,!v.isNone(B)))){D.bindVAO(B);M.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);D.setStencilFunction(e.CompareFunction.EQUAL,U.stencilRef,255);C&&M.setUniform1f("u_patternFactor",U.rangeX/(H*U.width*Math.max(2**(Math.round(J)-U.key.level),1)));if(y){B=A.patternMap;if(!B)continue;for(const [Y,X]of B)B=N.getPageSize(Y),v.isSome(B)&&(N.bind(D,e.TextureSamplingMode.LINEAR,Y,c.VTL_TEXTURE_BINDING_UNIT_SPRITES),
M.setUniform2fv("u_mosaicSize",B),M.setUniform1i("u_texture",c.VTL_TEXTURE_BINDING_UNIT_SPRITES),D.drawElements(e.PrimitiveType.TRIANGLES,X[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*X[0]))}else D.drawElements(e.PrimitiveType.TRIANGLES,A.fillIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*A.fillIndexStart);U.triangleCount+=A.fillIndexCount/3}}}};n._drawOutline=function(q,t,w,A,E,B,C){const {context:G,displayLevel:y,state:x,drawPhase:D,painter:J,pixelRatio:K,spriteMosaic:R,
requestRender:L,allowDelayedRender:S}=q;q=w.outlineMaterial;var N=J.vectorTilesMaterialManager;const O=.75/K,T=D===l.WGLDrawPhase.HITTEST,M=this._outlineProgramOptions;M.id=T;N=N.getMaterialProgram(G,q,M);if(S&&v.isSome(L)&&!N.isCompiled)L();else{G.useProgram(N);N.setUniformMatrix3fv("u_displayMat3",B===g.TranslateAnchor.VIEWPORT?x.displayMat3:x.displayViewMat3);N.setUniform2fv("u_fillTranslation",E);N.setUniform1f("u_depth",w.z+h);N.setUniform1f("u_outline_width",O);T&&N.setUniform4fv("u_id",C);
E=-1;for(const H of A)H.layerData.has(t)&&(H.key.level!==E&&(E=H.key.level,q.setDataUniforms(N,y,w,E,R)),A=H.layerData.get(t),A.prepareForRendering(G),A.outlineIndexCount&&(B=A.outlineVertexArrayObject,v.isNone(B)||(G.bindVAO(B),N.setUniformMatrix3fv("u_dvsMat3",H.transforms.dvs),G.setStencilFunction(e.CompareFunction.EQUAL,H.stencilRef,255),G.drawElements(e.PrimitiveType.TRIANGLES,A.outlineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*A.outlineIndexStart),H.triangleCount+=A.outlineIndexCount/
3)))}};return m}(d);b.WGLBrushVTLFill=d;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,v,g,c,l,f,d,e){d=function(h){function r(){var n=h.apply(this,arguments)||this;n._programOptions=
{id:!1,pattern:!1,sdf:!1};return n}a._inheritsLoose(r,h);var m=r.prototype;m.dispose=function(){};m.drawMany=function(n,q){const {context:t,displayLevel:w,state:A,drawPhase:E,painter:B,pixelRatio:C,spriteMosaic:G,styleLayerUID:y,requestRender:x,allowDelayedRender:D}=n;if(q.some(U=>U.layerData.get(y)?.lineIndexCount??!1)){n=n.styleLayer;var J=n.lineMaterial,K=B.vectorTilesMaterialManager,R=n.getPaintValue("line-translate",w),L=n.getPaintValue("line-translate-anchor",w),S=n.getPaintProperty("line-pattern"),
N=void 0!==S,O=N&&S.isDataDriven;if(N&&!O){S=S.getValue(w);var T=G.getMosaicItemPosition(S)}var M;S=!1;if(!N){var H=n.getPaintProperty("line-dasharray");S=(M=void 0!==H)&&H.isDataDriven;M&&!S&&(T=H.getValue(w),T=n.getDashKey(T,n.getLayoutValue("line-cap",w)),T=G.getMosaicItemPosition(T))}H=1/C;var P=E===l.WGLDrawPhase.HITTEST,W=this._programOptions;W.id=P;W.pattern=N;W.sdf=M;M=K.getMaterialProgram(t,J,W);if(D&&v.isSome(x)&&!M.isCompiled)x();else{t.useProgram(M);M.setUniformMatrix3fv("u_displayViewMat3",
A.displayViewMat3);M.setUniformMatrix3fv("u_displayMat3",L===g.TranslateAnchor.VIEWPORT?A.displayMat3:A.displayViewMat3);M.setUniform2fv("u_lineTranslation",R);M.setUniform1f("u_depth",n.z);M.setUniform1f("u_antialiasing",H);P&&(R=f.u32to4Xu8(y+1),M.setUniform4fv("u_id",R));T&&v.isSome(T)&&({page:R}=T,L=G.getPageSize(R),v.isSome(L)&&(G.bind(t,e.TextureSamplingMode.LINEAR,R,c.VTL_TEXTURE_BINDING_UNIT_SPRITES),M.setUniform2fv("u_mosaicSize",L),M.setUniform1i("u_texture",c.VTL_TEXTURE_BINDING_UNIT_SPRITES)));
R=-1;for(const U of q)if(U.layerData.has(y)&&(U.key.level!==R&&(R=U.key.level,J.setDataUniforms(M,w,n,R,G)),M.setUniform1f("u_zoomFactor",2**(w-R)/C),q=U.layerData.get(y),q.lineIndexCount&&(q.prepareForRendering(t),L=q.lineVertexArrayObject,!v.isNone(L)))){t.bindVAO(L);M.setUniformMatrix3fv("u_dvsMat3",U.transforms.dvs);t.setStencilFunction(e.CompareFunction.EQUAL,U.stencilRef,255);if(O||S){L=q.patternMap;if(!L)continue;for(const [Y,X]of L)L=G.getPageSize(Y),v.isSome(L)&&(G.bind(t,e.TextureSamplingMode.LINEAR,
Y,c.VTL_TEXTURE_BINDING_UNIT_SPRITES),M.setUniform2fv("u_mosaicSize",L),M.setUniform1i("u_texture",c.VTL_TEXTURE_BINDING_UNIT_SPRITES),t.drawElements(e.PrimitiveType.TRIANGLES,X[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*X[0]))}else t.drawElements(e.PrimitiveType.TRIANGLES,q.lineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*q.lineIndexStart);U.triangleCount+=q.lineIndexCount/3}}}};return r}(d);b.WGLBrushVTLLine=d;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../chunks/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../enums ../GeometryUtils ../number ./WGLBrush ../../../../webgl/enums".split(" "),function(b,a,v,g,c,l,f,d,e,h,r,m){const n=1/65536;r=function(q){function t(){var A=q.apply(this,arguments)||this;A._iconProgramOptions={id:!1,
sdf:!1};A._sdfProgramOptions={id:!1};A._spritesTextureSize=g.create();return A}a._inheritsLoose(t,q);var w=t.prototype;w.dispose=function(){};w.drawMany=function(A,E){const {drawPhase:B,styleLayerUID:C}=A,G=A.styleLayer;let y;B===d.WGLDrawPhase.HITTEST&&(y=h.u32to4Xu8(C+1));this._drawIcons(A,G,E,y);this._drawText(A,G,E,y)};w._drawIcons=function(A,E,B,C){const {context:G,displayLevel:y,drawPhase:x,painter:D,spriteMosaic:J,state:K,styleLayerUID:R,requestRender:L,allowDelayedRender:S}=A,N=E.iconMaterial;
var O=D.vectorTilesMaterialManager,T=!1;for(var M of B)if(M.layerData.has(R)){var H=M.layerData.get(R);if(0<H.iconPerPageElementsMap.size){T=!0;break}}if(T){T=E.getPaintValue("icon-translate",y);M=E.getPaintValue("icon-translate-anchor",y);var P=E.getLayoutValue("icon-rotation-alignment",y);P===l.RotationAlignment.AUTO&&(P=E.getLayoutValue("symbol-placement",y)===l.SymbolPlacement.POINT?l.RotationAlignment.VIEWPORT:l.RotationAlignment.MAP);var W=P===l.RotationAlignment.MAP;W=E.getLayoutValue("icon-keep-upright",
y)&&W;var U=H.isIconSDF;H=x===d.WGLDrawPhase.HITTEST;var Y=this._iconProgramOptions;Y.id=H;Y.sdf=U;O=O.getMaterialProgram(G,N,Y);if(S&&v.isSome(L)&&!O.isCompiled)L();else{G.useProgram(O);O.setUniformMatrix3fv("u_displayViewMat3",P===l.RotationAlignment.MAP?K.displayViewMat3:K.displayMat3);O.setUniformMatrix3fv("u_displayMat3",M===l.TranslateAnchor.VIEWPORT?K.displayMat3:K.displayViewMat3);O.setUniform2fv("u_iconTranslation",T);O.setUniform1f("u_depth",E.z);O.setUniform1f("u_mapRotation",e.degToByte(K.rotation));
O.setUniform1f("u_keepUpright",W?1:0);O.setUniform1f("u_level",10*y);O.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_SPRITES);O.setUniform1f("u_fadeDuration",c.FADE_DURATION/1E3);H&&O.setUniform4fv("u_id",C);C=-1;for(const X of B)if(X.layerData.has(R)&&(X.key.level!==C&&(C=X.key.level,N.setDataUniforms(O,y,E,C,J)),H=X.layerData.get(R),0!==H.iconPerPageElementsMap.size&&(H.prepareForRendering(G),H.updateOpacityInfo(),B=H.iconVertexArrayObject,!v.isNone(B)))){G.bindVAO(B);O.setUniformMatrix3fv("u_dvsMat3",
X.transforms.dvs);O.setUniform1f("u_time",(performance.now()-H.lastOpacityUpdate)/1E3);for(const [ea,ca]of H.iconPerPageElementsMap)this._renderIconRange(A,O,ca,ea,X)}}}};w._renderIconRange=function(A,E,B,C,G){const {context:y,spriteMosaic:x}=A;this._spritesTextureSize[0]=x.getWidth(C)/4;this._spritesTextureSize[1]=x.getHeight(C)/4;E.setUniform2fv("u_mosaicSize",this._spritesTextureSize);x.bind(y,m.TextureSamplingMode.LINEAR,C,f.VTL_TEXTURE_BINDING_UNIT_SPRITES);y.setStencilTestEnabled(!0);y.setStencilFunction(m.CompareFunction.GREATER,
255,255);y.setStencilWriteMask(0);y.drawElements(m.PrimitiveType.TRIANGLES,B[1],m.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*B[0]);G.triangleCount+=B[1]/3};w._drawText=function(A,E,B,C){const {context:G,displayLevel:y,drawPhase:x,glyphMosaic:D,painter:J,pixelRatio:K,spriteMosaic:R,state:L,styleLayerUID:S,requestRender:N,allowDelayedRender:O}=A;A=E.textMaterial;const T=J.vectorTilesMaterialManager;var M=!1;for(var H of B)if(H.layerData.has(S)){var P=H.layerData.get(S);if(0<P.glyphPerPageElementsMap.size){M=
!0;break}}if(M&&(P=E.getPaintProperty("text-opacity"),!P||P.isDataDriven||0!==P.getValue(y))){P=E.getPaintProperty("text-color");var W=!P||P.isDataDriven||0<P.getValue(y)[3];P=E.getPaintProperty("text-halo-width");H=E.getPaintProperty("text-halo-color");var U=(!P||P.isDataDriven||0<P.getValue(y))&&(!H||H.isDataDriven||0<H.getValue(y)[3]);if(W||U){P=E.getLayoutValue("text-rotation-alignment",y);P===l.RotationAlignment.AUTO&&(P=E.getLayoutValue("symbol-placement",y)===l.SymbolPlacement.POINT?l.RotationAlignment.VIEWPORT:
l.RotationAlignment.MAP);H=P===l.RotationAlignment.MAP;H=E.getLayoutValue("text-keep-upright",y)&&H;M=x===d.WGLDrawPhase.HITTEST;var Y=.8*3/K;this._glyphTextureSize||(this._glyphTextureSize=g.fromValues(D.width/4,D.height/4));var X=E.getPaintValue("text-translate",y),ea=E.getPaintValue("text-translate-anchor",y),ca=this._sdfProgramOptions;ca.id=M;var aa=T.getMaterialProgram(G,A,ca);if(O&&v.isSome(N)&&!aa.isCompiled)N();else{G.useProgram(aa);aa.setUniformMatrix3fv("u_displayViewMat3",P===l.RotationAlignment.MAP?
L.displayViewMat3:L.displayMat3);aa.setUniformMatrix3fv("u_displayMat3",ea===l.TranslateAnchor.VIEWPORT?L.displayMat3:L.displayViewMat3);aa.setUniform2fv("u_textTranslation",X);aa.setUniform1f("u_depth",E.z+n);aa.setUniform2fv("u_mosaicSize",this._glyphTextureSize);aa.setUniform1f("u_mapRotation",e.degToByte(L.rotation));aa.setUniform1f("u_keepUpright",H?1:0);aa.setUniform1f("u_level",10*y);aa.setUniform1i("u_texture",f.VTL_TEXTURE_BINDING_UNIT_GLYPHS);aa.setUniform1f("u_antialiasingWidth",Y);aa.setUniform1f("u_fadeDuration",
c.FADE_DURATION/1E3);M&&aa.setUniform4fv("u_id",C);C=-1;for(const fa of B)fa.layerData.has(S)&&(fa.key.level!==C&&(C=fa.key.level,A.setDataUniforms(aa,y,E,C,R)),P=fa.layerData.get(S),0!==P.glyphPerPageElementsMap.size&&(P.prepareForRendering(G),P.updateOpacityInfo(),B=P.textVertexArrayObject,v.isNone(B)||(G.bindVAO(B),aa.setUniformMatrix3fv("u_dvsMat3",fa.transforms.dvs),G.setStencilTestEnabled(!0),G.setStencilFunction(m.CompareFunction.GREATER,255,255),G.setStencilWriteMask(0),B=(performance.now()-
P.lastOpacityUpdate)/1E3,aa.setUniform1f("u_time",B),P.glyphPerPageElementsMap.forEach((ka,la)=>{this._renderGlyphRange(G,ka,la,D,aa,U,W,fa)}))))}}}};w._renderGlyphRange=function(A,E,B,C,G,y,x,D){C.bind(A,m.TextureSamplingMode.LINEAR,B,f.VTL_TEXTURE_BINDING_UNIT_GLYPHS);y&&(G.setUniform1f("u_halo",1),A.drawElements(m.PrimitiveType.TRIANGLES,E[1],m.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*E[0]),D.triangleCount+=E[1]/3);x&&(G.setUniform1f("u_halo",0),A.drawElements(m.PrimitiveType.TRIANGLES,
E[1],m.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*E[0]),D.triangleCount+=E[1]/3)};return t}(r);b.WGLBrushVTLSymbol=r;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],function(b){function a(d,e){d%=e;return 0<=d?d:d+e}const v=Number.POSITIVE_INFINITY,g=Math.PI,c=128/g,l=256/360,f=1/Math.LN2;b.C_256_TO_RAD=g/128;b.C_2PI=2*g;b.C_DEG_TO_256=l;b.C_DEG_TO_RAD=g/180;b.C_INFINITY=v;
b.C_PI=g;b.C_PI_BY_2=g/2;b.C_RAD_TO_256=c;b.C_SQRT2=1.414213562;b.C_SQRT2_INV=1/1.414213562;b.between=function(d,e,h){return d>=e&&d<=h||d>=h&&d<=e};b.degToByte=function(d){return a(d*l,256)};b.interpolate=function(d,e,h){return d*(1-h)+e*h};b.log2=function(d){return Math.log(d)*f};b.positiveMod=a;b.radToByte=function(d){return a(d*c,256)};b.sqr=function(d){return d*d};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../enums",
"./Programs"],function(b,a){return function(){function v(){this._programByKey=new Map}var g=v.prototype;g.dispose=function(){this._programByKey.forEach(c=>c.dispose());this._programByKey.clear()};g.getMaterialProgram=function(c,l,f){const d=l.key<<3|this._getMaterialOptionsValue(l.type,f);if(this._programByKey.has(d))return this._programByKey.get(d);var e=this._getProgramTemplate(l.type);({shaders:e}=e);const {vertexShader:h,fragmentShader:r}=e(f);f=l.getShaderHeader();e=l.getShaderMain();f=h.replace("#pragma header",
f).replace("#pragma main",e);c=c.programCache.acquire(f,r,l.getAttributeLocations());this._programByKey.set(d,c);return c};g._getMaterialOptionsValue=function(c,l){switch(c){case b.ShaderProgramType.BACKGROUND:return(l.pattern?1:0)<<1|(l.id?1:0);case b.ShaderProgramType.FILL:return(l.pattern?1:0)<<1|(l.id?1:0);case b.ShaderProgramType.OUTLINE:return l.id?1:0;case b.ShaderProgramType.LINE:return(l.sdf?1:0)<<2|(l.pattern?1:0)<<1|(l.id?1:0);case b.ShaderProgramType.ICON:return(l.sdf?1:0)<<1|(l.id?1:
0);case b.ShaderProgramType.CIRCLE:return l.id?1:0;case b.ShaderProgramType.TEXT:return l.id?1:0;default:return 0}};g._getProgramTemplate=function(c){switch(c){case b.ShaderProgramType.BACKGROUND:return a.background;case b.ShaderProgramType.CIRCLE:return a.circle;case b.ShaderProgramType.FILL:return a.fill;case b.ShaderProgramType.ICON:return a.icon;case b.ShaderProgramType.LINE:return a.line;case b.ShaderProgramType.OUTLINE:return a.outline;case b.ShaderProgramType.TEXT:return a.text;default:return null}};
return v}()})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(b,a,v){b.background={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern})+a.resolveIncludes("background/background.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern})+a.resolveIncludes("background/background.frag")})};b.circle={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id})+a.resolveIncludes("circle/circle.vert"),
fragmentShader:v.glslifyDefineMap({ID:g.id})+a.resolveIncludes("circle/circle.frag")})};b.fill={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern})+a.resolveIncludes("fill/fill.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern})+a.resolveIncludes("fill/fill.frag")})};b.icon={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id,SDF:g.sdf})+a.resolveIncludes("icon/icon.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id,SDF:g.sdf})+a.resolveIncludes("icon/icon.frag")})};
b.line={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern,SDF:g.sdf})+a.resolveIncludes("line/line.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id,PATTERN:g.pattern,SDF:g.sdf})+a.resolveIncludes("line/line.frag")})};b.outline={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id})+a.resolveIncludes("outline/outline.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id})+a.resolveIncludes("outline/outline.frag")})};b.text={shaders:g=>({vertexShader:v.glslifyDefineMap({ID:g.id})+
a.resolveIncludes("text/text.vert"),fragmentShader:v.glslifyDefineMap({ID:g.id})+a.resolveIncludes("text/text.frag")})};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(b,a,v){const g=new v.ShaderCompiler(function(c){let l=a;c.split("/").forEach(f=>{l&&(l=l[f])});return l});b.resolveIncludes=function(c){return g.resolveIncludes(c)};
Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\n#ifdef ID\nvarying mediump vec4 v_id;\n#endif\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n#ifdef ID\nif (gl_FragColor.a \x3c 1.0 / 255.0) {\ndiscard;\n}\ngl_FragColor \x3d v_id;\n#endif\n}",
"text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef ID\nuniform mediump vec4 u_id;\nvarying mediump vec4 v_id;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n#ifdef ID\nv_id \x3d u_id / 255.0;\n#endif\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(b){let a=function(){function v(c){this._readFile=c}var g=v.prototype;g.resolveIncludes=
function(c){return this._resolve(c)};g._resolve=function(c,l=new Map){if(l.has(c))return l.get(c);const f=this._read(c);if(!f)throw Error(`cannot find shader file ${c}`);const d=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let e=d.exec(f);const h=[];for(;null!=e;)h.push({path:e[1],start:e.index,length:e[0].length}),e=d.exec(f);let r=0,m="";h.forEach(n=>{m+=f.slice(r,n.start);m+=l.has(n.path)?"":this._resolve(n.path,l);r=n.start+n.length});m+=f.slice(r);l.set(c,m);return m};g._read=function(c){return this._readFile(c)};
return v}();b.ShaderCompiler=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(b){b.glslifyDefineMap=function(a){let v="";for(const c in a){var g=a[c];if("boolean"===typeof g)g&&(v+=`#define ${c}\n`);else if("number"===typeof g)v+=`#define ${c} ${g.toFixed()}\n`;else if("object"===typeof g){const {options:l,value:f}=g;if("number"===typeof l[f]){const {value:d,options:e,namespace:h}=g;
g=h?`${h}_`:"";for(const r in e)v+=`#define ${g}${r} ${e[r].toFixed()}\n`;v+=`#define ${c} ${g}${d}\n`}else{const d=g.options;let e=0;for(const h in d)v+=`#define ${d[h]} ${(e++).toFixed()}\n`;v+=`#define ${c} ${d[g.value]}\n`}}}return v};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(b,a){return function(){function v(c){this._style=
c;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;c.layers||(c.layers=[]);this.version=parseFloat(c.version);if(this.layers=c.layers.map((l,f,d)=>this._create(l,f,d)).filter(l=>!!l))for(let l=0;l<this.layers.length;l++)c=this.layers[l],this._layerByName[c.id]=c,this._uidToLayer.set(c.uid,c),c.type===b.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(c.id);this._identifyRefLayers()}var g=v.prototype;g.isPainterDataDriven=function(c){return(c=this._layerByName[c])?
c.isPainterDataDriven():!1};g.getStyleLayerId=function(c){return c>=this.layers.length?null:this.layers[c].id};g.getStyleLayerByUID=function(c){return this._uidToLayer.get(c)??null};g.getStyleLayerIndex=function(c){return(c=this._layerByName[c])?this.layers.indexOf(c):-1};g.setStyleLayer=function(c,l){if(c&&c.id){var f=this._style;null!=l&&l>=this.layers.length&&(l=this.layers.length-1);var d=!0,e;if(e=this._layerByName[c.id]){const h=this.layers.indexOf(e);l||(l=h);l===h?(d=!1,e=v._recreateLayer(c,
e),this.layers[l]=e,f.layers[l]=c):(this.layers.splice(h,1),f.layers.splice(h,1),e=this._create(c,l,this.layers),this.layers.splice(l,0,e),f.layers.splice(l,0,c))}else e=this._create(c,l,this.layers),!l||l>=this.layers.length?(this.layers.push(e),f.layers.push(c)):(this.layers.splice(l,0,e),f.layers.splice(l,0,c));this._layerByName[c.id]=e;this._uidToLayer.set(e.uid,e);d&&this._recomputeZValues();this._identifyRefLayers()}};g.getStyleLayer=function(c){return(c=this._layerByName[c])?{type:c.typeName,
id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:c.layout,paint:c.paint}:null};g.deleteStyleLayer=function(c){const l=this._layerByName[c];l&&(delete this._layerByName[c],this._uidToLayer.delete(l.uid),c=this.layers.indexOf(l),this.layers.splice(c,1),this._style.layers.splice(c,1),this._recomputeZValues(),this._identifyRefLayers())};g.getLayerById=function(c){return this._layerByName[c]};g.getLayoutProperties=function(c){return(c=this._layerByName[c])?
c.layout:null};g.getPaintProperties=function(c){return(c=this._layerByName[c])?c.paint:null};g.setPaintProperties=function(c,l){if(c=this._layerByName[c]){var f=v._recreateLayer({type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:c.layout,paint:l},c),d=this.layers.indexOf(c);this.layers[d]=f;this._style.layers[d].paint=l;this._layerByName[c.id]=f;this._uidToLayer.set(c.uid,f)}};g.setLayoutProperties=function(c,l){if(c=this._layerByName[c]){var f=
v._recreateLayer({type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:l,paint:c.paint},c),d=this.layers.indexOf(c);this.layers[d]=f;this._style.layers[d].layout=l;this._layerByName[c.id]=f;this._uidToLayer.set(c.uid,f)}};g.setStyleLayerVisibility=function(c,l){if(c=this._layerByName[c]){var f=c.layout||{};f.visibility=l;l=v._recreateLayer({type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,
maxzoom:c.maxzoom,filter:c.filter,layout:f,paint:c.paint},c);var d=this.layers.indexOf(c);this.layers[d]=l;this._style.layers[d].layout=f;this._layerByName[c.id]=l;this._uidToLayer.set(c.uid,l)}};g.getStyleLayerVisibility=function(c){return(c=this._layerByName[c])?c.layout?.visibility??"visible":"none"};g._recomputeZValues=function(){const c=this.layers,l=1/(c.length+1);for(let f=0;f<c.length;f++)c[f].z=1-(1+f)*l};g._identifyRefLayers=function(){const c=[],l=[];let f=0;for(const h of this.layers){const r=
h.layout;if(h.type===b.StyleLayerType.FILL){var d=h,e=h.source+"|"+h.sourceLayer;e+="|"+(r?.visibility??"");e+="|"+h.minzoom;e+="|"+h.maxzoom;e+="|"+JSON.stringify(h.filter);if(d.hasDataDrivenFill||d.hasDataDrivenOutline)e+="|"+f;c.push({key:e,layer:h})}else if(h.type===b.StyleLayerType.LINE){d=h;e=h.paint;e=null!=e&&(null!=e["line-pattern"]||null!=e["line-dasharray"]);let m=h.source+"|"+h.sourceLayer;m+="|"+(r?.visibility??"");m+="|"+h.minzoom;m+="|"+h.maxzoom;m+="|"+JSON.stringify(h.filter);m+=
"|"+(void 0!==r?r["line-cap"]:"");m+="|"+(void 0!==r?r["line-join"]:"");if(d.hasDataDrivenLine||e)m+="|"+f;l.push({key:m,layer:h})}++f}this._assignRefLayers(c);this._assignRefLayers(l)};g._assignRefLayers=function(c){c.sort((r,m)=>r.key<m.key?-1:r.key>m.key?1:0);let l,f;const d=c.length;for(let r=0;r<d;r++){const m=c[r];if(m.key===l)m.layer.refLayerId=f;else if(l=m.key,f=m.layer.id,m.layer.type===b.StyleLayerType.FILL){if(!m.layer.getPaintProperty("fill-outline-color"))for(var e=r+1;e<d;e++){var h=
c[e];if(h.key===l){if(h.layer.getPaintProperty("fill-outline-color")){c[r]=h;c[e]=m;f=h.layer.id;break}}else break}}else if(m.layer.type===b.StyleLayerType.LINE)for(e=m.layer,h=r+1;h<d;h++){const n=c[h];if(n.key!==l)break;const q=n.layer;if(e.canUseThinTessellation&&!q.canUseThinTessellation||!e.canUseThinTessellation&&(q.getPaintProperty("line-pattern")||q.getPaintProperty("line-dasharray")))e=q,c[r]=n,c[h]=m,f=n.layer.id}}};g._create=function(c,l,f){l=1-1/(f.length+1)*(1+l);f=this._runningId++;
switch(c.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,c,l,f);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,c,l,f);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,c,l,f);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,c,l,f);case "raster":console.warn(`Unsupported vector tile raster layer ${c.id}`);case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,c,l,f)}};v._recreateLayer=function(c,l){switch(c.type){case "background":return new a.BackgroundStyleLayer(b.StyleLayerType.BACKGROUND,
c,l.z,l.uid);case "fill":return new a.FillStyleLayer(b.StyleLayerType.FILL,c,l.z,l.uid);case "line":return new a.LineStyleLayer(b.StyleLayerType.LINE,c,l.z,l.uid);case "symbol":return new a.SymbolStyleLayer(b.StyleLayerType.SYMBOL,c,l.z,l.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${c.id}`);case "circle":return new a.CircleStyleLayer(b.StyleLayerType.CIRCLE,c,l.z,l.uid)}};return v}()})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../enums ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(b,a,v,g,c,l,f,d,e,h,r,m){b.CapType=void 0;(function(G){G[G.BUTT=0]="BUTT";G[G.ROUND=1]="ROUND";G[G.SQUARE=2]="SQUARE";G[G.UNKNOWN=4]="UNKNOWN"})(b.CapType||(b.CapType={}));let n=function(){function G(x,D,J,K){this.type=x;this.typeName=D.type;this.id=D.id;this.source=D.source;this.sourceLayer=D["source-layer"];this.minzoom=D.minzoom;this.maxzoom=D.maxzoom;this.filter=D.filter;this.layout=D.layout;this.paint=D.paint;this.z=J;this.uid=K;switch(x){case h.StyleLayerType.BACKGROUND:this._layoutDefinition=
h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;break;case h.StyleLayerType.FILL:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;this._paintDefinition=h.StyleDefinition.fillPaintDefinition;break;case h.StyleLayerType.LINE:this._layoutDefinition=h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case h.StyleLayerType.SYMBOL:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=h.StyleDefinition.symbolPaintDefinition;break;case h.StyleLayerType.CIRCLE:this._layoutDefinition=h.StyleDefinition.circleLayoutDefinition,this._paintDefinition=h.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}var y=G.prototype;y.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)};y.getLayoutProperty=
function(x){return this._layoutProperties[x]};y.getPaintProperty=function(x){return this._paintProperties[x]};y.getLayoutValue=function(x,D,J){let K;const R=this._layoutProperties[x];R&&(K=R.getValue(D,J));void 0===K&&(K=this._layoutDefinition[x]["default"]);return K};y.getPaintValue=function(x,D,J){let K;const R=this._paintProperties[x];R&&(K=R.getValue(D,J));void 0===K&&(K=this._paintDefinition[x]["default"]);return K};y.isPainterDataDriven=function(){const x=this._paintProperties;if(x)for(const D in x)if(x[D].isDataDriven)return!0;
return!1};y._parseLayout=function(x){const D={};for(const J in x){const K=this._layoutDefinition[J];K&&(D[J]=new r(K,x[J]))}return D};y._parsePaint=function(x){const D={};for(const J in x){const K=this._paintDefinition[J];K&&(D[J]=new r(K,x[J]))}return D};y.computeAttributesKey=function(x,D,J,K){let R=0,L=0;for(const S of D){D=3;if(!S||S!==K){const {isLayout:N,isOptional:O}=J[S];D=N?this.getLayoutProperty(S):this.getPaintProperty(S);D=D?.interpolator?2:D?.isDataDriven?1:O&&!D?3:0}L|=D<<R;R+=2}return L<<
3|x};return G}(),q=function(G){function y(x,D,J,K){x=G.call(this,x,D,J,K)||this;x.backgroundMaterial=new g.VTLBackgroundMaterial(x.computeAttributesKey(v.ShaderProgramType.BACKGROUND,g.VTLBackgroundMaterial.ATTRIBUTES,g.VTLBackgroundMaterial.ATTRIBUTES_INFO));return x}a._inheritsLoose(y,G);return y}(n),t=function(G){function y(x,D,J,K){x=G.call(this,x,D,J,K)||this;D=x.getPaintProperty("fill-color");J=x.getPaintProperty("fill-opacity");K=x.getPaintProperty("fill-pattern");x.hasDataDrivenColor=D?.isDataDriven;
x.hasDataDrivenOpacity=J?.isDataDriven;x.hasDataDrivenFill=x.hasDataDrivenColor||x.hasDataDrivenOpacity||K?.isDataDriven;J=x.getPaintProperty("fill-outline-color");x.outlineUsesFillColor=!J;x.hasDataDrivenOutlineColor=J?.isDataDriven;x.hasDataDrivenOutline=J?J.isDataDriven:D?D.isDataDriven:!1;x.hasDataDrivenOutline=(J?x.hasDataDrivenOutlineColor:x.hasDataDrivenColor)||x.hasDataDrivenOpacity;x.fillMaterial=new l.VTLFillMaterial(x.computeAttributesKey(v.ShaderProgramType.FILL,l.VTLFillMaterial.ATTRIBUTES,
l.VTLFillMaterial.ATTRIBUTES_INFO));x.outlineMaterial=new l.VTLOutlineMaterial(x.computeAttributesKey(v.ShaderProgramType.OUTLINE,x.outlineUsesFillColor?l.VTLOutlineMaterial.ATTRIBUTES_FILL:l.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,x.outlineUsesFillColor?l.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:l.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),x.outlineUsesFillColor);return x}a._inheritsLoose(y,G);return y}(n),w=function(G){function y(x,D,J,K){x=G.call(this,x,D,J,K)||this;D=x.getPaintProperty("line-pattern");
x.lineMaterial=new f.VTLLineMaterial(x.computeAttributesKey(v.ShaderProgramType.LINE,f.VTLLineMaterial.ATTRIBUTES,f.VTLLineMaterial.ATTRIBUTES_INFO,D?"line-dasharray":""));x.hasDataDrivenLine=x.getPaintProperty("line-blur")?.isDataDriven||x.getPaintProperty("line-color")?.isDataDriven||x.getPaintProperty("line-gap-width")?.isDataDriven||x.getPaintProperty("line-offset")?.isDataDriven||x.getPaintProperty("line-opacity")?.isDataDriven||x.getPaintProperty("line-pattern")?.isDataDriven||x.getPaintProperty("line-dasharray")?.isDataDriven||
x.getLayoutProperty("line-cap")?.isDataDriven||x.getPaintProperty("line-width")?.isDataDriven;x.canUseThinTessellation=!1;!x.hasDataDrivenLine&&(D=x.getPaintProperty("line-width"),!D||"number"===typeof D&&.5*D<m.THIN_LINE_HALF_WIDTH_THRESHOLD)&&(D=x.getPaintProperty("line-offset"),!D||"number"===typeof D&&0===D)&&(x.canUseThinTessellation=!0);return x}a._inheritsLoose(y,G);y.prototype.getDashKey=function(x,D){switch(D){case b.CapType.BUTT:D="Butt";break;case b.CapType.ROUND:D="Round";break;case b.CapType.SQUARE:D=
"Square";break;default:D="Butt"}return`dasharray-[${x.toString()}]-${D}`};return y}(n),A=function(G){function y(x,D,J,K){x=G.call(this,x,D,J,K)||this;x.iconMaterial=new d.VTLIconMaterial(x.computeAttributesKey(v.ShaderProgramType.ICON,d.VTLIconMaterial.ATTRIBUTES,d.VTLIconMaterial.ATTRIBUTES_INFO));x.textMaterial=new d.VTLTextMaterial(x.computeAttributesKey(v.ShaderProgramType.TEXT,d.VTLTextMaterial.ATTRIBUTES,d.VTLTextMaterial.ATTRIBUTES_INFO));x.hasDataDrivenIcon=x.getPaintProperty("icon-color")?.isDataDriven||
x.getPaintProperty("icon-halo-blur")?.isDataDriven||x.getPaintProperty("icon-halo-color")?.isDataDriven||x.getPaintProperty("icon-halo-width")?.isDataDriven||x.getPaintProperty("icon-opacity")?.isDataDriven||x.getLayoutProperty("icon-size")?.isDataDriven;x.hasDataDrivenText=x.getPaintProperty("text-color")?.isDataDriven||x.getPaintProperty("text-halo-blur")?.isDataDriven||x.getPaintProperty("text-halo-color")?.isDataDriven||x.getPaintProperty("text-halo-width")?.isDataDriven||x.getPaintProperty("text-opacity")?.isDataDriven||
x.getLayoutProperty("text-size")?.isDataDriven;return x}a._inheritsLoose(y,G);return y}(n),E=function(G){function y(x,D,J,K){x=G.call(this,x,D,J,K)||this;x.circleMaterial=new c.VTLCircleMaterial(x.computeAttributesKey(v.ShaderProgramType.CIRCLE,c.VTLCircleMaterial.ATTRIBUTES,c.VTLCircleMaterial.ATTRIBUTES_INFO));return x}a._inheritsLoose(y,G);return y}(n),B=function(){function G(y,x,D){this.allowOverlap=y.getLayoutValue("icon-allow-overlap",x);this.ignorePlacement=y.getLayoutValue("icon-ignore-placement",
x);this.keepUpright=y.getLayoutValue("icon-keep-upright",x);this.optional=y.getLayoutValue("icon-optional",x);this.rotationAlignment=y.getLayoutValue("icon-rotation-alignment",x);this.rotationAlignment===h.RotationAlignment.AUTO&&(this.rotationAlignment=D?h.RotationAlignment.MAP:h.RotationAlignment.VIEWPORT);D=y.getLayoutProperty("icon-anchor");D?.isDataDriven?this._anchorProp=D:this.anchor=y.getLayoutValue("icon-anchor",x);D=y.getLayoutProperty("icon-offset");D?.isDataDriven?this._offsetProp=D:this.offset=
y.getLayoutValue("icon-offset",x);D=y.getLayoutProperty("icon-padding");D?.isDataDriven?this._paddingProp=D:this.padding=y.getLayoutValue("icon-padding",x);D=y.getLayoutProperty("icon-rotate");D?.isDataDriven?this._rotateProp=D:this.rotate=y.getLayoutValue("icon-rotate",x);D=y.getLayoutProperty("icon-size");D?.isDataDriven?this._sizeProp=D:this.size=y.getLayoutValue("icon-size",x)}G.prototype.update=function(y,x){this._anchorProp&&(this.anchor=this._anchorProp.getValue(y,x));this._offsetProp&&(this.offset=
this._offsetProp.getValue(y,x));this._paddingProp&&(this.padding=this._paddingProp.getValue(y,x));this._rotateProp&&(this.rotate=this._rotateProp.getValue(y,x));this._sizeProp&&(this.size=this._sizeProp.getValue(y,x))};return G}(),C=function(){function G(y,x,D){this.allowOverlap=y.getLayoutValue("text-allow-overlap",x);this.ignorePlacement=y.getLayoutValue("text-ignore-placement",x);this.keepUpright=y.getLayoutValue("text-keep-upright",x);this.optional=y.getLayoutValue("text-optional",x);this.rotationAlignment=
y.getLayoutValue("text-rotation-alignment",x);this.rotationAlignment===h.RotationAlignment.AUTO&&(this.rotationAlignment=D?h.RotationAlignment.MAP:h.RotationAlignment.VIEWPORT);D=y.getLayoutProperty("text-anchor");D?.isDataDriven?this._anchorProp=D:this.anchor=y.getLayoutValue("text-anchor",x);D=y.getLayoutProperty("text-justify");D?.isDataDriven?this._justifyProp=D:this.justify=y.getLayoutValue("text-justify",x);D=y.getLayoutProperty("text-letter-spacing");D?.isDataDriven?this._letterSpacingProp=
D:this.letterSpacing=y.getLayoutValue("text-letter-spacing",x);D=y.getLayoutProperty("text-line-height");D?.isDataDriven?this._lineHeightProp=D:this.lineHeight=y.getLayoutValue("text-line-height",x);D=y.getLayoutProperty("text-max-angle");D?.isDataDriven?this._maxAngleProp=D:this.maxAngle=y.getLayoutValue("text-max-angle",x);D=y.getLayoutProperty("text-max-width");D?.isDataDriven?this._maxWidthProp=D:this.maxWidth=y.getLayoutValue("text-max-width",x);D=y.getLayoutProperty("text-offset");D?.isDataDriven?
this._offsetProp=D:this.offset=y.getLayoutValue("text-offset",x);D=y.getLayoutProperty("text-padding");D?.isDataDriven?this._paddingProp=D:this.padding=y.getLayoutValue("text-padding",x);D=y.getLayoutProperty("text-rotate");D?.isDataDriven?this._rotateProp=D:this.rotate=y.getLayoutValue("text-rotate",x);D=y.getLayoutProperty("text-size");D?.isDataDriven?this._sizeProp=D:this.size=y.getLayoutValue("text-size",x);D=y.getLayoutProperty("text-writing-mode");D?.isDataDriven?this._writingModeProp=D:this.writingMode=
y.getLayoutValue("text-writing-mode",x)}G.prototype.update=function(y,x){this._anchorProp&&(this.anchor=this._anchorProp.getValue(y,x));this._justifyProp&&(this.justify=this._justifyProp.getValue(y,x));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(y,x));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(y,x));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(y,x));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(y,x));this._offsetProp&&
(this.offset=this._offsetProp.getValue(y,x));this._paddingProp&&(this.padding=this._paddingProp.getValue(y,x));this._rotateProp&&(this.rotate=this._rotateProp.getValue(y,x));this._sizeProp&&(this.size=this._sizeProp.getValue(y,x));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(y,x))};return G}();b.BackgroundStyleLayer=q;b.CircleStyleLayer=E;b.FillStyleLayer=t;b.IconLayout=B;b.LineStyleLayer=w;b.StyleLayer=n;b.SymbolStyleLayer=A;b.TextLayout=C;Object.defineProperties(b,{__esModule:{value:!0},
[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(b,a,v,g,c){v=function(l){function f(e){return l.call(this,e)||this}a._inheritsLoose(f,l);var d=f.prototype;d.geometryInfo=function(){return f.GEOMETRY_LAYOUT};d.opacityInfo=function(){return null};d.attributes=function(){return f.ATTRIBUTES};
d.attributesInfo=function(){return f.ATTRIBUTES_INFO};return f}(v.VTLMaterial);v.ATTRIBUTES=[];v.GEOMETRY_LAYOUT=[new c.VertexElementDescriptor("a_pos",2,g.DataType.BYTE,0,2)];v.ATTRIBUTES_INFO={};b.VTLBackgroundMaterial=v;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../MemoryBuffer ./enums ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,v,g,c,l,f){let d=function(){function r(n){this._locations=new Map;this._key=n}var m=r.prototype;m.defines=function(){return[]};m.getStride=function(){this._layoutInfo||this._buildAttributesInfo();return this._stride};m.getAttributeLocations=function(){0===this._locations.size&&this._buildAttributesInfo();return this._locations};m.getLayoutInfo=function(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo};m.getEncodingInfos=function(){this._propertyEncodingInfo||this._buildAttributesInfo();
return this._propertyEncodingInfo};m.getUniforms=function(){this._uniforms||this._buildAttributesInfo();return this._uniforms};m.getShaderHeader=function(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader};m.getShaderMain=function(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain};m.setDataUniforms=function(n,q,t,w,A){var E=this.getUniforms();for(const B of E){const {name:C,type:G,getValue:y}=B;E=y(t,q,w,A);if(null!==E)switch(G){case "float":n.setUniform1f(C,
E);break;case "vec2":n.setUniform2fv(C,E);break;case "vec4":n.setUniform4fv(C,E)}}};m.encodeAttributes=function(n,q,t,w){const A=this.attributesInfo(),E=this.getEncodingInfos(),B=[];let C=0,G=0;for(const x of Object.keys(E)){var y=E[x];const {type:D,precisionFactor:J,isLayout:K}=A[x],R=K?t.getLayoutProperty(x):t.getPaintProperty(x),L=R.interpolator?.getInterpolationRange(q);let S=0;for(const N of y){const {offset:O,bufferElementsToAdd:T}=N;if(0<T){for(y=0;y<T;y++)B.push(0);C+=G;G=N.bufferElementsToAdd}y=
w??R.getValue(L?L[S]:q,n);switch(D){case c.EncodingType.R8_SIGNED:case c.EncodingType.R8_UNSIGNED:B[C]|=this._encodeByte(y*(J||1),8*O);break;case c.EncodingType.R16_SIGNED:case c.EncodingType.R16_UNSIGNED:B[C]|=this._encodeShort(y*(J||1),8*O);break;case c.EncodingType.R8G8_SIGNED:case c.EncodingType.R8G8_UNSIGNED:B[C]|=this._encodeByte(y*(J||1),8*O);B[C]|=this._encodeByte(y*(J||1),8*O+8);break;case c.EncodingType.R16G16_SIGNED:case c.EncodingType.R16G16_UNSIGNED:B[C]|=this._encodeShort(y*(J||1),8*
O);B[C]|=this._encodeShort(y*(J||1),8*O+16);break;case c.EncodingType.R8G8B8A8_SIGNED:case c.EncodingType.R8G8B8A8_UNSIGNED:B[C]|=this._encodeByte(y*(J||1),8*O);B[C]|=this._encodeByte(y*(J||1),8*O+8);B[C]|=this._encodeByte(y*(J||1),8*O+16);B[C]|=this._encodeByte(y*(J||1),8*O+24);break;case c.EncodingType.R8G8B8A8_COLOR:B[C]=this._encodeColor(y);break;case c.EncodingType.R16G16B16A16_DASHARRAY:case c.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(C,B,y);break;default:throw Error("Unsupported encoding type");
}S++}}return B};m.getAtributeState=function(n){const q=3+2*n;n=0|this._bit(q);return n|=this._bit(q+1)<<1};m._buildAttributesInfo=function(){const n=[],q={};var t={},w=-1;const A=this.attributesInfo();var E=this.attributes();let B=-1;for(const x of E){B++;E=this.getAtributeState(B);if(E===c.AttributeStatus.UNIFORM||E===c.AttributeStatus.UNUSED)continue;var C=A[x];const D=[];q[x]=D;C=C.type;for(let J=0;J<E;J++){const {dataType:K,bytesPerElement:R,count:L,normalized:S}=r._encodingInfo[C],N=R*L;var G=
`${K}-${!0===S}`;let O=t[G],T=0;!O||4<O.count+L?(w++,O={dataIndex:w,count:0,offset:0},4!==L&&(t[G]=O),n.push({location:-1,name:"a_data_"+w,count:L,type:K,normalized:S}),T=Math.ceil(Math.max(N/4,1))):(G=n[O.dataIndex],G.count+=L,T=Math.ceil(Math.max(G.count*R/4,1))-Math.ceil(Math.max(O.offset/4,1)));D.push({dataIndex:O.dataIndex,offset:O.offset,bufferElementsToAdd:T});O.offset+=N;O.count+=L}}for(const x of n)switch(x.type){case l.DataType.BYTE:case l.DataType.UNSIGNED_BYTE:x.count=4;break;case l.DataType.SHORT:case l.DataType.UNSIGNED_SHORT:x.count+=
x.count%2}this._buildVertexBufferLayout(n);t=0;w=this._layoutInfo.geometry;for(var y of w)this._locations.set(y.name,t++);if(y=this._layoutInfo.opacity)for(const x of y)this._locations.set(x.name,t++);this._buildShaderInfo(n,q);this._propertyEncodingInfo=q};m._buildVertexBufferLayout=function(n){const q={},t=this.geometryInfo();let w=t[0].stride;if(0===n.length)q.geometry=t;else{const A=[];let E=w;for(const B of n)w+=e(B.type)*B.count;for(const B of t)A.push(new f.VertexElementDescriptor(B.name,B.count,
B.type,B.offset,w,B.normalized));for(const B of n)A.push(new f.VertexElementDescriptor(B.name,B.count,B.type,E,w,B.normalized)),E+=e(B.type)*B.count;q.geometry=A}this.opacityInfo()&&(q.opacity=this.opacityInfo());this._layoutInfo=q;this._stride=w};m._buildShaderInfo=function(n,q){let t="\n",w="\n";const A=[];for(var E of n)t+=`attribute ${this._getType(E.count)} ${E.name};\n`;var B=this.attributes();n=this.attributesInfo();E=-1;for(const y of B){E++;const {name:x,type:D,precisionFactor:J,isLayout:K}=
n[y];B=J&&1!==J?` * ${1/J}`:"";const {bytesPerElement:R,count:L}=r._encodingInfo[D];var C=S=>`a_data_${S.dataIndex}${h(L,S.offset,R)}`;switch(this.getAtributeState(E)){case c.AttributeStatus.UNIFORM:B=this._getType(L);var G=`u_${x}`;A.push({name:G,type:B,getValue:(N,O,T,M)=>{T=K?N.getLayoutValue(y,O):N.getPaintValue(y,O);if(D===c.EncodingType.R16G16B16A16_DASHARRAY){N=N.getDashKey(T,N.getLayoutValue("line-cap",O));M=M.getMosaicItemPosition(N,!1);if(v.isNone(M))return null;const {tl:H,br:P}=M;return[H[0],
P[1],P[0],H[1]]}if(D===c.EncodingType.R16G16B16A16_PATTERN){M=M.getMosaicItemPosition(T,!y.includes("line-"));if(v.isNone(M))return null;const {tl:H,br:P}=M;return[H[0],P[1],P[0],H[1]]}return D===c.EncodingType.R8G8B8A8_COLOR?(M=T[3],[M*T[0],M*T[1],M*T[2],M]):T}});t+=`uniform ${B} ${G};\n`;w+=`${B} ${x} = ${G};\n`;break;case c.AttributeStatus.DATA_DRIVEN:G=C(q[y][0]);w+=`${this._getType(L)} ${x} = ${G}${B};\n`;break;case c.AttributeStatus.INTERPOLATED_DATA_DRIVEN:G=`u_t_${x}`;A.push({name:G,type:"float",
getValue:(N,O,T,M)=>(K?N.getLayoutProperty(y):N.getPaintProperty(y)).interpolator.interpolationUniformValue(T,O)});t+=`uniform float ${G};\n`;const S=C(q[y][0]);C=C(q[y][1]);w+=`${this._getType(L)} ${x} = mix(${S}${B}, ${C}${B}, ${G});\n`}}this._shaderHeader=t;this._shaderMain=w;this._uniforms=A};m._bit=function(n){return(this._key&1<<n)>>n};m._getType=function(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");};m._encodeColor=
function(n){const q=255*n[3];return g.i8888to32(n[0]*q,n[1]*q,n[2]*q,q)};m._encodePattern=function(n,q,t){if(t&&t.rect){var w=t.rect,A=t.width;t=t.height;q[n]=this._encodeShort(w.x+2,0);q[n]|=this._encodeShort(w.y+2+t,16);q[n+1]=this._encodeShort(w.x+2+A,0);q[n+1]|=this._encodeShort(w.y+2,16)}};m._encodeByte=function(n,q){return(n&255)<<q};m._encodeShort=function(n,q){return(n&65535)<<q};a._createClass(r,[{key:"key",get:function(){return this._key}},{key:"type",get:function(){return this._key&7}}]);
return r}();d._encodingInfo={[c.EncodingType.R8_SIGNED]:{dataType:l.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[c.EncodingType.R8_UNSIGNED]:{dataType:l.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[c.EncodingType.R16_SIGNED]:{dataType:l.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[c.EncodingType.R16_UNSIGNED]:{dataType:l.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[c.EncodingType.R8G8_SIGNED]:{dataType:l.DataType.BYTE,bytesPerElement:1,
count:2,normalized:!1},[c.EncodingType.R8G8_UNSIGNED]:{dataType:l.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[c.EncodingType.R16G16_SIGNED]:{dataType:l.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[c.EncodingType.R16G16_UNSIGNED]:{dataType:l.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[c.EncodingType.R8G8B8A8_SIGNED]:{dataType:l.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[c.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:l.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[c.EncodingType.R8G8B8A8_COLOR]:{dataType:l.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[c.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:l.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[c.EncodingType.R16G16B16A16_PATTERN]:{dataType:l.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const e=r=>{switch(r){case l.DataType.FLOAT:return 4;case l.DataType.INT:return 4;case l.DataType.UNSIGNED_INT:return 4;
case l.DataType.SHORT:return 2;case l.DataType.UNSIGNED_SHORT:return 2;case l.DataType.BYTE:return 1;case l.DataType.UNSIGNED_BYTE:return 1}},h=(r,m,n)=>{m/=n;if(1===r)switch(m){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===r)switch(m){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===r)switch(m){case 0:return".xyz";case 1:return".yzw"}return""};b.VTLMaterial=d;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(["../../../../chunks/_rollupPluginBabelHelpers"],function(b){return function(){function a(g){this._array=[];0>=g&&console.error("strideInBytes must be positive!");this._stride=g}var v=a.prototype;v.reset=function(){this.array.length=0};v.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(g,c){return 65535&g|c<<16};a.i8888to32=function(g,c,l,f){return g&255|(c&255)<<8|(l&255)<<16|f<<24};a.i8816to32=
function(g,c,l){return g&255|(c&255)<<8|l<<16};b._createClass(a,[{key:"array",get:function(){return this._array}},{key:"index",get:function(){return 4*this._array.length/this._stride}},{key:"itemSize",get:function(){return this._stride}},{key:"sizeInBytes",get:function(){return 4*this._array.length}}]);return a}()})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],function(b){b.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";
a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(b.EncodingType||(b.EncodingType={}));b.AttributeStatus=
void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";a[a.UNUSED=3]="UNUSED"})(b.AttributeStatus||(b.AttributeStatus={}));Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,v,g,c,l){g=function(f){function d(h){return f.call(this,h)||this}a._inheritsLoose(d,f);var e=d.prototype;e.geometryInfo=function(){return d.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return d.ATTRIBUTES};e.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(g.VTLMaterial);g.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");g.GEOMETRY_LAYOUT=[new l.VertexElementDescriptor("a_pos",
2,c.DataType.SHORT,0,4)];g.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:v.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:v.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:v.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:v.EncodingType.R8_UNSIGNED,
precisionFactor:100},"circle-blur":{name:"blur",type:v.EncodingType.R8_UNSIGNED,precisionFactor:32}};b.VTLCircleMaterial=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,v,g,c,l){let f=function(d){function e(r){return d.call(this,
r)||this}a._inheritsLoose(e,d);var h=e.prototype;h.geometryInfo=function(){return e.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return e.ATTRIBUTES};h.attributesInfo=function(){return e.ATTRIBUTES_INFO};return e}(g.VTLMaterial);f.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];f.GEOMETRY_LAYOUT=[new l.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,4)];f.ATTRIBUTES_INFO={"fill-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",
type:v.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:v.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};g=function(d){function e(r,m){r=d.call(this,r)||this;r._usefillColor=m;return r}a._inheritsLoose(e,d);var h=e.prototype;h.geometryInfo=function(){return e.GEOMETRY_LAYOUT};h.opacityInfo=function(){return null};h.attributes=function(){return this._usefillColor?e.ATTRIBUTES_FILL:e.ATTRIBUTES_OUTLINE};h.attributesInfo=function(){return this._usefillColor?e.ATTRIBUTES_INFO_FILL:
e.ATTRIBUTES_INFO_OUTLINE};return e}(g.VTLMaterial);g.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];g.ATTRIBUTES_FILL=["fill-color","fill-opacity"];g.GEOMETRY_LAYOUT=[new l.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,8),new l.VertexElementDescriptor("a_offset",2,c.DataType.BYTE,4,8),new l.VertexElementDescriptor("a_xnormal",2,c.DataType.BYTE,6,8)];g.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:v.EncodingType.R8_UNSIGNED,
precisionFactor:100}};g.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:v.EncodingType.R8_UNSIGNED,precisionFactor:100}};b.VTLFillMaterial=f;b.VTLOutlineMaterial=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),
function(b,a,v,g,c,l){g=function(f){function d(h){return f.call(this,h)||this}a._inheritsLoose(d,f);var e=d.prototype;e.geometryInfo=function(){return d.GEOMETRY_LAYOUT};e.opacityInfo=function(){return null};e.attributes=function(){return d.ATTRIBUTES};e.attributesInfo=function(){return d.ATTRIBUTES_INFO};return d}(g.VTLMaterial);g.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");g.GEOMETRY_LAYOUT=[new l.VertexElementDescriptor("a_pos",
2,c.DataType.SHORT,0,16),new l.VertexElementDescriptor("a_extrude_offset",4,c.DataType.BYTE,4,16),new l.VertexElementDescriptor("a_dir_normal",4,c.DataType.BYTE,8,16),new l.VertexElementDescriptor("a_accumulatedDistance",2,c.DataType.UNSIGNED_SHORT,12,16)];g.ATTRIBUTES_INFO={"line-width":{name:"width",type:v.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:v.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:v.EncodingType.R8_SIGNED,precisionFactor:2},
"line-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:v.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:v.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:v.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};b.VTLLineMaterial=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ./enums ./VTLMaterial ../../../../webgl/enums ../../../../webgl/VertexElementDescriptor".split(" "),function(b,a,v,g,c,l){const f=[new l.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,16),new l.VertexElementDescriptor("a_vertexOffset",2,c.DataType.SHORT,4,16),new l.VertexElementDescriptor("a_texAngleRange",4,c.DataType.UNSIGNED_BYTE,8,16),new l.VertexElementDescriptor("a_levelInfo",
4,c.DataType.UNSIGNED_BYTE,12,16)],d=[new l.VertexElementDescriptor("a_opacityInfo",1,c.DataType.UNSIGNED_BYTE,0,1)];c=function(e){function h(m){return e.call(this,m)||this}a._inheritsLoose(h,e);var r=h.prototype;r.geometryInfo=function(){return f};r.opacityInfo=function(){return d};r.attributes=function(){return h.ATTRIBUTES};r.attributesInfo=function(){return h.ATTRIBUTES_INFO};return h}(g.VTLMaterial);c.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");
c.ATTRIBUTES_INFO={"icon-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:v.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:v.EncodingType.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:v.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};
g=function(e){function h(m){return e.call(this,m)||this}a._inheritsLoose(h,e);var r=h.prototype;r.geometryInfo=function(){return f};r.opacityInfo=function(){return d};r.attributes=function(){return h.ATTRIBUTES};r.attributesInfo=function(){return h.ATTRIBUTES_INFO};return h}(g.VTLMaterial);g.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");g.ATTRIBUTES_INFO={"text-color":{name:"color",type:v.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",
type:v.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:v.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:v.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:v.EncodingType.R8_UNSIGNED,isLayout:!0}};b.VTLIconMaterial=c;b.VTLTextMaterial=g;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(b,a){return function(){function v(g){this._expression=g}v.prototype.filter=function(g,c){if(!this._expression)return!0;try{return this._expression.evaluate(g,c)}catch(l){return console.log(l.message),!0}};v.createFilter=function(g){if(!g)return null;this.isLegacyFilter(g)&&(g=this.convertLegacyFilter(g));try{const c=b.createExpression(g,null,a.BooleanType);return new v(c)}catch(c){return console.log(c.message),
null}};v.isLegacyFilter=function(g){if(!Array.isArray(g)||0===g.length)return!0;switch(g[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===g.length&&"string"===typeof g[1]&&!Array.isArray(g[2]);case "in":return 3<=g.length&&"string"===typeof g[1]&&!Array.isArray(g[2]);case "!in":return!0;case "any":case "all":for(let c=1;c<g.length;c++)if(this.isLegacyFilter(g[c]))return!0;return!1;case "none":return!0;case "has":return 2===g.length&&("$id"===g[1]||
"$type"===g[1]);case "!has":return!0;default:return!1}};v.convertLegacyFilter=function(g){if(!Array.isArray(g)||0===g.length)return!0;const c=g[0];if(1===g.length)return"any"!==c;switch(c){case "\x3d\x3d":return v.convertComparison("\x3d\x3d",g[1],g[2]);case "!\x3d":return v.negate(v.convertComparison("\x3d\x3d",g[1],g[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return v.convertComparison(c,g[1],g[2]);case "in":return v.convertIn(g[1],g.slice(2));case "!in":return v.negate(v.convertIn(g[1],
g.slice(2)));case "any":case "all":case "none":return v.convertCombining(c,g.slice(1));case "has":return v.convertHas(g[1]);case "!has":return v.negate(v.convertHas(g[1]));default:throw Error("Unexpected legacy filter.");}};v.convertComparison=function(g,c,l){switch(c){case "$type":return[g,["geometry-type"],l];case "$id":return[g,["id"],l];default:return[g,["get",c],l]}};v.convertIn=function(g,c){switch(g){case "$type":return["in",["geometry-type"],["literal",c]];case "$id":return["in",["id"],["literal",
c]];default:return["in",["get",g],["literal",c]]}};v.convertHas=function(g){switch(g){case "$type":return!0;case "$id":return["has-id"];default:return["has",g]}};v.convertCombining=function(g,c){return[g].concat(c.map(this.convertLegacyFilter))};v.negate=function(g){return["!",g]};return v}()})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../Color ../../../../../core/colorUtils ../../../unitBezier ../GeometryUtils ./types ../../webgl/Geometry".split(" "),
function(b,a,v,g,c,l,f,d){function e(u,k,p){var z=typeof u;if("string"===z||"boolean"===z||"number"===z||null===u){if(p)switch(p.kind){case "string":"string"!==z&&(u=ha.toString(u));break;case "number":"number"!==z&&(u=ha.toNumber(u));break;case "color":u=ha.toColor(u)}u=["literal",u]}if(!Array.isArray(u)||0===u.length)throw Error("Expression must be a non empty array");z=u[0];if("string"!==typeof z)throw Error("First element of expression must be a string");const F=na[z];if(void 0===F)throw Error(`Invalid expression operator "${z}"`);
if(!F)throw Error(`Unimplemented expression operator "${z}"`);return F.parse(u,k,p)}let h=function(){function u(p){this._parent=p;this._vars={}}var k=u.prototype;k.add=function(p,z){this._vars[p]=z};k.get=function(p){return this._vars[p]?this._vars[p]:this._parent?this._parent.get(p):null};return u}(),r=function(){function u(){this.type=f.ValueType}u.parse=function(k){if(1<k.length)throw Error('"id" does not expect arguments');return new u};u.prototype.evaluate=function(k,p){return k?.id};return u}(),
m=function(){function u(){this.type=f.StringType}u.parse=function(k){if(1<k.length)throw Error('"geometry-type" does not expect arguments');return new u};u.prototype.evaluate=function(k,p){if(!k)return null;switch(k.type){case d.GeometryType.Point:return"Point";case d.GeometryType.LineString:return"LineString";case d.GeometryType.Polygon:return"Polygon";default:return null}};return u}(),n=function(){function u(){this.type=f.ObjectType}u.parse=function(k){if(1<k.length)throw Error('"properties" does not expect arguments');
return new u};u.prototype.evaluate=function(k,p){return k?.values};return u}(),q=function(){function u(){this.type=f.NumberType}u.parse=function(k){if(1<k.length)throw Error('"zoom" does not expect arguments');return new u};u.prototype.evaluate=function(k,p){return p};return u}(),t=function(){function u(k,p,z){this._lhs=k;this._rhs=p;this._compare=z;this.type=f.BooleanType}u.parse=function(k,p,z){if(3!==k.length&&4!==k.length)throw Error(`"${k[0]}" expects 2 or 3 arguments`);if(4===k.length)throw Error(`"${k[0]}" collator not supported`);
return new u(e(k[1],p),e(k[2],p),z)};u.prototype.evaluate=function(k,p){return this._compare(this._lhs.evaluate(k,p),this._rhs.evaluate(k,p))};return u}(),w=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return t.parse(p,z,(F,I)=>F===I)};return k}(t),A=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return t.parse(p,z,(F,I)=>F!==I)};return k}(t),E=function(u){function k(){return u.apply(this,
arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return t.parse(p,z,(F,I)=>F<I)};return k}(t),B=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return t.parse(p,z,(F,I)=>F<=I)};return k}(t),C=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return t.parse(p,z,(F,I)=>F>I)};return k}(t),G=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=
function(p,z){return t.parse(p,z,(F,I)=>F>=I)};return k}(t),y=function(){function u(k){this._arg=k;this.type=f.BooleanType}u.parse=function(k,p){if(2!==k.length)throw Error('"!" expects 1 argument');return new u(e(k[1],p))};u.prototype.evaluate=function(k,p){return!this._arg.evaluate(k,p)};return u}(),x=function(){function u(k){this._args=k;this.type=f.BooleanType}u.parse=function(k,p){const z=[];for(let F=1;F<k.length;F++)z.push(e(k[F],p));return new u(z)};u.prototype.evaluate=function(k,p){for(const z of this._args)if(!z.evaluate(k,
p))return!1;return!0};return u}(),D=function(){function u(k){this._args=k;this.type=f.BooleanType}u.parse=function(k,p){const z=[];for(let F=1;F<k.length;F++)z.push(e(k[F],p));return new u(z)};u.prototype.evaluate=function(k,p){for(const z of this._args)if(z.evaluate(k,p))return!0;return!1};return u}(),J=function(){function u(k){this._args=k;this.type=f.BooleanType}u.parse=function(k,p){const z=[];for(let F=1;F<k.length;F++)z.push(e(k[F],p));return new u(z)};u.prototype.evaluate=function(k,p){for(const z of this._args)if(z.evaluate(k,
p))return!1;return!0};return u}(),K=function(){function u(k,p,z){this.type=k;this._args=p;this._fallback=z}u.parse=function(k,p,z){if(4>k.length)throw Error('"case" expects at least 3 arguments');if(1===k.length%2)throw Error('"case" expects an odd number of arguments');let F;const I=[];for(let Q=1;Q<k.length-1;Q+=2){const Z=e(k[Q],p),V=e(k[Q+1],p,z);F||(F=V.type);I.push({condition:Z,output:V})}k=e(k[k.length-1],p,z);F||(F=k.type);return new u(F,I,k)};u.prototype.evaluate=function(k,p){for(const z of this._args)if(z.condition.evaluate(k,
p))return z.output.evaluate(k,p);return this._fallback.evaluate(k,p)};return u}(),R=function(){function u(k,p){this.type=k;this._args=p}u.parse=function(k,p){if(2>k.length)throw Error('"coalesce" expects at least 1 argument');let z;const F=[];for(let I=1;I<k.length;I++){const Q=e(k[I],p);z||(z=Q.type);F.push(Q)}return new u(z,F)};u.prototype.evaluate=function(k,p){for(const z of this._args){const F=z.evaluate(k,p);if(null!==F)return F}return null};return u}(),L=function(){function u(k,p,z,F,I){this.type=
k;this._input=p;this._labels=z;this._outputs=F;this._fallback=I}u.parse=function(k,p){if(3>k.length)throw Error('"match" expects at least 3 arguments');if(0===k.length%2)throw Error('"case" expects an even number of arguments');let z;const F=e(k[1],p),I=[],Q={};let Z;for(let da=2;da<k.length-1;da+=2){var V=k[da];Array.isArray(V)||(V=[V]);for(const ia of V){V=typeof ia;if("string"!==V&&"number"!==V)throw Error('"match" requires string or number literal as labels');if(!Z)Z=V;else if(V!==Z)throw Error('"match" requires labels to have the same type');
Q[ia]=I.length}V=e(k[da+1],p);z||(z=V.type);I.push(V)}return new u(z,F,Q,I,e(k[k.length-1],p))};u.prototype.evaluate=function(k,p){const z=this._input.evaluate(k,p);return(this._outputs[this._labels[z]]||this._fallback).evaluate(k,p)};return u}(),S=function(){function u(p,z,F,I,Q){this._operator=p;this.type=z;this.interpolation=F;this.input=I;this._stops=Q}u.parse=function(p,z,F){const I=p[0];if(5>p.length)throw Error(`"${I}" expects at least 4 arguments`);const Q=p[1];if(!Array.isArray(Q)||0===Q.length)throw Error(`"${Q}" is not a valid interpolation`);
switch(Q[0]){case "linear":if(1!==Q.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==Q.length||"number"!==typeof Q[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==Q.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var Z=1;5>Z;Z++){var V=Q[Z];if("number"!==typeof V||0>V||1<V)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");
}break;default:throw Error(`"${p[0]}" unknown interpolation type "${Q[0]}"`);}if(1!==p.length%2)throw Error(`"${I}" expects an even number of arguments`);Z=e(p[2],z,f.NumberType);let da;"interpolate-hcl"===I||"interpolate-lab"===I?da=f.ColorType:F&&"value"!==F.kind&&(da=F);F=[];for(V=3;V<p.length;V+=2){const ia=p[V];if("number"!==typeof ia)throw Error(`"${I}" requires stop inputs as literal numbers`);if(F.length&&F[F.length-1][0]>=ia)throw Error(`"${I}" requires strictly ascending stop inputs`);const oa=
e(p[V+1],z,da);da||(da=oa.type);F.push([ia,oa])}if(da&&da!==f.ColorType&&da!==f.NumberType&&("array"!==da.kind||da.itemType!==f.NumberType))throw Error(`"${I}" cannot interpolate type ${f.typeToString(da)}`);return new u(I,da,Q,Z,F)};var k=u.prototype;k.evaluate=function(p,z){var F=this._stops;if(1===F.length)return F[0][1].evaluate(p,z);var I=this.input.evaluate(p,z);if(I<=F[0][0])return F[0][1].evaluate(p,z);if(I>=F[F.length-1][0])return F[F.length-1][1].evaluate(p,z);let Q=0;for(;++Q<F.length&&
!(I<F[Q][0]););const Z=u.interpolationRatio(this.interpolation,I,F[Q-1][0],F[Q][0]);I=F[Q-1][1].evaluate(p,z);const V=F[Q][1].evaluate(p,z);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(I)&&Array.isArray(V))return I.map((da,ia)=>l.interpolate(da,V[ia],Z));if("color"===this.type.kind&&I instanceof v&&V instanceof v)return I=new v(I),p=new v(V),new v([l.interpolate(I.r,p.r,Z),l.interpolate(I.g,p.g,Z),l.interpolate(I.b,p.b,Z),l.interpolate(I.a,p.a,Z)]);if("number"===this.type.kind&&
"number"===typeof I&&"number"===typeof V)return l.interpolate(I,V,Z);throw Error(`"${this._operator}" cannot interpolate type ${f.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return p=g.toLCH(I),z=g.toLCH(V),F=z.h-p.h,p=g.toRGB({h:p.h+Z*(180<F||-180>F?F-360*Math.round(F/360):F),c:l.interpolate(p.c,z.c,Z),l:l.interpolate(p.l,z.l,Z)}),new v({a:l.interpolate(I.a,V.a,Z),...p});if("interpolate-lab"===this._operator)return p=g.toLAB(I),z=g.toLAB(V),p=g.toRGB({l:l.interpolate(p.l,z.l,
Z),a:l.interpolate(p.a,z.a,Z),b:l.interpolate(p.b,z.b,Z)}),new v({a:l.interpolate(I.a,V.a,Z),...p});throw Error(`Unexpected operator "${this._operator}"`);};k.interpolationUniformValue=function(p,z){const F=this._stops;if(1===F.length||p>=F[F.length-1][0])return 0;let I=0;for(;++I<F.length&&!(p<F[I][0]););return u.interpolationRatio(this.interpolation,z,F[I-1][0],F[I][0])};k.getInterpolationRange=function(p){const z=this._stops;if(1===z.length)return p=z[0][0],[p,p];var F=z[z.length-1][0];if(p>=F)return[F,
F];for(F=0;++F<z.length&&!(p<z[F][0]););return[z[F-1][0],z[F][0]]};u.interpolationRatio=function(p,z,F,I){let Q=0;"linear"===p[0]?Q=u._exponentialInterpolationRatio(z,1,F,I):"exponential"===p[0]?Q=u._exponentialInterpolationRatio(z,p[1],F,I):"cubic-bezier"===p[0]&&(Q=c.unitBezier(p[1],p[2],p[3],p[4])(u._exponentialInterpolationRatio(z,1,F,I),1E-5));0>Q?Q=0:1<Q&&(Q=1);return Q};u._exponentialInterpolationRatio=function(p,z,F,I){I-=F;if(0===I)return 0;p-=F;return 1===z?p/I:(z**p-1)/(z**I-1)};return u}(),
N=function(){function u(k,p,z){this.type=k;this._input=p;this._stops=z}u.parse=function(k,p){if(5>k.length)throw Error('"step" expects at least 4 arguments');if(1!==k.length%2)throw Error('"step" expects an even number of arguments');const z=e(k[1],p,f.NumberType);let F;const I=[];I.push([-Infinity,e(k[2],p)]);for(let Q=3;Q<k.length;Q+=2){const Z=k[Q];if("number"!==typeof Z)throw Error('"step" requires stop inputs as literal numbers');if(I.length&&I[I.length-1][0]>=Z)throw Error('"step" requires strictly ascending stop inputs');
const V=e(k[Q+1],p);F||(F=V.type);I.push([Z,V])}return new u(F,z,I)};u.prototype.evaluate=function(k,p){const z=this._stops;if(1===z.length)return z[0][1].evaluate(k,p);const F=this._input.evaluate(k,p);let I=0;for(;++I<z.length&&!(F<z[I][0]););return this._stops[I-1][1].evaluate(k,p)};return u}(),O=function(){function u(k,p){this.type=k;this._output=p}u.parse=function(k,p,z){if(4>k.length)throw Error('"let" expects at least 3 arguments');if(1===k.length%2)throw Error('"let" expects an odd number of arguments');
const F=new h(p);for(let I=1;I<k.length-1;I+=2){const Q=k[I];if("string"!==typeof Q)throw Error(`"let" requires a string to define variable names - found ${Q}`);F.add(Q,e(k[I+1],p))}k=e(k[k.length-1],F,z);return new u(k.type,k)};u.prototype.evaluate=function(k,p){return this._output.evaluate(k,p)};return u}(),T=function(){function u(k,p){this.type=k;this.output=p}u.parse=function(k,p,z){if(2!==k.length||"string"!==typeof k[1])throw Error('"var" requires just one literal string argument');p=p.get(k[1]);
if(!p)throw Error(`${k[1]} must be defined before being used in a "var" expression`);return new u(z||f.ValueType,p)};u.prototype.evaluate=function(k,p){return this.output.evaluate(k,p)};return u}(),M=function(){function u(k,p,z){this.type=k;this._index=p;this._array=z}u.parse=function(k,p){if(3!==k.length)throw Error('"at" expects 2 arguments');const z=e(k[1],p,f.NumberType);k=e(k[2],p);return new u(k.type.itemType,z,k)};u.prototype.evaluate=function(k,p){const z=this._index.evaluate(k,p);k=this._array.evaluate(k,
p);if(0>z||z>=k.length)throw Error('"at" index out of bounds');if(z!==Math.floor(z))throw Error('"at" index must be an integer');return k[z]};return u}(),H=function(){function u(k,p){this._key=k;this._obj=p;this.type=f.ValueType}u.parse=function(k,p){let z;switch(k.length){case 2:return z=e(k[1],p),new u(z);case 3:return z=e(k[1],p),k=e(k[2],p),new u(z,k);default:throw Error('"get" expects 1 or 2 arguments');}};u.prototype.evaluate=function(k,p){const z=this._key.evaluate(k,p);return this._obj?this._obj.evaluate(k,
p)[z]:k?.values[z]};return u}(),P=function(){function u(k,p){this._key=k;this._obj=p;this.type=f.BooleanType}u.parse=function(k,p){let z;switch(k.length){case 2:return z=e(k[1],p),new u(z);case 3:return z=e(k[1],p),k=e(k[2],p),new u(z,k);default:throw Error('"has" expects 1 or 2 arguments');}};u.prototype.evaluate=function(k,p){const z=this._key.evaluate(k,p);return this._obj?(k=this._obj.evaluate(k,p),z in k):!!k?.values[z]};return u}(),W=function(){function u(k,p){this._key=k;this._vals=p;this.type=
f.BooleanType}u.parse=function(k,p){if(3!==k.length)throw Error('"in" expects 2 arguments');return new u(e(k[1],p),e(k[2],p))};u.prototype.evaluate=function(k,p){const z=this._key.evaluate(k,p);return this._vals.evaluate(k,p).includes(z)};return u}(),U=function(){function u(k,p,z){this._item=k;this._array=p;this._from=z;this.type=f.NumberType}u.parse=function(k,p){if(3>k.length||4<k.length)throw Error('"index-of" expects 3 or 4 arguments');const z=e(k[1],p),F=e(k[2],p);return 4===k.length?(k=e(k[3],
p,f.NumberType),new u(z,F,k)):new u(z,F)};u.prototype.evaluate=function(k,p){const z=this._item.evaluate(k,p),F=this._array.evaluate(k,p);if(this._from){k=this._from.evaluate(k,p);if(k!==Math.floor(k))throw Error('"index-of" index must be an integer');return F.indexOf(z,k)}return F.indexOf(z)};return u}(),Y=function(){function u(k){this._arg=k;this.type=f.NumberType}u.parse=function(k,p){if(2!==k.length)throw Error('"length" expects 2 arguments');k=e(k[1],p);return new u(k)};u.prototype.evaluate=
function(k,p){k=this._arg.evaluate(k,p);if("string"===typeof k||Array.isArray(k))return k.length;throw Error('"length" expects string or array');};return u}(),X=function(){function u(k,p,z,F){this.type=k;this._array=p;this._from=z;this._to=F}u.parse=function(k,p){if(3>k.length||4<k.length)throw Error('"slice" expects 2 or 3 arguments');const z=e(k[1],p),F=e(k[2],p,f.NumberType);if(F.type!==f.NumberType)throw Error('"slice" index must return a number');if(4===k.length){k=e(k[3],p,f.NumberType);if(k.type!==
f.NumberType)throw Error('"slice" index must return a number');return new u(z.type,z,F,k)}return new u(z.type,z,F)};u.prototype.evaluate=function(k,p){const z=this._array.evaluate(k,p);if(!Array.isArray(z)&&"string"!==typeof z)throw Error('"slice" input must be an array or a string');const F=this._from.evaluate(k,p);if(0>F||F>=z.length)throw Error('"slice" index out of bounds');if(F!==Math.floor(F))throw Error('"slice" index must be an integer');if(this._to){k=this._to.evaluate(k,p);if(0>k||k>=z.length)throw Error('"slice" index out of bounds');
if(k!==Math.floor(k))throw Error('"slice" index must be an integer');return z.slice(F,k)}return z.slice(F)};return u}(),ea=function(){function u(){this.type=f.BooleanType}u.parse=function(k){if(1!==k.length)throw Error('"has-id" expects no arguments');return new u};u.prototype.evaluate=function(k,p){return k&&void 0!==k.id};return u}(),ca=function(){function u(k,p){this._args=k;this._calculate=p;this.type=f.NumberType}u.parse=function(k,p,z){k=k.slice(1).map(F=>e(F,p));return new u(k,z)};u.prototype.evaluate=
function(k,p){let z;this._args&&(z=this._args.map(F=>F.evaluate(k,p)));return this._calculate(z)};return u}(),aa=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){switch(p.length){case 2:return ca.parse(p,z,F=>-F[0]);case 3:return ca.parse(p,z,F=>F[0]-F[1]);default:throw Error('"-" expects 1 or 2 arguments');}};return k}(ca),fa=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return ca.parse(p,
z,F=>{let I=1;for(const Q of F)I*=Q;return I})};return k}(ca),ka=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){if(3===p.length)return ca.parse(p,z,F=>F[0]/F[1]);throw Error('"/" expects 2 arguments');};return k}(ca),la=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){if(3===p.length)return ca.parse(p,z,F=>F[0]%F[1]);throw Error('"%" expects 2 arguments');};return k}(ca),pa=function(u){function k(){return u.apply(this,
arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){if(3===p.length)return ca.parse(p,z,F=>F[0]**F[1]);throw Error('"^" expects 1 or 2 arguments');};return k}(ca),qa=function(u){function k(){return u.apply(this,arguments)||this}a._inheritsLoose(k,u);k.parse=function(p,z){return ca.parse(p,z,F=>{let I=0;for(const Q of F)I+=Q;return I})};return k}(ca),ba=function(){function u(k,p){this._args=k;this._calculate=p;this.type=f.NumberType}u.parse=function(k,p){const z=k.slice(1).map(F=>e(F,p));
return new u(z,u.ops[k[0]])};u.prototype.evaluate=function(k,p){let z;this._args&&(z=this._args.map(F=>F.evaluate(k,p)));return this._calculate(z)};return u}();ba.ops={abs:u=>Math.abs(u[0]),acos:u=>Math.acos(u[0]),asin:u=>Math.asin(u[0]),atan:u=>Math.atan(u[0]),ceil:u=>Math.ceil(u[0]),cos:u=>Math.cos(u[0]),e:()=>Math.E,floor:u=>Math.floor(u[0]),ln:u=>Math.log(u[0]),ln2:()=>Math.LN2,log10:u=>Math.log(u[0])/Math.LN10,log2:u=>Math.log(u[0])/Math.LN2,max:u=>Math.max(...u),min:u=>Math.min(...u),pi:()=>
Math.PI,round:u=>Math.round(u[0]),sin:u=>Math.sin(u[0]),sqrt:u=>Math.sqrt(u[0]),tan:u=>Math.tan(u[0])};let ra=function(){function u(k){this._args=k;this.type=f.StringType}u.parse=function(k,p){return new u(k.slice(1).map(z=>e(z,p)))};u.prototype.evaluate=function(k,p){return this._args.map(z=>z.evaluate(k,p)).join("")};return u}(),ma=function(){function u(k,p){this._arg=k;this._calculate=p;this.type=f.StringType}u.parse=function(k,p){if(2!==k.length)throw Error(`${k[0]} expects 1 argument`);p=e(k[1],
p);return new u(p,u.ops[k[0]])};u.prototype.evaluate=function(k,p){return this._calculate(this._arg.evaluate(k,p))};return u}();ma.ops={downcase:u=>u.toLowerCase(),upcase:u=>u.toUpperCase()};let sa=function(){function u(p){this._args=p;this.type=f.ColorType}u.parse=function(p,z){if(4!==p.length)throw Error('"rgb" expects 3 arguments');p=p.slice(1).map(F=>e(F,z));return new u(p)};var k=u.prototype;k.evaluate=function(p,z){const F=this._validate(this._args[0].evaluate(p,z)),I=this._validate(this._args[1].evaluate(p,
z));p=this._validate(this._args[2].evaluate(p,z));return new v({r:F,g:I,b:p})};k._validate=function(p){if("number"!==typeof p||0>p||255<p)throw Error(`${p}: invalid color component`);return Math.round(p)};return u}(),ta=function(){function u(p){this._args=p;this.type=f.ColorType}u.parse=function(p,z){if(5!==p.length)throw Error('"rgba" expects 4 arguments');p=p.slice(1).map(F=>e(F,z));return new u(p)};var k=u.prototype;k.evaluate=function(p,z){const F=this._validate(this._args[0].evaluate(p,z)),I=
this._validate(this._args[1].evaluate(p,z)),Q=this._validate(this._args[2].evaluate(p,z));p=this._validateAlpha(this._args[3].evaluate(p,z));return new v({r:F,g:I,b:Q,a:p})};k._validate=function(p){if("number"!==typeof p||0>p||255<p)throw Error(`${p}: invalid color component`);return Math.round(p)};k._validateAlpha=function(p){if("number"!==typeof p||0>p||1<p)throw Error(`${p}: invalid alpha color component`);return p};return u}(),ua=function(){function u(k){this._color=k;this.type=f.arrayType(f.NumberType,
4)}u.parse=function(k,p){if(2!==k.length)throw Error('"to-rgba" expects 1 argument');k=e(k[1],p);return new u(k)};u.prototype.evaluate=function(k,p){return(new v(this._color.evaluate(k,p))).toRgba()};return u}(),ja=function(){function u(k,p){this.type=k;this._args=p}u.parse=function(k,p){var z=k[0];if(2>k.length)throw Error(`${z} expects at least one argument`);let F=1,I;if("array"===z){if(2<k.length){switch(k[1]){case "string":I=f.StringType;break;case "number":I=f.NumberType;break;case "boolean":I=
f.BooleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}F++}else I=f.ValueType;if(3<k.length){var Q=k[2];if(null!==Q&&("number"!==typeof Q||0>Q||Q!==Math.floor(Q)))throw Error('"array" length argument must be a positive integer literal');F++}I=f.arrayType(I,Q)}else switch(z){case "string":I=f.StringType;break;case "number":I=f.NumberType;break;case "boolean":I=f.BooleanType;break;case "object":I=f.ObjectType}for(z=[];F<k.length;F++)Q=e(k[F],p),z.push(Q);
return new u(I,z)};u.prototype.evaluate=function(k,p){let z;for(const F of this._args){const I=F.evaluate(k,p);z=f.getType(I);if(f.matchType(z,this.type))return I}throw Error(`Expected ${f.typeToString(this.type)} but got ${f.typeToString(z)}`);};return u}(),ha=function(){function u(k,p){this.type=k;this._args=p}u.parse=function(k,p){var z=k[0];const F=u.types[z];if(F===f.BooleanType||F===f.StringType){if(2!==k.length)throw Error(`${z} expects one argument`);}else if(2>k.length)throw Error(`${z} expects at least one argument`);
z=[];for(let I=1;I<k.length;I++){const Q=e(k[I],p);z.push(Q)}return new u(F,z)};u.prototype.evaluate=function(k,p){if(this.type===f.BooleanType)return!!this._args[0].evaluate(k,p);if(this.type===f.StringType)return f.valueToString(this._args[0].evaluate(k,p));if(this.type===f.NumberType){for(const F of this._args){var z=Number(F.evaluate(k,p));if(!isNaN(z))return z}return null}if(this.type===f.ColorType){for(z of this._args)try{const F=u.toColor(z.evaluate(k,p));if(F instanceof v)return F}catch{}return null}};
u.toBoolean=function(k){return!!k};u.toString=function(k){return f.valueToString(k)};u.toNumber=function(k){const p=Number(k);if(isNaN(p))throw Error(`"${k}" is not a number`);return p};u.toColor=function(k){if(k instanceof v)return k;if("string"===typeof k){const p=v.fromString(k);if(p)return p;throw Error(`"${k}" is not a color`);}if(Array.isArray(k))return v.fromArray(k);throw Error(`"${k}" is not a color`);};return u}();ha.types={"to-boolean":f.BooleanType,"to-color":f.ColorType,"to-number":f.NumberType,
"to-string":f.StringType};let va=function(){function u(k){this._val=k;this.type=f.getType(k)}u.parse=function(k){if(2!==k.length)throw Error('"literal" expects 1 argument');return new u(k[1])};u.prototype.evaluate=function(k,p){return this._val};return u}(),wa=function(){function u(k){this._arg=k;this.type=f.StringType}u.parse=function(k,p){if(2!==k.length)throw Error('"typeof" expects 1 argument');return new u(e(k[1],p))};u.prototype.evaluate=function(k,p){return f.typeToString(f.getType(this._arg.evaluate(k,
p)))};return u}();const na={array:ja,boolean:ja,collator:null,format:null,image:null,literal:va,number:ja,"number-format":null,object:ja,string:ja,"to-boolean":ha,"to-color":ha,"to-number":ha,"to-string":ha,typeof:wa,accumulated:null,"feature-state":null,"geometry-type":m,id:r,"line-progress":null,properties:n,at:M,get:H,has:P,in:W,"index-of":U,length:Y,slice:X,"!":y,"!\x3d":A,"\x3c":E,"\x3c\x3d":B,"\x3d\x3d":w,"\x3e":C,"\x3e\x3d":G,all:x,any:D,case:K,coalesce:R,match:L,within:null,interpolate:S,
"interpolate-hcl":S,"interpolate-lab":S,step:N,let:O,var:T,concat:ra,downcase:ma,"is-supported-script":null,"resolved-locale":null,upcase:ma,rgb:sa,rgba:ta,"to-rgba":ua,"-":aa,"*":fa,"/":ka,"%":la,"^":pa,"+":qa,abs:ba,acos:ba,asin:ba,atan:ba,ceil:ba,cos:ba,e:ba,floor:ba,ln:ba,ln2:ba,log10:ba,log2:ba,max:ba,min:ba,pi:ba,round:ba,sin:ba,sqrt:ba,tan:ba,zoom:q,"heatmap-density":null,"has-id":ea,none:J};b.ALL=x;b.ANY=D;b.Add=qa;b.Assert=ja;b.At=M;b.Calculate=ba;b.Case=K;b.Coalesce=R;b.Coerce=ha;b.Concat=
ra;b.Div=ka;b.EQ=w;b.GE=G;b.GT=C;b.GeomType=m;b.Get=H;b.Has=P;b.HasID=ea;b.ID=r;b.In=W;b.IndexOf=U;b.Interpolate=S;b.LE=B;b.LT=E;b.Length=Y;b.Let=O;b.Literal=va;b.Match=L;b.Mod=la;b.Mul=fa;b.NE=A;b.NONE=J;b.NOT=y;b.Pow=pa;b.Properties=n;b.Rgb=sa;b.Rgba=ta;b.Slice=X;b.Step=N;b.String=ma;b.Sub=aa;b.ToRgba=ua;b.TypeOf=wa;b.Var=T;b.Zoom=q;b.createExpression=e;b.ops=na;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/unitBezier":function(){define(["exports"],
function(b){function a(c,l,f,d){function e(w,A){var E;let B,C;B=w;for(E=0;8>E;E++){C=((m*B+r)*B+h)*B-w;if(Math.abs(C)<A)return B;var G=(3*m*B+2*r)*B+h;if(1E-6>Math.abs(G))break;B-=C/G}G=0;E=1;B=w;if(B<G)return G;if(B>E)return E;for(;G<E;){C=((m*B+r)*B+h)*B;if(Math.abs(C-w)<A)break;w>C?G=B:E=B;B=.5*(E-G)+G}return B}const h=3*c,r=3*(f-c)-h,m=1-h-r,n=3*l,q=3*(d-l)-n,t=1-n-q;return function(w,A=1E-6){w=e(w,A);return((t*w+q)*w+n)*w}}const v=/^cubic-bezier\((.*)\)/,g={};g.ease=a(.25,.1,.25,1);g.linear=
a(0,0,1,1);g.easeIn=g["ease-in"]=a(.42,0,1,1);g.easeOut=g["ease-out"]=a(0,0,.58,1);g.easeInOut=g["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=g;b.parse=function(c){let l=g[c]||null;!l&&(c=v.exec(c))&&(c=c[1].split(",").map(f=>parseFloat(f.trim())),4!==c.length||c.some(f=>isNaN(f))||(l=a.apply(a,c)));return l};b.unitBezier=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/GeometryUtils":function(){define(["exports"],function(b){function a(d,
e){d%=e;return 0<=d?d:d+e}const v=Number.POSITIVE_INFINITY,g=Math.PI,c=128/g,l=256/360,f=1/Math.LN2;b.C_256_TO_RAD=g/128;b.C_2PI=2*g;b.C_DEG_TO_256=l;b.C_DEG_TO_RAD=g/180;b.C_INFINITY=v;b.C_PI=g;b.C_PI_BY_2=g/2;b.C_RAD_TO_256=c;b.C_SQRT2=1.414213562;b.C_SQRT2_INV=1/1.414213562;b.between=function(d,e,h){return d>=e&&d<=h||d>=h&&d<=e};b.degToByte=function(d){return a(d*l,256)};b.interpolate=function(d,e,h){return d*(1-h)+e*h};b.log2=function(d){return Math.log(d)*f};b.positiveMod=a;b.radToByte=function(d){return a(d*
c,256)};b.sqr=function(d){return d*d};Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(b,a){function v(t,w){return{kind:"array",itemType:t,n:w}}function g(t){if("array"===t.kind){const w=g(t.itemType);return"number"===typeof t.n?`array<${w}, ${t.n}>`:"value"===t.itemType.kind?"array":`array<${w}>`}return t.kind}function c(t){if(null===t)return f;
if("string"===typeof t)return e;if("boolean"===typeof t)return h;if("number"===typeof t)return d;if(t instanceof a)return r;if(Array.isArray(t)){let w;for(const A of t){const E=c(A);if(!w)w=E;else if(w!==E){w=n;break}}return v(w||n,t.length)}return"object"===typeof t?m:n}function l(t,w){if("array"===w.kind)return"array"===t.kind&&(0===t.n&&"value"===t.itemType.kind||l(t.itemType,w.itemType))&&("number"!==typeof w.n||w.n===t.n);if("value"===w.kind)for(const A of q)if(l(t,A))return!0;return w.kind===
t.kind}const f={kind:"null"},d={kind:"number"},e={kind:"string"},h={kind:"boolean"},r={kind:"color"},m={kind:"object"},n={kind:"value"},q=[f,d,e,h,r,m,v(n)];b.BooleanType=h;b.ColorType=r;b.NullType=f;b.NumberType=d;b.ObjectType=m;b.StringType=e;b.ValueType=n;b.arrayType=v;b.getType=c;b.matchType=l;b.typeToString=g;b.valueToString=function(t){if(null===t)return"";const w=typeof t;return"string"===w?t:"number"===w||"boolean"===w?String(t):t instanceof a?t.toString():JSON.stringify(t)};Object.defineProperties(b,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/webgl/Geometry":function(){define(["exports"],function(b){let a=function(){function v(c,l){this.x=c;this.y=l}var g=v.prototype;g.clone=function(){return new v(this.x,this.y)};g.equals=function(c,l){return c===this.x&&l===this.y};g.isEqual=function(c){return c.x===this.x&&c.y===this.y};g.setCoords=function(c,l){this.x=c;this.y=l};g.normalize=function(){var c=this.x;const l=this.y;c=Math.sqrt(c*c+l*l);this.x/=c;
this.y/=c};g.rightPerpendicular=function(){const c=this.x;this.x=this.y;this.y=-c};g.move=function(c,l){this.x+=c;this.y+=l};g.assign=function(c){this.x=c.x;this.y=c.y};g.assignAdd=function(c,l){this.x=c.x+l.x;this.y=c.y+l.y};g.assignSub=function(c,l){this.x=c.x-l.x;this.y=c.y-l.y};g.rotate=function(c,l){const f=this.x,d=this.y;this.x=f*c-d*l;this.y=f*l+d*c};g.scale=function(c){this.x*=c;this.y*=c};g.length=function(){const c=this.x,l=this.y;return Math.sqrt(c*c+l*l)};v.distance=function(c,l){const f=
l.x-c.x;c=l.y-c.y;return Math.sqrt(f*f+c*c)};v.add=function(c,l){return new v(c.x+l.x,c.y+l.y)};v.sub=function(c,l){return new v(c.x-l.x,c.y-l.y)};return v}();b.GeometryType=void 0;(function(v){v[v.Unknown=0]="Unknown";v[v.Point=1]="Point";v[v.LineString=2]="LineString";v[v.Polygon=3]="Polygon"})(b.GeometryType||(b.GeometryType={}));b.Point=a;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color",
"../GeometryUtils","../expression/expression","../expression/types"],function(b,a,v,g){return function(){function c(f,d){this.isDataDriven=!1;this.interpolator=null;switch(f.type){case "number":var e=!0;break;case "color":e=!0;break;case "array":e="number"===f.value;break;default:e=!1}null==d&&(d=f.default);if(Array.isArray(d)&&0<d.length&&v.ops[d[0]]){e={number:g.NumberType,color:g.ColorType,string:g.StringType,boolean:g.BooleanType,enum:g.StringType};try{var h="array"===f.type?g.arrayType(e[f.value]||
g.ValueType,f.length):e[f.type];const r=v.createExpression(d,null,h);this.getValue=this._buildExpression(r,f);this.isDataDriven=!0;r instanceof v.Interpolate&&r.input instanceof v.Zoom&&(this.interpolator=r)}catch(r){console.log(r.message),this.getValue=this._buildSimple(f.default)}}else{e&&"interval"===d.type&&(e=!1);if(h=d&&d.stops&&0<d.stops.length)for(const r of d.stops)r[1]=this._validate(r[1],f);if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,
f)),h)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,f);break;case "categorical":this.getValue=this._buildCategorical(d,f);break;default:this.getValue=e?this._buildInterpolate(d,f):this._buildInterval(d,f)}else this.getValue=this._buildIdentity(d,f);else h?this.getValue=e?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,f),this.getValue=this._buildSimple(d))}}var l=c.prototype;l._validate=function(f,d){if("number"===d.type){if(f<d.minimum)return d.minimum;
if(f>d.maximum)return d.maximum}else"color"===d.type?f=c._parseColor(f):"enum"===d.type?"string"===typeof f&&(f=d.values.indexOf(f)):"array"===d.type&&"enum"===d.value?f=f.map(e=>"string"===typeof e?d.values.indexOf(e):e):"string"===d.type&&(f=g.valueToString(f));return f};l._buildSimple=function(f){return()=>f};l._buildExpression=function(f,d){return(e,h)=>{try{const r=f.evaluate(h,e);return void 0===r?d.default:this._validate(r,d)}catch(r){return console.log(r.message),d.default}}};l._buildIdentity=
function(f,d){return(e,h)=>{let r;h&&(r=h.values[f.property]);void 0!==r&&(r=this._validate(r,d));return null!=r?r:void 0!==f.default?f.default:d.default}};l._buildCategorical=function(f,d){return(e,h)=>{let r;h&&(r=h.values[f.property]);r=this._categorical(r,f.stops);return void 0!==r?r:void 0!==f.default?f.default:d.default}};l._buildInterval=function(f,d){return(e,h)=>{let r;h&&(r=h.values[f.property]);return"number"===typeof r?this._interval(r,f.stops):void 0!==f.default?f.default:d.default}};
l._buildInterpolate=function(f,d){return(e,h)=>{let r;h&&(r=h.values[f.property]);return"number"===typeof r?this._interpolate(r,f.stops,f.base||1):void 0!==f.default?f.default:d.default}};l._buildZoomInterpolate=function(f){return d=>this._interpolate(d,f.stops,f.base||1)};l._buildZoomInterval=function(f){return d=>this._interval(d,f.stops)};l._categorical=function(f,d){const e=d.length;for(let h=0;h<e;h++)if(d[h][0]===f)return d[h][1]};l._interval=function(f,d){const e=d.length;let h=0;for(let r=
0;r<e;r++)if(d[r][0]<=f)h=r;else break;return d[h][1]};l._interpolate=function(f,d,e){const h=d.length;for(let n=0;n<h;n++){const q=d[n];if(q[0]<=f)var r=q;else{var m=q;break}}if(r&&m){d=m[0]-r[0];f-=r[0];e=1===e?f/d:(e**f-1)/(e**d-1);if(Array.isArray(r[1])){r=r[1];m=m[1];f=[];for(d=0;d<r.length;d++)f.push(a.interpolate(r[d],m[d],e));return f}return a.interpolate(r[1],m[1],e)}if(r)return r[1];if(m)return m[1]};c._isEmpty=function(f){for(const d in f)if(f.hasOwnProperty(d))return!1;return!0};c._parseColor=
function(f){if(Array.isArray(f))return f;"string"===typeof f&&(f=new b(f));if(f instanceof b&&!this._isEmpty(f))return b.toUnitRGBA(f)};return c}()})},"*noref":1}});
define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../2d/engine/vectorTiles/SchemaHelper ../../2d/engine/vectorTiles/TileHandler3D ../../2d/engine/vectorTiles/VTLPainter3D ../../2d/engine/vectorTiles/style/StyleRepository ./LayerView3D ./TiledLayerView3D ../terrain/terrainUtils ../../layers/LayerView".split(" "),function(b,
a,v,g,c,l,f,d,e,h,r,m,n,q,t,w,A,E){d=function(B){function C(){var y=B.apply(this,arguments)||this;y.type="vector-tile-3d";return y}b._inheritsLoose(C,B);var G=C.prototype;G.initialize=function(){if(g.isNone(this.layer.fullExtent))this.addResolvingPromise(Promise.reject(new v("vectortilelayerview:full-extent-undefined","This layer view's layer does not define a fullExtent.")));else{var {basemapTerrain:y,spatialReference:x,state:D,viewingMode:J}=this.view,{pixelRatio:K}=D,R="local"===J&&!A.vtlAssumes256PixelSizeAsDefault(x)||
A.test.force512VTL,L=this.layer.tileInfo.spatialReference.isGeographic;R=R?this.layer.tileInfo:this.layer.tileInfo.getOrCreateCompatible(256,L?1:2);R=this._getTileInfoSupportError(R,this.layer.fullExtent);if(g.isSome(R))return this.addResolvingPromise(Promise.reject(R));R=l.whenOnce(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{var H=y.tilingScheme,P=H.pixelSize;this.schemaHelper=new r.SchemaHelper(P,g.isSome(y.spatialReference)&&y.spatialReference.isGeographic);P=256===P?this.layer.tileInfo.getOrCreateCompatible(256,
this.layer.tileInfo.spatialReference.isGeographic?1:2):this.view.spatialReference.isGeographic?this.layer.tileInfo.getOrCreateCompatible(512,.5):this.layer.tileInfo;if(H=this._getTileInfoCompatibilityError(P,H))throw H;this.tileInfo=P});this._tileHandlerController=new AbortController;var S=this.view.resourceController;this._memCache=S.memoryController.newCache(this.layer.uid,H=>{H.release()});L=new q(this.layer.currentStyleInfo.style);var N=y.mapTileRequester;this._tileHandler=new m(this.layer,L,
K,this._memCache,N);var O=this._tileHandlerController.signal,T=H=>S.schedule(H);L=this._tileHandler.start({signal:O,schedule:T});var M=this._tileHandler.spriteMosaic;M.then(H=>{!c.isAborted(O)&&this._tileHandler&&(this.painter=new n(H,this._tileHandler.glyphMosaic))});L.then(()=>this._tileHandlerController=null);this.updatingHandles.add(()=>({style:this.layer.currentStyleInfo.style,newPixelRatio:this.view.state?.pixelRatio}),({style:H})=>{this._tileHandlerController&&this._tileHandlerController.abort();
this._tileHandlerController=new AbortController;this._memCache.clear();H=new q(H);const P=new m(this.layer,H,K,this._memCache,N);H=P.start({signal:this._tileHandlerController.signal,schedule:T});const W=P.spriteMosaic;H.then(()=>this._tileHandlerController=null);this.updatingHandles.addPromise(Promise.all([H,W]).then(([,U])=>{const Y=this._tileHandler,X=this.painter;this.painter=new n(U,P.glyphMosaic);this._tileHandler=P;this.emit("data-changed");Y.destroy();X&&X.dispose()}))});R=Promise.all([R,L,
M]);this.addResolvingPromise(R)}};G.destroy=function(){this.painter=g.disposeMaybe(this.painter);this._tileHandlerController&&(this._tileHandlerController.abort(),this._tileHandlerController=null);g.destroyMaybe(this._tileHandler);this._memCache=g.destroyMaybe(this._memCache);this._tileHandler=null};G.fetchTile=function(){var y=b._asyncToGenerator(function*(x,D,J,K){return this._tileHandler.getVectorTile(x,D,J,K)});return function(x,D,J,K){return y.apply(this,arguments)}}();b._createClass(C,[{key:"dataLevelRange",
get:function(){var y=this.tileInfo.lods;y=this.levelRangeFromScaleRange(y[0].scale,y[y.length-1].scale);1===y.minLevel&&256===this.tileInfo.size[0]&&(y.minLevel=0);return y}}]);return C}(w.TiledLayerView3D(t.LayerView3D(E)));a.__decorate([f.property()],d.prototype,"layer",void 0);a.__decorate([f.property()],d.prototype,"dataLevelRange",null);a.__decorate([f.property()],d.prototype,"updatingProgressValue",void 0);return d=a.__decorate([h.subclass("esri.views.3d.layers.VectorTileLayerView3D")],d)});