// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./LayerView3D ../../layers/LayerView".split(" "),function(t,k,h,u,n,d,v,p,l,w,e,x){e=function(q){function m(a){a=q.call(this,a)||this;a.type="line-of-sight-3d";a._analysisModule=null;return a}k._inheritsLoose(m,
q);var f=m.prototype;f.initialize=function(){this.handles.add(p.watch(()=>this.layer.analysis,a=>{this._destroyAnalysisView();d.isSome(a)&&this._createAnalysisView(a)},p.syncAndInitial),"analysis-view-handles")};f.destroy=function(){this.handles.remove("analysis-view-handles");this._destroyAnalysisView()};f.whenAnalysisView=function(){var a=k._asyncToGenerator(function*(){if(d.isSome(this.analysisView))return this.analysisView;if(d.isSome(this._createAnalysisViewTask))return this._createAnalysisViewTask.promise;
throw new n("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view");});return function(){return a.apply(this,arguments)}}();f.isUpdating=function(){return d.isSome(this._createAnalysisViewTask)||d.isSome(this.analysisView)&&this.analysisView.updating};f._createAnalysisView=function(a){var b=this;const g=u.createTask(function(){var c=k._asyncToGenerator(function*(r){b.analysisView=yield b._createAnalysisViewPromise(a,r);b._createAnalysisViewTask===
g&&(b._createAnalysisViewTask=null);return b.analysisView});return function(r){return c.apply(this,arguments)}}());this._createAnalysisViewTask=g};f._destroyAnalysisView=function(){this.analysisView=d.destroyMaybe(this.analysisView);this._createAnalysisViewTask=d.abortMaybe(this._createAnalysisViewTask)};f._createAnalysisViewPromise=function(){var a=k._asyncToGenerator(function*(b,g){var c=this._analysisModule;d.isNone(c)&&(this._analysisModule=c=yield this._loadAnalysisModule());c=new c.default({analysis:b,
view:this.view,parent:this});yield c.when();if(v.isAborted(g))throw c.destroy(),new n("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:b});return c});return function(b,g){return a.apply(this,arguments)}}();f._loadAnalysisModule=function(){return new Promise((a,b)=>t(["../analysis/LineOfSightAnalysisView3D"],g=>a(Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"}))),b))};return m}(e.LayerView3D(x));
h.__decorate([l.property()],e.prototype,"type",void 0);h.__decorate([l.property()],e.prototype,"layer",void 0);h.__decorate([l.property()],e.prototype,"analysisView",void 0);h.__decorate([l.property()],e.prototype,"_createAnalysisViewTask",void 0);return e=h.__decorate([w.subclass("esri.views.3d.layers.LineOfSightLayerView3D")],e)});