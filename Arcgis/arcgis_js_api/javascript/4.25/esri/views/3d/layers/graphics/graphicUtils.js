// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/maybe ../../../../core/unitUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/projection ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/hydratedFeatures ../../webgl-engine/lib/VertexAttribute".split(" "),
function(h,k,C,r,D,w,E,x,F,t,G,H,y,u,z,I){function A(a){var c=a.paths[0];if(!c||0===c.length)return null;c=y.getPointOnPath(c,y.getPathLength(c)/2);return u.makeDehydratedPoint(c[0],c[1],c[2],a.spatialReference)}function l(a,c,b){b=b?a:z.clonePoint(a);return c&&a?F.projectPoint(a,b,c)?b:null:b}function v(a){if(Array.isArray(a)){for(const c of a)if(!v(c))return!1;return!0}return null==a||0<=a}h.computeCentroid=function(a,c){if("point"===a.type)return l(a,c,!1);if(z.isHydratedGeometry(a))switch(a.type){case "extent":return l(a.center,
c,!1);case "polygon":return l(a.centroid,c,!1);case "polyline":return l(A(a),c,!0);case "mesh":return l(a.origin,c,!1)}else switch(a.type){case "extent":var b=isFinite(a.zmin);a=u.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),b?.5*(a.zmax+a.zmin):void 0,a.spatialReference);return l(a,c,!0);case "polygon":return(b=a.rings[0])&&0!==b.length?(b=H.ringsCentroid(a.rings,a.hasZ),a=u.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)):a=null,l(a,c,!0);case "polyline":return l(A(a),c,!0)}};
h.computeObjectRotation=function(a,c,b,d=D.create()){a=a||0;c=c||0;b=b||0;0!==a&&r.rotateZ(d,d,-a/180*Math.PI);0!==c&&r.rotateX(d,d,c/180*Math.PI);0!==b&&r.rotateY(d,d,b/180*Math.PI);return d};h.computeObjectScale=function(a=w.ONES,c,b,d=1){const e=Array(3);if(k.isNone(c)||k.isNone(b))e[0]=1,e[1]=1,e[2]=1;else{let g=0;for(let m=2;0<=m;m--){const n=a[m];let p;const B=null!=n,J=0===m&&!f&&!B,q=b[m];"symbol-value"===n||J?p=0!==q?c[m]/q:1:B&&"proportional"!==n&&isFinite(n)&&(p=0!==q?n/q:1);if(null!=p){var f=
e[m]=p;g=Math.max(g,Math.abs(p))}}for(a=2;0<=a;a--)null==e[a]?e[a]=f:0===e[a]&&(e[a]=.001*g)}for(f=2;0<=f;f--)e[f]/=d;return w.fromArray(e)};h.demResolutionForBoundingBox=function(a,c,b){if(null!=b.minDemResolution)return b.minDemResolution;const d=C.getMetersPerUnitForSR(c),e=t.width(a)*d,f=t.depth(a)*d;a=t.height(a)*(c.isGeographic?1:d);return 0===e&&0===f&&0===a?b.minDemResolutionForPoints:.01*Math.max(e,f,a)};h.enlargeExtent=function(a,c,b,d=0){if(a){c||(c=G.create());let e=.5*a.width*(b-1);b=
.5*a.height*(b-1);a.width<1E-7*a.height?e+=b/20:a.height<1E-7*a.width&&(b+=e/20);E.set(c,a.xmin-e-d,a.ymin-b-d,a.xmax+e+d,a.ymax+b+d);return c}return null};h.isValidSize=v;h.mixinColorAndOpacity=function(a,c){const b=x.clone(x.ONES);k.isSome(a)&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);k.isSome(c)?b[3]=c:k.isSome(a)&&3<a.length&&(b[3]=a[3]);return b};h.overrideColor=function(a,c,b,d,e,f=[0,0,0,0]){for(let g=0;3>g;++g)k.isSome(a)&&null!=a[g]?f[g]=a[g]:k.isSome(b)&&null!=b[g]?f[g]=b[g]:f[g]=e[g];k.isSome(c)?
f[3]=c:k.isSome(d)?f[3]=d:f[3]=e[3];return f};h.updateVertexAttributeAuxpos1w=function(a,c){for(let b=0;b<a.geometries.length;++b){const d=a.geometries[b].getMutableAttribute(I.VertexAttribute.AUXPOS1);d&&d.data[3]!==c&&(d.data[3]=c,a.geometryVertexAttrsUpdated(a.geometryRecords[b]))}};h.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return v(a)?null:"Symbol sizes may not be negative values"};Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});