// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./LayerView3D ../../layers/DimensionLayerView ../../layers/LayerView".split(" "),function(t,h,k,u,v,c,n,p,l,w,f,x,y){f=function(q){function m(a){a=q.call(this,a)||this;a.type="dimension-3d";a._analysisModule=
null;return a}h._inheritsLoose(m,q);var d=m.prototype;d.initialize=function(){this.handles.add(p.watch(()=>this.layer.source,a=>{this._destroyAnalysisView();c.isSome(a)&&this._createAnalysisView(a)},p.syncAndInitial),"analysis-view-handles")};d.destroy=function(){this.handles.remove("analysis-view-handles");this._destroyAnalysisView()};d.isUpdating=function(){return c.isSome(this._createAnalysisViewTask)||c.isSome(this.analysisView)&&this.analysisView.updating};d.whenAnalysisView=function(){var a=
h._asyncToGenerator(function*(){if(c.isSome(this.analysisView))return this.analysisView;if(c.isSome(this._createAnalysisViewTask))return this._createAnalysisViewTask.promise;throw new v("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view");});return function(){return a.apply(this,arguments)}}();d._createAnalysisView=function(a){var b=this;const e=u.createTask(function(){var g=h._asyncToGenerator(function*(r){b.analysisView=yield b._createAnalysisViewPromise(a,
r);b._createAnalysisViewTask===e&&(b._createAnalysisViewTask=null);return b.analysisView});return function(r){return g.apply(this,arguments)}}());this.addResolvingPromise(e.promise);this._createAnalysisViewTask=e};d._destroyAnalysisView=function(){this.analysisView=c.destroyMaybe(this.analysisView);this._createAnalysisViewTask=c.abortMaybe(this._createAnalysisViewTask)};d._createAnalysisViewPromise=function(){var a=h._asyncToGenerator(function*(b,e){var g=this._analysisModule;c.isNone(g)&&(this._analysisModule=
g=yield this._loadAnalysisModule());b=new g.default({analysis:b,view:this.view,parent:this});yield b.when();if(n.isAborted(e))throw b.destroy(),n.createAbortError();return b});return function(b,e){return a.apply(this,arguments)}}();d._loadAnalysisModule=function(){return new Promise((a,b)=>t(["../analysis/DimensionAnalysisView3D"],e=>a(Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}))),b))};return m}(f.LayerView3D(x(y)));k.__decorate([l.property()],
f.prototype,"type",void 0);k.__decorate([l.property()],f.prototype,"analysisView",void 0);k.__decorate([l.property()],f.prototype,"_createAnalysisViewTask",void 0);return f=k.__decorate([w.subclass("esri.views.3d.layers.DimensionLayerView3D")],f)});