// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../geometry ../../../../core/maybe ../../../../core/promiseUtils ../../../../layers/graphics/dehydratedFeatures ../../../../support/elevationInfoUtils ./elevationAlignmentUtils ./ElevationContext ./featureExpressionInfoUtils ../../../../geometry/SpatialReference".split(" "),function(m,x,J,y,z,A,B,n,C,p,D){function d(){d=x._asyncToGenerator(function*(e,f,q,a,b){const {elevationProvider:E,renderCoordsHelper:F,spatialReference:G}=
e,{elevationInfo:r}=f;var g=p.extractExpressionInfo(r,!0);g=yield p.createContext(g,G,b);z.throwIfAborted(b);b=[];const t=new Set,u=new Set;for(const {objectId:h,points:v}of a)if(a=q(h),y.isNone(a)){for(const k of v)b.push(k[2]);t.add(h)}else{a.isDraped&&u.add(h);l.setFromElevationInfo(B.getGeometryEffectiveElevationInfo(a.graphic.geometry,r));l.updateFeatureExpressionInfoContext(g,a.graphic,f);c.spatialReference=e.spatialReference;for(const {x:k,y:H,z:I}of v)c.x=k,c.y=H,c.z=I??0,n.evaluateElevationInfoAtPoint(c,
E,l,F,w),b.push(w.z)}return{elevations:b,drapedObjectIds:u,failedObjectIds:t}});return d.apply(this,arguments)}const l=new C.ElevationContext,c=A.makeDehydratedPoint(0,0,0,D.WGS84),w=new n.SampleElevationInfo;m.elevationAlignPointsInFeatures=function(e,f,q,a,b){return d.apply(this,arguments)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});