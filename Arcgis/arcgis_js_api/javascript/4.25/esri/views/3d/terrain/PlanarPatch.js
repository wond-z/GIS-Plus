// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3f64 ../../../geometry/projection ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ./interfaces ./PatchGeometryFactory ./Tile ../webgl-engine/materials/internal/MaterialUtil".split(" "),function(w,x,y,p,z,g,E,F,G,q,r,A,H){let I=function(t){function h(a,b,c){var d=t.call(this)||this;d._horizontalScaleFactor=
1;d._extentInRenderSR=F.create();void 0!==a&&d.init(a,b,c);return d}x._inheritsLoose(h,t);var e=h.prototype;e.init=function(a,b,c){t.prototype.init.call(this,a,b,c);a=c.view.renderSpatialReference;c=c.spatialReference;this._horizontalScaleFactor=b=y.isSome(a)&&G.isPlateCarree(a)&&y.isSome(c)&&c.isGeographic?this.ellipsoid.radius*Math.PI/180:1;c=this._extentInRenderSR;a=this.extent;if(this.surface.isWebMercatorOnPlateeCarree)b=p.fromValues(a[0],a[1],0),z.projectVectorToVector(b,g.WebMercator,b,g.PlateCarree),
a=p.fromValues(a[2],a[3],0),z.projectVectorToVector(a,g.WebMercator,a,g.PlateCarree),c[0]=b[0],c[1]=b[1],c[2]=a[0],c[3]=a[1];else for(let d=0;4>d;++d)c[d]=a[d]*b;this.centerAtSeaLevel[0]=.5*(c[0]+c[2]);this.centerAtSeaLevel[1]=.5*(c[1]+c[3]);this.centerAtSeaLevel[2]=0;this._edgeLen=Math.max(c[2]-c[0],c[3]-c[1]);this._edgeLen2=this._edgeLen*this._edgeLen;this.updateRadiusAndCenter()};e.updateRadiusAndCenter=function(){this._updateCenter();var a=this._extentInRenderSR;const b=.5*(a[2]-a[0]);a=.5*(a[3]-
a[1]);this._center[A.CenterPosition.MIDDLE][3]=Math.max(Math.sqrt(b*b+a*a),.5*(this.elevationBounds[0]-this.elevationBounds[1]))};e._calculateFrustumVisibilityStatus=function(a){var b=this._aabb();const c=b[0],d=b[1],B=b[2],C=b[3],D=b[4];b=b[5];let u=!0;for(let v=0;6>v;v++){var f=a[v];const k=f[0],l=f[1],m=f[2];f=f[3];if(0<=k*(0<k?c:C)+l*(0<l?d:D)+m*(0<m?B:b)+f)return q.TileFrustumVisibility.OUTSIDE;u=u&&0>=k*(0>k?c:C)+l*(0>l?d:D)+m*(0>m?B:b)+f}return u?q.TileFrustumVisibility.INSIDE:q.TileFrustumVisibility.INTERSECTS};
e._aabb=function(){const a=this._extentInRenderSR;return E.wrap(a[0],a[1],this.elevationBounds[0],a[2],a[3],this.elevationBounds[1])};e.intersectsRay=function(a,b,c,d){n[0]=1/b[0];n[1]=1/b[1];n[2]=1/b[2];return H.intersectAabbInvDirBefore(this._aabb(),a,n,c,d)};e.createGeometry=function(){r.createPlanarGlobePatch(this.renderData,this._horizontalScaleFactor);this.setMemoryDirty()};e.getDefaultVerticesPerRowOnLevel=function(){return 9>this.level?3:2};e.updateCornerElevations=function(){r.updateCornersPlanar(this.renderData,
this._horizontalScaleFactor)};e.updateEdgeElevations=function(){r.updateEdgesAndCornersPlanar(this.renderData,this._horizontalScaleFactor)};x._createClass(h,[{key:"horizontalScale",get:function(){return this._horizontalScaleFactor}}]);return h}(A.Tile);const n=p.create();w.PlanarPatch=I;Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});