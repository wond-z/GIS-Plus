// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../core/libs/gl-matrix-2/types/vec2 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/HeatmapDensityTechnique".split(" "),function(l,p,x,r,y,z,A,B,C,D,E,h,t,n){let u=function(e){function c(){var b=e.apply(this,arguments)||
this;b.isAttributeDriven=!1;b.usesHalfFloats=!1;return b}p._inheritsLoose(c,e);return c}(n.HeatmapDensityPassParameters),w=function(e){function c(a){a=e.call(this,a,new u)||this;a._configuration=new n.HeatmapDensityTechniqueConfiguration;return a}p._inheritsLoose(c,e);var b=c.prototype;b.requiresSlot=function(a,d){return a===E.RenderSlot.DRAPED_MATERIAL&&d===B.ShaderOutput.Color};b.getConfiguration=function(){this._configuration.isAttributeDriven=this.parameters.isAttributeDriven;this._configuration.usesHalfFloat=
this.parameters.usesHalfFloats;return this._configuration};b.createGLMaterial=function(a){return new F(a)};b.intersect=function(a,d,f,k,g,m,G,K,q){if(!x.isNone(q)&&z.isVec2(m))for(d=a.vertexAttributes.get(h.VertexAttribute.POSITION),{parameters:f}=this,{searchRadius:f}=f,{screenToWorldRatio:a}=a,a=f*a+2*a,a*=a,f=d.data.length/d.size,k=0;k<f;k++)g=k*d.size,g=r.set(H,d.data[g],d.data[g+1]),r.squaredDistance(g,m)<a&&G(q.dist,q.normal,-1,!1)};b.createBufferWriter=function(){return new I(this.parameters.isAttributeDriven?
J:v)};return c}(D.Material),F=function(e){function c(){return e.apply(this,arguments)||this}p._inheritsLoose(c,e);c.prototype.beginSlot=function(b){return this.ensureTechnique(n.HeatmapDensityTechnique,b)};return c}(C),I=function(){function e(b){this.vertexBufferLayout=b}var c=e.prototype;c.allocate=function(b){return this.vertexBufferLayout.createBuffer(b)};c.elementCount=function(b){return 6*b.indices.get(h.VertexAttribute.POSITION).length};c.write=function(b,a,d,f,k){t.writePosition(d.indices.get(h.VertexAttribute.POSITION),
d.vertexAttributes.get(h.VertexAttribute.POSITION).data,b,f.position,k,6);b=d.indices.get(h.VertexAttribute.POSITION).length;a=f.uv0;let g=k;for(let m=0;m<b;++m)a.setValues(g++,-1,-1),a.setValues(g++,1,-1),a.setValues(g++,1,1),a.setValues(g++,1,1),a.setValues(g++,-1,1),a.setValues(g++,-1,-1);(f="featureAttribute"in f?f.featureAttribute:null)&&t.writeBufferFloat(d.indices.get(h.VertexAttribute.FEATUREATTRIBUTE),d.vertexAttributes.get(h.VertexAttribute.FEATUREATTRIBUTE).data,f,k,6)};return e}();const v=
A.newLayout().vec3f(h.VertexAttribute.POSITION).vec2f(h.VertexAttribute.UV0),J=v.clone().f32(h.VertexAttribute.FEATUREATTRIBUTE),H=y.create();Object.defineProperty(l,"RadiusMode",{enumerable:!0,get:()=>n.RadiusMode});l.HeatmapDensityMaterial=w;l.HeatmapDensityMaterialParameters=u;l.isHeatMapDensityMaterial=function(e){return e instanceof w};Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});