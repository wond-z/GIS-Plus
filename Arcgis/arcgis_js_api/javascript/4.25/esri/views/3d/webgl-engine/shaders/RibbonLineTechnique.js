// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/Program ../lib/RenderSlot ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),function(y,n,q,r,z,k,e,A,t,b,u,c,B,v,d){const w=new Map([[c.VertexAttribute.POSITION,
0],[c.VertexAttribute.SUBDIVISIONFACTOR,1],[c.VertexAttribute.UV0,2],[c.VertexAttribute.AUXPOS1,3],[c.VertexAttribute.AUXPOS2,4],[c.VertexAttribute.COLOR,5],[c.VertexAttribute.COLORFEATUREATTRIBUTE,5],[c.VertexAttribute.SIZE,6],[c.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[c.VertexAttribute.OPACITYFEATUREATTRIBUTE,7],[c.VertexAttribute.OBJECTANDLAYERIDCOLOR,8]]);k=function(h){function f(){return h.apply(this,arguments)||this}q._inheritsLoose(f,h);var l=f.prototype;l.initializeProgram=function(a){return new A.Program(a.rctx,
f.shader.get().build(this.configuration),w)};l._makePipelineState=function(a,m){const g=this.configuration,p=a===u.TransparencyPassType.NONE,C=a===u.TransparencyPassType.FrontFace;return d.makePipelineState({blending:g.output===r.ShaderOutput.Color||g.output===r.ShaderOutput.Alpha?p?e.blendingDefault:e.oitBlending(a):null,depthTest:{func:e.oitDepthTest(a)},depthWrite:p?g.writeDepth&&d.defaultDepthWriteParams:e.oitDepthWrite(a),colorWrite:d.defaultColorWriteParams,stencilWrite:g.hasOccludees?b.stencilWriteMaskOn:
null,stencilTest:g.hasOccludees?m?b.stencilToolMaskBaseParams:b.stencilBaseAllZerosParams:null,polygonOffset:p||C?g.hasPolygonOffset&&x:e.OITPolygonOffset})};l.initializePipeline=function(){var a=this.configuration;a.occluder&&(a=a.hasPolygonOffset&&x,this._occluderPipelineTransparent=d.makePipelineState({blending:e.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:null,stencilTest:b.stencilToolTransparentOccluderParams}),
this._occluderPipelineOpaque=d.makePipelineState({blending:e.blendingDefault,polygonOffset:a,depthTest:b.depthCompareAlways,depthWrite:null,colorWrite:d.defaultColorWriteParams,stencilWrite:b.stencilWriteMaskOff,stencilTest:b.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=d.makePipelineState({blending:null,polygonOffset:a,depthTest:b.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:b.stencilWriteMaskOn,stencilTest:b.stencilToolMaskBaseParams}));this._occludeePipelineState=
this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)};l.getPipelineState=function(a,m){return m?this._occludeePipelineState:this.configuration.occluder?a===t.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL?this._occluderPipelineTransparent:a===t.RenderSlot.OCCLUDER_MATERIAL?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:h.prototype.getPipelineState.call(this,a,m)};q._createClass(f,[{key:"primitiveType",
get:function(){return this.configuration.wireframe?v.PrimitiveType.LINES:v.PrimitiveType.TRIANGLE_STRIP}}]);return f}(k.ShaderTechnique);k.shader=new z.ReloadableShaderModule(B.RibbonLine,()=>new Promise((h,f)=>y(["./RibbonLine.glsl"],h,f)));const x={factor:0,units:-4};n.RibbonLineTechnique=k;n.vertexAttributeLocations=w;Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});