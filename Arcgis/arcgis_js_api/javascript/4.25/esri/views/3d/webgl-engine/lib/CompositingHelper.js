// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("../../../../core/maybe ./glUtil3D ../../../../chunks/Compositing.glsl ../shaders/CompositingTechnique ../shaders/CompositingTechniqueConfiguration ../../../../chunks/HUDCompositing.glsl ../shaders/HUDCompositingTechnique ../../../../chunks/OITCompositing.glsl ../shaders/OITCompositingTechnique ../../../../chunks/OverlayCompositing.glsl ../shaders/OverlayCompositingTechnique ../../../webgl/enums ../../../webgl/Util".split(" "),function(k,n,p,q,l,r,t,u,v,w,x,f,g){return function(){function m(b,
a){this._rctx=b;this._techniqueRepository=a;this._configuration=new l.CompositingTechniqueConfiguration;this._passParameters=new p.CompositingPassParameters;this._oitParameters=new u.OITCompositingPassParameters;this._hudParameters=new r.HUDCompositingPassParameters;this._overlayParameters=new w.OverlayCompositingPassParameters}var d=m.prototype;d.dispose=function(){this._vao=k.disposeMaybe(this._vao)};d.compositeOIT=function(b,a,c,e){this._oitParameters.colorTexture=a;this._oitParameters.alphaTexture=
c;this._oitParameters.frontFaceTexture=e;a=this._rctx;c=this._techniqueRepository.acquire(v.OITCompositingTechnique);a.bindTechnique(c,this._oitParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));c.release()};d.compositeHUD=function(b,a){this._hudParameters.texture=a;a=this._rctx;const c=this._techniqueRepository.acquire(t.HUDCompositingTechnique);a.bindTechnique(c,this._hudParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,
0,g.vertexCount(b,"geometry"));c.release()};d.compositeOverlay=function(b,a,c,e){this._overlayParameters.texture=a;this._overlayParameters.opacity=c;this._overlayParameters.overlayIndex=e;a=this._rctx;c=this._techniqueRepository.acquire(x.OverlayCompositingTechnique);a.bindTechnique(c,this._overlayParameters,b);b=this._ensureVAO();a.bindVAO(b);a.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));c.release()};d.composite=function(b,a,c=l.AlphaMode.None,e=1){const h=this._rctx;
this._configuration.alphaMode=c;this._configuration.hasOpacityFactor=1!==e;this._passParameters.texture=a;this._passParameters.opacity=e;a=this._techniqueRepository.acquire(q.CompositingTechnique,this._configuration);h.bindTechnique(a,this._passParameters,b);b=this._ensureVAO();h.bindVAO(b);h.drawArrays(f.PrimitiveType.TRIANGLE_STRIP,0,g.vertexCount(b,"geometry"));a.release()};d._ensureVAO=function(){k.isNone(this._vao)&&(this._vao=n.createQuadVAO(this._rctx));return this._vao};return m}()});