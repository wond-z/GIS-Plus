// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../geometry/support/triangle"],function(t,a,u,w){const b=u.create(),q=u.create(),v=u.create(),m=u.create();t.computeAttachmentOriginLines=function(c,g,d,n){if(!c)return!1;const {size:e,data:f}=c;a.set(n,0,0,0);a.set(m,0,0,0);let k=c=0;const h=g?g.length-1:f.length/e-1;d=h+(d?2:0);for(let r=0;r<d;r+=2){var p=r<h?r:h,l=r<h?r+1:0;p=(g?g[p]:p)*e;l=(g?g[l]:l)*e;b[0]=f[p+0];b[1]=f[p+1];b[2]=f[p+2];q[0]=f[l+0];q[1]=f[l+1];
q[2]=f[l+2];a.scale(b,a.add(b,b,q),.5);l=a.dist(b,q);0<l?(a.add(n,n,a.scale(b,b,l)),c+=l):(a.add(m,m,b),k++)}return 0!==c?(a.scale(n,n,1/c),!0):0!==k?(a.scale(n,m,1/k),!0):!1};t.computeAttachmentOriginPoints=function(c,g,d){if(!c||!g)return!1;const {size:n,data:e}=c;a.set(d,0,0,0);c=-1;let f=0;for(let k=0;k<g.length;k++){const h=g[k]*n;c!==h&&(d[0]+=e[h+0],d[1]+=e[h+1],d[2]+=e[h+2],f++);c=h}1<f&&a.scale(d,d,1/f);return 0<f};t.computeAttachmentOriginTriangles=function(c,g,d){if(!c||!g)return!1;const {size:n,
data:e}=c;a.set(d,0,0,0);a.set(m,0,0,0);let f=c=0;for(let h=0;h<g.length-2;h+=3){var k=g[h+0]*n;const p=g[h+1]*n,l=g[h+2]*n;a.set(b,e[k+0],e[k+1],e[k+2]);a.set(q,e[p+0],e[p+1],e[p+2]);a.set(v,e[l+0],e[l+1],e[l+2]);(k=w.areaPoints3d(b,q,v))?(a.add(b,b,q),a.add(b,b,v),a.scale(b,b,1/3*k),a.add(d,d,b),c+=k):(a.add(m,m,b),a.add(m,m,q),a.add(m,m,v),f+=3)}return 0===f&&0===c?!1:0!==c?(a.scale(d,d,1/c),!0):0!==f?(a.scale(d,m,1/f),!0):!1};Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});