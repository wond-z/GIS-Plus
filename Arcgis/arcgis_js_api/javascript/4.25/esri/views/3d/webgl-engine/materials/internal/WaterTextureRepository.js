// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../assets ../../../../../core/Accessor ../../../../../core/Logger ../../../../../core/maybe ../../../../../core/accessorSupport/decorators/property ../../../../../core/arrayUtils ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/subclass ../../../../../support/requestImageUtils ../../core/shaderModules/interfaces ../../lib/basicInterfaces ../../../../webgl/enums ../../../../webgl/Texture".split(" "),
function(b,h,k,m,w,n,g,p,z,A,x,q,y,l,e,r){b.WaterTextureRepository=function(f){function c(){var d=f.apply(this,arguments)||this;d._passParameters=new t;d._loading=0;return d}h._inheritsLoose(c,f);var u=c.prototype;u.dispose=function(){this._passParameters.waveNormal=g.disposeMaybe(this._passParameters.waveNormal);this._passParameters.wavePertubation=g.disposeMaybe(this._passParameters.wavePertubation)};u.ensureResources=function(d){if(0<this._loading)return l.ResourceState.LOADING;if(g.isSome(this._passParameters.waveNormal)&&
g.isSome(this._passParameters.wavePertubation))return l.ResourceState.LOADED;const v={target:e.TextureType.TEXTURE_2D,pixelFormat:e.PixelFormat.RGBA,dataType:e.PixelType.UNSIGNED_BYTE,wrapMode:e.TextureWrapMode.REPEAT,samplingMode:e.TextureSamplingMode.LINEAR_MIPMAP_LINEAR,hasMipmap:!0,maxAnisotropy:8};++this._loading;q.requestImage(m.getAssetUrl("esri/images/materials/water/normals.jpg")).then(a=>this._passParameters.waveNormal=new r.Texture(d,{...v,width:a.width,height:a.height},a)).catch(a=>n.getLogger(this.declaredClass).error("Failed to load water material normal texture.",
a)).finally(()=>--this._loading);++this._loading;q.requestImage(m.getAssetUrl("esri/images/materials/water/perturbation.jpg")).then(a=>this._passParameters.wavePertubation=new r.Texture(d,{...v,width:a.width,height:a.height},a)).catch(a=>n.getLogger(this.declaredClass).error("Failed to load water material pertubation texture.",a)).finally(()=>--this._loading);return l.ResourceState.LOADING};h._createClass(c,[{key:"passParameters",get:function(){return this._passParameters}},{key:"updating",get:function(){return 0<
this._loading}}]);return c}(w);k.__decorate([p.property()],b.WaterTextureRepository.prototype,"_loading",void 0);k.__decorate([p.property({type:Boolean,readOnly:!0})],b.WaterTextureRepository.prototype,"updating",null);b.WaterTextureRepository=k.__decorate([x.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],b.WaterTextureRepository);let t=function(f){function c(){return f.apply(this,arguments)||this}h._inheritsLoose(c,f);return c}(y.NoParameters);b.WaterTexturePassParameters=
t;Object.defineProperties(b,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});