// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../analysis/dimensionUtils ../../../../core/Accessor ../../../../core/Handles ../../../../core/Logger ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/unitUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ./lengthDimensionUtils".split(" "),function(c,
m,d,r,t,u,v,w,n,p,g,y,z,x,e){c.DimensionController=function(q){function h(a){a=q.call(this,a)||this;a._handles=new u;return a}m._inheritsLoose(h,q);var k=h.prototype;k.initialize=function(){const {computations:a}=this.analysisViewData;for(const b of a)this._addComputation(b);this.addHandles(a.on("change",({added:b,removed:f})=>{for(const l of f)this._removeComputation(l);for(const l of b)this._addComputation(l)}))};k.destroy=function(){this._handles=w.destroyMaybe(this._handles)};k._addComputation=
function(a){this._handles.has(a)||this._handles.add(n.watch(()=>e.computationToGeometryDependencies(a),b=>{const {measureType:f}=b;e.isGeodesicDimension(b)&&f!==r.LengthDimensionMeasureType.Direct?(b=Math.round(p.convertUnit(e.GEODESIC_DISTANCE_THRESHOLD,"meters","kilometers")),v.getLogger(this.declaredClass).warnOnce(`A ${f} dimension in the analysis (id: '${this.analysis.id}') will not `+"display, because only direct dimensions can measure lengths greater than "+`${b} km. Update the measureType of the affected dimension to "direct" to display it.`),
a.geometry=null):(b=e.computeGeometryFromDimension(b,this.view.renderCoordsHelper,a.geometry),a.geometry=b,a.result.length=e.computeLength(b,f,this._defaultUnit))},n.syncAndInitial),a)};k._removeComputation=function(a){this._handles.remove(a)};m._createClass(h,[{key:"analysis",get:function(){return this.analysisViewData.analysis}},{key:"_defaultUnit",get:function(){return p.getDefaultUnitForView(this.view)}}]);return h}(t);d.__decorate([g.property({constructOnly:!0})],c.DimensionController.prototype,
"analysisViewData",void 0);d.__decorate([g.property({constructOnly:!0})],c.DimensionController.prototype,"view",void 0);d.__decorate([g.property()],c.DimensionController.prototype,"analysis",null);d.__decorate([g.property()],c.DimensionController.prototype,"_defaultUnit",null);c.DimensionController=d.__decorate([x.subclass("esri.views.3d.analysis.Dimension.support.DimensionController")],c.DimensionController);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});