// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/Handles ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/arrayUtils ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/mat4 ../../../../chunks/vec3 ../../../../chunks/vec4f64 ../../../../geometry/support/vectorStacks ./sliceToolConfig ./sliceToolUtils ../../webgl-engine/materials/lineStippleUtils".split(" "),
function(c,t,d,u,v,e,h,f,B,C,w,q,l,x,m,g,n,y){c.SliceVisualization=function(r){function p(a){a=r.call(this,a)||this;a._handles=new v;a._gridVisualElement=null;a._outlineVisualElement=null;a.showGrid=!1;a.preview=!0;return a}t._inheritsLoose(p,r);var k=p.prototype;k.initialize=function(){const a=this.analysisViewData;if(e.isNone(a))throw Error("expected internal object to be valid");this._gridVisualElement=n.createGridVisualElement(this.view);this._outlineVisualElement=n.createOutlineVisualElement(this.view);
this._handles.add([h.watch(()=>({visible:e.isSome(a.plane)&&this.analysisViewData.visible,active:this.analysisViewData.active,preview:this.preview,showGrid:this.showGrid}),b=>this._updateMaterials(b),h.syncAndInitial),h.watch(()=>a.plane,b=>this._updatePlane(b),h.syncAndInitial)],"internal")};k.destroy=function(){this._handles.destroy();this._gridVisualElement=e.destroyMaybe(this._gridVisualElement);this._outlineVisualElement=e.destroyMaybe(this._outlineVisualElement);this.set("view",null)};k._updatePlane=
function(a){if(!e.isNone(a)){this._gridVisualElement.attached=!0;this._outlineVisualElement.attached=!0;var b=l.set(m.sv3d.get(),l.length(a.basis1),l.length(a.basis2),1);b=q.fromScaling(m.sm4d.get(),b);a=n.calculateBoundedPlaneTranslateRotate(a,m.sm4d.get());a=q.multiply(b,a,b);this._outlineVisualElement.transform=a;this._gridVisualElement.transform=a}};k._updateMaterials=function({visible:a,active:b,preview:z,showGrid:A}){this._outlineVisualElement.color=g.PLANE_OUTLINE_COLOR;this._outlineVisualElement.width=
z?g.PLANE_PREVIEW_OUTLINE_WIDTH:g.PLANE_OUTLINE_WIDTH;this._outlineVisualElement.stipplePattern=b?null:y.createStipplePatternSimple(5);this._gridVisualElement.backgroundColor=g.PLANE_BACKGROUND_COLOR;this._gridVisualElement.gridColor=A?g.GRID_COLOR:x.ZEROS;this._gridVisualElement.visible=a;this._outlineVisualElement.visible=a};return p}(u);d.__decorate([f.property()],c.SliceVisualization.prototype,"view",void 0);d.__decorate([f.property()],c.SliceVisualization.prototype,"analysis",void 0);d.__decorate([f.property()],
c.SliceVisualization.prototype,"analysisViewData",void 0);d.__decorate([f.property()],c.SliceVisualization.prototype,"showGrid",void 0);d.__decorate([f.property()],c.SliceVisualization.prototype,"preview",void 0);c.SliceVisualization=d.__decorate([w.subclass("esri.views.3d.analysis.Slice.SliceVisualization")],c.SliceVisualization);Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});