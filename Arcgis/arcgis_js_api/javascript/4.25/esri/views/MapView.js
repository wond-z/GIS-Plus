// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t){var z;k=new k.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});f=z=function(w){function g(y){y=w.call(this,y)||this;y.dpi=96;y.format=null;y.origin=null;y.minScale=0;y.maxScale=0;y.size=null;y.spatialReference=null;return y}m._inheritsLoose(g,w);g.create=function(y=
{}){const {resolutionFactor:F=1,scales:I,size:K=256,spatialReference:N=p.WebMercator,numLODs:S=24}=y;if(!h.isValid(N)){y=[];if(I)for(var P=0;P<I.length;P++){var J=I[P];y.push({level:P,scale:J,resolution:J})}else for(P=5E-4,J=S-1;0<=J;J--)y.unshift({level:J,scale:P,resolution:P}),P*=2;return new z({dpi:96,lods:y,origin:new b(0,0,N),size:[K,K],spatialReference:N})}P=h.getInfo(N);y=y.origin?new b({x:y.origin.x,y:y.origin.y,spatialReference:N}):P?new b({x:P.origin[0],y:P.origin[1],spatialReference:N}):
new b({x:0,y:0,spatialReference:N});P=1/(39.37*A.getMetersPerUnitForSR(N)*96);J=[];if(I)for(var L=0;L<I.length;L++){var T=I[L];J.push({level:L,scale:T,resolution:T*P})}else{var H=h.isGeographic(N)?512/K*5.916575275917094E8:256/K*5.91657527591555E8;L=Math.ceil(S/F);J.push({level:0,scale:H,resolution:H*P});for(T=1;T<L;T++)H/=2**F,J.push({level:T,scale:H,resolution:H*P})}return new z({dpi:96,lods:J,origin:y,size:[K,K],spatialReference:N})};var q=g.prototype;q.readOrigin=function(y,F){return b.fromJSON({spatialReference:F.spatialReference,
...y})};q.readSize=function(y,F){return[F.cols,F.rows]};q.writeSize=function(y,F){F.cols=y[0];F.rows=y[1]};q.zoomToScale=function(y){const F=this.scales;if(0>=y)return F[0];if(y>=F.length-1)return F[F.length-1];const I=Math.floor(y);return F[I]/(F[I]/F[I+1])**(y-I)};q.scaleToZoom=function(y){const F=this.scales,I=F.length-1;let K=0;for(;K<I;K++){const N=F[K],S=F[K+1];if(N<=y)break;if(S===y)return K+1;if(N>y&&S<y)return K+Math.log(N/y)/Math.log(N/S)}return K};q.snapScale=function(y,F=.95){y=this.scaleToZoom(y);
return y%Math.floor(y)>=F?this.zoomToScale(Math.ceil(y)):this.zoomToScale(Math.floor(y))};q.tileAt=function(y,F,I,K){var N=this.lodAt(y);if(!N)return null;let S;if("number"===typeof F)S=F,F=I;else{if(h.equals(F.spatialReference,this.spatialReference))S=F.x,F=F.y;else{K=c.project(F,this.spatialReference);if(x.isNone(K))return null;S=K.x;F=K.y}K=I}I=N.resolution*this.size[0];N=N.resolution*this.size[1];K||(K=new t.TileKey(null,0,0,0,e.create()));K.level=y;K.row=Math.floor((this.origin.y-F)/N+.001);
K.col=Math.floor((S-this.origin.x)/I+.001);this.updateTileInfo(K);return K};q.updateTileInfo=function(y,F=z.ExtrapolateOptions.NONE){var I=this.lodAt(y.level);I||F!==z.ExtrapolateOptions.POWER_OF_TWO||(F=this.lods[this.lods.length-1],F.level<y.level&&(I=F));if(I){var K=y.level-I.level;F=I.resolution*this.size[0]/2**K;I=I.resolution*this.size[1]/2**K;y.id=`${y.level}/${y.row}/${y.col}`;y.extent||(y.extent=e.create());y.extent[0]=this.origin.x+y.col*F;y.extent[1]=this.origin.y-(y.row+1)*I;y.extent[2]=
y.extent[0]+F;y.extent[3]=y.extent[1]+I}};q.upsampleTile=function(y){const F=this._upsampleLevels[y.level];if(!F||-1===F.parentLevel)return!1;y.level=F.parentLevel;y.row=Math.floor(y.row/F.factor+.001);y.col=Math.floor(y.col/F.factor+.001);this.updateTileInfo(y);return!0};q.getTileBounds=function(y,F){var I=this.lodAt(F.level);if(null==I)return null;var {resolution:K}=I;I=K*this.size[0];K*=this.size[1];y[0]=this.origin.x+F.col*I;y[1]=this.origin.y-(F.row+1)*K;y[2]=y[0]+I;y[3]=y[1]+K;return y};q.lodAt=
function(y){return this._levelToLOD?.[y]??null};q.clone=function(){return z.fromJSON(this.write({}))};q.getOrCreateCompatible=function(y,F){if(256===this.size[0]&&256===this.size[1])return 256===y?this:null;const I=[],K=this.lods.length;for(let N=0;N<K;N++){const S=this.lods[N];I.push(new n({level:S.level,scale:S.scale,resolution:S.resolution*F}))}return new z({size:[y,y],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,
lods:I})};q._initializeUpsampleLevels=function(){const y=this.lods;this._upsampleLevels=[];let F=null;for(let I=0;I<y.length;I++){const K=y[I];this._upsampleLevels[K.level]={parentLevel:F?F.level:-1,factor:F?F.resolution/K.resolution:0};F=K}};m._createClass(g,[{key:"isWrappable",get:function(){const {spatialReference:y,origin:F}=this;if(y&&F){const I=h.getInfo(y);return y.isWrappable&&!!I&&Math.abs(I.origin[0]-F.x)<=I.dx}return!1}},{key:"lods",set:function(y){let F=0,I=0;const K=[],N=this._levelToLOD=
{};y&&(F=-Infinity,I=Infinity,y.forEach(S=>{K.push(S.scale);F=S.scale>F?S.scale:F;I=S.scale<I?S.scale:I;N[S.level]=S}));this._set("scales",K);this._set("minScale",F);this._set("maxScale",I);this._set("lods",y);this._initializeUpsampleLevels()}}]);return g}(f.JSONSupport);v.__decorate([B.property({type:Number,json:{write:!0}})],f.prototype,"compressionQuality",void 0);v.__decorate([B.property({type:Number,json:{write:!0}})],f.prototype,"dpi",void 0);v.__decorate([B.property({type:String,json:{read:k.read,
write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],f.prototype,"format",void 0);v.__decorate([B.property({readOnly:!0})],f.prototype,"isWrappable",null);v.__decorate([B.property({type:b,json:{write:!0}})],f.prototype,"origin",void 0);v.__decorate([l.reader("origin")],f.prototype,"readOrigin",null);v.__decorate([B.property({type:[n],value:null,json:{write:!0}})],f.prototype,"lods",null);v.__decorate([B.property({readOnly:!0})],f.prototype,"minScale",void 0);v.__decorate([B.property({readOnly:!0})],
f.prototype,"maxScale",void 0);v.__decorate([B.property({readOnly:!0})],f.prototype,"scales",void 0);v.__decorate([B.property({cast:w=>Array.isArray(w)?w:"number"===typeof w?[w,w]:[256,256]})],f.prototype,"size",void 0);v.__decorate([l.reader("size",["rows","cols"])],f.prototype,"readSize",null);v.__decorate([a.writer("size",{cols:{type:G.Integer},rows:{type:G.Integer}})],f.prototype,"writeSize",null);v.__decorate([B.property({type:p,json:{write:!0}})],f.prototype,"spatialReference",void 0);f=z=v.__decorate([r.subclass("esri.layers.support.TileInfo")],
f);(function(w){w=w.ExtrapolateOptions||(w.ExtrapolateOptions={});w[w.NONE=0]="NONE";w[w.POWER_OF_TWO=1]="POWER_OF_TWO"})(f||(f={}));return f})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(m,v,k,f,x,A,B){var C;k=C=function(G){function l(r){r=
G.call(this,r)||this;r.cols=null;r.level=0;r.levelValue=null;r.origin=null;r.resolution=0;r.rows=null;r.scale=0;return r}m._inheritsLoose(l,G);l.prototype.clone=function(){return new C({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})};return l}(k.JSONSupport);v.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"cols",void 0);v.__decorate([f.property({type:A.Integer,
json:{write:!0}})],k.prototype,"level",void 0);v.__decorate([f.property({type:String,json:{write:!0}})],k.prototype,"levelValue",void 0);v.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,"origin",void 0);v.__decorate([f.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);v.__decorate([f.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],k.prototype,
"rows",void 0);v.__decorate([f.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=C=v.__decorate([B.subclass("esri.layers.support.LOD")],k)})},"esri/layers/support/TileKey":function(){define(["exports"],function(m){m.TileKey=function(v,k,f,x,A){this.id=v;this.level=k;this.row=f;this.col=x;this.extent=A};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/ArrayPool ../core/Handles ../core/maybe ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){function a(e,h){return h?b[e].valueToClassName[h].split(" "):[]}const b={widthBreakpoint:{getValue(e){const h=e.viewSize[0];e=e.breakpoints;const c=this.values;return h<=e.xsmall?c.xsmall:h<=e.small?c.small:h<=e.medium?c.medium:h<=e.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const h=e.viewSize[1];e=e.breakpoints;const c=this.values;return h<=e.xsmall?c.xsmall:h<=e.small?c.small:h<=e.medium?c.medium:h<=e.large?c.large:c.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){e=e.viewSize;const h=this.values;return e[1]>=e[0]?h.portrait:h.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},p={xsmall:544,small:768,medium:992,large:1200};m.BreakpointsOwner=
e=>{e=function(h){function c(...t){t=h.call(this,...t)||this;t._breakpointsHandles=new x;t.orientation=null;t.widthBreakpoint=null;t.heightBreakpoint=null;t.breakpoints=p;return t}v._inheritsLoose(c,h);var n=c.prototype;n.initialize=function(){this._breakpointsHandles.add(B.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),B.initial))};n.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=A.destroyMaybe(this._breakpointsHandles))};n._updateClassNames=
function(){if(this.container){var t=f.acquire(),z=f.acquire(),w=!1,g;for(g in b){const q=this[g],y=b[g].getValue({viewSize:this.size,breakpoints:this.breakpoints});q!==y&&(w=!0,this[g]=y,a(g,q).forEach(F=>z.push(F)),a(g,y).forEach(F=>t.push(F)))}w&&(this._applyClassNameChanges(t,z),f.release(t),f.release(z))}};n._applyClassNameChanges=function(t,z){const w=this.container;w&&(z.forEach(g=>w.classList.remove(g)),t.forEach(g=>w.classList.add(g)))};n._removeActiveClassNames=function(){const t=this.container;
if(t)for(var z in b)a(z,this[z]).forEach(w=>t.classList.remove(w))};v._createClass(c,[{key:"breakpoints",set:function(t){var z=this._get("breakpoints");if(t!==z){z=(z=t)&&z.xsmall<z.small&&z.small<z.medium&&z.medium<z.large;if(!z){const w=JSON.stringify(p,null,2);console.warn("provided breakpoints are not valid, using defaults:"+w)}t=z?t:p;this._set("breakpoints",{...t})}}}]);return c}(e);k.__decorate([C.property()],e.prototype,"breakpoints",null);k.__decorate([C.property()],e.prototype,"orientation",
void 0);k.__decorate([C.property()],e.prototype,"widthBreakpoint",void 0);k.__decorate([C.property()],e.prototype,"heightBreakpoint",void 0);return e=k.__decorate([r.subclass("esri.views.BreakpointsOwner")],e)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/DOMContainer":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/domUtils ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../widgets/Popup".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){function e(c){c&&(f.empty(c),c.parentNode&&c.parentNode.removeChild(c))}const h=[0,0];m.DOMContainer=c=>{c=function(n){function t(...w){var g=n.call(this,...w)||this;g._freqInfo={freq:16,time:750};g._overlayRenderTaskHandle=null;g.height=0;g.overlay=null;g.position=null;g.resizing=!1;g.root=null;g.surface=null;g.suspended=!0;g.ui=null;g.userContent=null;g.width=0;g.widthBreakpoint=null;if(0===w.length||void 0===w[0]?.popup)g.popup=new p({view:v._assertThisInitialized(g)});
g.handles.add([B.watch(()=>g.cursor,q=>{const {surface:y}=v._assertThisInitialized(g);y&&y.setAttribute("data-cursor",q)}),B.watch(()=>g.interacting,q=>{const {surface:y}=v._assertThisInitialized(g);y&&y.setAttribute("data-interacting",q.toString())})]);return g}v._inheritsLoose(t,n);var z=t.prototype;z.initialize=function(){this.handles.add(B.watch(()=>this.ui,(w,g)=>this._handleUIChange(w,g)));this._wireUI(this.ui);this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",
()=>this.notifyChange("focused"))])};z.destroy=function(){this.destroyed||(this.ui=A.destroyMaybe(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};z.blur=function(){this.surface&&this.surface.blur()};z.focus=function(){this.surface&&this.surface.focus()};z.pageToContainer=function(w,g,q){const y=this.position;w-=y?y[0]:0;g-=y?y[1]:0;q?(q[0]=w,q[1]=g):q=[w,g];return q};z.containerToPage=function(w,g,q){const y=this.position;w+=y?y[0]:0;g+=y?y[1]:0;q?(q[0]=w,q[1]=
g):q=[w,g];return q};z._handleUIChange=function(w,g){g&&(this.handles.remove("ui"),g.destroy());w&&this._wireUI(w);this._set("ui",w)};z._wireUI=function(w){this.handles.remove("ui");w&&(w.view=this,this.handles.add([B.watch(()=>this.root,g=>{if(g){const q=document.createElement("div");g.appendChild(q);g=q}else g=null;w.container=g},B.initial),B.watch(()=>this.popup,(g,q)=>{q&&w.remove(q,"popup");g&&(g.view=w.view,w.add(g,{key:"popup",position:"manual"}))},B.initial)],"ui"))};z._stopMeasuring=function(){this.handles.remove("measuring");
this._get("resizing")&&this._set("resizing",!1)};z._startMeasuring=function(){const w=this._freqInfo;w.freq=16;w.time=750;this.handles.add([(()=>{const g=()=>{w.freq=16;w.time=750};window.addEventListener("resize",g);return{remove(){window.removeEventListener("resize",g)}}})(),C.addFrameTask({prepare:g=>{const q=this._measure(),y=this._freqInfo;y.time+=g.deltaTime;q&&(y.freq=16,this._get("resizing")||this._set("resizing",!0));y.time<y.freq||(y.time=0,this._position()||q?y.freq=16:y.freq=Math.min(750,
2*y.freq),!q&&512<=y.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()};z._measure=function(){var w=this.container;const g=w?w.clientWidth:0;w=w?w.clientHeight:0;if(0===g||0===w)return this.suspended||this._set("suspended",!0),!1;const q=this.width,y=this.height;if(g===q&&w===y)return this.suspended&&this._set("suspended",!1),!1;this._set("width",g);this._set("height",w);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:q,
oldHeight:y,width:g,height:w});return!0};z._position=function(){var w=this.container;const g=this.position;var q;if(q=w)q=(w.ownerDocument||window.document).defaultView,w=w.getBoundingClientRect(),h[0]=w.left+(q?.pageXOffset??0),h[1]=w.top+(q?.pageYOffset??0),q=h;w=q;return w?g&&w[0]===g[0]&&w[1]===g[1]?!1:(this._set("position",[w[0],w[1]]),!0):!1};z.forceDOMReadyCycle=function(){};v._createClass(t,[{key:"container",get:function(){return this._get("container")??null},set:function(w){const g=this._get("container");
var q=f.byId(w);(q=q instanceof HTMLDivElement?q:null)||"string"!==typeof w||x.getLogger(this.declaredClass).error("#container",`element with id '${w}' not found`);if(g!==q)if(this.handles.remove("dom-size"),this._stopMeasuring(),g&&(g.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(e(this.root),this._set("root",null)),this.userContent&&
(f.reparent(this.userContent,g),e(this.userContent),this._set("userContent",null))),q){q.classList.add("esri-view");w=document.createElement("div");w.className="esri-view-user-storage";f.reparent(q,w);q.appendChild(w);this._set("userContent",w);w=document.createElement("div");w.className="esri-view-root";q.insertBefore(w,q.firstChild);this._set("root",w);var y=document.createElement("div");y.className="esri-view-surface";y.setAttribute("role","application");y.tabIndex=0;w.appendChild(y);this._set("surface",
y);var F=new b;w.appendChild(F.surface);this._set("overlay",F);B.watch(()=>F.needsRender,I=>{this._overlayRenderTaskHandle=I&&!this._overlayRenderTaskHandle?C.addFrameTask({render:()=>this.overlay?.render()}):A.removeMaybe(this._overlayRenderTaskHandle)});this.forceDOMReadyCycle();this.handles.add(B.watch(()=>this.size,I=>{const [K,N]=I;K>=document.body.clientWidth||N>=document.body.clientHeight?y.classList.add("esri-view-surface--inset-outline"):y.classList.remove("esri-view-surface--inset-outline")},
B.initial),"dom-size");this._set("container",q);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}},{key:"focused",get:function(){const w=document.activeElement===this.surface;return document.hasFocus()&&w}},{key:"popup",set:function(w){const g=this._get("popup");g&&g!==w&&g.destroy();this._set("popup",w)}},{key:"size",get:function(){return[this.width,this.height]}}]);return t}(c);
k.__decorate([G.property()],c.prototype,"container",null);k.__decorate([G.property({readOnly:!0})],c.prototype,"focused",null);k.__decorate([G.property({readOnly:!0})],c.prototype,"height",void 0);k.__decorate([G.property({type:p})],c.prototype,"popup",null);k.__decorate([G.property({type:b})],c.prototype,"overlay",void 0);k.__decorate([G.property({readOnly:!0})],c.prototype,"position",void 0);k.__decorate([G.property({readOnly:!0})],c.prototype,"resizing",void 0);k.__decorate([G.property({readOnly:!0})],
c.prototype,"root",void 0);k.__decorate([G.property({value:null,readOnly:!0})],c.prototype,"size",null);k.__decorate([G.property({readOnly:!0})],c.prototype,"surface",void 0);k.__decorate([G.property({readOnly:!0})],c.prototype,"suspended",void 0);k.__decorate([G.property()],c.prototype,"ui",void 0);k.__decorate([G.property({readOnly:!0})],c.prototype,"userContent",void 0);k.__decorate([G.property({readOnly:!0})],c.prototype,"width",void 0);k.__decorate([G.property()],c.prototype,"widthBreakpoint",
void 0);return c=k.__decorate([a.subclass("esri.views.DOMContainer")],c)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../core/support/WatchUpdatingTracking ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){k=function(a){function b(){var e=a.apply(this,arguments)||this;e.items=new f;e._watchUpdatingTracking=new G.WatchUpdatingTracking;e._callbacks=new Map;e._projector=r.createProjector();e._hiddenProjector=r.createProjector();return e}m._inheritsLoose(b,a);var p=b.prototype;p.initialize=function(){const e=document.createElement("div");e.className="esri-overlay-surface";this._set("surface",e);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
"visibility: hidden;");e.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,h=>{for(const c of h.added){const n=()=>c.render();this._callbacks.set(c,n);this._projector.append(this.surface,n)}for(const c of h.removed)h=this._projector.detach(this._callbacks.get(c)),this.surface.removeChild(h.domNode),this._callbacks.delete(c)})};p.addItem=function(e){this.items.add(e)};p.removeItem=function(e){this.items.remove(e)};p.destroy=function(){this.items.removeAll();
this._callbacks.forEach(e=>this._projector.detach(e));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};p.render=function(){this._projector.renderNow()};p.computeBoundingRect=function(e){const h=this._hiddenSurface,c=this._hiddenProjector;let n=null;const t=()=>n=e.render();c.append(h,t);c.renderNow();const z={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){const w=n.domNode.getBoundingClientRect();z.left=w.left;z.top=w.top;z.right=w.right;z.bottom=w.bottom}for(c.detach(t);h.firstChild;)h.removeChild(h.firstChild);
return z};p.overlaps=function(e,h){e=this.computeBoundingRect(e);h=this.computeBoundingRect(h);return Math.max(e.left,h.left)<=Math.min(e.right,h.right)&&Math.max(e.top,h.top)<=Math.min(e.bottom,h.bottom)};p.prepare=function(){var e=m._asyncToGenerator(function*(){yield document.fonts.load(this._fontString()).catch(()=>{})});return function(){return e.apply(this,arguments)}}();p.renderCanvas=function(e){if(this.items.some(c=>c.visible)){var h=e.getContext("2d");h.save();h.font=this._fontString();
this.items.forEach(c=>{h.save();c.renderCanvas(h);h.restore()});h.restore()}};p._fontString=function(){return`10px ${getComputedStyle(this.surface).fontFamily}`};m._createClass(b,[{key:"needsRender",get:function(){return 0<this.items.length}},{key:"updating",get:function(){return this._watchUpdatingTracking?.updating??!1}},{key:"hasVisibleItems",get:function(){return this.items.some(e=>e.visible)}}]);return b}(k);v.__decorate([x.property({readOnly:!0})],k.prototype,"surface",void 0);v.__decorate([x.property({readOnly:!0})],
k.prototype,"items",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"needsRender",null);v.__decorate([x.property({readOnly:!0})],k.prototype,"_watchUpdatingTracking",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"updating",null);return k=v.__decorate([C.subclass("esri.views.overlay.ViewOverlay")],k)})},"esri/widgets/Popup":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/Collection ../core/events ../core/Handles ../core/Logger ../core/maybe ../core/reactiveUtils ../core/throttle ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Feature ./Spinner ./Widget ./Feature/resources ./Feature/support/FeatureContentMixin ./Popup/PopupViewModel ./support/Heading ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./support/widgetUtils ../support/themeUtils ../intl/substitute".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I,K,N,S){function P(T,H){return void 0===H?`${"esri-popup"}__${T}`:`${"esri-popup"}__${T}-${H}`}const J={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},L={closeButton:!0,featureNavigation:!0};f=function(T){function H(d,E){var D=T.call(this,d,E)||this;D._blurClose=!1;D._blurContainer=!1;D._containerNode=null;D._mainContainerNode=null;D._featureMenuNode=null;D._actionsMenuNode=null;D._focusClose=!1;D._focusContainer=!1;D._focusDockButton=
!1;D._focusFeatureMenuButton=!1;D._focusActionsMenuButton=!1;D._focusFirstFeature=!1;D._focusFirstAction=!1;D._handles=new B;D._pointerOffsetInPx=16;D._spinner=null;D._feature=null;D._featureMenuIntersectionObserverCallback=([M])=>{M?.isIntersecting&&D.viewModel.featurePage++};D._featureMenuIntersectionObserver=new IntersectionObserver(D._featureMenuIntersectionObserverCallback,{root:window.document});D._displaySpinnerThrottled=r.throttle(()=>D._displaySpinner(),0);D._exitRelatedRecordsActions=new WeakMap;
D._flowItems=new x;D.alignment="auto";D.collapsed=!1;D.collapseEnabled=!0;D.dockEnabled=!1;D.featureMenuOpen=!1;D.headingLevel=2;D.maxInlineActions=3;D.messages=null;D.messagesCommon=null;D.spinnerEnabled=!0;D.viewModel=new w;D.visibleElements={...L};D._addSelectedFeatureIndexHandle();D.addHandles([l.watch(()=>D.viewModel?.screenLocation,()=>D._positionContainer()),l.watch(()=>[D.viewModel?.active,D.dockEnabled],()=>D._toggleScreenLocationEnabled()),l.watch(()=>D.viewModel?.screenLocation,(M,Q)=>
{!!M!==!!Q&&D.reposition()}),l.watch(()=>[D.viewModel?.view?.padding,D.viewModel?.view?.size,D.viewModel?.active,D.viewModel?.location,D.alignment],()=>D.reposition()),l.watch(()=>D.spinnerEnabled,M=>D._spinnerEnabledChange(M)),l.watch(()=>D.viewModel?.view?.size,(M,Q)=>D._updateDockEnabledForViewSize(M,Q)),l.watch(()=>D.viewModel?.view,(M,Q)=>D._viewChange(M,Q)),l.watch(()=>D.viewModel?.view?.ready,(M,Q)=>D._viewReadyChange(M,Q)),l.watch(()=>[D.viewModel?.waitingForResult,D.viewModel?.location],
()=>{D._hideSpinner();D._displaySpinnerThrottled()}),l.watch(()=>D.selectedFeatureWidget,()=>D._destroyFlowItemWidgets()),l.watch(()=>[D.selectedFeatureWidget?.viewModel?.title,D.selectedFeatureWidget?.viewModel?.state],()=>D._setTitleFromFeatureWidget()),l.watch(()=>[D.selectedFeatureWidget?.viewModel?.content,D.selectedFeatureWidget?.viewModel?.state],()=>D._setContentFromFeatureWidget()),l.when(()=>!D.collapsed,()=>{"xsmall"===D.viewModel?.view?.widthBreakpoint&&D.viewModel.active&&D.collapseEnabled&&
D.viewModel.centerAtLocation()}),l.on(()=>D.viewModel?.allActions,"change",()=>D._watchActions()),l.watch(()=>D.viewModel?.allActions,()=>D._watchActions(),l.initial),l.watch(()=>D.viewModel?.featureViewModels,()=>D._featureMenuViewportScrollTop()),l.on(()=>D._flowItems,"change",()=>{D.notifyChange("_activeFlowItemWidget");D.scheduleRender()}),l.watch(()=>[D._activeFlowItemWidget?.viewModel?.state,D._activeFlowItemWidget?.viewModel?.title],()=>D.scheduleRender())]);return D}v._inheritsLoose(H,T);
var u=H.prototype;u.loadDependencies=function(){return Promise.all([new Promise((d,E)=>m(["../chunks/calcite-flow"],d,E)),new Promise((d,E)=>m(["../chunks/calcite-flow-item"],d,E)),new Promise((d,E)=>m(["../chunks/calcite-action"],d,E)),new Promise((d,E)=>m(["../chunks/calcite-tooltip"],d,E)),new Promise((d,E)=>m(["../chunks/calcite-icon"],d,E))])};u.destroy=function(){this._destroyFlowItemWidgets();this._destroySelectedFeatureWidget();this._destroySpinner();this._handles?.destroy();this._unobserveFeatureMenuObserver();
this._featureMenuIntersectionObserver?.disconnect();this._handles=null};u.castVisibleElements=function(d){return{...L,...d}};u.blur=function(){const {active:d}=this.viewModel;d||C.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active.");this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0;this.scheduleRender()};u.clear=function(){return this.viewModel.clear()};u.close=function(){this.visible=!1};u.fetchFeatures=function(d,E){return this.viewModel.fetchFeatures(d,
E)};u.focus=function(){const {active:d}=this.viewModel;d||C.getLogger(this.declaredClass).warn("Popup can only be focused when currently active.");this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0;this.scheduleRender()};u.next=function(){return this.viewModel.next()};u.open=function(d){this._handles.remove("selected-index");const E={collapsed:d?!!d.collapsed:!1,actionsMenuOpen:d?!!d.actionsMenuOpen:!1,featureMenuOpen:d?!!d.featureMenuOpen:!1};"xsmall"===this.viewModel?.view?.widthBreakpoint&&
(E.collapsed=!0);this.set(E);this.viewModel.open(d);this._shouldFocus(d);this._addSelectedFeatureIndexHandle()};u.previous=function(){return this.viewModel.previous()};u.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};u.triggerAction=function(d){return this.viewModel.triggerAction(d)};u.render=function(){const {actionsMenuOpen:d,dockEnabled:E,featureMenuVisible:D,dividedActions:M,currentAlignment:Q,currentDockPosition:V}=this,{active:Z}=this.viewModel,
{menuActions:ba}=M,fa=this.selectedFeature?.layer?.title,ea=this.selectedFeature?.layer?.id;return I.tsx("div",{class:this.classes("esri-popup",{["esri-popup--aligned-top-center"]:"top-center"===Q,["esri-popup--aligned-bottom-center"]:"bottom-center"===Q,["esri-popup--aligned-top-left"]:"top-left"===Q,["esri-popup--aligned-bottom-left"]:"bottom-left"===Q,["esri-popup--aligned-top-right"]:"top-right"===Q,["esri-popup--aligned-bottom-right"]:"bottom-right"===Q,["esri-popup--is-docked"]:Z&&E,["esri-popup--shadow"]:Z&&
!E,["esri-popup--is-docked-top-left"]:"top-left"===V,["esri-popup--is-docked-top-center"]:"top-center"===V,["esri-popup--is-docked-top-right"]:"top-right"===V,["esri-popup--is-docked-bottom-left"]:"bottom-left"===V,["esri-popup--is-docked-bottom-center"]:"bottom-center"===V,["esri-popup--is-docked-bottom-right"]:"bottom-right"===V,["esri-popup--feature-menu-open"]:D,["esri-popup--actions-menu-open"]:Z&&1<ba.length&&d}),role:"presentation","data-layer-title":fa,"data-layer-id":ea,bind:this,afterCreate:this._positionContainer,
afterUpdate:this._positionContainer},Z?[this.renderMainContainer(),this.renderPointer()]:null)};u.renderLoadingIcon=function(){return I.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})};u.renderNavigationLoading=function(){const {messagesCommon:d}=this;return this.viewModel.pendingPromisesCount?I.tsx("div",{key:P("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":d.loading,title:d.loading},
this.renderLoadingIcon()):null};u.renderPreviousIcon=function(){const d=K.isRTL(this.container);return I.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-right-triangle-arrow"]:d,["esri-popup__pagination-previous-icon--rtl"]:d,["esri-icon-left-triangle-arrow"]:!d,["esri-popup__pagination-previous-icon"]:!d})})};u.renderPreviousButton=function(){const {messages:d}=this;return I.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,
class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":d.previous,title:d.previous},this.renderPreviousIcon())};u.renderNextIcon=function(){const d=K.isRTL(this.container);return I.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",{["esri-icon-left-triangle-arrow"]:d,["esri-popup__pagination-next-icon--rtl"]:d,["esri-icon-right-triangle-arrow"]:!d,["esri-popup__pagination-next-icon"]:!d})})};u.renderNextButton=function(){const {messages:d}=this;
return I.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":d.next,title:d.next},this.renderNextIcon())};u.renderFeatureMenuButton=function(){const {featureMenuOpen:d,featureMenuId:E,messagesCommon:D}=this,{featureCount:M,selectedFeatureIndex:Q}=this.viewModel;return I.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,
afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":E,"aria-expanded":d.toString(),"aria-label":D.menu,title:D.menu},this._getPageText(M,Q))};u.renderNavigationButtons=function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null};u.renderDockIcon=
function(){const {dockEnabled:d}=this,E=this._wouldDockTo();return I.tsx("span",{"aria-hidden":"true",class:this.classes({["esri-icon-minimize"]:d,["esri-popup__icon--dock-icon"]:!d,["esri-icon-dock-right"]:!d&&("top-right"===E||"bottom-right"===E),["esri-icon-dock-left"]:!d&&("top-left"===E||"bottom-left"===E),["esri-icon-maximize"]:!d&&"top-center"===E,["esri-icon-dock-bottom"]:!d&&"bottom-center"===E},"esri-popup__icon")})};u.renderDockButton=function(){const {dockEnabled:d,messages:E}=this,D=
d?E.undock:E.dock;return"xsmall"!==this.viewModel?.view?.widthBreakpoint&&this.dockOptions?.buttonEnabled?I.tsx("div",{role:"button","aria-label":D,title:D,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},this.renderDockIcon()):null};u.renderTitle=function(){const {title:d}=this.viewModel,{titleId:E,collapsible:D,contentCollapsed:M,
messagesCommon:Q}=this;var V={["esri-popup__header-container--button"]:D};const Z=I.tsx(g.Heading,{level:this.headingLevel,class:"esri-popup__header-title",innerHTML:d});V=D?I.tsx("button",{key:`${d}--collapsible`,id:E,title:M?Q.expand:Q.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",V),"aria-expanded":M?"false":"true",onclick:this._toggleCollapsed,type:"button"},Z,I.tsx("calcite-icon",{class:"esri-popup__collapse-icon",key:"collapse-icon",
icon:M?"chevron-down":"chevron-up",scale:"m"})):I.tsx("div",{key:d,id:E,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes("esri-popup__header-container",V)},Z);return d?V:null};u.renderCloseIcon=function(){return I.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")})};u.renderCloseButton=function(){const {visibleElements:d,messagesCommon:E}=this;return d.closeButton?I.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,
onkeydown:this._close,class:"esri-popup__button","aria-label":E.close,title:E.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null};u.renderHeader=function(){return I.tsx("header",{class:"esri-popup__header"},this.renderTitle(),I.tsx("div",{class:"esri-popup__header-buttons"},this.renderDockButton(),this.renderCloseButton()))};u.renderContentContainer=function(){const {contentId:d,hasContent:E,contentCollapsed:D,_flowItems:M,messagesCommon:Q}=
this,{content:V}=this.viewModel,Z=M.toArray(),ba={["esri-content--has-flows"]:!!Z.length};return E&&!D?I.tsx("div",{key:V,enterAnimation:this._createFeatureUpdatedAnimation(),id:d,class:this.classes("esri-popup__content",ba)},I.tsx("calcite-flow",{bind:this,onCalciteFlowItemBack:this._handleBackClick},I.tsx("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode","intl-back":Q.back,afterCreate:K.storeNode,key:"root-flow-item"},this.renderContent()),Z.map(fa=>this.renderFlowItem(fa))),Z.map(fa=>
this.renderFlowItemTooltip(fa))):null};u.renderFlowItem=function(d){const {messages:E,messagesCommon:D}=this,M=N.isDarkTheme();return I.tsx("calcite-flow-item",{class:this.classes({["calcite-theme-dark"]:!M,["calcite-theme-light"]:M}),heading:d.title,"intl-back":D.back,description:this._getFlowItemDescription(d),key:`flow-item-${d.viewModel.uid}`},I.tsx("calcite-action",{class:"esri-popup__action--exit",icon:"move-up",label:E?.exitRelatedRecords,text:E?.exitRelatedRecords,slot:"header-actions-start",
bind:this,afterCreate:Q=>this._storeExitRelatedRecordsAction(d,Q),onclick:this._destroyFlowItemWidgets}),I.tsx("div",{class:this.classes("esri-content__flow-item",{["calcite-theme-dark"]:M,["calcite-theme-light"]:!M})},d.render()))};u.renderFlowItemTooltip=function(d){const {messages:E,_exitRelatedRecordsActions:D}=this,M=N.isDarkTheme();return I.tsx("calcite-tooltip",{class:this.classes({["calcite-theme-dark"]:!M,["calcite-theme-light"]:M}),key:`exit-related-records-tooltip-${d.viewModel.uid}`,label:E?.exitRelatedRecords,
overlayPositioning:"fixed",referenceElement:D.get(d),placement:"top"},E?.exitRelatedRecords)};u.renderActionsMenuButton=function(){const {actionsMenuId:d,actionsMenuButtonId:E,actionsMenuOpen:D,dividedActions:M,messagesCommon:Q}=this,V=D?Q.close:Q.open,{menuActions:Z}=M;return Z.length?I.tsx("div",{key:P("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:E,"aria-haspopup":"true","aria-controls":D?d:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,
onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":V,title:V},I.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null};u.renderMenuActions=function(){const {actionsMenuId:d,actionsMenuButtonId:E,actionsMenuOpen:D,dividedActions:M}=this,{menuActions:Q}=M;return Q.length&&D?I.tsx("ul",{id:d,role:"menu","aria-labelledby":E,key:P("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,
afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},Q.toArray().map(V=>this.renderAction({action:V,type:"menu-item"}))):null};u.renderInlineActions=function(){const {inlineActions:d}=this.dividedActions;return!!d.length&&d.toArray().map(E=>this.renderAction({action:E,type:"inline"}))};u.renderInlineActionsContainer=function(){const {inlineActions:d,menuActions:E}=this.dividedActions,D=!!d.length,M=!!E.length;return D||M?I.tsx("div",{key:"inline-actions-container","data-inline-actions":D.toString(),
"data-menu-actions":M.toString(),class:"esri-popup__inline-actions-container"},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null};u.renderNavigation=function(){return this.featureNavigationVisible?I.tsx("section",{key:P("navigation"),class:this.classes("esri-popup__navigation")},this.renderNavigationButtons()):null};u.renderFooter=function(){const {featureNavigationVisible:d,dividedActions:E}=this,{inlineActions:D,menuActions:M}=E,Q=!!D.length,V={["esri-popup__footer--has-pagination"]:d,
["esri-popup__footer--has-actions"]:Q,["esri-popup__footer--has-actions-menu"]:!!M.length};return d||Q?I.tsx("div",{key:P("feature-buttons"),class:this.classes("esri-popup__footer",V)},this.renderInlineActionsContainer(),this.renderNavigation()):null};u.renderFeatureMenuContainer=function(){var {messages:d}=this;const {featureViewModels:E,isLoadingFeature:D}=this.viewModel;d=S.substitute(d.selectedFeatures,{total:E.length});return I.tsx("section",{key:P("menu"),class:"esri-popup__feature-menu"},I.tsx("strong",
{class:"esri-popup__feature-menu-header"},d),I.tsx("nav",{bind:this,class:"esri-popup__feature-menu-viewport","data-node-ref":"_featureMenuViewportNode",afterCreate:K.storeNode},this.renderFeatureMenu(),I.tsx("div",{class:"esri-popup__feature-menu-observer",bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),D?I.tsx("div",{class:"esri-popup__feature-menu-loader"},this.renderLoadingIcon()):null))};u.renderPointer=function(){return this.dockEnabled?null:I.tsx("div",{key:P("pointer"),
class:"esri-popup__pointer",role:"presentation"},I.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}))};u.renderMainContainer=function(){const {dockEnabled:d,currentAlignment:E,currentDockPosition:D,titleId:M,contentId:Q,collapsible:V,hasContent:Z,contentCollapsed:ba,visibleElements:fa}=this,{title:ea}=this.viewModel,da="bottom-left"===E||"bottom-center"===E||"bottom-right"===E||"top-left"===D||"top-center"===D||"top-right"===D,O="top-left"===E||"top-center"===E||
"top-right"===E||"bottom-left"===D||"bottom-center"===D||"bottom-right"===D;return I.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",{["esri-popup--shadow"]:d,["esri-popup--is-collapsible"]:V,["esri-popup--is-collapsed"]:ba}),tabIndex:fa.closeButton?null:-1,role:"dialog","aria-labelledby":ea?M:"","aria-describedby":Z&&!ba?Q:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},da?this.renderFooter():
null,da?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),O?this.renderFooter():null,O?this.renderFeatureMenuContainer():null)};u.renderContent=function(){const d=this.viewModel?.content;return d?"string"===typeof d?I.tsx("div",{class:t.CSS.contentNode,key:d,innerHTML:d}):this.renderNodeContent(d):null};u.renderActionText=function(d){return I.tsx("span",{key:"text",class:"esri-popup__action-text"},d)};u.renderActionIcon=function(d){const E=this._getActionClass(d),
D=this._getActionImage(d),M={["esri-icon-loading-indicator"]:d.active,["esri-rotating"]:d.active,["esri-popup__icon"]:!!E,["esri-popup__action-image"]:!d.active&&!!D};E&&(M[E]=!d.active);return I.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",M),styles:this._getIconStyles(D)})};u.renderAction=function(d){const {action:E,type:D}=d;d=this._getActionTitle(E);const M={["esri-popup__action"]:"toggle"!==E.type,["esri-popup__action-toggle"]:"toggle"===E.type,["esri-popup__action-toggle--on"]:"toggle"===
E.type&&E.value,["esri-popup__button--disabled"]:E.disabled},Q=[this.renderActionIcon(E),this.renderActionText(d)];d="menu-item"===D?I.tsx("li",{key:E.uid,role:"menuitem",tabIndex:0,title:d,"aria-label":d,class:this.classes("esri-popup__button",M),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":E.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Q):I.tsx("div",{key:E.uid,role:"button",tabIndex:0,title:d,"aria-label":d,class:this.classes("esri-popup__button",M),onkeyup:this._handleActionMenuItemKeyup,
bind:this,"data-action-uid":E.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Q);return E.visible?d:null};u.renderFeatureMenuItem=function(d,E){const {messages:D,messagesCommon:M}=this,{selectedFeatureIndex:Q,selectedFeatureViewModel:V}=this.viewModel;var Z=d===V;const ba={["esri-popup__feature-menu-item--selected"]:Z};Z=Z?I.tsx("span",{key:P(`feature-menu-selected-feature-${Q}`),title:D.selectedFeature,"aria-label":D.selectedFeature,class:"esri-icon-check-mark"}):null;d=I.tsx("span",
{innerHTML:d.title||M.untitled});return I.tsx("li",{role:"menuitem",tabIndex:-1,key:P(`feature-menu-feature-${Q}`),class:this.classes(ba,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":E,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},I.tsx("span",{class:"esri-popup__feature-menu-title"},d,Z))};
u.renderFeatureMenu=function(){const {featureMenuId:d}=this,{featureViewModels:E}=this.viewModel;return 1<E.length?I.tsx("ol",{class:"esri-popup__feature-menu-list",id:d,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},E.filter(D=>!!D.graphic).map((D,M)=>this.renderFeatureMenuItem(D,M))):null};u._storeExitRelatedRecordsAction=function(d,E){this._exitRelatedRecordsActions.set(d,E);this.scheduleRender()};u._getFlowItemDescription=
function(d){return"featureCountDescription"in d?d.featureCountDescription:d.viewModel.description};u._destroyFlowItemWidgets=function(){this._flowItems.removeAll().forEach(d=>{"showAllEnabled"in d.viewModel&&(d.viewModel.showAllEnabled=!1);d.viewModel=null;d.destroy()})};u._handleBackClick=function(){const d=this._flowItems.pop();this._exitRelatedRecordsActions.delete(d);"showAllEnabled"in d.viewModel&&(d.viewModel.showAllEnabled=!1);d&&(d.viewModel=null,d.destroy())};u._getActionTitle=function(d){const {messages:E,
selectedFeature:D,messagesCommon:M}=this,{id:Q}=d,V=D?.attributes;return(d="zoom-to-feature"===Q?S.substitute(d.title,{messages:E}):"remove-selected-feature"===Q?S.substitute(d.title,{messages:M}):"zoom-to-clustered-features"===Q?S.substitute(d.title,{messages:E}):"browse-clustered-features"===Q?S.substitute(d.title,{messages:E}):d.title)&&V?S.substitute(d,V):d};u._getActionClass=function(d){var {selectedFeature:E}=this;E=E?.attributes;const {className:D,image:M}=d;return(d=M||D?D:"esri-icon-default-action")&&
E?S.substitute(d,E):d};u._getActionImage=function(d){var {selectedFeature:E}=this;E=E?.attributes;({image:d}=d);return d&&E?S.substitute(d,E):d};u._createFeatureUpdatedAnimation=function(){return K.cssTransition("enter","esri-popup--feature-updated")};u._getInlineActionCount=function(){const {maxInlineActions:d,featureNavigationVisible:E}=this;if("number"!==typeof d)return null;const D=Math.round(d);return Math.max(E?D-1:D,0)};u._watchActions=function(){const {allActions:d}=this.viewModel;this.notifyChange("dividedActions");
this._handles.remove("actions");d&&d.forEach(E=>{this._handles.add(l.watch(()=>[E.uid,E.active,E.className,E.disabled,E.id,E.title,E.image,E.visible],()=>this.scheduleRender()),"actions")})};u._divideActions=function(){var {allActions:d}=this.viewModel;d=d.filter(Q=>Q.visible);const E=this._getInlineActionCount(),D=null===E,M=0===E;return{inlineActions:D?d.slice(0):M?new x:d.slice(0,E),menuActions:D?new x:M?d.slice(0):d.slice(E)}};u._featureMenuOpenChanged=function(d){d?this._focusFirstFeature=!0:
this._focusFeatureMenuButton=!0};u._actionsMenuOpenChanged=function(d){d?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};u._setTitleFromFeatureWidget=function(){const {selectedFeatureWidget:d,messagesCommon:E}=this;d&&(this.viewModel.title="error"===d.viewModel?.state?E.errorMessage:d.viewModel?.title||"")};u._setContentFromFeatureWidget=function(){const {selectedFeatureWidget:d}=this;d&&(this.viewModel.content=d)};u._unobserveFeatureMenuObserver=function(){this._featureMenuIntersectionObserverNode&&
this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)};u._featureMenuIntersectionObserverCreated=function(d){this._unobserveFeatureMenuObserver();this._featureMenuIntersectionObserver.observe(d);this._featureMenuIntersectionObserverNode=d};u._handleFeatureMenuKeyup=function(d){"Escape"===A.eventKey(d)&&(d.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};u._handleActionMenuKeyup=function(d){"Escape"===A.eventKey(d)&&
(d.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};u._setActiveFeature=function(d){const {viewModel:E}=this;E.activeFeature=E.features[d.currentTarget["data-feature-index"]]||null};u._removeActiveFeature=function(){this.viewModel.activeFeature=null};u._handleFeatureMenuItemKeyup=function(d){const E=A.eventKey(d);var {_featureMenuNode:D}=this;const M=d.currentTarget["data-feature-index"];if(D){D=D.querySelectorAll("li");var Q=D.length;"ArrowUp"===E?
(d.stopPropagation(),D[(M-1+Q)%Q].focus()):"ArrowDown"===E?(d.stopPropagation(),D[(M+1+Q)%Q].focus()):"Home"===E?(d.stopPropagation(),D[0].focus()):"End"===E&&(d.stopPropagation(),D[D.length-1].focus())}};u._handleActionMenuItemKeyup=function(d){const E=A.eventKey(d);var {_actionsMenuNode:D}=this;const M=d.currentTarget.dataset.actionUid;var {menuActions:Q}=this.dividedActions;Q=Q.findIndex(Z=>Z.uid===M);if(D){D=D.querySelectorAll("li");var V=D.length;"ArrowUp"===E?(d.stopPropagation(),D[(Q-1+V)%
V].focus()):"ArrowDown"===E?(d.stopPropagation(),D[(Q+1+V)%V].focus()):"Home"===E?(d.stopPropagation(),D[0].focus()):"End"===E&&(d.stopPropagation(),D[D.length-1].focus())}};u._handleMainKeyup=function(d){const E=A.eventKey(d);"ArrowLeft"===E&&(d.stopPropagation(),this.previous());"ArrowRight"===E&&(d.stopPropagation(),this.next())};u._spinnerEnabledChange=function(d){this._destroySpinner();d&&(d=this.get("viewModel.view"),this._createSpinner(d))};u._hideSpinner=function(){const {_spinner:d}=this;
d&&(d.location=null,d.hide())};u._displaySpinner=function(){const {_spinner:d}=this;if(d){var {location:E,waitingForResult:D}=this.viewModel;D?d.show({location:E}):d.hide()}};u._getIconStyles=function(d){return{"background-image":d?`url(${d})`:""}};u._shouldFocus=function(){var d=v._asyncToGenerator(function*(E){E.shouldFocus&&(yield l.whenOnce(()=>!0===this.viewModel?.active),this.focus())});return function(E){return d.apply(this,arguments)}}();u._addSelectedFeatureIndexHandle=function(){const d=
l.watch(()=>this.viewModel?.selectedFeatureIndex,(E,D)=>this._selectedFeatureIndexUpdated(E,D));this._handles.add(d,"selected-index")};u._selectedFeatureIndexUpdated=function(d,E){const {featureCount:D}=this;D&&d!==E&&-1!==d&&(this._destroyFlowItemWidgets(),this.featureMenuOpen=this.actionsMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))};u._destroySelectedFeatureWidget=function(){const {_feature:d}=
this;d&&(d.viewModel=null,d&&!d.destroyed&&d.destroy());this._feature=null};u._isScreenLocationWithinView=function(d,E){return-1<d.x&&-1<d.y&&d.x<=E.width&&d.y<=E.height};u._isOutsideView=function(d){const {popupHeight:E,popupWidth:D,screenLocation:M,side:Q,view:V}=d;if(isNaN(D)||isNaN(E)||!V||!M)return!1;d=V.padding;return"right"===Q&&M.x+D/2>V.width-d.right||"left"===Q&&M.x-D/2<d.left||"top"===Q&&M.y-E<d.top||"bottom"===Q&&M.y+E>V.height-d.bottom?!0:!1};u._calculateAutoAlignment=function(d){if("auto"!==
d)return d;const {_pointerOffsetInPx:E,_containerNode:D,_mainContainerNode:M,viewModel:Q}=this,{screenLocation:V,view:Z}=Q;if(G.isNone(V)||!Z||!D)return"top-center";if(!this._isScreenLocationWithinView(V,Z))return this._get("currentAlignment")||"top-center";var ba=(d=M?window.getComputedStyle(M,null):null)?parseInt(d.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,fa=d?parseInt(d.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0;const {height:ea,width:da}=D.getBoundingClientRect();
d=da+E;const O=Math.max(ea,ba,fa)+E;ba=this._isOutsideView({popupHeight:O,popupWidth:d,screenLocation:V,side:"right",view:Z});fa=this._isOutsideView({popupHeight:O,popupWidth:d,screenLocation:V,side:"left",view:Z});const W=this._isOutsideView({popupHeight:O,popupWidth:d,screenLocation:V,side:"top",view:Z});d=this._isOutsideView({popupHeight:O,popupWidth:d,screenLocation:V,side:"bottom",view:Z});return fa?W?"bottom-right":"top-right":ba?W?"bottom-left":"top-left":W?d?"top-center":"bottom-center":"top-center"};
u._callCurrentAlignment=function(d){return"function"===typeof d?d.call(this):d};u._getCurrentAlignment=function(){const {alignment:d,dockEnabled:E}=this;return E||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(d)))};u._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};u._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};u._calculatePositionResult=
function(d){const E=["left","right"];K.isRTL(this.container)&&E.reverse();return d.replace(/leading/gi,E[0]).replace(/trailing/gi,E[1])};u._callDockPosition=function(d){return"function"===typeof d?d.call(this):d};u._getDockPosition=function(){return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(this.dockOptions?.position)))};u._getCurrentDockPosition=function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null};u._wouldDockTo=function(){return this.dockEnabled?
null:this._getDockPosition()};u._calculateAutoDockPosition=function(d){if("auto"!==d)return d;var E=this.viewModel?.view;d=K.isRTL(this.container)?"top-left":"top-right";if(!E)return d;var D=E.padding||{left:0,right:0,top:0,bottom:0};D=E.width-D.left-D.right;({breakpoints:E}=E);return E&&D<=E.xsmall?"bottom-center":d};u._positionContainer=function(d=this._containerNode){d&&(this._containerNode=d);if(d){var {screenLocation:E}=this.viewModel,{width:D}=d.getBoundingClientRect();if(E=this._calculatePositionStyle(E,
D))d.style.top=E.top,d.style.left=E.left,d.style.bottom=E.bottom,d.style.right=E.right}};u._calculateFullWidth=function(d){const {currentAlignment:E,_pointerOffsetInPx:D}=this;return"top-left"===E||"bottom-left"===E||"top-right"===E||"bottom-right"===E?d+D:d};u._calculateAlignmentPosition=function(d,E,D,M){const {currentAlignment:Q,_pointerOffsetInPx:V}=this;M/=2;const Z=D.height-E;D=D.width-d;const {padding:ba}=this.view;if("bottom-center"===Q)return{top:E+V-ba.top,left:d-M-ba.left};if("top-left"===
Q)return{bottom:Z+V-ba.bottom,right:D+V-ba.right};if("bottom-left"===Q)return{top:E+V-ba.top,right:D+V-ba.right};if("top-right"===Q)return{bottom:Z+V-ba.bottom,left:d+V-ba.left};if("bottom-right"===Q)return{top:E+V-ba.top,left:d+V-ba.left};if("top-center"===Q)return{bottom:Z+V-ba.bottom,left:d-M-ba.left}};u._calculatePositionStyle=function(d,E){const {dockEnabled:D,view:M}=this;if(M){if(D)return{left:"",top:"",right:"",bottom:""};if(!G.isNone(d)&&E&&(E=this._calculateFullWidth(E),d=this._calculateAlignmentPosition(d.x,
d.y,M,E)))return{top:void 0!==d.top?`${d.top}px`:"auto",left:void 0!==d.left?`${d.left}px`:"auto",bottom:void 0!==d.bottom?`${d.bottom}px`:"auto",right:void 0!==d.right?`${d.right}px`:"auto"}}};u._viewChange=function(d,E){d&&E&&(this.close(),this.clear())};u._viewReadyChange=function(d,E){d?(d=this.get("viewModel.view"),this._wireUpView(d)):E&&(this.close(),this.clear())};u._wireUpView=function(d){this._destroySpinner();if(d){var {spinnerEnabled:E}=this;E&&this._createSpinner(d);this._setDockEnabledForViewSize(this.dockOptions)}};
u._dockingThresholdCrossed=function(d,E,D){const [M,Q]=d,[V,Z]=E,{width:ba,height:fa}=D;return M<=ba&&V>ba||M>ba&&V<=ba||Q<=fa&&Z>fa||Q>fa&&Z<=fa};u._updateDockEnabledForViewSize=function(d,E){if(d&&E){var D=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},M=D.left+D.right,Q=D.top+D.bottom;D=[];var V=[];D[0]=d[0]-M;D[1]=d[1]-Q;V[0]=E[0]-M;V[1]=E[1]-Q;({dockOptions:d}=this);this._dockingThresholdCrossed(D,V,d.breakpoint)&&this._setDockEnabledForViewSize(d);this._setCurrentDockPosition()}};
u._focusDockButtonNode=function(d){this._focusDockButton&&(this._focusDockButton=!1,d.focus())};u._closeButtonNodeUpdated=function(d){this._focusClose?(this._focusClose=!1,d.focus()):this._blurClose&&(this._blurClose=!1,d.blur())};u._mainContainerNodeUpdated=function(d){this._mainContainerNode=d;this._focusContainer?(this._focusContainer=!1,d.focus()):this._blurContainer&&(this._blurContainer=!1,d.blur())};u._featureMenuNodeUpdated=function(d){(this._featureMenuNode=d)&&this._focusFirstFeature&&(this._focusFirstFeature=
!1,d=d.querySelectorAll("li"),d.length&&d[0].focus())};u._actionsMenuNodeUpdated=function(d){(this._actionsMenuNode=d)&&this._focusFirstAction&&(this._focusFirstAction=!1,d=d.querySelectorAll("li"),d.length&&d[0].focus())};u._focusFeatureMenuButtonNode=function(d){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,d.focus())};u._focusActionsMenuButtonNode=function(d){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,d.focus())};u._featureMenuViewportScrollTop=function(){this._featureMenuViewportNode&&
(this._featureMenuViewportNode.scrollTop=0)};u._toggleScreenLocationEnabled=function(){const {dockEnabled:d,viewModel:E}=this;E&&(E.screenLocationEnabled=E.active&&!d)};u._shouldDockAtCurrentViewSize=function(d){d=d.breakpoint;var E=this.viewModel?.view?.ui;if(!E)return!1;const {width:D,height:M}=E;if(isNaN(D)||isNaN(M))return!1;E=d.hasOwnProperty("width")&&D<=d.width;d=d.hasOwnProperty("height")&&M<=d.height;return E||d};u._setDockEnabledForViewSize=function(d){d.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(d))};
u._getPageText=function(d,E){return this.featureNavigationVisible?S.substitute(this.messages.pageText,{index:E+1,total:d}):null};u._destroySpinner=function(){const {_spinner:d,view:E}=this;d&&(E&&E.ui&&E.ui.remove(this._spinner,"popup-spinner"),d.destroy(),this._spinner=null)};u._createSpinner=function(d){d&&(this._spinner=new c({view:d}),d.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};u._toggleCollapsed=function(){this.collapsed=!this.collapsed};u._close=function(){this.close();
this.view&&this.view.focus()};u._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};u._toggleFeatureMenu=function(){const d=!this.featureMenuOpen;this._featureMenuOpenChanged(d);this.actionsMenuOpen=!1;this.featureMenuOpen=d};u._toggleActionsMenu=function(){const d=!this.actionsMenuOpen;this._actionsMenuOpenChanged(d);this.featureMenuOpen=!1;this.actionsMenuOpen=d};u._triggerAction=function(d){const E=d.currentTarget.dataset.actionUid;var {allActions:D}=
this.viewModel;d=D.findIndex(M=>M.uid===E);(D=D.getItemAt(d))&&"toggle"===D.type&&(D.value=!D.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(d)};u._selectFeature=function(d){d=d.currentTarget["data-feature-index"];isNaN(d)||(this.viewModel.selectedFeatureIndex=d);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};u._next=function(){this.next()};u._previous=function(){this.previous()};v._createClass(H,[{key:"actionsMenuId",get:function(){return`${this.id}-actions-menu`}},
{key:"actionsMenuButtonId",get:function(){return`${this.id}-actions-menu-button`}},{key:"featureMenuId",get:function(){return`${this.id}-feature-menu`}},{key:"titleId",get:function(){return`${this.id}-popup-title`}},{key:"contentId",get:function(){return`${this.id}-popup-content`}},{key:"hasContent",get:function(){const {selectedFeatureWidget:d,viewModel:E}=this;if(!d)return!!E?.content;var D=d.viewModel;if(D?.waitingForContent||"error"===D?.state)return!0;D=D?.content;return Array.isArray(D)?!!D.length:
!!D}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&1<this.viewModel.featureCount&&this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},
{key:"_activeFlowItemWidget",get:function(){const {_flowItems:d}=this;return d.getItemAt(d.length-1)||null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(d){this.viewModel.actions=d}},{key:"actionsMenuOpen",get:function(){return this.viewModel.active?this._get("actionsMenuOpen"):!1},set:function(d){this._set("actionsMenuOpen",!!d)}},{key:"autoCloseEnabled",get:function(){return this.viewModel.autoCloseEnabled},set:function(d){this.viewModel.autoCloseEnabled=d}},{key:"autoOpenEnabled",
get:function(){return this.viewModel.autoOpenEnabled},set:function(d){this.viewModel.autoOpenEnabled=d}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(d){this.viewModel.defaultPopupTemplateEnabled=d}},{key:"content",get:function(){return this.viewModel.content},set:function(d){this.viewModel.content=d}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},
{key:"dockOptions",get:function(){return this._get("dockOptions")||J},set:function(d){var E={...J};const D=this.get("viewModel.view.breakpoints");var M={};D&&(M.width=D.xsmall,M.height=D.xsmall);d={...E,...d};E={...E.breakpoint,...M};({breakpoint:M}=d);!0===M?d.breakpoint=E:"object"===typeof M&&(d.breakpoint={...E,...M});this._set("dockOptions",d);this._setCurrentDockPosition();this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"features",get:function(){return this.viewModel.features},
set:function(d){this.viewModel.features=d}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(d){this.viewModel.goToOverride=d}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},set:function(d){this.viewModel.highlightEnabled=d}},{key:"location",get:function(){return this.viewModel.location},set:function(d){this.viewModel.location=d}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(d){this._overrideIfSome("label",
d)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(d){this.viewModel.promises=d}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},set:function(d){this.viewModel.selectedFeatureIndex=d}},{key:"selectedFeatureWidget",get:function(){const {_feature:d,visibleElements:E,headingLevel:D,_flowItems:M}=this,{selectedFeatureViewModel:Q}=this.viewModel,V={...E,title:!1};
if(!Q)return null;d?(d.viewModel=Q,d.visibleElements=V):this._feature=new h({flowItems:M,headingLevel:D+1,viewModel:Q,visibleElements:V});return this._feature}},{key:"title",get:function(){return this.viewModel.title},set:function(d){this.viewModel.title=d}},{key:"updateLocationEnabled",get:function(){return this.viewModel.updateLocationEnabled},set:function(d){this.viewModel.updateLocationEnabled=d}},{key:"view",get:function(){return this.viewModel.view},set:function(d){this.viewModel.view=d}},{key:"visible",
get:function(){return this.viewModel.visible},set:function(d){this.viewModel.visible=d}}]);return H}(z.FeatureContentMixin(n));k.__decorate([a.property({readOnly:!0})],f.prototype,"actionsMenuId",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"actionsMenuButtonId",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"featureMenuId",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"titleId",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"contentId",null);k.__decorate([a.property({readOnly:!0})],
f.prototype,"hasContent",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"featureNavigationVisible",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"collapsible",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"featureMenuVisible",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"contentCollapsed",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"dividedActions",null);k.__decorate([a.property({readOnly:!0,dependsOn:["_flowItems.length"]})],f.prototype,
"_activeFlowItemWidget",null);k.__decorate([a.property()],f.prototype,"actions",null);k.__decorate([a.property()],f.prototype,"actionsMenuOpen",null);k.__decorate([a.property()],f.prototype,"alignment",void 0);k.__decorate([a.property()],f.prototype,"autoCloseEnabled",null);k.__decorate([a.property()],f.prototype,"autoOpenEnabled",null);k.__decorate([a.property()],f.prototype,"defaultPopupTemplateEnabled",null);k.__decorate([a.property()],f.prototype,"content",null);k.__decorate([a.property()],f.prototype,
"collapsed",void 0);k.__decorate([a.property()],f.prototype,"collapseEnabled",void 0);k.__decorate([a.property({readOnly:!0})],f.prototype,"currentAlignment",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"currentDockPosition",null);k.__decorate([a.property()],f.prototype,"dockOptions",null);k.__decorate([a.property()],f.prototype,"dockEnabled",void 0);k.__decorate([a.property({readOnly:!0})],f.prototype,"featureCount",null);k.__decorate([a.property()],f.prototype,"featureMenuOpen",void 0);
k.__decorate([a.property()],f.prototype,"features",null);k.__decorate([a.property()],f.prototype,"goToOverride",null);k.__decorate([a.property()],f.prototype,"headingLevel",void 0);k.__decorate([a.property()],f.prototype,"highlightEnabled",null);k.__decorate([a.property()],f.prototype,"location",null);k.__decorate([a.property()],f.prototype,"label",null);k.__decorate([a.property()],f.prototype,"maxInlineActions",void 0);k.__decorate([a.property(),y.messageBundle("esri/widgets/Popup/t9n/Popup")],f.prototype,
"messages",void 0);k.__decorate([a.property(),y.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);k.__decorate([a.property()],f.prototype,"promises",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"selectedFeature",null);k.__decorate([a.property()],f.prototype,"selectedFeatureIndex",null);k.__decorate([a.property({readOnly:!0})],f.prototype,"selectedFeatureWidget",null);k.__decorate([a.property()],f.prototype,"spinnerEnabled",void 0);k.__decorate([a.property()],f.prototype,
"title",null);k.__decorate([a.property()],f.prototype,"updateLocationEnabled",null);k.__decorate([a.property()],f.prototype,"view",null);k.__decorate([a.property({type:w}),F.vmEvent(["triggerAction","trigger-action"])],f.prototype,"viewModel",void 0);k.__decorate([a.property()],f.prototype,"visible",null);k.__decorate([a.property()],f.prototype,"visibleElements",void 0);k.__decorate([p.cast("visibleElements")],f.prototype,"castVisibleElements",null);k.__decorate([q.accessibleHandler()],f.prototype,
"_close",null);k.__decorate([q.accessibleHandler()],f.prototype,"_toggleDockEnabled",null);k.__decorate([q.accessibleHandler()],f.prototype,"_toggleFeatureMenu",null);k.__decorate([q.accessibleHandler()],f.prototype,"_toggleActionsMenu",null);k.__decorate([q.accessibleHandler()],f.prototype,"_triggerAction",null);k.__decorate([q.accessibleHandler()],f.prototype,"_selectFeature",null);k.__decorate([q.accessibleHandler()],f.prototype,"_next",null);k.__decorate([q.accessibleHandler()],f.prototype,"_previous",
null);return f=k.__decorate([e.subclass("esri.widgets.Popup")],f)})},"esri/core/throttle":function(){define(["exports"],function(m){m.throttle=function(v,k,f,x){let A=null,B=1E3;"number"===typeof k?(B=k,x=f):(A=k??null,B=f);let C=0,G;const l=()=>{C=0;v.apply(x,G)};k=(...r)=>{A&&A.apply(x,r);G=r;B?C||(C=setTimeout(l,B)):l()};k.remove=()=>{C&&(clearTimeout(C),C=0)};k.forceUpdate=()=>{C&&(clearTimeout(C),l())};k.hasPendingUpdates=()=>!!C;return k};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/widgets/Feature":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../intl ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./Feature/FeatureAttachments ./Feature/FeatureContent ./Feature/FeatureExpression ./Feature/FeatureFields ./Feature/FeatureMedia ./Feature/FeatureRelationship ./Feature/FeatureViewModel ./Feature/resources ./Feature/support/FeatureContentMixin ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ../intl/substitute".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y){var F;const I={title:!0,content:!0,lastEditedInfo:!0};f=F=function(K){function N(P,J){P=K.call(this,P,J)||this;P._contentWidgets=[];P.flowItems=null;P.headingLevel=2;P.messages=null;P.messagesCommon=null;P.messagesURIUtils=null;P.visibleElements={...I};P.viewModel=new c;return P}v._inheritsLoose(N,K);var S=N.prototype;S.initialize=function(){this.addHandles(x.watch(()=>this.viewModel?.contentViewModels,()=>this._setupContentWidgets(),x.initial))};
S.loadDependencies=function(){return new Promise((P,J)=>m(["../chunks/calcite-notice"],P,J))};S.destroy=function(){this._destroyContentWidgets()};S.castVisibleElements=function(P){return{...I,...P}};S.render=function(){var {state:P}=this.viewModel;P=q.tsx("div",{class:n.CSS.container,key:"container"},this.renderTitle(),"error"===P?this.renderError():"loading"===P?this.renderLoading():this.renderContentContainer());return q.tsx("div",{class:this.classes(n.CSS.base,n.CSS.esriWidget)},P)};S.setActiveMedia=
function(P,J){return this.viewModel.setActiveMedia(P,J)};S.nextMedia=function(P){return this.viewModel.nextMedia(P)};S.previousMedia=function(P){return this.viewModel.previousMedia(P)};S.renderError=function(){const {messagesCommon:P,messages:J,visibleElements:L}=this;return q.tsx("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},L.title?q.tsx("div",{key:"error-title",slot:"title"},P.errorMessage):null,q.tsx("div",{key:"error-message",slot:"message"},J.loadingError))};
S.renderLoading=function(){return q.tsx("div",{key:"loading-container",class:n.CSS.loadingSpinnerContainer},q.tsx("span",{class:this.classes(n.CSS.iconLoading,n.CSS.spinner)}))};S.renderContentContainer=function(){const {visibleElements:P}=this;return P.content?q.tsx("div",{class:n.CSS.main},[this.renderContent(),this.renderLastEditInfo()]):null};S.renderTitle=function(){const {visibleElements:P,title:J}=this;return P.title?q.tsx(z.Heading,{level:this.headingLevel,class:n.CSS.title,innerHTML:J}):
null};S.renderContent=function(){var P=this.viewModel.content;return P?Array.isArray(P)?P.length?q.tsx("div",{class:n.CSS.contentNode,key:"content-content-elements"},P.map(this.renderContentElement,this)):null:"string"===typeof P?(P=this._contentWidgets[0],!P||P.destroyed?null:q.tsx("div",{class:n.CSS.contentNode,key:"content-content"},P.render())):this.renderNodeContent(P):null};S.renderContentElement=function(P,J){const {visibleElements:L}=this;if("boolean"!==typeof L.content&&!L.content[P.type])return null;
switch(P.type){case "attachments":return this.renderAttachments(J);case "custom":return this.renderCustom(P,J);case "fields":return this.renderFields(J);case "media":return this.renderMedia(J);case "text":return this.renderText(P,J);case "expression":return this.renderExpression(J);case "relationship":return this.renderRelationship(J);default:return null}};S.renderAttachments=function(P){const J=this._contentWidgets[P];if(!J||J.destroyed)return null;const {state:L,attachmentInfos:T}=J.viewModel;return"loading"===
L||0<T.length?q.tsx("div",{key:this._buildKey("attachments-element",P),class:this.classes(n.CSS.contentElement)},J.render()):null};S.renderRelationship=function(P){const J=this._contentWidgets[P];return J&&!J.destroyed&&this.flowItems?q.tsx("div",{key:this._buildKey("relationship-element",P),class:n.CSS.contentElement},J.render()):null};S.renderExpression=function(P){const J=this._contentWidgets[P];return!J||J.destroyed?null:q.tsx("div",{key:this._buildKey("expression-element",P),class:n.CSS.contentElement},
J.render())};S.renderCustom=function(P,J){({creator:P}=P);const L=this._contentWidgets[J];return!L||L.destroyed?null:P?q.tsx("div",{key:this._buildKey("custom-element",J),class:n.CSS.contentElement},L.render()):null};S.renderFields=function(P){const J=this._contentWidgets[P];return!J||J.destroyed?null:q.tsx("div",{key:this._buildKey("fields-element",P),class:n.CSS.contentElement},J.render())};S.renderMedia=function(P){const J=this._contentWidgets[P];return!J||J.destroyed?null:q.tsx("div",{key:this._buildKey("media-element",
P),class:n.CSS.contentElement},J.render())};S.renderLastEditInfo=function(){const {visibleElements:P,messages:J}=this;var {lastEditInfo:L}=this.viewModel;if(!L||!P.lastEditedInfo)return null;const {date:T,user:H}=L;L=y.substitute("edit"===L.type?H?J.lastEditedByUser:J.lastEdited:H?J.lastCreatedByUser:J.lastCreated,{date:T,user:H});return q.tsx("div",{key:"edit-info-element",class:this.classes(n.CSS.lastEditedInfo,n.CSS.contentElement)},L)};S.renderText=function(P,J){const L=this._contentWidgets[J];
return!L||L.destroyed?null:P.text?q.tsx("div",{key:this._buildKey("text-element",J),class:this.classes(n.CSS.contentElement,n.CSS.text)},L.render()):null};S._buildKey=function(P,...J){const L=this.get("viewModel.graphic.uid")||"0";J=J.join("-");return`${P}__${L}-${J}`};S._destroyContentWidget=function(P){P&&(P.viewModel=null,!P.destroyed&&P.destroy())};S._destroyContentWidgets=function(){this.removeHandles("relationship-handles");this._contentWidgets.forEach(P=>this._destroyContentWidget(P));this._contentWidgets=
[]};S._addFeatureRelationshipHandles=function(P){const {flowItems:J,visibleElements:L}=this;this.addHandles([x.on(()=>P,"select-record",({featureViewModel:T})=>{J&&(T.abilities={relationshipContent:!0},J.push(new F({flowItems:J,viewModel:T,visibleElements:L})))}),x.on(()=>P,"show-all-records",()=>{if(J){var {viewModel:T}=P;T.showAllEnabled=!0;T=new h({visibleElements:{title:!1,description:!1},viewModel:T});this._addFeatureRelationshipHandles(T);J.push(T)}})],"relationship-handles")};S._setupContentWidgets=
function(){this._destroyContentWidgets();const {headingLevel:P,visibleElements:J}=this;var L=this.get("viewModel.content");const {contentViewModels:T}=this.viewModel;Array.isArray(L)?L.forEach((H,u)=>{"attachments"===H.type&&(this._contentWidgets[u]=new r({displayType:H.displayType,headingLevel:J.title?P+1:P,viewModel:T[u]}));"fields"===H.type&&(this._contentWidgets[u]=new p({viewModel:T[u]}));"media"===H.type&&(this._contentWidgets[u]=new e({viewModel:T[u]}));"text"===H.type&&(this._contentWidgets[u]=
new a({viewModel:T[u]}));"custom"===H.type&&(this._contentWidgets[u]=new a({viewModel:T[u]}));"expression"===H.type&&(this._contentWidgets[u]=new b({viewModel:T[u]}));"relationship"===H.type&&(H=new h({viewModel:T[u]}),this._addFeatureRelationshipHandles(H),this._contentWidgets[u]=H)},this):(L=T[0])&&!L.destroyed&&(this._contentWidgets[0]=new a({viewModel:L}));this.scheduleRender()};v._createClass(N,[{key:"graphic",get:function(){return this.viewModel.graphic},set:function(P){this.viewModel.graphic=
P}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(P){this.viewModel.defaultPopupTemplateEnabled=P}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(P){this._overrideIfSome("label",P)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(P){this.viewModel.spatialReference=P}},{key:"title",get:function(){return this.viewModel.title}},{key:"map",get:function(){return this.viewModel.map},
set:function(P){this.viewModel.map=P}},{key:"view",get:function(){return this.viewModel.view},set:function(P){this.viewModel.view=P}}]);return N}(t.FeatureContentMixin(l));k.__decorate([A.property()],f.prototype,"graphic",null);k.__decorate([A.property()],f.prototype,"defaultPopupTemplateEnabled",null);k.__decorate([A.property()],f.prototype,"flowItems",void 0);k.__decorate([A.property()],f.prototype,"headingLevel",void 0);k.__decorate([A.property()],f.prototype,"label",null);k.__decorate([A.property(),
g.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);k.__decorate([A.property(),g.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);k.__decorate([A.property(),g.messageBundle("esri/widgets/support/t9n/uriUtils")],f.prototype,"messagesURIUtils",void 0);k.__decorate([A.property()],f.prototype,"spatialReference",null);k.__decorate([A.property({readOnly:!0})],f.prototype,"title",null);k.__decorate([A.property()],f.prototype,"visibleElements",void 0);
k.__decorate([C.cast("visibleElements")],f.prototype,"castVisibleElements",null);k.__decorate([A.property()],f.prototype,"map",null);k.__decorate([A.property()],f.prototype,"view",null);k.__decorate([A.property({type:c})],f.prototype,"viewModel",void 0);return f=F=k.__decorate([G.subclass("esri.widgets.Feature")],f)})},"esri/widgets/Feature/FeatureAttachments":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Attachments ../Widget ./FeatureAttachments/FeatureAttachmentsViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){x=function(p){function e(c,n){c=p.call(this,c,n)||this;c._featureElementInfo=null;c.attachmentsWidget=new C;c.headingLevel=2;c.viewModel=new l;return c}m._inheritsLoose(e,p);var h=e.prototype;h.initialize=function(){this._featureElementInfo=new r;this.addHandles([k.watch(()=>[this.viewModel?.description,this.viewModel?.title,this.headingLevel],()=>this._setupFeatureElementInfo(),k.initial),k.watch(()=>this.viewModel?.graphic,c=>this.attachmentsWidget.graphic=c,
k.initial)])};h.destroy=function(){this.attachmentsWidget.destroy();this._featureElementInfo.destroy()};h.render=function(){const {attachmentsWidget:c}=this;return b.tsx("div",{class:"esri-feature-attachments"},this._featureElementInfo?.render(),c?.render())};h._setupFeatureElementInfo=function(){const {description:c,title:n,headingLevel:t}=this;this._featureElementInfo.set({description:c,title:n,headingLevel:t})};m._createClass(e,[{key:"description",get:function(){return this.viewModel.description},
set:function(c){this.viewModel.description=c}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(c){this.attachmentsWidget.displayType=c}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(c){this.viewModel.graphic=c}},{key:"title",get:function(){return this.viewModel.title},set:function(c){this.viewModel.title=c}}]);return e}(G);v.__decorate([f.property({readOnly:!0})],x.prototype,"attachmentsWidget",void 0);v.__decorate([f.property()],
x.prototype,"description",null);v.__decorate([f.property()],x.prototype,"displayType",null);v.__decorate([f.property()],x.prototype,"graphic",null);v.__decorate([f.property()],x.prototype,"headingLevel",void 0);v.__decorate([f.property()],x.prototype,"title",null);v.__decorate([f.property({type:l})],x.prototype,"viewModel",void 0);return x=v.__decorate([B.subclass("esri.widgets.Feature.FeatureAttachments")],x)})},"esri/widgets/Attachments":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/Error ../core/maybe ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c){const n={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},t=window.CSS;G=function(z){function w(q,y){q=z.call(this,q,y)||this;q.displayType="auto";q.messages=null;q.messagesUnits=null;q.selectedFile=null;q.submitting=!1;q.viewModel=new b;q.visibleElements={...n};q._supportsImageOrientation=t&&t.supports&&t.supports("image-orientation","from-image");q._addAttachmentForm=
null;q._updateAttachmentForm=null;return q}v._inheritsLoose(w,z);var g=w.prototype;g.initialize=function(){this.addHandles([A.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),A.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),A.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),A.initial)])};g.loadDependencies=function(){return Promise.all([new Promise((q,y)=>m(["../chunks/calcite-icon"],q,y))])};g.castVisibleElements=function(q){return{...n,...q}};
g.addAttachment=function(){const {_addAttachmentForm:q,viewModel:y}=this;this._set("submitting",!0);this._set("error",null);return y.addAttachment(q).then(F=>{this._set("submitting",!1);this._set("error",null);y.mode="view";return F}).catch(F=>{this._set("submitting",!1);this._set("error",new f("attachments:add-attachment",this.messages.addErrorMessage,F));throw F;})};g.deleteAttachment=function(q){const {viewModel:y}=this;this._set("submitting",!0);this._set("error",null);return y.deleteAttachment(q).then(F=>
{this._set("submitting",!1);this._set("error",null);y.mode="view";return F}).catch(F=>{this._set("submitting",!1);this._set("error",new f("attachments:delete-attachment",this.messages.deleteErrorMessage,F));throw F;})};g.updateAttachment=function(){const {viewModel:q}=this,{_updateAttachmentForm:y}=this;this._set("submitting",!0);this._set("error",null);return q.updateAttachment(y).then(F=>{this._set("submitting",!1);this._set("error",null);q.mode="view";return F}).catch(F=>{this._set("submitting",
!1);this._set("error",new f("attachments:update-attachment",this.messages.updateErrorMessage,F));throw F;})};g.addFile=function(){const q=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);this.viewModel.mode="view";return q};g.updateFile=function(){const {viewModel:q}=this,y=q.updateFile(this.selectedFile,this._updateAttachmentForm,q.activeFileInfo);q.mode="view";return y};g.deleteFile=function(q){q=this.viewModel.deleteFile(q||this.viewModel.activeFileInfo.file);this.viewModel.mode=
"view";return q};g.render=function(){const {submitting:q,viewModel:y}=this,{state:F}=y;return c.tsx("div",{class:this.classes("esri-attachments","esri-widget")},q?this.renderProgressBar():null,"loading"===F?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())};g.renderErrorMessage=function(){const {error:q,visibleElements:y}=this;return q&&y.errorMessage?c.tsx("div",{key:"error-message",class:"esri-attachments__error-message"},q.message):null};g.renderAttachments=function(){const {activeFileInfo:q,
mode:y,activeAttachmentInfo:F}=this.viewModel;return"add"===y?this.renderAddForm():"edit"===y?this.renderDetailsForm(F||q):this.renderAttachmentContainer()};g.renderLoading=function(){return c.tsx("div",{class:"esri-attachments__loader-container",key:"loader"},c.tsx("div",{class:"esri-attachments__loader"}))};g.renderProgressBar=function(){return this.visibleElements.progressBar?c.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null};g.renderAddForm=function(){const {submitting:q,
selectedFile:y}=this;var F=q||!y,I=this.visibleElements.cancelAddButton?c.tsx("button",{type:"button",bind:this,disabled:q,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--tertiary","esri-button--small","esri-button--half",q&&"esri-button--disabled")},this.messages.cancel):null;F=this.visibleElements.addSubmitButton?c.tsx("button",{type:"submit",disabled:F,class:this.classes("esri-button","esri-button--secondary","esri-button--small","esri-button--half",{["esri-button--disabled"]:F})},
this.messages.add):null;const K=y?c.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},y.name):null;I=c.tsx("form",{bind:this,afterCreate:e.storeNode,afterRemoved:e.discardNode,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},c.tsx("fieldset",{class:"esri-attachments__file-fieldset"},K,c.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},y?this.messages.changeFile:this.messages.selectFile,c.tsx("input",{class:"esri-attachments__file-input",
type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),F,I);return c.tsx("div",{key:"add-form-container",class:"esri-attachments__form-node"},I)};g.renderDetailsForm=function(q){const {visibleElements:y,viewModel:F,selectedFile:I,submitting:K}=this;var {abilities:N}=F,S=K||!I;let P;if(I){var J=I.type;P=I.name;var L=I.size}else if("file"in q)J=q.file.type,P=q.file.name,L=q.file.size;else{J=q.contentType;P=q.name;L=q.size;var T=q.url}var H=N.editing&&N.operations.delete&&y.deleteButton?
c.tsx("button",{key:"delete-button",type:"button",disabled:K,bind:this,onclick:d=>this._submitDeleteAttachment(d,q),class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-attachments__delete-button",{["esri-button--disabled"]:K})},this.messages.delete):void 0;S=N.editing&&N.operations.update&&y.updateButton?c.tsx("button",{disabled:S,key:"update-button",type:"submit",class:this.classes("esri-button","esri-button--small","esri-button--third",{["esri-button--disabled"]:S})},
this.messages.update):void 0;const u=this.visibleElements.cancelUpdateButton?c.tsx("button",{disabled:K,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes("esri-button","esri-button--small","esri-button--tertiary","esri-button--third",{["esri-button--disabled"]:K})},this.messages.cancel):void 0;N=N.editing&&N.operations.update?c.tsx("fieldset",{key:"file",class:"esri-attachments__file-fieldset"},c.tsx("span",{key:"file-name",class:"esri-attachments__file-name"},
P),c.tsx("label",{class:this.classes("esri-attachments__file-label","esri-button","esri-button--secondary")},this.messages.changeFile,c.tsx("input",{class:"esri-attachments__file-input",type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0;L=c.tsx("fieldset",{key:"size",class:"esri-attachments__metadata-fieldset"},c.tsx("label",null,B.formatFileSize(this.messagesUnits,L)));J=c.tsx("fieldset",{key:"content-type",class:"esri-attachments__metadata-fieldset"},c.tsx("label",
null,J));T=x.isSome(T)?c.tsx("a",{class:"esri-attachments__item-link",href:T,rel:"noreferrer",target:"_blank"},this.renderImageMask(q,400),c.tsx("div",{class:"esri-attachments__item-link-overlay"},c.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},c.tsx("calcite-icon",{icon:"launch"})))):this.renderImageMask(q,400);H=c.tsx("form",{bind:this,afterCreate:e.storeNode,afterRemoved:e.discardNode,"data-node-ref":"_updateAttachmentForm",onsubmit:d=>this._submitUpdateAttachment(d,q)},c.tsx("div",
{class:"esri-attachments__metadata"},L,J),N,c.tsx("div",{class:"esri-attachments__actions"},H,u,S));return c.tsx("div",{key:"edit-form-container",class:"esri-attachments__form-node"},T,H)};g.renderImageMask=function(q,y){return"file"in q?this.renderGenericImageMask(q.file.name,q.file.type):this.renderImageMaskForAttachment(q,y)};g.renderGenericImageMask=function(q,y){var {supportsResizeAttachments:F}=this.viewModel;y=p.getIconPath(y);F={["esri-attachments__image--resizable"]:F};return c.tsx("div",
{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask")},c.tsx("img",{title:q,alt:q,src:y,class:this.classes(F,"esri-attachments__image")}))};g.renderImageMaskForAttachment=function(q,y){var {supportsResizeAttachments:F}=this.viewModel;const {contentType:I,name:K,url:N}=q;if(!F||!p.isSupportedImage(I))return this.renderGenericImageMask(K,I);q=(q=this._getCSSTransform(q))?{transform:q,"image-orientation":"none"}:{};y=`${N}${N.includes("?")?"\x26":"?"}w=${y}`;F={["esri-attachments__image--resizable"]:F};
return c.tsx("div",{class:this.classes("esri-attachments__item-mask")},c.tsx("img",{styles:q,alt:K,title:K,src:y,class:this.classes(F,"esri-attachments__image")}))};g.renderFile=function(q){const {file:y}=q;return c.tsx("li",{class:"esri-attachments__item",key:y},c.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(q),type:"button"},this.renderImageMask(q),
c.tsx("label",{class:"esri-attachments__label"},c.tsx("span",{class:"esri-attachments__filename"},y.name||this.messages.noTitle),c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",e.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}))))};g.renderAttachmentInfo=function({attachmentInfo:q,displayType:y}){const {viewModel:F,effectiveDisplayType:I}=this,{abilities:K,supportsResizeAttachments:N}=F,{contentType:S,name:P,url:J}=q;y=this.renderImageMask(q,
"list"===y?48:400);var L=K.editing?c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",e.isRTL(this.container)?"esri-icon-left":"esri-icon-right")}):null;L="preview"===I&&N&&p.isSupportedImage(S)?null:c.tsx("label",{class:"esri-attachments__label"},c.tsx("span",{class:"esri-attachments__filename"},P||this.messages.noTitle),L);y=[y,L];y=K.editing?c.tsx("button",{key:"details-button",bind:this,class:"esri-attachments__item-button",title:this.messages.attachmentDetails,
"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":q.id,onclick:()=>this._startEditAttachment(q),type:"button"},y):c.tsx("a",{key:"details-link",class:"esri-attachments__item-button",href:J,target:"_blank"},y);return c.tsx("li",{class:"esri-attachments__item",key:q},y)};g.renderAttachmentContainer=function(){const {effectiveDisplayType:q,viewModel:y,visibleElements:F}=this,{attachmentInfos:I,abilities:K,fileInfos:N}=y;var S=!!I?.length;const P=!!N?.length,J={["esri-attachments__container--list"]:"preview"!==
q,["esri-attachments__container--preview"]:"preview"===q},L=K.editing&&K.operations.add&&F.addButton?c.tsx("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes("esri-button","esri-button--tertiary","esri-attachments__add-attachment-button"),type:"button"},c.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon","esri-icon-plus")}),this.messages.add):void 0,T=S?c.tsx("ul",{key:"attachments-list",class:"esri-attachments__items"},I.toArray().map(u=>
this.renderAttachmentInfo({attachmentInfo:u,displayType:q}))):void 0,H=P?c.tsx("ul",{key:"file-list",class:"esri-attachments__items"},N.toArray().map(u=>this.renderFile(u))):void 0;S=P||S?void 0:c.tsx("div",{class:"esri-widget__content--empty"},this.messages.noAttachments);return c.tsx("div",{key:"attachments-container",class:this.classes("esri-attachments__container",J)},T,H,S,L)};g._modeChanged=function(){this._set("error",null);this._set("selectedFile",null)};g._handleFileInputChange=function(q){q=
(q=q.target)&&q.files&&q.files.item(0);this._set("selectedFile",q)};g._submitDeleteAttachment=function(q,y){q.preventDefault();"file"in y?this.deleteFile(y.file):this.deleteAttachment(y)};g._submitAddAttachment=function(q){q.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()};g._submitUpdateAttachment=function(q,y){q.preventDefault();"file"in y?this.updateFile():this.updateAttachment()};g._startEditAttachment=function(q){const {viewModel:y}=this;y.activeFileInfo=null;
y.activeAttachmentInfo=q;y.mode="edit"};g._startEditFile=function(q){const {viewModel:y}=this;y.activeAttachmentInfo=null;y.activeFileInfo=q;y.mode="edit"};g._startAddAttachment=function(){this.viewModel.mode="add"};g._cancelForm=function(q){q.preventDefault();this.viewModel.mode="view"};g._getCSSTransform=function(q){({orientationInfo:q}=q);return!this._supportsImageOrientation&&q?[q.rotation?`rotate(${q.rotation}deg)`:"",q.mirrored?"scaleX(-1)":""].join(" "):""};v._createClass(w,[{key:"abilities",
get:function(){return this.viewModel.abilities},set:function(q){this.viewModel.abilities=q}},{key:"effectiveDisplayType",get:function(){const {displayType:q}=this;return q&&"auto"!==q?q:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(q){this.viewModel.graphic=q}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(q){this._overrideIfSome("label",q)}}]);return w}(a);k.__decorate([C.property()],
G.prototype,"abilities",null);k.__decorate([C.property()],G.prototype,"displayType",void 0);k.__decorate([C.property({readOnly:!0})],G.prototype,"effectiveDisplayType",null);k.__decorate([C.property()],G.prototype,"graphic",null);k.__decorate([C.property()],G.prototype,"label",null);k.__decorate([C.property(),h.messageBundle("esri/widgets/Attachments/t9n/Attachments")],G.prototype,"messages",void 0);k.__decorate([C.property(),h.messageBundle("esri/core/t9n/Units")],G.prototype,"messagesUnits",void 0);
k.__decorate([C.property({readOnly:!0})],G.prototype,"selectedFile",void 0);k.__decorate([C.property({readOnly:!0})],G.prototype,"submitting",void 0);k.__decorate([C.property({readOnly:!0})],G.prototype,"error",void 0);k.__decorate([C.property({type:b})],G.prototype,"viewModel",void 0);k.__decorate([C.property()],G.prototype,"visibleElements",void 0);k.__decorate([l.cast("visibleElements")],G.prototype,"castVisibleElements",null);return G=k.__decorate([r.subclass("esri.widgets.Attachments")],G)})},
"esri/core/unitFormatUtils":function(){define("exports ./byteSizeEstimations ./Cyclical ./mathUtils ./maybe ./string ./unitUtils ../intl/number".split(" "),function(m,v,k,f,x,A,B,C){function G(e,h,c){return e.units[h][c]}function l(e,h,c,n=2,t="abbr"){return`${C.formatNumber(h,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:0<h?"never":"exceptZero"})} ${G(e,c,t)}`}function r(e,h,c,n=2,t="abbr"){return`${C.formatNumber(h,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:"exceptZero"})} ${G(e,
c,t)}`}function a(e,h){const c=JSON.stringify(h);let n=b.get(c);n||(n=new Intl.NumberFormat("en-US",h),b.set(c,n));return/\-?\+?360/.test(n.format(e))?0:e}const b=new Map,p=["B","kB","MB","GB","TB"];m.formatAngleDegrees=function(e,h,c,n,t){t=x.unwrapOr(t,2);var z=k.cyclicalDegrees,w=z.normalize;a:if(e=B.convertUnit(e,h,"degrees"),c===n)c=e;else{switch(n){case "arithmetic":c=-e+90;break a;case "geographic":c=-e-90;break a}c=void 0}z=w.call(z,c,0,!0);t={style:"unit",unitDisplay:"narrow",unit:"degree",
maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:0<z?"never":"exceptZero"};z=a(z,t);return C.formatNumber(z,t)};m.formatDMS=function(e,h,c=2){e=B.convertUnit(e,h,"degrees");h=e-Math.floor(e);e-=h;h*=60;let n=h-Math.floor(h);h-=n;n*=60;return`${e.toFixed()}\u00b0 ${h.toFixed()}' ${n.toFixed(c)}"`};m.formatDecimal=l;m.formatFileSize=function(e,h){let c=0===h?0:Math.floor(Math.log(h)/Math.log(v.ByteSizeUnit.KILOBYTES));c=f.clamp(c,0,p.length-1);h=C.formatNumber(h/v.ByteSizeUnit.KILOBYTES**
c,{maximumFractionDigits:2});return A.replace(e.units.bytes[p[c]],{fileSize:h})};m.formatImperialArea=function(e,h,c,n=2,t="abbr"){const z=B.preferredImperialAreaUnit(h,c);return l(e,B.convertUnit(h,c,z),z,n,t)};m.formatImperialLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredImperialLengthUnit(h,c);return l(e,B.convertUnit(h,c,z),z,n,t)};m.formatImperialRelativeLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredImperialLengthUnit(h,c);return r(e,B.convertUnit(h,c,z),z,n,t)};m.formatImperialRelativeVerticalLength=
function(e,h,c,n=2,t="abbr"){const z=B.preferredImperialVerticalLengthUnit(h,c);return r(e,B.convertUnit(h,c,z),z,n,t)};m.formatImperialVerticalLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredImperialVerticalLengthUnit(h,c);return l(e,B.convertUnit(h,c,z),z,n,t)};m.formatMetricArea=function(e,h,c,n=2,t="abbr"){const z=B.preferredMetricAreaUnit(h,c);return l(e,B.convertUnit(h,c,z),z,n,t)};m.formatMetricLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredMetricLengthUnit(h,c);return l(e,B.convertUnit(h,
c,z),z,n,t)};m.formatMetricRelativeLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredMetricLengthUnit(h,c);return r(e,B.convertUnit(h,c,z),z,n,t)};m.formatMetricRelativeVerticalLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredMetricVerticalLengthUnit(h,c);return r(e,B.convertUnit(h,c,z),z,n,t)};m.formatMetricVerticalLength=function(e,h,c,n=2,t="abbr"){const z=B.preferredMetricVerticalLengthUnit(h,c);return l(e,B.convertUnit(h,c,z),z,n,t)};m.formatRelativeAngleDegrees=function(e,h,c,n,t){c!==
n&&(e=-e);t=x.unwrapOr(t,2);c={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:"exceptZero"};e=B.convertUnit(e,h,"degrees")%360;e=a(e,c);return C.formatNumber(e,c)};m.formatRelativeDecimal=r;m.unitName=G;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(m){function v(x){return 32+x.length}function k(x){if(!x)return 0;if(Array.isArray(x)){var A=
x.length;if(0===A||"number"===typeof x[0])x=32+8*A;else{var B=32;for(let C=0;C<A;C++)B+=f(x[C]);x=B}return x}B=32;for(A in x)x.hasOwnProperty(A)&&(B+=f(x[A]));return B}function f(x){switch(typeof x){case "object":return k(x);case "string":return v(x);case "number":return 16;case "boolean":return 4;default:return 8}}m.ByteSizeUnit=void 0;(function(x){x[x.KILOBYTES=1024]="KILOBYTES";x[x.MEGABYTES=1048576]="MEGABYTES";x[x.GIGABYTES=1073741824]="GIGABYTES"})(m.ByteSizeUnit||(m.ByteSizeUnit={}));m.estimateAttributesObjectSize=
function(x){if(!x)return 0;let A=32;for(const B in x)if(x.hasOwnProperty(B)){const C=x[B];switch(typeof C){case "string":A+=v(C);break;case "number":A+=16;break;case "boolean":A+=4}}return A};m.estimateFixedArraySize=function(x,A){return 32+x.length*A};m.estimateNestedObjectSize=k;m.estimateNumberByteSize=function(x){return 16};m.estimateStringByteSize=v;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e){const h={editing:!1,operations:{add:!0,update:!0,delete:!0}},c=x.ofType(b);f=function(n){function t(w){var g=n.call(this,w)||this;g._getAttachmentsPromise=null;g._attachmentLayer=null;g.abilities={...h};g.activeAttachmentInfo=null;g.activeFileInfo=null;g.attachmentInfos=new c;g.fileInfos=new x;g.graphic=null;g.mode="view";g.filesEnabled=!1;g.addHandles(C.watch(()=>g.graphic,()=>g._graphicChanged(),C.initial));return g}m._inheritsLoose(t,n);var z=t.prototype;
z.destroy=function(){this.graphic=this._attachmentLayer=null};z.castAbilities=function(w){return{...h,...w}};z.getAttachments=function(){var w=m._asyncToGenerator(function*(){const {_attachmentLayer:g,attachmentInfos:q}=this;if(!g||"function"!==typeof g.queryAttachments)throw new A("invalid-layer","getAttachments(): A valid layer is required.");const y=this._getObjectId();var F=new p({objectIds:[y],returnMetadata:!0});const I=[];this._getAttachmentsPromise=F=g.queryAttachments(F).then(K=>K[y]||I).catch(()=>
I);this.notifyChange("state");F=yield F;q.removeAll();F.length&&q.addMany(F);this._getAttachmentsPromise=null;this.notifyChange("state");return F});return function(){return w.apply(this,arguments)}}();z.addAttachment=function(){var w=m._asyncToGenerator(function*(g,q=this.graphic){const {_attachmentLayer:y,attachmentInfos:F,abilities:I}=this;if(!q)throw new A("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:q});if(!g)throw new A("invalid-attachment","addAttachment(): An attachment is required.",
{attachment:g});if(!I.operations.add)throw new A("invalid-abilities","addAttachment(): add abilities are required.");if(!y||"function"!==typeof y.addAttachment)throw new A("invalid-layer","addAttachment(): A valid layer is required.");g=yield y.addAttachment(q,g).then(K=>this._queryAttachment(K.objectId,q));F.add(g);return g});return function(g){return w.apply(this,arguments)}}();z.deleteAttachment=function(){var w=m._asyncToGenerator(function*(g){const {_attachmentLayer:q,attachmentInfos:y,graphic:F,
abilities:I}=this;if(!g)throw new A("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:g});if(!I.operations.delete)throw new A("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!q||"function"!==typeof q.deleteAttachments)throw new A("invalid-layer","deleteAttachment(): A valid layer is required.");const K=yield q.deleteAttachments(F,[g.id]).then(()=>g);y.remove(K);return K});return function(g){return w.apply(this,arguments)}}();
z.updateAttachment=function(){var w=m._asyncToGenerator(function*(g,q=this.activeAttachmentInfo){const {_attachmentLayer:y,attachmentInfos:F,graphic:I,abilities:K}=this;if(!g)throw new A("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:g});if(!q)throw new A("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:q});if(!K.operations.update)throw new A("invalid-abilities","updateAttachment(): Update abilities are required.");const N=
F.findIndex(S=>S===q);if(!y||"function"!==typeof y.updateAttachment)throw new A("invalid-layer","updateAttachment(): A valid layer is required.");g=yield y.updateAttachment(I,q.id,g).then(S=>this._queryAttachment(S.objectId));F.splice(N,1,g);return g});return function(g){return w.apply(this,arguments)}}();z.commitFiles=function(){var w=m._asyncToGenerator(function*(){yield Promise.all(this.fileInfos.items.map(g=>this.addAttachment(g.form)));this.fileInfos.removeAll();return this.getAttachments()});
return function(){return w.apply(this,arguments)}}();z.addFile=function(w,g){if(!w||!g)return null;w={file:w,form:g};this.fileInfos.add(w);return w};z.updateFile=function(w,g,q=this.activeFileInfo){if(!w||!g||!q)return null;const y=this.fileInfos.findIndex(F=>q===F);-1<y&&this.fileInfos.splice(y,1,{file:w,form:g});return this.fileInfos.items[y]};z.deleteFile=function(w){const g=this.fileInfos.find(q=>q.file===w);return this.fileInfos.remove(g)??null};z._queryAttachment=function(){var w=m._asyncToGenerator(function*(g,
q){if(!g)throw new A("invalid-attachment-id","Could not query attachment.");const {_attachmentLayer:y}=this,F=this._getObjectId(q);g=new p({objectIds:[F],attachmentsWhere:`AttachmentId=${g}`,returnMetadata:!0});return y.queryAttachments(g).then(I=>I[F][0])});return function(g,q){return w.apply(this,arguments)}}();z._getObjectId=function(w=this.graphic){return w?.getObjectId()??null};z._graphicChanged=function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))};z._setAttachmentLayer=
function(){var {graphic:w}=this;this._attachmentLayer=(w=e.getSourceLayer(w))?"scene"===w.type&&B.isSome(w.associatedLayer)?w.associatedLayer:w:null};m._createClass(t,[{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var {graphic:w}=this;if(!w)return!1;w=w.layer||w.sourceLayer;return w?.loaded&&"capabilities"in w&&"operations"in w.capabilities&&"supportsResizeAttachments"in w.capabilities.operations&&
w.capabilities.operations.supportsResizeAttachments||!1}}]);return t}(f);v.__decorate([G.property()],f.prototype,"abilities",void 0);v.__decorate([r.cast("abilities")],f.prototype,"castAbilities",null);v.__decorate([G.property()],f.prototype,"activeAttachmentInfo",void 0);v.__decorate([G.property()],f.prototype,"activeFileInfo",void 0);v.__decorate([G.property({readOnly:!0,type:c})],f.prototype,"attachmentInfos",void 0);v.__decorate([G.property()],f.prototype,"fileInfos",void 0);v.__decorate([G.property({type:k})],
f.prototype,"graphic",void 0);v.__decorate([G.property()],f.prototype,"mode",void 0);v.__decorate([G.property({readOnly:!0})],f.prototype,"state",null);v.__decorate([G.property()],f.prototype,"filesEnabled",void 0);v.__decorate([G.property({readOnly:!0})],f.prototype,"supportsResizeAttachments",null);return f=v.__decorate([a.subclass("esri.widgets.Attachments.AttachmentsViewModel")],f)})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../intl ../../../core/Logger ../../../core/maybe ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../popup/support/FieldInfoFormat ../../../support/arcadeOnDemand".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){function a(){a=v._asyncToGenerator(function*(R,U){return"function"===typeof R?R.call(null,U):R});return a.apply(this,arguments)}function b(R){return R?V.test(R):!1}function p(R,U){if(!b(U)||!R)return null;const Y=U.replace(V,"").toLowerCase();let ca;R.some(ia=>ia.name.toLowerCase()===Y?(ca=ia,!0):!1);return ca}function e(R,U){return(U=h(U,R))?U.name:R}function h(R,U){return R&&"function"===typeof R.getField?R.getField(U):null}function c({formattedAttributes:R,template:U,
fieldInfoMap:Y}){return`${A.replace(A.replace(U,ca=>{const ia=Y.get(ca.toLowerCase());return`{${ia&&ia.fieldName||ca}}`}),R).replace(D,"")}`.trim()}function n(R,U,Y=!1){const ca=U[R];"string"===typeof ca&&(Y=(Y?encodeURIComponent(ca):ca).replace(Q,"%27"),U[R]=Y)}function t(R,U=!1){const Y={...R};Object.keys(Y).forEach(ca=>n(ca,Y,U));return Y}function z(R,U){return R.replace(M,(Y,ca,ia)=>(Y=h(U,ia))?`{${Y.name}}`:ca)}function w(R,U,Y){return(R=z(R,Y))?R.replace(fa,(ca,ia,la)=>{ia=`${ia||la}`.trim();
return A.replace(ca,t(U,ia&&"{"!==ia[0]))}):R}function g(R,U){var Y=U.fieldName,ca=q(U.fieldInfos,Y)?.clone();const ia=U.preventPlacesFormatting;U=U.layer;var la=h(U,Y);ca&&"date"===la?.type&&(la=ca.format||new l,la.dateFormat=la.dateFormat||"short-date-short-time",la.dateTimeFormatOptions=!U?.layer&&"feature"===U?.type&&U.datesInUnknownTimezone||U?.layer&&"map-image"===U.layer?.type&&U.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,ca.format=la);ca=ca&&ca.format;if("string"===typeof R&&G.isRasterPixelValueField(Y)&&
ca)return ca.formatRasterPixelValue(R);"string"!==typeof R||!ca||null!=ca.dateFormat||null==ca.places&&null==ca.digitSeparator||(Y=Number(R),isNaN(Y)||(R=Y));return"string"===typeof R||null==R||null==ca?I(R):ia?C.formatNumber(R,{...C.convertNumberFormatToIntlOptions(ca),minimumFractionDigits:0,maximumFractionDigits:20}):ca.format(R)}function q(R,U){if(R&&R.length&&U){var Y=U.toLowerCase(),ca=void 0;R.some(ia=>ia.fieldName&&ia.fieldName.toLowerCase()===Y?(ca=ia,!0):!1);return ca}}function y({fieldName:R,
graphic:U,layer:Y}){if(T(R)||!Y||"function"!==typeof Y.getFeatureType)return null;const {typeIdField:ca}=Y;return ca&&R===ca?(R=Y.getFeatureType(U))?R.name:null:null}function F({fieldName:R,value:U,graphic:Y,layer:ca}){return T(R)||!ca||"function"!==typeof ca.getFieldDomain?null:(R=ca.getFieldDomain(R,{feature:Y}))&&"coded-value"===R.type?R.getName(U):null}function I(R){return"string"===typeof R?R.replace(Z,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):R}function K(R){const {value:U,fieldName:Y,fieldInfos:ca,
fieldInfoMap:ia,layer:la,graphic:ka}=R;return null==U?"":(R=F({fieldName:Y,value:U,graphic:ka,layer:la}))||(R=y({fieldName:Y,graphic:ka,layer:la}))?R:ia.get(Y.toLowerCase())?g(U,{fieldInfos:ca||Array.from(ia.values()),fieldName:Y,layer:la}):(R=la&&la.fieldsIndex)&&R.isDateField(Y)?B.formatDate(U,da):I(U)}function N(R,U){return S.apply(this,arguments)}function S(){S=v._asyncToGenerator(function*(R,U){const {layer:Y,graphic:ca,outFields:ia,objectIds:la,returnGeometry:ka,spatialReference:ma}=R;R=la[0];
if("number"!==typeof R&&"string"!==typeof R)return E.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",{layer:Y,graphic:ca,objectId:R,requiredFields:ia}),null;if(!Y.capabilities?.operations?.supportsQuery)return E.warn("The specified layer cannot be queried. The following fields will not be available.",{layer:Y,graphic:ca,requiredFields:ia,returnGeometry:ka}),null;R=Y.createQuery();R.objectIds=la;R.outFields=ia?.length?ia:[Y.objectIdField];R.returnGeometry=
!!ka;R.returnZ=!!ka;R.returnM=!!ka;R.outSpatialReference=ma;return(yield Y.queryFeatures(R,U)).features[0]});return S.apply(this,arguments)}function P(R){return J.apply(this,arguments)}function J(){J=v._asyncToGenerator(function*(R){if(!R.expressionInfos?.length)return!1;var U=yield r.loadArcade();({arcadeUtils:{hasGeometryFunctions:U}}=U);return U(R)});return J.apply(this,arguments)}function L(){L=v._asyncToGenerator(function*({graphic:R,popupTemplate:U,layer:Y,spatialReference:ca},ia){if(Y&&U&&
("function"===typeof Y.load&&(yield Y.load(ia)),R.attributes)){var la=R.attributes[Y.objectIdField];if(null!=la){la=[la];var ka=yield U.getRequiredFields(Y.fieldsIndex),ma=G.featureHasFields(ka,R);ka=ma?[]:ka;U=U.returnGeometry||(yield P(U));if(!ma||U)if(Y=yield N({layer:Y,graphic:R,outFields:ka,objectIds:la,returnGeometry:U,spatialReference:ca},ia))Y.geometry&&(R.geometry=Y.geometry),Y.attributes&&(R.attributes={...R.attributes,...Y.attributes})}}});return L.apply(this,arguments)}function T(R=""){return R?
R.includes("relationships/"):!1}function H({attributes:R,graphic:U,relatedInfo:Y,fieldInfos:ca,fieldInfoMap:ia,layer:la}){R&&U&&Y&&Object.keys(U.attributes).forEach(ka=>{var ma=(ma={layerId:Y.relation.id.toString(),fieldName:ka},`${"relationships/"}${ma.layerId}/${ma.fieldName}`);R[ma]=K({fieldName:ma,fieldInfos:ca,fieldInfoMap:ia,layer:la,value:U.attributes[ka],graphic:U})})}function u({attributes:R,relatedInfo:U,fieldInfoMap:Y,fieldInfos:ca,layer:ia}){R&&U&&(U.relatedFeatures&&U.relatedFeatures&&
U.relatedFeatures.forEach(la=>H({attributes:R,graphic:la,relatedInfo:U,fieldInfoMap:Y,fieldInfos:ca,layer:ia})),U.relatedStatsFeatures&&U.relatedStatsFeatures&&U.relatedStatsFeatures.forEach(la=>H({attributes:R,graphic:la,relatedInfo:U,fieldInfoMap:Y,fieldInfos:ca,layer:ia})))}function d(R,U,Y){return R.find(ca=>ca!==U&&"feature"===ca.type&&ca.url===U.url&&ca.layerId===Y.relatedTableId)}const E=f.getLogger("esri.widgets.Feature.support.featureUtils"),D=/href=(""|'')/gi,M=/(\{([^\{\r\n]+)\})/g,Q=/'/g,
V=/^\s*expression\//i,Z=/(\n)/gi,ba=/[\u00A0-\u9999<>&]/gim,fa=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,ea=/^(?:mailto:|tel:)/,da=B.convertDateFormatToIntlOptions("short-date-short-time"),O=R=>{if(!R)return!1;R=R.toUpperCase();return R.includes("CURRENT_TIMESTAMP")||R.includes("CURRENT_DATE")||R.includes("CURRENT_TIME")},W=({layer:R,method:U,query:Y,definitionExpression:ca})=>{R.capabilities?.query?.supportsCacheHint&&"attachments"!==U&&(R=x.isSome(Y.where)&&Y.where,U=x.isSome(Y.geometry)&&Y.geometry,
O(ca)||O(R)||"extent"===U?.type||"tile"===Y.resultType||(Y.cacheHint=!0))};m.applyTextFormattingHTML=I;m.createfieldInfoMap=function(R,U){const Y=new Map;R&&R.forEach(ca=>{const ia=e(ca.fieldName,U);ca.fieldName=ia;Y.set(ia.toLowerCase(),ca)});return Y};m.findRelatedLayer=function(R,U,Y){return R&&U&&Y?d(R.allLayers,U,Y)||d(R.allTables,U,Y):null};m.fixTokens=z;m.formatAttributes=function({fieldInfos:R,attributes:U,layer:Y,graphic:ca,fieldInfoMap:ia,relatedInfos:la}){const ka={};la?.forEach(ma=>u({attributes:ka,
relatedInfo:ma,fieldInfoMap:ia,fieldInfos:R,layer:Y}));Object.keys(U).forEach(ma=>{ka[ma]=K({fieldName:ma,fieldInfos:R,fieldInfoMap:ia,layer:Y,value:U[ma],graphic:ca})});return ka};m.formatEditInfo=function(R,U){const {creatorField:Y,creationDateField:ca,editorField:ia,editDateField:la}=R;if(U){R=U[la];if("number"===typeof R)return U=U[ia],{type:"edit",date:B.formatDate(R,da),user:U};R=U[ca];return"number"===typeof R?(U=U[Y],{type:"create",date:B.formatDate(R,da),user:U}):null}};m.formatValueToFieldInfo=
g;m.getAllFieldInfos=function(R){const U=[];if(!R)return U;const {fieldInfos:Y,content:ca}=R;Y&&U.push(...Y);if(!ca||!Array.isArray(ca))return U;ca.forEach(ia=>{"fields"===ia.type&&(ia=ia&&ia.fieldInfos)&&U.push(...ia)});return U};m.getFieldInfo=q;m.getFieldInfoLabel=function(R,U){return(U=p(U,R?.fieldName))?U.title||null:R?R.label||R.fieldName:null};m.getFixedFieldName=e;m.getFixedFieldNames=function(R,U){return R&&R.map(Y=>e(Y,U))};m.getSourceLayer=function(R){if(!x.isNone(R))return R.get("sourceLayer")||
R.get("layer")};m.graphicCallback=function(R,U){return a.apply(this,arguments)};m.htmlEntities=function(R){return R.replace(ba,U=>`&#${U.charCodeAt(0)};`)};m.isExpressionField=b;m.isRelatedField=T;m.preLayerQueryCallback=({query:R,layer:U,method:Y})=>{W({layer:U,method:Y,query:R,definitionExpression:`${U.definitionExpression} ${U.serviceDefinitionExpression}`})};m.preRequestCallback=({queryPayload:R,layer:U,method:Y})=>{W({layer:U,method:Y,query:R,definitionExpression:`${U.definitionExpression} ${U.serviceDefinitionExpression}`})};
m.queryUpdatedFeature=function(R,U){return L.apply(this,arguments)};m.shouldOpenInNewTab=function(R=""){if(R)return!ea.test(R.trim().toLowerCase())};m.substituteAttributes=c;m.substituteFieldsInLinksAndAttributes=function({attributes:R,globalAttributes:U,layer:Y,text:ca,expressionAttributes:ia,fieldInfoMap:la}){return ca?c({formattedAttributes:U,template:w(ca,{...U,...ia,...R},Y),fieldInfoMap:la}):""};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports",
"../../../assets"],function(m,v){m.getIconPath=function(k){const f=v.getAssetUrl("esri/themes/base/images/files/");return k?"text/plain"===k?`${f}text-32.svg`:"application/pdf"===k?`${f}pdf-32.svg`:"text/csv"===k?`${f}csv-32.svg`:"application/gpx+xml"===k?`${f}gpx-32.svg`:"application/x-dwf"===k?`${f}cad-32.svg`:"application/postscript"===k||"application/json"===k||"text/xml"===k||"model/vrml"===k?`${f}code-32.svg`:"application/x-zip-compressed"===k||"application/x-7z-compressed"===k||"application/x-gzip"===
k||"application/x-tar"===k||"application/x-gtar"===k||"application/x-bzip2"===k||"application/gzip"===k||"application/x-compress"===k||"application/x-apple-diskimage"===k||"application/x-rar-compressed"===k||"application/zip"===k?`${f}zip-32.svg`:k.includes("image/")?`${f}image-32.svg`:k.includes("audio/")?`${f}sound-32.svg`:k.includes("video/")?`${f}video-32.svg`:k.includes("msexcel")||k.includes("ms-excel")||k.includes("spreadsheetml")?`${f}excel-32.svg`:k.includes("msword")||k.includes("ms-word")||
k.includes("wordprocessingml")?`${f}word-32.svg`:k.includes("powerpoint")||k.includes("presentationml")?`${f}report-32.svg`:`${f}generic-32.svg`:`${f}generic-32.svg`};m.isSupportedImage=function(k){k=k.toLowerCase();return"image/bmp"===k||"image/emf"===k||"image/exif"===k||"image/gif"===k||"image/x-icon"===k||"image/jpeg"===k||"image/png"===k||"image/tiff"===k||"image/x-wmf"===k};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureAttachments/FeatureAttachmentsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Attachments/AttachmentsViewModel".split(" "),
function(m,v,k,f,x,A,B){f=function(C){function G(l){l=C.call(this,l)||this;l.description=null;l.title=null;return l}m._inheritsLoose(G,C);return G}(B);v.__decorate([k.property()],f.prototype,"description",void 0);v.__decorate([k.property()],f.prototype,"title",void 0);return f=v.__decorate([A.subclass("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],f)})},"esri/widgets/Feature/support/FeatureElementInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../Widget ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l){f=function(r){function a(p,e){p=r.call(this,p,e)||this;p.description=null;p.headingLevel=2;p.title=null;return p}m._inheritsLoose(a,r);var b=a.prototype;b.render=function(){return l.tsx("div",{class:"esri-feature-element-info"},this.renderTitle(),this.renderDescription())};b.renderTitle=function(){const {title:p}=this;return p?l.tsx(C.Heading,{level:this.headingLevel,class:"esri-feature-element-info__title"},p):null};b.renderDescription=function(){const {description:p}=
this;return p?l.tsx("div",{key:"description",class:"esri-feature-element-info__description"},p):null};return a}(B);v.__decorate([k.property()],f.prototype,"description",void 0);v.__decorate([k.property()],f.prototype,"headingLevel",void 0);v.__decorate([k.property()],f.prototype,"title",void 0);return f=v.__decorate([A.subclass("esri.widgets.Feature.support.FeatureElementInfo")],f)})},"esri/widgets/support/Heading":function(){define(["exports","../../core/mathUtils","./widgetUtils","./jsxFactory"],
function(m,v,k,f){const x={heading:"esri-widget__heading"};m.CSS=x;m.Heading=function(A,B){const C=v.clamp(Math.ceil(A.level),1,6),G=`h${C}`;delete A.level;return f.tsx(G,{...A,class:k.classes(x.heading,A.class),role:"heading","aria-level":String(C)},B)};m.incrementHeadingLevel=function(A,B=1){return v.clamp(Math.ceil(A+B),1,6)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent/FeatureContentViewModel ./support/featureUtils ../support/widget ../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){f=function(a){function b(e,h){e=a.call(this,e,h)||this;e.viewModel=null;e._addTargetToAnchors=c=>{Array.from(c.querySelectorAll("a")).forEach(n=>{G.shouldOpenInNewTab(n.href)&&!n.hasAttribute("target")&&n.setAttribute("target","_blank")})};return e}m._inheritsLoose(b,a);var p=b.prototype;p.renderLoading=function(){return r.tsx("div",{class:"esri-feature-content__loader-container",key:"loader"},r.tsx("div",{class:"esri-feature-content__loader"}))};p.renderCreated=function(){const e=
this.viewModel?.created;return e?e instanceof HTMLElement?r.tsx("div",{key:e,bind:e,afterCreate:this._attachToNode}):l.isWidget(e)?r.tsx("div",{key:e},!e.destroyed&&e.render()):r.tsx("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null};p.render=function(){return r.tsx("div",{class:"esri-feature-content"},"loading"===this.viewModel?.state?this.renderLoading():this.renderCreated())};p._attachToNode=function(e){e.appendChild(this)};m._createClass(b,[{key:"creator",get:function(){return this.viewModel.creator},
set:function(e){this.viewModel.creator=e}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}}]);return b}(B);v.__decorate([k.property()],f.prototype,"creator",null);v.__decorate([k.property()],f.prototype,"graphic",null);v.__decorate([k.property({type:C})],f.prototype,"viewModel",void 0);return f=v.__decorate([A.subclass("esri.widgets.Feature.FeatureContent")],f)})},"esri/widgets/Feature/FeatureContent/FeatureContentViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../support/featureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){f=function(a){function b(e){var h=a.call(this,e)||this;h._loadingPromise=null;h.created=null;h.creator=null;h.destroyer=null;h.graphic=null;h.handles.add(A.watch(()=>h.creator,c=>{h._destroyContent();h._createContent(c)},A.initial));return h}m._inheritsLoose(b,a);var p=b.prototype;p.destroy=function(){this._destroyContent()};p._destroyContent=function(){const {created:e,graphic:h,destroyer:c}=this;e&&(r.graphicCallback(c,{graphic:h}).catch(()=>null),this._set("created",
null))};p._createContent=function(){var e=m._asyncToGenerator(function*(h){var {graphic:c}=this;this._loadingPromise=h=r.graphicCallback(h,{graphic:c}).catch(()=>null);this.notifyChange("state");c=yield h;h===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",c))});return function(h){return e.apply(this,arguments)}}();m._createClass(b,[{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}}]);return b}(x.HandleOwnerMixin(f));v.__decorate([B.property({readOnly:!0})],
f.prototype,"created",void 0);v.__decorate([B.property()],f.prototype,"creator",void 0);v.__decorate([B.property()],f.prototype,"destroyer",void 0);v.__decorate([B.property({type:k})],f.prototype,"graphic",void 0);v.__decorate([B.property({readOnly:!0})],f.prototype,"state",null);return f=v.__decorate([l.subclass("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],f)})},"esri/widgets/Feature/FeatureExpression":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureContent ./FeatureFields ./FeatureMedia ./FeatureExpression/FeatureExpressionViewModel ../support/widgetUtils ../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){x=function(e){function h(n,t){n=e.call(this,n,t)||this;n.viewModel=new a;return n}m._inheritsLoose(h,e);var c=h.prototype;c.initialize=function(){this.addHandles(k.watch(()=>this.viewModel?.contentElementViewModel,()=>this._setupExpressionWidget(),k.initial))};c.destroy=function(){this._destroyContentWidget()};c.renderLoading=function(){return p.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},p.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating",
"esri-feature__loading-spinner")}))};c.render=function(){const {state:n}=this.viewModel;return p.tsx("div",{class:"esri-feature-expression"},"loading"===n?this.renderLoading():"disabled"===n?null:this._contentWidget?.render())};c._destroyContentWidget=function(){const {_contentWidget:n}=this;n&&(n.viewModel=null,n.destroy());this._contentWidget=null};c._setupExpressionWidget=function(){const {contentElementViewModel:n,contentElement:t}=this.viewModel,z=t?.type;this._destroyContentWidget();this._contentWidget=
n?"fields"===z?new l({viewModel:n}):"media"===z?new r({viewModel:n}):"text"===z?new G({viewModel:n}):null:null;this.scheduleRender()};return h}(C);v.__decorate([f.property({type:a})],x.prototype,"viewModel",void 0);return x=v.__decorate([B.subclass("esri.widgets.Feature.FeatureExpression")],x)})},"esri/widgets/Feature/FeatureFields":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureFields/FeatureFieldsViewModel ./support/FeatureElementInfo ../support/uriUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){x=function(e){function h(n,t){n=e.call(this,n,t)||this;n._featureElementInfo=null;n.viewModel=new G;n.messages=null;n.messagesURIUtils=null;return n}m._inheritsLoose(h,e);var c=h.prototype;c.initialize=function(){this._featureElementInfo=new l;this.addHandles(k.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),k.initial))};c.destroy=function(){this._featureElementInfo.destroy()};c.renderFieldInfo=function(n,t){var {attributes:z}=
this.viewModel;const w=n.fieldName,g=n.label||w;z=z?null==z[w]?"":z[w]:"";n=!(!n.format||!n.format.dateFormat);z="number"!==typeof z||n?r.autoLink(this.messagesURIUtils,z):this._forceLTR(z);n={["esri-feature-fields__field-data--date"]:n};return p.tsx("tr",{key:`fields-element-info-row-${w}-${t}`},p.tsx("th",{key:`fields-element-info-row-header-${w}-${t}`,class:"esri-feature-fields__field-header",innerHTML:g}),p.tsx("td",{key:`fields-element-info-row-data-${w}-${t}`,class:this.classes("esri-feature-fields__field-data",
n),innerHTML:z}))};c.renderFields=function(){const {formattedFieldInfos:n}=this.viewModel;return n?.length?p.tsx("table",{class:"esri-widget__table",summary:this.messages.fieldsSummary},p.tsx("tbody",null,n.map((t,z)=>this.renderFieldInfo(t,z)))):null};c.render=function(){return p.tsx("div",{class:"esri-feature-fields"},this._featureElementInfo?.render(),this.renderFields())};c._setupFeatureElementInfo=function(){const {description:n,title:t}=this;this._featureElementInfo.set({description:n,title:t})};
c._forceLTR=function(n){return`&lrm;${n}`};m._createClass(h,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(n){this.viewModel.attributes=n}},{key:"description",get:function(){return this.viewModel.description},set:function(n){this.viewModel.description=n}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(n){this.viewModel.expressionInfos=n}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(n){this.viewModel.fieldInfos=
n}},{key:"title",get:function(){return this.viewModel.title},set:function(n){this.viewModel.title=n}}]);return h}(C);v.__decorate([f.property()],x.prototype,"attributes",null);v.__decorate([f.property()],x.prototype,"description",null);v.__decorate([f.property()],x.prototype,"expressionInfos",null);v.__decorate([f.property()],x.prototype,"fieldInfos",null);v.__decorate([f.property()],x.prototype,"title",null);v.__decorate([f.property({type:G,nonNullable:!0})],x.prototype,"viewModel",void 0);v.__decorate([f.property(),
b.messageBundle("esri/widgets/Feature/t9n/Feature")],x.prototype,"messages",void 0);v.__decorate([f.property(),b.messageBundle("esri/widgets/support/t9n/uriUtils")],x.prototype,"messagesURIUtils",void 0);return x=v.__decorate([B.subclass("esri.widgets.Feature.FeatureFields")],x)})},"esri/widgets/Feature/FeatureFields/FeatureFieldsViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/ExpressionInfo ../../../popup/FieldInfo ../support/featureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l){k=function(r){function a(b){b=r.call(this,b)||this;b.attributes=null;b.expressionInfos=null;b.description=null;b.fieldInfos=null;b.title=null;return b}m._inheritsLoose(a,r);m._createClass(a,[{key:"formattedFieldInfos",get:function(){const {expressionInfos:b,fieldInfos:p}=this,e=[];p?.forEach(h=>{if(!h.hasOwnProperty("visible")||h.visible)h=h.clone(),h.label=l.getFieldInfoLabel(h,b),e.push(h)});return e}}]);return a}(k);v.__decorate([f.property()],k.prototype,"attributes",
void 0);v.__decorate([f.property({type:[C]})],k.prototype,"expressionInfos",void 0);v.__decorate([f.property()],k.prototype,"description",void 0);v.__decorate([f.property({type:[G]})],k.prototype,"fieldInfos",void 0);v.__decorate([f.property({readOnly:!0})],k.prototype,"formattedFieldInfos",null);v.__decorate([f.property()],k.prototype,"title",void 0);return k=v.__decorate([B.subclass("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],k)})},"esri/widgets/support/uriUtils":function(){define(["exports",
"../../core/string"],function(m,v){function k(x){let A=null;f.some(B=>{B.pattern.test(x)&&(A=B);return!!A});return A}const f=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",
appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];m.autoLink=function(x,A){if("string"!==typeof A||!A)return A;const B=k(A);if(!B)return A;const C=A.match(B.pattern);
x=v.replace(v.replace(B.label,{messages:x,hierPart:C&&C[2]}),{appName:B.appName});return A.replace(B.pattern,`<a${B.target?` target="${B.target}"`:""} href="$1"${"_blank"===B.target?' rel\x3d"noreferrer"':""}>${x}</a>`)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/events ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../renderers/support/utils ../Widget ./FeatureMedia/FeatureMediaViewModel ./support/FeatureElementInfo ./support/featureUtils ../support/chartUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../support/themeUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n){A=function(t){function z(g,q){var y=t.call(this,g,q)||this;y._refreshTimer=null;y._refreshIntervalInfo=null;y._featureElementInfo=null;y.viewModel=new r;y.messages=null;y._getChartDependencies=function(){var F=m._asyncToGenerator(function*(I){const K=yield p.loadChartsModule(),{destroyed:N,viewModel:S}=m._assertThisInitialized(y);if(!N&&S&&I){var {activeMediaInfo:P}=S,J=yield y._getRendererColors(K);y._renderChart({chartDiv:I,mediaInfo:P,chartsModule:K,
colorMap:J})}});return function(I){return F.apply(this,arguments)}}();return y}m._inheritsLoose(z,t);var w=z.prototype;w.initialize=function(){this._featureElementInfo=new a;this.addHandles([f.watch(()=>[this.viewModel?.activeMediaInfo,this.viewModel?.activeMediaInfoIndex],()=>this._setupMediaRefreshTimer(),f.initial),f.watch(()=>[this.viewModel?.description,this.viewModel?.title],()=>this._setupFeatureElementInfo(),f.initial)])};w.destroy=function(){this._clearMediaRefreshTimer();this._featureElementInfo.destroy()};
w.render=function(){return c.tsx("div",{bind:this,class:"esri-feature-media",onkeyup:this._handleMediaKeyup},this._featureElementInfo?.render(),this.renderMedia())};w.renderMedia=function(){const {formattedMediaInfoCount:g}=this.viewModel;return g?c.tsx("div",{key:"media-element-container",class:"esri-feature-media__container"},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null};w.renderImageMediaInfo=function(g){var {_refreshIntervalInfo:q}=this;
const {activeMediaInfoIndex:y,formattedMediaInfoCount:F}=this.viewModel,{value:I,refreshInterval:K,altText:N,title:S,type:P}=g,{sourceURL:J,linkURL:L}=I;g=b.shouldOpenInNewTab(L)?"_blank":"_self";const T="_blank"===g?"noreferrer":"";q=K?q:null;q=c.tsx("img",{alt:N||S,key:`media-${P}-${y}-${F}-${q?q.timestamp:0}`,src:q?q.sourceURL:J});return(g=L?c.tsx("a",{title:S,href:L,rel:T,target:g},q):null)?g:q};w.renderChartMediaInfo=function(g){const {activeMediaInfoIndex:q,formattedMediaInfoCount:y}=this.viewModel;
return c.tsx("div",{key:`media-${g.type}-${q}-${y}`,bind:this,class:"esri-feature-media__chart",afterCreate:this._getChartDependencies})};w.renderMediaInfoType=function(){const {activeMediaInfo:g}=this.viewModel;return g?"image"===g.type?this.renderImageMediaInfo(g):g.type.includes("chart")?this.renderChartMediaInfo(g):null:null};w.renderMediaInfo=function(){var {activeMediaInfo:g}=this.viewModel;if(!g)return null;const q=g.title?c.tsx("div",{key:"media-title",class:"esri-feature-media__item-title",
innerHTML:g.title}):null;g=g.caption?c.tsx("div",{key:"media-caption",class:"esri-feature-media__item-caption",innerHTML:g.caption}):null;return c.tsx("div",{key:"media-container",class:"esri-feature-media__item-container"},c.tsx("div",{key:"media-item-container",class:"esri-feature-media__item"},this.renderMediaInfoType()),q,g)};w.renderMediaPageButton=function(g){if(2>this.viewModel.formattedMediaInfoCount)return null;const q=(g="previous"===g)?this.messages.previous:this.messages.next,y=g?this.classes("esri-feature-media__button",
"esri-feature-media__previous"):this.classes("esri-feature-media__button","esri-feature-media__next"),F=g?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon","esri-icon-left-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon","esri-icon-right-triangle-arrow"),I=g?this.classes("esri-feature-media__icon","esri-feature-media__previous-icon--rtl","esri-icon-right-triangle-arrow"):this.classes("esri-feature-media__icon","esri-feature-media__next-icon--rtl",
"esri-icon-left-triangle-arrow");return c.tsx("button",{type:"button",key:g?"media-previous":"media-next",title:q,"aria-label":q,tabIndex:0,class:y,bind:this,onclick:g?this._previous:this._next},c.tsx("span",{"aria-hidden":"true",class:F}),c.tsx("span",{"aria-hidden":"true",class:I}))};w._setupFeatureElementInfo=function(){const {description:g,title:q}=this;this._featureElementInfo.set({description:g,title:q})};w._next=function(){this.viewModel.next()};w._previous=function(){this.viewModel.previous()};
w._getRendererColors=function(){var g=m._asyncToGenerator(function*(q){const {am4core:y}=q,F=new Map;q=this.viewModel?.layer?.renderer;if(!q)return F;const I=yield G.getColorsFromRenderer(q);I.delete("default");if(!Array.from(I.values()).every(K=>1===K?.length))return F;F.set("default-line-value",y.color({r:50,g:50,b:50,a:1}));Array.from(I.keys()).forEach(K=>{K&&F.set(K,y.color(I.get(K)[0].toCss(!0)))});return F});return function(q){return g.apply(this,arguments)}}();w._handleMediaKeyup=function(g){const q=
k.eventKey(g);"ArrowLeft"===q&&(g.stopPropagation(),this.viewModel.previous());"ArrowRight"===q&&(g.stopPropagation(),this.viewModel.next())};w._renderChart=function(g){const {abilities:q}=this.viewModel,{chartsModule:y,chartDiv:F,mediaInfo:I,colorMap:K}=g,{value:N,type:S}=I,{am4core:P}=y,J=p.getColorSet(P);n.isDarkTheme()&&P.useTheme(y.am4themes_dark);const L=window.matchMedia("(prefers-reduced-motion: reduce)");q.chartAnimation&&!L.matches?P.useTheme(y.am4themes_animated):P.unuseTheme(y.am4themes_animated);
P.useTheme(function(T){T instanceof P.ColorSet&&J&&(T.list=J)});g="pie-chart"===S?this._createPieChart(g):this._createXYChart(g);F.setAttribute("aria-label",I.altText||I.title);g.data=N.series.map(T=>({tooltip:T.tooltip,value:T.value,color:K.get(T.fieldName)})).filter(T=>"pie-chart"===S?0<T.value:!0)};w._customizeChartTooltip=function(g,q){g.label.wrap=!0;g.label.maxWidth=200;g.autoTextColor=!1;g.getFillFromObject=!1;g.label.fill=q.color("#ffffff");g.background.fill=q.color({r:0,g:0,b:0,a:.7})};w._createPieChart=
function(g){const {chartDiv:q,chartsModule:y}=g,{am4core:F,am4charts:I}=y;g=F.create(q,I.PieChart);g.rtl=e.isRTL(this.container);const K=g.series.push(new I.PieSeries);K.labels.template.disabled=!0;K.ticks.template.disabled=!0;K.dataFields.value="value";K.dataFields.category="tooltip";this._customizeChartTooltip(K.tooltip,F);K.slices.template.propertyFields.fill="color";K.slices.template.propertyFields.stroke="color";return g};w._getMinSeriesValue=function(g){let q=0;g.forEach(y=>q=Math.min(y.value,
q));return q};w._createColumnChart=function(g,q){const {chartsModule:y,mediaInfo:F}=q;({value:q}=F);const {am4core:I,am4charts:K}=y,N=g.xAxes.push(new K.CategoryAxis);N.dataFields.category="tooltip";N.renderer.labels.template.disabled=!0;this._customizeChartTooltip(N.tooltip,I);N.tooltip.events.on("sizechanged",()=>{N.tooltip.dy=-N.tooltip.contentHeight});var S=g.yAxes.push(new K.ValueAxis);const P=S.renderer.labels.template;S.renderer.minLabelPosition=.05;S.renderer.maxLabelPosition=.95;S.min=this._getMinSeriesValue(q.series);
this._customizeChartTooltip(S.tooltip,I);P.wrap=!0;S=g.series.push(new K.ColumnSeries);S.dataFields.valueY="value";S.dataFields.categoryX="tooltip";S.columns.template.propertyFields.fill="color";S.columns.template.propertyFields.stroke="color";g.cursor=new K.XYCursor;15<q.series.length&&(g.scrollbarX=new I.Scrollbar)};w._createBarChart=function(g,q){const {chartsModule:y,mediaInfo:F}=q;({value:q}=F);const {am4core:I,am4charts:K}=y,N=g.yAxes.push(new K.CategoryAxis);N.dataFields.category="tooltip";
N.renderer.inversed=!0;N.renderer.labels.template.disabled=!0;this._customizeChartTooltip(N.tooltip,I);N.tooltip.events.on("sizechanged",()=>{N.tooltip.dx=N.tooltip.contentWidth});var S=g.xAxes.push(new K.ValueAxis);const P=S.renderer.labels.template;S.renderer.minLabelPosition=.05;S.renderer.maxLabelPosition=.95;S.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(S.tooltip,I);P.wrap=!0;S=g.series.push(new K.ColumnSeries);S.dataFields.valueX="value";S.dataFields.categoryY="tooltip";
S.columns.template.propertyFields.fill="color";S.columns.template.propertyFields.stroke="color";g.cursor=new K.XYCursor;15<q.series.length&&(g.scrollbarY=new I.Scrollbar)};w._createLineChart=function(g,q){const {chartsModule:y,mediaInfo:F,colorMap:I}=q;({value:q}=F);const {am4core:K,am4charts:N}=y,S=g.xAxes.push(new N.CategoryAxis);S.dataFields.category="tooltip";S.renderer.labels.template.disabled=!0;this._customizeChartTooltip(S.tooltip,K);S.tooltip.events.on("sizechanged",()=>{S.tooltip.dy=-S.tooltip.contentHeight});
var P=g.yAxes.push(new N.ValueAxis),J=P.renderer.labels.template;P.renderer.minLabelPosition=.05;P.renderer.maxLabelPosition=.95;P.min=this._getMinSeriesValue(q.series);this._customizeChartTooltip(P.tooltip,K);J.wrap=!0;P=g.series.push(new N.LineSeries);P.dataFields.categoryX="tooltip";P.dataFields.valueY="value";P.strokeWidth=1;if(J=I.get("default-line-value"))P.stroke=J;P=P.bullets.push(new N.CircleBullet);P.propertyFields.fill="color";P.propertyFields.stroke="color";g.cursor=new N.XYCursor;15<
q.series.length&&(g.scrollbarX=new K.Scrollbar)};w._createXYChart=function(g){const {chartDiv:q,chartsModule:y,mediaInfo:F}=g,{type:I}=F,{am4core:K,am4charts:N}=y,S=K.create(q,N.XYChart);S.rtl=e.isRTL(this.container);"column-chart"===I&&this._createColumnChart(S,g);"bar-chart"===I&&this._createBarChart(S,g);"line-chart"===I&&this._createLineChart(S,g);return S};w._clearMediaRefreshTimer=function(){const {_refreshTimer:g}=this;g&&(clearTimeout(g),this._refreshTimer=null)};w._updateMediaInfoTimestamp=
function(g){const q=Date.now();this._refreshIntervalInfo={timestamp:q,sourceURL:this._getImageSource(g,q)};this.scheduleRender()};w._setupMediaRefreshTimer=function(){this._clearMediaRefreshTimer();const {activeMediaInfo:g}=this.viewModel;g&&"image"===g.type&&g.refreshInterval&&this._setRefreshTimeout(g)};w._setRefreshTimeout=function(g){const {refreshInterval:q,value:y}=g;q&&(g=6E4*q,this._updateMediaInfoTimestamp(y.sourceURL),this._refreshTimer=setInterval(()=>{this._updateMediaInfoTimestamp(y.sourceURL)},
g))};w._getImageSource=function(g,q){const y=g.includes("?")?"\x26":"?",[F,I=""]=g.split("#");return`${F}${y}timestamp=${q}${I?"#":""}${I}`};m._createClass(z,[{key:"attributes",get:function(){return this.viewModel.attributes},set:function(g){this.viewModel.attributes=g}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(g){this.viewModel.activeMediaInfoIndex=g}},{key:"description",get:function(){return this.viewModel.description},set:function(g){this.viewModel.description=
g}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(g){this.viewModel.fieldInfoMap=g}},{key:"layer",get:function(){return this.viewModel.layer},set:function(g){this.viewModel.layer=g}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(g){this.viewModel.mediaInfos=g}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(g){this.viewModel.popupTemplate=g}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},
set:function(g){this.viewModel.relatedInfos=g}},{key:"title",get:function(){return this.viewModel.title},set:function(g){this.viewModel.title=g}}]);return z}(l);v.__decorate([x.property()],A.prototype,"attributes",null);v.__decorate([x.property()],A.prototype,"activeMediaInfoIndex",null);v.__decorate([x.property()],A.prototype,"description",null);v.__decorate([x.property()],A.prototype,"fieldInfoMap",null);v.__decorate([x.property()],A.prototype,"layer",null);v.__decorate([x.property()],A.prototype,
"mediaInfos",null);v.__decorate([x.property()],A.prototype,"popupTemplate",null);v.__decorate([x.property()],A.prototype,"relatedInfos",null);v.__decorate([x.property()],A.prototype,"title",null);v.__decorate([x.property({type:r})],A.prototype,"viewModel",void 0);v.__decorate([x.property(),h.messageBundle("esri/widgets/Feature/t9n/Feature")],A.prototype,"messages",void 0);return A=v.__decorate([C.subclass("esri.widgets.Feature.FeatureMedia")],A)})},"esri/renderers/support/utils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/arrayUtils ../../core/Logger ../../core/MapUtils ../../core/maybe ../../intl/date ./numberUtils ../visualVariables/support/ColorStop ../../symbols/support/utils ../../widgets/Legend/support/colorRampUtils ../../widgets/Legend/support/heatmapRampUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a){function b(g,q,y){return p.apply(this,arguments)}function p(){p=v._asyncToGenerator(function*(g,q,y){x.getOrCreateMapValue(g,q,()=>[]).push(...y)});return p.apply(this,arguments)}function e(){e=v._asyncToGenerator(function*(g){const q=new Map;if(!g)return q;if("visualVariables"in g&&g.visualVariables){var y=g.visualVariables.filter(I=>"color"===I.type);for(var F of y)y=(yield r.getRampStops(F)).map(I=>I.color),yield b(q,F.field||F.valueExpression,y)}if("heatmap"===
g.type)F=a.getHeatmapRampStops(g).map(I=>I.color),yield b(q,g.field||g.valueExpression,F);else if("pie-chart"===g.type){for(const I of g.attributes)yield b(q,I.field||I.valueExpression,[I.color]);yield b(q,"default",[g?.othersCategory?.color,l.getColorFromSymbol(g.backgroundFillSymbol,null)])}else if("dot-density"===g.type){for(const I of g.attributes)yield b(q,I.field||I.valueExpression,[I.color]);yield b(q,"default",[g.backgroundColor])}else if("unique-value"===g.type)if("predominance"===g.authoringInfo?.type)for(const I of g.uniqueValueInfos??
[])yield b(q,I.value.toString(),[l.getColorFromSymbol(I.symbol,null)]);else{F=(g.uniqueValueInfos??[]).map(P=>l.getColorFromSymbol(P.symbol,null));const {field:I,field2:K,field3:N,valueExpression:S}=g;if(I||S)yield b(q,I||S,F);K&&(yield b(q,K,F));N&&(yield b(q,N,F))}else if("class-breaks"===g.type){F=g.classBreakInfos.map(N=>l.getColorFromSymbol(N.symbol,null));const {field:I,valueExpression:K}=g;yield b(q,I??K,F)}else"simple"===g.type&&(yield b(q,"default",[l.getColorFromSymbol(g.symbol,null)]));
"defaultSymbol"in g&&g.defaultSymbol&&(yield b(q,"default",[l.getColorFromSymbol(g.defaultSymbol,null)]));q.forEach((I,K)=>{I=k.unique(I.filter(Boolean),(N,S)=>JSON.stringify(N)===JSON.stringify(S));q.set(K,I)});return q});return e.apply(this,arguments)}function h(g){let q=g.minValue,y=g.maxValue;const F=g.isFirstBreak?"":t.gt+" ";g="percent-of-total"===g.normalizationType?t.pct:"";q=null==q?"":C.format(q);y=null==y?"":C.format(y);return F+q+g+" "+t.ld+" "+y+g}function c(g,q){return"normalizationField"in
g&&g.normalizationField?{type:"normalized-field",field:g.field,normalizationField:g.normalizationField}:"field"in g&&g.field?{type:"field",field:g.field}:"valueExpression"in g&&g.valueExpression?{type:"expression",expression:g.valueExpression,title:g.valueExpressionTitle,returnType:q}:null}const n=f.getLogger("esri.renderers.support.utils"),t={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},z={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},w={millisecond:"long-month-day-year-long-time",
second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};f=B.convertDateFormatToIntlOptions("short-date");m.calculateDateFormatInterval=function(g){g=g.map(K=>new Date(K));const q=g.length;let y=Infinity,F=null;for(let K=0;K<q-1;K++){const N=g[K];let S=Infinity,P=null;for(let J=K+1;J<q;J++){var I=g[J];I=N.getFullYear()!==I.getFullYear()&&"year"||N.getMonth()!==I.getMonth()&&
"month"||N.getDate()!==I.getDate()&&"day"||N.getHours()!==I.getHours()&&"hour"||N.getMinutes()!==I.getMinutes()&&"minute"||N.getSeconds()!==I.getSeconds()&&"second"||"millisecond";const L=z[I];L<S&&(S=L,P=I)}S<y&&(y=S,F=P)}return F};m.createClassBreakLabel=h;m.createColorStops=function(g){const {values:q,colors:y,labelIndexes:F,isDate:I,dateFormatOptions:K}=g;return q.map((N,S)=>{var P=null;if(!F||F.includes(S)){let J;if(J=I?B.formatDate(N,K):C.format(N))P="",0===S?P=t.lt+" ":S===q.length-1&&(P=t.gt+
" "),P+=J}return new G({value:N,color:y[S],label:P})})};m.createUniqueValueLabel=function(g){const {value:q,domain:y,fieldInfo:F,dateFormatInterval:I}=g;g=String(q);const K=y&&"codedValues"in y&&y.codedValues?y.getName(q):null;K?g=K:"number"===typeof q&&(g=F&&"date"===F.type?B.formatDate(q,I&&B.convertDateFormatToIntlOptions(w[I])):C.format(q));return g};m.getAttribute=c;m.getAttributes=function(g,q){const y=[];if("class-breaks"===g.type||"heatmap"===g.type)y.push(c(g,"number"));else if("unique-value"===
g.type){var F=g.authoringInfo;if(F&&"relationship"===F.type){if(F.field1&&F.field2){var I=F.field2.field;const K=F.field2.normalizationField;y.push(c({field:F.field1.field,normalizationField:F.field1.normalizationField}));y.push(c({field:I,normalizationField:K}))}}else I=g.uniqueValueInfos?.[0],F=null,I&&I.value&&(I=typeof g.uniqueValueInfos[0].value,"string"===I||"number"===I)&&(F=I),y.push(c(g,F)),[g.field2,g.field3].forEach(K=>K&&y.push({type:"field",field:K}))}else"attributes"in g&&g.attributes?.forEach(K=>
y.push(c(K,"number")));(g=q?q(g):"visualVariables"in g?g.visualVariables:null)&&g.forEach(K=>y.push(c(K,"number")));return k.unique(y.filter(A.isSome),(K,N)=>"field"===K.type&&"field"===N.type?K.field===N.field:"normalized-field"===K.type&&"normalized-field"===N.type?K.field===N.field&&K.normalizationField===N.normalizationField:"expression"===K.type&&"expression"===N.type?K.expression===N.expression:!1)};m.getColorsFromRenderer=function(g){return e.apply(this,arguments)};m.setLabelsForClassBreaks=
function(g){const q=g.classBreakInfos,y=g.normalizationType;let F=[];if(q&&q.length)if("standard-deviation"===g.classificationMethod)n.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(g.round){F.push(q[0].minValue);for(const I of q)F.push(I.maxValue);F=C.round(F);q.forEach((I,K)=>{I.label=h({minValue:0===K?F[0]:F[K],maxValue:F[K+1],isFirstBreak:0===K,normalizationType:y})})}else q.forEach((I,K)=>{I.label=h({minValue:I.minValue,
maxValue:I.maxValue,isFirstBreak:0===K,normalizationType:y})})};m.timelineDateFormatOptions=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/renderers/support/numberUtils":function(){define(["exports","../../intl","../../intl/number"],function(m,v,k){function f(r,a){return r-a}function x(r,a){let b;b=Number(r.toFixed(a));b<r?r=b+1/10**a:(r=b,b-=1/10**a);b=Number(b.toFixed(a));r=Number(r.toFixed(a));return[b,r]}function A(r,a,b,p,e){r=C(r,a,b,p);a=
null==r.next||r.next<=e;return(null==r.previous||r.previous<=e)&&a||r.previous+r.next<=2*e}function B(r){r=String(r);var a=r.match(G);if(a&&a[1])return{integer:a[1].split("").length,fractional:a[3]?a[3].split("").length:0};if(r.toLowerCase().includes("e")&&(a=r.split("e"),r=a[0],a=a[1],r&&a)){r=Number(r);a=Number(a);const b=0<a;b||(a=Math.abs(a));r=B(r);b?(r.integer+=a,r.fractional=a>r.fractional?0:r.fractional-a):(r.fractional+=a,r.integer=a>r.integer?1:r.integer-a);return r}return{integer:0,fractional:0}}
function C(r,a,b,p){const e={previous:null,next:null};if(null!=b){const h=r-b;e.previous=Math.floor(Math.abs(100*(a-b-h)/h))}null!=p&&(r=p-r,e.next=Math.floor(Math.abs(100*(p-a-r)/r)));return e}const G=/^-?(\d+)(\.(\d+))?$/i,l={maximumFractionDigits:20};m.format=function(r){return k.formatNumber(r,l)};m.numDigits=B;m.percentChange=C;m.round=function(r,a={}){r=r.slice(0);const {tolerance:b=2,strictBounds:p=!1,indexes:e=r.map((c,n)=>n)}=a;e.sort(f);for(a=0;a<e.length;a++){const c=e[a],n=r[c],t=0===
c?null:r[c-1],z=c===r.length-1?null:r[c+1],w=B(n).fractional;if(w){let g=0,q=!1;for(var h=void 0;g<=w&&!q;)h=x(n,g),h=p&&0===a?h[1]:h[0],q=A(n,h,t,z,b),g++;q&&(r[c]=h)}}return r};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/utils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/maybe ../../core/screenUtils ../../chunks/vec3f64 ../../layers/effects/jsonUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){function p(J){J=J.symbolLayers;if(!J)return null;let L=null;J.forEach(T=>{if("object"!==T.type||null==T.resource?.href)L="water"===T.type?C.unwrap(T.color):C.isSome(T.material)?C.unwrap(T.material.color):null});return L?new f(L):null}function e(J,L){if(null==L||null==J)return J;J=J.toRgba();J[3]*=L;return new f(J)}function h(J,L,T){if(J=J.symbolLayers){var H=u=>{u=C.isSome(u)?u:null;L=L??u??(null!=T?P:null);return e(L,T)};J.forEach(u=>{if("object"!==u.type||null==
u.resource?.href||L)if("water"===u.type)u.color=H(u.color);else{var d=C.isSome(u.material)?u.material.color:null;d=H(d);C.isNone(u.material)?u.material=new b.Symbol3DMaterial({color:d}):u.material.color=d;null!=T&&"outline"in u&&C.isSome(u.outline)&&C.isSome(u.outline.color)&&(u.outline.color=e(u.outline.color,T))}})}}function c(J,L){return n.apply(this,arguments)}function n(){n=k._asyncToGenerator(function*(J,L){(J=J.symbolLayers)&&(yield A.forEach(J,function(){var T=k._asyncToGenerator(function*(H){return t(H,
L)});return function(H){return T.apply(this,arguments)}}()))});return n.apply(this,arguments)}function t(J,L){return z.apply(this,arguments)}function z(){z=k._asyncToGenerator(function*(J,L){switch(J.type){case "extrude":J.size="number"===typeof L[2]?L[2]:0;break;case "icon":case "line":case "text":L=w(L);C.isSome(L)&&(J.size=L);break;case "path":const T=y(L,l.ONES,[J.width,void 0,J.height]);J.width=K(L[0],J.width,1,T);J.height=K(L[2],J.height,1,T);break;case "object":yield g(J,L)}});return z.apply(this,
arguments)}function w(J){for(const L of J)if("number"===typeof L)return L;return null}function g(J,L){return q.apply(this,arguments)}function q(){q=k._asyncToGenerator(function*(J,L){const {resourceSize:T,symbolSize:H}=yield F(J),u=y(L,T,H);J.width=K(L[0],H[0],T[0],u);J.depth=K(L[1],H[1],T[1],u);J.height=K(L[2],H[2],T[2],u)});return q.apply(this,arguments)}function y(J,L,T){for(let H=0;3>H;H++){const u=J[H];switch(u){case "symbol-value":return J=T[H],null!=J?J/L[H]:1;case "proportional":break;default:if(u&&
L[H])return u/L[H]}}return 1}function F(J){return I.apply(this,arguments)}function I(){I=k._asyncToGenerator(function*(J){const L=yield(yield new Promise((D,M)=>m(["./symbolLayerUtils"],D,M))).computeObjectLayerResourceSize(J,10),{width:T,height:H,depth:u}=J;J=[T,u,H];let d=1;for(var E=0;3>E;E++){const D=J[E];if(null!=D){d=D/L[E];break}}for(E=0;3>E;E++)null==J[E]&&(J[E]=L[E]*d);return{resourceSize:L,symbolSize:J}});return I.apply(this,arguments)}function K(J,L,T,H){switch(J){case "proportional":return T*
H;case "symbol-value":return null!=L?L:T;default:return J}}function N(){N=k._asyncToGenerator(function*(J,L){if(J&&L){if(x.isSymbol3D(J))return c(J,L);if(x.isSymbol2D(J)&&(L=w(L),!C.isNone(L)))switch(J.type){case "simple-marker":J.size=L;break;case "picture-marker":const T=J.width/J.height;1<T?(J.width=L,J.height=L*T):(J.width=L*T,J.height=L);break;case "simple-line":J.width=L;break;case "text":J.font.size=L}}});return N.apply(this,arguments)}const S=/\/resource\/(.*?)\.svg$/,P=new f("white");v.applyColorToSymbol=
function(J,L,T){if(J&&(L||null!=T))if(L&&(L=new f(L)),x.isSymbol3D(J))h(J,L,T);else if(x.isSymbol2D(J)){if(L=L??J.color)J.color=e(L,T);null!=T&&"outline"in J&&J.outline&&J.outline.color&&(J.outline.color=e(J.outline.color,T))}};v.applyOpacityToColor=e;v.applyRotationToSymbol=function(J,L,T){J&&null!=L&&(x.isSymbol3D(J)?(J=J.symbolLayers)&&J.forEach(H=>{if(H&&"object"===H.type)switch(T){case "tilt":H.tilt=L;break;case "roll":H.roll=L;break;default:H.heading=L}}):!x.isSymbol2D(J)||"simple-marker"!==
J.type&&"picture-marker"!==J.type&&"text"!==J.type||(J.angle=L))};v.applySizesToSymbol=function(J,L){return N.apply(this,arguments)};v.getCSSFilterFromEffectList=function(J){if(!J)return null;J=J.effects.filter(L=>"bloom"!==L.type).map(L=>L.toJSON());return r.effectFunctionsFromJSON(J)};v.getColorFromSymbol=function(J,L){if(!J)return null;let T=null;x.isSymbol3D(J)?T=p(J):x.isSymbol2D(J)&&(T=J.color?new f(J.color):null);return T?e(T,L):null};v.getIconHref=function(J,L){L=C.unwrapOrThrow(L.resource).href;
return!B("esri-canvas-svg-support")&&J.styleOrigin&&S.test(L)?L.replace(S,"/resource/png/$1.png"):L};v.getSymbolOutlineSize=function(J){if(!J)return 0;if(x.isSymbol3D(J)){{const L=J.symbolLayers&&J.symbolLayers.length;L?(J=J.symbolLayers.getItemAt(L-1),J="outline"in J?C.get(J,"outline","size"):void 0):J=void 0}return C.isSome(J)?J:0}return G.px2pt(a.getStroke(J)?.width)};v.isVolumetricSymbol=function(J){if(C.isNone(J)||!("symbolLayers"in J)||C.isNone(J.symbolLayers))return!1;switch(J.type){case "point-3d":return J.symbolLayers.some(L=>
"object"===L.type);case "line-3d":return J.symbolLayers.some(L=>"path"===L.type);case "polygon-3d":return J.symbolLayers.some(L=>"object"===L.type||"extrude"===L.type);default:return!1}};v.symbolHasExtrudeSymbolLayer=function(J){return C.isSome(J)&&"polygon-3d"===J.type&&J.symbolLayers.some(L=>"extrude"===L.type)};Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/ItemCache ../../core/screenUtils ./cimSymbolUtils".split(" "),
function(m,v,k,f,x,A,B){function C(r){if(!r)return null;let a=null;switch(r.type){case "simple-fill":case "picture-fill":case "simple-marker":a=C(r.outline);break;case "simple-line":const b=A.pt2px(r.width);null!=r.style&&"none"!==r.style&&0!==b&&(a={color:r.color,style:l(r.style),width:b,cap:r.cap,join:"miter"===r.join?A.pt2px(r.miterLimit):r.join});break;default:a=null}return a}const G=new x(1E3),l=(()=>{const r={};return a=>{if(r[a])return r[a];const b=a.replace(/-/g,"");return r[a]=b}})();k=new k([128,
128,128]);m.defaultThematicColor=k;m.dekebabifyLineStyle=l;m.getFill=function(r){const a=r.style;let b=null;if(r)switch(r.type){case "simple-marker":"cross"!==a&&"x"!==a&&(b=r.color);break;case "simple-fill":"solid"===a?b=r.color:"none"!==a&&(b={type:"pattern",x:0,y:0,src:v.getAssetUrl(`esri/symbols/patterns/${a}.png`),width:5,height:5});break;case "picture-fill":b={type:"pattern",src:r.url,width:A.pt2px(r.width)*r.xscale,height:A.pt2px(r.height)*r.yscale,x:A.pt2px(r.xoffset),y:A.pt2px(r.yoffset)};
break;case "text":b=r.color;break;case "cim":b=B.getCIMSymbolColor(r)}return b};m.getPatternUrlWithColor=function(r,a){const b=r+"-"+a;return void 0!==G.get(b)?Promise.resolve(G.get(b)):f(r,{responseType:"image"}).then(p=>{p=p.data;const e=p.naturalWidth,h=p.naturalHeight,c=document.createElement("canvas");c.width=e;c.height=h;const n=c.getContext("2d");n.fillStyle=a;n.fillRect(0,0,e,h);n.globalCompositeOperation="destination-in";n.drawImage(p,0,0);p=c.toDataURL();G.put(b,p);return p})};m.getStroke=
C;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(m){return function(){function v(f,x){this._storage=new m.MemCacheStorage;this._storage.maxSize=f;x&&this._storage.registerRemoveFunc("",x)}var k=v.prototype;k.put=function(f,x){this._storage.put(f,x,1,1)};k.pop=function(f){return this._storage.pop(f)};k.get=function(f){return this._storage.get(f)};k.clear=function(){this._storage.clearAll()};
k.destroy=function(){this._storage.destroy()};return v}()})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(m,v,k){function f(a){a=k.toCIMSymbolJSON(a);if("CIMTextSymbol"===a?.type)return a.height??0;let b=0;if(a?.symbolLayers)for(const p of a.symbolLayers)k.isCIMMarker(p)&&null!=p.size&&p.size>b?b=p.size:k.isCIMStroke(p)&&null!=p.width&&p.width>b?b=p.width:k.isCIMFill(p);return b}function x(a,b,p,e){if(a)if("CIMTextSymbol"===a.type)null!=
a.height&&(a.height*=b);else{if(p&&a.effects)for(const h of a.effects)C(h,b);if(a.symbolLayers)for(const h of a.symbolLayers)switch(h.type){case "CIMPictureMarker":case "CIMVectorMarker":A(h,b,e);break;case "CIMPictureStroke":case "CIMSolidStroke":!e?.preserveOutlineWidth&&h.width&&(h.width*=b);break;case "CIMPictureFill":h.height&&(h.height*=b);h.offsetX&&(h.offsetX*=b);h.offsetY&&(h.offsetY*=b);break;case "CIMHatchFill":x(h.lineSymbol,b,!0,{...e,preserveOutlineWidth:!1}),h.offsetX&&(h.offsetX*=
b),h.offsetY&&(h.offsetY*=b),h.separation&&(h.separation*=b)}}}function A(a,b,p){if(a&&(a.markerPlacement&&B(a.markerPlacement,b),a.offsetX&&(a.offsetX*=b),a.offsetY&&(a.offsetY*=b),a.anchorPoint&&"Absolute"===a.anchorPointUnits&&(a.anchorPoint={x:a.anchorPoint.x*b,y:a.anchorPoint.y*b}),a.size=null!=a.size?a.size*b:0,"CIMVectorMarker"===a.type&&a.markerGraphics))for(const e of a.markerGraphics)a.scaleSymbolsProportionally||x(e.symbol,b,!0,p)}function B(a,b){k.isCIMMarkerStrokePlacement(a)&&a.offset&&
(a.offset*=b);switch(a.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":a.customEndingOffset&&(a.customEndingOffset*=b);a.offsetAlongLine&&(a.offsetAlongLine*=b);if(a.placementTemplate&&a.placementTemplate.length){var p=a.placementTemplate.map(e=>e*b);a.placementTemplate=p}break;case "CIMMarkerPlacementAlongLineVariableSize":a.maxRandomOffset&&(a.maxRandomOffset*=b);a.placementTemplate&&a.placementTemplate.length&&(p=a.placementTemplate.map(e=>e*b),a.placementTemplate=
p);break;case "CIMMarkerPlacementOnLine":a.startPointOffset&&(a.startPointOffset*=b);break;case "CIMMarkerPlacementAtExtremities":a.offsetAlongLine&&(a.offsetAlongLine*=b);break;case "CIMMarkerPlacementAtRatioPositions":a.beginPosition&&(a.beginPosition*=b);a.endPosition&&(a.endPosition*=b);break;case "CIMMarkerPlacementPolygonCenter":a.offsetX&&(a.offsetX*=b);a.offsetY&&(a.offsetY*=b);break;case "CIMMarkerPlacementInsidePolygon":a.offsetX&&(a.offsetX*=b),a.offsetY&&(a.offsetY*=b),a.stepX&&(a.stepX*=
b),a.stepY&&(a.stepY*=b)}}function C(a,b){switch(a.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":a.width&&(a.width*=b);break;case "CIMGeometricEffectBuffer":a.size&&(a.size*=b);break;case "CIMGeometricEffectCut":a.beginCut&&(a.beginCut*=b);a.endCut&&(a.endCut*=b);a.middleCut&&(a.middleCut*=b);break;case "CIMGeometricEffectDashes":a.customEndingOffset&&(a.customEndingOffset*=b);a.offsetAlongLine&&(a.offsetAlongLine*=b);if(a.dashTemplate&&a.dashTemplate.length){const p=a.dashTemplate.map(e=>
e*b);a.dashTemplate=p}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":a.length&&(a.length*=b);break;case "CIMGeometricEffectMove":a.offsetX&&(a.offsetX*=b);a.offsetY&&(a.offsetY*=b);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":a.offset&&(a.offset*=b);break;case "CIMGeometricEffectRegularPolygon":a.radius&&(a.radius*=b);break;case "CIMGeometricEffectTaperedPolygon":a.fromWidth&&(a.fromWidth*=b);a.length&&(a.length*=
b);a.toWidth&&(a.toWidth*=b);break;case "CIMGeometricEffectWave":a.amplitude&&(a.amplitude*=b),a.period&&(a.period*=b)}}function G(a,b){if(a){var p="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===a.type;if(p?.symbolLayers)for(const e of p.symbolLayers)if(!(e.colorLocked||a&&(k.isCIMStroke(e)||k.isCIMMarker(e)&&e.markerPlacement&&k.isCIMMarkerStrokePlacement(e.markerPlacement))))switch(e.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":e.tintColor&&l(b,e.tintColor);
break;case "CIMVectorMarker":e.markerGraphics?.forEach(h=>{G(h.symbol,b)});break;case "CIMSolidStroke":case "CIMSolidFill":l(b,e.color);break;case "CIMHatchFill":G(e.lineSymbol,b)}}}function l(a,b){for(const p of a)if(p.join(".")===b.join("."))return;a.push(b)}function r(a,b,p){if(a){var e="CIMTextSymbol"===a.type?a.symbol:a;a="CIMPolygonSymbol"===e?.type;if(e?.symbolLayers)for(const h of e.symbolLayers)if(!h.colorLocked){if(a)if(p){if({layersToColor:e}=p,(k.isCIMStroke(h)||k.isCIMMarker(h)&&h.markerPlacement&&
k.isCIMMarkerStrokePlacement(h.markerPlacement))&&"fill"===e||k.isCIMFill(h)&&"outline"===e)continue}else if(k.isCIMStroke(h)||k.isCIMMarker(h)&&h.markerPlacement&&k.isCIMMarkerStrokePlacement(h.markerPlacement))continue;e=b.toArray();switch(h.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":h.tintColor=e;break;case "CIMVectorMarker":h.markerGraphics?.forEach(c=>{r(c.symbol,b,p)});break;case "CIMSolidStroke":case "CIMSolidFill":h.color=e;break;case "CIMHatchFill":r(h.lineSymbol,
b,p)}}}}m.applyCIMSymbolColor=function(a,b,p){b instanceof v||(b=new v(b));(a=k.toCIMSymbolJSON(a))&&r(a,b,p)};m.applyCIMSymbolRotation=function(a,b,p=!1){a=k.toCIMSymbolJSON(a);p&&0!==b&&(b=360-b);if("CIMTextSymbol"===a?.type)a.angle=b;else if("CIMPointSymbol"===a?.type&&a.symbolLayers){p=b-(a.angle||0);for(const e of a.symbolLayers)if(k.isCIMMarker(e)){let h=e.rotation||0;h=e.rotateClockwise?h-p:h+p;e.rotation=h}a.angle=b}};m.getCIMSymbolColor=function(a){a=k.toCIMSymbolJSON(a);const b=[];G(a,b);
return b.length?new v(k.fromCIMColor(b[0])):null};m.getCIMSymbolRotation=function(a,b=!1){a=k.toCIMSymbolJSON(a);return"CIMTextSymbol"===a?.type||"CIMPointSymbol"===a?.type?(a=a.angle,null!=a&&0!==a&&b?360-a:a??0):0};m.getCIMSymbolSize=f;m.getCIMSymbolType=function(a){a=k.toCIMSymbolJSON(a);if(!a)return null;switch(a.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};m.scaleCIMMarker=A;m.scaleCIMSymbol=x;m.scaleCIMSymbolTo=function(a,b,p){if(a){var e=k.toCIMSymbolJSON(a);a=f(a);if(0===a){if(e)if("CIMTextSymbol"===e.type)e.height=b;else if(e.symbolLayers)for(const h of e.symbolLayers)switch(h.type){case "CIMPictureMarker":case "CIMVectorMarker":h.size=b;break;case "CIMPictureStroke":case "CIMSolidStroke":h.width=b}}else x(e,b/a,!1,p)}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/symbols/cim/utils":function(){define(["require","exports"],function(m,v){function k(l){let r=l.length;for(;r--;)if(!" /-,\n".includes(l.charAt(r)))return!1;return!0}function f(l,r){const a=[];var b=0;let p=-1;do p=l.indexOf("[",b),p>=b&&(p>b&&(b=l.substr(b,p-b),a.push([b,null,k(b)])),b=p+1,p=l.indexOf("]",b),p>=b&&(p>b&&(b=l.substr(b,p-b),(b=r[b])&&a.push([null,b,!1])),b=p+1));while(-1!==p);b<l.length-1&&(l=l.substr(b),a.push([l,null,k(l)]));return a}function x(l,r,a){let b="",p=null;for(const e of r){const [h,
c,n]=e;if(h)n?p=h:(p&&(b+=p,p=null),b+=h);else if(r=l.attributes[c])p&&(b+=p,p=null),b+=r}return A(b,a)}function A(l,r){"string"!==typeof l&&(l=String(l));switch(r){case "LowerCase":return l.toLowerCase();case "Allcaps":return l.toUpperCase();default:return l}}function B(l){if(!l)return null;switch(l.type){case "CIMPolygonSymbol":if(l.symbolLayers)for(const r of l.symbolLayers)if(l=B(r),null!=l)return l;break;case "CIMTextSymbol":return B(l.symbol);case "CIMSolidFill":return l.color}}function C(l){if(l)switch(l.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(l.symbolLayers)for(const r of l.symbolLayers)if(l=
C(r),void 0!==l)return l;break;case "CIMTextSymbol":return C(l.symbol);case "CIMSolidStroke":case "CIMSolidFill":return l.color}}function G(l){if(l)switch(l.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(l.symbolLayers)for(const r of l.symbolLayers)if(l=G(r),void 0!==l)return l;break;case "CIMTextSymbol":return G(l.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return l.width}}v.adjustTextCase=A;v.analyzeTextParts=f;v.assignTextValuesFromFeature=x;v.attributesToFields=
function(l){return(l?Object.keys(l):[]).map(r=>({name:r,alias:r,type:"string"===typeof l[r]?"esriFieldTypeString":"esriFieldTypeDouble"}))};v.colorToArray=function(l){return[l.r,l.g,l.b,l.a]};v.createLabelOverrideFunction=function(l,r,a){const b=f(r,l);return p=>x(p,b,a)};v.evaluateValueOrFunction=function(l,r,a,b){return"function"===typeof l?l(r,a,b):l};v.fromCIMColor=function(l){return l?{r:l[0],g:l[1],b:l[2],a:l[3]/255}:{r:0,g:0,b:0,a:0}};v.fromCIMFontDecoration=function(l){return l.underline?
"underline":l.strikethrough?"line-through":"none"};v.fromCIMFontStyle=function(l){let r="",a="";l&&(l=l.toLowerCase(),l.includes("italic")?r="italic":l.includes("oblique")&&(r="oblique"),l.includes("bold")?a="bold":l.includes("light")&&(a="lighter"));return{style:r,weight:a}};v.fromCIMHorizontalAlignment=function(l){switch(l){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"center"}};v.fromCIMVerticalAlignment=function(l){switch(l){default:return"top";
case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}};v.getFillColor=B;v.getFontStyle=function(l){if(!l)return"normal";switch(l.toLowerCase()){case "italic":return"italic";case "oblique":return"oblique";default:return"normal"}};v.getFontWeight=function(l){if(!l)return"normal";switch(l.toLowerCase()){case "bold":return"bold";case "bolder":return"bolder";case "lighter":return"lighter";default:return"normal"}};v.getStrokeColor=C;v.getStrokeWidth=G;v.getValue=(l,
r=0)=>isNaN(l)||null==l?r:l;v.importGeometryEngine=function(){return new Promise((l,r)=>m(["../../geometry/geometryEngineJSON"],l,r))};v.isCIMFill=function(l){return"CIMGradientFill"===l.type||"CIMHatchFill"===l.type||"CIMPictureFill"===l.type||"CIMSolidFill"===l.type||"CIMWaterFill"===l.type};v.isCIMMarker=function(l){return"CIMVectorMarker"===l.type||"CIMPictureMarker"===l.type||"CIMBarChartMarker"===l.type||"CIMCharacterMarker"===l.type||"CIMPieChartMarker"===l.type||"CIMStackedBarChartMarker"===
l.type};v.isCIMMarkerStrokePlacement=function(l){return"CIMMarkerPlacementAlongLineRandomSize"===l.type||"CIMMarkerPlacementAlongLineSameSize"===l.type||"CIMMarkerPlacementAlongLineVariableSize"===l.type||"CIMMarkerPlacementAtExtremities"===l.type||"CIMMarkerPlacementAtMeasuredUnits"===l.type||"CIMMarkerPlacementAtRatioPositions"===l.type||"CIMMarkerPlacementOnLine"===l.type||"CIMMarkerPlacementOnVertices"===l.type};v.isCIMStroke=function(l){return"CIMGradientStroke"===l.type||"CIMPictureStroke"===
l.type||"CIMSolidStroke"===l.type};v.isGeometryEngineRequired=l=>{if(!l)return!1;for(const r of l)switch(r.type){case "CIMGeometricEffectBuffer":case "CIMGeometricEffectOffset":return!0}return!1};v.isSVGImage=l=>l.includes("data:image/svg+xml");v.mapCIMSymbolToGeometryType=function(l){if(!l)return null;switch(l.type){case "CIMPointSymbol":case "CIMTextSymbol":return"esriGeometryPoint";case "CIMLineSymbol":return"esriGeometryPolyline";case "CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}};
v.resampleHermite=function(l,r,a,b,p,e,h=!0){const c=r/p;a/=e;const n=Math.ceil(c/2),t=Math.ceil(a/2);for(let g=0;g<e;g++)for(let q=0;q<p;q++){const y=4*(q+(h?e-g-1:g)*p);var z=0;let F=0,I=0,K=0,N=0,S=0,P=0;const J=(g+.5)*a;for(let L=Math.floor(g*a);L<(g+1)*a;L++){var w=Math.abs(J-(L+.5))/t;const T=(q+.5)*c;w*=w;for(let H=Math.floor(q*c);H<(q+1)*c;H++){let u=Math.abs(T-(H+.5))/n;z=Math.sqrt(w+u*u);-1<=z&&1>=z&&(z=2*z*z*z-3*z*z+1,0<z&&(u=4*(H+L*r),P+=z*l[u+3],I+=z,255>l[u+3]&&(z=z*l[u+3]/250),K+=z*
l[u],N+=z*l[u+1],S+=z*l[u+2],F+=z))}}b[y]=K/F;b[y+1]=N/F;b[y+2]=S/F;b[y+3]=P/I}};v.toCIMSymbolJSON=function(l){return l.data?.symbol??null};Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/colorRampUtils":function(){define(["require","exports","../../../chunks/_rollupPluginBabelHelpers","../../../Color","./utils"],function(m,v,k,f,x){function A(b,p){const e=[],h=b.length-1;5===b.length?e.push(0,2,4):e.push(0,h);return b.map((c,
n)=>e.includes(n)?x.createStopLabel(c,n,h,p):null)}function B(){B=k._asyncToGenerator(function*(b,p,e){let h=!1,c=[],n=[];if(b.stops){var t=b.stops;c=t.map(w=>w.value);(h=t.some(w=>!!w.label))&&(n=t.map(w=>w.label))}t=c[c.length-1];if(null==c[0]&&null==t)return null;const z=h?null:A(c,e);return(yield Promise.all(c.map(function(){var w=k._asyncToGenerator(function*(g,q){const y="opacity"===b.type?yield C(g,b,p):(yield new Promise((F,I)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],
F,I))).getColor(b,g);return{value:g,color:y,label:h?n[q]:z[q]}});return function(g,q){return w.apply(this,arguments)}}()))).reverse()});return B.apply(this,arguments)}function C(b,p){return G.apply(this,arguments)}function G(){G=k._asyncToGenerator(function*(b,p,e=a){e=new f(e);b=(yield new Promise((h,c)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],h,c))).getOpacity(p,b);null!=b&&(e.a=b);return e});return G.apply(this,arguments)}function l(b,p){const {startIndex:e,endIndex:h,
weight:c}=r(b,p);if(e===h)return p[e].color;b=f.blendColors(p[e].color,p[h].color,c);return new f(b)}function r(b,p){let e=0,h=p.length-1;p.some((c,n)=>{if(b<c.value)return h=n,!0;e=n;return!1});return{startIndex:e,endIndex:h,weight:(b-p[e].value)/(p[h].value-p[e].value)}}const a=new f([64,64,64]);v.getColorFromPointCloudStops=l;v.getRampStops=function(b,p,e){return B.apply(this,arguments)};v.getRampStopsForPointCloud=function(b){let p=!1,e=[],h=[];e=b.map(t=>t.value);(p=b.some(t=>!!t.label))&&(h=
b.map(t=>t.label));const c=e[e.length-1];if(null==e[0]&&null==c)return null;const n=p?null:A(e,!1);return e.map((t,z)=>{const w=l(t,b);return{value:t,color:w,label:p?h[z]:n[z]}}).reverse()};v.getStrectchRampStops=function(b,p){let e=[];if(b&&"multipart"===b.type)b.colorRamps.reverse().forEach((h,c)=>{0===c?e.push({value:p.max,color:new f(h.toColor),label:"high"}):e.push({value:null,color:new f(h.toColor),label:""});c===b.colorRamps.length-1?e.push({value:p.min,color:new f(h.fromColor),label:"low"}):
e.push({value:null,color:new f(h.fromColor),label:""})});else{let h,c;b&&"algorithmic"===b.type?(h=b.fromColor,c=b.toColor):(h=[0,0,0,1],c=[255,255,255,1]);e=[{value:p.max,color:new f(c),label:"high"},{value:p.min,color:new f(h),label:"low"}]}return e};Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/utils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../symbols ../../../intl/date ../../../renderers/support/numberUtils ../../../symbols/SimpleLineSymbol".split(" "),
function(m,v,k,f,x,A,B){function C(a){return G.apply(this,arguments)}function G(){G=k._asyncToGenerator(function*(a){if(!("visualVariables"in a&&a.visualVariables))return null;a=a.visualVariables.find(e=>"color"===e.type);if(!a)return null;var b=null,p=null;if(a.stops){if(1===a.stops.length)return a.stops[0].color;b=a.stops[0].value;p=a.stops[a.stops.length-1].value}b+=(p-b)/2;({getColor:p}=yield new Promise((e,h)=>m(["../../../renderers/visualVariables/support/visualVariableUtils"],e,h)));return p(a,
b)});return G.apply(this,arguments)}function l(){l=k._asyncToGenerator(function*(a,b){const p=a.trailCap,e=a.trailWidth||1;a=b||(yield C(a))||a.color;return new B({cap:p,color:a,width:e})});return l.apply(this,arguments)}const r=x.convertDateFormatToIntlOptions("short-date");v.RGB_IMG_SOURCE=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII\x3d","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII\x3d",
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII\x3d"];v.SPECIAL_CHARS_GREATER_THAN="\x3e";v.SPECIAL_CHARS_LESS_THAN="\x3c";v.createStopLabel=function(a,b,p,e){let h="";0===b?h="\x3c ":b===p&&(h="\x3e ");b=null;b=e?x.formatDate(a,r):A.format(a);return h+b};v.getMedianColor=C;v.getSymbolForFlowRenderer=function(a,b){return l.apply(this,arguments)};Object.defineProperties(v,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Legend/support/heatmapRampUtils":function(){define(["exports","../../../renderers/support/HeatmapColorStop"],function(m,v){m.getHeatmapRampStops=function(k){if(!k.colorStops)return[];const f=[...k.colorStops].filter(A=>0<A.color?.a);let x=f.length-1;if(f&&f[0]){const A=f[x];A&&1!==A.ratio&&(f.push(new v({ratio:1,color:A.color})),x++)}return f.map((A,B)=>{let C="";0===B?C=k.legendOptions?.minLabel||"low":B===x&&(C=k.legendOptions?.maxLabel||
"high");return{color:A.color,label:C,ratio:A.ratio}}).reverse()};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureMedia/FeatureMediaViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/subclass ../../../popup/FieldInfo ../../../popup/content/support/ChartMediaInfoValueSeries ../support/featureUtils ../support/relatedFeatureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){const a={chartAnimation:!0};k=function(b){function p(h){h=b.call(this,h)||this;h.abilities={...a};h.activeMediaInfoIndex=0;h.attributes=null;h.description=null;h.fieldInfoMap=null;h.formattedAttributes=null;h.expressionAttributes=null;h.layer=null;h.mediaInfos=null;h.popupTemplate=null;h.relatedInfos=null;h.title=null;return h}m._inheritsLoose(p,b);var e=p.prototype;e.castAbilities=function(h){return{...a,...h}};e.setActiveMedia=function(h){this._setContentElementMedia(h)};
e.next=function(){this._pageContentElementMedia(1)};e.previous=function(){this._pageContentElementMedia(-1)};e._setContentElementMedia=function(h){const {formattedMediaInfoCount:c}=this;this.activeMediaInfoIndex=(h+c)%c};e._pageContentElementMedia=function(h){const {activeMediaInfoIndex:c}=this;this._setContentElementMedia(c+h)};e._formatMediaInfos=function(){const {attributes:h,mediaInfos:c,formattedAttributes:n,expressionAttributes:t,fieldInfoMap:z,layer:w}=this;return c?.map(g=>{g=g?.clone();if(!g)return null;
g.title=l.substituteFieldsInLinksAndAttributes({attributes:h,fieldInfoMap:z,globalAttributes:n,expressionAttributes:t,layer:w,text:g.title});g.caption=l.substituteFieldsInLinksAndAttributes({attributes:h,fieldInfoMap:z,globalAttributes:n,expressionAttributes:t,layer:w,text:g.caption});g.altText=l.substituteFieldsInLinksAndAttributes({attributes:h,fieldInfoMap:z,globalAttributes:n,expressionAttributes:t,layer:w,text:g.altText});if("image"===g.type){var {value:q}=g;this._setImageValue({value:q,formattedAttributes:n,
layer:w});return g.value.sourceURL?g:void 0}return"pie-chart"===g.type||"line-chart"===g.type||"column-chart"===g.type||"bar-chart"===g.type?({value:q}=g,this._setChartValue({value:q,chartType:g.type,attributes:h,formattedAttributes:n,layer:w,expressionAttributes:t}),g):null}).filter(Boolean)};e._setImageValue=function(h){const {fieldInfoMap:c}=this,{value:n,formattedAttributes:t,layer:z}=h,{linkURL:w,sourceURL:g}=n;g&&(h=l.fixTokens(g,z),n.sourceURL=l.substituteAttributes({formattedAttributes:t,
template:h,fieldInfoMap:c}));w&&(h=l.fixTokens(w,z),n.linkURL=l.substituteAttributes({formattedAttributes:t,template:h,fieldInfoMap:c}))};e._setChartValue=function(h){const {value:c,attributes:n,formattedAttributes:t,chartType:z,layer:w,expressionAttributes:g}=h,{popupTemplate:q,relatedInfos:y}=this,{fields:F,normalizeField:I}=c;c.fields=l.getFixedFieldNames(F,w);I&&(c.normalizeField=l.getFixedFieldName(I,w));if(F.some(N=>!!(null!=t[N]||l.isRelatedField(N)&&y.size))){var K=q?.fieldInfos;F.forEach(N=>
{l.isRelatedField(N)?c.series=[...c.series,...this._getRelatedChartInfos({fieldInfos:K,fieldName:N,formattedAttributes:t,chartType:z,value:c})]:(N=this._getChartOption({value:c,attributes:n,chartType:z,formattedAttributes:t,expressionAttributes:g,fieldName:N,fieldInfos:K}),c.series.push(N))})}};e._getRelatedChartInfos=function(h){const {fieldInfos:c,fieldName:n,formattedAttributes:t,chartType:z,value:w}=h,g=[];h=r.getRelatedFieldInfo(n);const {layerId:q,fieldName:y}=h;h=this.relatedInfos?.get(q.toString());
if(!h)return g;const {relatedFeatures:F,relation:I}=h;if(!I||!F)return g;({cardinality:h}=I);F.forEach(K=>{const {attributes:N}=K;N&&Object.keys(N).forEach(S=>{S===y&&g.push(this._getChartOption({value:w,attributes:N,formattedAttributes:t,fieldName:n,chartType:z,relatedFieldName:S,fieldInfos:c}))})});return"one-to-many"===h||"many-to-many"===h?g:[g[0]]};e._getTooltip=function({label:h,value:c,chartType:n}){return"pie-chart"===n?`${h}`:`${h}: ${c}`};e._getChartOption=function(h){const {value:c,attributes:n,
formattedAttributes:t,expressionAttributes:z,fieldName:w,relatedFieldName:g,fieldInfos:q,chartType:y}=h,{layer:F,fieldInfoMap:I}=this,{normalizeField:K,tooltipField:N}=c;h=K?l.isRelatedField(K)?n[r.getRelatedFieldInfo(K).fieldName]:n[K]:null;var S=l.isExpressionField(w)&&z&&void 0!==z[w]?z[w]:g&&void 0!==n[g]?n[g]:void 0!==n[w]?n[w]:t[w];h=new G({fieldName:w,value:void 0===S?null:S&&h?S/h:S});if(l.isRelatedField(w)){S=I.get(w.toLowerCase());var P=I.get(N.toLowerCase());h.tooltip=this._getTooltip({label:t[P?.fieldName??
N]??S?.label??S?.fieldName??g,value:t[S?.fieldName??w],chartType:y});return h}P=l.getFieldInfo(q,w);S=l.getFixedFieldName(w,F);P=N&&void 0!==t[N]?t[N]:l.getFieldInfoLabel(P||new C({fieldName:S}),this.popupTemplate?.expressionInfos);h.tooltip=this._getTooltip({label:P,value:t[S],chartType:y});return h};m._createClass(p,[{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||
[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}}]);return p}(k);v.__decorate([f.property()],k.prototype,"abilities",void 0);v.__decorate([A.cast("abilities")],k.prototype,"castAbilities",null);v.__decorate([f.property()],k.prototype,"activeMediaInfoIndex",void 0);v.__decorate([f.property({readOnly:!0})],k.prototype,"activeMediaInfo",null);v.__decorate([f.property()],k.prototype,"attributes",void 0);v.__decorate([f.property()],k.prototype,"description",void 0);
v.__decorate([f.property()],k.prototype,"fieldInfoMap",void 0);v.__decorate([f.property()],k.prototype,"formattedAttributes",void 0);v.__decorate([f.property()],k.prototype,"expressionAttributes",void 0);v.__decorate([f.property({readOnly:!0})],k.prototype,"formattedMediaInfos",null);v.__decorate([f.property()],k.prototype,"layer",void 0);v.__decorate([f.property({readOnly:!0})],k.prototype,"formattedMediaInfoCount",null);v.__decorate([f.property()],k.prototype,"mediaInfos",void 0);v.__decorate([f.property()],
k.prototype,"popupTemplate",void 0);v.__decorate([f.property()],k.prototype,"relatedInfos",void 0);v.__decorate([f.property()],k.prototype,"title",void 0);return k=v.__decorate([B.subclass("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],k)})},"esri/widgets/Feature/support/relatedFeatureUtils":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../request ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../layers/support/fieldUtils ../../../core/has ../../../layers/support/source/DataLayerSource ../../../rest/query/executeQueryJSON ../../../config ../../../kernel ../../../core/arrayUtils ../../../core/urlUtils ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/featureConversionUtils ../../../geometry/Extent ../../../geometry/Geometry ../../../geometry/Multipoint ../../../geometry/Point ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry/support/normalizeUtils ../../../core/pbf ../../../rest/support/FeatureSet ../../../rest/support/Query ../../../rest/query/support/AttachmentInfo ../../../rest/support/AttachmentQuery ../../../geometry ../../../rest/support/RelationshipQuery ../../../rest/support/TopFeaturesQuery ../../../rest/support/StatisticDefinition ./featureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I,K,N,S,P,J,L,T,H){function u(ea,da){if(!da.relationships)return null;let O=null;({relationships:da}=da);da.some(W=>W.id===parseInt(ea,10)?(O=W,!0):!1);return O}function d({originRelationship:ea,relationships:da,layerId:O}){let W;da&&da.some(R=>{`${R.relatedTableId}`===O&&R.id===ea.id&&(W=R);return!!W});return W}function E(ea,da){da=da.toLowerCase();for(const O in ea)if(O.toLowerCase()===da)return ea[O];return null}function D(ea,da,O,W){const R=
new J;R.outFields=["*"];R.relationshipId="number"===typeof da.id?da.id:parseInt(da.id,10);R.objectIds=[ea.attributes[O.objectIdField]];return O.queryRelatedFeatures(R,W)}function M(ea,da,O){let W=0;const R=[];for(;W<da.length;)R.push(`${ea} IN (${da.slice(W,O+W)})`),W+=O;return R.join(" OR ")}function Q(ea,da,O,W){return V.apply(this,arguments)}function V(){V=v._asyncToGenerator(function*(ea,da,O,W){var R=O.layerId.toString();const {layerInfo:U,relation:Y,relatedFields:ca,outStatistics:ia,url:la,
sourceSpatialReference:ka}=da;R=d({originRelationship:Y,relationships:U.relationships,layerId:R});if(R.relationshipTableId&&R.keyFieldInRelationshipTable){O=(yield D(ea,R,O,W))[ea.attributes[O.objectIdField]];if(!O)return null;const ma=O.features.map(sa=>sa.attributes[U.objectIdField]);if(0<ia?.length&&U.supportsStatistics)return da=new K,da.where=M(U.objectIdField,ma,1E3),da.outFields=ca,da.outStatistics=ia,da.sourceSpatialReference=ka,da={features:Promise.resolve(O),statsFeatures:l.executeQueryJSON(la,
da)},A.eachAlways(da)}return(R=R?.keyField)?(O=B.isNumericField(Z(U.fields,R)),ea=E(ea.attributes,Y.keyField),R=O?`${R}=${ea}`:`${R}='${ea}'`,ea=l.executeQueryJSON(la,new K({where:R,outFields:da.relatedFields,sourceSpatialReference:ka}),W),da=da.outStatistics&&0<da.outStatistics.length&&U.supportsStatistics?l.executeQueryJSON(la,new K({where:R,outFields:da.relatedFields,outStatistics:da.outStatistics,sourceSpatialReference:ka}),W):null,W={features:ea},da&&(W.statsFeatures=da),A.eachAlways(W)):null});
return V.apply(this,arguments)}function Z(ea,da){if(null!=ea){da=da.toLowerCase();for(const O of ea)if(O&&O.name.toLowerCase()===da)return O}return null}const ba=x.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),fa=new Map;m.createRelatedInfo=function(ea,da){if(ea=u(ea,da))return{url:`${da.url}/${ea.relatedTableId}`,sourceSpatialReference:da.spatialReference,relation:ea,relatedFields:[],outStatistics:[]}};m.getDestinationRelation=d;m.getRelatedFieldInfo=function(ea){if(!H.isRelatedField(ea))return null;
const [da,O]=ea.split("/").slice(1);return{layerId:da,fieldName:O}};m.queryLayerInfos=function({relatedInfos:ea,layer:da},O){const W={};ea.forEach((R,U)=>{({relation:R}=R);if(!R)throw U=new f("relation-required","A relation is required on a layer to retrieve related records."),ba.error(U),U;({relatedTableId:R}=R);if("number"!==typeof R)throw U=new f("A related table ID is required on a layer to retrieve related records."),ba.error(U),U;R=`${da.url}/${R}`;const Y=fa.get(R),ca=Y?Y:k(R,{query:{f:"json"},
signal:O&&O.signal});Y||fa.set(R,ca);W[U]=ca});return A.eachAlways(W)};m.queryRelatedFeatures=function({graphic:ea,relatedInfos:da,layer:O},W){const R={};da.forEach((U,Y)=>{U.layerInfo&&(R[Y]=Q(ea,U,O,W))});return A.eachAlways(R)};m.setRelatedFeatures=function(ea,da){if(da&&ea){var {features:O,statsFeatures:W}=ea;ea=O&&O.value;da.relatedFeatures=ea?ea.features:[];ea=W&&W.value;da.relatedStatsFeatures=ea?ea.features:[]}};m.updateRelatedInfo=function({relatedInfo:ea,fieldName:da,fieldInfo:O}){ea.relatedFields.push(da);
O.statisticType&&(da=new T({statisticType:O.statisticType,onStatisticField:da,outStatisticFieldName:da}),ea.outStatistics.push(da))};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/chartUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../intl ../../core/has ../../intl/locale".split(" "),function(m,v,k,f,x,A){function B(b){if(!b)return"en-us";if(l.has(b.toLowerCase()))return b.toLowerCase();b=b.split("-")[0].toLowerCase();
let p=null;for(const e of l.keys())if(e.startsWith(b)){p=e;break}return p||"en-us"}function C(){C=k._asyncToGenerator(function*(b=A.getLocale()){b=B(b);if(r&&b===a)return r;r=(new Promise((p,e)=>m(["../../chunks/index"],p,e))).then(p=>p.index);a=b;try{const [p,e]=yield Promise.all([r,l.get(a)()]);a===b&&(p.am4core.options.defaultLocale=e.default);p.am4core.options.suppressWarnings=!0;p.am4core.options.autoDispose=!0}catch{return a=r=null}return r});return C.apply(this,arguments)}f="#ffffff #858585 #ffbebe #ffebbe #ffebaf #ffffbe #e9ffbe #d3ffbe #beffe8 #bee8ff #bed2ff #e8beff #ffbee8 #ebebeb #707070 #ff7f7f #ffa77f #ffd37f #ffff73 #d1ff73 #a3ff73 #73ffdf #73dfff #73b2ff #df73ff #ff73df #d6d6d6 #5c5c5c #ff0000 #ff5500 #ffaa00 #ffff00 #aaff00 #55ff00 #00ffc5 #00c5ff #0070ff #c500ff #ff00c5 #c2c2c2 #474747 #e60000 #e64c00 #e69800 #e6e600 #98e600 #4ce600 #00e6a9 #00a9e6 #005ce6 #a900e6 #e600a9 #adadad #242424 #a80000 #a83800 #a87000 #a8a800 #70a800 #38a800 #00a884 #0084a8 #004da8 #8400a8 #a80084 #999999 #1a1a1a #730000 #732600 #734c00 #737300 #4c7300 #267300 #00734c #004c73 #002673 #4c0073 #73004".split(" ");
var G=[{name:"default",colors:[].concat(f.slice(30,39),f.slice(28,30).reverse())},{name:"cat-dark",colors:"#ed5151 #149ece #a7c636 #9e559c #fc921f #ffde3e #f789d8 #b7814a #3caf99 #6b6bd6 #b54779 #7f7f7f".split(" ")},{name:"tropical-bliss",colors:"#fce138 #ff9399 #fcd27e #f1983c #a553b7 #b1a9d0 #6ecffc #4c81cd #fc6f84 #fc3e5a #6af689 #48885c".split(" ")},{name:"desert-blooms",colors:"#102432 #144d59 #ffc730 #ed9310 #a64f1b #661510 #d9351a #b31515 #4a0932 #8c213f #18382e #2c6954".split(" ")},{name:"under-the-sea",
colors:"#bf9727 #607100 #00734c #704489 #01acca #024e76 #f09100 #ea311f #c6004b #7570b3 #666666 #333333".split(" ")},{name:"vibrant-rainbow",colors:"#fffb00 #f5cb11 #9fd40c #46e39c #32b8a6 #7ff2fa #ac08cc #dd33ff #eb7200 #e8a784 #bf2e2e #6c7000".split(" ")},{name:"ocean-bay",colors:"#191921 #11495c #78b1c2 #454f4b #8f8f82 #9be0c0 #87b051 #f7ec88 #ebdcc1 #dbb658 #c43541 #75351e".split(" ")},{name:"prairie-summer",colors:"#332424 #751555 #d47013 #d68989 #211173 #82aad6 #7bfaeb #6ec9a8 #6b6408 #eada40 #ccc54a #1fc235".split(" ")},
{name:"pastel-chalk",colors:"#fffd99 #f5e6a4 #c1d48c #b8e3d0 #a0b8b5 #cbf7fa #d791f2 #dfc1eb #f2b983 #e8c4b2 #bf8e8e #94995c".split(" ")},{name:"seq-yellow-orange-red-bright",colors:"#910000 #b1260b #c0370f #e05919 #ef6a1d #ff7b22 #ffa143 #ffb454 #ffda74 #ffed85".split(" ")},{name:"seq-reds-bright",colors:"#57453b #7b4238 #9f4036 #c23d33 #d7483c #ec5244 #f3696c #f9816c #ffc4ae #fff0dc".split(" ")},{name:"seq-purples-bright",colors:"#4e465c #5a4a78 #695291 #775baa #8663c3 #946bdc #aa89e8 #c1a6f3 #d7c4ff #e6e1ff".split(" ")},
{name:"seq-blues-bright",colors:"#404d54 #435c6c #48799d #4b88b6 #4d96ce #50a5e7 #74bbed #98d0f3 #bce6f9 #e6faff".split(" ")},{name:"seq-greens-bright",colors:"#39544c #386757 #368165 #359b73 #33b581 #4bc392 #64d2a2 #7ce0b3 #cbf6d9 #f4ffea".split(" ")},{name:"seq-browns-bright",colors:"#524834 #715b38 #8f6e3c #ae8140 #cc9444 #eba748 #eeb664 #f0c47f #f9e0b7 #fff8eb".split(" ")}];const l=new Map([["ar",()=>(new Promise((b,p)=>m(["../../chunks/ar"],b,p))).then(b=>b.ar)],["bg-bg",()=>(new Promise((b,
p)=>m(["../../chunks/bg_BG"],b,p))).then(b=>b.bg_BG)],["bs-ba",()=>(new Promise((b,p)=>m(["../../chunks/bs_BA"],b,p))).then(b=>b.bs_BA)],["ca-es",()=>(new Promise((b,p)=>m(["../../chunks/ca_ES"],b,p))).then(b=>b.ca_ES)],["cs-cz",()=>(new Promise((b,p)=>m(["../../chunks/cs_CZ"],b,p))).then(b=>b.cs_CZ)],["da-dk",()=>(new Promise((b,p)=>m(["../../chunks/da_DK"],b,p))).then(b=>b.da_DK)],["de-de",()=>(new Promise((b,p)=>m(["../../chunks/de_DE"],b,p))).then(b=>b.de_DE)],["de-ch",()=>(new Promise((b,p)=>
m(["../../chunks/de_CH"],b,p))).then(b=>b.de_CH)],["el-gr",()=>(new Promise((b,p)=>m(["../../chunks/el_GR"],b,p))).then(b=>b.el_GR)],["en-us",()=>(new Promise((b,p)=>m(["../../chunks/en_US"],b,p))).then(b=>b.en_US)],["en-ca",()=>(new Promise((b,p)=>m(["../../chunks/en_CA"],b,p))).then(b=>b.en_CA)],["es-es",()=>(new Promise((b,p)=>m(["../../chunks/es_ES"],b,p))).then(b=>b.es_ES)],["et-ee",()=>(new Promise((b,p)=>m(["../../chunks/et_EE"],b,p))).then(b=>b.et_EE)],["fi-fi",()=>(new Promise((b,p)=>m(["../../chunks/fi_FI"],
b,p))).then(b=>b.fi_FI)],["fr-fr",()=>(new Promise((b,p)=>m(["../../chunks/fr_FR"],b,p))).then(b=>b.fr_FR)],["he-il",()=>(new Promise((b,p)=>m(["../../chunks/he_IL"],b,p))).then(b=>b.he_IL)],["hr-hr",()=>(new Promise((b,p)=>m(["../../chunks/hr_HR"],b,p))).then(b=>b.hr_HR)],["hu-hu",()=>(new Promise((b,p)=>m(["../../chunks/hu_HU"],b,p))).then(b=>b.hu_HU)],["id-id",()=>(new Promise((b,p)=>m(["../../chunks/id_ID"],b,p))).then(b=>b.id_ID)],["it-it",()=>(new Promise((b,p)=>m(["../../chunks/it_IT"],b,p))).then(b=>
b.it_IT)],["ja-jp",()=>(new Promise((b,p)=>m(["../../chunks/ja_JP"],b,p))).then(b=>b.ja_JP)],["ko-kr",()=>(new Promise((b,p)=>m(["../../chunks/ko_KR"],b,p))).then(b=>b.ko_KR)],["lt-lt",()=>(new Promise((b,p)=>m(["../../chunks/lt_LT"],b,p))).then(b=>b.lt_LT)],["lv-lv",()=>(new Promise((b,p)=>m(["../../chunks/lv_LV"],b,p))).then(b=>b.lv_LV)],["nb-no",()=>(new Promise((b,p)=>m(["../../chunks/nb_NO"],b,p))).then(b=>b.nb_NO)],["nl-nl",()=>(new Promise((b,p)=>m(["../../chunks/nl_NL"],b,p))).then(b=>b.nl_NL)],
["pl-pl",()=>(new Promise((b,p)=>m(["../../chunks/pl_PL"],b,p))).then(b=>b.pl_PL)],["pt-br",()=>(new Promise((b,p)=>m(["../../chunks/pt_BR"],b,p))).then(b=>b.pt_BR)],["pt-pt",()=>(new Promise((b,p)=>m(["../../chunks/pt_PT"],b,p))).then(b=>b.pt_PT)],["ro-ro",()=>(new Promise((b,p)=>m(["../../chunks/ro_RO"],b,p))).then(b=>b.ro_RO)],["ru-ru",()=>(new Promise((b,p)=>m(["../../chunks/ru_RU"],b,p))).then(b=>b.ru_RU)],["sk-sk",()=>(new Promise((b,p)=>m(["../../chunks/sk_SK"],b,p))).then(b=>b.sk_SK)],["sl-sl",
()=>(new Promise((b,p)=>m(["../../chunks/sl_SL"],b,p))).then(b=>b.sl_SL)],["sr-rs",()=>(new Promise((b,p)=>m(["../../chunks/sr_RS"],b,p))).then(b=>b.sr_RS)],["sv-se",()=>(new Promise((b,p)=>m(["../../chunks/sv_SE"],b,p))).then(b=>b.sv_SE)],["th-th",()=>(new Promise((b,p)=>m(["../../chunks/th_TH"],b,p))).then(b=>b.th_TH)],["tr-tr",()=>(new Promise((b,p)=>m(["../../chunks/tr_TR"],b,p))).then(b=>b.tr_TR)],["uk-ua",()=>(new Promise((b,p)=>m(["../../chunks/uk_UA"],b,p))).then(b=>b.uk_UA)],["vi-vn",()=>
(new Promise((b,p)=>m(["../../chunks/vi_VN"],b,p))).then(b=>b.vi_VN)],["zh-cn",()=>(new Promise((b,p)=>m(["../../chunks/zh_Hans"],b,p))).then(b=>b.zh_Hans)],["zh-hk",()=>(new Promise((b,p)=>m(["../../chunks/zh_Hant"],b,p))).then(b=>b.zh_Hant)],["zh-tw",()=>(new Promise((b,p)=>m(["../../chunks/zh_Hant"],b,p))).then(b=>b.zh_Hant)]]);let r,a;v.getChartLocale=B;v.getColorSet=function(b,p="default"){const e=G.find(h=>h.name===p);return e?e.colors.map(h=>b.color(h)):null};v.loadChartsModule=function(){return C.apply(this,
arguments)};Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureExpression/FeatureExpressionViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/HandleOwner ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../popup/content/AttachmentsContent ../../../popup/content/Content ../../../popup/content/CustomContent ../../../popup/content/ExpressionContent ../../../popup/content/FieldsContent ../../../popup/content/MediaContent ../../../popup/content/RelationshipContent ../../../popup/content/TextContent ../../../popup/ElementExpressionInfo ../FeatureContent/FeatureContentViewModel ../FeatureFields/FeatureFieldsViewModel ../FeatureMedia/FeatureMediaViewModel ../support/arcadeFeatureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y){f=function(F){function I(K){var N=F.call(this,K)||this;N._abortController=null;N.expressionInfo=null;N.graphic=null;N.contentElement=null;N.contentElementViewModel=null;N.interceptor=null;N.view=null;N._cancelQuery=()=>{const {_abortController:S}=m._assertThisInitialized(N);S&&S.abort();N._abortController=null};N._createVM=()=>{var S=N.contentElement?.type;N.contentElementViewModel?.destroy();S="fields"===S?new g:"media"===S?new q:"text"===
S?new w:null;N._set("contentElementViewModel",S)};N._compile=m._asyncToGenerator(function*(){N._cancelQuery();const S=new AbortController;N._abortController=S;yield N._compileExpression();N._abortController===S&&(N._abortController=null)});N._compileThrottled=B.throttle(N._compile,1,m._assertThisInitialized(N));N._compileExpression=m._asyncToGenerator(function*(){const {expressionInfo:S,graphic:P,interceptor:J,spatialReference:L,map:T,view:H,_abortController:u}=m._assertThisInitialized(N);if(S&&P&&
L&&T){var d=yield y.loadArcadeUtils();if(u===N._abortController)if((d=yield y.createCompiledExpression({arcadeUtils:d,expressionInfo:S,graphic:P,interceptor:J,map:T,spatialReference:L,view:H}))&&"esri.arcade.Dictionary"===d.declaredClass){d=yield d.castAsJsonAsync(u.signal);var E=d?.type;d="media"===E?c.fromJSON(d):"text"===E?t.fromJSON(d):"fields"===E?h.fromJSON(d):null;N._set("contentElement",d)}else N._set("contentElement",null)}else N._set("contentElement",null)});N.handles.add([A.watch(()=>[N.expressionInfo,
N.graphic,N.map,N.spatialReference,N.view],()=>N._compileThrottled(),A.initial),A.watch(()=>[N.contentElement],()=>N._createVM(),A.initial)]);return N}m._inheritsLoose(I,F);I.prototype.destroy=function(){this._cancelQuery();this.contentElementViewModel?.destroy();this._set("contentElementViewModel",null);this._set("contentElement",null)};m._createClass(I,[{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(K){this._override("spatialReference",K)}},{key:"state",
get:function(){const {_abortController:K,contentElement:N,contentElementViewModel:S}=this;return K?"loading":N||S?"ready":"disabled"}},{key:"map",get:function(){return this.view?.map??null},set:function(K){this._override("map",K)}}]);return I}(x.HandleOwnerMixin(f));v.__decorate([C.property()],f.prototype,"_abortController",void 0);v.__decorate([C.property({type:z})],f.prototype,"expressionInfo",void 0);v.__decorate([C.property({type:k})],f.prototype,"graphic",void 0);v.__decorate([C.property({readOnly:!0})],
f.prototype,"contentElement",void 0);v.__decorate([C.property({readOnly:!0})],f.prototype,"contentElementViewModel",void 0);v.__decorate([C.property()],f.prototype,"interceptor",void 0);v.__decorate([C.property()],f.prototype,"spatialReference",null);v.__decorate([C.property({readOnly:!0})],f.prototype,"state",null);v.__decorate([C.property()],f.prototype,"map",null);v.__decorate([C.property()],f.prototype,"view",void 0);return f=v.__decorate([r.subclass("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],
f)})},"esri/widgets/Feature/support/arcadeFeatureUtils":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Logger ../../../core/promiseUtils ../../../layers/FeatureLayer ./featureUtils".split(" "),function(m,v,k,f,x,A,B){function C(t){return`<ul class="esri-widget__list">${t.map(z=>`<li>${"string"===typeof z?B.applyTextFormattingHTML(B.htmlEntities(z)):z}</li>`).join("")}</ul>`}function G(t){return`<table class="esri-widget__table">${t.keys().map(z=>{var w=
t.field(z);w="string"===typeof w?B.applyTextFormattingHTML(B.htmlEntities(w)):w;return`<tr><th>${z}</th><td>${w}</td></tr>`}).join("")}</table>`}function l({aggregatedFeatures:t,arcadeUtils:z,featureSetVars:w,context:g,viewInfo:q,map:y,graphic:F,interceptor:I}){w.forEach(K=>{K=K.toLowerCase();var N={map:y,spatialReference:q.sr,interceptor:I};"$map"===K&&(g.vars[K]=z.convertMapToFeatureSetCollection(N));"$layer"===K&&(g.vars[K]=z.convertFeatureLayerToFeatureSet({layer:F.sourceLayer,spatialReference:q.sr,
interceptor:I}));"$datastore"===K&&(g.vars[K]=z.convertServiceUrlToWorkspace({url:F.sourceLayer.url,spatialReference:q.sr,interceptor:I}));if("$aggregatedfeatures"===K){N=F.layer;const {fields:S,objectIdField:P,geometryType:J,spatialReference:L,displayField:T}=N;N=new A({fields:S,objectIdField:P,geometryType:J,spatialReference:L,displayField:T,...("feature"===N.type?{templates:N.templates,typeIdField:N.typeIdField,types:N.types}:null),source:t});g.vars[K]=z.convertFeatureLayerToFeatureSet({layer:N,
spatialReference:q.sr,interceptor:I})}})}function r(){return new Promise((t,z)=>m(["../../../support/arcadeUtils"],t,z))}function a(t){return b.apply(this,arguments)}function b(){b=k._asyncToGenerator(function*({graphic:t,view:z}){const {isAggregate:w,layer:g}=t;if(!w||!g||"2d"!==z?.type)return[];z=yield z.whenLayerView(g);if(!("createQuery"in z&&"queryFeatures"in z))return[];const q=z.createQuery();q.aggregateIds=[t.getObjectId()];({features:t}=yield z.queryFeatures(q));return t});return b.apply(this,
arguments)}function p(t){return e.apply(this,arguments)}function e(){e=k._asyncToGenerator(function*({expressionInfo:t,arcadeUtils:z,interceptor:w,spatialReference:g,map:q,graphic:y,view:F}){if(!t||!t.expression)return null;const I=z.createSyntaxTree(t.expression),K=c.filter(S=>z.hasVariable(I,S));[F]=yield Promise.all([a({graphic:y,view:F}),z.loadScriptDependencies(I,!0,K)]);const N=z.getViewInfo({spatialReference:g});g=z.createExecContext(y,N);g.interceptor=w;g.useAsync=!0;l({aggregatedFeatures:F,
arcadeUtils:z,featureSetVars:K,context:g,viewInfo:N,map:q,graphic:y,interceptor:w});w=z.createFunction(I,g);return z.executeAsyncFunction(w,g).catch(S=>n.error("arcade-execution-error",{error:S,graphic:y,expressionInfo:t}))});return e.apply(this,arguments)}function h(){h=k._asyncToGenerator(function*({expressionInfos:t,spatialReference:z,graphic:w,interceptor:g,map:q,view:y}){if(!t||!t.length)return{};const F=yield r(),I={};for(const K of t)I[`expression/${K.name}`]=p({expressionInfo:K,arcadeUtils:F,
interceptor:g,spatialReference:z,map:q,graphic:w,view:y});t=yield x.eachAlways(I);z={};for(const K in t)w=t[K].value,w="string"===typeof w?B.applyTextFormattingHTML(B.htmlEntities(w)):Array.isArray(w)?C(w):"esri.arcade.Dictionary"===w?.declaredClass?G(w):w,z[K]=w;return z});return h.apply(this,arguments)}const c=["$datastore","$map","$layer","$aggregatedfeatures"],n=f.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");v.createCompiledExpression=p;v.createCompiledExpressions=function(t){return h.apply(this,
arguments)};v.loadArcadeUtils=r;Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/FeatureRelationship":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../intl ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../Widget ./FeatureRelationship/FeatureRelationshipViewModel ./support/FeatureElementInfo ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory ../../intl/substitute".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n){const t={title:!0,description:!0};f=function(z){function w(q,y){var F=z.call(this,q,y)||this;F._featureElementInfo=null;F._relatedFeatureIntersectionObserver=new IntersectionObserver(([I])=>{I?.isIntersecting&&F._increaseFeaturePage()},{root:window.document});F.headingLevel=2;F.viewModel=new b;F.messages=null;F.messagesCommon=null;F.visibleElements={...t};F._increaseFeaturePage=()=>{const {state:I,showAllEnabled:K,relatedFeatures:N,featuresPerPage:S,featurePage:P}=
F.viewModel;"ready"===I&&K&&N.length>=S*P&&F.viewModel.featurePage++};return F}v._inheritsLoose(w,z);var g=w.prototype;g.initialize=function(){this._featureElementInfo=new p;this.addHandles([B.watch(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),B.initial),B.watch(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),B.on(()=>this.viewModel.relatedFeatureViewModels,
"change",()=>this._setupRelatedFeatureViewModels())])};g.loadDependencies=function(){return Promise.all([new Promise((q,y)=>m(["../../chunks/calcite-list"],q,y)),new Promise((q,y)=>m(["../../chunks/calcite-list-item"],q,y)),new Promise((q,y)=>m(["../../chunks/calcite-icon"],q,y)),new Promise((q,y)=>m(["../../chunks/calcite-notice"],q,y))])};g.destroy=function(){this._unobserveRelatedFeatureObserver();this._featureElementInfo=x.destroyMaybe(this._featureElementInfo)};g.castVisibleElements=function(q){return{...t,
...q}};g.renderStickyLoading=function(){return"querying"===this.viewModel.state?c.tsx("div",{key:"sticky-loader",class:"esri-feature__sticky-loading-container"},this.renderLoadingIcon()):null};g.renderLoadingIcon=function(){return c.tsx("span",{class:this.classes("esri-icon-loading-indicator esri-rotating","esri-feature__loading-spinner")})};g.renderLoading=function(){return c.tsx("div",{key:"loading-container",class:"esri-feature__loading-container"},this.renderLoadingIcon())};g.renderShowAllIconNode=
function(){return c.tsx("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})};g.renderChevronIconNode=function(){const q=e.isRTL(this.container)?"chevron-left":"chevron-right";return c.tsx("calcite-icon",{scale:"s",icon:q,slot:"content-end"})};g.renderRelatedFeature=function(q){var {itemDescriptionFieldName:y}=this.viewModel;const F=q.title;q.description=y&&q.formattedAttributes?.global[y];y="loading"===q.state;return c.tsx("calcite-list-item",{key:q.uid,label:y?`${this.messagesCommon?.loading}\u2026`:
F,description:y?"\u2026":q.description,onclick:()=>this.emit("select-record",{featureViewModel:q})},this.renderChevronIconNode())};g.renderShowAllListItem=function(){return this.displayShowAllButton?c.tsx("calcite-list-item",{key:"show-all-item",label:this.messages?.showAll,description:this.featureCountDescription,onclick:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null};g.renderNoRelatedFeaturesMessage=function(){return c.tsx("calcite-notice",{key:"no-related-features-message",
icon:"information",open:!0,color:"blue",scale:"s",width:"full"},c.tsx("div",{slot:"message"},this.messages?.noRelatedFeatures))};g.renderFeatureObserver=function(){return c.tsx("div",{key:"feature-observer",class:"esri-feature__feature-observer",bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})};g.renderList=function(){const {relatedFeatureViewModels:q}=this.viewModel;return c.tsx("calcite-list",null,q.toArray().map(y=>this.renderRelatedFeature(y)),this.renderShowAllListItem())};
g.renderRelatedFeatures=function(){const {displayListItems:q}=this,{state:y}=this.viewModel;return c.tsx("div",{key:"list-container",class:this.classes("esri-feature-relationship__list",{["esri-feature-relationship__list--querying"]:"querying"===y})},q?this.renderList():"ready"===y?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())};g.renderRelationshipNotFound=function(){return c.tsx("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",
open:!0,color:"red",scale:"s",width:"full"},c.tsx("div",{slot:"message"},this.messages?.relationshipNotFound))};g.render=function(){const {state:q}=this.viewModel;return c.tsx("div",{class:this.classes("esri-feature-relationship","esri-widget")},this._featureElementInfo?.render(),"loading"===q?this.renderLoading():"disabled"===q?this.renderRelationshipNotFound():this.renderRelatedFeatures())};g._setupRelatedFeatureViewModels=function(){const {relatedFeatureViewModels:q}=this.viewModel;this.removeHandles("related-feature-viewmodels");
q?.forEach(y=>{this.addHandles(B.watch(()=>[y.title,y.state],()=>this.scheduleRender(),B.initial),"related-feature-viewmodels")});this.scheduleRender()};g._setupFeatureElementInfo=function(){const {headingLevel:q,visibleElements:y}=this;this._featureElementInfo.set({description:y.description&&this.description,title:y.title&&this.title,headingLevel:q})};g._handleRelatedFeatureObserverChange=function(){var q=v._asyncToGenerator(function*(){this._unobserveRelatedFeatureObserver();const {state:y,showAllEnabled:F}=
this.viewModel;yield A.after(0);this._relatedFeatureIntersectionObserverNode&&"ready"===y&&F&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)});return function(){return q.apply(this,arguments)}}();g._relatedFeatureIntersectionObserverCreated=function(q){this._relatedFeatureIntersectionObserverNode=q};g._unobserveRelatedFeatureObserver=function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)};
v._createClass(w,[{key:"displayShowAllButton",get:function(){const {showAllEnabled:q,featureCount:y,displayCount:F}=this.viewModel;return!q&&(y>F||0===F)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||0<this.viewModel.relatedFeatureViewModels.length}},{key:"description",get:function(){return this.viewModel.description},set:function(q){this.viewModel.description=q}},{key:"featureCountDescription",get:function(){const {messages:q}=this,{featureCount:y}=this.viewModel;return n.substitute(1===
y?q?.numberRecord:q?.numberRecords,{number:y})}},{key:"title",get:function(){return this.viewModel.title},set:function(q){this.viewModel.title=q}}]);return w}(a);k.__decorate([C.property()],f.prototype,"_relatedFeatureIntersectionObserverNode",void 0);k.__decorate([C.property({readOnly:!0})],f.prototype,"displayShowAllButton",null);k.__decorate([C.property({readOnly:!0})],f.prototype,"displayListItems",null);k.__decorate([C.property()],f.prototype,"description",null);k.__decorate([C.property({readOnly:!0})],
f.prototype,"featureCountDescription",null);k.__decorate([C.property()],f.prototype,"headingLevel",void 0);k.__decorate([C.property()],f.prototype,"title",null);k.__decorate([C.property({type:b})],f.prototype,"viewModel",void 0);k.__decorate([C.property(),h.messageBundle("esri/widgets/Feature/t9n/Feature")],f.prototype,"messages",void 0);k.__decorate([C.property(),h.messageBundle("esri/t9n/common")],f.prototype,"messagesCommon",void 0);k.__decorate([C.property()],f.prototype,"visibleElements",void 0);
k.__decorate([l.cast("visibleElements")],f.prototype,"castVisibleElements",null);return f=k.__decorate([r.subclass("esri.widgets.Feature.FeatureRelationship")],f)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/Clonable ../../../core/Collection ../../../core/HandleOwner ../../../core/Identifiable ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c){f=function(n){function t(w){var g=n.call(this,w)||this;g._queryAbortController=null;g._queryPageAbortController=null;g._queryFeatureCountAbortController=null;g.featuresPerPage=10;g.description=null;g.graphic=null;g.layer=null;g.map=null;g.orderByFields=null;g.featureCount=0;g.relationshipId=null;g.showAllEnabled=!1;g.title=null;g._cancelQuery=()=>{const {_queryAbortController:q}=m._assertThisInitialized(g);q&&q.abort();g._queryAbortController=null};g._cancelQueryFeatureCount=
()=>{const {_queryFeatureCountAbortController:q}=m._assertThisInitialized(g);q&&q.abort();g._queryFeatureCountAbortController=null};g._cancelQueryPage=()=>{const {_queryPageAbortController:q}=m._assertThisInitialized(g);q&&q.abort();g._queryPageAbortController=null};g._queryController=m._asyncToGenerator(function*(){g._cancelQuery();const q=new AbortController;g._queryAbortController=q;yield G.ignoreAbortErrors(g._query());g._queryAbortController===q&&(g._queryAbortController=null)});g._queryFeatureCountController=
m._asyncToGenerator(function*(){g._cancelQueryFeatureCount();const q=new AbortController;g._queryFeatureCountAbortController=q;yield G.ignoreAbortErrors(g._queryFeatureCount());g._queryFeatureCountAbortController===q&&(g._queryFeatureCountAbortController=null)});g._queryPageController=m._asyncToGenerator(function*(){const q=new AbortController;g._queryPageAbortController=q;yield G.ignoreAbortErrors(g._queryPage());g._queryPageAbortController===q&&(g._queryPageAbortController=null)});g._queryThrottled=
r.throttle(g._queryController,100,m._assertThisInitialized(g));g._queryFeatureCountThrottled=r.throttle(g._queryFeatureCountController,100,m._assertThisInitialized(g));g._queryPageThrottled=r.throttle(g._queryPageController,100,m._assertThisInitialized(g));g._query=m._asyncToGenerator(function*(){const {_queryAbortController:q,relatedFeatures:y}=m._assertThisInitialized(g);g._destroyRelatedFeatureViewModels();g.featurePage=1;y.removeAll();y.addMany(g._sliceFeatures(yield g._queryRelatedFeatures({signal:q?.signal})))});
g.handles.add([l.watch(()=>[g.displayCount,g.graphic,g.layer,g.map,g.orderByFieldsFixedCasing,g.relationshipId,g.featuresPerPage,g.showAllEnabled],()=>g._queryThrottled(),l.initial),l.watch(()=>[g.featurePage,g.showAllEnabled],()=>g._queryPageThrottled()),l.watch(()=>[g.layer,g.relationshipId,g.objectId],()=>g._queryFeatureCountThrottled())]);return g}m._inheritsLoose(t,n);var z=t.prototype;z.destroy=function(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();this._cancelQuery();
this._cancelQueryFeatureCount();this._cancelQueryPage()};z._destroyRelatedFeatureViewModels=function(){this.relatedFeatureViewModels?.forEach(w=>!w.destroyed&&w.destroy());this.relatedFeatureViewModels.removeAll()};z._queryFeatureCount=function(){var w=m._asyncToGenerator(function*(){const {layer:g,relatedLayer:q,relationshipId:y,objectId:F,_queryFeatureCountAbortController:I}=this;yield g?.load();if(q&&"number"===typeof F&&g?.capabilities?.queryRelated?.supportsCount){yield q.load();var K=q.createQuery();
K=new h({cacheHint:g.capabilities?.queryRelated?.supportsCacheHint??!1,relationshipId:y,returnGeometry:!1,objectIds:[F],where:K.where});K=yield g.queryRelatedFeaturesCount(K,{signal:I?.signal});this._set("featureCount",K[F]||0)}else this._set("featureCount",0)});return function(){return w.apply(this,arguments)}}();z._sliceFeatures=function(w){const {showAllEnabled:g,displayCount:q}=this;return g?w:q?w.slice(0,q):[]};z._queryPage=function(){var w=m._asyncToGenerator(function*(){const {relatedFeatures:g,
featurePage:q,showAllEnabled:y,_queryPageAbortController:F}=this;!y||2>q||g.addMany(yield this._queryRelatedFeatures({signal:F?.signal}))});return function(){return w.apply(this,arguments)}}();z._queryRelatedFeatures=function(){var w=m._asyncToGenerator(function*(g){const {orderByFieldsFixedCasing:q,showAllEnabled:y,featuresPerPage:F,displayCount:I,layer:K,relationshipId:N,featurePage:S,featureCount:P,relatedLayer:J}=this;yield K?.load();const {relationship:L,objectId:T}=this;if(!L||"number"!==typeof T||
!K?.capabilities?.queryRelated?.supportsPagination)return[];var H=y?((S-1)*F+P)%P:0;const u=y?F:I;if(!J)return[];yield J.load();var d=J.objectIdField;d=[...q?.map(Q=>Q.field),d];const E=q?.map(Q=>`${Q.field} ${Q.order}`),D=K.capabilities?.queryRelated?.supportsCacheHint||!1,M=J.createQuery();H=new h({orderByFields:E,start:H,num:u,outFields:d,cacheHint:D,relationshipId:N,returnGeometry:!1,objectIds:[T],where:M.where});g=(yield K.queryRelatedFeatures(H,{signal:g?.signal}))[T]?.features||[];g.forEach(Q=>
Q.sourceLayer=J);return g});return function(g){return w.apply(this,arguments)}}();m._createClass(t,[{key:"featurePage",get:function(){return this._get("featurePage")},set:function(w){const {featuresPerPage:g,featureCount:q}=this;this._set("featurePage",Math.min(Math.max(w,1),Math.ceil(q/g)||1))}},{key:"orderByFieldsFixedCasing",get:function(){const {orderByFields:w,relatedLayer:g}=this;return w&&g?.loaded?w.map(q=>{const y=q.clone();q=c.getFixedFieldName(q.field,g);y.field=q;return y}):w}},{key:"itemDescriptionFieldName",
get:function(){return this.orderByFieldsFixedCasing?.[0]?.field||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(w){this._set("displayCount",Math.min(Math.max(w,0),10))}},{key:"objectId",get:function(){return this.graphic?.attributes?.[this.objectIdField]??null}},{key:"objectIdField",get:function(){return this.layer?.objectIdField||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new A}},{key:"relatedLayer",get:function(){const {layer:w,
map:g,relationship:q}=this;return w?.loaded?c.findRelatedLayer(g,w,q):null}},{key:"relationship",get:function(){const {relationshipId:w,layer:g}=this;return"number"===typeof w?g?.relationships?.find(({id:q})=>q===w)??null:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new A}},{key:"state",get:function(){const {_queryAbortController:w,_queryFeatureCountAbortController:g,_queryPageAbortController:q,graphic:y,relatedLayer:F}=this;return g?"loading":
w||q?"querying":y&&F?"ready":"disabled"}}]);return t}(x.ClonableMixin(C.IdentifiableMixin(B.HandleOwnerMixin(f))));v.__decorate([a.property()],f.prototype,"_queryAbortController",void 0);v.__decorate([a.property()],f.prototype,"_queryPageAbortController",void 0);v.__decorate([a.property()],f.prototype,"_queryFeatureCountAbortController",void 0);v.__decorate([a.property({value:1})],f.prototype,"featurePage",null);v.__decorate([a.property()],f.prototype,"featuresPerPage",void 0);v.__decorate([a.property({readOnly:!0})],
f.prototype,"orderByFieldsFixedCasing",null);v.__decorate([a.property()],f.prototype,"description",void 0);v.__decorate([a.property({readOnly:!0})],f.prototype,"itemDescriptionFieldName",null);v.__decorate([a.property({value:3})],f.prototype,"displayCount",null);v.__decorate([a.property({type:k})],f.prototype,"graphic",void 0);v.__decorate([a.property()],f.prototype,"layer",void 0);v.__decorate([a.property()],f.prototype,"map",void 0);v.__decorate([a.property({readOnly:!0})],f.prototype,"objectId",
null);v.__decorate([a.property({readOnly:!0})],f.prototype,"objectIdField",null);v.__decorate([a.property()],f.prototype,"orderByFields",void 0);v.__decorate([a.property({readOnly:!0})],f.prototype,"relatedFeatures",null);v.__decorate([a.property({readOnly:!0})],f.prototype,"relatedLayer",null);v.__decorate([a.property({readOnly:!0})],f.prototype,"relationship",null);v.__decorate([a.property({readOnly:!0})],f.prototype,"featureCount",void 0);v.__decorate([a.property({readOnly:!0})],f.prototype,"relatedFeatureViewModels",
null);v.__decorate([a.property()],f.prototype,"relationshipId",void 0);v.__decorate([a.property()],f.prototype,"showAllEnabled",void 0);v.__decorate([a.property({readOnly:!0})],f.prototype,"state",null);v.__decorate([a.property()],f.prototype,"title",void 0);return f=v.__decorate([e.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],f)})},"esri/widgets/Feature/FeatureViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Graphic ../../arcade/featureset/support/FeatureSetQueryInterceptor ../../core/Accessor ../../core/Handles ../../core/Identifiable ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/throttle ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../popup/content/TextContent ./FeatureAttachments/FeatureAttachmentsViewModel ./FeatureContent/FeatureContentViewModel ./FeatureExpression/FeatureExpressionViewModel ./FeatureFields/FeatureFieldsViewModel ./FeatureMedia/FeatureMediaViewModel ./FeatureRelationship/FeatureRelationshipViewModel ./support/arcadeFeatureUtils ./support/featureUtils ./support/relatedFeatureUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I){var K;const N={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};x=K=function(S){function P(L){var T=S.call(this,L)||this;T._handles=new A;T._error=null;T._featureAbortController=null;T._graphicChangedThrottled=a.throttle(T._graphicChanged,1,m._assertThisInitialized(T));T._expressionAttributes=null;T._graphicExpressionAttributes=null;T.abilities=
{...N};T.content=null;T.contentViewModels=[];T.description=null;T.defaultPopupTemplateEnabled=!1;T.formattedAttributes=null;T.lastEditInfo=null;T.relatedInfos=new Map;T.title="";T.view=null;T._isAllowedContentType=H=>{const {abilities:u}=m._assertThisInitialized(T);return"attachments"===H.type&&u.attachmentsContent||"custom"===H.type&&u.customContent||"fields"===H.type&&u.fieldsContent||"media"===H.type&&u.mediaContent||"text"===H.type&&u.textContent||"expression"===H.type&&u.expressionContent||"relationship"===
H.type&&u.relationshipContent};T._handles.add(r.watch(()=>[T.graphic,T._effectivePopupTemplate,T.abilities],()=>T._graphicChangedThrottled(),r.initial));return T}m._inheritsLoose(P,S);var J=P.prototype;J.destroy=function(){this._clear();this._cancelFeatureQuery();this._error=null;this._handles.destroy();this.graphic=this._handles=null;this._destroyContentViewModels();this.relatedInfos.clear()};J.castAbilities=function(L){return{...N,...L}};J.setActiveMedia=function(L,T){L=this.contentViewModels[L];
L instanceof g&&L.setActiveMedia(T)};J.nextMedia=function(L){L=this.contentViewModels[L];L instanceof g&&L.next()};J.previousMedia=function(L){L=this.contentViewModels[L];L instanceof g&&L.previous()};J._clear=function(){this._set("title","");this._set("content",null);this._set("formattedAttributes",null)};J._graphicChanged=function(){var L=m._asyncToGenerator(function*(){this._cancelFeatureQuery();this._error=null;this._clear();const {graphic:T}=this;if(T){var H=new AbortController;this._featureAbortController=
H;try{yield this._queryFeature({signal:H.signal})}catch(u){l.isAbortError(u)||(this._error=u,C.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:u,graphic:T,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===H&&(this._featureAbortController=null)}});return function(){return L.apply(this,arguments)}}();J._cancelFeatureQuery=function(){const {_featureAbortController:L}=this;L&&L.abort();this._featureAbortController=
null};J._compileContentElement=function(L,T){if("attachments"===L.type)return this._compileAttachments(L,T);if("custom"===L.type)return this._compileCustom(L,T);if("fields"===L.type)return this._compileFields(L,T);if("media"===L.type)return this._compileMedia(L,T);if("text"===L.type)return this._compileText(L,T);if("expression"===L.type)return this._compileExpression(L,T);if("relationship"===L.type)return this._compileRelationship(L,T)};J._compileContent=function(L){this._destroyContentViewModels();
if(this.graphic)return Array.isArray(L)?L.filter(this._isAllowedContentType).map((T,H)=>this._compileContentElement(T,H)):"string"===typeof L?this._compileText(new c({text:L}),0).text:L};J._destroyContentViewModels=function(){this._handles?.remove("relationship-view-models");this._handles?.remove("content-view-models");this.contentViewModels.forEach(L=>L&&!L.destroyed&&L.destroy());this._set("contentViewModels",[])};J._matchesFeature=function(L,T){L=L?.graphic?.getObjectId();T=T?.getObjectId();return G.isSome(L)&&
G.isSome(T)&&L===T};J._setRelatedFeaturesViewModels=function({relatedFeatureViewModels:L,relatedFeatures:T,map:H}){T?.filter(Boolean).forEach(u=>{L.find(d=>this._matchesFeature(d,u))||L.add(new K({abilities:{relationshipContent:!1},map:H,graphic:u}))});L.forEach(u=>{T?.find(d=>this._matchesFeature(u,d))||L.remove(u)})};J._setExpressionContentVM=function(L,T){const {formattedAttributes:H}=this,{contentElement:u,contentElementViewModel:d}=L;L=u?.type;d&&L&&("fields"===L&&(this._createFieldsFormattedAttributes({contentElement:u,
contentElementIndex:T,formattedAttributes:H}),d.set(this._createFieldsVMParams(u,T))),"media"===L&&(this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:T,formattedAttributes:H}),d.set(this._createMediaVMParams(u,T))),"text"===L&&d.set(this._createTextVMParams(u)))};J._compileRelationship=function(L,T){const {displayCount:H,orderByFields:u,relationshipId:d,title:E,description:D}=L,{_sourceLayer:M,graphic:Q,map:V}=this,Z=new q({displayCount:H,graphic:Q,orderByFields:u,relationshipId:d,
layer:M,map:V,...this._compileTitleAndDesc({title:E,description:D})});this.contentViewModels[T]=Z;this._handles.add(r.on(()=>Z.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(Z)),"relationship-view-models");return L};J._compileExpression=function(L,T){const {expressionInfo:H}=L,{graphic:u,map:d,spatialReference:E,view:D}=this,M=new z({expressionInfo:H,graphic:u,interceptor:K.interceptor,map:d,spatialReference:E,view:D});this.contentViewModels[T]=M;this._handles.add(r.watch(()=>M.contentElementViewModel,
()=>this._setExpressionContentVM(M,T),r.initial),"content-view-models");return L};J._compileAttachments=function(L,T){const {graphic:H}=this,{description:u,title:d}=L;this.contentViewModels[T]=new n({graphic:H,...this._compileTitleAndDesc({title:d,description:u})});return L};J._compileCustom=function(L,T){const {graphic:H}=this,{creator:u,destroyer:d}=L;this.contentViewModels[T]=new t({graphic:H,creator:u,destroyer:d});return L};J._compileTitleAndDesc=function({title:L,description:T}){const {_fieldInfoMap:H,
_sourceLayer:u,graphic:d,formattedAttributes:E,_expressionAttributes:D}=this,{attributes:M}=d,Q=E.global;return{title:F.substituteFieldsInLinksAndAttributes({attributes:M,fieldInfoMap:H,globalAttributes:Q,expressionAttributes:D,layer:u,text:L}),description:F.substituteFieldsInLinksAndAttributes({attributes:M,fieldInfoMap:H,globalAttributes:Q,expressionAttributes:D,layer:u,text:T})}};J._createFieldsVMParams=function(L,T){const {_effectivePopupTemplate:H,formattedAttributes:u}=this,d={...u.global,...u.content[T]};
T=(L?.fieldInfos||H?.fieldInfos)?.filter(({fieldName:M})=>F.isExpressionField(M)||F.isRelatedField(M)||d.hasOwnProperty(M));const {description:E,title:D}=L;return{attributes:d,expressionInfos:H?.expressionInfos,fieldInfos:T,...this._compileTitleAndDesc({title:D,description:E})}};J._compileFields=function(L,T){const H=L.clone();L=new w(this._createFieldsVMParams(L,T));this.contentViewModels[T]=L;H.fieldInfos=L.formattedFieldInfos.slice(0);return H};J._createMediaVMParams=function(L,T){const {abilities:H,
graphic:u,_fieldInfoMap:d,formattedAttributes:E,_effectivePopupTemplate:D,relatedInfos:M,_sourceLayer:Q,_expressionAttributes:V}=this,{attributes:Z}=u,{description:ba,mediaInfos:fa,title:ea}=L;return{abilities:{chartAnimation:H.chartAnimation},activeMediaInfoIndex:L.activeMediaInfoIndex||0,attributes:Z,layer:Q,fieldInfoMap:d,formattedAttributes:{...E.global,...E.content[T]},expressionAttributes:V,mediaInfos:fa,popupTemplate:D,relatedInfos:M,...this._compileTitleAndDesc({title:ea,description:ba})}};
J._compileMedia=function(L,T){const H=L.clone();L=new g(this._createMediaVMParams(L,T));H.mediaInfos=L.formattedMediaInfos.slice(0);this.contentViewModels[T]=L;return H};J._createTextVMParams=function(L){const {graphic:T,_fieldInfoMap:H,_sourceLayer:u,_expressionAttributes:d}=this;if(L&&L.text){const {attributes:E}=T;L.text=F.substituteFieldsInLinksAndAttributes({attributes:E,fieldInfoMap:H,globalAttributes:this.formattedAttributes.global,expressionAttributes:d,layer:u,text:L.text})}return{graphic:T,
creator:L.text}};J._compileText=function(L,T){L=L.clone();this.contentViewModels[T]=new t(this._createTextVMParams(L));return L};J._compileLastEditInfo=function(){const {_effectivePopupTemplate:L,_sourceLayer:T,graphic:H}=this;if(L){var {lastEditInfoEnabled:u}=L,d=T?.editFieldsInfo;if(u&&d)return F.formatEditInfo(d,H.attributes)}};J._compileTitle=function(L){const {_fieldInfoMap:T,_sourceLayer:H,graphic:u,_expressionAttributes:d}=this,{attributes:E}=u;return F.substituteFieldsInLinksAndAttributes({attributes:E,
fieldInfoMap:T,globalAttributes:this.formattedAttributes.global,expressionAttributes:d,layer:H,text:L})};J._getTitle=function(){var L=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:T,graphic:H}=this;return F.graphicCallback(T?.title,{graphic:H})});return function(){return L.apply(this,arguments)}}();J._getContent=function(){var L=m._asyncToGenerator(function*(){const {_effectivePopupTemplate:T,graphic:H}=this;return F.graphicCallback(T?.content,{graphic:H})});return function(){return L.apply(this,
arguments)}}();J._queryFeature=function(){var L=m._asyncToGenerator(function*(T){const {_featureAbortController:H,_sourceLayer:u,graphic:d,_effectivePopupTemplate:E,spatialReference:D,map:M,view:Q}=this;if(H===this._featureAbortController&&d){yield F.queryUpdatedFeature({graphic:d,popupTemplate:E,layer:u,spatialReference:D},T);var {content:{value:V},title:{value:Z}}=yield l.eachAlways({content:this._getContent(),title:this._getTitle()});({expressionAttributes:{value:T}}=yield l.eachAlways({checkForRelatedFeatures:this._checkForRelatedFeatures(T),
expressionAttributes:y.createCompiledExpressions({expressionInfos:E?.expressionInfos,spatialReference:D,graphic:d,map:M,interceptor:K.interceptor,view:Q})}));H===this._featureAbortController&&d&&(this._expressionAttributes=T,this._graphicExpressionAttributes={...d.attributes,...T},this._set("formattedAttributes",this._createFormattedAttributes(V)),this._set("title",this._compileTitle(Z)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(V)||null))}});
return function(T){return L.apply(this,arguments)}}();J._createMediaFormattedAttributes=function({contentElement:L,contentElementIndex:T,formattedAttributes:H}){const {_effectivePopupTemplate:u,graphic:d,relatedInfos:E,_sourceLayer:D,_fieldInfoMap:M,_graphicExpressionAttributes:Q}=this;H.content[T]=F.formatAttributes({fieldInfos:u?.fieldInfos,graphic:d,attributes:{...Q,...L.attributes},layer:D,fieldInfoMap:M,relatedInfos:E})};J._createFieldsFormattedAttributes=function({contentElement:L,contentElementIndex:T,
formattedAttributes:H}){if(L.fieldInfos){const {graphic:u,relatedInfos:d,_sourceLayer:E,_fieldInfoMap:D,_graphicExpressionAttributes:M}=this;H.content[T]=F.formatAttributes({fieldInfos:L.fieldInfos,graphic:u,attributes:{...M,...L.attributes},layer:E,fieldInfoMap:D,relatedInfos:d})}};J._createFormattedAttributes=function(L){const {_effectivePopupTemplate:T,graphic:H,relatedInfos:u,_sourceLayer:d,_fieldInfoMap:E,_graphicExpressionAttributes:D}=this,M={global:F.formatAttributes({fieldInfos:T?.fieldInfos,
graphic:H,attributes:D,layer:d,fieldInfoMap:E,relatedInfos:u}),content:[]};Array.isArray(L)&&L.forEach((Q,V)=>{"fields"===Q.type&&this._createFieldsFormattedAttributes({contentElement:Q,contentElementIndex:V,formattedAttributes:M});"media"===Q.type&&this._createMediaFormattedAttributes({contentElement:Q,contentElementIndex:V,formattedAttributes:M})});return M};J._checkForRelatedFeatures=function(L){const {graphic:T,_effectivePopupTemplate:H}=this;return this._queryRelatedInfos(T,F.getAllFieldInfos(H),
L)};J._queryRelatedInfos=function(){var L=m._asyncToGenerator(function*(T,H,u){const {relatedInfos:d,_sourceLayer:E}=this;d.clear();const D=G.isSome(E.associatedLayer)?yield E.associatedLayer.load(u):E;if(D){var M=H.filter(Z=>Z&&F.isRelatedField(Z.fieldName));if(M&&M.length){H.forEach(Z=>this._configureRelatedInfo(Z,D));var Q=yield I.queryLayerInfos({relatedInfos:d,layer:D},u);Object.keys(Q).forEach(Z=>{const ba=d.get(Z.toString());Z=Q[Z]?.value;ba&&Z&&(ba.layerInfo=Z.data)});var V=yield I.queryRelatedFeatures({graphic:T,
relatedInfos:d,layer:D},u);Object.keys(V).forEach(Z=>{I.setRelatedFeatures(V[Z]?.value,d.get(Z.toString()))})}}});return function(T,H,u){return L.apply(this,arguments)}}();J._configureRelatedInfo=function(L,T){const {relatedInfos:H}=this,u=I.getRelatedFieldInfo(L.fieldName);if(u){var {layerId:d,fieldName:E}=u;d&&(T=H.get(d.toString())||I.createRelatedInfo(d,T))&&(I.updateRelatedInfo({relatedInfo:T,fieldName:E,fieldInfo:L}),this.relatedInfos.set(d,T))}};m._createClass(P,[{key:"_effectivePopupTemplate",
get:function(){return G.isSome(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return F.createfieldInfoMap(F.getAllFieldInfos(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return F.getSourceLayer(this.graphic)}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(L){this._set("graphic",
L?L.clone():null)}},{key:"spatialReference",get:function(){return this.view?.spatialReference??null},set:function(L){this._override("spatialReference",L)}},{key:"map",get:function(){return this.view?.map||null},set:function(L){this._override("map",L)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}}]);return P}(B.IdentifiableMixin(x));x.interceptor=new f.FeatureSetQueryInterceptor(F.preLayerQueryCallback,F.preRequestCallback);v.__decorate([b.property()],x.prototype,
"_error",void 0);v.__decorate([b.property()],x.prototype,"_featureAbortController",void 0);v.__decorate([b.property({readOnly:!0})],x.prototype,"_effectivePopupTemplate",null);v.__decorate([b.property({readOnly:!0})],x.prototype,"_fieldInfoMap",null);v.__decorate([b.property({readOnly:!0})],x.prototype,"_sourceLayer",null);v.__decorate([b.property()],x.prototype,"abilities",void 0);v.__decorate([e.cast("abilities")],x.prototype,"castAbilities",null);v.__decorate([b.property({readOnly:!0})],x.prototype,
"content",void 0);v.__decorate([b.property({readOnly:!0})],x.prototype,"contentViewModels",void 0);v.__decorate([b.property()],x.prototype,"description",void 0);v.__decorate([b.property({type:Boolean})],x.prototype,"defaultPopupTemplateEnabled",void 0);v.__decorate([b.property({readOnly:!0})],x.prototype,"state",null);v.__decorate([b.property({readOnly:!0})],x.prototype,"formattedAttributes",void 0);v.__decorate([b.property({type:k,value:null})],x.prototype,"graphic",null);v.__decorate([b.property({readOnly:!0})],
x.prototype,"lastEditInfo",void 0);v.__decorate([b.property({readOnly:!0})],x.prototype,"relatedInfos",void 0);v.__decorate([b.property()],x.prototype,"spatialReference",null);v.__decorate([b.property({readOnly:!0})],x.prototype,"title",void 0);v.__decorate([b.property()],x.prototype,"map",null);v.__decorate([b.property({readOnly:!0})],x.prototype,"waitingForContent",null);v.__decorate([b.property()],x.prototype,"view",void 0);return x=K=v.__decorate([h.subclass("esri.widgets.FeatureViewModel")],
x)})},"esri/arcade/featureset/support/FeatureSetQueryInterceptor":function(){define(["exports"],function(m){m.FeatureSetQueryInterceptor=function(v,k){this.preLayerQueryCallback=v;this.preRequestCallback=k;this.preLayerQueryCallback||(this.preLayerQueryCallback=f=>{});this.preRequestCallback||(this.preLayerQueryCallback=f=>{})};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/resources":function(){define(["exports"],function(m){m.CSS=
{iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentNode:"esri-feature__content-node",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",
fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Feature/support/FeatureContentMixin":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/Error ../../../core/has ../../../core/accessorSupport/decorators/subclass ../resources ../../support/widget ../../support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a){m.FeatureContentMixin=b=>{b=function(p){function e(){var h=p.apply(this,arguments)||this;h.renderNodeContent=c=>r.isWidget(c)&&!c.destroyed?a.tsx("div",{class:l.CSS.contentNode,key:c},c.render()):c instanceof HTMLElement?a.tsx("div",{class:l.CSS.contentNode,key:c,bind:c,afterCreate:h._attachToNode}):r.hasDomNode(c)?a.tsx("div",{class:l.CSS.contentNode,key:c,bind:c.domNode,afterCreate:h._attachToNode}):null;return h}v._inheritsLoose(e,p);e.prototype._attachToNode=
function(h){h.appendChild(this)};return e}(b);return b=k.__decorate([G.subclass("esri.widgets.Feature.ContentMixin")],b)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Spinner":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){B=function(p){function e(c,n){c=p.call(this,c,n)||this;c._animationDelay=500;c._animationPromise=null;c.viewModel=new r;return c}m._inheritsLoose(e,p);var h=e.prototype;h.initialize=function(){this.addHandles(x.watch(()=>this.visible,c=>this._visibleChange(c)))};h.destroy=function(){this._animationPromise=null};h.show=function(c){const {location:n,promise:t}=c;n&&(this.viewModel.location=n);this.visible=!0;c=()=>this.hide();t&&t.catch(()=>{}).then(c)};h.hide=function(){this.visible=
!1};h.render=function(){var {visible:c}=this,{screenLocation:n}=this.viewModel;n=!!n;c={["esri-spinner--start"]:c&&n,["esri-spinner--finish"]:!c&&n};n=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",c),styles:n})};h._visibleChange=function(c){if(c)this.viewModel.screenLocationEnabled=!0;else{var n=f.after(this._animationDelay);this._animationPromise=n;n.catch(()=>{}).then(()=>{this._animationPromise===n&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=
null)})}};h._getPositionStyles=function(){const {screenLocation:c,view:n}=this.viewModel;if(k.isNone(n)||k.isNone(c))return{};const {padding:t}=n;return{left:`${c.x-t.left}px`,top:`${c.y-t.top}px`}};m._createClass(e,[{key:"location",get:function(){return this.viewModel.location},set:function(c){this.viewModel.location=c}},{key:"view",get:function(){return this.viewModel.view},set:function(c){this.viewModel.view=c}},{key:"visible",get:function(){return this.viewModel.visible},set:function(c){this.viewModel.visible=
c}}]);return e}(l);v.__decorate([A.property()],B.prototype,"location",null);v.__decorate([A.property()],B.prototype,"view",null);v.__decorate([A.property({type:r})],B.prototype,"viewModel",void 0);v.__decorate([A.property()],B.prototype,"visible",null);return B=v.__decorate([G.subclass("esri.widgets.Spinner")],B)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),
function(m,v,k,f,x,A,B){f=function(C){function G(l){l=C.call(this,l)||this;l.visible=!1;return l}m._inheritsLoose(G,C);return G}(B);v.__decorate([k.property()],f.prototype,"visible",void 0);return f=v.__decorate([A.subclass("esri.widgets.CompassViewModel")],f)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Evented ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B,C,G,l){const r=Symbol("anchorHandles");k=function(b){function p(e){var h=b.call(this,e)||this;h[a]=new f;h.location=null;h.screenLocationEnabled=!1;h.view=null;h[r].add([A.when(()=>x.applySome(h.screenLocationEnabled?h.view:null,c=>[c.size,"3d"===c.type?c.camera:c.viewpoint]),()=>h.notifyChange("screenLocation")),A.watch(()=>h.screenLocation,(c,n)=>{x.isSome(c)&&x.isSome(n)&&h.emit("view-change")})]);return h}m._inheritsLoose(p,b);p.prototype.destroy=function(){this.view=null;
this[r]=x.destroyMaybe(this[r])};m._createClass(p,[{key:"screenLocation",get:function(){const {location:e,view:h,screenLocationEnabled:c}=this;return c&&x.isSome(e)&&x.isSome(h)&&h.ready?h.toScreen(e):null}}]);return p}(k.EventedAccessor);var a=r;v.__decorate([B.property()],k.prototype,"location",void 0);v.__decorate([B.property()],k.prototype,"screenLocation",null);v.__decorate([B.property()],k.prototype,"screenLocationEnabled",void 0);v.__decorate([B.property()],k.prototype,"view",void 0);return k=
v.__decorate([l.subclass("esri.widgets.support.AnchorElementViewModel")],k)})},"esri/widgets/Popup/PopupViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../symbols ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/webMercatorUtils ../../layers/Layer ../../layers/LayerConstants ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../symbols/support/symbolUtils ../../views/input/InputManager ../../views/support/layerViewUtils ../Feature/FeatureViewModel ./actions ./actionUtils ../support/AnchorElementViewModel ../support/GoTo ../../symbols/SimpleFillSymbol ../../geometry/Point".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I,K,N,S,P,J){const L=A.ofType({key:"type",defaultKeyValue:"button",base:t,typeMap:{button:z,toggle:w}});k=function(T){function H(d){d=T.call(this,d)||this;d._handles=new C;d._pendingPromises=new Set;d._fetchFeaturesController=null;d._selectedClusterFeature=null;d.featurePage=null;d.actions=new L;d.activeFeature=null;d.defaultPopupTemplateEnabled=!1;d.autoCloseEnabled=!1;d.autoOpenEnabled=!0;d.browseClusterEnabled=!1;d.content=null;d.featuresPerPage=
20;d.featureViewModelAbilities=null;d.featureViewModels=[];d.highlightEnabled=!0;d.includeDefaultActions=!0;d.selectedClusterBoundaryFeature=new f({symbol:new P({outline:{width:1.5,color:"cyan"},style:"none"})});d.title=null;d.updateLocationEnabled=!1;d.view=null;d.visible=!1;d.zoomFactor=4;d.zoomToLocation=null;return d}m._inheritsLoose(H,T);var u=H.prototype;u.initialize=function(){this._handles.add([r.watch(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",
()=>this._autoClose()),r.watch(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),r.watch(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),r.watch(()=>this.view?.animation?.state,d=>this._animationStateChange(d)),r.watch(()=>this.location,d=>this._locationChange(d)),r.watch(()=>this.selectedFeature,d=>this._selectedFeatureChange(d)),r.watch(()=>[this.selectedFeatureIndex,this.featureCount,
this.featuresPerPage],()=>this._selectedFeatureIndexChange()),r.watch(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),r.watch(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",d=>K.triggerAction({event:d,view:this.view})),r.when(()=>!this.waitingForResult,()=>this._waitingForResultChange(),r.sync),r.watch(()=>[this.features,this.view?.map,this.view?.spatialReference],
()=>this._updateFeatureVMs()),r.watch(()=>this.view?.scale,()=>this._viewScaleChange()),r.when(()=>!this.visible,()=>this.browseClusterEnabled=!1),r.watch(()=>this.browseClusterEnabled,d=>d?this.enableClusterBrowsing():this.disableClusterBrowsing())])};u.destroy=function(){this._cancelFetchingFeatures();this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.browseClusterEnabled=!1;this.view=null};u.centerAtLocation=function(){const {view:d}=this,E=K.getSelectedTarget(this);
return E?this.callGoTo({target:{target:E,scale:d.scale}}):Promise.reject(new B("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:E,view:d}))};u.zoomTo=function(d){return this.callGoTo(d)};u.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})};u.fetchFeatures=function(d,E){const {view:D}=this;if(!D||!d)throw new B("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",
{screenPoint:d,view:D});return D.fetchPopupFeatures(d,{event:E&&E.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:E&&E.signal})};u.open=function(d){d={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...d,visible:!0};var {fetchFeatures:E}=d;delete d.fetchFeatures;E&&this._setFetchFeaturesPromises(d.location);E=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const D of E)delete d[D];this.set(d)};u.triggerAction=function(d){(d=this.allActions.getItemAt(d))&&!d.disabled&&
this.emit("trigger-action",{action:d})};u.next=function(){this.selectedFeatureIndex+=1;return this};u.previous=function(){--this.selectedFeatureIndex;return this};u.disableClusterBrowsing=function(){K.removeClusteredFeaturesForBrowsing(this);this._clearBrowsedClusterGraphics()};u.enableClusterBrowsing=function(){var d=m._asyncToGenerator(function*(){const {view:E,selectedFeature:D}=this;"2d"!==E?.type?G.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",
D):K.isClusterFeature(D)?(yield K.displayClusterExtent(this),yield K.browseAggregateFeatures(this)):G.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",D)});return function(){return d.apply(this,arguments)}}();u._animationStateChange=function(d){this.zoomToLocation||(I.zoomToFeature.disabled="waiting-for-target"===d)};u._clearBrowsedClusterGraphics=function(){const d=this.view?.graphics;d&&(d.remove(this.selectedClusterBoundaryFeature),
d.remove(this._selectedClusterFeature));this._selectedClusterFeature=null;this.selectedClusterBoundaryFeature.geometry=null};u._viewScaleChange=function(){K.isClusterFeature(this.selectedFeature)?(this.visible=this.browseClusterEnabled=!1,this.clear()):this.browseClusterEnabled&&(this.features=[this.selectedFeature])};u._locationChange=function(d){const {selectedFeature:E,updateLocationEnabled:D}=this;D&&d&&(!E||E.geometry)&&this.centerAtLocation()};u._selectedFeatureIndexChange=function(){this.featurePage=
1<this.featureCount?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null};u._featureViewModelsChange=function(){this.featurePage=1<this.featureCount?1:null};u._setGraphicOnFeatureViewModels=function(){const {features:d,featureCount:E,featurePage:D,featuresPerPage:M,featureViewModels:Q}=this;if(null!==D){var V=((D-1)*M+E)%E;Q.slice(V,V+M).forEach((Z,ba)=>{Z&&!Z.graphic&&(Z.graphic=d[V+ba])})}};u._selectedFeatureChange=function(){var d=m._asyncToGenerator(function*(E){if(E){var {location:D,
updateLocationEnabled:M,view:Q}=this;this.browseClusterEnabled?(this._selectedClusterFeature&&(Q.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),K.isClusterFeature(E)||(E.symbol=yield g.getDisplayedSymbol(E),this._selectedClusterFeature=E,Q.graphics.add(this._selectedClusterFeature))):!M&&D||!E.geometry?M&&!E.geometry&&this.centerAtLocation().then(()=>{this.location=Q.center.clone()}):this.location=l.unwrap(this._getPointFromGeometry(E.geometry))}});return function(E){return d.apply(this,
arguments)}}();u._waitingForResultChange=function(){!this.featureCount&&this.promises&&(this.visible=!1)};u._setFetchFeaturesPromises=function(d){return this._fetchFeaturesWithController(this._getScreenPoint(d||this.location)).then(E=>{const {clientOnlyGraphics:D,promisesPerLayerView:M}=E;E=Promise.resolve(D);const Q=M.map(V=>V.promise);this.promises=[E,...Q]})};u._destroyFeatureVMs=function(){this.featureViewModels.forEach(d=>d&&!d.destroyed&&d.destroy());this._set("featureViewModels",[])};u._updateFeatureVMs=
function(){const {selectedFeature:d,features:E,featureViewModels:D}=this;K.isClusterFeature(d)||(this.browseClusterEnabled=!1);this._destroyFeatureVMs();if(E&&E.length){var M=D.slice(0),Q=[];E.forEach((V,Z)=>{if(V){var ba=null;M.some((fa,ea)=>{fa&&fa.graphic===V&&(ba=fa,M.splice(ea,1));return!!ba});if(ba)Q[Z]=ba;else{const fa=new F({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:this.view?.spatialReference,graphic:V===d?V:null,
map:this.view?.map,view:this.view});Q[Z]=fa}}});M.forEach(V=>V&&!V.destroyed&&V.destroy());this._set("featureViewModels",Q)}};u._getScreenPoint=function(d){const {view:E}=this;return E&&d&&"function"===typeof E.toScreen?E.toScreen(d):null};u._autoOpenEnabledChange=function(){const {_handles:d,autoOpenEnabled:E}=this;d.remove("auto-fetch-features");if(E&&this.view){const D=this.view.on("click",M=>{"mouse"===M.pointerType&&0!==M.button||this._fetchFeaturesAndOpen(M)},q.ViewEventPriorities.WIDGET);d.add(D,
"auto-fetch-features")}};u._cancelFetchingFeatures=function(){const d=this._fetchFeaturesController;d&&d.abort();this._fetchFeaturesController=null;this.notifyChange("waitingForResult")};u._fetchFeaturesWithController=function(d,E){this._cancelFetchingFeatures();const D=new AbortController,{signal:M}=D;this._fetchFeaturesController=D;this.notifyChange("waitingForResult");d=this.fetchFeatures(d,{signal:M,event:E});d.catch(()=>{}).then(()=>{this._fetchFeaturesController=null;this.notifyChange("waitingForResult")});
return d};u._fetchFeaturesAndOpen=function(d){const {screenPoint:E,mapPoint:D}=d,{view:M}=this;this._fetchFeaturesWithController(E,d).then(Q=>{const {clientOnlyGraphics:V,promisesPerLayerView:Z,location:ba}=Q,fa=[Promise.resolve(V),...Z.map(ea=>ea.promise)];M.popup.open({location:ba||D,promises:fa});return Q})};u._updatePendingPromises=function(d){d&&this._pendingPromises.has(d)&&(this._pendingPromises.delete(d),this.notifyChange("pendingPromisesCount"))};u._autoClose=function(){this.autoCloseEnabled&&
(this.visible=!1)};u._getPointFromGeometry=function(d){return l.isNone(d)?null:"point"===d.type?d:"extent"===d.type?d.center:"polygon"===d.type?d.centroid:"multipoint"===d.type||"polyline"===d.type?d.extent?.center:null};u._getLayerView=function(){var d=m._asyncToGenerator(function*(E,D){yield E.when();return E.whenLayerView(D)});return function(E,D){return d.apply(this,arguments)}}();u._getHighlightLayer=function(d){const {layer:E,sourceLayer:D}=d;return D&&"layer"in D&&D.layer?D.layer:"map-notes"===
D?.type||"subtype-group"===D?.type?D:E};u._getHighlightTarget=function(d,E){E="imagery"===E.type?void 0:"objectIdField"in E?E.objectIdField||n.fallbackObjectIDAttribute:null;const D=d.attributes;return D&&E&&D[E]||d};u._highlightActiveFeature=function(){var d=m._asyncToGenerator(function*(){this._handles.remove("highlight-active-feature");const {highlightEnabled:E,view:D,activeFeature:M,visible:Q}=this;if(M&&D&&E&&Q){var V=this._getHighlightLayer(M);if(V&&V instanceof c){var Z=this._getLayerView(D,
V);this._highlightActiveFeaturePromise=Z;var ba=yield Z;ba&&y.highlightsSupported(ba)&&this._highlightActiveFeaturePromise===Z&&this.activeFeature&&this.highlightEnabled&&(V=ba.highlight(this._getHighlightTarget(M,V)),this._handles.add(V,"highlight-active-feature"))}}});return function(){return d.apply(this,arguments)}}();u._highlightSelectedFeature=function(){var d=m._asyncToGenerator(function*(){this._handles.remove("highlight-selected-feature");const {selectedFeature:E,highlightEnabled:D,view:M,
visible:Q}=this;if(E&&M&&D&&Q){var V=this._getHighlightLayer(E);if(V&&V instanceof c){var Z=this._getLayerView(M,V);this._highlightSelectedFeaturePromise=Z;var ba=yield Z;ba&&y.highlightsSupported(ba)&&this._highlightSelectedFeaturePromise===Z&&this.selectedFeature&&this.highlightEnabled&&this.visible&&(V=ba.highlight(this._getHighlightTarget(E,V)),this._handles.add(V,"highlight-selected-feature"))}}});return function(){return d.apply(this,arguments)}}();u._updateFeatures=function(d){const {features:E}=
this;d&&d.length&&(E.length?(d=d.filter(D=>!E.includes(D)),this.features=E.concat(d)):this.features=d)};m._createClass(H,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some(d=>d.waitingForContent)}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){const d=this._get("allActions")||new L;d.removeAll();const {actions:E,defaultActions:D,defaultPopupTemplateEnabled:M,includeDefaultActions:Q,selectedFeature:V}=this;var Z=
Q?D.concat(E):E;const ba=V&&("function"===typeof V.getEffectivePopupTemplate&&V.getEffectivePopupTemplate(M)||V.popupTemplate),fa=ba&&ba.actions;(Z=ba&&ba.overwriteActions?fa:fa?fa.concat(Z):Z)&&Z.filter(Boolean).forEach(ea=>d.add(ea));return d}},{key:"defaultActions",get:function(){const d=this._get("defaultActions")||new L;d.removeAll();d.addMany(K.isClusterFeature(this.selectedFeature)?[I.zoomToClusteredFeatures.clone(),I.browseClusteredFeatures.clone()]:[I.zoomToFeature.clone()]);return d}},{key:"featureCount",
get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(d){d=d||[];this._set("features",d);const {pendingPromisesCount:E,promiseCount:D,selectedFeatureIndex:M}=this,Q=D&&d.length;Q&&E&&-1===M?this.selectedFeatureIndex=0:Q&&-1!==M||(this.selectedFeatureIndex=d.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(d){const E=this.get("view.spatialReference.isWebMercator");d&&d.get("spatialReference.isWGS84")&&
E&&(d=h.geographicToWebMercator(d));this._set("location",d)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||0<this.pendingPromisesCount)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(d){this._pendingPromises.clear();this.features=[];Array.isArray(d)&&d.length?(this._set("promises",
d),d=d.slice(0),d.forEach(E=>{this._pendingPromises.add(E);E.then(D=>{this._pendingPromises.has(E)&&this._updateFeatures(D);this._updatePendingPromises(E)},()=>this._updatePendingPromises(E))})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){const {features:d,selectedFeatureIndex:E}=this;return-1===E?null:d[E]||null}},{key:"selectedFeatureIndex",get:function(){const d=this._get("selectedFeatureIndex");return"number"===typeof d?d:-1},set:function(d){const {featureCount:E}=
this;d=isNaN(d)||-1>d||!E?-1:(d+E)%E;this.activeFeature=null;this._set("selectedFeatureIndex",d)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}}]);return H}(S.GoToMixin(N));v.__decorate([a.property()],k.prototype,"featurePage",void 0);v.__decorate([a.property()],k.prototype,"isLoadingFeature",null);v.__decorate([a.property({type:L})],k.prototype,"actions",
void 0);v.__decorate([a.property({readOnly:!0})],k.prototype,"active",null);v.__decorate([a.property()],k.prototype,"activeFeature",void 0);v.__decorate([a.property({readOnly:!0})],k.prototype,"allActions",null);v.__decorate([a.property({type:Boolean})],k.prototype,"defaultPopupTemplateEnabled",void 0);v.__decorate([a.property()],k.prototype,"autoCloseEnabled",void 0);v.__decorate([a.property()],k.prototype,"autoOpenEnabled",void 0);v.__decorate([a.property()],k.prototype,"browseClusterEnabled",void 0);
v.__decorate([a.property()],k.prototype,"content",void 0);v.__decorate([a.property({type:L,readOnly:!0})],k.prototype,"defaultActions",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"featureCount",null);v.__decorate([a.property()],k.prototype,"features",null);v.__decorate([a.property()],k.prototype,"featuresPerPage",void 0);v.__decorate([a.property()],k.prototype,"featureViewModelAbilities",void 0);v.__decorate([a.property({readOnly:!0})],k.prototype,"featureViewModels",void 0);v.__decorate([a.property()],
k.prototype,"highlightEnabled",void 0);v.__decorate([a.property()],k.prototype,"includeDefaultActions",void 0);v.__decorate([a.property({type:J})],k.prototype,"location",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"pendingPromisesCount",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"selectedClusterBoundaryFeature",void 0);v.__decorate([a.property({readOnly:!0})],k.prototype,"waitingForResult",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"promiseCount",null);
v.__decorate([a.property()],k.prototype,"promises",null);v.__decorate([a.property({value:null,readOnly:!0})],k.prototype,"selectedFeature",null);v.__decorate([a.property({value:-1})],k.prototype,"selectedFeatureIndex",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"selectedFeatureViewModel",null);v.__decorate([a.property({readOnly:!0})],k.prototype,"state",null);v.__decorate([a.property()],k.prototype,"title",void 0);v.__decorate([a.property()],k.prototype,"updateLocationEnabled",void 0);
v.__decorate([a.property()],k.prototype,"view",void 0);v.__decorate([a.property()],k.prototype,"visible",void 0);v.__decorate([a.property()],k.prototype,"zoomFactor",void 0);v.__decorate([a.property()],k.prototype,"zoomToLocation",void 0);v.__decorate([a.property()],k.prototype,"centerAtLocation",null);return k=v.__decorate([e.subclass("esri.widgets.Popup.PopupViewModel")],k)})},"esri/layers/LayerConstants":function(){define(["exports"],function(m){m.fallbackObjectIDAttribute="OBJECTID";Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils".split(" "),function(m,v,k,f,x,A,B,C,G,l){function r(t,z){if(z&&(t.style.filter=l.getCSSFilterFromEffectList(z),z=z.effects))for(const w of z)if("drop-shadow"===w?.type){0>w.offsetX?t.style.marginLeft=`${Math.abs(w.offsetX)}px`:
t.style.marginRight=`${w.offsetX}px`;break}}function a(t,z){return b.apply(this,arguments)}function b(){b=k._asyncToGenerator(function*(t,z){switch(t.type){case "web-style":var {previewWebStyleSymbol:w}=yield new Promise((g,q)=>m(["./previewWebStyleSymbol"],g,q));return w(t,a,z);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:w}=yield new Promise((g,q)=>m(["./previewSymbol3D"],g,q)),w(t,z);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:w}=
yield new Promise((g,q)=>m(["./previewSymbol2D"],g,q)),w(t,z);case "cim":return{previewCIMSymbol:w}=yield new Promise((g,q)=>m(["./previewCIMSymbol"],g,q)),w(t,z)}});return b.apply(this,arguments)}function p(t){return t&&"opacity"in t?t.opacity*p(t.parent):1}function e(){e=k._asyncToGenerator(function*(t,z){if(t){var w=t.sourceLayer,g=(x.isSome(z)&&(z.useSourceLayer??!1)?w:t.layer)??w;w=p(g);if(x.isSome(t.symbol)&&(!x.isSome(z)||!0!==z.ignoreGraphicSymbol))return t="web-style"===t.symbol.type?yield t.symbol.fetchSymbol({...z,
cache:x.isSome(z)?z.webStyleCache:null}):t.symbol.clone(),l.applyColorToSymbol(t,null,w),t;var q=(x.isSome(z)?z.renderer:null)??(g&&"renderer"in g?g.renderer:null);if(g=q&&"getSymbolAsync"in q?yield q.getSymbolAsync(t,z):null){g="web-style"===g.type?yield g.fetchSymbol({...z,cache:x.isSome(z)?z.webStyleCache:null}):g.clone();if(!(q&&"visualVariables"in q&&q.visualVariables&&q.visualVariables.length))return l.applyColorToSymbol(g,null,w),g;"arcadeRequiredForVisualVariables"in q&&q.arcadeRequiredForVisualVariables&&
(x.isNone(z)||x.isNone(z.arcade))&&(z={...x.unwrap(z)},z.arcade=yield A.loadArcade());var y=yield new Promise((P,J)=>m(["../../renderers/visualVariables/support/visualVariableUtils"],P,J)),F=[],I=[],K=[],N=[];for(var S of q.visualVariables)switch(S.type){case "color":F.push(S);break;case "opacity":I.push(S);break;case "rotation":N.push(S);break;case "size":S.target||K.push(S)}S=(S=!!F.length&&F[F.length-1])?y.getColor(S,t,z):null;I=(I=!!I.length&&I[I.length-1])?y.getOpacity(I,t,z):null;null!=w&&(I=
null!=I?I*w:w);l.applyColorToSymbol(g,S,I);K.length&&(w=y.getAllSizes(K,t,z),yield l.applySizesToSymbol(g,w));for(const P of N)l.applyRotationToSymbol(g,y.getRotationAngle(P,t,z),P.axis);return g}}});return e.apply(this,arguments)}function h(){h=k._asyncToGenerator(function*(t,z){if(t){var w=p(t.layer||t.sourceLayer);if(x.isSome(t.symbol)&&(!x.isSome(z)||!0!==z.ignoreGraphicSymbol))return t="web-style"===t.symbol.type?yield t.symbol.fetchSymbol(z):t.symbol.clone(),l.getColorFromSymbol(t,w);var g=
x.isSome(z)&&z.renderer||t.get("layer.renderer")||t.get("sourceLayer.renderer"),q=yield g.getSymbolAsync(t,z);if(q){q="web-style"===q.type?yield q.fetchSymbol(z):q.clone();var y=l.getColorFromSymbol(q,w);if(!("visualVariables"in g)||"visualVariables"in g&&!g.visualVariables||"visualVariables"in g&&!g.visualVariables?.length)return y;g.arcadeRequiredForVisualVariables&&(x.isNone(z)||x.isNone(z.arcade))&&(z={...x.unwrap(z)},z.arcade=yield A.loadArcade());q=yield new Promise((K,N)=>m(["../../renderers/visualVariables/support/visualVariableUtils"],
K,N));var F=[],I=[];for(const K of g.visualVariables)switch(K.type){case "color":F.push(K);break;case "opacity":I.push(K)}g=(g=0<F.length?F[F.length-1]:null)?q.getColor(g,t,z):y;t=(y=0<I.length?I[I.length-1]:null)?q.getOpacity(y,t,z):null;null!=w&&(t=null!=t?t*w:w);return g?l.applyOpacityToColor(g,t):null}}});return h.apply(this,arguments)}let c=null;const n=[255,255,255];v.getDisplayedColor=function(t,z){return h.apply(this,arguments)};v.getDisplayedSymbol=function(t,z){return e.apply(this,arguments)};
v.renderColorRampPreviewHTML=function(t,z={}){var w="horizontal"===z.align;const {width:g=w?75:24,height:q=w?24:75,gradient:y=!0}=z;var F=window.devicePixelRatio,I=g*F,K=q*F;F=document.createElement("canvas");F.width=I;F.height=K;F.style.width=`${g}px`;F.style.height=`${q}px`;const N=F.getContext("2d");var S=w?I:0,P=w?0:K;if(y){const J=N.createLinearGradient(0,0,S,P);w=t.length;const L=1===w?0:1/(w-1);t.forEach((T,H)=>J.addColorStop(H*L,T.toString()));N.fillStyle=J;N.fillRect(0,0,I,K)}else{I=w?I/
t.length:I;K=w?K:K/t.length;P=S=0;for(const J of t)N.fillStyle=J.toString(),N.fillRect(S,P,I,K),S=w?S+I:0,P=w?0:P+K}t=document.createElement("div");t.style.width=`${g}px`;t.style.height=`${q}px`;r(t,z?.effectList);t.appendChild(F);return t};v.renderDotDensityPreviewHTML=function(t,z,w){const {backgroundColor:g,outline:q,dotSize:y}=t;w=w&&w.swatchSize||C.SymbolSizeDefaults.size;const F=Math.round(w*w/y**2*.8),I=window.devicePixelRatio;t=document.createElement("canvas");const K=w*I;t.width=K;t.height=
K;t.style.width=`${t.width/I}px`;t.style.height=`${t.height/I}px`;const N=t.getContext("2d");g&&(N.fillStyle=g.toCss(!0),N.fillRect(0,0,K,K),N.fill());N.fillStyle=z.toCss(!0);if(c&&c.length/2===F)for(z=0;z<2*F;z+=2)N.fillRect(c[z],c[z+1],y*I,y*I),N.fill();else for(c=[],z=0;z<2*F;z+=2){const S=Math.floor(Math.random()*(K-0+1)),P=Math.floor(Math.random()*(K-0+1));c.push(S,P);N.fillRect(S,P,y*I,y*I);N.fill()}q&&(q.color&&(N.strokeStyle=q.color.toCss(!0)),N.lineWidth=q.width,N.strokeRect(0,0,K,K));w=
new Image(w,w);w.src=t.toDataURL();return w};v.renderPieChartPreviewHTML=function(t,z={}){const w=z.radius||40;var g=2*Math.PI*w,q=t.length;const y=g/q,F=[],I=B.getStroke(z.outline);null!=I?.width&&(I.width*=2);(I||z.backgroundColor)&&F.push({shape:{type:"circle",cx:w,cy:w,r:w},fill:z.backgroundColor,stroke:I,offset:[0,0]});const K=z.values,N=K&&K.length===q&&100===K.reduce((P,J)=>P+J,0),S=[0];for(let P=0;P<q;P++){let J=null;N&&(J=K[P]*g/100,S.push(J+S[P]));F.push({shape:{type:"circle",cx:w,cy:w,
r:w/2},fill:[0,0,0,0],stroke:{width:w,dashArray:`${(J??y)/2} ${g}`,dashoffset:`-${N?S[P]/2:y/2*P}`,color:t[P]},offset:[0,0]})}q=null;t=2*w+(I?.width||0);if(g=z.holePercentage)I&&F.push({shape:{type:"circle",cx:w,cy:w,r:w*g},fill:null,stroke:I,offset:[0,0]}),q=t/2,q=[[{shape:{type:"circle",cx:q,cy:q,r:q},fill:n,stroke:I?{...I,color:n}:null,offset:[0,0]},{shape:{type:"circle",cx:q,cy:q,r:w*g},fill:[0,0,0],stroke:null,offset:[0,0]}]];return G.renderSymbol([F],[t,t],{effectView:z.effectList,ignoreStrokeWidth:!0,
masking:q,rotation:-90})};v.renderPreviewHTML=a;Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(m,v){function k(f,x){return Math.round(Math.min(Math.max(f+191.25*x,0),255))}m.SymbolSizeDefaults=void 0;(function(f){f[f.size=22]="size";f[f.lineWidth=50]="lineWidth";f[f.maxSize=120]="maxSize";f[f.maxOutlineSize=80]="maxOutlineSize";f[f.tallSymbolWidth=20]="tallSymbolWidth"})(m.SymbolSizeDefaults||
(m.SymbolSizeDefaults={}));m.adjustColorBrightness=function(f,x){if(null==f)return new v;if("type"in f&&("linear"===f.type||"pattern"===f.type))return f;f=new v(f);return new v([k(f.r,x),k(f.g,x),k(f.b,x),f.a])};m.adjustColorComponentBrightness=k;m.getConeShapes=function(f,x){let A=x?m.SymbolSizeDefaults.tallSymbolWidth:f;x=x?4:6;A=A<=m.SymbolSizeDefaults.size?A-.5*x:A-x;x=.15*A;const B=A;f-=x;return[{type:"ellipse",cx:.5*A,cy:f,rx:.5*A,ry:x},{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",
values:[B,f]},{command:"L",values:[0,f]},{command:"Z",values:[]}]}]};m.getCubeShapes=function(f,x){let A=x?m.SymbolSizeDefaults.tallSymbolWidth:f;var B=x?4:6;B=A=A<=m.SymbolSizeDefaults.size?A-.5*B:A-B;x=x?.35*A:.5*A;return[{type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,.5*x]},{command:"L",values:[.5*B,x]},{command:"L",values:[0,.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*x]},{command:"L",values:[.5*B,x]},{command:"L",values:[.5*B,f]},{command:"L",
values:[0,f-.5*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*B,x]},{command:"L",values:[.5*B,f]},{command:"L",values:[B,f-.5*x]},{command:"L",values:[B,.5*x]},{command:"Z",values:[]}]}]};m.getCylinderShapes=function(f,x){var A=x?m.SymbolSizeDefaults.tallSymbolWidth:f;x=x?4:6;A=A<=m.SymbolSizeDefaults.size?A-.5*x:A-x;x=.5*A;const B=.15*A;f-=B;return[{type:"ellipse",cx:.5*A,cy:f,rx:x,ry:B},{type:"path",path:[{command:"M",values:[0,B]},{command:"L",values:[0,f]},{command:"L",
values:[A,f]},{command:"L",values:[A,B]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*A,cy:B,rx:x,ry:B}]};m.getDiamondShapes=function(f){var x=f;x=x<m.SymbolSizeDefaults.size?x-2:x-4;const A=Math.floor(f/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*x,0]},{command:"L",values:[x,.5*f-A]},{command:"L",values:[.45*x-A,.5*f+A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*x,0]},{command:"L",values:[.45*x-A,.5*f+A]},{command:"L",values:[0,.5*f-A]},{command:"Z",
values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*f-A]},{command:"L",values:[.45*x-A,.5*f+A]},{command:"L",values:[.45*x,f]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*x,f]},{command:"L",values:[x,.5*f-A]},{command:"L",values:[.45*x-A,.5*f+A]},{command:"Z",values:[]}]}]};m.getExtrudeSymbolShapes=function(f){const x=m.SymbolSizeDefaults.size;f*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*x]},{command:"L",values:[.3*x,.7*x]},{command:"L",values:[.3*x,.7*
x+f]},{command:"L",values:[0,.7*x+f-.35*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*x,.7*x]},{command:"L",values:[.3*x,.7*x+f]},{command:"L",values:[x,f]},{command:"L",values:[x,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*x,0]},{command:"L",values:[x,0]},{command:"L",values:[.3*x,.7*x]},{command:"L",values:[0,.35*x]},{command:"Z",values:[]}]}]};m.getInvertedConeShapes=function(f){let x=f;x=x<m.SymbolSizeDefaults.size?x-3:x-6;const A=.15*x,
B=x;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[.5*B,f-A]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*x,cy:0,rx:.5*x,ry:A}]};m.getPathSymbolShapes=function(f,x,A){var B=m.SymbolSizeDefaults.size;let C=B,G=B;1>f?C*=.75:1<f&&(G*=1.25);f=B;x&&A&&(C=G=f=B=0);return[{type:"path",path:[{command:"M",values:[f,0]},{command:"L",values:[A?f:.875*f,0]},{command:"L",values:[A?C-.5*f:0,G-.5*B]},{command:"L",values:[C-.5*f,G-.5*B]},{command:"Z",values:[]}]},
{type:"path",path:[{command:"M",values:[f,0]},{command:"L",values:[f,x?0:.125*B]},{command:"L",values:[C-.5*f,x?G-.5*B:B]},{command:"L",values:[C-.5*f,G-.5*B]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[C-.5*f,G-.5*B]},{command:"L",values:[A?C-.5*f:0,G-.5*B]},{command:"L",values:[A?C-.5*f:0,x?G-.5*B:B]},{command:"L",values:[C-.5*f,x?G-.5*B:B]},{command:"Z",values:[]}]}]};m.getTetrahedronShapes=function(f){var x=f;x=x<m.SymbolSizeDefaults.size?x-1:x-2;return[{type:"path",path:[{command:"M",
values:[.45*f,0]},{command:"L",values:[f,x]},{command:"L",values:[.45*f,.6*x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*f,0]},{command:"L",values:[.45*f,.6*x]},{command:"L",values:[0,x]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,x]},{command:"L",values:[.45*f,.6*x]},{command:"L",values:[f,x]},{command:"Z",values:[]}]}]};m.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
m.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],
cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],
tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",
path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),
function(m,v,k,f,x,A,B,C,G,l){function r(b,p,e){return b?k(b,{responseType:"image"}).then(h=>{h=h.data;const c=h.width,n=h.height,t=c/n;let z=p;e&&(z=Math.min(z,Math.max(c,n)));return{image:h,width:1>=t?Math.ceil(z*t):z,height:1>=t?z:Math.ceil(z/t)}}):Promise.reject(new x("renderUtils: imageDataSize","href not provided."))}const a=C.createProjector();m.renderSymbol=function(b,p,e){const h=Math.ceil(p[0]);p=Math.ceil(p[1]);if(!b.some(n=>!!n.length))return null;const c=e&&e.node||document.createElement("div");
null!=e.opacity&&(c.style.opacity=e.opacity.toString());null!=e.effectView&&(c.style.filter=l.getCSSFilterFromEffectList(e.effectView));a.append(c,G.renderSVG.bind(null,b,h,p,e));return c};m.tintImageWithColor=function(b,p,e,h,c){return r(b,p,c).then(n=>{const t=n.width?n.width:p,z=n.height?n.height:p;var w;if(w=n.image)w=e&&"ignore"!==h?"multiply"===h&&255===e.r&&255===e.g&&255===e.b&&1===e.a?!1:!0:!1;if(w){var g=n.image.width,q=n.image.height;A("edge")&&/\.svg$/i.test(b)&&(--g,--q);w=Math.ceil(t);
var y=Math.ceil(z);var F=document.createElement("canvas");F.width=w;F.height=y;F.style.width=w+"px";F.style.height=y+"px";F=F.getContext("2d");F.clearRect(0,0,w,y);w=F;w.drawImage(n.image,0,0,g,q,0,0,t,z);y=w.getImageData(0,0,t,z);F=[e.r/255,e.g/255,e.b/255,e.a];const K=f.toHSV(e);for(let N=0;N<y.data.length;N+=4){n=y.data;g=N;q=F;var I=K;switch(h){case "multiply":n[g+0]*=q[0];n[g+1]*=q[1];n[g+2]*=q[2];n[g+3]*=q[3];break;default:const S=f.toHSV({r:n[g+0],g:n[g+1],b:n[g+2]});S.h=I.h;S.s=I.s;S.v=S.v/
100*I.v;I=f.toRGB(S);n[g+0]=I.r;n[g+1]=I.g;n[g+2]=I.b;n[g+3]*=q[3]}}w.putImageData(y,0,0);b=w.canvas.toDataURL("image/png")}else(w=v.id&&v.id.findCredential(b))&&w.token&&(n=b.includes("?")?"\x26":"?",b=`${b}${n}token=${w.token}`);return{url:b,width:t,height:z}}).catch(()=>({url:b,width:p,height:p}))};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/colorUtils":function(){define(["exports"],function(m){function v(l,r){const a=[];let b,p;if(l[0].length!==
r.length)throw"dimensions do not match";const e=l.length,h=l[0].length;let c=0;for(b=0;b<e;b++){for(p=c=0;p<h;p++)c+=l[b][p]*r[p];a.push(c)}return a}function k(l){l=[l.r/255,l.g/255,l.b/255].map(r=>.04045>=r?r/12.92:((r+.055)/1.055)**2.4);l=v(C,l);return{x:100*l[0],y:100*l[1],z:100*l[2]}}function f(l){l=v(G,[l.x/100,l.y/100,l.z/100]).map(r=>Math.min(1,Math.max(.0031308>=r?12.92*r:1.055*r**(1/2.4)-.055,0)));return{r:Math.round(255*l[0]),g:Math.round(255*l[1]),b:Math.round(255*l[2])}}function x(l){l=
[l.x/95.047,l.y/100,l.z/108.883].map(r=>r>(6/29)**3?r**(1/3):1/3*(29/6)**2*r+4/29);return{l:116*l[1]-16,a:500*(l[0]-l[1]),b:200*(l[1]-l[2])}}function A(l){const r=l.l;l=[(r+16)/116+l.a/500,(r+16)/116,(r+16)/116-l.b/200].map(a=>a>6/29?a**3:3*(6/29)**2*(a-4/29));return{x:95.047*l[0],y:100*l[1],z:108.883*l[2]}}function B(l){if("r"in l&&"g"in l&&"b"in l)return l;if("l"in l&&"c"in l&&"h"in l){var r=l.c,a=l.h;return f(A({l:l.l,a:r*Math.cos(a),b:r*Math.sin(a)}))}if("l"in l&&"a"in l&&"b"in l)return f(A(l));
if("x"in l&&"y"in l&&"z"in l)return f(l);if("h"in l&&"s"in l&&"v"in l){a=(l.h+360)%360/60;r=l.v/100*255;l=l.s/100*r;const b=l*(1-Math.abs(a%2-1));switch(Math.floor(a)){case 0:a={r:l,g:b,b:0};break;case 1:a={r:b,g:l,b:0};break;case 2:a={r:0,g:l,b};break;case 3:a={r:0,g:b,b:l};break;case 4:a={r:b,g:0,b:l};break;case 5:case 6:a={r:l,g:0,b};break;default:a={r:0,g:0,b:0}}a.r=Math.round(a.r+r-l);a.g=Math.round(a.g+r-l);a.b=Math.round(a.b+r-l);return a}return l}const C=[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],G=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];m.darken=function(l,r){l=x(k(l));l.l*=1-r;return f(A(l))};m.toHSV=function(l){if("h"in l&&"s"in l&&"v"in l)return l;var r=B(l);l=r.r;const a=r.g,b=r.b;r=Math.max(l,a,b);const p=r-Math.min(l,a,b);l=0===p?0:r===l?(a-b)/p%6:r===a?(b-l)/p+2:(l-a)/p+4;0>l&&(l+=6);return{h:60*l,s:100*(0===p?0:p/r),v:100/255*r}};m.toLAB=function(l){return"l"in l&&"a"in l&&"b"in l?l:x(k(B(l)))};m.toLCH=function(l){if(!("l"in
l&&"c"in l&&"h"in l)){var r=x(k(B(l)));l=r.l;var a=r.a;const b=r.b;r=Math.sqrt(a*a+b*b);a=Math.atan2(b,a);a=0<a?a:a+2*Math.PI;l={l,c:r,h:a}}return l};m.toRGB=B;m.toXYZ=function(l){return"x"in l&&"y"in l&&"z"in l?l:k(B(l))};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../chunks/mat2df32 ../../chunks/mat2d ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),
function(m,v,k,f,x,A,B,C){function G(u,d){u*=T/180;return Math.abs(d*Math.sin(u))+Math.abs(d*Math.cos(u))}function l(u){return u.map(d=>`${d.command} ${d.values.join(" ")}`).join(" ").trim()}function r(u,d,E,D){if(u){if("circle"===u.type)return C.tsx("circle",{fill:d,"fill-rule":"evenodd",stroke:E.color,"stroke-width":E.width,"stroke-linecap":E.cap,"stroke-linejoin":E.join,"stroke-dasharray":E.dashArray,"stroke-dashoffset":E.dashOffset,"stroke-miterlimit":"4",cx:u.cx,cy:u.cy,r:u.r});if("ellipse"===
u.type)return C.tsx("ellipse",{fill:d,"fill-rule":"evenodd",stroke:E.color,"stroke-width":E.width,"stroke-linecap":E.cap,"stroke-linejoin":E.join,"stroke-dasharray":E.dashArray,"stroke-miterlimit":"4",cx:u.cx,cy:u.cy,rx:u.rx,ry:u.ry});if("rect"===u.type)return C.tsx("rect",{fill:d,"fill-rule":"evenodd",stroke:E.color,"stroke-width":E.width,"stroke-linecap":E.cap,"stroke-linejoin":E.join,"stroke-dasharray":E.dashArray,"stroke-miterlimit":"4",x:u.x,y:u.y,width:u.width,height:u.height});if("image"===
u.type)return C.tsx("image",{href:u.src,x:u.x,y:u.y,width:u.width,height:u.height,preserveAspectRatio:"none"});if("path"===u.type)return u="string"!==typeof u.path?l(u.path):u.path,C.tsx("path",{fill:d,"fill-rule":"evenodd",stroke:E.color,"stroke-width":E.width,"stroke-linecap":E.cap,"stroke-linejoin":E.join,"stroke-dasharray":E.dashArray,"stroke-miterlimit":"4",d:u});if("text"===u.type)return f.assertIsSome(D),C.tsx("text",{"dominant-baseline":D.dominantBaseline,fill:d,"fill-rule":"evenodd",stroke:E.color,
"stroke-width":E.width,"stroke-linecap":E.cap,"stroke-linejoin":E.join,"stroke-dasharray":E.dashArray,"stroke-miterlimit":"4","text-anchor":D.align,"text-decoration":D.decoration,kerning:D.kerning,rotate:D.rotate,"text-rendering":K,"font-style":D.font.style,"font-variant":D.font.variant,"font-weight":D.font.weight,"font-size":D.font.size,"font-family":D.font.family,x:u.x,y:u.y},u.text)}return null}function a(u){const d={fill:"none",pattern:null,linearGradient:null};if(u)if("type"in u&&"pattern"===
u.type){var E=`patternId-${++F}`;d.fill=`url(#${E})`;d.pattern={id:E,x:u.x,y:u.y,width:u.width,height:u.height,image:{x:0,y:0,width:u.width,height:u.height,href:u.src}}}else"type"in u&&"linear"===u.type?(E=`linearGradientId-${++I}`,d.fill=`url(#${E})`,d.linearGradient={id:E,x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,stops:u.colors.map(D=>({offset:D.offset,color:D.color&&(new v(D.color)).toString()}))}):u&&(u=new v(u),d.fill=u.toString());return d}function b(u){const d={color:"none",width:1,cap:"butt",join:"4",
dashArray:"none",dashOffset:"0"};if(u&&(null!=u.width&&(d.width=u.width),u.cap&&(d.cap=u.cap),u.join&&(d.join=u.join.toString()),u.color&&(d.color=(new v(u.color)).toString()),u.dashArray&&(d.dashArray=u.dashArray),u.dashArray&&(d.dashOffset=u.dashoffset),u.style)){let E=null;u.style in L&&(E=L[u.style]);if(Array.isArray(E)){E=E.slice(0);const D=u.width??0;for(let M=0;M<E.length;++M)E[M]*=D;if("butt"!==u.cap){for(u=0;u<E.length;u+=2)E[u]-=D,1>E[u]&&(E[u]=1);for(u=1;u<E.length;u+=2)E[u]+=D}E=E.join(",")}d.dashArray=
E}return d}function p(u,d){const E={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(u){const D=u.alignBaseline;E.align=u.align;E.dominantBaseline="baseline"===D?"auto":"top"===D?"text-top":"bottom"===D?"hanging":D;E.decoration=u.decoration;E.kerning=u.kerning?"auto":"0";E.rotate=u.rotated?"90":"0";f.assertIsSome(d);E.font.style=d.style||"normal";E.font.variant=d.variant||"normal";E.font.weight=d.weight||"normal";E.font.size=
d.size&&d.size.toString()||"10pt";E.font.family=d.family||"serif"}return E}function e(u){const {pattern:d,linearGradient:E}=u;return d?C.tsx("pattern",{id:d.id,patternUnits:"userSpaceOnUse",x:d.x,y:d.y,width:d.width,height:d.height},C.tsx("image",{x:d.image.x,y:d.image.y,width:d.image.width,height:d.image.height,href:d.image.href})):E?(u=E.stops.map((D,M)=>C.tsx("stop",{key:`${M}-stop`,offset:D.offset,"stop-color":D.color})),C.tsx("linearGradient",{id:E.id,gradientUnits:"userSpaceOnUse",x1:E.x1,y1:E.y1,
x2:E.x2,y2:E.y2},u)):null}function h(u,d){if(!u)return null;const E=[];for(const D of u){const {shape:M,fill:Q,stroke:V,font:Z}=D;u=a(Q);const ba=b(V),fa="text"===M.type?p(M,Z):null;(u=r(M,u.fill,ba,fa))&&E.push(u)}return C.tsx("mask",{id:d,maskUnits:"userSpaceOnUse"},C.tsx("g",null,E))}function c(u,d,E,D,M){A.scale(u,A.identity(u),[d,E]);u[4]=u[4]*d-D*d+D;u[5]=u[5]*E-M*E+M;return u}function n(u,d){if(P&&"left"in P){null!=P.left&&P.left>u&&(P.left=u);if(null==P.right||P.right<u)P.right=u;if(null==
P.top||P.top>d)P.top=d;if(null==P.bottom||P.bottom<d)P.bottom=d}else P={left:u,bottom:d,right:u,top:d}}function t(u){const d=u.args,E=d.length;switch(u.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(u=0;u<E;u+=2)n(d[u],d[u+1]);J.x=d[E-2];J.y=d[E-1];break;case "H":for(u=0;u<E;++u)n(d[u],J.y);J.x=d[E-1];break;case "V":for(u=0;u<E;++u)n(J.x,d[u]);J.y=d[E-1];break;case "m":u=0;"x"in J||(n(J.x=d[0],J.y=d[1]),u=2);for(;u<E;u+=2)n(J.x+=d[u],J.y+=d[u+1]);break;case "l":case "t":for(u=0;u<
E;u+=2)n(J.x+=d[u],J.y+=d[u+1]);break;case "h":for(u=0;u<E;++u)n(J.x+=d[u],J.y);break;case "v":for(u=0;u<E;++u)n(J.x,J.y+=d[u]);break;case "c":for(u=0;u<E;u+=6)n(J.x+d[u],J.y+d[u+1]),n(J.x+d[u+2],J.y+d[u+3]),n(J.x+=d[u+4],J.y+=d[u+5]);break;case "s":case "q":for(u=0;u<E;u+=4)n(J.x+d[u],J.y+d[u+1]),n(J.x+=d[u+2],J.y+=d[u+3]);break;case "A":for(u=0;u<E;u+=7)n(d[u+5],d[u+6]);J.x=d[E-2];J.y=d[E-1];break;case "a":for(u=0;u<E;u+=7)n(J.x+=d[u+5],J.y+=d[u+6])}}function z(u,d,E){const D=N[u.toLowerCase()];
"number"===typeof D&&(D?d.length>=D&&(u={action:u,args:d.slice(0,d.length-d.length%D)},E.push(u),t(u)):(u={action:u,args:[]},E.push(u),t(u)))}function w(u){const d={x:0,y:0,width:0,height:0};if("circle"===u.type)d.x=u.cx-u.r,d.y=u.cy-u.r,d.width=2*u.r,d.height=2*u.r;else if("ellipse"===u.type)d.x=u.cx-u.rx,d.y=u.cy-u.ry,d.width=2*u.rx,d.height=2*u.ry;else if("image"===u.type||"rect"===u.type)d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height;else if("path"===u.type){var E=f.unwrapOrThrow;{const Q=
("string"!==typeof u.path?l(u.path):u.path).match(S),V=[];P={};J={};if(Q){u="";var D=[],M=Q.length;for(let Z=0;Z<M;++Z){const ba=Q[Z],fa=parseFloat(ba);isNaN(fa)?(u&&z(u,D,V),D=[],u=ba):D.push(fa)}z(u,D,V);u={x:0,y:0,width:0,height:0};P&&"left"in P&&(u.x=P.left,u.y=P.top,u.width=P.right-P.left,u.height=P.bottom-P.top)}else u=null}E=E.call(f,u);d.x=E.x;d.y=E.y;d.width=E.width;d.height=E.height}return d}function g(u){const d={x:0,y:0,width:0,height:0};let E=null,D=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;
for(const Q of u)E?(E.x=Math.min(E.x,Q.x),E.y=Math.min(E.y,Q.y),D=Math.max(D,Q.x+Q.width),M=Math.max(M,Q.y+Q.height)):(E=d,E.x=Q.x,E.y=Q.y,D=Q.x+Q.width,M=Q.y+Q.height);E&&(E.width=D-E.x,E.height=M-E.y);return E}function q(u,d,E,D,M,Q,V,Z,ba){var fa=(V&&Q?G(Q,d):d)/2,ea=(V&&Q?G(Q,E):E)/2;if(ba){var da=ba[0];ba=ba[1];fa=(V&&Q?G(Q,da):da)/2;ea=(V&&Q?G(Q,ba):ba)/2}da=u.width+D;var O=u.height+D;ba=x.create();V=x.create();var W=!1;if(M&&0!==da&&0!==O){M=d!==E?d/E:da/O;W=d>E?d:E;let R=1,U=1;isNaN(W)||(1<
M?(R=W/da,U=W/M/O):(U=W/O,R=W*M/da));A.multiply(V,V,c(ba,R,U,fa,ea));W=!0}M=u.x+(da-D)/2;u=u.y+(O-D)/2;D=A.multiply;fa-=M;ea-=u;fa=A.translate(ba,A.identity(ba),[fa,ea]);D.call(A,V,V,fa);!W&&(da>d||O>E)&&(fa=da/d>O/E,d=(fa?d:E)/(fa?da:O),A.multiply(V,V,c(ba,d,d,M,u)));Q&&(d=A.multiply,E=Q%360*Math.PI/180,A.rotate(ba,A.identity(ba),E),Q=Math.cos(E),E=Math.sin(E),da=ba[4],O=ba[5],ba[4]=da*Q-O*E+u*E-M*Q+M,ba[5]=O*Q+da*E-M*E-u*Q+u,d.call(A,V,V,ba));Z&&(Q=A.multiply,d=Z[0],Z=Z[1],Z=A.translate(ba,A.identity(ba),
[d,Z]),Q.call(A,V,V,Z));return`matrix(${V[0]},${V[1]},${V[2]},${V[3]},${V[4]},${V[5]})`}function y(u,d,E){u=u?.effects.find(Z=>"bloom"===Z.type);if(!u)return null;const {strength:D,radius:M}=u;u=0<D?M:0;const Q=(D+u)*d,V=4*D+1;return C.tsx("filter",{id:`bloom${E}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},C.tsx("feMorphology",{operator:"dilate",radius:(D+.5*u)*5**(d/100)*(.4+d/100),in:"SourceGraphic",result:"dilate"}),C.tsx("feGaussianBlur",{in:"dilate",stdDeviation:Q/
25,result:"blur"}),C.tsx("feGaussianBlur",{in:"blur",stdDeviation:Q/50,result:"intensityBlur"}),C.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},C.tsx("feFuncR",{type:"linear",slope:V}),C.tsx("feFuncG",{type:"linear",slope:V}),C.tsx("feFuncB",{type:"linear",slope:V})),C.tsx("feMerge",null,C.tsx("feMergeNode",{in:"intensityBlur"}),C.tsx("feMergeNode",{in:"intensityBrightness"}),C.tsx("feGaussianBlur",{stdDeviation:D/10})))}let F=0,I=0;B=k("android");const K=k("chrome")||
B&&4<=B?"auto":"optimizeLegibility",N={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},S=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let P={},J={};const L={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},T=Math.PI;let H=1;m.computeBBox=g;m.generateFillAttributes=a;m.generateStrokeAttributes=b;m.generateTextAttributes=p;m.getBoundingBox=w;m.getTransformMatrix=
q;m.renderDef=e;m.renderSVG=function(u,d,E,D={}){const M=[],Q=[],V=++H,Z=y(D.effectView,d,V);var ba=null;Z&&(ba=D.effectView?.effects.find(W=>"bloom"===W.type),ba=(ba.strength?ba.strength+ba.radius/2:0)/3,ba=[Math.max(d+d*ba,10),Math.max(E+E*ba,10)]);for(let W=0;W<u.length;W++){var fa=u[W];const R=[];var ea=[],da=0,O=0;let U=0;for(const Y of fa){const {shape:ca,fill:ia,stroke:la,font:ka,offset:ma}=Y;D.ignoreStrokeWidth||(da+=la&&la.width||0);fa=a(ia);const sa=b(la),ta="text"===ca.type?p(ca,ka):null;
M.push(e(fa));R.push(r(ca,fa.fill,sa,ta));ea.push(w(ca));ma&&(O+=ma[0],U+=ma[1])}ea=f.unwrapOrThrow(g(ea));da=q(ea,d,E,da,D.scale??!1,D.rotation,D.useRotationSize??!1,[O,U],ba);O=null;D.masking&&(O=`mask-${W}`,M.push(h(D.masking[W],O)),O=`url(#${O})`);Q.push(O?C.tsx("g",{mask:O},C.tsx("g",{transform:da},R)):C.tsx("g",{transform:da},R))}D.useRotationSize&&D.rotation&&(d=G(D.rotation,d),E=G(D.rotation,E));Z&&(f.assertIsSome(ba),d=ba[0],E=ba[1]);return C.tsx("svg",{xmlns:"http://www.w3.org/2000/svg",
width:d,height:E,style:"display: block;"},Z,C.tsx("defs",null,M),Z?C.tsx("g",{filter:`url(#bloom${V})`},Q):Q)};m.renderShape=r;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df32":function(){define(["exports"],function(m){function v(){const G=new Float32Array(6);G[0]=1;G[3]=1;return G}function k(G){const l=new Float32Array(6);l[0]=G[0];l[1]=G[1];l[2]=G[2];l[3]=G[3];l[4]=G[4];l[5]=G[5];return l}function f(G,l,r,a,b,p){const e=new Float32Array(6);
e[0]=G;e[1]=l;e[2]=r;e[3]=a;e[4]=b;e[5]=p;return e}function x(G,l){return new Float32Array(G,l,6)}function A(G,l,r,a){const b=l[a];l=l[a+1];G[a]=r[0]*b+r[2]*l+r[4];G[a+1]=r[1]*b+r[3]*l+r[5]}function B(G,l,r,a=0,b=0,p=2){for(b=b||l.length/p;a<b;a++)A(G,l,r,a*p)}const C=Object.freeze(Object.defineProperty({__proto__:null,create:v,clone:k,fromValues:f,createView:x,transform:A,transformMany:B},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=v;m.createView=x;m.fromValues=f;m.mat2df32=C;m.transform=
A;m.transformMany=B})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(m,v){function k(y,F){y[0]=F[0];y[1]=F[1];y[2]=F[2];y[3]=F[3];y[4]=F[4];y[5]=F[5];return y}function f(y){y[0]=1;y[1]=0;y[2]=0;y[3]=1;y[4]=0;y[5]=0;return y}function x(y,F,I,K,N,S,P){y[0]=F;y[1]=I;y[2]=K;y[3]=N;y[4]=S;y[5]=P;return y}function A(y,F){const I=F[0],K=F[1],N=F[2],S=F[3],P=F[4];F=F[5];let J=I*S-K*N;if(!J)return null;J=1/J;y[0]=S*J;y[1]=-K*J;y[2]=-N*J;y[3]=I*J;y[4]=(N*F-S*P)*J;y[5]=(K*P-I*F)*J;return y}
function B(y){return y[0]*y[3]-y[1]*y[2]}function C(y,F,I){const K=F[0],N=F[1],S=F[2],P=F[3],J=F[4];F=F[5];const L=I[0],T=I[1],H=I[2],u=I[3],d=I[4];I=I[5];y[0]=K*L+S*T;y[1]=N*L+P*T;y[2]=K*H+S*u;y[3]=N*H+P*u;y[4]=K*d+S*I+J;y[5]=N*d+P*I+F;return y}function G(y,F,I){const K=F[0],N=F[1],S=F[2],P=F[3],J=F[4];F=F[5];const L=Math.sin(I);I=Math.cos(I);y[0]=K*I+S*L;y[1]=N*I+P*L;y[2]=K*-L+S*I;y[3]=N*-L+P*I;y[4]=J;y[5]=F;return y}function l(y,F,I){const K=F[1],N=F[2],S=F[3],P=F[4],J=F[5],L=I[0];I=I[1];y[0]=
F[0]*L;y[1]=K*L;y[2]=N*I;y[3]=S*I;y[4]=P;y[5]=J;return y}function r(y,F,I){const K=F[0],N=F[1],S=F[2],P=F[3],J=F[4];F=F[5];const L=I[0];I=I[1];y[0]=K;y[1]=N;y[2]=S;y[3]=P;y[4]=K*L+S*I+J;y[5]=N*L+P*I+F;return y}function a(y,F){const I=Math.sin(F);F=Math.cos(F);y[0]=F;y[1]=I;y[2]=-I;y[3]=F;y[4]=0;y[5]=0;return y}function b(y,F){y[0]=F[0];y[1]=0;y[2]=0;y[3]=F[1];y[4]=0;y[5]=0;return y}function p(y,F){y[0]=1;y[1]=0;y[2]=0;y[3]=1;y[4]=F[0];y[5]=F[1];return y}function e(y){return"mat2d("+y[0]+", "+y[1]+
", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+")"}function h(y){return Math.sqrt(y[0]**2+y[1]**2+y[2]**2+y[3]**2+y[4]**2+y[5]**2+1)}function c(y,F,I){y[0]=F[0]+I[0];y[1]=F[1]+I[1];y[2]=F[2]+I[2];y[3]=F[3]+I[3];y[4]=F[4]+I[4];y[5]=F[5]+I[5];return y}function n(y,F,I){y[0]=F[0]-I[0];y[1]=F[1]-I[1];y[2]=F[2]-I[2];y[3]=F[3]-I[3];y[4]=F[4]-I[4];y[5]=F[5]-I[5];return y}function t(y,F,I){y[0]=F[0]*I;y[1]=F[1]*I;y[2]=F[2]*I;y[3]=F[3]*I;y[4]=F[4]*I;y[5]=F[5]*I;return y}function z(y,F,I,K){y[0]=F[0]+I[0]*K;y[1]=
F[1]+I[1]*K;y[2]=F[2]+I[2]*K;y[3]=F[3]+I[3]*K;y[4]=F[4]+I[4]*K;y[5]=F[5]+I[5]*K;return y}function w(y,F){return y[0]===F[0]&&y[1]===F[1]&&y[2]===F[2]&&y[3]===F[3]&&y[4]===F[4]&&y[5]===F[5]}function g(y,F){const I=y[0],K=y[1],N=y[2],S=y[3],P=y[4];y=y[5];const J=F[0],L=F[1],T=F[2],H=F[3],u=F[4];F=F[5];const d=v.getEpsilon();return Math.abs(I-J)<=d*Math.max(1,Math.abs(I),Math.abs(J))&&Math.abs(K-L)<=d*Math.max(1,Math.abs(K),Math.abs(L))&&Math.abs(N-T)<=d*Math.max(1,Math.abs(N),Math.abs(T))&&Math.abs(S-
H)<=d*Math.max(1,Math.abs(S),Math.abs(H))&&Math.abs(P-u)<=d*Math.max(1,Math.abs(P),Math.abs(u))&&Math.abs(y-F)<=d*Math.max(1,Math.abs(y),Math.abs(F))}const q=Object.freeze(Object.defineProperty({__proto__:null,copy:k,identity:f,set:x,invert:A,determinant:B,multiply:C,rotate:G,scale:l,translate:r,fromRotation:a,fromScaling:b,fromTranslation:p,str:e,frob:h,add:c,subtract:n,multiplyScalar:t,multiplyScalarAndAdd:z,exactEquals:w,equals:g,mul:C,sub:n},Symbol.toStringTag,{value:"Module"}));m.add=c;m.copy=
k;m.determinant=B;m.equals=g;m.exactEquals=w;m.frob=h;m.fromRotation=a;m.fromScaling=b;m.fromTranslation=p;m.identity=f;m.invert=A;m.mat2d=q;m.mul=C;m.multiply=C;m.multiplyScalar=t;m.multiplyScalarAndAdd=z;m.rotate=G;m.scale=l;m.set=x;m.str=e;m.sub=n;m.subtract=n;m.translate=r})},"esri/views/support/layerViewUtils":function(){define(["exports","../../core/maybe"],function(m,v){m.extractSafeScaleBounds=function(k){k=k.effectiveScaleRange;return{minScale:k?.minScale??0,maxScale:k?.maxScale??0}};m.highlightsSupported=
function(k){return k&&"function"===typeof k.highlight};m.isScaleRangeActive=function(k,f){return 0<k||0<f};m.occludeesSupported=function(k){return k&&"function"===typeof k.maskOccludee};m.scaleBoundsPredicate=function(k,f,x){return v.isNone(k)||k>x&&(0===f||k<f)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actions":function(){define(["exports","../../support/actions/ActionButton"],function(m,v){const k=new v({id:"zoom-to-feature",
title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"}),f=new v({id:"remove-selected-feature",title:"{messages.remove}",className:"esri-icon-trash"}),x=new v({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:"esri-icon-zoom-in-magnifying-glass"});v=new v({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:"esri-icon-table"});m.all=[k,f,v,x];m.browseClusteredFeatures=v;m.removeSelectedFeature=f;m.zoomToClusteredFeatures=x;m.zoomToFeature=
k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/Popup/actionUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Error ../../core/Logger ../../core/promiseUtils ./actions".split(" "),function(m,v,k,f,x,A){function B(n){const {selectedFeature:t,location:z,view:w}=n;return w?"3d"===w.type?t||z:n.get("selectedFeature.geometry")||z:null}function C(n){return n?.isAggregate&&"cluster"===n?.sourceLayer?.featureReduction?.type}
function G(n,t){return l.apply(this,arguments)}function l(){l=v._asyncToGenerator(function*(n,t){if("3d"!==t?.type||!n||"esri.Graphic"!==n.declaredClass)return!0;if((t=t.getViewForGraphic(n))&&"whenGraphicBounds"in t){let z;try{z=yield t.whenGraphicBounds(n,{useViewElevation:!0})}catch(w){}return!z||!z.boundingBox||z.boundingBox[0]===z.boundingBox[3]&&z.boundingBox[1]===z.boundingBox[4]&&z.boundingBox[2]===z.boundingBox[5]}return!0});return l.apply(this,arguments)}function r(n){return a.apply(this,
arguments)}function a(){a=v._asyncToGenerator(function*(n){const {location:t,selectedFeature:z,view:w,zoomFactor:g}=n,q=B(n);if(!q)throw n=new k("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:q,view:w}),c.error(n),n;const y=w.scale/g,F=n.get("selectedFeature.geometry")||t,I=F&&"point"===F.type&&(yield G(z,w));A.zoomToFeature.active=!0;A.zoomToFeature.disabled=!0;try{yield n.zoomTo({target:{target:q,scale:I?y:void 0}})}catch(K){const N=new k("zoom-to:invalid-graphic",
"Could not zoom to the location of the graphic.",{graphic:z});c.error(N)}finally{A.zoomToFeature.active=!1,A.zoomToFeature.disabled=!1,n.zoomToLocation=null,I&&(n.location=F)}});return a.apply(this,arguments)}function b(n){return p.apply(this,arguments)}function p(){p=v._asyncToGenerator(function*(n){const {selectedFeature:t,view:z}=n;if("2d"!==z?.type)throw n=new k("zoomToCluster:invalid-view","View must be 2d MapView.",{view:z}),c.error(n),n;if(!C(t))throw n=new k("zoomToCluster:invalid-selectedFeature",
"Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t}),c.error(n),n;var w=yield z.whenLayerView(t.sourceLayer);const g=w.createQuery();g.aggregateIds=[t.getObjectId()];A.zoomToClusteredFeatures.active=!0;A.zoomToClusteredFeatures.disabled=!0;({extent:w}=yield w.queryExtent(g));yield n.zoomTo({target:w});A.zoomToClusteredFeatures.active=!1;A.zoomToClusteredFeatures.disabled=!1});return p.apply(this,arguments)}function e(){e=v._asyncToGenerator(function*(n){const {selectedFeature:t,
view:z}=n;var w=yield z.whenLayerView(t.sourceLayer);const g=w.createQuery();g.aggregateIds=[t.getObjectId()];({extent:w}=yield w.queryExtent(g));n.selectedClusterBoundaryFeature.geometry=w;z.graphics.add(n.selectedClusterBoundaryFeature)});return e.apply(this,arguments)}function h(){h=v._asyncToGenerator(function*(n){const {selectedFeature:t,view:z}=n;n=yield z.whenLayerView(t.sourceLayer);const w=n.createQuery();w.aggregateIds=[t.getObjectId()];A.browseClusteredFeatures.active=!0;A.browseClusteredFeatures.disabled=
!0;({features:n}=yield n.queryFeatures(w));A.browseClusteredFeatures.active=!1;A.browseClusteredFeatures.disabled=!1;z.popup.open({features:[t].concat(n),featureMenuOpen:!0})});return h.apply(this,arguments)}const c=f.getLogger("esri.widgets.Popup.PopupViewModel");m.browseAggregateFeatures=function(n){return h.apply(this,arguments)};m.displayClusterExtent=function(n){return e.apply(this,arguments)};m.getSelectedTarget=B;m.isClusterFeature=C;m.removeClusteredFeaturesForBrowsing=function(n){const t=
n.features.filter(z=>C(z));t.length&&(n.features=t)};m.triggerAction=n=>{const {event:t,view:z}=n;({action:n}=t);var w=z&&z.popup;if(!n)return Promise.reject(new k("trigger-action:missing-arguments","Event has no action"));if(!w)return Promise.reject(new k("trigger-action:missing-arguments","view.popup is missing"));const {disabled:g,id:q}=n;if(!q)return Promise.reject(new k("trigger-action:invalid-action","action.id is missing"));if(g)return Promise.reject(new k("trigger-action:invalid-action","Action is disabled"));
if(q===A.zoomToFeature.id)return r(w.viewModel).catch(x.throwIfNotAbortError);if(q===A.zoomToClusteredFeatures.id)return b(w.viewModel);if(q===A.browseClusteredFeatures.id)return w.featureMenuOpen=!w.featureMenuOpen,w.viewModel.browseClusterEnabled=!w.viewModel.browseClusterEnabled,Promise.resolve();w.viewModel.browseClusterEnabled=!1;if(q===A.removeSelectedFeature.id){w.close();({selectedFeature:n}=w);if(!n)return Promise.reject(new k(`trigger-action:${A.removeSelectedFeature.id}`,"selectedFeature is required",
{selectedFeature:n}));({sourceLayer:w}=n);w?w.remove(n):z.graphics.remove(n)}return Promise.resolve()};m.zoomToClusterExtent=b;m.zoomToLocation=r;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B){m.GoToMixin=C=>{C=function(G){function l(...r){r=G.call(this,...r)||this;r.goToOverride=null;r.view=null;return r}v._inheritsLoose(l,G);l.prototype.callGoTo=function(r){const {view:a}=this;return this.goToOverride?this.goToOverride(a,r):a.goTo(r.target,r.options)};return l}(C);k.__decorate([f.property()],C.prototype,"goToOverride",void 0);k.__decorate([f.property()],C.prototype,"view",void 0);return C=k.__decorate([B.subclass("esri.widgets.support.GoTo")],C)};Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/promiseUtils ../core/Logger ../core/accessorSupport/ensureType ../core/arrayUtils ../core/Error ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(m,v,k,f,x,A,B,C,G,l,r){m.PopupView=a=>{a=function(b){function p(){return b.apply(this,arguments)||this}v._inheritsLoose(p,b);var e=p.prototype;
e.fetchPopupFeatures=function(){var h=v._asyncToGenerator(function*(c,n){yield this.when();const {location:t,queryArea:z,layerViewsAndGraphics:w,clientOnlyGraphics:g}=yield this._prepareFetchPopupFeatures(c,n);c=Promise.resolve(g);n=this._queryLayerPopupFeatures(z,w,n);const q=n.map(y=>y.promise);c=x.eachAlwaysValues([c,...q]).then(y=>Array.from(new Set(y.flat())));return{location:t,clientOnlyGraphics:g,allGraphicsPromise:c,promisesPerLayerView:n}});return function(c,n){return h.apply(this,arguments)}}();
e._queryLayerPopupFeatures=function(h,c,n){return c.map(({layerView:t,graphics:z})=>{z={clientGraphics:z,event:f.isSome(n)?n.event:null,signal:f.isSome(n)?n.signal:null,defaultPopupTemplateEnabled:f.isSome(n)?!!n.defaultPopupTemplateEnabled:!1};z=t.fetchPopupFeatures(h,z);return{layerView:t,promise:z}})};e._isValidPopupGraphic=function(h,c){return h&&!!h.getEffectivePopupTemplate(f.isSome(c)&&c.defaultPopupTemplateEnabled)};e._prepareFetchPopupFeatures=function(){var h=v._asyncToGenerator(function*(c,
n){const {clientGraphics:t,queryArea:z,location:w}=yield this._popupHitTestGraphics(c,n);c=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:g,clientOnlyGraphics:q}=this._graphicsPerFetchPopupLayerView(t,c);return{clientOnlyGraphics:q,layerViewsAndGraphics:g,queryArea:z,location:w}});return function(c,n){return h.apply(this,arguments)}}();e._popupHitTestGraphics=function(){var h=v._asyncToGenerator(function*(c,n){const {results:t,mapPoint:z}=yield this.popupHitTest(c);c=t.filter(g=>"graphic"===
g.type&&this._isValidPopupGraphic(g.graphic,n));const w=c.length?c[0].mapPoint:null;return{clientGraphics:c.map(g=>g.graphic),queryArea:z,location:z||w}});return function(c,n){return h.apply(this,arguments)}}();e._getFetchPopupLayerViews=function(){const h=[];this.allLayerViews.forEach(c=>{this._isValidPopupLayerView(c)&&h.push(c)});f.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&h.push(this.graphicsView);return h.reverse()};e._isValidPopupLayerView=function(h){return f.isSome(h)&&
(!("layer"in h)||!h.suspended)&&"fetchPopupFeatures"in h};e._graphicsPerFetchPopupLayerView=function(h,c){const n=[],t=new Map;c=c.map(z=>{const w=[];"layer"in z?t.set(z.layer,w):t.set(z.graphics,w);return{layerView:z,graphics:w}});for(const z of h)(h=t.get(z.layer)||t.get(z.sourceLayer)||null)?h.push(z):n.push(z);return{layerViewsAndGraphics:c,clientOnlyGraphics:n}};return p}(a);return a=k.__decorate([r.subclass("esri.views.PopupView")],a)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ../../geometry/Point".split(" "),function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){let e=function(){function h(c,n,t,z){const w=
c.targetGeometry,g=n.targetGeometry;z?"string"===typeof z&&(z=a.parse(z)||a.easingFunctions.ease):z=a.easingFunctions.ease;this.easing=z;this.duration=t;this.sCenterX=w.x;this.sCenterY=w.y;this.sScale=c.scale;this.sRotation=c.rotation;this.tCenterX=g.x;this.tCenterY=g.y;this.tScale=n.scale;this.tRotation=n.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?
this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}h.prototype.applyRatio=function(c,n){var t=this.easing(n);let z,w;1<=n?(n=this.tCenterX,z=this.tCenterY,w=this.tRotation,t=this.tScale):(n=this.sCenterX+t*this.dCenterX,z=this.sCenterY+t*this.dCenterY,w=this.sRotation+t*this.dRotation,t=this.sScale+t*this.dScale);c.targetGeometry.x=n;c.targetGeometry.y=z;c.scale=t;c.rotation=w};return h}();k=function(h){function c(t){t=h.call(this,t)||this;t.duration=200;t.transition=null;t.easing=a.easingFunctions.ease;
t.view=null;t.viewpoint=null;t.viewpoint=new f({targetGeometry:new p,scale:0,rotation:0});t._updateTask=A.addFrameTask({postRender:t._postRender.bind(m._assertThisInitialized(t))});t._updateTask.pause();return t}m._inheritsLoose(c,h);var n=c.prototype;n.destroy=function(){this._updateTask.remove();this._updateTask=null};n.animate=function(t,z,w){this.stop();b.copy(this.viewpoint,z);this.transition=new e(this.viewpoint,t.target,w&&w.duration||this.duration,w&&w.easing||this.easing);z=()=>{this.animation===
t&&this._updateTask&&("finished"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};t.when(z,z);this._startTime=performance.now();this._updateTask.resume();return this.animation=t};n.animateContinous=function(t,z){this.stop();this.updateFunction=z;this.viewpoint=t;const w=new r({target:t.clone()});t=()=>{this.animation===w&&this._updateTask&&(this.updateFunction=this.animation=null)};
w.when(t,t);this._startTime=performance.now();this._updateTask.resume();return this.animation=w};n.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};n._postRender=function(t){var z=this.animation;z&&z.state!==r.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,t.deltaTime):(t=(performance.now()-this._startTime)/this.transition.duration,z=1<=t,this.transition.applyRatio(this.viewpoint,t),z&&this.animation.finish()),this.view.state&&
(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return c}(x);v.__decorate([B.property()],k.prototype,"animation",void 0);v.__decorate([B.property()],k.prototype,"duration",void 0);v.__decorate([B.property()],k.prototype,"transition",void 0);v.__decorate([B.property()],k.prototype,"easing",void 0);v.__decorate([B.property()],k.prototype,"view",void 0);v.__decorate([B.property()],k.prototype,"viewpoint",void 0);return k=v.__decorate([l.subclass("esri.views.2d.AnimationManager")],
k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(m){function v(x,A,B,C){function G(h,c){var n;let t,z;t=h;for(n=0;8>n;n++){z=((a*t+r)*t+l)*t-h;if(Math.abs(z)<c)return t;var w=(3*a*t+2*r)*t+l;if(1E-6>Math.abs(w))break;t-=z/w}w=0;n=1;t=h;if(t<w)return w;if(t>n)return n;for(;w<n;){z=((a*t+r)*t+l)*t;if(Math.abs(z-h)<c)break;h>z?w=t:n=t;t=.5*(n-w)+w}return t}const l=3*x,r=3*(B-x)-l,a=1-l-r,b=3*A,p=3*(C-A)-b,e=1-b-p;return function(h,c=1E-6){h=G(h,c);return((e*h+p)*h+b)*h}}const k=
/^cubic-bezier\((.*)\)/,f={};f.ease=v(.25,.1,.25,1);f.linear=v(0,0,1,1);f.easeIn=f["ease-in"]=v(.42,0,1,1);f.easeOut=f["ease-out"]=v(0,0,.58,1);f.easeInOut=f["ease-in-out"]=v(.42,0,.58,1);m.easingFunctions=f;m.parse=function(x){let A=f[x]||null;!A&&(x=k.exec(x))&&(x=x[1].split(",").map(B=>parseFloat(B.trim())),4!==x.length||x.some(B=>isNaN(B))||(A=v.apply(v,x)));return A};m.unitBezier=v;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/unitUtils ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df64 ../../chunks/vec2 ../../chunks/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c){function n(O,W){return W.type?l.set(O,W.x,W.y):l.copy(O,W)}function t(O,W){return Math.max(O.width/Math.max(1,W[0]),O.height/Math.max(1,W[1]))*N(O.spatialReference)}function z(O,W,R,U){return w.apply(this,arguments)}function w(){w=v._asyncToGenerator(function*(O,W,R,U){if(!O||Array.isArray(O)&&!O.length)return null;f.isCollection(O)&&(O=O.toArray());if(Array.isArray(O)&&O.length&&"object"===typeof O[0]){var Y=O.every(sa=>"attributes"in sa);var ca=O.some(sa=>
!sa.geometry),ia=O;if(Y&&ca&&W&&W.allLayerViews){Y=new Map;for(var la of O)O=la.layer,ca=Y.get(O)||[],ia=la.attributes[O.objectIdField],null!=ia&&ca.push(ia),Y.set(O,ca);const sa=[];Y.forEach((ta,ya)=>{const Ca=W.allLayerViews.find(za=>za.layer.id===ya.id);if("queryFeatures"in Ca){const za=ya.createQuery();za.objectIds=ta;za.returnGeometry=!0;sa.push(Ca.queryFeatures(za))}});la=yield Promise.all(sa);O=[];for(var ka of la)if(ka&&ka.features&&ka.features.length)for(var ma of ka.features)x.isSome(ma.geometry)&&
O.push(ma.geometry);ia=O}for(const sa of ia)U=yield z(sa,W,R,U);return U}if(Array.isArray(O)&&2===O.length&&"number"===typeof O[0]&&"number"===typeof O[1])Y=new p(O);else if(O instanceof b)Y=O;else if("geometry"in O)if(O.geometry)Y=O.geometry;else if(O.layer){const sa=O.layer;ka=W.allLayerViews.find(ta=>ta.layer.id===sa.id);"queryFeatures"in ka&&(ma=sa.createQuery(),ma.objectIds=[O.attributes[sa.objectIdField]],ma.returnGeometry=!0,ka=yield ka.queryFeatures(ma),Y=x.get(ka,"features",0,"geometry"))}if(x.isNone(Y))return null;
ka="point"===Y.type?new a({xmin:Y.x,ymin:Y.y,xmax:Y.x,ymax:Y.y,spatialReference:Y.spatialReference}):Y.extent;if(!ka)return null;e.isLoaded()||e.canProjectWithoutEngine(ka.spatialReference,R)||(yield e.load());R=e.project(ka,R);return R?U=U?U.union(R):R:null});return w.apply(this,arguments)}function g(O){if(O&&(!Array.isArray(O)||"number"!==typeof O[0])&&("object"===typeof O||Array.isArray(O)&&"object"===typeof O[0])){if("layer"in O&&O.layer&&O.layer.minScale&&O.layer.maxScale){var W=O.layer;return{min:W.minScale,
max:W.maxScale}}if(Array.isArray(O)&&O.length&&O.every(R=>"layer"in R)){let R=W=0;for(const U of O)(O=U.layer)&&O.minScale&&O.maxScale&&(W=O.minScale<W?O.minScale:W,R=O.maxScale>R?O.maxScale:R);return W&&R?{min:W,max:R}:null}}}function q(O,W){return c.equals(O.wkid?O:O.spatialReference||h.WGS84,W)?O:e.project(O,W)}function y(){y=v._asyncToGenerator(function*(O,W){if(!O||!W)return new k({targetGeometry:new p,scale:0,rotation:0});let R=W.spatialReference;const {constraints:U,padding:Y,viewpoint:ca,
size:ia}=W,la=[Y?ia[0]-Y.left-Y.right:ia[0],Y?ia[1]-Y.top-Y.bottom:ia[1]];let ka=null;O instanceof k?ka=O:O.viewpoint?ka=O.viewpoint:O.target&&"esri.Viewpoint"===O.target.declaredClass&&(ka=O.target);let ma=null;if(ka&&ka.targetGeometry)ma=ka.targetGeometry;else if(O instanceof a)ma=O;else if(O||O&&("center"in O||"extent"in O||"target"in O))ma=(yield z(O.center,W,R))||(yield z(O.extent,W,R))||(yield z(O.target,W,R))||(yield z(O,W,R));!ma&&ca&&ca.targetGeometry?ma=ca.targetGeometry:!ma&&W.extent&&
(ma=W.extent);if(!R){var sa=W.spatialReference||W.extent||ma;R=sa.wkid?sa:sa.spatialReference||h.WGS84}e.isLoaded()||c.equals(ma.spatialReference,R)||e.canProjectWithoutEngine(ma,R)||(yield e.load());sa=q(ma.center?ma.center:ma,R);var ta=null;ka&&x.isSome(ka.targetGeometry)&&"point"===ka.targetGeometry.type?ta=ka.scale:"scale"in O&&O.scale?ta=O.scale:"zoom"in O&&-1!==O.zoom&&U&&U.effectiveLODs?ta=U.zoomToScale(O.zoom):Array.isArray(ma)||"point"===ma.type||"extent"===ma.type&&0===ma.width&&0===ma.height?
(ta=q(W.extent,R),ta=x.isSome(ta)?t(ta,la):W.extent?t(W.extent,la):ca.scale):ta=t(q(ma.extent,R),la);if(W=g(O))W.min&&W.min>ta?ta=W.min:W.max&&W.max<ta&&(ta=W.max);W=0;ka?W=ka.rotation:O.hasOwnProperty("rotation")?W=O.rotation:ca&&(W=ca.rotation);O=new k({targetGeometry:sa,scale:ta,rotation:W});U&&(O=U.fit(O),U.constrainByGeometry(O),U.rotationEnabled||(O.rotation=W));return O});return y.apply(this,arguments)}function F(O,W){const R=O.targetGeometry,U=W.targetGeometry;R.x=U.x;R.y=U.y;R.spatialReference=
U.spatialReference;O.scale=W.scale;O.rotation=W.rotation;return O}function I(O,W,R){return R?l.set(O,.5*(W[0]-R.right+R.left),.5*(W[1]-R.bottom+R.top)):l.scale(O,W,.5)}function K(O){var W=O.scale;O=O.targetGeometry;O=x.isSome(O)&&c.isValid(O.spatialReference)?1/(39.37*A.getMetersPerUnitForSR(O.spatialReference)*96):1;return W*O}function N(O){return c.isValid(O)?39.37*A.getMetersPerUnitForSR(O)*96:1}function S(O){return(O=c.getInfo(O))?O.valid[1]-O.valid[0]:0}const P=180/Math.PI,J=function(){const O=
r.create();return function(W,R,U){const Y=R.targetGeometry;n(O,Y);R=.5*K(R);W.xmin=O[0]-R*U[0];W.ymin=O[1]-R*U[1];W.xmax=O[0]+R*U[0];W.ymax=O[1]+R*U[1];W.spatialReference=Y.spatialReference;return W}}(),L=function(){const O=r.create();return function(W,R,U){return l.sub(W,l.scale(W,R,.5),I(O,R,U))}}(),T=function(){const O=G.create(),W=r.create();return function(R,U,Y,ca){const ia=K(U);U=B.toRadian(U.rotation)||0;l.set(W,ia,ia);C.fromScaling(O,W);C.rotate(O,O,U);C.translate(O,O,L(W,Y,ca));C.translate(O,
O,[0,ca.top-ca.bottom]);return l.set(R,O[4],O[5])}}(),H=function(){const O=r.create(),W=r.create(),R=r.create();return function(U,Y,ca,ia,la,ka){l.negate(O,Y);l.scale(W,ca,.5*ka);l.set(R,1/ia*ka,-1/ia*ka);C.fromTranslation(U,W);la&&C.rotate(U,U,la);C.scale(U,U,R);C.translate(U,U,O);return U}}(),u=function(){const O=r.create();return function(W,R,U,Y){const ca=K(R),ia=B.toRadian(R.rotation)||0;n(O,R.targetGeometry);return H(W,O,U,ca,ia,Y)}}(),d=function(){const O=r.create();return function(W,R,U,Y){const ca=
K(R);n(O,R.targetGeometry);return H(W,O,U,ca,0,Y)}}(),E=function(){const O=r.create(),W=r.create(),R=[0,0,0];return function(U,Y,ca){l.subtract(O,U,Y);l.normalize(O,O);l.subtract(W,U,ca);l.normalize(W,W);l.cross(R,O,W);U=Math.acos(l.dot(O,W)/(l.length(O)*l.length(W)))*P;0>R[2]&&(U=-U);isNaN(U)&&(U=0);return U}}(),D=function(){const O=r.create();return function(W,R,U,Y){const ca=W.targetGeometry;F(W,R);T(O,R,U,Y);ca.x+=O[0];ca.y+=O[1];return W}}(),M=function(){return function(O,W,R){F(O,W);W=O.targetGeometry;
W.x=R.x;W.y=R.y;W.spatialReference=R.spatialReference;return O}}(),Q=function(){const O=r.create();return function(W,R,U,Y,ca){ca||(ca="center");l.sub(O,U,Y);l.scale(O,O,.5);U=O[0];Y=O[1];switch(ca){case "center":l.set(O,0,0);break;case "left":l.set(O,-U,0);break;case "top":l.set(O,0,Y);break;case "right":l.set(O,U,0);break;case "bottom":l.set(O,0,-Y);break;case "top-left":l.set(O,-U,Y);break;case "bottom-left":l.set(O,-U,-Y);break;case "top-right":l.set(O,U,Y);break;case "bottom-right":l.set(O,U,
-Y)}da(W,R,O);return W}}(),V=function(){const O=r.create();return function(W,R,U,Y,ca){F(W,R);isNaN(U)||0===U||(fa(O,Y,R,ca),W.scale=R.scale*U,ea(O,O,W,ca),da(W,W,l.set(O,O[0]-Y[0],Y[1]-O[1])));return W}}(),Z=function(){const O=r.create();return function(W,R,U,Y,ca,ia){F(W,R);isNaN(U)||0===U||(fa(O,ca,R,ia),W.scale=R.scale*U,W.rotation+=Y,ea(O,O,W,ia),da(W,W,l.set(O,O[0]-ca[0],ca[1]-O[1])));return W}}(),ba=function(){const O=r.create(),W=r.create();return function(R,U,Y,ca,ia,la,ka){L(W,la,ka);l.add(O,
ia,W);return ca?Z(R,U,Y,ca,O,la):V(R,U,Y,O,la)}}(),fa=function(){const O=G.create();return function(W,R,U,Y){var ca=l.transformMat2d;u(O,U,Y,1);U=C.invert(O,O);return ca.call(l,W,R,U)}}(),ea=function(){const O=G.create();return function(W,R,U,Y){return l.transformMat2d(W,R,u(O,U,Y,1))}}(),da=function(){const O=r.create(),W=G.create();return function(R,U,Y){F(R,U);const ca=K(U),ia=R.targetGeometry;C.fromRotation(W,B.toRadian(U.rotation)||0);C.scale(W,W,r.fromValues(ca,ca));l.transformMat2d(O,Y,W);
ia.x+=O[0];ia.y+=O[1];return R}}();m.addPadding=D;m.angleBetween=E;m.centerAt=M;m.copy=F;m.create=function(O,W){return y.apply(this,arguments)};m.extentToScale=t;m.getAnchor=I;m.getExtent=J;m.getMatrix=H;m.getPaddingMapTranslation=T;m.getPaddingScreenTranslation=L;m.getResolution=K;m.getResolutionToScaleFactor=N;m.getTransform=u;m.getTransformNoRotation=d;m.getWorldScreenWidth=function(O,W){return Math.round(S(O)/W)};m.getWorldWidth=S;m.padAndScaleAndRotateBy=ba;m.resize=Q;m.rotateBy=function(O,W,
R){F(O,W);O.rotation+=R;return O};m.rotateTo=function(O,W,R){F(O,W);O.rotation=R;return O};m.scaleAndRotateBy=Z;m.scaleTo=function(O,W,R){F(O,W);O.scale=R;return O};m.setExtent=function(O,W,R,U,Y){M(O,W,R.center);O.scale=t(R,U);Y&&Y.constraints&&Y.constraints.constrain(O);return O};m.toMap=fa;m.toScreen=ea;m.translateBy=da;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/chunks/mat2df64":function(){define(["exports"],function(m){function v(){return[1,
0,0,1,0,0]}function k(B){return[B[0],B[1],B[2],B[3],B[4],B[5]]}function f(B,C,G,l,r,a){return[B,C,G,l,r,a]}function x(B,C){return new Float64Array(B,C,6)}const A=Object.freeze(Object.defineProperty({__proto__:null,create:v,clone:k,fromValues:f,createView:x},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=v;m.createView=x;m.fromValues=f;m.mat2df64=A})},"esri/chunks/vec2":function(){define(["exports","./common"],function(m,v){function k(D,M){D[0]=M[0];D[1]=M[1];return D}function f(D,M,Q){D[0]=
M;D[1]=Q;return D}function x(D,M,Q){D[0]=M[0]+Q[0];D[1]=M[1]+Q[1];return D}function A(D,M,Q){D[0]=M[0]-Q[0];D[1]=M[1]-Q[1];return D}function B(D,M,Q){D[0]=M[0]*Q[0];D[1]=M[1]*Q[1];return D}function C(D,M,Q){D[0]=M[0]/Q[0];D[1]=M[1]/Q[1];return D}function G(D,M){D[0]=Math.ceil(M[0]);D[1]=Math.ceil(M[1]);return D}function l(D,M){D[0]=Math.floor(M[0]);D[1]=Math.floor(M[1]);return D}function r(D,M,Q){D[0]=Math.min(M[0],Q[0]);D[1]=Math.min(M[1],Q[1]);return D}function a(D,M,Q){D[0]=Math.max(M[0],Q[0]);
D[1]=Math.max(M[1],Q[1]);return D}function b(D,M){D[0]=Math.round(M[0]);D[1]=Math.round(M[1]);return D}function p(D,M,Q){D[0]=M[0]*Q;D[1]=M[1]*Q;return D}function e(D,M,Q,V){D[0]=M[0]+Q[0]*V;D[1]=M[1]+Q[1]*V;return D}function h(D,M){const Q=M[0]-D[0];D=M[1]-D[1];return Math.sqrt(Q*Q+D*D)}function c(D,M){const Q=M[0]-D[0];D=M[1]-D[1];return Q*Q+D*D}function n(D){const M=D[0];D=D[1];return Math.sqrt(M*M+D*D)}function t(D){const M=D[0];D=D[1];return M*M+D*D}function z(D,M){D[0]=-M[0];D[1]=-M[1];return D}
function w(D,M){D[0]=1/M[0];D[1]=1/M[1];return D}function g(D,M){var Q=M[0];const V=M[1];Q=Q*Q+V*V;0<Q&&(Q=1/Math.sqrt(Q),D[0]=M[0]*Q,D[1]=M[1]*Q);return D}function q(D,M){return D[0]*M[0]+D[1]*M[1]}function y(D,M,Q){M=M[0]*Q[1]-M[1]*Q[0];D[0]=D[1]=0;D[2]=M;return D}function F(D,M,Q,V){const Z=M[0];M=M[1];D[0]=Z+V*(Q[0]-Z);D[1]=M+V*(Q[1]-M);return D}function I(D,M){M=M||1;const Q=2*v.RANDOM()*Math.PI;D[0]=Math.cos(Q)*M;D[1]=Math.sin(Q)*M;return D}function K(D,M,Q){const V=M[0];M=M[1];D[0]=Q[0]*V+
Q[2]*M;D[1]=Q[1]*V+Q[3]*M;return D}function N(D,M,Q){const V=M[0];M=M[1];D[0]=Q[0]*V+Q[2]*M+Q[4];D[1]=Q[1]*V+Q[3]*M+Q[5];return D}function S(D,M,Q){const V=M[0];M=M[1];D[0]=Q[0]*V+Q[3]*M+Q[6];D[1]=Q[1]*V+Q[4]*M+Q[7];return D}function P(D,M,Q){const V=M[0];M=M[1];D[0]=Q[0]*V+Q[4]*M+Q[12];D[1]=Q[1]*V+Q[5]*M+Q[13];return D}function J(D,M,Q,V){const Z=M[0]-Q[0];M=M[1]-Q[1];const ba=Math.sin(V);V=Math.cos(V);D[0]=Z*V-M*ba+Q[0];D[1]=Z*ba+M*V+Q[1];return D}function L(D,M){var Q=D[0];D=D[1];const V=M[0];
M=M[1];let Z=Q*Q+D*D;0<Z&&(Z=1/Math.sqrt(Z));let ba=V*V+M*M;0<ba&&(ba=1/Math.sqrt(ba));Q=(Q*V+D*M)*Z*ba;return 1<Q?0:-1>Q?Math.PI:Math.acos(Q)}function T(D){return"vec2("+D[0]+", "+D[1]+")"}function H(D,M){return D[0]===M[0]&&D[1]===M[1]}function u(D,M){const Q=D[0];D=D[1];const V=M[0];M=M[1];const Z=v.getEpsilon();return Math.abs(Q-V)<=Z*Math.max(1,Math.abs(Q),Math.abs(V))&&Math.abs(D-M)<=Z*Math.max(1,Math.abs(D),Math.abs(M))}function d(D,M,Q,V,Z){let ba=M[0]-Q[0];Q=M[1]-Q[1];Z=(V[0]*ba+V[1]*Q)*
(Z-1);ba=V[0]*Z;Q=V[1]*Z;D[0]=M[0]+ba;D[1]=M[1]+Q;return D}const E=Object.freeze(Object.defineProperty({__proto__:null,copy:k,set:f,add:x,subtract:A,multiply:B,divide:C,ceil:G,floor:l,min:r,max:a,round:b,scale:p,scaleAndAdd:e,distance:h,squaredDistance:c,length:n,squaredLength:t,negate:z,inverse:w,normalize:g,dot:q,cross:y,lerp:F,random:I,transformMat2:K,transformMat2d:N,transformMat3:S,transformMat4:P,rotate:J,angle:L,str:T,exactEquals:H,equals:u,projectAndScale:d,len:n,sub:A,mul:B,div:C,dist:h,
sqrDist:c,sqrLen:t},Symbol.toStringTag,{value:"Module"}));m.add=x;m.angle=L;m.ceil=G;m.copy=k;m.cross=y;m.dist=h;m.distance=h;m.div=C;m.divide=C;m.dot=q;m.equals=u;m.exactEquals=H;m.floor=l;m.inverse=w;m.len=n;m.length=n;m.lerp=F;m.max=a;m.min=r;m.mul=B;m.multiply=B;m.negate=z;m.normalize=g;m.projectAndScale=d;m.random=I;m.rotate=J;m.round=b;m.scale=p;m.scaleAndAdd=e;m.set=f;m.sqrDist=c;m.sqrLen=t;m.squaredDistance=c;m.squaredLength=t;m.str=T;m.sub=A;m.subtract=A;m.transformMat2=K;m.transformMat2d=
N;m.transformMat3=S;m.transformMat4=P;m.vec2=E})},"esri/chunks/vec2f64":function(){define(["exports"],function(m){function v(){return[0,0]}function k(h){return[h[0],h[1]]}function f(h,c){return[h,c]}function x(h){const c=[0,0],n=Math.min(2,h.length);for(let t=0;t<n;++t)c[t]=h[t];return c}function A(h,c){return new Float64Array(h,c,2)}function B(){return[0,0]}function C(){return[1,1]}function G(){return[1,0]}function l(){return[0,1]}const r=[0,0],a=[1,1],b=[1,0],p=[0,1],e=Object.freeze(Object.defineProperty({__proto__:null,
create:v,clone:k,fromValues:f,fromArray:x,createView:A,zeros:B,ones:C,unitX:G,unitY:l,ZEROS:r,ONES:a,UNIT_X:b,UNIT_Y:p},Symbol.toStringTag,{value:"Module"}));m.ONES=a;m.UNIT_X=b;m.UNIT_Y=p;m.ZEROS=r;m.clone=k;m.create=v;m.createView=A;m.fromArray=x;m.fromValues=f;m.ones=C;m.unitX=G;m.unitY=l;m.vec2f64=e;m.zeros=B})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe","../../core/reactiveUtils","../../core/scheduling"],function(m,v,k){return function(){function f(A){this.view=A;this._frameTaskHandle=
null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;const {basemapView:B,graphicsView:C,labelManager:G,layerViews:l,state:{id:r}}=this.view;B.baseLayerViews.forEach(this._updateLayerView,this);
l.forEach(this._updateLayerView,this);B.referenceLayerViews.forEach(this._updateLayerView,this);m.isSome(G)&&(G.lastUpdateId!==r&&(G.viewChange(),G.lastUpdateId=r),G.updateRequested&&G.processUpdate(this._updateParameters));m.isSome(C)&&(C.lastUpdateId!==r&&(C.viewChange(),C.lastUpdateId=r),C.updateRequested&&C.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}
var x=f.prototype;x.destroy=function(){this.stop()};x.start=function(){if(!this._frameTaskHandle){var A=this.view;this.stationary=A.stationary;this._updateParameters={state:A.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:A.renderingOptions};this._stationaryHandle=v.watch(()=>A.stationary,B=>{this.stationary=B;this.requestFrame()});this._frameTaskHandle=k.addFrameTask(this);this.requestUpdate()}};x.stop=function(){this._frameTaskHandle&&(this._updateRequested=
!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};x.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};x.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};x._updateLayerView=function(A){const B=this.view.state,C=A.lastUpdateId;if(null==C||!this.stationary&&!A.moving)A.moving=!0,A.moveStart();
C!==B.id&&A.viewChange();this.stationary&&A.moving&&(A.moving=!1,A.moveEnd());A.lastUpdateId=B.id;A.updateRequested&&A.processUpdate(this._updateParameters);"layerViews"in A&&A.layerViews.forEach(this._updateLayerView,this)};return f}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe"],function(m,v,k,f){function x(){return Promise.all([new Promise((l,r)=>m(["./webglDeps"],l,r)),new Promise((l,r)=>m(["./mapViewDeps"],l,r))])}
const A=l=>Object.freeze(Object.defineProperty({__proto__:null,default:l},Symbol.toStringTag,{value:"Module"})),B=()=>x().then(()=>new Promise((l,r)=>m(["./layers/TileLayerView2D"],a=>l(A(a)),r))),C=()=>x().then(()=>new Promise((l,r)=>m(["./layers/FeatureLayerView2D"],a=>l(A(a)),r))),G={"base-dynamic":()=>x().then(()=>new Promise((l,r)=>m(["./layers/BaseDynamicLayerView2D"],a=>l(A(a)),r))),"base-tile":B,"bing-maps":B,csv:C,"geo-rss":()=>x().then(()=>new Promise((l,r)=>m(["./layers/GeoRSSLayerView2D"],
a=>l(A(a)),r))),feature:C,geojson:C,graphics:()=>x().then(()=>new Promise((l,r)=>m(["./layers/GraphicsLayerView2D"],a=>l(A(a)),r))),group:()=>x().then(()=>new Promise((l,r)=>m(["./layers/GroupLayerView2D"],a=>l(A(a)),r))),imagery:()=>x().then(()=>new Promise((l,r)=>m(["./layers/ImageryLayerView2D"],a=>l(A(a)),r))),"imagery-tile":()=>x().then(()=>new Promise((l,r)=>m(["./layers/ImageryTileLayerView2D"],a=>l(A(a)),r))),kml:()=>x().then(()=>new Promise((l,r)=>m(["./layers/KMLLayerView2D"],a=>l(A(a)),
r))),"map-image":()=>x().then(()=>new Promise((l,r)=>m(["./layers/MapImageLayerView2D"],a=>l(A(a)),r))),"map-notes":()=>x().then(()=>new Promise((l,r)=>m(["./layers/MapNotesLayerView2D"],a=>l(A(a)),r))),media:()=>x().then(()=>new Promise((l,r)=>m(["./layers/MediaLayerView2D"],a=>l(A(a)),r))),"ogc-feature":()=>x().then(()=>new Promise((l,r)=>m(["./layers/OGCFeatureLayerView2D"],a=>l(A(a)),r))),"open-street-map":B,"oriented-imagery":C,route:()=>x().then(()=>new Promise((l,r)=>m(["./layers/RouteLayerView2D"],
a=>l(A(a)),r))),stream:()=>x().then(()=>new Promise((l,r)=>m(["./layers/StreamLayerView2D"],a=>l(A(a)),r))),"subtype-group":()=>x().then(()=>new Promise((l,r)=>m(["./layers/SubtypeGroupLayerView2D"],a=>l(A(a)),r))),tile:B,"vector-tile":()=>x().then(()=>new Promise((l,r)=>m(["./layers/VectorTileLayerView2D"],a=>l(A(a)),r))),wcs:()=>x().then(()=>new Promise((l,r)=>m(["./layers/ImageryTileLayerView2D"],a=>l(A(a)),r))),"web-tile":B,wfs:C,wms:()=>x().then(()=>new Promise((l,r)=>m(["./layers/WMSLayerView2D"],
a=>l(A(a)),r))),wmts:()=>x().then(()=>new Promise((l,r)=>m(["./layers/WMTSLayerView2D"],a=>l(A(a)),r))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};v.layerView2DImporter={hasLayerViewModule:l=>f.isSome(G[l.type]),importLayerView:l=>{var r=G[l.type];if(f.isNone(r))throw l=l.declaredClass?l.declaredClass.slice(l.declaredClass.lastIndexOf(".")+1):"Unknown",
r=l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new k(`${r}:view-not-supported`,`${l} is not supported in 2D`);return r(l)}};Object.defineProperties(v,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){k={base:null,key:"type",typeMap:{extent:b,polygon:p}};f=function(e){function h(n){n=e.call(this,n)||this;n.lods=null;n.minScale=0;n.maxScale=0;n.minZoom=-1;n.maxZoom=-1;n.rotationEnabled=!0;n.snapToZoom=!0;return n}m._inheritsLoose(h,e);var c=h.prototype;c.destroy=function(){this.view=null};c.canZoomInTo=function(n){const t=this.effectiveMaxScale;return 0===t||n>=t};c.canZoomOutTo=function(n){const t=this.effectiveMinScale;return 0===t||n<=t};c.constrain=function(n,
t){this._zoom.constrain(n,t);this._rotation.constrain(n,t);this._geometry.constrain(n,t);return n};c.constrainByGeometry=function(n){return this._geometry.constrain(n)};c.fit=function(n){return this._zoom.fit(n)};c.zoomToScale=function(n){return this._zoom.zoomToScale(n)};c.scaleToZoom=function(n){return this._zoom.scaleToZoom(n)};c.snapScale=function(n){return this._zoom.snapToClosestScale(n)};c.snapToNextScale=function(n){return this._zoom.snapToNextScale(n)};c.snapToPreviousScale=function(n){return this._zoom.snapToPreviousScale(n)};
m._createClass(h,[{key:"effectiveLODs",get:function(){return this._zoom.effectiveLODs}},{key:"effectiveMinScale",get:function(){return this._zoom.effectiveMinScale}},{key:"effectiveMaxScale",get:function(){return this._zoom.effectiveMaxScale}},{key:"effectiveMinZoom",get:function(){return this._zoom.effectiveMinZoom}},{key:"effectiveMaxZoom",get:function(){return this._zoom.effectiveMaxZoom}},{key:"geometry",set:function(n){n?this._set("geometry",n):this._set("geometry",null)}},{key:"version",get:function(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}},
{key:"_defaultLODs",get:function(){const n=this.view?.defaultsFromMap?.tileInfo,t=this.view?.spatialReference;return n&&t&&n.spatialReference.equals(t)?n.lods:null}},{key:"_geometry",get:function(){return new l.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.spatialReference})}},{key:"_rotation",get:function(){return new r({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){const n=this._get("_zoom"),t=this.lods||this._defaultLODs,z=this.minZoom,w=this.maxZoom,
g=this.minScale,q=this.maxScale,y=this.snapToZoom;return n&&n.lods===t&&n.minZoom===z&&n.maxZoom===w&&n.minScale===g&&n.maxScale===q&&n.snapToZoom===y?n:new a({lods:t,minZoom:z,maxZoom:w,minScale:g,maxScale:q,snapToZoom:y})}}]);return h}(f);v.__decorate([x.property({readOnly:!0})],f.prototype,"effectiveLODs",null);v.__decorate([x.property({readOnly:!0})],f.prototype,"effectiveMinScale",null);v.__decorate([x.property({readOnly:!0})],f.prototype,"effectiveMaxScale",null);v.__decorate([x.property({readOnly:!0})],
f.prototype,"effectiveMinZoom",null);v.__decorate([x.property({readOnly:!0})],f.prototype,"effectiveMaxZoom",null);v.__decorate([x.property({types:k,value:null})],f.prototype,"geometry",null);v.__decorate([x.property({type:[G]})],f.prototype,"lods",void 0);v.__decorate([x.property()],f.prototype,"minScale",void 0);v.__decorate([x.property()],f.prototype,"maxScale",void 0);v.__decorate([x.property()],f.prototype,"minZoom",void 0);v.__decorate([x.property()],f.prototype,"maxZoom",void 0);v.__decorate([x.property()],
f.prototype,"rotationEnabled",void 0);v.__decorate([x.property()],f.prototype,"snapToZoom",void 0);v.__decorate([x.property()],f.prototype,"view",void 0);v.__decorate([x.property({readOnly:!0})],f.prototype,"version",null);v.__decorate([x.property()],f.prototype,"_defaultLODs",null);v.__decorate([x.property({type:l.GeometryConstraint})],f.prototype,"_geometry",null);v.__decorate([x.property({type:r})],f.prototype,"_rotation",null);v.__decorate([x.property({readOnly:!0,type:a})],f.prototype,"_zoom",
null);return f=v.__decorate([C.subclass("esri.views.2d.MapViewConstraints")],f)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){var e;m.GeometryConstraint=e=function(h){function c(t){t=h.call(this,t)||this;t.geometry=null;t.spatialReference=null;return t}v._inheritsLoose(c,h);var n=c.prototype;n.constrain=function(t,z){if(B.isNone(this.normalizedGeometry))return t;z=t.targetGeometry;if("extent"===this.normalizedGeometry.type?b.extentContainsPoint(this.normalizedGeometry,z):b.polygonContainsPoint(this.normalizedGeometry,z))return t;({coordinate:z}=p.nearestCoordinate(this.normalizedGeometry,
z));if(!z)return t;t.targetGeometry=z;return t};n.clone=function(){return new e({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})};v._createClass(c,[{key:"normalizedGeometry",get:function(){if(B.isNone(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return a.project(this.geometry,this.spatialReference)}catch(t){return A.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}}]);return c}(x.NumericIdentifiableMixin(f));k.__decorate([C.property({constructOnly:!0})],m.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([C.property({readOnly:!0})],m.GeometryConstraint.prototype,"normalizedGeometry",null);k.__decorate([C.property({constructOnly:!0})],m.GeometryConstraint.prototype,"spatialReference",void 0);m.GeometryConstraint=e=k.__decorate([r.subclass("esri.views.2d.constraints.GeometryConstraint")],
m.GeometryConstraint);Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/geometry/support/near":function(){define(["exports","../../geometry","../../chunks/vec2","./coordsUtils","../Point"],function(m,v,k,f,x){m.nearestCoordinate=function(A,B){const {spatialReference:C}=B;B=[B.x,B.y];let G=Number.POSITIVE_INFINITY,l=0,r=0;const a=[0,0];A="extent"===A.type?[[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]]:A.rings;for(const b of A)for(A=
0;A<b.length-1;A++){f.projectPointOnLine(a,B,b,A);const p=k.distance(B,a);p<G&&(G=p,l=a[0],r=a[1])}return{coordinate:new x({x:l,y:r,spatialReference:C}),distance:G}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B,C){var G;k=G=function(l){function r(){var b=l.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}m._inheritsLoose(r,l);var a=r.prototype;a.constrain=function(b,p){if(!this.enabled||!p)return b;this.rotationEnabled||(b.rotation=p.rotation);return b};a.clone=function(){return new G({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return r}(f.NumericIdentifiableMixin(k));v.__decorate([x.property()],k.prototype,"enabled",void 0);v.__decorate([x.property()],
k.prototype,"rotationEnabled",void 0);return k=G=v.__decorate([C.subclass("esri.views.2d.constraints.RotationConstraint")],k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),function(m,v,k,
f,x,A,B,C){var G;k=G=function(l){function r(b){b=l.call(this,b)||this;b._lodByScale={};b._scales=[];b.effectiveLODs=null;b.effectiveMinZoom=-1;b.effectiveMaxZoom=-1;b.effectiveMinScale=0;b.effectiveMaxScale=0;b.lods=null;b.minZoom=-1;b.maxZoom=-1;b.minScale=0;b.maxScale=0;b.snapToZoom=!0;return b}m._inheritsLoose(r,l);var a=r.prototype;a.initialize=function(){let {lods:b,minScale:p,maxScale:e,minZoom:h,maxZoom:c}=this,n=-1,t=-1,z=!1,w=!1;0!==p&&0!==e&&p<e&&([p,e]=[e,p]);if(b&&b.length){b=b.map(q=>
q.clone());b.sort((q,y)=>y.scale-q.scale);b.forEach((q,y)=>q.level=y);for(const q of b){!z&&0<p&&p>=q.scale&&(n=q.level,z=!0);!w&&0<e&&e>=q.scale&&(t=g?g.level:-1,w=!0);var g=q}-1===h&&(h=0===p?0:n);-1===c&&(c=0===e?b.length-1:t);h=Math.max(h,0);h=Math.min(h,b.length-1);c=Math.max(c,0);c=Math.min(c,b.length-1);h>c&&([h,c]=[c,h]);p=b[h].scale;e=b[c].scale;b.splice(0,h);b.splice(c-h+1,b.length);b.forEach((q,y)=>{this._lodByScale[q.scale]=q;this._scales[y]=q.scale});this._set("effectiveLODs",b);this._set("effectiveMinZoom",
h);this._set("effectiveMaxZoom",c)}this._set("effectiveMinScale",p);this._set("effectiveMaxScale",e)};a.constrain=function(b,p){if(p&&b.scale===p.scale)return b;var e=this.effectiveMinScale;const h=this.effectiveMaxScale,c=b.targetGeometry,n=p&&p.targetGeometry,t=0!==e&&b.scale>e;if(0!==h&&b.scale<h||t)e=t?e:h,p&&n&&(p=(e-p.scale)/(b.scale-p.scale),c.x=n.x+(c.x-n.x)*p,c.y=n.y+(c.y-n.y)*p),b.scale=e;this.snapToZoom&&this.effectiveLODs&&(b.scale=this._getClosestScale(b.scale));return b};a.fit=function(b){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(b,null);const p=this.scaleToZoom(b.scale);b.scale=this.zoomToScale(.99<Math.abs(p-Math.floor(p))?Math.round(p):Math.floor(p));return b};a.zoomToScale=function(b){if(!this.effectiveLODs)return 0;b-=this.effectiveMinZoom;b=Math.max(0,b);const p=this._scales;if(0>=b)return p[0];if(b>=p.length)return p[p.length-1];const e=Math.round(b);return p[e]+(e-b)*(p[Math.round(b-.5)]-p[e])};a.scaleToZoom=function(b){if(!this.effectiveLODs)return-1;const p=this._scales;let e,
h;if(b>=p[0])return this.effectiveMinZoom;if(b<=p[p.length-1])return this.effectiveMaxZoom;for(let c=0;c<p.length-1;c++){e=p[c];h=p[c+1];if(h===b)return c+this.effectiveMinZoom+1;if(e>b&&h<b)return c+this.effectiveMinZoom+1-(b-h)/(e-h)}return-1};a.snapToClosestScale=function(b){if(!this.effectiveLODs)return b;b=this.scaleToZoom(b);return this.zoomToScale(Math.round(b))};a.snapToNextScale=function(b,p=.5){if(!this.effectiveLODs)return b*p;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b+
1)};a.snapToPreviousScale=function(b,p=2){if(!this.effectiveLODs)return b*p;b=Math.round(this.scaleToZoom(b));return this.zoomToScale(b-1)};a.clone=function(){return new G({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};a._getClosestScale=function(b){if(this._lodByScale[b])return this._lodByScale[b].scale;b=this._scales.reduce((p,e)=>Math.abs(e-b)<=Math.abs(p-b)?e:p,this._scales[0]);return this._lodByScale[b].scale};return r}(f.NumericIdentifiableMixin(k));
v.__decorate([x.property({readOnly:!0})],k.prototype,"effectiveLODs",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);v.__decorate([x.property()],k.prototype,"lods",void 0);v.__decorate([x.property()],k.prototype,"minZoom",
void 0);v.__decorate([x.property()],k.prototype,"maxZoom",void 0);v.__decorate([x.property()],k.prototype,"minScale",void 0);v.__decorate([x.property()],k.prototype,"maxScale",void 0);v.__decorate([x.property()],k.prototype,"snapToZoom",void 0);return k=G=v.__decorate([C.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/vec2 ../../chunks/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a){var b,p;let e=b=function(h){function c(){var n=h.apply(this,arguments)||this;n.left=0;n.top=0;n.right=0;n.bottom=0;return n}m._inheritsLoose(c,h);c.prototype.clone=function(){return new b({left:this.left,top:this.top,right:this.right,bottom:this.bottom})};return c}(k);v.__decorate([x.property()],e.prototype,"left",void 0);v.__decorate([x.property()],e.prototype,"top",void 0);v.__decorate([x.property()],e.prototype,"right",void 0);v.__decorate([x.property()],e.prototype,
"bottom",void 0);e=b=v.__decorate([C.subclass("esri.views.2d.PaddedViewState.Padding")],e);k=p=function(h){function c(...n){var t=h.call(this,...n)||this;t.paddedViewState=new a;t._updateContent=(()=>{const z=l.create();return()=>{var w=t._get("size");const g=t._get("padding");if(w&&g){var q=t.paddedViewState;G.set(z,g.left+g.right,g.top+g.bottom);G.subtract(z,w,z);G.copy(q.size,z);if(w=q.viewpoint)t.viewpoint=w}}})();t.addHandles(f.watch(()=>[t.size,t.padding],()=>t._updateContent(),f.sync));t.padding=
new e;t.size=[0,0];return t}m._inheritsLoose(c,h);c.prototype.clone=function(){return new p({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})};m._createClass(c,[{key:"padding",set:function(n){this._set("padding",n||new e)}},{key:"viewpoint",set:function(n){if(n){const t=n.clone();this.paddedViewState.viewpoint=n;r.addPadding(t,n,this._get("size"),this._get("padding"));n=this._viewpoint2D;const z=t.targetGeometry;n.center[0]=
z.x;n.center[1]=z.y;n.rotation=t.rotation;n.scale=t.scale;n.spatialReference=z.spatialReference;this._update()}}}]);return c}(a);v.__decorate([x.property()],k.prototype,"paddedViewState",void 0);v.__decorate([x.property({type:e})],k.prototype,"padding",null);v.__decorate([x.property()],k.prototype,"viewpoint",null);return k=p=v.__decorate([C.subclass("esri.views.2d.PaddedViewState")],k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../chunks/common ../../chunks/mat2d ../../chunks/mat2df32 ../../chunks/mat2df64 ../../chunks/mat3 ../../chunks/mat3f32 ../../chunks/vec2 ../../chunks/vec2f32 ../../chunks/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g){var q;const y=[0,0];k=q=function(F){function I(N){N=F.call(this,N)||this;N._viewpoint2D={center:n.create(),rotation:0,scale:0,spatialReference:null};N.center=[0,0];N.extent=new w;N.id=0;N.inverseTransform=b.create();N.resolution=0;N.rotation=0;N.scale=0;N.transform=b.create();N.transformNoRotation=b.create();N.displayMat3=e.create();N.displayViewMat3=e.create();N.viewMat3=e.create();N.viewMat2d=a.create();N.worldScreenWidth=0;N.size=[0,0];return N}
m._inheritsLoose(I,F);var K=I.prototype;K.copy=function(N){const S=this.size,P=this.viewpoint;P&&S?(this.viewpoint=z.copy(P,N.viewpoint),this._set("size",h.copy(S,N.size))):(this.viewpoint=N.viewpoint.clone(),this._set("size",[N.size[0],N.size[1]]));this._set("pixelRatio",N.pixelRatio);return this};K.clone=function(){return new q({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};K.toMap=function(N,S,P){if(t.isVec2(S))return h.transformMat2d(N,S,this.inverseTransform);
y[0]=S;y[1]=P;return h.transformMat2d(N,y,this.inverseTransform)};K.toScreen=function(N,S,P){if(t.isVec2(S))return h.transformMat2d(N,S,this.transform);y[0]=S;y[1]=P;return h.transformMat2d(N,y,this.transform)};K.toScreenNoRotation=function(N,S,P){if(t.isVec2(S))return h.transformMat2d(N,S,this.transformNoRotation);y[0]=S;y[1]=P;return h.transformMat2d(N,y,this.transformNoRotation)};K.getScreenTransform=function(N,S){const {center:P}=this._viewpoint2D,J=this._get("pixelRatio")||1,L=this._get("size");
z.getMatrix(N,P,L,S,0,J);return N};K._update=function(){const {center:N,spatialReference:S,scale:P,rotation:J}=this._viewpoint2D,L=this._get("pixelRatio")||1,T=this._get("size"),H=new f({targetGeometry:new g(N[0],N[1],S),scale:P,rotation:J});this._set("viewpoint",H);if(T&&S&&P){this.resolution=z.getResolution(H);this.rotation=J;this.scale=P;this.spatialReference=S;h.copy(this.center,N);p.set(this.displayMat3,0!==T[0]?2/T[0]:0,0,0,0,0!==T[1]?-2/T[1]:0,0,-1,1,1);var u=p.identity(this.viewMat3),d=c.fromValues(T[0]/
2,T[1]/2),E=c.fromValues(-T[0]/2,-T[1]/2),D=l.toRadian(J);p.translate(u,u,d);p.rotate(u,u,D);p.translate(u,u,E);p.multiply(this.displayViewMat3,this.displayMat3,u);u=r.fromTranslation(this.viewMat2d,d);r.rotate(u,u,D);r.translate(u,u,E);z.getExtent(this.extent,H,T);z.getTransform(this.transform,H,T,L);r.invert(this.inverseTransform,this.transform);z.getTransformNoRotation(this.transformNoRotation,H,T,L);this.worldScreenWidth=z.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",
this.id+1);return this}};m._createClass(I,[{key:"pixelRatio",set:function(N){this._set("pixelRatio",N);this._update()}},{key:"size",set:function(N){this._set("size",N);this._update()}},{key:"viewpoint",set:function(N){if(N){const S=this._viewpoint2D,P=N.targetGeometry;S.center[0]=P.x;S.center[1]=P.y;S.rotation=N.rotation;S.scale=N.scale;S.spatialReference=P.spatialReference}this._update()}}]);return I}(x.JSONSupport);v.__decorate([A.property({readOnly:!0})],k.prototype,"id",void 0);v.__decorate([A.property({value:1,
json:{write:!0}})],k.prototype,"pixelRatio",null);v.__decorate([A.property({json:{write:!0}})],k.prototype,"size",null);v.__decorate([A.property()],k.prototype,"spatialReference",void 0);v.__decorate([A.property({type:f,json:{write:!0}})],k.prototype,"viewpoint",null);return k=q=v.__decorate([G.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(m,v){function k(H,u){H[0]=u[0];H[1]=u[1];H[2]=u[2];H[3]=u[4];H[4]=u[5];H[5]=u[6];H[6]=u[8];H[7]=
u[9];H[8]=u[10];return H}function f(H,u){H[0]=u[0];H[1]=u[1];H[2]=u[2];H[3]=u[3];H[4]=u[4];H[5]=u[5];H[6]=u[6];H[7]=u[7];H[8]=u[8];return H}function x(H,u,d,E,D,M,Q,V,Z,ba){H[0]=u;H[1]=d;H[2]=E;H[3]=D;H[4]=M;H[5]=Q;H[6]=V;H[7]=Z;H[8]=ba;return H}function A(H){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function B(H,u){if(H===u){const d=u[1],E=u[2],D=u[5];H[1]=u[3];H[2]=u[6];H[3]=d;H[5]=u[7];H[6]=E;H[7]=D}else H[0]=u[0],H[1]=u[3],H[2]=u[6],H[3]=u[1],H[4]=u[4],H[5]=u[7],
H[6]=u[2],H[7]=u[5],H[8]=u[8];return H}function C(H,u){const d=u[0],E=u[1],D=u[2],M=u[3],Q=u[4],V=u[5],Z=u[6],ba=u[7];u=u[8];const fa=u*Q-V*ba,ea=-u*M+V*Z,da=ba*M-Q*Z;let O=d*fa+E*ea+D*da;if(!O)return null;O=1/O;H[0]=fa*O;H[1]=(-u*E+D*ba)*O;H[2]=(V*E-D*Q)*O;H[3]=ea*O;H[4]=(u*d-D*Z)*O;H[5]=(-V*d+D*M)*O;H[6]=da*O;H[7]=(-ba*d+E*Z)*O;H[8]=(Q*d-E*M)*O;return H}function G(H,u){const d=u[0],E=u[1],D=u[2],M=u[3],Q=u[4],V=u[5],Z=u[6],ba=u[7];u=u[8];H[0]=Q*u-V*ba;H[1]=D*ba-E*u;H[2]=E*V-D*Q;H[3]=V*Z-M*u;H[4]=
d*u-D*Z;H[5]=D*M-d*V;H[6]=M*ba-Q*Z;H[7]=E*Z-d*ba;H[8]=d*Q-E*M;return H}function l(H){const u=H[3],d=H[4],E=H[5],D=H[6],M=H[7],Q=H[8];return H[0]*(Q*d-E*M)+H[1]*(-Q*u+E*D)+H[2]*(M*u-d*D)}function r(H,u,d){const E=u[0],D=u[1],M=u[2],Q=u[3],V=u[4],Z=u[5],ba=u[6],fa=u[7];u=u[8];const ea=d[0],da=d[1],O=d[2],W=d[3],R=d[4],U=d[5],Y=d[6],ca=d[7];d=d[8];H[0]=ea*E+da*Q+O*ba;H[1]=ea*D+da*V+O*fa;H[2]=ea*M+da*Z+O*u;H[3]=W*E+R*Q+U*ba;H[4]=W*D+R*V+U*fa;H[5]=W*M+R*Z+U*u;H[6]=Y*E+ca*Q+d*ba;H[7]=Y*D+ca*V+d*fa;H[8]=
Y*M+ca*Z+d*u;return H}function a(H,u,d){const E=u[0],D=u[1],M=u[2],Q=u[3],V=u[4],Z=u[5],ba=u[6],fa=u[7];u=u[8];const ea=d[0];d=d[1];H[0]=E;H[1]=D;H[2]=M;H[3]=Q;H[4]=V;H[5]=Z;H[6]=ea*E+d*Q+ba;H[7]=ea*D+d*V+fa;H[8]=ea*M+d*Z+u;return H}function b(H,u,d){const E=u[0],D=u[1],M=u[2],Q=u[3],V=u[4],Z=u[5],ba=u[6],fa=u[7];u=u[8];const ea=Math.sin(d);d=Math.cos(d);H[0]=d*E+ea*Q;H[1]=d*D+ea*V;H[2]=d*M+ea*Z;H[3]=d*Q-ea*E;H[4]=d*V-ea*D;H[5]=d*Z-ea*M;H[6]=ba;H[7]=fa;H[8]=u;return H}function p(H,u,d){const E=d[0],
D=d[1];d=d[2];H[0]=E*u[0];H[1]=E*u[1];H[2]=E*u[2];H[3]=D*u[3];H[4]=D*u[4];H[5]=D*u[5];H[6]=d*u[6];H[7]=d*u[7];H[8]=d*u[8];return H}function e(H,u,d){const E=d[0];d=d[1];H[0]=E*u[0];H[1]=E*u[1];H[2]=E*u[2];H[3]=d*u[3];H[4]=d*u[4];H[5]=d*u[5];return H}function h(H,u){H[0]=1;H[1]=0;H[2]=0;H[3]=0;H[4]=1;H[5]=0;H[6]=u[0];H[7]=u[1];H[8]=1;return H}function c(H,u){const d=Math.sin(u);u=Math.cos(u);H[0]=u;H[1]=d;H[2]=0;H[3]=-d;H[4]=u;H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function n(H,u){H[0]=u[0];H[1]=0;H[2]=
0;H[3]=0;H[4]=u[1];H[5]=0;H[6]=0;H[7]=0;H[8]=1;return H}function t(H,u){H[0]=u[0];H[1]=u[1];H[2]=0;H[3]=u[2];H[4]=u[3];H[5]=0;H[6]=u[4];H[7]=u[5];H[8]=1;return H}function z(H,u){var d=u[0],E=u[1],D=u[2];u=u[3];var M=d+d,Q=E+E;const V=D+D;d*=M;const Z=E*M;E*=Q;const ba=D*M,fa=D*Q;D*=V;M*=u;Q*=u;u*=V;H[0]=1-E-D;H[3]=Z-u;H[6]=ba+Q;H[1]=Z+u;H[4]=1-d-D;H[7]=fa-M;H[2]=ba-Q;H[5]=fa+M;H[8]=1-d-E;return H}function w(H,u){const d=u[0],E=u[1],D=u[2],M=u[4],Q=u[5],V=u[6],Z=u[8],ba=u[9];u=u[10];const fa=u*Q-V*
ba,ea=-u*M+V*Z,da=ba*M-Q*Z;var O=d*fa+E*ea+D*da;if(!O)return null;O=1/O;H[0]=fa*O;H[1]=(-u*E+D*ba)*O;H[2]=(V*E-D*Q)*O;H[3]=ea*O;H[4]=(u*d-D*Z)*O;H[5]=(-V*d+D*M)*O;H[6]=da*O;H[7]=(-ba*d+E*Z)*O;H[8]=(Q*d-E*M)*O;return H}function g(H,u){const d=u[0],E=u[1],D=u[2],M=u[3],Q=u[4],V=u[5],Z=u[6],ba=u[7];var fa=u[8],ea=u[9],da=u[10],O=u[11];const W=u[12],R=u[13],U=u[14];u=u[15];const Y=d*V-E*Q,ca=d*Z-D*Q,ia=d*ba-M*Q,la=E*Z-D*V,ka=E*ba-M*V,ma=D*ba-M*Z,sa=fa*R-ea*W,ta=fa*U-da*W;fa=fa*u-O*W;const ya=ea*U-da*
R;ea=ea*u-O*R;da=da*u-O*U;O=Y*da-ca*ea+ia*ya+la*fa-ka*ta+ma*sa;if(!O)return null;O=1/O;H[0]=(V*da-Z*ea+ba*ya)*O;H[1]=(Z*fa-Q*da-ba*ta)*O;H[2]=(Q*ea-V*fa+ba*sa)*O;H[3]=(D*ea-E*da-M*ya)*O;H[4]=(d*da-D*fa+M*ta)*O;H[5]=(E*fa-d*ea-M*sa)*O;H[6]=(R*ma-U*ka+u*la)*O;H[7]=(U*ia-W*ma-u*ca)*O;H[8]=(W*ka-R*ia+u*Y)*O;return H}function q(H,u,d){H[0]=2/u;H[1]=0;H[2]=0;H[3]=0;H[4]=-2/d;H[5]=0;H[6]=-1;H[7]=1;H[8]=1;return H}function y(H){return"mat3("+H[0]+", "+H[1]+", "+H[2]+", "+H[3]+", "+H[4]+", "+H[5]+", "+H[6]+
", "+H[7]+", "+H[8]+")"}function F(H){return Math.sqrt(H[0]**2+H[1]**2+H[2]**2+H[3]**2+H[4]**2+H[5]**2+H[6]**2+H[7]**2+H[8]**2)}function I(H,u,d){H[0]=u[0]+d[0];H[1]=u[1]+d[1];H[2]=u[2]+d[2];H[3]=u[3]+d[3];H[4]=u[4]+d[4];H[5]=u[5]+d[5];H[6]=u[6]+d[6];H[7]=u[7]+d[7];H[8]=u[8]+d[8];return H}function K(H,u,d){H[0]=u[0]-d[0];H[1]=u[1]-d[1];H[2]=u[2]-d[2];H[3]=u[3]-d[3];H[4]=u[4]-d[4];H[5]=u[5]-d[5];H[6]=u[6]-d[6];H[7]=u[7]-d[7];H[8]=u[8]-d[8];return H}function N(H,u,d){H[0]=u[0]*d;H[1]=u[1]*d;H[2]=u[2]*
d;H[3]=u[3]*d;H[4]=u[4]*d;H[5]=u[5]*d;H[6]=u[6]*d;H[7]=u[7]*d;H[8]=u[8]*d;return H}function S(H,u,d,E){H[0]=u[0]+d[0]*E;H[1]=u[1]+d[1]*E;H[2]=u[2]+d[2]*E;H[3]=u[3]+d[3]*E;H[4]=u[4]+d[4]*E;H[5]=u[5]+d[5]*E;H[6]=u[6]+d[6]*E;H[7]=u[7]+d[7]*E;H[8]=u[8]+d[8]*E;return H}function P(H,u){return H[0]===u[0]&&H[1]===u[1]&&H[2]===u[2]&&H[3]===u[3]&&H[4]===u[4]&&H[5]===u[5]&&H[6]===u[6]&&H[7]===u[7]&&H[8]===u[8]}function J(H,u){const d=H[0],E=H[1],D=H[2],M=H[3],Q=H[4],V=H[5],Z=H[6],ba=H[7];H=H[8];const fa=u[0],
ea=u[1],da=u[2],O=u[3],W=u[4],R=u[5],U=u[6],Y=u[7];u=u[8];const ca=v.getEpsilon();return Math.abs(d-fa)<=ca*Math.max(1,Math.abs(d),Math.abs(fa))&&Math.abs(E-ea)<=ca*Math.max(1,Math.abs(E),Math.abs(ea))&&Math.abs(D-da)<=ca*Math.max(1,Math.abs(D),Math.abs(da))&&Math.abs(M-O)<=ca*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(Q-W)<=ca*Math.max(1,Math.abs(Q),Math.abs(W))&&Math.abs(V-R)<=ca*Math.max(1,Math.abs(V),Math.abs(R))&&Math.abs(Z-U)<=ca*Math.max(1,Math.abs(Z),Math.abs(U))&&Math.abs(ba-Y)<=ca*Math.max(1,
Math.abs(ba),Math.abs(Y))&&Math.abs(H-u)<=ca*Math.max(1,Math.abs(H),Math.abs(u))}function L(H){const u=v.getEpsilon(),d=H[0],E=H[1],D=H[2],M=H[3],Q=H[4],V=H[5],Z=H[6],ba=H[7];H=H[8];return Math.abs(1-(d*d+M*M+Z*Z))<=u&&Math.abs(1-(E*E+Q*Q+ba*ba))<=u&&Math.abs(1-(D*D+V*V+H*H))<=u}const T=Object.freeze(Object.defineProperty({__proto__:null,fromMat4:k,copy:f,set:x,identity:A,transpose:B,invert:C,adjoint:G,determinant:l,multiply:r,translate:a,rotate:b,scale:p,scaleByVec2:e,fromTranslation:h,fromRotation:c,
fromScaling:n,fromMat2d:t,fromQuat:z,normalFromMat4Legacy:w,normalFromMat4:g,projection:q,str:y,frob:F,add:I,subtract:K,multiplyScalar:N,multiplyScalarAndAdd:S,exactEquals:P,equals:J,isOrthoNormal:L,mul:r,sub:K},Symbol.toStringTag,{value:"Module"}));m.add=I;m.adjoint=G;m.copy=f;m.determinant=l;m.equals=J;m.exactEquals=P;m.frob=F;m.fromMat2d=t;m.fromMat4=k;m.fromQuat=z;m.fromRotation=c;m.fromScaling=n;m.fromTranslation=h;m.identity=A;m.invert=C;m.isOrthoNormal=L;m.mat3=T;m.mul=r;m.multiply=r;m.multiplyScalar=
N;m.multiplyScalarAndAdd=S;m.normalFromMat4=g;m.normalFromMat4Legacy=w;m.projection=q;m.rotate=b;m.scale=p;m.scaleByVec2=e;m.set=x;m.str=y;m.sub=K;m.subtract=K;m.translate=a;m.transpose=B})},"esri/chunks/mat3f32":function(){define(["exports"],function(m){function v(){const B=new Float32Array(9);B[0]=1;B[4]=1;B[8]=1;return B}function k(B){const C=new Float32Array(9);C[0]=B[0];C[1]=B[1];C[2]=B[2];C[3]=B[3];C[4]=B[4];C[5]=B[5];C[6]=B[6];C[7]=B[7];C[8]=B[8];return C}function f(B,C,G,l,r,a,b,p,e){const h=
new Float32Array(9);h[0]=B;h[1]=C;h[2]=G;h[3]=l;h[4]=r;h[5]=a;h[6]=b;h[7]=p;h[8]=e;return h}function x(B,C){return new Float32Array(B,C,9)}const A=Object.freeze(Object.defineProperty({__proto__:null,create:v,clone:k,fromValues:f,createView:x},Symbol.toStringTag,{value:"Module"}));m.clone=k;m.create=v;m.createView=x;m.fromValues=f;m.mat3f32=A})},"esri/chunks/vec2f32":function(){define(["exports"],function(m){function v(){return new Float32Array(2)}function k(e){const h=new Float32Array(2);h[0]=e[0];
h[1]=e[1];return h}function f(e,h){const c=new Float32Array(2);c[0]=e;c[1]=h;return c}function x(e,h){return new Float32Array(e,h,2)}function A(){return v()}function B(){return f(1,1)}function C(){return f(1,0)}function G(){return f(0,1)}const l=v(),r=B(),a=C(),b=G(),p=Object.freeze(Object.defineProperty({__proto__:null,create:v,clone:k,fromValues:f,createView:x,zeros:A,ones:B,unitX:C,unitY:G,ZEROS:l,ONES:r,UNIT_X:a,UNIT_Y:b},Symbol.toStringTag,{value:"Module"}));m.ONES=r;m.UNIT_X=a;m.UNIT_Y=b;m.ZEROS=
l;m.clone=k;m.create=v;m.createView=x;m.fromValues=f;m.ones=B;m.unitX=C;m.unitY=G;m.vec2f32=p;m.zeros=A})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(m){function v(f){return f instanceof Float32Array&&2<=f.length}function k(f){return Array.isArray(f)&&2<=f.length}m.isVec2=function(f){return v(f)||k(f)};m.isVec2f32=v;m.isVec2f64=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(m,v,k,f,x,A,B,C,G,l){function r(h,c){h.length=0;c.forEach(n=>h.push(n));return h}const a=new Set,b=[],p=new Map,e=[0,0];k=function(h){function c(t){t=h.call(this,t)||this;t._keyToItem=new Map;t.concurrency=6;t.strategy="scale-first";t.tileInfoView=null;return t}m._inheritsLoose(c,h);var n=c.prototype;n.initialize=function(){const {concurrency:t,process:z}=this;this._queue=new l.QueueProcessor({concurrency:t,process:(w,g)=>{w=this._keyToItem.get(w);return z(w,{signal:g})},peeker:w=>w.values().next().value})};
n.destroy=function(){this.clear();this._queue=f.destroyMaybe(this._queue)};n.abort=function(t){this._queue.abort("string"===typeof t?t:t.id)};n.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};n.has=function(t){return"string"===typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)};n.isOngoing=function(t){t="string"===typeof t?t:t.id;return this.has(t)&&this._queue.isOngoing(t)};n.pause=function(){this._queue.pause()};n.push=function(t,z){const w=t.key.id+
"-"+z;if(this.has(w))return this.get(w);z=this._queue.push(w);const g=()=>{this._keyToItem.delete(w);this.notifyChange("updating")};this._keyToItem.set(w,t);z.then(g,g);this.notifyChange("updating");return z};n.reset=function(){this._queue.reset();this.notifyChange("updating")};n.resume=function(){this._queue.resume()};n._peekByScaleFirst=function(t){if(!this.state)return t.values().next().value;const z=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY;t.forEach(K=>{K=this._keyToItem.get(K);
const N=this.tileInfoView.getTileScale(K.key);p.has(N)||(p.set(N,[]),w=Math.max(N,w),g=Math.min(N,g));p.get(N).push(K.key);a.add(N)});let q=this.state.scale;p.has(q)||(r(b,a),b.sort((K,N)=>K-N),q=b.reduce((K,N)=>Math.abs(N-q)<Math.abs(K-q)?N:K,b[0]));q=Math.min(q,w);q=Math.max(q,g);t=p.get(q);const y=z.getClosestInfoForScale(q),F=y.getColumnForX(this.state.center[0]),I=y.getRowForY(this.state.center[1]);t.sort((K,N)=>{const S=y.denormalizeCol(K.col,K.world),P=y.denormalizeCol(N.col,N.world);return Math.sqrt((F-
S)*(F-S)+(I-K.row)*(I-K.row))-Math.sqrt((F-P)*(F-P)+(I-N.row)*(I-N.row))});a.clear();p.clear();return t[0].id};n._peekByCenterFirst=function(t){if(!this.state)return t.values().next().value;const z=this.tileInfoView,w=this.state.center;let g=Number.POSITIVE_INFINITY,q;t.forEach(y=>{y=this._keyToItem.get(y);z.getTileCoords(e,y.key);const F=G.distance(e,w);F<g&&(g=F,q=y.key)});return q.id};m._createClass(c,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},
{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return c}(k);v.__decorate([x.property({constructOnly:!0})],k.prototype,"concurrency",void 0);v.__decorate([x.property({constructOnly:!0})],k.prototype,"process",void 0);v.__decorate([x.property()],k.prototype,"state",void 0);v.__decorate([x.property({constructOnly:!0})],k.prototype,"strategy",void 0);v.__decorate([x.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);v.__decorate([x.property({readOnly:!0})],
k.prototype,"updating",null);return k=v.__decorate([C.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(m,v,k,f,x,A){let B=function(G,l){this.item=G;this.controller=l;this.promise=null},C=function(){function G(r){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;
this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;r.concurrency&&(this.concurrency=r.concurrency);this._queue=new x(r.peeker);this.process=r.process;const a=r.scheduler;r.priority&&k.isSome(a)&&(this._task=a.registerTask(r.priority,this))}var l=G.prototype;l.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};l.abort=function(r){(r=this._controllers.get(r))&&r.abort()};l.clear=function(){this._queue.clear();
const r=[];this._controllers.forEach(a=>r.push(a));this._controllers.clear();r.forEach(a=>a.abort());this._processingItems.clear();this._cancelNext()};l.forEach=function(r){this._deferreds.forEach((a,b)=>r(b))};l.get=function(r){return(r=this._deferreds.get(r))?r.promise:void 0};l.isOngoing=function(r){return this._processingItems.has(r)};l.has=function(r){return this._deferreds.has(r)};l.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};l.push=function(r,a){const b=this.get(r);
if(b)return b;const p=new AbortController;let e=null;a&&(e=f.onAbort(a,()=>p.abort()));const h=()=>{c.remove();k.isSome(e)&&e.remove();this._deferreds.delete(r);this._controllers.delete(r);this._queue.remove(r);this._processingItems.delete(r);this._scheduleNext()},c=f.onAbortOrThrow(p.signal,()=>{const t=this._processingItems.get(r);t&&t.controller.abort();h();n.reject(f.createAbortError())}),n=f.createDeferred();this._deferreds.set(r,n);this._controllers.set(r,p);n.promise.then(h,h);this._queue.push(r);
this._scheduleNext();return n.promise};l.last=function(){return this._queue.last()};l.peek=function(){return this._queue.peek()};l.popLast=function(){return this._queue.popLast()};l.reset=function(){const r=[];this._processingItems.forEach(a=>r.push(a));this._processingItems.clear();for(const a of r)this._queue.push(a.item),a.controller.abort();this._scheduleNext()};l.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};l.takeAll=function(){const r=[];for(;this._queue.length;)r.push(this._queue.pop());
this.clear();return r};l.runTask=function(r){for(;!r.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),r.madeProgress()};l._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=A.schedule(()=>{this._schedule=null;this._next()}))};l._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};l._cancelNext=function(){this._schedule&&(this._schedule.remove(),
this._schedule=null)};l._processResult=function(r,a){this._canProcessFulfillment(r)&&(this._scheduleNext(),this._deferreds.get(r.item).resolve(a))};l._processError=function(r,a){this._canProcessFulfillment(r)&&(this._scheduleNext(),this._deferreds.get(r.item).reject(a))};l._canProcessFulfillment=function(r){return this._deferreds.get(r.item)&&this._processingItems.get(r.item)===r?!0:!1};l._process=function(r){if(!k.isNone(r)){var a=new AbortController,b=new B(r,a);this._processingItems.set(r,b);try{var p=
this.process(r,a.signal)}catch(e){this._processError(b,e)}f.isPromiseLike(p)?(b.promise=p,p.then(e=>this._processResult(b,e),e=>this._processError(b,e))):this._processResult(b,p)}};v._createClass(G,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"running",get:function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency}},{key:"test",get:function(){return{update:r=>this.runTask(r)}}}]);return G}();m.QueueProcessor=C;Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(m,v,k,f,x,A){const B=new x("0/0/0/0");let C=function(){function l(a,b,p,e,h,c,n,t){this.x=a;this.ymin=b;this.ymax=p;this.invM=e;this.leftAdjust=h;this.rightAdjust=c;this.leftBound=n;this.rightBound=t}l.create=function(a,b){a[1]>
b[1]&&([a,b]=[b,a]);const [p,e]=a,[h,c]=b;a=h-p;b=c-e;b=0!==b?a/b:0;const n=(Math.ceil(e)-e)*b,t=(Math.floor(e)-e)*b;return new l(p,Math.floor(e),Math.ceil(c),b,0>a?n:t,0>a?t:n,0>a?h:p,0>a?p:h)};var r=l.prototype;r.incrRow=function(){this.x+=this.invM};r.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};r.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return l}();const G=[[0,0],[0,0],[0,0],[0,0]];return function(){function l(a,b=null){this.tileInfo=
a;this.fullExtent=b;this.scales=[];this._infoByScale={};this._infoByLevel={};const p=a.lods.slice();p.sort((h,c)=>c.scale-h.scale);const e=this._lodInfos=p.map(h=>k.create(a,h,b));p.forEach((h,c)=>{this._infoByLevel[h.level]=e[c];this._infoByScale[h.scale]=e[c];this.scales[c]=h.scale},this);this._wrap=a.isWrappable}var r=l.prototype;r.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};r.getTileBounds=function(a,b,p=!1){B.set(b);return(b=this._infoByLevel[B.level])?b.getTileBounds(a,
B,p):a};r.getTileCoords=function(a,b,p=!1){B.set(b);return(b=this._infoByLevel[B.level])?b.getTileCoords(a,B,p):a};r.getTileCoverage=function(a,b=192,p="closest"){p="closest"===p?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);const e=f.pool.acquire(p),h=this._wrap;var c=Infinity;let n=-Infinity;const t=e.spans;G[0][0]=G[0][1]=G[1][1]=G[3][0]=-b;G[1][0]=G[2][0]=a.size[0]+b;G[2][1]=G[3][1]=a.size[1]+b;for(z of G)a.toMap(z,z),z[0]=p.getColumnForX(z[0]),z[1]=p.getRowForY(z[1]);
a=[];var z=3;for(b=0;4>b;b++)G[b][1]===G[z][1]?z=b:(z=C.create(G[b],G[z]),c=Math.min(z.ymin,c),n=Math.max(z.ymax,n),void 0===a[z.ymin]&&(a[z.ymin]=[]),a[z.ymin].push(z),z=b);if(null==c||null==n||100<n-c)return null;for(b=[];c<n;){null!=a[c]&&(b=b.concat(a[c]));z=Infinity;var w=-Infinity;for(var g=b.length-1;0<=g;g--){var q=b[g];z=Math.min(z,q.getLeftCol());w=Math.max(w,q.getRightCol())}z=Math.floor(z);w=Math.floor(w);if(c>=p.first[1]&&c<=p.last[1])if(h)if(p.size[0]<p.worldSize[0])for(g=Math.floor(w/
p.worldSize[0]),q=Math.floor(z/p.worldSize[0]);q<=g;q++)t.push(new A(c,Math.max(p.getFirstColumnForWorld(q),z),Math.min(p.getLastColumnForWorld(q),w)));else t.push(new A(c,z,w));else z>p.last[0]||w<p.first[0]||(z=Math.max(z,p.first[0]),w=Math.min(w,p.last[0]),t.push(new A(c,z,w)));c+=1;for(z=b.length-1;0<=z;z--)w=b[z],w.ymax>=c?w.incrRow():b.splice(z,1)}return e};r.getTileParentId=function(a){B.set(a);a=this._lodInfos.indexOf(this._infoByLevel[B.level])-1;if(0>a)return null;this._getTileIdAtLOD(B,
this._lodInfos[a],B);return B.id};r.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};r.getTileScale=function(a){return(a=this._infoByLevel[a.level])?a.scale:-1};r.intersects=function(a,b){B.set(b);b=this._infoByLevel[B.level];const p=a.lodInfo;if(p.resolution>b.resolution){this._getTileIdAtLOD(B,p,B);var e=p.denormalizeCol(B.col,B.world);for(var h of a.spans)if(h.row===B.row&&h.colFrom<=e&&h.colTo>=e)return!0}if(p.resolution<b.resolution){const [n,
t,z,w]=a.spans.reduce((g,q)=>{g[0]=Math.min(g[0],q.row);g[1]=Math.max(g[1],q.row);g[2]=Math.min(g[2],q.colFrom);g[3]=Math.max(g[3],q.colTo);return g},[Infinity,-Infinity,Infinity,-Infinity]);e=b.denormalizeCol(B.col,B.world);a=p.getColumnForX(b.getXForColumn(e));h=p.getRowForY(b.getYForRow(B.row));e=p.getColumnForX(b.getXForColumn(e+1))-1;b=p.getRowForY(b.getYForRow(B.row+1))-1;return!(a>w||e<z||h>t||b<n)}const c=p.denormalizeCol(B.col,B.world);return a.spans.some(n=>n.row===B.row&&n.colFrom<=c&&
n.colTo>=c)};r.normalizeBounds=function(a,b,p){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=v.getInfo(this.tileInfo.spatialReference),p=-p*(b.valid[1]-b.valid[0]),a[0]+=p,a[2]+=p);return a};r.getSmallestInfoForScale=function(a){const b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(let p=1;p<b.length-1;p++)if(a>b[p]+1E-6)return this._infoByScale[b[p-1]];return this._infoByScale[b[b.length-1]]};r.getClosestInfoForScale=function(a){const b=
this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce((p,e)=>Math.abs(e-a)<Math.abs(p-a)?e:p,b[0]);return this._infoByScale[a]};r.scaleToLevel=function(a){const b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let p=b.length-1;0<=p;p--)if(a<b[p])return p===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[p]].level+(b[p]-a)/(b[p]-b[p+1]);return this._infoByScale[b[0]].level};r.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};
r._getTileIdAtLOD=function(a,b,p){const e=this._infoByLevel[p.level];a.set(p);if(b.resolution<e.resolution)return null;if(b.resolution===e.resolution)return a;a.level=b.level;a.col=Math.floor(p.col*e.resolution/b.resolution+.01);a.row=Math.floor(p.row*e.resolution/b.resolution+.01);return a};m._createClass(l,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return l}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../core/maybe","../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(m,v,k){function f(A,B,C){A[0]=B;A[1]=C;return A}const x=new k("0/0/0/0");return function(){function A(C,G,l,r,a,b,p,e,h,c,n,t){this.level=C;this.resolution=G;this.scale=l;this.origin=r;this.first=a;this.last=b;this.size=p;this.norm=e;this.worldStart=h;this.worldEnd=c;this.worldSize=n;this.wrap=t}A.create=function(C,G,l=null){var r=v.getInfo(C.spatialReference);const a=G.origin||[C.origin.x,C.origin.y],b=[C.size[0]*G.resolution,C.size[1]*G.resolution],p=[-Infinity,-Infinity],
e=[Infinity,Infinity],h=[Infinity,Infinity];m.isSome(l)&&(f(p,Math.max(0,Math.floor((l.xmin-a[0])/b[0])),Math.max(0,Math.floor((a[1]-l.ymax)/b[1]))),f(e,Math.max(0,Math.floor((l.xmax-a[0])/b[0])),Math.max(0,Math.floor((a[1]-l.ymin)/b[1]))),f(h,e[0]-p[0]+1,e[1]-p[1]+1));const {cols:c,rows:n}=G;!l&&c&&n&&(f(p,c[0],n[0]),f(e,c[1],n[1]),f(h,c[1]-c[0]+1,n[1]-n[0]+1));let t;C.isWrappable?(C=[Math.ceil(Math.round((r.valid[1]-r.valid[0])/G.resolution)/C.size[0]),h[1]],r=[Math.floor((r.origin[0]-a[0])/b[0]),
p[1]],l=[C[0]+r[0]-1,e[1]],t=!0):(r=p,l=e,C=h,t=!1);return new A(G.level,G.resolution,G.scale,a,p,e,h,b,r,l,C,t)};var B=A.prototype;B.normalizeCol=function(C){if(!this.wrap)return C;const G=this.worldSize[0];return 0>C?G-1-Math.abs((C+1)%G):C%G};B.denormalizeCol=function(C,G){return this.wrap?this.worldSize[0]*G+C:C};B.getWorldForColumn=function(C){return this.wrap?Math.floor(C/this.worldSize[0]):0};B.getFirstColumnForWorld=function(C){return C*this.worldSize[0]+this.first[0]};B.getLastColumnForWorld=
function(C){return C*this.worldSize[0]+this.first[0]+this.size[0]-1};B.getColumnForX=function(C){return(C-this.origin[0])/this.norm[0]};B.getXForColumn=function(C){return this.origin[0]+C*this.norm[0]};B.getRowForY=function(C){return(this.origin[1]-C)/this.norm[1]};B.getYForRow=function(C){return this.origin[1]-C*this.norm[1]};B.getTileBounds=function(C,G,l=!1){x.set(G);var r=l?x.col:this.denormalizeCol(x.col,x.world),a=x.row;G=this.getXForColumn(r);l=this.getYForRow(a+1);r=this.getXForColumn(r+1);
a=this.getYForRow(a);C[0]=G;C[1]=l;C[2]=r;C[3]=a;return C};B.getTileCoords=function(C,G,l=!1){x.set(G);G=l?x.col:this.denormalizeCol(x.col,x.world);Array.isArray(C)?f(C,this.getXForColumn(G),this.getYForRow(x.row)):(C.x=this.getXForColumn(G),C.y=this.getYForRow(x.row));return C};return A}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(m,v){let k=function(){function f(A,B,C,G){this.set(A,B,C,G)}f.getId=function(A,
B,C,G){return"object"===typeof A?`${A.level}/${A.row}/${A.col}/${A.world}`:`${A}/${B}/${C}/${G}`};var x=f.prototype;x.acquire=function(A,B,C,G){this.set(A,B,C,G)};x.contains=function(A){const B=A.level-this.level;return 0<=B&&this.row===A.row>>B&&this.col===A.col>>B&&this.world===A.world};x.equals=function(A){return this.level===A.level&&this.row===A.row&&this.col===A.col&&this.world===A.world};x.clone=function(){return new f(this)};x.release=function(){this.world=this.col=this.row=this.level=0};
x.set=function(A,B,C,G){if(null==A)this.world=this.col=this.row=this.level=0;else if("object"===typeof A)this.level=A.level||0,this.row=A.row||0,this.col=A.col||0,this.world=A.world||0;else if("string"===typeof A){const [l,r,a,b]=A.split("/");this.level=parseFloat(l);this.row=parseFloat(r);this.col=parseFloat(a);this.world=parseFloat(b)}else this.level=+A,this.row=+B,this.col=+C,this.world=+G||0;return this};x.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};x.getParentKey=
function(){return 0>=this.level?null:new f(this.level-1,this.row>>1,this.col>>1,this.world)};x.getChildKeys=function(){const A=this.level+1,B=this.row<<1,C=this.col<<1,G=this.world;return[new f(A,B,C,G),new f(A,B,C+1,G),new f(A,B+1,C,G),new f(A,B+1,C+1,G)]};x.compareRowMajor=function(A){return this.row<A.row?-1:this.row>A.row?1:this.col<A.col?-1:this.col>A.col?1:0};m._createClass(f,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(A){this.set(A)}},
{key:"hash",get:function(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}}]);return f}();k.pool=new v(k,null,null,25,50);return k})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(m){let v=function(){function k(){this.spans=[]}var f=k.prototype;f.acquire=function(x){this.lodInfo=x};f.release=function(){this.lodInfo=null;this.spans.length=0};f.forEach=function(x,A){const {spans:B,lodInfo:C}=this,{level:G}=C;if(0!==B.length)for(const {row:l,
colFrom:r,colTo:a}of B)for(let b=r;b<=a;b++)x.call(A,G,l,C.normalizeCol(b),C.getWorldForColumn(b))};return k}();v.pool=new m(v);return v})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(m,v,k){this.row=m;this.colFrom=v;this.colTo=k}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(m,v,k,f,x,A,B,C,G,l){function r(h,c){h.length=0;c.forEach(n=>h.push(n));return h}const a=new Set,b=[],p=new Map,e=[0,0];k=function(h){function c(t){t=h.call(this,t)||this;t._keyToItem=new Map;t.concurrency=6;t.strategy="scale-first";t.tileInfoView=null;return t}m._inheritsLoose(c,h);var n=c.prototype;n.initialize=function(){const {concurrency:t,process:z,strategy:w}=this;this._queue=new l.QueueProcessor({concurrency:t,process:(g,q)=>{g=this._keyToItem.get(g);return z(g,{signal:q})},peeker:"scale-first"===
w?g=>this._peekByScaleFirst(g):g=>this._peekByCenterFirst(g)})};n.destroy=function(){this.clear();this._queue=f.destroyMaybe(this._queue)};n.abort=function(t){this._queue.abort("string"===typeof t?t:t.id)};n.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};n.has=function(t){return"string"===typeof t?this._keyToItem.has(t):this._keyToItem.has(t.id)};n.isOngoing=function(t){t="string"===typeof t?t:t.id;return this.has(t)&&this._queue.isOngoing(t)};n.pause=
function(){this._queue.pause()};n.push=function(t){const z=t.key.id;if(this._queue.has(z))return this._queue.get(z);const w=this._queue.push(z),g=()=>{this._keyToItem.delete(z);this.notifyChange("updating")};this._keyToItem.set(z,t);w.then(g,g);this.notifyChange("updating");return w};n.reset=function(){this._queue.reset()};n.resume=function(){this._queue.resume()};n._peekByScaleFirst=function(t){if(!this.state)return t.values().next().value;const z=this.tileInfoView;let w=Number.NEGATIVE_INFINITY,
g=Number.POSITIVE_INFINITY;t.forEach(K=>{K=this._keyToItem.get(K);const N=this.tileInfoView.getTileScale(K.key);p.has(N)||(p.set(N,[]),w=Math.max(N,w),g=Math.min(N,g));p.get(N).push(K.key);a.add(N)});let q=this.state.scale;p.has(q)||(r(b,a),b.sort((K,N)=>K-N),q=b.reduce((K,N)=>Math.abs(N-q)<Math.abs(K-q)?N:K,b[0]));q=Math.min(q,w);q=Math.max(q,g);t=p.get(q);const y=z.getClosestInfoForScale(q),F=y.getColumnForX(this.state.center[0]),I=y.getRowForY(this.state.center[1]);t.sort((K,N)=>{const S=y.denormalizeCol(K.col,
K.world),P=y.denormalizeCol(N.col,N.world);return Math.sqrt((F-S)*(F-S)+(I-K.row)*(I-K.row))-Math.sqrt((F-P)*(F-P)+(I-N.row)*(I-N.row))});a.clear();p.clear();return t[0].id};n._peekByCenterFirst=function(t){if(!this.state)return t.values().next().value;const z=this.tileInfoView,w=this.state.center;let g=Number.POSITIVE_INFINITY,q;t.forEach(y=>{y=this._keyToItem.get(y);z.getTileCoords(e,y.key);const F=G.distance(e,w);F<g&&(g=F,q=y.key)});return q.id};m._createClass(c,[{key:"length",get:function(){return this._queue?
this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return c}(k);v.__decorate([x.property({constructOnly:!0})],k.prototype,"concurrency",void 0);v.__decorate([x.property({constructOnly:!0})],k.prototype,"process",void 0);v.__decorate([x.property()],k.prototype,"state",void 0);v.__decorate([x.property({constructOnly:!0})],k.prototype,"strategy",void 0);v.__decorate([x.property({constructOnly:!0})],
k.prototype,"tileInfoView",void 0);v.__decorate([x.property({readOnly:!0})],k.prototype,"updating",null);return k=v.__decorate([C.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],function(m,v,k,f){const x=new f(0,0,0,0),A=new Map,B=[],C=[];return function(){function G(r){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy=
"closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=r.acquireTile;this.releaseTile=r.releaseTile;this.tileInfoView=r.tileInfoView;this.resampling=null==r.resampling||!!r.resampling;r.cachePolicy&&(this.cachePolicy=r.cachePolicy);r.coveragePolicy&&(this.coveragePolicy=r.coveragePolicy);null!=r.buffer&&(this.buffer=r.buffer);r.cacheSize&&(this._tileCache=new v(r.cacheSize,this.tileInfoView,a=>{this.releaseTile(a)}))}var l=G.prototype;l.destroy=function(){this.tileIndex.clear()};
l.update=function(r){const {resampling:a,tileIndex:b}=this,p=this.tileInfoView.getTileCoverage(r.state,this.buffer,this.coveragePolicy);C.length=0;B.length=0;A.clear();if(p){var {minScale:e,maxScale:h}=this.tileInfoView.tileInfo,{spans:c,lodInfo:n}=p,{level:t}=n,{scale:z,center:w,resolution:g}=r.state,q=!r.stationary&&z>this._previousScale;this._previousScale=z;this.tiles.length=0;if(!a&&(z>e||z<h))return this.tiles.length=0,A.clear(),b.forEach(N=>{this.releaseTile(N)}),b.clear(),C.length=0,B.length=
0,A.clear(),k.pool.release(p),!0;b.forEach(N=>N.visible=!0);var y=r=0;if(0<c.length)for(const {row:N,colFrom:S,colTo:P}of c)for(let J=S;J<=P;J++){r++;const L=x.set(t,N,n.normalizeCol(J),n.getWorldForColumn(J)).id;if(b.has(L)){var F=b.get(L);F.isReady?(A.set(L,F),y++):q||this._addParentTile(L,A)}else{if(this._tileCache&&this._tileCache.has(L)){if(F=this._tileCache.pop(L),this.tileIndex.set(L,F),F.isReady){A.set(L,F);y++;continue}}else F=this.acquireTile(x),this.tileIndex.set(L,F);q||this._addParentTile(L,
A)}}var I=y===r;b.forEach((N,S)=>{x.set(S);if(!A.has(S)){var P=this.tileInfoView.intersects(p,x),J="purge"===this.cachePolicy?x.level!==t:x.level>t;!P||!q&&I?!J&&P||B.push(S):N.isReady?J&&"purge"===this.cachePolicy&&this._hasReadyAncestor(x,t)?B.push(S):C.push(S):J&&B.push(S)}});for(var K of C)(r=b.get(K))&&r.isReady&&A.set(K,r);for(const N of B)K=b.get(N),this._tileCache?this._tileCache.add(K):this.releaseTile(K),b.delete(N);A.forEach(N=>this.tiles.push(N));b.forEach(N=>{A.has(N.key.id)||(N.visible=
!1)});this._tileCache&&this._tileCache.prune(t,w,g);k.pool.release(p);A.clear();return I}};l.clear=function(r=!0){const {tileIndex:a}=this;r&&a.forEach(b=>{this.releaseTile(b)});a.clear()};l.updateCacheSize=function(r){this._tileCache&&(this._tileCache.maxSize=r)};l._addParentTile=function(r,a){let b=null;for(;;){r=this.tileInfoView.getTileParentId(r);if(!r)break;if(this.tileIndex.has(r)){if((b=this.tileIndex.get(r))&&b.isReady){a.has(b.key.id)||a.set(b.key.id,b);break}}else if(this._tileCache&&this._tileCache.has(r)&&
(b=this._tileCache.pop(r),this.tileIndex.set(r,b),b&&b.isReady)){a.has(b.key.id)||a.set(b.key.id,b);break}}};l._hasReadyAncestor=function(r,a){const b=m.create();this.tileInfoView.getTileBounds(b,r,!0);for(const p of this.tileIndex.values())if(p.isReady&&p.key.level>=a&&p.key.level<r.level){const e=m.create();this.tileInfoView.getTileBounds(e,p.key,!0);if(m.contains(e,b))return!0}return!1};return G}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(m){return function(){function v(f,
x,A){this.maxSize=f;this._tileInfoView=x;this._removedFunc=A;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var k=v.prototype;k.has=function(f){return this._tilePerId.has(f)};k.get=function(f){return this._tilePerId.get(f)};k.pop=function(f){const x=this._tilePerId.get(f);if(x){var A=this._tileKeysPerLevel[x.key.level];this._tilePerId["delete"](f);for(let B=0;B<A.length;B++)if(A[B].id===f){A.splice(B,1);break}x.visible=!0;return x}};k.add=function(f){f.visible=!1;const x=f.key,A=x.id;this._tilePerId.has(A)||
(this._tilePerId.set(A,f),f=x.level,this._tileKeysPerLevel[f]||(this._tileKeysPerLevel[f]=[]),this._tileKeysPerLevel[f].push(x))};k.prune=function(f,x,A){let B=this._tilePerId.size;if(!(B<=this.maxSize)){for(var C=this._tileKeysPerLevel.length-1;B>this.maxSize&&0<=C;)C!==f&&(B=this._pruneAroundCenterTile(B,x,A,C)),C--;B>this.maxSize&&(B=this._pruneAroundCenterTile(B,x,A,f))}};k._pruneAroundCenterTile=function(f,x,A,B){B=this._tileKeysPerLevel[B];if(!B||0===B.length)return f;const {size:C,origin:G}=
this._tileInfoView.tileInfo,l=A*C[0],r=A*C[1],a=[0,0],b=[0,0];for(B.sort((p,e)=>{a[0]=G.x+l*(p.col+.5);a[1]=G.y-r*(p.row+.5);b[0]=G.x+l*(e.col+.5);b[1]=G.y-r*(e.row+.5);return m.squaredDistance(a,x)-m.squaredDistance(b,x)});0<B.length&&(A=B.pop(),this._removeTile(A.id),f--,f!==this.maxSize););return f};k._removeTile=function(f){const x=this._tilePerId.get(f);this._removedFunc&&x&&this._removedFunc(x);this._tilePerId["delete"](f)};return v}()})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Handles ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I,K,N){var S={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},P={zoomIn:["\x3d","+"],zoomOut:["-","_"]},J={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(L){function T(){var u=L.apply(this,arguments)||this;u._handles=new f;return u}m._inheritsLoose(T,L);var H=T.prototype;H.initialize=function(){const u=()=>this.view?.ready;this._handles.add([A.when(()=>
!u(),()=>this._disconnect()),A.when(u,()=>this._connect())])};H.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};H._disconnect=function(){this.view.viewEvents.disconnect();this._inputManager=x.destroyMaybe(this._inputManager)};H._connect=function(){const u=new w.BrowserEventSource(this.view.surface,this.view.input);var d=[new I.ImmediateDoubleClick,new K.PointerClickHoldAndDrag,new N.SingleAndDoubleClick,new F.Drag(this.view.navigation),new y.DoubleTapDrag];
d=new g.InputManager({eventSource:u,recognizers:d});d.installHandlers("prevent-context-menu",[new q.PreventContextMenu],g.ViewEventPriorities.INTERNAL);d.installHandlers("navigation",[new z.PinchRotateAndZoom(this.view),new e.GamepadNavigation(this.view),new t.MouseWheelZoom(this.view),new r.DoubleClickZoom(this.view),new r.DoubleClickZoom(this.view,["Ctrl"]),new b.DragPan(this.view,"primary"),new h.KeyPan(this.view,S),new n.KeyZoom(this.view,P),new c.KeyRotate(this.view,J),new p.DragRotate(this.view,
"secondary"),new a.DoubleTapDragZoom(this.view,"touch")],g.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(d);this._source=u;this._inputManager=d;A.watch(()=>this.view?.navigation?.browserTouchPanEnabled,E=>{this._source&&(this._source.browserTouchPanningEnabled=!E)},A.initial)};m._createClass(T,[{key:"latestPointerType",get:function(){return this._inputManager?.latestPointerType}},{key:"latestPointerLocation",get:function(){return this._inputManager?.latestPointerLocation}},{key:"multiTouchActive",
get:function(){return this._inputManager?.multiTouchActive??!1}},{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return T}(k);v.__decorate([B.property()],k.prototype,"view",void 0);v.__decorate([B.property()],k.prototype,"latestPointerType",null);v.__decorate([B.property()],k.prototype,"latestPointerLocation",null);v.__decorate([B.property()],k.prototype,"multiTouchActive",null);return k=v.__decorate([l.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(m,v,k,f){k=function(x){function A(B,C){var G=x.call(this,!0)||this;G._view=B;G.registerIncoming("double-click",C,l=>G._handleDoubleClick(l,C));return G}v._inheritsLoose(A,x);A.prototype._handleDoubleClick=function(B,C){f.eventMatchesPointerAction(B.data,"primary")&&(B.stopPropagation(),C?this._view.mapViewNavigation.zoomOut([B.data.x,B.data.y]):this._view.mapViewNavigation.zoomIn([B.data.x,
B.data.y]))};return A}(k.InputHandler);m.DoubleClickZoom=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/support":function(){define(["exports"],function(m){m.eventMatchesMousePointerAction=function(v,k){if("touch"===v.pointerType)return!1;switch(k){case "primary":return 0===v.button;case "secondary":return 2===v.button;case "tertiary":return 1===v.button}};m.eventMatchesPointerAction=function(v,k){switch(k){case "primary":return"touch"===
v.pointerType||0===v.button;case "secondary":return"touch"!==v.pointerType&&2===v.button;case "tertiary":return"touch"!==v.pointerType&&1===v.button}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(m,v,k,f){k=function(x){function A(B,C,G){var l=x.call(this,!0)||this;l.view=
B;l.pointerType=C;l.registerIncoming("double-tap-drag",G,r=>l._handleDoubleTapDrag(r));return l}v._inheritsLoose(A,x);A.prototype._handleDoubleTapDrag=function(B){var {data:C}=B,{pointerType:G}=C;if(G===this.pointerType){B.stopPropagation();var {action:l,delta:r}=C;({view:C}=this);({mapViewNavigation:B}=C);switch(l){case "begin":({scale:C}=C);this._currentScale=this._startScale=C;this._previousDelta=r;B.begin();break;case "update":if(this._previousDelta.y===r.y)break;this._previousDelta=r;C=this._startScale*
1.015**r.y;B.setViewpointImmediate(C/this._currentScale);this._currentScale=C;break;case "end":({constraints:G}=C);const {effectiveLODs:a,snapToZoom:b}=G;b&&a?(C=G.snapScale(this._currentScale),C=(0<r.y?Math.max(C,G.snapToPreviousScale(this._startScale)):Math.min(C,G.snapToNextScale(this._startScale)))/this._currentScale,B.zoom(C)):B.end()}}};return A}(f.InputHandler);m.DoubleTapDragZoom=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(m,v,k,f,x){f=function(A){function B(G,l,r){var a=A.call(this,!0)||this;a.view=G;a.pointerAction=l;a.registerIncoming("drag",r,b=>a._handleDrag(b));a.registerIncoming("pointer-down",()=>a.stopMomentumNavigation());return a}v._inheritsLoose(B,A);var C=B.prototype;C.onInstall=function(G){A.prototype.onInstall.call(this,G);this._dragEventSeparator=
new k.DragEventSeparator({start:(l,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data);r.stopPropagation()},update:(l,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data);r.stopPropagation()},end:(l,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data);r.stopPropagation()},condition:(l,r)=>1===l&&x.eventMatchesPointerAction(r.data,this.pointerAction)})};C._handleDrag=function(G){const l=this.view.mapViewNavigation;l.pinch.zoomMomentum||l.pinch.rotateMomentum?this.stopMomentumNavigation():
this._dragEventSeparator.handle(G)};C.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return B}(f.InputHandler);m.DragPan=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(m){let v=function(){function k(x){this._callbacks=x;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}var f=k.prototype;f.handle=function(x){const A=
x.data,B=A.pointers.size;switch(A.action){case "start":this._currentCount=B;this._emitStart(x);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=B;this._emitStart(x);break;case "update":this._emitUpdate(x);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=B;this._emitStart(x);break;case "end":this._emitEnd(x),this._currentCount=0}this._previousEvent=x};f._emitStart=function(x){this._startEvent=x;this._callbacks.condition?.(this._currentCount,
x)&&this._callbacks.start(this._currentCount,x,this._startEvent)};f._emitUpdate=function(x){this._callbacks.condition?.(this._currentCount,x)&&this._callbacks.update(this._currentCount,x,this._startEvent)};f._emitEnd=function(x){this._callbacks.condition?.(this._currentCount,x)&&this._callbacks.end(this._currentCount,x,this._startEvent);this._startEvent=null};return k}();m.DragEventSeparator=v;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(m,v,k,f,x){f=function(A){function B(C,G,l){var r=A.call(this,!0)||this;r._view=C;r.pointerAction=G;const a=r._view.mapViewNavigation;r._dragEventSeparator=new k.DragEventSeparator({start:(b,p)=>{a.rotate.begin(r._view,p.data);p.stopPropagation()},update:(b,p)=>{a.rotate.update(r._view,p.data);p.stopPropagation()},end:(b,p)=>{a.rotate.end();p.stopPropagation()},
condition:(b,p)=>1===b&&x.eventMatchesPointerAction(p.data,r.pointerAction)});r.registerIncoming("drag",l,b=>r._dragEventSeparator.handle(b));return r}v._inheritsLoose(B,A);return B}(f.InputHandler);m.DragRotate=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(m,v,k,f,x,A,B,C){B=function(G){function l(a){var b=G.call(this,!0)||this;b._view=a;b._frameTask=null;b._watchHandles=new k;b._currentDevice=null;b._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};b._handle=b.registerIncoming("gamepad",p=>b._handleGamePadEvent(p));b._handle.pause();return b}v._inheritsLoose(l,G);var r=l.prototype;r.onInstall=function(a){G.prototype.onInstall.call(this,a);this._watchHandles.add([f.watch(()=>this._view.navigation.gamepad?.enabled,b=>{b?(this._handle.resume(),
this._frameTask||(this._frameTask=x.addFrameTask({update:p=>this._frameUpdate(p.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},f.initial)])};r.onUninstall=function(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);G.prototype.onUninstall.call(this)};r._handleGamePadEvent=function(a){const b=this._view.navigation.gamepad.device;b&&a.data.device!==b||this._currentDevice&&this._currentDevice!==a.data.device||
("end"===a.data.action?(this._currentDevice=null,C.resetTransformation(this._transformation)):(this._currentDevice=a.data.device,C.extractTransformation(a.data,this._view.navigation.gamepad,this._transformation)))};r._frameUpdate=function(a){const b=this._transformation;if(!C.isZeroTransformation(b)){var p=this._view.viewpoint.clone(),e=.7*this._view.navigation.gamepad.velocityFactor*a;A.translateBy(p,p,[b.translation[0]*e,-b.translation[1]*e]);e=this._view.size;A.scaleAndRotateBy(p,p,1+6E-4*b.translation[2]*
a,this._view.constraints.rotationEnabled?.06*-b.heading*a:0,[e[0]/2,e[1]],e);a=this._view.constraints.constrain(p,this._view.viewpoint);this._view.viewpoint=a}};return l}(B.InputHandler);m.GamepadNavigation=B;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(m,v){function k(f){let x=f*f;0>f&&(x*=-1);return x}m.extractTransformation=function(f,x,A){const B=
f.state;f=f.device;x="forward-down"===x.tiltDirection?1:-1;"standard"===f.deviceType?(A.translation[0]=k(B.axes[0]),A.translation[1]=k(B.axes[1]),A.translation[2]=k(B.buttons[7])-k(B.buttons[6]),A.heading=k(B.axes[2]),A.tilt=k(B.axes[3])):"spacemouse"===f.deviceType&&(A.translation[0]=1.2*k(B.axes[0]),A.translation[1]=1.2*k(B.axes[1]),A.translation[2]=2*-k(B.axes[2]),A.heading=1.2*k(B.axes[5]),A.tilt=1.2*k(B.axes[3]));A.tilt*=x;v.scale(A.translation,A.translation,1);return A};m.extractTransformationKeyboard=
function(f,x){x.translation[0]=f[1]-f[0];x.translation[1]=f[3]-f[2];x.translation[2]=f[4]-f[5];x.heading=f[7]-f[6];x.tilt=f[8]-f[9];x.zoom=f[10]-f[11];return x};m.isZeroTransformation=function(f){return 0===f.translation[0]&&0===f.translation[1]&&0===f.translation[2]&&0===f.heading&&0===f.tilt&&0===f.zoom};m.resetTransformation=function(f){f.translation[0]=0;f.translation[1]=0;f.translation[2]=0;f.heading=0;f.tilt=0;return f};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(m,v,k){k=function(f){function x(B,C,G){var l=f.call(this,!0)||this;l.view=B;l.keys=C;l._pressed=!1;l._keyMap={[C.left]:"left",[C.right]:"right",[C.up]:"up",[C.down]:"down"};l.registerIncoming("key-down",G,r=>l._handleKeyDown(r));l.registerIncoming("key-up",G,r=>l._handleKeyUp(r));l.registerIncoming("blur",G,()=>l._handleBlur());return l}v._inheritsLoose(x,
f);var A=x.prototype;A._handleKeyDown=function(B){B.data.repeat||this._handleKey(B,!0)};A._handleKeyUp=function(B){this._handleKey(B,!1)};A._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};A._handleKey=function(B,C){const G=this._keyMap[B.data.key];if(this._pressed=null!=G){if(C)switch(this.view.mapViewNavigation.begin(),G){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;
case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();B.stopPropagation()}};return x}(k.InputHandler);m.KeyPan=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(m,v,k){k=function(f){function x(B,
C,G){var l=f.call(this,!0)||this;l.view=B;l.keys=C;l._pressed=!1;l._keyToDirection={[C.clockwiseOption1]:"clockwise",[C.clockwiseOption2]:"clockwise",[C.counterClockwiseOption1]:"counterClockwise",[C.counterClockwiseOption2]:"counterClockwise",[C.resetOption1]:"reset",[C.resetOption2]:"reset"};l.registerIncoming("key-down",G,r=>l._handleKeyDown(r));l.registerIncoming("key-up",G,r=>l._handleKeyUp(r));l.registerIncoming("blur",G,()=>l._handleBlur());return l}v._inheritsLoose(x,f);var A=x.prototype;
A._handleKeyDown=function(B){B.data.repeat||this._handleKey(B,!0)};A._handleKeyUp=function(B){this._handleKey(B,!1)};A._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};A._handleKey=function(B,C){var G=B.modifiers;if(!(0<G.size&&!G.has("Shift")||!this.view.constraints.rotationEnabled)&&(G=this._keyToDirection[B.data.key],this._pressed=null!=G)){if(C)switch(this.view.mapViewNavigation.begin(),G){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();B.stopPropagation()}};return x}(k.InputHandler);m.KeyRotate=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has",
"../../../input/InputHandler"],function(m,v,k,f){var x;(function(A){A[A.IN=0]="IN";A[A.OUT=1]="OUT"})(x||(x={}));k=function(A){function B(G,l,r){var a=A.call(this,!0)||this;a.view=G;a.keys=l;a._keysToZoomAction={};a.registerIncoming("key-down",r,b=>a._handleKeyDown(b));l.zoomIn.forEach(b=>a._keysToZoomAction[b]=x.IN);l.zoomOut.forEach(b=>a._keysToZoomAction[b]=x.OUT);return a}v._inheritsLoose(B,A);var C=B.prototype;C._handleKeyDown=function(G){this._handleKey(G)};C._handleKey=function(G){var l=G.modifiers;
if(!(0<l.size)||l.has("Shift"))if({key:l}=G.data,l in this._keysToZoomAction){l=this._keysToZoomAction[l];var {mapViewNavigation:r}=this.view,a=null;switch(l){case x.IN:a=r.zoomIn();break;case x.OUT:a=r.zoomOut();break;default:return}r.begin();a.then(()=>r.end());G.stopPropagation()}};return B}(f.InputHandler);m.KeyZoom=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers",
"../../../input/InputHandler"],function(m,v,k){k=function(f){function x(A,B){var C=f.call(this,!0)||this;C._view=A;C._canZoom=!0;C.registerIncoming("mouse-wheel",B,G=>C._handleMouseWheel(G));return C}v._inheritsLoose(x,f);x.prototype._handleMouseWheel=function(A){if(this._view.navigation.mouseWheelZoomEnabled&&(A.preventDefault(),A.stopPropagation(),this._canZoom)){var B=this._view.mapViewNavigation,{x:C,y:G,deltaY:l}=A.data;if(A=B.zoom(1/.6**(1/60*l),[C,G]))this._canZoom=!1,A.catch(()=>{}).then(()=>
{this._canZoom=!0;B.end()})}};return x}(k.InputHandler);m.MouseWheelZoom=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/DragEventSeparator","../../../input/InputHandler"],function(m,v,k,f){f=function(x){function A(C){var G=x.call(this,!0)||this;G.view=C;G.registerIncoming("drag",r=>G._handleDrag(r));G.registerIncoming("pointer-down",
()=>G._stopMomentumNavigation());const l=G.view.mapViewNavigation;G._dragEventSeparator=new k.DragEventSeparator({start:(r,a)=>{l.pinch.begin(G.view,a.data);a.stopPropagation()},update:(r,a)=>{l.pinch.update(G.view,a.data);a.stopPropagation()},end:(r,a)=>{l.pinch.end(G.view);a.stopPropagation()},condition:r=>2<=r});return G}v._inheritsLoose(A,x);var B=A.prototype;B._handleDrag=function(C){this._dragEventSeparator.handle(C)};B._stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};
return A}(f.InputHandler);m.PinchRotateAndZoom=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./keys ./gamepad/GamepadSource ../support/screenUtils".split(" "),function(m,v,k,f,x,A,B){const C=k("trident"),G=k("edge"),l=k("chrome"),r=k("ff"),a=k("safari");k=function(){function p(h,c){this._input=c;this._active={};this._activePointerCaptures=
new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=h;h.getAttribute("tabindex")||h.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,
"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new A.GamepadSource(h,this._input);this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}var e=p.prototype;e.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(h=>{this._releasePointerCaptureSafe(h)});this._gamepadSource=f.destroyMaybe(this._gamepadSource);this._activePointerCaptures=
null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};e.setPointerCapture=function(h,c){c?(this._element.setPointerCapture(h.pointerId),this._activePointerCaptures.add(h.pointerId)):(this._releasePointerCaptureSafe(h.pointerId),this._activePointerCaptures.delete(h.pointerId))};e._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?
"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};e._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};
e._releasePointerCaptureSafe=function(h){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(h)||this._element.releasePointerCapture(h)}catch(c){}};e._updateNormalizedPointerLikeEvent=function(h,c){h=B.createScreenPointFromNativeEvent(this._element,h);p.test.disableSubpixelCoordinates&&(h.x=Math.round(h.x),h.y=Math.round(h.y));c.x=h.x;c.y=h.y;return c};e._handleKey=function(h,c){const n=x.eventKey(c);n&&"key-up"===h&&this._keyDownState.delete(n);c={native:c,key:n,repeat:n&&this._keyDownState.has(n)};
n&&"key-down"===h&&this._keyDownState.add(c.key);this._callback(h,c)};e._handlePointer=function(h,c){c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,pointerType:c.pointerType,button:c.button,buttons:c.buttons,eventId:this._eventId++});this._callback(h,c)};e._handlePointerPreventDefault=function(h,c){const n=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,pointerType:c.pointerType,button:c.button,buttons:c.buttons,eventId:this._eventId++});c.preventDefault();this._callback(h,
n)};e._handleMouseWheel=function(h,c){let n=c.deltaY;switch(c.deltaMode){case 0:if(C||G)n=n/document.documentElement.clientHeight*600;break;case 1:n*=30;break;case 2:n*=900}C||G?n*=.7:l||a?n*=.6:r&&(n*=1.375);const t=Math.abs(n);100<t&&(n=n/t*200/(1+Math.exp(-.02*(t-100))));c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,deltaY:n});this._callback(h,c)};e._handlePointerCaptureLost=function(h,c){this._activePointerCaptures.delete(c.pointerId);this._handleDefault(h,c)};e._handleDefault=
function(h,c){const n={native:c};c.preventDefault();this._callback(h,n)};e._preventAltKeyDefault=function(h){"Alt"===h.key&&h.preventDefault()};e._preventMultiTouchPanning=function(h){1<h.touches.length&&h.preventDefault()};v._createClass(p,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(h){this._browserTouchPanningEnabled=h;this._updateTouchAction();this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(h){this._callback=h}},
{key:"activeEvents",set:function(h){for(const c in this._active)h&&h.has(c)||(this._element.removeEventListener(b[c],this._active[c]),delete this._active[c]);h&&h.forEach(c=>{if(!this._active[c]&&b[c]){const n=(this._eventHandlers[c]||this._handleDefault).bind(this,c);this._element.addEventListener(b[c],n);this._active[c]=n}});this._gamepadSource.hasEventListeners=h&&h.has("gamepad")}}]);return p}();k.test={disableSubpixelCoordinates:!1};const b={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown",
"pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};m.BrowserEventSource=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers",
"../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(m,v,k,f,x){let A=function(){function B(G,l){this._element=G;this._input=l;this._hasEventListeners=!1;this._onConnectGamepad=r=>{this._connectGamepad(r.gamepad)};this._onDisconnectGamepad=r=>{r=r.gamepad;const a=r.index,b=this._inputDevices[a];b&&(this._emitGamepadEvent(r,x.extractState(b),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(b),this.ensurePollingState())};this._frameTask=
null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;G=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&G)this._forEachGamepad(r=>this._connectGamepad(r)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}var C=B.prototype;C.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),
window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))};C._connectGamepad=function(G){const l=new f(G);"unknown"!==l.deviceType&&(this._inputDevices[G.index]=l,this._input.gamepad.devices.add(l));this.ensurePollingState()};C.ensurePollingState=function(){this._eventsEnabled?this._startPolling():this._stopPolling()};C._startPolling=function(){null==this._frameTask&&(this._frameTask=k.addFrameTask({update:()=>this._readGamepadState()}))};C._stopPolling=function(){null!=this._frameTask&&
(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])};C._readGamepadState=function(){const G=document.hasFocus(),l=this._element.contains(document.activeElement),r="document"===this._input.gamepad.enabledFocusMode&&!G||"view"===this._input.gamepad.enabledFocusMode&&!l;this._forEachGamepad(a=>{var b=this._inputDevices[a.index];if(b){var p=this._latestUpdate[a.index];b=x.extractState(b);var e=r||x.stateIdle(b);p&&(p.timestamp===a.timestamp||!p.active&&e||x.stateEqual(p.state,b))||this._emitGamepadEvent(a,
b,!e)}})};C._forEachGamepad=function(G){const l=window.navigator.getGamepads();for(let r=0;r<l.length;r++){const a=l[r];this._validate(a)&&G(a)}};C._emitGamepadEvent=function(G,l,r){var a=this._latestUpdate[G.index];if((a=a&&a.active)||r)this._latestUpdate[G.index]={timestamp:G.timestamp,state:l,active:r},this._callback&&this._callback({device:this._inputDevices[G.index],state:l,action:!a&&r?"start":a&&r?"update":"end"})};C._validate=function(G){if(!G||!G.connected)return!1;for(let l=0;l<G.axes.length;l++)if(isNaN(G.axes[l]))return!1;
return!0};v._createClass(B,[{key:"hasEventListeners",set:function(G){this._hasEventListeners!==G&&(this._hasEventListeners=G,this.ensurePollingState())}},{key:"_eventsEnabled",get:function(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(G){this._callback=G}}]);return B}();m.GamepadSource=A;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(m){m.extractState=function(v){const k=v.native;return k?{buttons:k.buttons.map(f=>f.pressed?f.value?f.value:1:0),axes:k.axes.map(f=>{{var x=v.axisThreshold;const A=Math.abs(f);f=A<x?0:Math.sign(f)*(A-x)/(1-x)}return f})}:{buttons:[],axes:[]}};m.stateEqual=function(v,k){if(v.axes.length!==k.axes.length||v.buttons.length!==k.buttons.length)return!1;for(var f=0;f<v.axes.length;f++)if(v.axes[f]!==k.axes[f])return!1;for(f=0;f<v.buttons.length;f++)if(v.buttons[f]!==k.buttons[f])return!1;return!0};
m.stateIdle=function(v){for(var k=0;k<v.axes.length;k++)if(0!==v.axes[k])return!1;for(k=0;k<v.buttons.length;k++)if(0!==v.buttons[k])return!1;return!0};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(m,v,k){k=function(f){function x(){var A=f.call(this,!0)||this;A.registerIncoming("context-menu",B=>{B.data.native.preventDefault()});
return A}v._inheritsLoose(x,f);return x}(k.InputHandler);m.PreventContextMenu=k;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(m,v,k,f,x,A,B,C,G,l){C=function(r){function a(p=
G.DefaultParameters.maximumDoubleClickDelay,e=G.DefaultParameters.maximumDoubleClickDistance,h=G.DefaultParameters.maximumDoubleTouchDelay,c=G.DefaultParameters.maximumDoubleTouchDistance,n=k.clock){var t=r.call(this,!1)||this;t._maximumDoubleClickDelay=p;t._maximumDoubleClickDistance=e;t._maximumDoubleTouchDelay=h;t._maximumDoubleTouchDistance=c;t._clock=n;t._doubleTapDragReady=!1;t._doubleTapDragActive=!1;t._dragStartCenter=A.createScreenPoint(0,0);t._pointerState=new Map;t._doubleTapDrag=t.registerOutgoing("double-tap-drag");
t._dragEventSeparator=new B.DragEventSeparator({start:(z,w)=>t._dragStart(z,w),update:(z,w)=>t._dragUpdate(w),end:(z,w)=>t._dragEnd(w)});t.registerIncoming("drag",z=>t._dragEventSeparator.handle(z));t.registerIncoming("pointer-down",z=>t._handlePointerDown(z));t.registerIncoming("pointer-up",()=>t._handlePointerUp());return t}v._inheritsLoose(a,r);var b=a.prototype;b.onUninstall=function(){this._pointerState.forEach(p=>{p.doubleTapTimeout=x.removeMaybe(p.doubleTapTimeout)})};b._clearPointerDown=function(p){const e=
this._pointerState.get(p);e&&(e.doubleTapTimeout=x.removeMaybe(e.doubleTapTimeout),this._pointerState.delete(p),this.refreshHasPendingInputs())};b._createDoubleTapDragData=function(p,e,h){const {button:c,buttons:n,pointer:t,pointers:z,pointerType:w,timestamp:g}=h;return{action:p,delta:e,button:c,buttons:n,pointer:t,pointers:z,pointerType:w,timestamp:g}};b._dragStart=function(p,e){if(this._doubleTapDragReady&&1===p){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:h,modifiers:c}=
e;({center:p}=h);this._dragStartCenter=p;p=this._createDoubleTapDragData("begin",A.createScreenPoint(0,0),h);this._doubleTapDrag.emit(p,void 0,c);e.stopPropagation()}};b._dragUpdate=function(p){if(this._doubleTapDragActive){var {data:e,modifiers:h}=p,{center:c}=e;c=A.createScreenPoint(c.x-this._dragStartCenter.x,c.y-this._dragStartCenter.y);c=this._createDoubleTapDragData("update",c,e);this._doubleTapDrag.emit(c,void 0,h);p.stopPropagation()}};b._dragEnd=function(p){if(this._doubleTapDragActive){var {data:e,
modifiers:h}=p,{center:c}=e;c=A.createScreenPoint(c.x-this._dragStartCenter.x,c.y-this._dragStartCenter.y);c=this._createDoubleTapDragData("end",c,e);this._doubleTapDrag.emit(c,void 0,h);this._doubleTapDragActive=!1;p.stopPropagation()}};b._handlePointerDown=function(p){const {data:e}=p,h=l.getPointerId(e),c=this._pointerState.get(h);var {pointerType:n}=e.native;c?(n="touch"===n?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance,this._clearPointerDown(h),l.manhattanDistance(c.event.data,
e)>n?this._storePointerDown(p):this._doubleTapDragReady=!0):this._storePointerDown(p)};b._handlePointerUp=function(){this._doubleTapDragReady=!1};b._storePointerDown=function(p){var {data:e}=p;const {pointerType:h}=e.native,c=l.getPointerId(e);e=this._clock.setTimeout(()=>this._clearPointerDown(c),"touch"===h?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(c,{event:p,doubleTapTimeout:e});this.refreshHasPendingInputs()};v._createClass(a,[{key:"hasPendingInputs",
get:function(){return f.someMap(this._pointerState,p=>null!=p.doubleTapTimeout)}}]);return a}(C.InputHandler);m.DoubleTapDrag=C;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),function(m,v,k,f,x,A,B){const C={maximumDoubleClickDelay:250,
maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};A=function(G){function l(a=C.maximumDoubleClickDelay,b=C.maximumDoubleClickDistance,p=C.maximumDoubleTouchDelay,e=C.maximumDoubleTouchDistance,h=k.clock){var c=G.call(this,!1)||this;c._maximumDoubleClickDelay=a;c._maximumDoubleClickDistance=b;c._maximumDoubleTouchDelay=p;c._maximumDoubleTouchDistance=e;c._clock=h;c._pointerState=new Map;c._click=c.registerOutgoing("click");c._doubleClick=c.registerOutgoing("double-click");
c.registerIncoming("immediate-click",c._handleImmediateClick.bind(v._assertThisInitialized(c)));c.registerIncoming("pointer-down",c._handlePointerDown.bind(v._assertThisInitialized(c)));return c}v._inheritsLoose(l,G);var r=l.prototype;r.onUninstall=function(){this._pointerState.forEach(a=>a.doubleClickTimer=x.removeMaybe(a.doubleClickTimer))};r._clearDoubleClickTimer=function(a,b){const p=this._pointerState.get(a);p&&(p.doubleClickTimer=x.removeMaybe(p.doubleClickTimer),b&&this._click.emit(p.event.data,
void 0,p.event.modifiers),this._pointerState.delete(a),this.refreshHasPendingInputs())};r._doubleClickTimeoutExceeded=function(a){const b=this._pointerState.get(a);1===b.pointerDownCount&&this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimer=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};r._getPointerId=function(a){const {pointerId:b,pointerType:p,button:e}=a.native;return"mouse"===p?`${b}:${e}`:`${p}`};r._handleImmediateClick=function(a){const b=a.data;var {pointerType:p}=
b.native;const e=this._getPointerId(b);if(this._pointerState.has(e)){var h=this._pointerState.get(e),{data:c,modifiers:n}=h.event;p="touch"===p?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;B.manhattanDistance(c,b)>p?(this._clearDoubleClickTimer(e,!0),this._startClick(a)):(this._clearDoubleClickTimer(e,!1),2===h.pointerDownCount&&this._doubleClick.emit(c,void 0,n))}else this._startClick(a)};r._handlePointerDown=function(a){a=B.getPointerId(a.data);if(a=this._pointerState.get(a))a.pointerDownCount+=
1};r._startClick=function(a){var {data:b}=a;const {native:{pointerType:p}}=b,e=B.getPointerId(b);b=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(e),"touch"===p?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(e,{event:a,doubleClickTimer:b,pointerDownCount:1});this.refreshHasPendingInputs()};v._createClass(l,[{key:"hasPendingInputs",get:function(){return f.someMap(this._pointerState,a=>null!=a.doubleClickTimer)}}]);return l}(A.InputHandler);m.DefaultParameters=
C;m.SingleAndDoubleClick=A;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(m,v){m.euclideanDistance=function(k,f){const x=f.x-k.x;k=f.y-k.y;return Math.sqrt(x*x+k*k)};m.fitCircleLSQ=function(k,f){f?(f.radius=0,f.center.x=0,f.center.y=0):f={radius:0,center:v.createScreenPoint()};if(0===k.length)return f;if(1===k.length)return f.center.x=k[0].x,f.center.y=
k[0].y,f;if(2===k.length){const [h,c]=k,[n,t]=[c.x-h.x,c.y-h.y];f.radius=Math.sqrt(n*n+t*t)/2;f.center.x=(h.x+c.x)/2;f.center.y=(h.y+c.y)/2;return f}let x=0,A=0;for(f=0;f<k.length;f++)x+=k[f].x,A+=k[f].y;x/=k.length;A/=k.length;var B=k.map(h=>h.x-x),C=k.map(h=>h.y-A);let G=f=0;var l=0,r=0,a=0,b=0,p=0;for(var e=0;e<B.length;e++){const h=B[e],c=C[e],n=h*h,t=c*c;f+=n;G+=t;l+=h*c;r+=n*h;a+=t*c;b+=h*t;p+=c*n}B=f;C=l;e=G;r=.5*(r+b);a=.5*(a+p);p=B*e-l*C;b=(r*e-a*C)/p;a=(B*a-l*r)/p;p=v.createScreenPoint(b+
x,a+A);return{radius:Math.sqrt(b*b+a*a+(f+G)/k.length),center:p}};m.getPointerId=function(k){({native:k}=k);const {pointerId:f,button:x,pointerType:A}=k;return"mouse"===A?`${f}:${x}`:`${A}`};m.manhattanDistance=function(k,f){return Math.abs(f.x-k.x)+Math.abs(f.y-k.y)};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../core/time ../InputHandler ./support".split(" "),
function(m,v,k,f,x,A){function B(r){const a=[];r.forEach(b=>{a.push(k.createScreenPoint(b.event.x,b.event.y))});return A.fitCircleLSQ(a)}function C(r){const a=B(r);let b=0;r.forEach(p=>{var e=l(p,a);for(e-=p.lastAngle;e>Math.PI;)e-=2*Math.PI;for(;e<-Math.PI;)e+=2*Math.PI;e=p.lastAngle+e;p.lastAngle=e;b+=e-p.initialAngle});b/=r.size||1;return{angle:b,radius:a.radius,center:a.center}}function G(r){const a=new Map;r.forEach((b,p)=>a.set(p,b.event));return a}function l(r,a){r=r.event;return Math.atan2(r.y-
a.center.y,r.x-a.center.x)}x=function(r){function a(p){var e=r.call(this,!1)||this;e._navigationTouch=p;e._startStateModifiers=new Set;e._activePointerMap=new Map;e._isDragging=!1;e._isCurrentDragSuppressed=!1;e._drag=e.registerOutgoing("drag");e.registerIncoming("pointer-drag",e._handlePointerDrag.bind(v._assertThisInitialized(e)));e.registerIncoming("pointer-up",e._handlePointerUpAndPointerLost.bind(v._assertThisInitialized(e)));e.registerIncoming("pointer-capture-lost",e._handlePointerUpAndPointerLost.bind(v._assertThisInitialized(e)));
e.registerIncoming("pointer-cancel",e._handlePointerUpAndPointerLost.bind(v._assertThisInitialized(e)));return e}v._inheritsLoose(a,r);var b=a.prototype;b._createPayload=function(p,e,h,c){return{action:p,pointerType:this._pointerType,button:this._mouseButton,buttons:e.buttons,timestamp:c,pointers:G(this._activePointerMap),pointer:e,angle:h.angle,radius:h.radius,center:h.center}};b._addPointer=function(p){var e=p.native.pointerId;const h=C(this._activePointerMap).angle;p={event:p,initialAngle:0,lastAngle:0};
this._activePointerMap.set(e,p);e=l(p,B(this._activePointerMap));p.initialAngle=e;p.lastAngle=e;this._updatePointerAngles(h)};b._updatePointer=function(p){if(!p||null!=p.x||null!=p.y){var e=this._activePointerMap.get(p.native.pointerId);e?e.event=p:this._addPointer(p)}};b._removePointer=function(p){const e=C(this._activePointerMap).angle;this._activePointerMap.delete(p);this._updatePointerAngles(e)};b._updatePointerAngles=function(p){const e=C(this._activePointerMap);this._activePointerMap.forEach(h=>
{h.initialAngle=l(h,e)-p;h.lastAngle=l(h,e)-p})};b._emitEvent=function(p,e,h){const c=C(this._activePointerMap);this._drag.emit(this._createPayload(p,e,c,h),void 0,this._startStateModifiers)};b._handlePointerUpAndPointerLost=function(p){const e=p.data.native.pointerId,h=f.Milliseconds(p.timestamp);this._activePointerMap.get(e)&&(1===this._activePointerMap.size?(this._updatePointer(p.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",p.data,h),this._isCurrentDragSuppressed=this._isDragging=
!1,this._removePointer(e)):(this._removePointer(e),this._emitEvent("removed",p.data,f.Milliseconds(p.timestamp))))};b._handlePointerDrag=function(p){const e=p.data,h=e.currentEvent,c=f.Milliseconds(p.timestamp);switch(e.action){case "start":case "update":this._isDragging?this._activePointerMap.has(h.native.pointerId)?(this._updatePointer(h),!this._isCurrentDragSuppressed&&this._emitEvent("update",h,c)):(this._addPointer(h),this._emitEvent("added",h,c),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(h),this._pointerType=p.data.startEvent.pointerType,this._mouseButton=p.data.startEvent.button,this._startStateModifiers=p.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",h,c))}};v._createClass(a,[{key:"_isSuppressed",get:function(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}]);return a}(x.InputHandler);
m.Button=void 0;(function(r){r[r.Left=0]="Left";r[r.Middle=1]="Middle";r[r.Right=2]="Right";r[r.Back=3]="Back";r[r.Forward=4]="Forward";r[r.Undefined=-1]="Undefined"})(m.Button||(m.Button={}));m.Drag=x;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(m,
v,k,f,x,A){f=function(B){function C(l=x.DefaultParameters.maximumDoubleClickDelay,r=x.DefaultParameters.maximumDoubleClickDistance,a=x.DefaultParameters.maximumDoubleTouchDelay,b=x.DefaultParameters.maximumDoubleTouchDistance,p=k.clock){var e=B.call(this,!1)||this;e._maximumDoubleClickDelay=l;e._maximumDoubleClickDistance=r;e._maximumDoubleTouchDelay=a;e._maximumDoubleTouchDistance=b;e._clock=p;e._pointerState=new Map;e._immediateDoubleClick=e.registerOutgoing("immediate-double-click");e.registerIncoming("pointer-down",
e._handlePointerDown.bind(v._assertThisInitialized(e)));e.registerIncoming("pointer-up",e._handlePointerUp.bind(v._assertThisInitialized(e)));return e}v._inheritsLoose(C,B);var G=C.prototype;G.onUninstall=function(){this._pointerState.forEach(l=>{l.immediateDoubleClick&&l.immediateDoubleClick.timeoutHandle.remove()});B.prototype.onUninstall.call(this)};G._handlePointerDown=function(l){l=l.data;const r=A.getPointerId(l);this._pointerState.has(r)||(this._pointerState.set(r,{downButton:l.native.button,
immediateDoubleClick:null}),this.startCapturingPointer(l.native))};G._handlePointerUp=function(l){const r=l.data;var a=A.getPointerId(r);if((a=this._pointerState.get(a))&&a.downButton===r.native.button){const b=a.immediateDoubleClick;if(b){b.timeoutHandle.remove();const p="touch"===l.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;A.manhattanDistance(b,l.data)>p?this._startImmediateDoubleClick(l,a):(this._immediateDoubleClick.emit(l.data,void 0,b.modifiers),
this._removeState(r))}else this._startImmediateDoubleClick(l,a)}};G._startImmediateDoubleClick=function(l,r){r.immediateDoubleClick={x:l.data.x,y:l.data.y,modifiers:l.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(l.data),"touch"===l.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}};G._removeState=function(l){const r=A.getPointerId(l);this._pointerState.delete(r);this.stopCapturingPointer(l.native);this.refreshHasPendingInputs()};return C}(f.InputHandler);
m.ImmediateDoubleClick=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/maybe ../InputHandler ./support".split(" "),function(m,v,k,f,x,A){const B={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};x=function(C){function G(r=B.maximumClickDelay,
a=B.movementUntilMouseDrag,b=B.movementUntilPenDrag,p=B.movementUntilTouchDrag,e=B.holdDelay,h=k.clock){var c=C.call(this,!1)||this;c._maximumClickDelay=r;c._movementUntilMouseDrag=a;c._movementUntilPenDrag=b;c._movementUntilTouchDrag=p;c._holdDelay=e;c._clock=h;c._pointerState=new Map;c._pointerDrag=c.registerOutgoing("pointer-drag");c._immediateClick=c.registerOutgoing("immediate-click");c._pointerHold=c.registerOutgoing("hold");c.registerIncoming("pointer-down",c._handlePointerDown.bind(v._assertThisInitialized(c)));
c.registerIncoming("pointer-up",n=>{c._handlePointerLoss(n,"pointer-up")});c.registerIncoming("pointer-capture-lost",n=>{c._handlePointerLoss(n,"pointer-capture-lost")});c.registerIncoming("pointer-cancel",n=>{c._handlePointerLoss(n,"pointer-cancel")});c._moveHandle=c.registerIncoming("pointer-move",c._handlePointerMove.bind(v._assertThisInitialized(c)));c._moveHandle.pause();return c}v._inheritsLoose(G,C);var l=G.prototype;l.onUninstall=function(){this._pointerState.forEach(r=>{r.holdTimeout=f.removeMaybe(r.holdTimeout)});
C.prototype.onUninstall.call(this)};l._handlePointerDown=function(r){const a=r.data,b=a.native.pointerId;var p=null;0===this._pointerState.size&&(p=this._clock.setTimeout(()=>{const e=this._pointerState.get(b);e&&(e.isDragging||(this._pointerHold.emit(e.previousEvent,void 0,r.modifiers),e.holdEmitted=!0),e.holdTimeout=null)},this._holdDelay));p={startEvent:a,previousEvent:a,startTimestamp:r.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:p,modifiers:new Set};this._pointerState.set(b,
p);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(r)};l._createPointerDragData=function(r,a,b){return{action:r,startEvent:a.startEvent,previousEvent:a.previousEvent,currentEvent:b}};l._handlePointerMove=function(r){const a=r.data,b=this._pointerState.get(a.native.pointerId);if(b){if(b.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers);else{const p=A.euclideanDistance(a,b.startEvent),e=this._getDragThreshold(a.native.pointerType);
p>e&&this._startDragging(r)}b.previousEvent=a}};l._getDragThreshold=function(r){switch(r){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}};l._startDragging=function(r){const a=r.data,b=a.native.pointerId;this._pointerState.forEach(p=>{null!=p.holdTimeout&&(p.holdTimeout.remove(),p.holdTimeout=null);p.isDragging||(p.modifiers=r.modifiers,p.isDragging=!0,b===p.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",
p,a)):this._pointerDrag.emit(this._createPointerDragData("start",p,p.previousEvent),r.timestamp))})};l._handlePointerLoss=function(r,a){const b=r.data,p=b.native.pointerId,e=this._pointerState.get(p);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===a?b:e.previousEvent),void 0,e.modifiers):"pointer-up"===a&&e.downButton===b.native.button&&r.timestamp-e.startTimestamp<=this._maximumClickDelay&&
!e.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(p),this.stopCapturingPointer(b.native),0===this._pointerState.size&&this._moveHandle.pause())};return G}(x.InputHandler);m.DefaultParameters=B;m.PointerClickHoldAndDrag=x;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(m,v,k,f,x,A,B){const C={added:[],removed:[]},G=new Set,l=new B(0,0,0,0);return function(r){function a(p){var e=r.call(this)||this;e._tiles=new Map;e._index=f.rbush(9,k("esri-csp-restrictions")?h=>({minX:h.bounds[0],minY:h.bounds[1],maxX:h.bounds[2],maxY:h.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);e.tiles=[];e.tileScheme=p;return e}m._inheritsLoose(a,r);var b=a.prototype;b.destroy=function(){this.clear()};b.clear=function(){this.tiles.length=0;this._tiles.clear();
this._index.clear()};b.has=function(p){return this._tiles.has(p)};b.get=function(p){return this._tiles.get(p)};b.boundsIntersections=function(p){return this._index.search({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]})};b.updateTiles=function(p){const e={added:[],removed:[]};for(const h of p.added)if(!this.has(h)){const c=new x.Tile(this.tileScheme,h);this._tiles.set(h,c);this._index.insert(c);e.added.push(c)}for(const h of p.removed)this.has(h)&&(p=this.get(h),this._tiles.delete(h),this._index.remove(p),
e.removed.push(p));this.tiles.length=0;this._tiles.forEach(h=>this.tiles.push(h));(e.added.length||e.removed.length)&&this.emit("update",e)};b.setViewState=function(p){if(p=this.tileScheme.getTileCoverage(p,0)){var {spans:e,lodInfo:h}=p,{level:c}=h;if(0<e.length)for(const {row:t,colFrom:z,colTo:w}of e)for(var n=z;n<=w;n++){const g=l.set(c,t,h.normalizeCol(n),h.getWorldForColumn(n)).id;G.add(g);if(!this.has(g)){const q=new x.Tile(this.tileScheme,g);this._tiles.set(g,q);this._index.insert(q);this.tiles.push(q);
C.added.push(q)}}for(c=this.tiles.length-1;0<=c;c--)n=this.tiles[c],G.has(n.id)||(this._tiles.delete(n.id),this.tiles.splice(c,1),this._index.remove(n),C.removed.push(n));(C.added.length||C.removed.length)&&this.emit("update",C);A.pool.release(p);G.clear();C.added.length=0;C.removed.length=0}};return a}(v)})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(m,v){function k(e,h){if(!(this instanceof k))return new k(e,h);this._maxEntries=Math.max(4,e||9);this._minEntries=Math.max(2,
Math.ceil(.4*this._maxEntries));h&&("function"===typeof h?this.toBBox=h:this._initFormat(h));this.clear()}function f(e,h){x(e,0,e.children.length,h,e)}function x(e,h,c,n,t){t||(t=b(null));t.minX=Infinity;t.minY=Infinity;t.maxX=-Infinity;t.maxY=-Infinity;for(var z;h<c;h++)z=e.children[h],A(t,e.leaf?n(z):z);return t}function A(e,h){e.minX=Math.min(e.minX,h.minX);e.minY=Math.min(e.minY,h.minY);e.maxX=Math.max(e.maxX,h.maxX);e.maxY=Math.max(e.maxY,h.maxY);return e}function B(e,h){return e.minX-h.minX}
function C(e,h){return e.minY-h.minY}function G(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function r(e,h){return e.minX<=h.minX&&e.minY<=h.minY&&h.maxX<=e.maxX&&h.maxY<=e.maxY}function a(e,h){return h.minX<=e.maxX&&h.minY<=e.maxY&&h.maxX>=e.minX&&h.maxY>=e.minY}function b(e){return{children:e,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function p(e,h,c,n,t){for(var z=[h,c],w;z.length;)c=z.pop(),h=z.pop(),c-h<=n||(w=
h+Math.ceil((c-h)/n/2)*n,v.quickselect(e,w,h,c,t),z.push(h,w,w,c))}k.prototype={all:function(){return this._all(this.data,[])},search:function(e){var h=this.data,c=[],n=this.toBBox;if(!a(e,h))return c;for(var t=[],z,w,g,q;h;){z=0;for(w=h.children.length;z<w;z++)g=h.children[z],q=h.leaf?n(g):g,a(e,q)&&(h.leaf?c.push(g):r(e,q)?this._all(g,c):t.push(g));h=t.pop()}return c},collides:function(e){var h=this.data,c=this.toBBox;if(!a(e,h))return!1;for(var n=[],t,z,w,g;h;){t=0;for(z=h.children.length;t<z;t++)if(w=
h.children[t],g=h.leaf?c(w):w,a(e,g)){if(h.leaf||r(e,g))return!0;n.push(w)}h=n.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var h=0,c=e.length;h<c;h++)this.insert(e[h]);return this}e=this._build(e.slice(),0,e.length-1,0);this.data.children.length?this.data.height===e.height?this._splitRoot(this.data,e):(this.data.height<e.height&&(h=this.data,this.data=e,e=h),this._insert(e,this.data.height-e.height-1,!0)):this.data=e;return this},insert:function(e){e&&
this._insert(e,this.data.height-1);return this},clear:function(){this.data=b([]);return this},remove:function(e,h){if(!e)return this;for(var c=this.data,n=this.toBBox(e),t=[],z=[],w,g,q,y;c||t.length;){c||(c=t.pop(),g=t[t.length-1],w=z.pop(),y=!0);if(c.leaf){a:{q=e;var F=c.children,I=h;if(I){for(var K=0;K<F.length;K++)if(I(q,F[K])){q=K;break a}q=-1}else q=F.indexOf(q)}if(-1!==q){c.children.splice(q,1);t.push(c);this._condense(t);break}}y||c.leaf||!r(c,n)?g?(w++,c=g.children[w],y=!1):c=null:(t.push(c),
z.push(w),w=0,g=c,c=c.children[0])}return this},toBBox:function(e){return e},compareMinX:B,compareMinY:C,toJSON:function(){return this.data},fromJSON:function(e){this.data=e;return this},_all:function(e,h){for(var c=[];e;)e.leaf?h.push.apply(h,e.children):c.push.apply(c,e.children),e=c.pop();return h},_build:function(e,h,c,n){var t=c-h+1,z=this._maxEntries;if(t<=z){var w=b(e.slice(h,c+1));f(w,this.toBBox);return w}n||(n=Math.ceil(Math.log(t)/Math.log(z)),z=Math.ceil(t/Math.pow(z,n-1)));w=b([]);w.leaf=
!1;w.height=n;t=Math.ceil(t/z);z=t*Math.ceil(Math.sqrt(z));var g;for(p(e,h,c,z,this.compareMinX);h<=c;h+=z){var q=Math.min(h+z-1,c);p(e,h,q,t,this.compareMinY);for(g=h;g<=q;g+=t){var y=Math.min(g+t-1,q);w.children.push(this._build(e,g,y,n-1))}}f(w,this.toBBox);return w},_chooseSubtree:function(e,h,c,n){for(var t,z,w,g,q,y,F,I;;){n.push(h);if(h.leaf||n.length-1===c)break;F=I=Infinity;t=0;for(z=h.children.length;t<z;t++)w=h.children[t],q=G(w),y=(Math.max(w.maxX,e.maxX)-Math.min(w.minX,e.minX))*(Math.max(w.maxY,
e.maxY)-Math.min(w.minY,e.minY))-q,y<I?(I=y,F=q<F?q:F,g=w):y===I&&q<F&&(F=q,g=w);h=g||h.children[0]}return h},_insert:function(e,h,c){var n=this.toBBox;c=c?e:n(e);n=[];var t=this._chooseSubtree(c,this.data,h,n);t.children.push(e);for(A(t,c);0<=h;)if(n[h].children.length>this._maxEntries)this._split(n,h),h--;else break;this._adjustParentBBoxes(c,n,h)},_split:function(e,h){var c=e[h],n=c.children.length,t=this._minEntries;this._chooseSplitAxis(c,t,n);n=this._chooseSplitIndex(c,t,n);n=b(c.children.splice(n,
c.children.length-n));n.height=c.height;n.leaf=c.leaf;f(c,this.toBBox);f(n,this.toBBox);h?e[h-1].children.push(n):this._splitRoot(c,n)},_splitRoot:function(e,h){this.data=b([e,h]);this.data.height=e.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(e,h,c){var n,t;var z=t=Infinity;for(n=h;n<=c-h;n++){var w=x(e,0,n,this.toBBox);var g=x(e,n,c,this.toBBox);var q=Math.max(0,Math.min(w.maxX,g.maxX)-Math.max(w.minX,g.minX))*Math.max(0,Math.min(w.maxY,g.maxY)-Math.max(w.minY,
g.minY));w=G(w)+G(g);if(q<z){z=q;var y=n;t=w<t?w:t}else q===z&&w<t&&(t=w,y=n)}return y},_chooseSplitAxis:function(e,h,c){var n=e.leaf?this.compareMinX:B,t=e.leaf?this.compareMinY:C,z=this._allDistMargin(e,h,c,n);h=this._allDistMargin(e,h,c,t);z<h&&e.children.sort(n)},_allDistMargin:function(e,h,c,n){e.children.sort(n);n=this.toBBox;var t=x(e,0,h,n),z=x(e,c-h,c,n),w=l(t)+l(z),g;for(g=h;g<c-h;g++){var q=e.children[g];A(t,e.leaf?n(q):q);w+=l(t)}for(g=c-h-1;g>=h;g--)q=e.children[g],A(z,e.leaf?n(q):q),
w+=l(z);return w},_adjustParentBBoxes:function(e,h,c){for(;0<=c;c--)A(h[c],e)},_condense:function(e){for(var h=e.length-1,c;0<=h;h--)0===e[h].children.length?0<h?(c=e[h-1].children,c.splice(c.indexOf(e[h]),1)):this.clear():f(e[h],this.toBBox)},_initFormat:function(e){var h=["return a"," - b",";"];this.compareMinX=new Function("a","b",h.join(e[0]));this.compareMinY=new Function("a","b",h.join(e[1]));this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+
"};")}};m.rbush=k})},"esri/chunks/quickselect":function(){define(["exports"],function(m){var v={exports:{}};(function(k){(function(f){f=f();void 0!==f&&(k.exports=f)})(function(){function f(B,C,G,l,r){for(;l>G;){if(600<l-G){var a=l-G+1,b=C-G+1,p=Math.log(a),e=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*e*(a-e)/a)*(0>b-a/2?-1:1);f(B,C,Math.max(G,Math.floor(C-b*e/a+p)),Math.min(l,Math.floor(C+(a-b)*e/a+p)),r)}a=B[C];b=G;e=l;x(B,G,C);for(0<r(B[l],a)&&x(B,G,l);b<e;){x(B,b,e);b++;for(e--;0>r(B[b],a);)b++;for(;0<
r(B[e],a);)e--}0===r(B[G],a)?x(B,G,e):(e++,x(B,e,l));e<=C&&(G=e+1);C<=e&&(l=e-1)}}function x(B,C,G){var l=B[C];B[C]=B[G];B[G]=l}function A(B,C){return B<C?-1:B>C?1:0}return function(B,C,G,l,r){f(B,C,G||0,l||B.length-1,r||A)}})})(v);m.quickselect=v.exports})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(m,v,k,f,x,A,B){let C=function(){function G(r,a){this.key=new B(0,0,0,0);this.bounds=x.create();this.objectIds=new Set;this.key.set(a);a=r.getLODInfoAt(this.key);this.tileInfoView=r;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=a.resolution;this.scale=a.scale;this.level=a.level}var l=G.prototype;l.createChildTiles=function(){const r=this.key.getChildKeys(),a=k.acquire();for(let b=0;b<r.length;b++)a[b]=new G(this.tileInfoView,r[b]);return a};l.getQuantizationParameters=
function(){return A.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};v._createClass(G,[{key:"id",get:function(){return this.key.id}},{key:"extent",get:function(){return f.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,
this.resolution],translate:[this.bounds[0],this.bounds[3]]}}}]);return G}();m.Tile=C;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B,C){let G=0;f=function(l){function r(){var a=l.apply(this,arguments)||this;a.color=new k([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}m._inheritsLoose(r,l);m._createClass(r,[{key:"version",get:function(){return G++}}]);return r}(f);v.__decorate([x.property({readOnly:!0})],f.prototype,"version",null);v.__decorate([x.property({type:k})],f.prototype,"color",void 0);v.__decorate([x.property({type:k})],f.prototype,"haloColor",void 0);v.__decorate([x.property()],f.prototype,
"haloOpacity",void 0);v.__decorate([x.property()],f.prototype,"fillOpacity",void 0);return f=v.__decorate([C.subclass("esri.views.2d.support.HighlightOptions")],f)})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(m){let v=function(){function k(){this._names=new Map}var f=k.prototype;f.begin=function(x){this._names.has(x)||(this._names.set(x,!1),x.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${x}.Start`))};f.end=function(x){this._names.has(x)&&!this._names.get(x)&&
(this._names.set(x,!0),performance.mark(`Esri.${x}.End`))};f.record=function(x){this._names.has(x)||(this._names.set(x,!0),performance.mark(`Esri.${x}`))};return k}();m.Timeline=v;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/support/createScreenshotPlan":function(){define(function(){return function(m,v,k,f,x,A,B,C){m.ignorePadding&&(f={left:0,right:0,top:0,bottom:0});var G;null!=m.width&&null!=m.height?G=[m.width,m.height]:null==m.width&&
null!=m.height?G=[m.height,m.height]:null!=m.width&&null==m.height?G=[m.width,m.width]:null==m.width&&null==m.height&&(G=null);var l=k[0]-(f.left+f.right);k=k[1]-(f.top+f.bottom);m=m.area||{x:0,y:0,width:l,height:k};if(G){const r=G[0]/G[1];r>l/k?(l=m.width/r,m={x:m.x,y:Math.round(m.y+(m.height-l)/2),width:m.width,height:Math.round(l)}):(l=m.height*r,m={x:Math.round(m.x+(m.width-l)/2),y:m.y,width:Math.round(l),height:m.height})}else G=[m.width,m.height];G[0]>m.width?(v=Math.min(G[0]/m.width,v),G=G[0]/
m.width/v):(v=1,G=G[0]/m.width);return{resolutionScale:v,cropArea:{x:Math.round((m.x+f.left)*v),y:Math.round((m.y+f.top)*v),width:Math.round(m.width*v),height:Math.round(m.height*v)},outputScale:G,format:x,quality:A,children:B,rotation:C}}})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/maybe","../../core/imageUtils"],function(m,v,k,f,x){function A(c,n){const {format:t,quality:z,rotation:w,disableDecorations:g}=c||{};var q=r(c,
n.padding);var y=n.width-q.left-q.right;n=n.height-q.top-q.bottom;q={x:0,y:0,width:y,height:n};if(c&&c.area){null!=c.area.x&&(q.x=Math.floor(c.area.x));null!=c.area.y&&(q.y=Math.floor(c.area.y));var F=null!=c.area.width?Math.floor(c.area.width):null,I=null!=c.area.height?Math.floor(c.area.height):null;q.width=y-q.x;q.height=n-q.y;null!=F&&null!=I?(q.width=Math.min(q.width,F),q.height=Math.min(q.height,I)):null==F&&null!=I?(F=Math.min(q.width,F),q.height*=F/q.width,q.width=F):null!=F&&null==I&&(F=
Math.min(q.height,I),q.width*=F/q.height,q.height=F)}q=l(q,c);F=Math.floor(Math.max(q.x,0));I=Math.floor(Math.max(q.y,0));y={x:F,y:I,width:Math.floor(Math.min(q.width,y-F)),height:Math.floor(Math.min(q.height,n-I))};n=y.width/y.height;q=q.width/q.height;q!==n&&(q>n?(n=Math.floor(y.width/q),y={x:y.x,y:Math.floor(y.y+(y.height-n)/2),width:y.width,height:n}):(n=Math.floor(y.height*q),y={x:Math.floor(y.x+(y.width-n)/2),y:y.y,width:n,height:y.height}));const {width:K,height:N}=G(c,y);n=a(t);q=e[n];q=k.clamp(null!=
z?z:q,0,100);return{format:n,quality:q,area:y,width:K,height:N,rotation:w,disableDecorations:!!g,ignoreBackground:!(!c||!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function B(c,n){f.isNone(b)&&(b=document.createElement("canvas"));var t=b;if(n.premultipliedAlpha){var z=c.data;const g=z.length;for(let q=0;q<g;q+=4){var w=z[q+3];255!==w&&0<w&&(w=255/w,z[q+0]*=w,z[q+1]*=w,z[q+2]*=w)}}t.width=c.width;t.height=c.height;z=t.getContext("2d");z.putImageData(c,0,0);n.flipY&&(z.save(),z.globalCompositeOperation=
"copy",z.scale(1,-1),z.translate(0,-z.canvas.height),z.drawImage(z.canvas,0,0),z.restore());return{ctx:z,canvas:t}}function C(c,n){return c.toDataURL(p[n.format],n.quality/100)}function G(c,n){if(!c)return n;const t=c.width;c=c.height;if(null!=t&&null!=c)return{width:Math.floor(t),height:Math.floor(c)};if(null==t&&null==c)return n;n=n.width/n.height;return null==c?{width:Math.floor(t),height:Math.floor(t/n)}:{width:Math.floor(c*n),height:Math.floor(c)}}function l(c,n){if(!n||null==n.width||null==
n.height)return c;n=n.width/n.height;const t=c.width/c.height;if(t===n)return c;if(t<n)return n=Math.floor(c.height*n),c.x-=(n-c.width)/2,c.width=n,c;n=Math.floor(c.width/n);c.y-=(n-c.height)/2;c.height=n;return c}function r(c,n){return!n||c&&c.ignorePadding?h:n}function a(c){switch(c){case "png":case "jpg":case "jpeg":return c;case null:case void 0:return"png";default:return"png"}}let b=null;const p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},e={png:100,jpg:98,jpeg:98},h={top:0,right:0,
bottom:0,left:0};m.createEmptyImageData=x.createEmptyImageData;m.completeUserSettings=A;m.encode=function(c,n,t){const {ctx:z,canvas:w}=B(c,t);c=z.getImageData(0,0,c.width,c.height);n=C(w,n);w.width=0;w.height=0;return{dataUrl:n,data:c}};m.encodeData=function(c,n){const {ctx:t,canvas:z}=B(c,n);c=t.getImageData(0,0,c.width,c.height);z.width=0;z.height=0;return c};m.getFormatAndQuality=function(c,n){c=a(c);const t=e[c];n=k.clamp(null!=n?n:t,0,100);return{format:c,quality:n}};m.getMaximumResolutionScale=
function(c,n){return n/Math.max(c[0],c[1])};m.resampleHermite=function(c,n,t,z=0,w=0,g=c.width-z,q=c.height-w,y=!1){const {data:F}=c,{width:I,height:K,data:N}=n;g/=I;q/=K;const S=Math.ceil(g/2),P=Math.ceil(q/2);c=c.width;for(let T=0;T<K;T++)for(let H=0;H<I;H++){const u=4*(H+(y?K-T-1:T)*I);let d=0,E=0,D=0,M=0,Q=0,V=0;const Z=(T+.5)*q;for(let ba=Math.floor(T*q);ba<(T+1)*q;ba++){var J=Math.abs(Z-(ba+.5))/P;const fa=(H+.5)*g;J*=J;for(let ea=Math.floor(H*g);ea<(H+1)*g;ea++){var L=Math.abs(fa-(ea+.5))/
S;L=Math.sqrt(J+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const da=4*(z+ea+(w+ba)*c);V+=L*F[da+3];E+=L;!t&&255>F[da+3]&&(L=L*F[da+3]/255);D+=L*F[da];M+=L*F[da+1];Q+=L*F[da+2];d+=L}}N[u]=D/d;N[u+1]=M/d;N[u+2]=Q/d;N[u+3]=V/E}return n};m.screenshotSuperSampleSettings=function(c,n,t){if(!n)return c;const {framebufferWidth:z,framebufferHeight:w,pixelRatio:g,region:q}=c;n=r(c,t);t=n.left+n.right;const y=n.top+n.bottom,F=z-t,I=w-y,K=Math.min(8,Math.min((2048-t)/F,(2048-y)/I));return 1.5>K?c:{...c,framebufferWidth:Math.round(F*
K)+t,framebufferHeight:Math.round(I*K)+y,pixelRatio:g*K,resample:{region:{x:Math.round((q.x-n.left)*K)+n.left,y:Math.round((q.y-n.top)*K)+n.top,width:Math.round(q.width*K),height:Math.round(q.height*K)},width:z,height:w}}};m.toDataUrl=C;m.toRenderSettings=function(c,n){const t=A(c,n),z=t.area,w=t.width/z.width,g=r(t,n.padding),q=g.left+g.right,y=g.top+g.bottom;return{framebufferWidth:Math.floor((n.width-q)*w+q),framebufferHeight:Math.floor((n.height-y)*w+y),region:{x:Math.floor(z.x*w)+g.left,y:Math.floor(z.y*
w)+g.top,width:t.width,height:t.height},format:t.format,quality:t.quality,rotation:t.rotation,pixelRatio:w,layers:c&&c.layers?c.layers:[],disableDecorations:t.disableDecorations,ignoreBackground:t.ignoreBackground,ignorePadding:t.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/core/imageUtils":function(){define(["exports"],function(m){function v(x,A,B){B||(k||(k=document.createElement("canvas"),k.width=1,k.height=
1),B=k);return B.getContext("2d").createImageData(x,A)}let k=null,f=!0;m.createEmptyImageData=function(x,A,B){if(!x||!A)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(x,A)}catch(C){f=!1}return v(x,A,B)};m.wrapImageData=function(x,A,B,C){if(!A||!B)throw Error("Cannot construct image data without dimensions");if(f)try{return new ImageData(x,A,B)}catch(G){f=!1}A=v(A,B,C);A.data.set(x,0);return A};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},
"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities","../webgl/context-util"],function(m,v,k,f){m.check=function(x){const A=k.getWebGLCapabilities(x);if(!A.available)return new v("webgl:required","WebGL is required but not supported.");if("3d"===x&&A.majorPerformanceCaveat)return new v("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");
if(!A.supportsHighPrecisionFragment)return new v("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!A.supportsVertexShaderSamplers)return new v("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(A.type===f.ContextType.WEBGL1){if(!A.supportsElementIndexUint)return new v("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");
if(!A.supportsStandardDerivatives)return new v("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!A.supportsInstancedArrays)return new v("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null};Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/capabilities":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe","./context-util"],function(m,v,k,f){function x(p){switch(p){case f.ContextType.WEBGL1:return A();case f.ContextType.WEBGL2:return B()}}function A(){if(!G){{const p=new a,e=C(f.ContextType.WEBGL1,p);k.isNone(e)||(p.supportsElementIndexUint=null!==e.getExtension("OES_element_index_uint"),p.supportsStandardDerivatives=null!==e.getExtension("OES_standard_derivatives"),p.supportsInstancedArrays=null!==e.getExtension("ANGLE_instanced_arrays"),p.supportsTextureFloat=null!==e.getExtension("OES_texture_float"),
p.supportsTextureHalfFloat=null!==e.getExtension("OES_texture_half_float"),p.supportsColorBufferFloat=null!==e.getExtension("WEBGL_color_buffer_float"),p.supportsColorBufferFloatBlend=null!==e.getExtension("EXT_float_blend"),p.supportsColorBufferHalfFloat=null!==e.getExtension("EXT_color_buffer_half_float"));G=p}}return G}function B(){if(!l){{const p=new b,e=C(f.ContextType.WEBGL2,p);k.isNone(e)||(p.supportsColorBufferFloat=null!==e.getExtension("EXT_color_buffer_float"),p.supportsColorBufferFloatBlend=
null!==e.getExtension("EXT_float_blend"),p.supportsColorBufferHalfFloat=p.supportsColorBufferFloat||null!==e.getExtension("EXT_color_buffer_half_float"));l=p}}return l}function C(p,e){if(p===f.ContextType.WEBGL1&&"undefined"===typeof WebGLRenderingContext||p===f.ContextType.WEBGL2&&"undefined"===typeof WebGL2RenderingContext)return null;const h=document.createElement("canvas");if(!h)return null;let c=f.createContext(h,p,{failIfMajorPerformanceCaveat:!0});k.isNone(c)&&(c=f.createContext(h,p),k.isSome(c)&&
(e.majorPerformanceCaveat=!0));if(k.isNone(c))return c;if(p===f.ContextType.WEBGL1){if(p=c.getParameter(c.VERSION)?.match(/^WebGL\s+([\d.]*)/))p=parseFloat(p[1]),e.available=.94<=p}else e.available=!0;e.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE);e.supportsVertexShaderSamplers=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(p=c.getShaderPrecisionFormat(c.FRAGMENT_SHADER,c.HIGH_FLOAT))e.supportsHighPrecisionFragment=0<p.precision;return c}let G,l,r=function(){this.majorPerformanceCaveat=
this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsTextureHalfFloat=this.supportsTextureFloat=this.supportsInstancedArrays=this.supportsStandardDerivatives=this.supportsElementIndexUint=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1},a=function(p){function e(){var h=p.apply(this,arguments)||this;h.type=f.ContextType.WEBGL1;return h}v._inheritsLoose(e,p);return e}(r),b=function(p){function e(){var h=
p.apply(this,arguments)||this;h.type=f.ContextType.WEBGL2;h.supportsElementIndexUint=!0;h.supportsStandardDerivatives=!0;h.supportsInstancedArrays=!0;h.supportsTextureFloat=!0;h.supportsTextureHalfFloat=!0;return h}v._inheritsLoose(e,p);return e}(r);m.getWebGL1Capabilities=A;m.getWebGL2Capabilities=B;m.getWebGLCapabilities=function(p){for(p=f.getContextTypes(p);1<p.length;){const e=x(p.shift());if(e.available)return e}return x(p.shift())};m.getWebGLVersionCapabilities=x;Object.defineProperties(m,
{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/webgl/context-util":function(){define(["exports","../../core/has","../../core/maybe"],function(m,v,k){function f(C){const G=v("esri-force-webgl");if(G===m.ContextType.WEBGL1||G===m.ContextType.WEBGL2)return[G];switch(C){case "2d":return v("mac")&&v("chrome")?[m.ContextType.WEBGL1,m.ContextType.WEBGL2]:[m.ContextType.WEBGL2,m.ContextType.WEBGL1];case "3d":return[m.ContextType.WEBGL2,m.ContextType.WEBGL1]}}function x(C,G,
l={}){if(!window.WebGLRenderingContext)return B(C,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;G=A(C,G,l);k.isNone(G)&&B(C,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e');return G}function A(C,G,l={}){G=G===m.ContextType.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:
["webgl2"];let r=null;for(const a of G){try{r=C.getContext(a,l)}catch(b){}if(r)break}return r}function B(C,G){(C=C.parentNode)&&(C.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+G+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}m.ContextType=void 0;(function(C){C[C.WEBGL1=1]="WEBGL1";C[C.WEBGL2=2]="WEBGL2"})(m.ContextType||
(m.ContextType={}));m.createContext=A;m.createContextOrErrorHTML=function(C,G,l={}){for(C=f(C);1<C.length;){const r=A(G,C.shift(),l);if(k.isSome(r))return r}return x(G,C.shift(),l)};m.getContextTypes=f;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/arrayUtils ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(m,v,k,f,x,A,B){f=function(C){function G(l){l=C.call(this,l)||this;l.components=["attribution","zoom"];return l}m._inheritsLoose(G,C);return G}(B);v.__decorate([k.property()],f.prototype,"components",void 0);return f=v.__decorate([A.subclass("esri.views.ui.2d.DefaultUI2D")],f)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p,e){k=function(h){function c(t){t=h.call(this,t)||this;t._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};t.components=[];return t}m._inheritsLoose(c,h);var n=c.prototype;n.initialize=function(){this._handles.add([x.watch(()=>this.components,this._componentsWatcher.bind(this),x.initial),x.watch(()=>this.view,this._updateViewAwareWidgets.bind(this),x.initial)])};n._add=function(t,z,w,g){if("string"===
typeof t&&this._defaultPositionLookup[t]){if(this._find(t))return;t=this._createComponent(t)}h.prototype._add.call(this,t,z,w,g)};n._removeComponents=function(t){t.forEach(z=>{if(z=this._find(z))this.remove(z),z.destroy()})};n._updateViewAwareWidgets=function(t){this.components.forEach(z=>{(z=(z=this._find(z))&&z.widget)&&void 0!==z.view&&(z.view=t)})};n._componentsWatcher=function(t,z){this._removeComponents(z);this._addComponents(t);this._adjustPadding(t)};n._adjustPadding=function(t){t.includes("attribution")||
this._isOverridden("padding")||({top:t}=this.padding,this.padding=t)};n._addComponents=function(t){this.constructed&&t.forEach(z=>this.add(this._createComponent(z),this._defaultPositionLookup[z]))};n._createComponent=function(t){const z=this._createWidget(t);if(z)return new l({id:t,node:z})};n._createWidget=function(t){if("attribution"===t)return this._createAttribution();if("compass"===t)return this._createCompass();if("navigation-toggle"===t)return this._createNavigationToggle();if("zoom"===t)return this._createZoom()};
n._createAttribution=function(){return new a({view:this.view})};n._createCompass=function(){return new b({view:this.view})};n._createNavigationToggle=function(){return new p({view:this.view})};n._createZoom=function(){return new e({view:this.view})};return c}(r);v.__decorate([A.property()],k.prototype,"components",void 0);return k=v.__decorate([G.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B,C){k=function(G){function l(){var a=G.apply(this,arguments)||this;a.widget=null;return a}m._inheritsLoose(l,G);var r=l.prototype;r.destroy=function(){this.widget&&this.widget.destroy();this.node=null};r.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),f.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};
m._createClass(l,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(a){const b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),this._set("node",a))}}]);return l}(k);v.__decorate([x.property({dependsOn:[]})],k.prototype,"id",null);v.__decorate([x.property()],k.prototype,"node",null);v.__decorate([B.cast("node")],k.prototype,"castNode",null);v.__decorate([x.property({readOnly:!0})],k.prototype,
"widget",void 0);return k=v.__decorate([C.subclass("esri.views.ui.Component")],k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){function p(n){const t="object"===typeof n&&null!==n&&Object.getPrototypeOf(n);return null!==t&&t!==Object.prototype||!("component"in n||"index"in n||"position"in n)?null:n}function e(n,{top:t,bottom:z,left:w,right:g}){n.style.top=t;n.style.bottom=z;n.style.left=w;n.style.right=g}const h={left:0,top:0,bottom:0,right:0},c={bottom:30,top:15,right:15,left:15};f=function(n){function t(w){var g=n.call(this,w)||this;g._cornerNameToContainerLookup={};g._positionNameToContainerLookup=
{};g._components=[];g._componentToKey=new Map;g._handles=new x;g.view=null;g._applyViewPadding=()=>{const q=g.container;q&&e(q,g._toPxPosition(g._getViewPadding()))};g._applyUIPadding=()=>{const q=g._innerContainer;q&&e(q,g._toPxPosition(g.padding))};g._initContainers();return g}m._inheritsLoose(t,n);var z=t.prototype;z.initialize=function(){this._handles.add([A.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,A.initial),A.watch(()=>this.padding,this._applyUIPadding,A.initial)])};
z.destroy=function(){this.container=null;for(const w of this._components)w.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};z.castPadding=function(w){return"number"===typeof w?{bottom:w,top:w,right:w,left:w}:{...c,...w}};z.add=function(w,g){let q,y;if(Array.isArray(w))w.forEach(I=>this.add(I,g));else{var F=p(w);F&&({index:q,position:g,component:w,key:y}=F);g&&"object"===typeof g&&({index:q,key:y,position:g}=g);!w||g&&!this._isValidPosition(g)||this._add(w,
g,q,y)}};z.remove=function(w,g){if(w){if(Array.isArray(w))return w.map(F=>this.remove(F,g));var q=this._find(w);if(q){var y=this._componentToKey;if(!y.has(w)||y.get(w)===g)return y=this._components.indexOf(q),q.node.parentNode&&q.node.parentNode.removeChild(q.node),this._componentToKey.delete(w),this._components.splice(y,1)[0]}}};z.empty=function(w){if(Array.isArray(w))return w.map(g=>this.empty(g)).reduce((g,q)=>g.concat(q));w=w||"manual";return"manual"===w?Array.prototype.slice.call(this._manualContainer.children).filter(g=>
!g.classList.contains("esri-ui-corner")).map(g=>this.remove(g)):this._isValidPosition(w)?Array.prototype.slice.call(this._cornerNameToContainerLookup[w].children).map(this.remove,this):null};z.move=function(w,g){Array.isArray(w)&&w.forEach(F=>this.move(F,g));if(w){var q=p(w)||p(g);if(q){var y=q.index;g=q.position;w=q.component||w}(!g||this._isValidPosition(g))&&(w=this.remove(w))&&this.add(w,{position:g,index:y})}};z.find=function(w){return w?(w=this._findById(w))&&(w.widget||w.node):null};z.getPosition=
function(w){for(const g in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[g].contains(w))return g;return null};z._add=function(w,g,q,y){w instanceof a||(w=new a({node:w}));this._place({component:w,position:g,index:q});this._components.push(w);y&&this._componentToKey.set(w,y)};z._find=function(w){return w?w instanceof a?this._findByComponent(w):"string"===typeof w?this._findById(w):this._findByNode(w.domNode||w):null};z._getViewPadding=function(){return this.get("view.padding")||
h};z._attachContainers=function(w){w.appendChild(this._innerContainer);w.appendChild(this._manualContainer)};z._initContainers=function(){var w=document.createElement("div");w.classList.add("esri-ui-inner-container");w.classList.add("esri-ui-corner-container");const g=document.createElement("div");g.classList.add("esri-ui-inner-container");g.classList.add("esri-ui-manual-container");const q=document.createElement("div");q.classList.add("esri-ui-top-left");q.classList.add("esri-ui-corner");w.appendChild(q);
const y=document.createElement("div");y.classList.add("esri-ui-top-right");y.classList.add("esri-ui-corner");w.appendChild(y);const F=document.createElement("div");F.classList.add("esri-ui-bottom-left");F.classList.add("esri-ui-corner");w.appendChild(F);const I=document.createElement("div");I.classList.add("esri-ui-bottom-right");I.classList.add("esri-ui-corner");w.appendChild(I);this._innerContainer=w;this._manualContainer=g;w=b.isRTL();this._cornerNameToContainerLookup={"top-left":q,"top-right":y,
"bottom-left":F,"bottom-right":I,"top-leading":w?y:q,"top-trailing":w?q:y,"bottom-leading":w?I:F,"bottom-trailing":w?F:I};this._positionNameToContainerLookup={manual:g,...this._cornerNameToContainerLookup}};z._isValidPosition=function(w){return!!this._positionNameToContainerLookup[w]};z._place=function(w){const g=w.component,q=w.index;w=this._positionNameToContainerLookup[w.position||"manual"];var y=-1<q,F=g.widget;F&&!F._started&&"function"===typeof F.postMixInProperties&&"function"===typeof F.buildRendering&&
"function"===typeof F.postCreate&&"function"===typeof F.startup&&g.widget.startup();y?(y=Array.prototype.slice.call(w.children),0===q?w.firstChild?k.insertBefore(g.node,w.firstChild):w.appendChild(g.node):q>=y.length?w.appendChild(g.node):k.insertBefore(g.node,y[q])):w.appendChild(g.node)};z._toPxPosition=function(w){return{top:this._toPxUnit(w.top),left:this._toPxUnit(w.left),right:this._toPxUnit(w.right),bottom:this._toPxUnit(w.bottom)}};z._toPxUnit=function(w){return 0===w?"0":w+"px"};z._findByComponent=
function(w){let g=null,q;this._components.some(y=>{(q=y===w)&&(g=y);return q});return g};z._findById=function(w){let g=null,q;this._components.some(y=>{(q=y.id===w)&&(g=y);return q});return g};z._findByNode=function(w){let g=null,q;this._components.some(y=>{(q=y.node===w)&&(g=y);return q});return g};m._createClass(t,[{key:"container",set:function(w){const g=this._get("container");w!==g&&(w&&(w.classList.add("esri-ui"),r.setCalciteThemeClass(w),this._attachContainers(w)),g&&(g.classList.remove("esri-ui"),
e(g,{top:"",bottom:"",left:"",right:""}),k.empty(g)),this._set("container",w))}},{key:"height",get:function(){const w=this.get("view.height")||0;if(0===w)return w;const g=this._getViewPadding();return Math.max(w-(g.top+g.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(w){this._overrideIfSome("padding",w)}},{key:"width",get:function(){const w=this.get("view.width")||0;if(0===w)return w;const g=this._getViewPadding();return Math.max(w-(g.left+g.right),0)}}]);return t}(f.EventedAccessor);
v.__decorate([B.property()],f.prototype,"container",null);v.__decorate([B.property()],f.prototype,"height",null);v.__decorate([B.property({value:c})],f.prototype,"padding",null);v.__decorate([G.cast("padding")],f.prototype,"castPadding",null);v.__decorate([B.property()],f.prototype,"view",void 0);v.__decorate([B.property()],f.prototype,"width",null);return f=v.__decorate([l.subclass("esri.views.ui.UI")],f)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){x=function(p){function e(c,n){var t=p.call(this,c,n)||this;t._isOpen=!1;t._attributionTextOverflowed=!1;t._prevSourceNodeHeight=0;t._resizeObserver=new ResizeObserver(z=>z.forEach(({target:w})=>t._checkSourceTextOverflow(w)));t.iconClass="esri-icon-description";t.itemDelimiter=" | ";t.messages=null;t.viewModel=new G;return t}m._inheritsLoose(e,p);var h=e.prototype;h.initialize=function(){this.addHandles(k.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))};
h.destroy=function(){this._resizeObserver?.disconnect()};h.render=function(){return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};h.renderPoweredBy=function(){return a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{class:"esri-attribution__link",href:"http://www.esri.com/",target:"_blank",
rel:"noreferrer"},"Esri"))};h.renderSourcesNode=function(){const c=this._isOpen,n=this._isInteractive,t=n?"0":"",{attributionText:z}=this;return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:c,["esri-interactive"]:n}),innerHTML:z,tabindex:t})};h._afterSourcesNodeCreate=function(c){this._prevSourceNodeHeight=c.clientWidth;this._resizeObserver.observe(c)};h._checkSourceTextOverflow=function(c){let n=
!1;const {clientHeight:t,clientWidth:z,scrollWidth:w}=c;c=w>z;const g=this._attributionTextOverflowed!==c;this._attributionTextOverflowed=c;g&&(n=!0);this._isOpen&&(c=t<this._prevSourceNodeHeight,this._prevSourceNodeHeight=t,c&&(this._isOpen=!1,n=!0));n&&this.scheduleRender()};h._toggleState=function(){this._isInteractive&&(this._isOpen=!this._isOpen)};m._createClass(e,[{key:"_isInteractive",get:function(){return this._isOpen||this._attributionTextOverflowed}},{key:"attributionText",get:function(){return this.viewModel.items.reduce((c,
n)=>{c.includes(n.text)||c.push(n.text);return c},[]).join(this.itemDelimiter)}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(c){this._overrideIfSome("label",c)}},{key:"view",get:function(){return this.viewModel.view},set:function(c){this.viewModel.view=c}}]);return e}(C);v.__decorate([f.property()],x.prototype,"_isOpen",void 0);v.__decorate([f.property()],x.prototype,"_isInteractive",null);v.__decorate([f.property()],x.prototype,"_attributionTextOverflowed",void 0);
v.__decorate([f.property()],x.prototype,"_prevSourceNodeHeight",void 0);v.__decorate([f.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],x.prototype,"attributionText",null);v.__decorate([f.property()],x.prototype,"iconClass",void 0);v.__decorate([f.property()],x.prototype,"itemDelimiter",void 0);v.__decorate([f.property()],x.prototype,"label",null);v.__decorate([f.property(),r.messageBundle("esri/widgets/Attribution/t9n/Attribution")],x.prototype,"messages",void 0);v.__decorate([f.property()],
x.prototype,"view",null);v.__decorate([f.property({type:G})],x.prototype,"viewModel",void 0);v.__decorate([l.accessibleHandler()],x.prototype,"_toggleState",null);return x=v.__decorate([B.subclass("esri.widgets.Attribution")],x)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../geometry ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../geometry/SpatialReference".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b,p){function e(t,z){return t&&"copyright"in t&&(!z||"function"===typeof t.originOf&&"user"===t.originOf("copyright"))}function h(t,z){return t.length!==z.length||t.some((w,g)=>w.text!==z[g].text)}function c(t,z,w){w&&z&&(t.find(g=>g.layerView===z&&g.text===w)||t.push({text:w,layerView:z}))}const n=[];k=function(t){function z(g){var q=t.call(this,g)||this;q._clear=()=>{q._fetchedAttributionData.clear();q._pendingAttributions.clear();q.handles.remove("suspension");
q.notifyChange("state")};q._pendingAttributions=new Set;q._fetchedAttributionData=new Map;q.items=new x;q.view=null;q._allLayerViewsChange=y=>{q.handles.remove("suspension");const F=q.get("view.allLayerViews");F&&q.handles.add(F.map(I=>B.watch(()=>[I.suspended,I.layer?.attributionVisible],()=>q._updateAttributionItems())),"suspension");y&&y.removed&&y.removed.forEach(I=>{q._pendingAttributions.delete(I);q._fetchedAttributionData.delete(I)});q._updateAttributionItems()};q.handles.add([B.on(()=>q.view?.allLayerViews,
"change",y=>q._allLayerViewsChange(y),{onListenerAdd:()=>q._allLayerViewsChange(),onListenerRemove:q._clear}),B.when(()=>!0===q.view?.stationary,()=>q._updateAttributionItems())]);return q}m._inheritsLoose(z,t);var w=z.prototype;w.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};w._updateAttributionItems=function(){const g=this.get("view.allLayerViews");n.length=0;g?(g.forEach(q=>{if(!q.suspended&&q.layer?.attributionVisible){var y=
q.layer;if(e(y,"user"))c(n,q,y.copyright);else if(y.hasAttributionData)if(this._fetchedAttributionData.has(q)){var F=this._fetchedAttributionData.get(q);F?c(n,q,this._getDynamicAttribution(F,this.view,y)):e(y)&&c(n,q,y.copyright)}else this._fetchAttributionData(q);else(F=y.get("portalItem.accessInformation"))?c(n,q,F):c(n,q,y.copyright)}}),h(this.items,n)&&(this.items.removeAll(),this.items.addMany(n)),n.length=0,this.notifyChange("state")):this._clear()};w._fetchAttributionData=function(){var g=
m._asyncToGenerator(function*(q){if(!this._pendingAttributions.has(q)){this._pendingAttributions.add(q);var y=yield f.result(q.layer.fetchAttributionData());this._pendingAttributions.has(q)&&(y=y.ok?this._createContributionIndex(y.value,"bing-maps"===q.layer.type):null,this._pendingAttributions.delete(q),this._fetchedAttributionData.set(q,y));this._updateAttributionItems()}});return function(q){return g.apply(this,arguments)}}();w._createContributionIndex=function(g,q){g=g.contributors;const y={};
if(!g)return y;for(let N=0;N<g.length;N++){const S=g[N];var F=S.coverageAreas;if(!F)return;for(const P of F){var I=P.bbox,K=P.zoomMin-(q&&P.zoomMin?1:0);F=P.zoomMax-(q&&P.zoomMax?1:0);for(I={extent:b.geographicToWebMercator({xmin:I[1],ymin:I[0],xmax:I[3],ymax:I[2],spatialReference:p.WGS84}),attribution:S.attribution||"",score:null!=P.score?P.score:100,id:N};K<=F;K++)y[K]=y[K]||[],y[K].push(I)}}y.maxKey=Math.max.apply(null,Object.keys(y));return y};w._getDynamicAttribution=function(g,q,y){const {extent:F,
scale:I}=q;y=y.tileInfo.scaleToZoom(I);y=Math.min(g.maxKey,Math.round(y));if(!F||null==y||-1>=y)return"";g=g[y];const K=b.project(F.center.clone().normalize(),q.spatialReference),N={};return g?g.filter(S=>{const P=!N[S.id]&&K&&a.extentContainsPoint(S.extent,K);P&&(N[S.id]=!0);return P}).sort((S,P)=>P.score-S.score||S.objectId-P.objectId).map(S=>S.attribution).join(", "):""};m._createClass(z,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":
"disabled"}}]);return z}(A.HandleOwner);v.__decorate([C.property({readOnly:!0,type:x})],k.prototype,"items",void 0);v.__decorate([C.property({readOnly:!0})],k.prototype,"state",null);v.__decorate([C.property()],k.prototype,"view",void 0);return k=v.__decorate([r.subclass("esri.widgets.Attribution.AttributionViewModel")],k)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a){f=function(b){function p(h,c){h=b.call(this,h,c)||this;h.iconClass="esri-icon-locate-circled";h.messages=null;h.viewModel=new C;return h}m._inheritsLoose(p,b);var e=p.prototype;e.reset=function(){return this.viewModel.reset()};e.render=function(){const {orientation:h,state:c}=this.viewModel;var n="disabled"===c,t="compass"===("rotation"===c?"rotation":"compass");const z=n?-1:0;n={["esri-disabled"]:n,["esri-interactive"]:!n};t={["esri-icon-compass"]:t,["esri-icon-dial"]:!t};
const {messages:w}=this;return r.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",n),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:z,"aria-label":w.reset,title:w.reset},r.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",t),styles:this._toRotationTransform(h)}),r.tsx("span",{class:"esri-icon-font-fallback-text"},w.reset))};e._reset=function(){this.viewModel.reset()};e._toRotationTransform=function(h){return{transform:`rotateZ(${h.z}deg)`}};
m._createClass(p,[{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(h){this.viewModel.goToOverride=h}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(h){this._overrideIfSome("label",h)}},{key:"view",get:function(){return this.viewModel.view},set:function(h){this.viewModel.view=h}}]);return p}(B);v.__decorate([k.property()],f.prototype,"goToOverride",null);v.__decorate([k.property()],f.prototype,"iconClass",void 0);v.__decorate([k.property()],
f.prototype,"label",null);v.__decorate([k.property(),l.messageBundle("esri/widgets/Compass/t9n/Compass")],f.prototype,"messages",void 0);v.__decorate([k.property()],f.prototype,"view",null);v.__decorate([k.property({type:C})],f.prototype,"viewModel",void 0);v.__decorate([G.accessibleHandler()],f.prototype,"_reset",null);return f=v.__decorate([A.subclass("esri.widgets.Compass")],f)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/Handles ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../support/GoTo".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r){k=function(a){function b(e){e=a.call(this,e)||this;e._handles=new f;e.orientation={x:0,y:0,z:0};e.view=null;e._updateForCamera=e._updateForCamera.bind(m._assertThisInitialized(e));e._updateForRotation=e._updateForRotation.bind(m._assertThisInitialized(e));e._updateRotationWatcher=e._updateRotationWatcher.bind(m._assertThisInitialized(e));return e}m._inheritsLoose(b,a);var p=b.prototype;p.initialize=function(){this._handles.add(A.watch(()=>this.view,this._updateRotationWatcher,
A.initial))};p.destroy=function(){this._handles=x.removeMaybe(this._handles);this.view=null};p.reset=function(){if(this.get("view.ready")){var e={};"2d"===this.view.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}};p._updateForRotation=function(e){void 0!==e&&null!==e&&(this.orientation={z:e})};p._updateForCamera=function(e){e&&(this.orientation={x:0,y:0,z:-e.heading})};p._updateRotationWatcher=function(e){this._handles.removeAll();e&&this._handles.add("2d"===e.type?A.watch(()=>e?.rotation,
this._updateForRotation,A.initial):A.watch(()=>e?.camera,this._updateForCamera,A.initial))};m._createClass(b,[{key:"canShowNorth",get:function(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return b}(r.GoToMixin(k));v.__decorate([B.property({readOnly:!0})],k.prototype,"canShowNorth",null);v.__decorate([B.property()],k.prototype,"orientation",
void 0);v.__decorate([B.property({readOnly:!0})],k.prototype,"state",null);v.__decorate([B.property()],k.prototype,"view",void 0);return k=v.__decorate([l.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a){f=function(b){function p(h,c){h=b.call(this,h,c)||this;h.iconClass="esri-icon-pan2";h.messages=null;h.viewModel=new C;return h}m._inheritsLoose(p,b);var e=p.prototype;e.toggle=function(){return this.viewModel.toggle()};e.render=function(){const h="disabled"===this.get("viewModel.state");var c="pan"===this.get("viewModel.navigationMode");const n={["esri-navigation-toggle__button--active"]:c};c={["esri-navigation-toggle__button--active"]:!c};const t=h?-1:0,z=this.messages.toggle;
return r.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:h,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:t,"aria-label":z,title:z},r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",n)},r.tsx("span",{class:"esri-icon-pan"})),r.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",c)},r.tsx("span",{class:"esri-icon-rotate"})))};e._toggle=function(){this.toggle()};m._createClass(p,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(h){this._overrideIfSome("label",h)}},{key:"layout",set:function(h){"horizontal"!==h&&(h="vertical");this._set("layout",h)}},{key:"view",get:function(){return this.viewModel.view},set:function(h){this.viewModel.view=h}}]);return p}(B);v.__decorate([k.property()],f.prototype,"iconClass",
void 0);v.__decorate([k.property()],f.prototype,"label",null);v.__decorate([k.property({value:"vertical"})],f.prototype,"layout",null);v.__decorate([k.property(),l.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],f.prototype,"messages",void 0);v.__decorate([k.property()],f.prototype,"view",null);v.__decorate([k.property({type:C})],f.prototype,"viewModel",void 0);v.__decorate([G.accessibleHandler()],f.prototype,"_toggle",null);return f=v.__decorate([A.subclass("esri.widgets.NavigationToggle")],
f)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(m,v,k,f,x,A,B,C){k=function(G){function l(a){a=G.call(this,a)||this;a.navigationMode="pan";a.view=null;return a}m._inheritsLoose(l,G);var r=
l.prototype;r.initialize=function(){this.own(f.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))};r.destroy=function(){this.view=null};r.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};r._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};m._createClass(l,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?
"ready":"disabled"}}]);return l}(k);v.__decorate([x.property({readOnly:!0})],k.prototype,"state",null);v.__decorate([x.property()],k.prototype,"navigationMode",void 0);v.__decorate([x.property()],k.prototype,"view",void 0);return k=v.__decorate([C.subclass("esri.widgets.NavigationToggleViewModel")],k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/maybe ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ./Widget ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(m,v,k,f,x,A,B,C,G,l,r,a,b){x=function(p){function e(c,n){c=p.call(this,c,n)||this;c.iconClass="esri-icon-zoom-in-magnifying-glass";c.messages=null;c.viewModel=new b;return c}m._inheritsLoose(e,p);var h=e.prototype;h.initialize=function(){this._zoomInButton=new a({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new a({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};h.destroy=function(){this._zoomInButton=k.destroyMaybe(this._zoomInButton);this._zoomOutButton=
k.destroyMaybe(this._zoomOutButton)};h.render=function(){const c={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:n,canZoomOut:t}=this.viewModel;this._zoomInButton.enabled=n;this._zoomOutButton.enabled=t;const {zoomIn:z,zoomOut:w}=this.messages;this._zoomInButton.title=z;this._zoomOutButton.title=w;return r.tsx("div",{class:this.classes("esri-zoom esri-widget",c)},this._zoomInButton.render(),this._zoomOutButton.render())};h.zoomIn=function(){return this.viewModel.zoomIn()};h.zoomOut=
function(){return this.viewModel.zoomOut()};m._createClass(e,[{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(c){this._overrideIfSome("label",c)}},{key:"layout",set:function(c){"horizontal"!==c&&(c="vertical");this._set("layout",c)}},{key:"view",get:function(){return this.viewModel.view},set:function(c){this.viewModel.view=c}}]);return e}(C);v.__decorate([f.property()],x.prototype,"iconClass",void 0);v.__decorate([f.property()],x.prototype,"label",null);v.__decorate([f.property({value:"vertical"})],
x.prototype,"layout",null);v.__decorate([f.property(),l.messageBundle("esri/widgets/Zoom/t9n/Zoom")],x.prototype,"messages",void 0);v.__decorate([f.property()],x.prototype,"view",null);v.__decorate([f.property({type:b})],x.prototype,"viewModel",void 0);return x=v.__decorate([B.subclass("esri.widgets.Zoom")],x)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../Widget ../support/decorators/accessibleHandler ../support/jsxFactory ../support/widgetUtils".split(" "),
function(m,v,k,f,x,A,B,C,G,l){f=function(r){function a(){var p=r.apply(this,arguments)||this;p.enabled=!0;p.iconClass="";p.title="";return p}m._inheritsLoose(a,r);var b=a.prototype;b.render=function(){const p=this.enabled?0:-1,e={[this.iconClass]:!!this.iconClass};return G.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:p,title:this.title},
G.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",e)}),G.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};b._triggerAction=function(){this.action.call(this)};return a}(B);v.__decorate([k.property()],f.prototype,"action",void 0);v.__decorate([k.property()],f.prototype,"enabled",void 0);v.__decorate([k.property()],f.prototype,"iconClass",void 0);v.__decorate([k.property()],f.prototype,"title",void 0);v.__decorate([C.accessibleHandler()],f.prototype,
"_triggerAction",null);return f=v.__decorate([A.subclass("esri.widgets.IconButton")],f)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/maybe ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(m,v,k,f,x,A,B,C,G,l,r){k=
function(a){function b(e){return a.call(this,e)||this}m._inheritsLoose(b,a);var p=b.prototype;p.destroy=function(){this.view=null};p.zoomIn=function(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():x.ignoreAbortErrors(e.goTo({zoomFactor:2}))}};p.zoomOut=function(){if(this.canZoomOut){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():x.ignoreAbortErrors(e.goTo({zoomFactor:.5}))}};m._createClass(b,[{key:"canZoomIn",get:function(){return f.isSome(this._zoomConditions)&&
this._zoomConditions.canZoomIn}},{key:"canZoomOut",get:function(){return f.isSome(this._zoomConditions)&&this._zoomConditions?.canZoomOut}},{key:"state",get:function(){return this.view?.ready?"ready":"disabled"}},{key:"view",set:function(e){e?"2d"===e.type?this._zoomConditions=new l({view:e}):"3d"===e.type&&(this._zoomConditions=new r({view:e})):this._zoomConditions=null;this._set("view",e)}}]);return b}(k);v.__decorate([A.property()],k.prototype,"_zoomConditions",void 0);v.__decorate([A.property()],
k.prototype,"canZoomIn",null);v.__decorate([A.property()],k.prototype,"canZoomOut",null);v.__decorate([A.property({readOnly:!0})],k.prototype,"state",null);v.__decorate([A.property()],k.prototype,"view",null);return k=v.__decorate([G.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B){k=function(C){function G(){return C.apply(this,arguments)||this}m._inheritsLoose(G,C);m._createClass(G,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const l=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMaxScale");return 0===r||l>r}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const l=this.get("view.animation.target.scale")||this.get("view.scale"),r=this.get("view.constraints.effectiveMinScale");
return 0===r||l<r}}]);return G}(k);v.__decorate([f.property({readOnly:!0})],k.prototype,"canZoomIn",null);v.__decorate([f.property({readOnly:!0})],k.prototype,"canZoomOut",null);v.__decorate([f.property()],k.prototype,"view",void 0);return k=v.__decorate([B.subclass("esri.widgets.Zoom.ZoomConditions2D")],k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/arrayUtils ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(m,v,k,f,x,A,B){k=function(C){function G(){return C.apply(this,arguments)||this}m._inheritsLoose(G,C);m._createClass(G,[{key:"canZoomIn",get:function(){return!!this.view.ready}},{key:"canZoomOut",get:function(){return!!this.view.ready}}]);return G}(k);v.__decorate([f.property({readOnly:!0})],k.prototype,"canZoomIn",null);v.__decorate([f.property({readOnly:!0})],k.prototype,"canZoomOut",null);v.__decorate([f.property()],k.prototype,"view",void 0);return k=v.__decorate([B.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(m,v,k,f,x,A,B,C){var G;f=G=function(l){function r(a){a=l.call(this,a)||this;a.color=new k([0,0,0,1]);return a}m._inheritsLoose(r,l);r.prototype.clone=function(){return new G(x.clone({color:this.color}))};
return r}(f.JSONSupport);v.__decorate([A.property({type:k,json:{write:!0}})],f.prototype,"color",void 0);return f=G=v.__decorate([C.subclass("esri.webmap.background.ColorBackground")],f)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../Graphic ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/iteratorUtils ../core/Logger ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/screenUtils ../core/Warning ../core/workers/workers ../core/accessorSupport/decorators/property ../core/arrayUtils ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/Point ../geometry/projection ../geometry/support/spatialReferenceUtils ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/Timeline ./support/createScreenshotPlan ./support/screenshotUtils ./support/screenUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(m,
v,k,f,x,A,B,C,G,l,r,a,b,p,e,h,c,n,t,z,w,g,q,y,F,I,K,N,S,P,J,L,T,H,u,d,E,D,M,Q,V,Z,ba,fa,ea,da,O,W,R,U,Y,ca){function ia(){return la.apply(this,arguments)}function la(){la=v._asyncToGenerator(function*(){const [,{GraphicsView2D:ua,GraphicContainer:xa,LabelManager:na,MapViewNavigation:X,MagnifierView2D:aa,Stage:ha}]=yield Promise.all([new Promise((ja,qa)=>m(["./2d/webglDeps"],ja,qa)),new Promise((ja,qa)=>m(["./2d/mapViewDeps"],ja,qa))]);ya=ua;Ca=xa;za=na;Fa=X;Ga=aa;ta=ha});return la.apply(this,arguments)}
function ka(ua){const xa=ua.getObjectId();return xa?`${ua.layer?.uid??ua.sourceLayer?.uid??"MapView"}/${xa}`:`"MapView/${ua.uid}`}function ma(ua,xa,na,X,aa){return ha=>{if(ha instanceof f){if(ha.layer===ua)aa?.();else{var ja=ua.allLayerViews.find(qa=>qa.layer===ha.layer);ja&&X?.(ja)}na(ka(ha))}else(ja=ua.allLayerViews.find(qa=>qa.layer===ha))&&xa(ja)}}function sa(ua,xa){if(ua)if(l.isIterable(ua))for(const na of ua)if(l.isIterable(na))for(const X of na)xa(X);else xa(na);else xa(ua)}let ta,ya,Ca,za,
Fa,Ga;t=function(ua){function xa(X){var aa=ua.call(this,X)||this;aa._magnifierView=null;aa._stage=null;aa._resolveWhenReady=[];aa.rootLayerViews=new B({getCollections:()=>[aa.basemapView?.baseLayerViews,aa.layerViews,aa.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});aa.featuresTilingScheme=null;aa.fullOpacity=1;aa.graphicsView=null;aa.labelManager=null;aa.mapViewNavigation=null;aa.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};
aa.rendering=!1;aa.supersampleScreenshotsEnabled=!1;aa.supportsGround=!1;aa._stationaryTimer=null;aa.frameTask=new T(v._assertThisInitialized(aa));aa._pePromise=null;aa.floors=new A;aa.highlightOptions=new ea;aa.inputManager=new ba({view:v._assertThisInitialized(aa)});aa.map=null;aa.resizeAlign="center";aa.spatialReferenceLocked=!1;aa.timeline=new da.Timeline;aa.type="2d";aa.ui=new Y;aa._pixelFormat={flipY:!0,premultipliedAlpha:!0};aa.constraints=new u;aa.padding={top:0,right:0,bottom:0,left:0};aa.handles.add([p.watch(()=>
aa.viewpoint,()=>{aa._lastStationaryEventTimestamp=performance.now();aa._flipStationary(160)},p.sync),aa.on("resize",ha=>aa._resizeHandler(ha)),p.watch(()=>aa.animationManager?.animation,ha=>{aa.animation=ha})]);c.initialize();return aa}v._inheritsLoose(xa,ua);var na=xa.prototype;na.destroy=function(){this._set("preconditionsReady",!1);this._gotoTask=this.frameTask=null;this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};na.goTo=function(X,aa){if(X)return this.animation&&
(this.animation=null),this._createAnimation(),p.whenOnce(()=>this.ready,aa).then(()=>{const ha={animate:!0,...aa},ja=Z.create(X,this);this.animation.update(ja);this._gotoTask={};return ha.animate?this._gotoAnimated(ja,ha):this._gotoImmediate(ja,ha)});r.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")};na.hitTest=function(){var X=v._asyncToGenerator(function*(aa,ha){const ja=R.isSupportedScreenPointEvent(aa)?R.createScreenPointFromSupportedEvent(this,aa):aa;if(!this.ready||
isNaN(ja.x)||isNaN(ja.y))return{screenPoint:ja,results:[]};let qa=new Set,oa=!1,ra=null,wa=null;ha?.include?sa(ha.include,ma(this,pa=>qa.add(pa),pa=>{ra||(ra=new Set);ra.add(pa)},pa=>qa.add(pa),()=>oa=!0)):(oa=!0,qa=new Set(this.allLayerViews));ha?.exclude&&sa(ha.exclude,ma(this,pa=>qa.delete(pa),pa=>{wa||(wa=new Set);wa.add(pa)}));ha=this.allLayerViews.filter(pa=>!pa.suspended&&qa.has(pa)).reverse();const va=this.toMap(ja);aa=oa?this.graphicsView.hitTest(va).map(pa=>({type:"graphic",graphic:pa,layer:null,
mapPoint:va})):[];ha=yield Promise.all(ha.map(pa=>pa.hitTest(va,ja)).toArray());aa=[...aa,...ha].filter(a.isSome).flat().filter(a.isSome);ra&&(aa=aa.filter(pa=>!("graphic"in pa)||!pa.graphic||ra.has(ka(pa.graphic))));wa&&(aa=aa.filter(pa=>!("graphic"in pa)||!pa.graphic||wa.has(ka(pa.graphic))));return{screenPoint:ja,results:aa}});return function(aa,ha){return X.apply(this,arguments)}}();na.takeScreenshot=function(){var X=v._asyncToGenerator(function*(aa){aa=this._createScreenshotPlan(aa);const ha=
yield this._stage.takeScreenshot(aa);return W.encode(ha,{format:aa.format,quality:aa.quality,rotation:0,disableDecorations:!1},this._pixelFormat)});return function(aa){return X.apply(this,arguments)}}();na._takeScreenshot=function(){var X=v._asyncToGenerator(function*(aa){aa=this._createScreenshotPlan(aa);aa=yield this._stage.takeScreenshot(aa);return W.encodeData(aa,this._pixelFormat)});return function(aa){return X.apply(this,arguments)}}();na._createScreenshotPlan=function(X){X=X||{};const aa=this.supersampleScreenshotsEnabled?
Math.min(4,W.getMaximumResolutionScale(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let ha;X.layers?(ha=[],X.layers.forEach(oa=>{const ra=this.allLayerViews.find(wa=>wa.layer.id===oa.id);ra&&"container"in ra&&ra.container&&ha.push(ra.container)})):ha=this._stage.children;const {format:ja,quality:qa}=W.getFormatAndQuality(X.format,X.quality);return O(X,aa,this.size,this.padding,ja,qa,ha,X.rotation)};na.toMap=function(X){if(!this.ready)return null;X=R.isSupportedScreenPointEvent(X)?
R.createScreenPointFromSupportedEvent(this,X):X;const [aa,ha]=this.state.toMap([0,0],[X.x,X.y]);return new q({x:aa,y:ha,spatialReference:this.spatialReference})};na.toScreen=function(X){if(!this.ready)return null;X=this._project(X,this.spatialReference);X=[X.x,X.y];this.state.toScreen(X,X);return e.createScreenPoint(X[0],X[1])};na.on=function(X,aa,ha,ja){return(ha=this.inputManager&&this.viewEvents.on(X,aa,ha,ja))?ha:ua.prototype.on.call(this,X,aa)};na.hasEventListener=function(X){return ua.prototype.hasEventListener.call(this,
X)||this.viewEvents.hasHandler(X)};na.whenLayerView=function(X){return ua.prototype.whenLayerView.call(this,X)};na.graphicChanged=function(X){this.graphicsView&&this.graphicsView.graphicUpdateHandler(X)};na.whenReady=function(){return new Promise(X=>{this.ready?X(this):this._resolveWhenReady.push(X)})};na.forceDOMReadyCycle=function(){this.forceReadyCycle()};na.getDefaultSpatialReference=function(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||
this.defaultsFromMap?.spatialReference||null};na.hasLayerViewModule=function(X){return H.layerView2DImporter.hasLayerViewModule(X)};na.importLayerView=function(X){return H.layerView2DImporter.importLayerView(X)};na.pixelSizeAt=function(){return this.ready?this.state.resolution:(r.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};na.popupHitTest=function(X){return this.hitTest(X).then(aa=>({...aa,mapPoint:this.toMap(X)}))};na.requestUpdate=function(){this.ready&&
this.frameTask.requestUpdate()};na.validate=function(){let X=U.check(this.type);G("safari")&&9>G("safari")&&(X=new C("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:G("safari")}));return a.isSome(X)?(r.getLogger(this.declaredClass).warn("#validate()",X.message),Promise.reject(X)):ia()};na._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new J;return this.animation};na._cancellableGoTo=
function(X,aa,ha){const ja=()=>X===this._gotoTask,qa=ha.then(()=>{ja()&&(this.animation=null)}).catch(ra=>{ja()&&(this.animation=null,aa.done||(aa.stop(),this.frameTask.animationInProgress=!1));throw ra;}),oa=new Promise(ra=>ra(qa));aa.when().catch(()=>{ja()&&oa.cancel&&oa.cancel()});return oa};na._gotoImmediate=function(X,aa){const ha=this._gotoTask,ja=this.animation;X=X.then(qa=>{b.throwIfAborted(aa);if(ha!==this._gotoTask)throw new C("view:goto-interrupted","Goto was interrupted");this.viewpoint=
ja.target=qa;ja.finish()});return this._cancellableGoTo(ha,ja,X)};na._flipStationary=function(X){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const aa=performance.now()-this._lastStationaryEventTimestamp;160>aa&&(this._stationaryTimer=this._flipStationary(aa))},X)};na._getDefaultViewpoint=function(){const {constraints:X,initialExtent:aa,map:ha,padding:ja,size:qa}=this;if(!X)return null;const oa=ha&&"initialViewProperties"in
ha&&ha.initialViewProperties;var ra=this._get("zoom"),wa=this._get("scale"),va=this._get("center"),pa=this._get("extent"),Ea=this._get("rotation"),Aa=this._get("viewpoint");X.effectiveLODs?-1!==ra&&(wa=X.zoomToScale(ra)):ra=-1;let Ba=null,Ha=null,Ia=0;ra=Aa&&Aa.rotation;const Da=Aa&&Aa.targetGeometry;a.isSome(Da)&&("extent"===Da.type?Ba=Da:"point"===Da.type&&(Ha=Da,Ia=Aa.scale));pa=pa||Ba||a.unwrap(oa?.viewpoint?.targetGeometry)?.extent||aa;va=va||Ha||pa?.center;wa=wa||Ia||oa?.viewpoint?.scale||pa&&
Z.extentToScale(pa,[qa[0]-ja.left-ja.right,qa[1]-ja.top-ja.bottom]);return va&&wa?new x({targetGeometry:va,scale:wa,rotation:Ea||ra||oa?.viewpoint?.rotation||0}):null};na._gotoAnimated=function(X,aa){const ha=this._gotoTask,ja=this.animation;X=X.then(qa=>{b.throwIfAborted(aa);if(ha!==this._gotoTask)throw new C("view:goto-interrupted","Goto was interrupted");ja.update(qa);this.animationManager.animate(ja,this.viewpoint,aa);return ja.when().then(()=>{},()=>{})});return this._cancellableGoTo(ha,ja,X)};
na._project=function(X,aa){const ha=X&&X.targetGeometry||X;if(!aa)return X;if(!ha)return null;if(aa.imageCoordinateSystem||ha.spatialReference?.imageCoordinateSystem||F.equals(aa,ha.spatialReference))return X;const ja=y.project(ha,aa);if(!ja)throw new C("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:ha,spatialReference:aa});return X&&"esri.Viewpoint"===X.declaredClass?(X.targetGeometry=ja,X):ja};na._resizeHandler=function(X){if(this.ready){var aa=
this.state,ha=this.state.paddedViewState.viewpoint,ja=this.state.paddedViewState.size.concat();aa.size=[X.width,X.height];Z.resize(ha,ha,ja,this.state.paddedViewState.size,this.resizeAlign);ha=this.constraints.constrain(ha,null);this.state.viewpoint=ha}};na._startup=function(){this.timeline.begin("MapView Startup");var X=this._getDefaultViewpoint();const aa=X.targetGeometry;try{this._project(X,this.spatialReference)}catch(ja){r.getLogger(this.declaredClass).warn(new h("mapview:startup-projection-error",
"projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:aa.toJSON(),spatialReference:this.spatialReference,error:ja})),X.targetGeometry=this.defaultsFromMap.extent?.center||new q({x:0,y:0,spatialReference:this.spatialReference})}this.constraints?.fit(X);this._set("state",new d({padding:this._get("padding"),size:this.size,viewpoint:X}));this.graphics.owner=this;const ha=new ta(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,
contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=ha;this._magnifierView=new Ga;this._magnifierView.magnifier=this.magnifier;X=new za({view:this});this._set("labelManager",X);X=new L({view:this});this._set("animationManager",X);X=new Fa({view:this,animationManager:X});this._set("mapViewNavigation",X);this._setupSpatialReferenceDependentProperties();this.handles.add([this.rootLayerViews.on("change",
()=>this._updateStageChildren()),ha.on("post-render",()=>this._set("rendering",ha.renderRequested)),ha.on("will-render",()=>this._set("rendering",ha.renderRequested)),ha.on("webgl-error",ja=>this.fatalError=ja.error),p.watch(()=>this.stationary,ja=>ha.stationary=ja,p.syncAndInitial),p.watch(()=>this.background,ja=>{ha.background=ja;this._magnifierView.background=ja},p.syncAndInitial),p.watch(()=>this.magnifier,ja=>this._magnifierView.magnifier=ja,p.syncAndInitial),p.watch(()=>this.renderingOptions,
ja=>ha.renderingOptions=ja,p.syncAndInitial),p.watch(()=>this.highlightOptions,ja=>ha.highlightOptions=ja,p.syncAndInitial),p.watch(()=>this.state.id,()=>ha.state=this.state,p.syncAndInitial)],"map-view");this._updateStageChildren();X=this._resolveWhenReady;this._resolveWhenReady=[];X.forEach(ja=>ja(this));this.timeline.end("MapView Startup");this.frameTask&&this.frameTask.start();this._set("ready",!0)};na._teardown=function(){this._destroySpatialReferenceDependentProperties();this.handles.remove("map-view");
this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask&&this.frameTask.stop();this._stationaryTimer&&(clearTimeout(this._stationaryTimer),
this._stationaryTimer=null);this._set("ready",!1);const {center:[X,aa],spatialReference:ha,rotation:ja,scale:qa}=this.state.paddedViewState,oa=new q({x:X,y:aa,spatialReference:ha});this._set("viewpoint",null);this._set("extent",null);this._set("center",oa);this._set("zoom",-1);this._set("rotation",ja);this._set("scale",qa);this._set("spatialReference",ha);this._set("state",null);this.animation=null};na._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(X=>
{this._stage.addChild(X.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};na._setupSpatialReferenceDependentProperties=function(){var X=new D(I.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",X);X=new ya({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ca(X)});this.frameTask.graphicsView=X;this._set("graphicsView",X)};na._destroySpatialReferenceDependentProperties=
function(){const X=this.graphicsView;this._set("graphicsView",null);this.frameTask.graphicsView=null;X.destroy();this._set("featuresTilingScheme",null)};na._spatialReferenceChanged=function(X){if(this.ready){this.frameTask.stop();for(var aa of this.allLayerViews)aa.processDetach();this._destroySpatialReferenceDependentProperties();aa=this.state.paddedViewState.clone();if(a.isNone(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=aa.scale;else{var ha=aa.viewpoint.clone();
ha.scale=this._scaleBeforeChangingSpatialReference;aa.viewpoint=ha}ha=aa.clone();var [ja,qa]=aa.center,oa=null;try{oa=this._project(new q({x:ja,y:qa,spatialReference:aa.spatialReference}),X)}catch(ra){y.isLoaded()||r.getLogger(this.declaredClass).warn(new h("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:oa.toJSON(),spatialReference:X,error:ra}))}oa||(oa=new q({x:0,y:0,spatialReference:X}));oa=Z.centerAt(new x({targetGeometry:new q,scale:0,
rotation:0}),aa.viewpoint,oa);ha.viewpoint=oa;try{const ra=[aa.size[0]/2,aa.size[1]/2],wa=[ra[0]+20,ra[1]],va=aa.toMap([0,0],wa),{x:pa,y:Ea}=this._project(new q({x:va[0],y:va[1],spatialReference:aa.spatialReference}),X);va[0]=pa;va[1]=Ea;ha.toScreen(va,va);const Aa=Z.angleBetween(ra,va,wa),Ba=Math.hypot(va[0]-ra[0],va[1]-ra[1])/20;!Number.isFinite(Ba)||4<Math.abs(Ba)?(oa.rotation=0,oa.targetGeometry=new q({x:0,y:0,spatialReference:X})):(oa.scale*=Ba,oa.scale>G("mapview-srswitch-adjust-rotation-scale-threshold")?
oa.rotation=0:oa.rotation+=Number.isFinite(Aa)?Aa:0)}catch{}this._get("constraints").constrain(oa,null);this._get("state").viewpoint=oa;this._stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const ra of this.allLayerViews)ra.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}};v._createClass(xa,[{key:"graphicsTileStore",get:function(){return new fa(this.featuresTilingScheme)}},{key:"initialExtentRequired",get:function(){const {scale:X,
constraints:aa,center:ha,viewpoint:ja,extent:qa}=this;let oa=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||qa)return!1;aa?.effectiveLODs||(oa=-1);return ha&&(0!==X||-1!==oa)||ja&&a.isSome(ja.targetGeometry)&&("extent"===ja.targetGeometry.type||ja.scale)?!1:!0}},{key:"resourceManager",get:function(){return this._stage.resourceManager}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"_defaultsFromMapSettings",
get:function(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}},{key:"_projectionEngineLoaded",get:function(){if(y.isLoaded())return!0;this._pePromise||(this._pePromise=y.load().finally(()=>{this._pePromise=null}));return!1}},{key:"typeSpecificPreconditionsReady",get:function(){var X=this._getDefaultViewpoint();if(!X)return!1;const aa=this.spatialReference;X=a.unwrap(X.targetGeometry);return y.canProjectWithoutEngine(X.spatialReference,
aa)?!0:this._projectionEngineLoaded}},{key:"animation",set:function(X){var aa=this._get("animation");X!==aa&&(aa&&aa.stop(),!X||X.isFulfilled()?this._set("animation",null):(this._set("animation",X),this.frameTask.animationInProgress=!0,aa=()=>{X===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame());this.frameTask&&(this.frameTask.animationInProgress=!1)},X.when(aa,aa)))}},{key:"background",get:function(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.background:
null},set:function(X){this._override("background",X)}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:X,spatialReference:aa}=this.state.paddedViewState;return new q({x:X[0],y:X[1],spatialReference:aa})},set:function(X){if(null!=X)if(this.ready){try{var aa=this._project(X,this.spatialReference)}catch(ha){r.getLogger(this.declaredClass).error(new C("mapview:invalid-center","could not project the value in the view's spatial reference",{input:X,error:ha}));return}X=
this.viewpoint;Z.centerAt(X,X,aa);this.viewpoint=X}else this._set("center",X),this.notifyChange("initialExtentRequired")}},{key:"constraints",set:function(X){const aa=this._get("constraints");aa&&(this.handles.remove("map-view-constraints"),aa.destroy());this._set("constraints",X);X&&(X.view=this,this.ready&&(this.state.viewpoint=X.fit(this.state.paddedViewState.viewpoint)),this.handles.add(p.watch(()=>X.version,()=>{this.ready&&this.state&&(this.state.viewpoint=X.fit(this.state.paddedViewState.viewpoint))},
p.sync),"map-view-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(X){if(null!=X)if(X.width&&X.height)if(this.ready){try{var aa=this._project(X,this.spatialReference)}catch(ha){r.getLogger(this.declaredClass).error(new C("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:ha}));return}X=this.viewpoint;Z.setExtent(X,X,aa,this.size,{constraints:this.constraints});this.viewpoint=
X}else this._set("extent",X),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired");else r.getLogger(this.declaredClass).error(new C("mapview:invalid-extent","invalid extent size"))}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(X){this.ready?(this.state.padding=X,this._set("padding",this.state.padding)):this._set("padding",X)}},{key:"resolution",get:function(){return this.state?
this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},set:function(X){if(!isNaN(X))if(this.ready){var aa=this.viewpoint;Z.rotateTo(aa,aa,X);this.viewpoint=aa}else this._set("rotation",X)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(X){if(X&&!isNaN(X))if(this.ready){var aa=this.viewpoint;Z.scaleTo(aa,aa,X);this.viewpoint=aa}else{this._set("scale",X);this._set("zoom",-1);if(X=this._get("extent"))this._set("extent",
null),this._set("center",X.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",get:function(){return!this.animation&&!this.navigating&&!this.resizing&&!this._stationaryTimer}},{key:"updating",get:function(){const X=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(aa=>!aa.destroyed&&!("layerViews"in aa)&&!0===aa.updating));
if(G("esri-2d-log-updating")){const aa=this.allLayerViews.reduce((ha,ja)=>({...ha,[ja.layer.id]:!ja.destroyed&&!("layerViews"in ja)&&ja.updating}),{});console.log(`Updating MapView: ${X}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(aa)}\n`)}return X}},
{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const X=this.state.paddedViewState;return X&&X.viewpoint.clone()},set:function(X){if(null!=X)if(this.ready){var aa;try{var ha=this._project(X,this.spatialReference);!X.scale||isNaN(X.scale)?aa=new C("mapview:invalid-viewpoint",`invalid scale value of ${X.scale}`):a.isNone(X.targetGeometry)&&(aa=new C("mapview:invalid-viewpoint","geometry not defined"))}catch(ja){aa=new C("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",
{error:ja})}aa?r.getLogger(this.declaredClass).error(aa):(this._scaleBeforeChangingSpatialReference=null,X=new x({targetGeometry:new q,scale:0,rotation:0}),Z.copy(X,ha),this.constraints.constrain(X,this.state.paddedViewState.viewpoint),this.state.viewpoint=X,this.frameTask.requestFrame(),this._set("viewpoint",X))}else this._set("viewpoint",X),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")}},{key:"zoom",get:function(){return this.ready?
this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(X){if(null!=X)if(this.ready)if(this.constraints.effectiveLODs){var aa=this.viewpoint;Z.scaleTo(aa,aa,this.constraints.zoomToScale(X));this.viewpoint=aa;this._set("zoom",this.constraints.scaleToZoom(this.scale))}else this._set("zoom",-1);else{this._set("zoom",X);this._set("scale",0);if(X=this._get("extent"))this._set("extent",null),this._set("center",X.center);this.notifyChange("initialExtentRequired")}}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||
!this.mapViewNavigation.interacting)}},{key:"test",get:function(){return{takeScreenshot:X=>this._takeScreenshot(X)}}}]);return xa}(K.BreakpointsOwner(N.DOMContainer(S.PopupView(P))));t.type="2d";k.__decorate([n.property({readOnly:!0})],t.prototype,"animationManager",void 0);k.__decorate([n.property({constructOnly:!0})],t.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([n.property({constructOnly:!0})],t.prototype,"debugWebGLExtensions",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,
"featuresTilingScheme",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"fullOpacity",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"graphicsTileStore",null);k.__decorate([n.property()],t.prototype,"graphicsView",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"state",void 0);k.__decorate([n.property()],t.prototype,"initialExtentRequired",null);k.__decorate([n.property()],t.prototype,"labelManager",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,
"resourceManager",null);k.__decorate([n.property({readOnly:!0})],t.prototype,"textureManager",null);k.__decorate([n.property({readOnly:!0})],t.prototype,"mapViewNavigation",void 0);k.__decorate([n.property({constructOnly:!0})],t.prototype,"renderCanvas",void 0);k.__decorate([n.property()],t.prototype,"renderingOptions",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"rendering",void 0);k.__decorate([n.property({constructOnly:!0})],t.prototype,"supersampleScreenshotsEnabled",void 0);k.__decorate([n.property({readOnly:!0})],
t.prototype,"supportsGround",void 0);k.__decorate([n.property()],t.prototype,"_stationaryTimer",void 0);k.__decorate([n.property()],t.prototype,"_defaultsFromMapSettings",null);k.__decorate([n.property()],t.prototype,"_pePromise",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"typeSpecificPreconditionsReady",null);k.__decorate([n.property()],t.prototype,"animation",null);k.__decorate([n.property({type:ca})],t.prototype,"background",null);k.__decorate([n.property({value:null,type:q,dependsOn:["state.id",
"ready"]})],t.prototype,"center",null);k.__decorate([n.property({type:u})],t.prototype,"constraints",null);k.__decorate([n.property({value:null,type:g,dependsOn:["state.id","ready"]})],t.prototype,"extent",null);k.__decorate([n.property()],t.prototype,"floors",void 0);k.__decorate([n.property({type:ea})],t.prototype,"highlightOptions",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"inputManager",void 0);k.__decorate([n.property()],t.prototype,"map",void 0);k.__decorate([n.property({value:{top:0,
right:0,bottom:0,left:0},cast:ua=>({top:0,right:0,bottom:0,left:0,...ua})})],t.prototype,"padding",null);k.__decorate([n.property()],t.prototype,"resizeAlign",void 0);k.__decorate([n.property({readOnly:!0,dependsOn:["state.id"]})],t.prototype,"resolution",null);k.__decorate([n.property({value:0,type:Number,dependsOn:["state.id","ready"]})],t.prototype,"rotation",null);k.__decorate([n.property({value:0,type:Number,dependsOn:["state.id","ready"]})],t.prototype,"scale",null);k.__decorate([n.property({constructOnly:!0})],
t.prototype,"spatialReferenceLocked",void 0);k.__decorate([n.property()],t.prototype,"stationary",null);k.__decorate([n.property({type:da.Timeline,readOnly:!0})],t.prototype,"timeline",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"type",void 0);k.__decorate([n.property({readOnly:!0})],t.prototype,"updating",null);k.__decorate([n.property({value:null,type:x,dependsOn:["state.id","ready"]})],t.prototype,"viewpoint",null);k.__decorate([n.property({value:-1,dependsOn:["state.id","ready"]})],
t.prototype,"zoom",null);k.__decorate([n.property({readOnly:!0})],t.prototype,"navigating",null);k.__decorate([n.property({type:Y})],t.prototype,"ui",void 0);return t=k.__decorate([w.subclass("esri.views.MapView")],t)});