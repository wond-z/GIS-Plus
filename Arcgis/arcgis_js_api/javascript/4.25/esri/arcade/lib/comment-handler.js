// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["exports","./types"],function(m,g){function l(h,f){return f?f.loc.end.line===h.loc.start.line&&f.loc.end.column<=h.loc.start.column:!1}let n=function(){function h(){this.comments=[];this._nodeStack=[];this._newComments=[]}var f=h.prototype;f.insertInnerComments=function(a){if(g.isBlockStatement(a)&&0===a.body.length){var b=[];for(let c=this._newComments.length-1;0<=c;--c){const d=this._newComments[c];a.range[1]>=d.range[0]&&(b.unshift(d),this._newComments.splice(c,1))}b.length&&(a.innerComments=
b)}};f.attachTrailingComments=function(a){if(a){var b=this._nodeStack[this._nodeStack.length-1];if(g.isBlockStatement(a)&&b.range[0]>=a.range[0]&&b.range[1]<=a.range[1])for(var c=this._newComments.length-1;0<=c;--c){var d=this._newComments[c];d.range[0]>=a.range[0]&&d.range[1]<=a.range[1]&&(b.trailingComments=[...(b.trailingComments??[]),d],this._newComments.splice(c,1))}c=[];if(0<this._newComments.length)for(d=this._newComments.length-1;0<=d;--d){const e=this._newComments[d];l(e,b)?(b.trailingComments=
[...(b.trailingComments??[]),e],this._newComments.splice(d,1)):l(e,a)&&(c.unshift(e),this._newComments.splice(d,1))}b?.trailingComments&&l(b.trailingComments[0],a)&&(c=[...c,...b.trailingComments],delete b.trailingComments);0<c.length&&(a.trailingComments=c)}};f.attachLeadingComments=function(a){if(a){for(var b;0<this._nodeStack.length;){var c=this._nodeStack[this._nodeStack.length-1];if(a.range[0]<=c.range[0])b=c,this._nodeStack.pop();else break}c=[];var d=[];if(b){var e=b.leadingComments?.length??
0;for(--e;0<=e;--e){const k=b.leadingComments[e];a.range[0]>=k.range[1]?(c.unshift(k),b.leadingComments.splice(e,1)):g.isVariableDeclarator(a)&&!g.isBlockComment(k)&&(d.unshift(k),b.leadingComments.splice(e,1))}0===b.leadingComments?.length&&delete b.leadingComments;c.length&&(a.leadingComments=c);d.length&&(a.trailingComments=[...d,...(a.trailingComments??[])])}else{for(b=this._newComments.length-1;0<=b;--b)d=this._newComments[b],a.range[0]>=d.range[0]&&(c.unshift(d),this._newComments.splice(b,1));
c.length&&(a.leadingComments=c)}}};f.attachComments=function(a){if(g.isProgram(a)&&0<a.body.length){const b=this._nodeStack[this._nodeStack.length-1];b?(b.trailingComments=[...(b.trailingComments??[]),...this._newComments],this._newComments.length=0,this._nodeStack.pop()):(a.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(a),this.attachLeadingComments(a),this.insertInnerComments(a),this._nodeStack.push(a)};f.collectComment=function(a){this.comments.push(a);
this._newComments.push(a)};return h}();m.CommentHandler=n;Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});