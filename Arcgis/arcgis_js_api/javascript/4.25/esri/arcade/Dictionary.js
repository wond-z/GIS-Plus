// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define(["../chunks/_rollupPluginBabelHelpers","./executionError","./ImmutableArray","../chunks/languageUtils","../geometry/Geometry"],function(p,l,t,f,q){function n(e,g=!1){if(null===e||void 0===e)return null;if(f.isNumber(e))return f.toNumber(e);if(f.isBoolean(e))return f.toBoolean(e);if(f.isString(e))return f.toString(e);if(f.isDate(e))return f.toDate(e);if(f.isArray(e)){var a=[];for(var b of e)a.push(n(b,g));return a}b=new r;b.immutable=!1;for(a of Object.keys(e)){const d=e[a];void 0!==d&&b.setField(a,
n(d,g))}b.immutable=g;return b}let r=function(){function e(a){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=a instanceof e?a.attributes:void 0===a?{}:null===a?{}:a}var g=e.prototype;g.field=function(a){const b=a.toLowerCase(),d=this.attributes[a];if(void 0!==d)return d;for(const c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw new l.ArcadeExecutionError(null,l.ExecutionErrorCodes.FieldNotFound,null,{key:a});
};g.setField=function(a,b){if(this.immutable)throw new l.ArcadeExecutionError(null,l.ExecutionErrorCodes.Immutable,null);if(f.isFunctionParameter(b))throw new l.ArcadeExecutionError(null,l.ExecutionErrorCodes.NoFunctionInDictionary,null);const d=a.toLowerCase();if(void 0===this.attributes[a])for(const c in this.attributes)if(c.toLowerCase()===d){this.attributes[c]=b;return}this.attributes[a]=b};g.hasField=function(a){const b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(const d in this.attributes)if(d.toLowerCase()===
b)return!0;return!1};g.keys=function(){let a=[];for(const b in this.attributes)a.push(b);return a=a.sort()};g.castToText=function(a=!1){let b="";for(const d in this.attributes){""!==b&&(b+=",");const c=this.attributes[d];null==c?b+=JSON.stringify(d)+":null":f.isBoolean(c)||f.isNumber(c)||f.isString(c)?b+=JSON.stringify(d)+":"+JSON.stringify(c):c instanceof q?b+=JSON.stringify(d)+":"+f.toStringExplicit(c):c instanceof t?b+=JSON.stringify(d)+":"+f.toStringExplicit(c,null,a):c instanceof Array?b+=JSON.stringify(d)+
":"+f.toStringExplicit(c,null,a):c instanceof Date?b=a?b+(JSON.stringify(d)+":"+JSON.stringify(c.getTime())):b+(JSON.stringify(d)+":"+JSON.stringify(c)):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(b+=JSON.stringify(d)+":"+c.castToText(a))}return"{"+b+"}"};e.convertObjectToArcadeDictionary=function(a,b=!0){const d=new e;d.immutable=!1;for(const c in a){const h=a[c];void 0!==h&&d.setField(c.toString(),n(h))}d.immutable=b;return d};e.convertJsonToArcade=function(a,b=!1){return n(a,b)};g.castAsJson=
function(a=null){const b={};for(let d in this.attributes){const c=this.attributes[d];void 0!==c&&(a?.keyTranslate&&(d=a.keyTranslate(d)),b[d]=f.castAsJson(c,a))}return b};g.castDictionaryValueAsJsonAsync=function(){var a=p._asyncToGenerator(function*(b,d,c,h=null,k){c=yield f.castAsJsonAsync(c,h,k);return b[d]=c});return function(b,d,c){return a.apply(this,arguments)}}();g.castAsJsonAsync=function(){var a=p._asyncToGenerator(function*(b=null,d=null){const c={},h=[];for(let k in this.attributes){const m=
this.attributes[k];d?.keyTranslate&&(k=d.keyTranslate(k));void 0!==m&&(f.isSimpleType(m)||m instanceof q||m instanceof Date?c[k]=f.castAsJson(m,d):h.push(this.castDictionaryValueAsJsonAsync(c,k,m,b,d)))}0<h.length&&(yield Promise.all(h));return c});return function(){return a.apply(this,arguments)}}();return e}();return r});