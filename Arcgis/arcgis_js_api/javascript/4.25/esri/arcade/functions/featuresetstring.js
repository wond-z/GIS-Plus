// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/_rollupPluginBabelHelpers ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared".split(" "),function(n,l,m,k,b,p){function q(d){return d&&d.domain?"coded-value"===d.domain.type||"codedValue"===d.domain.type?m.convertObjectToArcadeDictionary({type:"codedValue",name:d.domain.name,dataType:p.layerFieldEsriConstants[d.field.type],codedValues:d.domain.codedValues.map(e=>({name:e.name,code:e.code}))}):m.convertObjectToArcadeDictionary({type:"range",
name:d.domain.name,dataType:p.layerFieldEsriConstants[d.field.type],min:d.domain.min,max:d.domain.max}):null}n.registerFunctions=function(d){"async"===d.mode&&(d.functions.domain=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,2,3,e,f);if(b.isFeature(a[0]))return c=b.featureFullDomain(a[0],b.toString(a[1]),void 0===a[2]?void 0:b.toNumber(a[2])),q(c);if(b.isFeatureSet(a[0]))return yield a[0]._ensureLoaded(),c=b.getDomain(b.toString(a[1]),
a[0],null,void 0===a[2]?void 0:b.toNumber(a[2])),q(c);throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())},d.functions.subtypes=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,1,1,e,f);if(b.isFeature(a[0]))return(c=b.featureSubtypes(a[0]))?m.convertObjectToArcadeDictionary(c):null;if(b.isFeatureSet(a[0]))return yield a[0]._ensureLoaded(),(c=a[0].subtypes())?
m.convertObjectToArcadeDictionary(c):null;throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())},d.functions.domainname=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,2,4,e,f);if(b.isFeature(a[0]))return b.featureDomainValueLookup(a[0],b.toString(a[1]),a[2],void 0===a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return yield a[0]._ensureLoaded(),
c=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3])),b.getDomainValue(c,a[2]);throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())},d.signatures.push({name:"domainname",min:2,max:4}),d.functions.domaincode=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,2,4,e,f);if(b.isFeature(a[0]))return b.featureDomainCodeLookup(a[0],
b.toString(a[1]),a[2],void 0===a[3]?void 0:b.toNumber(a[3]));if(b.isFeatureSet(a[0]))return yield a[0]._ensureLoaded(),c=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:b.toNumber(a[3])),b.getDomainCode(c,a[2]);throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())},d.signatures.push({name:"domaincode",min:2,max:4}));d.functions.text=function(e,f){return d.standardFunctionAsync(e,f,(h,c,g)=>{b.pcCheck(g,
1,2,e,f);if(b.isFeatureSet(g[0])){c=b.defaultUndefined(g[1],"");if(""===c)return g[0].castToText();if("schema"===c.toLowerCase())return g[0].convertToText("schema",h.abortSignal);if("featureset"===c.toLowerCase())return g[0].convertToText("featureset",h.abortSignal)}else return b.toStringExplicit(g[0],g[1])})};d.functions.gdbversion=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,1,1,e,f);if(b.isFeature(a[0]))return a[0].gdbVersion();
if(b.isFeatureSet(a[0]))return(yield a[0].load()).gdbVersion;throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())};d.functions.schema=function(e,f){return d.standardFunctionAsync(e,f,function(){var h=l._asyncToGenerator(function*(c,g,a){b.pcCheck(a,1,1,e,f);if(b.isFeatureSet(a[0]))return yield a[0].load(),m.convertObjectToArcadeDictionary(a[0].schema());if(b.isFeature(a[0]))return(c=b.featureSchema(a[0]))?m.convertObjectToArcadeDictionary(c):
null;throw new k.ArcadeExecutionError(e,k.ExecutionErrorCodes.InvalidParameter,f);});return function(c,g,a){return h.apply(this,arguments)}}())}};Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});