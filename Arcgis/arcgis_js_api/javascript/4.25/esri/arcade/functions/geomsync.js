// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.25/esri/copyright.txt for details.
//>>built
define("exports ../../kernel ../kernel ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils ../executionError ../../core/unitUtils".split(" "),function(x,C,n,e,r,v,m,y,w,t,u,z,f,D){function A(h){return 0===C.version.indexOf("4.")?t.fromExtent(h):new t({spatialReference:h.spatialReference,rings:[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],
[h.xmax,h.ymin],[h.xmin,h.ymin]]]})}function B(h,l){if("polygon"!==h.type&&"polyline"!==h.type&&"extent"!==h.type)return 0;var p=1;if(h.spatialReference.vcsWkid||h.spatialReference.latestVcsWkid){p=r.getMetersPerVerticalUnitForSR(h.spatialReference);var b=D.getMetersPerUnitForSR(h.spatialReference);p/=b}b=0;if("polyline"===h.type)for(var d of h.paths)for(var c=1;c<d.length;c++)b+=r.segmentLength3d(d[c],d[c-1],p);else if("polygon"===h.type)for(c of h.rings){for(d=1;d<c.length;d++)b+=r.segmentLength3d(c[d],
c[d-1],p);if(c[0][0]!==c[c.length-1][0]||c[0][1]!==c[c.length-1][1]||void 0!==c[0][2]&&c[0][2]!==c[c.length-1][2])b+=r.segmentLength3d(c[0],c[c.length-1],p)}else"extent"===h.type&&(b+=2*r.segmentLength3d([h.xmin,h.ymin,0],[h.xmax,h.ymin,0],p),b+=2*r.segmentLength3d([h.xmin,h.ymin,0],[h.xmin,h.ymax,0],p),b=2*b+4*Math.abs(e.defaultUndefined(h.zmax,0)*p-e.defaultUndefined(h.zmin,0)*p));h=new u({hasZ:!1,hasM:!1,spatialReference:h.spatialReference,paths:[[0,0],[0,b]]});return k.planarLength(h,l)}let k=
null;x.registerFunctions=function(h,l){function p(b,d,c){e.pcCheck(c,2,2,b,d);if(!(c[0]instanceof m&&c[1]instanceof m||c[0]instanceof m&&null===c[1]||c[1]instanceof m&&null===c[0]||null===c[0]&&null===c[1]))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);}h.disjoint=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!0:k.disjoint(a[0],a[1])})};h.intersects=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);
p(b,d,a);return null===a[0]||null===a[1]?!1:k.intersects(a[0],a[1])})};h.touches=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!1:k.touches(a[0],a[1])})};h.crosses=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!1:k.crosses(a[0],a[1])})};h.within=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!1:k.within(a[0],
a[1])})};h.contains=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!1:k.contains(a[0],a[1])})};h.overlaps=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===a[1]?!1:k.overlaps(a[0],a[1])})};h.equals=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,2,2,b,d);return a[0]===a[1]?!0:a[0]instanceof m&&a[1]instanceof m?k.equals(a[0],a[1]):e.isDate(a[0])&&e.isDate(a[1])?a[0].getTime()===
a[1].getTime():!1})};h.relate=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,3,3,b,d);if(a[0]instanceof m&&a[1]instanceof m)return k.relate(a[0],a[1],e.toString(a[2]));if(a[0]instanceof m&&null===a[1]||a[1]instanceof m&&null===a[0]||null===a[0]&&null===a[1])return!1;throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);})};h.intersection=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]||null===
a[1]?null:k.intersect(a[0],a[1])})};h.union=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);c=[];if(0===a.length)throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.WrongNumberOfParameters,d);if(1===a.length)if(e.isArray(a[0]))for(a=e.autoCastFeatureToGeometry(a[0]),g=0;g<a.length;g++){if(null!==a[g]){if(!(a[g]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c.push(a[g])}}else if(e.isImmutableArray(a[0]))for(a=e.autoCastFeatureToGeometry(a[0].toArray()),
g=0;g<a.length;g++){if(null!==a[g]){if(!(a[g]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c.push(a[g])}}else{if(a[0]instanceof m)return e.fixSpatialReference(n.cloneGeometry(a[0]),b.spatialReference);if(null===a[0])return null;throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);}else for(g=0;g<a.length;g++)if(null!==a[g]){if(!(a[g]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c.push(a[g])}return 0===
c.length?null:k.union(c)})};h.difference=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null!==a[0]&&null===a[1]?n.cloneGeometry(a[0]):null===a[0]?null:k.difference(a[0],a[1])})};h.symmetricdifference=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);p(b,d,a);return null===a[0]&&null===a[1]?null:null===a[0]?n.cloneGeometry(a[1]):null===a[1]?n.cloneGeometry(a[0]):k.symmetricDifference(a[0],a[1])})};h.clip=function(b,d){return l(b,d,(c,g,a)=>
{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,2,b,d);if(!(a[1]instanceof v)&&null!==a[1])throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return null===a[1]?null:k.clip(a[0],a[1])})};h.cut=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,2,b,d);if(!(a[1]instanceof u)&&null!==a[1])throw new f.ArcadeExecutionError(b,
f.ExecutionErrorCodes.InvalidParameter,d);if(null===a[0])return[];if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return null===a[1]?[n.cloneGeometry(a[0])]:k.cut(a[0],a[1])})};h.area=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,1,2,b,d);a=e.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(e.isArray(a[0])||e.isImmutableArray(a[0]))return c=e.autoCastArrayOfPointsToPolygon(a[0],b.spatialReference),null===c?0:k.planarArea(c,n.convertSquareUnitsToCode(e.defaultUndefined(a[1],
-1)));if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.planarArea(a[0],n.convertSquareUnitsToCode(e.defaultUndefined(a[1],-1)))})};h.areageodetic=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,1,2,b,d);a=e.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(e.isArray(a[0])||e.isImmutableArray(a[0]))return c=e.autoCastArrayOfPointsToPolygon(a[0],b.spatialReference),null===c?0:k.geodesicArea(c,n.convertSquareUnitsToCode(e.defaultUndefined(a[1],
-1)));if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.geodesicArea(a[0],n.convertSquareUnitsToCode(e.defaultUndefined(a[1],-1)))})};h.length=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,1,2,b,d);a=e.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(e.isArray(a[0])||e.isImmutableArray(a[0]))return c=e.autoCastArrayOfPointsToPolyline(a[0],b.spatialReference),null===c?0:k.planarLength(c,n.convertLinearUnitsToCode(e.defaultUndefined(a[1],
-1)));if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.planarLength(a[0],n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1)))})};h.length3d=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,1,2,b,d);a=e.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(e.isArray(a[0])||e.isImmutableArray(a[0]))return c=e.autoCastArrayOfPointsToPolyline(a[0],b.spatialReference),null===c?0:!0===c.hasZ?B(c,n.convertLinearUnitsToCode(e.defaultUndefined(a[1],
-1))):k.planarLength(c,n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1)));if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return!0===a[0].hasZ?B(a[0],n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1))):k.planarLength(a[0],n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1)))})};h.lengthgeodetic=function(b,d){return l(b,d,(c,g,a)=>{e.pcCheck(a,1,2,b,d);a=e.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(e.isArray(a[0])||e.isImmutableArray(a[0]))return c=
e.autoCastArrayOfPointsToPolyline(a[0],b.spatialReference),null===c?0:k.geodesicLength(c,n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1)));if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.geodesicLength(a[0],n.convertLinearUnitsToCode(e.defaultUndefined(a[1],-1)))})};h.distance=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);c=a[0];if(e.isArray(a[0])||e.isImmutableArray(a[0]))c=e.autoCastArrayOfPointsToMultiPoint(a[0],
b.spatialReference);g=a[1];if(e.isArray(a[1])||e.isImmutableArray(a[1]))g=e.autoCastArrayOfPointsToMultiPoint(a[1],b.spatialReference);if(!(c instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(!(g instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.distance(c,g,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1)))})};h.distancegeodetic=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);
e.pcCheck(a,2,3,b,d);c=a[0];g=a[1];if(!(c instanceof w))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(!(g instanceof w))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);const q=new u({paths:[],spatialReference:c.spatialReference});q.addPath([c,g]);return k.geodesicLength(q,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1)))})};h.densify=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);if(null===
a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(0>=c)throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return a[0]instanceof t||a[0]instanceof u?k.densify(a[0],c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1))):a[0]instanceof v?k.densify(A(a[0]),c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],
-1))):a[0]})};h.densifygeodetic=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(0>=c)throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return a[0]instanceof t||a[0]instanceof u?k.geodesicDensify(a[0],
c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1))):a[0]instanceof v?k.geodesicDensify(A(a[0]),c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1))):a[0]})};h.generalize=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,4,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,
d);return k.generalize(a[0],c,e.toBoolean(e.defaultUndefined(a[2],!0)),n.convertLinearUnitsToCode(e.defaultUndefined(a[3],-1)))})};h.buffer=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return 0===c?n.cloneGeometry(a[0]):
k.buffer(a[0],c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1)))})};h.buffergeodetic=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return 0===c?n.cloneGeometry(a[0]):k.geodesicBuffer(a[0],c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],
-1)))})};h.offset=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,6,b,d);if(null===a[0])return null;if(!(a[0]instanceof t||a[0]instanceof u))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);c=e.toNumber(a[1]);if(isNaN(c))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);g=e.toNumber(e.defaultUndefined(a[4],10));if(isNaN(g))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);const q=
e.toNumber(e.defaultUndefined(a[5],0));if(isNaN(q))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.offset(a[0],c,n.convertLinearUnitsToCode(e.defaultUndefined(a[2],-1)),e.toString(e.defaultUndefined(a[3],"round")).toLowerCase(),g,q)})};h.rotate=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,2,3,b,d);c=a[0];if(null===c)return null;if(!(c instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);
c instanceof v&&(c=t.fromExtent(c));g=e.toNumber(a[1]);if(isNaN(g))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);a=e.defaultUndefined(a[2],null);if(null===a)return k.rotate(c,g);if(a instanceof w)return k.rotate(c,g,a);throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);})};h.centroid=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,1,1,b,d);if(null===a[0])return null;c=a[0];if(e.isArray(a[0])||e.isImmutableArray(a[0]))c=
e.autoCastArrayOfPointsToMultiPoint(a[0],b.spatialReference);if(null===c)return null;if(!(c instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return c instanceof w?e.fixSpatialReference(n.cloneGeometry(a[0]),b.spatialReference):c instanceof t?c.centroid:c instanceof u?r.centroidPolyline(c):c instanceof y?r.centroidMultiPoint(c):c instanceof v?c.center:null})};h.multiparttosinglepart=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,
1,1,b,d);g=[];if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);if(a[0]instanceof w||a[0]instanceof v)return[e.fixSpatialReference(n.cloneGeometry(a[0]),b.spatialReference)];c=k.simplify(a[0]);if(c instanceof t){a=[];g=[];for(var q=0;q<c.rings.length;q++)if(c.isClockwise(c.rings[q])){const E=z.fromJSON({rings:[c.rings[q]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()});a.push(E)}else g.push({ring:c.rings[q],
pt:c.getPoint(q,0)});for(c=0;c<g.length;c++)for(q=0;q<a.length;q++)if(a[q].contains(g[c].pt)){a[q].addRing(g[c].ring);break}return a}if(c instanceof u){a=[];for(g=0;g<c.paths.length;g++)q=z.fromJSON({paths:[c.paths[g]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJSON()}),a.push(q);return a}if(a[0]instanceof y){c=e.fixSpatialReference(n.cloneGeometry(a[0]),b.spatialReference);for(a=0;a<c.points.length;a++)g.push(c.getPoint(a));return g}return null})};h.issimple=function(b,
d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,1,1,b,d);if(null===a[0])return!0;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.isSimple(a[0])})};h.simplify=function(b,d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,1,1,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.simplify(a[0])})};h.convexhull=function(b,
d){return l(b,d,(c,g,a)=>{a=e.autoCastFeatureToGeometry(a);e.pcCheck(a,1,1,b,d);if(null===a[0])return null;if(!(a[0]instanceof m))throw new f.ArcadeExecutionError(b,f.ExecutionErrorCodes.InvalidParameter,d);return k.convexHull(a[0])})}};x.setGeometryEngine=function(h){k=h};Object.defineProperties(x,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});